{"version":3,"file":"static/js/908.f9de86c2.chunk.js","mappings":";gRAcIA,8QATAC,EAAS,CAACC,QAAS,CAAC,GAEpBC,EAAuB,kBAAZC,QAAuBA,QAAU,KAC5CC,EAAeF,GAAwB,oBAAZA,EAAEG,MAC7BH,EAAEG,MACF,SAAsBC,EAAQC,EAAUC,GACxC,OAAOC,SAASC,UAAUL,MAAMM,KAAKL,EAAQC,EAAUC,EACzD,EAIAT,EADEG,GAA0B,oBAAdA,EAAEU,QACCV,EAAEU,QACVC,OAAOC,sBACC,SAAwBR,GACvC,OAAOO,OAAOE,oBAAoBT,GAC/BU,OAAOH,OAAOC,sBAAsBR,GACzC,EAEiB,SAAwBA,GACvC,OAAOO,OAAOE,oBAAoBT,EACpC,EAOF,IAAIW,EAAcC,OAAOC,OAAS,SAAqBC,GACrD,OAAOA,IAAUA,CACnB,EAEA,SAASC,IACPA,EAAaC,KAAKX,KAAKY,KACzB,CACAvB,EAAOC,QAAUoB,EACjBrB,EAAOC,QAAQuB,KAwYf,SAAcC,EAASC,GACrB,OAAO,IAAIC,SAAQ,SAAUC,EAASC,GACpC,SAASC,EAAcC,GACrBN,EAAQO,eAAeN,EAAMO,GAC7BJ,EAAOE,EACT,CAEA,SAASE,IAC+B,oBAA3BR,EAAQO,gBACjBP,EAAQO,eAAe,QAASF,GAElCF,EAAQ,GAAGM,MAAMvB,KAAKwB,WACxB,CACAC,EAA+BX,EAASC,EAAMO,EAAU,CAAET,MAAM,IACnD,UAATE,GAMR,SAAuCD,EAASY,EAASC,GAC7B,oBAAfb,EAAQc,IACjBH,EAA+BX,EAAS,QAASY,EAASC,EAE9D,CATME,CAA8Bf,EAASK,EAAe,CAAEN,MAAM,GAElE,GACF,EAvZAH,EAAaA,aAAeA,EAE5BA,EAAaX,UAAU+B,aAAUC,EACjCrB,EAAaX,UAAUiC,aAAe,EACtCtB,EAAaX,UAAUkC,mBAAgBF,EAIvC,IAAIG,EAAsB,GAE1B,SAASC,EAAcC,GACrB,GAAwB,oBAAbA,EACT,MAAM,IAAIC,UAAU,0EAA4ED,EAEpG,CAoCA,SAASE,EAAiBC,GACxB,YAA2BR,IAAvBQ,EAAKN,cACAvB,EAAawB,oBACfK,EAAKN,aACd,CAkDA,SAASO,EAAa7C,EAAQ8C,EAAML,EAAUM,GAC5C,IAAIC,EACAtD,EACAuD,EA1HsBC,EAgJ1B,GApBAV,EAAcC,QAGCL,KADf1C,EAASM,EAAOmC,UAEdzC,EAASM,EAAOmC,QAAU5B,OAAO4C,OAAO,MACxCnD,EAAOqC,aAAe,SAIKD,IAAvB1C,EAAO0D,cACTpD,EAAOqD,KAAK,cAAeP,EACfL,EAASA,SAAWA,EAASA,SAAWA,GAIpD/C,EAASM,EAAOmC,SAElBc,EAAWvD,EAAOoD,SAGHV,IAAba,EAEFA,EAAWvD,EAAOoD,GAAQL,IACxBzC,EAAOqC,kBAeT,GAbwB,oBAAbY,EAETA,EAAWvD,EAAOoD,GAChBC,EAAU,CAACN,EAAUQ,GAAY,CAACA,EAAUR,GAErCM,EACTE,EAASK,QAAQb,GAEjBQ,EAASM,KAAKd,IAIhBO,EAAIL,EAAiB3C,IACb,GAAKiD,EAASO,OAASR,IAAMC,EAASQ,OAAQ,CACpDR,EAASQ,QAAS,EAGlB,IAAIC,EAAI,IAAIC,MAAM,+CACEV,EAASO,OAAS,IAAMI,OAAOd,GADjC,qEAIlBY,EAAEtC,KAAO,8BACTsC,EAAEvC,QAAUnB,EACZ0D,EAAEZ,KAAOA,EACTY,EAAEG,MAAQZ,EAASO,OA7KGN,EA8KHQ,EA7KnBI,SAAWA,QAAQC,MAAMD,QAAQC,KAAKb,EA8KxC,CAGF,OAAOlD,CACT,CAaA,SAASgE,IACP,IAAK/C,KAAKgD,MAGR,OAFAhD,KAAKjB,OAAO0B,eAAeT,KAAK6B,KAAM7B,KAAKiD,QAC3CjD,KAAKgD,OAAQ,EACY,IAArBpC,UAAU2B,OACLvC,KAAKwB,SAASpC,KAAKY,KAAKjB,QAC1BiB,KAAKwB,SAAS1C,MAAMkB,KAAKjB,OAAQ6B,UAE5C,CAEA,SAASsC,EAAUnE,EAAQ8C,EAAML,GAC/B,IAAI2B,EAAQ,CAAEH,OAAO,EAAOC,YAAQ9B,EAAWpC,OAAQA,EAAQ8C,KAAMA,EAAML,SAAUA,GACjF4B,EAAUL,EAAYM,KAAKF,GAG/B,OAFAC,EAAQ5B,SAAWA,EACnB2B,EAAMF,OAASG,EACRA,CACT,CAyHA,SAASE,EAAWvE,EAAQ8C,EAAM0B,GAChC,IAAI9E,EAASM,EAAOmC,QAEpB,QAAeC,IAAX1C,EACF,MAAO,GAET,IAAI+E,EAAa/E,EAAOoD,GACxB,YAAmBV,IAAfqC,EACK,GAEiB,oBAAfA,EACFD,EAAS,CAACC,EAAWhC,UAAYgC,GAAc,CAACA,GAElDD,EAsDT,SAAyBE,GAEvB,IADA,IAAIC,EAAM,IAAIC,MAAMF,EAAIlB,QACfqB,EAAI,EAAGA,EAAIF,EAAInB,SAAUqB,EAChCF,EAAIE,GAAKH,EAAIG,GAAGpC,UAAYiC,EAAIG,GAElC,OAAOF,CACT,CA3DIG,CAAgBL,GAAcM,EAAWN,EAAYA,EAAWjB,OACpE,CAmBA,SAASwB,EAAclC,GACrB,IAAIpD,EAASuB,KAAKkB,QAElB,QAAeC,IAAX1C,EAAsB,CACxB,IAAI+E,EAAa/E,EAAOoD,GAExB,GAA0B,oBAAf2B,EACT,OAAO,EACF,QAAmBrC,IAAfqC,EACT,OAAOA,EAAWjB,MAEtB,CAEA,OAAO,CACT,CAMA,SAASuB,EAAWL,EAAKO,GAEvB,IADA,IAAIC,EAAO,IAAIN,MAAMK,GACZJ,EAAI,EAAGA,EAAII,IAAKJ,EACvBK,EAAKL,GAAKH,EAAIG,GAChB,OAAOK,CACT,CA0CA,SAASpD,EAA+BX,EAASC,EAAMqB,EAAUT,GAC/D,GAA0B,oBAAfb,EAAQc,GACbD,EAAMd,KACRC,EAAQD,KAAKE,EAAMqB,GAEnBtB,EAAQc,GAAGb,EAAMqB,OAEd,IAAwC,oBAA7BtB,EAAQgE,iBAYxB,MAAM,IAAIzC,UAAU,6EAA+EvB,GATnGA,EAAQgE,iBAAiB/D,GAAM,SAASgE,EAAaC,GAG/CrD,EAAMd,MACRC,EAAQmE,oBAAoBlE,EAAMgE,GAEpC3C,EAAS4C,EACX,GAGF,CACF,CApaA9E,OAAOgF,eAAexE,EAAc,sBAAuB,CACzDyE,YAAY,EACZC,IAAK,WACH,OAAOlD,CACT,EACAmD,IAAK,SAASL,GACZ,GAAmB,kBAARA,GAAoBA,EAAM,GAAK1E,EAAY0E,GACpD,MAAM,IAAIM,WAAW,kGAAoGN,EAAM,KAEjI9C,EAAsB8C,CACxB,IAGFtE,EAAaC,KAAO,gBAEGoB,IAAjBnB,KAAKkB,SACLlB,KAAKkB,UAAY5B,OAAOqF,eAAe3E,MAAMkB,UAC/ClB,KAAKkB,QAAU5B,OAAO4C,OAAO,MAC7BlC,KAAKoB,aAAe,GAGtBpB,KAAKqB,cAAgBrB,KAAKqB,oBAAiBF,CAC7C,EAIArB,EAAaX,UAAUyF,gBAAkB,SAAyBZ,GAChE,GAAiB,kBAANA,GAAkBA,EAAI,GAAKtE,EAAYsE,GAChD,MAAM,IAAIU,WAAW,gFAAkFV,EAAI,KAG7G,OADAhE,KAAKqB,cAAgB2C,EACdhE,IACT,EAQAF,EAAaX,UAAU0F,gBAAkB,WACvC,OAAOnD,EAAiB1B,KAC1B,EAEAF,EAAaX,UAAUiD,KAAO,SAAcP,GAE1C,IADA,IAAI5C,EAAO,GACF2E,EAAI,EAAGA,EAAIhD,UAAU2B,OAAQqB,IAAK3E,EAAKqD,KAAK1B,UAAUgD,IAC/D,IAAIkB,EAAoB,UAATjD,EAEXpD,EAASuB,KAAKkB,QAClB,QAAeC,IAAX1C,EACFqG,EAAWA,QAA4B3D,IAAjB1C,EAAOsG,WAC1B,IAAKD,EACR,OAAO,EAGT,GAAIA,EAAS,CACX,IAAIE,EAGJ,GAFI/F,EAAKsD,OAAS,IAChByC,EAAK/F,EAAK,IACR+F,aAActC,MAGhB,MAAMsC,EAGR,IAAIxE,EAAM,IAAIkC,MAAM,oBAAsBsC,EAAK,KAAOA,EAAGC,QAAU,IAAM,KAEzE,MADAzE,EAAI0E,QAAUF,EACRxE,CACR,CAEA,IAAIM,EAAUrC,EAAOoD,GAErB,QAAgBV,IAAZL,EACF,OAAO,EAET,GAAuB,oBAAZA,EACTjC,EAAaiC,EAASd,KAAMf,OAE5B,KAAIkG,EAAMrE,EAAQyB,OACd6C,EAAYtB,EAAWhD,EAASqE,GACpC,IAASvB,EAAI,EAAGA,EAAIuB,IAAOvB,EACzB/E,EAAauG,EAAUxB,GAAI5D,KAAMf,EAHX,CAM1B,OAAO,CACT,EAgEAa,EAAaX,UAAUkG,YAAc,SAAqBxD,EAAML,GAC9D,OAAOI,EAAa5B,KAAM6B,EAAML,GAAU,EAC5C,EAEA1B,EAAaX,UAAU6B,GAAKlB,EAAaX,UAAUkG,YAEnDvF,EAAaX,UAAUmG,gBACnB,SAAyBzD,EAAML,GAC7B,OAAOI,EAAa5B,KAAM6B,EAAML,GAAU,EAC5C,EAoBJ1B,EAAaX,UAAUc,KAAO,SAAc4B,EAAML,GAGhD,OAFAD,EAAcC,GACdxB,KAAKgB,GAAGa,EAAMqB,EAAUlD,KAAM6B,EAAML,IAC7BxB,IACT,EAEAF,EAAaX,UAAUoG,oBACnB,SAA6B1D,EAAML,GAGjC,OAFAD,EAAcC,GACdxB,KAAKsF,gBAAgBzD,EAAMqB,EAAUlD,KAAM6B,EAAML,IAC1CxB,IACT,EAGJF,EAAaX,UAAUsB,eACnB,SAAwBoB,EAAML,GAC5B,IAAIgE,EAAM/G,EAAQgH,EAAU7B,EAAG8B,EAK/B,GAHAnE,EAAcC,QAGCL,KADf1C,EAASuB,KAAKkB,SAEZ,OAAOlB,KAGT,QAAamB,KADbqE,EAAO/G,EAAOoD,IAEZ,OAAO7B,KAET,GAAIwF,IAAShE,GAAYgE,EAAKhE,WAAaA,EACb,MAAtBxB,KAAKoB,aACTpB,KAAKkB,QAAU5B,OAAO4C,OAAO,cAEtBzD,EAAOoD,GACVpD,EAAOgC,gBACTT,KAAKoC,KAAK,iBAAkBP,EAAM2D,EAAKhE,UAAYA,SAElD,GAAoB,oBAATgE,EAAqB,CAGrC,IAFAC,GAAY,EAEP7B,EAAI4B,EAAKjD,OAAS,EAAGqB,GAAK,EAAGA,IAChC,GAAI4B,EAAK5B,KAAOpC,GAAYgE,EAAK5B,GAAGpC,WAAaA,EAAU,CACzDkE,EAAmBF,EAAK5B,GAAGpC,SAC3BiE,EAAW7B,EACX,KACF,CAGF,GAAI6B,EAAW,EACb,OAAOzF,KAEQ,IAAbyF,EACFD,EAAKG,QAiIf,SAAmBH,EAAMI,GACvB,KAAOA,EAAQ,EAAIJ,EAAKjD,OAAQqD,IAC9BJ,EAAKI,GAASJ,EAAKI,EAAQ,GAC7BJ,EAAKK,KACP,CAnIUC,CAAUN,EAAMC,GAGE,IAAhBD,EAAKjD,SACP9D,EAAOoD,GAAQ2D,EAAK,SAEQrE,IAA1B1C,EAAOgC,gBACTT,KAAKoC,KAAK,iBAAkBP,EAAM6D,GAAoBlE,EAC1D,CAEA,OAAOxB,IACT,EAEJF,EAAaX,UAAU4G,IAAMjG,EAAaX,UAAUsB,eAEpDX,EAAaX,UAAU6G,mBACnB,SAA4BnE,GAC1B,IAAIuD,EAAW3G,EAAQmF,EAGvB,QAAezC,KADf1C,EAASuB,KAAKkB,SAEZ,OAAOlB,KAGT,QAA8BmB,IAA1B1C,EAAOgC,eAUT,OATyB,IAArBG,UAAU2B,QACZvC,KAAKkB,QAAU5B,OAAO4C,OAAO,MAC7BlC,KAAKoB,aAAe,QACMD,IAAjB1C,EAAOoD,KACY,MAAtB7B,KAAKoB,aACTpB,KAAKkB,QAAU5B,OAAO4C,OAAO,aAEtBzD,EAAOoD,IAEX7B,KAIT,GAAyB,IAArBY,UAAU2B,OAAc,CAC1B,IACI0D,EADAC,EAAO5G,OAAO4G,KAAKzH,GAEvB,IAAKmF,EAAI,EAAGA,EAAIsC,EAAK3D,SAAUqB,EAEjB,oBADZqC,EAAMC,EAAKtC,KAEX5D,KAAKgG,mBAAmBC,GAK1B,OAHAjG,KAAKgG,mBAAmB,kBACxBhG,KAAKkB,QAAU5B,OAAO4C,OAAO,MAC7BlC,KAAKoB,aAAe,EACbpB,IACT,CAIA,GAAyB,oBAFzBoF,EAAY3G,EAAOoD,IAGjB7B,KAAKS,eAAeoB,EAAMuD,QACrB,QAAkBjE,IAAdiE,EAET,IAAKxB,EAAIwB,EAAU7C,OAAS,EAAGqB,GAAK,EAAGA,IACrC5D,KAAKS,eAAeoB,EAAMuD,EAAUxB,IAIxC,OAAO5D,IACT,EAmBJF,EAAaX,UAAUiG,UAAY,SAAmBvD,GACpD,OAAOyB,EAAWtD,KAAM6B,GAAM,EAChC,EAEA/B,EAAaX,UAAUgH,aAAe,SAAsBtE,GAC1D,OAAOyB,EAAWtD,KAAM6B,GAAM,EAChC,EAEA/B,EAAaiE,cAAgB,SAAS7D,EAAS2B,GAC7C,MAAqC,oBAA1B3B,EAAQ6D,cACV7D,EAAQ6D,cAAclC,GAEtBkC,EAAc3E,KAAKc,EAAS2B,EAEvC,EAEA/B,EAAaX,UAAU4E,cAAgBA,EAiBvCjE,EAAaX,UAAUiH,WAAa,WAClC,OAAOpG,KAAKoB,aAAe,EAAI5C,EAAewB,KAAKkB,SAAW,EAChE,EAwEA,IAAImF,EAAiB5H,EAAOC,QAc5B,SAAS4H,EAAUC,EAAQC,EAAcC,GACrC,IAAIC,OAA6BvF,IAAjBqF,EAA6B,KAAOA,EAEhDG,EAfR,SAAsBJ,EAAQK,GAC1B,IAAIC,EAAeC,KAAKP,GACxB,GAAIK,EAAe,CAEf,IADA,IAAIG,EAAa,IAAIC,WAAWH,EAAatE,QACpCqB,EAAI,EAAGI,EAAI6C,EAAatE,OAAQqB,EAAII,IAAKJ,EAC9CmD,EAAWnD,GAAKiD,EAAaI,WAAWrD,GAE5C,OAAOjB,OAAOuE,aAAapI,MAAM,KAAM,IAAIqI,YAAYJ,EAAWK,QACtE,CACA,OAAOP,CACX,CAKiBQ,CAAad,OADepF,IAArBsF,GAAyCA,GAEzDa,EAAQX,EAAOY,QAAQ,KAAM,IAAM,EACnCC,EAAOb,EAAOc,UAAUH,IAAUZ,EAAY,wBAA4BA,EAAY,IACtFgB,EAAO,IAAIC,KAAK,CAACH,GAAO,CAAE3F,KAAM,2BACpC,OAAO+F,IAAIC,gBAAgBH,EAC/B,CAUA,IAAII,EARJ,SAAmCvB,EAAQC,EAAcC,GACrD,IAAIsB,EACJ,OAAO,SAAuBC,GAE1B,OADAD,EAAMA,GAAOzB,EAAUC,EAAQC,EAAcC,GACtC,IAAIwB,OAAOF,EAAKC,EAC3B,CACJ,CAEoBE,CAA0B,uureAAwure,MAAM,GAGtxreC,EAAe,SAAAC,IAAAC,EAAAA,EAAAA,GAAAF,EAAAC,GAAA,IAAAE,GAAAC,EAAAA,EAAAA,GAAAJ,GAyEnB,SAAAA,EAAYK,GAAM,IAAAC,GAAAC,EAAAA,EAAAA,GAAA,KAAAP,GAChB,IAAAQ,EAeIH,EAdFI,WAAAA,OAAU,IAAAD,GAAQA,EAAAE,EAchBL,EAbFM,UAAAA,OAAS,IAAAD,EAAG,EAACA,EAAAE,EAaXP,EAZFQ,WAAAA,OAAU,IAAAD,EAAG,QAAOA,EAAAE,EAYlBT,EAXFU,uBAAAA,OAAsB,IAAAD,EAAG,CACvBE,yBAA0B,KAC3BF,EAAAG,EASCZ,EARFa,gBAAAA,OAAe,IAAAD,EAAG,KAAIA,EAAAE,EAQpBd,EAPFe,QAAAA,OAAO,IAAAD,EAAG,CAAC,GAAI,KAAM,GAAEA,EAAAE,EAOrBhB,EANFiB,WAAAA,OAAU,IAAAD,EAAG,EAACA,EAAAE,EAMZlB,EALFmB,kBAAAA,OAAiB,IAAAD,GAAQA,EAAAE,EAKvBpB,EAJFqB,kBAAAA,OAAiB,IAAAD,EAAG,EAACA,EAAAE,EAInBtB,EAHFuB,KAAAA,OAAI,IAAAD,EAAG,IAAIA,EAAAE,EAGTxB,EAFFyB,OAAAA,OAAM,IAAAD,EAAG,KAAIA,EAAAE,EAEX1B,EADF2B,UAAAA,OAAS,IAAAD,EAAG,KAAKA,EAsBjB,OApBFzB,EAAAH,EAAAlJ,KAAA,OACKgL,aAAe,GACpB3B,EAAK4B,OAAS,KACd5B,EAAK6B,OAAS,CACZ1B,WAAAA,EACAE,UAAAA,EACAE,WAAAA,EACAE,uBAAAA,EACAG,gBAAAA,EACAE,QAAAA,EACAE,WAAAA,EACAE,kBAAAA,EACAE,kBAAAA,EACAE,KAAAA,EACAE,OAAAA,EACAE,UAAAA,GAEF1B,EAAK8B,QAAU,CACbC,UAAW,IAAIC,aAAoB,EAAPV,GAC5BW,YAAa,IAAID,aAAoB,EAAPV,IAC9BtB,CACJ,CAqsBC,OArsBAkC,EAAAA,EAAAA,GAAAxC,EAAA,EAAAlC,IAAA,YAAAzB,IA9GD,WACE,OAAOxE,KAAKsK,OAAOxB,SACrB,EAACrE,IAED,SAAc5E,GACZG,KAAKsK,OAAOxB,UAAYjJ,EACxBG,KAAK4K,YAAY,CACfC,GAAI,eACJC,MAAOjL,GAEX,GAAC,CAAAoG,IAAA,aAAAzB,IAED,WACE,OAAOxE,KAAKsK,OAAOtB,UACrB,EAACvE,IAED,SAAe5E,GACbG,KAAKsK,OAAOtB,WAAanJ,EACzBG,KAAK4K,YAAY,CACfC,GAAI,gBACJC,MAAOjL,GAEX,GAAC,CAAAoG,IAAA,kBAAAzB,IAED,WACE,OAAOxE,KAAKsK,OAAOjB,eACrB,EAAC5E,IAED,SAAoB5E,GAClBG,KAAKsK,OAAOjB,gBAAkBxJ,EAC9BG,KAAK4K,YAAY,CACfC,GAAI,qBACJC,MAAOjL,GAEX,GAAC,CAAAoG,IAAA,UAAAzB,IAED,WACE,OAAOxE,KAAKsK,OAAOf,OACrB,EAAC9E,IAED,SAAY5E,GACVG,KAAKsK,OAAOf,QAAU1J,EACtBG,KAAK4K,YAAY,CACfC,GAAI,aACJC,MAAOjL,GAEX,GAAC,CAAAoG,IAAA,aAAAzB,IAED,WACE,OAAOxE,KAAKsK,OAAOb,UACrB,EAAChF,IAED,SAAe5E,GACbG,KAAKsK,OAAOb,WAAa5J,EACzBG,KAAK4K,YAAY,CACfC,GAAI,gBACJC,MAAOjL,GAEX,GAAC,CAAAoG,IAAA,YAAAzB,IAED,WACE,OAAOxE,KAAKsK,OAAOH,SACrB,EAAC1F,IAED,SAAc5E,GACZG,KAAKsK,OAAOH,UAAYtK,EACxBG,KAAK4K,YAAY,CACfC,GAAI,eACJC,MAAOjL,GAEX,GAAC,CAAAoG,IAAA,YAAApG,MA0CD,SAAUkL,GACR,IACED,EAGEC,EAHFD,MACAjJ,EAEEkJ,EAFFlJ,KACAmJ,EACED,EADFC,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,YACJC,MAAAA,EACAjJ,KAAAA,EACAmJ,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,gBAAApG,MAED,SAAcoL,GACZ,IAAAC,GAAAC,EAAAA,EAAAA,GAIIF,EAHFH,MAAK,GAAGM,EAAIF,EAAA,GAAEG,EAAIH,EAAA,GAAEI,EAAKJ,EAAA,GACzBrJ,EAEEoJ,EAFFpJ,KACAmJ,EACEC,EADFD,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,gBACJC,MAAO,CAACM,EAAMC,EAAMC,GACpBzJ,KAAAA,EACAmJ,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,qBAAApG,MAED,SAAmB0L,GACjB,IACET,EAEES,EAFFT,MACAE,EACEO,EADFP,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,qBACJC,MAAAA,EACAE,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,SAAApG,MAED,SAAO2L,GACL,IACEV,EAEEU,EAFFV,MACAE,EACEQ,EADFR,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,SACJC,MAAAA,EACAE,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,oBAAApG,MAED,SAAkB4L,GAChB,IAAAC,GAAAP,EAAAA,EAAAA,GAGIM,EAFFX,MAAK,GAAGa,EAAeD,EAAA,GAAEE,EAAUF,EAAA,GAAEG,EAAUH,EAAA,GAAEI,EAAgBJ,EAAA,GAAEK,EAAcL,EAAA,GAAEM,EAAWN,EAAA,GAC9FV,EACES,EADFT,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,oBACJC,MAAO,CAACa,EAAiBC,EAAYC,EAAYC,EAAkBC,EAAgBC,GACnFhB,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,YAAApG,MAED,SAAUoM,GACR,IAAAC,GAAAf,EAAAA,EAAAA,GAGIc,EAFFnB,MAAK,GAAGM,EAAIc,EAAA,GAAEb,EAAIa,EAAA,GAAEZ,EAAKY,EAAA,GACzBlB,EACEiB,EADFjB,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,YACJC,MAAO,CAACM,EAAMC,EAAMC,GACpBN,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,aAAApG,MAED,SAAWsM,GACT,IACErB,EAEEqB,EAFFrB,MACAE,EACEmB,EADFnB,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,aACJC,MAAAA,EACAE,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,eAAApG,MAED,SAAauM,GACX,IACEtB,EAEEsB,EAFFtB,MACAE,EACEoB,EADFpB,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,eACJC,MAAAA,EACAE,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,kBAAApG,MAED,SAAgBwM,GACd,IACEvB,EAEEuB,EAFFvB,MACAE,EACEqB,EADFrB,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,kBACJC,MAAAA,EACAE,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,oBAAApG,MAED,SAAkByM,GAChB,IACExB,EAEEwB,EAFFxB,MACAE,EACEsB,EADFtB,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,oBACJC,MAAAA,EACAE,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,iCAAApG,MAED,SAA+B0M,GAC7B,IACEzB,EAEEyB,EAFFzB,MACAE,EACEuB,EADFvB,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,iCACJC,MAAAA,EACAE,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,cAAApG,MAED,SAAY2M,GACV,IACE1B,EAEE0B,EAFF1B,MACAE,EACEwB,EADFxB,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,cACJC,MAAAA,EACAE,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,UAAApG,MAED,WAAU,IAAA4M,EAAA,KACRzM,KAAKqK,OAAS,IAAIvC,EAElB9H,KAAKqK,OAAOqC,UAAY,SAAAzH,GACtB,GAAwB,UAApBA,EAAQ0H,KAAK9B,GAIf,OAHA4B,EAAKlC,QAAQC,UAAYvF,EAAQ0H,KAAKnC,UACtCiC,EAAKlC,QAAQG,YAAczF,EAAQ0H,KAAKjC,iBACxC+B,EAAKrK,KAAK6C,EAAQ0H,KAAK9B,GAAI5F,EAAQ0H,MAIrCF,EAAKrK,KAAK6C,EAAQ0H,KAAK9K,KAAMoD,EAAQ0H,KACvC,EAAE,IAEqCC,EAFrCC,GAAAC,EAAAA,EAAAA,GAEoB9M,KAAKoK,cAAY,IAAvC,IAAAyC,EAAAE,MAAAH,EAAAC,EAAA7I,KAAAgJ,MAAyC,KAA9B/H,EAAO2H,EAAA/M,MAChBG,KAAKqK,OAAOO,YAAY3F,EAC1B,CAAC,OAAAzE,GAAAqM,EAAAI,EAAAzM,EAAA,SAAAqM,EAAAK,GAAA,CAEDlN,KAAKoK,aAAa7H,OAAS,CAC7B,GAAC,CAAA0D,IAAA,oBAAApG,MAED,SAAkBsN,GAChB,IACEnC,EACEmC,EADFnC,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,oBACJG,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,yBAAApG,MAED,SAAuBuN,GACrB,IACEpC,EACEoC,EADFpC,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,yBACJG,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,aAAApG,MAED,WACMG,KAAKqK,SAAQrK,KAAKqK,OAAOqC,UAAY,KAC3C,GAAC,CAAAzG,IAAA,mBAAApG,MAED,SAAiBwN,GACf,IACErC,EACEqC,EADFrC,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,mBACJG,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,wBAAApG,MAED,SAAsByN,GACpB,IACEtC,EACEsC,EADFtC,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,wBACJG,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,OAAApG,MAED,WACE,IAAA0N,EAYIvN,KAAKsK,OAXP1B,EAAU2E,EAAV3E,WACAE,EAASyE,EAATzE,UACAE,EAAUuE,EAAVvE,WACAE,EAAsBqE,EAAtBrE,uBACAG,EAAekE,EAAflE,gBACAE,EAAOgE,EAAPhE,QACAE,EAAU8D,EAAV9D,WACAE,EAAiB4D,EAAjB5D,kBACAE,EAAiB0D,EAAjB1D,kBACAI,EAAMsD,EAANtD,OACAE,EAASoD,EAATpD,UAEFnK,KAAK4K,YAAY,CACfC,GAAI,OACJC,MAAO,CACLlC,WAAAA,EACAE,UAAAA,EACAE,WAAAA,EACAE,uBAAAA,EACAG,gBAAAA,EACAE,QAAAA,EACAE,WAAAA,EACAE,kBAAAA,EACAE,kBAAAA,EACAI,OAAAA,EACAE,UAAAA,IAGN,GAAC,CAAAlE,IAAA,eAAApG,MAED,SAAa2N,GACX,IACExC,EACEwC,EADFxC,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,eACJG,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,mBAAApG,MAED,SAAiB4N,GACf,IACEzC,EACEyC,EADFzC,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,mBACJG,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,wBAAApG,MAED,SAAsB6N,GACpB,IACE1C,EACE0C,EADF1C,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,wBACJG,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,YAAApG,MAED,SAAU8N,GACR,IACE3C,EACE2C,EADF3C,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,YACJG,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,uBAAApG,MAED,SAAqB+N,GACnB,IACE5C,EACE4C,EADF5C,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,uBACJG,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,eAAApG,MAED,SAAagO,GACX,IACE7C,EACE6C,EADF7C,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,eACJG,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,gBAAApG,MAED,SAAciO,GACZ,IACEhD,EAEEgD,EAFFhD,MACAE,EACE8C,EADF9C,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,gBACJC,MAAAA,EACAE,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,oBAAApG,MAED,SAAkBkO,GAChB,IACEjD,EAEEiD,EAFFjD,MACAE,EACE+C,EADF/C,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,oBACJC,MAAAA,EACAE,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,mBAAApG,MAED,SAAiBmO,GACf,IACElD,EAEEkD,EAFFlD,MACAE,EACEgD,EADFhD,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,mBACJC,MAAAA,EACAE,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,qBAAApG,MAED,SAAmBoO,GACjB,IACEnD,EAEEmD,EAFFnD,MACAE,EACEiD,EADFjD,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,qBACJC,MAAAA,EACAE,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,0BAAApG,MAED,SAAwBqO,GACtB,IACEpD,EAEEoD,EAFFpD,MACAE,EACEkD,EADFlD,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,0BACJC,MAAAA,EACAE,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,yBAAApG,MAED,SAAuBsO,GACrB,IACErD,EAEEqD,EAFFrD,MACAE,EACEmD,EADFnD,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,yBACJC,MAAAA,EACAE,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,uBAAApG,MAED,SAAqBuO,GACnB,IACEtD,EAEEsD,EAFFtD,MACAE,EACEoD,EADFpD,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,uBACJC,MAAAA,EACAE,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,6BAAApG,MAED,SAA2BwO,GACzB,IACEvD,EAEEuD,EAFFvD,MACAE,EACEqD,EADFrD,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,6BACJC,MAAAA,EACAE,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,0BAAApG,MAED,SAAwByO,GACtB,IACExD,EAEEwD,EAFFxD,MACAE,EACEsD,EADFtD,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,0BACJC,MAAAA,EACAE,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,mBAAApG,MAED,SAAiB0O,GACf,IACEzD,EAEEyD,EAFFzD,MACAE,EACEuD,EADFvD,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,mBACJC,MAAAA,EACAE,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,eAAApG,MAED,SAAa2O,GACX,IACE1D,EAEE0D,EAFF1D,MACAE,EACEwD,EADFxD,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,eACJC,MAAAA,EACAE,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,mBAAApG,MAED,SAAiB4O,GACf,IACE3D,EAEE2D,EAFF3D,MACAE,EACEyD,EADFzD,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,mBACJC,MAAAA,EACAE,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,kBAAApG,MAED,SAAgB6O,GACd,IACE5D,EAEE4D,EAFF5D,MACAE,EACE0D,EADF1D,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,kBACJC,MAAAA,EACAE,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,UAAApG,MAED,SAAQ8O,GACN,IACE7D,EAEE6D,EAFF7D,MACAE,EACE2D,EADF3D,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,UACJC,MAAAA,EACAE,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,cAAApG,MAED,SAAY+O,GACV,IACE9D,EAEE8D,EAFF9D,MACAE,EACE4D,EADF5D,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,cACJC,MAAAA,EACAE,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,cAAApG,MAED,SAAYgP,GACV,IACE/D,EAEE+D,EAFF/D,MACAE,EACE6D,EADF7D,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,cACJC,MAAAA,EACAE,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,gBAAApG,MAED,SAAciP,GACZ,IAAAC,GAAA5D,EAAAA,EAAAA,GAGI2D,EAFFhE,MAAK,GAAGkE,EAACD,EAAA,GAAEE,EAACF,EAAA,GAAEG,EAACH,EAAA,GAAEtM,EAACsM,EAAA,GAClB/D,EACE8D,EADF9D,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,gBACJC,MAAO,CAACkE,EAAGC,EAAGC,EAAGzM,GACjBuI,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,yBAAApG,MAED,SAAuBsP,GACrB,IACErE,EAEEqE,EAFFrE,MACAE,EACEmE,EADFnE,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,yBACJC,MAAAA,EACAE,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,iCAAApG,MAED,SAA+BuP,GAC7B,IACEtE,EAEEsE,EAFFtE,MACAE,EACEoE,EADFpE,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,iCACJC,MAAAA,EACAE,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,cAAApG,MAED,SAAYwP,GACV,IACEvE,EAEEuE,EAFFvE,MACAE,EACEqE,EADFrE,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,cACJC,MAAAA,EACAE,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,qBAAApG,MAED,SAAmByP,GACjB,IACExE,EAEEwE,EAFFxE,MACAE,EACEsE,EADFtE,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,qBACJC,MAAAA,EACAE,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,oBAAApG,MAED,SAAkB0P,GAChB,IACEzE,EAEEyE,EAFFzE,MACAE,EACEuE,EADFvE,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,oBACJC,MAAAA,EACAE,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,mBAAApG,MAED,SAAiB2P,GACf,IACE1E,EAEE0E,EAFF1E,MACAE,EACEwE,EADFxE,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,mBACJC,MAAAA,EACAE,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,sBAAApG,MAED,SAAoB4P,GAClB,IACE3E,EAEE2E,EAFF3E,MACAE,EACEyE,EADFzE,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,sBACJC,MAAAA,EACAE,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,qBAAApG,MAED,SAAmB6P,GACjB,IACE5E,EAEE4E,EAFF5E,MACAE,EACE0E,EADF1E,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,qBACJC,MAAAA,EACAE,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,cAAApG,MAED,SAAY8P,GACV,IACE7E,EAEE6E,EAFF7E,MACAE,EACE2E,EADF3E,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,cACJC,MAAAA,EACAE,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,cAAApG,MAED,SAAY+P,GACV,IACE9E,EAEE8E,EAFF9E,MACAE,EACE4E,EADF5E,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,cACJC,MAAAA,EACAE,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,QAAApG,MAED,SAAMgQ,GACJ,IACE7E,EACE6E,EADF7E,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,QACJG,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,OAAApG,MAED,SAAKiL,GACH,IAAIgF,EAEJC,EAKI/P,KAJFuK,QACEC,EAASuF,EAATvF,UACAE,EAAWqF,EAAXrF,aAGCF,EAAUwF,YAAetF,EAAYsF,cACV,OAA/BF,EAAe9P,KAAKqK,SAA2ByF,EAAalF,YAAY,CACvEC,GAAI,OACJL,UAAAA,EACAM,MAAAA,EACAJ,YAAAA,GACC,CAACF,EAAUpD,OAAQsD,EAAYtD,SACpC,GAAC,CAAAnB,IAAA,YAAApG,MAED,SAAUoQ,GACR,IAAAC,EAOID,EANFnF,MACEqF,EAAED,EAAFC,GACApR,EAAMmR,EAANnR,OACA8C,EAAIqO,EAAJrO,KAEFmJ,EACEiF,EADFjF,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,YACJC,MAAO,CACLqF,GAAAA,EACApR,OAAAA,EACA8C,KAAAA,GAEFmJ,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,YAAApG,MAED,WACE,IAAIuQ,EAE6B,OAAhCA,EAAgBpQ,KAAKqK,SAA2B+F,EAAcC,YAC/DrQ,KAAKqK,OAAS,IAChB,GAAC,CAAApE,IAAA,cAAApG,MAED,SAAYyQ,GACV,IACExF,EACEwF,EADFxF,MAEF9K,KAAK4K,YAAY,CACfC,GAAI,cACJC,MAAAA,GAEJ,GAAC,CAAA7E,IAAA,SAAApG,MAED,SAAO0Q,GACL,IACEvF,EACEuF,EADFvF,KAEFhL,KAAK4K,YAAY,CACfC,GAAI,SACJG,KAAAA,GAEJ,GAAC,CAAA/E,IAAA,cAAApG,MAED,SAAYoF,GACV,GAAIjF,KAAKqK,OAAQ,OAAOrK,KAAKqK,OAAOO,YAAY3F,GAChDjF,KAAKoK,aAAa9H,KAAK2C,EACzB,KAACkD,CAAA,CApzBkB,CAAS9B,GAg0BxBmK,EAAM,WAQV,SAAAA,EAAYC,IAAU/H,EAAAA,EAAAA,GAAA,KAAA8H,QACH,IAAbC,IACFA,EAAW,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAGtCzQ,KAAKyQ,SAAWA,CAClB,CA8dC,OA7dD9F,EAAAA,EAAAA,GAAA6F,EAAA,EAAAvK,IAAA,WAAApG,MAOA,WACE,IAAMoN,EAAIjN,KAAKyQ,SACfxD,EAAE,GAAK,EACPA,EAAE,GAAK,EACPA,EAAE,GAAK,EACPA,EAAE,GAAK,EACPA,EAAE,GAAK,EACPA,EAAE,GAAK,EACPA,EAAE,GAAK,EACPA,EAAE,GAAK,EACPA,EAAE,GAAK,CACT,GACA,CAAAhH,IAAA,UAAApG,MAKA,WACE,IAAMoN,EAAIjN,KAAKyQ,SACfxD,EAAE,GAAK,EACPA,EAAE,GAAK,EACPA,EAAE,GAAK,EACPA,EAAE,GAAK,EACPA,EAAE,GAAK,EACPA,EAAE,GAAK,EACPA,EAAE,GAAK,EACPA,EAAE,GAAK,EACPA,EAAE,GAAK,CACT,GACA,CAAAhH,IAAA,WAAApG,MAKA,SAAS6Q,GACP,IAAMzD,EAAIjN,KAAKyQ,SACfxD,EAAE,GAAKyD,EAAO1B,EACd/B,EAAE,GAAKyD,EAAOzB,EACdhC,EAAE,GAAKyD,EAAOxB,CAChB,GACA,CAAAjJ,IAAA,WAAApG,MAKA,SAASd,QACQ,IAAXA,IACFA,EAAS,IAAI4R,GAGf,IAAM1D,EAAIjN,KAAKyQ,SAIf,OAHA1R,EAAOiQ,EAAI/B,EAAE,GACblO,EAAOkQ,EAAIhC,EAAE,GACblO,EAAOmQ,EAAIjC,EAAE,GACNlO,CACT,GACA,CAAAkH,IAAA,QAAApG,MAOA,SAAM+Q,EAAG7R,QACQ,IAAXA,IACFA,EAAS,IAAI4R,GAGf,IAAM1D,EAAIjN,KAAKyQ,SACTzB,EAAI4B,EAAE5B,EACNC,EAAI2B,EAAE3B,EACNC,EAAI0B,EAAE1B,EAIZ,OAHAnQ,EAAOiQ,EAAI/B,EAAE,GAAK+B,EAAI/B,EAAE,GAAKgC,EAAIhC,EAAE,GAAKiC,EACxCnQ,EAAOkQ,EAAIhC,EAAE,GAAK+B,EAAI/B,EAAE,GAAKgC,EAAIhC,EAAE,GAAKiC,EACxCnQ,EAAOmQ,EAAIjC,EAAE,GAAK+B,EAAI/B,EAAE,GAAKgC,EAAIhC,EAAE,GAAKiC,EACjCnQ,CACT,GACA,CAAAkH,IAAA,QAAApG,MAKA,SAAMkN,GACJ,IAAK,IAAInJ,EAAI,EAAGA,EAAI5D,KAAKyQ,SAASlO,OAAQqB,IACxC5D,KAAKyQ,SAAS7M,IAAMmJ,CAExB,GACA,CAAA9G,IAAA,QAAApG,MAMA,SAAMgR,EAAQ9R,QACG,IAAXA,IACFA,EAAS,IAAIyR,GAGf,IAAMM,EAAI9Q,KAAKyQ,SACTM,EAAIF,EAAOJ,SACXO,EAAIjS,EAAO0R,SACXQ,EAAMH,EAAE,GACRI,EAAMJ,EAAE,GACRK,EAAML,EAAE,GACRM,EAAMN,EAAE,GACRO,EAAMP,EAAE,GACRQ,EAAMR,EAAE,GACRS,EAAMT,EAAE,GACRU,EAAMV,EAAE,GACRW,EAAMX,EAAE,GACRY,EAAMX,EAAE,GACRY,EAAMZ,EAAE,GACRa,EAAMb,EAAE,GACRc,EAAMd,EAAE,GACRe,EAAMf,EAAE,GACRgB,EAAMhB,EAAE,GACRiB,EAAMjB,EAAE,GACRkB,EAAMlB,EAAE,GACRmB,EAAMnB,EAAE,GAUd,OATAC,EAAE,GAAKC,EAAMS,EAAMR,EAAMW,EAAMV,EAAMa,EACrChB,EAAE,GAAKC,EAAMU,EAAMT,EAAMY,EAAMX,EAAMc,EACrCjB,EAAE,GAAKC,EAAMW,EAAMV,EAAMa,EAAMZ,EAAMe,EACrClB,EAAE,GAAKI,EAAMM,EAAML,EAAMQ,EAAMP,EAAMU,EACrChB,EAAE,GAAKI,EAAMO,EAAMN,EAAMS,EAAMR,EAAMW,EACrCjB,EAAE,GAAKI,EAAMQ,EAAMP,EAAMU,EAAMT,EAAMY,EACrClB,EAAE,GAAKO,EAAMG,EAAMF,EAAMK,EAAMJ,EAAMO,EACrChB,EAAE,GAAKO,EAAMI,EAAMH,EAAMM,EAAML,EAAMQ,EACrCjB,EAAE,GAAKO,EAAMK,EAAMJ,EAAMO,EAAMN,EAAMS,EAC9BnT,CACT,GACA,CAAAkH,IAAA,QAAApG,MAKA,SAAM6Q,EAAQ3R,QACG,IAAXA,IACFA,EAAS,IAAIyR,GAMf,IAHA,IAAMvD,EAAIjN,KAAKyQ,SACT0B,EAAIpT,EAAO0R,SAER7M,EAAI,EAAS,IAANA,EAASA,IACvBuO,EAAE,EAAIvO,EAAI,GAAK8M,EAAO1B,EAAI/B,EAAE,EAAIrJ,EAAI,GACpCuO,EAAE,EAAIvO,EAAI,GAAK8M,EAAOzB,EAAIhC,EAAE,EAAIrJ,EAAI,GACpCuO,EAAE,EAAIvO,EAAI,GAAK8M,EAAOxB,EAAIjC,EAAE,EAAIrJ,EAAI,GAGtC,OAAO7E,CACT,GACA,CAAAkH,IAAA,QAAApG,MASA,SAAMuS,EAAGrT,QACQ,IAAXA,IACFA,EAAS,IAAI4R,GAIf,IAKI/M,EACAyO,EAFEC,EAAO,GAIb,IAAK1O,EAAI,EAAGA,EAAI2O,GAAS3O,IACvB0O,EAAKhQ,KAAK,GAGZ,IAAKsB,EAAI,EAAGA,EAAI,EAAGA,IACjB,IAAKyO,EAAI,EAAGA,EAAI,EAAGA,IACjBC,EAAK1O,EAZE,EAYOyO,GAAKrS,KAAKyQ,SAAS7M,EAAI,EAAIyO,GAI7CC,EAAK,GAAaF,EAAEpD,EACpBsD,EAAK,GAAaF,EAAEnD,EACpBqD,EAAK,IAAaF,EAAElD,EAEpB,IAEIsD,EAGAC,EALAzO,EAAI,EACF0O,EAAI1O,EAMV,EAAG,CAGD,GAAyB,IAArBsO,GAFJ1O,EAAI8O,EAAI1O,GA5BC,EA8BSJ,GAEhB,IAAKyO,EAAIzO,EAAI,EAAGyO,EAAIK,EAAGL,IACrB,GAAyB,IAArBC,EAAK1O,EAjCJ,EAiCayO,GAAU,CAC1BG,EAXG,EAaH,GAGEF,GADAG,EAfC,EAeQD,GAtCR,EAuCa5O,IAAM0O,EAAKG,EAvCxB,EAuCiCJ,WACzBG,GAEX,KACF,CAIJ,GAAyB,IAArBF,EAAK1O,EA/CA,EA+CSA,GAChB,IAAKyO,EAAIzO,EAAI,EAAGyO,EAAIK,EAAGL,IAAK,CAC1B,IAAMM,EAAaL,EAAK1O,EAjDnB,EAiD4ByO,GAAKC,EAAK1O,EAjDtC,EAiD+CA,GACpD4O,EA3BK,EA6BL,GAGEF,GADAG,EA/BG,EA+BMD,GAtDN,EAuDWH,GAAKI,GAAK7O,EAAI,EAAI0O,EAAKG,EAvDlC,EAuD2CJ,GAAKC,EAAKG,EAvDrD,EAuD8D7O,GAAK+O,UAC7DH,EACb,CAEJ,SAAWxO,GAOX,GAJAjF,EAAOmQ,EAAIoD,EAAK,IAAcA,EAAK,IACnCvT,EAAOkQ,GAAKqD,EAAK,GAAcA,EAAK,GAAcvT,EAAOmQ,GAAKoD,EAAK,GACnEvT,EAAOiQ,GAAKsD,EAAK,GAAcA,EAAK,GAAcvT,EAAOmQ,EAAIoD,EAAK,GAAcvT,EAAOkQ,GAAKqD,EAAK,GAE7F1S,MAAMb,EAAOiQ,IAAMpP,MAAMb,EAAOkQ,IAAMrP,MAAMb,EAAOmQ,IAAMnQ,EAAOiQ,IAAM4D,KAAY7T,EAAOkQ,IAAM2D,KAAY7T,EAAOmQ,IAAM0D,IAC1H,KAAM,oCAANnT,OAA0CV,EAAO8T,WAAU,UAAApT,OAAS2S,EAAES,WAAU,UAAApT,OAASO,KAAK6S,WAAU,KAG1G,OAAO9T,CACT,GACA,CAAAkH,IAAA,IAAApG,MAMA,SAAEiT,EAAKC,EAAQlT,GACb,QAAcsB,IAAVtB,EACF,OAAOG,KAAKyQ,SAASsC,EAAS,EAAID,GAGlC9S,KAAKyQ,SAASsC,EAAS,EAAID,GAAOjT,CAEtC,GACA,CAAAoG,IAAA,OAAApG,MAKA,SAAKgR,GACH,IAAK,IAAIjN,EAAI,EAAGA,EAAIiN,EAAOJ,SAASlO,OAAQqB,IAC1C5D,KAAKyQ,SAAS7M,GAAKiN,EAAOJ,SAAS7M,GAGrC,OAAO5D,IACT,GACA,CAAAiG,IAAA,WAAApG,MAKA,WAIE,IAHA,IAAImT,EAAI,GAGCpP,EAAI,EAAGA,EAAI,EAAGA,IACrBoP,GAAKhT,KAAKyQ,SAAS7M,GAHT,IAMZ,OAAOoP,CACT,GACA,CAAA/M,IAAA,UAAApG,MAOA,SAAQd,QACS,IAAXA,IACFA,EAAS,IAAIyR,GAIf,IAKI5M,EACAyO,EAFEC,EAAOW,EAIb,IAAKrP,EAAI,EAAGA,EAAI,EAAGA,IACjB,IAAKyO,EAAI,EAAGA,EAAI,EAAGA,IACjBC,EAAK1O,EARE,EAQOyO,GAAKrS,KAAKyQ,SAAS7M,EAAI,EAAIyO,GAI7CC,EAAK,GAAa,EAClBA,EAAK,GAAa,EAClBA,EAAK,IAAa,EAClBA,EAAK,GAAa,EAClBA,EAAK,IAAa,EAClBA,EAAK,IAAa,EAClBA,EAAK,GAAa,EAClBA,EAAK,IAAa,EAClBA,EAAK,IAAa,EAElB,IAEIE,EAGAC,EALAzO,EAAI,EACF0O,EAAI1O,EAMV,EAAG,CAGD,GAAyB,IAArBsO,GAFJ1O,EAAI8O,EAAI1O,GA9BC,EAgCSJ,GAEhB,IAAKyO,EAAIzO,EAAI,EAAGyO,EAAIK,EAAGL,IACrB,GAAyB,IAArBC,EAAK1O,EAnCJ,EAmCayO,GAAU,CAC1BG,EApCG,EAsCH,GAGEF,GADAG,EAxCC,EAwCQD,GAxCR,EAyCa5O,IAAM0O,EAAKG,EAzCxB,EAyCiCJ,WACzBG,GAEX,KACF,CAIJ,GAAyB,IAArBF,EAAK1O,EAjDA,EAiDSA,GAChB,IAAKyO,EAAIzO,EAAI,EAAGyO,EAAIK,EAAGL,IAAK,CAC1B,IAAMM,EAAaL,EAAK1O,EAnDnB,EAmD4ByO,GAAKC,EAAK1O,EAnDtC,EAmD+CA,GACpD4O,EApDK,EAsDL,GAGEF,GADAG,EAxDG,EAwDMD,GAxDN,EAyDWH,GAAKI,GAAK7O,EAAI,EAAI0O,EAAKG,EAzDlC,EAyD2CJ,GAAKC,EAAKG,EAzDrD,EAyD8D7O,GAAK+O,UAC7DH,EACb,CAEJ,SAAWxO,GAGXJ,EAAI,EAEJ,EAAG,CACDyO,EAAIzO,EAAI,EAER,EAAG,CACD,IAAM+O,EAAaL,EAAK1O,EAtEjB,EAsE0ByO,GAAKC,EAAK1O,EAtEpC,EAsE6CA,GACpD4O,EAvEO,EAyEP,GAEEF,GADAG,EA1EK,EA0EID,GA1EJ,EA2ESH,GAAKC,EAAKG,EA3EnB,EA2E4BJ,GAAKC,EAAKG,EA3EtC,EA2E+C7O,GAAK+O,UAChDH,EACb,OAASH,IACX,SAAWzO,GAGXA,EAAI,EAEJ,EAAG,CACD,IAAM+O,EAAa,EAAIL,EAAK1O,EApFnB,EAoF4BA,GACrC4O,EArFS,EAuFT,GAEEF,GADAG,EAxFO,EAwFED,GAxFF,EAyFO5O,GAAK0O,EAAKG,EAzFjB,EAyF0B7O,GAAK+O,UAC7BH,EACb,OAAS5O,KAETA,EAAI,EAEJ,EAAG,CACDyO,EAAI,EAEJ,EAAG,CAGD,GAFAI,EAAIH,EArGG,EAqGOD,EAnGP,EAmGgBzO,GAEnBhE,MAAM6S,IAAMA,IAAMG,IACpB,KAAM,yBAANnT,OAA+BO,KAAK6S,WAAU,KAGhD9T,EAAOkO,EAAErJ,EAAGyO,EAAGI,EACjB,OAASJ,IACX,OAASzO,KAET,OAAO7E,CACT,GACA,CAAAkH,IAAA,4BAAApG,MAKA,SAA0BqT,GACxB,IAAMlE,EAAIkE,EAAElE,EACNC,EAAIiE,EAAEjE,EACNC,EAAIgE,EAAEhE,EACNzM,EAAIyQ,EAAEzQ,EACN0Q,EAAKnE,EAAIA,EACToE,EAAKnE,EAAIA,EACToE,EAAKnE,EAAIA,EACToE,EAAKtE,EAAImE,EACTI,EAAKvE,EAAIoE,EACTI,EAAKxE,EAAIqE,EACTI,EAAKxE,EAAImE,EACTM,EAAKzE,EAAIoE,EACTM,EAAKzE,EAAImE,EACTO,EAAKnR,EAAI0Q,EACTU,EAAKpR,EAAI2Q,EACTU,EAAKrR,EAAI4Q,EACTpG,EAAIjN,KAAKyQ,SAUf,OATAxD,EAAE,GAAa,GAAKwG,EAAKE,GACzB1G,EAAE,GAAasG,EAAKO,EACpB7G,EAAE,GAAauG,EAAKK,EACpB5G,EAAE,GAAasG,EAAKO,EACpB7G,EAAE,GAAa,GAAKqG,EAAKK,GACzB1G,EAAE,GAAayG,EAAKE,EACpB3G,EAAE,GAAauG,EAAKK,EACpB5G,EAAE,GAAayG,EAAKE,EACpB3G,EAAE,GAAa,GAAKqG,EAAKG,GAClBzT,IACT,GACA,CAAAiG,IAAA,YAAApG,MAOA,SAAUd,QACO,IAAXA,IACFA,EAAS,IAAIyR,GAGf,IAEIuD,EAFEC,EAAIhU,KAAKyQ,SACTO,EAAIjS,EAAO0R,SAejB,OAZAO,EAAE,GAAKgD,EAAE,GACThD,EAAE,GAAKgD,EAAE,GACThD,EAAE,GAAKgD,EAAE,GACTD,EAAMC,EAAE,GACRhD,EAAE,GAAKgD,EAAE,GACThD,EAAE,GAAK+C,EACPA,EAAMC,EAAE,GACRhD,EAAE,GAAKgD,EAAE,GACThD,EAAE,GAAK+C,EACPA,EAAMC,EAAE,GACRhD,EAAE,GAAKgD,EAAE,GACThD,EAAE,GAAK+C,EACAhV,CACT,KAACyR,CAAA,CA5eS,GA+eNyC,EAAiB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GASrEtC,EAAM,WACV,SAAAA,EAAY3B,EAAGC,EAAGC,IAAGxG,EAAAA,EAAAA,GAAA,KAAAiI,QACT,IAAN3B,IACFA,EAAI,QAGI,IAANC,IACFA,EAAI,QAGI,IAANC,IACFA,EAAI,GAGNlP,KAAKgP,EAAIA,EACThP,KAAKiP,EAAIA,EACTjP,KAAKkP,EAAIA,CACX,CAiYC,OAhYDvE,EAAAA,EAAAA,GAAAgG,EAAA,EAAA1K,IAAA,QAAApG,MAMA,SAAM6Q,EAAQ3R,QACG,IAAXA,IACFA,EAAS,IAAI4R,GAGf,IAAMsD,EAAKvD,EAAO1B,EACZkF,EAAKxD,EAAOzB,EACZkF,EAAKzD,EAAOxB,EACZF,EAAIhP,KAAKgP,EACTC,EAAIjP,KAAKiP,EACTC,EAAIlP,KAAKkP,EAIf,OAHAnQ,EAAOiQ,EAAIC,EAAIkF,EAAKjF,EAAIgF,EACxBnV,EAAOkQ,EAAIC,EAAI+E,EAAKjF,EAAImF,EACxBpV,EAAOmQ,EAAIF,EAAIkF,EAAKjF,EAAIgF,EACjBlV,CACT,GACA,CAAAkH,IAAA,MAAApG,MAKA,SAAImP,EAAGC,EAAGC,GAIR,OAHAlP,KAAKgP,EAAIA,EACThP,KAAKiP,EAAIA,EACTjP,KAAKkP,EAAIA,EACFlP,IACT,GACA,CAAAiG,IAAA,UAAApG,MAKA,WACEG,KAAKgP,EAAIhP,KAAKiP,EAAIjP,KAAKkP,EAAI,CAC7B,GACA,CAAAjJ,IAAA,OAAApG,MAKA,SAAK6Q,EAAQ3R,GACX,IAAIA,EAKF,OAAO,IAAI4R,EAAO3Q,KAAKgP,EAAI0B,EAAO1B,EAAGhP,KAAKiP,EAAIyB,EAAOzB,EAAGjP,KAAKkP,EAAIwB,EAAOxB,GAJxEnQ,EAAOiQ,EAAI0B,EAAO1B,EAAIhP,KAAKgP,EAC3BjQ,EAAOkQ,EAAIyB,EAAOzB,EAAIjP,KAAKiP,EAC3BlQ,EAAOmQ,EAAIwB,EAAOxB,EAAIlP,KAAKkP,CAI/B,GACA,CAAAjJ,IAAA,OAAApG,MAMA,SAAK6Q,EAAQ3R,GACX,IAAIA,EAKF,OAAO,IAAI4R,EAAO3Q,KAAKgP,EAAI0B,EAAO1B,EAAGhP,KAAKiP,EAAIyB,EAAOzB,EAAGjP,KAAKkP,EAAIwB,EAAOxB,GAJxEnQ,EAAOiQ,EAAIhP,KAAKgP,EAAI0B,EAAO1B,EAC3BjQ,EAAOkQ,EAAIjP,KAAKiP,EAAIyB,EAAOzB,EAC3BlQ,EAAOmQ,EAAIlP,KAAKkP,EAAIwB,EAAOxB,CAI/B,GACA,CAAAjJ,IAAA,WAAApG,MAOA,WACE,OAAO,IAAI2Q,EAAO,CAAC,GAAIxQ,KAAKkP,EAAGlP,KAAKiP,EAAGjP,KAAKkP,EAAG,GAAIlP,KAAKgP,GAAIhP,KAAKiP,EAAGjP,KAAKgP,EAAG,GAC9E,GACA,CAAA/I,IAAA,YAAApG,MAMA,WACE,IAAMmP,EAAIhP,KAAKgP,EACTC,EAAIjP,KAAKiP,EACTC,EAAIlP,KAAKkP,EACTlL,EAAIoQ,KAAKC,KAAKrF,EAAIA,EAAIC,EAAIA,EAAIC,EAAIA,GAExC,GAAIlL,EAAI,EAAK,CACX,IAAMsQ,EAAO,EAAItQ,EACjBhE,KAAKgP,GAAKsF,EACVtU,KAAKiP,GAAKqF,EACVtU,KAAKkP,GAAKoF,CACZ,MAEEtU,KAAKgP,EAAI,EACThP,KAAKiP,EAAI,EACTjP,KAAKkP,EAAI,EAGX,OAAOlL,CACT,GACA,CAAAiC,IAAA,OAAApG,MAOA,SAAKd,QACY,IAAXA,IACFA,EAAS,IAAI4R,GAGf,IAAM3B,EAAIhP,KAAKgP,EACTC,EAAIjP,KAAKiP,EACTC,EAAIlP,KAAKkP,EACXqF,EAAOH,KAAKC,KAAKrF,EAAIA,EAAIC,EAAIA,EAAIC,EAAIA,GAazC,OAXIqF,EAAO,GACTA,EAAO,EAAMA,EACbxV,EAAOiQ,EAAIA,EAAIuF,EACfxV,EAAOkQ,EAAIA,EAAIsF,EACfxV,EAAOmQ,EAAIA,EAAIqF,IAEfxV,EAAOiQ,EAAI,EACXjQ,EAAOkQ,EAAI,EACXlQ,EAAOmQ,EAAI,GAGNnQ,CACT,GACA,CAAAkH,IAAA,SAAApG,MAKA,WACE,IAAMmP,EAAIhP,KAAKgP,EACTC,EAAIjP,KAAKiP,EACTC,EAAIlP,KAAKkP,EACf,OAAOkF,KAAKC,KAAKrF,EAAIA,EAAIC,EAAIA,EAAIC,EAAIA,EACvC,GACA,CAAAjJ,IAAA,gBAAApG,MAKA,WACE,OAAOG,KAAKwU,IAAIxU,KAClB,GACA,CAAAiG,IAAA,aAAApG,MAKA,SAAW4S,GACT,IAAMzD,EAAIhP,KAAKgP,EACTC,EAAIjP,KAAKiP,EACTC,EAAIlP,KAAKkP,EACTuF,EAAKhC,EAAEzD,EACP0F,EAAKjC,EAAExD,EACP0F,EAAKlC,EAAEvD,EACb,OAAOkF,KAAKC,MAAMI,EAAKzF,IAAMyF,EAAKzF,IAAM0F,EAAKzF,IAAMyF,EAAKzF,IAAM0F,EAAKzF,IAAMyF,EAAKzF,GAChF,GACA,CAAAjJ,IAAA,kBAAApG,MAKA,SAAgB4S,GACd,IAAMzD,EAAIhP,KAAKgP,EACTC,EAAIjP,KAAKiP,EACTC,EAAIlP,KAAKkP,EACTuF,EAAKhC,EAAEzD,EACP0F,EAAKjC,EAAExD,EACP0F,EAAKlC,EAAEvD,EACb,OAAQuF,EAAKzF,IAAMyF,EAAKzF,IAAM0F,EAAKzF,IAAMyF,EAAKzF,IAAM0F,EAAKzF,IAAMyF,EAAKzF,EACtE,GACA,CAAAjJ,IAAA,QAAApG,MAMA,SAAM+U,EAAQ7V,QACG,IAAXA,IACFA,EAAS,IAAI4R,GAGf,IAAM3B,EAAIhP,KAAKgP,EACTC,EAAIjP,KAAKiP,EACTC,EAAIlP,KAAKkP,EAIf,OAHAnQ,EAAOiQ,EAAI4F,EAAS5F,EACpBjQ,EAAOkQ,EAAI2F,EAAS3F,EACpBlQ,EAAOmQ,EAAI0F,EAAS1F,EACbnQ,CACT,GACA,CAAAkH,IAAA,OAAApG,MAMA,SAAK6Q,EAAQ3R,GAQX,YAPe,IAAXA,IACFA,EAAS,IAAI4R,GAGf5R,EAAOiQ,EAAI0B,EAAO1B,EAAIhP,KAAKgP,EAC3BjQ,EAAOkQ,EAAIyB,EAAOzB,EAAIjP,KAAKiP,EAC3BlQ,EAAOmQ,EAAIwB,EAAOxB,EAAIlP,KAAKkP,EACpBnQ,CACT,GACA,CAAAkH,IAAA,kBAAApG,MAMA,SAAgB+U,EAAQlE,EAAQ3R,GAQ9B,YAPe,IAAXA,IACFA,EAAS,IAAI4R,GAGf5R,EAAOiQ,EAAIhP,KAAKgP,EAAI4F,EAASlE,EAAO1B,EACpCjQ,EAAOkQ,EAAIjP,KAAKiP,EAAI2F,EAASlE,EAAOzB,EACpClQ,EAAOmQ,EAAIlP,KAAKkP,EAAI0F,EAASlE,EAAOxB,EAC7BnQ,CACT,GACA,CAAAkH,IAAA,MAAApG,MAMA,SAAI6Q,GACF,OAAO1Q,KAAKgP,EAAI0B,EAAO1B,EAAIhP,KAAKiP,EAAIyB,EAAOzB,EAAIjP,KAAKkP,EAAIwB,EAAOxB,CACjE,GAAC,CAAAjJ,IAAA,SAAApG,MAED,WACE,OAAkB,IAAXG,KAAKgP,GAAsB,IAAXhP,KAAKiP,GAAsB,IAAXjP,KAAKkP,CAC9C,GACA,CAAAjJ,IAAA,SAAApG,MAMA,SAAOd,GAQL,YAPe,IAAXA,IACFA,EAAS,IAAI4R,GAGf5R,EAAOiQ,GAAKhP,KAAKgP,EACjBjQ,EAAOkQ,GAAKjP,KAAKiP,EACjBlQ,EAAOmQ,GAAKlP,KAAKkP,EACVnQ,CACT,GACA,CAAAkH,IAAA,WAAApG,MAOA,SAASgV,EAAIC,GACX,IAAMC,EAAO/U,KAAKuC,SAElB,GAAIwS,EAAO,EAAK,CACd,IAAM/Q,EAAIgR,EACJC,EAAQ,EAAIF,EAClB/Q,EAAES,IAAIzE,KAAKgP,EAAIiG,EAAOjV,KAAKiP,EAAIgG,EAAOjV,KAAKkP,EAAI+F,GAC/C,IAAMC,EAAUC,EAEZf,KAAKgB,IAAIpR,EAAEgL,GAAK,IAClBkG,EAAQzQ,IAAI,EAAG,EAAG,GAClBT,EAAEqR,MAAMH,EAASL,KAEjBK,EAAQzQ,IAAI,EAAG,EAAG,GAClBT,EAAEqR,MAAMH,EAASL,IAGnB7Q,EAAEqR,MAAMR,EAAIC,EACd,MAEED,EAAGpQ,IAAI,EAAG,EAAG,GACbqQ,EAAGrQ,IAAI,EAAG,EAAG,EAEjB,GACA,CAAAwB,IAAA,WAAApG,MAKA,WACE,MAAO,GAAPJ,OAAUO,KAAKgP,EAAC,KAAAvP,OAAIO,KAAKiP,EAAC,KAAAxP,OAAIO,KAAKkP,EACrC,GACA,CAAAjJ,IAAA,UAAApG,MAKA,WACE,MAAO,CAACG,KAAKgP,EAAGhP,KAAKiP,EAAGjP,KAAKkP,EAC/B,GACA,CAAAjJ,IAAA,OAAApG,MAKA,SAAK6Q,GAIH,OAHA1Q,KAAKgP,EAAI0B,EAAO1B,EAChBhP,KAAKiP,EAAIyB,EAAOzB,EAChBjP,KAAKkP,EAAIwB,EAAOxB,EACTlP,IACT,GACA,CAAAiG,IAAA,OAAApG,MAMA,SAAK6Q,EAAQyB,EAAGpT,GACd,IAAMiQ,EAAIhP,KAAKgP,EACTC,EAAIjP,KAAKiP,EACTC,EAAIlP,KAAKkP,EACfnQ,EAAOiQ,EAAIA,GAAK0B,EAAO1B,EAAIA,GAAKmD,EAChCpT,EAAOkQ,EAAIA,GAAKyB,EAAOzB,EAAIA,GAAKkD,EAChCpT,EAAOmQ,EAAIA,GAAKwB,EAAOxB,EAAIA,GAAKiD,CAClC,GACA,CAAAlM,IAAA,eAAApG,MAKA,SAAa6Q,EAAQ4E,GAKnB,YAJkB,IAAdA,IACFA,EAAY,QAGVlB,KAAKgB,IAAIpV,KAAKgP,EAAI0B,EAAO1B,GAAKsG,GAAalB,KAAKgB,IAAIpV,KAAKiP,EAAIyB,EAAOzB,GAAKqG,GAAalB,KAAKgB,IAAIpV,KAAKkP,EAAIwB,EAAOxB,GAAKoG,EAK1H,GACA,CAAArP,IAAA,aAAApG,MAKA,SAAWyV,GAKT,YAJkB,IAAdA,IACFA,EAAY,QAGVlB,KAAKgB,IAAIpV,KAAKgP,GAAKsG,GAAalB,KAAKgB,IAAIpV,KAAKiP,GAAKqG,GAAalB,KAAKgB,IAAIpV,KAAKkP,GAAKoG,EAKzF,GACA,CAAArP,IAAA,mBAAApG,MAMA,SAAiB6Q,EAAQ4E,GAEvB,OADAtV,KAAKuV,OAAOC,GACLA,EAAYC,aAAa/E,EAAQ4E,EAC1C,GACA,CAAArP,IAAA,QAAApG,MAKA,WACE,OAAO,IAAI8Q,EAAO3Q,KAAKgP,EAAGhP,KAAKiP,EAAGjP,KAAKkP,EACzC,KAACyB,CAAA,CAlZS,GAqZZA,EAAO+E,KAAO,IAAI/E,EAAO,EAAG,EAAG,GAC/BA,EAAOgF,OAAS,IAAIhF,EAAO,EAAG,EAAG,GACjCA,EAAOiF,OAAS,IAAIjF,EAAO,EAAG,EAAG,GACjCA,EAAOkF,OAAS,IAAIlF,EAAO,EAAG,EAAG,GACjC,IAAMqE,EAAoB,IAAIrE,EACxBwE,EAA0B,IAAIxE,EAC9B6E,EAAc,IAAI7E,EAKlBmF,EAAM,WAQV,SAAAA,EAAY9N,IAASU,EAAAA,EAAAA,GAAA,KAAAoN,QACH,IAAZ9N,IACFA,EAAU,CAAC,GAGbhI,KAAK+V,WAAa,IAAIpF,EACtB3Q,KAAKgW,WAAa,IAAIrF,EAElB3I,EAAQ+N,YACV/V,KAAK+V,WAAW9R,KAAK+D,EAAQ+N,YAG3B/N,EAAQgO,YACVhW,KAAKgW,WAAW/R,KAAK+D,EAAQgO,WAEjC,CA0PC,OAzPDrL,EAAAA,EAAAA,GAAAmL,EAAA,EAAA7P,IAAA,gBAAApG,MAOA,SAAcoW,EAAQxQ,EAAUyQ,EAAYC,GAC1C,IAAMC,EAAIpW,KAAK+V,WACTM,EAAIrW,KAAKgW,WACT9C,EAAIgD,EAEVE,EAAEnS,KAAKgS,EAAO,IAEV/C,GACFA,EAAEoD,MAAMF,EAAGA,GAGbC,EAAEpS,KAAKmS,GAEP,IAAK,IAAIxS,EAAI,EAAGA,EAAIqS,EAAO1T,OAAQqB,IAAK,CACtC,IAAI6O,EAAIwD,EAAOrS,GAEXsP,IACFA,EAAEoD,MAAM7D,EAAG8D,GACX9D,EAAI8D,GAGF9D,EAAEzD,EAAIqH,EAAErH,IACVqH,EAAErH,EAAIyD,EAAEzD,GAGNyD,EAAEzD,EAAIoH,EAAEpH,IACVoH,EAAEpH,EAAIyD,EAAEzD,GAGNyD,EAAExD,EAAIoH,EAAEpH,IACVoH,EAAEpH,EAAIwD,EAAExD,GAGNwD,EAAExD,EAAImH,EAAEnH,IACVmH,EAAEnH,EAAIwD,EAAExD,GAGNwD,EAAEvD,EAAImH,EAAEnH,IACVmH,EAAEnH,EAAIuD,EAAEvD,GAGNuD,EAAEvD,EAAIkH,EAAElH,IACVkH,EAAElH,EAAIuD,EAAEvD,EAEZ,CAiBA,OAdIzJ,IACFA,EAAS+Q,KAAKJ,EAAGA,GACjB3Q,EAAS+Q,KAAKH,EAAGA,IAGfF,IACFC,EAAEpH,GAAKmH,EACPC,EAAEnH,GAAKkH,EACPC,EAAElH,GAAKiH,EACPE,EAAErH,GAAKmH,EACPE,EAAEpH,GAAKkH,EACPE,EAAEnH,GAAKiH,GAGFnW,IACT,GACA,CAAAiG,IAAA,OAAApG,MAOA,SAAK4W,GAGH,OAFAzW,KAAK+V,WAAW9R,KAAKwS,EAAKV,YAC1B/V,KAAKgW,WAAW/R,KAAKwS,EAAKT,YACnBhW,IACT,GACA,CAAAiG,IAAA,QAAApG,MAKA,WACE,OAAO,IAAIiW,GAAS7R,KAAKjE,KAC3B,GACA,CAAAiG,IAAA,SAAApG,MAKA,SAAO4W,GACLzW,KAAK+V,WAAW/G,EAAIoF,KAAKsC,IAAI1W,KAAK+V,WAAW/G,EAAGyH,EAAKV,WAAW/G,GAChEhP,KAAKgW,WAAWhH,EAAIoF,KAAKuC,IAAI3W,KAAKgW,WAAWhH,EAAGyH,EAAKT,WAAWhH,GAChEhP,KAAK+V,WAAW9G,EAAImF,KAAKsC,IAAI1W,KAAK+V,WAAW9G,EAAGwH,EAAKV,WAAW9G,GAChEjP,KAAKgW,WAAW/G,EAAImF,KAAKuC,IAAI3W,KAAKgW,WAAW/G,EAAGwH,EAAKT,WAAW/G,GAChEjP,KAAK+V,WAAW7G,EAAIkF,KAAKsC,IAAI1W,KAAK+V,WAAW7G,EAAGuH,EAAKV,WAAW7G,GAChElP,KAAKgW,WAAW9G,EAAIkF,KAAKuC,IAAI3W,KAAKgW,WAAW9G,EAAGuH,EAAKT,WAAW9G,EAClE,GACA,CAAAjJ,IAAA,WAAApG,MAKA,SAAS4W,GACP,IAAMG,EAAK5W,KAAK+V,WACVc,EAAK7W,KAAKgW,WACVc,EAAKL,EAAKV,WACVgB,EAAKN,EAAKT,WAKVgB,EAAYF,EAAG9H,GAAK6H,EAAG7H,GAAK6H,EAAG7H,GAAK+H,EAAG/H,GAAK4H,EAAG5H,GAAK+H,EAAG/H,GAAK+H,EAAG/H,GAAK6H,EAAG7H,EACvEiI,EAAYH,EAAG7H,GAAK4H,EAAG5H,GAAK4H,EAAG5H,GAAK8H,EAAG9H,GAAK2H,EAAG3H,GAAK8H,EAAG9H,GAAK8H,EAAG9H,GAAK4H,EAAG5H,EACvEiI,EAAYJ,EAAG5H,GAAK2H,EAAG3H,GAAK2H,EAAG3H,GAAK6H,EAAG7H,GAAK0H,EAAG1H,GAAK6H,EAAG7H,GAAK6H,EAAG7H,GAAK2H,EAAG3H,EAC7E,OAAO8H,GAAaC,GAAaC,CACnC,GAAE,CAAAjR,IAAA,SAAApG,MAGF,WACE,IAAMuW,EAAIpW,KAAK+V,WACTM,EAAIrW,KAAKgW,WACf,OAAQK,EAAErH,EAAIoH,EAAEpH,IAAMqH,EAAEpH,EAAImH,EAAEnH,IAAMoH,EAAEnH,EAAIkH,EAAElH,EAC9C,GACA,CAAAjJ,IAAA,WAAApG,MAKA,SAAS4W,GACP,IAAMG,EAAK5W,KAAK+V,WACVc,EAAK7W,KAAKgW,WACVc,EAAKL,EAAKV,WACVgB,EAAKN,EAAKT,WAKhB,OAAOY,EAAG5H,GAAK8H,EAAG9H,GAAK6H,EAAG7H,GAAK+H,EAAG/H,GAAK4H,EAAG3H,GAAK6H,EAAG7H,GAAK4H,EAAG5H,GAAK8H,EAAG9H,GAAK2H,EAAG1H,GAAK4H,EAAG5H,GAAK2H,EAAG3H,GAAK6H,EAAG7H,CACpG,GAAC,CAAAjJ,IAAA,aAAApG,MAED,SAAWsX,EAAG/E,EAAGgF,EAAGC,EAAGpK,EAAGC,EAAGoK,EAAGC,GAC9B,IAAMnB,EAAIpW,KAAK+V,WACTM,EAAIrW,KAAKgW,WACfmB,EAAElT,KAAKmS,GACPhE,EAAE3N,IAAI4R,EAAErH,EAAGoH,EAAEnH,EAAGmH,EAAElH,GAClBkI,EAAE3S,IAAI4R,EAAErH,EAAGqH,EAAEpH,EAAGmH,EAAElH,GAClBmI,EAAE5S,IAAI2R,EAAEpH,EAAGqH,EAAEpH,EAAGoH,EAAEnH,GAClBjC,EAAExI,IAAI4R,EAAErH,EAAGoH,EAAEnH,EAAGoH,EAAEnH,GAClBhC,EAAEzI,IAAI2R,EAAEpH,EAAGqH,EAAEpH,EAAGmH,EAAElH,GAClBoI,EAAE7S,IAAI2R,EAAEpH,EAAGoH,EAAEnH,EAAGoH,EAAEnH,GAClBqI,EAAEtT,KAAKoS,EACT,GACA,CAAApQ,IAAA,eAAApG,MAMA,SAAa2X,EAAOzY,GAClB,IAAM0Y,EAAUC,EACVP,EAAIM,EAAQ,GACZrF,EAAIqF,EAAQ,GACZL,EAAIK,EAAQ,GACZJ,EAAII,EAAQ,GACZxK,EAAIwK,EAAQ,GACZvK,EAAIuK,EAAQ,GACZH,EAAIG,EAAQ,GACZF,EAAIE,EAAQ,GAElBzX,KAAK2X,WAAWR,EAAG/E,EAAGgF,EAAGC,EAAGpK,EAAGC,EAAGoK,EAAGC,GAErC,IAAK,IAAI3T,EAAI,EAAS,IAANA,EAASA,IAAK,CAC5B,IAAMgU,EAASH,EAAQ7T,GACvB4T,EAAMK,aAAaD,EAAQA,EAC7B,CAEA,OAAO7Y,EAAO+Y,cAAcL,EAC9B,GACA,CAAAxR,IAAA,eAAApG,MAMA,SAAa2X,EAAOzY,GAClB,IAAM0Y,EAAUC,EACVP,EAAIM,EAAQ,GACZrF,EAAIqF,EAAQ,GACZL,EAAIK,EAAQ,GACZJ,EAAII,EAAQ,GACZxK,EAAIwK,EAAQ,GACZvK,EAAIuK,EAAQ,GACZH,EAAIG,EAAQ,GACZF,EAAIE,EAAQ,GAElBzX,KAAK2X,WAAWR,EAAG/E,EAAGgF,EAAGC,EAAGpK,EAAGC,EAAGoK,EAAGC,GAErC,IAAK,IAAI3T,EAAI,EAAS,IAANA,EAASA,IAAK,CAC5B,IAAMgU,EAASH,EAAQ7T,GACvB4T,EAAMO,aAAaH,EAAQA,EAC7B,CAEA,OAAO7Y,EAAO+Y,cAAcL,EAC9B,GACA,CAAAxR,IAAA,cAAApG,MAKA,SAAYmY,GACV,IACEC,EAEED,EAFFC,UACAC,EACEF,EADFE,KAIIC,EAAW,EAAIF,EAAUjJ,EACzBoJ,EAAW,EAAIH,EAAUhJ,EACzBoJ,EAAW,EAAIJ,EAAU/I,EAEzB2F,GAAM7U,KAAK+V,WAAW/G,EAAIkJ,EAAKlJ,GAAKmJ,EACpCrD,GAAM9U,KAAKgW,WAAWhH,EAAIkJ,EAAKlJ,GAAKmJ,EACpCG,GAAMtY,KAAK+V,WAAW9G,EAAIiJ,EAAKjJ,GAAKmJ,EACpCG,GAAMvY,KAAKgW,WAAW/G,EAAIiJ,EAAKjJ,GAAKmJ,EACpCI,GAAMxY,KAAK+V,WAAW7G,EAAIgJ,EAAKhJ,GAAKmJ,EACpCI,GAAMzY,KAAKgW,WAAW9G,EAAIgJ,EAAKhJ,GAAKmJ,EAGpCK,EAAOtE,KAAKuC,IAAIvC,KAAKuC,IAAIvC,KAAKsC,IAAI7B,EAAIC,GAAKV,KAAKsC,IAAI4B,EAAIC,IAAMnE,KAAKsC,IAAI8B,EAAIC,IAC3EE,EAAOvE,KAAKsC,IAAItC,KAAKsC,IAAItC,KAAKuC,IAAI9B,EAAIC,GAAKV,KAAKuC,IAAI2B,EAAIC,IAAMnE,KAAKuC,IAAI6B,EAAIC,IAEjF,QAAIE,EAAO,MAMPD,EAAOC,EAMb,KAAC7C,CAAA,CAjRS,GAoRNS,EAAU,IAAI5F,EACd+G,EAA+B,CAAC,IAAI/G,EAAU,IAAIA,EAAU,IAAIA,EAAU,IAAIA,EAAU,IAAIA,EAAU,IAAIA,EAAU,IAAIA,EAAU,IAAIA,GAKtIiI,EAAW,oBAAAA,KAAAlQ,EAAAA,EAAAA,GAAA,KAAAkQ,EAAA,CAqGd,OArGcjO,EAAAA,EAAAA,GAAAiO,EAAA,EAAA3S,IAAA,mBAAApG,MAKf,SAAiBgC,EAAML,QACGL,IAApBnB,KAAKsD,aACPtD,KAAKsD,WAAa,CAAC,GAGrB,IAAM8B,EAAYpF,KAAKsD,WAUvB,YARwBnC,IAApBiE,EAAUvD,KACZuD,EAAUvD,GAAQ,IAGfuD,EAAUvD,GAAMgX,SAASrX,IAC5B4D,EAAUvD,GAAMS,KAAKd,GAGhBxB,IACT,GACA,CAAAiG,IAAA,mBAAApG,MAKA,SAAiBgC,EAAML,GACrB,QAAwBL,IAApBnB,KAAKsD,WACP,OAAO,EAGT,IAAM8B,EAAYpF,KAAKsD,WAEvB,aAAwBnC,IAApBiE,EAAUvD,KAAuBuD,EAAUvD,GAAMgX,SAASrX,GAKhE,GACA,CAAAyE,IAAA,sBAAApG,MAKA,SAAoBgC,GAClB,YAAwBV,IAApBnB,KAAKsD,iBAKkBnC,IADTnB,KAAKsD,WACNzB,EACnB,GACA,CAAAoE,IAAA,sBAAApG,MAMA,SAAoBgC,EAAML,GACxB,QAAwBL,IAApBnB,KAAKsD,WACP,OAAOtD,KAGT,IAAMoF,EAAYpF,KAAKsD,WAEvB,QAAwBnC,IAApBiE,EAAUvD,GACZ,OAAO7B,KAGT,IAAM4F,EAAQR,EAAUvD,GAAM0F,QAAQ/F,GAMtC,OAJe,IAAXoE,GACFR,EAAUvD,GAAMiX,OAAOlT,EAAO,GAGzB5F,IACT,GACA,CAAAiG,IAAA,gBAAApG,MAMA,SAAckZ,GACZ,QAAwB5X,IAApBnB,KAAKsD,WACP,OAAOtD,KAGT,IACMgZ,EADYhZ,KAAKsD,WACSyV,EAAMlX,MAEtC,QAAsBV,IAAlB6X,EAA6B,CAC/BD,EAAMha,OAASiB,KAEf,IAAK,IAAI4D,EAAI,EAAGwS,EAAI4C,EAAczW,OAAQqB,EAAIwS,EAAGxS,IAC/CoV,EAAcpV,GAAGxE,KAAKY,KAAM+Y,EAEhC,CAEA,OAAO/Y,IACT,KAAC4Y,CAAA,CArGc,GAkHXK,EAAY,WAChB,SAAAA,EAAYjK,EAAGC,EAAGC,EAAGzM,IAAGiG,EAAAA,EAAAA,GAAA,KAAAuQ,QACZ,IAANjK,IACFA,EAAI,QAGI,IAANC,IACFA,EAAI,QAGI,IAANC,IACFA,EAAI,QAGI,IAANzM,IACFA,EAAI,GAGNzC,KAAKgP,EAAIA,EACThP,KAAKiP,EAAIA,EACTjP,KAAKkP,EAAIA,EACTlP,KAAKyC,EAAIA,CACX,CA+bC,OA9bDkI,EAAAA,EAAAA,GAAAsO,EAAA,EAAAhT,IAAA,MAAApG,MAKA,SAAImP,EAAGC,EAAGC,EAAGzM,GAKX,OAJAzC,KAAKgP,EAAIA,EACThP,KAAKiP,EAAIA,EACTjP,KAAKkP,EAAIA,EACTlP,KAAKyC,EAAIA,EACFzC,IACT,GACA,CAAAiG,IAAA,WAAApG,MAMA,WACE,MAAO,GAAPJ,OAAUO,KAAKgP,EAAC,KAAAvP,OAAIO,KAAKiP,EAAC,KAAAxP,OAAIO,KAAKkP,EAAC,KAAAzP,OAAIO,KAAKyC,EAC/C,GACA,CAAAwD,IAAA,UAAApG,MAMA,WACE,MAAO,CAACG,KAAKgP,EAAGhP,KAAKiP,EAAGjP,KAAKkP,EAAGlP,KAAKyC,EACvC,GACA,CAAAwD,IAAA,mBAAApG,MAKA,SAAiB6Q,EAAQwI,GACvB,IAAMnM,EAAIqH,KAAK+E,IAAY,GAARD,GAKnB,OAJAlZ,KAAKgP,EAAI0B,EAAO1B,EAAIjC,EACpB/M,KAAKiP,EAAIyB,EAAOzB,EAAIlC,EACpB/M,KAAKkP,EAAIwB,EAAOxB,EAAInC,EACpB/M,KAAKyC,EAAI2R,KAAKgF,IAAY,GAARF,GACXlZ,IACT,GACA,CAAAiG,IAAA,cAAApG,MAOA,SAAYwZ,QACS,IAAfA,IACFA,EAAa,IAAI1I,GAGnB3Q,KAAKsZ,YAEL,IAAMJ,EAAQ,EAAI9E,KAAKmF,KAAKvZ,KAAKyC,GAC3BsK,EAAIqH,KAAKC,KAAK,EAAIrU,KAAKyC,EAAIzC,KAAKyC,GAgBtC,OAdIsK,EAAI,MAGNsM,EAAWrK,EAAIhP,KAAKgP,EAEpBqK,EAAWpK,EAAIjP,KAAKiP,EACpBoK,EAAWnK,EAAIlP,KAAKkP,IAEpBmK,EAAWrK,EAAIhP,KAAKgP,EAAIjC,EAExBsM,EAAWpK,EAAIjP,KAAKiP,EAAIlC,EACxBsM,EAAWnK,EAAIlP,KAAKkP,EAAInC,GAGnB,CAACsM,EAAYH,EACtB,GACA,CAAAjT,IAAA,iBAAApG,MAKA,SAAewW,EAAGzF,GAChB,GAAIyF,EAAEmD,iBAAiB5I,GAAI,CACzB,IAAMiE,EAAK4E,GACL3E,EAAK4E,GACXrD,EAAEsD,SAAS9E,EAAIC,GACf9U,KAAK4Z,iBAAiB/E,EAAIT,KAAKyF,GACjC,KAAO,CACL,IAAM1C,EAAId,EAAEhB,MAAMzE,GAClB5Q,KAAKgP,EAAImI,EAAEnI,EACXhP,KAAKiP,EAAIkI,EAAElI,EACXjP,KAAKkP,EAAIiI,EAAEjI,EACXlP,KAAKyC,EAAI2R,KAAKC,KAAKD,KAAA0F,IAAAzD,EAAE9T,SAAY,GAAC6R,KAAA0F,IAAGlJ,EAAErO,SAAY,IAAK8T,EAAE7B,IAAI5D,GAC9D5Q,KAAKsZ,WACP,CAEA,OAAOtZ,IACT,GACA,CAAAiG,IAAA,OAAApG,MAKA,SAAKka,EAAMhb,QACM,IAAXA,IACFA,EAAS,IAAIka,GAGf,IAAMe,EAAKha,KAAKgP,EACViL,EAAKja,KAAKiP,EACViL,EAAKla,KAAKkP,EACViL,EAAKna,KAAKyC,EACV2X,EAAKL,EAAK/K,EACVqL,EAAKN,EAAK9K,EACVqL,EAAKP,EAAK7K,EACVqL,EAAKR,EAAKtX,EAKhB,OAJA1D,EAAOiQ,EAAIgL,EAAKO,EAAKJ,EAAKC,EAAKH,EAAKK,EAAKJ,EAAKG,EAC9Ctb,EAAOkQ,EAAIgL,EAAKM,EAAKJ,EAAKE,EAAKH,EAAKE,EAAKJ,EAAKM,EAC9Cvb,EAAOmQ,EAAIgL,EAAKK,EAAKJ,EAAKG,EAAKN,EAAKK,EAAKJ,EAAKG,EAC9Crb,EAAO0D,EAAI0X,EAAKI,EAAKP,EAAKI,EAAKH,EAAKI,EAAKH,EAAKI,EACvCvb,CACT,GACA,CAAAkH,IAAA,UAAApG,MAKA,SAAQd,QACS,IAAXA,IACFA,EAAS,IAAIka,GAGf,IAAMjK,EAAIhP,KAAKgP,EACTC,EAAIjP,KAAKiP,EACTC,EAAIlP,KAAKkP,EACTzM,EAAIzC,KAAKyC,EACfzC,KAAKwa,UAAUzb,GACf,IAAM0b,EAAS,GAAKzL,EAAIA,EAAIC,EAAIA,EAAIC,EAAIA,EAAIzM,EAAIA,GAKhD,OAJA1D,EAAOiQ,GAAKyL,EACZ1b,EAAOkQ,GAAKwL,EACZ1b,EAAOmQ,GAAKuL,EACZ1b,EAAO0D,GAAKgY,EACL1b,CACT,GACA,CAAAkH,IAAA,YAAApG,MAKA,SAAUd,GASR,YARe,IAAXA,IACFA,EAAS,IAAIka,GAGfla,EAAOiQ,GAAKhP,KAAKgP,EACjBjQ,EAAOkQ,GAAKjP,KAAKiP,EACjBlQ,EAAOmQ,GAAKlP,KAAKkP,EACjBnQ,EAAO0D,EAAIzC,KAAKyC,EACT1D,CACT,GACA,CAAAkH,IAAA,YAAApG,MAKA,WACE,IAAIuW,EAAIhC,KAAKC,KAAKrU,KAAKgP,EAAIhP,KAAKgP,EAAIhP,KAAKiP,EAAIjP,KAAKiP,EAAIjP,KAAKkP,EAAIlP,KAAKkP,EAAIlP,KAAKyC,EAAIzC,KAAKyC,GAetF,OAbU,IAAN2T,GACFpW,KAAKgP,EAAI,EACThP,KAAKiP,EAAI,EACTjP,KAAKkP,EAAI,EACTlP,KAAKyC,EAAI,IAET2T,EAAI,EAAIA,EACRpW,KAAKgP,GAAKoH,EACVpW,KAAKiP,GAAKmH,EACVpW,KAAKkP,GAAKkH,EACVpW,KAAKyC,GAAK2T,GAGLpW,IACT,GACA,CAAAiG,IAAA,gBAAApG,MAMA,WACE,IAAMqN,GAAK,GAAOlN,KAAKgP,EAAIhP,KAAKgP,EAAIhP,KAAKiP,EAAIjP,KAAKiP,EAAIjP,KAAKkP,EAAIlP,KAAKkP,EAAIlP,KAAKyC,EAAIzC,KAAKyC,IAAM,EAc5F,OAZU,IAANyK,GACFlN,KAAKgP,EAAI,EACThP,KAAKiP,EAAI,EACTjP,KAAKkP,EAAI,EACTlP,KAAKyC,EAAI,IAETzC,KAAKgP,GAAK9B,EACVlN,KAAKiP,GAAK/B,EACVlN,KAAKkP,GAAKhC,EACVlN,KAAKyC,GAAKyK,GAGLlN,IACT,GACA,CAAAiG,IAAA,QAAApG,MAKA,SAAM+Q,EAAG7R,QACQ,IAAXA,IACFA,EAAS,IAAI4R,GAGf,IAAM3B,EAAI4B,EAAE5B,EACNC,EAAI2B,EAAE3B,EACNC,EAAI0B,EAAE1B,EACNwL,EAAK1a,KAAKgP,EACV2L,EAAK3a,KAAKiP,EACV2L,EAAK5a,KAAKkP,EACV2L,EAAK7a,KAAKyC,EAEVqY,EAAKD,EAAK7L,EAAI2L,EAAKzL,EAAI0L,EAAK3L,EAC5B8L,EAAKF,EAAK5L,EAAI2L,EAAK5L,EAAI0L,EAAKxL,EAC5B8L,EAAKH,EAAK3L,EAAIwL,EAAKzL,EAAI0L,EAAK3L,EAC5BiM,GAAMP,EAAK1L,EAAI2L,EAAK1L,EAAI2L,EAAK1L,EAInC,OAHAnQ,EAAOiQ,EAAI8L,EAAKD,EAAKI,GAAMP,EAAKK,GAAMH,EAAKI,GAAML,EACjD5b,EAAOkQ,EAAI8L,EAAKF,EAAKI,GAAMN,EAAKK,GAAMN,EAAKI,GAAMF,EACjD7b,EAAOmQ,EAAI8L,EAAKH,EAAKI,GAAML,EAAKE,GAAMH,EAAKI,GAAML,EAC1C3b,CACT,GACA,CAAAkH,IAAA,OAAApG,MAMA,SAAKka,GAKH,OAJA/Z,KAAKgP,EAAI+K,EAAK/K,EACdhP,KAAKiP,EAAI8K,EAAK9K,EACdjP,KAAKkP,EAAI6K,EAAK7K,EACdlP,KAAKyC,EAAIsX,EAAKtX,EACPzC,IACT,GACA,CAAAiG,IAAA,UAAApG,MAMA,SAAQd,EAAQmc,GAKd,IAAIC,EACAC,EACAC,OANU,IAAVH,IACFA,EAAQ,OAMV,IAAMlM,EAAIhP,KAAKgP,EACTC,EAAIjP,KAAKiP,EACTC,EAAIlP,KAAKkP,EACTzM,EAAIzC,KAAKyC,EAEf,GACO,QADCyY,EAgCJ,MAAM,IAAIxY,MAAM,eAADjD,OAAgByb,EAAK,wBA9BpC,IAAMI,EAAOtM,EAAIC,EAAIC,EAAIzM,EAgBzB,GAdI6Y,EAAO,OAETH,EAAU,EAAI/G,KAAKmH,MAAMvM,EAAGvM,GAC5B2Y,EAAWhH,KAAKyF,GAAK,EACrBwB,EAAO,GAGLC,GAAQ,OAEVH,GAAW,EAAI/G,KAAKmH,MAAMvM,EAAGvM,GAC7B2Y,GAAYhH,KAAKyF,GAAK,EACtBwB,EAAO,QAGOla,IAAZga,EAAuB,CACzB,IAAMK,EAAMxM,EAAIA,EACVyM,EAAMxM,EAAIA,EACVyM,EAAMxM,EAAIA,EAChBiM,EAAU/G,KAAKmH,MAAM,EAAItM,EAAIxM,EAAI,EAAIuM,EAAIE,EAAG,EAAI,EAAIuM,EAAM,EAAIC,GAE9DN,EAAWhH,KAAKuH,KAAK,EAAIL,GAEzBD,EAAOjH,KAAKmH,MAAM,EAAIvM,EAAIvM,EAAI,EAAIwM,EAAIC,EAAG,EAAI,EAAIsM,EAAM,EAAIE,EAC7D,CAQJ3c,EAAOkQ,EAAIkM,EACXpc,EAAOmQ,EAAIkM,EACXrc,EAAOiQ,EAAIqM,CACb,GACA,CAAApV,IAAA,eAAApG,MASA,SAAamP,EAAGC,EAAGC,EAAGgM,QACN,IAAVA,IACFA,EAAQ,OAGV,IAAMU,EAAKxH,KAAKgF,IAAIpK,EAAI,GAClB6M,EAAKzH,KAAKgF,IAAInK,EAAI,GAClB6M,EAAK1H,KAAKgF,IAAIlK,EAAI,GAClB6M,EAAK3H,KAAK+E,IAAInK,EAAI,GAClBgN,EAAK5H,KAAK+E,IAAIlK,EAAI,GAClBgN,EAAK7H,KAAK+E,IAAIjK,EAAI,GAkCxB,MAhCc,QAAVgM,GACFlb,KAAKgP,EAAI+M,EAAKF,EAAKC,EAAKF,EAAKI,EAAKC,EAClCjc,KAAKiP,EAAI2M,EAAKI,EAAKF,EAAKC,EAAKF,EAAKI,EAClCjc,KAAKkP,EAAI0M,EAAKC,EAAKI,EAAKF,EAAKC,EAAKF,EAClC9b,KAAKyC,EAAImZ,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,GACf,QAAVf,GACTlb,KAAKgP,EAAI+M,EAAKF,EAAKC,EAAKF,EAAKI,EAAKC,EAClCjc,KAAKiP,EAAI2M,EAAKI,EAAKF,EAAKC,EAAKF,EAAKI,EAClCjc,KAAKkP,EAAI0M,EAAKC,EAAKI,EAAKF,EAAKC,EAAKF,EAClC9b,KAAKyC,EAAImZ,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,GACf,QAAVf,GACTlb,KAAKgP,EAAI+M,EAAKF,EAAKC,EAAKF,EAAKI,EAAKC,EAClCjc,KAAKiP,EAAI2M,EAAKI,EAAKF,EAAKC,EAAKF,EAAKI,EAClCjc,KAAKkP,EAAI0M,EAAKC,EAAKI,EAAKF,EAAKC,EAAKF,EAClC9b,KAAKyC,EAAImZ,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,GACf,QAAVf,GACTlb,KAAKgP,EAAI+M,EAAKF,EAAKC,EAAKF,EAAKI,EAAKC,EAClCjc,KAAKiP,EAAI2M,EAAKI,EAAKF,EAAKC,EAAKF,EAAKI,EAClCjc,KAAKkP,EAAI0M,EAAKC,EAAKI,EAAKF,EAAKC,EAAKF,EAClC9b,KAAKyC,EAAImZ,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,GACf,QAAVf,GACTlb,KAAKgP,EAAI+M,EAAKF,EAAKC,EAAKF,EAAKI,EAAKC,EAClCjc,KAAKiP,EAAI2M,EAAKI,EAAKF,EAAKC,EAAKF,EAAKI,EAClCjc,KAAKkP,EAAI0M,EAAKC,EAAKI,EAAKF,EAAKC,EAAKF,EAClC9b,KAAKyC,EAAImZ,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,GACf,QAAVf,IACTlb,KAAKgP,EAAI+M,EAAKF,EAAKC,EAAKF,EAAKI,EAAKC,EAClCjc,KAAKiP,EAAI2M,EAAKI,EAAKF,EAAKC,EAAKF,EAAKI,EAClCjc,KAAKkP,EAAI0M,EAAKC,EAAKI,EAAKF,EAAKC,EAAKF,EAClC9b,KAAKyC,EAAImZ,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,GAG7Bjc,IACT,GAAC,CAAAiG,IAAA,QAAApG,MAED,WACE,OAAO,IAAIoZ,EAAajZ,KAAKgP,EAAGhP,KAAKiP,EAAGjP,KAAKkP,EAAGlP,KAAKyC,EACvD,GACA,CAAAwD,IAAA,QAAApG,MAUA,SAAMqc,EAAQ/J,EAAGpT,QACA,IAAXA,IACFA,EAAS,IAAIka,GAGf,IAQIkD,EACAC,EACAC,EACAC,EACAC,EAZEvC,EAAKha,KAAKgP,EACViL,EAAKja,KAAKiP,EACViL,EAAKla,KAAKkP,EACViL,EAAKna,KAAKyC,EACZ2X,EAAK8B,EAAOlN,EACZqL,EAAK6B,EAAOjN,EACZqL,EAAK4B,EAAOhN,EACZqL,EAAK2B,EAAOzZ,EAoChB,OA7BA2Z,EAAQpC,EAAKI,EAAKH,EAAKI,EAAKH,EAAKI,EAAKH,EAAKI,GAE/B,IACV6B,GAASA,EACThC,GAAMA,EACNC,GAAMA,EACNC,GAAMA,EACNC,GAAMA,GAIJ,EAAM6B,EAAQ,MAEhBD,EAAQ/H,KAAKmF,KAAK6C,GAClBC,EAAQjI,KAAK+E,IAAIgD,GACjBG,EAASlI,KAAK+E,KAAK,EAAMhH,GAAKgK,GAASE,EACvCE,EAASnI,KAAK+E,IAAIhH,EAAIgK,GAASE,IAI/BC,EAAS,EAAMnK,EACfoK,EAASpK,GAIXpT,EAAOiQ,EAAIsN,EAAStC,EAAKuC,EAASnC,EAClCrb,EAAOkQ,EAAIqN,EAASrC,EAAKsC,EAASlC,EAClCtb,EAAOmQ,EAAIoN,EAASpC,EAAKqC,EAASjC,EAClCvb,EAAO0D,EAAI6Z,EAASnC,EAAKoC,EAAShC,EAC3Bxb,CACT,GACA,CAAAkH,IAAA,YAAApG,MAKA,SAAU2c,EAAiBC,EAAIC,EAAe3d,QAC7B,IAAXA,IACFA,EAAS,IAAIka,GAGf,IAAMe,EAAKwC,EAAgBxN,EAAI0N,EAAc1N,EACvCiL,EAAKuC,EAAgBvN,EAAIyN,EAAczN,EACvCiL,EAAKsC,EAAgBtN,EAAIwN,EAAcxN,EACvCkL,EAAKpa,KAAKgP,EACVqL,EAAKra,KAAKiP,EACVqL,EAAKta,KAAKkP,EACVqL,EAAKva,KAAKyC,EACVka,EAAe,GAALF,EAKhB,OAJA1d,EAAOiQ,GAAK2N,GAAW3C,EAAKO,EAAKN,EAAKK,EAAKJ,EAAKG,GAChDtb,EAAOkQ,GAAK0N,GAAW1C,EAAKM,EAAKL,EAAKE,EAAKJ,EAAKM,GAChDvb,EAAOmQ,GAAKyN,GAAWzC,EAAKK,EAAKP,EAAKK,EAAKJ,EAAKG,GAChDrb,EAAO0D,GAAKka,IAAY3C,EAAKI,EAAKH,EAAKI,EAAKH,EAAKI,GAC1Cvb,CACT,KAACka,CAAA,CArde,GAwdZQ,GAAW,IAAI9I,EACf+I,GAAW,IAAI/I,EAwCfiM,GAAO,WAqCX,SAAAA,EAAY5U,IAASU,EAAAA,EAAAA,GAAA,KAAAkU,QACH,IAAZ5U,IACFA,EAAU,CAAC,GAGbhI,KAAKmQ,GAAKyM,EAAQC,YAClB7c,KAAK6B,KAAOmG,EAAQnG,MAAQ,EAC5B7B,KAAK8c,qBAAuB,EAC5B9c,KAAK+c,mBAAoB/U,EAAQ+U,mBAAoB/U,EAAQ+U,kBAC7D/c,KAAKgd,0BAAwD7b,IAAjC6G,EAAQgV,qBAAqChV,EAAQgV,qBAAuB,EACxGhd,KAAKid,yBAAsD9b,IAAhC6G,EAAQiV,oBAAoCjV,EAAQiV,qBAAuB,EACtGjd,KAAKkd,SAAWlV,EAAQkV,SAAWlV,EAAQkV,SAAW,KACtDld,KAAKwH,KAAO,IACd,CAkCC,OAjCDmD,EAAAA,EAAAA,GAAAiS,EAAA,EAAA3W,IAAA,6BAAApG,MAMA,WACE,KAAM,gEAANJ,OAAsEO,KAAK6B,KAC7E,GACA,CAAAoE,IAAA,SAAApG,MAKA,WACE,KAAM,2CAANJ,OAAiDO,KAAK6B,KACxD,GACA,CAAAoE,IAAA,wBAAApG,MAMA,SAAsBsd,EAAMpe,GAC1B,KAAM,0DAANU,OAAgEO,KAAK6B,KACvE,GACA,CAAAoE,IAAA,qBAAApG,MAKA,SAAmBud,EAAKrD,EAAMrD,EAAKC,GACjC,KAAM,uDAANlX,OAA6DO,KAAK6B,KACpE,KAAC+a,CAAA,CApFU,GAuFbA,GAAQC,UAAY,EACpBD,GAAQS,MA3Hc,CAEpBC,OAAQ,EAGRC,MAAO,EAGPC,IAAK,EAGLC,SAAU,EAGVC,iBAAkB,GAGlBC,YAAa,GAGbC,SAAU,GAGVC,SAAU,IAGVC,QAAS,KAmGX,IAGMC,GAAW,WAQf,SAAAA,EAAY/V,IAASU,EAAAA,EAAAA,GAAA,KAAAqV,QACH,IAAZ/V,IACFA,EAAU,CAAC,GAGbhI,KAAKyF,SAAW,IAAIkL,EACpB3Q,KAAKkW,WAAa,IAAI+C,EAElBjR,EAAQvC,UACVzF,KAAKyF,SAASxB,KAAK+D,EAAQvC,UAGzBuC,EAAQkO,YACVlW,KAAKkW,WAAWjS,KAAK+D,EAAQkO,WAEjC,CAsFC,OArFDvL,EAAAA,EAAAA,GAAAoT,EAAA,EAAA9X,IAAA,eAAApG,MAKA,SAAame,EAAYC,GACvB,OAAOF,EAAYG,kBAAkBle,KAAKyF,SAAUzF,KAAKkW,WAAY8H,EAAYC,EACnF,GACA,CAAAhY,IAAA,eAAApG,MAKA,SAAase,EAAYF,GACvB,OAAOF,EAAYK,kBAAkBpe,KAAKyF,SAAUzF,KAAKkW,WAAYiI,EAAYF,EACnF,GACA,CAAAhY,IAAA,qBAAApG,MAKA,SAAmBwe,EAAaJ,GAM9B,YALe,IAAXA,IACFA,EAAS,IAAItN,GAGf3Q,KAAKkW,WAAWI,MAAM+H,EAAaJ,GAC5BA,CACT,IACA,EAAAhY,IAAA,oBAAApG,MAKA,SAAyB4F,EAAUyQ,EAAY8H,EAAYC,GAQzD,YAPe,IAAXA,IACFA,EAAS,IAAItN,GAGfqN,EAAWM,KAAK7Y,EAAUwY,GAC1B/H,EAAWsE,UAAU+D,IACrBA,GAAYjI,MAAM2H,EAAQA,GACnBA,CACT,GACA,CAAAhY,IAAA,oBAAApG,MAKA,SAAyB4F,EAAUyQ,EAAYiI,EAAYF,GAOzD,YANe,IAAXA,IACFA,EAAS,IAAItN,GAGfuF,EAAWI,MAAM6H,EAAYF,GAC7BA,EAAOzH,KAAK/Q,EAAUwY,GACfA,CACT,GACA,CAAAhY,IAAA,qBAAApG,MAKA,SAA0BqW,EAAYmI,EAAaJ,GAMjD,YALe,IAAXA,IACFA,EAAS,IAAItN,GAGfuF,EAAWI,MAAM+H,EAAaJ,GACvBA,CACT,GACA,CAAAhY,IAAA,qBAAApG,MAKA,SAA0B4F,EAAUyQ,EAAYsI,EAAaP,GAQ3D,YAPe,IAAXA,IACFA,EAAS,IAAItN,GAGfuF,EAAWzT,IAAM,EACjByT,EAAWI,MAAMkI,EAAaP,GAC9B/H,EAAWzT,IAAM,EACVwb,CACT,KAACF,CAAA,CA7Gc,GAgHXQ,GAAc,IAAItF,EAmBlBwF,GAAgB,SAAAC,IAAArW,EAAAA,EAAAA,GAAAoW,EAAAC,GAAA,IAAAC,GAAApW,EAAAA,EAAAA,GAAAkW,GA2BpB,SAAAA,EAAY3T,GAAO,IAAA8T,GAAAlW,EAAAA,EAAAA,GAAA,KAAA+V,QACH,IAAV3T,IACFA,EAAQ,CAAC,GAGX,IAAA+T,EAMI/T,EAAKgU,EAAAD,EALPE,SAAAA,OAAQ,IAAAD,EAAG,GAAEA,EAAAE,EAAAH,EACbI,MAAAA,OAAK,IAAAD,EAAG,GAAEA,EAAAE,EAAAL,EACVM,QAAAA,OAAO,IAAAD,EAAG,GAAEA,EACZE,EAAIP,EAAJO,KACAtC,EAAoB+B,EAApB/B,qBA2BkB,OAzBpB8B,EAAAD,EAAAvf,KAAA,KAAM,CACJyC,KAAM+a,GAAQS,MAAMK,oBAEjBqB,SAAWA,EAChBH,EAAKK,MAAQA,EACbL,EAAKS,YAAcF,EAEa,IAA5BP,EAAKS,YAAY9c,QACnBqc,EAAKU,iBAGFxC,EAGH8B,EAAK9B,qBAAuBA,EAF5B8B,EAAKW,6BAKPX,EAAKY,cAAgB,GAErBZ,EAAKa,0BAA2B,EAChCb,EAAKc,iBAAmB,GAExBd,EAAKe,6BAA8B,EACnCf,EAAKgB,WAAaR,EAAOA,EAAKze,QAAU,KACxCie,EAAKiB,YAAc,GACnBjB,EAAKkB,eAAelB,CACtB,CAiwBC,OAhwBDjU,EAAAA,EAAAA,GAAA8T,EAAA,EAAAxY,IAAA,eAAApG,MAKA,WACE,IAAMof,EAAQjf,KAAKif,MACbF,EAAW/e,KAAK+e,SAChBgB,EAAQ/f,KAAK6f,YACnBE,EAAMxd,OAAS,EAGf,IAFA,IAAMyd,EAAO,IAAIrP,EAER/M,EAAI,EAAGA,IAAMqb,EAAM1c,OAAQqB,IAIlC,IAHA,IAAMqc,EAAOhB,EAAMrb,GACbsc,EAAcD,EAAK1d,OAEhB8P,EAAI,EAAGA,IAAM6N,EAAa7N,IAAK,CACtC,IAAMK,GAAKL,EAAI,GAAK6N,EACpBnB,EAASkB,EAAK5N,IAAIiM,KAAKS,EAASkB,EAAKvN,IAAKsN,GAC1CA,EAAK1G,YAGL,IAFA,IAAI6G,GAAQ,EAEH1N,EAAI,EAAGA,IAAMsN,EAAMxd,OAAQkQ,IAClC,GAAIsN,EAAMtN,GAAGgD,aAAauK,IAASD,EAAMtN,GAAGgD,aAAauK,GAAO,CAC9DG,GAAQ,EACR,KACF,CAGGA,GACHJ,EAAMzd,KAAK0d,EAAKI,QAEpB,CAEJ,GACA,CAAAna,IAAA,iBAAApG,MAMA,WACEG,KAAKqf,YAAY9c,OAASvC,KAAKif,MAAM1c,OAErC,IAAK,IAAIqB,EAAI,EAAGA,EAAI5D,KAAKif,MAAM1c,OAAQqB,IAAK,CAE1C,IAAK,IAAIyO,EAAI,EAAGA,EAAIrS,KAAKif,MAAMrb,GAAGrB,OAAQ8P,IACxC,IAAKrS,KAAK+e,SAAS/e,KAAKif,MAAMrb,GAAGyO,IAC/B,MAAM,IAAI3P,MAAM,UAADjD,OAAWO,KAAKif,MAAMrb,GAAGyO,GAAE,gBAI9C,IAAMrO,EAAIhE,KAAKqf,YAAYzb,IAAM,IAAI+M,EACrC3Q,KAAKqgB,cAAczc,EAAGI,GACtBA,EAAEuR,OAAOvR,GACThE,KAAKqf,YAAYzb,GAAKI,EACtB,IAAMsc,EAAStgB,KAAK+e,SAAS/e,KAAKif,MAAMrb,GAAG,IAE3C,GAAII,EAAEwQ,IAAI8L,GAAU,EAAG,CACrBzd,QAAQkC,MAAM,gBAADtF,OAAiBmE,EAAC,aAAAnE,OAAYuE,EAAE6O,WAAU,6IAEvD,IAAK,IAAIR,EAAI,EAAGA,EAAIrS,KAAKif,MAAMrb,GAAGrB,OAAQ8P,IACxCxP,QAAQC,KAAK,aAADrD,OAAcO,KAAKif,MAAMrb,GAAGyO,GAAE,aAAA5S,OAAYO,KAAK+e,SAAS/e,KAAKif,MAAMrb,GAAGyO,IAAIQ,WAAU,KAEpG,CACF,CACF,GACA,CAAA5M,IAAA,gBAAApG,MAKA,SAAc+D,EAAG7E,GACf,IAAMmO,EAAIlN,KAAKif,MAAMrb,GACf2c,EAAKvgB,KAAK+e,SAAS7R,EAAE,IACrBsT,EAAKxgB,KAAK+e,SAAS7R,EAAE,IACrBuT,EAAKzgB,KAAK+e,SAAS7R,EAAE,IAC3BuR,EAAiBiC,cAAcH,EAAIC,EAAIC,EAAI1hB,EAC7C,GACA,CAAAkH,IAAA,kBAAApG,MAsBA,SAAgB8gB,EAAMC,EAAOC,EAAOC,EAAMC,EAAOC,EAAkBC,EAASC,EAASjD,GAKnF,IAJA,IAAMkD,EAAc,IAAIxQ,EACpByQ,GAAgB,EAChBC,GAAQ1hB,OAAO2hB,UAEVrB,EAAO,EAAGA,EAAOY,EAAM5B,MAAM1c,OAAQ0d,IAAQ,CACpDkB,EAAYld,KAAK4c,EAAMxB,YAAYY,IACnCc,EAAMzK,MAAM6K,EAAaA,GACzB,IAAM9J,EAAI8J,EAAY3M,IAAIwM,GAEtB3J,EAAIgK,IACNA,EAAOhK,EACP+J,EAAenB,EAEnB,CAIA,IAFA,IAAMsB,EAAe,GAEZ3d,EAAI,EAAGA,EAAIid,EAAM5B,MAAMmC,GAAc7e,OAAQqB,IAAK,CACzD,IAAMwO,EAAIyO,EAAM9B,SAAS8B,EAAM5B,MAAMmC,GAAcxd,IAC7C4d,EAAS,IAAI7Q,EACnB6Q,EAAOvd,KAAKmO,GACZ2O,EAAMzK,MAAMkL,EAAQA,GACpBV,EAAKtK,KAAKgL,EAAQA,GAClBD,EAAajf,KAAKkf,EACpB,CAEIJ,GAAgB,GAClBphB,KAAKyhB,oBAAoBT,EAAkBL,EAAMC,EAAOW,EAAcN,EAASC,EAASjD,EAE5F,GACA,CAAAhY,IAAA,qBAAApG,MAOA,SAAmBghB,EAAOF,EAAMC,EAAOE,EAAMC,EAAOhiB,EAAQ2iB,EAAWC,GACrE,IAAMC,EAAiB,IAAIjR,EACrBkR,EAAe,IAAIlR,EACnBmR,EAAS,IAAInR,EACboR,EAAa,IAAIpR,EACjBqR,EAAa,IAAIrR,EACjBsR,EAAQ,IAAItR,EACduR,EAAOviB,OAAO2hB,UACZa,EAAQniB,KAEd,GAAKmiB,EAAMvC,WAqBT,IAAK,IAAIhc,EAAI,EAAGA,IAAMue,EAAMvC,WAAWrd,OAAQqB,IAAK,CAElDgd,EAAMtK,MAAM6L,EAAMvC,WAAWhc,GAAIge,GACjC,IAAMvK,EAAI8K,EAAMC,YAAYR,EAAgBf,EAAOF,EAAMC,EAAOE,EAAMC,GAEtE,IAAU,IAAN1J,EACF,OAAO,EAGLA,EAAI6K,IACNA,EAAO7K,EACPtY,EAAOkF,KAAK2d,GAEhB,MA/BA,IAFA,IAAMS,EAAYX,EAAYA,EAAUnf,OAAS4f,EAAMlD,MAAM1c,OAEpDqB,EAAI,EAAGA,EAAIye,EAAWze,IAAK,CAClC,IAAM0e,EAAKZ,EAAYA,EAAU9d,GAAKA,EAEtCge,EAAe3d,KAAKke,EAAM9C,YAAYiD,IACtC1B,EAAMtK,MAAMsL,EAAgBA,GAC5B,IAAMvK,EAAI8K,EAAMC,YAAYR,EAAgBf,EAAOF,EAAMC,EAAOE,EAAMC,GAEtE,IAAU,IAAN1J,EACF,OAAO,EAGLA,EAAI6K,IACNA,EAAO7K,EACPtY,EAAOkF,KAAK2d,GAEhB,CAmBF,GAAKf,EAAMjB,WAqBT,IAAK,IAAIhc,EAAI,EAAGA,IAAMid,EAAMjB,WAAWrd,OAAQqB,IAAK,CAClDmd,EAAMzK,MAAMuK,EAAMjB,WAAWhc,GAAIie,GACjC,IAAMxK,EAAI8K,EAAMC,YAAYP,EAAchB,EAAOF,EAAMC,EAAOE,EAAMC,GAEpE,IAAU,IAAN1J,EACF,OAAO,EAGLA,EAAI6K,IACNA,EAAO7K,EACPtY,EAAOkF,KAAK4d,GAEhB,MA7BA,IAFA,IAAMU,EAAYZ,EAAYA,EAAUpf,OAASse,EAAM5B,MAAM1c,OAEpDqB,EAAI,EAAGA,EAAI2e,EAAW3e,IAAK,CAClC,IAAM0e,EAAKX,EAAYA,EAAU/d,GAAKA,EACtCie,EAAa5d,KAAK4c,EAAMxB,YAAYiD,IACpCvB,EAAMzK,MAAMuL,EAAcA,GAC1B,IAAMxK,EAAI8K,EAAMC,YAAYP,EAAchB,EAAOF,EAAMC,EAAOE,EAAMC,GAEpE,IAAU,IAAN1J,EACF,OAAO,EAGLA,EAAI6K,IACNA,EAAO7K,EACPtY,EAAOkF,KAAK4d,GAEhB,CAmBF,IAAK,IAAIW,EAAK,EAAGA,IAAOL,EAAMtC,YAAYtd,OAAQigB,IAAM,CAEtD5B,EAAMtK,MAAM6L,EAAMtC,YAAY2C,GAAKT,GAEnC,IAAK,IAAIU,EAAK,EAAGA,IAAO5B,EAAMhB,YAAYtd,OAAQkgB,IAKhD,GAHA1B,EAAMzK,MAAMuK,EAAMhB,YAAY4C,GAAKT,GACnCD,EAAW1M,MAAM2M,EAAYC,IAExBA,EAAMS,aAAc,CACvBT,EAAM3I,YACN,IAAMqJ,EAAOR,EAAMC,YAAYH,EAAOpB,EAAOF,EAAMC,EAAOE,EAAMC,GAEhE,IAAa,IAAT4B,EACF,OAAO,EAGLA,EAAOT,IACTA,EAAOS,EACP5jB,EAAOkF,KAAKge,GAEhB,CAEJ,CAQA,OANAnB,EAAKxC,KAAKqC,EAAMmB,GAEZA,EAAOtN,IAAIzV,GAAU,GACvBA,EAAOwW,OAAOxW,IAGT,CACT,GACA,CAAAkH,IAAA,cAAApG,MAMA,SAAY+iB,EAAM/B,EAAOF,EAAMC,EAAOE,EAAMC,GAE1CtC,EAAiBoE,QADH7iB,KACkB4iB,EAAMjC,EAAMC,EAAOkC,IACnDrE,EAAiBoE,QAAQhC,EAAO+B,EAAM9B,EAAMC,EAAOgC,IACnD,IAAMC,EAAOF,GAAQ,GACfG,EAAOH,GAAQ,GACfI,EAAOH,GAAQ,GACfI,EAAOJ,GAAQ,GAErB,GAAIC,EAAOG,GAAQD,EAAOD,EACxB,OAAO,EAGT,IAAMG,EAAKJ,EAAOG,EACZE,EAAKH,EAAOD,EAElB,OADcG,EAAKC,EAAKD,EAAKC,CAE/B,GACA,CAAApd,IAAA,wBAAApG,MAKA,SAAsBsd,EAAMpe,GAG1B,IAAMukB,EAAU,IAAI3S,EACd4S,EAAU,IAAI5S,EACpB3Q,KAAKwjB,iBAAiBD,EAASD,GAC/B,IAAMtU,EAAIsU,EAAQtU,EAAIuU,EAAQvU,EACxBC,EAAIqU,EAAQrU,EAAIsU,EAAQtU,EACxBC,EAAIoU,EAAQpU,EAAIqU,EAAQrU,EAC9BnQ,EAAOiQ,EAAI,EAAM,GAAOmO,GAAQ,EAAIlO,EAAI,EAAIA,EAAI,EAAIC,EAAI,EAAIA,GAC5DnQ,EAAOkQ,EAAI,EAAM,GAAOkO,GAAQ,EAAInO,EAAI,EAAIA,EAAI,EAAIE,EAAI,EAAIA,GAC5DnQ,EAAOmQ,EAAI,EAAM,GAAOiO,GAAQ,EAAIlO,EAAI,EAAIA,EAAI,EAAID,EAAI,EAAIA,EAC9D,GACA,CAAA/I,IAAA,yBAAApG,MAKA,SAAuB4jB,GACrB,IAAMvW,EAAIlN,KAAKif,MAAMwE,GACfzf,EAAIhE,KAAKqf,YAAYoE,GACrB7S,EAAI5Q,KAAK+e,SAAS7R,EAAE,IAE1B,OADWlJ,EAAEwQ,IAAI5D,EAEnB,GACA,CAAA3K,IAAA,sBAAApG,MAQA,SAAoBmhB,EAAkBL,EAAMC,EAAOW,EAAcN,EAASC,EAASjD,GAgBjF,IAfA,IAAMyF,EAAgB,IAAI/S,EACpBgT,EAAQ,IAAIhT,EACZiT,EAAa,IAAIjT,EACjBkT,EAAqB,IAAIlT,EACzBmT,EAAiB,IAAInT,EACrBoT,EAAU,IAAIpT,EACdqT,EAAmB,IAAIrT,EACvBsT,EAAgB,IAAItT,EACpBwR,EAAQniB,KAERkkB,EAAS3C,EACT4C,EAFe,GAGjBC,GAAgB,EAChBlC,EAAOviB,OAAO2hB,UAETrB,EAAO,EAAGA,EAAOkC,EAAMlD,MAAM1c,OAAQ0d,IAAQ,CACpDyD,EAAczf,KAAKke,EAAM9C,YAAYY,IACrCW,EAAMtK,MAAMoN,EAAeA,GAC3B,IAAMrM,EAAIqM,EAAclP,IAAIwM,GAExB3J,EAAI6K,IACNA,EAAO7K,EACP+M,EAAenE,EAEnB,CAEA,KAAImE,EAAe,GAAnB,CAKA,IAAMC,EAAQlC,EAAMlD,MAAMmF,GAC1BC,EAAMC,eAAiB,GAEvB,IAAK,IAAI1gB,EAAI,EAAGA,EAAIue,EAAMlD,MAAM1c,OAAQqB,IACtC,IAAK,IAAIyO,EAAI,EAAGA,EAAI8P,EAAMlD,MAAMrb,GAAGrB,OAAQ8P,KAGH,IAAtCgS,EAAM9c,QAAQ4a,EAAMlD,MAAMrb,GAAGyO,KAE7BzO,IAAMwgB,IAE+B,IAArCC,EAAMC,eAAe/c,QAAQ3D,IAC3BygB,EAAMC,eAAehiB,KAAKsB,GAShC,IAFA,IAAM2gB,EAAeF,EAAM9hB,OAElBqB,EAAI,EAAGA,EAAI2gB,EAAc3gB,IAAK,CACrC,IAAMuT,EAAIgL,EAAMpD,SAASsF,EAAMzgB,IACzBwO,EAAI+P,EAAMpD,SAASsF,GAAOzgB,EAAI,GAAK2gB,IACzCpN,EAAEmH,KAAKlM,EAAGuR,GACVC,EAAW3f,KAAK0f,GAChB/C,EAAMtK,MAAMsN,EAAYA,GACxBjD,EAAKnK,KAAKoN,EAAYA,GACtBC,EAAmB5f,KAAKjE,KAAKqf,YAAY+E,IACzCxD,EAAMtK,MAAMuN,EAAoBA,GAChClD,EAAKnK,KAAKqN,EAAoBA,GAC9BD,EAAWvO,MAAMwO,EAAoBC,GACrCA,EAAevO,OAAOuO,GACtBC,EAAQ9f,KAAKkT,GACbyJ,EAAMtK,MAAMyN,EAASA,GACrBpD,EAAKnK,KAAKuN,EAASA,GACnB,IAAMS,EAAYH,EAAMC,eAAe1gB,GACvCogB,EAAiB/f,KAAKjE,KAAKqf,YAAYmF,IACvC,IAAMC,EAAezkB,KAAK0kB,uBAAuBF,GACjDP,EAAchgB,KAAK+f,GACnBpD,EAAMtK,MAAM2N,EAAeA,GAC3B,IAAMU,EAAYF,EAAeR,EAAczP,IAAImM,GAInD,IAFA3gB,KAAK4kB,qBAAqBV,EAAQC,EAASF,EAAeU,GAEnDT,EAAO3hB,QACZ2hB,EAAOve,QAGT,KAAOwe,EAAQ5hB,QACb2hB,EAAO5hB,KAAK6hB,EAAQxe,QAExB,CAGAqe,EAAiB/f,KAAKjE,KAAKqf,YAAY+E,IACvC,IAAMK,EAAezkB,KAAK0kB,uBAAuBN,GACjDH,EAAchgB,KAAK+f,GACnBpD,EAAMtK,MAAM2N,EAAeA,GAG3B,IAFA,IAAMU,EAAYF,EAAeR,EAAczP,IAAImM,GAE1C/c,EAAI,EAAGA,EAAIsgB,EAAO3hB,OAAQqB,IAAK,CACtC,IAAIihB,EAAQZ,EAAczP,IAAI0P,EAAOtgB,IAAM+gB,EAO3C,GALIE,GAAS5D,IACXpe,QAAQiiB,IAAI,kBAADrlB,OAAmBolB,EAAK,gBAAAplB,OAAewhB,IAClD4D,EAAQ5D,GAGN4D,GAAS3D,EAAS,CACpB,IAAM6D,EAAQb,EAAOtgB,GAErB,GAAIihB,GAAS,KAAM,CACjB,IAAMpS,EAAI,CACRsS,MAAAA,EACAC,OAAQf,EACRY,MAAAA,GAEF5G,EAAO3b,KAAKmQ,EACd,CACF,CACF,CApFA,CAqFF,GACA,CAAAxM,IAAA,uBAAApG,MAMA,SAAqBolB,EAAYC,EAAaC,EAAaC,GACzD,IAAIC,EACAC,EACEC,EAAWN,EAAW1iB,OAE5B,GAAIgjB,EAAW,EACb,OAAOL,EAGT,IAAIM,EAAcP,EAAWA,EAAW1iB,OAAS,GAC7CkjB,EAAaR,EAAW,GAC5BI,EAAcF,EAAY3Q,IAAIgR,GAAeJ,EAE7C,IAAK,IAAIM,EAAK,EAAGA,EAAKH,EAAUG,IAAM,CAIpC,GAHAD,EAAaR,EAAWS,GACxBJ,EAAaH,EAAY3Q,IAAIiR,GAAcL,EAEvCC,EAAc,EAChB,GAAIC,EAAa,EAAG,CAElB,IAAMK,EAAO,IAAIhV,EACjBgV,EAAK1hB,KAAKwhB,GACVP,EAAY5iB,KAAKqjB,EACnB,KAAO,CAEL,IAAMA,EAAO,IAAIhV,EACjB6U,EAAYI,KAAKH,EAAYJ,GAAeA,EAAcC,GAAaK,GACvET,EAAY5iB,KAAKqjB,EACnB,MAEA,GAAIL,EAAa,EAAG,CAElB,IAAMK,EAAO,IAAIhV,EACjB6U,EAAYI,KAAKH,EAAYJ,GAAeA,EAAcC,GAAaK,GACvET,EAAY5iB,KAAKqjB,GACjBT,EAAY5iB,KAAKmjB,EACnB,CAGFD,EAAcC,EACdJ,EAAcC,CAChB,CAEA,OAAOJ,CACT,GACA,CAAAjf,IAAA,uBAAApG,MAKA,SAAqB4F,EAAUsU,GAC7B,KAAO/Z,KAAKwf,cAAcjd,OAASvC,KAAK+e,SAASxc,QAC/CvC,KAAKwf,cAAcld,KAAK,IAAIqO,GAM9B,IAHA,IAAMkV,EAAQ7lB,KAAK+e,SACb+G,EAAa9lB,KAAKwf,cAEf5b,EAAI,EAAGA,IAAM5D,KAAK+e,SAASxc,OAAQqB,IAC1CmW,EAAKzD,MAAMuP,EAAMjiB,GAAIkiB,EAAWliB,IAChC6B,EAAS+Q,KAAKsP,EAAWliB,GAAIkiB,EAAWliB,IAG1C5D,KAAKyf,0BAA2B,CAClC,GAAC,CAAAxZ,IAAA,mBAAApG,MAED,SAAiB0jB,EAASD,GACxB,IAAMvE,EAAW/e,KAAK+e,SACtBwE,EAAQ9e,IAAI9E,OAAO2hB,UAAW3hB,OAAO2hB,UAAW3hB,OAAO2hB,WACvDgC,EAAQ7e,KAAK9E,OAAO2hB,WAAY3hB,OAAO2hB,WAAY3hB,OAAO2hB,WAE1D,IAAK,IAAI1d,EAAI,EAAGA,EAAI5D,KAAK+e,SAASxc,OAAQqB,IAAK,CAC7C,IAAMgN,EAAImO,EAASnb,GAEfgN,EAAE5B,EAAIuU,EAAQvU,EAChBuU,EAAQvU,EAAI4B,EAAE5B,EACL4B,EAAE5B,EAAIsU,EAAQtU,IACvBsU,EAAQtU,EAAI4B,EAAE5B,GAGZ4B,EAAE3B,EAAIsU,EAAQtU,EAChBsU,EAAQtU,EAAI2B,EAAE3B,EACL2B,EAAE3B,EAAIqU,EAAQrU,IACvBqU,EAAQrU,EAAI2B,EAAE3B,GAGZ2B,EAAE1B,EAAIqU,EAAQrU,EAChBqU,EAAQrU,EAAI0B,EAAE1B,EACL0B,EAAE1B,EAAIoU,EAAQpU,IACvBoU,EAAQpU,EAAI0B,EAAE1B,EAElB,CACF,GACA,CAAAjJ,IAAA,0BAAApG,MAKA,SAAwBka,GAGtB,IAFA,IAAMgM,EAAI/lB,KAAKqf,YAAY9c,OAEpBvC,KAAK0f,iBAAiBnd,OAASwjB,GACpC/lB,KAAK0f,iBAAiBpd,KAAK,IAAIqO,GAMjC,IAHA,IAAMwO,EAAUnf,KAAKqf,YACf2G,EAAehmB,KAAK0f,iBAEjB9b,EAAI,EAAGA,IAAMmiB,EAAGniB,IACvBmW,EAAKzD,MAAM6I,EAAQvb,GAAIoiB,EAAapiB,IAGtC5D,KAAK2f,6BAA8B,CACrC,GACA,CAAA1Z,IAAA,6BAAApG,MAKA,WAKE,IAHA,IAAIomB,EAAO,EACLJ,EAAQ7lB,KAAK+e,SAEVnb,EAAI,EAAGA,IAAMiiB,EAAMtjB,OAAQqB,IAAK,CACvC,IAAMsiB,EAAQL,EAAMjiB,GAAGuiB,gBAEnBD,EAAQD,IACVA,EAAOC,EAEX,CAEAlmB,KAAK8c,qBAAuB1I,KAAKC,KAAK4R,EACxC,GACA,CAAAhgB,IAAA,qBAAApG,MAKA,SAAmBud,EAAKrD,EAAMrD,EAAKC,GAUjC,IATA,IACIyP,EACAC,EACAC,EACAC,EACAC,EACAC,EANEZ,EAAQ7lB,KAAK+e,SAOf2H,EAAkB,IAAI/V,EAEjB/M,EAAI,EAAGA,EAAIiiB,EAAMtjB,OAAQqB,IAAK,CACrC8iB,EAAgBziB,KAAK4hB,EAAMjiB,IAC3BmW,EAAKzD,MAAMoQ,EAAiBA,GAC5BtJ,EAAI5G,KAAKkQ,EAAiBA,GAC1B,IAAM9V,EAAI8V,QAEGvlB,IAATilB,GAAsBxV,EAAE5B,EAAIoX,KAC9BA,EAAOxV,EAAE5B,SAGE7N,IAATolB,GAAsB3V,EAAE5B,EAAIuX,KAC9BA,EAAO3V,EAAE5B,SAGE7N,IAATklB,GAAsBzV,EAAE3B,EAAIoX,KAC9BA,EAAOzV,EAAE3B,SAGE9N,IAATqlB,GAAsB5V,EAAE3B,EAAIuX,KAC9BA,EAAO5V,EAAE3B,SAGE9N,IAATmlB,GAAsB1V,EAAE1B,EAAIoX,KAC9BA,EAAO1V,EAAE1B,SAGE/N,IAATslB,GAAsB7V,EAAE1B,EAAIuX,KAC9BA,EAAO7V,EAAE1B,EAEb,CAEAwH,EAAIjS,IAAI2hB,EAAMC,EAAMC,GACpB3P,EAAIlS,IAAI8hB,EAAMC,EAAMC,EACtB,GACA,CAAAxgB,IAAA,SAAApG,MAKA,WACE,OAAO,EAAMuU,KAAKyF,GAAK7Z,KAAK8c,qBAAuB,CACrD,GACA,CAAA7W,IAAA,uBAAApG,MAKA,SAAqBd,QACJ,IAAXA,IACFA,EAAS,IAAI4R,GAKf,IAFA,IAAMkV,EAAQ7lB,KAAK+e,SAEVnb,EAAI,EAAGA,EAAIiiB,EAAMtjB,OAAQqB,IAChC7E,EAAOyX,KAAKqP,EAAMjiB,GAAI7E,GAIxB,OADAA,EAAO4nB,MAAM,EAAId,EAAMtjB,OAAQxD,GACxBA,CACT,GACA,CAAAkH,IAAA,qBAAApG,MAKA,SAAmB+mB,EAAQ7M,GACzB,IAAM/V,EAAIhE,KAAK+e,SAASxc,OAClBsjB,EAAQ7lB,KAAK+e,SAEnB,GAAIhF,EAAM,CAER,IAAK,IAAInW,EAAI,EAAGA,EAAII,EAAGJ,IAAK,CAC1B,IAAMgN,EAAIiV,EAAMjiB,GAChBmW,EAAKzD,MAAM1F,EAAGA,EAChB,CAGA,IAAK,IAAIhN,EAAI,EAAGA,EAAI5D,KAAKqf,YAAY9c,OAAQqB,IAAK,CAChD,IAAMgN,EAAI5Q,KAAKqf,YAAYzb,GAC3BmW,EAAKzD,MAAM1F,EAAGA,EAChB,CAQF,CAGA,GAAIgW,EACF,IAAK,IAAIhjB,EAAI,EAAGA,EAAII,EAAGJ,IAAK,CAC1B,IAAMgN,EAAIiV,EAAMjiB,GAChBgN,EAAE4F,KAAKoQ,EAAQhW,EACjB,CAEJ,GACA,CAAA3K,IAAA,gBAAApG,MAQA,SAAc4S,GACZ,IAAMoT,EAAQ7lB,KAAK+e,SACbE,EAAQjf,KAAKif,MACbE,EAAUnf,KAAKqf,YACfwH,EAAc,IAAIlW,EACxB3Q,KAAK8mB,qBAAqBD,GAE1B,IAAK,IAAIjjB,EAAI,EAAGA,EAAI5D,KAAKif,MAAM1c,OAAQqB,IAAK,CAC1C,IAAII,EAAImb,EAAQvb,GACVgN,EAAIiV,EAAM5G,EAAMrb,GAAG,IAGnBmjB,EAAO,IAAIpW,EACjB8B,EAAE6L,KAAK1N,EAAGmW,GACV,IAAMC,EAAKhjB,EAAEwQ,IAAIuS,GACXE,EAAiB,IAAItW,EAC3BkW,EAAYvI,KAAK1N,EAAGqW,GACpB,IAAMC,EAAKljB,EAAEwQ,IAAIyS,GAEjB,GAAID,EAAK,GAAKE,EAAK,GAAKF,EAAK,GAAKE,EAAK,EACrC,OAAO,CAEX,CAGA,OAAQ,CACV,IACA,EAAAjhB,IAAA,gBAAApG,MA9nBA,SAAqB0gB,EAAIC,EAAIC,EAAI1hB,GAC/B,IAAMooB,EAAK,IAAIxW,EACTyW,EAAK,IAAIzW,EACf6P,EAAGlC,KAAKiC,EAAI6G,GACZ3G,EAAGnC,KAAKkC,EAAI2G,GACZA,EAAG9R,MAAM+R,EAAIroB,GAERA,EAAOsoB,UACVtoB,EAAOua,WAEX,GAAC,CAAArT,IAAA,UAAApG,MA2nBD,SAAeynB,EAAO1E,EAAMxF,EAAKrD,EAAMkE,GACrC,IAAMja,EAAIsjB,EAAMvI,SAASxc,OACnBglB,EAAYC,GACd7Q,EAAM,EACND,EAAM,EACJ+Q,EAAcC,GACdC,EAAKL,EAAMvI,SACjB0I,EAAYG,UAEZ7J,GAAY8J,mBAAmBzK,EAAKrD,EAAM6I,EAAM2E,GAChDxJ,GAAYG,kBAAkBd,EAAKrD,EAAM0N,EAAaA,GACtD,IAAMK,EAAML,EAAYjT,IAAI+S,GAC5B7Q,EAAMC,EAAMgR,EAAG,GAAGnT,IAAI+S,GAEtB,IAAK,IAAI3jB,EAAI,EAAGA,EAAII,EAAGJ,IAAK,CAC1B,IAAMmkB,EAAMJ,EAAG/jB,GAAG4Q,IAAI+S,GAElBQ,EAAMpR,IACRA,EAAMoR,GAGJA,EAAMrR,IACRA,EAAMqR,EAEV,CAKA,IAHArR,GAAOoR,IACPnR,GAAOmR,GAEQ,CAEb,IAAME,EAAOtR,EACbA,EAAMC,EACNA,EAAMqR,CACR,CAGA/J,EAAO,GAAKtH,EACZsH,EAAO,GAAKvH,CACd,KAAC+H,CAAA,CAl0BmB,CAAS7B,IAq0BzBkG,GAAU,GACVC,GAAU,GAChB,IAAIpS,EACJ,IAAM6W,GAAoB,IAAI7W,EACxB+W,GAAsB,IAAI/W,EAW1BsX,GAAG,SAAAC,IAAA7f,EAAAA,EAAAA,GAAA4f,EAAAC,GAAA,IAAAC,GAAA5f,EAAAA,EAAAA,GAAA0f,GAQP,SAAAA,EAAYG,GAAa,IAAAC,EAOW,OAPX3f,EAAAA,EAAAA,GAAA,KAAAuf,IACvBI,EAAAF,EAAA/oB,KAAA,KAAM,CACJyC,KAAM+a,GAAQS,MAAMG,OAEjB4K,YAAcA,EACnBC,EAAKC,+BAAiC,KACtCD,EAAKE,uCACLF,EAAK9I,6BAA6B8I,CACpC,CA+CC,OA9CD1d,EAAAA,EAAAA,GAAAsd,EAAA,EAAAhiB,IAAA,uCAAApG,MAKA,WACE,IAAM2oB,EAAKxoB,KAAKooB,YAAYpZ,EACtByZ,EAAKzoB,KAAKooB,YAAYnZ,EACtByZ,EAAK1oB,KAAKooB,YAAYlZ,EACtByZ,EAAIhY,EACJoO,EAAW,CAAC,IAAI4J,GAAGH,GAAKC,GAAKC,GAAK,IAAIC,EAAEH,GAAKC,GAAKC,GAAK,IAAIC,EAAEH,EAAIC,GAAKC,GAAK,IAAIC,GAAGH,EAAIC,GAAKC,GAAK,IAAIC,GAAGH,GAAKC,EAAIC,GAAK,IAAIC,EAAEH,GAAKC,EAAIC,GAAK,IAAIC,EAAEH,EAAIC,EAAIC,GAAK,IAAIC,GAAGH,EAAIC,EAAIC,IAQ3KtJ,EAAO,CAAC,IAAIuJ,EAAE,EAAG,EAAG,GAAI,IAAIA,EAAE,EAAG,EAAG,GAAI,IAAIA,EAAE,EAAG,EAAG,IACpDpR,EAAI,IAAIkH,GAAiB,CAC7BM,SAAAA,EACAE,MAVY,CAAC,CAAC,EAAG,EAAG,EAAG,GACzB,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,IAMRG,KAAAA,IAEFpf,KAAKsoB,+BAAiC/Q,EACtCA,EAAE2F,SAAWld,KAAKkd,QACpB,GACA,CAAAjX,IAAA,wBAAApG,MAKA,SAAsBsd,EAAMpe,GAM1B,YALe,IAAXA,IACFA,EAAS,IAAI4R,GAGfsX,EAAIW,iBAAiB5oB,KAAKooB,YAAajL,EAAMpe,GACtCA,CACT,GAAC,CAAAkH,IAAA,iBAAApG,MAeD,SAAegpB,EAAkB9O,GAC/B,IAAM+O,EAAQD,EACRE,EAAK/oB,KAAKooB,YAQhB,GAPAU,EAAM,GAAGrkB,IAAIskB,EAAG/Z,EAAG,EAAG,GACtB8Z,EAAM,GAAGrkB,IAAI,EAAGskB,EAAG9Z,EAAG,GACtB6Z,EAAM,GAAGrkB,IAAI,EAAG,EAAGskB,EAAG7Z,GACtB4Z,EAAM,GAAGrkB,KAAKskB,EAAG/Z,EAAG,EAAG,GACvB8Z,EAAM,GAAGrkB,IAAI,GAAIskB,EAAG9Z,EAAG,GACvB6Z,EAAM,GAAGrkB,IAAI,EAAG,GAAIskB,EAAG7Z,QAEV/N,IAAT4Y,EACF,IAAK,IAAInW,EAAI,EAAGA,IAAMklB,EAAMvmB,OAAQqB,IAClCmW,EAAKzD,MAAMwS,EAAMllB,GAAIklB,EAAMllB,IAI/B,OAAOklB,CACT,GACA,CAAA7iB,IAAA,SAAApG,MAKA,WACE,OAAO,EAAMG,KAAKooB,YAAYpZ,EAAIhP,KAAKooB,YAAYnZ,EAAIjP,KAAKooB,YAAYlZ,CAC1E,GACA,CAAAjJ,IAAA,6BAAApG,MAKA,WACEG,KAAK8c,qBAAuB9c,KAAKooB,YAAY7lB,QAC/C,GACA,CAAA0D,IAAA,qBAAApG,MAKA,SAAmBud,EAAKrD,EAAMiP,GAI5B,IAHA,IAAM/b,EAAIjN,KAAKooB,YACT3Q,EAAU,CAAC,CAACxK,EAAE+B,EAAG/B,EAAEgC,EAAGhC,EAAEiC,GAAI,EAAEjC,EAAE+B,EAAG/B,EAAEgC,EAAGhC,EAAEiC,GAAI,EAAEjC,EAAE+B,GAAI/B,EAAEgC,EAAGhC,EAAEiC,GAAI,EAAEjC,EAAE+B,GAAI/B,EAAEgC,GAAIhC,EAAEiC,GAAI,CAACjC,EAAE+B,GAAI/B,EAAEgC,GAAIhC,EAAEiC,GAAI,CAACjC,EAAE+B,EAAG/B,EAAEgC,GAAIhC,EAAEiC,GAAI,EAAEjC,EAAE+B,EAAG/B,EAAEgC,GAAIhC,EAAEiC,GAAI,CAACjC,EAAE+B,GAAI/B,EAAEgC,EAAGhC,EAAEiC,IAExJtL,EAAI,EAAGA,EAAI6T,EAAQlV,OAAQqB,IAClCqlB,GAAmBxkB,IAAIgT,EAAQ7T,GAAG,GAAI6T,EAAQ7T,GAAG,GAAI6T,EAAQ7T,GAAG,IAChEmW,EAAKzD,MAAM2S,GAAoBA,IAC/B7L,EAAI5G,KAAKyS,GAAoBA,IAC7BD,EAASC,GAAmBja,EAAGia,GAAmBha,EAAGga,GAAmB/Z,EAE5E,GACA,CAAAjJ,IAAA,qBAAApG,MAKA,SAAmBud,EAAKrD,EAAMrD,EAAKC,GACjC,IAAM1J,EAAIjN,KAAKooB,YACfc,GAAiB,GAAGzkB,IAAIwI,EAAE+B,EAAG/B,EAAEgC,EAAGhC,EAAEiC,GACpCga,GAAiB,GAAGzkB,KAAKwI,EAAE+B,EAAG/B,EAAEgC,EAAGhC,EAAEiC,GACrCga,GAAiB,GAAGzkB,KAAKwI,EAAE+B,GAAI/B,EAAEgC,EAAGhC,EAAEiC,GACtCga,GAAiB,GAAGzkB,KAAKwI,EAAE+B,GAAI/B,EAAEgC,GAAIhC,EAAEiC,GACvCga,GAAiB,GAAGzkB,IAAIwI,EAAE+B,GAAI/B,EAAEgC,GAAIhC,EAAEiC,GACtCga,GAAiB,GAAGzkB,IAAIwI,EAAE+B,EAAG/B,EAAEgC,GAAIhC,EAAEiC,GACrCga,GAAiB,GAAGzkB,KAAKwI,EAAE+B,EAAG/B,EAAEgC,GAAIhC,EAAEiC,GACtCga,GAAiB,GAAGzkB,IAAIwI,EAAE+B,GAAI/B,EAAEgC,EAAGhC,EAAEiC,GACrC,IAAMia,EAAKD,GAAiB,GAC5BnP,EAAKzD,MAAM6S,EAAIA,GACf/L,EAAI5G,KAAK2S,EAAIA,GACbxS,EAAI1S,KAAKklB,GACTzS,EAAIzS,KAAKklB,GAET,IAAK,IAAIvlB,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,IAAMulB,EAAKD,GAAiBtlB,GAC5BmW,EAAKzD,MAAM6S,EAAIA,GACf/L,EAAI5G,KAAK2S,EAAIA,GACb,IAAMna,EAAIma,EAAGna,EACPC,EAAIka,EAAGla,EACPC,EAAIia,EAAGja,EAETF,EAAI2H,EAAI3H,IACV2H,EAAI3H,EAAIA,GAGNC,EAAI0H,EAAI1H,IACV0H,EAAI1H,EAAIA,GAGNC,EAAIyH,EAAIzH,IACVyH,EAAIzH,EAAIA,GAGNF,EAAI0H,EAAI1H,IACV0H,EAAI1H,EAAIA,GAGNC,EAAIyH,EAAIzH,IACVyH,EAAIzH,EAAIA,GAGNC,EAAIwH,EAAIxH,IACVwH,EAAIxH,EAAIA,EAEZ,CAwBF,IAAC,EAAAjJ,IAAA,mBAAApG,MA3ID,SAAwBuoB,EAAajL,EAAMpe,GACzC,IAAMkO,EAAImb,EACVrpB,EAAOiQ,EAAI,EAAM,GAAOmO,GAAQ,EAAIlQ,EAAEgC,EAAI,EAAIhC,EAAEgC,EAAI,EAAIhC,EAAEiC,EAAI,EAAIjC,EAAEiC,GACpEnQ,EAAOkQ,EAAI,EAAM,GAAOkO,GAAQ,EAAIlQ,EAAE+B,EAAI,EAAI/B,EAAE+B,EAAI,EAAI/B,EAAEiC,EAAI,EAAIjC,EAAEiC,GACpEnQ,EAAOmQ,EAAI,EAAM,GAAOiO,GAAQ,EAAIlQ,EAAEgC,EAAI,EAAIhC,EAAEgC,EAAI,EAAIhC,EAAE+B,EAAI,EAAI/B,EAAE+B,EACtE,KAACiZ,CAAA,CA/DM,CAASrL,IAwMZqM,GAAqB,IAAItY,EACzBuY,GAAmB,CAAC,IAAIvY,EAAU,IAAIA,EAAU,IAAIA,EAAU,IAAIA,EAAU,IAAIA,EAAU,IAAIA,EAAU,IAAIA,EAAU,IAAIA,GAK1HyY,GAEK,EAFLA,GAKI,EALJA,GAQO,EASPC,GAEG,EAFHA,GAKI,EALJA,GAQM,EAgBNC,GAAI,SAAAC,IAAAlhB,EAAAA,EAAAA,GAAAihB,EAAAC,GAAA,IAAAC,GAAAjhB,EAAAA,EAAAA,GAAA+gB,GA+CR,SAAAA,EAAYthB,GAAS,IAAAyhB,GAAA/gB,EAAAA,EAAAA,GAAA,KAAA4gB,QACH,IAAZthB,IACFA,EAAU,CAAC,IAGbyhB,EAAAD,EAAApqB,KAAA,OACK+Q,GAAKmZ,EAAKzM,YACf4M,EAAK7jB,OAAS,EACd6jB,EAAKC,MAAQ,KACbD,EAAKE,QAAU,IAAIhZ,EACnB8Y,EAAKzM,qBAA+D,kBAAjChV,EAAQgV,qBAAoChV,EAAQgV,qBAAuB,EAC9GyM,EAAKxM,oBAA6D,kBAAhCjV,EAAQiV,oBAAmCjV,EAAQiV,qBAAuB,EAC5GwM,EAAK1M,kBAAyD,mBAA9B/U,EAAQ+U,mBAAkC/U,EAAQ+U,kBAClF0M,EAAKhkB,SAAW,IAAIkL,EACpB8Y,EAAKG,iBAAmB,IAAIjZ,EAC5B8Y,EAAKI,qBAAuB,IAAIlZ,EAChC8Y,EAAKK,aAAe,IAAInZ,EAEpB3I,EAAQvC,WACVgkB,EAAKhkB,SAASxB,KAAK+D,EAAQvC,UAC3BgkB,EAAKG,iBAAiB3lB,KAAK+D,EAAQvC,UACnCgkB,EAAKI,qBAAqB5lB,KAAK+D,EAAQvC,UACvCgkB,EAAKK,aAAa7lB,KAAK+D,EAAQvC,WAGjCgkB,EAAKM,SAAW,IAAIpZ,EAEhB3I,EAAQ+hB,UACVN,EAAKM,SAAS9lB,KAAK+D,EAAQ+hB,UAG7BN,EAAKO,aAAe,IAAIrZ,EACxB8Y,EAAKQ,MAAQ,IAAItZ,EACjB,IAAMwM,EAA+B,kBAAjBnV,EAAQmV,KAAoBnV,EAAQmV,KAAO,EAsEnC,OArE5BsM,EAAKtM,KAAOA,EACZsM,EAAKS,QAAU/M,EAAO,EAAI,EAAMA,EAAO,EACvCsM,EAAKvM,SAAWlV,EAAQkV,UAAY,KACpCuM,EAAKU,cAAiD,kBAA1BniB,EAAQmiB,cAA6BniB,EAAQmiB,cAAgB,IACzFV,EAAK5nB,KAAOsb,GAAQ,EAAMmM,EAAKc,OAASd,EAAKe,eAElCriB,EAAQnG,cAAgBynB,EAAKc,SACtCX,EAAK5nB,KAAOmG,EAAQnG,MAGtB4nB,EAAK7gB,WAA2C,qBAAvBZ,EAAQY,YAA6BZ,EAAQY,WACtE6gB,EAAKa,WAAahB,EAAKiB,MACvBd,EAAKe,gBAAqD,qBAA5BxiB,EAAQwiB,gBAAkCxiB,EAAQwiB,gBAAkB,GAClGf,EAAKgB,eAAmD,qBAA3BziB,EAAQyiB,eAAiCziB,EAAQyiB,eAAiB,EAC/FhB,EAAKiB,eAAiB,EACtBjB,EAAKkB,wBAAyB,EAC9BlB,EAAKmB,OAAS,IAAIja,EAClB8Y,EAAKvT,WAAa,IAAI+C,EACtBwQ,EAAKoB,eAAiB,IAAI5R,EAC1BwQ,EAAKqB,mBAAqB,IAAI7R,EAC9BwQ,EAAKsB,uBAAyB,IAAI9R,EAE9BjR,EAAQkO,aACVuT,EAAKvT,WAAWjS,KAAK+D,EAAQkO,YAC7BuT,EAAKoB,eAAe5mB,KAAK+D,EAAQkO,YACjCuT,EAAKqB,mBAAmB7mB,KAAK+D,EAAQkO,YACrCuT,EAAKsB,uBAAuB9mB,KAAK+D,EAAQkO,aAG3CuT,EAAKjN,gBAAkB,IAAI7L,EAEvB3I,EAAQwU,iBACViN,EAAKjN,gBAAgBvY,KAAK+D,EAAQwU,iBAGpCiN,EAAKuB,oBAAsB,IAAIra,EAC/B8Y,EAAKwB,OAAS,GACdxB,EAAKyB,aAAe,GACpBzB,EAAK0B,kBAAoB,GACzB1B,EAAK2B,QAAU,IAAIza,EACnB8Y,EAAK4B,WAAa,IAAI1a,EACtB8Y,EAAK6B,gBAAkB,IAAI9a,EAC3BiZ,EAAK8B,aAAe,EACpB9B,EAAK+B,gBAAkB,IAAI7a,EAC3B8Y,EAAKgC,qBAAuB,IAAIjb,EAChCiZ,EAAKiC,cAAiD,qBAA1B1jB,EAAQ0jB,eAAgC1jB,EAAQ0jB,cAC5EjC,EAAKkC,eAAmD,qBAA3B3jB,EAAQ2jB,eAAiC3jB,EAAQ2jB,eAAiB,IAC/FlC,EAAKmC,aAAe,IAAIjb,EAAO,EAAG,EAAG,GAEjC3I,EAAQ4jB,cACVnC,EAAKmC,aAAa3nB,KAAK+D,EAAQ4jB,cAGjCnC,EAAK/M,cAAgB,IAAI/L,EAAO,EAAG,EAAG,GAElC3I,EAAQ0U,eACV+M,EAAK/M,cAAczY,KAAK+D,EAAQ0U,eAGlC+M,EAAKhT,KAAO,IAAIX,EAChB2T,EAAKoC,iBAAkB,EACvBpC,EAAKqC,eAAiB,EACtBrC,EAAKsC,QAAU,IAAIpb,EACnB8Y,EAAKuC,UAAYC,QAAQjkB,EAAQgkB,WAE7BhkB,EAAQsf,OACVmC,EAAKyC,SAASlkB,EAAQsf,OAGxBmC,EAAK0C,uBAAuB1C,CAC9B,CAydC,OAxdD9e,EAAAA,EAAAA,GAAA2e,EAAA,EAAArjB,IAAA,SAAApG,MAKA,WACE,IAAMusB,EAAYpsB,KAAKsqB,WACvBtqB,KAAKsqB,WAAahB,EAAKiB,MACvBvqB,KAAK2qB,wBAAyB,EAE1ByB,IAAc9C,EAAK+C,UACrBrsB,KAAKssB,cAAchD,EAAKiD,YAE5B,GACA,CAAAtmB,IAAA,QAAApG,MAKA,WACEG,KAAKsqB,WAAahB,EAAK+C,SACvBrsB,KAAK+pB,SAAStlB,IAAI,EAAG,EAAG,GACxBzE,KAAKwc,gBAAgB/X,IAAI,EAAG,EAAG,GAC/BzE,KAAK2qB,wBAAyB,CAChC,GACA,CAAA1kB,IAAA,YAAApG,MAMA,SAAU2sB,GACR,GAAIxsB,KAAK4I,WAAY,CACnB,IAAM0hB,EAAatqB,KAAKsqB,WAClBmC,EAAezsB,KAAK+pB,SAAS5D,gBAAkBnmB,KAAKwc,gBAAgB2J,gBACpEuG,EAAiBtY,KAAA0F,IAAG9Z,KAAKwqB,gBAAmB,GAE9CF,IAAehB,EAAKiB,OAASkC,EAAeC,GAC9C1sB,KAAKsqB,WAAahB,EAAKqD,OAEvB3sB,KAAK0qB,eAAiB8B,EACtBxsB,KAAKssB,cAAchD,EAAKsD,cACftC,IAAehB,EAAKqD,QAAUF,EAAeC,EACtD1sB,KAAK6sB,SACIvC,IAAehB,EAAKqD,QAAUH,EAAOxsB,KAAK0qB,eAAiB1qB,KAAKyqB,iBACzEzqB,KAAK8sB,QAEL9sB,KAAKssB,cAAchD,EAAKyD,YAE5B,CACF,GACA,CAAA9mB,IAAA,4BAAApG,MAKA,WACMG,KAAKsqB,aAAehB,EAAK+C,UAAYrsB,KAAK6B,OAASynB,EAAK0D,WAC1DhtB,KAAKurB,aAAe,EACpBvrB,KAAKwrB,gBAAgB5D,UACrB5nB,KAAKyrB,qBAAqB7D,YAE1B5nB,KAAKurB,aAAevrB,KAAKkqB,QACzBlqB,KAAKwrB,gBAAgBvnB,KAAKjE,KAAKqrB,YAC/BrrB,KAAKyrB,qBAAqBxnB,KAAKjE,KAAKsrB,iBAExC,GACA,CAAArlB,IAAA,oBAAApG,MAKA,SAAkBme,EAAYC,GAO5B,YANe,IAAXA,IACFA,EAAS,IAAItN,GAGfqN,EAAWM,KAAKte,KAAKyF,SAAUwY,GAC/Bje,KAAKkW,WAAWsE,YAAYlE,MAAM2H,EAAQA,GACnCA,CACT,GACA,CAAAhY,IAAA,qBAAApG,MAKA,SAAmB2e,EAAaP,GAM9B,YALe,IAAXA,IACFA,EAAS,IAAItN,GAGf3Q,KAAKkW,WAAWsE,YAAYlE,MAAMkI,EAAaP,GACxCA,CACT,GACA,CAAAhY,IAAA,oBAAApG,MAKA,SAAkBse,EAAYF,GAO5B,YANe,IAAXA,IACFA,EAAS,IAAItN,GAGf3Q,KAAKkW,WAAWI,MAAM6H,EAAYF,GAClCA,EAAOzH,KAAKxW,KAAKyF,SAAUwY,GACpBA,CACT,GACA,CAAAhY,IAAA,qBAAApG,MAKA,SAAmBwe,EAAaJ,GAM9B,YALe,IAAXA,IACFA,EAAS,IAAItN,GAGf3Q,KAAKkW,WAAWI,MAAM+H,EAAaJ,GAC5BA,CACT,GACA,CAAAhY,IAAA,WAAApG,MAMA,SAASynB,EAAO2F,EAASC,GACvB,IAAMtG,EAAS,IAAIjW,EACbwc,EAAc,IAAIlU,EAiBxB,OAfIgU,GACFrG,EAAO3iB,KAAKgpB,GAGVC,GACFC,EAAYlpB,KAAKipB,GAGnBltB,KAAKirB,OAAO3oB,KAAKglB,GACjBtnB,KAAKkrB,aAAa5oB,KAAKskB,GACvB5mB,KAAKmrB,kBAAkB7oB,KAAK6qB,GAC5BntB,KAAKmsB,uBACLnsB,KAAKotB,uBACLptB,KAAK6rB,iBAAkB,EACvBvE,EAAM9f,KAAOxH,KACNA,IACT,GACA,CAAAiG,IAAA,cAAApG,MAMA,SAAYynB,GACV,IAAM1hB,EAAQ5F,KAAKirB,OAAO1jB,QAAQ+f,GAElC,OAAe,IAAX1hB,GACF/C,QAAQC,KAAK,qCACN9C,OAGTA,KAAKirB,OAAOnS,OAAOlT,EAAO,GAC1B5F,KAAKkrB,aAAapS,OAAOlT,EAAO,GAChC5F,KAAKmrB,kBAAkBrS,OAAOlT,EAAO,GACrC5F,KAAKmsB,uBACLnsB,KAAKotB,uBACLptB,KAAK6rB,iBAAkB,EACvBvE,EAAM9f,KAAO,KACNxH,KACT,GACA,CAAAiG,IAAA,uBAAApG,MAKA,WAME,IALA,IAAMorB,EAASjrB,KAAKirB,OACdC,EAAelrB,KAAKkrB,aACpBnF,EAAIkF,EAAO1oB,OACb8qB,EAAS,EAEJzpB,EAAI,EAAGA,IAAMmiB,EAAGniB,IAAK,CAC5B,IAAM0jB,EAAQ2D,EAAOrnB,GACrB0jB,EAAM/H,6BACN,IAAMqH,EAASsE,EAAatnB,GAAGrB,SACzByQ,EAAIsU,EAAMxK,qBAEZ8J,EAAS5T,EAAIqa,IACfA,EAASzG,EAAS5T,EAEtB,CAEAhT,KAAK8rB,eAAiBuB,CACxB,GACA,CAAApnB,IAAA,aAAApG,MAKA,WAWE,IAVA,IAAMorB,EAASjrB,KAAKirB,OACdC,EAAelrB,KAAKkrB,aACpBC,EAAoBnrB,KAAKmrB,kBACzBpF,EAAIkF,EAAO1oB,OACXqkB,EAAS0G,GACTH,EAAcI,GACdC,EAAWxtB,KAAKkW,WAChBO,EAAOzW,KAAKyW,KACZgX,EAAYC,GAET9pB,EAAI,EAAGA,IAAMmiB,EAAGniB,IAAK,CAC5B,IAAM0jB,EAAQ2D,EAAOrnB,GAErB4pB,EAASlX,MAAM4U,EAAatnB,GAAIgjB,GAChCA,EAAOpQ,KAAKxW,KAAKyF,SAAUmhB,GAE3B4G,EAASG,KAAKxC,EAAkBvnB,GAAIupB,GAEpC7F,EAAMsG,mBAAmBhH,EAAQuG,EAAaM,EAAU1X,WAAY0X,EAAUzX,YAEpE,IAANpS,EACF6S,EAAKxS,KAAKwpB,GAEVhX,EAAKoX,OAAOJ,EAEhB,CAEAztB,KAAK6rB,iBAAkB,CACzB,GACA,CAAA5lB,IAAA,qBAAApG,MAKA,SAAmBoqB,GACjB,IAAM6D,EAAI9tB,KAAKqrB,WAEf,GAAIyC,EAAE9e,IAAM8e,EAAE7e,GAAK6e,EAAE7e,IAAM6e,EAAE5e,GAAM+a,EAAc,CAC/C,IAAM8D,EAAKC,GACLC,EAAKC,GACXH,EAAGI,0BAA0BnuB,KAAKkW,YAClC6X,EAAGK,UAAUH,GACbF,EAAGpH,MAAMmH,EAAGC,GACZA,EAAGM,MAAMJ,EAAIjuB,KAAKsrB,gBACpB,MACF,GACA,CAAArlB,IAAA,aAAApG,MAQA,SAAWoqB,EAAOqE,GAMhB,QALsB,IAAlBA,IACFA,EAAgB,IAAI3d,GAIlB3Q,KAAK6B,OAASynB,EAAKe,QAAvB,CAIIrqB,KAAKsqB,aAAehB,EAAK+C,UAC3BrsB,KAAK6sB,SAIP,IAAM0B,EAAWC,GACjBF,EAAcjZ,MAAM4U,EAAOsE,GAE3BvuB,KAAKiqB,MAAMzT,KAAKyT,EAAOjqB,KAAKiqB,OAE5BjqB,KAAK4qB,OAAOpU,KAAK+X,EAAUvuB,KAAK4qB,OAZhC,CAaF,GACA,CAAA3kB,IAAA,kBAAApG,MAOA,SAAgB4uB,EAAYtQ,GAK1B,QAJmB,IAAfA,IACFA,EAAa,IAAIxN,GAGf3Q,KAAK6B,OAASynB,EAAKe,QAAvB,CAIA,IAAMqE,EAAaC,GACbC,EAAqBC,GAE3B7uB,KAAK8uB,mBAAmBL,EAAYC,GACpC1uB,KAAK8uB,mBAAmB3Q,EAAYyQ,GACpC5uB,KAAK+uB,WAAWL,EAAYE,EAP5B,CAQF,GACA,CAAA3oB,IAAA,cAAApG,MAMA,SAAY+qB,GACN5qB,KAAK6B,OAASynB,EAAKe,UAInBrqB,KAAKsqB,aAAehB,EAAK+C,UAC3BrsB,KAAK6sB,SAIP7sB,KAAK4qB,OAAOpU,KAAKoU,EAAQ5qB,KAAK4qB,QAChC,GACA,CAAA3kB,IAAA,eAAApG,MASA,SAAamvB,EAASV,GAKpB,QAJsB,IAAlBA,IACFA,EAAgB,IAAI3d,GAGlB3Q,KAAK6B,OAASynB,EAAKe,QAAvB,CAIIrqB,KAAKsqB,aAAehB,EAAK+C,UAC3BrsB,KAAK6sB,SAIP,IAAM7Z,EAAIsb,EAEJW,EAAOC,GACbD,EAAKhrB,KAAK+qB,GACVC,EAAKtI,MAAM3mB,KAAKkqB,QAAS+E,GAEzBjvB,KAAK+pB,SAASvT,KAAKyY,EAAMjvB,KAAK+pB,UAE9B,IAAMoF,EAAUC,GAChBpc,EAAEqC,MAAM2Z,EAASG,GAOjBnvB,KAAKsrB,gBAAgBhV,MAAM6Y,EAASA,GAEpCnvB,KAAKwc,gBAAgBhG,KAAK2Y,EAASnvB,KAAKwc,gBAzBxC,CA0BF,GACA,CAAAvW,IAAA,oBAAApG,MAOA,SAAkBwvB,EAAclR,GAK9B,QAJmB,IAAfA,IACFA,EAAa,IAAIxN,GAGf3Q,KAAK6B,OAASynB,EAAKe,QAAvB,CAIA,IAAMiF,EAAeC,GACfX,EAAqBY,GAE3BxvB,KAAK8uB,mBAAmBO,EAAcC,GACtCtvB,KAAK8uB,mBAAmB3Q,EAAYyQ,GACpC5uB,KAAKyvB,aAAaH,EAAcV,EAPhC,CAQF,GACA,CAAA3oB,IAAA,uBAAApG,MAKA,WACE,IAAMuoB,EAAcsH,GACpB1vB,KAAKkqB,QAAUlqB,KAAKmd,KAAO,EAAI,EAAMnd,KAAKmd,KAAO,EACjD,IAAM2Q,EAAI9tB,KAAKorB,QACTuE,EAAQ3vB,KAAK0rB,cAEnB1rB,KAAK4vB,aACLxH,EAAY3jB,KAAKzE,KAAKyW,KAAKT,WAAWhH,EAAIhP,KAAKyW,KAAKV,WAAW/G,GAAK,GAAIhP,KAAKyW,KAAKT,WAAW/G,EAAIjP,KAAKyW,KAAKV,WAAW9G,GAAK,GAAIjP,KAAKyW,KAAKT,WAAW9G,EAAIlP,KAAKyW,KAAKV,WAAW7G,GAAK,GAClL+Y,GAAIW,iBAAiBR,EAAapoB,KAAKmd,KAAM2Q,GAC7C9tB,KAAKqrB,WAAW5mB,IAAIqpB,EAAE9e,EAAI,IAAM2gB,EAAQ,EAAM7B,EAAE9e,EAAI,EAAG8e,EAAE7e,EAAI,IAAM0gB,EAAQ,EAAM7B,EAAE7e,EAAI,EAAG6e,EAAE5e,EAAI,IAAMygB,EAAQ,EAAM7B,EAAE5e,EAAI,GAC1HlP,KAAK6vB,oBAAmB,EAC1B,GACA,CAAA5pB,IAAA,0BAAApG,MAQA,SAAwBme,EAAYC,GAClC,IAAMjL,EAAI,IAAIrC,EAId,OAHAqN,EAAWM,KAAKte,KAAKyF,SAAUuN,GAC/BhT,KAAKwc,gBAAgBnH,MAAMrC,EAAGiL,GAC9Bje,KAAK+pB,SAASvT,KAAKyH,EAAQA,GACpBA,CACT,GACA,CAAAhY,IAAA,YAAApG,MAQA,SAAU4c,EAAIqT,EAAenmB,GAK3B,GAHA3J,KAAK4pB,iBAAiB3lB,KAAKjE,KAAKyF,UAChCzF,KAAK8qB,mBAAmB7mB,KAAKjE,KAAKkW,aAE5BlW,KAAK6B,OAASynB,EAAKe,SAAWrqB,KAAK6B,OAASynB,EAAK0D,YAAchtB,KAAKsqB,aAAehB,EAAK+C,SAA9F,CAKA,IAAM4C,EAAOjvB,KAAK+pB,SACZgG,EAAc/vB,KAAKwc,gBACnBY,EAAMpd,KAAKyF,SACXwkB,EAAQjqB,KAAKiqB,MACbW,EAAS5qB,KAAK4qB,OACd7Q,EAAO/Z,KAAKkW,WACZgU,EAAUlqB,KAAKkqB,QACfmB,EAAarrB,KAAKsrB,gBAClBM,EAAe5rB,KAAK4rB,aACpBoE,EAAO9F,EAAUzN,EACvBwS,EAAKjgB,GAAKib,EAAMjb,EAAIghB,EAAOpE,EAAa5c,EACxCigB,EAAKhgB,GAAKgb,EAAMhb,EAAI+gB,EAAOpE,EAAa3c,EACxCggB,EAAK/f,GAAK+a,EAAM/a,EAAI8gB,EAAOpE,EAAa1c,EACxC,IAAMjC,EAAIoe,EAAW5a,SACfiM,EAAgB1c,KAAK0c,cACrBuT,EAAKrF,EAAO5b,EAAI0N,EAAc1N,EAC9BkhB,EAAKtF,EAAO3b,EAAIyN,EAAczN,EAC9BkhB,EAAKvF,EAAO1b,EAAIwN,EAAcxN,EACpC6gB,EAAY/gB,GAAKyN,GAAMxP,EAAE,GAAKgjB,EAAKhjB,EAAE,GAAKijB,EAAKjjB,EAAE,GAAKkjB,GACtDJ,EAAY9gB,GAAKwN,GAAMxP,EAAE,GAAKgjB,EAAKhjB,EAAE,GAAKijB,EAAKjjB,EAAE,GAAKkjB,GACtDJ,EAAY7gB,GAAKuN,GAAMxP,EAAE,GAAKgjB,EAAKhjB,EAAE,GAAKijB,EAAKjjB,EAAE,GAAKkjB,GAEtD/S,EAAIpO,GAAKigB,EAAKjgB,EAAIyN,EAClBW,EAAInO,GAAKggB,EAAKhgB,EAAIwN,EAClBW,EAAIlO,GAAK+f,EAAK/f,EAAIuN,EAClB1C,EAAKqW,UAAUpwB,KAAKwc,gBAAiBC,EAAIzc,KAAK0c,cAAe3C,GAEzD+V,IACEnmB,EACFoQ,EAAKsW,gBAELtW,EAAKT,aAITtZ,KAAK6rB,iBAAkB,EAEvB7rB,KAAK6vB,oBAvCL,CAwCF,KAACvG,CAAA,CAhnBO,CAAS1Q,GAmnBnB0Q,GAAKzM,UAAY,EACjByM,GAAKgH,mBAAqB,UAC1BhH,GAAKe,QAAUjB,GACfE,GAAKc,OAAShB,GACdE,GAAK0D,UAAY5D,GACjBE,GAAKiB,MAAQlB,GACbC,GAAKqD,OAAStD,GACdC,GAAK+C,SAAWhD,GAChBC,GAAKiD,YAAc,CACjB1qB,KAAM,UAERynB,GAAKsD,YAAc,CACjB/qB,KAAM,UAERynB,GAAKyD,WAAa,CAChBlrB,KAAM,SAER,IAAMyrB,GAAS,IAAI3c,EACb4c,GAAU,IAAItU,EACdyU,GAAuB,IAAI5X,EAC3BkY,GAAS,IAAIxd,EACb0d,GAAS,IAAI1d,EACnB,IAAIA,EACJ,IAAMge,GAA2B,IAAI7d,EAC/Bge,GAAkC,IAAIhe,EACtCke,GAA0C,IAAIle,EAC9Cue,GAAyB,IAAIve,EAC7Bye,GAA4B,IAAIze,EAChC4e,GAAsC,IAAI5e,EAC1C6e,GAAuC,IAAI7e,EAC3C+e,GAAwC,IAAI/e,EAElD,IAAIA,EACJ,IAAIA,EACJ,IAAIsI,EACJ,IAAItI,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EAEJ,IAGM4f,GAAe,WAwCnB,SAAAA,KAAc7nB,EAAAA,EAAAA,GAAA,KAAA6nB,GACZvwB,KAAKwwB,aAAe,IAAI7f,EACxB3Q,KAAKywB,WAAa,IAAI9f,EACtB3Q,KAAK0wB,eAAiB,IAAI/f,EAC1B3Q,KAAK2wB,cAAgB,IAAIhgB,EACzB3Q,KAAK4wB,QAAS,EACd5wB,KAAKsnB,MAAQ,KACbtnB,KAAKwH,KAAO,KACZxH,KAAK6wB,cAAgB,EACrB7wB,KAAK8wB,UAAY,EACjB9wB,KAAK+wB,YAAa,CACpB,CAuCC,OAtCDpmB,EAAAA,EAAAA,GAAA4lB,EAAA,EAAAtqB,IAAA,QAAApG,MAKA,WACEG,KAAKwwB,aAAa5I,UAClB5nB,KAAKywB,WAAW7I,UAChB5nB,KAAK0wB,eAAe9I,UACpB5nB,KAAK2wB,cAAc/I,UACnB5nB,KAAK4wB,QAAS,EACd5wB,KAAKsnB,MAAQ,KACbtnB,KAAKwH,KAAO,KACZxH,KAAK6wB,cAAgB,EACrB7wB,KAAK8wB,UAAY,EACjB9wB,KAAK+wB,YAAa,CACpB,GACA,CAAA9qB,IAAA,QAAApG,MAKA,WACEG,KAAK+wB,YAAa,CACpB,GACA,CAAA9qB,IAAA,MAAApG,MAKA,SAAI2wB,EAAcC,EAAYC,EAAgBC,EAAerJ,EAAO9f,EAAMspB,GACxE9wB,KAAKwwB,aAAavsB,KAAKusB,GACvBxwB,KAAKywB,WAAWxsB,KAAKwsB,GACrBzwB,KAAK0wB,eAAezsB,KAAKysB,GACzB1wB,KAAK2wB,cAAc1sB,KAAK0sB,GACxB3wB,KAAKsnB,MAAQA,EACbtnB,KAAKwH,KAAOA,EACZxH,KAAK8wB,SAAWA,CAClB,KAACP,CAAA,CA1FkB,GAmGfS,GAEK,EAFLA,GAKC,EALDA,GAQC,EAiBDC,GAAK,SAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,GA8FT,SAAAP,EAAY/Y,EAAMuZ,IAAI/oB,EAAAA,EAAAA,GAAA,KAAAuoB,QACP,IAAT/Y,IACFA,EAAO,IAAIvH,QAGF,IAAP8gB,IACFA,EAAK,IAAI9gB,GAGX3Q,KAAKkY,KAAOA,EAAKkI,QACjBpgB,KAAKyxB,GAAKA,EAAGrR,QACbpgB,KAAKiY,UAAY,IAAItH,EACrB3Q,KAAKsV,UAAY,KACjBtV,KAAK0xB,wBAAyB,EAC9B1xB,KAAK2xB,eAAgB,EACrB3xB,KAAKid,qBAAuB,EAC5Bjd,KAAKgd,sBAAwB,EAC7Bhd,KAAK4xB,KAAOX,EAAMY,IAClB7xB,KAAKie,OAAS,IAAIsS,GAClBvwB,KAAK4wB,QAAS,EAEd5wB,KAAKgpB,SAAW,SAAA/K,GAAW,CAC7B,CAufC,OAtfDtT,EAAAA,EAAAA,GAAAsmB,EAAA,EAAAhrB,IAAAirB,EAAA1sB,IAnDA,WACE,OAAOxE,KAAK8xB,gBACd,GAAC,CAAA7rB,IAAAkrB,EAAA3sB,IAED,WACE,OAAOxE,KAAK+xB,eACd,GAAC,CAAA9rB,IAAAmrB,EAAA5sB,IAED,WACE,OAAOxE,KAAKgyB,aACd,GAAC,CAAA/rB,IAAAorB,EAAA7sB,IAED,WACE,OAAOxE,KAAKiyB,gBACd,GAAC,CAAAhsB,IAAAqrB,EAAA9sB,IAED,WACE,OAAOxE,KAAKiyB,gBACd,GAAC,CAAAhsB,IAAAsrB,EAAA/sB,IAED,WACE,OAAOxE,KAAKkyB,qBACd,GAAC,CAAAjsB,IAAAurB,EAAAhtB,IAED,WACE,OAAOxE,KAAKmyB,iBACd,GAAC,CAAAlsB,IAAA,iBAAApG,MA+BD,SAAe6pB,EAAO1hB,GAyBpB,OAxBAhI,KAAK4xB,KAAO5pB,EAAQ4pB,MAAQX,EAAMY,IAClC7xB,KAAKie,OAASjW,EAAQiW,QAAU,IAAIsS,GACpCvwB,KAAK2xB,gBAAkB3pB,EAAQ2pB,cAC/B3xB,KAAKid,oBAA6D,qBAAhCjV,EAAQiV,oBAAsCjV,EAAQiV,qBAAuB,EAC/Gjd,KAAKgd,qBAA+D,qBAAjChV,EAAQgV,qBAAuChV,EAAQgV,sBAAwB,EAClHhd,KAAK0xB,uBAAmE,qBAAnC1pB,EAAQ0pB,wBAAyC1pB,EAAQ0pB,uBAE1F1pB,EAAQkQ,MACVlY,KAAKkY,KAAKjU,KAAK+D,EAAQkQ,MAGrBlQ,EAAQypB,IACVzxB,KAAKyxB,GAAGxtB,KAAK+D,EAAQypB,IAGvBzxB,KAAKgpB,SAAWhhB,EAAQghB,UAAa,WAAO,EAE5ChpB,KAAK4wB,QAAS,EACd5wB,KAAKie,OAAOmU,QACZpyB,KAAKqyB,kBACLryB,KAAKsyB,QAAQC,IACbC,GAAWjwB,OAAS,EACpBmnB,EAAM1gB,WAAWypB,UAAU/I,EAAO6I,GAAaC,IAC/CxyB,KAAK0yB,gBAAgBF,IACdxyB,KAAK4wB,MACd,GACA,CAAA3qB,IAAA,gBAAApG,MAMA,SAAc2H,EAAMyW,GACdA,IACFje,KAAKie,OAASA,EACdje,KAAKqyB,mBAGP,IAAMX,EAAyB1xB,KAAK0xB,uBAEpC,KAAIA,GAA2BlqB,EAAKuV,oBAI2B,KAA1D/c,KAAKgd,qBAAuBxV,EAAKyV,sBAAyF,KAA1DzV,EAAKwV,qBAAuBhd,KAAKid,qBAOtG,IAHA,IAAM0V,EAAKC,GACLC,EAAKC,GAEFlvB,EAAI,EAAGmiB,EAAIve,EAAKyjB,OAAO1oB,OAAQqB,EAAImiB,EAAGniB,IAAK,CAClD,IAAM0jB,EAAQ9f,EAAKyjB,OAAOrnB,GAE1B,KAAI8tB,GAA2BpK,EAAMvK,qBAIrCvV,EAAK0O,WAAWyX,KAAKnmB,EAAK2jB,kBAAkBvnB,GAAIivB,GAChDrrB,EAAK0O,WAAWI,MAAM9O,EAAK0jB,aAAatnB,GAAI+uB,GAC5CA,EAAGnc,KAAKhP,EAAK/B,SAAUktB,GACvB3yB,KAAK+yB,eAAezL,EAAOuL,EAAIF,EAAInrB,GAE/BxH,KAAKie,OAAO8S,YACd,KAEJ,CACF,GACA,CAAA9qB,IAAA,kBAAApG,MAQA,SAAgBmzB,EAAQ/U,GAClBA,IACFje,KAAKie,OAASA,EACdje,KAAKqyB,mBAGP,IAAK,IAAIzuB,EAAI,EAAGwS,EAAI4c,EAAOzwB,QAASvC,KAAKie,OAAO8S,YAAcntB,EAAIwS,EAAGxS,IACnE5D,KAAKizB,cAAcD,EAAOpvB,GAE9B,GACA,CAAAqC,IAAA,kBAAApG,MAKA,WACEG,KAAKyxB,GAAGnT,KAAKte,KAAKkY,KAAMlY,KAAKiY,WAC7BjY,KAAKiY,UAAUqB,WACjB,GAAC,CAAArT,IAAA,iBAAApG,MAED,SAAeynB,EAAOvN,EAAMtU,EAAU+B,GACpC,IAEMspB,EAsbV,SAAoC5Y,EAAMD,EAAWxS,GAEnDA,EAAS6Y,KAAKpG,EAAMgb,IACpB,IAAM1e,EAAM0e,GAAK1e,IAAIyD,GAErBA,EAAU0O,MAAMnS,EAAK2e,IACrBA,GAAY3c,KAAK0B,EAAMib,IACvB,IAAMrC,EAAWrrB,EAAS2tB,WAAWD,IACrC,OAAOrC,CACT,CA/bqBuC,CAFJrzB,KAAKkY,KAEgClY,KAAKiY,UAAWxS,GAElE,KAAIqrB,EAAWxJ,EAAMxK,sBAArB,CAIA,IAAMwW,EAAkBtzB,KAAKsnB,EAAMzlB,MAE/ByxB,GACFA,EAAgBl0B,KAAKY,KAAMsnB,EAAOvN,EAAMtU,EAAU+B,EAAM8f,EAL1D,CAOF,GAAC,CAAArhB,IAAA,gBAAApG,MAED,SAAc0zB,EAAKxZ,EAAMtU,EAAU+B,EAAMgsB,GACvC,OAAOxzB,KAAKiyB,iBAAiBsB,EAAIjL,+BAAgCvO,EAAMtU,EAAU+B,EAAMgsB,EACzF,GAAC,CAAAvtB,IAAA,kBAAApG,MAED,SAAgBynB,EAAOvN,EAAMtU,EAAU+B,EAAMgsB,GAC3C,IAAMtb,EAAOlY,KAAKkY,KACZuZ,EAAKzxB,KAAKyxB,GACVxZ,EAAYjY,KAAKiY,UAEjBwb,EAAc,IAAI9iB,EAAO,EAAG,EAAG,GACrCoJ,EAAKzD,MAAMmd,EAAaA,GACxB,IAAMtuB,EAAM,IAAIwL,EAChBuH,EAAKoG,KAAK7Y,EAAUN,GACpB,IAAMuuB,EAAcvuB,EAAIqP,IAAIif,GAI5B,GAHAhC,EAAGnT,KAAK7Y,EAAUN,KAGduuB,EAFcvuB,EAAIqP,IAAIif,GAEI,MAK1Bvb,EAAKkb,WAAW3B,GAAMiC,GAA1B,CAIA,IAAMC,EAAYF,EAAYjf,IAAIyD,GAElC,KAAI7D,KAAKgB,IAAIue,GAAa3zB,KAAKsV,WAA/B,CAKA,IAAMse,EAAmB,IAAIjjB,EACvBkjB,EAAoB,IAAIljB,EACxBggB,EAAgB,IAAIhgB,EAC1BuH,EAAKoG,KAAK7Y,EAAUmuB,GACpB,IAAMzhB,GAAKshB,EAAYjf,IAAIof,GAAoBD,EAC/C1b,EAAU0O,MAAMxU,EAAG0hB,GACnB3b,EAAK1B,KAAKqd,EAAmBlD,GAC7B3wB,KAAK8zB,mBAAmBL,EAAa9C,EAAe6C,EAAehsB,GAAO,EAT1E,CAPA,CAiBF,GACA,CAAAvB,IAAA,UAAApG,MAKA,SAAQ4W,GACN,IACEV,EAEEU,EAFFV,WACAC,EACES,EADFT,WAEIyb,EAAKzxB,KAAKyxB,GACVvZ,EAAOlY,KAAKkY,KAClBnC,EAAW/G,EAAIoF,KAAKsC,IAAI+a,EAAGziB,EAAGkJ,EAAKlJ,GACnC+G,EAAW9G,EAAImF,KAAKsC,IAAI+a,EAAGxiB,EAAGiJ,EAAKjJ,GACnC8G,EAAW7G,EAAIkF,KAAKsC,IAAI+a,EAAGviB,EAAGgJ,EAAKhJ,GACnC8G,EAAWhH,EAAIoF,KAAKuC,IAAI8a,EAAGziB,EAAGkJ,EAAKlJ,GACnCgH,EAAW/G,EAAImF,KAAKuC,IAAI8a,EAAGxiB,EAAGiJ,EAAKjJ,GACnC+G,EAAW9G,EAAIkF,KAAKuC,IAAI8a,EAAGviB,EAAGgJ,EAAKhJ,EACrC,GAAC,CAAAjJ,IAAA,wBAAApG,MAED,SAAsBynB,EAAOvN,EAAMtU,EAAU+B,EAAMgsB,GACjDlM,EAAM3a,KACN2a,EAAMyM,YAEN,IAAMC,EAAWC,GAEjBD,EAAS9b,KAAKjU,KAAKjE,KAAKkY,MACxB8b,EAASvC,GAAGxtB,KAAKjE,KAAKyxB,IACtB1T,GAAYG,kBAAkBzY,EAAUsU,EAAMia,EAAS9b,KAAM8b,EAAS9b,MACtE6F,GAAYG,kBAAkBzY,EAAUsU,EAAMia,EAASvC,GAAIuC,EAASvC,IACpEuC,EAAS3B,kBAET,IACI6B,EACAC,EACAC,EACAC,EAJEzuB,EAAQ0uB,GAMdJ,EAAQC,EAAQ,EAChBC,EAAQC,EAAQ/M,EAAM3a,KAAKpK,OAAS,EACpC,IAAMkU,EAAO,IAAIX,EACjBke,EAAS1B,QAAQ7b,GACjB6Q,EAAMiN,mBAAmB9d,EAAKV,WAAW/G,EAAGyH,EAAKV,WAAW9G,EAAGrJ,GAAO,GACtEsuB,EAAQ9f,KAAKuC,IAAIud,EAAOtuB,EAAM,IAC9BuuB,EAAQ/f,KAAKuC,IAAIwd,EAAOvuB,EAAM,IAC9B0hB,EAAMiN,mBAAmB9d,EAAKT,WAAWhH,EAAGyH,EAAKT,WAAW/G,EAAGrJ,GAAO,GACtEwuB,EAAQhgB,KAAKsC,IAAI0d,EAAOxuB,EAAM,GAAK,GACnCyuB,EAAQjgB,KAAKsC,IAAI2d,EAAOzuB,EAAM,GAAK,GAEnC,IAAK,IAAIhC,EAAIswB,EAAOtwB,EAAIwwB,EAAOxwB,IAC7B,IAAK,IAAIyO,EAAI8hB,EAAO9hB,EAAIgiB,EAAOhiB,IAAK,CAClC,GAAIrS,KAAKie,OAAO8S,WACd,OAKF,GAFAzJ,EAAMkN,eAAe5wB,EAAGyO,EAAGoE,GAEtBA,EAAKge,YAAYT,GAAtB,CAUA,GALA1M,EAAMoN,wBAAwB9wB,EAAGyO,GAAG,GACpC0L,GAAYK,kBAAkB3Y,EAAUsU,EAAMuN,EAAMqN,aAAcC,IAElE50B,KAAKiyB,iBAAiB3K,EAAMuN,aAAc9a,EAAM6a,GAAqBptB,EAAMgsB,EAAesB,IAEtF90B,KAAKie,OAAO8S,WACd,OAIFzJ,EAAMoN,wBAAwB9wB,EAAGyO,GAAG,GACpC0L,GAAYK,kBAAkB3Y,EAAUsU,EAAMuN,EAAMqN,aAAcC,IAElE50B,KAAKiyB,iBAAiB3K,EAAMuN,aAAc9a,EAAM6a,GAAqBptB,EAAMgsB,EAAesB,GAhB1F,CAiBF,CAEJ,GAAC,CAAA7uB,IAAA,mBAAApG,MAED,SAAiBk1B,EAAQhb,EAAMtU,EAAU+B,EAAMgsB,GAC7C,IAAMtb,EAAOlY,KAAKkY,KACZuZ,EAAKzxB,KAAKyxB,GACVze,EAAI+hB,EAAO1H,OACXlW,EAAI/C,KAAA0F,IAAC2X,EAAGziB,EAAIkJ,EAAKlJ,EAAM,GAACoF,KAAA0F,IAAI2X,EAAGxiB,EAAIiJ,EAAKjJ,EAAM,GAACmF,KAAA0F,IAAI2X,EAAGviB,EAAIgJ,EAAKhJ,EAAM,GACrEkD,EAAI,IAAMqf,EAAGziB,EAAIkJ,EAAKlJ,IAAMkJ,EAAKlJ,EAAIvJ,EAASuJ,IAAMyiB,EAAGxiB,EAAIiJ,EAAKjJ,IAAMiJ,EAAKjJ,EAAIxJ,EAASwJ,IAAMwiB,EAAGviB,EAAIgJ,EAAKhJ,IAAMgJ,EAAKhJ,EAAIzJ,EAASyJ,IAClIkI,EAAIhD,KAAA0F,IAAC5B,EAAKlJ,EAAIvJ,EAASuJ,EAAM,GAACoF,KAAA0F,IAAI5B,EAAKjJ,EAAIxJ,EAASwJ,EAAM,GAACmF,KAAA0F,IAAI5B,EAAKhJ,EAAIzJ,EAASyJ,EAAM,GAACkF,KAAA0F,IAAG9G,EAAK,GAChGgiB,EAAQ5gB,KAAA0F,IAAA1H,EAAK,GAAI,EAAI+E,EAAIC,EACzB6d,EAAoBC,GACpBlQ,EAASmQ,GAEf,KAAIH,EAAQ,GAGL,GAAc,IAAVA,EAET9c,EAAK0N,KAAK6L,EAAIuD,EAAOC,GACrBA,EAAkB3W,KAAK7Y,EAAUuf,GACjCA,EAAO1L,YACPtZ,KAAK8zB,mBAAmB9O,EAAQiQ,EAAmBzB,EAAehsB,GAAO,OACpE,CACL,IAAM6b,IAAOjR,EAAIgC,KAAKC,KAAK2gB,KAAW,EAAI7d,GACpCie,IAAOhjB,EAAIgC,KAAKC,KAAK2gB,KAAW,EAAI7d,GAS1C,GAPIkM,GAAM,GAAKA,GAAM,IACnBnL,EAAK0N,KAAK6L,EAAIpO,EAAI4R,GAClBA,EAAkB3W,KAAK7Y,EAAUuf,GACjCA,EAAO1L,YACPtZ,KAAK8zB,mBAAmB9O,EAAQiQ,EAAmBzB,EAAehsB,GAAO,IAGvExH,KAAKie,OAAO8S,WACd,OAGEqE,GAAM,GAAKA,GAAM,IACnBld,EAAK0N,KAAK6L,EAAI2D,EAAIH,GAClBA,EAAkB3W,KAAK7Y,EAAUuf,GACjCA,EAAO1L,YACPtZ,KAAK8zB,mBAAmB9O,EAAQiQ,EAAmBzB,EAAehsB,GAAO,GAE7E,CACF,GAAC,CAAAvB,IAAA,mBAAApG,MAED,SAAiBynB,EAAOvN,EAAMtU,EAAU+B,EAAMgsB,EAAexrB,GAe3D,IAdA,IAAMgd,EAASqQ,GACT3kB,EAAS4kB,GACTC,EAAWvtB,GAAWA,EAAQutB,UAAY,KAE1CtW,EAAQqI,EAAMrI,MACdF,EAAWuI,EAAMvI,SACjBI,EAAUmI,EAAMjI,YAChBpH,EAAYjY,KAAKiY,UACjBC,EAAOlY,KAAKkY,KACZuZ,EAAKzxB,KAAKyxB,GACV+D,EAAiBtd,EAAKkb,WAAW3B,GACjCgE,EAASF,EAAWA,EAAShzB,OAAS0c,EAAM1c,OAC5C0b,EAASje,KAAKie,OAEX5L,EAAI,GAAI4L,EAAO8S,YAAc1e,EAAIojB,EAAQpjB,IAAK,CACrD,IAAMiQ,EAAKiT,EAAWA,EAASljB,GAAKA,EAC9B4N,EAAOhB,EAAMqD,GACboT,EAAavW,EAAQmD,GACrBpP,EAAI6G,EACJ/K,EAAIvJ,EAIViL,EAAOzM,KAAK8a,EAASkB,EAAK,KAC1B/M,EAAEoD,MAAM5F,EAAQA,GAChBA,EAAO8F,KAAKxH,EAAG0B,GAEfA,EAAO4N,KAAKpG,EAAMxH,GAElBwC,EAAEoD,MAAMof,EAAY1Q,GAEpB,IAAMxQ,EAAMyD,EAAUzD,IAAIwQ,GAE1B,KAAI5Q,KAAKgB,IAAIZ,GAAOxU,KAAKsV,WAAzB,CAKA,IAAMV,EAASoQ,EAAOxQ,IAAI9D,GAAU8D,EAEpC,KAAII,EAAS,GAAb,CAMAqD,EAAU0O,MAAM/R,EAAQ+gB,IACxBA,GAAiBnf,KAAK0B,EAAMyd,IAE5BC,GAAI3xB,KAAK8a,EAASkB,EAAK,KACvB/M,EAAEoD,MAAMsf,GAAKA,IACb5mB,EAAEwH,KAAKof,GAAKA,IAEZ,IAAK,IAAIhyB,EAAI,GAAIqa,EAAO8S,YAAcntB,EAAIqc,EAAK1d,OAAS,EAAGqB,IAAK,CAE9DiyB,GAAI5xB,KAAK8a,EAASkB,EAAKrc,KACvBkyB,GAAI7xB,KAAK8a,EAASkB,EAAKrc,EAAI,KAC3BsP,EAAEoD,MAAMuf,GAAKA,IACb3iB,EAAEoD,MAAMwf,GAAKA,IACb9mB,EAAEwH,KAAKqf,GAAKA,IACZ7mB,EAAEwH,KAAKsf,GAAKA,IACZ,IAAMhF,EAAW6E,GAAiBvC,WAAWlb,IAEvC+Y,EAAM8E,gBAAgBJ,GAAkBC,GAAKC,GAAKC,MAAQ7E,EAAM8E,gBAAgBJ,GAAkBE,GAAKD,GAAKE,KAAShF,EAAW0E,GAItIx1B,KAAK8zB,mBAAmB9O,EAAQ2Q,GAAkBnC,EAAehsB,EAAM8a,EACzE,CA1BA,CAPA,CAmCF,CACF,GACA,CAAArc,IAAA,oBAAApG,MAMA,SAAkBm2B,EAAMjc,EAAMtU,EAAU+B,EAAMgsB,EAAexrB,GAC3D,IAAMgd,EAASiR,GACTC,EAAYC,GACZC,EAAgBC,GAChB3lB,EAAS4kB,GACTgB,EAAiBC,GACjBC,EAAYC,GACZC,EAAUC,GACVC,EAAsBC,GACtBpD,EAAcqD,GAEdC,EAAUf,EAAKe,QACrBf,EAAKjX,SAEL,IAAM7G,EAAOlY,KAAKkY,KACZuZ,EAAKzxB,KAAKyxB,GACVxZ,EAAYjY,KAAKiY,UACvBme,EAAc3wB,SAASxB,KAAKwB,GAC5B2wB,EAAclgB,WAAWjS,KAAK8V,GAE9BgE,GAAY8J,mBAAmBpiB,EAAUsU,EAAM9B,EAAWqe,GAC1DvY,GAAYG,kBAAkBzY,EAAUsU,EAAM7B,EAAMse,GACpDzY,GAAYG,kBAAkBzY,EAAUsU,EAAM0X,EAAIiF,GAClDA,EAAQ1nB,GAAKgnB,EAAKrP,MAAM3X,EACxB0nB,EAAQznB,GAAK+mB,EAAKrP,MAAM1X,EACxBynB,EAAQxnB,GAAK8mB,EAAKrP,MAAMzX,EACxBsnB,EAAUxnB,GAAKgnB,EAAKrP,MAAM3X,EAC1BwnB,EAAUvnB,GAAK+mB,EAAKrP,MAAM1X,EAC1BunB,EAAUtnB,GAAK8mB,EAAKrP,MAAMzX,EAC1BwnB,EAAQpY,KAAKkY,EAAWF,GACxBA,EAAehd,YACf,IAAM0d,EAAwBR,EAAUS,gBAAgBP,GACxDV,EAAKkB,KAAKC,SAASn3B,KAAMo2B,EAAeF,GAExC,IAAK,IAAItyB,EAAI,EAAGmiB,EAAImQ,EAAU3zB,QAASvC,KAAKie,OAAO8S,YAAcntB,IAAMmiB,EAAGniB,IAAK,CAC7E,IAAMwzB,EAAiBlB,EAAUtyB,GACjCoyB,EAAKqB,UAAUD,EAAgBpS,GAI/BgR,EAAKsB,UAAUP,EAAyB,EAAjBK,GAAqBxB,IAE5CA,GAAItX,KAAKkY,EAAW9lB,GAEpB,IAAM8D,EAAM8hB,EAAe9hB,IAAIwQ,GAMzBpQ,EAASoQ,EAAOxQ,IAAI9D,GAAU8D,EAEpC,KAAII,EAAS,GAAb,CAKA0hB,EAAe3P,MAAM/R,EAAQ+gB,IAC7BA,GAAiBnf,KAAKggB,EAAWb,IAEjCK,EAAKsB,UAAUP,EAAyB,EAAjBK,EAAqB,GAAIvB,IAChDG,EAAKsB,UAAUP,EAAyB,EAAjBK,EAAqB,GAAItB,IAChD,IAAMyB,EAAkB5B,GAAiBsB,gBAAgBT,IAEnDvF,EAAM8E,gBAAgBJ,GAAkBE,GAAKD,GAAKE,MAAQ7E,EAAM8E,gBAAgBJ,GAAkBC,GAAKC,GAAKC,KAASyB,EAAkBP,IAK7IjZ,GAAY+Q,mBAAmB/U,EAAMiL,EAAQyO,GAC7C1V,GAAYK,kBAAkB3Y,EAAUsU,EAAM4b,GAAkBiB,GAChE52B,KAAK8zB,mBAAmBL,EAAamD,EAAqBpD,EAAehsB,EAAM4vB,GAjB/E,CAkBF,CAEAlB,EAAU3zB,OAAS,CACrB,GACA,CAAA0D,IAAA,qBAAApG,MAKA,SAAmBmlB,EAAQ2L,EAAerJ,EAAO9f,EAAMqpB,GACrD,IAAM3Y,EAAOlY,KAAKkY,KACZuZ,EAAKzxB,KAAKyxB,GACVX,EAAW5Y,EAAKkb,WAAWzC,GAC3B1S,EAASje,KAAKie,OAEpB,KAAIje,KAAK2xB,eAAiB3M,EAAOxQ,IAAIxU,KAAKiY,WAAa,GAMvD,OAFAgG,EAAO4S,aAAuC,qBAAjBA,EAA+BA,GAAgB,EAEpE7wB,KAAK4xB,MACX,KAAKX,EAAMuG,IACTx3B,KAAK4wB,QAAS,EACd3S,EAAOxZ,IAAIyT,EAAMuZ,EAAIzM,EAAQ2L,EAAerJ,EAAO9f,EAAMspB,GACzD7S,EAAO2S,QAAS,EAChB5wB,KAAKgpB,SAAS/K,GACd,MAEF,KAAKgT,EAAMwG,SAEL3G,EAAW7S,EAAO6S,WAAa7S,EAAO2S,UACxC5wB,KAAK4wB,QAAS,EACd3S,EAAO2S,QAAS,EAChB3S,EAAOxZ,IAAIyT,EAAMuZ,EAAIzM,EAAQ2L,EAAerJ,EAAO9f,EAAMspB,IAG3D,MAEF,KAAKG,EAAMY,IAET7xB,KAAK4wB,QAAS,EACd3S,EAAO2S,QAAS,EAChB3S,EAAOxZ,IAAIyT,EAAMuZ,EAAIzM,EAAQ2L,EAAerJ,EAAO9f,EAAMspB,GACzD7S,EAAO8S,YAAa,EAG1B,IACA,EAAA9qB,IAAA,kBAAApG,MAMA,SAAuB4S,EAAG0E,EAAG/E,EAAGgF,GAC9BA,EAAEkH,KAAKnH,EAAG+b,IACV9gB,EAAEkM,KAAKnH,EAAGugB,IACVjlB,EAAE6L,KAAKnH,EAAGwgB,IACV,IAKIthB,EACAzF,EANEgnB,EAAQ1E,GAAK1e,IAAI0e,IACjB2E,EAAQ3E,GAAK1e,IAAIkjB,IACjBI,EAAQ5E,GAAK1e,IAAImjB,IACjBI,EAAQL,GAAKljB,IAAIkjB,IACjBM,EAAQN,GAAKljB,IAAImjB,IAGvB,OAAQthB,EAAI0hB,EAAQD,EAAQD,EAAQG,IAAU,IAAMpnB,EAAIgnB,EAAQI,EAAQH,EAAQC,IAAU,GAAKzhB,EAAIzF,EAAIgnB,EAAQG,EAAQF,EAAQA,CACjI,KAAC5G,CAAA,CA3mBQ,CAXarU,GAAQS,MAAMC,OACfV,GAAQS,MAAME,MAChBX,GAAQS,MAAMG,IACTZ,GAAQS,MAAMQ,SACdjB,GAAQS,MAAMK,iBACdd,GAAQS,MAAMM,YACff,GAAQS,MAAMS,SAmnBvCmT,GAAMwG,QAAUzG,GAChBC,GAAMY,IAAMb,GACZC,GAAMuG,IAAMxG,GACZ,IAAMuB,GAAc,IAAIzc,EAClB0c,GAAa,GACbkF,GAAO,IAAI/mB,EACXgnB,GAAO,IAAIhnB,EACXiiB,GAAqB,IAAIjiB,EACzBmiB,GAAqB,IAAI7Z,EACzB0c,GAAmB,IAAIhlB,EACvBilB,GAAM,IAAIjlB,EACVklB,GAAM,IAAIllB,EACVmlB,GAAM,IAAInlB,EAChB,IAAIA,EACJ,IAAI4f,GACJ,IAAMuE,GAA2B,CAC/BS,SAAU,CAAC,IAEPX,GAAsB,IAAIjkB,EAC1BsjB,GAAkC,IAAIhD,GACtCqD,GAA+B,GAC/BY,GAA0C,IAAIvkB,EAC9CwkB,GAA+B,IAAIxkB,EACnC0kB,GAA2B,IAAI1kB,EACrC,IAAIA,EACJ,IAAIA,EACJ,IAAM2kB,GAA2B,IAAI3kB,EAC/BslB,GAA4B,IAAItlB,EAChC4lB,GAAoC,IAAI5lB,EACxC8lB,GAA+B,IAAI9lB,EACnCgmB,GAA6B,IAAIhmB,EACjCmmB,GAAiC,IAAInmB,EACrCkmB,GAAyC,IAAIlmB,EACnD,IAAImF,EACJ,IAAMqgB,GAA+B,GAC/BE,GAAmC,IAAItY,GACvCmV,GAAO,IAAIviB,EACXwiB,GAAc,IAAIxiB,EAmCxB,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EAEJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EAEJ,IAGMsnB,IAAQttB,EAAAA,EAAAA,IAkBZ,SAAAstB,EAAYjwB,IAASU,EAAAA,EAAAA,GAAA,KAAAuvB,QACH,IAAZjwB,IACFA,EAAU,CAAC,GAGb,IAAI7H,EAAO,GAEY,kBAAZ6H,IAET7H,EAAO6H,EACPA,EAAU,CAAC,GAGbhI,KAAKG,KAAOA,EACZH,KAAKmQ,GAAK8nB,EAASpb,YACnB7c,KAAKk4B,SAAuC,qBAArBlwB,EAAQkwB,SAA2BlwB,EAAQkwB,UAAY,EAC9El4B,KAAKm4B,YAA6C,qBAAxBnwB,EAAQmwB,YAA8BnwB,EAAQmwB,aAAe,CACzF,IAGFF,GAASpb,UAAY,EACrB,IAAIlM,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIsgB,GACJ,IAAItgB,EACJ,IAAIA,EACJ,IAAIA,EACH,IAAIA,EAAO,EAAG,EAAG,GAAI,IAAIA,EAAO,EAAG,EAAG,GAAI,IAAIA,EAAO,EAAG,EAAG,GAC5D,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EAEJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EAEJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EAoEJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EAEJ,IAAIA,EAEJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EA6Oe,IAAIA,EAgjBK,IAAIA,EACV,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACH,IAAIA,EACJ,IAAIA,EA4ON,IAAIA,EACT,IAAImF,EAkeK,IAAInF,EACR,IAAImF,EACA,IAAInF,EACJ,IAAIA,EAClB,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACE,IAAImF,EACc,IAAInF,EACN,IAAIoN,GACL,IAAIjI,EAOpB8G,GAAQS,MAAMC,OACfV,GAAQS,MAAMC,OAASV,GAAQS,MAAME,MAC1CX,GAAQS,MAAMG,IAAMZ,GAAQS,MAAMG,IAC/BZ,GAAQS,MAAMC,OAASV,GAAQS,MAAMG,IACtCZ,GAAQS,MAAME,MAAQX,GAAQS,MAAMG,IAChCZ,GAAQS,MAAMK,iBACdd,GAAQS,MAAMC,OAASV,GAAQS,MAAMK,iBACtCd,GAAQS,MAAME,MAAQX,GAAQS,MAAMK,iBACtCd,GAAQS,MAAMG,IAAMZ,GAAQS,MAAMK,iBAC1Bd,GAAQS,MAAMC,OAASV,GAAQS,MAAMM,YACxCf,GAAQS,MAAMG,IAAMZ,GAAQS,MAAMM,YAC/Bf,GAAQS,MAAMK,iBAAmBd,GAAQS,MAAMM,YAClDf,GAAQS,MAAMO,SAAWhB,GAAQS,MAAMC,OACxCV,GAAQS,MAAME,MAAQX,GAAQS,MAAMO,SACtChB,GAAQS,MAAMG,IAAMZ,GAAQS,MAAMO,SAC/BhB,GAAQS,MAAMO,SAAWhB,GAAQS,MAAMK,iBACrCd,GAAQS,MAAMQ,SAChBjB,GAAQS,MAAMC,OAASV,GAAQS,MAAMQ,SACtCjB,GAAQS,MAAME,MAAQX,GAAQS,MAAMQ,SACtCjB,GAAQS,MAAMG,IAAMZ,GAAQS,MAAMQ,SAC/BjB,GAAQS,MAAMK,iBAAmBd,GAAQS,MAAMQ,SAC1CjB,GAAQS,MAAMM,YAAcf,GAAQS,MAAMQ,SAC7CjB,GAAQS,MAAMO,SAAWhB,GAAQS,MAAMQ,SAC1CjB,GAAQS,MAAMC,OAASV,GAAQS,MAAMS,QACtClB,GAAQS,MAAME,MAAQX,GAAQS,MAAMS,QAEpD,IAAInN,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIsI,EACJ,IAAIA,EAEJ,IAAItI,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAImF,EACJ,IAAInF,EACJ,IAAIA,EAEJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EAEJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACH,IAAIA,EAAU,IAAIA,EAAU,IAAIA,EAAU,IAAIA,EAAU,IAAIA,EAAU,IAAIA,EAC3E,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EAEJ,IAAIsI,EACJ,IAAItI,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EAEJ,IAAImF,EACJ,IAAImb,GAEJ,IAAMmH,GAAgBC,WAAWC,aAAe,CAAC,EAEjD,IAAKF,GAAcG,IAAK,CACtB,IAAIC,GAAYC,KAAKF,MAEjBH,GAAcM,QAAUN,GAAcM,OAAOC,kBAC/CH,GAAYJ,GAAcM,OAAOC,iBAGnCP,GAAcG,IAAM,kBAAME,KAAKF,MAAQC,EAAS,CAClD,CAEA,IAAI7nB,EAqEJ,IAqEMioB,GAAI,WAQR,SAAAA,EAAYnoB,IAAU/H,EAAAA,EAAAA,GAAA,KAAAkwB,QACH,IAAbnoB,IACFA,EAAW,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAGtCzQ,KAAKyQ,SAAWA,CAClB,CA8dC,OA7dD9F,EAAAA,EAAAA,GAAAiuB,EAAA,EAAA3yB,IAAA,WAAApG,MAOA,WACE,IAAMoN,EAAIjN,KAAKyQ,SACfxD,EAAE,GAAK,EACPA,EAAE,GAAK,EACPA,EAAE,GAAK,EACPA,EAAE,GAAK,EACPA,EAAE,GAAK,EACPA,EAAE,GAAK,EACPA,EAAE,GAAK,EACPA,EAAE,GAAK,EACPA,EAAE,GAAK,CACT,GACA,CAAAhH,IAAA,UAAApG,MAKA,WACE,IAAMoN,EAAIjN,KAAKyQ,SACfxD,EAAE,GAAK,EACPA,EAAE,GAAK,EACPA,EAAE,GAAK,EACPA,EAAE,GAAK,EACPA,EAAE,GAAK,EACPA,EAAE,GAAK,EACPA,EAAE,GAAK,EACPA,EAAE,GAAK,EACPA,EAAE,GAAK,CACT,GACA,CAAAhH,IAAA,WAAApG,MAKA,SAAS6Q,GACP,IAAMzD,EAAIjN,KAAKyQ,SACfxD,EAAE,GAAKyD,EAAO1B,EACd/B,EAAE,GAAKyD,EAAOzB,EACdhC,EAAE,GAAKyD,EAAOxB,CAChB,GACA,CAAAjJ,IAAA,WAAApG,MAKA,SAASd,QACQ,IAAXA,IACFA,EAAS,IAAI85B,IAGf,IAAM5rB,EAAIjN,KAAKyQ,SAIf,OAHA1R,EAAOiQ,EAAI/B,EAAE,GACblO,EAAOkQ,EAAIhC,EAAE,GACblO,EAAOmQ,EAAIjC,EAAE,GACNlO,CACT,GACA,CAAAkH,IAAA,QAAApG,MAOA,SAAM+Q,EAAG7R,QACQ,IAAXA,IACFA,EAAS,IAAI85B,IAGf,IAAM5rB,EAAIjN,KAAKyQ,SACTzB,EAAI4B,EAAE5B,EACNC,EAAI2B,EAAE3B,EACNC,EAAI0B,EAAE1B,EAIZ,OAHAnQ,EAAOiQ,EAAI/B,EAAE,GAAK+B,EAAI/B,EAAE,GAAKgC,EAAIhC,EAAE,GAAKiC,EACxCnQ,EAAOkQ,EAAIhC,EAAE,GAAK+B,EAAI/B,EAAE,GAAKgC,EAAIhC,EAAE,GAAKiC,EACxCnQ,EAAOmQ,EAAIjC,EAAE,GAAK+B,EAAI/B,EAAE,GAAKgC,EAAIhC,EAAE,GAAKiC,EACjCnQ,CACT,GACA,CAAAkH,IAAA,QAAApG,MAKA,SAAMkN,GACJ,IAAK,IAAInJ,EAAI,EAAGA,EAAI5D,KAAKyQ,SAASlO,OAAQqB,IACxC5D,KAAKyQ,SAAS7M,IAAMmJ,CAExB,GACA,CAAA9G,IAAA,QAAApG,MAMA,SAAMgR,EAAQ9R,QACG,IAAXA,IACFA,EAAS,IAAI65B,GAGf,IAAM9nB,EAAI9Q,KAAKyQ,SACTM,EAAIF,EAAOJ,SACXO,EAAIjS,EAAO0R,SACXQ,EAAMH,EAAE,GACRI,EAAMJ,EAAE,GACRK,EAAML,EAAE,GACRM,EAAMN,EAAE,GACRO,EAAMP,EAAE,GACRQ,EAAMR,EAAE,GACRS,EAAMT,EAAE,GACRU,EAAMV,EAAE,GACRW,EAAMX,EAAE,GACRY,EAAMX,EAAE,GACRY,EAAMZ,EAAE,GACRa,EAAMb,EAAE,GACRc,EAAMd,EAAE,GACRe,EAAMf,EAAE,GACRgB,EAAMhB,EAAE,GACRiB,EAAMjB,EAAE,GACRkB,EAAMlB,EAAE,GACRmB,EAAMnB,EAAE,GAUd,OATAC,EAAE,GAAKC,EAAMS,EAAMR,EAAMW,EAAMV,EAAMa,EACrChB,EAAE,GAAKC,EAAMU,EAAMT,EAAMY,EAAMX,EAAMc,EACrCjB,EAAE,GAAKC,EAAMW,EAAMV,EAAMa,EAAMZ,EAAMe,EACrClB,EAAE,GAAKI,EAAMM,EAAML,EAAMQ,EAAMP,EAAMU,EACrChB,EAAE,GAAKI,EAAMO,EAAMN,EAAMS,EAAMR,EAAMW,EACrCjB,EAAE,GAAKI,EAAMQ,EAAMP,EAAMU,EAAMT,EAAMY,EACrClB,EAAE,GAAKO,EAAMG,EAAMF,EAAMK,EAAMJ,EAAMO,EACrChB,EAAE,GAAKO,EAAMI,EAAMH,EAAMM,EAAML,EAAMQ,EACrCjB,EAAE,GAAKO,EAAMK,EAAMJ,EAAMO,EAAMN,EAAMS,EAC9BnT,CACT,GACA,CAAAkH,IAAA,QAAApG,MAKA,SAAM6Q,EAAQ3R,QACG,IAAXA,IACFA,EAAS,IAAI65B,GAMf,IAHA,IAAM3rB,EAAIjN,KAAKyQ,SACT0B,EAAIpT,EAAO0R,SAER7M,EAAI,EAAS,IAANA,EAASA,IACvBuO,EAAE,EAAIvO,EAAI,GAAK8M,EAAO1B,EAAI/B,EAAE,EAAIrJ,EAAI,GACpCuO,EAAE,EAAIvO,EAAI,GAAK8M,EAAOzB,EAAIhC,EAAE,EAAIrJ,EAAI,GACpCuO,EAAE,EAAIvO,EAAI,GAAK8M,EAAOxB,EAAIjC,EAAE,EAAIrJ,EAAI,GAGtC,OAAO7E,CACT,GACA,CAAAkH,IAAA,QAAApG,MASA,SAAMuS,EAAGrT,QACQ,IAAXA,IACFA,EAAS,IAAI85B,IAIf,IAKIj1B,EACAyO,EAFEC,EAAO,GAIb,IAAK1O,EAAI,EAAGA,EAAI2O,GAAS3O,IACvB0O,EAAKhQ,KAAK,GAGZ,IAAKsB,EAAI,EAAGA,EAAI,EAAGA,IACjB,IAAKyO,EAAI,EAAGA,EAAI,EAAGA,IACjBC,EAAK1O,EAZE,EAYOyO,GAAKrS,KAAKyQ,SAAS7M,EAAI,EAAIyO,GAI7CC,EAAK,GAAaF,EAAEpD,EACpBsD,EAAK,GAAaF,EAAEnD,EACpBqD,EAAK,IAAaF,EAAElD,EAEpB,IAEIsD,EAGAC,EALAzO,EAAI,EACF0O,EAAI1O,EAMV,EAAG,CAGD,GAAyB,IAArBsO,GAFJ1O,EAAI8O,EAAI1O,GA5BC,EA8BSJ,GAEhB,IAAKyO,EAAIzO,EAAI,EAAGyO,EAAIK,EAAGL,IACrB,GAAyB,IAArBC,EAAK1O,EAjCJ,EAiCayO,GAAU,CAC1BG,EAXG,EAaH,GAGEF,GADAG,EAfC,EAeQD,GAtCR,EAuCa5O,IAAM0O,EAAKG,EAvCxB,EAuCiCJ,WACzBG,GAEX,KACF,CAIJ,GAAyB,IAArBF,EAAK1O,EA/CA,EA+CSA,GAChB,IAAKyO,EAAIzO,EAAI,EAAGyO,EAAIK,EAAGL,IAAK,CAC1B,IAAMM,EAAaL,EAAK1O,EAjDnB,EAiD4ByO,GAAKC,EAAK1O,EAjDtC,EAiD+CA,GACpD4O,EA3BK,EA6BL,GAGEF,GADAG,EA/BG,EA+BMD,GAtDN,EAuDWH,GAAKI,GAAK7O,EAAI,EAAI0O,EAAKG,EAvDlC,EAuD2CJ,GAAKC,EAAKG,EAvDrD,EAuD8D7O,GAAK+O,UAC7DH,EACb,CAEJ,SAAWxO,GAOX,GAJAjF,EAAOmQ,EAAIoD,EAAK,IAAcA,EAAK,IACnCvT,EAAOkQ,GAAKqD,EAAK,GAAcA,EAAK,GAAcvT,EAAOmQ,GAAKoD,EAAK,GACnEvT,EAAOiQ,GAAKsD,EAAK,GAAcA,EAAK,GAAcvT,EAAOmQ,EAAIoD,EAAK,GAAcvT,EAAOkQ,GAAKqD,EAAK,GAE7F1S,MAAMb,EAAOiQ,IAAMpP,MAAMb,EAAOkQ,IAAMrP,MAAMb,EAAOmQ,IAAMnQ,EAAOiQ,IAAM4D,KAAY7T,EAAOkQ,IAAM2D,KAAY7T,EAAOmQ,IAAM0D,IAC1H,KAAM,oCAANnT,OAA0CV,EAAO8T,WAAU,UAAApT,OAAS2S,EAAES,WAAU,UAAApT,OAASO,KAAK6S,WAAU,KAG1G,OAAO9T,CACT,GACA,CAAAkH,IAAA,IAAApG,MAMA,SAAEiT,EAAKC,EAAQlT,GACb,QAAcsB,IAAVtB,EACF,OAAOG,KAAKyQ,SAASsC,EAAS,EAAID,GAGlC9S,KAAKyQ,SAASsC,EAAS,EAAID,GAAOjT,CAEtC,GACA,CAAAoG,IAAA,OAAApG,MAKA,SAAKgR,GACH,IAAK,IAAIjN,EAAI,EAAGA,EAAIiN,EAAOJ,SAASlO,OAAQqB,IAC1C5D,KAAKyQ,SAAS7M,GAAKiN,EAAOJ,SAAS7M,GAGrC,OAAO5D,IACT,GACA,CAAAiG,IAAA,WAAApG,MAKA,WAIE,IAHA,IAAImT,EAAI,GAGCpP,EAAI,EAAGA,EAAI,EAAGA,IACrBoP,GAAKhT,KAAKyQ,SAAS7M,GAHT,IAMZ,OAAOoP,CACT,GACA,CAAA/M,IAAA,UAAApG,MAOA,SAAQd,QACS,IAAXA,IACFA,EAAS,IAAI65B,GAIf,IAKIh1B,EACAyO,EAFEC,EAAOwmB,GAIb,IAAKl1B,EAAI,EAAGA,EAAI,EAAGA,IACjB,IAAKyO,EAAI,EAAGA,EAAI,EAAGA,IACjBC,EAAK1O,EARE,EAQOyO,GAAKrS,KAAKyQ,SAAS7M,EAAI,EAAIyO,GAI7CC,EAAK,GAAa,EAClBA,EAAK,GAAa,EAClBA,EAAK,IAAa,EAClBA,EAAK,GAAa,EAClBA,EAAK,IAAa,EAClBA,EAAK,IAAa,EAClBA,EAAK,GAAa,EAClBA,EAAK,IAAa,EAClBA,EAAK,IAAa,EAElB,IAEIE,EAGAC,EALAzO,EAAI,EACF0O,EAAI1O,EAMV,EAAG,CAGD,GAAyB,IAArBsO,GAFJ1O,EAAI8O,EAAI1O,GA9BC,EAgCSJ,GAEhB,IAAKyO,EAAIzO,EAAI,EAAGyO,EAAIK,EAAGL,IACrB,GAAyB,IAArBC,EAAK1O,EAnCJ,EAmCayO,GAAU,CAC1BG,EApCG,EAsCH,GAGEF,GADAG,EAxCC,EAwCQD,GAxCR,EAyCa5O,IAAM0O,EAAKG,EAzCxB,EAyCiCJ,WACzBG,GAEX,KACF,CAIJ,GAAyB,IAArBF,EAAK1O,EAjDA,EAiDSA,GAChB,IAAKyO,EAAIzO,EAAI,EAAGyO,EAAIK,EAAGL,IAAK,CAC1B,IAAMM,EAAaL,EAAK1O,EAnDnB,EAmD4ByO,GAAKC,EAAK1O,EAnDtC,EAmD+CA,GACpD4O,EApDK,EAsDL,GAGEF,GADAG,EAxDG,EAwDMD,GAxDN,EAyDWH,GAAKI,GAAK7O,EAAI,EAAI0O,EAAKG,EAzDlC,EAyD2CJ,GAAKC,EAAKG,EAzDrD,EAyD8D7O,GAAK+O,UAC7DH,EACb,CAEJ,SAAWxO,GAGXJ,EAAI,EAEJ,EAAG,CACDyO,EAAIzO,EAAI,EAER,EAAG,CACD,IAAM+O,EAAaL,EAAK1O,EAtEjB,EAsE0ByO,GAAKC,EAAK1O,EAtEpC,EAsE6CA,GACpD4O,EAvEO,EAyEP,GAEEF,GADAG,EA1EK,EA0EID,GA1EJ,EA2ESH,GAAKC,EAAKG,EA3EnB,EA2E4BJ,GAAKC,EAAKG,EA3EtC,EA2E+C7O,GAAK+O,UAChDH,EACb,OAASH,IACX,SAAWzO,GAGXA,EAAI,EAEJ,EAAG,CACD,IAAM+O,EAAa,EAAIL,EAAK1O,EApFnB,EAoF4BA,GACrC4O,EArFS,EAuFT,GAEEF,GADAG,EAxFO,EAwFED,GAxFF,EAyFO5O,GAAK0O,EAAKG,EAzFjB,EAyF0B7O,GAAK+O,UAC7BH,EACb,OAAS5O,KAETA,EAAI,EAEJ,EAAG,CACDyO,EAAI,EAEJ,EAAG,CAGD,GAFAI,EAAIH,EArGG,EAqGOD,EAnGP,EAmGgBzO,GAEnBhE,MAAM6S,IAAMA,IAAMG,IACpB,KAAM,yBAANnT,OAA+BO,KAAK6S,WAAU,KAGhD9T,EAAOkO,EAAErJ,EAAGyO,EAAGI,EACjB,OAASJ,IACX,OAASzO,KAET,OAAO7E,CACT,GACA,CAAAkH,IAAA,4BAAApG,MAKA,SAA0BqT,GACxB,IAAMlE,EAAIkE,EAAElE,EACNC,EAAIiE,EAAEjE,EACNC,EAAIgE,EAAEhE,EACNzM,EAAIyQ,EAAEzQ,EACN0Q,EAAKnE,EAAIA,EACToE,EAAKnE,EAAIA,EACToE,EAAKnE,EAAIA,EACToE,EAAKtE,EAAImE,EACTI,EAAKvE,EAAIoE,EACTI,EAAKxE,EAAIqE,EACTI,EAAKxE,EAAImE,EACTM,EAAKzE,EAAIoE,EACTM,EAAKzE,EAAImE,EACTO,EAAKnR,EAAI0Q,EACTU,EAAKpR,EAAI2Q,EACTU,EAAKrR,EAAI4Q,EACTpG,EAAIjN,KAAKyQ,SAUf,OATAxD,EAAE,GAAa,GAAKwG,EAAKE,GACzB1G,EAAE,GAAasG,EAAKO,EACpB7G,EAAE,GAAauG,EAAKK,EACpB5G,EAAE,GAAasG,EAAKO,EACpB7G,EAAE,GAAa,GAAKqG,EAAKK,GACzB1G,EAAE,GAAayG,EAAKE,EACpB3G,EAAE,GAAauG,EAAKK,EACpB5G,EAAE,GAAayG,EAAKE,EACpB3G,EAAE,GAAa,GAAKqG,EAAKG,GAClBzT,IACT,GACA,CAAAiG,IAAA,YAAApG,MAOA,SAAUd,QACO,IAAXA,IACFA,EAAS,IAAI65B,GAGf,IAEI7kB,EAFEC,EAAIhU,KAAKyQ,SACTO,EAAIjS,EAAO0R,SAejB,OAZAO,EAAE,GAAKgD,EAAE,GACThD,EAAE,GAAKgD,EAAE,GACThD,EAAE,GAAKgD,EAAE,GACTD,EAAMC,EAAE,GACRhD,EAAE,GAAKgD,EAAE,GACThD,EAAE,GAAK+C,EACPA,EAAMC,EAAE,GACRhD,EAAE,GAAKgD,EAAE,GACThD,EAAE,GAAK+C,EACPA,EAAMC,EAAE,GACRhD,EAAE,GAAKgD,EAAE,GACThD,EAAE,GAAK+C,EACAhV,CACT,KAAC65B,CAAA,CA5eO,GA+eJE,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GASnED,GAAI,WACR,SAAAA,EAAY7pB,EAAGC,EAAGC,IAAGxG,EAAAA,EAAAA,GAAA,KAAAmwB,QACT,IAAN7pB,IACFA,EAAI,QAGI,IAANC,IACFA,EAAI,QAGI,IAANC,IACFA,EAAI,GAGNlP,KAAKgP,EAAIA,EACThP,KAAKiP,EAAIA,EACTjP,KAAKkP,EAAIA,CACX,CAiYC,OAhYDvE,EAAAA,EAAAA,GAAAkuB,EAAA,EAAA5yB,IAAA,QAAApG,MAMA,SAAM6Q,EAAQ3R,QACG,IAAXA,IACFA,EAAS,IAAI85B,GAGf,IAAM5kB,EAAKvD,EAAO1B,EACZkF,EAAKxD,EAAOzB,EACZkF,EAAKzD,EAAOxB,EACZF,EAAIhP,KAAKgP,EACTC,EAAIjP,KAAKiP,EACTC,EAAIlP,KAAKkP,EAIf,OAHAnQ,EAAOiQ,EAAIC,EAAIkF,EAAKjF,EAAIgF,EACxBnV,EAAOkQ,EAAIC,EAAI+E,EAAKjF,EAAImF,EACxBpV,EAAOmQ,EAAIF,EAAIkF,EAAKjF,EAAIgF,EACjBlV,CACT,GACA,CAAAkH,IAAA,MAAApG,MAKA,SAAImP,EAAGC,EAAGC,GAIR,OAHAlP,KAAKgP,EAAIA,EACThP,KAAKiP,EAAIA,EACTjP,KAAKkP,EAAIA,EACFlP,IACT,GACA,CAAAiG,IAAA,UAAApG,MAKA,WACEG,KAAKgP,EAAIhP,KAAKiP,EAAIjP,KAAKkP,EAAI,CAC7B,GACA,CAAAjJ,IAAA,OAAApG,MAKA,SAAK6Q,EAAQ3R,GACX,IAAIA,EAKF,OAAO,IAAI85B,EAAK74B,KAAKgP,EAAI0B,EAAO1B,EAAGhP,KAAKiP,EAAIyB,EAAOzB,EAAGjP,KAAKkP,EAAIwB,EAAOxB,GAJtEnQ,EAAOiQ,EAAI0B,EAAO1B,EAAIhP,KAAKgP,EAC3BjQ,EAAOkQ,EAAIyB,EAAOzB,EAAIjP,KAAKiP,EAC3BlQ,EAAOmQ,EAAIwB,EAAOxB,EAAIlP,KAAKkP,CAI/B,GACA,CAAAjJ,IAAA,OAAApG,MAMA,SAAK6Q,EAAQ3R,GACX,IAAIA,EAKF,OAAO,IAAI85B,EAAK74B,KAAKgP,EAAI0B,EAAO1B,EAAGhP,KAAKiP,EAAIyB,EAAOzB,EAAGjP,KAAKkP,EAAIwB,EAAOxB,GAJtEnQ,EAAOiQ,EAAIhP,KAAKgP,EAAI0B,EAAO1B,EAC3BjQ,EAAOkQ,EAAIjP,KAAKiP,EAAIyB,EAAOzB,EAC3BlQ,EAAOmQ,EAAIlP,KAAKkP,EAAIwB,EAAOxB,CAI/B,GACA,CAAAjJ,IAAA,WAAApG,MAOA,WACE,OAAO,IAAI+4B,GAAK,CAAC,GAAI54B,KAAKkP,EAAGlP,KAAKiP,EAAGjP,KAAKkP,EAAG,GAAIlP,KAAKgP,GAAIhP,KAAKiP,EAAGjP,KAAKgP,EAAG,GAC5E,GACA,CAAA/I,IAAA,YAAApG,MAMA,WACE,IAAMmP,EAAIhP,KAAKgP,EACTC,EAAIjP,KAAKiP,EACTC,EAAIlP,KAAKkP,EACTlL,EAAIoQ,KAAKC,KAAKrF,EAAIA,EAAIC,EAAIA,EAAIC,EAAIA,GAExC,GAAIlL,EAAI,EAAK,CACX,IAAMsQ,EAAO,EAAItQ,EACjBhE,KAAKgP,GAAKsF,EACVtU,KAAKiP,GAAKqF,EACVtU,KAAKkP,GAAKoF,CACZ,MAEEtU,KAAKgP,EAAI,EACThP,KAAKiP,EAAI,EACTjP,KAAKkP,EAAI,EAGX,OAAOlL,CACT,GACA,CAAAiC,IAAA,OAAApG,MAOA,SAAKd,QACY,IAAXA,IACFA,EAAS,IAAI85B,GAGf,IAAM7pB,EAAIhP,KAAKgP,EACTC,EAAIjP,KAAKiP,EACTC,EAAIlP,KAAKkP,EACXqF,EAAOH,KAAKC,KAAKrF,EAAIA,EAAIC,EAAIA,EAAIC,EAAIA,GAazC,OAXIqF,EAAO,GACTA,EAAO,EAAMA,EACbxV,EAAOiQ,EAAIA,EAAIuF,EACfxV,EAAOkQ,EAAIA,EAAIsF,EACfxV,EAAOmQ,EAAIA,EAAIqF,IAEfxV,EAAOiQ,EAAI,EACXjQ,EAAOkQ,EAAI,EACXlQ,EAAOmQ,EAAI,GAGNnQ,CACT,GACA,CAAAkH,IAAA,SAAApG,MAKA,WACE,IAAMmP,EAAIhP,KAAKgP,EACTC,EAAIjP,KAAKiP,EACTC,EAAIlP,KAAKkP,EACf,OAAOkF,KAAKC,KAAKrF,EAAIA,EAAIC,EAAIA,EAAIC,EAAIA,EACvC,GACA,CAAAjJ,IAAA,gBAAApG,MAKA,WACE,OAAOG,KAAKwU,IAAIxU,KAClB,GACA,CAAAiG,IAAA,aAAApG,MAKA,SAAW4S,GACT,IAAMzD,EAAIhP,KAAKgP,EACTC,EAAIjP,KAAKiP,EACTC,EAAIlP,KAAKkP,EACTuF,EAAKhC,EAAEzD,EACP0F,EAAKjC,EAAExD,EACP0F,EAAKlC,EAAEvD,EACb,OAAOkF,KAAKC,MAAMI,EAAKzF,IAAMyF,EAAKzF,IAAM0F,EAAKzF,IAAMyF,EAAKzF,IAAM0F,EAAKzF,IAAMyF,EAAKzF,GAChF,GACA,CAAAjJ,IAAA,kBAAApG,MAKA,SAAgB4S,GACd,IAAMzD,EAAIhP,KAAKgP,EACTC,EAAIjP,KAAKiP,EACTC,EAAIlP,KAAKkP,EACTuF,EAAKhC,EAAEzD,EACP0F,EAAKjC,EAAExD,EACP0F,EAAKlC,EAAEvD,EACb,OAAQuF,EAAKzF,IAAMyF,EAAKzF,IAAM0F,EAAKzF,IAAMyF,EAAKzF,IAAM0F,EAAKzF,IAAMyF,EAAKzF,EACtE,GACA,CAAAjJ,IAAA,QAAApG,MAMA,SAAM+U,EAAQ7V,QACG,IAAXA,IACFA,EAAS,IAAI85B,GAGf,IAAM7pB,EAAIhP,KAAKgP,EACTC,EAAIjP,KAAKiP,EACTC,EAAIlP,KAAKkP,EAIf,OAHAnQ,EAAOiQ,EAAI4F,EAAS5F,EACpBjQ,EAAOkQ,EAAI2F,EAAS3F,EACpBlQ,EAAOmQ,EAAI0F,EAAS1F,EACbnQ,CACT,GACA,CAAAkH,IAAA,OAAApG,MAMA,SAAK6Q,EAAQ3R,GAQX,YAPe,IAAXA,IACFA,EAAS,IAAI85B,GAGf95B,EAAOiQ,EAAI0B,EAAO1B,EAAIhP,KAAKgP,EAC3BjQ,EAAOkQ,EAAIyB,EAAOzB,EAAIjP,KAAKiP,EAC3BlQ,EAAOmQ,EAAIwB,EAAOxB,EAAIlP,KAAKkP,EACpBnQ,CACT,GACA,CAAAkH,IAAA,kBAAApG,MAMA,SAAgB+U,EAAQlE,EAAQ3R,GAQ9B,YAPe,IAAXA,IACFA,EAAS,IAAI85B,GAGf95B,EAAOiQ,EAAIhP,KAAKgP,EAAI4F,EAASlE,EAAO1B,EACpCjQ,EAAOkQ,EAAIjP,KAAKiP,EAAI2F,EAASlE,EAAOzB,EACpClQ,EAAOmQ,EAAIlP,KAAKkP,EAAI0F,EAASlE,EAAOxB,EAC7BnQ,CACT,GACA,CAAAkH,IAAA,MAAApG,MAMA,SAAI6Q,GACF,OAAO1Q,KAAKgP,EAAI0B,EAAO1B,EAAIhP,KAAKiP,EAAIyB,EAAOzB,EAAIjP,KAAKkP,EAAIwB,EAAOxB,CACjE,GAAC,CAAAjJ,IAAA,SAAApG,MAED,WACE,OAAkB,IAAXG,KAAKgP,GAAsB,IAAXhP,KAAKiP,GAAsB,IAAXjP,KAAKkP,CAC9C,GACA,CAAAjJ,IAAA,SAAApG,MAMA,SAAOd,GAQL,YAPe,IAAXA,IACFA,EAAS,IAAI85B,GAGf95B,EAAOiQ,GAAKhP,KAAKgP,EACjBjQ,EAAOkQ,GAAKjP,KAAKiP,EACjBlQ,EAAOmQ,GAAKlP,KAAKkP,EACVnQ,CACT,GACA,CAAAkH,IAAA,WAAApG,MAOA,SAASgV,EAAIC,GACX,IAAMC,EAAO/U,KAAKuC,SAElB,GAAIwS,EAAO,EAAK,CACd,IAAM/Q,EAAI+0B,GACJ9jB,EAAQ,EAAIF,EAClB/Q,EAAES,IAAIzE,KAAKgP,EAAIiG,EAAOjV,KAAKiP,EAAIgG,EAAOjV,KAAKkP,EAAI+F,GAC/C,IAAMC,EAAU8jB,GAEZ5kB,KAAKgB,IAAIpR,EAAEgL,GAAK,IAClBkG,EAAQzQ,IAAI,EAAG,EAAG,GAClBT,EAAEqR,MAAMH,EAASL,KAEjBK,EAAQzQ,IAAI,EAAG,EAAG,GAClBT,EAAEqR,MAAMH,EAASL,IAGnB7Q,EAAEqR,MAAMR,EAAIC,EACd,MAEED,EAAGpQ,IAAI,EAAG,EAAG,GACbqQ,EAAGrQ,IAAI,EAAG,EAAG,EAEjB,GACA,CAAAwB,IAAA,WAAApG,MAKA,WACE,MAAO,GAAPJ,OAAUO,KAAKgP,EAAC,KAAAvP,OAAIO,KAAKiP,EAAC,KAAAxP,OAAIO,KAAKkP,EACrC,GACA,CAAAjJ,IAAA,UAAApG,MAKA,WACE,MAAO,CAACG,KAAKgP,EAAGhP,KAAKiP,EAAGjP,KAAKkP,EAC/B,GACA,CAAAjJ,IAAA,OAAApG,MAKA,SAAK6Q,GAIH,OAHA1Q,KAAKgP,EAAI0B,EAAO1B,EAChBhP,KAAKiP,EAAIyB,EAAOzB,EAChBjP,KAAKkP,EAAIwB,EAAOxB,EACTlP,IACT,GACA,CAAAiG,IAAA,OAAApG,MAMA,SAAK6Q,EAAQyB,EAAGpT,GACd,IAAMiQ,EAAIhP,KAAKgP,EACTC,EAAIjP,KAAKiP,EACTC,EAAIlP,KAAKkP,EACfnQ,EAAOiQ,EAAIA,GAAK0B,EAAO1B,EAAIA,GAAKmD,EAChCpT,EAAOkQ,EAAIA,GAAKyB,EAAOzB,EAAIA,GAAKkD,EAChCpT,EAAOmQ,EAAIA,GAAKwB,EAAOxB,EAAIA,GAAKiD,CAClC,GACA,CAAAlM,IAAA,eAAApG,MAKA,SAAa6Q,EAAQ4E,GAKnB,YAJkB,IAAdA,IACFA,EAAY,QAGVlB,KAAKgB,IAAIpV,KAAKgP,EAAI0B,EAAO1B,GAAKsG,GAAalB,KAAKgB,IAAIpV,KAAKiP,EAAIyB,EAAOzB,GAAKqG,GAAalB,KAAKgB,IAAIpV,KAAKkP,EAAIwB,EAAOxB,GAAKoG,EAK1H,GACA,CAAArP,IAAA,aAAApG,MAKA,SAAWyV,GAKT,YAJkB,IAAdA,IACFA,EAAY,QAGVlB,KAAKgB,IAAIpV,KAAKgP,GAAKsG,GAAalB,KAAKgB,IAAIpV,KAAKiP,GAAKqG,GAAalB,KAAKgB,IAAIpV,KAAKkP,GAAKoG,EAKzF,GACA,CAAArP,IAAA,mBAAApG,MAMA,SAAiB6Q,EAAQ4E,GAEvB,OADAtV,KAAKuV,OAAO0jB,IACLA,GAAUxjB,aAAa/E,EAAQ4E,EACxC,GACA,CAAArP,IAAA,QAAApG,MAKA,WACE,OAAO,IAAIg5B,EAAK74B,KAAKgP,EAAGhP,KAAKiP,EAAGjP,KAAKkP,EACvC,KAAC2pB,CAAA,CAlZO,GAqZVA,GAAKnjB,KAAO,IAAImjB,GAAK,EAAG,EAAG,GAC3BA,GAAKljB,OAAS,IAAIkjB,GAAK,EAAG,EAAG,GAC7BA,GAAKjjB,OAAS,IAAIijB,GAAK,EAAG,EAAG,GAC7BA,GAAKhjB,OAAS,IAAIgjB,GAAK,EAAG,EAAG,GAC7B,IAAME,GAAkB,IAAIF,GACtBG,GAAwB,IAAIH,GAC5BI,GAAY,IAAIJ,GAKhBK,GAAI,WAQR,SAAAA,EAAYlxB,IAASU,EAAAA,EAAAA,GAAA,KAAAwwB,QACH,IAAZlxB,IACFA,EAAU,CAAC,GAGbhI,KAAK+V,WAAa,IAAI8iB,GACtB74B,KAAKgW,WAAa,IAAI6iB,GAElB7wB,EAAQ+N,YACV/V,KAAK+V,WAAW9R,KAAK+D,EAAQ+N,YAG3B/N,EAAQgO,YACVhW,KAAKgW,WAAW/R,KAAK+D,EAAQgO,WAEjC,CA0PC,OAzPDrL,EAAAA,EAAAA,GAAAuuB,EAAA,EAAAjzB,IAAA,gBAAApG,MAOA,SAAcoW,EAAQxQ,EAAUyQ,EAAYC,GAC1C,IAAMC,EAAIpW,KAAK+V,WACTM,EAAIrW,KAAKgW,WACT9C,EAAIgD,EAEVE,EAAEnS,KAAKgS,EAAO,IAEV/C,GACFA,EAAEoD,MAAMF,EAAGA,GAGbC,EAAEpS,KAAKmS,GAEP,IAAK,IAAIxS,EAAI,EAAGA,EAAIqS,EAAO1T,OAAQqB,IAAK,CACtC,IAAI6O,EAAIwD,EAAOrS,GAEXsP,IACFA,EAAEoD,MAAM7D,EAAG0mB,IACX1mB,EAAI0mB,IAGF1mB,EAAEzD,EAAIqH,EAAErH,IACVqH,EAAErH,EAAIyD,EAAEzD,GAGNyD,EAAEzD,EAAIoH,EAAEpH,IACVoH,EAAEpH,EAAIyD,EAAEzD,GAGNyD,EAAExD,EAAIoH,EAAEpH,IACVoH,EAAEpH,EAAIwD,EAAExD,GAGNwD,EAAExD,EAAImH,EAAEnH,IACVmH,EAAEnH,EAAIwD,EAAExD,GAGNwD,EAAEvD,EAAImH,EAAEnH,IACVmH,EAAEnH,EAAIuD,EAAEvD,GAGNuD,EAAEvD,EAAIkH,EAAElH,IACVkH,EAAElH,EAAIuD,EAAEvD,EAEZ,CAiBA,OAdIzJ,IACFA,EAAS+Q,KAAKJ,EAAGA,GACjB3Q,EAAS+Q,KAAKH,EAAGA,IAGfF,IACFC,EAAEpH,GAAKmH,EACPC,EAAEnH,GAAKkH,EACPC,EAAElH,GAAKiH,EACPE,EAAErH,GAAKmH,EACPE,EAAEpH,GAAKkH,EACPE,EAAEnH,GAAKiH,GAGFnW,IACT,GACA,CAAAiG,IAAA,OAAApG,MAOA,SAAK4W,GAGH,OAFAzW,KAAK+V,WAAW9R,KAAKwS,EAAKV,YAC1B/V,KAAKgW,WAAW/R,KAAKwS,EAAKT,YACnBhW,IACT,GACA,CAAAiG,IAAA,QAAApG,MAKA,WACE,OAAO,IAAIq5B,GAAOj1B,KAAKjE,KACzB,GACA,CAAAiG,IAAA,SAAApG,MAKA,SAAO4W,GACLzW,KAAK+V,WAAW/G,EAAIoF,KAAKsC,IAAI1W,KAAK+V,WAAW/G,EAAGyH,EAAKV,WAAW/G,GAChEhP,KAAKgW,WAAWhH,EAAIoF,KAAKuC,IAAI3W,KAAKgW,WAAWhH,EAAGyH,EAAKT,WAAWhH,GAChEhP,KAAK+V,WAAW9G,EAAImF,KAAKsC,IAAI1W,KAAK+V,WAAW9G,EAAGwH,EAAKV,WAAW9G,GAChEjP,KAAKgW,WAAW/G,EAAImF,KAAKuC,IAAI3W,KAAKgW,WAAW/G,EAAGwH,EAAKT,WAAW/G,GAChEjP,KAAK+V,WAAW7G,EAAIkF,KAAKsC,IAAI1W,KAAK+V,WAAW7G,EAAGuH,EAAKV,WAAW7G,GAChElP,KAAKgW,WAAW9G,EAAIkF,KAAKuC,IAAI3W,KAAKgW,WAAW9G,EAAGuH,EAAKT,WAAW9G,EAClE,GACA,CAAAjJ,IAAA,WAAApG,MAKA,SAAS4W,GACP,IAAMG,EAAK5W,KAAK+V,WACVc,EAAK7W,KAAKgW,WACVc,EAAKL,EAAKV,WACVgB,EAAKN,EAAKT,WAKVgB,EAAYF,EAAG9H,GAAK6H,EAAG7H,GAAK6H,EAAG7H,GAAK+H,EAAG/H,GAAK4H,EAAG5H,GAAK+H,EAAG/H,GAAK+H,EAAG/H,GAAK6H,EAAG7H,EACvEiI,EAAYH,EAAG7H,GAAK4H,EAAG5H,GAAK4H,EAAG5H,GAAK8H,EAAG9H,GAAK2H,EAAG3H,GAAK8H,EAAG9H,GAAK8H,EAAG9H,GAAK4H,EAAG5H,EACvEiI,EAAYJ,EAAG5H,GAAK2H,EAAG3H,GAAK2H,EAAG3H,GAAK6H,EAAG7H,GAAK0H,EAAG1H,GAAK6H,EAAG7H,GAAK6H,EAAG7H,GAAK2H,EAAG3H,EAC7E,OAAO8H,GAAaC,GAAaC,CACnC,GAAE,CAAAjR,IAAA,SAAApG,MAGF,WACE,IAAMuW,EAAIpW,KAAK+V,WACTM,EAAIrW,KAAKgW,WACf,OAAQK,EAAErH,EAAIoH,EAAEpH,IAAMqH,EAAEpH,EAAImH,EAAEnH,IAAMoH,EAAEnH,EAAIkH,EAAElH,EAC9C,GACA,CAAAjJ,IAAA,WAAApG,MAKA,SAAS4W,GACP,IAAMG,EAAK5W,KAAK+V,WACVc,EAAK7W,KAAKgW,WACVc,EAAKL,EAAKV,WACVgB,EAAKN,EAAKT,WAKhB,OAAOY,EAAG5H,GAAK8H,EAAG9H,GAAK6H,EAAG7H,GAAK+H,EAAG/H,GAAK4H,EAAG3H,GAAK6H,EAAG7H,GAAK4H,EAAG5H,GAAK8H,EAAG9H,GAAK2H,EAAG1H,GAAK4H,EAAG5H,GAAK2H,EAAG3H,GAAK6H,EAAG7H,CACpG,GAAC,CAAAjJ,IAAA,aAAApG,MAED,SAAWsX,EAAG/E,EAAGgF,EAAGC,EAAGpK,EAAGC,EAAGoK,EAAGC,GAC9B,IAAMnB,EAAIpW,KAAK+V,WACTM,EAAIrW,KAAKgW,WACfmB,EAAElT,KAAKmS,GACPhE,EAAE3N,IAAI4R,EAAErH,EAAGoH,EAAEnH,EAAGmH,EAAElH,GAClBkI,EAAE3S,IAAI4R,EAAErH,EAAGqH,EAAEpH,EAAGmH,EAAElH,GAClBmI,EAAE5S,IAAI2R,EAAEpH,EAAGqH,EAAEpH,EAAGoH,EAAEnH,GAClBjC,EAAExI,IAAI4R,EAAErH,EAAGoH,EAAEnH,EAAGoH,EAAEnH,GAClBhC,EAAEzI,IAAI2R,EAAEpH,EAAGqH,EAAEpH,EAAGmH,EAAElH,GAClBoI,EAAE7S,IAAI2R,EAAEpH,EAAGoH,EAAEnH,EAAGoH,EAAEnH,GAClBqI,EAAEtT,KAAKoS,EACT,GACA,CAAApQ,IAAA,eAAApG,MAMA,SAAa2X,EAAOzY,GAClB,IAAM0Y,EAAU2hB,GACVjiB,EAAIM,EAAQ,GACZrF,EAAIqF,EAAQ,GACZL,EAAIK,EAAQ,GACZJ,EAAII,EAAQ,GACZxK,EAAIwK,EAAQ,GACZvK,EAAIuK,EAAQ,GACZH,EAAIG,EAAQ,GACZF,EAAIE,EAAQ,GAElBzX,KAAK2X,WAAWR,EAAG/E,EAAGgF,EAAGC,EAAGpK,EAAGC,EAAGoK,EAAGC,GAErC,IAAK,IAAI3T,EAAI,EAAS,IAANA,EAASA,IAAK,CAC5B,IAAMgU,EAASH,EAAQ7T,GACvB4T,EAAMK,aAAaD,EAAQA,EAC7B,CAEA,OAAO7Y,EAAO+Y,cAAcL,EAC9B,GACA,CAAAxR,IAAA,eAAApG,MAMA,SAAa2X,EAAOzY,GAClB,IAAM0Y,EAAU2hB,GACVjiB,EAAIM,EAAQ,GACZrF,EAAIqF,EAAQ,GACZL,EAAIK,EAAQ,GACZJ,EAAII,EAAQ,GACZxK,EAAIwK,EAAQ,GACZvK,EAAIuK,EAAQ,GACZH,EAAIG,EAAQ,GACZF,EAAIE,EAAQ,GAElBzX,KAAK2X,WAAWR,EAAG/E,EAAGgF,EAAGC,EAAGpK,EAAGC,EAAGoK,EAAGC,GAErC,IAAK,IAAI3T,EAAI,EAAS,IAANA,EAASA,IAAK,CAC5B,IAAMgU,EAASH,EAAQ7T,GACvB4T,EAAMO,aAAaH,EAAQA,EAC7B,CAEA,OAAO7Y,EAAO+Y,cAAcL,EAC9B,GACA,CAAAxR,IAAA,cAAApG,MAKA,SAAYmY,GACV,IACEC,EAEED,EAFFC,UACAC,EACEF,EADFE,KAIIC,EAAW,EAAIF,EAAUjJ,EACzBoJ,EAAW,EAAIH,EAAUhJ,EACzBoJ,EAAW,EAAIJ,EAAU/I,EAEzB2F,GAAM7U,KAAK+V,WAAW/G,EAAIkJ,EAAKlJ,GAAKmJ,EACpCrD,GAAM9U,KAAKgW,WAAWhH,EAAIkJ,EAAKlJ,GAAKmJ,EACpCG,GAAMtY,KAAK+V,WAAW9G,EAAIiJ,EAAKjJ,GAAKmJ,EACpCG,GAAMvY,KAAKgW,WAAW/G,EAAIiJ,EAAKjJ,GAAKmJ,EACpCI,GAAMxY,KAAK+V,WAAW7G,EAAIgJ,EAAKhJ,GAAKmJ,EACpCI,GAAMzY,KAAKgW,WAAW9G,EAAIgJ,EAAKhJ,GAAKmJ,EAGpCK,EAAOtE,KAAKuC,IAAIvC,KAAKuC,IAAIvC,KAAKsC,IAAI7B,EAAIC,GAAKV,KAAKsC,IAAI4B,EAAIC,IAAMnE,KAAKsC,IAAI8B,EAAIC,IAC3EE,EAAOvE,KAAKsC,IAAItC,KAAKsC,IAAItC,KAAKuC,IAAI9B,EAAIC,GAAKV,KAAKuC,IAAI2B,EAAIC,IAAMnE,KAAKuC,IAAI6B,EAAIC,IAEjF,QAAIE,EAAO,MAMPD,EAAOC,EAMb,KAACugB,CAAA,CAjRO,GAoRJC,GAAQ,IAAIN,GACZO,GAA6B,CAAC,IAAIP,GAAQ,IAAIA,GAAQ,IAAIA,GAAQ,IAAIA,GAAQ,IAAIA,GAAQ,IAAIA,GAAQ,IAAIA,GAAQ,IAAIA,IAWtHQ,GAAU,WACd,SAAAA,EAAYrqB,EAAGC,EAAGC,EAAGzM,IAAGiG,EAAAA,EAAAA,GAAA,KAAA2wB,QACZ,IAANrqB,IACFA,EAAI,QAGI,IAANC,IACFA,EAAI,QAGI,IAANC,IACFA,EAAI,QAGI,IAANzM,IACFA,EAAI,GAGNzC,KAAKgP,EAAIA,EACThP,KAAKiP,EAAIA,EACTjP,KAAKkP,EAAIA,EACTlP,KAAKyC,EAAIA,CACX,CA+bC,OA9bDkI,EAAAA,EAAAA,GAAA0uB,EAAA,EAAApzB,IAAA,MAAApG,MAKA,SAAImP,EAAGC,EAAGC,EAAGzM,GAKX,OAJAzC,KAAKgP,EAAIA,EACThP,KAAKiP,EAAIA,EACTjP,KAAKkP,EAAIA,EACTlP,KAAKyC,EAAIA,EACFzC,IACT,GACA,CAAAiG,IAAA,WAAApG,MAMA,WACE,MAAO,GAAPJ,OAAUO,KAAKgP,EAAC,KAAAvP,OAAIO,KAAKiP,EAAC,KAAAxP,OAAIO,KAAKkP,EAAC,KAAAzP,OAAIO,KAAKyC,EAC/C,GACA,CAAAwD,IAAA,UAAApG,MAMA,WACE,MAAO,CAACG,KAAKgP,EAAGhP,KAAKiP,EAAGjP,KAAKkP,EAAGlP,KAAKyC,EACvC,GACA,CAAAwD,IAAA,mBAAApG,MAKA,SAAiB6Q,EAAQwI,GACvB,IAAMnM,EAAIqH,KAAK+E,IAAY,GAARD,GAKnB,OAJAlZ,KAAKgP,EAAI0B,EAAO1B,EAAIjC,EACpB/M,KAAKiP,EAAIyB,EAAOzB,EAAIlC,EACpB/M,KAAKkP,EAAIwB,EAAOxB,EAAInC,EACpB/M,KAAKyC,EAAI2R,KAAKgF,IAAY,GAARF,GACXlZ,IACT,GACA,CAAAiG,IAAA,cAAApG,MAOA,SAAYwZ,QACS,IAAfA,IACFA,EAAa,IAAIwf,IAGnB74B,KAAKsZ,YAEL,IAAMJ,EAAQ,EAAI9E,KAAKmF,KAAKvZ,KAAKyC,GAC3BsK,EAAIqH,KAAKC,KAAK,EAAIrU,KAAKyC,EAAIzC,KAAKyC,GAgBtC,OAdIsK,EAAI,MAGNsM,EAAWrK,EAAIhP,KAAKgP,EAEpBqK,EAAWpK,EAAIjP,KAAKiP,EACpBoK,EAAWnK,EAAIlP,KAAKkP,IAEpBmK,EAAWrK,EAAIhP,KAAKgP,EAAIjC,EAExBsM,EAAWpK,EAAIjP,KAAKiP,EAAIlC,EACxBsM,EAAWnK,EAAIlP,KAAKkP,EAAInC,GAGnB,CAACsM,EAAYH,EACtB,GACA,CAAAjT,IAAA,iBAAApG,MAKA,SAAewW,EAAGzF,GAChB,GAAIyF,EAAEmD,iBAAiB5I,GAAI,CACzB,IAAMiE,EAAKykB,GACLxkB,EAAKykB,GACXljB,EAAEsD,SAAS9E,EAAIC,GACf9U,KAAK4Z,iBAAiB/E,EAAIT,KAAKyF,GACjC,KAAO,CACL,IAAM1C,EAAId,EAAEhB,MAAMzE,GAClB5Q,KAAKgP,EAAImI,EAAEnI,EACXhP,KAAKiP,EAAIkI,EAAElI,EACXjP,KAAKkP,EAAIiI,EAAEjI,EACXlP,KAAKyC,EAAI2R,KAAKC,KAAKD,KAAA0F,IAAAzD,EAAE9T,SAAY,GAAC6R,KAAA0F,IAAGlJ,EAAErO,SAAY,IAAK8T,EAAE7B,IAAI5D,GAC9D5Q,KAAKsZ,WACP,CAEA,OAAOtZ,IACT,GACA,CAAAiG,IAAA,OAAApG,MAKA,SAAKka,EAAMhb,QACM,IAAXA,IACFA,EAAS,IAAIs6B,GAGf,IAAMrf,EAAKha,KAAKgP,EACViL,EAAKja,KAAKiP,EACViL,EAAKla,KAAKkP,EACViL,EAAKna,KAAKyC,EACV2X,EAAKL,EAAK/K,EACVqL,EAAKN,EAAK9K,EACVqL,EAAKP,EAAK7K,EACVqL,EAAKR,EAAKtX,EAKhB,OAJA1D,EAAOiQ,EAAIgL,EAAKO,EAAKJ,EAAKC,EAAKH,EAAKK,EAAKJ,EAAKG,EAC9Ctb,EAAOkQ,EAAIgL,EAAKM,EAAKJ,EAAKE,EAAKH,EAAKE,EAAKJ,EAAKM,EAC9Cvb,EAAOmQ,EAAIgL,EAAKK,EAAKJ,EAAKG,EAAKN,EAAKK,EAAKJ,EAAKG,EAC9Crb,EAAO0D,EAAI0X,EAAKI,EAAKP,EAAKI,EAAKH,EAAKI,EAAKH,EAAKI,EACvCvb,CACT,GACA,CAAAkH,IAAA,UAAApG,MAKA,SAAQd,QACS,IAAXA,IACFA,EAAS,IAAIs6B,GAGf,IAAMrqB,EAAIhP,KAAKgP,EACTC,EAAIjP,KAAKiP,EACTC,EAAIlP,KAAKkP,EACTzM,EAAIzC,KAAKyC,EACfzC,KAAKwa,UAAUzb,GACf,IAAM0b,EAAS,GAAKzL,EAAIA,EAAIC,EAAIA,EAAIC,EAAIA,EAAIzM,EAAIA,GAKhD,OAJA1D,EAAOiQ,GAAKyL,EACZ1b,EAAOkQ,GAAKwL,EACZ1b,EAAOmQ,GAAKuL,EACZ1b,EAAO0D,GAAKgY,EACL1b,CACT,GACA,CAAAkH,IAAA,YAAApG,MAKA,SAAUd,GASR,YARe,IAAXA,IACFA,EAAS,IAAIs6B,GAGft6B,EAAOiQ,GAAKhP,KAAKgP,EACjBjQ,EAAOkQ,GAAKjP,KAAKiP,EACjBlQ,EAAOmQ,GAAKlP,KAAKkP,EACjBnQ,EAAO0D,EAAIzC,KAAKyC,EACT1D,CACT,GACA,CAAAkH,IAAA,YAAApG,MAKA,WACE,IAAIuW,EAAIhC,KAAKC,KAAKrU,KAAKgP,EAAIhP,KAAKgP,EAAIhP,KAAKiP,EAAIjP,KAAKiP,EAAIjP,KAAKkP,EAAIlP,KAAKkP,EAAIlP,KAAKyC,EAAIzC,KAAKyC,GAetF,OAbU,IAAN2T,GACFpW,KAAKgP,EAAI,EACThP,KAAKiP,EAAI,EACTjP,KAAKkP,EAAI,EACTlP,KAAKyC,EAAI,IAET2T,EAAI,EAAIA,EACRpW,KAAKgP,GAAKoH,EACVpW,KAAKiP,GAAKmH,EACVpW,KAAKkP,GAAKkH,EACVpW,KAAKyC,GAAK2T,GAGLpW,IACT,GACA,CAAAiG,IAAA,gBAAApG,MAMA,WACE,IAAMqN,GAAK,GAAOlN,KAAKgP,EAAIhP,KAAKgP,EAAIhP,KAAKiP,EAAIjP,KAAKiP,EAAIjP,KAAKkP,EAAIlP,KAAKkP,EAAIlP,KAAKyC,EAAIzC,KAAKyC,IAAM,EAc5F,OAZU,IAANyK,GACFlN,KAAKgP,EAAI,EACThP,KAAKiP,EAAI,EACTjP,KAAKkP,EAAI,EACTlP,KAAKyC,EAAI,IAETzC,KAAKgP,GAAK9B,EACVlN,KAAKiP,GAAK/B,EACVlN,KAAKkP,GAAKhC,EACVlN,KAAKyC,GAAKyK,GAGLlN,IACT,GACA,CAAAiG,IAAA,QAAApG,MAKA,SAAM+Q,EAAG7R,QACQ,IAAXA,IACFA,EAAS,IAAI85B,IAGf,IAAM7pB,EAAI4B,EAAE5B,EACNC,EAAI2B,EAAE3B,EACNC,EAAI0B,EAAE1B,EACNwL,EAAK1a,KAAKgP,EACV2L,EAAK3a,KAAKiP,EACV2L,EAAK5a,KAAKkP,EACV2L,EAAK7a,KAAKyC,EAEVqY,EAAKD,EAAK7L,EAAI2L,EAAKzL,EAAI0L,EAAK3L,EAC5B8L,EAAKF,EAAK5L,EAAI2L,EAAK5L,EAAI0L,EAAKxL,EAC5B8L,EAAKH,EAAK3L,EAAIwL,EAAKzL,EAAI0L,EAAK3L,EAC5BiM,GAAMP,EAAK1L,EAAI2L,EAAK1L,EAAI2L,EAAK1L,EAInC,OAHAnQ,EAAOiQ,EAAI8L,EAAKD,EAAKI,GAAMP,EAAKK,GAAMH,EAAKI,GAAML,EACjD5b,EAAOkQ,EAAI8L,EAAKF,EAAKI,GAAMN,EAAKK,GAAMN,EAAKI,GAAMF,EACjD7b,EAAOmQ,EAAI8L,EAAKH,EAAKI,GAAML,EAAKE,GAAMH,EAAKI,GAAML,EAC1C3b,CACT,GACA,CAAAkH,IAAA,OAAApG,MAMA,SAAKka,GAKH,OAJA/Z,KAAKgP,EAAI+K,EAAK/K,EACdhP,KAAKiP,EAAI8K,EAAK9K,EACdjP,KAAKkP,EAAI6K,EAAK7K,EACdlP,KAAKyC,EAAIsX,EAAKtX,EACPzC,IACT,GACA,CAAAiG,IAAA,UAAApG,MAMA,SAAQd,EAAQmc,GAKd,IAAIC,EACAC,EACAC,OANU,IAAVH,IACFA,EAAQ,OAMV,IAAMlM,EAAIhP,KAAKgP,EACTC,EAAIjP,KAAKiP,EACTC,EAAIlP,KAAKkP,EACTzM,EAAIzC,KAAKyC,EAEf,GACO,QADCyY,EAgCJ,MAAM,IAAIxY,MAAM,eAADjD,OAAgByb,EAAK,wBA9BpC,IAAMI,EAAOtM,EAAIC,EAAIC,EAAIzM,EAgBzB,GAdI6Y,EAAO,OAETH,EAAU,EAAI/G,KAAKmH,MAAMvM,EAAGvM,GAC5B2Y,EAAWhH,KAAKyF,GAAK,EACrBwB,EAAO,GAGLC,GAAQ,OAEVH,GAAW,EAAI/G,KAAKmH,MAAMvM,EAAGvM,GAC7B2Y,GAAYhH,KAAKyF,GAAK,EACtBwB,EAAO,QAGOla,IAAZga,EAAuB,CACzB,IAAMK,EAAMxM,EAAIA,EACVyM,EAAMxM,EAAIA,EACVyM,EAAMxM,EAAIA,EAChBiM,EAAU/G,KAAKmH,MAAM,EAAItM,EAAIxM,EAAI,EAAIuM,EAAIE,EAAG,EAAI,EAAIuM,EAAM,EAAIC,GAE9DN,EAAWhH,KAAKuH,KAAK,EAAIL,GAEzBD,EAAOjH,KAAKmH,MAAM,EAAIvM,EAAIvM,EAAI,EAAIwM,EAAIC,EAAG,EAAI,EAAIsM,EAAM,EAAIE,EAC7D,CAQJ3c,EAAOkQ,EAAIkM,EACXpc,EAAOmQ,EAAIkM,EACXrc,EAAOiQ,EAAIqM,CACb,GACA,CAAApV,IAAA,eAAApG,MASA,SAAamP,EAAGC,EAAGC,EAAGgM,QACN,IAAVA,IACFA,EAAQ,OAGV,IAAMU,EAAKxH,KAAKgF,IAAIpK,EAAI,GAClB6M,EAAKzH,KAAKgF,IAAInK,EAAI,GAClB6M,EAAK1H,KAAKgF,IAAIlK,EAAI,GAClB6M,EAAK3H,KAAK+E,IAAInK,EAAI,GAClBgN,EAAK5H,KAAK+E,IAAIlK,EAAI,GAClBgN,EAAK7H,KAAK+E,IAAIjK,EAAI,GAkCxB,MAhCc,QAAVgM,GACFlb,KAAKgP,EAAI+M,EAAKF,EAAKC,EAAKF,EAAKI,EAAKC,EAClCjc,KAAKiP,EAAI2M,EAAKI,EAAKF,EAAKC,EAAKF,EAAKI,EAClCjc,KAAKkP,EAAI0M,EAAKC,EAAKI,EAAKF,EAAKC,EAAKF,EAClC9b,KAAKyC,EAAImZ,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,GACf,QAAVf,GACTlb,KAAKgP,EAAI+M,EAAKF,EAAKC,EAAKF,EAAKI,EAAKC,EAClCjc,KAAKiP,EAAI2M,EAAKI,EAAKF,EAAKC,EAAKF,EAAKI,EAClCjc,KAAKkP,EAAI0M,EAAKC,EAAKI,EAAKF,EAAKC,EAAKF,EAClC9b,KAAKyC,EAAImZ,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,GACf,QAAVf,GACTlb,KAAKgP,EAAI+M,EAAKF,EAAKC,EAAKF,EAAKI,EAAKC,EAClCjc,KAAKiP,EAAI2M,EAAKI,EAAKF,EAAKC,EAAKF,EAAKI,EAClCjc,KAAKkP,EAAI0M,EAAKC,EAAKI,EAAKF,EAAKC,EAAKF,EAClC9b,KAAKyC,EAAImZ,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,GACf,QAAVf,GACTlb,KAAKgP,EAAI+M,EAAKF,EAAKC,EAAKF,EAAKI,EAAKC,EAClCjc,KAAKiP,EAAI2M,EAAKI,EAAKF,EAAKC,EAAKF,EAAKI,EAClCjc,KAAKkP,EAAI0M,EAAKC,EAAKI,EAAKF,EAAKC,EAAKF,EAClC9b,KAAKyC,EAAImZ,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,GACf,QAAVf,GACTlb,KAAKgP,EAAI+M,EAAKF,EAAKC,EAAKF,EAAKI,EAAKC,EAClCjc,KAAKiP,EAAI2M,EAAKI,EAAKF,EAAKC,EAAKF,EAAKI,EAClCjc,KAAKkP,EAAI0M,EAAKC,EAAKI,EAAKF,EAAKC,EAAKF,EAClC9b,KAAKyC,EAAImZ,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,GACf,QAAVf,IACTlb,KAAKgP,EAAI+M,EAAKF,EAAKC,EAAKF,EAAKI,EAAKC,EAClCjc,KAAKiP,EAAI2M,EAAKI,EAAKF,EAAKC,EAAKF,EAAKI,EAClCjc,KAAKkP,EAAI0M,EAAKC,EAAKI,EAAKF,EAAKC,EAAKF,EAClC9b,KAAKyC,EAAImZ,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,GAG7Bjc,IACT,GAAC,CAAAiG,IAAA,QAAApG,MAED,WACE,OAAO,IAAIw5B,EAAWr5B,KAAKgP,EAAGhP,KAAKiP,EAAGjP,KAAKkP,EAAGlP,KAAKyC,EACrD,GACA,CAAAwD,IAAA,QAAApG,MAUA,SAAMqc,EAAQ/J,EAAGpT,QACA,IAAXA,IACFA,EAAS,IAAIs6B,GAGf,IAQIld,EACAC,EACAC,EACAC,EACAC,EAZEvC,EAAKha,KAAKgP,EACViL,EAAKja,KAAKiP,EACViL,EAAKla,KAAKkP,EACViL,EAAKna,KAAKyC,EACZ2X,EAAK8B,EAAOlN,EACZqL,EAAK6B,EAAOjN,EACZqL,EAAK4B,EAAOhN,EACZqL,EAAK2B,EAAOzZ,EAoChB,OA7BA2Z,EAAQpC,EAAKI,EAAKH,EAAKI,EAAKH,EAAKI,EAAKH,EAAKI,GAE/B,IACV6B,GAASA,EACThC,GAAMA,EACNC,GAAMA,EACNC,GAAMA,EACNC,GAAMA,GAIJ,EAAM6B,EAAQ,MAEhBD,EAAQ/H,KAAKmF,KAAK6C,GAClBC,EAAQjI,KAAK+E,IAAIgD,GACjBG,EAASlI,KAAK+E,KAAK,EAAMhH,GAAKgK,GAASE,EACvCE,EAASnI,KAAK+E,IAAIhH,EAAIgK,GAASE,IAI/BC,EAAS,EAAMnK,EACfoK,EAASpK,GAIXpT,EAAOiQ,EAAIsN,EAAStC,EAAKuC,EAASnC,EAClCrb,EAAOkQ,EAAIqN,EAASrC,EAAKsC,EAASlC,EAClCtb,EAAOmQ,EAAIoN,EAASpC,EAAKqC,EAASjC,EAClCvb,EAAO0D,EAAI6Z,EAASnC,EAAKoC,EAAShC,EAC3Bxb,CACT,GACA,CAAAkH,IAAA,YAAApG,MAKA,SAAU2c,EAAiBC,EAAIC,EAAe3d,QAC7B,IAAXA,IACFA,EAAS,IAAIs6B,GAGf,IAAMrf,EAAKwC,EAAgBxN,EAAI0N,EAAc1N,EACvCiL,EAAKuC,EAAgBvN,EAAIyN,EAAczN,EACvCiL,EAAKsC,EAAgBtN,EAAIwN,EAAcxN,EACvCkL,EAAKpa,KAAKgP,EACVqL,EAAKra,KAAKiP,EACVqL,EAAKta,KAAKkP,EACVqL,EAAKva,KAAKyC,EACVka,EAAe,GAALF,EAKhB,OAJA1d,EAAOiQ,GAAK2N,GAAW3C,EAAKO,EAAKN,EAAKK,EAAKJ,EAAKG,GAChDtb,EAAOkQ,GAAK0N,GAAW1C,EAAKM,EAAKL,EAAKE,EAAKJ,EAAKM,GAChDvb,EAAOmQ,GAAKyN,GAAWzC,EAAKK,EAAKP,EAAKK,EAAKJ,EAAKG,GAChDrb,EAAO0D,GAAKka,IAAY3C,EAAKI,EAAKH,EAAKI,EAAKH,EAAKI,GAC1Cvb,CACT,KAACs6B,CAAA,CArda,GAwdVC,GAAS,IAAIT,GACbU,GAAS,IAAIV,GAwCbW,GAAK,WAqCT,SAAAA,EAAYxxB,IAASU,EAAAA,EAAAA,GAAA,KAAA8wB,QACH,IAAZxxB,IACFA,EAAU,CAAC,GAGbhI,KAAKmQ,GAAKqpB,EAAM3c,YAChB7c,KAAK6B,KAAOmG,EAAQnG,MAAQ,EAC5B7B,KAAK8c,qBAAuB,EAC5B9c,KAAK+c,mBAAoB/U,EAAQ+U,mBAAoB/U,EAAQ+U,kBAC7D/c,KAAKgd,0BAAwD7b,IAAjC6G,EAAQgV,qBAAqChV,EAAQgV,qBAAuB,EACxGhd,KAAKid,yBAAsD9b,IAAhC6G,EAAQiV,oBAAoCjV,EAAQiV,qBAAuB,EACtGjd,KAAKkd,SAAWlV,EAAQkV,SAAWlV,EAAQkV,SAAW,KACtDld,KAAKwH,KAAO,IACd,CAkCC,OAjCDmD,EAAAA,EAAAA,GAAA6uB,EAAA,EAAAvzB,IAAA,6BAAApG,MAMA,WACE,KAAM,gEAANJ,OAAsEO,KAAK6B,KAC7E,GACA,CAAAoE,IAAA,SAAApG,MAKA,WACE,KAAM,2CAANJ,OAAiDO,KAAK6B,KACxD,GACA,CAAAoE,IAAA,wBAAApG,MAMA,SAAsBsd,EAAMpe,GAC1B,KAAM,0DAANU,OAAgEO,KAAK6B,KACvE,GACA,CAAAoE,IAAA,qBAAApG,MAKA,SAAmBud,EAAKrD,EAAMrD,EAAKC,GACjC,KAAM,uDAANlX,OAA6DO,KAAK6B,KACpE,KAAC23B,CAAA,CApFQ,GAuFXA,GAAM3c,UAAY,EAClB2c,GAAMnc,MA3Hc,CAElBC,OAAQ,EAGRC,MAAO,EAGPC,IAAK,EAGLC,SAAU,EAGVC,iBAAkB,GAGlBC,YAAa,GAGbC,SAAU,GAGVC,SAAU,IAGVC,QAAS,KAmGX,IAGM2b,GAAS,WAQb,SAAAA,EAAYzxB,IAASU,EAAAA,EAAAA,GAAA,KAAA+wB,QACH,IAAZzxB,IACFA,EAAU,CAAC,GAGbhI,KAAKyF,SAAW,IAAIozB,GACpB74B,KAAKkW,WAAa,IAAImjB,GAElBrxB,EAAQvC,UACVzF,KAAKyF,SAASxB,KAAK+D,EAAQvC,UAGzBuC,EAAQkO,YACVlW,KAAKkW,WAAWjS,KAAK+D,EAAQkO,WAEjC,CAsFC,OArFDvL,EAAAA,EAAAA,GAAA8uB,EAAA,EAAAxzB,IAAA,eAAApG,MAKA,SAAame,EAAYC,GACvB,OAAOwb,EAAUvb,kBAAkBle,KAAKyF,SAAUzF,KAAKkW,WAAY8H,EAAYC,EACjF,GACA,CAAAhY,IAAA,eAAApG,MAKA,SAAase,EAAYF,GACvB,OAAOwb,EAAUrb,kBAAkBpe,KAAKyF,SAAUzF,KAAKkW,WAAYiI,EAAYF,EACjF,GACA,CAAAhY,IAAA,qBAAApG,MAKA,SAAmBwe,EAAaJ,GAM9B,YALe,IAAXA,IACFA,EAAS,IAAI4a,IAGf74B,KAAKkW,WAAWI,MAAM+H,EAAaJ,GAC5BA,CACT,IACA,EAAAhY,IAAA,oBAAApG,MAKA,SAAyB4F,EAAUyQ,EAAY8H,EAAYC,GAQzD,YAPe,IAAXA,IACFA,EAAS,IAAI4a,IAGf7a,EAAWM,KAAK7Y,EAAUwY,GAC1B/H,EAAWsE,UAAUkf,IACrBA,GAAUpjB,MAAM2H,EAAQA,GACjBA,CACT,GACA,CAAAhY,IAAA,oBAAApG,MAKA,SAAyB4F,EAAUyQ,EAAYiI,EAAYF,GAOzD,YANe,IAAXA,IACFA,EAAS,IAAI4a,IAGf3iB,EAAWI,MAAM6H,EAAYF,GAC7BA,EAAOzH,KAAK/Q,EAAUwY,GACfA,CACT,GACA,CAAAhY,IAAA,qBAAApG,MAKA,SAA0BqW,EAAYmI,EAAaJ,GAMjD,YALe,IAAXA,IACFA,EAAS,IAAI4a,IAGf3iB,EAAWI,MAAM+H,EAAaJ,GACvBA,CACT,GACA,CAAAhY,IAAA,qBAAApG,MAKA,SAA0B4F,EAAUyQ,EAAYsI,EAAaP,GAQ3D,YAPe,IAAXA,IACFA,EAAS,IAAI4a,IAGf3iB,EAAWzT,IAAM,EACjByT,EAAWI,MAAMkI,EAAaP,GAC9B/H,EAAWzT,IAAM,EACVwb,CACT,KAACwb,CAAA,CA7GY,GAgHTC,GAAY,IAAIL,GACtB,IAAIR,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACH,IAAIA,GAAQ,IAAIA,GAAQ,IAAIA,GAAQ,IAAIA,GAAQ,IAAIA,GAAQ,IAAIA,GAAQ,IAAIA,GAAQ,IAAIA,GACzF,IAAIA,GACJ,IAAIQ,GACJ,IAAIH,GACJ,IAAIN,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIC,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GAEJ,IAAIA,GACJ,IAAIA,GACJ,IAAIQ,GACJ,IAAIR,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GAEJ,IAGMc,GAAa,WAwCjB,SAAAA,KAAcjxB,EAAAA,EAAAA,GAAA,KAAAixB,GACZ35B,KAAKwwB,aAAe,IAAIqI,GACxB74B,KAAKywB,WAAa,IAAIoI,GACtB74B,KAAK0wB,eAAiB,IAAImI,GAC1B74B,KAAK2wB,cAAgB,IAAIkI,GACzB74B,KAAK4wB,QAAS,EACd5wB,KAAKsnB,MAAQ,KACbtnB,KAAKwH,KAAO,KACZxH,KAAK6wB,cAAgB,EACrB7wB,KAAK8wB,UAAY,EACjB9wB,KAAK+wB,YAAa,CACpB,CAuCC,OAtCDpmB,EAAAA,EAAAA,GAAAgvB,EAAA,EAAA1zB,IAAA,QAAApG,MAKA,WACEG,KAAKwwB,aAAa5I,UAClB5nB,KAAKywB,WAAW7I,UAChB5nB,KAAK0wB,eAAe9I,UACpB5nB,KAAK2wB,cAAc/I,UACnB5nB,KAAK4wB,QAAS,EACd5wB,KAAKsnB,MAAQ,KACbtnB,KAAKwH,KAAO,KACZxH,KAAK6wB,cAAgB,EACrB7wB,KAAK8wB,UAAY,EACjB9wB,KAAK+wB,YAAa,CACpB,GACA,CAAA9qB,IAAA,QAAApG,MAKA,WACEG,KAAK+wB,YAAa,CACpB,GACA,CAAA9qB,IAAA,MAAApG,MAKA,SAAI2wB,EAAcC,EAAYC,EAAgBC,EAAerJ,EAAO9f,EAAMspB,GACxE9wB,KAAKwwB,aAAavsB,KAAKusB,GACvBxwB,KAAKywB,WAAWxsB,KAAKwsB,GACrBzwB,KAAK0wB,eAAezsB,KAAKysB,GACzB1wB,KAAK2wB,cAAc1sB,KAAK0sB,GACxB3wB,KAAKsnB,MAAQA,EACbtnB,KAAKwH,KAAOA,EACZxH,KAAK8wB,SAAWA,CAClB,KAAC6I,CAAA,CA1FgB,GAmGbC,GAEK,EAFLA,GAKC,EALDA,GAQC,EAiBDC,GAAG,SAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,GA8FP,SAAAP,EAAY3hB,EAAMuZ,IAAI/oB,EAAAA,EAAAA,GAAA,KAAAmxB,QACP,IAAT3hB,IACFA,EAAO,IAAI2gB,SAGF,IAAPpH,IACFA,EAAK,IAAIoH,IAGX74B,KAAKkY,KAAOA,EAAKkI,QACjBpgB,KAAKyxB,GAAKA,EAAGrR,QACbpgB,KAAKiY,UAAY,IAAI4gB,GACrB74B,KAAKsV,UAAY,KACjBtV,KAAK0xB,wBAAyB,EAC9B1xB,KAAK2xB,eAAgB,EACrB3xB,KAAKid,qBAAuB,EAC5Bjd,KAAKgd,sBAAwB,EAC7Bhd,KAAK4xB,KAAOiI,EAAIhI,IAChB7xB,KAAKie,OAAS,IAAI0b,GAClB35B,KAAK4wB,QAAS,EAEd5wB,KAAKgpB,SAAW,SAAA/K,GAAW,CAC7B,CAufC,OAtfDtT,EAAAA,EAAAA,GAAAkvB,EAAA,EAAA5zB,IAAA6zB,EAAAt1B,IAnDA,WACE,OAAOxE,KAAK8xB,gBACd,GAAC,CAAA7rB,IAAA8zB,EAAAv1B,IAED,WACE,OAAOxE,KAAK+xB,eACd,GAAC,CAAA9rB,IAAA+zB,EAAAx1B,IAED,WACE,OAAOxE,KAAKgyB,aACd,GAAC,CAAA/rB,IAAAg0B,EAAAz1B,IAED,WACE,OAAOxE,KAAKiyB,gBACd,GAAC,CAAAhsB,IAAAi0B,EAAA11B,IAED,WACE,OAAOxE,KAAKiyB,gBACd,GAAC,CAAAhsB,IAAAk0B,EAAA31B,IAED,WACE,OAAOxE,KAAKkyB,qBACd,GAAC,CAAAjsB,IAAAm0B,EAAA51B,IAED,WACE,OAAOxE,KAAKmyB,iBACd,GAAC,CAAAlsB,IAAA,iBAAApG,MA+BD,SAAe6pB,EAAO1hB,GAyBpB,OAxBAhI,KAAK4xB,KAAO5pB,EAAQ4pB,MAAQiI,EAAIhI,IAChC7xB,KAAKie,OAASjW,EAAQiW,QAAU,IAAI0b,GACpC35B,KAAK2xB,gBAAkB3pB,EAAQ2pB,cAC/B3xB,KAAKid,oBAA6D,qBAAhCjV,EAAQiV,oBAAsCjV,EAAQiV,qBAAuB,EAC/Gjd,KAAKgd,qBAA+D,qBAAjChV,EAAQgV,qBAAuChV,EAAQgV,sBAAwB,EAClHhd,KAAK0xB,uBAAmE,qBAAnC1pB,EAAQ0pB,wBAAyC1pB,EAAQ0pB,uBAE1F1pB,EAAQkQ,MACVlY,KAAKkY,KAAKjU,KAAK+D,EAAQkQ,MAGrBlQ,EAAQypB,IACVzxB,KAAKyxB,GAAGxtB,KAAK+D,EAAQypB,IAGvBzxB,KAAKgpB,SAAWhhB,EAAQghB,UAAa,WAAO,EAE5ChpB,KAAK4wB,QAAS,EACd5wB,KAAKie,OAAOmU,QACZpyB,KAAKqyB,kBACLryB,KAAKsyB,QAAQ+H,IACbC,GAAS/3B,OAAS,EAClBmnB,EAAM1gB,WAAWypB,UAAU/I,EAAO2Q,GAAWC,IAC7Ct6B,KAAK0yB,gBAAgB4H,IACdt6B,KAAK4wB,MACd,GACA,CAAA3qB,IAAA,gBAAApG,MAMA,SAAc2H,EAAMyW,GACdA,IACFje,KAAKie,OAASA,EACdje,KAAKqyB,mBAGP,IAAMX,EAAyB1xB,KAAK0xB,uBAEpC,KAAIA,GAA2BlqB,EAAKuV,oBAI2B,KAA1D/c,KAAKgd,qBAAuBxV,EAAKyV,sBAAyF,KAA1DzV,EAAKwV,qBAAuBhd,KAAKid,qBAOtG,IAHA,IAAM0V,EAAK4H,GACL1H,EAAK2H,GAEF52B,EAAI,EAAGmiB,EAAIve,EAAKyjB,OAAO1oB,OAAQqB,EAAImiB,EAAGniB,IAAK,CAClD,IAAM0jB,EAAQ9f,EAAKyjB,OAAOrnB,GAE1B,KAAI8tB,GAA2BpK,EAAMvK,qBAIrCvV,EAAK0O,WAAWyX,KAAKnmB,EAAK2jB,kBAAkBvnB,GAAIivB,GAChDrrB,EAAK0O,WAAWI,MAAM9O,EAAK0jB,aAAatnB,GAAI+uB,GAC5CA,EAAGnc,KAAKhP,EAAK/B,SAAUktB,GACvB3yB,KAAK+yB,eAAezL,EAAOuL,EAAIF,EAAInrB,GAE/BxH,KAAKie,OAAO8S,YACd,KAEJ,CACF,GACA,CAAA9qB,IAAA,kBAAApG,MAQA,SAAgBmzB,EAAQ/U,GAClBA,IACFje,KAAKie,OAASA,EACdje,KAAKqyB,mBAGP,IAAK,IAAIzuB,EAAI,EAAGwS,EAAI4c,EAAOzwB,QAASvC,KAAKie,OAAO8S,YAAcntB,EAAIwS,EAAGxS,IACnE5D,KAAKizB,cAAcD,EAAOpvB,GAE9B,GACA,CAAAqC,IAAA,kBAAApG,MAKA,WACEG,KAAKyxB,GAAGnT,KAAKte,KAAKkY,KAAMlY,KAAKiY,WAC7BjY,KAAKiY,UAAUqB,WACjB,GAAC,CAAArT,IAAA,iBAAApG,MAED,SAAeynB,EAAOvN,EAAMtU,EAAU+B,GACpC,IAEMspB,EAsbV,SAAkC5Y,EAAMD,EAAWxS,GAEjDA,EAAS6Y,KAAKpG,EAAMuiB,IACpB,IAAMjmB,EAAMimB,GAAGjmB,IAAIyD,GAEnBA,EAAU0O,MAAMnS,EAAKkmB,IACrBA,GAAUlkB,KAAK0B,EAAMwiB,IACrB,IAAM5J,EAAWrrB,EAAS2tB,WAAWsH,IACrC,OAAO5J,CACT,CA/bqB6J,CAFJ36B,KAAKkY,KAE8BlY,KAAKiY,UAAWxS,GAEhE,KAAIqrB,EAAWxJ,EAAMxK,sBAArB,CAIA,IAAMwW,EAAkBtzB,KAAKsnB,EAAMzlB,MAE/ByxB,GACFA,EAAgBl0B,KAAKY,KAAMsnB,EAAOvN,EAAMtU,EAAU+B,EAAM8f,EAL1D,CAOF,GAAC,CAAArhB,IAAA,gBAAApG,MAED,SAAc0zB,EAAKxZ,EAAMtU,EAAU+B,EAAMgsB,GACvC,OAAOxzB,KAAKiyB,iBAAiBsB,EAAIjL,+BAAgCvO,EAAMtU,EAAU+B,EAAMgsB,EACzF,GAAC,CAAAvtB,IAAA,kBAAApG,MAED,SAAgBynB,EAAOvN,EAAMtU,EAAU+B,EAAMgsB,GAC3C,IAAMtb,EAAOlY,KAAKkY,KACZuZ,EAAKzxB,KAAKyxB,GACVxZ,EAAYjY,KAAKiY,UAEjBwb,EAAc,IAAIoF,GAAK,EAAG,EAAG,GACnC9e,EAAKzD,MAAMmd,EAAaA,GACxB,IAAMtuB,EAAM,IAAI0zB,GAChB3gB,EAAKoG,KAAK7Y,EAAUN,GACpB,IAAMuuB,EAAcvuB,EAAIqP,IAAIif,GAI5B,GAHAhC,EAAGnT,KAAK7Y,EAAUN,KAGduuB,EAFcvuB,EAAIqP,IAAIif,GAEI,MAK1Bvb,EAAKkb,WAAW3B,GAAMiC,GAA1B,CAIA,IAAMC,EAAYF,EAAYjf,IAAIyD,GAElC,KAAI7D,KAAKgB,IAAIue,GAAa3zB,KAAKsV,WAA/B,CAKA,IAAMse,EAAmB,IAAIiF,GACvBhF,EAAoB,IAAIgF,GACxBlI,EAAgB,IAAIkI,GAC1B3gB,EAAKoG,KAAK7Y,EAAUmuB,GACpB,IAAMzhB,GAAKshB,EAAYjf,IAAIof,GAAoBD,EAC/C1b,EAAU0O,MAAMxU,EAAG0hB,GACnB3b,EAAK1B,KAAKqd,EAAmBlD,GAC7B3wB,KAAK8zB,mBAAmBL,EAAa9C,EAAe6C,EAAehsB,GAAO,EAT1E,CAPA,CAiBF,GACA,CAAAvB,IAAA,UAAApG,MAKA,SAAQ4W,GACN,IACEV,EAEEU,EAFFV,WACAC,EACES,EADFT,WAEIyb,EAAKzxB,KAAKyxB,GACVvZ,EAAOlY,KAAKkY,KAClBnC,EAAW/G,EAAIoF,KAAKsC,IAAI+a,EAAGziB,EAAGkJ,EAAKlJ,GACnC+G,EAAW9G,EAAImF,KAAKsC,IAAI+a,EAAGxiB,EAAGiJ,EAAKjJ,GACnC8G,EAAW7G,EAAIkF,KAAKsC,IAAI+a,EAAGviB,EAAGgJ,EAAKhJ,GACnC8G,EAAWhH,EAAIoF,KAAKuC,IAAI8a,EAAGziB,EAAGkJ,EAAKlJ,GACnCgH,EAAW/G,EAAImF,KAAKuC,IAAI8a,EAAGxiB,EAAGiJ,EAAKjJ,GACnC+G,EAAW9G,EAAIkF,KAAKuC,IAAI8a,EAAGviB,EAAGgJ,EAAKhJ,EACrC,GAAC,CAAAjJ,IAAA,wBAAApG,MAED,SAAsBynB,EAAOvN,EAAMtU,EAAU+B,EAAMgsB,GACjDlM,EAAM3a,KACN2a,EAAMyM,YAEN,IAAMC,EAAW4G,GAEjB5G,EAAS9b,KAAKjU,KAAKjE,KAAKkY,MACxB8b,EAASvC,GAAGxtB,KAAKjE,KAAKyxB,IACtBgI,GAAUvb,kBAAkBzY,EAAUsU,EAAMia,EAAS9b,KAAM8b,EAAS9b,MACpEuhB,GAAUvb,kBAAkBzY,EAAUsU,EAAMia,EAASvC,GAAIuC,EAASvC,IAClEuC,EAAS3B,kBAET,IACI6B,EACAC,EACAC,EACAC,EAJEzuB,EAAQi1B,GAMd3G,EAAQC,EAAQ,EAChBC,EAAQC,EAAQ/M,EAAM3a,KAAKpK,OAAS,EACpC,IAAMkU,EAAO,IAAIyiB,GACjBlF,EAAS1B,QAAQ7b,GACjB6Q,EAAMiN,mBAAmB9d,EAAKV,WAAW/G,EAAGyH,EAAKV,WAAW9G,EAAGrJ,GAAO,GACtEsuB,EAAQ9f,KAAKuC,IAAIud,EAAOtuB,EAAM,IAC9BuuB,EAAQ/f,KAAKuC,IAAIwd,EAAOvuB,EAAM,IAC9B0hB,EAAMiN,mBAAmB9d,EAAKT,WAAWhH,EAAGyH,EAAKT,WAAW/G,EAAGrJ,GAAO,GACtEwuB,EAAQhgB,KAAKsC,IAAI0d,EAAOxuB,EAAM,GAAK,GACnCyuB,EAAQjgB,KAAKsC,IAAI2d,EAAOzuB,EAAM,GAAK,GAEnC,IAAK,IAAIhC,EAAIswB,EAAOtwB,EAAIwwB,EAAOxwB,IAC7B,IAAK,IAAIyO,EAAI8hB,EAAO9hB,EAAIgiB,EAAOhiB,IAAK,CAClC,GAAIrS,KAAKie,OAAO8S,WACd,OAKF,GAFAzJ,EAAMkN,eAAe5wB,EAAGyO,EAAGoE,GAEtBA,EAAKge,YAAYT,GAAtB,CAUA,GALA1M,EAAMoN,wBAAwB9wB,EAAGyO,GAAG,GACpConB,GAAUrb,kBAAkB3Y,EAAUsU,EAAMuN,EAAMqN,aAAcmG,IAEhE96B,KAAKiyB,iBAAiB3K,EAAMuN,aAAc9a,EAAM+gB,GAAmBtzB,EAAMgsB,EAAeuH,IAEpF/6B,KAAKie,OAAO8S,WACd,OAIFzJ,EAAMoN,wBAAwB9wB,EAAGyO,GAAG,GACpConB,GAAUrb,kBAAkB3Y,EAAUsU,EAAMuN,EAAMqN,aAAcmG,IAEhE96B,KAAKiyB,iBAAiB3K,EAAMuN,aAAc9a,EAAM+gB,GAAmBtzB,EAAMgsB,EAAeuH,GAhBxF,CAiBF,CAEJ,GAAC,CAAA90B,IAAA,mBAAApG,MAED,SAAiBk1B,EAAQhb,EAAMtU,EAAU+B,EAAMgsB,GAC7C,IAAMtb,EAAOlY,KAAKkY,KACZuZ,EAAKzxB,KAAKyxB,GACVze,EAAI+hB,EAAO1H,OACXlW,EAAI/C,KAAA0F,IAAC2X,EAAGziB,EAAIkJ,EAAKlJ,EAAM,GAACoF,KAAA0F,IAAI2X,EAAGxiB,EAAIiJ,EAAKjJ,EAAM,GAACmF,KAAA0F,IAAI2X,EAAGviB,EAAIgJ,EAAKhJ,EAAM,GACrEkD,EAAI,IAAMqf,EAAGziB,EAAIkJ,EAAKlJ,IAAMkJ,EAAKlJ,EAAIvJ,EAASuJ,IAAMyiB,EAAGxiB,EAAIiJ,EAAKjJ,IAAMiJ,EAAKjJ,EAAIxJ,EAASwJ,IAAMwiB,EAAGviB,EAAIgJ,EAAKhJ,IAAMgJ,EAAKhJ,EAAIzJ,EAASyJ,IAClIkI,EAAIhD,KAAA0F,IAAC5B,EAAKlJ,EAAIvJ,EAASuJ,EAAM,GAACoF,KAAA0F,IAAI5B,EAAKjJ,EAAIxJ,EAASwJ,EAAM,GAACmF,KAAA0F,IAAI5B,EAAKhJ,EAAIzJ,EAASyJ,EAAM,GAACkF,KAAA0F,IAAG9G,EAAK,GAChGgiB,EAAQ5gB,KAAA0F,IAAA1H,EAAK,GAAI,EAAI+E,EAAIC,EACzB6d,EAAoB+F,GACpBhW,EAASiW,GAEf,KAAIjG,EAAQ,GAGL,GAAc,IAAVA,EAET9c,EAAK0N,KAAK6L,EAAIuD,EAAOC,GACrBA,EAAkB3W,KAAK7Y,EAAUuf,GACjCA,EAAO1L,YACPtZ,KAAK8zB,mBAAmB9O,EAAQiQ,EAAmBzB,EAAehsB,GAAO,OACpE,CACL,IAAM6b,IAAOjR,EAAIgC,KAAKC,KAAK2gB,KAAW,EAAI7d,GACpCie,IAAOhjB,EAAIgC,KAAKC,KAAK2gB,KAAW,EAAI7d,GAS1C,GAPIkM,GAAM,GAAKA,GAAM,IACnBnL,EAAK0N,KAAK6L,EAAIpO,EAAI4R,GAClBA,EAAkB3W,KAAK7Y,EAAUuf,GACjCA,EAAO1L,YACPtZ,KAAK8zB,mBAAmB9O,EAAQiQ,EAAmBzB,EAAehsB,GAAO,IAGvExH,KAAKie,OAAO8S,WACd,OAGEqE,GAAM,GAAKA,GAAM,IACnBld,EAAK0N,KAAK6L,EAAI2D,EAAIH,GAClBA,EAAkB3W,KAAK7Y,EAAUuf,GACjCA,EAAO1L,YACPtZ,KAAK8zB,mBAAmB9O,EAAQiQ,EAAmBzB,EAAehsB,GAAO,GAE7E,CACF,GAAC,CAAAvB,IAAA,mBAAApG,MAED,SAAiBynB,EAAOvN,EAAMtU,EAAU+B,EAAMgsB,EAAexrB,GAe3D,IAdA,IAAMgd,EAASkW,GACTxqB,EAASyqB,GACT5F,EAAWvtB,GAAWA,EAAQutB,UAAY,KAE1CtW,EAAQqI,EAAMrI,MACdF,EAAWuI,EAAMvI,SACjBI,EAAUmI,EAAMjI,YAChBpH,EAAYjY,KAAKiY,UACjBC,EAAOlY,KAAKkY,KACZuZ,EAAKzxB,KAAKyxB,GACV+D,EAAiBtd,EAAKkb,WAAW3B,GACjCgE,EAASF,EAAWA,EAAShzB,OAAS0c,EAAM1c,OAC5C0b,EAASje,KAAKie,OAEX5L,EAAI,GAAI4L,EAAO8S,YAAc1e,EAAIojB,EAAQpjB,IAAK,CACrD,IAAMiQ,EAAKiT,EAAWA,EAASljB,GAAKA,EAC9B4N,EAAOhB,EAAMqD,GACboT,EAAavW,EAAQmD,GACrBpP,EAAI6G,EACJ/K,EAAIvJ,EAIViL,EAAOzM,KAAK8a,EAASkB,EAAK,KAC1B/M,EAAEoD,MAAM5F,EAAQA,GAChBA,EAAO8F,KAAKxH,EAAG0B,GAEfA,EAAO4N,KAAKpG,EAAMxH,GAElBwC,EAAEoD,MAAMof,EAAY1Q,GAEpB,IAAMxQ,EAAMyD,EAAUzD,IAAIwQ,GAE1B,KAAI5Q,KAAKgB,IAAIZ,GAAOxU,KAAKsV,WAAzB,CAKA,IAAMV,EAASoQ,EAAOxQ,IAAI9D,GAAU8D,EAEpC,KAAII,EAAS,GAAb,CAMAqD,EAAU0O,MAAM/R,EAAQwmB,IACxBA,GAAe5kB,KAAK0B,EAAMkjB,IAE1BjkB,GAAElT,KAAK8a,EAASkB,EAAK,KACrB/M,EAAEoD,MAAMa,GAAGA,IACXnI,EAAEwH,KAAKW,GAAGA,IAEV,IAAK,IAAIvT,EAAI,GAAIqa,EAAO8S,YAAcntB,EAAIqc,EAAK1d,OAAS,EAAGqB,IAAK,CAE9DwO,GAAEnO,KAAK8a,EAASkB,EAAKrc,KACrBwT,GAAEnT,KAAK8a,EAASkB,EAAKrc,EAAI,KACzBsP,EAAEoD,MAAMlE,GAAGA,IACXc,EAAEoD,MAAMc,GAAGA,IACXpI,EAAEwH,KAAKpE,GAAGA,IACVpD,EAAEwH,KAAKY,GAAGA,IACV,IAAM0Z,EAAWsK,GAAehI,WAAWlb,IAErC2hB,EAAI9D,gBAAgBqF,GAAgBjkB,GAAG/E,GAAGgF,MAAMyiB,EAAI9D,gBAAgBqF,GAAgBhpB,GAAG+E,GAAGC,KAAO0Z,EAAW0E,GAIlHx1B,KAAK8zB,mBAAmB9O,EAAQoW,GAAgB5H,EAAehsB,EAAM8a,EACvE,CA1BA,CAPA,CAmCF,CACF,GACA,CAAArc,IAAA,oBAAApG,MAMA,SAAkBm2B,EAAMjc,EAAMtU,EAAU+B,EAAMgsB,EAAexrB,GAC3D,IAAMgd,EAASqW,GACTnF,EAAYoF,GACZlF,EAAgBmF,GAChB7qB,EAASyqB,GACT7E,EAAiBkF,GACjBhF,EAAYiF,GACZ/E,EAAUgF,GACV9E,EAAsB+E,GACtBlI,EAAcmI,GAEd7E,EAAUf,EAAKe,QACrBf,EAAKjX,SAEL,IAAM7G,EAAOlY,KAAKkY,KACZuZ,EAAKzxB,KAAKyxB,GACVxZ,EAAYjY,KAAKiY,UACvBme,EAAc3wB,SAASxB,KAAKwB,GAC5B2wB,EAAclgB,WAAWjS,KAAK8V,GAE9B0f,GAAU5R,mBAAmBpiB,EAAUsU,EAAM9B,EAAWqe,GACxDmD,GAAUvb,kBAAkBzY,EAAUsU,EAAM7B,EAAMse,GAClDiD,GAAUvb,kBAAkBzY,EAAUsU,EAAM0X,EAAIiF,GAChDA,EAAQ1nB,GAAKgnB,EAAKrP,MAAM3X,EACxB0nB,EAAQznB,GAAK+mB,EAAKrP,MAAM1X,EACxBynB,EAAQxnB,GAAK8mB,EAAKrP,MAAMzX,EACxBsnB,EAAUxnB,GAAKgnB,EAAKrP,MAAM3X,EAC1BwnB,EAAUvnB,GAAK+mB,EAAKrP,MAAM1X,EAC1BunB,EAAUtnB,GAAK8mB,EAAKrP,MAAMzX,EAC1BwnB,EAAQpY,KAAKkY,EAAWF,GACxBA,EAAehd,YACf,IAAM0d,EAAwBR,EAAUS,gBAAgBP,GACxDV,EAAKkB,KAAKC,SAASn3B,KAAMo2B,EAAeF,GAExC,IAAK,IAAItyB,EAAI,EAAGmiB,EAAImQ,EAAU3zB,QAASvC,KAAKie,OAAO8S,YAAcntB,IAAMmiB,EAAGniB,IAAK,CAC7E,IAAMwzB,EAAiBlB,EAAUtyB,GACjCoyB,EAAKqB,UAAUD,EAAgBpS,GAI/BgR,EAAKsB,UAAUP,EAAyB,EAAjBK,GAAqBjgB,IAE5CA,GAAEmH,KAAKkY,EAAW9lB,GAElB,IAAM8D,EAAM8hB,EAAe9hB,IAAIwQ,GAMzBpQ,EAASoQ,EAAOxQ,IAAI9D,GAAU8D,EAEpC,KAAII,EAAS,GAAb,CAKA0hB,EAAe3P,MAAM/R,EAAQwmB,IAC7BA,GAAe5kB,KAAKggB,EAAW4E,IAE/BpF,EAAKsB,UAAUP,EAAyB,EAAjBK,EAAqB,GAAIhlB,IAChD4jB,EAAKsB,UAAUP,EAAyB,EAAjBK,EAAqB,GAAIhgB,IAChD,IAAMmgB,EAAkB6D,GAAenE,gBAAgBT,IAEjDqD,EAAI9D,gBAAgBqF,GAAgBhpB,GAAG+E,GAAGC,MAAMyiB,EAAI9D,gBAAgBqF,GAAgBjkB,GAAG/E,GAAGgF,KAAOmgB,EAAkBP,IAKzHyC,GAAU3K,mBAAmB/U,EAAMiL,EAAQyO,GAC3CgG,GAAUrb,kBAAkB3Y,EAAUsU,EAAMqhB,GAAgBxE,GAC5D52B,KAAK8zB,mBAAmBL,EAAamD,EAAqBpD,EAAehsB,EAAM4vB,GAjB/E,CAkBF,CAEAlB,EAAU3zB,OAAS,CACrB,GACA,CAAA0D,IAAA,qBAAApG,MAKA,SAAmBmlB,EAAQ2L,EAAerJ,EAAO9f,EAAMqpB,GACrD,IAAM3Y,EAAOlY,KAAKkY,KACZuZ,EAAKzxB,KAAKyxB,GACVX,EAAW5Y,EAAKkb,WAAWzC,GAC3B1S,EAASje,KAAKie,OAEpB,KAAIje,KAAK2xB,eAAiB3M,EAAOxQ,IAAIxU,KAAKiY,WAAa,GAMvD,OAFAgG,EAAO4S,aAAuC,qBAAjBA,EAA+BA,GAAgB,EAEpE7wB,KAAK4xB,MACX,KAAKiI,EAAIrC,IACPx3B,KAAK4wB,QAAS,EACd3S,EAAOxZ,IAAIyT,EAAMuZ,EAAIzM,EAAQ2L,EAAerJ,EAAO9f,EAAMspB,GACzD7S,EAAO2S,QAAS,EAChB5wB,KAAKgpB,SAAS/K,GACd,MAEF,KAAK4b,EAAIpC,SAEH3G,EAAW7S,EAAO6S,WAAa7S,EAAO2S,UACxC5wB,KAAK4wB,QAAS,EACd3S,EAAO2S,QAAS,EAChB3S,EAAOxZ,IAAIyT,EAAMuZ,EAAIzM,EAAQ2L,EAAerJ,EAAO9f,EAAMspB,IAG3D,MAEF,KAAK+I,EAAIhI,IAEP7xB,KAAK4wB,QAAS,EACd3S,EAAO2S,QAAS,EAChB3S,EAAOxZ,IAAIyT,EAAMuZ,EAAIzM,EAAQ2L,EAAerJ,EAAO9f,EAAMspB,GACzD7S,EAAO8S,YAAa,EAG1B,IACA,EAAA9qB,IAAA,kBAAApG,MAMA,SAAuB4S,EAAG0E,EAAG/E,EAAGgF,GAC9BA,EAAEkH,KAAKnH,EAAGsjB,IACVroB,EAAEkM,KAAKnH,EAAG0kB,IACVppB,EAAE6L,KAAKnH,EAAG2kB,IACV,IAKIzlB,EACAzF,EANEgnB,EAAQ6C,GAAGjmB,IAAIimB,IACf5C,EAAQ4C,GAAGjmB,IAAIqnB,IACf/D,EAAQ2C,GAAGjmB,IAAIsnB,IACf/D,EAAQ8D,GAAGrnB,IAAIqnB,IACf7D,EAAQ6D,GAAGrnB,IAAIsnB,IAGrB,OAAQzlB,EAAI0hB,EAAQD,EAAQD,EAAQG,IAAU,IAAMpnB,EAAIgnB,EAAQI,EAAQH,EAAQC,IAAU,GAAKzhB,EAAIzF,EAAIgnB,EAAQG,EAAQF,EAAQA,CACjI,KAACgC,CAAA,CA3mBM,CAXaL,GAAMnc,MAAMC,OACbkc,GAAMnc,MAAME,MACdic,GAAMnc,MAAMG,IACPgc,GAAMnc,MAAMQ,SACZ2b,GAAMnc,MAAMK,iBACZ8b,GAAMnc,MAAMM,YACb6b,GAAMnc,MAAMS,SAmnBnC+b,GAAIpC,QAAUmC,GACdC,GAAIhI,IAAM+H,GACVC,GAAIrC,IAAMoC,GACV,IAAMS,GAAY,IAAInB,GAChBoB,GAAW,GACXuB,GAAK,IAAIhD,GACTiD,GAAK,IAAIjD,GACT0B,GAAmB,IAAI1B,GACvB2B,GAAmB,IAAInB,GACvB+B,GAAiB,IAAIvC,GACrB1hB,GAAI,IAAI0hB,GACRzmB,GAAI,IAAIymB,GACRzhB,GAAI,IAAIyhB,GACd,IAAIA,GACJ,IAAIc,GACJ,IAAMoB,GAAyB,CAC7BxF,SAAU,CAAC,IAEPuF,GAAoB,IAAIjC,GACxB+B,GAAgC,IAAIf,GACpCgB,GAA6B,GAC7BG,GAAwC,IAAInC,GAC5CoC,GAA6B,IAAIpC,GACjCqC,GAAyB,IAAIrC,GACnC,IAAIA,GACJ,IAAIA,GACJ,IAAMsC,GAAyB,IAAItC,GAC7BwC,GAA0B,IAAIxC,GAC9B2C,GAAkC,IAAI3C,GACtC4C,GAA6B,IAAI5C,GACjC6C,GAA2B,IAAI7C,GAC/B+C,GAA+B,IAAI/C,GACnC8C,GAAuC,IAAI9C,GACjD,IAAIK,GACJ,IAAMoC,GAA6B,GAC7BC,GAAiC,IAAI9B,GACrCgB,GAAK,IAAI5B,GACT6B,GAAY,IAAI7B,GAYtB,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GAEJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIgB,GACJ,IAAIhB,GACJ,IAAIA,GACJ,IAAIA,GACH,IAAIA,GAAK,EAAG,EAAG,GAAI,IAAIA,GAAK,EAAG,EAAG,GAAI,IAAIA,GAAK,EAAG,EAAG,GACtD,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GAEJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GAEJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GAEJ,IAAIA,GAEJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIK,GACJ,IAAIL,GACJ,IAAIK,GACJ,IAAIL,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIK,GACJ,IAAIL,GACJ,IAAIY,GACJ,IAAIP,GAOYM,GAAMnc,MAAMC,OACbkc,GAAMnc,MAAMC,OAASkc,GAAMnc,MAAME,MACtCic,GAAMnc,MAAMG,IAAMgc,GAAMnc,MAAMG,IAC3Bgc,GAAMnc,MAAMC,OAASkc,GAAMnc,MAAMG,IAClCgc,GAAMnc,MAAME,MAAQic,GAAMnc,MAAMG,IAC5Bgc,GAAMnc,MAAMK,iBACZ8b,GAAMnc,MAAMC,OAASkc,GAAMnc,MAAMK,iBAClC8b,GAAMnc,MAAME,MAAQic,GAAMnc,MAAMK,iBAClC8b,GAAMnc,MAAMG,IAAMgc,GAAMnc,MAAMK,iBACtB8b,GAAMnc,MAAMC,OAASkc,GAAMnc,MAAMM,YACpC6b,GAAMnc,MAAMG,IAAMgc,GAAMnc,MAAMM,YAC3B6b,GAAMnc,MAAMK,iBAAmB8b,GAAMnc,MAAMM,YAC9C6b,GAAMnc,MAAMO,SAAW4b,GAAMnc,MAAMC,OACpCkc,GAAMnc,MAAME,MAAQic,GAAMnc,MAAMO,SAClC4b,GAAMnc,MAAMG,IAAMgc,GAAMnc,MAAMO,SAC3B4b,GAAMnc,MAAMO,SAAW4b,GAAMnc,MAAMK,iBACjC8b,GAAMnc,MAAMQ,SACd2b,GAAMnc,MAAMC,OAASkc,GAAMnc,MAAMQ,SAClC2b,GAAMnc,MAAME,MAAQic,GAAMnc,MAAMQ,SAClC2b,GAAMnc,MAAMG,IAAMgc,GAAMnc,MAAMQ,SAC3B2b,GAAMnc,MAAMK,iBAAmB8b,GAAMnc,MAAMQ,SACtC2b,GAAMnc,MAAMM,YAAc6b,GAAMnc,MAAMQ,SACzC2b,GAAMnc,MAAMO,SAAW4b,GAAMnc,MAAMQ,SACtC2b,GAAMnc,MAAMC,OAASkc,GAAMnc,MAAMS,QAClC0b,GAAMnc,MAAME,MAAQic,GAAMnc,MAAMS,QAEhD,IAAI+a,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIQ,GACJ,IAAIA,GAEJ,IAAIR,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIK,GACJ,IAAIL,GACJ,IAAIA,GAEJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GAEJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACH,IAAIA,GAAQ,IAAIA,GAAQ,IAAIA,GAAQ,IAAIA,GAAQ,IAAIA,GAAQ,IAAIA,GACjE,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GAEJ,IAAIQ,GACJ,IAAIR,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GAEJ,IAAIK,GACJ,IAAIW,GAEJ,IAAMvB,GAAcD,WAAWC,aAAe,CAAC,EAE/C,IAAKA,GAAYC,IAAK,CACpB,IAAIC,GAAYC,KAAKF,MAEjBD,GAAYI,QAAUJ,GAAYI,OAAOC,kBAC3CH,GAAYF,GAAYI,OAAOC,iBAGjCL,GAAYC,IAAM,kBAAME,KAAKF,MAAQC,EAAS,CAChD,CAEA,IAAIK,GA0SJ,IAAMkD,IAA4BC,EAAAA,EAAAA,eAAc,MAC1CC,GAAkB,WAAH,OAASC,EAAAA,EAAAA,YAAWH,GAAa,EAEhDI,IAA8BH,EAAAA,EAAAA,eAAc,MAC5CI,GAAoB,WACxB,IAAMl3B,GAAUg3B,EAAAA,EAAAA,YAAWC,IAC3B,IAAKj3B,EAAS,MAAM,IAAIxC,MAAM,0GAC9B,OAAOwC,CACT,EAEY,IAAIm3B,EAAAA,WACJ,IAAIC,EAAAA,QAAQ,EAAG,EAAG,GAClB,IAAIA,EAAAA,QACJ,IAAIC,EAAAA,QAsEhB,IAAMvU,GAAO,IAAIwU,EAAAA,SAEjB,SAASC,GAAgBC,GACvB,IAAMC,GAAUC,EAAAA,EAAAA,QAAO,MACvB,OAAOF,GAAsB,oBAARA,EAAqBA,EAAMC,CAClD,CAEA,SAASE,GAAWC,GAClB,OAAOA,EAAIC,OAAO,GAAGC,cAAgBF,EAAIn8B,MAAM,EACjD,CAEA,SAASs8B,GAAQP,EAAK92B,GACpB,IAAMs3B,OAAmB/7B,IAAVyE,EAAsB,GAAK,IAAHnG,OAAOmG,GAC9C,MAAmB,oBAAR82B,EAA2B,KAC/BA,GAAOA,EAAIS,SAAW,GAAJ19B,OAAOi9B,EAAIS,QAAQnyB,MAAIvL,OAAGy9B,EACrD,CAEA,IAAMjwB,GAAI,IAAImwB,EAAAA,MACRC,GAAM,IAAIhB,EAAAA,WAEViB,GAAuB,SAAAtU,GAC3B,OAAO,SAAApY,GAAC,OAAIoY,EAAS/b,GAAEswB,kBAAkBF,GAAIG,UAAU5sB,IAAI6sB,UAAU,CACvE,EAEIC,GAAiB,EAErB,SAASC,GAAUjB,EAAKryB,EAAQuzB,EAAe/7B,EAAM+D,EAAO7G,GAK1D,YAJe,IAAXA,IACFA,EAAS,UAGJ,SAAAiqB,GACL,IAAM7Y,EAAKutB,KACXE,EAAcztB,IAAG0tB,EAAAA,EAAAA,GAAA,GACdh8B,EAAOmnB,GAEV,IAAMhe,EAAOiyB,GAAQP,EAAK92B,GAS1B,OARAoF,GAAQX,EAAOszB,UAAU,CACvB7yB,MAAO,CACLqF,GAAAA,EACApR,OAAAA,EACA8C,KAAAA,GAEFmJ,KAAAA,IAEK,kBACE4yB,EAAcztB,GACrB9F,EAAOyzB,YAAY,CACjBhzB,MAAOqF,GAEX,CACF,CACF,CAEA,SAAS4tB,GAAQC,EAAQx1B,GAAM,IAAAy1B,EAAAC,EAC7BC,EAII31B,EAHF/C,SAAAA,OAAQ,IAAA04B,EAAG,CAAC,EAAG,EAAG,GAAEA,EAAAC,EAGlB51B,EAFF61B,SAAAA,OAAQ,IAAAD,EAAG,CAAC,EAAG,EAAG,GAAEA,EAAAE,EAElB91B,EADF+1B,SAAAA,OAAQ,IAAAD,EAAG,CAAC,EAACA,EAEfN,EAAOO,SAAWA,GAClBN,EAAAD,EAAOv4B,UAAShB,IAAG3F,MAAAm/B,GAAAO,EAAAA,EAAAA,GAAI/4B,KACvBy4B,EAAAF,EAAOK,UAAS55B,IAAG3F,MAAAo/B,GAAAM,EAAAA,EAAAA,GAAIH,IACvBL,EAAOS,cACT,CAEA,SAASC,GAAejgC,EAAQsM,EAAOC,GACrC,IACE2zB,EAGE5zB,EAHF4zB,UACAC,EAEE7zB,EAFF6zB,eACAC,EACE9zB,EADF8zB,aAEFpgC,EAAOuM,GAAQ,CACb8zB,QAASH,EACTI,aAAcH,EACdI,WAAYH,EAEhB,CAEA,SAASI,GAAQp9B,EAAMq9B,EAAIC,EAAQC,EAAQC,QAC1B,IAAXD,IACFA,EAAS,WAGE,IAATC,IACFA,EAAO,IAGT,IAAM3C,EAAMD,GAAgB2C,GAC5BE,EAMIlD,KALF39B,EAAM6gC,EAAN7gC,OACA8gC,EAAID,EAAJC,KACAC,EAAcF,EAAdE,eACA5B,EAAa0B,EAAb1B,cACAvzB,EAAMi1B,EAANj1B,OAEIo1B,EAAWxD,MACjByD,EAAAA,EAAAA,kBAAgB,WACThD,EAAIS,UAIPT,EAAIS,QAAU,IAAIX,EAAAA,UAGpB,IAAMwB,EAAStB,EAAIS,QACbwC,EAAgBt1B,EAChBu1B,EAAc5B,aAAkB6B,EAAAA,eAAiB7B,EAAO8B,eAAeC,SAASC,EAAAA,kBAAmBhC,EAAOp7B,OAAS,EACnHoI,EAAOgzB,aAAkB6B,EAAAA,cAAgB,IAAIl8B,MAAMi8B,GAAaK,KAAK,GAAGC,KAAI,SAACC,EAAGv8B,GAAC,SAAAnE,OAAQu+B,EAAOhzB,KAAI,KAAAvL,OAAImE,EAAC,IAAM,CAACo6B,EAAOhzB,MACvHF,EAAQkzB,aAAkB6B,EAAAA,cAAgB70B,EAAKk1B,KAAI,SAAC/vB,EAAIvM,GAC5D,IAAMkH,EAAQo0B,EAAGt7B,GAOjB,OANAm6B,GAAQ/V,GAAMld,GACdkzB,EAAOoC,YAAYx8B,EAAGokB,GAAKnX,QAC3BmtB,EAAO8B,eAAeO,aAAc,EACpCd,EAAKpvB,GAAM6tB,EACC,MAAZyB,GAA4BA,EAAS3X,IAAI3X,EAAIrF,EAAOjJ,GACpD68B,GAAejgC,EAAQqM,EAAOqF,IAC9BmwB,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAYx1B,GAAK,IACf7L,KAAMkgC,EAAOr0B,EAAM7L,OAEvB,IAAK+L,EAAKk1B,KAAI,SAAC/vB,EAAIvM,GACjB,IAAMkH,EAAQo0B,EAAGt7B,GAKjB,OAJAm6B,GAAQC,EAAQlzB,GAChBy0B,EAAKpvB,GAAM6tB,EACC,MAAZyB,GAA4BA,EAAS3X,IAAI3X,EAAIrF,EAAOjJ,GACpD68B,GAAejgC,EAAQqM,EAAOqF,IAC9BmwB,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAYx1B,GAAK,IACf7L,KAAMkgC,EAAOr0B,EAAM7L,OAEvB,IAkBA,OAhBA0gC,EAAcY,UAAU,CACtBz1B,MAAOA,EAAMo1B,KAAI,SAAAj1B,GACf,IACE0zB,EAIE1zB,EAJF0zB,UAGG6B,GACDv1B,EAHF2zB,eAGE3zB,EAFF4zB,cACoB4B,EAAAA,EAAAA,GAClBx1B,EAAKy1B,IACT,OAAAJ,EAAAA,EAAAA,GAAA,CACE3B,UAAW1S,QAAQ0S,IAChB6B,EAEP,IACA3+B,KAAAA,EACAmJ,KAAAA,IAEK,WACLA,EAAK21B,SAAQ,SAAAxwB,UACJovB,EAAKpvB,GACA,MAAZsvB,GAA4BA,EAASmB,OAAOzwB,UACrC1R,EAAO0R,EAChB,IACAwvB,EAAckB,aAAa,CACzB71B,KAAAA,GAEJ,CACF,GAAGq0B,GACH,IAAMyB,GAAMC,EAAAA,EAAAA,UAAQ,WAClB,IAAMC,EAAa,SAACn/B,EAAM+D,GACxB,IAAMiF,EAAK,MAAHpL,OAASo9B,GAAWh7B,IAC5B,MAAO,CACL4C,IAAK,SAAA5E,GACH,IAAMmL,EAAOiyB,GAAQP,EAAK92B,GAC1BoF,GAAQX,EAAOQ,GAAI,CACjBC,MAAOjL,EACPmL,KAAAA,GAEJ,EACA2yB,UAAWA,GAAUjB,EAAKryB,EAAQuzB,EAAe/7B,EAAM+D,GAE3D,EAEMq7B,EAAiB,SAAAr7B,GAErB,MAAO,CACL3B,KAAM,SAAAsH,GACJ,IACE9I,EAIE8I,EAJF9I,EACAuM,EAGEzD,EAHFyD,EACAC,EAEE1D,EAFF0D,EACAC,EACE3D,EADF2D,EAEIlE,EAAOiyB,GAAQP,EAAK92B,GAC1BoF,GAAQX,EAAO62B,cAAc,CAC3Bp2B,MAAO,CAACkE,EAAGC,EAAGC,EAAGzM,GACjBuI,KAAAA,GAEJ,EACAvG,IAAK,SAACuK,EAAGC,EAAGC,EAAGzM,GACb,IAAMuI,EAAOiyB,GAAQP,EAAK92B,GAC1BoF,GAAQX,EAAO62B,cAAc,CAC3Bp2B,MAAO,CAACkE,EAAGC,EAAGC,EAAGzM,GACjBuI,KAAAA,GAEJ,EACA2yB,UAAWA,GAAUjB,EAAKryB,EAAQuzB,EAtBvB,aAsB4Ch4B,GAE3D,EAEMu7B,EAAe,SAAAv7B,GACnB,MAAO,CACL3B,KAAM,SAAAuH,GACJ,IACEwD,EAGExD,EAHFwD,EACAC,EAEEzD,EAFFyD,EACAC,EACE1D,EADF0D,EAEIlE,EAAOiyB,GAAQP,EAAK92B,GAC1BoF,GAAQX,EAAO+2B,YAAY,CACzBt2B,MAAO,CAACkE,EAAGC,EAAGC,GACdlE,KAAAA,GAEJ,EACAvG,IAAK,SAACuK,EAAGC,EAAGC,GACV,IAAMlE,EAAOiyB,GAAQP,EAAK92B,GAC1BoF,GAAQX,EAAO+2B,YAAY,CACzBt2B,MAAO,CAACkE,EAAGC,EAAGC,GACdlE,KAAAA,GAEJ,EACA2yB,UAAW,SAAA3U,GACT,IAAM7Y,EAAKutB,KAEL77B,EAAO,aACPmJ,EAAOiyB,GAAQP,EAAK92B,GAY1B,OAXAg4B,EAAcztB,IAAG0tB,EAAAA,EAAAA,GAAA,GACdh8B,EAAOy7B,GAAqBtU,IAE/Bhe,GAAQX,EAAOszB,UAAU,CACvB7yB,MAAO,CACLqF,GAAAA,EACApR,OATW,SAUX8C,KAAAA,GAEFmJ,KAAAA,IAEK,kBACE4yB,EAAcztB,GACrB9F,EAAOyzB,YAAY,CACjBhzB,MAAOqF,GAEX,CACF,EAEJ,EAEMkxB,EAAU,SAACx/B,EAAM+D,GACrB,IAAMiF,EAAK,MAAHpL,OAASo9B,GAAWh7B,IAC5B,MAAO,CACLoC,KAAM,SAAAwH,GACJ,IACEuD,EAGEvD,EAHFuD,EACAC,EAEExD,EAFFwD,EACAC,EACEzD,EADFyD,EAEIlE,EAAOiyB,GAAQP,EAAK92B,GAC1BoF,GAAQX,EAAOQ,GAAI,CACjBC,MAAO,CAACkE,EAAGC,EAAGC,GACdlE,KAAAA,GAEJ,EACAvG,IAAK,SAACuK,EAAGC,EAAGC,GACV,IAAMlE,EAAOiyB,GAAQP,EAAK92B,GAC1BoF,GAAQX,EAAOQ,GAAI,CACjBC,MAAO,CAACkE,EAAGC,EAAGC,GACdlE,KAAAA,GAEJ,EACA2yB,UAAWA,GAAUjB,EAAKryB,EAAQuzB,EAAe/7B,EAAM+D,GAE3D,EAEA,SAAS07B,EAAQ17B,GACf,MAAO,CACLgD,WAAYo4B,EAAW,aAAcp7B,GACrC+lB,eAAgBqV,EAAW,iBAAkBp7B,GAC7C8W,cAAe2kB,EAAQ,gBAAiBz7B,GACxC4W,gBAAiB6kB,EAAQ,kBAAmBz7B,GAE5CmpB,WAAU,SAAC9E,EAAOjM,GAChB,IAAMhT,EAAOiyB,GAAQP,EAAK92B,GAC1BoF,GAAQX,EAAO0kB,WAAW,CACxBjkB,MAAO,CAACmf,EAAOjM,GACfhT,KAAAA,GAEJ,EAEAykB,aAAY,SAACT,EAAShR,GACpB,IAAMhT,EAAOiyB,GAAQP,EAAK92B,GAC1BoF,GAAQX,EAAOolB,aAAa,CAC1B3kB,MAAO,CAACkkB,EAAShR,GACjBhT,KAAAA,GAEJ,EAEAu2B,gBAAe,SAACtX,EAAO9L,GACrB,IAAMnT,EAAOiyB,GAAQP,EAAK92B,GAC1BoF,GAAQX,EAAOk3B,gBAAgB,CAC7Bz2B,MAAO,CAACmf,EAAO9L,GACfnT,KAAAA,GAEJ,EAEAw2B,kBAAiB,SAACxS,EAAS7Q,GACzB,IAAMnT,EAAOiyB,GAAQP,EAAK92B,GAC1BoF,GAAQX,EAAOm3B,kBAAkB,CAC/B12B,MAAO,CAACkkB,EAAS7Q,GACjBnT,KAAAA,GAEJ,EAEAy2B,YAAW,SAAC7W,GACV,IAAM5f,EAAOiyB,GAAQP,EAAK92B,GAC1BoF,GAAQX,EAAOo3B,YAAY,CACzB32B,MAAO,CAAC8f,GACR5f,KAAAA,GAEJ,EAEAgS,qBAAsBgkB,EAAW,uBAAwBp7B,GACzDqX,oBAAqB+jB,EAAW,sBAAuBp7B,GACvDmX,kBAAmBikB,EAAW,oBAAqBp7B,GACnD8lB,cAAesV,EAAW,gBAAiBp7B,GAC3ComB,UAAWgV,EAAW,YAAap7B,GACnCukB,cAAe6W,EAAW,gBAAiBp7B,GAC3CgmB,aAAcyV,EAAQ,eAAgBz7B,GACtCuX,KAAM6jB,EAAW,OAAQp7B,GACzBsX,SAAU8jB,EAAW,WAAYp7B,GACjCH,SAAU47B,EAAQ,WAAYz7B,GAC9BsQ,WAAY+qB,EAAer7B,GAC3By4B,SAAU8C,EAAav7B,GAEvB87B,cAAa,SAAC/a,GACZ,IAAM3b,EAAOiyB,GAAQP,EAAK92B,GACtBoF,IAAMw0B,EAAex0B,IAAK22B,EAAAA,EAAAA,GAAOrF,EAAAA,SAAOkC,EAAAA,EAAAA,GAAI7X,IAClD,EAEAmG,MAAK,WACH,IAAM9hB,EAAOiyB,GAAQP,EAAK92B,GAC1BoF,GAAQX,EAAOyiB,MAAM,CACnB9hB,KAAAA,GAEJ,EAEAwf,gBAAiBwW,EAAW,kBAAmBp7B,GAC/C6kB,eAAgBuW,EAAW,iBAAkBp7B,GAC7C24B,SAAUyC,EAAW,WAAYp7B,GACjCmkB,SAAUsX,EAAQ,WAAYz7B,GAE9BinB,OAAM,WACJ,IAAM7hB,EAAOiyB,GAAQP,EAAK92B,GAC1BoF,GAAQX,EAAOwiB,OAAO,CACpB7hB,KAAAA,GAEJ,EAGJ,CAEA,IAAM42B,EAAQ,CAAC,EACf,OAAAtB,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAYgB,OAAQngC,IAAU,IAC5B0gC,GAAI,SAAAj8B,GAAK,OAAIg8B,EAAMh8B,KAAWg8B,EAAMh8B,GAAS07B,EAAQ17B,GAAO,GAEhE,GAAG,IACH,MAAO,CAAC82B,EAAKoE,EACf,CAMA,SAASgB,GAAS5C,EAAIE,EAAQC,GAC5B,OAAOJ,GAAQ,QAASC,GAAI,iBAAM,EAAE,GAAEE,EAAQC,EAChD,CACA,SAAS0C,GAAO7C,EAAIE,EAAQC,GAC1B,IAAM2C,EAAiB,CAAC,EAAG,EAAG,GAC9B,OAAO/C,GAAQ,MAAOC,GAAI,SAAUjgC,GAKlC,YAJa,IAATA,IACFA,EAAO+iC,GAGF/iC,CACT,GAAGmgC,EAAQC,EACb,CA0BA,SAAS4C,GAAW/C,EAAIE,EAAQC,GAC9B,OAAOJ,GAAQ,UAAWC,GAAI,SAAAjgC,GAAI,OAAIA,CAAI,GAAEmgC,EAAQC,EACtD,CAOA,SAAS6C,GAAgBhD,EAAIE,EAAQC,GACnC,OAAOJ,GAAQ,WAAYC,GAAI,SAAAjgC,GAAI,OAAIA,CAAI,GAAEmgC,EAAQC,EACvD,CA8OA,SAAS8C,GAASvxB,GAChB,MAAoB,kBAANA,CAChB,CAEA,SAASwxB,GAAkBlD,EAAIE,EAAQC,QACtB,IAAXD,IACFA,EAAS,WAGE,IAATC,IACFA,EAAO,IAGT,IAAM3C,EAAMD,GAAgB2C,GAC5BiD,EAGIjG,KAFF/xB,EAAMg4B,EAANh4B,OACAuzB,EAAayE,EAAbzE,eAEF8B,EAAAA,EAAAA,kBAAgB,WACThD,EAAIS,UAIPT,EAAIS,QAAU,IAAIX,EAAAA,UAGpB,IAAMmD,EAAgBt1B,EAChBW,EAAO0xB,EAAIS,QAAQnyB,KACzBs3B,EAOIpD,IANFqD,EAAWD,EAAXC,YAAWC,EAAAF,EACXx2B,iBAAAA,OAAgB,IAAA02B,EAAG,EAACA,EAAAC,EAAAH,EACpBv2B,eAAAA,OAAc,IAAA02B,EAAG,EAACA,EAAAC,EAAAJ,EAClBt2B,YAAAA,OAAW,IAAA02B,EAAG,EAACA,EACf72B,EAAUy2B,EAAVz2B,WACA82B,EAAML,EAANK,OAEIh3B,EAAkBsxB,GAAQsF,GAC1B32B,EAAa+2B,EAAOzC,KAAI,SAAAxD,GAAG,OAAIO,GAAQP,EAAI,IACjD,GAAK/wB,GAAoBC,EAAWg3B,MAAMT,IAK1C,OAJAxC,EAAckD,kBAAkB,CAC9B/3B,MAAO,CAACa,EAAiBC,EAAYC,EAAYC,EAAkBC,EAAgBC,GACnFhB,KAAAA,IAEK,WACL20B,EAAcmD,qBAAqB,CACjC93B,KAAAA,GAEJ,CACF,GAAGq0B,GACH,IAAMyB,GAAMC,EAAAA,EAAAA,UAAQ,WAClB,MAAO,CACLgC,iBAAgB,SAACljC,EAAOmjC,GACtB,IAAMh4B,EAAOiyB,GAAQP,GACrB1xB,GAAQX,EAAO44B,+BAA+B,CAC5Cn4B,MAAO,CAACjL,EAAOmjC,GACfh4B,KAAAA,GAEJ,EAEAk4B,SAAQ,SAACC,EAAOH,GACd,IAAMh4B,EAAOiyB,GAAQP,GACrB1xB,GAAQX,EAAO+4B,uBAAuB,CACpCt4B,MAAO,CAACq4B,EAAOH,GACfh4B,KAAAA,GAEJ,EAEAq4B,iBAAgB,SAACxjC,EAAOmjC,GACtB,IAAMh4B,EAAOiyB,GAAQP,GACrB1xB,GAAQX,EAAOi5B,+BAA+B,CAC5Cx4B,MAAO,CAACjL,EAAOmjC,GACfh4B,KAAAA,GAEJ,EAEAu4B,QAAS,CACP5F,UAAWA,GAAUjB,EAAKryB,EAAQuzB,EAAe,eAAWz8B,EAAW,aAG7E,GAAGk+B,GACH,MAAO,CAAC3C,EAAKoE,EACf,CAuBA,IAAMlwB,GAAI,IAAI0rB,EAAAA,QACRvvB,GAAI,IAAIuvB,EAAAA,QAAQ,EAAG,EAAG,GACtBppB,GAAI,IAAImpB,EAAAA,WACRt6B,GAAI,IAAIw6B,EAAAA,QAEd,SAASz9B,GAAM8G,EAAO4E,EAAWE,EAAaic,EAAOqX,GAKnD,YAJc,IAAVrX,IACFA,EAAQ5Z,SAGI5L,IAAVyE,GACF7D,GAAEyhC,QAAQ5yB,GAAE4sB,UAAUhzB,EAAmB,EAAR5E,GAAYsN,GAAEsqB,UAAU9yB,EAAqB,EAAR9E,GAAY+gB,GAE9EqX,IACFA,EAAOyF,kBAAmB,EAC1BzF,EAAOntB,OAAO5M,KAAKlC,KAGdA,IAGFA,GAAE2hC,UACX,CAEA,SAASC,GAAgBn7B,GACvB,IAAAo7B,EAoBIp7B,EAnBFI,WAAAA,OAAU,IAAAg7B,GAAQA,EAAAC,EAmBhBr7B,EAlBFM,UAAAA,OAAS,IAAA+6B,EAAG,EAACA,EAAAC,EAkBXt7B,EAjBFQ,WAAAA,OAAU,IAAA86B,EAAG,QAAOA,EACpBC,EAgBEv7B,EAhBFu7B,SAAQC,EAgBNx7B,EAfFU,uBAAAA,OAAsB,IAAA86B,EAAG,CACvB76B,yBAA0B,KAC3B66B,EAAAC,EAaCz7B,EAZFa,gBAAAA,OAAe,IAAA46B,EAAG,KAAIA,EAAAC,EAYpB17B,EAXFe,QAAAA,OAAO,IAAA26B,EAAG,CAAC,GAAI,KAAM,GAAEA,EAAAC,EAWrB37B,EAVF47B,SAAAA,OAAQ,IAAAD,GAAQA,EAAAE,EAUd77B,EATFiB,WAAAA,OAAU,IAAA46B,EAAG,EAACA,EAAAC,EASZ97B,EARF+7B,YAAAA,OAAW,IAAAD,EAAG,GAAEA,EAAAE,EAQdh8B,EAPFmB,kBAAAA,OAAiB,IAAA66B,GAAQA,EAAAC,EAOvBj8B,EANFqB,kBAAAA,OAAiB,IAAA46B,EAAG,EAACA,EAAAC,EAMnBl8B,EALFm8B,iBAAAA,OAAgB,IAAAD,GAAOA,EAAAE,EAKrBp8B,EAJFuB,KAAAA,OAAI,IAAA66B,EAAG,IAAIA,EAAAC,EAITr8B,EAHFyB,OAAAA,OAAM,IAAA46B,EAAG,KAAIA,EAAAC,EAGXt8B,EAFFu8B,SAAAA,OAAQ,IAAAD,EAAG,EAAI,GAAEA,EAAAE,EAEfx8B,EADF2B,UAAAA,OAAS,IAAA66B,EAAG,KAAKA,EAGjBC,GACEC,EAAAA,EAAAA,KADFD,WAEFE,GAOKC,EAAAA,EAAAA,WAAS,iBAAO,CACnBpS,OAAQ,CAAC,EACTv0B,OAAQ,CAAC,EACT8gC,KAAM,CAAC,EACPC,eAAgB,CAAC,EACjB5B,cAAe,CAAC,EAChBvzB,OAAQ,IAAIlC,EAAgB,CAC1BS,WAAAA,EACAE,UAAAA,EACAE,WAAAA,EACAE,uBAAAA,EACAG,gBAAAA,EACAE,QAAAA,EACAE,WAAAA,EACAE,kBAAAA,EACAE,kBAAAA,EACAE,KAAAA,EACAE,OAAAA,EACAE,UAAAA,IAEH,IAAEk7B,GAAAl6B,EAAAA,EAAAA,GAAAg6B,EAAA,MA1BDnS,EAAMqS,EAANrS,OACAv0B,EAAM4mC,EAAN5mC,OACA8gC,EAAI8F,EAAJ9F,KACAC,EAAc6F,EAAd7F,eACA5B,EAAayH,EAAbzH,cACAvzB,GAAMg7B,EAANh7B,OAsBEi7B,GAAsB,EACpBC,IAAOC,EAAAA,EAAAA,cAAY,SAACrF,EAAGnL,GACvBoP,IACJkB,IAAuBtQ,EACvB3qB,GAAOo7B,KAAK,CACVlB,YAAAA,EACAQ,SAAAA,EACAO,oBAAAA,KAEFA,GAAsB,EACxB,GAAG,CAAClB,EAAUG,EAAaQ,IAErBW,GAAiB,SAAA36B,GACrB,IAAI46B,EAGFn+B,EAQEuD,EARFvD,KAAIo+B,EAQF76B,EAPF86B,QACEC,EAAEF,EAAFE,GACAC,EAAEH,EAAFG,GACGC,GAAWvF,EAAAA,EAAAA,GAAAmF,EAAAK,GAEhBlnC,EAEEgM,EAFFhM,OACGmnC,GAAIzF,EAAAA,EAAAA,GACL11B,EAAKo7B,GACHhf,EAA0C,OAApCwe,EAAiBlnC,EAAOM,SAAmB,EAAS4mC,EAAe7G,QAC/E3X,GAAMA,GAAEmZ,EAAAA,EAAAA,GAAC,CACP94B,KAAM+3B,EAAK/3B,GACXq+B,SAAOvF,EAAAA,EAAAA,GAAA,CACLwF,GAAIvG,EAAKuG,GACTC,GAAIxG,EAAKwG,IACNC,GAELjnC,OAAQwgC,EAAKxgC,IACVmnC,GAEP,EAEME,GAAsB,SAAAn7B,GAC1B,IAAIo7B,EAAeC,EAGjBC,EAEEt7B,EAFFs7B,MACAC,EACEv7B,EADFu7B,MAEIC,EAAyC,OAAlCJ,EAAgB5nC,EAAO8nC,SAAkB,EAASF,EAActH,aAC7E0H,GAAOA,EAAI,CACTj/B,KAAM+3B,EAAKiH,GACX37B,GAAI,QACJ9L,OAAQwgC,EAAKgH,GACb1kC,KAAM,iBAER,IAAM6kC,EAAyC,OAAlCJ,EAAgB7nC,EAAO+nC,SAAkB,EAASF,EAAcvH,aAC7E2H,GAAOA,EAAI,CACTl/B,KAAM+3B,EAAKgH,GACX17B,GAAI,QACJ9L,OAAQwgC,EAAKiH,GACb3kC,KAAM,gBAEV,EAEM8kC,GAAoB,SAAAp7B,GACxB,IAAIq7B,EAAgBC,EAGlBN,EAEEh7B,EAFFg7B,MACAC,EACEj7B,EADFi7B,MAEIC,EAA0C,OAAnCG,EAAiBnoC,EAAO8nC,SAAkB,EAASK,EAAe5H,WAC/EyH,GAAOA,EAAI,CACTj/B,KAAM+3B,EAAKiH,GACX37B,GAAI,QACJ9L,OAAQwgC,EAAKgH,GACb1kC,KAAM,eAER,IAAM6kC,EAA0C,OAAnCG,EAAiBpoC,EAAO+nC,SAAkB,EAASK,EAAe7H,WAC/E0H,GAAOA,EAAI,CACTl/B,KAAM+3B,EAAKgH,GACX17B,GAAI,QACJ9L,OAAQwgC,EAAKiH,GACb3kC,KAAM,cAEV,EAEMilC,GAAe,SAAAt7B,GASnB,IARA,IACEu7B,EAKEv7B,EALFu7B,OAAMC,EAKJx7B,EAJFwnB,OAAQiU,OAAK,IAAAD,EAAG,GAAEA,EAClBE,EAGE17B,EAHF07B,aACA18B,EAEEgB,EAFFhB,UACAE,EACEc,EADFd,YAGO9G,EAAI,EAAGA,EAAIqjC,EAAM1kC,OAAQqB,IAChCovB,EAAOiU,EAAMrjC,IAAMA,EAWrB,GARAsjC,EAAavG,SAAQ,SAAAl1B,GACnB,IAAA07B,GAAAh8B,EAAAA,EAAAA,GAAwBM,EAAK,GAAxB0E,EAAEg3B,EAAA,GAAEtnC,EAAKsnC,EAAA,GAAEtlC,EAAIslC,EAAA,GAEdhgB,GADeyW,EAAcztB,IAAO,CAAC,GACnBtO,GAExBslB,GAAMA,EAAGtnB,EACX,IAEIknC,EAAQ,CACV,IAAK,IAALK,EAAA,EAAAC,EAAkB/nC,OAAOgoC,OAAO/H,GAAK6H,EAAAC,EAAA9kC,OAAA6kC,IAAE,CAAlC,IAAM1K,EAAG2K,EAAAD,GACZ,GAAI1K,aAAemD,EAAAA,cACjB,IAAK,IAAIj8B,EAAI,EAAGA,EAAI84B,EAAI95B,MAAOgB,IAAK,CAClC,IAAMoH,EAAO,GAAHvL,OAAMi9B,EAAI1xB,KAAI,KAAAvL,OAAImE,GACtBgC,EAAQotB,EAAOhoB,QAEP7J,IAAVyE,IACF82B,EAAI0D,YAAYx8B,EAAG9E,GAAM8G,EAAO4E,EAAWE,EAAa80B,EAAex0B,KACvE0xB,EAAIoD,eAAeO,aAAc,EAErC,KACK,CACL,IAAM1Z,EAAQ6Y,EAAe9C,EAAI1xB,OAAS0xB,EAAI/V,MAC9C7nB,GAAMk0B,EAAO0J,EAAI1xB,MAAOR,EAAWE,EAAaic,EAAO+V,EACzD,CACF,CAEIiI,GACFM,GAEJ,CACF,EAEMsC,GAAgB,SAAAt7B,GACpB,IAAIu7B,EAGFhgC,EAMEyE,EANFzE,KAAIigC,EAMFx7B,EALF+L,IACEhN,EAAIy8B,EAAJz8B,KACG08B,GAAOjH,EAAAA,EAAAA,GAAAgH,EAAAE,GAETzB,GAAIzF,EAAAA,EAAAA,GACLx0B,EAAK27B,GACHzgB,EAAsC,OAAhCqgB,EAAe/oC,EAAOuM,SAAiB,EAASw8B,EAAaK,OACzE1gB,GAAMA,GAAEmZ,EAAAA,EAAAA,GAAC,CACP94B,KAAMA,EAAO+3B,EAAK/3B,GAAQ,KAC1BwQ,KAAGsoB,EAAAA,EAAAA,GAAA,CACDt1B,KAAAA,GACG08B,IAEFxB,GAEP,GAIA4B,EAAAA,EAAAA,GAASvC,KACTwC,EAAAA,EAAAA,YAAU,WAQR,OAPA19B,GAAO29B,UACP39B,GAAOtK,OACPsK,GAAOrJ,GAAG,UAAW0kC,IACrBr7B,GAAOrJ,GAAG,eAAgBolC,IAC1B/7B,GAAOrJ,GAAG,aAAc2lC,IACxBt8B,GAAOrJ,GAAG,QAAS8lC,IACnBz8B,GAAOrJ,GAAG,SAAUumC,IACb,WACLl9B,GAAOgG,YACPhG,GAAOrE,oBACT,CACF,GAAG,KACH+hC,EAAAA,EAAAA,YAAU,WACR19B,GAAOvB,UAAYA,CACrB,GAAG,CAACA,KACJi/B,EAAAA,EAAAA,YAAU,WACR19B,GAAOrB,WAAaA,CACtB,GAAG,CAACA,KACJ++B,EAAAA,EAAAA,YAAU,WACR19B,GAAOd,QAAUA,CACnB,GAAG,CAACA,KACJw+B,EAAAA,EAAAA,YAAU,WACR19B,GAAOZ,WAAaA,CACtB,GAAG,CAACA,KACJs+B,EAAAA,EAAAA,YAAU,WACR19B,GAAOF,UAAYA,CACrB,GAAG,CAACA,IACJ,IAAMtK,IAAQkhC,EAAAA,EAAAA,UAAQ,iBAAO,CAC3B/N,OAAAA,EACAv0B,OAAAA,EACA8gC,KAAAA,EACAC,eAAAA,EACA5B,cAAAA,EACAvzB,OAAAA,GACD,GAAG,CAAC2oB,EAAQv0B,EAAQ8gC,EAAM3B,EAAevzB,KAC1C,OAAoB49B,EAAAA,EAAAA,KAAI9L,GAAe+L,SAAU,CAC/CroC,MAAOA,GACPkkC,SAAUA,GAEd,iMCxkYMoE,EAAU,SAAAC,IAAA//B,EAAAA,EAAAA,GAAA8/B,EAAAC,GAAA,IAAA9/B,GAAAC,EAAAA,EAAAA,GAAA4/B,GACd,SAAAA,EAAYE,GAAS,IAAA5/B,EAEO,OAFPC,EAAAA,EAAAA,GAAA,KAAAy/B,IACnB1/B,EAAAH,EAAAlJ,KAAA,KAAMipC,IACDxmC,KAAOymC,EAAAA,cAAc7/B,CAC5B,CAkPC,OAjPDkC,EAAAA,EAAAA,GAAAw9B,EAAA,EAAAliC,IAAA,QAAApG,MACA,SAAMuH,GACJ,IAAyHmhC,EAAa,SAASC,EAAiBC,GAC9J,OAAQD,GACN,KAF8C,EAG5C3lC,QAAQkC,MAAM,iCAAmC0jC,GAAO,KACxD,MACF,KALoE,EAMlE5lC,QAAQkC,MAAM,kCAAoC0jC,GAAO,KACzD,MACF,KAR2F,EASzF5lC,QAAQkC,MAAM,sCAAwC0jC,GAAO,KAC7D,MACF,QAEE5lC,QAAQkC,MAAM,6BAA+B0jC,GAAO,KAExD,OAf0B,CAgB5B,EAAiGC,EAAQ,SAASC,EAASC,EAAWC,GAEpID,EAAaA,GAAY,KAEzB,IADA,IAAIn2B,EAAIk2B,EAAQvrB,IAAKxZ,GAAK,EAAGuB,EAAM,EAAG4H,EAAI,GAAI+7B,EAAQnmC,OAAOuE,aAAapI,MAAM,KAAM,IAAIqI,YAAYwhC,EAAQI,SAASt2B,EAAGA,EAFxG,OAGX,GAAK7O,EAAIklC,EAAMvhC,QAJmE,QAI9CpC,EAAMyjC,GAAan2B,EAAIk2B,EAAQ34B,YACxEjD,GAAK+7B,EACL3jC,GAAO2jC,EAAMvmC,OACbkQ,GANgB,IAOhBq2B,GAASnmC,OAAOuE,aAAapI,MAAM,KAAM,IAAIqI,YAAYwhC,EAAQI,SAASt2B,EAAGA,EAP7D,OASlB,OAAK,EAAI7O,KACH,IAAUilC,IACZF,EAAQvrB,KAAOjY,EAAMvB,EAAI,GACpBmJ,EAAI+7B,EAAMnoC,MAAM,EAAGiD,GAG9B,EA4HMolC,EAAqB,SAASC,EAAaC,EAAcC,EAAWC,GACxE,IAAMn8B,EAAIg8B,EAAYC,EAAe,GAC/BviB,EAAQvS,KAAK0F,IAAI,EAAG7M,EAAI,KAAO,IACrCk8B,EAAUC,EAAa,GAAKH,EAAYC,EAAe,GAAKviB,EAC5DwiB,EAAUC,EAAa,GAAKH,EAAYC,EAAe,GAAKviB,EAC5DwiB,EAAUC,EAAa,GAAKH,EAAYC,EAAe,GAAKviB,EAC5DwiB,EAAUC,EAAa,GAAK,CAC9B,EACMC,EAAoB,SAASJ,EAAaC,EAAcC,EAAWC,GACvE,IAAMn8B,EAAIg8B,EAAYC,EAAe,GAC/BviB,EAAQvS,KAAK0F,IAAI,EAAG7M,EAAI,KAAO,IACrCk8B,EAAUC,EAAa,GAAKE,EAAAA,UAAUC,YAAYn1B,KAAKsC,IAAIuyB,EAAYC,EAAe,GAAKviB,EAAO,QAClGwiB,EAAUC,EAAa,GAAKE,EAAAA,UAAUC,YAAYn1B,KAAKsC,IAAIuyB,EAAYC,EAAe,GAAKviB,EAAO,QAClGwiB,EAAUC,EAAa,GAAKE,EAAAA,UAAUC,YAAYn1B,KAAKsC,IAAIuyB,EAAYC,EAAe,GAAKviB,EAAO,QAClGwiB,EAAUC,EAAa,GAAKE,EAAAA,UAAUC,YAAY,EACpD,EACMC,EAAY,IAAIxiC,WAAWI,GACjCoiC,EAAUpsB,IAAM,EAChB,IAAMqsB,EA9Ie,SAASd,GAC5B,IAWIe,EAAMC,EAX0BC,EAAW,oCAAqCC,EAAc,uCAAwCC,EAAY,uBAAwBC,EAAgB,oCAAqCC,EAAS,CAC1OC,MAAO,EACPC,OAAQ,GACRC,SAAU,GACVC,YAAa,OACbC,OAAQ,GACRC,MAAO,EACPC,SAAU,EACVC,MAAO,EACPC,OAAQ,GAGV,GAAI9B,EAAQvrB,KAAOurB,EAAQ34B,cAAgB05B,EAAOhB,EAAMC,IACtD,OAAOJ,EA9CuC,EA8CX,mBAErC,KAAMoB,EAAQD,EAAKC,MAfI,cAgBrB,OAAOpB,EAjDoF,EAiDtD,qBAKvC,IAHAyB,EAAOC,OAnCmB,EAoC1BD,EAAOI,YAAcT,EAAM,GAC3BK,EAAOE,QAAUR,EAAO,MAGlB,KADJA,EAAOhB,EAAMC,KAIb,GADAqB,EAAOE,QAAUR,EAAO,KACpB,MAAQA,EAAK3M,OAAO,IAmBxB,IAfI4M,EAAQD,EAAKC,MAAMC,MACrBI,EAAOM,MAAQI,WAAWf,EAAM,MAE9BA,EAAQD,EAAKC,MAAME,MACrBG,EAAOO,SAAWG,WAAWf,EAAM,MAEjCA,EAAQD,EAAKC,MAAMG,MACrBE,EAAOC,OAtDsC,EAuD7CD,EAAOK,OAASV,EAAM,KAEpBA,EAAQD,EAAKC,MAAMI,MACrBC,EAAOC,OA1DiE,EA2DxED,EAAOS,OAASE,SAAShB,EAAM,GAAI,IACnCK,EAAOQ,MAAQG,SAAShB,EAAM,GAAI,KA5DW,EA8D3CK,EAAOC,OA9D+D,EA8DlCD,EAAOC,MAC7C,WAnBAD,EAAOG,UAAYT,EAAO,KAqB9B,OAjEiD,EAiE3CM,EAAOC,MAjE+D,EAoEtED,EAAOC,MAGND,EAFEzB,EArFoF,EAqFtD,gCAH9BA,EAlFoF,EAkFtD,2BAMzC,CAsFyBqC,CAAgBpB,GACzC,IA/K4B,IA+KAC,EAAkB,CAC5C,IAAMhnC,EAAIgnC,EAAiBe,MAAOjzB,EAAIkyB,EAAiBgB,OAAQI,EAxFxC,SAASlC,EAASlmC,EAAG8U,GAC5C,IAAMuzB,EAAiBroC,EACvB,GAEEqoC,EAAiB,GAAKA,EAAiB,OACvC,IAAMnC,EAAQ,IAAM,IAAMA,EAAQ,IAAmB,IAAbA,EAAQ,GAEhD,OAAO,IAAI3hC,WAAW2hC,GAExB,GAAImC,KAAoBnC,EAAQ,IAAM,EAAIA,EAAQ,IAChD,OAAOJ,EAlGoF,EAkGtD,wBAEvC,IAAMwC,EAAY,IAAI/jC,WAAW,EAAIvE,EAAI8U,GACzC,IAAKwzB,EAAUxoC,OACb,OAAOgmC,EAtG2G,EAsG7E,mCAOvC,IALA,IAAI3hB,EAAS,EAAGxJ,EAAM,EAChB4tB,EAAU,EAAIF,EACdG,EAAY,IAAIjkC,WAAW,GAC3BkkC,EAAkB,IAAIlkC,WAAWgkC,GACnCG,EAAgB5zB,EACb4zB,EAAgB,GAAK/tB,EAAMurB,EAAQ34B,YAAY,CACpD,GAAIoN,EAAM,EAAIurB,EAAQ34B,WACpB,OAAOu4B,EA/GqC,GAqH9C,GAJA0C,EAAU,GAAKtC,EAAQvrB,KACvB6tB,EAAU,GAAKtC,EAAQvrB,KACvB6tB,EAAU,GAAKtC,EAAQvrB,KACvB6tB,EAAU,GAAKtC,EAAQvrB,KACnB,GAAK6tB,EAAU,IAAM,GAAKA,EAAU,KAAOA,EAAU,IAAM,EAAIA,EAAU,KAAOH,EAClF,OAAOvC,EAtHkF,EAsHpD,4BAGvC,IADA,IAAI6C,EAAM,EAAGxoC,OAAK,EACXwoC,EAAMJ,GAAW5tB,EAAMurB,EAAQ34B,YAAY,CAEhD,IAAMq7B,GADNzoC,EAAQ+lC,EAAQvrB,MACa,IAG7B,GAFIiuB,IACFzoC,GAAS,KACP,IAAMA,GAASwoC,EAAMxoC,EAAQooC,EAC/B,OAAOzC,EA/HgF,EA+HlD,qBAEvC,GAAI8C,EAEF,IADA,IAAMC,EAAY3C,EAAQvrB,KACjBxZ,EAAI,EAAGA,EAAIhB,EAAOgB,IACzBsnC,EAAgBE,KAASE,OAG3BJ,EAAgBzmC,IAAIkkC,EAAQI,SAAS3rB,EAAKA,EAAMxa,GAAQwoC,GACxDA,GAAOxoC,EACPwa,GAAOxa,CAEX,CAEA,IADA,IAAMwT,EAAI00B,EACDlnC,EAAI,EAAGA,EAAIwS,EAAGxS,IAAK,CAC1B,IAAImC,EAAM,EACVglC,EAAUnkB,GAAUskB,EAAgBtnC,EAAImC,GACxCA,GAAO+kC,EACPC,EAAUnkB,EAAS,GAAKskB,EAAgBtnC,EAAImC,GAC5CA,GAAO+kC,EACPC,EAAUnkB,EAAS,GAAKskB,EAAgBtnC,EAAImC,GAC5CA,GAAO+kC,EACPC,EAAUnkB,EAAS,GAAKskB,EAAgBtnC,EAAImC,GAC5C6gB,GAAU,CACZ,CACAukB,GACF,CACA,OAAOJ,CACT,CAqBmFQ,CAAoB/B,EAAUT,SAASS,EAAUpsB,KAAM3a,EAAG8U,GAC3I,IAjL0B,IAiLEszB,EAAiB,CAC3C,IAAIl+B,EAAM9K,EACN2pC,EACJ,OAAQxrC,KAAK6B,MACX,KAAK4pC,EAAAA,UACHD,EAAcX,EAAgBtoC,OAAS,EAEvC,IADA,IAAMmpC,EAAa,IAAIjhC,aAA2B,EAAd+gC,GAC3Bn5B,EAAI,EAAGA,EAAIm5B,EAAan5B,IAC/B22B,EAAmB6B,EAAqB,EAAJx4B,EAAOq5B,EAAgB,EAAJr5B,GAEzD1F,EAAO++B,EACP7pC,EAAO4pC,EAAAA,UACP,MACF,KAAKnD,EAAAA,cACHkD,EAAcX,EAAgBtoC,OAAS,EAEvC,IADA,IAAMopC,EAAY,IAAIxkC,YAA0B,EAAdqkC,GACzBn5B,EAAI,EAAGA,EAAIm5B,EAAan5B,IAC/Bg3B,EAAkBwB,EAAqB,EAAJx4B,EAAOs5B,EAAe,EAAJt5B,GAEvD1F,EAAOg/B,EACP9pC,EAAOymC,EAAAA,cACP,MACF,QACEzlC,QAAQkC,MAAM,uCAAwC/E,KAAK6B,MAG/D,MAAO,CACL2oC,MAAO/nC,EACPgoC,OAAQlzB,EACR5K,KAAAA,EACAq9B,OAAQP,EAAiBS,OACzBI,MAAOb,EAAiBa,MACxBC,SAAUd,EAAiBc,SAC3B1oC,KAAAA,EAEJ,CACF,CACA,OAAO,IACT,GAAC,CAAAoE,IAAA,cAAApG,MACD,SAAYA,GAEV,OADAG,KAAK6B,KAAOhC,EACLG,IACT,GAAC,CAAAiG,IAAA,OAAApG,MACD,SAAKkI,EAAK6jC,EAAQC,EAAYC,GAkB5B,OAAAC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA7D,EAAAhpC,WAAA,aAAAC,KAAA,KAAkB2I,GAjBlB,SAAwBkkC,EAASC,GAC/B,OAAQD,EAAQpqC,MACd,KAAK4pC,EAAAA,UACL,KAAKnD,EAAAA,cACC,eAAgB2D,EAClBA,EAAQE,WAAa,cAErBF,EAAQG,SAAW,IACrBH,EAAQI,UAAYC,EAAAA,aACpBL,EAAQM,UAAYD,EAAAA,aACpBL,EAAQO,iBAAkB,EAC1BP,EAAQQ,OAAQ,EAGhBb,GACFA,EAAOK,EAASC,EACpB,GACuCL,EAAYC,EACrD,KAAC3D,CAAA,CAtPa,CAASuE,EAAAA,mBCCnBC,EAAkB,SAAAC,IAAAvkC,EAAAA,EAAAA,GAAAskC,EAAAC,GAAA,IAAAtkC,GAAAC,EAAAA,EAAAA,GAAAokC,GACtB,SAAAA,EAAYV,EAASjkC,GACnB,IAAI6kC,EAAIC,GADoBpkC,EAAAA,EAAAA,GAAA,KAAAikC,GAE5B,IAJmBI,EAIbC,GAJaD,EAIad,IAJEc,EAAIE,cAMhCC,GADoG,OAA/FJ,EAAKE,EAAuC,OAA1BH,EAAKZ,EAAQkB,MAAM,SAAc,EAASN,EAAGrC,MAAQyB,EAAQkB,MAAM3C,OAAiBsC,EAAK,MACjG,EACfM,EAAUh5B,KAAKi5B,MAAMj5B,KAAKk5B,KAAKJ,IAC/BK,EAAYn5B,KAAK0F,IAAI,EAAGszB,GACxB5C,EAAQ,EAAIp2B,KAAKuC,IAAI42B,EAAW,KAChC9C,EAAS,EAAI8C,EAoBbC,EAnBU,CACdR,EAAY,2BAA6B,GAAE,8BAAAvtC,OACb,EAAI+qC,GAAK,+BAAA/qC,OACR,EAAIgrC,GAAM,0BAAAhrC,OACf2tC,EAAO,OAeJK,KAAK,MAAkB,2/EAAVhuC,OAsExBkrC,SAAS+C,EAAAA,SAASC,QAAQ,OAAQ,MAAQ,IAAM,sBAAwB,qBAAoB,0BAG1GC,EAAW,CACf1N,IAAK,CAAErgC,MAAOosC,GACdxB,OAAQ,CAAE5qC,OAAmB,MAAXmI,OAAkB,EAASA,EAAQyiC,SAAW,IAChEpd,OAAQ,CAAExtB,OAAmB,MAAXmI,OAAkB,EAASA,EAAQqlB,SAAW,MAE5DwgB,EAAW,IAAIC,EAAAA,oBAAoB,EAAG,IACtC5wB,EAAW,IAAI6wB,EAAAA,eAAe,CAClCH,SAAAA,EACAJ,eAAAA,EACAQ,aA9FU,gUA+FVC,KAAMC,EAAAA,aACL,OAAA5lC,EAAAlJ,KAAA,KACGyuC,EAAU3wB,EAClB,CASC,OATAvS,EAAAA,EAAAA,GAAAgiC,EAAA,EAAA1mC,IAAA,SAAAzB,IAID,WACE,OAAOxE,KAAKkd,SAAS0wB,SAASvgB,OAAOxtB,KACvC,EAAC4E,IALD,SAAW4oB,GACTrtB,KAAKkd,SAAS0wB,SAASvgB,OAAOxtB,MAAQwtB,CACxC,GAAC,CAAApnB,IAAA,SAAAzB,IAOD,WACE,OAAOxE,KAAKkd,SAAS0wB,SAASnD,OAAO5qC,KACvC,EAAC4E,IALD,SAAWgmC,GACTzqC,KAAKkd,SAAS0wB,SAASnD,OAAO5qC,MAAQ4qC,CACxC,KAACkC,CAAA,CA5HqB,CAASwB,EAAAA,MCF3BC,EAAa,CACjBC,OAAQ,8BACRC,KAAM,4BACNC,MAAO,mCACPC,UAAW,6CACXC,OAAQ,oCACRC,UAAW,yBACXC,OAAQ,wCACRC,KAAM,yCACNC,KAAM,8BACNC,MAAO,gECHHC,EAAe,6EAIfC,EAAe,SAAAC,GAAK,OAFZC,EAEsBD,GAFX9R,SAAW+R,EAAI/R,QAAQgS,QAEHF,EAAM9R,QAAU8R,EAF/C,IAAAC,CAEoD,EAElE,SAASE,EAAc5mC,GAIpB,IAHDymC,EAAKzmC,EAALymC,MAAKI,EAAA7mC,EACL8mC,WAAAA,OAAU,IAAAD,GAAQA,EAClBnP,EAAG13B,EAAH03B,IAEMqP,GAAerK,EAAAA,EAAAA,IAAS,SAAA/hC,GAAK,OAAIA,EAAM8rC,KAAK,IAclD,OAbAO,EAAAA,iBAAsB,WACpB,GAAItP,EAAK,CACP,IAAMnhC,EAASiwC,EAAaC,GAASM,GAC/BE,EAAQ1wC,EAAOuwC,WACfI,EAAS3wC,EAAO4wC,YAGtB,MAFmB,SAAfL,IAAuBvwC,EAAO4wC,YAAczP,GAC5CoP,IAAYvwC,EAAOuwC,WAAapP,GAC7B,WACc,SAAfoP,IAAuBvwC,EAAO4wC,YAAcD,GAC5CJ,IAAYvwC,EAAOuwC,WAAaG,EACtC,CACF,CACF,GAAG,CAACF,EAAcN,EAAO/O,EAAKoP,IACvB,IACT,CACA,SAASM,EAAc7kC,GAMpB,IAAA8kC,EAAA9kC,EALD+kC,MAAAA,OAAK,IAAAD,EAAG,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,WAAUA,EAAAE,EAAAhlC,EAC1EilC,KAAAA,OAAI,IAAAD,EAAG,GAAEA,EAAAE,EAAAllC,EACTmlC,OAAAA,OAAM,IAAAD,OAAG9uC,EAAS8uC,EAAAE,EAAAplC,EAClBqhC,SAAAA,OAAQ,IAAA+D,OAAGhvC,EAASgvC,EACpBC,EAAUrlC,EAAVqlC,WAEA,GAAIF,EAAQ,CACV,KAAMA,KAAU9B,GAAa,MAAM,IAAI1rC,MAAM,0BAA4BpD,OAAO4G,KAAKkoC,GAAYX,KAAK,OACtGqC,EAAQ1B,EAAW8B,GACnBF,EAAOjB,CACT,CAEA,IAAM/B,EAAYrpC,MAAM0sC,QAAQP,GAC1BQ,EAAStD,EAAYuD,EAAAA,kBAAoBpI,EACzCqI,GAAeC,EAAAA,EAAAA,GACrBH,EAAQtD,EAAY,CAAC8C,GAASA,GAAO,SAAAQ,GACnCA,EAAOI,QAAQV,GACXI,GAAYA,EAAWE,EAC7B,IACMrE,EAAUe,EAChBwD,EAAa,GAAKA,EAGlB,OAFAvE,EAAQ0E,QAAU3D,EAAY4D,EAAAA,sBAAwBC,EAAAA,iCACtD5E,EAAQG,UAAyB,OAAbA,QAAkC,IAAbA,EAAsBA,EAAWY,GAAa8D,EAAAA,aAAeC,EAAAA,eAC/F9E,CACT,CACA,SAAS+E,EAAe/lC,GAIrB,IAAAgmC,EAAAhmC,EAHDqkC,WAAAA,OAAU,IAAA2B,GAAQA,EAClBhC,EAAKhkC,EAALgkC,MAGMhD,EAAU2D,GAFTnP,EAAAA,EAAAA,GAAAx1B,EAAAimC,IAGD3B,GAAerK,EAAAA,EAAAA,IAAS,SAAA/hC,GAAK,OAAIA,EAAM8rC,KAAK,IAYlD,OAXAO,EAAAA,iBAAsB,WACpB,IAAMzwC,EAASiwC,EAAaC,GAASM,GAC/BE,EAAQ1wC,EAAOuwC,WACfI,EAAS3wC,EAAO4wC,YAGtB,MAFmB,SAAfL,IAAuBvwC,EAAO4wC,YAAc1D,GAC5CqD,IAAYvwC,EAAOuwC,WAAarD,GAC7B,WACc,SAAfqD,IAAuBvwC,EAAO4wC,YAAcD,GAC5CJ,IAAYvwC,EAAOuwC,WAAaG,EACtC,CACF,GAAG,CAACxD,EAASqD,EAAYL,EAAOM,IACzB,IACT,CACA,SAAS4B,EAAiB5lC,GAavB,IAZDw4B,EAAQx4B,EAARw4B,SAAQqN,EAAA7lC,EACR8lC,KAAAA,OAAI,IAAAD,EAAG,EAACA,EAAAE,EAAA/lC,EACRgmC,IAAAA,OAAG,IAAAD,EAAG,IAAIA,EAAAE,EAAAjmC,EACVkmC,WAAAA,OAAU,IAAAD,EAAG,IAAGA,EAAAE,EAAAnmC,EAChBomC,OAAAA,OAAM,IAAAD,EAAG,EAACA,EACVxR,EAAG30B,EAAH20B,IAAG0R,EAAArmC,EACH+jC,WAAAA,OAAU,IAAAsC,GAAQA,EAClB3C,EAAK1jC,EAAL0jC,MACAa,EAAKvkC,EAALukC,MACAE,EAAIzkC,EAAJykC,KAAI6B,EAAAtmC,EACJ2kC,OAAAA,OAAM,IAAA2B,OAAG1wC,EAAS0wC,EAClBzB,EAAU7kC,EAAV6kC,WAEM0B,GAAK5M,EAAAA,EAAAA,IAAS,SAAA/hC,GAAK,OAAIA,EAAM2uC,EAAE,IAC/BvC,GAAerK,EAAAA,EAAAA,IAAS,SAAA/hC,GAAK,OAAIA,EAAM8rC,KAAK,IAC5C8C,EAASvC,EAAAA,OAAa,MAC5BwC,EAAuBxC,EAAAA,UAAe,kBAAM,IAAIyC,EAAAA,KAAO,IAAhDC,GAAiD/mC,EAAAA,EAAAA,GAAA6mC,EAAA,GAArC,GACbG,EAAM3C,EAAAA,SAAc,WACxB,IAAM2C,EAAM,IAAIC,EAAAA,sBAAsBX,GAEtC,OADAU,EAAIlG,QAAQpqC,KAAOymC,EAAAA,cACZ6J,CACT,GAAG,CAACV,IACJjC,EAAAA,iBAAsB,WACL,IAAXmC,GAAcI,EAAO5U,QAAQkV,OAAOP,EAAII,GAC5C,IAAMnzC,EAASiwC,EAAaC,GAASM,GAC/BE,EAAQ1wC,EAAOuwC,WACfI,EAAS3wC,EAAO4wC,YAGtB,MAFmB,SAAfL,IAAuBvwC,EAAO4wC,YAAcwC,EAAIlG,SAChDqD,IAAYvwC,EAAOuwC,WAAa6C,EAAIlG,SACjC,WACc,SAAfqD,IAAuBvwC,EAAO4wC,YAAcD,GAC5CJ,IAAYvwC,EAAOuwC,WAAaG,EACtC,CACF,GAAG,CAAC1L,EAAUmO,EAAcC,EAAIlG,QAASgD,EAAOM,EAAcD,EAAYqC,EAAQG,IAClF,IAAIlvC,EAAQ,EAOZ,OANAklC,EAAAA,EAAAA,IAAS,YACH6J,IAAW/+B,KAAYhQ,EAAQ+uC,KACjCI,EAAO5U,QAAQkV,OAAOP,EAAII,GAC1BtvC,IAEJ,IACoB4sC,EAAAA,cAAoBA,EAAAA,SAAgB,MAAM8C,EAAAA,EAAAA,GAA2B9C,EAAAA,cAAoBA,EAAAA,SAAgB,KAAMzL,EAAuByL,EAAAA,cAAoB,aAAc,CAC1L9S,IAAKqV,EACL9yC,KAAM,CAACoyC,EAAME,EAAKY,KAChBrC,GAASI,EAAsBV,EAAAA,cAAoBwB,EAAiB,CACtE1B,YAAY,EACZQ,MAAOA,EACPI,OAAQA,EACRF,KAAMA,EACNI,WAAYA,IACTlQ,EAAmBsP,EAAAA,cAAoBJ,EAAgB,CAC1DE,YAAY,EACZpP,IAAKA,EACLkQ,WAAYA,IACT,MAAO8B,GACd,CAEA,SAASK,EAAkBznC,GACzB,IAAI0nC,EAAeC,EAAgBC,EAAQC,EAErCC,EAAiBhD,EAAe9kC,GAChCmhC,EAAUnhC,EAAMo1B,KAAO0S,EAC7BpD,EAAAA,SAAc,YACZ3hB,EAAAA,EAAAA,GAAO,CACLglB,uBAAwBlG,GAE5B,GAAG,IACH,IAAM1tC,EAAOuwC,EAAAA,SAAc,iBAAM,CAACvD,EAAQ,GAAE,CAACA,IACvCxB,EAA2C,OAAjC+H,EAAgB1nC,EAAMgoC,aAAkB,EAASN,EAAc/H,OACzEpd,EAA4C,OAAlColB,EAAiB3nC,EAAMgoC,aAAkB,EAASL,EAAeplB,OAC3E1G,EAA+F,QAAtF+rB,EAA4C,OAAlCC,EAAiB7nC,EAAMgoC,aAAkB,EAASH,EAAehsB,aAA8B,IAAX+rB,EAAoBA,EAAS,IAC1I,OAAoBlD,EAAAA,cAAoBA,EAAAA,SAAgB,KAAmBA,EAAAA,cAAoBJ,GAAgB2D,EAAAA,EAAAA,GAAS,CAAC,EAAGjoC,EAAO,CACjIo1B,IAAK+L,KACWuD,EAAAA,cAAoB,yBAA0B,CAC9DvwC,KAAMA,EACN0nB,MAAOA,EACP8jB,OAAQA,EACRpd,OAAQA,IAEZ,CAEA,SAAS2lB,EAAYloC,GACnB,OAAOA,EAAMgoC,OAAsBtD,EAAAA,cAAoB+C,EAAmBznC,GAASA,EAAMo1B,IAAmBsP,EAAAA,cAAoBJ,EAAgBtkC,GAASA,EAAMi5B,SAAwByL,EAAAA,cAAoB2B,EAAmBrmC,GAAsB0kC,EAAAA,cAAoBwB,EAAiBlmC,EAC3R,sLClKMmoC,EAAmB,SAAAC,IAAA7qC,EAAAA,EAAAA,GAAA4qC,EAAAC,GAAA,IAAA5qC,GAAAC,EAAAA,EAAAA,GAAA0qC,GACvB,SAAAA,IAAuC,IAAAxqC,EAA3B0qC,EAASvyC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAIwyC,EAAAA,QAiFgC,OAjFvB1qC,EAAAA,EAAAA,GAAA,KAAAuqC,IACnCxqC,EAAAH,EAAAlJ,KAAA,KAAM,CACJwuC,SAAU,CACRyF,YAAa,IAAIC,EAAAA,QAAQ,MACzBC,YAAa,IAAID,EAAAA,QAAQ,MACzB7B,WAAY,IAAI6B,EAAAA,QAAQ,IAAIF,EAAAA,SAC5BD,UAAW,IAAIG,EAAAA,QAAQ,IAAIF,EAAAA,SAC3BI,cAAe,IAAIF,EAAAA,QAAQ,IAAIF,EAAAA,SAC/BK,OAAQ,IAAIH,EAAAA,QAAQ,GACpB3sB,MAAO,IAAI2sB,EAAAA,QAAQ,GACnBI,WAAY,IAAIJ,EAAAA,QAAQ,GACxBK,UAAW,IAAIL,EAAAA,QAAQ,GACvBM,kBAAmB,IAAIN,EAAAA,QAAQ,GAC/BO,kBAAmB,IAAIP,EAAAA,QAAQ,GAC/BQ,WAAY,IAAIR,EAAAA,QAAQ,GACxBS,qBAAsB,IAAIT,EAAAA,QAAQ,MAEpC9F,eAAgB,s2CAoChBQ,aAAc,ksBAsBdgG,SAAUC,EAAAA,WACVC,YAAY,EACZC,WAAW,KAERC,YAAa,EAClB3rC,EAAK4rC,aAAalB,EAAUnkC,EAAGmkC,EAAUlkC,GACzCxG,EAAKgrC,OAAS,IAAIhpC,aAAa,CAAC,EAAK,EAAK,EAAK,EAAK,IAAMhC,CAC5D,CASC,OATAkC,EAAAA,EAAAA,GAAAsoC,EAAA,EAAAhtC,IAAA,eAAApG,MAED,SAAamP,EAAGC,GACdjP,KAAK4tC,SAASuF,UAAUtzC,MAAM4E,IAAIuK,EAAGC,GACrCjP,KAAK4tC,SAAS4F,cAAc3zC,MAAM4E,IAAIuK,EAAGC,GAAGqlC,eAAe,GAC7D,GAAC,CAAAruC,IAAA,gBAAApG,MAED,SAAc4xC,GACZzxC,KAAK4tC,SAAS6D,WAAW5xC,MAAMoE,KAAKwtC,EACtC,KAACwB,CAAA,CA5FsB,CAASlF,EAAAA,gBCC5BwG,EAAQ,WACZ,SAAAA,EAAA/rC,GASG,IARDspC,EAAEtpC,EAAFspC,GACAL,EAAUjpC,EAAVipC,WAAU+C,EAAAhsC,EACVgiC,MAAAA,OAAK,IAAAgK,EAAG,IAAGA,EAAAC,EAAAjsC,EACXiiC,OAAAA,OAAM,IAAAgK,EAAG,IAAGA,EAAAC,EAAAlsC,EACZorC,kBAAAA,OAAiB,IAAAc,EAAG,EAACA,EAAAC,EAAAnsC,EACrBqrC,kBAAAA,OAAiB,IAAAc,EAAG,EAACA,EAAAC,EAAApsC,EACrBsrC,WAAAA,OAAU,IAAAc,EAAG,EAACA,EAAAC,EAAArsC,EACdurC,qBAAAA,OAAoB,IAAAc,EAAG,IAAIA,GAAAnsC,EAAAA,EAAAA,GAAA,KAAA6rC,GAE3Bv0C,KAAK80C,gBAAiB,EACtB90C,KAAK+0C,cAAgB,IAAIC,EAAAA,kBAAkBvD,EAAYA,EAAY,CACjEpF,UAAWC,EAAAA,aACXC,UAAWD,EAAAA,aACX2I,eAAe,EACf1B,aAAa,EACbnH,SAAU0F,EAAGoD,iBAEfl1C,KAAKm1C,cAAgBn1C,KAAK+0C,cAAc30B,QACxCpgB,KAAKo1C,oBAAsB,IAAInC,EAC/BjzC,KAAKo1C,oBAAoBf,aAAa,EAAM7J,EAAO,EAAMC,GACzDzqC,KAAKo1C,oBAAoBC,cAAc,IAAIjC,EAAAA,QAAQ5I,EAAOC,IAC1DzqC,KAAKivC,MAAQ,IAAIgD,EAAAA,MACjBjyC,KAAK+xC,OAAS,IAAIuD,EAAAA,OAClBt1C,KAAKo1C,oBAAoBxH,SAASgG,kBAAkB/zC,MAAQ+zC,EAC5D5zC,KAAKo1C,oBAAoBxH,SAASiG,kBAAkBh0C,MAAQg0C,EAC5D7zC,KAAKo1C,oBAAoBxH,SAASkG,WAAWj0C,MAAQi0C,EACrD9zC,KAAKo1C,oBAAoBxH,SAASmG,qBAAqBl0C,MAAQk0C,EAC/D/zC,KAAKo1C,oBAAoBG,QAAQC,UAAY1B,EAAa,EAC1D,IAAM/0B,EAAW,IAAItU,aAAa,EAAE,GAAI,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,IACzDgrC,EAAM,IAAIhrC,aAAa,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,IACvCojC,EAAW,IAAI6H,EAAAA,eACrB7H,EAAS8H,aAAa,WAAY,IAAIC,EAAAA,gBAAgB72B,EAAU,IAChE8uB,EAAS8H,aAAa,KAAM,IAAIC,EAAAA,gBAAgBH,EAAK,IACrDz1C,KAAK61C,OAAS,IAAI1H,EAAAA,KAAKN,EAAU7tC,KAAKo1C,qBACtCp1C,KAAK61C,OAAOC,eAAgB,EAC5B91C,KAAKivC,MAAMnnB,IAAI9nB,KAAK61C,OACtB,CA6BC,OA7BAlrC,EAAAA,EAAAA,GAAA4pC,EAAA,EAAAtuC,IAAA,SAAApG,MAED,SAAOk2C,EAAU1C,EAAa2C,GAC5B,IAAM/G,EAAQjvC,KAAKivC,MACb8C,EAAS/xC,KAAK+xC,OACdgD,EAAgB/0C,KAAK+0C,cACrBI,EAAgBn1C,KAAKm1C,cACvBj4B,EAAWld,KAAKo1C,oBAChBxH,EAAW1wB,EAAS0wB,SACxBA,EAAS2F,YAAY1zC,MAAQwzC,EAAY4C,aACzC,IAEIC,EACAtyC,EAAGwS,EAHDq9B,EAASv2B,EAASu2B,OACpB0C,EAAS9C,EAIb,IAAKzvC,EAAI,EAAGwS,EAAIq9B,EAAOlxC,OAAS,EAAGqB,EAAIwS,IAAKxS,EAE1CsyC,EAAqB,KAAP,EAAJtyC,GAAemxC,EAAgBI,EACzCvH,EAAS6F,OAAO5zC,MAAQ4zC,EAAO7vC,GAC/BgqC,EAASyF,YAAYxzC,MAAQs2C,EAAOlK,QACpC8J,EAASK,gBAAgBF,GACzBH,EAASM,OAAOpH,EAAO8C,GACvBoE,EAASD,EAGXtI,EAAS6F,OAAO5zC,MAAQ4zC,EAAO7vC,GAC/BgqC,EAASyF,YAAYxzC,MAAQs2C,EAAOlK,QACpC8J,EAASK,gBAAgBp2C,KAAK80C,eAAiB,KAAOkB,GACtDD,EAASM,OAAOpH,EAAO8C,EACzB,KAACwC,CAAA,CAnEW,GCDR+B,EAAqB,SAAAC,IAAAluC,EAAAA,EAAAA,GAAAiuC,EAAAC,GAAA,IAAAjuC,GAAAC,EAAAA,EAAAA,GAAA+tC,GACzB,SAAAA,IAA6B,IAAA7tC,EAAjB+tC,EAAU51C,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,CAAC,EA+CG,OA/CF8H,EAAAA,EAAAA,GAAA,KAAA4tC,IACzB7tC,EAAAH,EAAAlJ,KAAA,KAAMo3C,IACDC,QAAU,CACb52C,MAAO,MAET4I,EAAKiuC,eAAiB,CACpB72C,MAAO,MAET4I,EAAKkuC,UAAY,CACf92C,MAAO,MAET4I,EAAKmuC,cAAgB,CACnB/2C,MAAO,MAET4I,EAAKouC,eAAiB,CACpBh3C,MAAO,MAET4I,EAAKquC,SAAW,CACdj3C,OAAO,GAET4I,EAAKsuC,QAAU,CACbl3C,MAAO,GAET4I,EAAKuuC,SAAW,CACdn3C,MAAO,GAET4I,EAAKwuC,cAAgB,CACnBp3C,MAAO,IAET4I,EAAKyuC,mBAAqB,CACxBr3C,MAAO,IAET4I,EAAK0uC,mBAAqB,CACxBt3C,MAAO,GAET4I,EAAK2uC,YAAc,CACjBv3C,MAAO,GAET4I,EAAK4uC,sBAAwB,CAC3Bx3C,MAAO,KAET4I,EAAK6uC,YAAc,CACjBz3C,MAAO,GAET4I,EAAK8uC,aAAe,CAClB13C,MAAO,GAET4I,EAAK+uC,UAAUhB,GAAY/tC,CAC7B,CA0OC,OA1OAkC,EAAAA,EAAAA,GAAA2rC,EAAA,EAAArwC,IAAA,kBAAApG,MAED,SAAgB43C,GACd,IAAIC,EAEwC,OAArCA,EAAkBD,EAAOlC,UAAoBmC,EAAgBC,SAClEF,EAAOlC,QAAQoC,OAAS,IAG1BF,EAAO7J,SAASgK,QAAU53C,KAAK82C,SAC/BW,EAAO7J,SAASiK,SAAW73C,KAAK22C,UAChCc,EAAO7J,SAASkK,OAAS93C,KAAKy2C,QAC9BgB,EAAO7J,SAASmK,cAAgB/3C,KAAK02C,eACrCe,EAAO7J,SAASoK,aAAeh4C,KAAK42C,cACpCa,EAAO7J,SAASqK,cAAgBj4C,KAAK62C,eACrCY,EAAO7J,SAASsK,OAASl4C,KAAK+2C,QAC9BU,EAAO7J,SAASuK,QAAUn4C,KAAKg3C,SAC/BS,EAAO7J,SAASwK,YAAcp4C,KAAKi3C,cACnCQ,EAAO7J,SAASgG,kBAAoB5zC,KAAKk3C,mBACzCO,EAAO7J,SAASiG,kBAAoB7zC,KAAKm3C,mBACzCM,EAAO7J,SAASkG,WAAa9zC,KAAKo3C,YAClCK,EAAO7J,SAASmG,qBAAuB/zC,KAAKq3C,sBAC5CI,EAAO7J,SAASyK,WAAar4C,KAAKs3C,YAClCG,EAAO7J,SAAS0K,YAAct4C,KAAKu3C,aACnCE,EAAOzJ,aAAe,8EAAHvuC,OAGfg4C,EAAOzJ,cACXyJ,EAAOzJ,aAAeyJ,EAAOzJ,aAAaL,QAAQ,4BAA6B,yKAG/E8J,EAAOjK,eAAiB,wnBAAH/tC,OAkBfg4C,EAAOjK,gBACbiK,EAAOjK,eAAiBiK,EAAOjK,eAAeG,QAAQ,kCAAmC,8vEAgE3F,GAAC,CAAA1nC,IAAA,WAAAzB,IAED,WACE,OAAOxE,KAAK22C,UAAU92C,KACxB,EAAC4E,IAED,SAAamM,GACX5Q,KAAK22C,UAAU92C,MAAQ+Q,CACzB,GAAC,CAAA3K,IAAA,SAAAzB,IAED,WACE,OAAOxE,KAAKy2C,QAAQ52C,KACtB,EAAC4E,IAED,SAAWmM,GACT5Q,KAAKy2C,QAAQ52C,MAAQ+Q,CACvB,GAAC,CAAA3K,IAAA,gBAAAzB,IAED,WACE,OAAOxE,KAAK02C,eAAe72C,KAC7B,EAAC4E,IAED,SAAkBmM,GAChB5Q,KAAK02C,eAAe72C,MAAQ+Q,CAC9B,GAAC,CAAA3K,IAAA,eAAAzB,IAED,WACE,OAAOxE,KAAK42C,cAAc/2C,KAC5B,EAAC4E,IAED,SAAiBmM,GACf5Q,KAAK42C,cAAc/2C,MAAQ+Q,CAC7B,GAAC,CAAA3K,IAAA,gBAAAzB,IAED,WACE,OAAOxE,KAAK62C,eAAeh3C,KAC7B,EAAC4E,IAED,SAAkBmM,GAChB5Q,KAAK62C,eAAeh3C,MAAQ+Q,CAC9B,GAAC,CAAA3K,IAAA,UAAAzB,IAED,WACE,OAAOxE,KAAK82C,SAASj3C,KACvB,EAAC4E,IAED,SAAYmM,GACV5Q,KAAK82C,SAASj3C,MAAQ+Q,CACxB,GAAC,CAAA3K,IAAA,SAAAzB,IAED,WACE,OAAOxE,KAAK+2C,QAAQl3C,KACtB,EAAC4E,IAED,SAAWmM,GACT5Q,KAAK+2C,QAAQl3C,MAAQ+Q,CACvB,GAAC,CAAA3K,IAAA,UAAAzB,IAED,WACE,OAAOxE,KAAKg3C,SAASn3C,KACvB,EAAC4E,IAED,SAAYmM,GACV5Q,KAAKg3C,SAASn3C,MAAQ+Q,CACxB,GAAC,CAAA3K,IAAA,cAAAzB,IAED,WACE,OAAOxE,KAAKi3C,cAAcp3C,KAC5B,EAAC4E,IAED,SAAgBmM,GACd5Q,KAAKi3C,cAAcp3C,MAAQ+Q,CAC7B,GAAC,CAAA3K,IAAA,oBAAAzB,IAED,WACE,OAAOxE,KAAKk3C,mBAAmBr3C,KACjC,EAAC4E,IAED,SAAsBmM,GACpB5Q,KAAKk3C,mBAAmBr3C,MAAQ+Q,CAClC,GAAC,CAAA3K,IAAA,oBAAAzB,IAED,WACE,OAAOxE,KAAKm3C,mBAAmBt3C,KACjC,EAAC4E,IAED,SAAsBmM,GACpB5Q,KAAKm3C,mBAAmBt3C,MAAQ+Q,CAClC,GAAC,CAAA3K,IAAA,aAAAzB,IAED,WACE,OAAOxE,KAAKo3C,YAAYv3C,KAC1B,EAAC4E,IAED,SAAemM,GACb5Q,KAAKo3C,YAAYv3C,MAAQ+Q,CAC3B,GAAC,CAAA3K,IAAA,uBAAAzB,IAED,WACE,OAAOxE,KAAKq3C,sBAAsBx3C,KACpC,EAAC4E,IAED,SAAyBmM,GACvB5Q,KAAKq3C,sBAAsBx3C,MAAQ+Q,CACrC,GAAC,CAAA3K,IAAA,aAAAzB,IAED,WACE,OAAOxE,KAAKs3C,YAAYz3C,KAC1B,EAAC4E,IAED,SAAemM,GACb5Q,KAAKs3C,YAAYz3C,MAAQ+Q,CAC3B,GAAC,CAAA3K,IAAA,cAAAzB,IAED,WACE,OAAOxE,KAAKu3C,aAAa13C,KAC3B,EAAC4E,IAED,SAAgBmM,GACd5Q,KAAKu3C,aAAa13C,MAAQ+Q,CAC5B,KAAC0lC,CAAA,CA3RwB,CAASiC,EAAAA,yNCMpC1qB,EAAAA,EAAAA,GAAO,CACL2qB,0BAA2BC,IAE7B,IAAMnC,EAAqC9G,EAAAA,YAAiB,SAAAhnC,EAezDk0B,GAAQ,IAAAgc,EAAAlwC,EAdT2vC,QAAAA,OAAO,IAAAO,EAAG,EAACA,EAAAC,EAAAnwC,EACX4vC,YAAAA,OAAW,IAAAO,EAAG,EAACA,EAAAC,EAAApwC,EACfipC,WAAAA,OAAU,IAAAmH,EAAG,IAAGA,EAAAC,EAAArwC,EAChBswC,KAAAA,OAAI,IAAAD,EAAG,CAAC,EAAG,GAAEA,EAAAnE,EAAAlsC,EACborC,kBAAAA,OAAiB,IAAAc,EAAG,GAAGA,EAAAC,EAAAnsC,EACvBqrC,kBAAAA,OAAiB,IAAAc,EAAG,EAACA,EAAAC,EAAApsC,EACrBsrC,WAAAA,OAAU,IAAAc,EAAG,EAACA,EAAAC,EAAArsC,EACdurC,qBAAAA,OAAoB,IAAAc,EAAG,IAAIA,EAAAkE,EAAAvwC,EAC3B0vC,OAAAA,OAAM,IAAAa,EAAG,EAACA,EAAAC,EAAAxwC,EACV6vC,WAAAA,OAAU,IAAAW,EAAG,EAACA,EAAAC,EAAAzwC,EACd8vC,YAAAA,OAAW,IAAAW,EAAG,EAACA,EACflB,EAAavvC,EAAbuvC,cAAamB,EAAA1wC,EACb2wC,gBAAAA,OAAe,IAAAD,EAAG,EAACA,EAChBpuC,GAAK21B,EAAAA,EAAAA,GAAAj4B,EAAA0oC,GAEFY,GAAK5M,EAAAA,EAAAA,IAAS,SAAAn6B,GAChB,OAAAA,EAAF+mC,EACM,IACFC,GAAS7M,EAAAA,EAAAA,IAAS,SAAAj6B,GAChB,OAAAA,EAAN8mC,MACU,IACN9C,GAAQ/J,EAAAA,EAAAA,IAAS,SAAA35B,GAChB,OAAAA,EAAL0jC,KACS,IAEL2I,GADNkB,EAAOn1C,MAAM0sC,QAAQyI,GAAQA,EAAO,CAACA,EAAMA,IACtB,GAAKA,EAAK,GAAK,EAC9BM,EAAc5J,EAAAA,OAAa,MACjCwC,EAAyBxC,EAAAA,UAAe,kBAAM,IAAI6J,EAAAA,KAAO,IAAlDC,GAAmDnuC,EAAAA,EAAAA,GAAA6mC,EAAA,GAArC,GACrBuH,EAAiB/J,EAAAA,UAAe,kBAAM,IAAIlT,EAAAA,OAAS,IAA5CtX,GAA6C7Z,EAAAA,EAAAA,GAAAouC,EAAA,GAAvC,GACbC,EAAiChK,EAAAA,UAAe,kBAAM,IAAIlT,EAAAA,OAAS,IAA5Dmd,GAA6DtuC,EAAAA,EAAAA,GAAAquC,EAAA,GAAvC,GAC7BE,EAA8BlK,EAAAA,UAAe,kBAAM,IAAIlT,EAAAA,OAAS,IAAzDqd,GAA0DxuC,EAAAA,EAAAA,GAAAuuC,EAAA,GAAvC,GAC1BE,EAAyBpK,EAAAA,UAAe,kBAAM,IAAIjT,EAAAA,OAAS,IAApDsd,GAAqD1uC,EAAAA,EAAAA,GAAAyuC,EAAA,GAAvC,GACrBE,EAAyBtK,EAAAA,UAAe,kBAAM,IAAIlT,EAAAA,QAAQ,EAAG,GAAI,EAAE,IAA5Dyd,GAA6D5uC,EAAAA,EAAAA,GAAA2uC,EAAA,GAA/C,GACrBE,GAAoBxK,EAAAA,UAAe,kBAAM,IAAIyK,EAAAA,OAAS,IAA/CC,IAAgD/uC,EAAAA,EAAAA,GAAA6uC,GAAA,GAAvC,GAChBG,GAAe3K,EAAAA,UAAe,kBAAM,IAAIlT,EAAAA,OAAS,IAA1C8d,IAA2CjvC,EAAAA,EAAAA,GAAAgvC,GAAA,GAAvC,GACXE,GAAiB7K,EAAAA,UAAe,kBAAM,IAAIlT,EAAAA,OAAS,IAA5Cv9B,IAA6CoM,EAAAA,EAAAA,GAAAkvC,GAAA,GAAvC,GACbC,GAAY9K,EAAAA,UAAe,kBAAM,IAAIyK,EAAAA,OAAS,IAAvC/mC,IAAwC/H,EAAAA,EAAAA,GAAAmvC,GAAA,GAAvC,GACRC,GAAwB/K,EAAAA,UAAe,kBAAM,IAAIjT,EAAAA,OAAS,IAAnD0b,IAAoD9sC,EAAAA,EAAAA,GAAAovC,GAAA,GAAvC,GACpBC,GAAwBhL,EAAAA,UAAe,kBAAM,IAAIiL,EAAAA,iBAAmB,IAA7DC,IAA8DvvC,EAAAA,EAAAA,GAAAqvC,GAAA,GAAjD,GACdG,GAAenL,EAAAA,aAAkB,WACrC,IAAIoL,EAGEC,EAASzB,EAAYjc,QAAQ0d,SAA2D,OAA/CD,EAAuBxB,EAAYjc,cAAmB,EAASyd,EAAqBE,MAAMD,QACzI,GAAKA,IACLpB,EAAuBsB,sBAAsBF,EAAOG,aACpDrB,EAAoBoB,sBAAsBhJ,EAAOiJ,aACjDnB,EAAeoB,gBAAgBJ,EAAOG,aACtCh2B,EAAOvgB,IAAI,EAAG,EAAG,GACjBugB,EAAOk2B,aAAarB,GACpBJ,EAAuB0B,gBAAgBn2B,EAAQm0B,GAC/CiB,GAAKgB,WAAW3B,EAAwBE,KAEpCS,GAAK5lC,IAAIwQ,GAAU,IAAvB,CACAo1B,GAAKiB,QAAQr2B,GAAQzP,SACrB6kC,GAAKtyB,IAAI2xB,GACTI,EAAeoB,gBAAgBlJ,EAAOiJ,aACtCjB,EAAet1C,IAAI,EAAG,GAAI,GAC1Bs1C,EAAemB,aAAarB,GAC5BE,EAAejyB,IAAI6xB,GACnB56C,GAAOq8C,WAAW3B,EAAwBM,GAC1Ch7C,GAAOs8C,QAAQr2B,GAAQzP,SACvBxW,GAAO+oB,IAAI2xB,GACXiB,GAAcj1C,SAASxB,KAAKm2C,IAC5BM,GAAcY,GAAG72C,IAAI,EAAG,EAAG,GAC3Bi2C,GAAcY,GAAGJ,aAAarB,GAC9Ba,GAAcY,GAAGD,QAAQr2B,GACzB01B,GAAca,OAAOx8C,IACrB27C,GAAcnJ,IAAMQ,EAAOR,IAE3BmJ,GAAcc,oBACdd,GAAce,iBAAiBx3C,KAAK8tC,EAAO0J,kBAE3CxD,GAAcxzC,IAAI,GAAK,EAAK,EAAK,GAAK,EAAK,GAAK,EAAK,GAAK,EAAK,EAAK,GAAK,GAAK,EAAK,EAAK,EAAK,GAC7FwzC,GAAcyD,SAAShB,GAAce,kBACrCxD,GAAcyD,SAAShB,GAAciB,oBACrC1D,GAAcyD,SAASb,EAAOG,aAG9B1B,EAAesC,8BAA8B52B,EAAQy0B,GACrDH,EAAe4B,aAAaR,GAAciB,oBAC1CzB,GAAUz1C,IAAI60C,EAAet0B,OAAOhW,EAAGsqC,EAAet0B,OAAO/V,EAAGqqC,EAAet0B,OAAO9V,EAAGoqC,EAAeuC,UACxG,IAAMJ,EAAmBf,GAAce,iBACvCvoC,GAAElE,GAAKoF,KAAK0nC,KAAK5B,GAAUlrC,GAAKysC,EAAiBhrC,SAAS,IAAMgrC,EAAiBhrC,SAAS,GAC1FyC,GAAEjE,GAAKmF,KAAK0nC,KAAK5B,GAAUjrC,GAAKwsC,EAAiBhrC,SAAS,IAAMgrC,EAAiBhrC,SAAS,GAC1FyC,GAAEhE,GAAK,EACPgE,GAAEzQ,GAAK,EAAMg5C,EAAiBhrC,SAAS,KAAOgrC,EAAiBhrC,SAAS,IAExEypC,GAAU5F,eAAe,EAAM4F,GAAU1lC,IAAItB,KAE7CuoC,EAAiBhrC,SAAS,GAAKypC,GAAUlrC,EACzCysC,EAAiBhrC,SAAS,GAAKypC,GAAUjrC,EACzCwsC,EAAiBhrC,SAAS,IAAMypC,GAAUhrC,EAAI,EAC9CusC,EAAiBhrC,SAAS,IAAMypC,GAAUz3C,CAxCV,CAyClC,GAAG,CAACsvC,EAAQoH,IACZ4C,GAA+CvM,EAAAA,SAAc,WAC3D,IAAMgH,EAAa,CACjBnK,UAAWC,EAAAA,aACXC,UAAWD,EAAAA,aACXF,SAAU0F,EAAGoD,eACbrzC,KAAMymC,EAAAA,eAEF0T,EAAO,IAAIhH,EAAAA,kBAAkBvD,EAAYA,EAAY+E,GAC3DwF,EAAKzI,aAAc,EACnByI,EAAK/F,aAAe,IAAIgG,EAAAA,aAAaxK,EAAYA,GACjDuK,EAAK/F,aAAa5L,OAAS6R,EAAAA,YAC3BF,EAAK/F,aAAap0C,KAAOs6C,EAAAA,kBACzB,IAAMC,EAAO,IAAIpH,EAAAA,kBAAkBvD,EAAYA,EAAY+E,GA+B3D,MAAO,CAACwF,EAAMI,EA9BG,IAAI7H,EAAS,CAC5BzC,GAAAA,EACAL,WAAAA,EACAjH,MAAOsO,EAAK,GACZrO,OAAQqO,EAAK,GACblF,kBAAAA,EACAC,kBAAAA,EACAC,WAAAA,EACAC,qBAAAA,IAEqB,CACrBmE,OAAAA,EACAD,cAAAA,GACAE,QAAAA,EACAN,SAAUmE,EAAK/P,QACf6L,OAAQkE,EAAK/F,aACb+B,aAAcoE,EAAKnQ,QACnB2L,QAAAA,EACAQ,YAAAA,EACAxE,kBAAAA,EACAC,kBAAAA,EACAC,WAAAA,EACAC,qBAAAA,EACAsE,WAAAA,EACAN,cAAAA,EACAO,YAAAA,EACA,mBAAoBV,EAAU,QAAKz2C,EACnC,oBAAqB2yC,EAAa,EAAI,QAAK3yC,EAC3C,yBAA0B42C,EAAgB,QAAK52C,GAGnD,GAAG,CAAC2wC,EAAIgH,EAAMb,GAAexG,EAAYyG,EAAQN,EAASO,EAASC,EAAaxE,EAAmBC,EAAmBC,EAAYC,EAAsBsE,EAAYN,EAAeO,IAAa+D,IAAAlxC,EAAAA,EAAAA,GAAA4wC,GAAA,GA5CzLC,GAAIK,GAAA,GAAED,GAAIC,GAAA,GAAEC,GAAQD,GAAA,GAAEE,GAAcF,GAAA,GAmE3C,OAtBAvU,EAAAA,EAAAA,IAAS,WACP,IAAI0U,EAGE3B,EAASzB,EAAYjc,QAAQ0d,SAA4D,OAAhD2B,EAAwBpD,EAAYjc,cAAmB,EAASqf,EAAsB1B,MAAMD,QAC3I,GAAKA,EAAL,CACAA,EAAO4B,SAAU,EACjB,IAAMC,EAAmB5K,EAAG6K,GAAGC,QACzBC,EAA0B/K,EAAGgL,UAAUC,WAC7CpC,KACA7I,EAAG6K,GAAGC,SAAU,EAChB9K,EAAGgL,UAAUC,YAAa,EAC1BjL,EAAGsE,gBAAgB4F,IACnBlK,EAAG3uC,MAAMoH,QAAQsa,MAAMm4B,SAAQ,GAC1BlL,EAAGmL,WAAWnL,EAAGoL,QACtBpL,EAAGuE,OAAOpH,EAAOyL,IACb9C,GAAS0E,GAASjG,OAAOvE,EAAIkK,GAAMI,IACvCtK,EAAG6K,GAAGC,QAAUF,EAChB5K,EAAGgL,UAAUC,WAAaF,EAC1BhC,EAAO4B,SAAU,EACjB3K,EAAGsE,gBAAgB,KAfA,CAgBrB,IACoB5G,EAAAA,cAAoB,6BAA6BuD,EAAAA,EAAAA,GAAS,CAC5EoK,OAAQ,WAERl3C,IAAK,MAAQs2C,GAAe,oBAAsBA,GAAe,qBAAuBA,GAAe,0BACvG7f,KAAK0gB,EAAAA,EAAAA,GAAU,CAAChE,EAAa1c,KAC5B6f,GAAgBzxC,GACrB,8KCpLIuyC,EAAY/9C,OAAOgF,eAEnBg5C,EAAgB,SAACpO,EAAKjpC,EAAKpG,GAE7B,OAHoB,SAACqvC,EAAKjpC,EAAKpG,GAAUoG,KAAOipC,EAAMmO,EAAUnO,EAAKjpC,EAAK,CAAE1B,YAAY,EAAMg5C,cAAc,EAAMC,UAAU,EAAM39C,MAAAA,IAAWqvC,EAAIjpC,GAAOpG,CAAK,CAE7J49C,CAAgBvO,EAAoB,kBAARjpC,EAAmBA,EAAM,GAAKA,EAAKpG,GACxDA,CACT,EAEM69C,EAAmB,SAAC92B,EAAQ+2B,GAAQ,OAAM/2B,EAAS+2B,EAAWA,GAAYA,CAAQ,EAClFC,EAAa,SAAAC,IAAAx1C,EAAAA,EAAAA,GAAAu1C,EAAAC,GAAA,IAAAv1C,GAAAC,EAAAA,EAAAA,GAAAq1C,GACjB,SAAAA,EAAY5f,EAAQ8f,GAAY,IAAAr1C,GAAAC,EAAAA,EAAAA,GAAA,KAAAk1C,GAC9Bn1C,EAAAH,EAAAlJ,KAAA,MACAk+C,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,UACpB60C,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,cAEpB60C,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,WAAW,GAE/B60C,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,SAAU,IAAI6zB,EAAAA,SAElCghB,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,cAAe,GACnC60C,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,cAAemK,KAEnC0qC,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,UAAW,GAC/B60C,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,UAAWmK,KAG/B0qC,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,gBAAiB,GAErC60C,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,gBAAiB2L,KAAKyF,IAI1CyjC,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,mBAAoBmK,KAExC0qC,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,kBAAmBmK,KAIvC0qC,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,iBAAiB,GACrC60C,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,gBAAiB,KAGrC60C,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,cAAc,GAClC60C,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,YAAa,GAEjC60C,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,gBAAgB,GACpC60C,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,cAAe,GAEnC60C,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,aAAa,GACjC60C,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,WAAY,GAChC60C,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,sBAAsB,GAE1C60C,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,cAAe,GAInC60C,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,cAAc,GAClC60C,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,kBAAmB,GAEvC60C,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,gBAAgB,GAEpC60C,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,0BAA0B,GAE9C60C,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,wBAAwB,GAG5C60C,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,OAAQ,CAAEu1C,KAAM,YAAaC,GAAI,UAAWC,MAAO,aAAcC,OAAQ,cAE7Fb,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,eAAgB,CAClCu1C,KAAMI,EAAAA,MAAMC,OACZC,OAAQF,EAAAA,MAAMG,MACdL,MAAOE,EAAAA,MAAMI,MAGflB,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,UAAW,CAAEg2C,IAAKC,EAAAA,MAAML,OAAQM,IAAKD,EAAAA,MAAME,YAC/DtB,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,WACpB60C,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,aACpB60C,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,SAEpB60C,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,uBAAwB,MAC5C60C,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,iBACpB60C,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,qBACpB60C,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,iBACpB60C,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,qBACpB60C,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,eACpB60C,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,qBACpB60C,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,yBACpB60C,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,aACpB60C,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,SACpB60C,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,UACpB60C,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,WACpB60C,GAAaS,EAAAA,EAAAA,GAAAt1C,GAAO,WACpBA,EAAKu1B,OAASA,EACdv1B,EAAKq1C,WAAaA,EAClBr1C,EAAKo2C,QAAUp2C,EAAK1J,OAAOqhB,QAC3B3X,EAAKq2C,UAAYr2C,EAAKu1B,OAAOv4B,SAAS2a,QACtC3X,EAAKs2C,MAAQt2C,EAAKu1B,OAAOghB,KACzBv2C,EAAKw2C,cAAgB,kBAAMC,EAAUC,GAAG,EACxC12C,EAAK22C,kBAAoB,kBAAMF,EAAUG,KAAK,EAC9C52C,EAAK62C,cAAgB,SAACz/C,GACpB,IAAIs/C,EAAMzB,EAAiB79C,EAAO,EAAIuU,KAAKyF,IACvC0lC,EAAaL,EAAUC,IACvBI,EAAa,IACfA,GAAc,EAAInrC,KAAKyF,IACrBslC,EAAM,IACRA,GAAO,EAAI/qC,KAAKyF,IAClB,IAAI2lC,EAAUprC,KAAKgB,IAAI+pC,EAAMI,GACzB,EAAInrC,KAAKyF,GAAK2lC,EAAUA,IACtBL,EAAMI,EACRJ,GAAO,EAAI/qC,KAAKyF,GAEhB0lC,GAAc,EAAInrC,KAAKyF,IAG3B4lC,EAAeN,IAAMA,EAAMI,EAC3BG,EAAMrN,QACR,EACA5pC,EAAKk3C,kBAAoB,SAAC9/C,GACxB,IAAIw/C,EAAQ3B,EAAiB79C,EAAO,EAAIuU,KAAKyF,IACzC+lC,EAAeV,EAAUG,MACzBO,EAAe,IACjBA,GAAgB,EAAIxrC,KAAKyF,IACvBwlC,EAAQ,IACVA,GAAS,EAAIjrC,KAAKyF,IACpB,IAAIgmC,EAAYzrC,KAAKgB,IAAIiqC,EAAQO,GAC7B,EAAIxrC,KAAKyF,GAAKgmC,EAAYA,IACxBR,EAAQO,EACVP,GAAS,EAAIjrC,KAAKyF,GAElB+lC,GAAgB,EAAIxrC,KAAKyF,IAG7B4lC,EAAeJ,MAAQA,EAAQO,EAC/BF,EAAMrN,QACR,EACA5pC,EAAKq3C,YAAc,kBAAMJ,EAAM1hB,OAAOv4B,SAAS2tB,WAAWssB,EAAM3gD,OAAO,EACvE0J,EAAKs3C,kBAAoB,SAACC,GACxBA,EAAY97C,iBAAiB,UAAW+7C,IACxCx3C,EAAKy3C,qBAAuBF,CAC9B,EACAv3C,EAAK03C,sBAAwB,WAC3B13C,EAAKy3C,qBAAqB77C,oBAAoB,UAAW47C,IACzDx3C,EAAKy3C,qBAAuB,IAC9B,EACAz3C,EAAK23C,UAAY,WACfV,EAAMb,QAAQ56C,KAAKy7C,EAAM3gD,QACzB2gD,EAAMZ,UAAU76C,KAAKy7C,EAAM1hB,OAAOv4B,UAClCi6C,EAAMX,MAAQW,EAAM1hB,OAAOghB,IAC7B,EACAv2C,EAAK2pB,MAAQ,WACXstB,EAAM3gD,OAAOkF,KAAKy7C,EAAMb,SACxBa,EAAM1hB,OAAOv4B,SAASxB,KAAKy7C,EAAMZ,WACjCY,EAAM1hB,OAAOghB,KAAOU,EAAMX,MAC1BW,EAAM1hB,OAAOqiB,yBACbX,EAAMpzB,cAAcg0B,GACpBZ,EAAMrN,SACNlvC,EAAQo9C,EAAMC,IAChB,EACA/3C,EAAK4pC,OAAU,WACb,IAAMzrB,EAAS,IAAI0V,EAAAA,QACbgf,EAAK,IAAIhf,EAAAA,QAAQ,EAAG,EAAG,GACvBviB,GAAO,IAAIsf,EAAAA,YAAaonB,mBAAmBziB,EAAOsd,GAAIA,GACtDoF,EAAc3mC,EAAKqG,QAAQugC,SAC3BC,EAAe,IAAItkB,EAAAA,QACnBukB,EAAiB,IAAIxnB,EAAAA,WACrBynB,EAAQ,EAAI1sC,KAAKyF,GACvB,OAAO,WACL,IAAMpU,EAAWi6C,EAAM1hB,OAAOv4B,SAC9BsU,EAAK0mC,mBAAmBziB,EAAOsd,GAAIA,GACnCoF,EAAYz8C,KAAK8V,GAAM4mC,SACvB/5B,EAAO3iB,KAAKwB,GAAUs7C,IAAIrB,EAAM3gD,QAChC6nB,EAAOo6B,gBAAgBjnC,GACvBmlC,EAAU+B,eAAer6B,GACrB84B,EAAMwB,YAAc/9C,IAAUo9C,EAAMC,MACtCW,EAoHG,EAAI/sC,KAAKyF,GAAK,GAAK,GAAK6lC,EAAM0B,iBAlH/B1B,EAAM2B,eACRnC,EAAUG,OAASI,EAAeJ,MAAQK,EAAM4B,cAChDpC,EAAUC,KAAOM,EAAeN,IAAMO,EAAM4B,gBAE5CpC,EAAUG,OAASI,EAAeJ,MAClCH,EAAUC,KAAOM,EAAeN,KAElC,IAAIzoC,EAAMgpC,EAAM6B,gBACZ5qC,EAAM+oC,EAAM8B,gBAsChB,OArCIC,SAAS/qC,IAAQ+qC,SAAS9qC,KACxBD,GAAOtC,KAAKyF,GACdnD,GAAOoqC,EACApqC,EAAMtC,KAAKyF,KAClBnD,GAAOoqC,GACLnqC,GAAOvC,KAAKyF,GACdlD,GAAOmqC,EACAnqC,EAAMvC,KAAKyF,KAClBlD,GAAOmqC,GAEP5B,EAAUG,MADR3oC,GAAOC,EACSvC,KAAKuC,IAAID,EAAKtC,KAAKsC,IAAIC,EAAKuoC,EAAUG,QAEtCH,EAAUG,OAAS3oC,EAAMC,GAAO,EAAIvC,KAAKuC,IAAID,EAAKwoC,EAAUG,OAASjrC,KAAKsC,IAAIC,EAAKuoC,EAAUG,QAGnHH,EAAUC,IAAM/qC,KAAKuC,IAAI+oC,EAAMgC,cAAettC,KAAKsC,IAAIgpC,EAAMiC,cAAezC,EAAUC,MACtFD,EAAU0C,WACV1C,EAAU7xB,QAAU1G,EACpBu4B,EAAU7xB,OAASjZ,KAAKuC,IAAI+oC,EAAMmC,YAAaztC,KAAKsC,IAAIgpC,EAAMoC,YAAa5C,EAAU7xB,UACzD,IAAxBqyB,EAAM2B,cACR3B,EAAM3gD,OAAOo8C,gBAAgB4G,EAAWrC,EAAM4B,eAE9C5B,EAAM3gD,OAAO+oB,IAAIi6B,GAEnBn7B,EAAOo7B,iBAAiB9C,GACxBt4B,EAAOo6B,gBAAgBN,GACvBj7C,EAASxB,KAAKy7C,EAAM3gD,QAAQ+oB,IAAIlB,GAChC84B,EAAM1hB,OAAOud,OAAOmE,EAAM3gD,SACE,IAAxB2gD,EAAM2B,eACR5B,EAAeJ,OAAS,EAAIK,EAAM4B,cAClC7B,EAAeN,KAAO,EAAIO,EAAM4B,cAChCS,EAAUzN,eAAe,EAAIoL,EAAM4B,iBAEnC7B,EAAeh7C,IAAI,EAAG,EAAG,GACzBs9C,EAAUt9C,IAAI,EAAG,EAAG,IAEtBkiB,EAAQ,KACJs7B,GAAerB,EAAasB,kBAAkBxC,EAAM1hB,OAAOv4B,UAAY08C,GAAO,GAAK,EAAItB,EAAersC,IAAIkrC,EAAM1hB,OAAO9nB,aAAeisC,KACxIzC,EAAMpzB,cAAcg0B,GACpBM,EAAa38C,KAAKy7C,EAAM1hB,OAAOv4B,UAC/Bo7C,EAAe58C,KAAKy7C,EAAM1hB,OAAO9nB,YACjC+rC,GAAc,GACP,EAGX,CACF,CAzEe,GA0Efx5C,EAAKu/B,QAAU,SAACgY,GACVA,IAAgBoC,UAClBv/C,QAAQkC,MACN,4HAGJ26C,EAAM5B,WAAakC,EACnBN,EAAM5B,WAAWuE,MAAMC,YAAc,OACrC5C,EAAM5B,WAAW55C,iBAAiB,cAAeq+C,IACjD7C,EAAM5B,WAAW55C,iBAAiB,cAAes+C,GACjD9C,EAAM5B,WAAW55C,iBAAiB,gBAAiBu+C,GACnD/C,EAAM5B,WAAW55C,iBAAiB,QAASw+C,EAC7C,EACAj6C,EAAKk6C,QAAU,WACb,IAAI9V,EAAIC,EAAI8V,EAAIC,EAAIC,EAAIC,EACG,OAA1BlW,EAAK6S,EAAM5B,aAA+BjR,EAAGxoC,oBAAoB,cAAek+C,IACtD,OAA1BzV,EAAK4S,EAAM5B,aAA+BhR,EAAGzoC,oBAAoB,cAAem+C,GACtD,OAA1BI,EAAKlD,EAAM5B,aAA+B8E,EAAGv+C,oBAAoB,gBAAiBo+C,GACxD,OAA1BI,EAAKnD,EAAM5B,aAA+B+E,EAAGx+C,oBAAoB,QAASq+C,GAChD,OAA1BI,EAAKpD,EAAM5B,aAA+BgF,EAAGE,cAAc3+C,oBAAoB,cAAe4+C,GACpE,OAA1BF,EAAKrD,EAAM5B,aAA+BiF,EAAGC,cAAc3+C,oBAAoB,YAAa6+C,GAC1D,OAA/BxD,EAAMQ,sBACRR,EAAMQ,qBAAqB77C,oBAAoB,UAAW47C,GAE9D,EACA,IAAMP,GAAK3B,EAAAA,EAAAA,GAAAt1C,GACL63C,EAAc,CAAEz+C,KAAM,UACtBshD,EAAa,CAAEthD,KAAM,SACrBuhD,EAAW,CAAEvhD,KAAM,OACnB0+C,EAAQ,CACZC,MAAO,EACPnC,OAAQ,EACRE,MAAO,EACPC,IAAK,EACL6E,aAAc,EACdC,UAAW,EACXC,gBAAiB,EACjBC,mBAAoB,GAElBrgD,EAAQo9C,EAAMC,KACZ2B,EAAM,KACNjD,EAAY,IAAIuE,EAAAA,UAChBhE,EAAiB,IAAIgE,EAAAA,UACvB98B,EAAQ,EACNo7B,EAAY,IAAIzlB,EAAAA,QAClB2lB,GAAc,EACZyB,EAAc,IAAItQ,EAAAA,QAClBuQ,EAAY,IAAIvQ,EAAAA,QAChBwQ,EAAc,IAAIxQ,EAAAA,QAClByQ,EAAW,IAAIzQ,EAAAA,QACf0Q,EAAS,IAAI1Q,EAAAA,QACb2Q,EAAW,IAAI3Q,EAAAA,QACf4Q,EAAa,IAAI5Q,EAAAA,QACjB6Q,EAAW,IAAI7Q,EAAAA,QACf8Q,EAAa,IAAI9Q,EAAAA,QACjB+Q,EAAW,GACXC,EAAmB,CAAC,EAI1B,SAASC,IACP,OAAOjwC,KAAK0F,IAAI,IAAM4lC,EAAM4E,UAC9B,CACA,SAASnD,EAAWjoC,GACdwmC,EAAM6E,cAAgB7E,EAAM8E,uBAC9B/E,EAAeJ,OAASnmC,EAExBumC,EAAeJ,OAASnmC,CAE5B,CACA,SAASurC,EAASvrC,GACZwmC,EAAM6E,cAAgB7E,EAAMgF,qBAC9BjF,EAAeN,KAAOjmC,EAEtBumC,EAAeN,KAAOjmC,CAE1B,CACA,IAAMyrC,EAAW,WACf,IAAM/zC,EAAI,IAAI0rB,EAAAA,QACd,OAAO,SAAkBxL,EAAU8zB,GACjCh0C,EAAEi0C,oBAAoBD,EAAc,GACpCh0C,EAAE0jC,gBAAgBxjB,GAClBixB,EAAUj6B,IAAIlX,EAChB,CACF,CAPiB,GAQXk0C,EAAS,WACb,IAAMl0C,EAAI,IAAI0rB,EAAAA,QACd,OAAO,SAAgBxL,EAAU8zB,IACE,IAA7BlF,EAAMqF,mBACRn0C,EAAEi0C,oBAAoBD,EAAc,IAEpCh0C,EAAEi0C,oBAAoBD,EAAc,GACpCh0C,EAAEo0C,aAAatF,EAAM1hB,OAAOsd,GAAI1qC,IAElCA,EAAE0jC,eAAexjB,GACjBixB,EAAUj6B,IAAIlX,EAChB,CACF,CAZe,GAaTq0C,EAAO,WACX,IAAMr+B,EAAS,IAAI0V,EAAAA,QACnB,OAAO,SAAc4oB,EAAQC,GAC3B,IAAMC,EAAU1F,EAAM5B,WACtB,GAAIsH,GAAW1F,EAAM1hB,kBAAkByc,EAAAA,mBAAqBiF,EAAM1hB,OAAOqnB,oBAAqB,CAC5F,IAAM5/C,EAAWi6C,EAAM1hB,OAAOv4B,SAC9BmhB,EAAO3iB,KAAKwB,GAAUs7C,IAAIrB,EAAM3gD,QAChC,IAAIumD,EAAiB1+B,EAAOrkB,SAC5B+iD,GAAkBlxC,KAAKmxC,IAAI7F,EAAM1hB,OAAOwnB,IAAM,EAAIpxC,KAAKyF,GAAK,KAC5D8qC,EAAQ,EAAIO,EAASI,EAAiBF,EAAQK,aAAc/F,EAAM1hB,OAAOntB,QACzEi0C,EAAM,EAAIK,EAASG,EAAiBF,EAAQK,aAAc/F,EAAM1hB,OAAOntB,OACzE,MAAWu0C,GAAW1F,EAAM1hB,kBAAkB0nB,EAAAA,oBAAsBhG,EAAM1hB,OAAO2nB,sBAC/EhB,EACEO,GAAUxF,EAAM1hB,OAAO4nB,MAAQlG,EAAM1hB,OAAO6nB,MAAQnG,EAAM1hB,OAAOghB,KAAOoG,EAAQU,YAChFpG,EAAM1hB,OAAOntB,QAEfi0C,EACEK,GAAUzF,EAAM1hB,OAAO+nB,IAAMrG,EAAM1hB,OAAOgoB,QAAUtG,EAAM1hB,OAAOghB,KAAOoG,EAAQK,aAChF/F,EAAM1hB,OAAOntB,UAGfhO,QAAQC,KAAK,gFACb48C,EAAMuG,WAAY,EAEtB,CACF,CAzBa,GA0Bb,SAASC,EAASC,GACZzG,EAAM1hB,kBAAkByc,EAAAA,mBAAqBiF,EAAM1hB,OAAOqnB,oBAC5D1+B,GAASw/B,EACAzG,EAAM1hB,kBAAkB0nB,EAAAA,oBAAsBhG,EAAM1hB,OAAO2nB,sBACpEjG,EAAM1hB,OAAOghB,KAAO5qC,KAAKuC,IAAI+oC,EAAM0G,QAAShyC,KAAKsC,IAAIgpC,EAAM2G,QAAS3G,EAAM1hB,OAAOghB,KAAOmH,IACxFzG,EAAM1hB,OAAOqiB,yBACb4B,GAAc,IAEdp/C,QAAQC,KAAK,uFACb48C,EAAM4G,YAAa,EAEvB,CACA,SAASC,EAAQJ,GACXzG,EAAM1hB,kBAAkByc,EAAAA,mBAAqBiF,EAAM1hB,OAAOqnB,oBAC5D1+B,GAASw/B,EACAzG,EAAM1hB,kBAAkB0nB,EAAAA,oBAAsBhG,EAAM1hB,OAAO2nB,sBACpEjG,EAAM1hB,OAAOghB,KAAO5qC,KAAKuC,IAAI+oC,EAAM0G,QAAShyC,KAAKsC,IAAIgpC,EAAM2G,QAAS3G,EAAM1hB,OAAOghB,KAAOmH,IACxFzG,EAAM1hB,OAAOqiB,yBACb4B,GAAc,IAEdp/C,QAAQC,KAAK,uFACb48C,EAAM4G,YAAa,EAEvB,CACA,SAASE,EAAsBztC,GAC7B2qC,EAAYj/C,IAAIsU,EAAM0tC,QAAS1tC,EAAM2tC,QACvC,CAIA,SAASC,EAAmB5tC,GAC1B8qC,EAASp/C,IAAIsU,EAAM0tC,QAAS1tC,EAAM2tC,QACpC,CA+DA,SAASE,IACP,GAAuB,GAAnBzC,EAAS5hD,OACXmhD,EAAYj/C,IAAI0/C,EAAS,GAAG0C,MAAO1C,EAAS,GAAG2C,WAC1C,CACL,IAAM93C,EAAI,IAAOm1C,EAAS,GAAG0C,MAAQ1C,EAAS,GAAG0C,OAC3C53C,EAAI,IAAOk1C,EAAS,GAAG2C,MAAQ3C,EAAS,GAAG2C,OACjDpD,EAAYj/C,IAAIuK,EAAGC,EACrB,CACF,CACA,SAAS83C,IACP,GAAuB,GAAnB5C,EAAS5hD,OACXshD,EAASp/C,IAAI0/C,EAAS,GAAG0C,MAAO1C,EAAS,GAAG2C,WACvC,CACL,IAAM93C,EAAI,IAAOm1C,EAAS,GAAG0C,MAAQ1C,EAAS,GAAG0C,OAC3C53C,EAAI,IAAOk1C,EAAS,GAAG2C,MAAQ3C,EAAS,GAAG2C,OACjDjD,EAASp/C,IAAIuK,EAAGC,EAClB,CACF,CACA,SAAS+3C,IACP,IAAMC,EAAK9C,EAAS,GAAG0C,MAAQ1C,EAAS,GAAG0C,MACrCK,EAAK/C,EAAS,GAAG2C,MAAQ3C,EAAS,GAAG2C,MACrCh2B,EAAW1c,KAAKC,KAAK4yC,EAAKA,EAAKC,EAAKA,GAC1ClD,EAAWv/C,IAAI,EAAGqsB,EACpB,CAaA,SAASq2B,EAAsBpuC,GAC7B,GAAuB,GAAnBorC,EAAS5hD,OACXohD,EAAUl/C,IAAIsU,EAAM8tC,MAAO9tC,EAAM+tC,WAC5B,CACL,IAAMrhD,EAAW2hD,GAAyBruC,GACpC/J,EAAI,IAAO+J,EAAM8tC,MAAQphD,EAASuJ,GAClCC,EAAI,IAAO8J,EAAM+tC,MAAQrhD,EAASwJ,GACxC00C,EAAUl/C,IAAIuK,EAAGC,EACnB,CACA20C,EAAYxI,WAAWuI,EAAWD,GAAapP,eAAeoL,EAAM2H,aACpE,IAAMjC,EAAU1F,EAAM5B,WAClBsH,IACFjE,EAAW,EAAI/sC,KAAKyF,GAAK+pC,EAAY50C,EAAIo2C,EAAQK,cACjDhB,EAAS,EAAIrwC,KAAKyF,GAAK+pC,EAAY30C,EAAIm2C,EAAQK,eAEjD/B,EAAYz/C,KAAK0/C,EACnB,CACA,SAAS2D,EAAmBvuC,GAC1B,GAAuB,GAAnBorC,EAAS5hD,OACXuhD,EAAOr/C,IAAIsU,EAAM8tC,MAAO9tC,EAAM+tC,WACzB,CACL,IAAMrhD,EAAW2hD,GAAyBruC,GACpC/J,EAAI,IAAO+J,EAAM8tC,MAAQphD,EAASuJ,GAClCC,EAAI,IAAO8J,EAAM+tC,MAAQrhD,EAASwJ,GACxC60C,EAAOr/C,IAAIuK,EAAGC,EAChB,CACA80C,EAAS3I,WAAW0I,EAAQD,GAAUvP,eAAeoL,EAAM6H,UAC3DtC,EAAIlB,EAAS/0C,EAAG+0C,EAAS90C,GACzB40C,EAAS5/C,KAAK6/C,EAChB,CACA,SAAS0D,EAAqBzuC,GAC5B,IAAMtT,EAAW2hD,GAAyBruC,GACpCkuC,EAAKluC,EAAM8tC,MAAQphD,EAASuJ,EAC5Bk4C,EAAKnuC,EAAM+tC,MAAQrhD,EAASwJ,EAC5B6hB,EAAW1c,KAAKC,KAAK4yC,EAAKA,EAAKC,EAAKA,GAC1CjD,EAASx/C,IAAI,EAAGqsB,GAChBozB,EAAWz/C,IAAI,EAAG2P,KAAK0F,IAAImqC,EAASh1C,EAAI+0C,EAAW/0C,EAAGywC,EAAM4E,YAC5D4B,EAAShC,EAAWj1C,GACpB+0C,EAAW//C,KAAKggD,EAClB,CAaA,SAASzB,EAAczpC,GACrB,IAAI8zB,EAAIC,GACc,IAAlB4S,EAAM9C,UAEc,IAApBuH,EAAS5hD,SACgB,OAA1BsqC,EAAK6S,EAAM5B,aAA+BjR,EAAGmW,cAAc9+C,iBAAiB,cAAe++C,GACjE,OAA1BnW,EAAK4S,EAAM5B,aAA+BhR,EAAGkW,cAAc9+C,iBAAiB,YAAag/C,IA4M9F,SAAoBnqC,GAClBorC,EAAS7hD,KAAKyW,EAChB,CA5ME0uC,CAAW1uC,GACe,UAAtBA,EAAM2uC,YAuHZ,SAAsB3uC,GAEpB,OADA4uC,GAAa5uC,GACLorC,EAAS5hD,QACf,KAAK,EACH,OAAQm9C,EAAMkI,QAAQnJ,KACpB,KAAKC,EAAAA,MAAML,OACT,IAA2B,IAAvBqB,EAAMmI,aACR,OACFjB,IACAzjD,EAAQo9C,EAAM8C,aACd,MACF,KAAK3E,EAAAA,MAAMF,IACT,IAAwB,IAApBkB,EAAMuG,UACR,OACFc,IACA5jD,EAAQo9C,EAAM+C,UACd,MACF,QACEngD,EAAQo9C,EAAMC,KAElB,MACF,KAAK,EACH,OAAQd,EAAMkI,QAAQjJ,KACpB,KAAKD,EAAAA,MAAME,UACT,IAAyB,IAArBc,EAAM4G,aAA4C,IAApB5G,EAAMuG,UACtC,OAxNNvG,EAAM4G,YACRU,IACEtH,EAAMuG,WACRc,IAuNM5jD,EAAQo9C,EAAMgD,gBACd,MACF,KAAK7E,EAAAA,MAAMoJ,aACT,IAAyB,IAArBpI,EAAM4G,aAA+C,IAAvB5G,EAAMmI,aACtC,OAxNNnI,EAAM4G,YACRU,IACEtH,EAAMmI,cACRjB,IAuNMzjD,EAAQo9C,EAAMiD,mBACd,MACF,QACErgD,EAAQo9C,EAAMC,KAElB,MACF,QACEr9C,EAAQo9C,EAAMC,KAEdr9C,IAAUo9C,EAAMC,MAClBd,EAAMpzB,cAAc62B,EAExB,CAnKI4E,CAAahvC,GA4BjB,SAAqBA,GACnB,IAAIivC,EACJ,OAAQjvC,EAAMkvC,QACZ,KAAK,EACHD,EAActI,EAAMwI,aAAalK,KACjC,MACF,KAAK,EACHgK,EAActI,EAAMwI,aAAa5J,OACjC,MACF,KAAK,EACH0J,EAActI,EAAMwI,aAAahK,MACjC,MACF,QACE8J,GAAe,EAEnB,OAAQA,GACN,KAAK5J,EAAAA,MAAMG,MACT,IAAyB,IAArBmB,EAAM4G,WACR,QApNR,SAA8BvtC,GAC5BirC,EAAWv/C,IAAIsU,EAAM0tC,QAAS1tC,EAAM2tC,QACtC,CAmNMyB,CAAqBpvC,GACrB5V,EAAQo9C,EAAMhC,MACd,MACF,KAAKH,EAAAA,MAAMC,OACT,GAAItlC,EAAMqvC,SAAWrvC,EAAMsvC,SAAWtvC,EAAMuvC,SAAU,CACpD,IAAwB,IAApB5I,EAAMuG,UACR,OACFU,EAAmB5tC,GACnB5V,EAAQo9C,EAAM/B,GAChB,KAAO,CACL,IAA2B,IAAvBkB,EAAMmI,aACR,OACFrB,EAAsBztC,GACtB5V,EAAQo9C,EAAMlC,MAChB,CACA,MACF,KAAKD,EAAAA,MAAMI,IACT,GAAIzlC,EAAMqvC,SAAWrvC,EAAMsvC,SAAWtvC,EAAMuvC,SAAU,CACpD,IAA2B,IAAvB5I,EAAMmI,aACR,OACFrB,EAAsBztC,GACtB5V,EAAQo9C,EAAMlC,MAChB,KAAO,CACL,IAAwB,IAApBqB,EAAMuG,UACR,OACFU,EAAmB5tC,GACnB5V,EAAQo9C,EAAM/B,GAChB,CACA,MACF,QACEr7C,EAAQo9C,EAAMC,KAEdr9C,IAAUo9C,EAAMC,MAClBd,EAAMpzB,cAAc62B,EAExB,CAhFIoF,CAAYxvC,GAEhB,CACA,SAASkqC,EAAclqC,IACC,IAAlB2mC,EAAM9C,UAEgB,UAAtB7jC,EAAM2uC,YA4JZ,SAAqB3uC,GAEnB,OADA4uC,GAAa5uC,GACL5V,GACN,KAAKo9C,EAAM8C,aACT,IAA2B,IAAvB3D,EAAMmI,aACR,OACFV,EAAsBpuC,GACtB2mC,EAAMrN,SACN,MACF,KAAKkO,EAAM+C,UACT,IAAwB,IAApB5D,EAAMuG,UACR,OACFqB,EAAmBvuC,GACnB2mC,EAAMrN,SACN,MACF,KAAKkO,EAAMgD,gBACT,IAAyB,IAArB7D,EAAM4G,aAA4C,IAApB5G,EAAMuG,UACtC,QA3MR,SAAiCltC,GAC3B2mC,EAAM4G,YACRkB,EAAqBzuC,GACnB2mC,EAAMuG,WACRqB,EAAmBvuC,EACvB,CAuMMyvC,CAAwBzvC,GACxB2mC,EAAMrN,SACN,MACF,KAAKkO,EAAMiD,mBACT,IAAyB,IAArB9D,EAAM4G,aAA+C,IAAvB5G,EAAMmI,aACtC,QA3MR,SAAoC9uC,GAC9B2mC,EAAM4G,YACRkB,EAAqBzuC,GACnB2mC,EAAMmI,cACRV,EAAsBpuC,EAC1B,CAuMM0vC,CAA2B1vC,GAC3B2mC,EAAMrN,SACN,MACF,QACElvC,EAAQo9C,EAAMC,KAEpB,CAzLIkI,CAAY3vC,GA0EhB,SAAqBA,GACnB,IAAsB,IAAlB2mC,EAAM9C,QACR,OACF,OAAQz5C,GACN,KAAKo9C,EAAMlC,OACT,IAA2B,IAAvBqB,EAAMmI,aACR,QAzPR,SAA+B9uC,GAC7B4qC,EAAUl/C,IAAIsU,EAAM0tC,QAAS1tC,EAAM2tC,SACnC9C,EAAYxI,WAAWuI,EAAWD,GAAapP,eAAeoL,EAAM2H,aACpE,IAAMjC,EAAU1F,EAAM5B,WAClBsH,IACFjE,EAAW,EAAI/sC,KAAKyF,GAAK+pC,EAAY50C,EAAIo2C,EAAQK,cACjDhB,EAAS,EAAIrwC,KAAKyF,GAAK+pC,EAAY30C,EAAIm2C,EAAQK,eAEjD/B,EAAYz/C,KAAK0/C,GACjBjE,EAAMrN,QACR,CAgPMsW,CAAsB5vC,GACtB,MACF,KAAKwnC,EAAMhC,MACT,IAAyB,IAArBmB,EAAM4G,WACR,QAnPR,SAA8BvtC,GAC5BkrC,EAASx/C,IAAIsU,EAAM0tC,QAAS1tC,EAAM2tC,SAClCxC,EAAW9I,WAAW6I,EAAUD,GAC5BE,EAAWj1C,EAAI,EACjBi3C,EAAS7B,KACAH,EAAWj1C,EAAI,GACxBs3C,EAAQlC,KAEVL,EAAW//C,KAAKggD,GAChBvE,EAAMrN,QACR,CA0OMuW,CAAqB7vC,GACrB,MACF,KAAKwnC,EAAM/B,IACT,IAAwB,IAApBkB,EAAMuG,UACR,QA7OR,SAA4BltC,GAC1B+qC,EAAOr/C,IAAIsU,EAAM0tC,QAAS1tC,EAAM2tC,SAChC3C,EAAS3I,WAAW0I,EAAQD,GAAUvP,eAAeoL,EAAM6H,UAC3DtC,EAAIlB,EAAS/0C,EAAG+0C,EAAS90C,GACzB40C,EAAS5/C,KAAK6/C,GACdpE,EAAMrN,QACR,CAwOMwW,CAAmB9vC,GAGzB,CA5FI+vC,CAAY/vC,GAEhB,CACA,SAASmqC,EAAYnqC,GACnB,IAAI8zB,EAAIC,EAAI8V,EACZmG,GAAchwC,GACU,IAApBorC,EAAS5hD,SACgB,OAA1BsqC,EAAK6S,EAAM5B,aAA+BjR,EAAGmc,sBAAsBjwC,EAAMkwC,WAC/C,OAA1Bnc,EAAK4S,EAAM5B,aAA+BhR,EAAGkW,cAAc3+C,oBAAoB,cAAe4+C,GACpE,OAA1BL,EAAKlD,EAAM5B,aAA+B8E,EAAGI,cAAc3+C,oBAAoB,YAAa6+C,IAE/FxD,EAAMpzB,cAAc82B,GACpBjgD,EAAQo9C,EAAMC,IAChB,CACA,SAASiC,EAAgB1pC,GACvBgwC,GAAchwC,EAChB,CA6EA,SAAS2pC,EAAa3pC,IACE,IAAlB2mC,EAAM9C,UAA0C,IAArB8C,EAAM4G,YAAwBnjD,IAAUo9C,EAAMC,MAAQr9C,IAAUo9C,EAAMlC,SAGrGtlC,EAAMmwC,iBACNxJ,EAAMpzB,cAAc62B,GAhPtB,SAA0BpqC,GACpBA,EAAMosC,OAAS,EACjBoB,EAAQlC,KACCtrC,EAAMosC,OAAS,GACxBe,EAAS7B,KAEX3E,EAAMrN,QACR,CA0OE8W,CAAiBpwC,GACjB2mC,EAAMpzB,cAAc82B,GACtB,CACA,SAASnD,GAAUlnC,IACK,IAAlB2mC,EAAM9C,UAAyC,IAApB8C,EAAMuG,WA7OvC,SAAuBltC,GACrB,IAAIsnB,GAAc,EAClB,OAAQtnB,EAAMqwC,MACZ,KAAK1J,EAAMx5C,KAAK+3C,GACdgH,EAAI,EAAGvF,EAAM2J,aACbhpB,GAAc,EACd,MACF,KAAKqf,EAAMx5C,KAAKi4C,OACd8G,EAAI,GAAIvF,EAAM2J,aACdhpB,GAAc,EACd,MACF,KAAKqf,EAAMx5C,KAAK83C,KACdiH,EAAIvF,EAAM2J,YAAa,GACvBhpB,GAAc,EACd,MACF,KAAKqf,EAAMx5C,KAAKg4C,MACd+G,GAAKvF,EAAM2J,YAAa,GACxBhpB,GAAc,EAGdA,IACFtnB,EAAMmwC,iBACNxJ,EAAMrN,SAEV,CAuNEiX,CAAcvwC,EAChB,CA8EA,SAASwpC,GAAcxpC,IACC,IAAlB2mC,EAAM9C,SAEV7jC,EAAMmwC,gBACR,CAIA,SAASH,GAAchwC,UACdqrC,EAAiBrrC,EAAMkwC,WAC9B,IAAK,IAAIrlD,EAAI,EAAGA,EAAIugD,EAAS5hD,OAAQqB,IACnC,GAAIugD,EAASvgD,GAAGqlD,WAAalwC,EAAMkwC,UAEjC,YADA9E,EAASrrC,OAAOlV,EAAG,EAIzB,CACA,SAAS+jD,GAAa5uC,GACpB,IAAItT,EAAW2+C,EAAiBrrC,EAAMkwC,gBACrB,IAAbxjD,IACFA,EAAW,IAAI2tC,EAAAA,QACfgR,EAAiBrrC,EAAMkwC,WAAaxjD,GAEtCA,EAAShB,IAAIsU,EAAM8tC,MAAO9tC,EAAM+tC,MAClC,CACA,SAASM,GAAyBruC,GAChC,IAAMwwC,EAAUxwC,EAAMkwC,YAAc9E,EAAS,GAAG8E,UAAY9E,EAAS,GAAKA,EAAS,GACnF,OAAOC,EAAiBmF,EAAQN,UAClC,CAGc,YAFK,IAAfnL,GACFr1C,EAAKu/B,QAAQ8V,GACfr1C,EAAK4pC,SAAS5pC,CAChB,CAAC,OAAAkC,EAAAA,EAAAA,GAAAizC,EAAA,CA/vBgB,CAAS4L,EAAAA,gHCHtB5L,EAA6BpO,EAAAA,YAAiB,SAAAhnC,EAUjDk0B,GAAQ,IATT+sB,EAAWjhD,EAAXihD,YACA1X,EAAMvpC,EAANupC,OACA2X,EAAOlhD,EAAPkhD,QACA5L,EAAUt1C,EAAVs1C,WAAU6L,EAAAnhD,EACV64C,cAAAA,OAAa,IAAAsI,GAAOA,EACpBC,EAAQphD,EAARohD,SACAC,EAAOrhD,EAAPqhD,QACAC,EAAKthD,EAALshD,MACGC,GAAStpB,EAAAA,EAAAA,GAAAj4B,EAAA0oC,GAENjM,GAAaC,EAAAA,EAAAA,IAAS,SAAA/hC,GAAK,OAAIA,EAAM8hC,UAAU,IAC/C+kB,GAAgB9kB,EAAAA,EAAAA,IAAS,SAAA/hC,GAAK,OAAIA,EAAM4uC,MAAM,IAC9CD,GAAK5M,EAAAA,EAAAA,IAAS,SAAA/hC,GAAK,OAAIA,EAAM2uC,EAAE,IAC/BrzC,GAASymC,EAAAA,EAAAA,IAAS,SAAA/hC,GAAK,OAAIA,EAAM1E,MAAM,IACvCgG,GAAMygC,EAAAA,EAAAA,IAAS,SAAA/hC,GAAK,OAAIA,EAAMsB,GAAG,IACjCD,GAAM0gC,EAAAA,EAAAA,IAAS,SAAA/hC,GAAK,OAAIA,EAAMqB,GAAG,IACjC8zB,GAAc4M,EAAAA,EAAAA,IAAS,SAAA/hC,GAAK,OAAIA,EAAMm1B,WAAW,IACjD2xB,EAAalY,GAAUiY,EACvBE,EAAiBpM,GAAcr/C,EAAO0rD,WAAarY,EAAGgM,WACtDsM,EAAW5a,EAAAA,SAAc,kBAAM,IAAI6a,EAAgBJ,EAAW,GAAE,CAACA,IAmCvE,OAlCAniB,EAAAA,EAAAA,IAAS,WACHsiB,EAASxN,SAASwN,EAAS/X,QACjC,IAAI,GACJ7C,EAAAA,WAAgB,WAEd,OADA4a,EAASpiB,QAAQkiB,GACV,WAAWE,EAASzH,SAAS,CACtC,GAAG,CAACuH,EAAgBR,EAASU,EAAUnlB,IACvCuK,EAAAA,WAAgB,WACd,IAAMxmB,EAAW,SAAA/b,GACfg4B,IACIykB,GAASpxB,EAAYoxB,UACrBE,GAAUA,EAAS38C,EACzB,EAKA,OAHAm9C,EAASlmD,iBAAiB,SAAU8kB,GAChC6gC,GAASO,EAASlmD,iBAAiB,QAAS2lD,GAC5CC,GAAOM,EAASlmD,iBAAiB,MAAO4lD,GACrC,WACDD,GAASO,EAAS/lD,oBAAoB,QAASwlD,GAC/CC,GAAOM,EAAS/lD,oBAAoB,MAAOylD,GAC/CM,EAAS/lD,oBAAoB,SAAU2kB,EACzC,CACF,GAAG,CAAC4gC,EAAUC,EAASC,EAAOM,EAAUnlB,IACxCuK,EAAAA,WAAgB,WACd,GAAIia,EAAa,CACf,IAAMa,EAAM9lD,IAAM4lD,SAIlB,OAHA3lD,EAAI,CACF2lD,SAAAA,IAEK,kBAAM3lD,EAAI,CACf2lD,SAAUE,GACV,CACJ,CACF,GAAG,CAACb,EAAaW,IACG5a,EAAAA,cAAoB,aAAauD,EAAAA,EAAAA,GAAS,CAC5DrW,IAAKA,EACLsB,OAAQosB,EACR/I,cAAeA,GACd0I,GACL,8IC5DMtP,EAAiCjL,EAAAA,YAAiB,SAAAhnC,EAGrDk0B,GAAQ,IAFT+sB,EAAWjhD,EAAXihD,YACG3+C,GAAK21B,EAAAA,EAAAA,GAAAj4B,EAAA0oC,GAEFzsC,GAAMygC,EAAAA,EAAAA,IAAS,SAAAn6B,GAChB,OAAAA,EAAHtG,GACO,IACHstC,GAAS7M,EAAAA,EAAAA,IAAS,SAAAj6B,GAChB,OAAAA,EAAN8mC,MACU,IACNhoC,GAAOm7B,EAAAA,EAAAA,IAAS,SAAA35B,GAChB,OAAAA,EAAJxB,IACQ,IACJwgD,EAAY/a,EAAAA,OAAa,MAsB/B,OArBAA,EAAAA,iBAAsB,WACf1kC,EAAM0/C,SACTD,EAAUptB,QAAQstB,OAAS1gD,EAAKygC,MAAQzgC,EAAK0gC,OAEjD,GAAG,CAAC1gC,EAAMe,IACV0kC,EAAAA,iBAAsB,WACpB+a,EAAUptB,QAAQkjB,wBACpB,IACA7Q,EAAAA,iBAAsB,WACpB,GAAIia,EAAa,CACf,IAAMiB,EAAS3Y,EAIf,OAHAttC,GAAI,iBAAO,CACTstC,OAAQwY,EAAUptB,QACnB,IACM,kBAAM14B,GAAI,iBAAO,CACtBstC,OAAQ2Y,EACT,GAAE,CACL,CAGF,GAAG,CAACH,EAAWd,EAAahlD,IACR+qC,EAAAA,cAAoB,qBAAqBuD,EAAAA,EAAAA,GAAS,CACpErW,KAAK0gB,EAAAA,EAAAA,GAAU,CAACmN,EAAW7tB,KAC1B5xB,GACL,mhBCzCA,SAAS6/C,EAAYC,GACnB,IAAIznD,EACEiC,EAA4B,IAAIylD,IAChCC,EAAW,SAACC,EAASpd,GACzB,IAAMqd,EAA+B,oBAAZD,EAAyBA,EAAQ5nD,GAAS4nD,EACnE,GAAIC,IAAc7nD,EAAO,CACvB,IAAM8nD,EAAgB9nD,EACtBA,EAAQwqC,EAAUqd,EAAY1rD,OAAO4rD,OAAO,CAAC,EAAG/nD,EAAO6nD,GACvD5lD,EAAUu7B,SAAQ,SAACn/B,GAAQ,OAAKA,EAAS2B,EAAO8nD,EAAc,GAChE,CACF,EACME,EAAW,WAAH,OAAShoD,CAAK,EAsBtB29B,EAAM,CAAEgqB,SAAAA,EAAUK,SAAAA,EAAUxtB,UARhB,SAACn8B,EAAU4pD,EAAUC,GACrC,OAAID,GAAYC,EAdY,SAAC7pD,GAA0D,IAAhD4pD,EAAQxqD,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAGuqD,EAAUE,EAAUzqD,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAGtB,OAAOgsD,GAChFzoD,QAAQC,KAAK,8DACb,IAAIyoD,EAAeH,EAASjoD,GAC5B,SAASqoD,IACP,IAAMC,EAAYL,EAASjoD,GAC3B,IAAKkoD,EAAWE,EAAcE,GAAY,CACxC,IAAMC,EAAgBH,EACtB/pD,EAAS+pD,EAAeE,EAAWC,EACrC,CACF,CAEA,OADAtmD,EAAU0iB,IAAI0jC,GACP,kBAAMpmD,EAAUumD,OAAOH,EAAc,CAC9C,CAGWI,CAAsBpqD,EAAU4pD,EAAUC,IAEnDjmD,EAAU0iB,IAAItmB,GACP,kBAAM4D,EAAUumD,OAAOnqD,EAAS,EACzC,EAE6CqqD,QAD7B,WAAH,OAASzmD,EAAU83C,OAAO,GAGvC,OADA/5C,EAAQynD,EAAYE,EAAUK,EAAUrqB,GACjCA,CACT,CAEA,IACMgrB,EAD0B,qBAAXC,SAA2BA,OAAOC,WAAa,8BAA8B1wC,KAAKywC,OAAOC,UAAUC,WAC9ElkB,EAAAA,UAAYrI,EAAAA,gBACtD,SAASx9B,EAAO0oD,GACd,IAAM9pB,EAA6B,oBAAhB8pB,EAA6BD,EAAYC,GAAeA,EACrEsB,EAAW,WAAqD,IAWhEC,EAXYf,EAAQxqD,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAGkgC,EAAIqqB,SAAUE,EAAUzqD,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAGtB,OAAOgsD,GAC7Dc,GAAwBC,EAAAA,EAAAA,aAAW,SAACj1C,GAAC,OAAKA,EAAI,CAAC,GAAE,GAAxCk1C,GAA0CnhD,EAAAA,EAAAA,GAAAihD,EAAA,GAA/B,GACdjpD,EAAQ29B,EAAIqqB,WACZoB,GAAW3vB,EAAAA,EAAAA,QAAOz5B,GAClBqpD,GAAc5vB,EAAAA,EAAAA,QAAOwuB,GACrBqB,GAAgB7vB,EAAAA,EAAAA,QAAOyuB,GACvBqB,GAAa9vB,EAAAA,EAAAA,SAAO,GACpB+vB,GAAkB/vB,EAAAA,EAAAA,eACQ,IAA5B+vB,EAAgBxvB,UAClBwvB,EAAgBxvB,QAAUiuB,EAASjoD,IAGrC,IAAIypD,GAAmB,GACnBL,EAASpvB,UAAYh6B,GAASqpD,EAAYrvB,UAAYiuB,GAAYqB,EAActvB,UAAYkuB,GAAcqB,EAAWvvB,WACvHgvB,EAAgBf,EAASjoD,GACzBypD,GAAoBvB,EAAWsB,EAAgBxvB,QAASgvB,IAE1DL,GAA0B,WACpBc,IACFD,EAAgBxvB,QAAUgvB,GAE5BI,EAASpvB,QAAUh6B,EACnBqpD,EAAYrvB,QAAUiuB,EACtBqB,EAActvB,QAAUkuB,EACxBqB,EAAWvvB,SAAU,CACvB,IACA,IAAM0vB,GAA6BjwB,EAAAA,EAAAA,QAAOz5B,GAC1C2oD,GAA0B,WACxB,IAAMtqD,EAAW,WACf,IACE,IAAMwpD,EAAYlqB,EAAIqqB,WAChB2B,EAAiBN,EAAYrvB,QAAQ6tB,GACtCyB,EAActvB,QAAQwvB,EAAgBxvB,QAAS2vB,KAClDP,EAASpvB,QAAU6tB,EACnB2B,EAAgBxvB,QAAU2vB,EAC1BR,IAEJ,CAAE,MAAOvnD,GACP2nD,EAAWvvB,SAAU,EACrBmvB,GACF,CACF,EACMxuB,EAAcgD,EAAInD,UAAUn8B,GAIlC,OAHIs/B,EAAIqqB,aAAe0B,EAA2B1vB,SAChD37B,IAEKs8B,CACT,GAAG,IACH,IAAMivB,EAAgBH,EAAmBT,EAAgBQ,EAAgBxvB,QAEzE,OADA6vB,EAAAA,EAAAA,eAAcD,GACPA,CACT,EAYA,OAXAztD,OAAO4rD,OAAOgB,EAAUprB,GACxBorB,EAASe,OAAOC,UAAY,WAC1BrqD,QAAQC,KAAK,sEACb,IAAMqqD,EAAQ,CAACjB,EAAUprB,GACzB,MAAO,CACLssB,KAAI,WACF,IAAMpgD,EAAOmgD,EAAM5qD,QAAU,EAC7B,MAAO,CAAE1C,MAAOstD,EAAMxnD,QAASqH,KAAAA,EACjC,EAEJ,EACOk/C,CACT,iCC5GA,SAASmB,EAAmBC,EAAMC,GAAiC,IAA3BC,EAAK5sD,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,SAACuW,EAAG/E,GAAC,OAAK+E,IAAM/E,CAAC,EAC/D,GAAIk7C,IAASC,EAAM,OAAO,EAC1B,IAAKD,IAASC,EAAM,OAAO,EAC3B,IAAMpoD,EAAMmoD,EAAK/qD,OACjB,GAAIgrD,EAAKhrD,SAAW4C,EAAK,OAAO,EAEhC,IAAK,IAAIvB,EAAI,EAAGA,EAAIuB,EAAKvB,IAAK,IAAK4pD,EAAMF,EAAK1pD,GAAI2pD,EAAK3pD,IAAK,OAAO,EAEnE,OAAO,CACT,CAEA,IAAM6pD,EAAc,GAEpB,SAASC,EAAMxuB,EAAIh5B,GACjB,IADqD,IAA9BynD,EAAO/sD,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,IAAAA,UAAA,GAAU0J,EAAM1J,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,CAAC,EAClDgtD,EAAA,EAAAC,EAAoBJ,EAAWG,EAAAC,EAAAtrD,OAAAqrD,IAAE,CAA5B,IAAME,EAAKD,EAAAD,GAEd,GAAIP,EAAmBnnD,EAAM4nD,EAAM5nD,KAAM4nD,EAAMN,OAAQ,CAErD,GAAIG,EAAS,OAEb,GAAIruD,OAAOH,UAAU4uD,eAAe3uD,KAAK0uD,EAAO,SAAU,MAAMA,EAAM/oD,MAEtE,GAAIzF,OAAOH,UAAU4uD,eAAe3uD,KAAK0uD,EAAO,YAAa,OAAOA,EAAME,SAE1E,IAAKL,EAAS,MAAMG,EAAMG,OAC5B,CACF,CAGA,IAAMH,EAAQ,CACZ5nD,KAAAA,EACAsnD,MAAOljD,EAAOkjD,MACdS,QACA/uB,EAAEpgC,WAAC,GAAD0/B,EAAAA,EAAAA,GAAIt4B,IACLgoD,MAAK,SAAAF,GAAQ,OAAIF,EAAME,SAAWA,CAAQ,IAC1CE,MAAK,WACA5jD,EAAO6jD,UAAY7jD,EAAO6jD,SAAW,GACvCC,YAAW,WACT,IAAMxoD,EAAQ6nD,EAAYlmD,QAAQumD,IACnB,IAAXloD,GAAc6nD,EAAY30C,OAAOlT,EAAO,EAC9C,GAAG0E,EAAO6jD,SAEd,IACCE,OAAM,SAAAtpD,GAAK,OAAI+oD,EAAM/oD,MAAQA,CAAK,KAKrC,GAFA0oD,EAAYnrD,KAAKwrD,IAEZH,EAAS,MAAMG,EAAMG,OAE5B,CAEA,ICxCIK,EAAkBC,EDwChBC,EAAU,SAACtvB,EAAIh5B,EAAMoE,GAAM,OAAKojD,EAAMxuB,EAAIh5B,GAAM,EAAOoE,EAAO,yJCvC9Dq7C,EAAuB,SAAA5Y,GAAG,OAAIA,GAAOA,EAAI4Y,oBAAoB,EAC7D8I,EAAQ,SAAAvf,GAAG,OAAIA,GAAOA,EAAI6e,eAAe,UAAU,EAWnDjC,EAA8C,qBAAXC,SAAmE,OAAvCuC,EAAmBvC,OAAO3J,WAAqBkM,EAAiBI,eAA2G,iBAA/C,OAAzCH,EAAoBxC,OAAOC,gBAAqB,EAASuC,EAAkBI,UAA8Bnf,EAAAA,gBAAwBA,EAAAA,UACzR,SAASof,EAAmB1vB,GAC1B,IAAMxC,EAAM8S,EAAAA,OAAatQ,GAEzB,OADA4sB,GAA0B,WAAYpvB,EAAIS,QAAU+B,CAAG,GAAE,CAACA,IACnDxC,CACT,CACA,SAASmyB,EAAKrmD,GAEX,IADD/D,EAAG+D,EAAH/D,IAMA,OAJAqnD,GAA0B,WAExB,OADArnD,EAAI,IAAIrE,SAAQ,kBAAM,IAAI,KACnB,kBAAMqE,GAAI,EAAM,CACzB,GAAG,CAACA,IACG,IACT,CAAC,IACKqqD,EAAa,SAAAC,IAAA1mD,EAAAA,EAAAA,GAAAymD,EAAAC,GAAA,IAAAzmD,GAAAC,EAAAA,EAAAA,GAAAumD,GACjB,SAAAA,IAAqB,IAAArmD,GAAAC,EAAAA,EAAAA,GAAA,KAAAomD,GAAA,QAAAE,EAAApuD,UAAA2B,OAANtD,EAAI,IAAA0E,MAAAqrD,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAJhwD,EAAIgwD,GAAAruD,UAAAquD,GAIf,OAHFxmD,EAAAH,EAAAlJ,KAAAN,MAAAwJ,EAAA,OAAA7I,OAASR,KACJkE,MAAQ,CACX4B,OAAO,GACP0D,CACJ,CAQC,OARAkC,EAAAA,EAAAA,GAAAmkD,EAAA,EAAA7oD,IAAA,oBAAApG,MAED,SAAkBW,GAChBR,KAAK8K,MAAMrG,IAAIjE,EACjB,GAAC,CAAAyF,IAAA,SAAApG,MAED,WACE,OAAOG,KAAKmD,MAAM4B,MAAQ,KAAO/E,KAAK8K,MAAMi5B,QAC9C,KAAC+qB,CAAA,CAdgB,CAAStf,EAAAA,WAkB5Bsf,EAAcI,yBAA2B,iBAAO,CAC9CnqD,OAAO,EACR,EAED,IAAMoqD,EAAU,YACVC,EAAY,SAAAriB,GAAG,OAAIA,KAASA,EAAIsiB,YAActiB,EAAIuiB,OAAO,EAC/D,SAASC,EAAaC,GACpB,IAAMzwD,EAA2B,qBAAXgtD,OAAyBA,OAAO0D,iBAAmB,EACzE,OAAO9rD,MAAM0sC,QAAQmf,GAAOp7C,KAAKsC,IAAItC,KAAKuC,IAAI64C,EAAI,GAAIzwD,GAASywD,EAAI,IAAMA,CAC3E,CAKA,IAAME,EAAe,SAAAxgB,GACnB,IAAIygB,EAEJ,OAA6B,OAArBA,EAAOzgB,EAAI4L,YAAiB,EAAS6U,EAAKC,KAAKzE,UACzD,EAEMG,EAAK,CACTpc,IAAK,SAAA/3B,GAAC,OAAIA,IAAM7X,OAAO6X,KAAOm0C,EAAG7nD,IAAI0T,IAAmB,oBAANA,CAAgB,EAClE04C,IAAK,SAAA14C,GAAC,MAAiB,oBAANA,CAAgB,EACjC2lB,IAAK,SAAA3lB,GAAC,MAAiB,kBAANA,CAAc,EAC/B24C,IAAK,SAAA34C,GAAC,MAAiB,kBAANA,CAAc,EAC/B44C,IAAK,SAAA54C,GAAC,MAAiB,mBAANA,CAAe,EAChC64C,IAAK,SAAA74C,GAAC,YAAU,IAANA,CAAY,EACtB1T,IAAK,SAAA0T,GAAC,OAAIxT,MAAM0sC,QAAQl5B,EAAE,EAE1B84C,IAAG,SAAC94C,EAAG/E,GAIC,IAAArH,EAAAnK,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAJ,CAAC,EAACsvD,EAAAnlD,EAHJolD,OAAAA,OAAM,IAAAD,EAAG,UAASA,EAAAE,EAAArlD,EAClBslD,QAAAA,OAAO,IAAAD,EAAG,YAAWA,EAAAE,EAAAvlD,EACrBwlD,OAAAA,OAAM,IAAAD,GAAOA,EAGb,UAAWn5C,WAAa/E,KAAO+E,MAAQ/E,EAAG,OAAO,EAEjD,GAAIk5C,EAAGxuB,IAAI3lB,IAAMm0C,EAAGwE,IAAI34C,GAAI,OAAOA,IAAM/E,EACzC,IAAMo+C,EAAQlF,EAAGpc,IAAI/3B,GACrB,GAAIq5C,GAAqB,cAAZH,EAAyB,OAAOl5C,IAAM/E,EACnD,IAKIxO,EALE6sD,EAAQnF,EAAG7nD,IAAI0T,GACrB,GAAIs5C,GAAoB,cAAXN,EAAwB,OAAOh5C,IAAM/E,EAElD,IAAKq+C,GAASD,IAAUr5C,IAAM/E,EAAG,OAAO,EAIxC,IAAKxO,KAAKuT,EAAG,KAAMvT,KAAKwO,GAAI,OAAO,EAEnC,IAAKxO,KAAK2sD,EAASn+C,EAAI+E,EAAG,GAAIA,EAAEvT,KAAOwO,EAAExO,GAAI,OAAO,EAEpD,GAAI0nD,EAAG0E,IAAIpsD,GAAI,CACb,GAAI6sD,GAAsB,IAAbt5C,EAAE5U,QAA6B,IAAb6P,EAAE7P,OAAc,OAAO,EACtD,GAAIiuD,GAAmC,IAA1BlxD,OAAO4G,KAAKiR,GAAG5U,QAA0C,IAA1BjD,OAAO4G,KAAKkM,GAAG7P,OAAc,OAAO,EAChF,GAAI4U,IAAM/E,EAAG,OAAO,CACtB,CAEA,OAAO,CACT,GAIF,SAASs+C,EAAW1yB,GAClB,IAAMrxB,EAAO,CACXgkD,MAAO,CAAC,EACRC,UAAW,CAAC,GAUd,OAPI5yB,GACFA,EAAO6yB,UAAS,SAAA3hB,GACVA,EAAI/uC,OAAMwM,EAAKgkD,MAAMzhB,EAAI/uC,MAAQ+uC,GACjCA,EAAIhyB,WAAavQ,EAAKikD,UAAU1hB,EAAIhyB,SAAS/c,QAAOwM,EAAKikD,UAAU1hB,EAAIhyB,SAAS/c,MAAQ+uC,EAAIhyB,SAClG,IAGKvQ,CACT,CAWA,SAASoxB,EAAQC,EAAQ76B,GACvB,IAAM2tD,EAAW9yB,EAgBjB,OAda,MAAT76B,GAAiBA,EAAM4tD,YAAcD,EAAShW,SAChDgW,EAAShW,OAAKxa,EAAAA,EAAAA,GAAA,CACZz+B,KAAM,GACN+tD,KAAM,KACNoB,eAAgB,KAChBC,cAAe,CAAC,EAChBC,WAAY,EACZC,SAAU,CAAC,EACXd,QAAS,GACTxV,OAAQ,MACL13C,IAIA66B,CACT,CAEA,SAAS39B,EAAQywD,EAAU7qD,GACzB,IAAIlH,EAAS+xD,EAEb,GAAI7qD,EAAI4S,SAAS,KAAM,CACrB,IAAMu4C,EAAUnrD,EAAIorD,MAAM,KACpBC,EAAOF,EAAQvrD,MAErB,OADA9G,EAASqyD,EAAQG,QAAO,SAACC,EAAKvrD,GAAG,OAAKurD,EAAIvrD,EAAI,GAAE6qD,GACzC,CACL/xD,OAAAA,EACAkH,IAAKqrD,EAET,CAAO,MAAO,CACZvyD,OAAAA,EACAkH,IAAAA,EAEJ,CAGA,IAAMwrD,EAAc,QACpB,SAAStU,GAAOtC,EAAQ6W,EAAO7vD,GAC7B,GAAIypD,EAAGxuB,IAAIj7B,GAAO,CAEhB,GAAI4vD,EAAYn2C,KAAKzZ,GAAO,CAC1B,IACA8vD,EAGItxD,EAAQw6C,EAJCh5C,EAAK8rC,QAAQ8jB,EAAa,KAErC1yD,EAAM4yD,EAAN5yD,OACAkH,EAAG0rD,EAAH1rD,IAEGtC,MAAM0sC,QAAQtxC,EAAOkH,MAAOlH,EAAOkH,GAAO,GACjD,CAEA,IAAA2rD,EAGIvxD,EAAQw6C,EAAQh5C,GAFlB9C,EAAM6yD,EAAN7yD,OACAkH,EAAG2rD,EAAH3rD,IAEFyrD,EAAM5W,MAAMkW,eAAiBjyD,EAAOkH,GACpClH,EAAOkH,GAAOyrD,CAChB,MAAOA,EAAM5W,MAAMkW,eAAiBnvD,EAAKg5C,EAAQ6W,EACnD,CACA,SAASG,GAAOhX,EAAQ6W,EAAO7vD,GAC7B,IAAIiwD,EAAcC,EAElB,GAAIzG,EAAGxuB,IAAIj7B,GAAO,CAChB,IAAAmwD,EAGI3xD,EAAQw6C,EAAQh5C,GAFlB9C,EAAMizD,EAANjzD,OACAkH,EAAG+rD,EAAH/rD,IAEIgsD,EAAWP,EAAM5W,MAAMkW,oBAEZ7vD,IAAb8wD,SAA+BlzD,EAAOkH,GACrClH,EAAOkH,GAAOgsD,CACrB,MAAuC,OAA/BH,EAAeJ,EAAM5W,QAAyD,MAA/BgX,EAAad,gBAAkCc,EAAad,eAAenW,EAAQ6W,GAEzG,OAAhCK,EAAgBL,EAAM5W,eAA+BiX,EAAcf,cACtE,CAEA,SAASkB,GAAUpB,EAAQ7lD,GACbA,EAAZ84B,SACO94B,EAAPhF,IACOgF,EAAPyxB,IAOsB,IAClBy1B,EAPDrnD,GAAK21B,EAAAA,EAAAA,GAAAx1B,EAAAimC,GAAA3lC,EAAA3K,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAMN,CAAC,EADAqxD,GAHS1mD,EAAZw4B,SACOx4B,EAAPtF,IACOsF,EAAPmxB,KACW+D,EAAAA,EAAAA,GAAAl1B,EAAA6mD,IACLxxB,EAAMhgC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,IAAAA,UAAA,GAGNyxD,EAA+E,OAAjEF,EAA8B,MAAZrB,OAAmB,EAASA,EAAShW,OAAiBqX,EAAkB,CAAC,EACzGf,EAAU9xD,OAAO8xD,QAAQtmD,GACzBwkD,EAAU,GAEhB,GAAI1uB,EAGF,IAFA,IAAM0xB,EAAehzD,OAAO4G,KAAK+rD,GAExBruD,EAAI,EAAGA,EAAI0uD,EAAa/vD,OAAQqB,IAClCkH,EAAMijD,eAAeuE,EAAa1uD,KAAKwtD,EAAQ/uD,QAAQ,CAACiwD,EAAa1uD,GAAIurD,EAAU,WAI5FiC,EAAQzwB,SAAQ,SAAAn1B,GAAkB,IAC5B+mD,EAD4B9mD,GAAAN,EAAAA,EAAAA,GAAAK,EAAA,GAAhBvF,EAAGwF,EAAA,GAAE5L,EAAK4L,EAAA,GAI1B,IAA2C,OAAtC8mD,EAAmBzB,EAAShW,SAAkByX,EAAiBxB,WAAqB,WAAR9qD,KAE7EqlD,EAAG2E,IAAIpwD,EAAOoyD,EAAShsD,IAA3B,CAEA,GAAI,mDAAmDqV,KAAKrV,GAAM,OAAOqpD,EAAQhtD,KAAK,CAAC2D,EAAKpG,GAAO,EAAM,KAEzG,IAAIuxD,EAAU,GAId,IAAK,IAAMoB,KAHPvsD,EAAI4S,SAAS,OAAMu4C,EAAUnrD,EAAIorD,MAAM,MAC3C/B,EAAQhtD,KAAK,CAAC2D,EAAKpG,GAAO,EAAOuxD,IAEdtmD,EAAO,CACxB,IAAMjL,EAAQiL,EAAM0nD,GAChBA,EAAKC,WAAW,GAADhzD,OAAIwG,EAAG,OAAMqpD,EAAQhtD,KAAK,CAACkwD,EAAM3yD,GAAO,EAAO2yD,EAAKnB,MAAM,MAC/E,CAXwC,CAY1C,IACA,IAAMhC,GAAQ/uB,EAAAA,EAAAA,GAAA,GAAQx1B,GAItB,OAFIunD,EAAWpB,eAAiBoB,EAAWpB,cAAchyD,OAAMowD,EAASpwD,KAAOozD,EAAWpB,cAAchyD,MACpGozD,EAAWpB,eAAiBoB,EAAWpB,cAAc9T,SAAQkS,EAASlS,OAASkV,EAAWpB,cAAc9T,QACrG,CACLkS,SAAAA,EACAC,QAAAA,EAEJ,CAEA,SAASoD,GAAa5B,EAAUnkD,GAC9B,IAAIgmD,EAAkBC,EAAgBC,EChRPpvD,EDmRzB4uD,EAAoD,OAAtCM,EAAmB7B,EAAShW,OAAiB6X,EAAmB,CAAC,EAC/E/C,EAAOyC,EAAWzC,KAClBkD,EAA2G,OAA9FF,EAAyB,MAARhD,GAAyC,MAAjBA,EAAKzE,cAAd,EAA0CyE,EAAKzE,YAAsByH,EAAiB,CAAC,EAC1I3mD,EAGImjD,EAAUziD,GAAQA,EAAOulD,GAAUpB,EAAUnkD,GAF/C0iD,EAAQpjD,EAARojD,SACAC,EAAOrjD,EAAPqjD,QAEIyD,EAAeV,EAAWnB,WAE5BJ,EAAShW,QAAOgW,EAAShW,MAAMmW,cAAgB5B,GAEnD,IAAK,IAAIzrD,EAAI,EAAGA,EAAI0rD,EAAQ/sD,OAAQqB,IAAK,CACvC,IAqBQovD,EArBRC,GAAA9nD,EAAAA,EAAAA,GAAkCmkD,EAAQ1rD,GAAE,GAAvCqC,EAAGgtD,EAAA,GAAEpzD,EAAKozD,EAAA,GAAEC,EAAOD,EAAA,GAAE/sD,EAAI+sD,EAAA,GAC1BE,EAAkBrC,EAClBsC,EAAaD,EAAgBltD,GAEjC,GAAIC,EAAK3D,SACP6wD,EAAaltD,EAAKqrD,QAAO,SAACC,EAAKvrD,GAAG,OAAKurD,EAAIvrD,EAAI,GAAE6qD,IAE3CsC,IAAcA,EAAW3uD,KAAM,CACnC,IAAA4uD,EAAkCntD,EAAKotD,UAASC,GCvSvB9vD,EDuSuB4vD,GCtS/C,EAAAG,EAAA,GAAe/vD,KAAQ,EAAAgwD,EAAA,GAAgBhwD,KAAQ,EAAAiwD,EAAA,GAA2BjwD,KAAQ,EAAAkwD,EAAA,MDsS5ExzD,EAAIozD,EAAA,GACXJ,EAD8BI,EAAA5yD,MAAA,GACG2yD,UAAU/B,QAAO,SAACC,EAAKvrD,GAAG,OAAKurD,EAAIvrD,EAAI,GAAE6qD,GAC1E7qD,EAAM9F,CACR,CAQF,GAAIN,IAAUsvD,EAAU,SACtB,GAAIiE,GAAcA,EAAWQ,YAI3B/zD,GAAK8hC,EAAAA,EAAAA,GAAOyxB,EAAWQ,aAAWp1B,EAAAA,EAAAA,GAAyC,OAAnCw0B,EAAiB3D,EAASpwD,MAAgB+zD,EAAiB,UAC9F,GAAIG,EAAgBS,YAAa,CACtC,IAAIC,EAIEC,GAAgBnyB,EAAAA,EAAAA,GAAOwxB,EAAgBS,aAAWp1B,EAAAA,EAAAA,GAA0E,OAApEq1B,EAAuBV,EAAgBrY,MAAMmW,cAAchyD,MAAgB40D,EAAuB,KAChKh0D,EAAQi0D,EAAiBV,GAErBU,EAAiBnR,SAASmR,EAAiBnR,SACjD,MACE9iD,EAAQ,EAKZ,GAAIqzD,EACErzD,EAAOwyD,EAAWlB,SAASlrD,GAAOpG,SAAkBwyD,EAAWlB,SAASlrD,GAC5EosD,EAAWnB,WAAa5xD,OAAO4G,KAAKmsD,EAAWlB,UAAU5uD,YAEtD,GAAI6wD,GAAcA,EAAW3uD,MAAQ2uD,EAAWnvD,MAAQmvD,aAAsBW,EAAAA,QAAe,CAEtE,IAAAC,EAA1B,GAAIrwD,MAAM0sC,QAAQxwC,GACZuzD,EAAW51B,UAAW41B,EAAW51B,UAAU39B,IAAYm0D,EAAAZ,GAAW3uD,IAAG3F,MAAAk1D,GAAAx1B,EAAAA,EAAAA,GAAI3+B,SAE1E,GAAIuzD,EAAWnvD,MAAQpE,GAASA,EAAM+zD,aAAeR,EAAWQ,YAAYzzD,OAASN,EAAM+zD,YAAYzzD,KAC1GizD,EAAWnvD,KAAKpE,QAGb,QAAcsB,IAAVtB,EAAqB,CAC5B,IAAMo0D,EAAUb,aAAsBW,EAAAA,OAEjCE,GAAWb,EAAWc,UAAWd,EAAWc,UAAUr0D,GAClDuzD,aAAsBW,EAAAA,QAAgBl0D,aAAiBk0D,EAAAA,OAAcX,EAAWe,KAAOt0D,EAAMs0D,KACjGf,EAAW3uD,IAAI5E,GAIY,CAElC,CAEF,MACEszD,EAAgBltD,GAAOpG,GAGlBizD,EAAUsB,QAAUjB,EAAgBltD,aAAgB8tD,EAAAA,UACvDZ,EAAgBltD,GAAKmmC,SAAW2nB,EAAAA,cAIpCM,GAAmBvD,EACrB,CAEA,GAAIuB,EAAWxX,QAAUiY,EAAUwB,UAAYxD,EAASyD,SAAWxB,IAAiBV,EAAWnB,WAAY,CAEzG,IAAMtrD,EAAQktD,EAAUwB,SAASE,YAAYjtD,QAAQupD,GACjDlrD,GAAS,GAAGktD,EAAUwB,SAASE,YAAY17C,OAAOlT,EAAO,GAEzDysD,EAAWnB,YAAY4B,EAAUwB,SAASE,YAAYlyD,KAAKwuD,EACjE,CAIA,OADIxB,EAAQ/sD,QAAiD,OAAtCswD,EAAmB/B,EAAShW,QAAkB+X,EAAiBhY,QAAQ4Z,GAAe3D,GACtGA,CACT,CACA,SAASuD,GAAmBvD,GAC1B,IAAI4D,EAAkBC,EAEhBxxD,EAA+C,OAAtCuxD,EAAmB5D,EAAShW,QAA6E,OAAlD6Z,EAAwBD,EAAiB9E,OAA2D,MAAlC+E,EAAsBxJ,cAAlG,EAA8HwJ,EAAsBxJ,WAC5MhoD,GAAmC,IAA1BA,EAAMmxD,SAAS3iB,QAAcxuC,EAAM8hC,YAClD,CACA,SAASwvB,GAAe3D,GACD,MAArBA,EAAS8D,UAA4B9D,EAAS8D,SAAS9D,EACzD,CACA,SAAS+D,GAAa9iB,EAAQhoC,GAGvBgoC,EAAOyY,SACN7E,EAAqB5T,IACvBA,EAAO8T,KAAO97C,EAAKygC,OAAS,EAC5BuH,EAAO6T,MAAQ77C,EAAKygC,MAAQ,EAC5BuH,EAAOgU,IAAMh8C,EAAK0gC,OAAS,EAC3BsH,EAAOiU,OAASj8C,EAAK0gC,QAAU,GAE/BsH,EAAO0Y,OAAS1gD,EAAKygC,MAAQzgC,EAAK0gC,OAGpCsH,EAAOsO,yBAGPtO,EAAOyJ,oBAEX,CAWA,SAASsZ,GAAO/7C,GACd,OAAQA,EAAMg8C,aAAeh8C,EAAMilB,QAAQhzB,KAAO,IAAM+N,EAAMnT,MAAQmT,EAAMi8C,UAC9E,CAuCA,SAASC,GAA8BC,EAAahmB,EAAKimB,EAAUlM,GACjE,IAAMmM,EAAcD,EAAS3wD,IAAI0qC,GAE7BkmB,IACFD,EAASxJ,OAAOzc,GAEM,IAAlBimB,EAASprD,OACXmrD,EAAYvJ,OAAO1C,GACnBmM,EAAYr2D,OAAOiqD,sBAAsBC,IAG/C,CAmBA,SAASoM,GAAaC,GAapB,SAASC,EAAoBlF,GAC3B,OAAOA,EAAQmF,QAAO,SAAAtmB,GAAG,MAAI,CAAC,OAAQ,OAAQ,QAAS,MAAO,SAASumB,MAAK,SAAAt1D,GAC1E,IAAIwvD,EAEJ,OAA6B,OAArBA,EAAOzgB,EAAI4L,YAAiB,EAAS6U,EAAKwB,SAAS,YAAchxD,EAC3E,GAAE,GACJ,CAqMA,SAASu1D,EAAcC,GACrB,IAIkDC,EAHhDtB,EACEgB,EAAMnK,WADRmJ,SACmBuB,GAAA/oD,EAAAA,EAAAA,GAEIwnD,EAASwB,QAAQxuB,UAAQ,QAAAyuB,EAAA,WAAE,IAAzCC,EAAUJ,EAAA/1D,MAGnB,IAAK81D,EAAcpzD,SAAWozD,EAAcM,MAAK,SAAAC,GAAG,OAAIA,EAAIl4B,SAAWg4B,EAAWh4B,QAAUk4B,EAAItwD,QAAUowD,EAAWpwD,OAASswD,EAAIlB,aAAegB,EAAWhB,UAAU,IAAG,CACvK,IACMlE,EADckF,EAAWjB,YACFja,MACvBqW,EAAuB,MAAZL,OAAmB,EAASA,EAASK,SAGtD,GAFAmD,EAASwB,QAAQnK,OAAOmJ,GAAOkB,IAEf,MAAZlF,GAAoBA,EAASI,WAAY,CAE3C,IAAMvkD,GAAI2zB,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAQ01B,GAAU,IAC1BL,cAAAA,IAEuB,MAAzBxE,EAASgF,cAAgChF,EAASgF,aAAaxpD,GACpC,MAA3BwkD,EAASiF,gBAAkCjF,EAASiF,eAAezpD,EACrE,CACF,CACF,EAlBA,IAAAkpD,EAAA9oD,MAAA6oD,EAAAC,EAAA7xD,KAAAgJ,MAAA+oD,GAkBC,OAAAv1D,GAAAq1D,EAAA5oD,EAAAzM,EAAA,SAAAq1D,EAAA3oD,GAAA,CACH,CAEA,SAASmpD,EAAct9C,EAAOs3C,GAC5B,IAAK,IAAIzsD,EAAI,EAAGA,EAAIysD,EAAQ9tD,OAAQqB,IAAK,CACvC,IAAMktD,EAAWT,EAAQzsD,GAAGk3C,MAChB,MAAZgW,GAAiE,MAArCA,EAASK,SAASmF,iBAAmCxF,EAASK,SAASmF,gBAAgBv9C,EACrH,CACF,CA8GA,MAAO,CACLw9C,cA7GF,SAAuBp2D,GAErB,OAAQA,GACN,IAAK,iBACL,IAAK,kBACH,OAAO,kBAAMu1D,EAAc,GAAG,EAEhC,IAAK,uBACH,OAAO,SAAA38C,GACL,IACEu7C,EACEgB,EAAMnK,WADRmJ,SAGE,cAAev7C,IAAUu7C,EAASY,YAAYsB,IAAIz9C,EAAMkwC,aAG1DqL,EAASY,YAAYvJ,OAAO5yC,EAAMkwC,WAClCyM,EAAc,IAElB,EAIJ,OAAO,SAAqB38C,GAC1B,IAAA09C,EAGInB,EAAMnK,WAFRmL,EAAeG,EAAfH,gBACAhC,EAAQmC,EAARnC,SAGFA,EAASoC,UAAUv5B,QAAUpkB,EAE7B,IAAM49C,EAAyB,kBAATx2D,EAChBy2D,EAAwB,YAATz2D,GAA+B,kBAATA,GAAqC,kBAATA,EAGjE02D,EAvQV,SAAmB99C,EAAOy8C,GAOxB,IANA,IAAMryD,EAAQmyD,EAAMnK,WACd2L,EAAa,IAAIjM,IACjB8K,EAAgB,GAEhBoB,EAAgBvB,EAASA,EAAOryD,EAAMmxD,SAASE,aAAerxD,EAAMmxD,SAASE,YAE1E5wD,EAAI,EAAGA,EAAImzD,EAAcx0D,OAAQqB,IAAK,CAC7C,IAAMT,EAAQusD,EAAaqH,EAAcnzD,IAErCT,IACFA,EAAM6zD,UAAUjlB,YAAS5wC,EAE7B,CAEKgC,EAAM8zD,cAEe,MAAxB9zD,EAAM1E,OAAOy4D,SAA2B/zD,EAAM1E,OAAOy4D,QAAQn+C,EAAO5V,GAqBtE,IAAI0zD,EAAOE,EACVI,SAnBD,SAAuBjoB,GACrB,IAKMkoB,EALAj0D,EAAQusD,EAAaxgB,GAE3B,OAAK/rC,GAAUA,EAAM1E,OAAOm+C,SAAsC,OAA3Bz5C,EAAM6zD,UAAUjlB,aAExB5wC,IAA3BgC,EAAM6zD,UAAUjlB,SAGM,MAAxB5uC,EAAM1E,OAAOy4D,SAA2B/zD,EAAM1E,OAAOy4D,QAAQn+C,EAAO5V,EAAqD,OAA7Ci0D,EAAsBj0D,EAAM8zD,mBAAwB,EAASG,EAAoBjM,iBAE9HhqD,IAA3BgC,EAAM6zD,UAAUjlB,SAAsB5uC,EAAM6zD,UAAUjlB,OAAS,OAI9D5uC,EAAM6zD,UAAUjlB,OAAS5uC,EAAM6zD,UAAUK,gBAAgBnoB,GAAK,GAAQ,IAXE,EAYjF,IAKCooB,MAAK,SAACngD,EAAG/E,GACR,IAAMmlD,EAAS7H,EAAav4C,EAAE6mB,QACxBw5B,EAAS9H,EAAat9C,EAAE4rB,QAC9B,OAAKu5B,GAAWC,EACTA,EAAO/4D,OAAOg5D,SAAWF,EAAO94D,OAAOg5D,UAAYtgD,EAAE2Z,SAAW1e,EAAE0e,SAD1C,CAEjC,IACC0kC,QAAO,SAAAkC,GACN,IAAMvnD,EAAK2kD,GAAO4C,GAClB,OAAIZ,EAAWN,IAAIrmD,KACnB2mD,EAAWhvC,IAAI3X,IACR,EACT,IAGIhN,EAAM1E,OAAO+2D,SAAQqB,EAAO1zD,EAAM1E,OAAO+2D,OAAOqB,EAAM1zD,IAAQ,IAE5CyJ,EAF4CC,GAAAC,EAAAA,EAAAA,GAEhD+pD,GAAI,IAAtB,IAAAhqD,EAAAE,MAAAH,EAAAC,EAAA7I,KAAAgJ,MAGE,IAHsB,IAAbkpD,EAAGtpD,EAAA/M,MACRk1D,EAAcmB,EAAIl4B,OAEf+2B,GAAa,CAClB,IAAI4C,EAE+B,OAA9BA,EAAQ5C,EAAYja,QAAkB6c,EAAMzG,YAAYyE,EAAcrzD,MAAIg+B,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAI41B,GAAG,IACtFnB,YAAAA,KAEFA,EAAcA,EAAYla,MAC5B,CACA,OAAAr6C,GAAAqM,EAAAI,EAAAzM,EAAA,SAAAqM,EAAAK,GAAA,CAGF,GAAI,cAAe6L,GAAS5V,EAAMmxD,SAASY,YAAYsB,IAAIz9C,EAAMkwC,WAAY,KACK2O,EADLC,GAAA/qD,EAAAA,EAAAA,GACnD3J,EAAMmxD,SAASY,YAAY1wD,IAAIuU,EAAMkwC,WAAW3hB,UAAQ,IAAhF,IAAAuwB,EAAA9qD,MAAA6qD,EAAAC,EAAA7zD,KAAAgJ,MAAkF,KAAzEooD,EAAWwC,EAAA/3D,MAClB81D,EAAcrzD,KAAK8yD,EAAY0C,aACjC,CAAC,OAAAt3D,GAAAq3D,EAAA5qD,EAAAzM,EAAA,SAAAq3D,EAAA3qD,GAAA,CACH,CAEA,OAAOyoD,CACT,CA0LiBj7B,CAAU3hB,EAFR49C,EAAgBpB,OAAsBp0D,GAG/C6zB,EAAQ4hC,EA3RlB,SAA2B79C,GACzB,IACEu7C,EACEgB,EAAMnK,WADRmJ,SAEIrN,EAAKluC,EAAMg/C,QAAUzD,EAAS0D,aAAa,GAC3C9Q,EAAKnuC,EAAMk/C,QAAU3D,EAAS0D,aAAa,GACjD,OAAO5jD,KAAK8jD,MAAM9jD,KAAKC,KAAK4yC,EAAKA,EAAKC,EAAKA,GAC7C,CAoRiCiR,CAAkBp/C,GAAS,EAE3C,kBAAT5Y,IACFm0D,EAAS0D,aAAe,CAACj/C,EAAMg/C,QAASh/C,EAAMk/C,SAC9C3D,EAAS8D,YAAcvB,EAAK32B,KAAI,SAAAg2B,GAAG,OAAIA,EAAInB,WAAW,KAKpD6B,IAAiBC,EAAKt0D,QACpByyB,GAAS,IACXqhC,EAAct9C,EAAOu7C,EAASE,aAC1B8B,GAAiBA,EAAgBv9C,IAKrC49C,GAAejB,EAAcmB,GAxMrC,SAA0BlB,EAAe58C,EAAOic,EAAOhM,GACrD,IAAM8pC,EAAYwC,EAAMnK,WAExB,GAAIwK,EAAcpzD,OAAQ,CACxB,IAI+B81D,EAJzBhG,EAAa,CACjBiG,SAAS,GACTC,GAAAzrD,EAAAA,EAAAA,GAEgB6oD,GAAa,QAAA6C,EAAA,WAAE,IAAtBtC,EAAGmC,EAAAx4D,MACNsD,EAAQusD,EAAawG,EAAIl4B,SAAW80B,EAExCkE,EAIE7zD,EAJF6zD,UACAzN,EAGEpmD,EAHFomD,QACAxX,EAEE5uC,EAFF4uC,OACAuiB,EACEnxD,EADFmxD,SAEImE,EAAmB,IAAI1E,EAAAA,QAAcxK,EAAQv6C,EAAGu6C,EAAQt6C,EAAG,GAAGypD,UAAU3mB,GAExE4mB,EAAoB,SAAAxoD,GACxB,IAAIyoD,EAAuBC,EAE3B,OAA2J,OAAnJD,EAAmF,OAA1DC,EAAyBvE,EAASY,YAAY1wD,IAAI2L,SAAe,EAAS0oD,EAAuBrC,IAAIN,EAAInB,eAAwB6D,CACpK,EAEME,EAAoB,SAAA3oD,GACxB,IAAMilD,EAAc,CAClB0C,aAAc5B,EACdn3D,OAAQga,EAAMha,QAGZu1D,EAASY,YAAYsB,IAAIrmD,GAG3BmkD,EAASY,YAAY1wD,IAAI2L,GAAI1L,IAAIyxD,EAAInB,YAAaK,GAKlDd,EAASY,YAAYzwD,IAAI0L,EAAI,IAAI4oD,IAAI,CAAC,CAAC7C,EAAInB,YAAaK,MAE1Dr8C,EAAMha,OAAO+5D,kBAAkB3oD,EACjC,EAEM64C,EAAwB,SAAA74C,GAC5B,IAAMglD,EAAWb,EAASY,YAAY1wD,IAAI2L,GAEtCglD,GACFF,GAA8BX,EAASY,YAAagB,EAAInB,YAAaI,EAAUhlD,EAEnF,EAGI6oD,EAAoB,CAAC,EAEzB,IAAK,IAAIxG,KAAQz5C,EAAO,CACtB,IAAIkgD,EAAWlgD,EAAMy5C,GAGG,oBAAbyG,IAAyBD,EAAkBxG,GAAQyG,EAChE,CAEA,IAAIC,GAAY54B,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAQ41B,GACnB8C,GAAiB,IACpBzP,QAAAA,EACAoM,cAAAA,EACA2C,QAASjG,EAAWiG,QACpBtjC,MAAAA,EACAyjC,iBAAAA,EACAzgD,IAAKg/C,EAAUh/C,IACf+5B,OAAQA,EAGRonB,gBAAe,WAGb,IAAMC,EAAqB,cAAergD,GAASu7C,EAASY,YAAY1wD,IAAIuU,EAAMkwC,WAElF,KACCmQ,GACDA,EAAmB5C,IAAIN,EAAInB,gBACzBmE,EAAaZ,QAAUjG,EAAWiG,SAAU,EAGxChE,EAASwB,QAAQ/rD,MAAQpG,MAAMuU,KAAKo8C,EAASwB,QAAQxuB,UAAU2uB,MAAK,SAAAryD,GAAC,OAAIA,EAAEmxD,cAAgBmB,EAAInB,WAAW,KAAG,CAE/G,IAAMsE,EAAS1D,EAAch1D,MAAM,EAAGg1D,EAAcpuD,QAAQ2uD,IAC5DR,EAAc,GAADj2D,QAAA++B,EAAAA,EAAAA,GAAK66B,GAAM,CAAEnD,IAC5B,CAEJ,EAGAn3D,OAAQ,CACN45D,kBAAAA,EACAG,kBAAAA,EACA9P,sBAAAA,GAEFsQ,cAAe,CACbX,kBAAAA,EACAG,kBAAAA,EACA9P,sBAAAA,GAEFuQ,YAAaxgD,IAKf,GAFAiQ,EAASkwC,IAEkB,IAAvB7G,EAAWiG,QAAkB,OAAF,CACjC,EApGA,IAAAC,EAAAxrD,MAAAsrD,EAAAE,EAAAv0D,KAAAgJ,OAAAwrD,MAoGC,OAAAh4D,GAAA+3D,EAAAtrD,EAAAzM,EAAA,SAAA+3D,EAAArrD,GAAA,CACH,CAGF,CA2IIssD,CAAiB3C,EAAM99C,EAAOic,GAjD9B,SAAqBroB,GACnB,IAAMooD,EAAcpoD,EAAKooD,YACnBjE,EAAWiE,EAAYja,MACvBqW,EAAuB,MAAZL,OAAmB,EAASA,EAASK,SAEtD,GAAkB,MAAZL,GAAoBA,EAASI,WAEnC,GAAIyF,EAAe,CAEjB,GAAIxF,EAASsI,eAAiBtI,EAASuI,gBAAkBvI,EAASgF,cAAgBhF,EAASiF,eAAgB,CAEzG,IAAMjmD,EAAK2kD,GAAOnoD,GACZgtD,EAAcrF,EAASwB,QAAQtxD,IAAI2L,GAEpCwpD,EAKMA,EAAYrB,SAErB3rD,EAAKwsD,mBALL7E,EAASwB,QAAQrxD,IAAI0L,EAAIxD,GACC,MAA1BwkD,EAASsI,eAAiCtI,EAASsI,cAAc9sD,GACtC,MAA3BwkD,EAASuI,gBAAkCvI,EAASuI,eAAe/sD,GAKvE,CAG0B,MAA1BwkD,EAASlO,eAAiCkO,EAASlO,cAAct2C,EACnE,KAAO,CAEL,IAAM7L,EAAUqwD,EAAShxD,GAErBW,EAGG81D,IAAgBtC,EAAS8D,YAAYv/C,SAASk8C,KAEjDsB,EAAct9C,EAAOu7C,EAASE,YAAYgB,QAAO,SAAAx3B,GAAM,OAAKs2B,EAAS8D,YAAYv/C,SAASmlB,EAAO,KAEjGl9B,EAAQ6L,IAINiqD,GAAgBtC,EAAS8D,YAAYv/C,SAASk8C,IAChDsB,EAAct9C,EAAOu7C,EAASE,YAAYgB,QAAO,SAAAx3B,GAAM,OAAKs2B,EAAS8D,YAAYv/C,SAASmlB,EAAO,IAGvG,CACF,GAGF,CACF,EAKF,CAEA,IAAI47B,GAAY,CAAC,EAEb/rC,GAAS,SAAAwiC,GAAiBuJ,IAASt5B,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAQs5B,IAC1CvJ,EACH,EAwWF,IA2PIzsD,GA3PEi2D,GAAc,CAAC,MAAO,MAAO,UAAW,eAAgB,SAAU,SAAU,aAAc,UAAW,OAAQ,YAC7GC,GAAa,SAAA/sB,GAAG,QAAc,MAAPA,IAAeA,EAAIsJ,OAAO,EACjDnxC,GAAuBsqC,EAAAA,cAAoB,MAE3Cmb,GAAc,SAAC1lB,EAAY80B,GAC/B,IAAMjH,EAAY5wD,GAAO,SAACuC,EAAKD,GAC7B,IAAMiB,EAAW,IAAIsuD,EAAAA,QACfiG,EAAgB,IAAIjG,EAAAA,QACpBkG,EAAa,IAAIlG,EAAAA,QAEvB,SAASmG,IAAqF,IAAlEnoB,EAAMnxC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG4D,IAAMutC,OAAQhzC,EAAM6B,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAGo5D,EAAejwD,EAAInJ,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG4D,IAAMuF,KAEpFygC,EAIEzgC,EAJFygC,MACAC,EAGE1gC,EAHF0gC,OACAsb,EAEEh8C,EAFFg8C,IACAF,EACE97C,EADF87C,KAEI4E,EAASjgB,EAAQC,EACnB1rC,aAAkBg1D,EAAAA,QAAekG,EAAWh2D,KAAKlF,GAAak7D,EAAWx1D,IAAG3F,MAAdm7D,GAAUz7B,EAAAA,EAAAA,GAAQz/B,IACpF,IAAM+xB,EAAWihB,EAAOooB,iBAAiB10D,GAAU2tB,WAAW6mC,GAE9D,GAAItU,EAAqB5T,GACvB,MAAO,CACLvH,MAAOA,EAAQuH,EAAOiN,KACtBvU,OAAQA,EAASsH,EAAOiN,KACxB+G,IAAAA,EACAF,KAAAA,EACAuU,OAAQ,EACRtpC,SAAAA,EACA25B,OAAAA,GAGF,IAAMjF,EAAMzT,EAAOyT,IAAMpxC,KAAKyF,GAAK,IAE7BtC,EAAI,EAAInD,KAAKmxC,IAAIC,EAAM,GAAK10B,EAE5BruB,EAAI8U,GAAKizB,EAAQC,GACvB,MAAO,CACLD,MAAO/nC,EACPgoC,OAAQlzB,EACRwuC,IAAAA,EACAF,KAAAA,EACAuU,OAAQ5vB,EAAQ/nC,EAChBquB,SAAAA,EACA25B,OAAAA,EAGN,CAEA,IAAI4P,OAAqBl5D,EAEnBm5D,EAAwB,SAAAn9B,GAAO,OAAI14B,GAAI,SAAAtB,GAAK,MAAK,CACrDm1B,aAAWgI,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAOn9B,EAAMm1B,aAAW,IACjC6E,QAAAA,IAEH,GAAE,EAEGosB,EAAU,IAAIwK,EAAAA,QACdjB,EAAY,CAChBruD,IAAAA,EACAD,IAAAA,EAEAstC,GAAI,KACJC,OAAQ,KACRilB,UAAW,KACXv4D,OAAQ,CACNg5D,SAAU,EACV7a,SAAS,EACTuN,WAAW,GAEbxN,GAAI,KACJ1X,WAAY,eAAC0M,EAAM/wC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAC,OAAKqkC,EAAWzgC,IAAOmtC,EAAO,EACrDooB,QAAS,SAACQ,EAAWC,GAAgB,OAAKT,EAAQQ,EAAWC,EAAkBh2D,IAAM,EACrFi2D,QAAQ,EACRrG,QAAQ,EACRsG,MAAM,EACNzrB,MAAOlR,EAAQ,IAAIg2B,EAAAA,OACnB3J,SAAU,KACVuQ,MAAO,IAAI5G,EAAAA,MACXxK,QAAAA,EACAqR,MAAOrR,EACPsR,UAAW,SACXvE,qBAAiBn1D,EACjBm3B,YAAa,CACX6E,QAAS,EACTzmB,IAAK,GACLC,IAAK,EACLmkD,SAAU,IACVpR,QAAS,WACP,IAAMvmD,EAAQqB,IAEV61D,GAAoBU,aAAaV,GAEjCl3D,EAAMm1B,YAAY6E,UAAYh6B,EAAMm1B,YAAY5hB,KAAK4jD,EAAsBn3D,EAAMm1B,YAAY5hB,KAEjG2jD,EAAqBjM,YAAW,kBAAMkM,EAAsB91D,IAAM8zB,YAAY3hB,IAAI,GAAExT,EAAMm1B,YAAYwiC,SACxG,GAEF/wD,KAAM,CACJygC,MAAO,EACPC,OAAQ,EACRsb,IAAK,EACLF,KAAM,EACNmV,aAAa,GAEfC,SAAU,CACRC,WAAY,EACZ1L,IAAK,EACLhlB,MAAO,EACPC,OAAQ,EACRsb,IAAK,EACLF,KAAM,EACN4E,OAAQ,EACR35B,SAAU,EACVspC,OAAQ,EACRF,mBAAAA,GAEFiB,UAAW,SAAA18D,GAAM,OAAIgG,GAAI,SAAAtB,GAAK,OAAAm9B,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAUn9B,GAAK,IAC3C1E,QAAM6hC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAOn9B,EAAM1E,QACdA,IACJ,GACA,EACH28D,QAAS,SAAC5wB,EAAOC,EAAQuwB,EAAajV,EAAKF,GACzC,IAAM9T,EAASvtC,IAAMutC,OACfhoC,EAAO,CACXygC,MAAAA,EACAC,OAAAA,EACAsb,IAAKA,GAAO,EACZF,KAAMA,GAAQ,EACdmV,YAAAA,GAEFv2D,GAAI,SAAAtB,GAAK,MAAK,CACZ4G,KAAAA,EACAkxD,UAAQ36B,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAOn9B,EAAM83D,UAChBf,EAAmBnoB,EAAQioB,EAAejwD,IAEhD,GACH,EACAsxD,OAAQ,SAAA7L,GAAG,OAAI/qD,GAAI,SAAAtB,GACjB,IAAMm4D,EAAW/L,EAAaC,GAC9B,MAAO,CACLyL,UAAQ36B,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAOn9B,EAAM83D,UAAQ,IAC3BzL,IAAK8L,EACLJ,WAAY/3D,EAAM83D,SAASC,YAAcI,IAG/C,GAAE,EACFC,aAAc,WAA0B,IAAzBV,EAASj6D,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,SACnB+5D,EAAQn2D,IAAMm2D,MAEpBA,EAAMa,OACNb,EAAMc,YAAc,EAEF,UAAdZ,IACFF,EAAMrzD,QACNqzD,EAAMc,YAAc,GAGtBh3D,GAAI,iBAAO,CACTo2D,UAAAA,EACD,GACH,EACA5D,kBAAc91D,EACdmzD,SAAU,CACRvtB,QAAQ,EACR0wB,SAAU,EACV9lB,OAAQ,EACR+kB,UAAwBlnB,EAAAA,YACxBglB,YAAa,GACbsB,QAAS,IAAIiD,IACb2C,YAAa,GACb1D,aAAc,CAAC,EAAG,GAClBI,YAAa,GACblD,YAAa,IAAI6D,IACjBp7B,UAAW,SAACjB,EAAK+6B,EAAUnC,GACzB,IAAMhB,EAAW9vD,IAAM8vD,SAcvB,OATAA,EAASmD,SAAWnD,EAASmD,UAAYA,EAAW,EAAI,EAAI,GAC5DnD,EAASoH,YAAYp5D,KAAK,CACxBo6B,IAAAA,EACA+6B,SAAAA,EACAnC,MAAAA,IAIFhB,EAASoH,YAAcpH,EAASoH,YAAYpE,MAAK,SAACngD,EAAG/E,GAAC,OAAK+E,EAAEsgD,SAAWrlD,EAAEqlD,QAAQ,IAC3E,WACL,IAAMnD,EAAW9vD,IAAM8vD,SAEP,MAAZA,GAAoBA,EAASoH,cAE/BpH,EAASmD,SAAWnD,EAASmD,UAAYA,EAAW,EAAI,EAAI,GAE5DnD,EAASoH,YAAcpH,EAASoH,YAAYlG,QAAO,SAAAzoD,GAAC,OAAIA,EAAE2vB,MAAQA,CAAG,IAEzE,CACF,IAGJ,OAAOo2B,CACT,IACM3vD,EAAQ2vD,EAAU3H,WACpBwQ,EAAUx4D,EAAM4G,KAChB6xD,EAASz4D,EAAM83D,SAASzL,IACxBqM,EAAY14D,EAAM4uC,OAiCtB,OAhCA+gB,EAAUn1B,WAAU,WAClB,IAAAm+B,EAMIhJ,EAAU3H,WALZpZ,EAAM+pB,EAAN/pB,OACAhoC,EAAI+xD,EAAJ/xD,KACAkxD,EAAQa,EAARb,SACAnpB,EAAEgqB,EAAFhqB,GACArtC,EAAGq3D,EAAHr3D,IAGEsF,IAAS4xD,GAAWV,EAASzL,MAAQoM,IACvCD,EAAU5xD,EACV6xD,EAASX,EAASzL,IAElBqF,GAAa9iB,EAAQhoC,GACrB+nC,EAAGiqB,cAAcd,EAASzL,KAC1B1d,EAAGspB,QAAQrxD,EAAKygC,MAAOzgC,EAAK0gC,OAAQ1gC,EAAKixD,cAIvCjpB,IAAW8pB,IACbA,EAAY9pB,EAEZttC,GAAI,SAAAtB,GAAK,MAAK,CACZ83D,UAAQ36B,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAOn9B,EAAM83D,UAChB93D,EAAM83D,SAASf,mBAAmBnoB,IAExC,IAEL,IAEA+gB,EAAUn1B,WAAU,SAAAx6B,GAAK,OAAI8hC,EAAW9hC,EAAM,IAEvC2vD,CACT,EAWA,IA4CI4I,GACAM,GA7CAC,GAAgB,IAAIpR,IACpBqR,GAAqB,IAAIrR,IACzBsR,GAAoB,IAAItR,IAoB5B,SAASuR,GAAIC,EAAS9B,GACpB,GAAK8B,EAAQtyD,KAAb,CAA0B,IAILuyD,EAJKC,GAAAzvD,EAAAA,EAAAA,GAIrBuvD,EAAQ/0B,UAAQ,IAFrB,IAAAi1B,EAAAxvD,MAAAuvD,EAAAC,EAAAv4D,KAAAgJ,MAEuB,EACrBgc,EAFQszC,EAAAz8D,MAARmpB,UAESuxC,EACX,CAAC,OAAA/5D,GAAA+7D,EAAAtvD,EAAAzM,EAAA,SAAA+7D,EAAArvD,GAAA,CANwB,CAO3B,CAEA,SAASsvD,GAAmB36D,EAAM04D,GAChC,OAAQ14D,GACN,IAAK,SACH,OAAOu6D,GAAIH,GAAe1B,GAE5B,IAAK,QACH,OAAO6B,GAAIF,GAAoB3B,GAEjC,IAAK,OACH,OAAO6B,GAAID,GAAmB5B,GAEpC,CAIA,SAASkC,GAASlC,EAAWp3D,EAAOqU,GAElC,IAAIwd,EAAQ7xB,EAAMw3D,MAAM+B,WAWxB,IATwB,UAApBv5D,EAAM03D,WAA8C,kBAAdN,IACxCvlC,EAAQulC,EAAYp3D,EAAMw3D,MAAMc,YAChCt4D,EAAMw3D,MAAMgC,QAAUx5D,EAAMw3D,MAAMc,YAClCt4D,EAAMw3D,MAAMc,YAAclB,GAI5BmB,GAAcv4D,EAAMmxD,SAASoH,YAExB93D,GAAI,EAAGA,GAAI83D,GAAYn5D,OAAQqB,MAClCo4D,GAAeN,GAAY93D,KACd84B,IAAIS,QAAQ6+B,GAAa1G,MAAMnK,WAAYn2B,EAAOxd,GAOjE,OAHKrU,EAAMmxD,SAASmD,UAAYt0D,EAAM2uC,GAAGuE,QAAQlzC,EAAM2uC,GAAGuE,OAAOlzC,EAAM8rC,MAAO9rC,EAAM4uC,QAEpF5uC,EAAMmxD,SAAS3iB,OAASv9B,KAAKuC,IAAI,EAAGxT,EAAMmxD,SAAS3iB,OAAS,GACjC,WAApBxuC,EAAM03D,UAAyB,EAAI13D,EAAMmxD,SAAS3iB,MAC3D,CAqFA,SAASua,KACP,IAAMoJ,EAAQ9lB,EAAAA,WAAiBtqC,IAC/B,IAAKowD,EAAO,MAAM,IAAI5yD,MAAM,4DAC5B,OAAO4yD,CACT,CAMA,SAASpwB,KAAgD,IAAvCkmB,EAAQxqD,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,SAAAuC,GAAK,OAAIA,CAAK,EAAEkoD,EAAUzqD,UAAA2B,OAAA,EAAA3B,UAAA,QAAAO,EACrD,OAAO+qD,KAAWd,EAAUC,EAC9B,CAOA,SAASvjB,GAAS9e,GAA8B,IAApB4zC,EAAch8D,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EACrC00D,EAAQpJ,KACRvuB,EAAY23B,EAAMnK,WAAWmJ,SAAS32B,UAEtCjB,EAAMkyB,EAAmB5lC,GAG/B,OADA8iC,GAA0B,kBAAMnuB,EAAUjB,EAAKkgC,EAAgBtH,EAAM,GAAE,CAACsH,EAAgBj/B,EAAW23B,IAC5F,IACT,CAUA,SAASuH,GAAUzsB,EAAYvE,GAC7B,OAAO,SAAUixB,GAEf,IAAMxsB,EAAS,IAAIwsB,EACf1sB,GAAYA,EAAWE,GAAS,QAAAysB,EAAAn8D,UAAA2B,OAHXy6D,EAAK,IAAAr5D,MAAAo5D,EAAA,EAAAA,EAAA,KAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAALD,EAAKC,EAAA,GAAAr8D,UAAAq8D,GAK9B,OAAO78D,QAAQ88D,IAAIF,EAAM98B,KAAI,SAAA88B,GAAK,OAAI,IAAI58D,SAAQ,SAAC+8D,EAAK78D,GAAM,OAAKgwC,EAAO8sB,KAAKJ,GAAO,SAAArwD,GAChFA,EAAKsiC,OAAO3vC,OAAO4rD,OAAOv+C,EAAM+jD,EAAW/jD,EAAKsiC,QACpDkuB,EAAIxwD,EACN,GAAGk/B,GAAY,SAAA9mC,GAAK,OAAIzE,EAAO,IAAIoC,MAAM,kBAADjD,OAAmBu9D,EAAK,MAAAv9D,OAAKsF,EAAME,QAAO,MAAK,GAAC,GAAC,IAC3F,CACF,CASA,SAASwrC,GAAUqsB,EAAOE,EAAO5sB,EAAYvE,GAE3C,IAAM3lC,EAAOvC,MAAM0sC,QAAQ2sB,GAASA,EAAQ,CAACA,GACvCK,EAAU7O,EAAQqO,GAAUzsB,EAAYvE,GAAa,CAACixB,GAAKr9D,QAAA++B,EAAAA,EAAAA,GAAKt4B,IAAO,CAC3EsnD,MAAOlC,EAAG2E,MAGZ,OAAOtsD,MAAM0sC,QAAQ2sB,GAASK,EAAUA,EAAQ,EAClD,CAKA5sB,GAAUkd,QAAU,SAAUmP,EAAOE,EAAO5sB,GAC1C,IAAMlqC,EAAOvC,MAAM0sC,QAAQ2sB,GAASA,EAAQ,CAACA,GAC7C,ODzmDc,SAAC99B,EAAIh5B,EAAMoE,GAAgBojD,EAAMxuB,EAAIh5B,GAAM,EAAMoE,EAAO,CCymD/DqjD,CAAQkP,GAAUzsB,GAAa,CAAC0sB,GAAKr9D,QAAA++B,EAAAA,EAAAA,GAAKt4B,IACnD,EAMAuqC,GAAUyM,MAAQ,SAAU4f,EAAOE,GACjC,IAAM92D,EAAOvC,MAAM0sC,QAAQ2sB,GAASA,EAAQ,CAACA,GAC7C,OD1mDY,SAAA92D,GACZ,QAAa/E,IAAT+E,GAAsC,IAAhBA,EAAK3D,OAAckrD,EAAY30C,OAAO,EAAG20C,EAAYlrD,YAAa,CAC1F,IAAMurD,EAAQL,EAAYwI,MAAK,SAAAnI,GAAK,OAAIT,EAAmBnnD,EAAM4nD,EAAM5nD,KAAM4nD,EAAMN,MAAM,IAEzF,GAAIM,EAAO,CACT,IAAMloD,EAAQ6nD,EAAYlmD,QAAQumD,IACnB,IAAXloD,GAAc6nD,EAAY30C,OAAOlT,EAAO,EAC9C,CACF,CACF,CCimDSs3C,CAAM,CAAC4f,GAAKr9D,QAAA++B,EAAAA,EAAAA,GAAKt4B,IAC1B,EAEA,IAAMo3D,GAAQ,IAAIvE,IAClBwE,GAxKA,SAAoBD,GAClB,IACIE,EACAhmD,EACArU,EAHAs6D,GAAU,EAKd,SAASl4B,EAAKg1B,GACZ/iD,EAAQkmD,sBAAsBn4B,GAC9Bk4B,GAAU,EACVD,EAAS,EAEThB,GAAmB,SAAUjC,GAAY,IAERoD,EAFQC,GAAA9wD,EAAAA,EAAAA,GAEtBwwD,EAAMh2B,UAAQ,IAAjC,IAAAs2B,EAAA7wD,MAAA4wD,EAAAC,EAAA55D,KAAAgJ,MAAmC,KAC7B6wD,EADKjO,EAAI+N,EAAA99D,QAGbsD,EAAQysD,EAAK0F,MAAMnK,YAETmJ,SAASvtB,UAA+B,WAApB5jC,EAAM03D,WAA0B13D,EAAMmxD,SAAS3iB,OAAS,IAAwC,OAA/BksB,EAAe16D,EAAM2uC,GAAG6K,KAAekhB,EAAaC,eACjJN,GAAUf,GAASlC,EAAWp3D,GAElC,CAAE,OAAA3C,GAAAo9D,EAAA3wD,EAAAzM,EAAA,SAAAo9D,EAAA1wD,GAAA,CAKF,GAFAsvD,GAAmB,QAASjC,GAEb,IAAXiD,EAKF,OAHAhB,GAAmB,OAAQjC,GAE3BkD,GAAU,EACHM,qBAAqBvmD,EAEhC,CAsBA,MAAO,CACL+tB,KAAAA,EAMAN,WA3BF,SAASA,EAAW9hC,GAAmB,IACjC66D,EADqBrsB,EAAM/wC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAGlC,IAAKuC,EAAO,OAAOm6D,EAAM38B,SAAQ,SAAAivB,GAAI,OAAI3qB,EAAW2qB,EAAK0F,MAAMnK,WAAW,GAAExZ,GACvC,OAAhCqsB,EAAgB76D,EAAM2uC,GAAG6K,KAAeqhB,EAAcF,eAAiB36D,EAAMmxD,SAASvtB,QAA8B,UAApB5jC,EAAM03D,YAE3G13D,EAAMmxD,SAAS3iB,OAASv9B,KAAKsC,IAAI,GAAIvT,EAAMmxD,SAAS3iB,OAASA,GAExD8rB,IACHA,GAAU,EACVC,sBAAsBn4B,IAE1B,EAqBEw0B,QAnBF,SAAiBQ,GAAkD,IAAvCC,IAAgB55D,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,KAAAA,UAAA,GAASuC,EAAKvC,UAAA2B,OAAA,EAAA3B,UAAA,QAAAO,EAAEqW,EAAK5W,UAAA2B,OAAA,EAAA3B,UAAA,QAAAO,EAE/D,GADIq5D,GAAkBgC,GAAmB,SAAUjC,GAC9Cp3D,EAA0Fs5D,GAASlC,EAAWp3D,EAAOqU,OAA9G,CAAF,IAAmCymD,EAAnCC,GAAApxD,EAAAA,EAAAA,GAAqBwwD,EAAMh2B,UAAQ,IAAjC,IAAA42B,EAAAnxD,MAAAkxD,EAAAC,EAAAl6D,KAAAgJ,MAAmC,CAAAyvD,GAASlC,EAA7B0D,EAAAp+D,MAA6Cy1D,MAAMnK,WAAW,CAAC,OAAA3qD,GAAA09D,EAAAjxD,EAAAzM,EAAA,SAAA09D,EAAAhxD,GAAA,EACtFstD,GAAkBgC,GAAmB,QAASjC,EACpD,EAiBF,CAqGI4D,CAAWb,IAFbr4B,GAAUs4B,GAAVt4B,WACA80B,GAAOwD,GAAPxD,QAEFqE,GAt1BA,SAAwBC,EAAQC,GAC9B,SAASC,EAAe18D,EAAIsK,EAIzByjD,GAAM,IAEHkB,EAFG0N,EAAAryD,EAHPlN,KAAAA,OAAI,IAAAu/D,EAAG,GAAEA,EACTrhB,EAAMhxC,EAANgxC,OACGryC,GAAK21B,EAAAA,EAAAA,GAAAt0B,EAAAu0B,GAEJvgC,EAAO,GAAHV,OAAMoC,EAAK,GAAGm7B,eAAav9B,OAAGoC,EAAKlB,MAAM,IAGjD,GAAa,cAATkB,EAAsB,CACxB,QAAqBV,IAAjB2J,EAAMkzB,OAAsB,MAAM,IAAIt7B,MAAM,iDAEhDouD,EAAW/yB,EADIjzB,EAAMkzB,OACM,CACzBn8B,KAAAA,EACA+tD,KAAAA,EACAzS,OAAAA,EACA4T,WAAW,GAEf,KAAO,CACL,IAAMhyD,EAAS66D,GAAUz5D,GAEzB,IAAKpB,EACH,MAAM,IAAI2D,MAAM,QAADjD,OAASU,EAAI,iKAI9B,IAAKwD,MAAM0sC,QAAQpxC,GAAO,MAAM,IAAIyD,MAAM,wCAG1CouD,EAAW/yB,GAAO4D,EAAAA,EAAAA,GAAK5iC,GAAMy/B,EAAAA,EAAAA,GAAIv/B,IAAO,CACtC4C,KAAAA,EACA+tD,KAAAA,EACAzS,OAAAA,EAEA8T,cAAe,CACbhyD,KAAAA,IAGN,CAYA,YAT8BkC,IAA1B2vD,EAAShW,MAAMqC,SACb2T,aAAoBiD,EAAAA,eAAsBjD,EAAShW,MAAMqC,OAAS,WAAoB2T,aAAoBiD,EAAAA,WAAgBjD,EAAShW,MAAMqC,OAAS,aAO3I,WAATh9C,GAAmBuyD,GAAa5B,EAAUhmD,GACvCgmD,CACT,CAEA,SAAS2N,EAAYC,EAAgBhN,GACnC,IAGMI,EAAc6M,EAHhBC,GAAQ,EAERlN,IAIkC,OAA/BI,EAAeJ,EAAM5W,QAAkBgX,EAAa3U,OACvDA,GAAOuhB,EAAgBhN,EAAOA,EAAM5W,MAAMqC,QACjCuU,EAAMmN,YAAcH,EAAeG,aAE5CH,EAAe52C,IAAI4pC,GACnBkN,GAAQ,GAKLA,GAAyD,OAAjDD,EAAwBD,EAAe5jB,QAA0B6jB,EAAsBtO,QAAQ/tD,KAAKovD,GAC5GA,EAAM5W,OAAO/c,EAAQ2zB,EAAO,CAAC,GAClCA,EAAM5W,MAAMD,OAAS6jB,EACrBjK,GAAe/C,GACf2C,GAAmB3C,GAEvB,CAEA,SAASoN,EAAaJ,EAAgBhN,EAAOqN,GAC3C,IAAIH,GAAQ,EAEZ,GAAIlN,EAAO,CACT,IAAIK,EAAeiN,EAEnB,GAAqC,OAAhCjN,EAAgBL,EAAM5W,QAAkBiX,EAAc5U,OACzDA,GAAOuhB,EAAgBhN,EAAOA,EAAM5W,MAAMqC,aACrC,GAAIuU,EAAMmN,YAAcH,EAAeG,WAAY,CACxDnN,EAAM7W,OAAS6jB,EACfhN,EAAMplC,cAAc,CAClBzqB,KAAM,UAER,IAAMo9D,EAAeP,EAAe36B,SAASyxB,QAAO,SAAA0J,GAAO,OAAIA,IAAYxN,CAAK,IAC1E9rD,EAAQq5D,EAAa13D,QAAQw3D,GACnCL,EAAe36B,SAAW,GAAHtkC,QAAA++B,EAAAA,EAAAA,GAAOygC,EAAat+D,MAAM,EAAGiF,IAAM,CAAE8rD,IAAKlzB,EAAAA,EAAAA,GAAKygC,EAAat+D,MAAMiF,KACzFg5D,GAAQ,CACV,CAEKA,GAA0D,OAAlDI,EAAyBN,EAAe5jB,QAA0BkkB,EAAuB3O,QAAQ/tD,KAAKovD,GAC9GA,EAAM5W,OAAO/c,EAAQ2zB,EAAO,CAAC,GAClCA,EAAM5W,MAAMD,OAAS6jB,EACrBjK,GAAe/C,GACf2C,GAAmB3C,EACrB,CACF,CAEA,SAASyN,EAAgBC,EAAOvkB,GAAyB,IAAjB8H,EAAO/hD,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,IAAAA,UAAA,GACzCw+D,IAAO5gC,EAAAA,EAAAA,GAAI4gC,GAAOz+B,SAAQ,SAAA+wB,GAAK,OAAI2N,EAAYxkB,EAAQ6W,EAAO/O,EAAQ,GAC5E,CAEA,SAAS0c,EAAYX,EAAgBhN,EAAO/O,GAC1C,GAAI+O,EAAO,CACT,IAAI4N,EAAwBC,EAAeC,EAO3C,GAJI9N,EAAM5W,QAAO4W,EAAM5W,MAAMD,OAAS,MAEiB,OAAlDykB,EAAyBZ,EAAe5jB,QAAkBwkB,EAAuBjP,UAASqO,EAAe5jB,MAAMuV,QAAUqO,EAAe5jB,MAAMuV,QAAQmF,QAAO,SAAAxmD,GAAC,OAAIA,IAAM0iD,CAAK,KAE7I,OAAhC6N,EAAgB7N,EAAM5W,QAAkBykB,EAAcpiB,OACzD0U,GAAO6M,EAAgBhN,EAAOA,EAAM5W,MAAMqC,aACrC,GAAIuU,EAAMmN,YAAcH,EAAeG,WAAY,CACxD,IAAIY,EAEJf,EAAe99B,OAAO8wB,GAEe,OAAhC+N,EAAgB/N,EAAM5W,QAAkB2kB,EAAc7P,MA9fnE,SAA6B0F,EAAOt3B,GAClC,IACEs2B,EACEgB,EAAMnK,WADRmJ,SAGFA,EAASE,YAAcF,EAASE,YAAYgB,QAAO,SAAAkK,GAAC,OAAIA,IAAM1hC,CAAM,IACpEs2B,EAAS8D,YAAc9D,EAAS8D,YAAY5C,QAAO,SAAAkK,GAAC,OAAIA,IAAM1hC,CAAM,IACpEs2B,EAASwB,QAAQn1B,SAAQ,SAAC9gC,EAAOoG,GAC3BpG,EAAMk1D,cAAgB/2B,GAAUn+B,EAAMm+B,SAAWA,GAEnDs2B,EAASwB,QAAQnK,OAAO1lD,EAE5B,IACAquD,EAASY,YAAYv0B,SAAQ,SAACw0B,EAAUlM,GACtCgM,GAA8BX,EAASY,YAAal3B,EAAQm3B,EAAUlM,EACxE,GACF,CA+eU0W,CAAoBjO,EAAM5W,MAAM8U,KAAM8B,EAE1C,CAWA,IAKMkO,EALAC,EAA+C,OAAhCL,EAAgB9N,EAAM5W,YAAiB,EAAS0kB,EAAczO,UAC7E+O,OAA4B3+D,IAAZwhD,EAA0C,OAAlB+O,EAAM/O,UAAqBkd,EAAcld,EAGvF,IAAKkd,EAGHV,EAAiD,OAAhCS,EAAgBlO,EAAM5W,YAAiB,EAAS8kB,EAAcvP,QAASqB,EAAOoO,GAC/FX,EAAgBzN,EAAM3tB,SAAU2tB,EAAOoO,GAIrCpO,EAAM5W,eACD4W,EAAM5W,MAAM8U,YACZ8B,EAAM5W,MAAMuV,eACZqB,EAAM5W,MAAMqW,gBACZO,EAAM5W,MAAMmW,cACd4O,UAAoBnO,EAAM5W,OAI7BglB,GAAiBpO,EAAM/O,SAA0B,UAAf+O,EAAM7vD,OAC1Ck+D,EAAAA,EAAAA,2BAA0BC,EAAAA,uBAAuB,WAC/C,IACEtO,EAAM/O,SACR,CAAE,MAAO11C,GACP,CAEJ,IAGFonD,GAAmBqK,EACrB,CACF,CA0CA,IAAMuB,EAAqB,WAAH,OAASp9D,QAAQC,KAAK,qFAAqF,EA0InI,MAAO,CACLo9D,WAzIiBC,IAAW,CAC5B5B,eAAAA,EACAc,YAAAA,EACAZ,YAAAA,EACA2B,mBAAoB3B,EACpBK,aAAAA,EACAuB,kBAAkB,EAClBC,mBAAmB,EACnBC,qBAAqB,EACrBC,mBAAmB,EACnBC,WAAY,EACZC,uBAAwB,SAACC,EAAWjP,GAClC,GAAKA,EAAL,CAEA,IAAMziB,EAAQ0xB,EAAUxV,WAAWlc,MAC9BA,EAAM6L,QAEX7L,EAAM6L,MAAM8U,KAAO+Q,EACnBlC,EAAYxvB,EAAOyiB,GAND,CAOpB,EACAkP,yBAA0B,SAACD,EAAWjP,GAC/BA,GACL2N,EAAYsB,EAAUxV,WAAWlc,MAAOyiB,EAC1C,EACAmP,wBAAyB,SAACF,EAAWjP,EAAOqN,GAC1C,GAAKrN,GAAUqN,EAAf,CAEA,IAAM9vB,EAAQ0xB,EAAUxV,WAAWlc,MAC9BA,EAAM6L,OACXgkB,EAAa7vB,EAAOyiB,EAAOqN,EAJO,CAKpC,EACA+B,mBAAoB,kBAAM,IAAI,EAC9BC,oBAAqB,SAAAC,GAAiB,OAAIA,CAAiB,EAE3DC,wBAAuB,SAACnQ,GACtB,IAAIyB,EAEEF,EAAgF,OAAlEE,EAA+B,MAAZzB,OAAmB,EAASA,EAAShW,OAAiByX,EAAmB,CAAC,EAGjH,OAAOtmC,QAAQomC,EAAWlB,SAC5B,EAEA+P,cAAa,SAACpQ,EAAUqQ,EAAOC,EAAUC,GAEvC,GAAIvQ,EAAShW,MAAMiW,WAAasQ,EAASrjC,QAAUqjC,EAASrjC,SAAW8yB,EACrE,MAAO,EAAC,GAGR,IAAAwQ,EAIID,EAHFpiE,KAAMsiE,OAAO,IAAAD,EAAG,GAAEA,EAEfE,GACDH,EAFFt9B,UACUtD,EAAAA,EAAAA,GACR4gC,EAAQp7B,IACZw7B,EAIIL,EAHFniE,KAAMyiE,OAAO,IAAAD,EAAG,GAAEA,EAEfE,GACDP,EAFFr9B,UACUtD,EAAAA,EAAAA,GACR2gC,EAAQj7B,IAEZ,IAAKxiC,MAAM0sC,QAAQkxB,GAAU,MAAM,IAAI7+D,MAAM,wCAE7C,GAAI6+D,EAAQ9L,MAAK,SAAC51D,EAAO+F,GAAK,OAAK/F,IAAU6hE,EAAQ97D,EAAM,IAAG,MAAO,EAAC,GAEtE,IAAMg8D,EAAO1P,GAAUpB,EAAU0Q,EAASG,GAAS,GACnD,OAAIC,EAAKtS,QAAQ/sD,OAAe,EAAC,EAAOq/D,GAEjC,IAEX,EAEAC,aAAY,SAAC/Q,EAAQ1kD,EAAuBvK,EAAMigE,EAAWT,EAAUU,GAAO,IAAA11D,GAAAlB,EAAAA,EAAAA,GAAAiB,EAAA,GAAtD41D,EAAW31D,EAAA,GAAEu1D,EAAIv1D,EAAA,GAEnC21D,EAnHR,SAAwBlR,EAAUjvD,EAAMw/D,EAAUU,GAChD,IAAI5P,EAEEtX,EAA+C,OAArCsX,EAAkBrB,EAAShW,YAAiB,EAASqX,EAAgBtX,OACrF,GAAKA,EAAL,CACA,IAAMonB,EAAc1D,EAAe18D,EAAMw/D,EAAUvQ,EAAShW,MAAM8U,MAIlE,GAAIkB,EAAS/sB,SAAU,KACgBm+B,EADhBC,GAAAr1D,EAAAA,EAAAA,GACDgkD,EAAS/sB,UAAQ,IAArC,IAAAo+B,EAAAp1D,MAAAm1D,EAAAC,EAAAn+D,KAAAgJ,MAAuC,KAA5B0kD,EAAKwQ,EAAAriE,MACV6xD,EAAM5W,OAAO2jB,EAAYwD,EAAavQ,EAC5C,CAAC,OAAAlxD,GAAA2hE,EAAAl1D,EAAAzM,EAAA,SAAA2hE,EAAAj1D,GAAA,CAED4jD,EAAS/sB,SAAW+sB,EAAS/sB,SAASyxB,QAAO,SAAA9D,GAAK,OAAKA,EAAM5W,KAAK,GACpE,CAEAgW,EAAShW,MAAMuV,QAAQ1vB,SAAQ,SAAA+wB,GAAK,OAAI+M,EAAYwD,EAAavQ,EAAM,IAEvEZ,EAAShW,MAAMuV,QAAU,GACzBgP,EAAYxkB,EAAQiW,GACpB2N,EAAY5jB,EAAQonB,GAEhBA,EAAY1N,SAAW0N,EAAYnnB,MAAMoW,YACzB+Q,EAAYnnB,MAAM8U,KAAKzE,WAE/BmJ,SAASE,YAAYlyD,KAAK2/D,GAEtC,CAACF,EAAOA,EAAMK,WAAWzhC,SAAQ,SAAAohC,GACjB,OAAVA,IACFA,EAAMM,UAAYJ,EAEdF,EAAMrlC,MACiB,oBAAdqlC,EAAMrlC,IAAoBqlC,EAAMrlC,IAAIulC,GAAkBF,EAAMrlC,IAAIS,QAAU8kC,GAG3F,GAhCmB,CAiCrB,CA8EqBK,CAAexR,EAAUjvD,EAAMw/D,EAAUU,GACrDrP,GAAa5B,EAAU8Q,EAC9B,EAEAW,YAAW,SAACzR,EAAUqQ,EAAOtiD,EAAQ2jD,GACnC,IAAI7P,EAIEN,EAAoD,OAAtCM,EAAmB7B,EAAShW,OAAiB6X,EAAmB,CAAC,EAEjF7B,EAASyD,SAAWlC,EAAWlB,UAAYkB,EAAWnB,YACxDJ,EAAShW,MAAM8U,KAAKzE,WAAWmJ,SAASE,YAAYlyD,KAAKwuD,EAE7D,EAEA2R,kBAAmB,SAAA3R,GAAQ,OAAIA,CAAQ,EACvC4R,iBAAkB,kBAAM,IAAI,EAC5BC,mBAAoB,SAAAhC,GAAS,OAAI5iC,EAAQ4iC,EAAUxV,WAAWlc,MAAM,EACpE2zB,iBAAkB,WAAO,EACzBC,qBAAsB,kBAAM,CAAK,EACjCC,eAAgB,kBAAM,CAAK,EAE3BC,aAAY,SAACjS,GACX,IAAI+B,EAGJvmD,EAG2C,OAAtCumD,EAAmB/B,EAAShW,OAAiB+X,EAAmB,CAAC,EAF5DhxD,EAAIyK,EAAZ6wC,OACAtC,EAAMvuC,EAANuuC,OAEEh5C,GAAQg5C,GAAQgX,GAAOhX,EAAQiW,EAAUjvD,GACzCivD,EAAS+N,aAAY/N,EAASrU,SAAU,GAC5C4X,GAAmBvD,EACrB,EAEAkS,eAAc,SAAClS,EAAUhmD,GACvB,IAAI4pD,EAGJnoD,EAG2C,OAAtCmoD,EAAmB5D,EAAShW,OAAiB4Z,EAAmB,CAAC,EAF5D7yD,EAAI0K,EAAZ4wC,OACAtC,EAAMtuC,EAANsuC,OAEEh5C,GAAQg5C,GAAQsC,GAAOtC,EAAQiW,EAAUjvD,IACzCivD,EAAS+N,YAA+B,MAAjB/zD,EAAM2xC,SAAmB3xC,EAAM2xC,WAASqU,EAASrU,SAAU,GACtF4X,GAAmBvD,EACrB,EAEAmS,mBAAoBhD,EACpBiD,iBAAkBjD,EAClBkD,mBAAoBlD,EAGpBmD,wBAAyB,kBAAM9E,EAAoBA,IAAsB+E,EAAAA,oBAAoB,EAC7FC,yBAA0B,WAAO,EACjCC,wBAAyB,WAAO,EAChCC,sBAAuB,WAAO,EAC9BjrC,IAA4B,qBAAhBD,aAA+BgzB,EAAGuE,IAAIv3B,YAAYC,KAAOD,YAAYC,IAAM+yB,EAAGuE,IAAIp3B,KAAKF,KAAOE,KAAKF,IAAM,kBAAM,CAAC,EAE5HkrC,gBAAiBnY,EAAGuE,IAAIzB,YAAcA,gBAAajtD,EACnDuiE,cAAepY,EAAGuE,IAAIkL,cAAgBA,kBAAe55D,IAIrDwiE,WAAYjR,GAEhB,CAqfIkR,CAAetG,GA1wCnB,WACE,IAAIuG,EAIEC,EAA8B,qBAATC,MAAwBA,MAA0B,qBAAXhY,QAA0BA,OAC5F,IAAK+X,EAAa,OAAOT,EAAAA,qBAGzB,OAFyD,OAA3CQ,EAAqBC,EAAY/qD,YAAiB,EAAS8qD,EAAmBhiE,MAG1F,IAAK,QACL,IAAK,cACL,IAAK,WACL,IAAK,gBACL,IAAK,cACL,IAAK,YACH,OAAOmiE,EAAAA,sBAET,IAAK,cACL,IAAK,aACL,IAAK,cACL,IAAK,eACL,IAAK,eACL,IAAK,QACH,OAAOC,EAAAA,wBAET,QACE,OAAOZ,EAAAA,qBAEb,IA2uCEnD,GAAU9B,GAAV8B,WACAyD,GAAUvF,GAAVuF,WAEIO,GAAe,CACnB7T,QAAS,UACTE,QAAQ,GAGJ4T,GAAyB,SAACryB,EAAIsyB,GAClC,IAAMC,EAA+B,oBAAPvyB,EAAoBA,EAAGsyB,GAAUtyB,EAC/D,OAAIgoB,GAAWuK,GAAwBA,EAA2B,IAAItQ,EAAAA,eAAmBzzB,EAAAA,EAAAA,GAAC,CACxFgkC,gBAAiB,mBACjBF,OAAQA,EACRG,WAAW,EACXC,OAAO,GACJ1yB,GAEP,EAMA,SAAS2yB,GAAmBL,EAAQM,GAClC,GAAIA,EACF,OAAOA,EAGT,GAAaN,aARiBO,mBAQNP,EAAOQ,cAAe,CAC5C,IAAAC,EAKIT,EAAOQ,cAAcE,wBACzB,MAAO,CACLt6B,MANKq6B,EAALr6B,MAOAC,OANMo6B,EAANp6B,OAOAsb,IANG8e,EAAH9e,IAOAF,KANIgf,EAAJhf,KAQJ,CAEA,MAAO,CACLrb,MAAO,EACPC,OAAQ,EACRsb,IAAK,EACLF,KAAM,EAEV,CAEA,SAASkf,GAAWX,GAElB,IAAMY,EAAW1H,GAAM94D,IAAI4/D,GACrBa,EAAwB,MAAZD,OAAmB,EAASA,EAASjD,MACjDmD,EAAwB,MAAZF,OAAmB,EAASA,EAAS1P,MACnD0P,GAAUniE,QAAQC,KAAK,8CAG3B,IAcIqiE,EAdEC,EAA6C,oBAAhBC,YAEnCA,YACAxiE,QAAQkC,MAEFuwD,EAAQ4P,GAAava,GAAY1lB,GAAY80B,IAE7CgI,EAAQkD,GAAa/E,GAAWoF,gBAAgBhQ,EAAOiQ,EAAAA,eAAgB,MAAM,EAAO,KAAM,GAAIH,EAAqB,MAEpHJ,GAAU1H,GAAM74D,IAAI2/D,EAAQ,CAC/BrC,MAAAA,EACAzM,MAAAA,IAIF,IAAIkQ,GAAa,EACjB,MAAO,CACLC,UAAS,WAAa,IAAZ36D,EAAKlK,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,CAAC,EAEX8kE,EAeF56D,EAfFgnC,GACM6zB,EAcJ76D,EAdFf,KACAtL,EAaEqM,EAbFrM,OACWmnE,EAYT96D,EAZFq6D,UAASU,EAYP/6D,EAXFg7D,QAAAA,OAAO,IAAAD,GAAQA,EAAAE,EAWbj7D,EAVFspD,OAAAA,OAAM,IAAA2R,GAAQA,EAAAC,EAUZl7D,EATF4vD,KAAAA,OAAI,IAAAsL,GAAQA,EAAAC,EASVn7D,EARF2vD,OAAAA,OAAM,IAAAwL,GAAQA,EAAAC,EAQZp7D,EAPFq7D,aAAAA,OAAY,IAAAD,GAAQA,EAAAE,EAOlBt7D,EANF+vD,UAAAA,OAAS,IAAAuL,EAAG,SAAQA,EAAAC,EAMlBv7D,EALF0kD,IAAAA,OAAG,IAAA6W,EAAG,CAAC,EAAG,GAAEA,EACZ/tC,EAIExtB,EAJFwtB,YACWguC,EAGTx7D,EAHFksD,UACQuP,EAENz7D,EAFFinC,OACAukB,EACExrD,EADFwrD,gBAEEnzD,EAAQmyD,EAAMnK,WAEdrZ,EAAK3uC,EAAM2uC,GACV3uC,EAAM2uC,IAAI3uC,EAAMsB,IAAI,CACvBqtC,GAAIA,EAAKqyB,GAAuBuB,EAAUtB,KAG5C,IAAIpN,EAAY7zD,EAAM6zD,UACjBA,GAAW7zD,EAAMsB,IAAI,CACxBuyD,UAAWA,EAAY,IAAIjD,EAAAA,YAG7B,IAAAvnD,EAGI85D,GAAkB,CAAC,EAFrBE,EAAMh6D,EAANg6D,OACGx+D,GAAOy4B,EAAAA,EAAAA,GAAAj0B,EAAAm7B,GAUZ,GARK2jB,EAAG2E,IAAIjoD,EAASgvD,EAAWkN,KAAeP,GAAW3M,GAAS12B,EAAAA,EAAAA,GAAA,GAAOt4B,IAErEsjD,EAAG2E,IAAIuW,EAAQxP,EAAUwP,OAAQtC,KAAeP,GAAW3M,EAAW,CACzEwP,QAAMlmC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAO02B,EAAUwP,QAClBA,MAIFrjE,EAAM4uC,OAAQ,CACjB,IAAM00B,EAAWF,aAAyBxS,EAAAA,OACpChiB,EAAS00B,EAAWF,EAAgBJ,EAAe,IAAIpS,EAAAA,mBAAyB,EAAG,EAAG,EAAG,EAAG,GAAK,KAAQ,IAAIA,EAAAA,kBAAwB,GAAI,EAAG,GAAK,KAElJ0S,IACH10B,EAAOtsC,SAASyJ,EAAI,EAChBq3D,GAAe5C,GAAW5xB,EAAQw0B,GAEf,MAAjBA,GAAyBA,EAAcloC,UAAW0T,EAAOwJ,OAAO,EAAG,EAAG,IAG9Ep4C,EAAMsB,IAAI,CACRstC,OAAAA,GAEJ,CAGA,IAAK5uC,EAAMw5C,GAAI,CAEb,IAAM+pB,EAAgB,SAACnM,EAAW/iD,GAChC,IAAMrU,EAAQmyD,EAAMnK,WACI,UAApBhoD,EAAM03D,WACVd,GAAQQ,GAAW,EAAMp3D,EAAOqU,EAClC,EAGMmvD,EAAsB,WAC1B,IAAMxjE,EAAQmyD,EAAMnK,WACpBhoD,EAAM2uC,GAAG6K,GAAGC,QAAUz5C,EAAM2uC,GAAG6K,GAAGmhB,aAClC36D,EAAM2uC,GAAG6K,GAAGiqB,iBAAiBzjE,EAAM2uC,GAAG6K,GAAGmhB,aAAe4I,EAAgB,MACnEvjE,EAAM2uC,GAAG6K,GAAGmhB,cAAc74B,GAAW9hC,EAC5C,EAGMw5C,EAAK,CACT3U,QAAO,WACL,IAAM8J,EAAKwjB,EAAMnK,WAAWrZ,GAC5BA,EAAG6K,GAAGz4C,iBAAiB,eAAgByiE,GACvC70B,EAAG6K,GAAGz4C,iBAAiB,aAAcyiE,EACvC,EAEAE,WAAU,WACR,IAAM/0B,EAAKwjB,EAAMnK,WAAWrZ,GAC5BA,EAAG6K,GAAGt4C,oBAAoB,eAAgBsiE,GAC1C70B,EAAG6K,GAAGt4C,oBAAoB,aAAcsiE,EAC1C,GAIE70B,EAAG6K,IAAIA,EAAG3U,UACd7kC,EAAMsB,IAAI,CACRk4C,GAAAA,GAEJ,CAGA,GAAI7K,EAAGgL,UAAW,CAChB,IAAMgqB,EAAYxb,EAAGyE,IAAI+V,GAEzB,GAAIgB,GAAah1B,EAAGgL,UAAUF,UAAYkpB,IAAYxa,EAAG2E,IAAI6V,EAASh0B,EAAGgL,UAAWonB,IAAe,CACjG,IAAM5Z,EAAMxY,EAAGgL,UAAUF,QACzB9K,EAAGgL,UAAUF,UAAYkpB,EACpBgB,EAAqDh1B,EAAGgL,UAAUj7C,KAAOkyD,EAAAA,iBAA9Dz0D,OAAO4rD,OAAOpZ,EAAGgL,UAAWgpB,GACxCxb,IAAQxY,EAAGgL,UAAUF,UAAS9K,EAAGgL,UAAUzc,aAAc,EAC/D,CACF,EA38CN,SAAiB6O,EAAKrvC,EAAOqG,GAC3B,IAAMD,EAAMC,EAAKL,MACFK,EAAKqrD,QAAO,SAACC,EAAKvrD,GAAG,OAAKurD,EAAIvrD,EAAI,GAAEipC,GACrCjpC,GAAOpG,CACvB,EA48CQknE,CAAQhT,EAAO0G,EAAQ,CAAC,kBAAmB,eAG7C,IAAMvlB,EAAiBkf,EAASL,EAAAA,eAAuBA,EAAAA,aACjDiT,EAActM,EAAO3G,EAAAA,cAAsBA,EAAAA,sBAC7CjiB,EAAGoD,iBAAmBA,IAAgBpD,EAAGoD,eAAiBA,GAC1DpD,EAAGk1B,cAAgBA,IAAal1B,EAAGk1B,YAAcA,GAEjD7jE,EAAMs3D,SAAWA,GAAQt3D,EAAMsB,KAAI,iBAAO,CAC5Cg2D,OAAAA,EACD,IACGt3D,EAAMixD,SAAWA,GAAQjxD,EAAMsB,KAAI,iBAAO,CAC5C2vD,OAAAA,EACD,IACGjxD,EAAMu3D,OAASA,GAAMv3D,EAAMsB,KAAI,iBAAO,CACxCi2D,KAAAA,EACD,KAEGgL,GAAapa,EAAGuE,IAAI6V,IAAc5L,GAAW4L,IAAcpa,EAAG2E,IAAIyV,EAAU5zB,EAAIoyB,KAAeP,GAAW7xB,EAAI4zB,GAE9GjnE,IAAW0E,EAAM1E,OAAO0yD,UAAUhuD,EAAMsB,IAAI,CAC9ChG,OAAQA,EAAO62D,KAGb9F,GAAOrsD,EAAM83D,SAASzL,MAAQD,EAAaC,IAAMrsD,EAAMk4D,OAAO7L,GAElE,IAAMzlD,EAAO06D,GAAmBL,EAAQuB,GAqBxC,OAnBKra,EAAG2E,IAAIlmD,EAAM5G,EAAM4G,KAAMm6D,KAC5B/gE,EAAMi4D,QAAQrxD,EAAKygC,MAAOzgC,EAAK0gC,OAAQ1gC,EAAKixD,YAAajxD,EAAKg8C,IAAKh8C,EAAK87C,MAItE1iD,EAAM03D,YAAcA,GAAW13D,EAAMo4D,aAAaV,GAEjD13D,EAAMmzD,iBAAiBnzD,EAAMsB,IAAI,CACpC6xD,gBAAAA,IAGEh+B,IAAgBgzB,EAAG2E,IAAI33B,EAAan1B,EAAMm1B,YAAa4rC,KAAe/gE,EAAMsB,KAAI,SAAAtB,GAAK,MAAK,CAC5Fm1B,aAAWgI,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAOn9B,EAAMm1B,aACnBA,GAEN,IAED6sC,EAAYS,EACZJ,GAAa,EACNxlE,IACT,EAEAq2C,OAAM,SAACtS,GASL,OAPKyhC,GAAYxlE,KAAKylE,YACtBvF,GAAW+G,gBAA8Bz3B,EAAAA,cAAoBtH,GAAU,CACrEotB,MAAOA,EACPvxB,SAAUA,EACVohC,UAAWA,EACX+B,YAAa9C,IACXrC,EAAO,MAAM,WAAe,IACzBzM,CACT,EAEA6R,QAAO,WACLC,GAAuBhD,EACzB,EAGJ,CASA,SAASl8B,GAAQ/6B,GAKd,IAJDmoD,EAAKnoD,EAALmoD,MACAvxB,EAAQ52B,EAAR42B,SACAohC,EAASh4D,EAATg4D,UACA+B,EAAW/5D,EAAX+5D,YAgBA,OAdApb,GAA0B,WACxB,IAAM3oD,EAAQmyD,EAAMnK,WAEpBhoD,EAAMsB,KAAI,SAAAtB,GAAK,MAAK,CAClBmxD,UAAQh0B,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAOn9B,EAAMmxD,UAAQ,IAC3BvtB,QAAQ,IAEX,IAEGo+B,GAAWA,EAAUhiE,GAGpBmyD,EAAMnK,WAAW1sD,OAAO0rD,WAAmC,MAAxBhnD,EAAM1E,OAAOupC,SAA2B7kC,EAAM1E,OAAOupC,QAAQk/B,EACvG,GAAG,IACiB13B,EAAAA,cAAoBtqC,GAAQgjC,SAAU,CACxDroC,MAAOy1D,GACNvxB,EACL,CAEA,SAASqjC,GAAuBhD,EAAQp7C,GACtC,IAAM4mC,EAAO0N,GAAM94D,IAAI4/D,GACjBrC,EAAgB,MAARnS,OAAe,EAASA,EAAKmS,MAE3C,GAAIA,EAAO,CACT,IAAM5+D,EAAgB,MAARysD,OAAe,EAASA,EAAK0F,MAAMnK,WAC7ChoD,IAAOA,EAAMmxD,SAASvtB,QAAS,GACnCm5B,GAAW+G,gBAAgB,KAAMlF,EAAO,MAAM,WACxC5+D,GACFirD,YAAW,WACT,IACE,IAAIiZ,EAAWC,EAAuBC,EAAYC,EAEvB,MAA3BrkE,EAAM1E,OAAOooE,YAA8B1jE,EAAM1E,OAAOooE,aAC9B,OAAzBQ,EAAYlkE,EAAM2uC,KAA0E,OAAlDw1B,EAAwBD,EAAUI,cAAiE,MAAjCH,EAAsB3kB,SAA2B2kB,EAAsB3kB,UACzJ,OAA1B4kB,EAAapkE,EAAM2uC,KAAsD,MAA/By1B,EAAWG,kBAAoCH,EAAWG,mBACtE,OAA1BF,EAAarkE,EAAM2uC,KAAe01B,EAAW7qB,IAAIx5C,EAAMw5C,GAAGkqB,aA11D3E,SAAiB33B,GAGf,IAAK,IAAMz8B,KAFPy8B,EAAIyT,SAAwB,UAAbzT,EAAIrtC,MAAkBqtC,EAAIyT,UAE7BzT,EACD,MAAbz8B,EAAEkwC,SAA2BlwC,EAAEkwC,iBACxBzT,EAAIz8B,EAEf,CAo1DYkwC,CAAQx/C,GACRm6D,GAAM3R,OAAOyY,GACTp7C,GAAUA,EAASo7C,EACzB,CAAE,MAAOn3D,GACP,CAEJ,GAAG,IAEP,GACF,CACF,CAEA,SAASqlC,GAAavO,EAAU48B,EAAWx9D,GACzC,OAAoBqsC,EAAAA,cAAoBm4B,GAAQ,CAC9C1hE,IAAK06D,EAAU31D,KACf+4B,SAAUA,EACV48B,UAAWA,EACXx9D,MAAOA,GAEX,CAEA,SAASwkE,GAAMv6D,GAIZ,IAAAw6D,EAAAx6D,EAHDjK,MAAAA,OAAK,IAAAykE,EAAG,CAAC,EAACA,EACV7jC,EAAQ32B,EAAR22B,SACA48B,EAASvzD,EAATuzD,UAQEliE,EAGE0E,EAHF1E,OACAsL,EAEE5G,EAFF4G,KACGm8B,GAAIzF,EAAAA,EAAAA,GACLt9B,EAAKykC,GACHqvB,EAAe/K,KACrBla,EAAoBxC,EAAAA,UAAe,kBAAM,IAAIukB,EAAAA,SAAiB,IAAvDiD,GAAwD7rD,EAAAA,EAAAA,GAAA6mC,EAAA,GAA/C,GAChBuH,EAAkB/J,EAAAA,UAAe,kBAAM,IAAIukB,EAAAA,OAAe,IAAnDxK,GAAoDp+C,EAAAA,EAAAA,GAAAouC,EAAA,GAA7C,GACRsuB,EAASr4B,EAAAA,aAAkB,SAACsjB,EAAWgV,GAC3C,IAAMptC,GAAS4F,EAAAA,EAAAA,GAAA,GAAQwyB,GAMvBxzD,OAAO4G,KAAK4sD,GAAWnyB,SAAQ,SAAA16B,IAE7B4zD,GAAYhhD,SAAS5S,IACrB6sD,EAAU7sD,KAAS6hE,EAAY7hE,YACtBy0B,EAAUz0B,EAErB,IACA,IAAIg1D,OAAW95D,EAEf,GAAI2mE,GAAe/9D,EAAM,CACvB,IAAMgoC,EAAS+1B,EAAY/1B,OAE3BkpB,EAAWnI,EAAUmI,SAASf,mBAAmBnoB,EAAQ,IAAIgiB,EAAAA,QAAiBhqD,GAE1EgoC,IAAW+gB,EAAU/gB,QAAQ8iB,GAAa9iB,EAAQhoC,EACxD,CAEA,OAAAu2B,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACK5F,GAAS,IAEZuU,MAAO0xB,EACP3J,UAAAA,EACAzN,QAAAA,EACAqR,MAAOrR,EAEP0N,aAAAA,EAEAx4D,QAAM6hC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAOwyB,EAAUr0D,QACF,MAAfqpE,OAAsB,EAASA,EAAYrpE,QAC5CA,GAELsL,MAAIu2B,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAOwyB,EAAU/oD,MAChBA,GAELkxD,UAAQ36B,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAOwyB,EAAUmI,UACpBA,IAEF/0B,EAEP,GAAG,CAAC/iC,IACJq2C,EAAyBhK,EAAAA,UAAe,WAEtC,IAAMyb,EAAgBgM,EAAa9L,WAC7BmK,EAAQpzD,GAAO,SAACuC,EAAKD,GAAG,OAAA87B,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAW2qB,GAAa,IACpDhc,MAAO0xB,EACP3J,UAAAA,EACAzN,QAAAA,EACAqR,MAAOrR,EACP0N,aAAAA,EACAx4D,QAAM6hC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAO2qB,EAAcxsD,QACtBA,GAELsL,MAAIu2B,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAO2qB,EAAclhD,MACpBA,IAEFm8B,GAAI,IAEPzhC,IAAAA,EACAD,IAAAA,EAEA22D,UAAW,SAAA18D,GAAM,OAAIgG,GAAI,SAAAtB,GAAK,OAAAm9B,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAUn9B,GAAK,IAC3C1E,QAAM6hC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAOn9B,EAAM1E,QACdA,IACJ,GACA,OAEL,OAAO62D,CACT,IA3BOyS,GA2BL58D,EAAAA,EAAAA,GAAAquC,EAAA,GA3BmB,GAuCrB,OAXAhK,EAAAA,WAAgB,WAEd,IAAMw4B,EAAQ/Q,EAAat5B,WAAU,SAAAsqC,GAAI,OAAIF,EAAejd,UAAS,SAAA3nD,GAAK,OAAI0kE,EAAOI,EAAM9kE,EAAM,GAAC,IAClG,OAAO,WACL6kE,IACAD,EAAelc,SACjB,CACF,GAAG,IACHrc,EAAAA,WAAgB,WACdu4B,EAAejd,UAAS,SAAAgd,GAAW,OAAID,EAAO5Q,EAAa9L,WAAY2c,EAAY,GACrF,GAAG,CAACD,IACgBr4B,EAAAA,cAAoBA,EAAAA,SAAgB,KAAM0wB,GAAW5tB,aAA2B9C,EAAAA,cAAoBtqC,GAAQgjC,SAAU,CACxIroC,MAAOkoE,GACNhkC,GAAWgkC,EAAgB,MAChC,CAEA7H,GAAWgI,mBAAmB,CAC5BC,WAAoD,EACpDC,oBAAqB,qBACrBC,QAAS74B,EAAAA,UAECA,EAAAA,sNEvmEZ,SAAS84B,EAAWC,GAClB,IAAA//D,OAKc,IAAV+/D,EAAmB,CACrBzN,SAAU,EACV0N,QAAQ,EACRC,YAAY,GACVF,EARFzN,EAAQtyD,EAARsyD,SACA0N,EAAMhgE,EAANggE,OACAE,EAAQlgE,EAARkgE,SACAD,EAAUjgE,EAAVigE,WAMIE,EAAiBD,IAA+B,qBAAX3c,QAAsBphD,EAAAA,EAAAA,IAAA,SAAAg+D,KAAAjgE,EAAAA,EAAAA,GAAA,KAAAigE,EAAA,IAA6B5c,OAAO4c,gBAErG,IAAKA,EACH,MAAM,IAAIjmE,MAAM,kJAGlB,IAAAkmE,GAAsBxjC,EAAAA,EAAAA,UAAS,CAC7BygB,KAAM,EACNE,IAAK,EACLvb,MAAO,EACPC,OAAQ,EACRub,OAAQ,EACRJ,MAAO,EACP52C,EAAG,EACHC,EAAG,IACH45D,GAAA19D,EAAAA,EAAAA,GAAAy9D,EAAA,GATKE,EAAMD,EAAA,GAAEpkE,EAAGokE,EAAA,GAWZ1lE,GAAQy5B,EAAAA,EAAAA,QAAO,CACnBwoB,QAAS,KACT2jB,iBAAkB,KAClBC,eAAgB,KAChBC,WAAYH,IAGRI,EAAiBpO,EAA+B,kBAAbA,EAAwBA,EAAWA,EAAS0N,OAAS,KACxFW,EAAiBrO,EAA+B,kBAAbA,EAAwBA,EAAWA,EAASsO,OAAS,KAExFC,GAAUzsC,EAAAA,EAAAA,SAAO,IACvBmL,EAAAA,EAAAA,YAAU,WAER,OADAshC,EAAQlsC,SAAU,EACX,WAAYksC,EAAQlsC,SAAU,CAAM,CAC7C,IAEA,IAAAmsC,GAAmDvoC,EAAAA,EAAAA,UAAQ,WACzD,IAAM/X,EAAW,WACf,GAAK7lB,EAAMg6B,QAAQioB,QAAnB,CACA,IAAAmkB,EASIpmE,EAAMg6B,QAAQioB,QAAQ0f,wBACpB/6D,EAAO,CACX87C,KAVI0jB,EAAJ1jB,KAWAE,IAVGwjB,EAAHxjB,IAWAvb,MAVK++B,EAAL/+B,MAWAC,OAVM8+B,EAAN9+B,OAWAub,OAVMujB,EAANvjB,OAWAJ,MAVK2jB,EAAL3jB,MAWA52C,EAVCu6D,EAADv6D,EAWAC,EAVCs6D,EAADt6D,GAaE9L,EAAMg6B,QAAQioB,mBAAmBokB,aAAef,IAClD1+D,EAAK0gC,OAAStnC,EAAMg6B,QAAQioB,QAAQqkB,aACpC1/D,EAAKygC,MAAQrnC,EAAMg6B,QAAQioB,QAAQskB,aAGrCpqE,OAAOqqE,OAAO5/D,GACVs/D,EAAQlsC,UAAYysC,EAAezmE,EAAMg6B,QAAQ8rC,WAAYl/D,IAAOtF,EAAItB,EAAMg6B,QAAQ8rC,WAAal/D,EA5BrE,CA6BpC,EAEA,MAAO,CAACif,EAAUmgD,EAAiBU,IAAe7gD,EAAUmgD,GAAkBngD,EAAUkgD,EAAiBW,IAAe7gD,EAAUkgD,GAAkBlgD,EACtJ,GAAG,CAACvkB,EAAKgkE,EAAYS,EAAgBC,IAAgBW,GAAA3+D,EAAAA,EAAAA,GAAAm+D,EAAA,GAlC9CS,EAAYD,EAAA,GAAEE,EAAYF,EAAA,GAAEG,EAAYH,EAAA,GAoC/C,SAASI,IACH/mE,EAAMg6B,QAAQ4rC,mBAChB5lE,EAAMg6B,QAAQ4rC,iBAAiBpoC,SAAQ,SAAAykB,GAAO,OAAIA,EAAQ/gD,oBAAoB,SAAU4lE,GAAc,EAAK,IAC3G9mE,EAAMg6B,QAAQ4rC,iBAAmB,MAG/B5lE,EAAMg6B,QAAQ6rC,iBAChB7lE,EAAMg6B,QAAQ6rC,eAAenC,aAC7B1jE,EAAMg6B,QAAQ6rC,eAAiB,KAEnC,CAGA,SAASmB,IACFhnE,EAAMg6B,QAAQioB,UACnBjiD,EAAMg6B,QAAQ6rC,eAAiB,IAAIL,EAAesB,GAClD9mE,EAAMg6B,QAAQ6rC,eAAeoB,QAAQjnE,EAAMg6B,QAAQioB,SAE/CojB,GAAUrlE,EAAMg6B,QAAQ4rC,kBAC1B5lE,EAAMg6B,QAAQ4rC,iBAAiBpoC,SAAQ,SAAA0pC,GAAe,OAAIA,EAAgBnmE,iBAAiB,SAAU+lE,EAAc,CACjHK,SAAS,EACTC,SAAS,GACT,IAEN,CAGA,IA8ByBC,EAAU5tB,EARV6tB,EAJzB,OAYyBD,EArBPP,EAqBiBrtB,EArBH3wB,QAAQu8C,IAsBxCzgC,EAAAA,EAAAA,YAAU,WACR,GAAI6U,EAAS,CACX,IAAMz1B,EAAKqjD,EAKX,OAJAze,OAAO7nD,iBAAiB,SAAUijB,EAAI,CACpCmjD,SAAS,EACTC,SAAS,IAEJ,WAAWxe,OAAO1nD,oBAAoB,SAAU8iB,GAAI,EAAK,CAClE,CACF,GAAG,CAACqjD,EAAU5tB,IAlBW6tB,EAZPT,GAalBjiC,EAAAA,EAAAA,YAAU,WACR,IAAM5gB,EAAKsjD,EAEX,OADA1e,OAAO7nD,iBAAiB,SAAUijB,GAC3B,WAAW4kC,OAAO1nD,oBAAoB,SAAU8iB,EAAG,CAC5D,GAAG,CAACsjD,KAfJ1iC,EAAAA,EAAAA,YAAU,WACRmiC,IACAC,GACF,GAAG,CAAC3B,EAAQyB,EAAcD,KAE1BjiC,EAAAA,EAAAA,YAAU,kBAAMmiC,CAAe,GAAE,IAC1B,CAlBK,SAAAQ,GACLA,GAAQA,IAASvnE,EAAMg6B,QAAQioB,UACpC8kB,IACA/mE,EAAMg6B,QAAQioB,QAAUslB,EACxBvnE,EAAMg6B,QAAQ4rC,iBAAmB4B,EAAqBD,GACtDP,IACF,EAYarB,EAAQiB,EACvB,CAyBA,SAASY,EAAqBvlB,GAC5B,IAAMnnC,EAAS,GACf,IAAKmnC,GAAWA,IAAYhD,SAAS56C,KAAM,OAAOyW,EAClD,IAAA2sD,EAII7e,OAAO8e,iBAAiBzlB,GAE5B,MADI,CAJMwlB,EAARE,SACSF,EAATG,UACSH,EAATI,WAEmCvV,MAAK,SAAAjD,GAAI,MAAa,SAATA,GAA4B,WAATA,CAAiB,KAAGv0C,EAAO3b,KAAK8iD,GAC9F,GAAP3lD,OAAWwe,GAAMugB,EAAAA,EAAAA,GAAKmsC,EAAqBvlB,EAAQwf,gBACrD,CAGA,IAAM1+D,EAAO,CAAC,IAAK,IAAK,MAAO,SAAU,OAAQ,QAAS,QAAS,UAE7D0jE,EAAiB,SAACzyD,EAAG/E,GAAC,OAAKlM,EAAK08B,OAAM,SAAA38B,GAAG,OAAIkR,EAAElR,KAASmM,EAAEnM,EAAI,GAAC,ygBCtJrD,SAAAglE,EAEdlJ,EAEAmJ,EAEA9f,GAEA,GAAK2W,EAAL,CACI,IAAoB,IAApB3W,EAAS2W,GAAwB,OAAAA,EAGrC,IADA,IAAIrQ,EAAQwZ,EAAYnJ,EAAMoJ,OAASpJ,EAAMrQ,MACtCA,GAAO,CACZ,IAAM/nB,EAAQshC,EAAcvZ,EAAOwZ,EAAW9f,GAC1C,GAAAzhB,EAAc,OAAAA,EAEV+nB,EAAAwZ,EAAY,KAAOxZ,EAAMwN,OACnC,CATkB,CAUpB,CAKA,SAASkM,EAAelmE,GAClB,IACK,OAAA5F,OAAO+rE,iBAAiBnmE,EAAS,CACtComE,iBAAkB,CAChB9mE,IAAA,WACS,WACT,EACAC,IAAA,WAAO,GAET8mE,kBAAmB,CACjB/mE,IAAA,WACS,WACT,EACAC,IAAA,WAAO,IAEV,OACM07B,GACA,OAAAj7B,CACT,CACF,CAEA,IAAMsmE,EAAeJ,EAAY57B,EAAAA,cAA2B,OAK/Ci8B,EAAA,SAAA1c,IAAA1mD,EAAAA,EAAAA,GAAAojE,EAAA1c,GAAA,IAAAzmD,GAAAC,EAAAA,EAAAA,GAAAkjE,GAAA,SAAAA,IAAA,OAAA/iE,EAAAA,EAAAA,GAAA,KAAA+iE,GAAAnjE,EAAAxJ,MAAA,KAAA8B,UAAA,CAKX,OALW+J,EAAAA,EAAAA,GAAA8gE,EAAA,EAAAxlE,IAAA,SAAApG,MAGX,WACS,OAAA2vC,EAAAA,cAACg8B,EAAatjC,SAAb,CAAsBroC,MAAOG,KAAK0rE,iBAAkB1rE,KAAK8K,MAAMi5B,SACzE,KAAA0nC,CAAA,CALW,CAAsBj8B,EAAAA,WAenCm8B,EAAuDn8B,EAAAA,mDAA/Co8B,EAAAD,EAAAC,kBAAmBC,EAAAF,EAAAE,uBAMpB,SAASC,IACR,IAAAlc,EAAOpgB,EAAAA,WAAiBg8B,GAC9B,GAAa,OAAT5b,EAAqB,UAAIltD,MAAM,iEAI7B,IAAAyN,EAAKq/B,EAAAA,QAeJ,OAdOA,EAAAA,SAAc,WAC1B,IAAK,IAALoe,EAAA,EAAAme,EAAyB,CAAC,MAAAH,OAAA,EAAAA,EAAmBzuC,QAASyyB,EAAM,MAAAA,OAAA,EAAAA,EAAMwS,WAASxU,EAAAme,EAAAxpE,OAAAqrD,IAAG,CAA9E,IAAWoe,EAAAD,EAAAne,GACT,GAAKoe,EAAL,CACA,IAAMC,EAAQhB,EAAoBe,GAAY,GAAO,SAACtB,GAEpD,IADA,IAAIvnE,EAAQunE,EAAKwB,cACV/oE,GAAO,CACZ,GAAIA,EAAM+oE,gBAAkB/7D,EAAW,SACvChN,EAAQA,EAAMiqD,IAChB,KAEE,GAAA6e,EAAc,OAAAA,CARO,CAS3B,IACC,CAACrc,EAAMz/C,GAGZ,CAyGO,SAASg8D,IACd,IAAMC,EA7BD,WA5LP,IAAAv/B,EAAAC,EA6LQi1B,EAAQ+J,IACR95B,EAAexC,EAAAA,UAAe,kBAAM,IAAIupB,GAA8B,IAArEqT,GAAqEjhE,EAAAA,EAAAA,GAAA6mC,EAAA,GAA3D,GAGjBo6B,EAAWlvB,QAEX,IADA,IAAIwtB,EAAO3I,EACJ2I,GAAM,CACL,IAAAxlE,EAAU,OAAA2nC,EAAK69B,EAAA7oE,WAAM,EAAAgrC,EAAAw/B,SACvBnnE,GAAWA,IAAYsmE,IAAiBY,EAAW5V,IAAItxD,IAC9CknE,EAAA3nE,IAAIS,EAAS,OAAA4nC,EAAwB,MAAA++B,OAAA,EAAAA,EAAA1uC,cAAxB,EAAA2P,EAAiCw/B,YAAYlB,EAAYlmE,KAEnFwlE,EAAOA,EAAKS,MACd,CAEO,OAAAiB,CACT,CAaqBG,GAGnB,OAAO/8B,EAAAA,SACL,kBACE7rC,MAAMuU,KAAKk0D,EAAWlmE,QAAQqrD,QAC5B,SAACib,EAAMtnE,GAAA,OAAY,SAAC4F,GAAA,OAEf0kC,EAAAA,cAAAg9B,EAAA,KACEh9B,EAAAA,cAAAtqC,EAAQgjC,YAARukC,EAAA,GAAqB3hE,KAArB,CAA4BjL,MAAOusE,EAAW5nE,IAAIU,wBACrD,KAEJ,SAAC4F,GAAA,OAAW0kC,EAAAA,cAAAi8B,EAAAgB,EAAA,GAAkB3hE,GAAO,GACvC,GACF,CAACshE,GAEL,sPC5NMM,EAAa,CACjBC,QAAS,CAAC,SAAS,GACnBpqB,cAAe,CAAC,eAAe,GAC/BqqB,cAAe,CAAC,YAAY,GAC5BC,QAAS,CAAC,SAAS,GACnBrqB,cAAe,CAAC,eAAe,GAC/BU,YAAa,CAAC,aAAa,GAC3BkT,eAAgB,CAAC,gBAAgB,GACjCnT,cAAe,CAAC,eAAe,GAC/BR,gBAAiB,CAAC,iBAAiB,GACnCqqB,qBAAsB,CAAC,sBAAsB,IAI/C,SAASC,EAAoBzX,GAC3B,IACEiB,GACElB,EAAAA,EAAAA,GAAaC,GADfiB,cAEF,MAAO,CACLkB,SAAU,EACV7a,SAAS,EAETsa,QAAO,SAACn+C,EAAO5V,EAAO8uD,GAGpB9uD,EAAMomD,QAAQ9kD,IAAIsU,EAAMg/C,QAAU50D,EAAM4G,KAAKygC,MAAQ,EAAI,GAAKzxB,EAAMk/C,QAAU90D,EAAM4G,KAAK0gC,OAAU,EAAI,GACvGtnC,EAAM6zD,UAAUgW,cAAc7pE,EAAMomD,QAASpmD,EAAM4uC,OACrD,EAEAoY,eAAWhpD,EACXgwD,SAAU7xD,OAAO4G,KAAKwmE,GAAYnb,QAAO,SAACC,EAAKvrD,GAAG,OAAAq6B,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAWkxB,GAAG,IAAA3zB,EAAAA,EAAAA,GAAA,GAC7D53B,EAAMswD,EAActwD,IAAI,GACvB,CAAC,GACL+hC,QAAS,SAAAjpC,GACP,IAAIkuE,EAEJC,EAGI5X,EAAMnK,WAFR1mD,EAAGyoE,EAAHzoE,IACAhG,EAAMyuE,EAANzuE,OAEmB,MAArBA,EAAOooE,YAA8BpoE,EAAOooE,aAC5CpiE,GAAI,SAAAtB,GAAK,MAAK,CACZ1E,QAAM6hC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAOn9B,EAAM1E,QAAM,IACvB0rD,UAAWprD,IAEd,IACDO,OAAO8xD,QAAgD,OAAvC6b,EAAmBxuE,EAAO0yD,UAAoB8b,EAAmB,IAAItsC,SAAQ,SAAAn4B,GAAmB,IAAAuC,GAAAI,EAAAA,EAAAA,GAAA3C,EAAA,GAAjBrI,EAAI4K,EAAA,GAAEgO,EAAKhO,EAAA,GACxGoiE,GAAAhiE,EAAAA,EAAAA,GAA6BuhE,EAAWvsE,GAAK,GAAtCitE,EAASD,EAAA,GAAE5C,EAAO4C,EAAA,GACzBpuE,EAAOmF,iBAAiBkpE,EAAWr0D,EAAO,CACxCwxD,QAAAA,GAEJ,GACF,EACA1D,WAAY,WACV,IAMMwG,EANNC,EAGIhY,EAAMnK,WAFR1mD,EAAG6oE,EAAH7oE,IACAhG,EAAM6uE,EAAN7uE,OAGEA,EAAO0rD,YAGT7qD,OAAO8xD,QAAiD,OAAxCic,EAAoB5uE,EAAO0yD,UAAoBkc,EAAoB,IAAI1sC,SAAQ,SAAA11B,GAAmB,IAAAM,GAAAJ,EAAAA,EAAAA,GAAAF,EAAA,GAAjB9K,EAAIoL,EAAA,GAAEwN,EAAKxN,EAAA,GAC1G,GAAI9M,GAAUA,EAAO0rD,qBAAqBqf,YAAa,CACrD,IAAO4D,GAAPjiE,EAAAA,EAAAA,GAAoBuhE,EAAWvsE,GAAK,GAApB,GAChB1B,EAAO0rD,UAAU9lD,oBAAoB+oE,EAAWr0D,EAClD,CACF,IACAtU,GAAI,SAAAtB,GAAK,MAAK,CACZ1E,QAAM6hC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAOn9B,EAAM1E,QAAM,IACvB0rD,eAAWhpD,IAEd,IAEL,EAEJ,CAEA,IAAMosE,EAA0B/9B,EAAAA,YAAiB,SAAehkC,EAsB7DgiE,GAAc,IArBfzpC,EAAQv4B,EAARu4B,SACA0pC,EAAQjiE,EAARiiE,SACArE,EAAM59D,EAAN49D,OACA/mB,EAAK72C,EAAL62C,MACAvQ,EAAEtmC,EAAFsmC,GAAE47B,EAAAliE,EACF/M,OAAAA,OAAM,IAAAivE,EAAGX,EAAmBW,EAC5BC,EAAWniE,EAAXmiE,YACAC,EAAWpiE,EAAXoiE,YACA9H,EAAOt6D,EAAPs6D,QACA1R,EAAM5oD,EAAN4oD,OACAsG,EAAIlvD,EAAJkvD,KACAD,EAAMjvD,EAANivD,OACA0L,EAAY36D,EAAZ26D,aACAtL,EAASrvD,EAATqvD,UACArL,EAAGhkD,EAAHgkD,IACAl3B,EAAW9sB,EAAX8sB,YACA0+B,EAASxrD,EAATwrD,UACAjlB,EAAMvmC,EAANumC,OACAukB,EAAe9qD,EAAf8qD,gBACA6O,EAAS35D,EAAT25D,UACGr6D,GAAK21B,EAAAA,EAAAA,GAAAj1B,EAAA0lC,GAKR1B,EAAAA,SAAc,kBAAM3hB,EAAAA,EAAAA,GAAOkmC,EAAM,GAAE,IACnC,IAAM8Z,EAAS1B,IACf2B,EAAsCxF,GAAUhoC,EAAAA,EAAAA,GAAC,CAC/CkoC,QAAQ,EACR1N,SAAU,CACR0N,OAAQ,GACRY,OAAQ,IAEPA,IACH2E,GAAA5iE,EAAAA,EAAAA,GAAA2iE,EAAA,GAPKE,EAAYD,EAAA,GAAEE,EAAaF,EAAA,GAQ5BG,EAAY1+B,EAAAA,OAAa,MACzB2+B,EAAS3+B,EAAAA,OAAa,MAC5BwC,EAA4BxC,EAAAA,SAAe,MAAK4+B,GAAAjjE,EAAAA,EAAAA,GAAA6mC,EAAA,GAAzCoyB,EAAMgK,EAAA,GAAEC,EAASD,EAAA,GACxB5+B,EAAAA,oBAA0Bg+B,GAAc,kBAAMU,EAAU/wC,OAAO,IAC/D,IAAMmxC,GAAsB1f,EAAAA,EAAAA,GAAmB0H,GAC/C/c,EAA0B/J,EAAAA,UAAe,GAAM++B,GAAApjE,EAAAA,EAAAA,GAAAouC,EAAA,GAAxCi1B,EAAKD,EAAA,GAAEE,EAAQF,EAAA,GACtB/0B,EAA0BhK,EAAAA,UAAe,GAAMk/B,GAAAvjE,EAAAA,EAAAA,GAAAquC,EAAA,GAAxCz0C,EAAK2pE,EAAA,GAAEC,GAAQD,EAAA,GAEtB,GAAIF,EAAO,MAAMA,EAEjB,GAAIzpE,EAAO,MAAMA,EACjB,IAAM6qD,GAAOpgB,EAAAA,OAAa,MAEtBy+B,EAAczjC,MAAQ,GAAKyjC,EAAcxjC,OAAS,GAAK25B,IACpDxU,GAAKzyB,UAASyyB,GAAKzyB,SAAU4nC,EAAAA,EAAAA,GAAWX,IAC7CxU,GAAKzyB,QAAQsoC,UAAU,CACrB3zB,GAAAA,EACArzC,OAAAA,EACAqnE,QAAAA,EACA1R,OAAAA,EACAsG,KAAAA,EACAD,OAAAA,EACA0L,aAAAA,EACAtL,UAAAA,EACArL,IAAAA,EACAl3B,YAAAA,EACA0+B,UAAAA,EACAjlB,OAAAA,EACAhoC,KAAMkkE,EAEN3X,gBAAiB,kBAA4C,MAA/BgY,EAAoBnxC,aAAkB,EAASmxC,EAAoBnxC,QAAOr+B,MAA3BwvE,EAAmB1tE,UAAiB,EACjHukE,UAAW,SAAAhiE,GAEe,MAAxBA,EAAM1E,OAAOupC,SAA2B7kC,EAAM1E,OAAOupC,QAAQ2lC,GAAclf,EAAAA,EAAAA,GAAMkf,GAAeA,EAAYxwC,QAAUwwC,EAAcQ,EAAOhxC,SAEvIywC,GACFzqE,EAAMg4D,UAAU,CACdjE,QAAS,SAACn+C,EAAO5V,GACf,IAAM6L,EAAI+J,EAAM60D,EAAc,KACxB3+D,EAAI8J,EAAM60D,EAAc,KAC9BzqE,EAAMomD,QAAQ9kD,IAAIuK,EAAI7L,EAAM4G,KAAKygC,MAAQ,EAAI,GAAKv7B,EAAI9L,EAAM4G,KAAK0gC,OAAU,EAAI,GAC/EtnC,EAAM6zD,UAAUgW,cAAc7pE,EAAMomD,QAASpmD,EAAM4uC,OACrD,IAKS,MAAbozB,GAA6BA,EAAUhiE,EACzC,IAEFysD,GAAKzyB,QAAQkZ,OAAqB7G,EAAAA,cAAoBq+B,EAAQ,KAAmBr+B,EAAAA,cAAoBsf,EAAAA,EAAe,CAClHrqD,IAAKkqE,IACSn/B,EAAAA,cAAoBA,EAAAA,SAAgB,CAClDi+B,SAAuBj+B,EAAAA,cAAoBqf,EAAAA,EAAO,CAChDpqD,IAAKgqE,KAEN1qC,QAGL+nB,EAAAA,EAAAA,IAA0B,WACxBuiB,EAAUH,EAAU/wC,QACtB,GAAG,IACHqS,EAAAA,WAAgB,WACd,GAAI40B,EAAQ,OAAO,kBAAMgD,EAAAA,EAAAA,GAAuBhD,EAAO,CACzD,GAAG,CAACA,IAGJ,IAAMwK,GAAgBjB,EAAc,OAAS,OAC7C,OAAoBn+B,EAAAA,cAAoB,OAAOuD,EAAAA,EAAAA,GAAS,CACtDrW,IAAKyxC,EACL9rB,OAAK/hB,EAAAA,EAAAA,GAAA,CACH76B,SAAU,WACV+kC,MAAO,OACPC,OAAQ,OACRqgC,SAAU,SACV8D,cAAAA,IACGvsB,IAEJv3C,GAAqB0kC,EAAAA,cAAoB,MAAO,CACjD9S,IAAKsxC,EACL3rB,MAAO,CACL7X,MAAO,OACPC,OAAQ,SAEI+E,EAAAA,cAAoB,SAAU,CAC5C9S,IAAKwxC,EACL7rB,MAAO,CACLwsB,QAAS,UAEVpB,IACL,IAMMqB,EAAsBt/B,EAAAA,YAAiB,SAAuB1kC,EAAO4xB,GACzE,OAAoB8S,EAAAA,cAAoBi8B,EAAe,KAAmBj8B,EAAAA,cAAoB+9B,GAAYx6B,EAAAA,EAAAA,GAAS,CAAC,EAAGjoC,EAAO,CAC5H4xB,IAAKA,KAET,sBCrNA,SAASo+B,EAASiU,EAAMC,EAAMC,GAC5B,IAAIC,EAASjwE,EAAMiG,EAASq1D,EAAWt8C,EAGvC,SAASkxD,IACP,IAAI7d,EAAO74B,KAAKF,MAAQgiC,EAEpBjJ,EAAO0d,GAAQ1d,GAAQ,EACzB4d,EAAU9gB,WAAW+gB,EAAOH,EAAO1d,IAEnC4d,EAAU,KACLD,IACHhxD,EAAS8wD,EAAKjwE,MAAMoG,EAASjG,GAC7BiG,EAAUjG,EAAO,MAGvB,CAdI,MAAQ+vE,IAAMA,EAAO,KAgBzB,IAAII,EAAY,WACdlqE,EAAUlF,KACVf,EAAO2B,UACP25D,EAAY9hC,KAAKF,MACjB,IAAI82C,EAAUJ,IAAcC,EAO5B,OANKA,IAASA,EAAU9gB,WAAW+gB,EAAOH,IACtCK,IACFpxD,EAAS8wD,EAAKjwE,MAAMoG,EAASjG,GAC7BiG,EAAUjG,EAAO,MAGZgf,CACT,EAmBA,OAjBAmxD,EAAUlyB,MAAQ,WACZgyB,IACFnU,aAAamU,GACbA,EAAU,KAEd,EAEAE,EAAUE,MAAQ,WACZJ,IACFjxD,EAAS8wD,EAAKjwE,MAAMoG,EAASjG,GAC7BiG,EAAUjG,EAAO,KAEjB87D,aAAamU,GACbA,EAAU,KAEd,EAEOE,CACT,CAGAtU,EAASA,SAAWA,EAEpByU,EAAO7wE,QAAUo8D,gDClEfv7B,GAEA,OAAO,SAAC1/B,GACN0/B,EAAKoB,SAAQ,SAACjE,GACO,oBAARA,EACTA,EAAI78B,GACY,MAAP68B,IACRA,EAAyCS,QAAUt9B,EAEvD,GACF,CACF,mCCLYnB,EAAQ6mE,eAAe,EAAE7mE,EAAQulE,wBAAwB,EAAEvlE,EAAQ2kE,qBAAqB,GAAG3kE,EAAQslE,sBAAsB,wBCAtIuL,EAAO7wE,QAAU,SAAuB8wE,GACpC,IAAI9wE,EAAU,CAAC,EACF+wE,EAAGC,EAAQ,MAASC,EAAGD,EAAQ,MAAaE,EAAGtwE,OAAO4rD,OAAO,SAASlnD,EAAEmT,GAAG,IAAI,IAAI/E,EAAE,yDAAyD+E,EAAEC,EAAE,EAAEA,EAAExW,UAAU2B,OAAO6U,IAAIhF,GAAG,WAAWy9D,mBAAmBjvE,UAAUwW,IAAI,MAAM,yBAAyBD,EAAE,WAAW/E,EAAE,gHAAgH,CACzY,IAAI09D,EAAGL,EAAGM,mDAAmDC,EAAG/iB,OAAOgjB,IAAI,iBAAiBC,EAAGjjB,OAAOgjB,IAAI,gBAAgBE,EAAGljB,OAAOgjB,IAAI,kBAAkBG,EAAGnjB,OAAOgjB,IAAI,qBAAqBI,EAAGpjB,OAAOgjB,IAAI,kBAAkBK,EAAGrjB,OAAOgjB,IAAI,kBAAkBM,EAAGtjB,OAAOgjB,IAAI,iBAAiBO,EAAGvjB,OAAOgjB,IAAI,qBAAqBQ,EAAGxjB,OAAOgjB,IAAI,kBAAkBS,EAAGzjB,OAAOgjB,IAAI,uBAAuBU,EAAG1jB,OAAOgjB,IAAI,cAAcW,EAAG3jB,OAAOgjB,IAAI,cAAchjB,OAAOgjB,IAAI,eAAehjB,OAAOgjB,IAAI,0BACje,IAAIY,EAAG5jB,OAAOgjB,IAAI,mBAAmBhjB,OAAOgjB,IAAI,uBAAuBhjB,OAAOgjB,IAAI,eAAehjB,OAAOgjB,IAAI,wBAAwB,IAAIa,EAAG7jB,OAAOC,SAAS,SAAS6jB,EAAG55D,GAAG,OAAG,OAAOA,GAAG,kBAAkBA,EAAS,KAAwC,oBAAnCA,EAAE25D,GAAI35D,EAAE25D,IAAK35D,EAAE,eAA0CA,EAAE,IAAI,CACtR,SAASoJ,EAAGpJ,GAAG,GAAG,MAAMA,EAAE,OAAO,KAAK,GAAG,oBAAoBA,EAAE,OAAOA,EAAE65D,aAAa75D,EAAEhX,MAAM,KAAK,GAAG,kBAAkBgX,EAAE,OAAOA,EAAE,OAAOA,GAAG,KAAKg5D,EAAG,MAAM,WAAW,KAAKD,EAAG,MAAM,SAAS,KAAKG,EAAG,MAAM,WAAW,KAAKD,EAAG,MAAM,aAAa,KAAKK,EAAG,MAAM,WAAW,KAAKC,EAAG,MAAM,eAAe,GAAG,kBAAkBv5D,EAAE,OAAOA,EAAE85D,UAAU,KAAKV,EAAG,OAAOp5D,EAAE65D,aAAa,WAAW,YAAY,KAAKV,EAAG,OAAOn5D,EAAEk1D,SAAS2E,aAAa,WAAW,YAAY,KAAKR,EAAG,IAAIp+D,EAAE+E,EAAEk/B,OAC7Z,OADoal/B,EAAEA,EAAE65D,eACnd75D,EAAE,MADieA,EAAE/E,EAAE4+D,aAClf5+D,EAAEjS,MAAM,IAAY,cAAcgX,EAAE,IAAI,cAAqBA,EAAE,KAAKw5D,EAAG,OAA6B,QAAtBv+D,EAAE+E,EAAE65D,aAAa,MAAc5+D,EAAEmO,EAAGpJ,EAAEtV,OAAO,OAAO,KAAK+uE,EAAGx+D,EAAE+E,EAAE+5D,SAAS/5D,EAAEA,EAAEg6D,MAAM,IAAI,OAAO5wD,EAAGpJ,EAAE/E,GAAG,CAAC,MAAMgF,GAAG,EAAE,OAAO,IAAI,CAC3M,SAASg6D,EAAGj6D,GAAG,IAAI/E,EAAE+E,EAAEtV,KAAK,OAAOsV,EAAEk6D,KAAK,KAAK,GAAG,MAAM,QAAQ,KAAK,EAAE,OAAOj/D,EAAE4+D,aAAa,WAAW,YAAY,KAAK,GAAG,OAAO5+D,EAAEi6D,SAAS2E,aAAa,WAAW,YAAY,KAAK,GAAG,MAAM,qBAAqB,KAAK,GAAG,OAAkB75D,GAAXA,EAAE/E,EAAEikC,QAAW26B,aAAa75D,EAAEhX,MAAM,GAAGiS,EAAE4+D,cAAc,KAAK75D,EAAE,cAAcA,EAAE,IAAI,cAAc,KAAK,EAAE,MAAM,WAAW,KAAK,EAAE,OAAO/E,EAAE,KAAK,EAAE,MAAM,SAAS,KAAK,EAAE,MAAM,OAAO,KAAK,EAAE,MAAM,OAAO,KAAK,GAAG,OAAOmO,EAAGnO,GAAG,KAAK,EAAE,OAAOA,IAAIg+D,EAAG,aAAa,OAAO,KAAK,GAAG,MAAM,YACtf,KAAK,GAAG,MAAM,WAAW,KAAK,GAAG,MAAM,QAAQ,KAAK,GAAG,MAAM,WAAW,KAAK,GAAG,MAAM,eAAe,KAAK,GAAG,MAAM,gBAAgB,KAAK,EAAE,KAAK,EAAE,KAAK,GAAG,KAAK,EAAE,KAAK,GAAG,KAAK,GAAG,GAAG,oBAAoBh+D,EAAE,OAAOA,EAAE4+D,aAAa5+D,EAAEjS,MAAM,KAAK,GAAG,kBAAkBiS,EAAE,OAAOA,EAAE,OAAO,IAAI,CAAC,SAASk/D,EAAGn6D,GAAG,IAAI/E,EAAE+E,EAAEC,EAAED,EAAE,GAAGA,EAAEirD,UAAU,KAAKhwD,EAAE+4D,QAAQ/4D,EAAEA,EAAE+4D,WAAW,CAACh0D,EAAE/E,EAAE,GAAO,KAAa,MAAjBA,EAAE+E,GAASpW,SAAcqW,EAAEhF,EAAE+4D,QAAQh0D,EAAE/E,EAAE+4D,aAAah0D,EAAE,CAAC,OAAO,IAAI/E,EAAEi/D,IAAIj6D,EAAE,IAAI,CAAC,SAASm6D,EAAGp6D,GAAG,GAAGm6D,EAAGn6D,KAAKA,EAAE,MAAMzU,MAAMsB,EAAE,KAAM,CACze,SAASwtE,EAAGr6D,GAAG,IAAI/E,EAAE+E,EAAEirD,UAAU,IAAIhwD,EAAE,CAAS,GAAG,QAAXA,EAAEk/D,EAAGn6D,IAAe,MAAMzU,MAAMsB,EAAE,MAAM,OAAOoO,IAAI+E,EAAE,KAAKA,CAAC,CAAC,IAAI,IAAIC,EAAED,EAAEE,EAAEjF,IAAI,CAAC,IAAInF,EAAEmK,EAAE+zD,OAAO,GAAG,OAAOl+D,EAAE,MAAM,IAAIC,EAAED,EAAEm1D,UAAU,GAAG,OAAOl1D,EAAE,CAAY,GAAG,QAAdmK,EAAEpK,EAAEk+D,QAAmB,CAAC/zD,EAAEC,EAAE,QAAQ,CAAC,KAAK,CAAC,GAAGpK,EAAEykD,QAAQxkD,EAAEwkD,MAAM,CAAC,IAAIxkD,EAAED,EAAEykD,MAAMxkD,GAAG,CAAC,GAAGA,IAAIkK,EAAE,OAAOm6D,EAAGtkE,GAAGkK,EAAE,GAAGjK,IAAImK,EAAE,OAAOk6D,EAAGtkE,GAAGmF,EAAElF,EAAEA,EAAEgyD,OAAO,CAAC,MAAMx8D,MAAMsB,EAAE,KAAM,CAAC,GAAGoT,EAAE+zD,SAAS9zD,EAAE8zD,OAAO/zD,EAAEnK,EAAEoK,EAAEnK,MAAM,CAAC,IAAI,IAAIoK,GAAE,EAAGC,EAAEtK,EAAEykD,MAAMn6C,GAAG,CAAC,GAAGA,IAAIH,EAAE,CAACE,GAAE,EAAGF,EAAEnK,EAAEoK,EAAEnK,EAAE,KAAK,CAAC,GAAGqK,IAAIF,EAAE,CAACC,GAAE,EAAGD,EAAEpK,EAAEmK,EAAElK,EAAE,KAAK,CAACqK,EAAEA,EAAE2nD,OAAO,CAAC,IAAI5nD,EAAE,CAAC,IAAIC,EAAErK,EAAEwkD,MAAMn6C,GAAG,CAAC,GAAGA,IAC5fH,EAAE,CAACE,GAAE,EAAGF,EAAElK,EAAEmK,EAAEpK,EAAE,KAAK,CAAC,GAAGsK,IAAIF,EAAE,CAACC,GAAE,EAAGD,EAAEnK,EAAEkK,EAAEnK,EAAE,KAAK,CAACsK,EAAEA,EAAE2nD,OAAO,CAAC,IAAI5nD,EAAE,MAAM5U,MAAMsB,EAAE,KAAM,CAAC,CAAC,GAAGoT,EAAEgrD,YAAY/qD,EAAE,MAAM3U,MAAMsB,EAAE,KAAM,CAAC,GAAG,IAAIoT,EAAEi6D,IAAI,MAAM3uE,MAAMsB,EAAE,MAAM,OAAOoT,EAAEirD,UAAUllC,UAAU/lB,EAAED,EAAE/E,CAAC,CAAC,SAASq/D,EAAGt6D,GAAW,OAAO,QAAfA,EAAEq6D,EAAGr6D,IAAmBu6D,EAAGv6D,GAAG,IAAI,CAAC,SAASu6D,EAAGv6D,GAAG,GAAG,IAAIA,EAAEk6D,KAAK,IAAIl6D,EAAEk6D,IAAI,OAAOl6D,EAAE,IAAIA,EAAEA,EAAEu6C,MAAM,OAAOv6C,GAAG,CAAC,IAAI/E,EAAEs/D,EAAGv6D,GAAG,GAAG,OAAO/E,EAAE,OAAOA,EAAE+E,EAAEA,EAAE+nD,OAAO,CAAC,OAAO,IAAI,CAC1X,SAASyS,EAAGx6D,GAAG,GAAG,IAAIA,EAAEk6D,KAAK,IAAIl6D,EAAEk6D,IAAI,OAAOl6D,EAAE,IAAIA,EAAEA,EAAEu6C,MAAM,OAAOv6C,GAAG,CAAC,GAAG,IAAIA,EAAEk6D,IAAI,CAAC,IAAIj/D,EAAEu/D,EAAGx6D,GAAG,GAAG,OAAO/E,EAAE,OAAOA,CAAC,CAAC+E,EAAEA,EAAE+nD,OAAO,CAAC,OAAO,IAAI,CAC/I,IAKoV0S,EALhVC,EAAGluE,MAAM0sC,QAAQyhC,EAAGtC,EAAc/M,kBAAkBsP,EAAGvC,EAAc1O,mBAAmBkR,EAAGxC,EAAczO,oBAAoBkR,EAAGzC,EAAc9M,iBAAiBwP,EAAG1C,EAAc5M,iBAAiBuP,EAAG3C,EAAcjR,eAAe6T,EAAG5C,EAAcpP,mBAAmBiS,EAAG7C,EAAcvO,wBAAwBqR,EAAG9C,EAActO,cAAcqR,EAAG/C,EAAc3M,qBAAqB2P,EAAGhD,EAAcvM,mBAAmBwP,EAAGjD,EAAc/L,gBAAgBiP,EAAGlD,EAAc9L,cAAciP,EAAGnD,EAAc/O,UAC5emS,EAAGpD,EAAclP,kBAAkBuS,EAAGrD,EAAcnP,iBAAiByS,EAAGtD,EAAcjP,oBAAoB9tD,EAAE+8D,EAAchP,kBAAkBuS,EAAGvD,EAAcwD,oBAAoBC,EAAGzD,EAAc7M,mBAAmBuQ,EAAG1D,EAAcpM,wBAAwB+P,GAAG3D,EAAchM,sBAAsB4P,GAAG5D,EAAc6D,mBAAmBjsD,GAAGooD,EAAc8D,kBAAkBC,GAAG/D,EAAcgE,sBAAsBrsD,GAAGqoD,EAAciE,cAAcC,GAAGlE,EAAcmE,gBAAgBC,GAAGpE,EAAcqE,eAAeC,GACnftE,EAAcuE,gBAAgBC,GAAGxE,EAAcyE,uBAAuBC,GAAG1E,EAAc2E,oBAAoBC,GAAG5E,EAAc6E,0BAA0BC,GAAG9E,EAAc/Q,YAAY8V,GAAG/E,EAAc9O,uBAAuB8T,GAAGhF,EAAciF,iBAAiBC,GAAGlF,EAAcjN,YAAYoS,GAAGnF,EAAc3N,aAAa+S,GAAGpF,EAAc1Q,aAAa+V,GAAGrF,EAAc3O,wBAAwBiU,GAAGtF,EAAcnQ,YAAY0V,GAAGvF,EAAc5O,yBAAyBoU,GAAGxF,EAAcyF,iBAAiBC,GAAG1F,EAAczM,aACzfoS,GAAG3F,EAActM,iBAAiB1iD,GAAGgvD,EAAcxM,eAAeoS,GAAG5F,EAAcrM,mBAAmBkS,GAAG7F,EAAc1M,eAAewS,GAAG9F,EAAc+F,cAAcC,GAAGhG,EAAciG,wBAAwBC,GAAGlG,EAAcmG,+BAA+BC,GAAGpG,EAAcqG,0BAA0BC,GAAGtG,EAAcuG,yBAAyBC,GAAGxG,EAAcyG,oBAAoBC,GAAG1G,EAAc2G,wBAAwBC,GAAG5G,EAAc6G,mBAAmBC,GAAG9G,EAAc+G,uBAAuBC,GAAGhH,EAAciH,2BAC9fC,GAAGlH,EAAcmH,0BAA0BC,GAAGpH,EAAcqH,2BAA2BC,GAAGtH,EAAcuH,8BAA8BC,GAAGxH,EAAcyH,yBAAyBC,GAAG1H,EAAc2H,wBAAwBC,GAAG5H,EAAc6H,uCAAuCC,GAAG9H,EAAc+H,8CAA8CC,GAAGhI,EAAciI,gBAAgBC,GAAGlI,EAAcmI,oBAAoBC,GAAGpI,EAAcqI,wBAAwBC,GAAGtI,EAAcuI,+CAChdC,GAAGxI,EAAcyI,wBAAwBC,GAAG1I,EAAc2I,+BAA+BC,GAAG5I,EAAc6I,sBAAsBC,GAAG9I,EAAc+I,mCAAmCC,GAAGhJ,EAAciJ,oCAAoCC,GAAGlJ,EAAcmJ,yCAAyCC,GAAGpJ,EAAcqJ,gCAAmC,SAASC,GAAG3hE,GAAG,QAAG,IAASy6D,EAAG,IAAI,MAAMlvE,OAAQ,CAAC,MAAM0U,GAAG,IAAIhF,EAAEgF,EAAE2hE,MAAMC,OAAOrvC,MAAM,gBAAgBioC,EAAGx/D,GAAGA,EAAE,IAAI,EAAE,CAAC,MAAM,KAAKw/D,EAAGz6D,CAAC,CAAC,IAAI8hE,IAAG,EACle,SAASC,GAAG/hE,EAAE/E,GAAG,IAAI+E,GAAG8hE,GAAG,MAAM,GAAGA,IAAG,EAAG,IAAI7hE,EAAE1U,MAAMy2E,kBAAkBz2E,MAAMy2E,uBAAkB,EAAO,IAAI,GAAG/mE,EAAE,GAAGA,EAAE,WAAW,MAAM1P,OAAQ,EAAEpD,OAAOgF,eAAe8N,EAAEjT,UAAU,QAAQ,CAACsF,IAAI,WAAW,MAAM/B,OAAQ,IAAI,kBAAkB9D,SAASA,QAAQw6E,UAAU,CAAC,IAAIx6E,QAAQw6E,UAAUhnE,EAAE,GAAG,CAAC,MAAMgE,GAAG,IAAIiB,EAAEjB,CAAC,CAACxX,QAAQw6E,UAAUjiE,EAAE,GAAG/E,EAAE,KAAK,CAAC,IAAIA,EAAEhT,MAAM,CAAC,MAAMgX,GAAGiB,EAAEjB,CAAC,CAACe,EAAE/X,KAAKgT,EAAEjT,UAAU,KAAK,CAAC,IAAI,MAAMuD,OAAQ,CAAC,MAAM0T,GAAGiB,EAAEjB,CAAC,CAACe,GAAG,CAAC,CAAC,MAAMf,GAAG,GAAGA,GAAGiB,GAAG,kBAAkBjB,EAAE2iE,MAAM,CAAC,IAAI,IAAI9rE,EAAEmJ,EAAE2iE,MAAM1nB,MAAM,MACnfnkD,EAAEmK,EAAE0hE,MAAM1nB,MAAM,MAAM/5C,EAAErK,EAAE1K,OAAO,EAAEgV,EAAErK,EAAE3K,OAAO,EAAE,GAAG+U,GAAG,GAAGC,GAAGtK,EAAEqK,KAAKpK,EAAEqK,IAAIA,IAAI,KAAK,GAAGD,GAAG,GAAGC,EAAED,IAAIC,IAAI,GAAGtK,EAAEqK,KAAKpK,EAAEqK,GAAG,CAAC,GAAG,IAAID,GAAG,IAAIC,EAAG,MAAMD,IAAQ,IAAJC,GAAStK,EAAEqK,KAAKpK,EAAEqK,GAAG,CAAC,IAAI7E,EAAE,KAAKzF,EAAEqK,GAAGq2B,QAAQ,WAAW,QAA6F,OAArFx2B,EAAE65D,aAAat+D,EAAEmG,SAAS,iBAAiBnG,EAAEA,EAAEi7B,QAAQ,cAAcx2B,EAAE65D,cAAqBt+D,CAAC,QAAO,GAAG4E,GAAG,GAAGC,GAAG,KAAK,CAAC,CAAC,CAAC,QAAQ0hE,IAAG,EAAGv2E,MAAMy2E,kBAAkB/hE,CAAC,CAAC,OAAOD,EAAEA,EAAEA,EAAE65D,aAAa75D,EAAEhX,KAAK,IAAI24E,GAAG3hE,GAAG,EAAE,CAAC,IAAIkiE,GAAG/5E,OAAOH,UAAU4uD,eAAeurB,GAAG,GAAGC,IAAI,EAAE,SAASC,GAAGriE,GAAG,MAAM,CAACgmB,QAAQhmB,EAAE,CAClf,SAASnI,GAAEmI,GAAG,EAAEoiE,KAAKpiE,EAAEgmB,QAAQm8C,GAAGC,IAAID,GAAGC,IAAI,KAAKA,KAAK,CAAC,SAAStqE,GAAEkI,EAAE/E,GAAGmnE,KAAKD,GAAGC,IAAIpiE,EAAEgmB,QAAQhmB,EAAEgmB,QAAQ/qB,CAAC,CAAC,IAAIqnE,GAAG,CAAC,EAAE3oE,GAAE0oE,GAAGC,IAAI1oE,GAAEyoE,IAAG,GAAIE,GAAGD,GAAG,SAASE,GAAGxiE,EAAE/E,GAAG,IAAIgF,EAAED,EAAEtV,KAAK+3E,aAAa,IAAIxiE,EAAE,OAAOqiE,GAAG,IAAIpiE,EAAEF,EAAEkrD,UAAU,GAAGhrD,GAAGA,EAAEwiE,8CAA8CznE,EAAE,OAAOiF,EAAEyiE,0CAA0C,IAAS5sE,EAALD,EAAE,CAAC,EAAI,IAAIC,KAAKkK,EAAEnK,EAAEC,GAAGkF,EAAElF,GAAoH,OAAjHmK,KAAIF,EAAEA,EAAEkrD,WAAYwX,4CAA4CznE,EAAE+E,EAAE2iE,0CAA0C7sE,GAAUA,CAAC,CAC7d,SAAS8sE,GAAE5iE,GAAyB,OAAO,QAA7BA,EAAEA,EAAE6iE,yBAAmC,IAAS7iE,CAAC,CAAC,SAAS8iE,KAAKjrE,GAAE+B,IAAG/B,GAAE8B,GAAE,CAAC,SAASopE,GAAG/iE,EAAE/E,EAAEgF,GAAG,GAAGtG,GAAEqsB,UAAUs8C,GAAG,MAAM/2E,MAAMsB,EAAE,MAAMiL,GAAE6B,GAAEsB,GAAGnD,GAAE8B,GAAEqG,EAAE,CAAC,SAAS+iE,GAAGhjE,EAAE/E,EAAEgF,GAAG,IAAIC,EAAEF,EAAEkrD,UAAgC,GAAtBjwD,EAAEA,EAAE4nE,kBAAqB,oBAAoB3iE,EAAE+iE,gBAAgB,OAAOhjE,EAAwB,IAAI,IAAInK,KAA9BoK,EAAEA,EAAE+iE,kBAAiC,KAAKntE,KAAKmF,GAAG,MAAM1P,MAAMsB,EAAE,IAAIotE,EAAGj6D,IAAI,UAAUlK,IAAI,OAAO2iE,EAAG,CAAC,EAAEx4D,EAAEC,EAAE,CACtX,SAASgjE,GAAGljE,GAAyG,OAAtGA,GAAGA,EAAEA,EAAEkrD,YAAYlrD,EAAEmjE,2CAA2Cb,GAAGC,GAAG5oE,GAAEqsB,QAAQluB,GAAE6B,GAAEqG,GAAGlI,GAAE8B,GAAEA,GAAEosB,UAAe,CAAE,CAAC,SAASo9C,GAAGpjE,EAAE/E,EAAEgF,GAAG,IAAIC,EAAEF,EAAEkrD,UAAU,IAAIhrD,EAAE,MAAM3U,MAAMsB,EAAE,MAAMoT,GAAGD,EAAEgjE,GAAGhjE,EAAE/E,EAAEsnE,IAAIriE,EAAEijE,0CAA0CnjE,EAAEnI,GAAE+B,IAAG/B,GAAE8B,IAAG7B,GAAE6B,GAAEqG,IAAInI,GAAE+B,IAAG9B,GAAE8B,GAAEqG,EAAE,CAAC,IAAIojE,GAAGpmE,KAAKqmE,MAAMrmE,KAAKqmE,MAAiC,SAAYtjE,GAAU,OAAO,KAAdA,KAAK,GAAe,GAAG,IAAIujE,GAAGvjE,GAAGwjE,GAAG,GAAG,CAAC,EAA/ED,GAAGtmE,KAAK0Q,IAAI61D,GAAGvmE,KAAKwmE,IAA4D,IAAIC,GAAG,GAAGC,GAAG,QACtZ,SAASr6D,GAAGtJ,GAAG,OAAOA,GAAGA,GAAG,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE,KAAK,GAAG,OAAO,GAAG,KAAK,GAAG,OAAO,GAAG,KAAK,GAAG,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,MAAM,KAAK,MAAM,KAAK,MAAM,KAAK,OAAO,KAAK,OAAO,KAAK,OAAO,KAAK,QAAQ,KAAK,QAAQ,OAAS,QAAFA,EAAU,KAAK,QAAQ,KAAK,QAAQ,KAAK,SAAS,KAAK,SAAS,KAAK,SAAS,OAAS,UAAFA,EAAY,KAAK,UAAU,OAAO,UAAU,KAAK,UAAU,OAAO,UAAU,KAAK,UAAU,OAAO,UAAU,KAAK,WAAW,OAAO,WACzgB,QAAQ,OAAOA,EAAE,CAAC,SAASgS,GAAGhS,EAAE/E,GAAG,IAAIgF,EAAED,EAAE4jE,aAAa,GAAG,IAAI3jE,EAAE,OAAO,EAAE,IAAIC,EAAE,EAAEpK,EAAEkK,EAAE6jE,eAAe9tE,EAAEiK,EAAE8jE,YAAY3jE,EAAI,UAAFF,EAAY,GAAG,IAAIE,EAAE,CAAC,IAAIC,EAAED,GAAGrK,EAAE,IAAIsK,EAAEF,EAAEoJ,GAAGlJ,GAAS,KAALrK,GAAGoK,KAAUD,EAAEoJ,GAAGvT,GAAI,MAAa,KAAPoK,EAAEF,GAAGnK,GAAQoK,EAAEoJ,GAAGnJ,GAAG,IAAIpK,IAAImK,EAAEoJ,GAAGvT,IAAI,GAAG,IAAImK,EAAE,OAAO,EAAE,GAAG,IAAIjF,GAAGA,IAAIiF,GAAG,KAAKjF,EAAEnF,MAAKA,EAAEoK,GAAGA,KAAEnK,EAAEkF,GAAGA,IAAQ,KAAKnF,GAAG,KAAO,QAAFC,IAAY,OAAOkF,EAA0C,GAAxC,KAAO,EAAFiF,KAAOA,GAAK,GAAFD,GAA4B,KAAtBhF,EAAE+E,EAAE+jE,gBAAwB,IAAI/jE,EAAEA,EAAEgkE,cAAc/oE,GAAGiF,EAAE,EAAEjF,GAAcnF,EAAE,IAAbmK,EAAE,GAAGojE,GAAGpoE,IAAUiF,GAAGF,EAAEC,GAAGhF,IAAInF,EAAE,OAAOoK,CAAC,CACvc,SAAS+jE,GAAGjkE,EAAE/E,GAAG,OAAO+E,GAAG,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,OAAO/E,EAAE,IAAI,KAAK,EAAE,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,MAAM,KAAK,MAAM,KAAK,MAAM,KAAK,OAAO,KAAK,OAAO,KAAK,OAAO,KAAK,QAAQ,KAAK,QAAQ,OAAOA,EAAE,IAAuJ,QAAQ,OAAO,EAAE,CACrN,SAASipE,GAAGlkE,GAAgC,OAAO,KAApCA,GAAkB,WAAhBA,EAAE4jE,cAAsC5jE,EAAI,WAAFA,EAAa,WAAW,CAAC,CAAC,SAASmkE,GAAGnkE,GAAG,IAAI,IAAI/E,EAAE,GAAGgF,EAAE,EAAE,GAAGA,EAAEA,IAAIhF,EAAE9P,KAAK6U,GAAG,OAAO/E,CAAC,CAAC,SAASmpE,GAAGpkE,EAAE/E,EAAEgF,GAAGD,EAAE4jE,cAAc3oE,EAAE,YAAYA,IAAI+E,EAAE6jE,eAAe,EAAE7jE,EAAE8jE,YAAY,IAAG9jE,EAAEA,EAAEqkE,YAAWppE,EAAE,GAAGooE,GAAGpoE,IAAQgF,CAAC,CACpN,SAASqkE,GAAGtkE,EAAE/E,GAAG,IAAIgF,EAAED,EAAE+jE,gBAAgB9oE,EAAE,IAAI+E,EAAEA,EAAEgkE,cAAc/jE,GAAG,CAAC,IAAIC,EAAE,GAAGmjE,GAAGpjE,GAAGnK,EAAE,GAAGoK,EAAEpK,EAAEmF,EAAE+E,EAAEE,GAAGjF,IAAI+E,EAAEE,IAAIjF,GAAGgF,IAAInK,CAAC,CAAC,CAAC,IAAIyuE,GAAE,EAAE,SAASC,GAAGxkE,GAAS,OAAO,GAAbA,IAAIA,GAAa,EAAEA,EAAE,KAAO,UAAFA,GAAa,GAAG,UAAU,EAAE,CAAC,CACtd,IAAIykE,GAAGjM,EAAG5P,0BAA0B8b,GAAGlM,EAAGmM,wBAAwBC,GAAGpM,EAAGqM,qBAAqBC,GAAGtM,EAAGuM,sBAAsBC,GAAExM,EAAGyM,aAAaC,GAAG1M,EAAG2M,2BAA2BC,GAAG5M,EAAG6M,8BAA8BC,GAAG9M,EAAG+M,wBAAwBC,GAAGhN,EAAG3P,sBAAsB4c,GAAG,KAAKC,GAAG,KACrR,IAAIC,GAAG,oBAAoBx9E,OAAOgsD,GAAGhsD,OAAOgsD,GAD0X,SAAYn0C,EAAE/E,GAAG,OAAO+E,IAAI/E,IAAI,IAAI+E,GAAG,EAAEA,IAAI,EAAE/E,IAAI+E,IAAIA,GAAG/E,IAAIA,CAAC,EACnb2qE,GAAG,KAAKC,IAAG,EAAGC,IAAG,EAAG,SAASC,GAAG/lE,GAAG,OAAO4lE,GAAGA,GAAG,CAAC5lE,GAAG4lE,GAAGz6E,KAAK6U,EAAE,CAA4B,SAASgmE,KAAK,IAAIF,IAAI,OAAOF,GAAG,CAACE,IAAG,EAAG,IAAI9lE,EAAE,EAAE/E,EAAEspE,GAAE,IAAI,IAAItkE,EAAE2lE,GAAG,IAAIrB,GAAE,EAAEvkE,EAAEC,EAAE7U,OAAO4U,IAAI,CAAC,IAAIE,EAAED,EAAED,GAAG,GAAGE,EAAEA,GAAE,SAAU,OAAOA,EAAE,CAAC0lE,GAAG,KAAKC,IAAG,CAAE,CAAC,MAAM/vE,GAAG,MAAM,OAAO8vE,KAAKA,GAAGA,GAAGp8E,MAAMwW,EAAE,IAAIykE,GAAGS,GAAGc,IAAIlwE,CAAE,CAAC,QAAQyuE,GAAEtpE,EAAE6qE,IAAG,CAAE,CAAC,CAAC,OAAO,IAAI,CAAC,IAAIG,GAAGtN,EAAGuN,wBAC3X,SAASC,GAAGnmE,EAAE/E,GAAG,GAAG0qE,GAAG3lE,EAAE/E,GAAG,OAAM,EAAG,GAAG,kBAAkB+E,GAAG,OAAOA,GAAG,kBAAkB/E,GAAG,OAAOA,EAAE,OAAM,EAAG,IAAIgF,EAAE9X,OAAO4G,KAAKiR,GAAGE,EAAE/X,OAAO4G,KAAKkM,GAAG,GAAGgF,EAAE7U,SAAS8U,EAAE9U,OAAO,OAAM,EAAG,IAAI8U,EAAE,EAAEA,EAAED,EAAE7U,OAAO8U,IAAI,CAAC,IAAIpK,EAAEmK,EAAEC,GAAG,IAAIgiE,GAAGj6E,KAAKgT,EAAEnF,KAAK6vE,GAAG3lE,EAAElK,GAAGmF,EAAEnF,IAAI,OAAM,CAAE,CAAC,OAAM,CAAE,CACzQ,SAASswE,GAAGpmE,GAAG,OAAOA,EAAEk6D,KAAK,KAAK,EAAE,OAAOyH,GAAG3hE,EAAEtV,MAAM,KAAK,GAAG,OAAOi3E,GAAG,QAAQ,KAAK,GAAG,OAAOA,GAAG,YAAY,KAAK,GAAG,OAAOA,GAAG,gBAAgB,KAAK,EAAE,KAAK,EAAE,KAAK,GAAG,OAAO3hE,EAAE+hE,GAAG/hE,EAAEtV,MAAK,GAAM,KAAK,GAAG,OAAOsV,EAAE+hE,GAAG/hE,EAAEtV,KAAKw0C,QAAO,GAAM,KAAK,EAAE,OAAOl/B,EAAE+hE,GAAG/hE,EAAEtV,MAAK,GAAM,QAAQ,MAAM,GAAG,CAAC,SAAS27E,GAAGrmE,EAAE/E,GAAG,GAAG+E,GAAGA,EAAEsmE,aAAa,CAA6B,IAAI,IAAIrmE,KAApChF,EAAEw9D,EAAG,CAAC,EAAEx9D,GAAG+E,EAAEA,EAAEsmE,kBAA4B,IAASrrE,EAAEgF,KAAKhF,EAAEgF,GAAGD,EAAEC,IAAI,OAAOhF,CAAC,CAAC,OAAOA,CAAC,CAAC,IAAIsrE,GAAGlE,GAAG,MAAMmE,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAK,SAASC,KAAKD,GAAGD,GAAGD,GAAG,IAAI,CAC3d,SAASI,GAAG5mE,EAAE/E,EAAEgF,GAAGw7D,GAAI3jE,GAAEyuE,GAAGtrE,EAAE4rE,eAAe5rE,EAAE4rE,cAAc5mE,IAAInI,GAAEyuE,GAAGtrE,EAAE6rE,gBAAgB7rE,EAAE6rE,eAAe7mE,EAAE,CAAC,SAAS8mE,GAAG/mE,GAAG,IAAI/E,EAAEsrE,GAAGvgD,QAAQnuB,GAAE0uE,IAAI9K,EAAGz7D,EAAE6mE,cAAc5rE,EAAE+E,EAAE8mE,eAAe7rE,CAAC,CAAC,SAASjC,GAAGgH,EAAE/E,EAAEgF,GAAG,KAAK,OAAOD,GAAG,CAAC,IAAIE,EAAEF,EAAEirD,UAA+H,IAApHjrD,EAAEgnE,WAAW/rE,KAAKA,GAAG+E,EAAEgnE,YAAY/rE,EAAE,OAAOiF,IAAIA,EAAE8mE,YAAY/rE,IAAI,OAAOiF,IAAIA,EAAE8mE,WAAW/rE,KAAKA,IAAIiF,EAAE8mE,YAAY/rE,GAAM+E,IAAIC,EAAE,MAAMD,EAAEA,EAAEg0D,MAAM,CAAC,CAC9X,SAASiT,GAAGjnE,EAAE/E,GAAGurE,GAAGxmE,EAAE0mE,GAAGD,GAAG,KAAsB,QAAjBzmE,EAAEA,EAAEknE,eAAuB,OAAOlnE,EAAEmnE,eAAe,KAAKnnE,EAAEonE,MAAMnsE,KAAKosE,IAAG,GAAIrnE,EAAEmnE,aAAa,KAAK,CAAC,SAASG,GAAGtnE,GAAG,IAAI/E,EAAEwgE,EAAGz7D,EAAE6mE,cAAc7mE,EAAE8mE,eAAe,GAAGJ,KAAK1mE,EAAE,GAAGA,EAAE,CAACjS,QAAQiS,EAAEunE,cAActsE,EAAEg7C,KAAK,MAAM,OAAOwwB,GAAG,CAAC,GAAG,OAAOD,GAAG,MAAMj7E,MAAMsB,EAAE,MAAM45E,GAAGzmE,EAAEwmE,GAAGU,aAAa,CAACE,MAAM,EAAED,aAAannE,EAAE,MAAMymE,GAAGA,GAAGxwB,KAAKj2C,EAAE,OAAO/E,CAAC,CAAC,IAAIusE,GAAG,KAAKC,IAAG,EACpX,SAASC,GAAG1nE,GAAGA,EAAE2nE,YAAY,CAACC,UAAU5nE,EAAE+0D,cAAc8S,gBAAgB,KAAKC,eAAe,KAAKC,OAAO,CAACC,QAAQ,KAAKC,YAAY,KAAKb,MAAM,GAAGliB,QAAQ,KAAK,CAAC,SAASgjB,GAAGloE,EAAE/E,GAAG+E,EAAEA,EAAE2nE,YAAY1sE,EAAE0sE,cAAc3nE,IAAI/E,EAAE0sE,YAAY,CAACC,UAAU5nE,EAAE4nE,UAAUC,gBAAgB7nE,EAAE6nE,gBAAgBC,eAAe9nE,EAAE8nE,eAAeC,OAAO/nE,EAAE+nE,OAAO7iB,QAAQllD,EAAEklD,SAAS,CAAC,SAASijB,GAAGnoE,EAAE/E,GAAG,MAAM,CAACmtE,UAAUpoE,EAAEqoE,KAAKptE,EAAEi/D,IAAI,EAAEoO,QAAQ,KAAKz2D,SAAS,KAAKokC,KAAK,KAAK,CACpb,SAASsyB,GAAGvoE,EAAE/E,GAAG,IAAIgF,EAAED,EAAE2nE,YAAY,OAAO1nE,IAAIA,EAAEA,EAAE8nE,OAAO,OAAOS,IAAG,KAAY,EAAPxoE,EAAEya,OAAS,KAAO,EAAFguD,KAAsB,QAAhBzoE,EAAEC,EAAEgoE,cAAsBhtE,EAAEg7C,KAAKh7C,EAAE,OAAOusE,GAAGA,GAAG,CAACvnE,GAAGunE,GAAGr8E,KAAK8U,KAAKhF,EAAEg7C,KAAKj2C,EAAEi2C,KAAKj2C,EAAEi2C,KAAKh7C,GAAGgF,EAAEgoE,YAAYhtE,IAAgB,QAAZ+E,EAAEC,EAAE+nE,SAAiB/sE,EAAEg7C,KAAKh7C,GAAGA,EAAEg7C,KAAKj2C,EAAEi2C,KAAKj2C,EAAEi2C,KAAKh7C,GAAGgF,EAAE+nE,QAAQ/sE,GAAG,CAAC,SAASytE,GAAG1oE,EAAE/E,EAAEgF,GAAmB,GAAG,QAAnBhF,EAAEA,EAAE0sE,eAA0B1sE,EAAEA,EAAE8sE,OAAO,KAAO,QAAF9nE,IAAY,CAAC,IAAIC,EAAEjF,EAAEmsE,MAAwBnnE,GAAlBC,GAAGF,EAAE4jE,aAAkB3oE,EAAEmsE,MAAMnnE,EAAEqkE,GAAGtkE,EAAEC,EAAE,CAAC,CACrZ,SAAS0oE,GAAG3oE,EAAE/E,GAAG,IAAIgF,EAAED,EAAE2nE,YAAYznE,EAAEF,EAAEirD,UAAU,GAAG,OAAO/qD,GAAoBD,KAAhBC,EAAEA,EAAEynE,aAAmB,CAAC,IAAI7xE,EAAE,KAAKC,EAAE,KAAyB,GAAG,QAAvBkK,EAAEA,EAAE4nE,iBAA4B,CAAC,EAAE,CAAC,IAAI1nE,EAAE,CAACioE,UAAUnoE,EAAEmoE,UAAUC,KAAKpoE,EAAEooE,KAAKnO,IAAIj6D,EAAEi6D,IAAIoO,QAAQroE,EAAEqoE,QAAQz2D,SAAS5R,EAAE4R,SAASokC,KAAK,MAAM,OAAOlgD,EAAED,EAAEC,EAAEoK,EAAEpK,EAAEA,EAAEkgD,KAAK91C,EAAEF,EAAEA,EAAEg2C,IAAI,OAAO,OAAOh2C,GAAG,OAAOlK,EAAED,EAAEC,EAAEkF,EAAElF,EAAEA,EAAEkgD,KAAKh7C,CAAC,MAAMnF,EAAEC,EAAEkF,EAAiH,OAA/GgF,EAAE,CAAC2nE,UAAU1nE,EAAE0nE,UAAUC,gBAAgB/xE,EAAEgyE,eAAe/xE,EAAEgyE,OAAO7nE,EAAE6nE,OAAO7iB,QAAQhlD,EAAEglD,cAASllD,EAAE2nE,YAAY1nE,EAAQ,CAAoB,QAAnBD,EAAEC,EAAE6nE,gBAAwB7nE,EAAE4nE,gBAAgB5sE,EAAE+E,EAAEi2C,KACnfh7C,EAAEgF,EAAE6nE,eAAe7sE,CAAC,CACpB,SAAS2tE,GAAG5oE,EAAE/E,EAAEgF,EAAEC,GAAG,IAAIpK,EAAEkK,EAAE2nE,YAAYF,IAAG,EAAG,IAAI1xE,EAAED,EAAE+xE,gBAAgB1nE,EAAErK,EAAEgyE,eAAe1nE,EAAEtK,EAAEiyE,OAAOC,QAAQ,GAAG,OAAO5nE,EAAE,CAACtK,EAAEiyE,OAAOC,QAAQ,KAAK,IAAIzsE,EAAE6E,EAAEnB,EAAE1D,EAAE06C,KAAK16C,EAAE06C,KAAK,KAAK,OAAO91C,EAAEpK,EAAEkJ,EAAEkB,EAAE81C,KAAKh3C,EAAEkB,EAAE5E,EAAE,IAAI3Q,EAAEoV,EAAEirD,UAAU,OAAOrgE,KAAoBwV,GAAhBxV,EAAEA,EAAE+8E,aAAgBG,kBAAmB3nE,IAAI,OAAOC,EAAExV,EAAEi9E,gBAAgB5oE,EAAEmB,EAAE61C,KAAKh3C,EAAErU,EAAEk9E,eAAevsE,GAAG,CAAC,GAAG,OAAOxF,EAAE,CAAC,IAAI0D,EAAE3D,EAAE8xE,UAA6B,IAAnBznE,EAAE,EAAEvV,EAAEqU,EAAE1D,EAAE,KAAK6E,EAAErK,IAAI,CAAC,IAAI8F,EAAEuE,EAAEioE,KAAKtwE,EAAEqI,EAAEgoE,UAAU,IAAIloE,EAAErE,KAAKA,EAAE,CAAC,OAAOjR,IAAIA,EAAEA,EAAEqrD,KAAK,CAACmyB,UAAUrwE,EAAEswE,KAAK,EAAEnO,IAAI95D,EAAE85D,IAAIoO,QAAQloE,EAAEkoE,QAAQz2D,SAASzR,EAAEyR,SACvfokC,KAAK,OAAOj2C,EAAE,CAAC,IAAIjE,EAAEiE,EAAE4O,EAAExO,EAAU,OAARvE,EAAEZ,EAAElD,EAAEkI,EAAS2O,EAAEsrD,KAAK,KAAK,EAAc,GAAG,oBAAfn+D,EAAE6S,EAAE05D,SAAiC,CAAC7uE,EAAEsC,EAAE9T,KAAK8P,EAAE0B,EAAEoC,GAAG,MAAMmE,CAAC,CAACvG,EAAEsC,EAAE,MAAMiE,EAAE,KAAK,EAAEjE,EAAEnS,OAAe,MAATmS,EAAEnS,MAAa,IAAI,KAAK,EAAsD,GAAG,QAA3CiS,EAAE,oBAAdE,EAAE6S,EAAE05D,SAAgCvsE,EAAE9T,KAAK8P,EAAE0B,EAAEoC,GAAGE,SAAe,IAASF,EAAE,MAAMmE,EAAEvG,EAAEg/D,EAAG,CAAC,EAAEh/D,EAAEoC,GAAG,MAAMmE,EAAE,KAAK,EAAEynE,IAAG,EAAG,CAAC,OAAOrnE,EAAEyR,UAAU,IAAIzR,EAAEioE,OAAOroE,EAAEpW,OAAO,GAAe,QAAZiS,EAAE/F,EAAEovD,SAAiBpvD,EAAEovD,QAAQ,CAAC9kD,GAAGvE,EAAE1Q,KAAKiV,GAAG,MAAMrI,EAAE,CAACqwE,UAAUrwE,EAAEswE,KAAKxsE,EAAEq+D,IAAI95D,EAAE85D,IAAIoO,QAAQloE,EAAEkoE,QAAQz2D,SAASzR,EAAEyR,SAASokC,KAAK,MAAM,OAAOrrD,GAAGqU,EAAErU,EAAEmN,EAAEwD,EAAE9B,GAAG7O,EAAEA,EAAEqrD,KAAKl+C,EAAEoI,GAClftE,EAAW,GAAG,QAAZuE,EAAEA,EAAE61C,MAAiB,IAAsB,QAAnB71C,EAAEtK,EAAEiyE,OAAOC,SAAiB,MAAe5nE,GAAJvE,EAAEuE,GAAM61C,KAAKp6C,EAAEo6C,KAAK,KAAKngD,EAAEgyE,eAAejsE,EAAE/F,EAAEiyE,OAAOC,QAAQ,IAAI,EAAsG,GAA5F,OAAOp9E,IAAI2Q,EAAE9B,GAAG3D,EAAE8xE,UAAUrsE,EAAEzF,EAAE+xE,gBAAgB5oE,EAAEnJ,EAAEgyE,eAAel9E,EAA4B,QAA1BqQ,EAAEnF,EAAEiyE,OAAOE,aAAwB,CAACnyE,EAAEmF,EAAE,GAAGkF,GAAGrK,EAAEuyE,KAAKvyE,EAAEA,EAAEmgD,WAAWngD,IAAImF,EAAE,MAAM,OAAOlF,IAAID,EAAEiyE,OAAOX,MAAM,GAAGyB,IAAI1oE,EAAEH,EAAEonE,MAAMjnE,EAAEH,EAAE+0D,cAAct7D,CAAC,CAAC,CAChW,SAASqvE,GAAG9oE,EAAE/E,EAAEgF,GAA8B,GAA3BD,EAAE/E,EAAEiqD,QAAQjqD,EAAEiqD,QAAQ,KAAQ,OAAOllD,EAAE,IAAI/E,EAAE,EAAEA,EAAE+E,EAAE5U,OAAO6P,IAAI,CAAC,IAAIiF,EAAEF,EAAE/E,GAAGnF,EAAEoK,EAAE2R,SAAS,GAAG,OAAO/b,EAAE,CAAqB,GAApBoK,EAAE2R,SAAS,KAAK3R,EAAED,EAAK,oBAAoBnK,EAAE,MAAMvK,MAAMsB,EAAE,IAAIiJ,IAAIA,EAAE7N,KAAKiY,EAAE,CAAC,CAAC,CAAC,IAAI6oE,IAAI,IAAIzQ,EAAG0Q,WAAW5gD,KAAK,SAAS6gD,GAAGjpE,EAAE/E,EAAEgF,EAAEC,GAA8BD,EAAE,QAAXA,EAAEA,EAAEC,EAAtBjF,EAAE+E,EAAE+0D,sBAAmC,IAAS90D,EAAEhF,EAAEw9D,EAAG,CAAC,EAAEx9D,EAAEgF,GAAGD,EAAE+0D,cAAc90D,EAAE,IAAID,EAAEonE,QAAQpnE,EAAE2nE,YAAYC,UAAU3nE,EAAE,CACnX,IAAIipE,GAAG,CAACC,UAAU,SAASnpE,GAAG,SAAOA,EAAEA,EAAEu0D,kBAAiB4F,EAAGn6D,KAAKA,CAAI,EAAEopE,gBAAgB,SAASppE,EAAE/E,EAAEgF,GAAGD,EAAEA,EAAEu0D,gBAAgB,IAAIr0D,EAAEmpE,KAAIvzE,EAAEwzE,GAAGtpE,GAAGjK,EAAEoyE,GAAGjoE,EAAEpK,GAAGC,EAAEuyE,QAAQrtE,OAAE,IAASgF,GAAG,OAAOA,IAAIlK,EAAE8b,SAAS5R,GAAGsoE,GAAGvoE,EAAEjK,GAAe,QAAZkF,EAAEsuE,GAAGvpE,EAAElK,EAAEoK,KAAawoE,GAAGztE,EAAE+E,EAAElK,EAAE,EAAE0zE,oBAAoB,SAASxpE,EAAE/E,EAAEgF,GAAGD,EAAEA,EAAEu0D,gBAAgB,IAAIr0D,EAAEmpE,KAAIvzE,EAAEwzE,GAAGtpE,GAAGjK,EAAEoyE,GAAGjoE,EAAEpK,GAAGC,EAAEmkE,IAAI,EAAEnkE,EAAEuyE,QAAQrtE,OAAE,IAASgF,GAAG,OAAOA,IAAIlK,EAAE8b,SAAS5R,GAAGsoE,GAAGvoE,EAAEjK,GAAe,QAAZkF,EAAEsuE,GAAGvpE,EAAElK,EAAEoK,KAAawoE,GAAGztE,EAAE+E,EAAElK,EAAE,EAAE2zE,mBAAmB,SAASzpE,EAAE/E,GAAG+E,EAAEA,EAAEu0D,gBAAgB,IAAIt0D,EAAEopE,KAAInpE,EAAEopE,GAAGtpE,GAAGlK,EAAEqyE,GAAGloE,EACpfC,GAAGpK,EAAEokE,IAAI,OAAE,IAASj/D,GAAG,OAAOA,IAAInF,EAAE+b,SAAS5W,GAAGstE,GAAGvoE,EAAElK,GAAe,QAAZmF,EAAEsuE,GAAGvpE,EAAEE,EAAED,KAAayoE,GAAGztE,EAAE+E,EAAEE,EAAE,GAAG,SAASwpE,GAAG1pE,EAAE/E,EAAEgF,EAAEC,EAAEpK,EAAEC,EAAEoK,GAAiB,MAAM,oBAApBH,EAAEA,EAAEkrD,WAAsCye,sBAAsB3pE,EAAE2pE,sBAAsBzpE,EAAEnK,EAAEoK,IAAGlF,EAAEjT,YAAWiT,EAAEjT,UAAU4hF,wBAAsBzD,GAAGlmE,EAAEC,KAAKimE,GAAGrwE,EAAEC,GAAK,CACvR,SAAS8zE,GAAG7pE,EAAE/E,EAAEgF,GAAG,IAAIC,GAAE,EAAGpK,EAAEwsE,GAAOvsE,EAAEkF,EAAE6uE,YAA0W,MAA9V,kBAAkB/zE,GAAG,OAAOA,EAAEA,EAAEuxE,GAAGvxE,IAAID,EAAE8sE,GAAE3nE,GAAGsnE,GAAG5oE,GAAEqsB,QAAyBjwB,GAAGmK,EAAE,QAAtBA,EAAEjF,EAAEwnE,oBAA4B,IAASviE,GAAGsiE,GAAGxiE,EAAElK,GAAGwsE,IAAIrnE,EAAE,IAAIA,EAAEgF,EAAElK,GAAGiK,EAAE+0D,cAAc,OAAO95D,EAAEjP,YAAO,IAASiP,EAAEjP,MAAMiP,EAAEjP,MAAM,KAAKiP,EAAE8uE,QAAQb,GAAGlpE,EAAEkrD,UAAUjwD,EAAEA,EAAEs5D,gBAAgBv0D,EAAEE,KAAIF,EAAEA,EAAEkrD,WAAYwX,4CAA4C5sE,EAAEkK,EAAE2iE,0CAA0C5sE,GAAUkF,CAAC,CAC3Z,SAAS+uE,GAAGhqE,EAAE/E,EAAEgF,EAAEC,GAAGF,EAAE/E,EAAEjP,MAAM,oBAAoBiP,EAAEgvE,2BAA2BhvE,EAAEgvE,0BAA0BhqE,EAAEC,GAAG,oBAAoBjF,EAAEivE,kCAAkCjvE,EAAEivE,iCAAiCjqE,EAAEC,GAAGjF,EAAEjP,QAAQgU,GAAGkpE,GAAGM,oBAAoBvuE,EAAEA,EAAEjP,MAAM,KAAK,CACpQ,SAASm+E,GAAGnqE,EAAE/E,EAAEgF,EAAEC,GAAG,IAAIpK,EAAEkK,EAAEkrD,UAAUp1D,EAAEnC,MAAMsM,EAAEnK,EAAE9J,MAAMgU,EAAE+0D,cAAcj/D,EAAEsyB,KAAK2gD,GAAGrB,GAAG1nE,GAAG,IAAIjK,EAAEkF,EAAE6uE,YAAY,kBAAkB/zE,GAAG,OAAOA,EAAED,EAAE/H,QAAQu5E,GAAGvxE,IAAIA,EAAE6sE,GAAE3nE,GAAGsnE,GAAG5oE,GAAEqsB,QAAQlwB,EAAE/H,QAAQy0E,GAAGxiE,EAAEjK,IAAID,EAAE9J,MAAMgU,EAAE+0D,cAA2C,oBAA7Bh/D,EAAEkF,EAAEmvE,4BAAiDnB,GAAGjpE,EAAE/E,EAAElF,EAAEkK,GAAGnK,EAAE9J,MAAMgU,EAAE+0D,eAAe,oBAAoB95D,EAAEmvE,0BAA0B,oBAAoBt0E,EAAEu0E,yBAAyB,oBAAoBv0E,EAAEw0E,2BAA2B,oBAAoBx0E,EAAEy0E,qBAAqBtvE,EAAEnF,EAAE9J,MACpf,oBAAoB8J,EAAEy0E,oBAAoBz0E,EAAEy0E,qBAAqB,oBAAoBz0E,EAAEw0E,2BAA2Bx0E,EAAEw0E,4BAA4BrvE,IAAInF,EAAE9J,OAAOk9E,GAAGM,oBAAoB1zE,EAAEA,EAAE9J,MAAM,MAAM48E,GAAG5oE,EAAEC,EAAEnK,EAAEoK,GAAGpK,EAAE9J,MAAMgU,EAAE+0D,eAAe,oBAAoBj/D,EAAE00E,oBAAoBxqE,EAAEpW,OAAO,QAAQ,CAAC,IAAI6gF,GAAG,GAAGC,GAAG,EAAEC,GAAG,KAAKC,GAAG,EAAEC,GAAG,GAAGC,GAAG,EAAEC,GAAG,KAAKC,GAAG,EAAEC,GAAG,GAAG,SAASC,GAAGlrE,EAAE/E,GAAGwvE,GAAGC,MAAME,GAAGH,GAAGC,MAAMC,GAAGA,GAAG3qE,EAAE4qE,GAAG3vE,CAAC,CACjZ,SAASkwE,GAAGnrE,EAAE/E,EAAEgF,GAAG4qE,GAAGC,MAAME,GAAGH,GAAGC,MAAMG,GAAGJ,GAAGC,MAAMC,GAAGA,GAAG/qE,EAAE,IAAIE,EAAE8qE,GAAGhrE,EAAEirE,GAAG,IAAIn1E,EAAE,GAAGutE,GAAGnjE,GAAG,EAAEA,KAAK,GAAGpK,GAAGmK,GAAG,EAAE,IAAIlK,EAAE,GAAGstE,GAAGpoE,GAAGnF,EAAE,GAAG,GAAGC,EAAE,CAAC,IAAIoK,EAAErK,EAAEA,EAAE,EAAEC,GAAGmK,GAAG,GAAGC,GAAG,GAAGzE,SAAS,IAAIwE,IAAIC,EAAErK,GAAGqK,EAAE6qE,GAAG,GAAG,GAAG3H,GAAGpoE,GAAGnF,EAAEmK,GAAGnK,EAAEoK,EAAE+qE,GAAGl1E,EAAEiK,CAAC,MAAMgrE,GAAG,GAAGj1E,EAAEkK,GAAGnK,EAAEoK,EAAE+qE,GAAGjrE,CAAC,CAAC,SAASorE,GAAGprE,GAAG,OAAOA,EAAEg0D,SAASkX,GAAGlrE,EAAE,GAAGmrE,GAAGnrE,EAAE,EAAE,GAAG,CAAC,SAASqrE,GAAGrrE,GAAG,KAAKA,IAAI2qE,IAAIA,GAAGF,KAAKC,IAAID,GAAGC,IAAI,KAAKE,GAAGH,KAAKC,IAAID,GAAGC,IAAI,KAAK,KAAK1qE,IAAI+qE,IAAIA,GAAGF,KAAKC,IAAID,GAAGC,IAAI,KAAKG,GAAGJ,KAAKC,IAAID,GAAGC,IAAI,KAAKE,GAAGH,KAAKC,IAAID,GAAGC,IAAI,IAAI,CAAC,IAAIQ,GAAG,KAAKC,GAAG,KAAK50D,IAAE,EAAG60D,IAAG,EAAGC,GAAG,KACve,SAASC,GAAG1rE,EAAE/E,GAAG,IAAIgF,EAAE0rE,GAAG,EAAE,KAAK,KAAK,GAAG1rE,EAAE2rE,YAAY,UAAU3rE,EAAEirD,UAAUjwD,EAAEgF,EAAE+zD,OAAOh0D,EAAgB,QAAd/E,EAAE+E,EAAE6rE,YAAoB7rE,EAAE6rE,UAAU,CAAC5rE,GAAGD,EAAEpW,OAAO,IAAIqR,EAAE9P,KAAK8U,EAAE,CACxJ,SAAS6rE,GAAG9rE,EAAE/E,GAAG,OAAO+E,EAAEk6D,KAAK,KAAK,EAAE,OAAqC,QAA9Bj/D,EAAEgkE,GAAGhkE,EAAE+E,EAAEtV,KAAKsV,EAAE+rE,iBAAwB/rE,EAAEkrD,UAAUjwD,EAAEqwE,GAAGtrE,EAAEurE,GAAGxL,GAAG9kE,IAAG,GAAO,KAAK,EAAE,OAA8B,QAAvBA,EAAEkkE,GAAGlkE,EAAE+E,EAAE+rE,iBAAwB/rE,EAAEkrD,UAAUjwD,EAAEqwE,GAAGtrE,EAAEurE,GAAG,MAAK,GAAO,KAAK,GAAW,GAAG,QAAXtwE,EAAEokE,GAAGpkE,IAAe,CAAC,IAAIgF,EAAE,OAAO8qE,GAAG,CAAC/xE,GAAGgyE,GAAGrX,SAASsX,IAAI,KAA4I,OAAvIjrE,EAAE+0D,cAAc,CAACiX,WAAW/wE,EAAEgxE,YAAYhsE,EAAEisE,UAAU,aAAYjsE,EAAE0rE,GAAG,GAAG,KAAK,KAAK,IAAKzgB,UAAUjwD,EAAEgF,EAAE+zD,OAAOh0D,EAAEA,EAAEu6C,MAAMt6C,EAAEqrE,GAAGtrE,EAAEurE,GAAG,MAAW,CAAE,CAAC,OAAM,EAAG,QAAQ,OAAM,EAAG,CAAC,SAASY,GAAGnsE,GAAG,OAAO,KAAY,EAAPA,EAAEya,OAAS,KAAa,IAARza,EAAEpW,MAAU,CACjf,SAASwiF,GAAGpsE,GAAG,GAAG2W,GAAE,CAAC,IAAI1b,EAAEswE,GAAG,GAAGtwE,EAAE,CAAC,IAAIgF,EAAEhF,EAAE,IAAI6wE,GAAG9rE,EAAE/E,GAAG,CAAC,GAAGkxE,GAAGnsE,GAAG,MAAMzU,MAAMsB,EAAE,MAAMoO,EAAE4kE,GAAG5/D,GAAG,IAAIC,EAAEorE,GAAGrwE,GAAG6wE,GAAG9rE,EAAE/E,GAAGywE,GAAGxrE,EAAED,IAAID,EAAEpW,OAAe,KAAToW,EAAEpW,MAAY,EAAE+sB,IAAE,EAAG20D,GAAGtrE,EAAE,CAAC,KAAK,CAAC,GAAGmsE,GAAGnsE,GAAG,MAAMzU,MAAMsB,EAAE,MAAMmT,EAAEpW,OAAe,KAAToW,EAAEpW,MAAY,EAAE+sB,IAAE,EAAG20D,GAAGtrE,CAAC,CAAC,CAAC,CAAC,SAASqsE,GAAGrsE,GAAG,IAAIA,EAAEA,EAAEg0D,OAAO,OAAOh0D,GAAG,IAAIA,EAAEk6D,KAAK,IAAIl6D,EAAEk6D,KAAK,KAAKl6D,EAAEk6D,KAAKl6D,EAAEA,EAAEg0D,OAAOsX,GAAGtrE,CAAC,CAC9T,SAASssE,GAAGtsE,GAAG,IAAI1E,GAAG0E,IAAIsrE,GAAG,OAAM,EAAG,IAAI30D,GAAE,OAAO01D,GAAGrsE,GAAG2W,IAAE,GAAG,EAAG,GAAG,IAAI3W,EAAEk6D,MAAM,IAAIl6D,EAAEk6D,KAAKmH,GAAGrhE,EAAEtV,QAAQ0wE,EAAGp7D,EAAEtV,KAAKsV,EAAE85C,gBAAgB,CAAC,IAAI7+C,EAAEswE,GAAG,GAAGtwE,EAAE,CAAC,GAAGkxE,GAAGnsE,GAAG,CAAC,IAAIA,EAAEurE,GAAGvrE,GAAGA,EAAE6/D,GAAG7/D,GAAG,MAAMzU,MAAMsB,EAAE,KAAM,CAAC,KAAKoO,GAAGywE,GAAG1rE,EAAE/E,GAAGA,EAAE4kE,GAAG5kE,EAAE,CAAC,CAAO,GAANoxE,GAAGrsE,GAAM,KAAKA,EAAEk6D,IAAI,CAAC,IAAI5+D,EAAE,MAAM/P,MAAMsB,EAAE,MAAqD,KAA7BmT,EAAE,QAApBA,EAAEA,EAAE+0D,eAAyB/0D,EAAEgsE,WAAW,MAAW,MAAMzgF,MAAMsB,EAAE,MAAM0+E,GAAG5K,GAAG3gE,EAAE,MAAMurE,GAAGD,GAAGzL,GAAG7/D,EAAEkrD,WAAW,KAAK,OAAM,CAAE,CAAC,SAASqhB,KAAKjxE,IAAIiwE,GAAGD,GAAG,KAAKE,GAAG70D,IAAE,EAAG,CAAC,SAAS61D,GAAGxsE,GAAG,OAAOyrE,GAAGA,GAAG,CAACzrE,GAAGyrE,GAAGtgF,KAAK6U,EAAE,CAC1d,SAASysE,GAAGzsE,EAAE/E,EAAEgF,GAAW,GAAG,QAAXD,EAAEC,EAAEslB,MAAiB,oBAAoBvlB,GAAG,kBAAkBA,EAAE,CAAC,GAAGC,EAAEysE,OAAO,CAAY,GAAXzsE,EAAEA,EAAEysE,OAAY,CAAC,GAAG,IAAIzsE,EAAEi6D,IAAI,MAAM3uE,MAAMsB,EAAE,MAAM,IAAIqT,EAAED,EAAEirD,SAAS,CAAC,IAAIhrD,EAAE,MAAM3U,MAAMsB,EAAE,IAAImT,IAAI,IAAIlK,EAAEoK,EAAEnK,EAAE,GAAGiK,EAAE,OAAG,OAAO/E,GAAG,OAAOA,EAAEsqB,KAAK,oBAAoBtqB,EAAEsqB,KAAKtqB,EAAEsqB,IAAIonD,aAAa52E,EAASkF,EAAEsqB,KAAItqB,EAAE,SAAS+E,GAAG,IAAI/E,EAAEnF,EAAEsyB,KAAKntB,IAAI8tE,KAAK9tE,EAAEnF,EAAEsyB,KAAK,CAAC,GAAG,OAAOpoB,SAAS/E,EAAElF,GAAGkF,EAAElF,GAAGiK,CAAC,EAAE/E,EAAE0xE,WAAW52E,EAASkF,EAAC,CAAC,GAAG,kBAAkB+E,EAAE,MAAMzU,MAAMsB,EAAE,MAAM,IAAIoT,EAAEysE,OAAO,MAAMnhF,MAAMsB,EAAE,IAAImT,GAAI,CAAC,OAAOA,CAAC,CACre,SAAS4sE,GAAG5sE,EAAE/E,GAAuC,MAApC+E,EAAE7X,OAAOH,UAAU0T,SAASzT,KAAKgT,GAAS1P,MAAMsB,EAAE,GAAG,oBAAoBmT,EAAE,qBAAqB7X,OAAO4G,KAAKkM,GAAGq7B,KAAK,MAAM,IAAIt2B,GAAI,CAAC,SAAS6sE,GAAG7sE,GAAiB,OAAO/E,EAAf+E,EAAEg6D,OAAeh6D,EAAE+5D,SAAS,CACrM,SAAS+S,GAAG9sE,GAAG,SAAS/E,EAAEA,EAAEgF,GAAG,GAAGD,EAAE,CAAC,IAAIE,EAAEjF,EAAE4wE,UAAU,OAAO3rE,GAAGjF,EAAE4wE,UAAU,CAAC5rE,GAAGhF,EAAErR,OAAO,IAAIsW,EAAE/U,KAAK8U,EAAE,CAAC,CAAC,SAASA,EAAEA,EAAEC,GAAG,IAAIF,EAAE,OAAO,KAAK,KAAK,OAAOE,GAAGjF,EAAEgF,EAAEC,GAAGA,EAAEA,EAAE6nD,QAAQ,OAAO,IAAI,CAAC,SAAS7nD,EAAEF,EAAE/E,GAAG,IAAI+E,EAAE,IAAI4hD,IAAI,OAAO3mD,GAAG,OAAOA,EAAEnM,IAAIkR,EAAE1S,IAAI2N,EAAEnM,IAAImM,GAAG+E,EAAE1S,IAAI2N,EAAExM,MAAMwM,GAAGA,EAAEA,EAAE8sD,QAAQ,OAAO/nD,CAAC,CAAC,SAASlK,EAAEkK,EAAE/E,GAAsC,OAAnC+E,EAAE+sE,GAAG/sE,EAAE/E,IAAKxM,MAAM,EAAEuR,EAAE+nD,QAAQ,KAAY/nD,CAAC,CAAC,SAASjK,EAAEkF,EAAEgF,EAAEC,GAAa,OAAVjF,EAAExM,MAAMyR,EAAMF,EAA6C,QAAjBE,EAAEjF,EAAEgwD,YAA6B/qD,EAAEA,EAAEzR,OAAQwR,GAAGhF,EAAErR,OAAO,EAAEqW,GAAGC,GAAEjF,EAAErR,OAAO,EAASqW,IAArGhF,EAAErR,OAAO,QAAQqW,EAAqF,CAAC,SAASE,EAAElF,GACzd,OAD4d+E,GAC7f,OAAO/E,EAAEgwD,YAAYhwD,EAAErR,OAAO,GAAUqR,CAAC,CAAC,SAASmF,EAAEJ,EAAE/E,EAAEgF,EAAEC,GAAG,OAAG,OAAOjF,GAAG,IAAIA,EAAEi/D,MAAWj/D,EAAE+xE,GAAG/sE,EAAED,EAAEya,KAAKva,IAAK8zD,OAAOh0D,EAAE/E,KAAEA,EAAEnF,EAAEmF,EAAEgF,IAAK+zD,OAAOh0D,EAAS/E,EAAC,CAAC,SAASM,EAAEyE,EAAE/E,EAAEgF,EAAEC,GAAG,IAAInK,EAAEkK,EAAEvV,KAAK,OAAGqL,IAAIijE,EAAUpuE,EAAEoV,EAAE/E,EAAEgF,EAAEtM,MAAMi5B,SAAS1sB,EAAED,EAAEnR,KAAQ,OAAOmM,IAAIA,EAAE2wE,cAAc71E,GAAG,kBAAkBA,GAAG,OAAOA,GAAGA,EAAE+jE,WAAWL,GAAIoT,GAAG92E,KAAKkF,EAAEvQ,QAAawV,EAAEpK,EAAEmF,EAAEgF,EAAEtM,QAAS4xB,IAAIknD,GAAGzsE,EAAE/E,EAAEgF,GAAGC,EAAE8zD,OAAOh0D,EAAEE,KAAEA,EAAE+sE,GAAGhtE,EAAEvV,KAAKuV,EAAEnR,IAAImR,EAAEtM,MAAM,KAAKqM,EAAEya,KAAKva,IAAKqlB,IAAIknD,GAAGzsE,EAAE/E,EAAEgF,GAAGC,EAAE8zD,OAAOh0D,EAASE,EAAC,CAAC,SAASjB,EAAEe,EAAE/E,EAAEgF,EAAEC,GAAG,OAAG,OAAOjF,GAAG,IAAIA,EAAEi/D,KACjfj/D,EAAEiwD,UAAUgiB,gBAAgBjtE,EAAEitE,eAAejyE,EAAEiwD,UAAUiiB,iBAAiBltE,EAAEktE,iBAAsBlyE,EAAEmyE,GAAGntE,EAAED,EAAEya,KAAKva,IAAK8zD,OAAOh0D,EAAE/E,KAAEA,EAAEnF,EAAEmF,EAAEgF,EAAE2sB,UAAU,KAAMonC,OAAOh0D,EAAS/E,EAAC,CAAC,SAASrQ,EAAEoV,EAAE/E,EAAEgF,EAAEC,EAAEnK,GAAG,OAAG,OAAOkF,GAAG,IAAIA,EAAEi/D,MAAWj/D,EAAEoyE,GAAGptE,EAAED,EAAEya,KAAKva,EAAEnK,IAAKi+D,OAAOh0D,EAAE/E,KAAEA,EAAEnF,EAAEmF,EAAEgF,IAAK+zD,OAAOh0D,EAAS/E,EAAC,CAAC,SAASxB,EAAEuG,EAAE/E,EAAEgF,GAAG,GAAG,kBAAkBhF,GAAG,KAAKA,GAAG,kBAAkBA,EAAE,OAAOA,EAAE+xE,GAAG,GAAG/xE,EAAE+E,EAAEya,KAAKxa,IAAK+zD,OAAOh0D,EAAE/E,EAAE,GAAG,kBAAkBA,GAAG,OAAOA,EAAE,CAAC,OAAOA,EAAE6+D,UAAU,KAAKjB,EAAG,OAAO54D,EAAEgtE,GAAGhyE,EAAEvQ,KAAKuQ,EAAEnM,IAAImM,EAAEtH,MAAM,KAAKqM,EAAEya,KAAKxa,IACjfslB,IAAIknD,GAAGzsE,EAAE,KAAK/E,GAAGgF,EAAE+zD,OAAOh0D,EAAEC,EAAE,KAAK84D,EAAG,OAAO99D,EAAEmyE,GAAGnyE,EAAE+E,EAAEya,KAAKxa,IAAK+zD,OAAOh0D,EAAE/E,EAAE,KAAKw+D,EAAiB,OAAOhgE,EAAEuG,GAAEE,EAAnBjF,EAAE++D,OAAmB/+D,EAAE8+D,UAAU95D,GAAG,GAAGy6D,EAAGz/D,IAAI2+D,EAAG3+D,GAAG,OAAOA,EAAEoyE,GAAGpyE,EAAE+E,EAAEya,KAAKxa,EAAE,OAAQ+zD,OAAOh0D,EAAE/E,EAAE2xE,GAAG5sE,EAAE/E,EAAE,CAAC,OAAO,IAAI,CAAC,SAASY,EAAEmE,EAAE/E,EAAEgF,EAAEC,GAAG,IAAIpK,EAAE,OAAOmF,EAAEA,EAAEnM,IAAI,KAAK,GAAG,kBAAkBmR,GAAG,KAAKA,GAAG,kBAAkBA,EAAE,OAAO,OAAOnK,EAAE,KAAKsK,EAAEJ,EAAE/E,EAAE,GAAGgF,EAAEC,GAAG,GAAG,kBAAkBD,GAAG,OAAOA,EAAE,CAAC,OAAOA,EAAE65D,UAAU,KAAKjB,EAAG,OAAO54D,EAAEnR,MAAMgH,EAAEyF,EAAEyE,EAAE/E,EAAEgF,EAAEC,GAAG,KAAK,KAAK64D,EAAG,OAAO94D,EAAEnR,MAAMgH,EAAEmJ,EAAEe,EAAE/E,EAAEgF,EAAEC,GAAG,KAAK,KAAKu5D,EAAG,OAAiB59D,EAAEmE,EACpf/E,GADwenF,EAAEmK,EAAE+5D,OACxe/5D,EAAE85D,UAAU75D,GAAG,GAAGw6D,EAAGz6D,IAAI25D,EAAG35D,GAAG,OAAO,OAAOnK,EAAE,KAAKlL,EAAEoV,EAAE/E,EAAEgF,EAAEC,EAAE,MAAM0sE,GAAG5sE,EAAEC,EAAE,CAAC,OAAO,IAAI,CAAC,SAASlI,EAAEiI,EAAE/E,EAAEgF,EAAEC,EAAEpK,GAAG,GAAG,kBAAkBoK,GAAG,KAAKA,GAAG,kBAAkBA,EAAE,OAAwBE,EAAEnF,EAAnB+E,EAAEA,EAAE3S,IAAI4S,IAAI,KAAW,GAAGC,EAAEpK,GAAG,GAAG,kBAAkBoK,GAAG,OAAOA,EAAE,CAAC,OAAOA,EAAE45D,UAAU,KAAKjB,EAAG,OAA2Ct9D,EAAEN,EAAtC+E,EAAEA,EAAE3S,IAAI,OAAO6S,EAAEpR,IAAImR,EAAEC,EAAEpR,MAAM,KAAWoR,EAAEpK,GAAG,KAAKijE,EAAG,OAA2C95D,EAAEhE,EAAtC+E,EAAEA,EAAE3S,IAAI,OAAO6S,EAAEpR,IAAImR,EAAEC,EAAEpR,MAAM,KAAWoR,EAAEpK,GAAG,KAAK2jE,EAAiB,OAAO1hE,EAAEiI,EAAE/E,EAAEgF,GAAElK,EAAvBmK,EAAE85D,OAAuB95D,EAAE65D,UAAUjkE,GAAG,GAAG4kE,EAAGx6D,IAAI05D,EAAG15D,GAAG,OAAwBtV,EAAEqQ,EAAnB+E,EAAEA,EAAE3S,IAAI4S,IAAI,KAAWC,EAAEpK,EAAE,MAAM82E,GAAG3xE,EAAEiF,EAAE,CAAC,OAAO,IAAI,CAC9f,SAASnE,EAAEjG,EAAEqK,EAAEC,EAAE7E,GAAG,IAAI,IAAI0D,EAAE,KAAKrU,EAAE,KAAKU,EAAE6U,EAAEjB,EAAEiB,EAAE,EAAEnF,EAAE,KAAK,OAAO1P,GAAG4T,EAAEkB,EAAEhV,OAAO8T,IAAI,CAAC5T,EAAEmD,MAAMyQ,GAAGlE,EAAE1P,EAAEA,EAAE,MAAM0P,EAAE1P,EAAEy8D,QAAQ,IAAIhsD,EAAEF,EAAE/F,EAAExK,EAAE8U,EAAElB,GAAG3D,GAAG,GAAG,OAAOQ,EAAE,CAAC,OAAOzQ,IAAIA,EAAE0P,GAAG,KAAK,CAACgF,GAAG1U,GAAG,OAAOyQ,EAAEkvD,WAAWhwD,EAAEnF,EAAExK,GAAG6U,EAAEpK,EAAEgG,EAAEoE,EAAEjB,GAAG,OAAOtU,EAAEqU,EAAElD,EAAEnR,EAAEm9D,QAAQhsD,EAAEnR,EAAEmR,EAAEzQ,EAAE0P,CAAC,CAAC,GAAGkE,IAAIkB,EAAEhV,OAAO,OAAO6U,EAAEnK,EAAExK,GAAGqrB,IAAGu0D,GAAGp1E,EAAEoJ,GAAGD,EAAE,GAAG,OAAO3T,EAAE,CAAC,KAAK4T,EAAEkB,EAAEhV,OAAO8T,IAAkB,QAAd5T,EAAEmO,EAAE3D,EAAEsK,EAAElB,GAAG3D,MAAc4E,EAAEpK,EAAEzK,EAAE6U,EAAEjB,GAAG,OAAOtU,EAAEqU,EAAE3T,EAAEV,EAAEm9D,QAAQz8D,EAAEV,EAAEU,GAAc,OAAXqrB,IAAGu0D,GAAGp1E,EAAEoJ,GAAUD,CAAC,CAAC,IAAI3T,EAAE4U,EAAEpK,EAAExK,GAAG4T,EAAEkB,EAAEhV,OAAO8T,IAAsB,QAAlBlE,EAAEjD,EAAEzM,EAAEwK,EAAEoJ,EAAEkB,EAAElB,GAAG3D,MAAcyE,GAAG,OAAOhF,EAAEiwD,WAAW3/D,EAAEkpD,OAAO,OACvfx5C,EAAElM,IAAIoQ,EAAElE,EAAElM,KAAKqR,EAAEpK,EAAEiF,EAAEmF,EAAEjB,GAAG,OAAOtU,EAAEqU,EAAEjE,EAAEpQ,EAAEm9D,QAAQ/sD,EAAEpQ,EAAEoQ,GAAuD,OAApDgF,GAAG1U,EAAEk+B,SAAQ,SAASxpB,GAAG,OAAO/E,EAAEnF,EAAEkK,EAAE,IAAG2W,IAAGu0D,GAAGp1E,EAAEoJ,GAAUD,CAAC,CAAC,SAAS2P,EAAE9Y,EAAEqK,EAAEC,EAAE7E,GAAG,IAAI0D,EAAE26D,EAAGx5D,GAAG,GAAG,oBAAoBnB,EAAE,MAAM1T,MAAMsB,EAAE,MAAkB,GAAG,OAAfuT,EAAEnB,EAAEhX,KAAKmY,IAAc,MAAM7U,MAAMsB,EAAE,MAAM,IAAI,IAAIvB,EAAE2T,EAAE,KAAKrU,EAAEuV,EAAEjB,EAAEiB,EAAE,EAAEpE,EAAE,KAAKf,EAAEoF,EAAE61C,OAAO,OAAOrrD,IAAIoQ,EAAEnF,KAAKqJ,IAAIlE,EAAEoF,EAAE61C,OAAO,CAACrrD,EAAE6D,MAAMyQ,GAAGnD,EAAEnR,EAAEA,EAAE,MAAMmR,EAAEnR,EAAEm9D,QAAQ,IAAIv2C,EAAE3V,EAAE/F,EAAElL,EAAEoQ,EAAEtS,MAAM6S,GAAG,GAAG,OAAOiW,EAAE,CAAC,OAAO5mB,IAAIA,EAAEmR,GAAG,KAAK,CAACiE,GAAGpV,GAAG,OAAO4mB,EAAEy5C,WAAWhwD,EAAEnF,EAAElL,GAAGuV,EAAEpK,EAAEyb,EAAErR,EAAEjB,GAAG,OAAO5T,EAAE2T,EAAEuS,EAAElmB,EAAEy8D,QAAQv2C,EAAElmB,EAAEkmB,EAAE5mB,EAAEmR,CAAC,CAAC,GAAGf,EAAEnF,KAAK,OAAOoK,EAAEnK,EACzflL,GAAG+rB,IAAGu0D,GAAGp1E,EAAEoJ,GAAGD,EAAE,GAAG,OAAOrU,EAAE,CAAC,MAAMoQ,EAAEnF,KAAKqJ,IAAIlE,EAAEoF,EAAE61C,OAAwB,QAAjBj7C,EAAEvB,EAAE3D,EAAEkF,EAAEtS,MAAM6S,MAAc4E,EAAEpK,EAAEiF,EAAEmF,EAAEjB,GAAG,OAAO5T,EAAE2T,EAAEjE,EAAE1P,EAAEy8D,QAAQ/sD,EAAE1P,EAAE0P,GAAc,OAAX2b,IAAGu0D,GAAGp1E,EAAEoJ,GAAUD,CAAC,CAAC,IAAIrU,EAAEsV,EAAEpK,EAAElL,IAAIoQ,EAAEnF,KAAKqJ,IAAIlE,EAAEoF,EAAE61C,OAA4B,QAArBj7C,EAAEjD,EAAEnN,EAAEkL,EAAEoJ,EAAElE,EAAEtS,MAAM6S,MAAcyE,GAAG,OAAOhF,EAAEiwD,WAAWrgE,EAAE4pD,OAAO,OAAOx5C,EAAElM,IAAIoQ,EAAElE,EAAElM,KAAKqR,EAAEpK,EAAEiF,EAAEmF,EAAEjB,GAAG,OAAO5T,EAAE2T,EAAEjE,EAAE1P,EAAEy8D,QAAQ/sD,EAAE1P,EAAE0P,GAAuD,OAApDgF,GAAGpV,EAAE4+B,SAAQ,SAASxpB,GAAG,OAAO/E,EAAEnF,EAAEkK,EAAE,IAAG2W,IAAGu0D,GAAGp1E,EAAEoJ,GAAUD,CAAC,CAGxQ,OAHyQ,SAASquE,EAAGttE,EAAEE,EAAEnK,EAAEqK,GAAkF,GAA/E,kBAAkBrK,GAAG,OAAOA,GAAGA,EAAErL,OAAOsuE,GAAI,OAAOjjE,EAAEjH,MAAMiH,EAAEA,EAAEpC,MAAMi5B,UAAa,kBAAkB72B,GAAG,OAC9eA,EAAE,CAAC,OAAOA,EAAE+jE,UAAU,KAAKjB,EAAG74D,EAAE,CAAC,IAAI,IAAIzE,EAAExF,EAAEjH,IAAImQ,EAAEiB,EAAE,OAAOjB,GAAG,CAAC,GAAGA,EAAEnQ,MAAMyM,EAAE,CAAU,IAATA,EAAExF,EAAErL,QAAYsuE,GAAI,GAAG,IAAI/5D,EAAEi7D,IAAI,CAACj6D,EAAED,EAAEf,EAAE8oD,UAAS7nD,EAAEpK,EAAEmJ,EAAElJ,EAAEpC,MAAMi5B,WAAYonC,OAAOh0D,EAAEA,EAAEE,EAAE,MAAMF,CAAC,OAAO,GAAGf,EAAE2sE,cAAcrwE,GAAG,kBAAkBA,GAAG,OAAOA,GAAGA,EAAEu+D,WAAWL,GAAIoT,GAAGtxE,KAAK0D,EAAEvU,KAAK,CAACuV,EAAED,EAAEf,EAAE8oD,UAAS7nD,EAAEpK,EAAEmJ,EAAElJ,EAAEpC,QAAS4xB,IAAIknD,GAAGzsE,EAAEf,EAAElJ,GAAGmK,EAAE8zD,OAAOh0D,EAAEA,EAAEE,EAAE,MAAMF,CAAC,CAACC,EAAED,EAAEf,GAAG,KAAK,CAAMhE,EAAE+E,EAAEf,GAAGA,EAAEA,EAAE8oD,OAAO,CAAChyD,EAAErL,OAAOsuE,IAAI94D,EAAEmtE,GAAGt3E,EAAEpC,MAAMi5B,SAAS5sB,EAAEya,KAAKra,EAAErK,EAAEjH,MAAOklE,OAAOh0D,EAAEA,EAAEE,KAAIE,EAAE6sE,GAAGl3E,EAAErL,KAAKqL,EAAEjH,IAAIiH,EAAEpC,MAAM,KAAKqM,EAAEya,KAAKra,IAAKmlB,IAAIknD,GAAGzsE,EAAEE,EAAEnK,GAAGqK,EAAE4zD,OACnfh0D,EAAEA,EAAEI,EAAE,CAAC,OAAOD,EAAEH,GAAG,KAAK+4D,EAAG/4D,EAAE,CAAC,IAAIf,EAAElJ,EAAEjH,IAAI,OAAOoR,GAAG,CAAC,GAAGA,EAAEpR,MAAMmQ,EAAC,CAAC,GAAG,IAAIiB,EAAEg6D,KAAKh6D,EAAEgrD,UAAUgiB,gBAAgBn3E,EAAEm3E,eAAehtE,EAAEgrD,UAAUiiB,iBAAiBp3E,EAAEo3E,eAAe,CAACltE,EAAED,EAAEE,EAAE6nD,UAAS7nD,EAAEpK,EAAEoK,EAAEnK,EAAE62B,UAAU,KAAMonC,OAAOh0D,EAAEA,EAAEE,EAAE,MAAMF,CAAC,CAAMC,EAAED,EAAEE,GAAG,KAAM,CAAKjF,EAAE+E,EAAEE,GAAGA,EAAEA,EAAE6nD,OAAO,EAAC7nD,EAAEktE,GAAGr3E,EAAEiK,EAAEya,KAAKra,IAAK4zD,OAAOh0D,EAAEA,EAAEE,CAAC,CAAC,OAAOC,EAAEH,GAAG,KAAKy5D,EAAG,OAAiB6T,EAAGttE,EAAEE,GAAfjB,EAAElJ,EAAEikE,OAAejkE,EAAEgkE,UAAU35D,GAAG,GAAGs6D,EAAG3kE,GAAG,OAAOgG,EAAEiE,EAAEE,EAAEnK,EAAEqK,GAAG,GAAGw5D,EAAG7jE,GAAG,OAAO6Y,EAAE5O,EAAEE,EAAEnK,EAAEqK,GAAGwsE,GAAG5sE,EAAEjK,EAAE,CAAC,MAAM,kBAAkBA,GAAG,KAAKA,GAAG,kBAAkBA,GAAGA,EAAE,GAAGA,EAAE,OAAOmK,GACnf,IAAIA,EAAEg6D,KAAKj6D,EAAED,EAAEE,EAAE6nD,UAAS7nD,EAAEpK,EAAEoK,EAAEnK,IAAKi+D,OAAOh0D,EAAEA,EAAEE,IAAID,EAAED,EAAEE,IAAGA,EAAE8sE,GAAGj3E,EAAEiK,EAAEya,KAAKra,IAAK4zD,OAAOh0D,EAAEA,EAAEE,GAAGC,EAAEH,IAAIC,EAAED,EAAEE,EAAE,CAAU,CAAC,IAAIqtE,GAAGT,IAAG,GAAIU,GAAGV,IAAG,GAAIW,GAAG,CAAC,EAAEC,GAAGrL,GAAGoL,IAAIE,GAAGtL,GAAGoL,IAAIG,GAAGvL,GAAGoL,IAAI,SAASI,GAAG7tE,GAAG,GAAGA,IAAIytE,GAAG,MAAMliF,MAAMsB,EAAE,MAAM,OAAOmT,CAAC,CAAC,SAAS8tE,GAAG9tE,EAAE/E,GAAGnD,GAAE81E,GAAG3yE,GAAGnD,GAAE61E,GAAG3tE,GAAGlI,GAAE41E,GAAGD,IAAIztE,EAAE46D,EAAG3/D,GAAGpD,GAAE61E,IAAI51E,GAAE41E,GAAG1tE,EAAE,CAAC,SAAS+tE,KAAKl2E,GAAE61E,IAAI71E,GAAE81E,IAAI91E,GAAE+1E,GAAG,CAAC,SAASI,GAAGhuE,GAAG,IAAI/E,EAAE4yE,GAAGD,GAAG5nD,SAAS/lB,EAAE4tE,GAAGH,GAAG1nD,SAA0B/lB,KAAjBhF,EAAE4/D,EAAG56D,EAAED,EAAEtV,KAAKuQ,MAAWnD,GAAE61E,GAAG3tE,GAAGlI,GAAE41E,GAAGzyE,GAAG,CAAC,SAASgzE,GAAGjuE,GAAG2tE,GAAG3nD,UAAUhmB,IAAInI,GAAE61E,IAAI71E,GAAE81E,IAAI,CAAC,IAAIO,GAAE7L,GAAG,GAC1d,SAAS8L,GAAGnuE,GAAG,IAAI,IAAI/E,EAAE+E,EAAE,OAAO/E,GAAG,CAAC,GAAG,KAAKA,EAAEi/D,IAAI,CAAC,IAAIj6D,EAAEhF,EAAE85D,cAAc,GAAG,OAAO90D,IAAmB,QAAfA,EAAEA,EAAE+rE,aAAqBzM,GAAGt/D,IAAIw/D,GAAGx/D,IAAI,OAAOhF,CAAC,MAAM,GAAG,KAAKA,EAAEi/D,UAAK,IAASj/D,EAAE6+C,cAAcs0B,aAAa,GAAG,KAAa,IAARnzE,EAAErR,OAAW,OAAOqR,OAAO,GAAG,OAAOA,EAAEs/C,MAAM,CAACt/C,EAAEs/C,MAAMyZ,OAAO/4D,EAAEA,EAAEA,EAAEs/C,MAAM,QAAQ,CAAC,GAAGt/C,IAAI+E,EAAE,MAAM,KAAK,OAAO/E,EAAE8sD,SAAS,CAAC,GAAG,OAAO9sD,EAAE+4D,QAAQ/4D,EAAE+4D,SAASh0D,EAAE,OAAO,KAAK/E,EAAEA,EAAE+4D,MAAM,CAAC/4D,EAAE8sD,QAAQiM,OAAO/4D,EAAE+4D,OAAO/4D,EAAEA,EAAE8sD,OAAO,CAAC,OAAO,IAAI,CAAC,IAAIsmB,GAAG,GACrb,SAASC,KAAK,IAAI,IAAItuE,EAAE,EAAEA,EAAEquE,GAAGjjF,OAAO4U,IAAI,CAAC,IAAI/E,EAAEozE,GAAGruE,GAAGy7D,EAAGxgE,EAAEszE,8BAA8B,KAAKtzE,EAAEuzE,gCAAgC,IAAI,CAACH,GAAGjjF,OAAO,CAAC,CAAC,IAAIqjF,GAAG9V,EAAGjE,uBAAuBga,GAAG/V,EAAGuN,wBAAwByI,GAAG,EAAEC,GAAE,KAAKC,GAAE,KAAKhyE,GAAE,KAAKiyE,IAAG,EAAGC,IAAG,EAAGC,GAAG,EAAEC,GAAG,EAAE,SAASC,KAAI,MAAM3jF,MAAMsB,EAAE,KAAM,CAAC,SAASsiF,GAAGnvE,EAAE/E,GAAG,GAAG,OAAOA,EAAE,OAAM,EAAG,IAAI,IAAIgF,EAAE,EAAEA,EAAEhF,EAAE7P,QAAQ6U,EAAED,EAAE5U,OAAO6U,IAAI,IAAI0lE,GAAG3lE,EAAEC,GAAGhF,EAAEgF,IAAI,OAAM,EAAG,OAAM,CAAE,CACnZ,SAASmvE,GAAGpvE,EAAE/E,EAAEgF,EAAEC,EAAEpK,EAAEC,GAAyH,GAAtH44E,GAAG54E,EAAE64E,GAAE3zE,EAAEA,EAAE85D,cAAc,KAAK95D,EAAE0sE,YAAY,KAAK1sE,EAAEmsE,MAAM,EAAEqH,GAAGzoD,QAAQ,OAAOhmB,GAAG,OAAOA,EAAE+0D,cAAcsa,GAAGC,GAAGtvE,EAAEC,EAAEC,EAAEpK,GAAMi5E,GAAG,CAACh5E,EAAE,EAAE,EAAE,CAAY,GAAXg5E,IAAG,EAAGC,GAAG,EAAK,IAAIj5E,EAAE,MAAMxK,MAAMsB,EAAE,MAAMkJ,GAAG,EAAE8G,GAAEgyE,GAAE,KAAK5zE,EAAE0sE,YAAY,KAAK8G,GAAGzoD,QAAQupD,GAAGvvE,EAAEC,EAAEC,EAAEpK,EAAE,OAAOi5E,GAAG,CAA+D,GAA9DN,GAAGzoD,QAAQwpD,GAAGv0E,EAAE,OAAO4zE,IAAG,OAAOA,GAAE54B,KAAK04B,GAAG,EAAE9xE,GAAEgyE,GAAED,GAAE,KAAKE,IAAG,EAAM7zE,EAAE,MAAM1P,MAAMsB,EAAE,MAAM,OAAOmT,CAAC,CAAC,SAASyvE,KAAK,IAAIzvE,EAAE,IAAIgvE,GAAQ,OAALA,GAAG,EAAShvE,CAAC,CAC/Y,SAAS0vE,KAAK,IAAI1vE,EAAE,CAAC+0D,cAAc,KAAK6S,UAAU,KAAK+H,UAAU,KAAKC,MAAM,KAAK35B,KAAK,MAA8C,OAAxC,OAAOp5C,GAAE+xE,GAAE7Z,cAAcl4D,GAAEmD,EAAEnD,GAAEA,GAAEo5C,KAAKj2C,EAASnD,EAAC,CAAC,SAASgzE,KAAK,GAAG,OAAOhB,GAAE,CAAC,IAAI7uE,EAAE4uE,GAAE3jB,UAAUjrD,EAAE,OAAOA,EAAEA,EAAE+0D,cAAc,IAAI,MAAM/0D,EAAE6uE,GAAE54B,KAAK,IAAIh7C,EAAE,OAAO4B,GAAE+xE,GAAE7Z,cAAcl4D,GAAEo5C,KAAK,GAAG,OAAOh7C,EAAE4B,GAAE5B,EAAE4zE,GAAE7uE,MAAM,CAAC,GAAG,OAAOA,EAAE,MAAMzU,MAAMsB,EAAE,MAAUmT,EAAE,CAAC+0D,eAAP8Z,GAAE7uE,GAAqB+0D,cAAc6S,UAAUiH,GAAEjH,UAAU+H,UAAUd,GAAEc,UAAUC,MAAMf,GAAEe,MAAM35B,KAAK,MAAM,OAAOp5C,GAAE+xE,GAAE7Z,cAAcl4D,GAAEmD,EAAEnD,GAAEA,GAAEo5C,KAAKj2C,CAAC,CAAC,OAAOnD,EAAC,CACje,SAASizE,GAAG9vE,EAAE/E,GAAG,MAAM,oBAAoBA,EAAEA,EAAE+E,GAAG/E,CAAC,CACnD,SAAS80E,GAAG/vE,GAAG,IAAI/E,EAAE40E,KAAK5vE,EAAEhF,EAAE20E,MAAM,GAAG,OAAO3vE,EAAE,MAAM1U,MAAMsB,EAAE,MAAMoT,EAAE+vE,oBAAoBhwE,EAAE,IAAIE,EAAE2uE,GAAE/4E,EAAEoK,EAAEyvE,UAAU55E,EAAEkK,EAAE+nE,QAAQ,GAAG,OAAOjyE,EAAE,CAAC,GAAG,OAAOD,EAAE,CAAC,IAAIqK,EAAErK,EAAEmgD,KAAKngD,EAAEmgD,KAAKlgD,EAAEkgD,KAAKlgD,EAAEkgD,KAAK91C,CAAC,CAACD,EAAEyvE,UAAU75E,EAAEC,EAAEkK,EAAE+nE,QAAQ,IAAI,CAAC,GAAG,OAAOlyE,EAAE,CAACC,EAAED,EAAEmgD,KAAK/1C,EAAEA,EAAE0nE,UAAU,IAAIxnE,EAAED,EAAE,KAAK5E,EAAE,KAAK0D,EAAElJ,EAAE,EAAE,CAAC,IAAInL,EAAEqU,EAAEopE,KAAK,IAAIsG,GAAG/jF,KAAKA,EAAE,OAAO2Q,IAAIA,EAAEA,EAAE06C,KAAK,CAACoyB,KAAK,EAAE4H,OAAOhxE,EAAEgxE,OAAOC,cAAcjxE,EAAEixE,cAAcC,WAAWlxE,EAAEkxE,WAAWl6B,KAAK,OAAO/1C,EAAEjB,EAAEixE,cAAcjxE,EAAEkxE,WAAWnwE,EAAEE,EAAEjB,EAAEgxE,YAAY,CAAC,IAAIx2E,EAAE,CAAC4uE,KAAKz9E,EAAEqlF,OAAOhxE,EAAEgxE,OAAOC,cAAcjxE,EAAEixE,cACngBC,WAAWlxE,EAAEkxE,WAAWl6B,KAAK,MAAM,OAAO16C,GAAG6E,EAAE7E,EAAE9B,EAAE0G,EAAED,GAAG3E,EAAEA,EAAE06C,KAAKx8C,EAAEm1E,GAAExH,OAAOx8E,EAAEi+E,IAAIj+E,CAAC,CAACqU,EAAEA,EAAEg3C,IAAI,OAAO,OAAOh3C,GAAGA,IAAIlJ,GAAG,OAAOwF,EAAE4E,EAAED,EAAE3E,EAAE06C,KAAK71C,EAAEulE,GAAGzlE,EAAEjF,EAAE85D,iBAAiBsS,IAAG,GAAIpsE,EAAE85D,cAAc70D,EAAEjF,EAAE2sE,UAAUznE,EAAElF,EAAE00E,UAAUp0E,EAAE0E,EAAEmwE,kBAAkBlwE,CAAC,CAAiB,GAAG,QAAnBF,EAAEC,EAAEgoE,aAAwB,CAACnyE,EAAEkK,EAAE,GAAGjK,EAAED,EAAEuyE,KAAKuG,GAAExH,OAAOrxE,EAAE8yE,IAAI9yE,EAAED,EAAEA,EAAEmgD,WAAWngD,IAAIkK,EAAE,MAAM,OAAOlK,IAAImK,EAAEmnE,MAAM,GAAG,MAAM,CAACnsE,EAAE85D,cAAc90D,EAAEowE,SAAS,CAC9X,SAASC,GAAGtwE,GAAG,IAAI/E,EAAE40E,KAAK5vE,EAAEhF,EAAE20E,MAAM,GAAG,OAAO3vE,EAAE,MAAM1U,MAAMsB,EAAE,MAAMoT,EAAE+vE,oBAAoBhwE,EAAE,IAAIE,EAAED,EAAEowE,SAASv6E,EAAEmK,EAAE+nE,QAAQjyE,EAAEkF,EAAE85D,cAAc,GAAG,OAAOj/D,EAAE,CAACmK,EAAE+nE,QAAQ,KAAK,IAAI7nE,EAAErK,EAAEA,EAAEmgD,KAAK,GAAGlgD,EAAEiK,EAAEjK,EAAEoK,EAAE8vE,QAAQ9vE,EAAEA,EAAE81C,WAAW91C,IAAIrK,GAAG6vE,GAAG5vE,EAAEkF,EAAE85D,iBAAiBsS,IAAG,GAAIpsE,EAAE85D,cAAch/D,EAAE,OAAOkF,EAAE00E,YAAY10E,EAAE2sE,UAAU7xE,GAAGkK,EAAEmwE,kBAAkBr6E,CAAC,CAAC,MAAM,CAACA,EAAEmK,EAAE,CAAC,SAASqwE,KAAK,CACpW,SAASC,GAAGxwE,EAAE/E,GAAG,IAAIgF,EAAE2uE,GAAE1uE,EAAE2vE,KAAK/5E,EAAEmF,IAAIlF,GAAG4vE,GAAGzlE,EAAE60D,cAAcj/D,GAAsE,GAAnEC,IAAImK,EAAE60D,cAAcj/D,EAAEuxE,IAAG,GAAInnE,EAAEA,EAAE0vE,MAAMa,GAAGC,GAAGxkF,KAAK,KAAK+T,EAAEC,EAAEF,GAAG,CAACA,IAAOE,EAAEywE,cAAc11E,GAAGlF,GAAG,OAAO8G,IAAuB,EAApBA,GAAEk4D,cAAcmF,IAAM,CAAuD,GAAtDj6D,EAAErW,OAAO,KAAKgnF,GAAG,EAAEC,GAAG3kF,KAAK,KAAK+T,EAAEC,EAAEpK,EAAEmF,QAAG,EAAO,MAAS,OAAOutE,GAAE,MAAMj9E,MAAMsB,EAAE,MAAM,KAAQ,GAAH8hF,KAAQmC,GAAG7wE,EAAEhF,EAAEnF,EAAE,CAAC,OAAOA,CAAC,CAAC,SAASg7E,GAAG9wE,EAAE/E,EAAEgF,GAAGD,EAAEpW,OAAO,MAAMoW,EAAE,CAAC2wE,YAAY11E,EAAEvS,MAAMuX,GAAmB,QAAhBhF,EAAE2zE,GAAEjH,cAAsB1sE,EAAE,CAAC81E,WAAW,KAAKC,OAAO,MAAMpC,GAAEjH,YAAY1sE,EAAEA,EAAE+1E,OAAO,CAAChxE,IAAgB,QAAXC,EAAEhF,EAAE+1E,QAAgB/1E,EAAE+1E,OAAO,CAAChxE,GAAGC,EAAE9U,KAAK6U,EAAG,CAClf,SAAS6wE,GAAG7wE,EAAE/E,EAAEgF,EAAEC,GAAGjF,EAAEvS,MAAMuX,EAAEhF,EAAE01E,YAAYzwE,EAAE+wE,GAAGh2E,IAAIsuE,GAAGvpE,EAAE,GAAG,EAAE,CAAC,SAAS0wE,GAAG1wE,EAAE/E,EAAEgF,GAAG,OAAOA,GAAE,WAAWgxE,GAAGh2E,IAAIsuE,GAAGvpE,EAAE,GAAG,EAAE,GAAE,CAAC,SAASixE,GAAGjxE,GAAG,IAAI/E,EAAE+E,EAAE2wE,YAAY3wE,EAAEA,EAAEtX,MAAM,IAAI,IAAIuX,EAAEhF,IAAI,OAAO0qE,GAAG3lE,EAAEC,EAAE,CAAC,MAAMC,GAAG,OAAM,CAAE,CAAC,CAAC,SAASgxE,GAAGlxE,GAAG,IAAI/E,EAAEy0E,KAA8M,MAAzM,oBAAoB1vE,IAAIA,EAAEA,KAAK/E,EAAE85D,cAAc95D,EAAE2sE,UAAU5nE,EAAEA,EAAE,CAACgoE,QAAQ,KAAKC,YAAY,KAAKb,MAAM,EAAEiJ,SAAS,KAAKL,oBAAoBF,GAAGM,kBAAkBpwE,GAAG/E,EAAE20E,MAAM5vE,EAAEA,EAAEA,EAAEqwE,SAASc,GAAGjlF,KAAK,KAAK0iF,GAAE5uE,GAAS,CAAC/E,EAAE85D,cAAc/0D,EAAE,CACrd,SAAS4wE,GAAG5wE,EAAE/E,EAAEgF,EAAEC,GAA8O,OAA3OF,EAAE,CAACk6D,IAAIl6D,EAAEjV,OAAOkQ,EAAEy5C,QAAQz0C,EAAEioB,KAAKhoB,EAAE+1C,KAAK,MAAsB,QAAhBh7C,EAAE2zE,GAAEjH,cAAsB1sE,EAAE,CAAC81E,WAAW,KAAKC,OAAO,MAAMpC,GAAEjH,YAAY1sE,EAAEA,EAAE81E,WAAW/wE,EAAEi2C,KAAKj2C,GAAmB,QAAfC,EAAEhF,EAAE81E,YAAoB91E,EAAE81E,WAAW/wE,EAAEi2C,KAAKj2C,GAAGE,EAAED,EAAEg2C,KAAKh2C,EAAEg2C,KAAKj2C,EAAEA,EAAEi2C,KAAK/1C,EAAEjF,EAAE81E,WAAW/wE,GAAWA,CAAC,CAAC,SAASoxE,KAAK,OAAOvB,KAAK9a,aAAa,CAAC,SAASsc,GAAGrxE,EAAE/E,EAAEgF,EAAEC,GAAG,IAAIpK,EAAE45E,KAAKd,GAAEhlF,OAAOoW,EAAElK,EAAEi/D,cAAc6b,GAAG,EAAE31E,EAAEgF,OAAE,OAAO,IAASC,EAAE,KAAKA,EAAE,CAC9Y,SAASoxE,GAAGtxE,EAAE/E,EAAEgF,EAAEC,GAAG,IAAIpK,EAAE+5E,KAAK3vE,OAAE,IAASA,EAAE,KAAKA,EAAE,IAAInK,OAAE,EAAO,GAAG,OAAO84E,GAAE,CAAC,IAAI1uE,EAAE0uE,GAAE9Z,cAA0B,GAAZh/D,EAAEoK,EAAEu0C,QAAW,OAAOx0C,GAAGivE,GAAGjvE,EAAEC,EAAE+nB,MAAmC,YAA5BpyB,EAAEi/D,cAAc6b,GAAG31E,EAAEgF,EAAElK,EAAEmK,GAAU,CAAC0uE,GAAEhlF,OAAOoW,EAAElK,EAAEi/D,cAAc6b,GAAG,EAAE31E,EAAEgF,EAAElK,EAAEmK,EAAE,CAAC,SAASqxE,GAAGvxE,EAAE/E,GAAG,OAAOo2E,GAAG,QAAQ,EAAErxE,EAAE/E,EAAE,CAAC,SAASw1E,GAAGzwE,EAAE/E,GAAG,OAAOq2E,GAAG,KAAK,EAAEtxE,EAAE/E,EAAE,CAAC,SAASu2E,GAAGxxE,EAAE/E,GAAG,OAAOq2E,GAAG,EAAE,EAAEtxE,EAAE/E,EAAE,CAAC,SAASw2E,GAAGzxE,EAAE/E,GAAG,OAAOq2E,GAAG,EAAE,EAAEtxE,EAAE/E,EAAE,CAChX,SAASy2E,GAAG1xE,EAAE/E,GAAG,MAAG,oBAAoBA,GAAS+E,EAAEA,IAAI/E,EAAE+E,GAAG,WAAW/E,EAAE,KAAK,GAAK,OAAOA,QAAG,IAASA,GAAS+E,EAAEA,IAAI/E,EAAE+qB,QAAQhmB,EAAE,WAAW/E,EAAE+qB,QAAQ,IAAI,QAA1E,CAA2E,CAAC,SAAS2rD,GAAG3xE,EAAE/E,EAAEgF,GAA6C,OAA1CA,EAAE,OAAOA,QAAG,IAASA,EAAEA,EAAE3X,OAAO,CAAC0X,IAAI,KAAYsxE,GAAG,EAAE,EAAEI,GAAGxlF,KAAK,KAAK+O,EAAE+E,GAAGC,EAAE,CAAC,SAAS2xE,KAAK,CAAC,SAASC,GAAG7xE,EAAE/E,GAAG,IAAIgF,EAAE4vE,KAAK50E,OAAE,IAASA,EAAE,KAAKA,EAAE,IAAIiF,EAAED,EAAE80D,cAAc,OAAG,OAAO70D,GAAG,OAAOjF,GAAGk0E,GAAGl0E,EAAEiF,EAAE,IAAWA,EAAE,IAAGD,EAAE80D,cAAc,CAAC/0D,EAAE/E,GAAU+E,EAAC,CAC7Z,SAAS8xE,GAAG9xE,EAAE/E,GAAG,IAAIgF,EAAE4vE,KAAK50E,OAAE,IAASA,EAAE,KAAKA,EAAE,IAAIiF,EAAED,EAAE80D,cAAc,OAAG,OAAO70D,GAAG,OAAOjF,GAAGk0E,GAAGl0E,EAAEiF,EAAE,IAAWA,EAAE,IAAGF,EAAEA,IAAIC,EAAE80D,cAAc,CAAC/0D,EAAE/E,GAAU+E,EAAC,CAAC,SAAS+xE,GAAG/xE,EAAE/E,GAAG,IAAIgF,EAAEskE,GAAEA,GAAE,IAAItkE,GAAG,EAAEA,EAAEA,EAAE,EAAED,GAAE,GAAI,IAAIE,EAAEwuE,GAAGsD,WAAWtD,GAAGsD,WAAW,CAAC,EAAE,IAAIhyE,GAAE,GAAI/E,GAAG,CAAC,QAAQspE,GAAEtkE,EAAEyuE,GAAGsD,WAAW9xE,CAAC,CAAC,CAAC,SAAS+xE,KAAK,OAAOpC,KAAK9a,aAAa,CAAC,SAASmd,GAAGlyE,EAAE/E,EAAEgF,GAAG,IAAIC,EAAEopE,GAAGtpE,GAAGC,EAAE,CAACooE,KAAKnoE,EAAE+vE,OAAOhwE,EAAEiwE,eAAc,EAAGC,WAAW,KAAKl6B,KAAK,MAAMk8B,GAAGnyE,GAAGoyE,GAAGn3E,EAAEgF,IAAIoyE,GAAGryE,EAAE/E,EAAEgF,GAAqB,QAAZD,EAAEupE,GAAGvpE,EAAEE,EAAbD,EAAEopE,QAA0BiJ,GAAGtyE,EAAE/E,EAAEiF,GAAG,CAC9d,SAASixE,GAAGnxE,EAAE/E,EAAEgF,GAAG,IAAIC,EAAEopE,GAAGtpE,GAAGlK,EAAE,CAACuyE,KAAKnoE,EAAE+vE,OAAOhwE,EAAEiwE,eAAc,EAAGC,WAAW,KAAKl6B,KAAK,MAAM,GAAGk8B,GAAGnyE,GAAGoyE,GAAGn3E,EAAEnF,OAAO,CAACu8E,GAAGryE,EAAE/E,EAAEnF,GAAG,IAAIC,EAAEiK,EAAEirD,UAAU,GAAG,IAAIjrD,EAAEonE,QAAQ,OAAOrxE,GAAG,IAAIA,EAAEqxE,QAAiC,QAAxBrxE,EAAEkF,EAAE+0E,qBAA8B,IAAI,IAAI7vE,EAAElF,EAAEm1E,kBAAkBhwE,EAAErK,EAAEoK,EAAEF,GAAqC,GAAlCnK,EAAEo6E,eAAc,EAAGp6E,EAAEq6E,WAAW/vE,EAAKulE,GAAGvlE,EAAED,GAAG,MAAM,CAAC,MAAM5E,GAAG,CAA4B,QAAZyE,EAAEupE,GAAGvpE,EAAEE,EAAbD,EAAEopE,QAA0BiJ,GAAGtyE,EAAE/E,EAAEiF,EAAE,CAAC,CAAC,SAASiyE,GAAGnyE,GAAG,IAAI/E,EAAE+E,EAAEirD,UAAU,OAAOjrD,IAAI4uE,IAAG,OAAO3zE,GAAGA,IAAI2zE,EAAC,CAC/a,SAASwD,GAAGpyE,EAAE/E,GAAG8zE,GAAGD,IAAG,EAAG,IAAI7uE,EAAED,EAAEgoE,QAAQ,OAAO/nE,EAAEhF,EAAEg7C,KAAKh7C,GAAGA,EAAEg7C,KAAKh2C,EAAEg2C,KAAKh2C,EAAEg2C,KAAKh7C,GAAG+E,EAAEgoE,QAAQ/sE,CAAC,CAAC,SAASo3E,GAAGryE,EAAE/E,EAAEgF,GAAG,OAAOuoE,IAAG,KAAY,EAAPxoE,EAAEya,OAAS,KAAO,EAAFguD,KAAsB,QAAhBzoE,EAAE/E,EAAEgtE,cAAsBhoE,EAAEg2C,KAAKh2C,EAAE,OAAOunE,GAAGA,GAAG,CAACvsE,GAAGusE,GAAGr8E,KAAK8P,KAAKgF,EAAEg2C,KAAKj2C,EAAEi2C,KAAKj2C,EAAEi2C,KAAKh2C,GAAGhF,EAAEgtE,YAAYhoE,IAAgB,QAAZD,EAAE/E,EAAE+sE,SAAiB/nE,EAAEg2C,KAAKh2C,GAAGA,EAAEg2C,KAAKj2C,EAAEi2C,KAAKj2C,EAAEi2C,KAAKh2C,GAAGhF,EAAE+sE,QAAQ/nE,EAAE,CAAC,SAASqyE,GAAGtyE,EAAE/E,EAAEgF,GAAG,GAAG,KAAO,QAAFA,GAAW,CAAC,IAAIC,EAAEjF,EAAEmsE,MAAwBnnE,GAAlBC,GAAGF,EAAE4jE,aAAkB3oE,EAAEmsE,MAAMnnE,EAAEqkE,GAAGtkE,EAAEC,EAAE,CAAC,CACta,IAAIuvE,GAAG,CAACra,YAAYmS,GAAGj5C,YAAY6gD,GAAEnqD,WAAWmqD,GAAEt+C,UAAUs+C,GAAEqD,oBAAoBrD,GAAEsD,mBAAmBtD,GAAE3mD,gBAAgB2mD,GAAEtlD,QAAQslD,GAAEh6B,WAAWg6B,GAAEzpD,OAAOypD,GAAEjhD,SAASihD,GAAEr5B,cAAcq5B,GAAEuD,iBAAiBvD,GAAEwD,cAAcxD,GAAEyD,iBAAiBzD,GAAE0D,qBAAqB1D,GAAE2D,MAAM3D,GAAE4D,0BAAyB,GAAIzD,GAAG,CAACla,YAAYmS,GAAGj5C,YAAY,SAASruB,EAAE/E,GAA4C,OAAzCy0E,KAAK3a,cAAc,CAAC/0D,OAAE,IAAS/E,EAAE,KAAKA,GAAU+E,CAAC,EAAE+kB,WAAWuiD,GAAG12C,UAAU2gD,GAAGgB,oBAAoB,SAASvyE,EAAE/E,EAAEgF,GAA6C,OAA1CA,EAAE,OAAOA,QAAG,IAASA,EAAEA,EAAE3X,OAAO,CAAC0X,IAAI,KAAYqxE,GAAG,QAC3f,EAAEK,GAAGxlF,KAAK,KAAK+O,EAAE+E,GAAGC,EAAE,EAAEsoB,gBAAgB,SAASvoB,EAAE/E,GAAG,OAAOo2E,GAAG,QAAQ,EAAErxE,EAAE/E,EAAE,EAAEu3E,mBAAmB,SAASxyE,EAAE/E,GAAG,OAAOo2E,GAAG,EAAE,EAAErxE,EAAE/E,EAAE,EAAE2uB,QAAQ,SAAS5pB,EAAE/E,GAAG,IAAIgF,EAAEyvE,KAAqD,OAAhDz0E,OAAE,IAASA,EAAE,KAAKA,EAAE+E,EAAEA,IAAIC,EAAE80D,cAAc,CAAC/0D,EAAE/E,GAAU+E,CAAC,EAAEk1C,WAAW,SAASl1C,EAAE/E,EAAEgF,GAAG,IAAIC,EAAEwvE,KAAkM,OAA7Lz0E,OAAE,IAASgF,EAAEA,EAAEhF,GAAGA,EAAEiF,EAAE60D,cAAc70D,EAAE0nE,UAAU3sE,EAAE+E,EAAE,CAACgoE,QAAQ,KAAKC,YAAY,KAAKb,MAAM,EAAEiJ,SAAS,KAAKL,oBAAoBhwE,EAAEowE,kBAAkBn1E,GAAGiF,EAAE0vE,MAAM5vE,EAAEA,EAAEA,EAAEqwE,SAAS6B,GAAGhmF,KAAK,KAAK0iF,GAAE5uE,GAAS,CAACE,EAAE60D,cAAc/0D,EAAE,EAAEylB,OAAO,SAASzlB,GAC3d,OAAdA,EAAE,CAACgmB,QAAQhmB,GAAhB0vE,KAA4B3a,cAAc/0D,CAAC,EAAEiuB,SAASijD,GAAGr7B,cAAc+7B,GAAGa,iBAAiB,SAASzyE,GAAG,IAAI/E,EAAEi2E,GAAGlxE,GAAGC,EAAEhF,EAAE,GAAGiF,EAAEjF,EAAE,GAA8F,OAA3Fs2E,IAAG,WAAW,IAAIt2E,EAAEyzE,GAAGsD,WAAWtD,GAAGsD,WAAW,CAAC,EAAE,IAAI9xE,EAAEF,EAAE,CAAC,QAAQ0uE,GAAGsD,WAAW/2E,CAAC,CAAC,GAAE,CAAC+E,IAAWC,CAAC,EAAEyyE,cAAc,WAAW,IAAI1yE,EAAEkxE,IAAG,GAAIj2E,EAAE+E,EAAE,GAA6C,OAA1CA,EAAE+xE,GAAG7lF,KAAK,KAAK8T,EAAE,IAAI0vE,KAAK3a,cAAc/0D,EAAQ,CAAC/E,EAAE+E,EAAE,EAAE2yE,iBAAiB,WAAW,EAAEC,qBAAqB,SAAS5yE,EAAE/E,EAAEgF,GAAG,IAAIC,EAAE0uE,GAAE94E,EAAE45E,KAAK,GAAG/4D,GAAE,CAAC,QAAG,IAAS1W,EAAE,MAAM1U,MAAMsB,EAAE,MAAMoT,EAAEA,GAAG,KAAK,CAAO,GAANA,EAAEhF,IAAO,OAAOutE,GAAE,MAAMj9E,MAAMsB,EAAE,MAC/e,KAAQ,GAAH8hF,KAAQmC,GAAG5wE,EAAEjF,EAAEgF,EAAE,CAACnK,EAAEi/D,cAAc90D,EAAE,IAAIlK,EAAE,CAACrN,MAAMuX,EAAE0wE,YAAY11E,GAA+F,OAA5FnF,EAAE85E,MAAM75E,EAAEw7E,GAAGb,GAAGxkF,KAAK,KAAKgU,EAAEnK,EAAEiK,GAAG,CAACA,IAAIE,EAAEtW,OAAO,KAAKgnF,GAAG,EAAEC,GAAG3kF,KAAK,KAAKgU,EAAEnK,EAAEkK,EAAEhF,QAAG,EAAO,MAAagF,CAAC,EAAE4yE,MAAM,WAAW,IAAI7yE,EAAE0vE,KAAKz0E,EAAEutE,GAAEuK,iBAAiB,GAAGp8D,GAAE,CAAC,IAAI1W,EAAEgrE,GAAkDhwE,EAAE,IAAIA,EAAE,KAA9CgF,GAAH+qE,KAAU,GAAG,GAAG3H,GAAhB2H,IAAsB,IAAItvE,SAAS,IAAIuE,GAAuB,GAAPA,EAAE+uE,QAAW/zE,GAAG,IAAIgF,EAAEvE,SAAS,KAAKT,GAAG,GAAG,MAAaA,EAAE,IAAIA,EAAE,KAAfgF,EAAEgvE,MAAmBvzE,SAAS,IAAI,IAAI,OAAOsE,EAAE+0D,cAAc95D,CAAC,EAAE63E,0BAAyB,GAAIxD,GAAG,CAACna,YAAYmS,GAAGj5C,YAAYwjD,GAAG9sD,WAAWuiD,GAAG12C,UAAU6/C,GAAG8B,oBAAoBZ,GACxgBa,mBAAmBhB,GAAGjpD,gBAAgBkpD,GAAG7nD,QAAQkoD,GAAG58B,WAAW66B,GAAGtqD,OAAO2rD,GAAGnjD,SAAS,WAAW,OAAO8hD,GAAGD,GAAG,EAAEj6B,cAAc+7B,GAAGa,iBAAiB,SAASzyE,GAAG,IAAI/E,EAAE80E,GAAGD,IAAI7vE,EAAEhF,EAAE,GAAGiF,EAAEjF,EAAE,GAA8F,OAA3Fw1E,IAAG,WAAW,IAAIx1E,EAAEyzE,GAAGsD,WAAWtD,GAAGsD,WAAW,CAAC,EAAE,IAAI9xE,EAAEF,EAAE,CAAC,QAAQ0uE,GAAGsD,WAAW/2E,CAAC,CAAC,GAAE,CAAC+E,IAAWC,CAAC,EAAEyyE,cAAc,WAAgD,MAAM,CAArC3C,GAAGD,IAAI,GAAKD,KAAK9a,cAAyB,EAAE4d,iBAAiBpC,GAAGqC,qBAAqBpC,GAAGqC,MAAMZ,GAAGa,0BAAyB,GAAIvD,GAAG,CAACpa,YAAYmS,GAAGj5C,YAAYwjD,GAAG9sD,WAAWuiD,GAAG12C,UAAU6/C,GACpf8B,oBAAoBZ,GAAGa,mBAAmBhB,GAAGjpD,gBAAgBkpD,GAAG7nD,QAAQkoD,GAAG58B,WAAWo7B,GAAG7qD,OAAO2rD,GAAGnjD,SAAS,WAAW,OAAOqiD,GAAGR,GAAG,EAAEj6B,cAAc+7B,GAAGa,iBAAiB,SAASzyE,GAAG,IAAI/E,EAAEq1E,GAAGR,IAAI7vE,EAAEhF,EAAE,GAAGiF,EAAEjF,EAAE,GAA8F,OAA3Fw1E,IAAG,WAAW,IAAIx1E,EAAEyzE,GAAGsD,WAAWtD,GAAGsD,WAAW,CAAC,EAAE,IAAI9xE,EAAEF,EAAE,CAAC,QAAQ0uE,GAAGsD,WAAW/2E,CAAC,CAAC,GAAE,CAAC+E,IAAWC,CAAC,EAAEyyE,cAAc,WAAgD,MAAM,CAArCpC,GAAGR,IAAI,GAAKD,KAAK9a,cAAyB,EAAE4d,iBAAiBpC,GAAGqC,qBAAqBpC,GAAGqC,MAAMZ,GAAGa,0BAAyB,GAC7c,SAASE,GAAGhzE,EAAE/E,GAAG,IAAI,IAAIgF,EAAE,GAAGC,EAAEjF,EAAE,GAAGgF,GAAGmmE,GAAGlmE,GAAGA,EAAEA,EAAE8zD,aAAa9zD,GAAG,IAAIpK,EAAEmK,CAAC,CAAC,MAAMlK,GAAGD,EAAE,6BAA6BC,EAAEjI,QAAQ,KAAKiI,EAAE6rE,KAAK,CAAC,MAAM,CAACl5E,MAAMsX,EAAExQ,OAAOyL,EAAE2mE,MAAM9rE,EAAE,CAAC,SAASm9E,GAAGjzE,EAAE/E,GAAG,IAAIvP,QAAQkC,MAAMqN,EAAEvS,MAAM,CAAC,MAAMuX,GAAGg3C,YAAW,WAAW,MAAMh3C,CAAE,GAAE,CAAC,CAAC,IAGsMizE,GAAGC,GAAGC,GAAGC,GAH3MC,GAAG,oBAAoBC,QAAQA,QAAQ3xB,IAAI,SAAS4xB,GAAGxzE,EAAE/E,EAAEgF,IAAGA,EAAEkoE,IAAI,EAAEloE,IAAKi6D,IAAI,EAAEj6D,EAAEqoE,QAAQ,CAACr6B,QAAQ,MAAM,IAAI/tC,EAAEjF,EAAEvS,MAAsD,OAAhDuX,EAAE4R,SAAS,WAAW4hE,KAAKA,IAAG,EAAGC,GAAGxzE,GAAG+yE,GAAGjzE,EAAE/E,EAAE,EAASgF,CAAC,CACrb,SAAS0zE,GAAG3zE,EAAE/E,EAAEgF,IAAGA,EAAEkoE,IAAI,EAAEloE,IAAKi6D,IAAI,EAAE,IAAIh6D,EAAEF,EAAEtV,KAAKqtD,yBAAyB,GAAG,oBAAoB73C,EAAE,CAAC,IAAIpK,EAAEmF,EAAEvS,MAAMuX,EAAEqoE,QAAQ,WAAW,OAAOpoE,EAAEpK,EAAE,EAAEmK,EAAE4R,SAAS,WAAWohE,GAAGjzE,EAAE/E,EAAE,CAAC,CAAC,IAAIlF,EAAEiK,EAAEkrD,UAA8O,OAApO,OAAOn1D,GAAG,oBAAoBA,EAAE69E,oBAAoB3zE,EAAE4R,SAAS,WAAWohE,GAAGjzE,EAAE/E,GAAG,oBAAoBiF,IAAI,OAAO2zE,GAAGA,GAAG,IAAIngC,IAAI,CAAC7qD,OAAOgrF,GAAGljE,IAAI9nB,OAAO,IAAIoX,EAAEhF,EAAE2mE,MAAM/4E,KAAK+qF,kBAAkB34E,EAAEvS,MAAM,CAACorF,eAAe,OAAO7zE,EAAEA,EAAE,IAAI,GAAUA,CAAC,CACnb,SAAS8zE,GAAG/zE,EAAE/E,EAAEgF,GAAG,IAAIC,EAAEF,EAAEg0E,UAAU,GAAG,OAAO9zE,EAAE,CAACA,EAAEF,EAAEg0E,UAAU,IAAIV,GAAG,IAAIx9E,EAAE,IAAI49C,IAAIxzC,EAAE5S,IAAI2N,EAAEnF,EAAE,WAAiB,KAAXA,EAAEoK,EAAE7S,IAAI4N,MAAgBnF,EAAE,IAAI49C,IAAIxzC,EAAE5S,IAAI2N,EAAEnF,IAAIA,EAAEupD,IAAIp/C,KAAKnK,EAAE6a,IAAI1Q,GAAGD,EAAEi0E,GAAG/nF,KAAK,KAAK8T,EAAE/E,EAAEgF,GAAGhF,EAAE87C,KAAK/2C,EAAEA,GAAG,CAAC,SAASk0E,GAAGl0E,GAAG,EAAE,CAAC,IAAI/E,EAA4E,IAAvEA,EAAE,KAAK+E,EAAEk6D,OAAsBj/D,EAAE,QAApBA,EAAE+E,EAAE+0D,gBAAyB,OAAO95D,EAAE+wE,YAAuB/wE,EAAE,OAAO+E,EAAEA,EAAEA,EAAEg0D,MAAM,OAAO,OAAOh0D,GAAG,OAAO,IAAI,CAChW,SAASm0E,GAAGn0E,EAAE/E,EAAEgF,EAAEC,EAAEpK,GAAG,OAAG,KAAY,EAAPkK,EAAEya,OAAeza,IAAI/E,EAAE+E,EAAEpW,OAAO,OAAOoW,EAAEpW,OAAO,IAAIqW,EAAErW,OAAO,OAAOqW,EAAErW,QAAQ,MAAM,IAAIqW,EAAEi6D,MAAM,OAAOj6D,EAAEgrD,UAAUhrD,EAAEi6D,IAAI,KAAIj/D,EAAEktE,IAAI,EAAE,IAAKjO,IAAI,EAAEqO,GAAGtoE,EAAEhF,KAAKgF,EAAEmnE,OAAO,GAAGpnE,IAAEA,EAAEpW,OAAO,MAAMoW,EAAEonE,MAAMtxE,EAASkK,EAAC,CAAC,SAASo0E,GAAGp0E,GAAGA,EAAEpW,OAAO,CAAC,CAAC,SAASyqF,GAAGr0E,EAAE/E,GAAG,GAAG,OAAO+E,GAAGA,EAAEu6C,QAAQt/C,EAAEs/C,MAAM,OAAM,EAAG,GAAG,KAAa,GAARt/C,EAAErR,OAAU,OAAM,EAAG,IAAIoW,EAAE/E,EAAEs/C,MAAM,OAAOv6C,GAAG,CAAC,GAAG,KAAa,MAARA,EAAEpW,QAAc,KAAoB,MAAfoW,EAAEs0E,cAAoB,OAAM,EAAGt0E,EAAEA,EAAE+nD,OAAO,CAAC,OAAM,CAAE,CAClc,GAAG2T,EAAGwX,GAAG,SAASlzE,EAAE/E,GAAG,IAAI,IAAIgF,EAAEhF,EAAEs/C,MAAM,OAAOt6C,GAAG,CAAC,GAAG,IAAIA,EAAEi6D,KAAK,IAAIj6D,EAAEi6D,IAAIe,EAAGj7D,EAAEC,EAAEirD,gBAAgB,GAAG,IAAIjrD,EAAEi6D,KAAK,OAAOj6D,EAAEs6C,MAAM,CAACt6C,EAAEs6C,MAAMyZ,OAAO/zD,EAAEA,EAAEA,EAAEs6C,MAAM,QAAQ,CAAC,GAAGt6C,IAAIhF,EAAE,MAAM,KAAK,OAAOgF,EAAE8nD,SAAS,CAAC,GAAG,OAAO9nD,EAAE+zD,QAAQ/zD,EAAE+zD,SAAS/4D,EAAE,OAAOgF,EAAEA,EAAE+zD,MAAM,CAAC/zD,EAAE8nD,QAAQiM,OAAO/zD,EAAE+zD,OAAO/zD,EAAEA,EAAE8nD,OAAO,CAAC,EAAEorB,GAAG,WAAW,EAAEC,GAAG,SAASpzE,EAAE/E,EAAEgF,EAAEC,EAAEpK,GAAqB,IAAlBkK,EAAEA,EAAE85C,iBAAqB55C,EAAE,CAAC,IAAInK,EAAEkF,EAAEiwD,UAAU/qD,EAAE0tE,GAAGH,GAAG1nD,SAAS/lB,EAAEk7D,EAAGplE,EAAEkK,EAAED,EAAEE,EAAEpK,EAAEqK,IAAIlF,EAAE0sE,YAAY1nE,IAAIm0E,GAAGn5E,EAAE,CAAC,EAAEo4E,GAAG,SAASrzE,EAAE/E,EAAEgF,EAAEC,GAAGD,IAAIC,GAAGk0E,GAAGn5E,EAAE,OAAO,GAAG0gE,EAAG,CAACuX,GAAG,SAASlzE,EACrf/E,EAAEgF,EAAEC,GAAG,IAAI,IAAIpK,EAAEmF,EAAEs/C,MAAM,OAAOzkD,GAAG,CAAC,GAAG,IAAIA,EAAEokE,IAAI,CAAC,IAAInkE,EAAED,EAAEo1D,UAAUjrD,GAAGC,IAAInK,EAAE8oE,GAAG9oE,EAAED,EAAEpL,KAAKoL,EAAEgkD,cAAchkD,IAAImlE,EAAGj7D,EAAEjK,EAAE,MAAM,GAAG,IAAID,EAAEokE,IAAInkE,EAAED,EAAEo1D,UAAUjrD,GAAGC,IAAInK,EAAEgpE,GAAGhpE,EAAED,EAAEgkD,cAAchkD,IAAImlE,EAAGj7D,EAAEjK,QAAQ,GAAG,IAAID,EAAEokE,IAAI,GAAG,KAAKpkE,EAAEokE,KAAK,OAAOpkE,EAAEi/D,cAAwB,QAAVh/D,EAAED,EAAEykD,SAAiBxkD,EAAEi+D,OAAOl+D,GAAGo9E,GAAGlzE,EAAElK,GAAE,GAAG,QAAS,GAAG,OAAOA,EAAEykD,MAAM,CAACzkD,EAAEykD,MAAMyZ,OAAOl+D,EAAEA,EAAEA,EAAEykD,MAAM,QAAQ,CAAC,GAAGzkD,IAAImF,EAAE,MAAM,KAAK,OAAOnF,EAAEiyD,SAAS,CAAC,GAAG,OAAOjyD,EAAEk+D,QAAQl+D,EAAEk+D,SAAS/4D,EAAE,OAAOnF,EAAEA,EAAEk+D,MAAM,CAACl+D,EAAEiyD,QAAQiM,OAAOl+D,EAAEk+D,OAAOl+D,EAAEA,EAAEiyD,OAAO,CAAC,EAAE,IAAIwsB,GAAG,SAAHA,EAAYv0E,EACpf/E,EAAEgF,EAAEC,GAAG,IAAI,IAAIpK,EAAEmF,EAAEs/C,MAAM,OAAOzkD,GAAG,CAAC,GAAG,IAAIA,EAAEokE,IAAI,CAAC,IAAInkE,EAAED,EAAEo1D,UAAUjrD,GAAGC,IAAInK,EAAE8oE,GAAG9oE,EAAED,EAAEpL,KAAKoL,EAAEgkD,cAAchkD,IAAIyoE,GAAGv+D,EAAEjK,EAAE,MAAM,GAAG,IAAID,EAAEokE,IAAInkE,EAAED,EAAEo1D,UAAUjrD,GAAGC,IAAInK,EAAEgpE,GAAGhpE,EAAED,EAAEgkD,cAAchkD,IAAIyoE,GAAGv+D,EAAEjK,QAAQ,GAAG,IAAID,EAAEokE,IAAI,GAAG,KAAKpkE,EAAEokE,KAAK,OAAOpkE,EAAEi/D,cAAwB,QAAVh/D,EAAED,EAAEykD,SAAiBxkD,EAAEi+D,OAAOl+D,GAAGy+E,EAAGv0E,EAAElK,GAAE,GAAG,QAAS,GAAG,OAAOA,EAAEykD,MAAM,CAACzkD,EAAEykD,MAAMyZ,OAAOl+D,EAAEA,EAAEA,EAAEykD,MAAM,QAAQ,CAAC,GAAGzkD,IAAImF,EAAE,MAAM,KAAK,OAAOnF,EAAEiyD,SAAS,CAAC,GAAG,OAAOjyD,EAAEk+D,QAAQl+D,EAAEk+D,SAAS/4D,EAAE,OAAOnF,EAAEA,EAAEk+D,MAAM,CAACl+D,EAAEiyD,QAAQiM,OAAOl+D,EAAEk+D,OAAOl+D,EAAEA,EAAEiyD,OAAO,CAAC,EAAEorB,GAAG,SAASnzE,EAAE/E,GAAG,IAAIgF,EACzfhF,EAAEiwD,UAAU,IAAImpB,GAAGr0E,EAAE/E,GAAG,CAAC+E,EAAEC,EAAEitE,cAAc,IAAIhtE,EAAEm+D,GAAGr+D,GAAGu0E,GAAGr0E,EAAEjF,GAAE,GAAG,GAAIgF,EAAEu0E,gBAAgBt0E,EAAEk0E,GAAGn5E,GAAGwjE,GAAGz+D,EAAEE,EAAE,CAAC,EAAEkzE,GAAG,SAASpzE,EAAE/E,EAAEgF,EAAEC,EAAEpK,GAAG,IAAIC,EAAEiK,EAAEkrD,UAAU/qD,EAAEH,EAAE85C,cAAc,IAAI95C,EAAEq0E,GAAGr0E,EAAE/E,KAAKkF,IAAID,EAAEjF,EAAEiwD,UAAUn1D,MAAM,CAAC,IAAIqK,EAAEnF,EAAEiwD,UAAU3vD,EAAEsyE,GAAGH,GAAG1nD,SAAS/mB,EAAE,KAAKkB,IAAID,IAAIjB,EAAEk8D,EAAG/6D,EAAEH,EAAEE,EAAED,EAAEpK,EAAEyF,IAAIyE,GAAG,OAAOf,EAAEhE,EAAEiwD,UAAUn1D,GAAGA,EAAEooE,GAAGpoE,EAAEkJ,EAAEgB,EAAEE,EAAED,EAAEjF,EAAE+E,EAAEI,GAAG86D,EAAGnlE,EAAEkK,EAAEC,EAAEpK,EAAEyF,IAAI64E,GAAGn5E,GAAGA,EAAEiwD,UAAUn1D,EAAEiK,EAAEo0E,GAAGn5E,GAAGi4E,GAAGn9E,EAAEkF,GAAE,GAAG,GAAI,CAAC,EAAEo4E,GAAG,SAASrzE,EAAE/E,EAAEgF,EAAEC,GAAGD,IAAIC,GAAGF,EAAE6tE,GAAGD,GAAG5nD,SAAS/lB,EAAE4tE,GAAGH,GAAG1nD,SAAS/qB,EAAEiwD,UAAUmQ,EAAGn7D,EAAEF,EAAEC,EAAEhF,GAAGm5E,GAAGn5E,IAAIA,EAAEiwD,UAAUlrD,EAAEkrD,SAAS,CAAC,MAAMioB,GAC1f,WAAW,EAAEC,GAAG,WAAW,EAAEC,GAAG,WAAW,EAAE,SAASoB,GAAGz0E,EAAE/E,GAAG,IAAI0b,GAAE,OAAO3W,EAAE00E,UAAU,IAAK,SAASz5E,EAAE+E,EAAE20E,KAAK,IAAI,IAAI10E,EAAE,KAAK,OAAOhF,GAAG,OAAOA,EAAEgwD,YAAYhrD,EAAEhF,GAAGA,EAAEA,EAAE8sD,QAAQ,OAAO9nD,EAAED,EAAE20E,KAAK,KAAK10E,EAAE8nD,QAAQ,KAAK,MAAM,IAAK,YAAY9nD,EAAED,EAAE20E,KAAK,IAAI,IAAIz0E,EAAE,KAAK,OAAOD,GAAG,OAAOA,EAAEgrD,YAAY/qD,EAAED,GAAGA,EAAEA,EAAE8nD,QAAQ,OAAO7nD,EAAEjF,GAAG,OAAO+E,EAAE20E,KAAK30E,EAAE20E,KAAK,KAAK30E,EAAE20E,KAAK5sB,QAAQ,KAAK7nD,EAAE6nD,QAAQ,KAAK,CACzX,SAAS6sB,GAAE50E,GAAG,IAAI/E,EAAE,OAAO+E,EAAEirD,WAAWjrD,EAAEirD,UAAU1Q,QAAQv6C,EAAEu6C,MAAMt6C,EAAE,EAAEC,EAAE,EAAE,GAAGjF,EAAE,IAAI,IAAInF,EAAEkK,EAAEu6C,MAAM,OAAOzkD,GAAGmK,GAAGnK,EAAEsxE,MAAMtxE,EAAEkxE,WAAW9mE,GAAkB,SAAfpK,EAAEw+E,aAAsBp0E,GAAW,SAARpK,EAAElM,MAAekM,EAAEk+D,OAAOh0D,EAAElK,EAAEA,EAAEiyD,aAAa,IAAIjyD,EAAEkK,EAAEu6C,MAAM,OAAOzkD,GAAGmK,GAAGnK,EAAEsxE,MAAMtxE,EAAEkxE,WAAW9mE,GAAGpK,EAAEw+E,aAAap0E,GAAGpK,EAAElM,MAAMkM,EAAEk+D,OAAOh0D,EAAElK,EAAEA,EAAEiyD,QAAyC,OAAjC/nD,EAAEs0E,cAAcp0E,EAAEF,EAAEgnE,WAAW/mE,EAAShF,CAAC,CAC7V,SAAS45E,GAAG70E,EAAE/E,EAAEgF,GAAG,IAAIC,EAAEjF,EAAE8wE,aAAmB,OAANV,GAAGpwE,GAAUA,EAAEi/D,KAAK,KAAK,EAAE,KAAK,GAAG,KAAK,GAAG,KAAK,EAAE,KAAK,GAAG,KAAK,EAAE,KAAK,EAAE,KAAK,GAAG,KAAK,EAAE,KAAK,GAAG,OAAO0a,GAAE35E,GAAG,KAAK,KAAK,EAIf,KAAK,GAAG,OAAO2nE,GAAE3nE,EAAEvQ,OAAOo4E,KAAK8R,GAAE35E,GAAG,KAJc,KAAK,EAAqQ,OAAnQiF,EAAEjF,EAAEiwD,UAAU6iB,KAAKl2E,GAAE+B,IAAG/B,GAAE8B,IAAG20E,KAAKpuE,EAAE40E,iBAAiB50E,EAAEnS,QAAQmS,EAAE40E,eAAe50E,EAAE40E,eAAe,MAAS,OAAO90E,GAAG,OAAOA,EAAEu6C,QAAM+xB,GAAGrxE,GAAGm5E,GAAGn5E,GAAG,OAAO+E,GAAGA,EAAE+0D,cAAcggB,cAAc,KAAa,IAAR95E,EAAErR,SAAaqR,EAAErR,OAAO,KAAK,OAAO6hF,KAAKuJ,GAAGvJ,IAAIA,GAAG,QAAO0H,GAAGnzE,EAAE/E,GAAG25E,GAAE35E,GAAU,KAAK,KAAK,EAAEgzE,GAAGhzE,GAAGgF,EAAE4tE,GAAGD,GAAG5nD,SAAS,IAAIlwB,EACxfmF,EAAEvQ,KAAK,GAAG,OAAOsV,GAAG,MAAM/E,EAAEiwD,UAAUkoB,GAAGpzE,EAAE/E,EAAEnF,EAAEoK,EAAED,GAAGD,EAAEulB,MAAMtqB,EAAEsqB,MAAMtqB,EAAErR,OAAO,IAAIqR,EAAErR,OAAO,aAAa,CAAC,IAAIsW,EAAE,CAAC,GAAG,OAAOjF,EAAEiwD,UAAU,MAAM3/D,MAAMsB,EAAE,MAAW,OAAL+nF,GAAE35E,GAAU,IAAI,CAAkB,GAAjB+E,EAAE6tE,GAAGH,GAAG1nD,SAAYsmD,GAAGrxE,GAAG,CAAC,IAAIK,EAAE,MAAM/P,MAAMsB,EAAE,MAAMmT,EAAEqgE,GAAGplE,EAAEiwD,UAAUjwD,EAAEvQ,KAAKuQ,EAAE6+C,cAAc75C,EAAED,EAAE/E,GAAGuwE,IAAIvwE,EAAE0sE,YAAY3nE,EAAE,OAAOA,GAAGo0E,GAAGn5E,EAAE,KAAK,CAAC,IAAIlF,EAAEilE,EAAGllE,EAAEoK,EAAED,EAAED,EAAE/E,GAAGi4E,GAAGn9E,EAAEkF,GAAE,GAAG,GAAIA,EAAEiwD,UAAUn1D,EAAEmlE,EAAGnlE,EAAED,EAAEoK,EAAED,EAAED,IAAIo0E,GAAGn5E,EAAE,CAAC,OAAOA,EAAEsqB,MAAMtqB,EAAErR,OAAO,IAAIqR,EAAErR,OAAO,QAAQ,CAAM,OAALgrF,GAAE35E,GAAU,KAAK,KAAK,EAAE,GAAG+E,GAAG,MAAM/E,EAAEiwD,UAAUmoB,GAAGrzE,EAAE/E,EAAE+E,EAAE85C,cAAc55C,OAAO,CAAC,GAAG,kBACrfA,GAAG,OAAOjF,EAAEiwD,UAAU,MAAM3/D,MAAMsB,EAAE,MAAwC,GAAlCmT,EAAE6tE,GAAGD,GAAG5nD,SAAS/lB,EAAE4tE,GAAGH,GAAG1nD,SAAYsmD,GAAGrxE,GAAG,CAAC,IAAIK,EAAE,MAAM/P,MAAMsB,EAAE,MAAsC,GAAhCmT,EAAE/E,EAAEiwD,UAAUhrD,EAAEjF,EAAE6+C,eAAiB75C,EAAEsgE,GAAGvgE,EAAEE,EAAEjF,GAAGuwE,MAAY,QAAL11E,EAAEw1E,IAAY,OAAOv1E,EAAE,KAAY,EAAPD,EAAE2kB,MAAQ3kB,EAAEokE,KAAK,KAAK,EAAEqH,GAAGzrE,EAAEo1D,UAAUgiB,cAAcltE,EAAEE,EAAEnK,GAAG,MAAM,KAAK,EAAE0rE,GAAG3rE,EAAEpL,KAAKoL,EAAEgkD,cAAchkD,EAAEo1D,UAAUlrD,EAAEE,EAAEnK,GAAGkK,GAAGm0E,GAAGn5E,EAAE,MAAMA,EAAEiwD,UAAUmQ,EAAGn7D,EAAEF,EAAEC,EAAEhF,EAAE,CAAM,OAAL25E,GAAE35E,GAAU,KAAK,KAAK,GAA0B,GAAvBpD,GAAEq2E,IAAGhuE,EAAEjF,EAAE85D,cAAiBp+C,IAAG,OAAO40D,IAAI,KAAY,EAAPtwE,EAAEwf,OAAS,KAAa,IAARxf,EAAErR,OAAW,CAAC,IAAIoW,EAAEurE,GAAGvrE,GAAGA,EAAE6/D,GAAG7/D,GAAuB,OAApBusE,KAAKtxE,EAAErR,OAAO,MAAaqR,CAAC,CAAC,GAAG,OAC7fiF,GAAG,OAAOA,EAAE8rE,WAAW,CAAS,GAAR9rE,EAAEosE,GAAGrxE,GAAM,OAAO+E,EAAE,CAAC,IAAIE,EAAE,MAAM3U,MAAMsB,EAAE,MAAM,IAAIyO,EAAE,MAAM/P,MAAMsB,EAAE,MAAqD,KAA7BmT,EAAE,QAApBA,EAAE/E,EAAE85D,eAAyB/0D,EAAEgsE,WAAW,MAAW,MAAMzgF,MAAMsB,EAAE,MAAM4zE,GAAGzgE,EAAE/E,EAAE,MAAMsxE,KAAK,KAAa,IAARtxE,EAAErR,SAAaqR,EAAE85D,cAAc,MAAM95D,EAAErR,OAAO,EAAO,OAALgrF,GAAE35E,GAAU,IAAI,CAA6B,OAA5B,OAAOwwE,KAAKuJ,GAAGvJ,IAAIA,GAAG,MAAS,KAAa,IAARxwE,EAAErR,QAAkBqR,EAAEmsE,MAAMnnE,EAAEhF,IAAEiF,EAAE,OAAOA,EAAED,GAAE,EAAG,OAAOD,EAAEssE,GAAGrxE,GAAGgF,EAAE,OAAOD,EAAE+0D,cAAc70D,IAAID,IAAIhF,EAAEs/C,MAAM3wD,OAAO,KAAK,KAAY,EAAPqR,EAAEwf,QAAU,OAAOza,GAAG,KAAe,EAAVkuE,GAAEloD,SAAW,IAAIivD,KAAIA,GAAE,GAAGC,OAAO,OAAOj6E,EAAE0sE,cAAc1sE,EAAErR,OACpf,GAAGgrF,GAAE35E,GAAU,MAAK,KAAK,EAAE,OAAO8yE,KAAKoF,GAAGnzE,EAAE/E,GAAG,OAAO+E,GAAG87D,EAAG7gE,EAAEiwD,UAAUgiB,eAAe0H,GAAE35E,GAAG,KAAK,KAAK,GAAG,OAAO8rE,GAAG9rE,EAAEvQ,KAAKwqE,UAAU0f,GAAE35E,GAAG,KAA8C,KAAK,GAA0B,GAAvBpD,GAAEq2E,IAAwB,QAArBp4E,EAAEmF,EAAE85D,eAA0B,OAAO6f,GAAE35E,GAAG,KAAuC,GAAlCiF,EAAE,KAAa,IAARjF,EAAErR,OAA4B,QAAjBmM,EAAED,EAAEq/E,WAAsB,GAAGj1E,EAAEu0E,GAAG3+E,GAAE,OAAQ,CAAC,GAAG,IAAIm/E,IAAG,OAAOj1E,GAAG,KAAa,IAARA,EAAEpW,OAAW,IAAIoW,EAAE/E,EAAEs/C,MAAM,OAAOv6C,GAAG,CAAS,GAAG,QAAXjK,EAAEo4E,GAAGnuE,IAAe,CAAmG,IAAlG/E,EAAErR,OAAO,IAAI6qF,GAAG3+E,GAAE,GAAoB,QAAhBkK,EAAEjK,EAAE4xE,eAAuB1sE,EAAE0sE,YAAY3nE,EAAE/E,EAAErR,OAAO,GAAGqR,EAAEq5E,aAAa,EAAEt0E,EAAEC,EAAMC,EAAEjF,EAAEs/C,MAAM,OACxfr6C,GAAOpK,EAAEkK,GAANC,EAAEC,GAAQtW,OAAO,SAAuB,QAAdmM,EAAEkK,EAAEgrD,YAAoBhrD,EAAE+mE,WAAW,EAAE/mE,EAAEmnE,MAAMtxE,EAAEmK,EAAEs6C,MAAM,KAAKt6C,EAAEq0E,aAAa,EAAEr0E,EAAE65C,cAAc,KAAK75C,EAAE80D,cAAc,KAAK90D,EAAE0nE,YAAY,KAAK1nE,EAAEinE,aAAa,KAAKjnE,EAAEirD,UAAU,OAAOjrD,EAAE+mE,WAAWjxE,EAAEixE,WAAW/mE,EAAEmnE,MAAMrxE,EAAEqxE,MAAMnnE,EAAEs6C,MAAMxkD,EAAEwkD,MAAMt6C,EAAEq0E,aAAa,EAAEr0E,EAAE4rE,UAAU,KAAK5rE,EAAE65C,cAAc/jD,EAAE+jD,cAAc75C,EAAE80D,cAAch/D,EAAEg/D,cAAc90D,EAAE0nE,YAAY5xE,EAAE4xE,YAAY1nE,EAAEvV,KAAKqL,EAAErL,KAAKoL,EAAEC,EAAEmxE,aAAajnE,EAAEinE,aAAa,OAAOpxE,EAAE,KAAK,CAACsxE,MAAMtxE,EAAEsxE,MAAMD,aAAarxE,EAAEqxE,eAAejnE,EAAEA,EAAE6nD,QACle,OAAnBjwD,GAAEo2E,GAAY,EAAVA,GAAEloD,QAAU,GAAU/qB,EAAEs/C,KAAK,CAACv6C,EAAEA,EAAE+nD,OAAO,CAAC,OAAOjyD,EAAE6+E,MAAM3P,KAAIoQ,KAAKn6E,EAAErR,OAAO,IAAIsW,GAAE,EAAGu0E,GAAG3+E,GAAE,GAAImF,EAAEmsE,MAAM,QAAQ,KAAK,CAAC,IAAIlnE,EAAE,GAAW,QAARF,EAAEmuE,GAAGp4E,KAAa,GAAGkF,EAAErR,OAAO,IAAIsW,GAAE,EAAmB,QAAhBF,EAAEA,EAAE2nE,eAAuB1sE,EAAE0sE,YAAY3nE,EAAE/E,EAAErR,OAAO,GAAG6qF,GAAG3+E,GAAE,GAAI,OAAOA,EAAE6+E,MAAM,WAAW7+E,EAAE4+E,WAAW3+E,EAAEk1D,YAAYt0C,GAAE,OAAOi+D,GAAE35E,GAAG,UAAU,EAAE+pE,KAAIlvE,EAAEu/E,mBAAmBD,IAAI,aAAan1E,IAAIhF,EAAErR,OAAO,IAAIsW,GAAE,EAAGu0E,GAAG3+E,GAAE,GAAImF,EAAEmsE,MAAM,SAAStxE,EAAEw/E,aAAav/E,EAAEgyD,QAAQ9sD,EAAEs/C,MAAMt/C,EAAEs/C,MAAMxkD,IAAa,QAATiK,EAAElK,EAAEqkD,MAAcn6C,EAAE+nD,QAAQhyD,EAAEkF,EAAEs/C,MAAMxkD,EAAED,EAAEqkD,KAAKpkD,EAAE,CAAC,OAAG,OAClfD,EAAE6+E,MAAY15E,EAAEnF,EAAE6+E,KAAK7+E,EAAEq/E,UAAUl6E,EAAEnF,EAAE6+E,KAAK15E,EAAE8sD,QAAQjyD,EAAEu/E,mBAAmBrQ,KAAI/pE,EAAE8sD,QAAQ,KAAK/nD,EAAEkuE,GAAEloD,QAAQluB,GAAEo2E,GAAEhuE,EAAI,EAAFF,EAAI,EAAI,EAAFA,GAAK/E,IAAE25E,GAAE35E,GAAU,MAAK,KAAK,GAAG,KAAK,GAAG,OAAOs6E,KAAKr1E,EAAE,OAAOjF,EAAE85D,cAAc,OAAO/0D,GAAG,OAAOA,EAAE+0D,gBAAgB70D,IAAIjF,EAAErR,OAAO,MAAMsW,GAAG,KAAY,EAAPjF,EAAEwf,MAAQ,KAAQ,WAAH+6D,MAAiBZ,GAAE35E,GAAGygE,GAAmB,EAAfzgE,EAAEq5E,eAAiBr5E,EAAErR,OAAO,OAAOgrF,GAAE35E,GAAG,KAAK,KAAK,GAAe,KAAK,GAAG,OAAO,KAAK,MAAM1P,MAAMsB,EAAE,IAAIoO,EAAEi/D,KAAM,CAAC,IAAIub,GAAG9c,EAAGlE,kBAAkB4S,IAAG,EACzb,SAAS7/E,GAAEwY,EAAE/E,EAAEgF,EAAEC,GAAGjF,EAAEs/C,MAAM,OAAOv6C,EAAEwtE,GAAGvyE,EAAE,KAAKgF,EAAEC,GAAGqtE,GAAGtyE,EAAE+E,EAAEu6C,MAAMt6C,EAAEC,EAAE,CAAC,SAASw1E,GAAG11E,EAAE/E,EAAEgF,EAAEC,EAAEpK,GAAGmK,EAAEA,EAAEi/B,OAAO,IAAInpC,EAAEkF,EAAEsqB,IAAqC,OAAjC0hD,GAAGhsE,EAAEnF,GAAGoK,EAAEkvE,GAAGpvE,EAAE/E,EAAEgF,EAAEC,EAAEnK,EAAED,GAAGmK,EAAEwvE,KAAQ,OAAOzvE,GAAIqnE,IAA2E1wD,IAAG1W,GAAGmrE,GAAGnwE,GAAGA,EAAErR,OAAO,EAAEpC,GAAEwY,EAAE/E,EAAEiF,EAAEpK,GAAUmF,EAAEs/C,QAA5Gt/C,EAAE0sE,YAAY3nE,EAAE2nE,YAAY1sE,EAAErR,QAAQ,KAAKoW,EAAEonE,QAAQtxE,EAAE6/E,GAAG31E,EAAE/E,EAAEnF,GAAmD,CAC9R,SAAS8/E,GAAG51E,EAAE/E,EAAEgF,EAAEC,EAAEpK,GAAG,GAAG,OAAOkK,EAAE,CAAC,IAAIjK,EAAEkK,EAAEvV,KAAK,MAAG,oBAAoBqL,GAAI8/E,GAAG9/E,SAAI,IAASA,EAAEuwE,cAAc,OAAOrmE,EAAE61E,cAAS,IAAS71E,EAAEqmE,eAAoDtmE,EAAEitE,GAAGhtE,EAAEvV,KAAK,KAAKwV,EAAEjF,EAAEA,EAAEwf,KAAK3kB,IAAKyvB,IAAItqB,EAAEsqB,IAAIvlB,EAAEg0D,OAAO/4D,EAASA,EAAEs/C,MAAMv6C,IAArG/E,EAAEi/D,IAAI,GAAGj/D,EAAEvQ,KAAKqL,EAAEggF,GAAG/1E,EAAE/E,EAAElF,EAAEmK,EAAEpK,GAAyE,CAAW,GAAVC,EAAEiK,EAAEu6C,MAAS,KAAKv6C,EAAEonE,MAAMtxE,GAAG,CAAC,IAAIqK,EAAEpK,EAAE+jD,cAA0C,IAAhB75C,EAAE,QAAdA,EAAEA,EAAE61E,SAAmB71E,EAAEkmE,IAAQhmE,EAAED,IAAIF,EAAEulB,MAAMtqB,EAAEsqB,IAAI,OAAOowD,GAAG31E,EAAE/E,EAAEnF,EAAE,CAA6C,OAA5CmF,EAAErR,OAAO,GAAEoW,EAAE+sE,GAAGh3E,EAAEmK,IAAKqlB,IAAItqB,EAAEsqB,IAAIvlB,EAAEg0D,OAAO/4D,EAASA,EAAEs/C,MAAMv6C,CAAC,CAC1b,SAAS+1E,GAAG/1E,EAAE/E,EAAEgF,EAAEC,EAAEpK,GAAG,GAAG,OAAOkK,GAAGmmE,GAAGnmE,EAAE85C,cAAc55C,IAAIF,EAAEulB,MAAMtqB,EAAEsqB,IAAI,IAAG8hD,IAAG,EAAG,KAAKrnE,EAAEonE,MAAMtxE,GAAsC,OAAOmF,EAAEmsE,MAAMpnE,EAAEonE,MAAMuO,GAAG31E,EAAE/E,EAAEnF,GAAjE,KAAa,OAARkK,EAAEpW,SAAgBy9E,IAAG,EAAyC,CAAC,OAAO2O,GAAGh2E,EAAE/E,EAAEgF,EAAEC,EAAEpK,EAAE,CAC1L,SAASmgF,GAAGj2E,EAAE/E,EAAEgF,GAAG,IAAIC,EAAEjF,EAAE8wE,aAAaj2E,EAAEoK,EAAE0sB,SAAS72B,EAAE,OAAOiK,EAAEA,EAAE+0D,cAAc,KAAK,GAAG,WAAW70D,EAAEua,KAAK,GAAG,KAAY,EAAPxf,EAAEwf,MAAQxf,EAAE85D,cAAc,CAACmhB,UAAU,EAAEC,UAAU,MAAMr+E,GAAEs+E,GAAGZ,IAAIA,IAAIv1E,MAAO,IAAG,KAAO,WAAFA,GAAwG,OAAOD,EAAE,OAAOjK,EAAEA,EAAEmgF,UAAUj2E,EAAEA,EAAEhF,EAAEmsE,MAAMnsE,EAAE+rE,WAAW,WAAW/rE,EAAE85D,cAAc,CAACmhB,UAAUl2E,EAAEm2E,UAAU,MAAMl7E,EAAE0sE,YAAY,KAAK7vE,GAAEs+E,GAAGZ,IAAIA,IAAIx1E,EAAE,KAA3O/E,EAAE85D,cAAc,CAACmhB,UAAU,EAAEC,UAAU,MAAMj2E,EAAE,OAAOnK,EAAEA,EAAEmgF,UAAUj2E,EAAEnI,GAAEs+E,GAAGZ,IAAIA,IAAIt1E,CAA4J,MAAM,OAAOnK,GAAGmK,EAAEnK,EAAEmgF,UAAUj2E,EAAEhF,EAAE85D,cAAc,MAClf70D,EAAED,EAAEnI,GAAEs+E,GAAGZ,IAAIA,IAAIt1E,EAAa,OAAX1Y,GAAEwY,EAAE/E,EAAEnF,EAAEmK,GAAUhF,EAAEs/C,KAAK,CAAC,SAAS87B,GAAGr2E,EAAE/E,GAAG,IAAIgF,EAAEhF,EAAEsqB,KAAO,OAAOvlB,GAAG,OAAOC,GAAG,OAAOD,GAAGA,EAAEulB,MAAMtlB,KAAEhF,EAAErR,OAAO,IAAIqR,EAAErR,OAAO,QAAO,CAAC,SAASosF,GAAGh2E,EAAE/E,EAAEgF,EAAEC,EAAEpK,GAAG,IAAIC,EAAE6sE,GAAE3iE,GAAGsiE,GAAG5oE,GAAEqsB,QAAmD,OAA3CjwB,EAAEysE,GAAGvnE,EAAElF,GAAGkxE,GAAGhsE,EAAEnF,GAAGmK,EAAEmvE,GAAGpvE,EAAE/E,EAAEgF,EAAEC,EAAEnK,EAAED,GAAGoK,EAAEuvE,KAAQ,OAAOzvE,GAAIqnE,IAA2E1wD,IAAGzW,GAAGkrE,GAAGnwE,GAAGA,EAAErR,OAAO,EAAEpC,GAAEwY,EAAE/E,EAAEgF,EAAEnK,GAAUmF,EAAEs/C,QAA5Gt/C,EAAE0sE,YAAY3nE,EAAE2nE,YAAY1sE,EAAErR,QAAQ,KAAKoW,EAAEonE,QAAQtxE,EAAE6/E,GAAG31E,EAAE/E,EAAEnF,GAAmD,CACtX,SAASwgF,GAAGt2E,EAAE/E,EAAEgF,EAAEC,EAAEpK,GAAG,GAAG8sE,GAAE3iE,GAAG,CAAC,IAAIlK,GAAE,EAAGmtE,GAAGjoE,EAAE,MAAMlF,GAAE,EAAW,GAARkxE,GAAGhsE,EAAEnF,GAAM,OAAOmF,EAAEiwD,UAAU,OAAOlrD,IAAIA,EAAEirD,UAAU,KAAKhwD,EAAEgwD,UAAU,KAAKhwD,EAAErR,OAAO,GAAGigF,GAAG5uE,EAAEgF,EAAEC,GAAGiqE,GAAGlvE,EAAEgF,EAAEC,EAAEpK,GAAGoK,GAAE,OAAQ,GAAG,OAAOF,EAAE,CAAC,IAAIG,EAAElF,EAAEiwD,UAAU9qD,EAAEnF,EAAE6+C,cAAc35C,EAAExM,MAAMyM,EAAE,IAAI7E,EAAE4E,EAAEpS,QAAQkR,EAAEgB,EAAE6pE,YAAY,kBAAkB7qE,GAAG,OAAOA,EAAEA,EAAEqoE,GAAGroE,GAAwBA,EAAEujE,GAAGvnE,EAAzBgE,EAAE2jE,GAAE3iE,GAAGsiE,GAAG5oE,GAAEqsB,SAAmB,IAAIp7B,EAAEqV,EAAEmqE,yBAAyB3wE,EAAE,oBAAoB7O,GAAG,oBAAoBuV,EAAEkqE,wBAAwB5wE,GAAG,oBAAoB0G,EAAE+pE,kCAAkC,oBAC7e/pE,EAAE8pE,4BAA4B7pE,IAAIF,GAAG3E,IAAI0D,IAAI+qE,GAAG/uE,EAAEkF,EAAED,EAAEjB,GAAGwoE,IAAG,EAAG,IAAI5rE,EAAEZ,EAAE85D,cAAc50D,EAAEnU,MAAM6P,EAAE+sE,GAAG3tE,EAAEiF,EAAEC,EAAErK,GAAGyF,EAAEN,EAAE85D,cAAc30D,IAAIF,GAAGrE,IAAIN,GAAG3B,GAAEosB,SAASyhD,IAAI,oBAAoB78E,IAAIq+E,GAAGhuE,EAAEgF,EAAErV,EAAEsV,GAAG3E,EAAEN,EAAE85D,gBAAgB30D,EAAEqnE,IAAIiC,GAAGzuE,EAAEgF,EAAEG,EAAEF,EAAErE,EAAEN,EAAE0D,KAAKxF,GAAG,oBAAoB0G,EAAEmqE,2BAA2B,oBAAoBnqE,EAAEoqE,qBAAqB,oBAAoBpqE,EAAEoqE,oBAAoBpqE,EAAEoqE,qBAAqB,oBAAoBpqE,EAAEmqE,2BAA2BnqE,EAAEmqE,6BAA6B,oBAAoBnqE,EAAEqqE,oBACxfvvE,EAAErR,OAAO,WAAW,oBAAoBuW,EAAEqqE,oBAAoBvvE,EAAErR,OAAO,SAASqR,EAAE6+C,cAAc55C,EAAEjF,EAAE85D,cAAcx5D,GAAG4E,EAAExM,MAAMuM,EAAEC,EAAEnU,MAAMuP,EAAE4E,EAAEpS,QAAQkR,EAAEiB,EAAEE,IAAI,oBAAoBD,EAAEqqE,oBAAoBvvE,EAAErR,OAAO,SAASsW,GAAE,EAAG,KAAK,CAACC,EAAElF,EAAEiwD,UAAUgd,GAAGloE,EAAE/E,GAAGmF,EAAEnF,EAAE6+C,cAAc76C,EAAEhE,EAAEvQ,OAAOuQ,EAAE2wE,YAAYxrE,EAAEimE,GAAGprE,EAAEvQ,KAAK0V,GAAGD,EAAExM,MAAMsL,EAAExF,EAAEwB,EAAE8wE,aAAalwE,EAAEsE,EAAEpS,QAAwB,kBAAhBwN,EAAE0E,EAAE6pE,cAAiC,OAAOvuE,EAAEA,EAAE+rE,GAAG/rE,GAAwBA,EAAEinE,GAAGvnE,EAAzBM,EAAEqnE,GAAE3iE,GAAGsiE,GAAG5oE,GAAEqsB,SAAmB,IAAIjuB,EAAEkI,EAAEmqE,0BAA0Bx/E,EAAE,oBAAoBmN,GAAG,oBACpeoI,EAAEkqE,0BAA0B,oBAAoBlqE,EAAE+pE,kCAAkC,oBAAoB/pE,EAAE8pE,4BAA4B7pE,IAAI3G,GAAGoC,IAAIN,IAAIyuE,GAAG/uE,EAAEkF,EAAED,EAAE3E,GAAGksE,IAAG,EAAG5rE,EAAEZ,EAAE85D,cAAc50D,EAAEnU,MAAM6P,EAAE+sE,GAAG3tE,EAAEiF,EAAEC,EAAErK,GAAG,IAAIiG,EAAEd,EAAE85D,cAAc30D,IAAI3G,GAAGoC,IAAIE,GAAGnC,GAAEosB,SAASyhD,IAAI,oBAAoB1vE,IAAIkxE,GAAGhuE,EAAEgF,EAAElI,EAAEmI,GAAGnE,EAAEd,EAAE85D,gBAAgB91D,EAAEwoE,IAAIiC,GAAGzuE,EAAEgF,EAAEhB,EAAEiB,EAAErE,EAAEE,EAAER,KAAI,IAAK3Q,GAAG,oBAAoBuV,EAAEo2E,4BAA4B,oBAAoBp2E,EAAEq2E,sBAAsB,oBAAoBr2E,EAAEq2E,qBAAqBr2E,EAAEq2E,oBAAoBt2E,EACjgBnE,EAAER,GAAG,oBAAoB4E,EAAEo2E,4BAA4Bp2E,EAAEo2E,2BAA2Br2E,EAAEnE,EAAER,IAAI,oBAAoB4E,EAAEs2E,qBAAqBx7E,EAAErR,OAAO,GAAG,oBAAoBuW,EAAEkqE,0BAA0BpvE,EAAErR,OAAO,QAAQ,oBAAoBuW,EAAEs2E,oBAAoBr2E,IAAIJ,EAAE85C,eAAej+C,IAAImE,EAAE+0D,gBAAgB95D,EAAErR,OAAO,GAAG,oBAAoBuW,EAAEkqE,yBAAyBjqE,IAAIJ,EAAE85C,eAAej+C,IAAImE,EAAE+0D,gBAAgB95D,EAAErR,OAAO,MAAMqR,EAAE6+C,cAAc55C,EAAEjF,EAAE85D,cAAch5D,GAAGoE,EAAExM,MAAMuM,EAAEC,EAAEnU,MAAM+P,EAAEoE,EAAEpS,QAAQwN,EAAE2E,EAAEjB,IAAI,oBAClekB,EAAEs2E,oBAAoBr2E,IAAIJ,EAAE85C,eAAej+C,IAAImE,EAAE+0D,gBAAgB95D,EAAErR,OAAO,GAAG,oBAAoBuW,EAAEkqE,yBAAyBjqE,IAAIJ,EAAE85C,eAAej+C,IAAImE,EAAE+0D,gBAAgB95D,EAAErR,OAAO,MAAMsW,GAAE,EAAG,CAAC,OAAOw2E,GAAG12E,EAAE/E,EAAEgF,EAAEC,EAAEnK,EAAED,EAAE,CACzN,SAAS4gF,GAAG12E,EAAE/E,EAAEgF,EAAEC,EAAEpK,EAAEC,GAAGsgF,GAAGr2E,EAAE/E,GAAG,IAAIkF,EAAE,KAAa,IAARlF,EAAErR,OAAW,IAAIsW,IAAIC,EAAE,OAAOrK,GAAGstE,GAAGnoE,EAAEgF,GAAE,GAAI01E,GAAG31E,EAAE/E,EAAElF,GAAGmK,EAAEjF,EAAEiwD,UAAUuqB,GAAGzvD,QAAQ/qB,EAAE,IAAImF,EAAED,GAAG,oBAAoBF,EAAE83C,yBAAyB,KAAK73C,EAAEg/B,SAAuI,OAA9HjkC,EAAErR,OAAO,EAAE,OAAOoW,GAAGG,GAAGlF,EAAEs/C,MAAMgzB,GAAGtyE,EAAE+E,EAAEu6C,MAAM,KAAKxkD,GAAGkF,EAAEs/C,MAAMgzB,GAAGtyE,EAAE,KAAKmF,EAAErK,IAAIvO,GAAEwY,EAAE/E,EAAEmF,EAAErK,GAAGkF,EAAE85D,cAAc70D,EAAElU,MAAM8J,GAAGstE,GAAGnoE,EAAEgF,GAAE,GAAWhF,EAAEs/C,KAAK,CAAC,SAASo8B,GAAG32E,GAAG,IAAI/E,EAAE+E,EAAEkrD,UAAUjwD,EAAE65E,eAAe/R,GAAG/iE,EAAE/E,EAAE65E,eAAe75E,EAAE65E,iBAAiB75E,EAAElN,SAASkN,EAAElN,SAASg1E,GAAG/iE,EAAE/E,EAAElN,SAAQ,GAAI+/E,GAAG9tE,EAAE/E,EAAEiyE,cAAc,CAC3e,SAAS0J,GAAG52E,EAAE/E,EAAEgF,EAAEC,EAAEpK,GAAsC,OAAnCy2E,KAAKC,GAAG12E,GAAGmF,EAAErR,OAAO,IAAIpC,GAAEwY,EAAE/E,EAAEgF,EAAEC,GAAUjF,EAAEs/C,KAAK,CAAC,IAAIs8B,GAAG,CAAC7K,WAAW,KAAKC,YAAY,KAAKC,UAAU,GAAG,SAAS4K,GAAG92E,GAAG,MAAM,CAACk2E,UAAUl2E,EAAEm2E,UAAU,KAAK,CAChL,SAASY,GAAG/2E,EAAE/E,EAAEgF,GAAG,IAA0DG,EAAtDF,EAAEjF,EAAE8wE,aAAaj2E,EAAEo4E,GAAEloD,QAAQjwB,GAAE,EAAGoK,EAAE,KAAa,IAARlF,EAAErR,OAAqJ,IAAvIwW,EAAED,KAAKC,GAAE,OAAOJ,GAAG,OAAOA,EAAE+0D,gBAAiB,KAAO,EAAFj/D,IAASsK,GAAErK,GAAE,EAAGkF,EAAErR,QAAQ,KAAY,OAAOoW,GAAG,OAAOA,EAAE+0D,gBAAcj/D,GAAG,GAAEgC,GAAEo2E,GAAI,EAAFp4E,GAAQ,OAAOkK,EAA2B,OAAxBosE,GAAGnxE,GAAwB,QAArB+E,EAAE/E,EAAE85D,gBAA2C,QAAf/0D,EAAEA,EAAEgsE,aAA4B,KAAY,EAAP/wE,EAAEwf,MAAQxf,EAAEmsE,MAAM,EAAE3H,GAAGz/D,GAAG/E,EAAEmsE,MAAM,EAAEnsE,EAAEmsE,MAAM,WAAW,OAAKtxE,EAAEoK,EAAE0sB,SAAS5sB,EAAEE,EAAEo2D,SAAgBvgE,GAAGmK,EAAEjF,EAAEwf,KAAK1kB,EAAEkF,EAAEs/C,MAAMzkD,EAAE,CAAC2kB,KAAK,SAASmS,SAAS92B,GAAG,KAAO,EAAFoK,IAAM,OAAOnK,GAAGA,EAAEixE,WAAW,EAAEjxE,EAAEg2E,aAAaj2E,GAClfC,EAAEihF,GAAGlhF,EAAEoK,EAAE,EAAE,MAAMF,EAAEqtE,GAAGrtE,EAAEE,EAAED,EAAE,MAAMlK,EAAEi+D,OAAO/4D,EAAE+E,EAAEg0D,OAAO/4D,EAAElF,EAAEgyD,QAAQ/nD,EAAE/E,EAAEs/C,MAAMxkD,EAAEkF,EAAEs/C,MAAMwa,cAAc+hB,GAAG72E,GAAGhF,EAAE85D,cAAc8hB,GAAG72E,GAAGi3E,GAAGh8E,EAAEnF,IAAqB,GAAG,QAArBA,EAAEkK,EAAE+0D,eAA0B,CAAgB,GAAG,QAAlB30D,EAAEtK,EAAEk2E,YAAuB,CAAC,GAAG7rE,EAAG,OAAW,IAARlF,EAAErR,OAAiBqR,EAAErR,QAAQ,IAAIstF,GAAGl3E,EAAE/E,EAAEgF,EAAE1U,MAAMsB,EAAE,QAAU,OAAOoO,EAAE85D,eAAqB95D,EAAEs/C,MAAMv6C,EAAEu6C,MAAMt/C,EAAErR,OAAO,IAAI,OAAKmM,EAAEmK,EAAEo2D,SAASxgE,EAAEmF,EAAEwf,KAAKva,EAAE82E,GAAG,CAACv8D,KAAK,UAAUmS,SAAS1sB,EAAE0sB,UAAU92B,EAAE,EAAE,OAAMC,EAAEs3E,GAAGt3E,EAAED,EAAEmK,EAAE,OAAQrW,OAAO,EAAEsW,EAAE8zD,OAAO/4D,EAAElF,EAAEi+D,OAAO/4D,EAAEiF,EAAE6nD,QAAQhyD,EAAEkF,EAAEs/C,MAAMr6C,EAAE,KAAY,EAAPjF,EAAEwf,OAAS8yD,GAAGtyE,EAAE+E,EAAEu6C,MACjf,KAAKt6C,GAAGhF,EAAEs/C,MAAMwa,cAAc+hB,GAAG72E,GAAGhF,EAAE85D,cAAc8hB,GAAU9gF,GAAE,GAAG,KAAY,EAAPkF,EAAEwf,MAAQxf,EAAEi8E,GAAGl3E,EAAE/E,EAAEgF,EAAE,WAAW,GAAGw/D,GAAGr/D,GAAGnF,EAAEi8E,GAAGl3E,EAAE/E,EAAEgF,EAAE1U,MAAMsB,EAAE,YAAY,GAAGqT,EAAE,KAAKD,EAAED,EAAEgnE,YAAYK,IAAInnE,EAAE,CAAK,GAAG,QAAPA,EAAEsoE,IAAc,CAAC,OAAOvoE,GAAGA,GAAG,KAAK,EAAElK,EAAE,EAAE,MAAM,KAAK,GAAGA,EAAE,EAAE,MAAM,KAAK,GAAG,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,MAAM,KAAK,MAAM,KAAK,MAAM,KAAK,OAAO,KAAK,OAAO,KAAK,OAAO,KAAK,QAAQ,KAAK,QAAQ,KAAK,QAAQ,KAAK,QAAQ,KAAK,SAAS,KAAK,SAAS,KAAK,SAASA,EAAE,GAAG,MAAM,KAAK,UAAUA,EAC1f,UAAU,MAAM,QAAQA,EAAE,EAAqC,KAAnCmK,EAAE,KAAKnK,GAAGmK,EAAE2jE,eAAe5jE,IAAI,EAAElK,IAASmK,IAAIpK,EAAEo2E,YAAYp2E,EAAEo2E,UAAUhsE,EAAEqpE,GAAGvpE,EAAEE,GAAG,GAAG,CAACg1E,KAAKj6E,EAAEi8E,GAAGl3E,EAAE/E,EAAEgF,EAAE1U,MAAMsB,EAAE,MAAM,MAAM0yE,GAAGn/D,IAAInF,EAAErR,OAAO,IAAIqR,EAAEs/C,MAAMv6C,EAAEu6C,MAAMt/C,EAAEk8E,GAAGjrF,KAAK,KAAK8T,GAAG2/D,GAAGv/D,EAAEnF,GAAGA,EAAE,OAAOgF,EAAEnK,EAAEm2E,YAAY3wE,IAAIiwE,GAAGpL,GAAG//D,GAAGkrE,GAAGrwE,EAAE0b,IAAE,EAAG80D,GAAG,KAAKD,IAAG,EAAG,OAAOvrE,IAAI4qE,GAAGC,MAAME,GAAGH,GAAGC,MAAMG,GAAGJ,GAAGC,MAAMC,GAAGC,GAAG/qE,EAAEjH,GAAGiyE,GAAGhrE,EAAE0zD,SAASoX,GAAG9vE,KAAIA,EAAEg8E,GAAGh8E,EAAEA,EAAE8wE,aAAan/C,WAAYhjC,OAAO,MAAM,OAAOqR,CAAC,CAAC,OAAGlF,GAASmK,EAAEk3E,GAAGp3E,EAAE/E,EAAEiF,EAAE0sB,SAAS1sB,EAAEo2D,SAASr2D,GAAGlK,EAAEkF,EAAEs/C,MAAMzkD,EAAEkK,EAAEu6C,MAAMwa,cAAch/D,EAAEg/D,cACxe,OAAOj/D,EAAEghF,GAAG72E,GAAG,CAACi2E,UAAUpgF,EAAEogF,UAAUj2E,EAAEk2E,UAAU,MAAMpgF,EAAEixE,WAAWhnE,EAAEgnE,YAAY/mE,EAAEhF,EAAE85D,cAAc8hB,GAAG32E,IAAED,EAAEo3E,GAAGr3E,EAAE/E,EAAEiF,EAAE0sB,SAAS3sB,GAAGhF,EAAE85D,cAAc,KAAY90D,EAAC,CAAC,OAAGlK,GAASmK,EAAEk3E,GAAGp3E,EAAE/E,EAAEiF,EAAE0sB,SAAS1sB,EAAEo2D,SAASr2D,GAAGlK,EAAEkF,EAAEs/C,MAAMzkD,EAAEkK,EAAEu6C,MAAMwa,cAAch/D,EAAEg/D,cAAc,OAAOj/D,EAAEghF,GAAG72E,GAAG,CAACi2E,UAAUpgF,EAAEogF,UAAUj2E,EAAEk2E,UAAU,MAAMpgF,EAAEixE,WAAWhnE,EAAEgnE,YAAY/mE,EAAEhF,EAAE85D,cAAc8hB,GAAG32E,IAAED,EAAEo3E,GAAGr3E,EAAE/E,EAAEiF,EAAE0sB,SAAS3sB,GAAGhF,EAAE85D,cAAc,KAAY90D,EAAC,CAC7Z,SAASg3E,GAAGj3E,EAAE/E,GAA8D,OAA3DA,EAAE+7E,GAAG,CAACv8D,KAAK,UAAUmS,SAAS3xB,GAAG+E,EAAEya,KAAK,EAAE,OAAQu5C,OAAOh0D,EAASA,EAAEu6C,MAAMt/C,CAAC,CAAC,SAASo8E,GAAGr3E,EAAE/E,EAAEgF,EAAEC,GAAG,IAAIpK,EAAEkK,EAAEu6C,MAAuL,OAAjLv6C,EAAElK,EAAEiyD,QAAQ9nD,EAAE8sE,GAAGj3E,EAAE,CAAC2kB,KAAK,UAAUmS,SAAS3sB,IAAI,KAAY,EAAPhF,EAAEwf,QAAUxa,EAAEmnE,MAAMlnE,GAAGD,EAAE+zD,OAAO/4D,EAAEgF,EAAE8nD,QAAQ,KAAK,OAAO/nD,IAAkB,QAAdE,EAAEjF,EAAE4wE,YAAoB5wE,EAAE4wE,UAAU,CAAC7rE,GAAG/E,EAAErR,OAAO,IAAIsW,EAAE/U,KAAK6U,IAAW/E,EAAEs/C,MAAMt6C,CAAC,CACjU,SAASm3E,GAAGp3E,EAAE/E,EAAEgF,EAAEC,EAAEpK,GAAG,IAAIC,EAAEkF,EAAEwf,KAAmBta,GAAdH,EAAEA,EAAEu6C,OAAcwN,QAAQ3nD,EAAE,CAACqa,KAAK,SAASmS,SAAS3sB,GAAuO,OAApO,KAAO,EAAFlK,IAAMkF,EAAEs/C,QAAQv6C,IAAGC,EAAEhF,EAAEs/C,OAAQysB,WAAW,EAAE/mE,EAAE8rE,aAAa3rE,EAAEnF,EAAE4wE,UAAU,OAAO5rE,EAAE8sE,GAAG/sE,EAAEI,IAAKk0E,aAA4B,SAAft0E,EAAEs0E,aAAuB,OAAOn0E,EAAED,EAAE6sE,GAAG5sE,EAAED,IAAIA,EAAEmtE,GAAGntE,EAAEnK,EAAED,EAAE,OAAQlM,OAAO,EAAGsW,EAAE8zD,OAAO/4D,EAAEgF,EAAE+zD,OAAO/4D,EAAEgF,EAAE8nD,QAAQ7nD,EAAEjF,EAAEs/C,MAAMt6C,EAASC,CAAC,CAAC,SAASg3E,GAAGl3E,EAAE/E,EAAEgF,EAAEC,GAAwG,OAArG,OAAOA,GAAGssE,GAAGtsE,GAAGqtE,GAAGtyE,EAAE+E,EAAEu6C,MAAM,KAAKt6C,IAAGD,EAAEi3E,GAAGh8E,EAAEA,EAAE8wE,aAAan/C,WAAYhjC,OAAO,EAAEqR,EAAE85D,cAAc,KAAY/0D,CAAC,CAC1c,SAASs3E,GAAGt3E,EAAE/E,EAAEgF,GAAGD,EAAEonE,OAAOnsE,EAAE,IAAIiF,EAAEF,EAAEirD,UAAU,OAAO/qD,IAAIA,EAAEknE,OAAOnsE,GAAGjC,GAAGgH,EAAEg0D,OAAO/4D,EAAEgF,EAAE,CAAC,SAASs3E,GAAGv3E,EAAE/E,EAAEgF,EAAEC,EAAEpK,GAAG,IAAIC,EAAEiK,EAAE+0D,cAAc,OAAOh/D,EAAEiK,EAAE+0D,cAAc,CAACugB,YAAYr6E,EAAEk6E,UAAU,KAAKE,mBAAmB,EAAEl7B,KAAKj6C,EAAEy0E,KAAK10E,EAAEy0E,SAAS5+E,IAAIC,EAAEu/E,YAAYr6E,EAAElF,EAAEo/E,UAAU,KAAKp/E,EAAEs/E,mBAAmB,EAAEt/E,EAAEokD,KAAKj6C,EAAEnK,EAAE4+E,KAAK10E,EAAElK,EAAE2+E,SAAS5+E,EAAE,CACnU,SAAS0hF,GAAGx3E,EAAE/E,EAAEgF,GAAG,IAAIC,EAAEjF,EAAE8wE,aAAaj2E,EAAEoK,EAAEkuE,YAAYr4E,EAAEmK,EAAEy0E,KAAqC,GAAhCntF,GAAEwY,EAAE/E,EAAEiF,EAAE0sB,SAAS3sB,GAAkB,KAAO,GAAtBC,EAAEguE,GAAEloD,UAAqB9lB,EAAI,EAAFA,EAAI,EAAEjF,EAAErR,OAAO,QAAQ,CAAC,GAAG,OAAOoW,GAAG,KAAa,IAARA,EAAEpW,OAAWoW,EAAE,IAAIA,EAAE/E,EAAEs/C,MAAM,OAAOv6C,GAAG,CAAC,GAAG,KAAKA,EAAEk6D,IAAI,OAAOl6D,EAAE+0D,eAAeuiB,GAAGt3E,EAAEC,EAAEhF,QAAQ,GAAG,KAAK+E,EAAEk6D,IAAIod,GAAGt3E,EAAEC,EAAEhF,QAAQ,GAAG,OAAO+E,EAAEu6C,MAAM,CAACv6C,EAAEu6C,MAAMyZ,OAAOh0D,EAAEA,EAAEA,EAAEu6C,MAAM,QAAQ,CAAC,GAAGv6C,IAAI/E,EAAE,MAAM+E,EAAE,KAAK,OAAOA,EAAE+nD,SAAS,CAAC,GAAG,OAAO/nD,EAAEg0D,QAAQh0D,EAAEg0D,SAAS/4D,EAAE,MAAM+E,EAAEA,EAAEA,EAAEg0D,MAAM,CAACh0D,EAAE+nD,QAAQiM,OAAOh0D,EAAEg0D,OAAOh0D,EAAEA,EAAE+nD,OAAO,CAAC7nD,GAAG,CAAC,CAAQ,GAAPpI,GAAEo2E,GAAEhuE,GAAM,KAAY,EAAPjF,EAAEwf,MAAQxf,EAAE85D,cAC9e,UAAU,OAAOj/D,GAAG,IAAK,WAAqB,IAAVmK,EAAEhF,EAAEs/C,MAAUzkD,EAAE,KAAK,OAAOmK,GAAiB,QAAdD,EAAEC,EAAEgrD,YAAoB,OAAOkjB,GAAGnuE,KAAKlK,EAAEmK,GAAGA,EAAEA,EAAE8nD,QAAY,QAAJ9nD,EAAEnK,IAAYA,EAAEmF,EAAEs/C,MAAMt/C,EAAEs/C,MAAM,OAAOzkD,EAAEmK,EAAE8nD,QAAQ9nD,EAAE8nD,QAAQ,MAAMwvB,GAAGt8E,GAAE,EAAGnF,EAAEmK,EAAElK,GAAG,MAAM,IAAK,YAA6B,IAAjBkK,EAAE,KAAKnK,EAAEmF,EAAEs/C,MAAUt/C,EAAEs/C,MAAM,KAAK,OAAOzkD,GAAG,CAAe,GAAG,QAAjBkK,EAAElK,EAAEm1D,YAAuB,OAAOkjB,GAAGnuE,GAAG,CAAC/E,EAAEs/C,MAAMzkD,EAAE,KAAK,CAACkK,EAAElK,EAAEiyD,QAAQjyD,EAAEiyD,QAAQ9nD,EAAEA,EAAEnK,EAAEA,EAAEkK,CAAC,CAACu3E,GAAGt8E,GAAE,EAAGgF,EAAE,KAAKlK,GAAG,MAAM,IAAK,WAAWwhF,GAAGt8E,GAAE,EAAG,KAAK,UAAK,GAAQ,MAAM,QAAQA,EAAE85D,cAAc,KAAK,OAAO95D,EAAEs/C,KAAK,CAC7d,SAASo7B,GAAG31E,EAAE/E,EAAEgF,GAAyD,GAAtD,OAAOD,IAAI/E,EAAEisE,aAAalnE,EAAEknE,cAAc2B,IAAI5tE,EAAEmsE,MAAS,KAAKnnE,EAAEhF,EAAE+rE,YAAY,OAAO,KAAK,GAAG,OAAOhnE,GAAG/E,EAAEs/C,QAAQv6C,EAAEu6C,MAAM,MAAMhvD,MAAMsB,EAAE,MAAM,GAAG,OAAOoO,EAAEs/C,MAAM,CAA4C,IAAjCt6C,EAAE8sE,GAAZ/sE,EAAE/E,EAAEs/C,MAAav6C,EAAE+rE,cAAc9wE,EAAEs/C,MAAMt6C,EAAMA,EAAE+zD,OAAO/4D,EAAE,OAAO+E,EAAE+nD,SAAS/nD,EAAEA,EAAE+nD,SAAQ9nD,EAAEA,EAAE8nD,QAAQglB,GAAG/sE,EAAEA,EAAE+rE,eAAgB/X,OAAO/4D,EAAEgF,EAAE8nD,QAAQ,IAAI,CAAC,OAAO9sD,EAAEs/C,KAAK,CAGpV,SAASk9B,GAAGz3E,EAAE/E,GAAS,OAANowE,GAAGpwE,GAAUA,EAAEi/D,KAAK,KAAK,EAAE,OAAO0I,GAAE3nE,EAAEvQ,OAAOo4E,KAAiB,OAAZ9iE,EAAE/E,EAAErR,QAAeqR,EAAErR,OAAS,MAAHoW,EAAS,IAAI/E,GAAG,KAAK,KAAK,EAAE,OAAO8yE,KAAKl2E,GAAE+B,IAAG/B,GAAE8B,IAAG20E,KAAe,KAAO,OAAjBtuE,EAAE/E,EAAErR,SAAqB,KAAO,IAAFoW,IAAQ/E,EAAErR,OAAS,MAAHoW,EAAS,IAAI/E,GAAG,KAAK,KAAK,EAAE,OAAOgzE,GAAGhzE,GAAG,KAAK,KAAK,GAA0B,GAAvBpD,GAAEq2E,IAAwB,QAArBluE,EAAE/E,EAAE85D,gBAA2B,OAAO/0D,EAAEgsE,WAAW,CAAC,GAAG,OAAO/wE,EAAEgwD,UAAU,MAAM1/D,MAAMsB,EAAE,MAAM0/E,IAAI,CAAW,OAAS,OAAnBvsE,EAAE/E,EAAErR,QAAsBqR,EAAErR,OAAS,MAAHoW,EAAS,IAAI/E,GAAG,KAAK,KAAK,GAAG,OAAOpD,GAAEq2E,IAAG,KAAK,KAAK,EAAE,OAAOH,KAAK,KAAK,KAAK,GAAG,OAAOhH,GAAG9rE,EAAEvQ,KAAKwqE,UAAU,KAAK,KAAK,GAAG,KAAK,GAAG,OAAOqgB,KACxgB,KAAyB,QAAQ,OAAO,KAAK,CAAC,IAAImC,IAAG,EAAGC,IAAG,EAAGC,GAAG,oBAAoBC,QAAQA,QAAQnkC,IAAIokC,GAAE,KAAK,SAASC,GAAG/3E,EAAE/E,GAAG,IAAIgF,EAAED,EAAEulB,IAAI,GAAG,OAAOtlB,EAAE,GAAG,oBAAoBA,EAAE,IAAIA,EAAE,KAAK,CAAC,MAAMC,GAAGrG,GAAEmG,EAAE/E,EAAEiF,EAAE,MAAMD,EAAE+lB,QAAQ,IAAI,CAAC,SAASgyD,GAAGh4E,EAAE/E,EAAEgF,GAAG,IAAIA,GAAG,CAAC,MAAMC,GAAGrG,GAAEmG,EAAE/E,EAAEiF,EAAE,CAAC,CAAC,IAAI+3E,IAAG,EAE9I,SAASC,GAAGl4E,EAAE/E,EAAEgF,GAAG,IAAIC,EAAEjF,EAAE0sE,YAAyC,GAAG,QAAhCznE,EAAE,OAAOA,EAAEA,EAAE6wE,WAAW,MAAiB,CAAC,IAAIj7E,EAAEoK,EAAEA,EAAE+1C,KAAK,EAAE,CAAC,IAAIngD,EAAEokE,IAAIl6D,KAAKA,EAAE,CAAC,IAAIjK,EAAED,EAAE4+C,QAAQ5+C,EAAE4+C,aAAQ,OAAO,IAAS3+C,GAAGiiF,GAAG/8E,EAAEgF,EAAElK,EAAE,CAACD,EAAEA,EAAEmgD,IAAI,OAAOngD,IAAIoK,EAAE,CAAC,CAAC,SAASi4E,GAAGn4E,EAAE/E,GAAgD,GAAG,QAAhCA,EAAE,QAAlBA,EAAEA,EAAE0sE,aAAuB1sE,EAAE81E,WAAW,MAAiB,CAAC,IAAI9wE,EAAEhF,EAAEA,EAAEg7C,KAAK,EAAE,CAAC,IAAIh2C,EAAEi6D,IAAIl6D,KAAKA,EAAE,CAAC,IAAIE,EAAED,EAAElV,OAAOkV,EAAEy0C,QAAQx0C,GAAG,CAACD,EAAEA,EAAEg2C,IAAI,OAAOh2C,IAAIhF,EAAE,CAAC,CAChf,SAASm9E,GAAGp4E,GAAG,IAAI/E,EAAE+E,EAAEulB,IAAI,GAAG,OAAOtqB,EAAE,CAAC,IAAIgF,EAAED,EAAEkrD,UAAU,GAAmB,IAAZlrD,EAAEk6D,IAAYl6D,EAAE26D,EAAG16D,QAAiBD,EAAEC,EAAE,oBAAoBhF,EAAEA,EAAE+E,GAAG/E,EAAE+qB,QAAQhmB,CAAC,CAAC,CAChJ,SAASq4E,GAAGr4E,EAAE/E,EAAEgF,GAAG,GAAGylE,IAAI,oBAAoBA,GAAG4S,qBAAqB,IAAI5S,GAAG4S,qBAAqB7S,GAAGxqE,EAAE,CAAC,MAAMkF,GAAG,CAAC,OAAOlF,EAAEi/D,KAAK,KAAK,EAAE,KAAK,GAAG,KAAK,GAAG,KAAK,GAAmB,GAAG,QAAnBl6D,EAAE/E,EAAE0sE,cAAyC,QAAf3nE,EAAEA,EAAE+wE,YAAqB,CAAC,IAAI7wE,EAAEF,EAAEA,EAAEi2C,KAAK,EAAE,CAAC,IAAIngD,EAAEoK,EAAEnK,EAAED,EAAE4+C,QAAQ5+C,EAAEA,EAAEokE,SAAI,IAASnkE,IAAI,KAAO,EAAFD,IAAe,KAAO,EAAFA,KAAfkiF,GAAG/8E,EAAEgF,EAAElK,GAAyBmK,EAAEA,EAAE+1C,IAAI,OAAO/1C,IAAIF,EAAE,CAAC,MAAM,KAAK,EAAwB,GAAtB+3E,GAAG98E,EAAEgF,GAAoB,oBAAjBD,EAAE/E,EAAEiwD,WAAmCqtB,qBAAqB,IAAIv4E,EAAErM,MAAMsH,EAAE6+C,cAAc95C,EAAEhU,MAAMiP,EAAE85D,cAAc/0D,EAAEu4E,sBAAsB,CAAC,MAAMp4E,GAAGtG,GAAEoB,EAC3fgF,EAAEE,EAAE,CAAC,MAAM,KAAK,EAAE43E,GAAG98E,EAAEgF,GAAG,MAAM,KAAK,EAAEy7D,EAAG8c,GAAGx4E,EAAE/E,EAAEgF,GAAG07D,GAAIA,IAAK1gE,EAAEA,EAAEiwD,UAAUgiB,cAAcjtE,EAAEo+D,GAAGpjE,GAAG0jE,GAAG1jE,EAAEgF,IAAI,CAAC,SAASw4E,GAAGz4E,EAAE/E,EAAEgF,GAAG,IAAI,IAAIC,EAAEjF,IAAI,GAAGo9E,GAAGr4E,EAAEE,EAAED,GAAG,OAAOC,EAAEq6C,OAAOmhB,GAAI,IAAIx7D,EAAEg6D,IAAI,CAAC,GAAGh6D,IAAIjF,EAAE,MAAM,KAAK,OAAOiF,EAAE6nD,SAAS,CAAC,GAAG,OAAO7nD,EAAE8zD,QAAQ9zD,EAAE8zD,SAAS/4D,EAAE,OAAOiF,EAAEA,EAAE8zD,MAAM,CAAC9zD,EAAE6nD,QAAQiM,OAAO9zD,EAAE8zD,OAAO9zD,EAAEA,EAAE6nD,OAAO,MAAM7nD,EAAEq6C,MAAMyZ,OAAO9zD,EAAEA,EAAEA,EAAEq6C,KAAK,CACvV,SAASm+B,GAAG14E,GAAG,IAAI/E,EAAE+E,EAAEirD,UAAU,OAAOhwD,IAAI+E,EAAEirD,UAAU,KAAKytB,GAAGz9E,IAAI+E,EAAEu6C,MAAM,KAAKv6C,EAAE6rE,UAAU,KAAK7rE,EAAE+nD,QAAQ,KAAK,IAAI/nD,EAAEk6D,MAAoB,QAAdj/D,EAAE+E,EAAEkrD,YAAoB8Q,GAAG/gE,IAAI+E,EAAEkrD,UAAU,KAAKlrD,EAAEg0D,OAAO,KAAKh0D,EAAEknE,aAAa,KAAKlnE,EAAE85C,cAAc,KAAK95C,EAAE+0D,cAAc,KAAK/0D,EAAE+rE,aAAa,KAAK/rE,EAAEkrD,UAAU,KAAKlrD,EAAE2nE,YAAY,IAAI,CAAC,SAASgR,GAAG34E,GAAG,OAAO,IAAIA,EAAEk6D,KAAK,IAAIl6D,EAAEk6D,KAAK,IAAIl6D,EAAEk6D,GAAG,CACtW,SAAS0e,GAAG54E,GAAGA,EAAE,OAAO,CAAC,KAAK,OAAOA,EAAE+nD,SAAS,CAAC,GAAG,OAAO/nD,EAAEg0D,QAAQ2kB,GAAG34E,EAAEg0D,QAAQ,OAAO,KAAKh0D,EAAEA,EAAEg0D,MAAM,CAA2B,IAA1Bh0D,EAAE+nD,QAAQiM,OAAOh0D,EAAEg0D,OAAWh0D,EAAEA,EAAE+nD,QAAQ,IAAI/nD,EAAEk6D,KAAK,IAAIl6D,EAAEk6D,KAAK,KAAKl6D,EAAEk6D,KAAK,CAAC,GAAW,EAARl6D,EAAEpW,MAAQ,SAASoW,EAAE,GAAG,OAAOA,EAAEu6C,OAAO,IAAIv6C,EAAEk6D,IAAI,SAASl6D,EAAOA,EAAEu6C,MAAMyZ,OAAOh0D,EAAEA,EAAEA,EAAEu6C,KAAK,CAAC,KAAa,EAARv6C,EAAEpW,OAAS,OAAOoW,EAAEkrD,SAAS,CAAC,CACzT,SAAS2tB,GAAG74E,GAAG,GAAG07D,EAAG,CAAC17D,EAAE,CAAC,IAAI,IAAI/E,EAAE+E,EAAEg0D,OAAO,OAAO/4D,GAAG,CAAC,GAAG09E,GAAG19E,GAAG,MAAM+E,EAAE/E,EAAEA,EAAE+4D,MAAM,CAAC,MAAMzoE,MAAMsB,EAAE,KAAM,CAAC,IAAIoT,EAAEhF,EAAE,OAAOgF,EAAEi6D,KAAK,KAAK,EAAEj/D,EAAEgF,EAAEirD,UAAkB,GAARjrD,EAAErW,QAAWi0E,GAAG5iE,GAAGgF,EAAErW,QAAQ,IAAYkvF,GAAG94E,EAAXC,EAAE24E,GAAG54E,GAAU/E,GAAG,MAAM,KAAK,EAAE,KAAK,EAAEA,EAAEgF,EAAEirD,UAAUgiB,cAAsB6L,GAAG/4E,EAAXC,EAAE24E,GAAG54E,GAAU/E,GAAG,MAAM,QAAQ,MAAM1P,MAAMsB,EAAE,MAAO,CAAC,CAAC,SAASksF,GAAG/4E,EAAE/E,EAAEgF,GAAG,IAAIC,EAAEF,EAAEk6D,IAAI,GAAG,IAAIh6D,GAAG,IAAIA,EAAEF,EAAEA,EAAEkrD,UAAUjwD,EAAEyiE,GAAGz9D,EAAED,EAAE/E,GAAGmiE,GAAGn9D,EAAED,QAAQ,GAAG,IAAIE,GAAc,QAAVF,EAAEA,EAAEu6C,OAAgB,IAAIw+B,GAAG/4E,EAAE/E,EAAEgF,GAAGD,EAAEA,EAAE+nD,QAAQ,OAAO/nD,GAAG+4E,GAAG/4E,EAAE/E,EAAEgF,GAAGD,EAAEA,EAAE+nD,OAAO,CAC3d,SAAS+wB,GAAG94E,EAAE/E,EAAEgF,GAAG,IAAIC,EAAEF,EAAEk6D,IAAI,GAAG,IAAIh6D,GAAG,IAAIA,EAAEF,EAAEA,EAAEkrD,UAAUjwD,EAAEwiE,GAAGx9D,EAAED,EAAE/E,GAAGkiE,GAAGl9D,EAAED,QAAQ,GAAG,IAAIE,GAAc,QAAVF,EAAEA,EAAEu6C,OAAgB,IAAIu+B,GAAG94E,EAAE/E,EAAEgF,GAAGD,EAAEA,EAAE+nD,QAAQ,OAAO/nD,GAAG84E,GAAG94E,EAAE/E,EAAEgF,GAAGD,EAAEA,EAAE+nD,OAAO,CAC9K,SAASywB,GAAGx4E,EAAE/E,EAAEgF,GAAG,IAAI,IAAalK,EAAEoK,EAAXD,EAAEjF,EAAEnF,GAAE,IAAS,CAAC,IAAIA,EAAE,CAACA,EAAEoK,EAAE8zD,OAAOh0D,EAAE,OAAO,CAAC,GAAG,OAAOlK,EAAE,MAAMvK,MAAMsB,EAAE,MAAoB,OAAdkJ,EAAED,EAAEo1D,UAAiBp1D,EAAEokE,KAAK,KAAK,EAAE/5D,GAAE,EAAG,MAAMH,EAAE,KAAK,EAAiC,KAAK,EAAEjK,EAAEA,EAAEm3E,cAAc/sE,GAAE,EAAG,MAAMH,EAAElK,EAAEA,EAAEk+D,MAAM,CAACl+D,GAAE,CAAE,CAAC,GAAG,IAAIoK,EAAEg6D,KAAK,IAAIh6D,EAAEg6D,IAAIue,GAAGz4E,EAAEE,EAAED,GAAGE,EAAEy9D,GAAG7nE,EAAEmK,EAAEgrD,WAAWyS,GAAG5nE,EAAEmK,EAAEgrD,gBAAgB,GAAG,KAAKhrD,EAAEg6D,IAAI/5D,EAAEghE,GAAGprE,EAAEmK,EAAEgrD,WAAW+V,GAAGlrE,EAAEmK,EAAEgrD,gBAAgB,GAAG,IAAIhrD,EAAEg6D,KAAK,GAAG,OAAOh6D,EAAEq6C,MAAM,CAACxkD,EAAEmK,EAAEgrD,UAAUgiB,cAAc/sE,GAAE,EAAGD,EAAEq6C,MAAMyZ,OAAO9zD,EAAEA,EAAEA,EAAEq6C,MAAM,QAAQ,OAAO,GAAG89B,GAAGr4E,EAAEE,EAAED,GAAG,OAClfC,EAAEq6C,MAAM,CAACr6C,EAAEq6C,MAAMyZ,OAAO9zD,EAAEA,EAAEA,EAAEq6C,MAAM,QAAQ,CAAC,GAAGr6C,IAAIjF,EAAE,MAAM,KAAK,OAAOiF,EAAE6nD,SAAS,CAAC,GAAG,OAAO7nD,EAAE8zD,QAAQ9zD,EAAE8zD,SAAS/4D,EAAE,OAAkB,KAAXiF,EAAEA,EAAE8zD,QAAakG,MAAMpkE,GAAE,EAAG,CAACoK,EAAE6nD,QAAQiM,OAAO9zD,EAAE8zD,OAAO9zD,EAAEA,EAAE6nD,OAAO,CAAC,CAC/L,SAASixB,GAAGh5E,EAAE/E,GAAG,GAAGygE,EAAG,CAAC,OAAOzgE,EAAEi/D,KAAK,KAAK,EAAE,KAAK,GAAG,KAAK,GAAG,KAAK,GAA6C,OAA1Cge,GAAG,EAAEj9E,EAAEA,EAAE+4D,QAAQmkB,GAAG,EAAEl9E,QAAGi9E,GAAG,EAAEj9E,EAAEA,EAAE+4D,QAAe,KAAK,EAC3H,KAAK,GAAoD,KAAK,GAAG,OADmE,KAAK,EAAE,IAAI/zD,EAAEhF,EAAEiwD,UAAU,GAAG,MAAMjrD,EAAE,CAAC,IAAIC,EAAEjF,EAAE6+C,cAAc95C,EAAE,OAAOA,EAAEA,EAAE85C,cAAc55C,EAAE,IAAIpK,EAAEmF,EAAEvQ,KAAKqL,EAAEkF,EAAE0sE,YAAY1sE,EAAE0sE,YAAY,KAAK,OAAO5xE,GAAGynE,GAAGv9D,EAAElK,EAAED,EAAEkK,EAAEE,EAAEjF,EAAE,CAAC,OAAO,KAAK,EAAE,GAAG,OAAOA,EAAEiwD,UAAU,MAAM3/D,MAAMsB,EAAE,MAAqE,OAA/DoT,EAAEhF,EAAE6+C,mBAAcujB,GAAGpiE,EAAEiwD,UAAU,OAAOlrD,EAAEA,EAAE85C,cAAc75C,EAAEA,GAAU,KAAK,EAA2E,YAAzE3E,GAAG,OAAO0E,GAAGA,EAAE+0D,cAAcggB,cAAclU,GAAG5lE,EAAEiwD,UAAUgiB,gBACtd,KAAK,GAAgB,KAAK,GAAS,YAAN+L,GAAGh+E,GAAyB,MAAM1P,MAAMsB,EAAE,KAAM,CAAC,OAAOoO,EAAEi/D,KAAK,KAAK,EAAE,KAAK,GAAG,KAAK,GAAG,KAAK,GAA6C,OAA1Cge,GAAG,EAAEj9E,EAAEA,EAAE+4D,QAAQmkB,GAAG,EAAEl9E,QAAGi9E,GAAG,EAAEj9E,EAAEA,EAAE+4D,QAAe,KAAK,GAA0I,KAAK,GAAG,KAAK,GAAG,OAAhJ,KAAK,GAAgB,KAAK,GAAS,YAANilB,GAAGh+E,GAAU,KAAK,EAAEK,GAAG,OAAO0E,GAAGA,EAAE+0D,cAAcggB,cAAclU,GAAG5lE,EAAEiwD,UAAUgiB,eAA4CltE,EAAE,GAAG27D,EAAG,CAAC,OAAO1gE,EAAEi/D,KAAK,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,MAAMl6D,EAAE,KAAK,EAAE,KAAK,EAAE/E,EAAEA,EAAEiwD,UAAUyT,GAAG1jE,EAAEiyE,cAAcjyE,EAAEu5E,iBAAiB,MAAMx0E,EAAE,MAAMzU,MAAMsB,EAAE,KAAM,CAAC,CACpf,SAASosF,GAAGj5E,GAAG,IAAI/E,EAAE+E,EAAE2nE,YAAY,GAAG,OAAO1sE,EAAE,CAAC+E,EAAE2nE,YAAY,KAAK,IAAI1nE,EAAED,EAAEkrD,UAAU,OAAOjrD,IAAIA,EAAED,EAAEkrD,UAAU,IAAI0sB,IAAI38E,EAAEuuB,SAAQ,SAASvuB,GAAG,IAAIiF,EAAEg5E,GAAGhtF,KAAK,KAAK8T,EAAE/E,GAAGgF,EAAEo/C,IAAIpkD,KAAKgF,EAAE0Q,IAAI1V,GAAGA,EAAE87C,KAAK72C,EAAEA,GAAG,GAAE,CAAC,CAIyO,SAASi5E,GAAGn5E,EAAE/E,EAAEgF,GAAG63E,GAAE93E,EAAEo5E,GAAGp5E,EAAE/E,EAAEgF,EAAE,CAChd,SAASm5E,GAAGp5E,EAAE/E,EAAEgF,GAAG,IAAI,IAAIC,EAAE,KAAY,EAAPF,EAAEya,MAAQ,OAAOq9D,IAAG,CAAC,IAAIhiF,EAAEgiF,GAAE/hF,EAAED,EAAEykD,MAAM,GAAG,KAAKzkD,EAAEokE,KAAKh6D,EAAE,CAAC,IAAIC,EAAE,OAAOrK,EAAEi/D,eAAe2iB,GAAG,IAAIv3E,EAAE,CAAC,IAAIC,EAAEtK,EAAEm1D,UAAU1vD,EAAE,OAAO6E,GAAG,OAAOA,EAAE20D,eAAe4iB,GAAGv3E,EAAEs3E,GAAG,IAAIz4E,EAAE04E,GAAQ,GAALD,GAAGv3E,GAAMw3E,GAAGp8E,KAAK0D,EAAE,IAAI64E,GAAEhiF,EAAE,OAAOgiF,IAAOv8E,GAAJ4E,EAAE23E,IAAMv9B,MAAM,KAAKp6C,EAAE+5D,KAAK,OAAO/5D,EAAE40D,cAAcskB,GAAGvjF,GAAG,OAAOyF,GAAGA,EAAEy4D,OAAO7zD,EAAE23E,GAAEv8E,GAAG89E,GAAGvjF,GAAG,KAAK,OAAOC,GAAG+hF,GAAE/hF,EAAEqjF,GAAGrjF,EAAEkF,EAAEgF,GAAGlK,EAAEA,EAAEgyD,QAAQ+vB,GAAEhiF,EAAE4hF,GAAGt3E,EAAEu3E,GAAG14E,CAAC,CAACq6E,GAAGt5E,EAAM,MAAM,KAAoB,KAAflK,EAAEw+E,eAAoB,OAAOv+E,GAAGA,EAAEi+D,OAAOl+D,EAAEgiF,GAAE/hF,GAAGujF,GAAGt5E,EAAM,CAAC,CAC3c,SAASs5E,GAAGt5E,GAAG,KAAK,OAAO83E,IAAG,CAAC,IAAI78E,EAAE68E,GAAE,GAAG,KAAa,KAAR78E,EAAErR,OAAY,CAAC,IAAIqW,EAAEhF,EAAEgwD,UAAU,IAAI,GAAG,KAAa,KAARhwD,EAAErR,OAAY,OAAOqR,EAAEi/D,KAAK,KAAK,EAAE,KAAK,GAAG,KAAK,GAAGyd,IAAIQ,GAAG,EAAEl9E,GAAG,MAAM,KAAK,EAAE,IAAIiF,EAAEjF,EAAEiwD,UAAU,GAAW,EAARjwD,EAAErR,QAAU+tF,GAAG,GAAG,OAAO13E,EAAEC,EAAEsqE,wBAAwB,CAAC,IAAI10E,EAAEmF,EAAE2wE,cAAc3wE,EAAEvQ,KAAKuV,EAAE65C,cAAcusB,GAAGprE,EAAEvQ,KAAKuV,EAAE65C,eAAe55C,EAAEu2E,mBAAmB3gF,EAAEmK,EAAE80D,cAAc70D,EAAEq5E,oCAAoC,CAAC,IAAIxjF,EAAEkF,EAAE0sE,YAAY,OAAO5xE,GAAG+yE,GAAG7tE,EAAElF,EAAEmK,GAAG,MAAM,KAAK,EAAE,IAAIC,EAAElF,EAAE0sE,YAAY,GAAG,OAAOxnE,EAAE,CAAQ,GAAPF,EAAE,KAAQ,OAAOhF,EAAEs/C,MAAM,OAAOt/C,EAAEs/C,MAAM2f,KAAK,KAAK,EAAEj6D,EACnhB06D,EAAG1/D,EAAEs/C,MAAM2Q,WAAW,MAAM,KAAK,EAAEjrD,EAAEhF,EAAEs/C,MAAM2Q,UAAU4d,GAAG7tE,EAAEkF,EAAEF,EAAE,CAAC,MAAM,KAAK,EAAE,IAAIG,EAAEnF,EAAEiwD,UAAU,OAAOjrD,GAAW,EAARhF,EAAErR,OAAS2zE,GAAGn9D,EAAEnF,EAAEvQ,KAAKuQ,EAAE6+C,cAAc7+C,GAAG,MAAM,KAAK,EAAQ,KAAK,EAAQ,KAAK,GAA4J,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,MAA3L,KAAK,GAAG,GAAGK,GAAG,OAAOL,EAAE85D,cAAc,CAAC,IAAIx5D,EAAEN,EAAEgwD,UAAU,GAAG,OAAO1vD,EAAE,CAAC,IAAI0D,EAAE1D,EAAEw5D,cAAc,GAAG,OAAO91D,EAAE,CAAC,IAAIrU,EAAEqU,EAAE+sE,WAAW,OAAOphF,GAAGm2E,GAAGn2E,EAAE,CAAC,CAAC,CAAC,MAAoD,QAAQ,MAAMW,MAAMsB,EAAE,MAAO8qF,IAAY,IAAR18E,EAAErR,OAAWwuF,GAAGn9E,EAAE,CAAC,MAAMxB,GAAGI,GAAEoB,EAAEA,EAAE+4D,OAAOv6D,EAAE,CAAC,CAAC,GAAGwB,IAAI+E,EAAE,CAAC83E,GAAE,KAAK,KAAK,CAAa,GAAG,QAAf73E,EAAEhF,EAAE8sD,SAC1e,CAAC9nD,EAAE+zD,OAAO/4D,EAAE+4D,OAAO8jB,GAAE73E,EAAE,KAAK,CAAC63E,GAAE78E,EAAE+4D,MAAM,CAAC,CAAC,SAASwlB,GAAGx5E,GAAG,KAAK,OAAO83E,IAAG,CAAC,IAAI78E,EAAE68E,GAAE,GAAG78E,IAAI+E,EAAE,CAAC83E,GAAE,KAAK,KAAK,CAAC,IAAI73E,EAAEhF,EAAE8sD,QAAQ,GAAG,OAAO9nD,EAAE,CAACA,EAAE+zD,OAAO/4D,EAAE+4D,OAAO8jB,GAAE73E,EAAE,KAAK,CAAC63E,GAAE78E,EAAE+4D,MAAM,CAAC,CAC7K,SAASqlB,GAAGr5E,GAAG,KAAK,OAAO83E,IAAG,CAAC,IAAI78E,EAAE68E,GAAE,IAAI,OAAO78E,EAAEi/D,KAAK,KAAK,EAAE,KAAK,GAAG,KAAK,GAAG,IAAIj6D,EAAEhF,EAAE+4D,OAAO,IAAImkB,GAAG,EAAEl9E,EAAE,CAAC,MAAMM,GAAG1B,GAAEoB,EAAEgF,EAAE1E,EAAE,CAAC,MAAM,KAAK,EAAE,IAAI2E,EAAEjF,EAAEiwD,UAAU,GAAG,oBAAoBhrD,EAAEsqE,kBAAkB,CAAC,IAAI10E,EAAEmF,EAAE+4D,OAAO,IAAI9zD,EAAEsqE,mBAAmB,CAAC,MAAMjvE,GAAG1B,GAAEoB,EAAEnF,EAAEyF,EAAE,CAAC,CAAC,IAAIxF,EAAEkF,EAAE+4D,OAAO,IAAIokB,GAAGn9E,EAAE,CAAC,MAAMM,GAAG1B,GAAEoB,EAAElF,EAAEwF,EAAE,CAAC,MAAM,KAAK,EAAE,IAAI4E,EAAElF,EAAE+4D,OAAO,IAAIokB,GAAGn9E,EAAE,CAAC,MAAMM,GAAG1B,GAAEoB,EAAEkF,EAAE5E,EAAE,EAAE,CAAC,MAAMA,GAAG1B,GAAEoB,EAAEA,EAAE+4D,OAAOz4D,EAAE,CAAC,GAAGN,IAAI+E,EAAE,CAAC83E,GAAE,KAAK,KAAK,CAAC,IAAI13E,EAAEnF,EAAE8sD,QAAQ,GAAG,OAAO3nD,EAAE,CAACA,EAAE4zD,OAAO/4D,EAAE+4D,OAAO8jB,GAAE13E,EAAE,KAAK,CAAC03E,GAAE78E,EAAE+4D,MAAM,CAAC,CAC7d,IAAIylB,GAAG,EAAEC,GAAG,EAAEC,GAAG,EAAEC,GAAG,EAAEC,GAAG,EAAE,GAAG,oBAAoB/jC,QAAQA,OAAOgjB,IAAI,CAAC,IAAIghB,GAAGhkC,OAAOgjB,IAAI2gB,GAAGK,GAAG,sBAAsBJ,GAAGI,GAAG,6BAA6BH,GAAGG,GAAG,iBAAiBF,GAAGE,GAAG,oBAAoBD,GAAGC,GAAG,gBAAgB,CAAC,SAASC,GAAG/5E,GAAG,IAAI/E,EAAE2gE,EAAG57D,GAAG,GAAG,MAAM/E,EAAE,CAAC,GAAG,kBAAkBA,EAAE6+C,cAAc,iBAAiB,MAAMvuD,MAAMsB,EAAE,MAAM,OAAOoO,CAAC,CAAS,GAAG,QAAX+E,EAAEgQ,GAAGhQ,IAAe,MAAMzU,MAAMsB,EAAE,MAAM,OAAOmT,EAAEkrD,UAAUllC,OAAO,CAC7Z,SAASg0D,GAAGh6E,EAAE/E,GAAG,OAAOA,EAAE6+D,UAAU,KAAK2f,GAAG,GAAGz5E,EAAEtV,OAAOuQ,EAAEvS,MAAM,OAAM,EAAG,MAAM,KAAKgxF,GAAG15E,EAAE,CAAC/E,EAAEA,EAAEvS,MAAMsX,EAAE,CAACA,EAAE,GAAG,IAAI,IAAIC,EAAE,EAAEA,EAAED,EAAE5U,QAAQ,CAAC,IAAI8U,EAAEF,EAAEC,KAAKnK,EAAEkK,EAAEC,KAAKlK,EAAEkF,EAAEnF,GAAG,GAAG,IAAIoK,EAAEg6D,MAAMyC,GAAGz8D,GAAG,CAAC,KAAK,MAAMnK,GAAGikF,GAAG95E,EAAEnK,IAAQA,EAAEkF,IAANnF,GAAW,GAAGA,IAAImF,EAAE7P,OAAO,CAAC6P,GAAE,EAAG,MAAM+E,CAAC,CAAM,IAAIE,EAAEA,EAAEq6C,MAAM,OAAOr6C,GAAGF,EAAE7U,KAAK+U,EAAEpK,GAAGoK,EAAEA,EAAE6nD,OAAO,CAAC,CAAC9sD,GAAE,CAAE,CAAC,OAAOA,EAAE,KAAK0+E,GAAG,GAAG,IAAI35E,EAAEk6D,KAAK2C,GAAG78D,EAAEkrD,UAAUjwD,EAAEvS,OAAO,OAAM,EAAG,MAAM,KAAKmxF,GAAG,IAAG,IAAI75E,EAAEk6D,KAAK,IAAIl6D,EAAEk6D,OAAe,QAARl6D,EAAEy8D,GAAGz8D,KAAa,GAAGA,EAAE5P,QAAQ6K,EAAEvS,QAAO,OAAM,EAAG,MAAM,KAAKkxF,GAAG,GAAG,IAAI55E,EAAEk6D,MACpe,kBAD0el6D,EAAEA,EAAE85C,cAAc,mBACve95C,EAAEi6E,gBAAgBh/E,EAAEvS,MAAMuxF,eAAe,OAAM,EAAG,MAAM,QAAQ,MAAM1uF,MAAMsB,EAAE,MAAO,OAAM,CAAE,CAAC,SAASqtF,GAAGl6E,GAAG,OAAOA,EAAE85D,UAAU,KAAK2f,GAAG,MAAM,KAAKrwE,EAAGpJ,EAAEtX,QAAQ,WAAW,IAAI,KAAKgxF,GAAG,MAAM,SAASQ,GAAGl6E,IAAI,IAAI,IAAI,KAAK25E,GAAG,MAAM,UAAU35E,EAAEtX,MAAM,KAAK,KAAKmxF,GAAG,MAAM,IAAI75E,EAAEtX,MAAM,IAAI,KAAKkxF,GAAG,MAAM,mBAAmB55E,EAAEtX,MAAM,KAAK,QAAQ,MAAM6C,MAAMsB,EAAE,MAAO,CACxX,SAASstF,GAAGn6E,EAAE/E,GAAG,IAAIgF,EAAE,GAAGD,EAAE,CAACA,EAAE,GAAG,IAAI,IAAIE,EAAE,EAAEA,EAAEF,EAAE5U,QAAQ,CAAC,IAAI0K,EAAEkK,EAAEE,KAAKnK,EAAEiK,EAAEE,KAAKC,EAAElF,EAAElF,GAAG,GAAG,IAAID,EAAEokE,MAAMyC,GAAG7mE,GAAG,CAAC,KAAK,MAAMqK,GAAG65E,GAAGlkF,EAAEqK,IAAQA,EAAElF,IAANlF,GAAW,GAAGA,IAAIkF,EAAE7P,OAAO6U,EAAE9U,KAAK2K,QAAQ,IAAIA,EAAEA,EAAEykD,MAAM,OAAOzkD,GAAGkK,EAAE7U,KAAK2K,EAAEC,GAAGD,EAAEA,EAAEiyD,OAAO,CAAC,CAAC,OAAO9nD,CAAC,CAAC,SAASm6E,GAAGp6E,EAAE/E,GAAG,IAAImhE,GAAG,MAAM7wE,MAAMsB,EAAE,MAAcmT,EAAEm6E,GAAVn6E,EAAE+5E,GAAG/5E,GAAU/E,GAAGA,EAAE,GAAG+E,EAAExT,MAAMuU,KAAKf,GAAG,IAAI,IAAIC,EAAE,EAAEA,EAAED,EAAE5U,QAAQ,CAAC,IAAI8U,EAAEF,EAAEC,KAAK,GAAG,IAAIC,EAAEg6D,IAAIyC,GAAGz8D,IAAIjF,EAAE9P,KAAK+U,EAAEgrD,gBAAgB,IAAIhrD,EAAEA,EAAEq6C,MAAM,OAAOr6C,GAAGF,EAAE7U,KAAK+U,GAAGA,EAAEA,EAAE6nD,OAAO,CAAC,OAAO9sD,CAAC,CACrc,IAAIo/E,GAAGp9E,KAAKq9E,KAAKC,GAAG5hB,EAAGjE,uBAAuB8lB,GAAG7hB,EAAGlE,kBAAkBgmB,GAAE9hB,EAAGuN,wBAAwBuC,GAAE,EAAED,GAAE,KAAKkS,GAAE,KAAKC,GAAE,EAAEnF,GAAG,EAAEY,GAAG/T,GAAG,GAAG4S,GAAE,EAAE2F,GAAG,KAAK/R,GAAG,EAAEgS,GAAG,EAAEC,GAAG,EAAEC,GAAG,KAAKC,GAAE,KAAKC,GAAG,EAAE7F,GAAG35E,IAAS,SAASy/E,KAAK9F,GAAGpQ,KAAI,GAAG,CAAC,IAwBTmW,GAxBa1H,IAAG,EAAGC,GAAG,KAAKG,GAAG,KAAKuH,IAAG,EAAGC,GAAG,KAAKC,GAAG,EAAEC,GAAG,EAAEC,GAAG,KAAKC,IAAI,EAAEC,GAAG,EAAE,SAASrS,KAAI,OAAO,KAAO,EAAFZ,IAAKzD,MAAK,IAAIyW,GAAGA,GAAGA,GAAGzW,IAAG,CACnV,SAASsE,GAAGtpE,GAAG,OAAG,KAAY,EAAPA,EAAEya,MAAe,EAAK,KAAO,EAAFguD,KAAM,IAAIkS,GAASA,IAAGA,GAAK,OAAO1U,GAAG+L,YAAkB,IAAI0J,KAAK17E,EAAE0jE,GAAU,KAAQ,SAAfA,KAAK,MAAqBA,GAAG,IAAIgY,GAAG17E,GAAG07E,IAAc,KAAX17E,EAAEukE,IAAevkE,EAAE+7D,GAAI,CAAC,SAASwN,GAAGvpE,EAAE/E,EAAEgF,GAAG,GAAG,GAAGs7E,GAAG,MAAMA,GAAG,EAAEC,GAAG,KAAKjwF,MAAMsB,EAAE,MAAM,IAAIqT,EAAEy7E,GAAG37E,EAAE/E,GAAG,OAAG,OAAOiF,EAAS,MAAKkkE,GAAGlkE,EAAEjF,EAAEgF,GAAM,KAAO,EAAFwoE,KAAMvoE,IAAIsoE,KAAEtoE,IAAIsoE,KAAI,KAAO,EAAFC,MAAOoS,IAAI5/E,GAAG,IAAIg6E,IAAG2G,GAAG17E,EAAEy6E,KAAIkB,GAAE37E,EAAED,GAAG,IAAIhF,GAAG,IAAIwtE,IAAG,KAAY,EAAPzoE,EAAEya,QAAUygE,KAAKrV,IAAIG,OAAa9lE,EAAC,CACla,SAASy7E,GAAG37E,EAAE/E,GAAG+E,EAAEonE,OAAOnsE,EAAE,IAAIgF,EAAED,EAAEirD,UAAqC,IAA3B,OAAOhrD,IAAIA,EAAEmnE,OAAOnsE,GAAGgF,EAAED,EAAMA,EAAEA,EAAEg0D,OAAO,OAAOh0D,GAAGA,EAAEgnE,YAAY/rE,EAAgB,QAAdgF,EAAED,EAAEirD,aAAqBhrD,EAAE+mE,YAAY/rE,GAAGgF,EAAED,EAAEA,EAAEA,EAAEg0D,OAAO,OAAO,IAAI/zD,EAAEi6D,IAAIj6D,EAAEirD,UAAU,IAAI,CAC5M,SAAS2wB,GAAE77E,EAAE/E,GAAG,IAAIgF,EAAED,EAAE87E,cA1IxB,SAAY97E,EAAE/E,GAAG,IAAI,IAAIgF,EAAED,EAAE6jE,eAAe3jE,EAAEF,EAAE8jE,YAAYhuE,EAAEkK,EAAE+7E,gBAAgBhmF,EAAEiK,EAAE4jE,aAAa,EAAE7tE,GAAG,CAAC,IAAIoK,EAAE,GAAGkjE,GAAGttE,GAAGqK,EAAE,GAAGD,EAAE5E,EAAEzF,EAAEqK,IAAO,IAAI5E,EAAM,KAAK6E,EAAEH,IAAI,KAAKG,EAAEF,KAAGpK,EAAEqK,GAAG8jE,GAAG7jE,EAAEnF,IAAQM,GAAGN,IAAI+E,EAAEg8E,cAAc57E,GAAGrK,IAAIqK,CAAC,CAAC,CA0IpL67E,CAAGj8E,EAAE/E,GAAG,IAAIiF,EAAE8R,GAAGhS,EAAEA,IAAIwoE,GAAEmS,GAAE,GAAG,GAAG,IAAIz6E,EAAE,OAAOD,GAAGykE,GAAGzkE,GAAGD,EAAE87E,aAAa,KAAK97E,EAAEk8E,iBAAiB,OAAO,GAAGjhF,EAAEiF,GAAGA,EAAEF,EAAEk8E,mBAAmBjhF,EAAE,CAAgB,GAAf,MAAMgF,GAAGykE,GAAGzkE,GAAM,IAAIhF,EAAE,IAAI+E,EAAEk6D,IAvIzF,SAAYl6D,GAAG6lE,IAAG,EAAGE,GAAG/lE,EAAE,CAuImEm8E,CAAGC,GAAGlwF,KAAK,KAAK8T,IAAI+lE,GAAGqW,GAAGlwF,KAAK,KAAK8T,IAAIi8D,GAAGhsD,IAAG,WAAW,IAAIw4D,IAAGzC,IAAI,IAAGvB,GAAGS,GAAGc,IAAI/lE,EAAE,SAAS,CAAC,OAAOukE,GAAGtkE,IAAI,KAAK,EAAED,EAAEilE,GAAG,MAAM,KAAK,EAAEjlE,EAAEmlE,GAAG,MAAM,KAAK,GAAwC,QAAQnlE,EAAEqlE,SAApC,KAAK,UAAUrlE,EAAEulE,GAAsBvlE,EAAEo8E,GAAGp8E,EAAEq8E,GAAGpwF,KAAK,KAAK8T,GAAG,CAACA,EAAEk8E,iBAAiBjhF,EAAE+E,EAAE87E,aAAa77E,CAAC,CAAC,CACrd,SAASq8E,GAAGt8E,EAAE/E,GAAc,GAAXwgF,IAAI,EAAEC,GAAG,EAAK,KAAO,EAAFjT,IAAK,MAAMl9E,MAAMsB,EAAE,MAAM,IAAIoT,EAAED,EAAE87E,aAAa,GAAGS,MAAMv8E,EAAE87E,eAAe77E,EAAE,OAAO,KAAK,IAAIC,EAAE8R,GAAGhS,EAAEA,IAAIwoE,GAAEmS,GAAE,GAAG,GAAG,IAAIz6E,EAAE,OAAO,KAAK,GAAG,KAAO,GAAFA,IAAO,KAAKA,EAAEF,EAAEg8E,eAAe/gF,EAAEA,EAAEuhF,GAAGx8E,EAAEE,OAAO,CAACjF,EAAEiF,EAAE,IAAIpK,EAAE2yE,GAAEA,IAAG,EAAE,IAAI1yE,EAAE0mF,KAAkC,IAA1BjU,KAAIxoE,GAAG26E,KAAI1/E,IAAEigF,KAAKwB,GAAG18E,EAAE/E,UAAU0hF,KAAK,KAAK,CAAC,MAAMv8E,GAAGw8E,GAAG58E,EAAEI,EAAE,CAAUumE,KAAK4T,GAAGv0D,QAAQjwB,EAAE0yE,GAAE3yE,EAAE,OAAO4kF,GAAEz/E,EAAE,GAAGutE,GAAE,KAAKmS,GAAE,EAAE1/E,EAAEg6E,GAAE,CAAC,GAAG,IAAIh6E,EAAE,CAAyC,GAAxC,IAAIA,IAAY,KAARnF,EAAEouE,GAAGlkE,MAAWE,EAAEpK,EAAEmF,EAAE4hF,GAAG78E,EAAElK,KAAQ,IAAImF,EAAE,MAAMgF,EAAE26E,GAAG8B,GAAG18E,EAAE,GAAG47E,GAAG57E,EAAEE,GAAG27E,GAAE77E,EAAEglE,MAAK/kE,EAAE,GAAG,IAAIhF,EAAE2gF,GAAG57E,EAAEE,OAAO,CAC5e,GAD6epK,EAAEkK,EAAEgmB,QAAQilC,UACtf,KAAO,GAAF/qD,KAEsC,SAAYF,GAAG,IAAI,IAAI/E,EAAE+E,IAAI,CAAC,GAAW,MAAR/E,EAAErR,MAAY,CAAC,IAAIqW,EAAEhF,EAAE0sE,YAAY,GAAG,OAAO1nE,GAAe,QAAXA,EAAEA,EAAE+wE,QAAiB,IAAI,IAAI9wE,EAAE,EAAEA,EAAED,EAAE7U,OAAO8U,IAAI,CAAC,IAAIpK,EAAEmK,EAAEC,GAAGnK,EAAED,EAAE66E,YAAY76E,EAAEA,EAAEpN,MAAM,IAAI,IAAIi9E,GAAG5vE,IAAID,GAAG,OAAM,CAAE,CAAC,MAAMqK,GAAG,OAAM,CAAE,CAAC,CAAC,CAAW,GAAVF,EAAEhF,EAAEs/C,MAAwB,MAAft/C,EAAEq5E,cAAoB,OAAOr0E,EAAEA,EAAE+zD,OAAO/4D,EAAEA,EAAEgF,MAAM,CAAC,GAAGhF,IAAI+E,EAAE,MAAM,KAAK,OAAO/E,EAAE8sD,SAAS,CAAC,GAAG,OAAO9sD,EAAE+4D,QAAQ/4D,EAAE+4D,SAASh0D,EAAE,OAAM,EAAG/E,EAAEA,EAAE+4D,MAAM,CAAC/4D,EAAE8sD,QAAQiM,OAAO/4D,EAAE+4D,OAAO/4D,EAAEA,EAAE8sD,OAAO,CAAC,CAAC,OAAM,CAAE,CAFhc+0B,CAAGhnF,KAAe,KAAVmF,EAAEuhF,GAAGx8E,EAAEE,MAAmB,KAARnK,EAAEmuE,GAAGlkE,MAAWE,EAAEnK,EAAEkF,EAAE4hF,GAAG78E,EAAEjK,KAAK,IAAIkF,GAAG,MAAMgF,EAAE26E,GAAG8B,GAAG18E,EAAE,GAAG47E,GAAG57E,EAAEE,GAAG27E,GAAE77E,EAAEglE,MAAK/kE,EAAqC,OAAnCD,EAAE+8E,aAAajnF,EAAEkK,EAAEg9E,cAAc98E,EAASjF,GAAG,KAAK,EAAE,KAAK,EAAE,MAAM1P,MAAMsB,EAAE,MAAM,KAAK,EACgB,KAAK,EAAEowF,GAAGj9E,EAAEg7E,IAAG,MADf,KAAK,EAAU,GAARY,GAAG57E,EAAEE,IAAS,UAAFA,KAAeA,GAAiB,IAAbjF,EAAEggF,GAAG,IAAIjW,MAAU,CAAC,GAAG,IAAIhzD,GAAGhS,EAAE,GAAG,MAAyB,KAAnBlK,EAAEkK,EAAE6jE,gBAAqB3jE,KAAKA,EAAE,CAACmpE,KAAIrpE,EAAE8jE,aAAa9jE,EAAE6jE,eAAe/tE,EAAE,KAAK,CAACkK,EAAEk9E,cAAc5hB,EAAG2hB,GAAG/wF,KAAK,KAAK8T,EAAEg7E,IAAG//E,GAAG,KAAK,CAACgiF,GAAGj9E,EAAEg7E,IAAG,MAAM,KAAK,EAAU,GAARY,GAAG57E,EAAEE,IAAS,QAAFA,KAAaA,EAAE,MAAqB,IAAfjF,EAAE+E,EAAEqkE,WAAevuE,GAAG,EAAE,EACnfoK,GAAG,CAAC,IAAIC,EAAE,GAAGkjE,GAAGnjE,GAAGnK,EAAE,GAAGoK,GAAEA,EAAElF,EAAEkF,IAAKrK,IAAIA,EAAEqK,GAAGD,IAAInK,CAAC,CAAqG,GAApGmK,EAAEpK,EAAqG,IAA3FoK,GAAG,KAAXA,EAAE8kE,KAAI9kE,GAAW,IAAI,IAAIA,EAAE,IAAI,KAAKA,EAAE,KAAK,KAAKA,EAAE,KAAK,IAAIA,EAAE,IAAI,KAAKA,EAAE,KAAK,KAAKm6E,GAAGn6E,EAAE,OAAOA,GAAU,CAACF,EAAEk9E,cAAc5hB,EAAG2hB,GAAG/wF,KAAK,KAAK8T,EAAEg7E,IAAG96E,GAAG,KAAK,CAAC+8E,GAAGj9E,EAAEg7E,IAAG,MAA2B,QAAQ,MAAMzvF,MAAMsB,EAAE,MAAO,CAAC,CAAU,OAATgvF,GAAE77E,EAAEglE,MAAYhlE,EAAE87E,eAAe77E,EAAEq8E,GAAGpwF,KAAK,KAAK8T,GAAG,IAAI,CAAC,SAAS68E,GAAG78E,EAAE/E,GAAG,IAAIgF,EAAE86E,GAAyG,OAAtG/6E,EAAEgmB,QAAQ+uC,cAAcggB,eAAe2H,GAAG18E,EAAE/E,GAAGrR,OAAO,KAAe,KAAVoW,EAAEw8E,GAAGx8E,EAAE/E,MAAWA,EAAE+/E,GAAEA,GAAE/6E,EAAE,OAAOhF,GAAG+5E,GAAG/5E,IAAW+E,CAAC,CAC/c,SAASg1E,GAAGh1E,GAAG,OAAOg7E,GAAEA,GAAEh7E,EAAEg7E,GAAE7vF,KAAKxD,MAAMqzF,GAAEh7E,EAAE,CAC7C,SAAS47E,GAAG57E,EAAE/E,GAAuD,IAApDA,IAAI6/E,GAAG7/E,IAAI4/E,GAAG76E,EAAE6jE,gBAAgB5oE,EAAE+E,EAAE8jE,cAAc7oE,EAAM+E,EAAEA,EAAE+7E,gBAAgB,EAAE9gF,GAAG,CAAC,IAAIgF,EAAE,GAAGojE,GAAGpoE,GAAGiF,EAAE,GAAGD,EAAED,EAAEC,IAAI,EAAEhF,IAAIiF,CAAC,CAAC,CAAC,SAASk8E,GAAGp8E,GAAG,GAAG,KAAO,EAAFyoE,IAAK,MAAMl9E,MAAMsB,EAAE,MAAM0vF,KAAK,IAAIthF,EAAE+W,GAAGhS,EAAE,GAAG,GAAG,KAAO,EAAF/E,GAAK,OAAO4gF,GAAE77E,EAAEglE,MAAK,KAAK,IAAI/kE,EAAEu8E,GAAGx8E,EAAE/E,GAAG,GAAG,IAAI+E,EAAEk6D,KAAK,IAAIj6D,EAAE,CAAC,IAAIC,EAAEgkE,GAAGlkE,GAAG,IAAIE,IAAIjF,EAAEiF,EAAED,EAAE48E,GAAG78E,EAAEE,GAAG,CAAC,GAAG,IAAID,EAAE,MAAMA,EAAE26E,GAAG8B,GAAG18E,EAAE,GAAG47E,GAAG57E,EAAE/E,GAAG4gF,GAAE77E,EAAEglE,MAAK/kE,EAAE,GAAG,IAAIA,EAAE,MAAM1U,MAAMsB,EAAE,MAA4E,OAAtEmT,EAAE+8E,aAAa/8E,EAAEgmB,QAAQilC,UAAUjrD,EAAEg9E,cAAc/hF,EAAEgiF,GAAGj9E,EAAEg7E,IAAGa,GAAE77E,EAAEglE,MAAY,IAAI,CAChd,SAASmY,GAAGn9E,GAAG,OAAOq7E,IAAI,IAAIA,GAAGnhB,KAAK,KAAO,EAAFuO,KAAM8T,KAAK,IAAIthF,EAAEwtE,GAAEA,IAAG,EAAE,IAAIxoE,EAAEw6E,GAAEzI,WAAW9xE,EAAEqkE,GAAE,IAAI,GAAGkW,GAAEzI,WAAW,KAAKzN,GAAE,EAAEvkE,EAAE,OAAOA,GAAG,CAAC,QAAQukE,GAAErkE,EAAEu6E,GAAEzI,WAAW/xE,EAAM,KAAO,GAAXwoE,GAAExtE,KAAa+qE,IAAI,CAAC,CAAC,SAASuP,KAAKC,GAAGY,GAAGpwD,QAAQnuB,GAAEu+E,GAAG,CACrN,SAASsG,GAAG18E,EAAE/E,GAAG+E,EAAE+8E,aAAa,KAAK/8E,EAAEg9E,cAAc,EAAE,IAAI/8E,EAAED,EAAEk9E,cAAiD,GAAnCj9E,IAAIu7D,IAAKx7D,EAAEk9E,cAAc1hB,EAAGD,EAAGt7D,IAAO,OAAOy6E,GAAE,IAAIz6E,EAAEy6E,GAAE1mB,OAAO,OAAO/zD,GAAG,CAAC,IAAIC,EAAED,EAAQ,OAANorE,GAAGnrE,GAAUA,EAAEg6D,KAAK,KAAK,EAA6B,QAA3Bh6D,EAAEA,EAAExV,KAAKm4E,yBAA4B,IAAS3iE,GAAG4iE,KAAK,MAAM,KAAK,EAAEiL,KAAKl2E,GAAE+B,IAAG/B,GAAE8B,IAAG20E,KAAK,MAAM,KAAK,EAAEL,GAAG/tE,GAAG,MAAM,KAAK,EAAE6tE,KAAK,MAAM,KAAK,GAAc,KAAK,GAAGl2E,GAAEq2E,IAAG,MAAM,KAAK,GAAGnH,GAAG7mE,EAAExV,KAAKwqE,UAAU,MAAM,KAAK,GAAG,KAAK,GAAGqgB,KAAKt1E,EAAEA,EAAE+zD,MAAM,CAAoE,GAAnEwU,GAAExoE,EAAE06E,GAAE16E,EAAE+sE,GAAG/sE,EAAEgmB,QAAQ,MAAM20D,GAAEnF,GAAGv6E,EAAEg6E,GAAE,EAAE2F,GAAG,KAAKE,GAAGD,GAAGhS,GAAG,EAAEmS,GAAED,GAAG,KAAQ,OAAOvT,GAAG,CAAC,IAAIvsE,EACxf,EAAEA,EAAEusE,GAAGp8E,OAAO6P,IAAI,GAA2B,QAAhBiF,GAARD,EAAEunE,GAAGvsE,IAAOgtE,aAAqB,CAAChoE,EAAEgoE,YAAY,KAAK,IAAInyE,EAAEoK,EAAE+1C,KAAKlgD,EAAEkK,EAAE+nE,QAAQ,GAAG,OAAOjyE,EAAE,CAAC,IAAIoK,EAAEpK,EAAEkgD,KAAKlgD,EAAEkgD,KAAKngD,EAAEoK,EAAE+1C,KAAK91C,CAAC,CAACF,EAAE+nE,QAAQ9nE,CAAC,CAACsnE,GAAG,IAAI,CAAC,OAAOxnE,CAAC,CAC3K,SAAS48E,GAAG58E,EAAE/E,GAAG,OAAE,CAAC,IAAIgF,EAAEy6E,GAAE,IAAuB,GAAnB/T,KAAK8H,GAAGzoD,QAAQwpD,GAAMV,GAAG,CAAC,IAAI,IAAI5uE,EAAE0uE,GAAE7Z,cAAc,OAAO70D,GAAG,CAAC,IAAIpK,EAAEoK,EAAE0vE,MAAM,OAAO95E,IAAIA,EAAEkyE,QAAQ,MAAM9nE,EAAEA,EAAE+1C,IAAI,CAAC64B,IAAG,CAAE,CAA4C,GAA3CH,GAAG,EAAE9xE,GAAEgyE,GAAED,GAAE,KAAKG,IAAG,EAAGC,GAAG,EAAEwL,GAAGx0D,QAAQ,KAAQ,OAAO/lB,GAAG,OAAOA,EAAE+zD,OAAO,CAACihB,GAAE,EAAE2F,GAAG3/E,EAAEy/E,GAAE,KAAK,KAAK,CAAC16E,EAAE,CAAC,IAAIjK,EAAEiK,EAAEG,EAAEF,EAAE+zD,OAAO5zD,EAAEH,EAAE1E,EAAEN,EAAqB,GAAnBA,EAAE0/E,GAAEv6E,EAAExW,OAAO,MAAS,OAAO2R,GAAG,kBAAkBA,GAAG,oBAAoBA,EAAEw7C,KAAK,CAAC,IAAI93C,EAAE1D,EAAE3Q,EAAEwV,EAAE3G,EAAE7O,EAAEsvE,IAAI,GAAG,KAAY,EAAPtvE,EAAE6vB,QAAU,IAAIhhB,GAAG,KAAKA,GAAG,KAAKA,GAAG,CAAC,IAAIoC,EAAEjR,EAAEqgE,UAAUpvD,GAAGjR,EAAE+8E,YAAY9rE,EAAE8rE,YAAY/8E,EAAEmqE,cAAcl5D,EAAEk5D,cACxenqE,EAAEw8E,MAAMvrE,EAAEurE,QAAQx8E,EAAE+8E,YAAY,KAAK/8E,EAAEmqE,cAAc,KAAK,CAAC,IAAIh9D,EAAEm8E,GAAG/zE,GAAG,GAAG,OAAOpI,EAAE,CAACA,EAAEnO,QAAQ,IAAIuqF,GAAGp8E,EAAEoI,EAAEC,EAAErK,EAAEkF,GAAU,EAAPlD,EAAE0iB,MAAQs5D,GAAGh+E,EAAEkJ,EAAEhE,GAAOM,EAAE0D,EAAE,IAAIlD,GAAZd,EAAElD,GAAc4vE,YAAY,GAAG,OAAO5rE,EAAE,CAAC,IAAI6S,EAAE,IAAI8kC,IAAI9kC,EAAE+B,IAAIpV,GAAGN,EAAE0sE,YAAY/4D,CAAC,MAAM7S,EAAE4U,IAAIpV,GAAG,MAAMyE,CAAC,CAAM,GAAG,KAAO,EAAF/E,GAAK,CAAC84E,GAAGh+E,EAAEkJ,EAAEhE,GAAGi6E,KAAK,MAAMl1E,CAAC,CAACzE,EAAEhQ,MAAMsB,EAAE,KAAM,MAAM,GAAG8pB,IAAU,EAAPvW,EAAEqa,KAAO,CAAC,IAAI6yD,EAAG4G,GAAG/zE,GAAG,GAAG,OAAOmtE,EAAG,CAAC,KAAc,MAATA,EAAG1jF,SAAe0jF,EAAG1jF,OAAO,KAAKuqF,GAAG7G,EAAGntE,EAAEC,EAAErK,EAAEkF,GAAGuxE,GAAGjxE,GAAG,MAAMyE,CAAC,CAAC,CAACjK,EAAEwF,EAAE,IAAI05E,KAAIA,GAAE,GAAG,OAAO8F,GAAGA,GAAG,CAAChlF,GAAGglF,GAAG5vF,KAAK4K,GAAGwF,EAAEy3E,GAAGz3E,EAAE6E,GAAGA,EAAED,EAAE,EAAE,CAAC,OAAOC,EAAE85D,KAAK,KAAK,EAAE95D,EAAExW,OAC9e,MAAMqR,IAAIA,EAAEmF,EAAEgnE,OAAOnsE,EAAkB0tE,GAAGvoE,EAAbozE,GAAGpzE,EAAE7E,EAAEN,IAAW,MAAM+E,EAAE,KAAK,EAAEjK,EAAEwF,EAAE,IAAIjQ,EAAE8U,EAAE1V,KAAKwU,EAAEkB,EAAE8qD,UAAU,GAAG,KAAa,IAAR9qD,EAAExW,SAAa,oBAAoB0B,EAAEysD,0BAA0B,OAAO74C,GAAG,oBAAoBA,EAAE00E,oBAAoB,OAAOC,KAAKA,GAAGx0B,IAAIngD,KAAK,CAACkB,EAAExW,OAAO,MAAMqR,IAAIA,EAAEmF,EAAEgnE,OAAOnsE,EAAkB0tE,GAAGvoE,EAAbuzE,GAAGvzE,EAAErK,EAAEkF,IAAW,MAAM+E,CAAC,EAAEI,EAAEA,EAAE4zD,MAAM,OAAO,OAAO5zD,EAAE,CAACg9E,GAAGn9E,EAAE,CAAC,MAAMo9E,GAAIpiF,EAAEoiF,EAAG3C,KAAIz6E,GAAG,OAAOA,IAAIy6E,GAAEz6E,EAAEA,EAAE+zD,QAAQ,QAAQ,CAAC,KAAK,CAAS,CAAC,SAASyoB,KAAK,IAAIz8E,EAAEu6E,GAAGv0D,QAAsB,OAAdu0D,GAAGv0D,QAAQwpD,GAAU,OAAOxvE,EAAEwvE,GAAGxvE,CAAC,CAC3d,SAASk1E,KAAQ,IAAID,IAAG,IAAIA,IAAG,IAAIA,KAAEA,GAAE,GAAE,OAAOzM,IAAG,KAAQ,UAAHK,KAAe,KAAQ,UAAHgS,KAAee,GAAGpT,GAAEmS,GAAE,CAAC,SAAS6B,GAAGx8E,EAAE/E,GAAG,IAAIgF,EAAEwoE,GAAEA,IAAG,EAAE,IAAIvoE,EAAEu8E,KAA2B,IAAtBjU,KAAIxoE,GAAG26E,KAAI1/E,GAAGyhF,GAAG18E,EAAE/E,SAAUqiF,KAAK,KAAK,CAAC,MAAMxnF,GAAG8mF,GAAG58E,EAAElK,EAAE,CAAgC,GAAtB6wE,KAAK8B,GAAExoE,EAAEs6E,GAAGv0D,QAAQ9lB,EAAK,OAAOw6E,GAAE,MAAMnvF,MAAMsB,EAAE,MAAiB,OAAX27E,GAAE,KAAKmS,GAAE,EAAS1F,EAAC,CAAC,SAASqI,KAAK,KAAK,OAAO5C,IAAG6C,GAAG7C,GAAE,CAAC,SAASiC,KAAK,KAAK,OAAOjC,KAAI9V,MAAM2Y,GAAG7C,GAAE,CAAC,SAAS6C,GAAGv9E,GAAG,IAAI/E,EAAEkgF,GAAGn7E,EAAEirD,UAAUjrD,EAAEw1E,IAAIx1E,EAAE85C,cAAc95C,EAAE+rE,aAAa,OAAO9wE,EAAEmiF,GAAGp9E,GAAG06E,GAAEz/E,EAAEu/E,GAAGx0D,QAAQ,IAAI,CAChd,SAASo3D,GAAGp9E,GAAG,IAAI/E,EAAE+E,EAAE,EAAE,CAAC,IAAIC,EAAEhF,EAAEgwD,UAAqB,GAAXjrD,EAAE/E,EAAE+4D,OAAU,KAAa,MAAR/4D,EAAErR,QAAc,GAAgB,QAAbqW,EAAE40E,GAAG50E,EAAEhF,EAAEu6E,KAAkB,YAAJkF,GAAEz6E,OAAc,CAAW,GAAG,QAAbA,EAAEw3E,GAAGx3E,EAAEhF,IAAmC,OAAnBgF,EAAErW,OAAO,WAAM8wF,GAAEz6E,GAAS,GAAG,OAAOD,EAAmE,OAAXi1E,GAAE,OAAEyF,GAAE,MAA5D16E,EAAEpW,OAAO,MAAMoW,EAAEs0E,aAAa,EAAEt0E,EAAE6rE,UAAU,IAA4B,CAAa,GAAG,QAAf5wE,EAAEA,EAAE8sD,SAAyB,YAAJ2yB,GAAEz/E,GAASy/E,GAAEz/E,EAAE+E,CAAC,OAAO,OAAO/E,GAAG,IAAIg6E,KAAIA,GAAE,EAAE,CAAC,SAASgI,GAAGj9E,EAAE/E,GAAG,IAAIgF,EAAEskE,GAAErkE,EAAEu6E,GAAEzI,WAAW,IAAIyI,GAAEzI,WAAW,KAAKzN,GAAE,EACvY,SAAYvkE,EAAE/E,EAAEgF,GAAG,GAAGs8E,WAAW,OAAOlB,IAAI,GAAG,KAAO,EAAF5S,IAAK,MAAMl9E,MAAMsB,EAAE,MAAM,IAAIqT,EAAEF,EAAE+8E,aAAajnF,EAAEkK,EAAEg9E,cAAc,GAAG,OAAO98E,EAAE,OAAO,KAA2C,GAAtCF,EAAE+8E,aAAa,KAAK/8E,EAAEg9E,cAAc,EAAK98E,IAAIF,EAAEgmB,QAAQ,MAAMz6B,MAAMsB,EAAE,MAAMmT,EAAE87E,aAAa,KAAK97E,EAAEk8E,iBAAiB,EAAE,IAAInmF,EAAEmK,EAAEknE,MAAMlnE,EAAE8mE,WAA8J,GAvJ9a,SAAYhnE,EAAE/E,GAAG,IAAIgF,EAAED,EAAE4jE,cAAc3oE,EAAE+E,EAAE4jE,aAAa3oE,EAAE+E,EAAE6jE,eAAe,EAAE7jE,EAAE8jE,YAAY,EAAE9jE,EAAEg8E,cAAc/gF,EAAE+E,EAAEw9E,kBAAkBviF,EAAE+E,EAAE+jE,gBAAgB9oE,EAAEA,EAAE+E,EAAEgkE,cAAc,IAAI9jE,EAAEF,EAAEqkE,WAAW,IAAIrkE,EAAEA,EAAE+7E,gBAAgB,EAAE97E,GAAG,CAAC,IAAInK,EAAE,GAAGutE,GAAGpjE,GAAGlK,EAAE,GAAGD,EAAEmF,EAAEnF,GAAG,EAAEoK,EAAEpK,IAAI,EAAEkK,EAAElK,IAAI,EAAEmK,IAAIlK,CAAC,CAAC,CAuJY0nF,CAAGz9E,EAAEjK,GAAGiK,IAAIwoE,KAAIkS,GAAElS,GAAE,KAAKmS,GAAE,GAAG,KAAoB,KAAfz6E,EAAEo0E,eAAoB,KAAa,KAARp0E,EAAEtW,QAAawxF,KAAKA,IAAG,EAAGiB,GAAG/W,IAAG,WAAgB,OAALiX,KAAY,IAAI,KAAIxmF,EAAE,KAAa,MAARmK,EAAEtW,OAAgB,KAAoB,MAAfsW,EAAEo0E,eAAqBv+E,EAAE,CAACA,EAAE0kF,GAAEzI,WAAWyI,GAAEzI,WAAW,KAAK,IAAI7xE,EACrfokE,GAAEA,GAAE,EAAE,IAAInkE,EAAEqoE,GAAEA,IAAG,EAAE+R,GAAGx0D,QAAQ,KA7C9B,SAAYhmB,EAAE/E,GAAuB,IAApB6/D,EAAG96D,EAAEktE,eAAmB4K,GAAE78E,EAAE,OAAO68E,IAAG,GAAO78E,GAAJ+E,EAAE83E,IAAMv9B,MAAM,KAAoB,KAAfv6C,EAAEs0E,eAAoB,OAAOr5E,EAAEA,EAAE+4D,OAAOh0D,EAAE83E,GAAE78E,OAAO,KAAK,OAAO68E,IAAG,CAAC93E,EAAE83E,GAAE,IAAI,IAAI73E,EAAED,EAAEirD,UAAU,GAAG,KAAa,KAARjrD,EAAEpW,OAAY,OAAOoW,EAAEk6D,KAAK,KAAK,EAAE,KAAK,GAAG,KAAK,GAAqP,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,GAAG,MAAzQ,KAAK,EAAE,GAAG,OAAOj6D,EAAE,CAAC,IAAIC,EAAED,EAAE65C,cAAchkD,EAAEmK,EAAE80D,cAAch/D,EAAEiK,EAAEkrD,UAAU/qD,EAAEpK,EAAEs0E,wBAAwBrqE,EAAE4rE,cAAc5rE,EAAEtV,KAAKwV,EAAEmmE,GAAGrmE,EAAEtV,KAAKwV,GAAGpK,GAAGC,EAAEwjF,oCAAoCp5E,CAAC,CAAC,MAAM,KAAK,EAAEu7D,GAAIwC,GAAGl+D,EAAEkrD,UAAUgiB,eAAe,MACjd,QAAQ,MAAM3hF,MAAMsB,EAAE,MAAO,CAAC,MAAMuT,GAAGvG,GAAEmG,EAAEA,EAAEg0D,OAAO5zD,EAAE,CAAa,GAAG,QAAfnF,EAAE+E,EAAE+nD,SAAoB,CAAC9sD,EAAE+4D,OAAOh0D,EAAEg0D,OAAO8jB,GAAE78E,EAAE,KAAK,CAAC68E,GAAE93E,EAAEg0D,MAAM,CAAC/zD,EAAEg4E,GAAGA,IAAG,CAAW,CA4CvGyF,CAAG19E,EAAEE,GA/BxC,SAAYF,EAAE/E,GAAG,IAAI68E,GAAE78E,EAAE,OAAO68E,IAAG,CAAK,IAAI73E,GAARhF,EAAE68E,IAAUjM,UAAU,GAAG,OAAO5rE,EAAE,IAAI,IAAIC,EAAE,EAAEA,EAAED,EAAE7U,OAAO8U,IAAI,CAAC,IAAIpK,EAAEmK,EAAEC,GAAG,IAAI,IAAInK,EAAEiK,EAAE07D,EAAG8c,GAAGziF,EAAED,EAAEmF,GAAGw9E,GAAG1iF,EAAED,EAAEmF,GAAG,IAAIkF,EAAErK,EAAEm1D,UAAU,OAAO9qD,IAAIA,EAAE6zD,OAAO,MAAMl+D,EAAEk+D,OAAO,IAAI,CAAC,MAAMqpB,GAAIxjF,GAAE/D,EAAEmF,EAAEoiF,EAAG,CAAC,CAAW,GAAVp9E,EAAEhF,EAAEs/C,MAAS,KAAoB,MAAft/C,EAAEq5E,eAAqB,OAAOr0E,EAAEA,EAAE+zD,OAAO/4D,EAAE68E,GAAE73E,OAAO,KAAK,OAAO63E,IAAG,CAAC78E,EAAE68E,GAAE,IAAI,IAAI13E,EAAEnF,EAAErR,MAAgC,GAAxB,GAAFwW,GAAMs7D,GAAImC,GAAG5iE,EAAEiwD,WAAgB,IAAF9qD,EAAM,CAAC,IAAI7E,EAAEN,EAAEgwD,UAAU,GAAG,OAAO1vD,EAAE,CAAC,IAAI0D,EAAE1D,EAAEgqB,IAAI,OAAOtmB,IAAI,oBAAoBA,EAAEA,EAAE,MAAMA,EAAE+mB,QAAQ,KAAK,CAAC,CAAC,GAAK,KAAF5lB,EAAO,OAAOnF,EAAEi/D,KAAK,KAAK,GAAG,GAAG,OACvfj/D,EAAE85D,cAAc,CAAC,IAAInqE,EAAEqQ,EAAEgwD,UAAa,OAAOrgE,GAAG,OAAOA,EAAEmqE,gBAAckmB,GAAGjW,KAAG,CAAC,MAAM,KAAK,GAAG,IAAIvrE,EAAE,OAAOwB,EAAE85D,cAAcl5D,EAAEZ,EAAEgwD,UAAUlzD,EAAE,OAAO8D,GAAG,OAAOA,EAAEk5D,cAAkB,GAAJ90D,EAAEhF,EAAKygE,EAAG17D,EAAE,GAAGE,EAAED,EAAEnK,EAAE2D,EAAE1D,EAAE,KAAK2lE,EAAG,IAAI,IAAI3/D,EAAEmE,IAAI,CAAC,GAAG,IAAInE,EAAEm+D,KAAK,GAAG,OAAOnkE,EAAE,CAACA,EAAEgG,EAAE,IAAI6S,EAAE7S,EAAEmvD,UAAUp1D,EAAEioE,GAAGnvD,GAAGvF,GAAGtN,EAAEmvD,UAAUnvD,EAAE+9C,cAAc,OAAO,GAAG,IAAI/9C,EAAEm+D,KAAK,GAAG,OAAOnkE,EAAE,CAAC,IAAIu3E,EAAGvxE,EAAEmvD,UAAUp1D,EAAEkoE,GAAGsP,GAAIrP,GAAGqP,EAAGvxE,EAAE+9C,cAAc,OAAO,IAAI,KAAK/9C,EAAEm+D,KAAK,KAAKn+D,EAAEm+D,KAAK,OAAOn+D,EAAEg5D,eAAeh5D,IAAImE,IAAI,OAAOnE,EAAEw+C,MAAM,CAACx+C,EAAEw+C,MAAMyZ,OAAOj4D,EAAEA,EAAEA,EAAEw+C,MAAM,QAAQ,CAAC,GAAGx+C,IAChgBmE,EAAE,MAAM,KAAK,OAAOnE,EAAEgsD,SAAS,CAAC,GAAG,OAAOhsD,EAAEi4D,QAAQj4D,EAAEi4D,SAAS9zD,EAAE,MAAMF,EAAEjK,IAAIgG,IAAIhG,EAAE,MAAMgG,EAAEA,EAAEi4D,MAAM,CAACj+D,IAAIgG,IAAIhG,EAAE,MAAMgG,EAAEgsD,QAAQiM,OAAOj4D,EAAEi4D,OAAOj4D,EAAEA,EAAEgsD,OAAO,CAAC,GAAGtuD,IAAI1B,GAAG,KAAY,EAAPkI,EAAEwa,MAAQ,CAACq9D,GAAE73E,EAAE,IAAI,IAAIjF,EAAEiF,EAAEs6C,MAAM,OAAOv/C,GAAG,CAAC,IAAIiF,EAAE63E,GAAE98E,EAAE,OAAO88E,IAAG,CAAK,IAAIxsF,GAAR4U,EAAE43E,IAAUv9B,MAAM,OAAOr6C,EAAEg6D,KAAK,KAAK,EAAE,KAAK,GAAG,KAAK,GAAG,KAAK,GAAGge,GAAG,EAAEh4E,EAAEA,EAAE8zD,QAAQ,MAAM,KAAK,EAAE+jB,GAAG73E,EAAEA,EAAE8zD,QAAQ,IAAI90D,EAAEgB,EAAEgrD,UAAU,GAAG,oBAAoBhsD,EAAEq5E,qBAAqB,CAAC,IAAI/mE,EAAEtR,EAAE8zD,OAAO,IAAI90D,EAAEvL,MAAMuM,EAAE45C,cAAc56C,EAAElT,MAAMkU,EAAE60D,cAAc71D,EAAEq5E,sBAAsB,CAAC,MAAM8E,GAAIxjF,GAAEqG,EAC/fsR,EAAE6rE,EAAG,CAAC,CAAC,MAAM,KAAK,EAAEtF,GAAG73E,EAAEA,EAAE8zD,QAAQ,MAAM,KAAK,GAAG,GAAG,OAAO9zD,EAAE60D,cAAc,CAACykB,GAAGv5E,GAAG,QAAQ,EAAE,OAAO3U,GAAGA,EAAE0oE,OAAO9zD,EAAE43E,GAAExsF,GAAGkuF,GAAGv5E,EAAE,CAACjF,EAAEA,EAAE+sD,OAAO,CAAC,EAAE,OAAS,KAAF3nD,GAAQ,KAAK,EAAEy4E,GAAG59E,GAAGA,EAAErR,QAAQ,EAAE,MAAM,KAAK,EAAEivF,GAAG59E,GAAGA,EAAErR,QAAQ,EAAEovF,GAAG/9E,EAAEgwD,UAAUhwD,GAAG,MAAM,KAAK,KAAKA,EAAErR,QAAQ,KAAK,MAAM,KAAK,KAAKqR,EAAErR,QAAQ,KAAKovF,GAAG/9E,EAAEgwD,UAAUhwD,GAAG,MAAM,KAAK,EAAE+9E,GAAG/9E,EAAEgwD,UAAUhwD,GAAG,CAAC,MAAMoiF,GAAIxjF,GAAEoB,EAAEA,EAAE+4D,OAAOqpB,EAAG,CAAa,GAAG,QAAfp9E,EAAEhF,EAAE8sD,SAAoB,CAAC9nD,EAAE+zD,OAAO/4D,EAAE+4D,OAAO8jB,GAAE73E,EAAE,KAAK,CAAC63E,GAAE78E,EAAE+4D,MAAM,CAAC,CAAC,CA4BpY2pB,CAAG39E,EAAEE,GAAK66D,EAAG/6D,EAAEktE,eAAeltE,EAAEgmB,QAAQ9lB,EAAEi5E,GAAGj5E,EAAEF,EAAElK,GAAGgvE,KAAK2D,GAAEroE,EAAEmkE,GAAEpkE,EAAEs6E,GAAEzI,WAAWj8E,CAAC,MAAMiK,EAAEgmB,QAAQ9lB,EAAqF,GAAnFk7E,KAAKA,IAAG,EAAGC,GAAGr7E,EAAEs7E,GAAGxlF,GAAGC,EAAEiK,EAAE4jE,aAAa,IAAI7tE,IAAI89E,GAAG,MAvJ4F,SAAY7zE,GAAG,GAAG0lE,IAAI,oBAAoBA,GAAGkY,kBAAkB,IAAIlY,GAAGkY,kBAAkBnY,GAAGzlE,OAAE,EAAO,OAAuB,IAAhBA,EAAEgmB,QAAQp8B,OAAW,CAAC,MAAMqR,GAAG,CAAC,CAuJjO4iF,CAAG39E,EAAEgrD,WAAa2wB,GAAE77E,EAAEglE,MAAQ,OAAO/pE,EAAE,IAAIgF,EAAED,EAAE89E,mBAAmB59E,EAAE,EAAEA,EAAEjF,EAAE7P,OAAO8U,IAAID,EAAEhF,EAAEiF,IAAI,GAAGuzE,GAAG,MAAMA,IAAG,EAAGzzE,EAAE0zE,GAAGA,GAAG,KAAK1zE,EAAE,KAAQ,EAAHs7E,KAAO,IAAIt7E,EAAEk6D,KAAKqiB,KAAKxmF,EAAEiK,EAAE4jE,aAAa,KAAO,EAAF7tE,GAAKiK,IAAIw7E,GAAGD,MAAMA,GAAG,EAAEC,GAAGx7E,GAAGu7E,GAAG,EAAEvV,IAAgB,CAF7B+X,CAAG/9E,EAAE/E,EAAEgF,EAAE,CAAC,QAAQw6E,GAAEzI,WAAW9xE,EAAEqkE,GAAEtkE,CAAC,CAAC,OAAO,IAAI,CAGzb,SAASs8E,KAAK,GAAG,OAAOlB,GAAG,CAAC,IAAIr7E,EAAEwkE,GAAG8W,IAAIrgF,EAAEw/E,GAAEzI,WAAW/xE,EAAEskE,GAAE,IAAkC,GAA9BkW,GAAEzI,WAAW,KAAKzN,GAAE,GAAGvkE,EAAE,GAAGA,EAAK,OAAOq7E,GAAG,IAAIn7E,GAAE,MAAO,CAAmB,GAAlBF,EAAEq7E,GAAGA,GAAG,KAAKC,GAAG,EAAK,KAAO,EAAF7S,IAAK,MAAMl9E,MAAMsB,EAAE,MAAM,IAAIiJ,EAAE2yE,GAAO,IAALA,IAAG,EAAMqP,GAAE93E,EAAEgmB,QAAQ,OAAO8xD,IAAG,CAAC,IAAI/hF,EAAE+hF,GAAE33E,EAAEpK,EAAEwkD,MAAM,GAAG,KAAa,GAARu9B,GAAEluF,OAAU,CAAC,IAAIwW,EAAErK,EAAE81E,UAAU,GAAG,OAAOzrE,EAAE,CAAC,IAAI,IAAI7E,EAAE,EAAEA,EAAE6E,EAAEhV,OAAOmQ,IAAI,CAAC,IAAI0D,EAAEmB,EAAE7E,GAAG,IAAIu8E,GAAE74E,EAAE,OAAO64E,IAAG,CAAC,IAAIltF,EAAEktF,GAAE,OAAOltF,EAAEsvE,KAAK,KAAK,EAAE,KAAK,GAAG,KAAK,GAAGge,GAAG,EAAEttF,EAAEmL,GAAG,IAAI0D,EAAE7O,EAAE2vD,MAAM,GAAG,OAAO9gD,EAAEA,EAAEu6D,OAAOppE,EAAEktF,GAAEr+E,OAAO,KAAK,OAAOq+E,IAAG,CAAK,IAAIj8E,GAARjR,EAAEktF,IAAU/vB,QAAQhwD,EAAEnN,EAAEopE,OAAa,GAAN0kB,GAAG9tF,GAAMA,IACjfqU,EAAE,CAAC64E,GAAE,KAAK,KAAK,CAAC,GAAG,OAAOj8E,EAAE,CAACA,EAAEm4D,OAAOj8D,EAAE+/E,GAAEj8E,EAAE,KAAK,CAACi8E,GAAE//E,CAAC,CAAC,CAAC,CAAC,IAAIgE,EAAEhG,EAAEk1D,UAAU,GAAG,OAAOlvD,EAAE,CAAC,IAAI6S,EAAE7S,EAAEw+C,MAAM,GAAG,OAAO3rC,EAAE,CAAC7S,EAAEw+C,MAAM,KAAK,EAAE,CAAC,IAAI+yB,EAAG1+D,EAAEm5C,QAAQn5C,EAAEm5C,QAAQ,KAAKn5C,EAAE0+D,CAAE,OAAO,OAAO1+D,EAAE,CAAC,CAACkpE,GAAE/hF,CAAC,CAAC,CAAC,GAAG,KAAoB,KAAfA,EAAEu+E,eAAoB,OAAOn0E,EAAEA,EAAE6zD,OAAOj+D,EAAE+hF,GAAE33E,OAAOlF,EAAE,KAAK,OAAO68E,IAAG,CAAK,GAAG,KAAa,MAApB/hF,EAAE+hF,IAAYluF,OAAY,OAAOmM,EAAEmkE,KAAK,KAAK,EAAE,KAAK,GAAG,KAAK,GAAGge,GAAG,EAAEniF,EAAEA,EAAEi+D,QAAQ,IAAIh5D,EAAEjF,EAAEgyD,QAAQ,GAAG,OAAO/sD,EAAE,CAACA,EAAEg5D,OAAOj+D,EAAEi+D,OAAO8jB,GAAE98E,EAAE,MAAMC,CAAC,CAAC68E,GAAE/hF,EAAEi+D,MAAM,CAAC,CAAC,IAAI1oE,EAAE0U,EAAEgmB,QAAQ,IAAI8xD,GAAExsF,EAAE,OAAOwsF,IAAG,CAAK,IAAI54E,GAARiB,EAAE23E,IAAUv9B,MAAM,GAAG,KAAoB,KAAfp6C,EAAEm0E,eAAoB,OACpfp1E,EAAEA,EAAE80D,OAAO7zD,EAAE23E,GAAE54E,OAAOjE,EAAE,IAAIkF,EAAE7U,EAAE,OAAOwsF,IAAG,CAAK,GAAG,KAAa,MAApB13E,EAAE03E,IAAYluF,OAAY,IAAI,OAAOwW,EAAE85D,KAAK,KAAK,EAAE,KAAK,GAAG,KAAK,GAAGie,GAAG,EAAE/3E,GAAG,CAAC,MAAMi9E,GAAIxjF,GAAEuG,EAAEA,EAAE4zD,OAAOqpB,EAAG,CAAC,GAAGj9E,IAAID,EAAE,CAAC23E,GAAE,KAAK,MAAM78E,CAAC,CAAC,IAAIuW,EAAEpR,EAAE2nD,QAAQ,GAAG,OAAOv2C,EAAE,CAACA,EAAEwiD,OAAO5zD,EAAE4zD,OAAO8jB,GAAEtmE,EAAE,MAAMvW,CAAC,CAAC68E,GAAE13E,EAAE4zD,MAAM,CAAC,CAAU,GAATyU,GAAE3yE,EAAEkwE,KAAQN,IAAI,oBAAoBA,GAAGsY,sBAAsB,IAAItY,GAAGsY,sBAAsBvY,GAAGzlE,EAAE,CAAC,MAAMq9E,GAAI,CAACn9E,GAAE,CAAE,CAAC,OAAOA,CAAC,CAAC,QAAQqkE,GAAEtkE,EAAEw6E,GAAEzI,WAAW/2E,CAAC,CAAC,CAAC,OAAM,CAAE,CAAC,SAASgjF,GAAGj+E,EAAE/E,EAAEgF,GAAyBsoE,GAAGvoE,EAAf/E,EAAEu4E,GAAGxzE,EAAf/E,EAAE+3E,GAAG/yE,EAAEhF,GAAY,IAAWA,EAAEouE,KAAc,QAAVrpE,EAAE27E,GAAG37E,EAAE,MAAcokE,GAAGpkE,EAAE,EAAE/E,GAAG4gF,GAAE77E,EAAE/E,GAAG,CAC7e,SAASpB,GAAEmG,EAAE/E,EAAEgF,GAAG,GAAG,IAAID,EAAEk6D,IAAI+jB,GAAGj+E,EAAEA,EAAEC,QAAQ,KAAK,OAAOhF,GAAG,CAAC,GAAG,IAAIA,EAAEi/D,IAAI,CAAC+jB,GAAGhjF,EAAE+E,EAAEC,GAAG,KAAK,CAAM,GAAG,IAAIhF,EAAEi/D,IAAI,CAAC,IAAIh6D,EAAEjF,EAAEiwD,UAAU,GAAG,oBAAoBjwD,EAAEvQ,KAAKqtD,0BAA0B,oBAAoB73C,EAAE0zE,oBAAoB,OAAOC,KAAKA,GAAGx0B,IAAIn/C,IAAI,CAAuBqoE,GAAGttE,EAAf+E,EAAE2zE,GAAG14E,EAAf+E,EAAEgzE,GAAG/yE,EAAED,GAAY,IAAWA,EAAEqpE,KAAc,QAAVpuE,EAAE0gF,GAAG1gF,EAAE,MAAcmpE,GAAGnpE,EAAE,EAAE+E,GAAG67E,GAAE5gF,EAAE+E,IAAI,KAAK,CAAC,CAAC/E,EAAEA,EAAE+4D,MAAM,CAAC,CACxV,SAASigB,GAAGj0E,EAAE/E,EAAEgF,GAAG,IAAIC,EAAEF,EAAEg0E,UAAU,OAAO9zE,GAAGA,EAAEs0C,OAAOv5C,GAAGA,EAAEouE,KAAIrpE,EAAE8jE,aAAa9jE,EAAE6jE,eAAe5jE,EAAEuoE,KAAIxoE,IAAI26E,GAAE16E,KAAKA,IAAI,IAAIg1E,IAAG,IAAIA,KAAM,UAAF0F,MAAeA,IAAG,IAAI3V,KAAIiW,GAAGyB,GAAG18E,EAAE,GAAG86E,IAAI76E,GAAG47E,GAAE77E,EAAE/E,EAAE,CAAC,SAASijF,GAAGl+E,EAAE/E,GAAG,IAAIA,IAAI,KAAY,EAAP+E,EAAEya,MAAQxf,EAAE,GAAGA,EAAE0oE,GAAU,KAAQ,WAAfA,KAAK,MAAuBA,GAAG,WAAW,IAAI1jE,EAAEopE,KAAc,QAAVrpE,EAAE27E,GAAG37E,EAAE/E,MAAcmpE,GAAGpkE,EAAE/E,EAAEgF,GAAG47E,GAAE77E,EAAEC,GAAG,CAAC,SAASk3E,GAAGn3E,GAAG,IAAI/E,EAAE+E,EAAE+0D,cAAc90D,EAAE,EAAE,OAAOhF,IAAIgF,EAAEhF,EAAEixE,WAAWgS,GAAGl+E,EAAEC,EAAE,CAC/Y,SAASi5E,GAAGl5E,EAAE/E,GAAG,IAAIgF,EAAE,EAAE,OAAOD,EAAEk6D,KAAK,KAAK,GAAG,IAAIh6D,EAAEF,EAAEkrD,UAAcp1D,EAAEkK,EAAE+0D,cAAc,OAAOj/D,IAAImK,EAAEnK,EAAEo2E,WAAW,MAAM,KAAK,GAAGhsE,EAAEF,EAAEkrD,UAAU,MAAM,QAAQ,MAAM3/D,MAAMsB,EAAE,MAAO,OAAOqT,GAAGA,EAAEs0C,OAAOv5C,GAAGijF,GAAGl+E,EAAEC,EAAE,CAQkO,SAASo8E,GAAGr8E,EAAE/E,GAAG,OAAOwpE,GAAGzkE,EAAE/E,EAAE,CAC9c,SAASkjF,GAAGn+E,EAAE/E,EAAEgF,EAAEC,GAAGrX,KAAKqxE,IAAIl6D,EAAEnX,KAAKiG,IAAImR,EAAEpX,KAAKk/D,QAAQl/D,KAAK0xD,MAAM1xD,KAAKmrE,OAAOnrE,KAAKqiE,UAAUriE,KAAK6B,KAAK7B,KAAK+iF,YAAY,KAAK/iF,KAAK4F,MAAM,EAAE5F,KAAK08B,IAAI,KAAK18B,KAAKkjF,aAAa9wE,EAAEpS,KAAKq+E,aAAar+E,KAAKksE,cAAclsE,KAAK8+E,YAAY9+E,KAAKixD,cAAc,KAAKjxD,KAAK4xB,KAAKva,EAAErX,KAAKyrF,aAAazrF,KAAKe,MAAM,EAAEf,KAAKgjF,UAAU,KAAKhjF,KAAKm+E,WAAWn+E,KAAKu+E,MAAM,EAAEv+E,KAAKoiE,UAAU,IAAI,CAAC,SAAS0gB,GAAG3rE,EAAE/E,EAAEgF,EAAEC,GAAG,OAAO,IAAIi+E,GAAGn+E,EAAE/E,EAAEgF,EAAEC,EAAE,CAAC,SAAS21E,GAAG71E,GAAiB,UAAdA,EAAEA,EAAEhY,aAAuBgY,EAAEo+E,iBAAiB,CAEpd,SAASrR,GAAG/sE,EAAE/E,GAAG,IAAIgF,EAAED,EAAEirD,UACuB,OADb,OAAOhrD,IAAGA,EAAE0rE,GAAG3rE,EAAEk6D,IAAIj/D,EAAE+E,EAAElR,IAAIkR,EAAEya,OAAQmxD,YAAY5rE,EAAE4rE,YAAY3rE,EAAEvV,KAAKsV,EAAEtV,KAAKuV,EAAEirD,UAAUlrD,EAAEkrD,UAAUjrD,EAAEgrD,UAAUjrD,EAAEA,EAAEirD,UAAUhrD,IAAIA,EAAE8rE,aAAa9wE,EAAEgF,EAAEvV,KAAKsV,EAAEtV,KAAKuV,EAAErW,MAAM,EAAEqW,EAAEq0E,aAAa,EAAEr0E,EAAE4rE,UAAU,MAAM5rE,EAAErW,MAAc,SAARoW,EAAEpW,MAAeqW,EAAE+mE,WAAWhnE,EAAEgnE,WAAW/mE,EAAEmnE,MAAMpnE,EAAEonE,MAAMnnE,EAAEs6C,MAAMv6C,EAAEu6C,MAAMt6C,EAAE65C,cAAc95C,EAAE85C,cAAc75C,EAAE80D,cAAc/0D,EAAE+0D,cAAc90D,EAAE0nE,YAAY3nE,EAAE2nE,YAAY1sE,EAAE+E,EAAEknE,aAAajnE,EAAEinE,aAAa,OAAOjsE,EAAE,KAAK,CAACmsE,MAAMnsE,EAAEmsE,MAAMD,aAAalsE,EAAEksE,cAC/elnE,EAAE8nD,QAAQ/nD,EAAE+nD,QAAQ9nD,EAAExR,MAAMuR,EAAEvR,MAAMwR,EAAEslB,IAAIvlB,EAAEulB,IAAWtlB,CAAC,CACxD,SAASgtE,GAAGjtE,EAAE/E,EAAEgF,EAAEC,EAAEpK,EAAEC,GAAG,IAAIoK,EAAE,EAAM,GAAJD,EAAEF,EAAK,oBAAoBA,EAAE61E,GAAG71E,KAAKG,EAAE,QAAQ,GAAG,kBAAkBH,EAAEG,EAAE,OAAOH,EAAE,OAAOA,GAAG,KAAKg5D,EAAG,OAAOqU,GAAGptE,EAAE2sB,SAAS92B,EAAEC,EAAEkF,GAAG,KAAKg+D,EAAG94D,EAAE,EAAErK,GAAG,EAAE,MAAM,KAAKojE,EAAG,OAAOl5D,EAAE2rE,GAAG,GAAG1rE,EAAEhF,EAAI,EAAFnF,IAAO81E,YAAY1S,EAAGl5D,EAAEonE,MAAMrxE,EAAEiK,EAAE,KAAKs5D,EAAG,OAAOt5D,EAAE2rE,GAAG,GAAG1rE,EAAEhF,EAAEnF,IAAK81E,YAAYtS,EAAGt5D,EAAEonE,MAAMrxE,EAAEiK,EAAE,KAAKu5D,EAAG,OAAOv5D,EAAE2rE,GAAG,GAAG1rE,EAAEhF,EAAEnF,IAAK81E,YAAYrS,EAAGv5D,EAAEonE,MAAMrxE,EAAEiK,EAAE,KAAK05D,EAAG,OAAOsd,GAAG/2E,EAAEnK,EAAEC,EAAEkF,GAAG,QAAQ,GAAG,kBAAkB+E,GAAG,OAAOA,EAAE,OAAOA,EAAE85D,UAAU,KAAKX,EAAGh5D,EAAE,GAAG,MAAMH,EAAE,KAAKo5D,EAAGj5D,EAAE,EAAE,MAAMH,EAAE,KAAKq5D,EAAGl5D,EAAE,GACpf,MAAMH,EAAE,KAAKw5D,EAAGr5D,EAAE,GAAG,MAAMH,EAAE,KAAKy5D,EAAGt5D,EAAE,GAAGD,EAAE,KAAK,MAAMF,EAAE,MAAMzU,MAAMsB,EAAE,IAAI,MAAMmT,EAAEA,SAASA,EAAE,KAAuD,OAAjD/E,EAAE0wE,GAAGxrE,EAAEF,EAAEhF,EAAEnF,IAAK81E,YAAY5rE,EAAE/E,EAAEvQ,KAAKwV,EAAEjF,EAAEmsE,MAAMrxE,EAASkF,CAAC,CAAC,SAASoyE,GAAGrtE,EAAE/E,EAAEgF,EAAEC,GAA2B,OAAxBF,EAAE2rE,GAAG,EAAE3rE,EAAEE,EAAEjF,IAAKmsE,MAAMnnE,EAASD,CAAC,CAAC,SAASg3E,GAAGh3E,EAAE/E,EAAEgF,EAAEC,GAA4D,OAAzDF,EAAE2rE,GAAG,GAAG3rE,EAAEE,EAAEjF,IAAK2wE,YAAYlS,EAAG15D,EAAEonE,MAAMnnE,EAAED,EAAEkrD,UAAU,CAAC,EAASlrD,CAAC,CAAC,SAASgtE,GAAGhtE,EAAE/E,EAAEgF,GAA8B,OAA3BD,EAAE2rE,GAAG,EAAE3rE,EAAE,KAAK/E,IAAKmsE,MAAMnnE,EAASD,CAAC,CACjW,SAASotE,GAAGptE,EAAE/E,EAAEgF,GAA8J,OAA3JhF,EAAE0wE,GAAG,EAAE,OAAO3rE,EAAE4sB,SAAS5sB,EAAE4sB,SAAS,GAAG5sB,EAAElR,IAAImM,IAAKmsE,MAAMnnE,EAAEhF,EAAEiwD,UAAU,CAACgiB,cAAcltE,EAAEktE,cAAcsH,gBAAgB,KAAKrH,eAAentE,EAAEmtE,gBAAuBlyE,CAAC,CACtL,SAASojF,GAAGr+E,EAAE/E,EAAEgF,EAAEC,EAAEpK,GAAGjN,KAAKqxE,IAAIj/D,EAAEpS,KAAKqkF,cAAcltE,EAAEnX,KAAKk0F,aAAal0F,KAAKmrF,UAAUnrF,KAAKm9B,QAAQn9B,KAAK2rF,gBAAgB,KAAK3rF,KAAKq0F,cAAc1hB,EAAG3yE,KAAKizF,aAAajzF,KAAKisF,eAAejsF,KAAKkF,QAAQ,KAAKlF,KAAKqzF,iBAAiB,EAAErzF,KAAKw7E,WAAWF,GAAG,GAAGt7E,KAAKkzF,gBAAgB5X,IAAI,GAAGt7E,KAAKk7E,eAAel7E,KAAKm0F,cAAcn0F,KAAK20F,iBAAiB30F,KAAKmzF,aAAanzF,KAAKi7E,YAAYj7E,KAAKg7E,eAAeh7E,KAAK+6E,aAAa,EAAE/6E,KAAKm7E,cAAcG,GAAG,GAAGt7E,KAAKkqF,iBAAiB7yE,EAAErX,KAAKi1F,mBAAmBhoF,EAAEwF,IAAIzS,KAAKy1F,gCACnf,KAAK,CAAC,SAASC,GAAGv+E,EAAE/E,EAAEgF,EAAEC,EAAEpK,EAAEC,EAAEoK,EAAEC,EAAE7E,GAAiL,OAA9KyE,EAAE,IAAIq+E,GAAGr+E,EAAE/E,EAAEgF,EAAEG,EAAE7E,GAAG,IAAIN,GAAGA,EAAE,GAAE,IAAKlF,IAAIkF,GAAG,IAAIA,EAAE,EAAElF,EAAE41E,GAAG,EAAE,KAAK,KAAK1wE,GAAG+E,EAAEgmB,QAAQjwB,EAAEA,EAAEm1D,UAAUlrD,EAAEjK,EAAEg/D,cAAc,CAAC9mB,QAAQ/tC,EAAE60E,aAAa90E,EAAEwqB,MAAM,KAAK+zD,YAAY,MAAM9W,GAAG3xE,GAAUiK,CAAC,CAC3N,SAASy+E,GAAGz+E,GAAG,IAAIA,EAAE,OAAOsiE,GAAuBtiE,EAAE,CAAC,GAAGm6D,EAA1Bn6D,EAAEA,EAAEu0D,mBAA8Bv0D,GAAG,IAAIA,EAAEk6D,IAAI,MAAM3uE,MAAMsB,EAAE,MAAM,IAAIoO,EAAE+E,EAAE,EAAE,CAAC,OAAO/E,EAAEi/D,KAAK,KAAK,EAAEj/D,EAAEA,EAAEiwD,UAAUn9D,QAAQ,MAAMiS,EAAE,KAAK,EAAE,GAAG4iE,GAAE3nE,EAAEvQ,MAAM,CAACuQ,EAAEA,EAAEiwD,UAAUiY,0CAA0C,MAAMnjE,CAAC,EAAE/E,EAAEA,EAAE+4D,MAAM,OAAO,OAAO/4D,GAAG,MAAM1P,MAAMsB,EAAE,KAAM,CAAC,GAAG,IAAImT,EAAEk6D,IAAI,CAAC,IAAIj6D,EAAED,EAAEtV,KAAK,GAAGk4E,GAAE3iE,GAAG,OAAO+iE,GAAGhjE,EAAEC,EAAEhF,EAAE,CAAC,OAAOA,CAAC,CAClW,SAASyjF,GAAG1+E,GAAG,IAAI/E,EAAE+E,EAAEu0D,gBAAgB,QAAG,IAASt5D,EAAE,CAAC,GAAG,oBAAoB+E,EAAEk/B,OAAO,MAAM3zC,MAAMsB,EAAE,MAAiC,MAA3BmT,EAAE7X,OAAO4G,KAAKiR,GAAGs2B,KAAK,KAAW/qC,MAAMsB,EAAE,IAAImT,GAAI,CAAS,OAAO,QAAfA,EAAEs6D,EAAGr/D,IAAmB,KAAK+E,EAAEkrD,SAAS,CAAC,SAASv8B,GAAG3uB,EAAE/E,GAAqB,GAAG,QAArB+E,EAAEA,EAAE+0D,gBAA2B,OAAO/0D,EAAEgsE,WAAW,CAAC,IAAI/rE,EAAED,EAAEksE,UAAUlsE,EAAEksE,UAAU,IAAIjsE,GAAGA,EAAEhF,EAAEgF,EAAEhF,CAAC,CAAC,CAAC,SAAS0jF,GAAG3+E,EAAE/E,GAAG0zB,GAAG3uB,EAAE/E,IAAI+E,EAAEA,EAAEirD,YAAYt8B,GAAG3uB,EAAE/E,EAAE,CAAC,SAAS2jF,GAAG5+E,GAAW,OAAO,QAAfA,EAAEs6D,EAAGt6D,IAAmB,KAAKA,EAAEkrD,SAAS,CAAC,SAAS2zB,KAAK,OAAO,IAAI,CAevb,OAjCJ1D,GAAG,SAASn7E,EAAE/E,EAAEgF,GAAG,GAAG,OAAOD,EAAE,GAAGA,EAAE85C,gBAAgB7+C,EAAE8wE,cAAcnyE,GAAEosB,QAAQqhD,IAAG,MAAO,CAAC,GAAG,KAAKrnE,EAAEonE,MAAMnnE,IAAI,KAAa,IAARhF,EAAErR,OAAW,OAAOy9E,IAAG,EAxDzI,SAAYrnE,EAAE/E,EAAEgF,GAAG,OAAOhF,EAAEi/D,KAAK,KAAK,EAAEyc,GAAG17E,GAAGsxE,KAAK,MAAM,KAAK,EAAEyB,GAAG/yE,GAAG,MAAM,KAAK,EAAE2nE,GAAE3nE,EAAEvQ,OAAOw4E,GAAGjoE,GAAG,MAAM,KAAK,EAAE6yE,GAAG7yE,EAAEA,EAAEiwD,UAAUgiB,eAAe,MAAM,KAAK,GAAGtG,GAAG3rE,EAAEA,EAAEvQ,KAAKwqE,SAASj6D,EAAE6+C,cAAcpxD,OAAO,MAAM,KAAK,GAAG,IAAIwX,EAAEjF,EAAE85D,cAAc,GAAG,OAAO70D,EAAG,OAAG,OAAOA,EAAE8rE,YAAkBl0E,GAAEo2E,GAAY,EAAVA,GAAEloD,SAAW/qB,EAAErR,OAAO,IAAI,MAAQ,KAAKqW,EAAEhF,EAAEs/C,MAAMysB,YAAmB+P,GAAG/2E,EAAE/E,EAAEgF,IAAGnI,GAAEo2E,GAAY,EAAVA,GAAEloD,SAA8B,QAAnBhmB,EAAE21E,GAAG31E,EAAE/E,EAAEgF,IAAmBD,EAAE+nD,QAAQ,MAAKjwD,GAAEo2E,GAAY,EAAVA,GAAEloD,SAAW,MAAM,KAAK,GAA0B,GAAvB9lB,EAAE,KAAKD,EAAEhF,EAAE+rE,YAAe,KAAa,IAARhnE,EAAEpW,OAAW,CAAC,GAAGsW,EAAE,OAAOs3E,GAAGx3E,EACngB/E,EAAEgF,GAAGhF,EAAErR,OAAO,GAAG,CAAC,IAAIkM,EAAEmF,EAAE85D,cAAwF,GAA1E,OAAOj/D,IAAIA,EAAEq/E,UAAU,KAAKr/E,EAAE6+E,KAAK,KAAK7+E,EAAEi7E,WAAW,MAAMj5E,GAAEo2E,GAAEA,GAAEloD,SAAY9lB,EAAE,MAAW,OAAO,KAAK,KAAK,GAAG,KAAK,GAAG,OAAOjF,EAAEmsE,MAAM,EAAE6O,GAAGj2E,EAAE/E,EAAEgF,GAAG,OAAO01E,GAAG31E,EAAE/E,EAAEgF,EAAE,CAuD7D6+E,CAAG9+E,EAAE/E,EAAEgF,GAAGonE,GAAG,KAAa,OAARrnE,EAAEpW,MAAmB,MAAMy9E,IAAG,EAAG1wD,IAAG,KAAa,QAAR1b,EAAErR,QAAgBuhF,GAAGlwE,EAAE2vE,GAAG3vE,EAAExM,OAAiB,OAAVwM,EAAEmsE,MAAM,EAASnsE,EAAEi/D,KAAK,KAAK,EAAE,IAAIh6D,EAAEjF,EAAEvQ,KAAK,OAAOsV,IAAIA,EAAEirD,UAAU,KAAKhwD,EAAEgwD,UAAU,KAAKhwD,EAAErR,OAAO,GAAGoW,EAAE/E,EAAE8wE,aAAa,IAAIj2E,EAAE0sE,GAAGvnE,EAAEtB,GAAEqsB,SAASihD,GAAGhsE,EAAEgF,GAAGnK,EAAEs5E,GAAG,KAAKn0E,EAAEiF,EAAEF,EAAElK,EAAEmK,GAAG,IAAIlK,EAAE05E,KAC7I,OADkJx0E,EAAErR,OAAO,EAAE,kBAAkBkM,GAAG,OAAOA,GAAG,oBAAoBA,EAAEopC,aAAQ,IAASppC,EAAEgkE,UAChf7+D,EAAEi/D,IAAI,EAAEj/D,EAAE85D,cAAc,KAAK95D,EAAE0sE,YAAY,KAAK/E,GAAE1iE,IAAInK,GAAE,EAAGmtE,GAAGjoE,IAAIlF,GAAE,EAAGkF,EAAE85D,cAAc,OAAOj/D,EAAE9J,YAAO,IAAS8J,EAAE9J,MAAM8J,EAAE9J,MAAM,KAAK07E,GAAGzsE,GAAGnF,EAAEi0E,QAAQb,GAAGjuE,EAAEiwD,UAAUp1D,EAAEA,EAAEy+D,gBAAgBt5D,EAAEkvE,GAAGlvE,EAAEiF,EAAEF,EAAEC,GAAGhF,EAAEy7E,GAAG,KAAKz7E,EAAEiF,GAAE,EAAGnK,EAAEkK,KAAKhF,EAAEi/D,IAAI,EAAEvjD,IAAG5gB,GAAGq1E,GAAGnwE,GAAGzT,GAAE,KAAKyT,EAAEnF,EAAEmK,GAAGhF,EAAEA,EAAEs/C,OAAct/C,EAAE,KAAK,GAAGiF,EAAEjF,EAAE2wE,YAAY5rE,EAAE,CAAsI,OAArI,OAAOA,IAAIA,EAAEirD,UAAU,KAAKhwD,EAAEgwD,UAAU,KAAKhwD,EAAErR,OAAO,GAAGoW,EAAE/E,EAAE8wE,aAAuB7rE,GAAVpK,EAAEoK,EAAE85D,OAAU95D,EAAE65D,UAAU9+D,EAAEvQ,KAAKwV,EAAEpK,EAAEmF,EAAEi/D,IAQja,SAAYl6D,GAAG,GAAG,oBAAoBA,EAAE,OAAO61E,GAAG71E,GAAG,EAAE,EAAE,QAAG,IAASA,GAAG,OAAOA,EAAE,CAAc,IAAbA,EAAEA,EAAE85D,YAAgBT,EAAG,OAAO,GAAG,GAAGr5D,IAAIw5D,EAAG,OAAO,EAAE,CAAC,OAAO,CAAC,CARsRulB,CAAG7+E,GAAGF,EAAEqmE,GAAGnmE,EAAEF,GAAUlK,GAAG,KAAK,EAAEmF,EAAE+6E,GAAG,KAAK/6E,EAAEiF,EAAEF,EAAEC,GAAG,MAAMD,EAAE,KAAK,EAAE/E,EAAEq7E,GAAG,KAAKr7E,EAAEiF,EACpfF,EAAEC,GAAG,MAAMD,EAAE,KAAK,GAAG/E,EAAEy6E,GAAG,KAAKz6E,EAAEiF,EAAEF,EAAEC,GAAG,MAAMD,EAAE,KAAK,GAAG/E,EAAE26E,GAAG,KAAK36E,EAAEiF,EAAEmmE,GAAGnmE,EAAExV,KAAKsV,GAAGC,GAAG,MAAMD,EAAE,MAAMzU,MAAMsB,EAAE,IAAIqT,EAAE,IAAK,CAAC,OAAOjF,EAAE,KAAK,EAAE,OAAOiF,EAAEjF,EAAEvQ,KAAKoL,EAAEmF,EAAE8wE,aAA2CiK,GAAGh2E,EAAE/E,EAAEiF,EAArCpK,EAAEmF,EAAE2wE,cAAc1rE,EAAEpK,EAAEuwE,GAAGnmE,EAAEpK,GAAcmK,GAAG,KAAK,EAAE,OAAOC,EAAEjF,EAAEvQ,KAAKoL,EAAEmF,EAAE8wE,aAA2CuK,GAAGt2E,EAAE/E,EAAEiF,EAArCpK,EAAEmF,EAAE2wE,cAAc1rE,EAAEpK,EAAEuwE,GAAGnmE,EAAEpK,GAAcmK,GAAG,KAAK,EAAED,EAAE,CAAO,GAAN22E,GAAG17E,GAAM,OAAO+E,EAAE,MAAMzU,MAAMsB,EAAE,MAAMqT,EAAEjF,EAAE8wE,aAA+Bj2E,GAAlBC,EAAEkF,EAAE85D,eAAkB9mB,QAAQi6B,GAAGloE,EAAE/E,GAAG2tE,GAAG3tE,EAAEiF,EAAE,KAAKD,GAAG,IAAIE,EAAElF,EAAE85D,cAA0B,GAAZ70D,EAAEC,EAAE8tC,QAAW3yC,GAAGvF,EAAEg/E,aAAY,CAAC,GAAGh/E,EAAE,CAACk4C,QAAQ/tC,EAAE60E,cAAa,EACnftqD,MAAMtqB,EAAEsqB,MAAM+zD,YAAYr+E,EAAEq+E,aAAavjF,EAAE0sE,YAAYC,UAAU7xE,EAAEkF,EAAE85D,cAAch/D,EAAU,IAARkF,EAAErR,MAAU,CAAiBqR,EAAE27E,GAAG52E,EAAE/E,EAAEiF,EAAED,EAA3BnK,EAAEvK,MAAMsB,EAAE,OAAsB,MAAMmT,CAAC,CAAM,GAAGE,IAAIpK,EAAE,CAAiBmF,EAAE27E,GAAG52E,EAAE/E,EAAEiF,EAAED,EAA3BnK,EAAEvK,MAAMsB,EAAE,OAAsB,MAAMmT,CAAC,CAAM,IAAI1E,IAAIiwE,GAAGtL,GAAGhlE,EAAEiwD,UAAUgiB,eAAe5B,GAAGrwE,EAAE0b,IAAE,EAAG80D,GAAG,KAAKD,IAAG,GAAIvrE,EAAEutE,GAAGvyE,EAAE,KAAKiF,EAAED,GAAGhF,EAAEs/C,MAAMt6C,EAAEA,GAAGA,EAAErW,OAAe,EAATqW,EAAErW,MAAS,KAAKqW,EAAEA,EAAE8nD,OAAQ,KAAI,CAAM,GAALwkB,KAAQrsE,IAAIpK,EAAE,CAACmF,EAAE06E,GAAG31E,EAAE/E,EAAEgF,GAAG,MAAMD,CAAC,CAACxY,GAAEwY,EAAE/E,EAAEiF,EAAED,EAAE,CAAChF,EAAEA,EAAEs/C,KAAK,CAAC,OAAOt/C,EAAE,KAAK,EAAE,OAAO+yE,GAAG/yE,GAAG,OAAO+E,GAAGosE,GAAGnxE,GAAGiF,EAAEjF,EAAEvQ,KAAKoL,EAAEmF,EAAE8wE,aAAah2E,EAAE,OAAOiK,EAAEA,EAAE85C,cAAc,KAAK35C,EAAErK,EAAE82B,SAClfwuC,EAAGl7D,EAAEpK,GAAGqK,EAAE,KAAK,OAAOpK,GAAGqlE,EAAGl7D,EAAEnK,KAAKkF,EAAErR,OAAO,IAAIysF,GAAGr2E,EAAE/E,GAAGzT,GAAEwY,EAAE/E,EAAEkF,EAAEF,GAAGhF,EAAEs/C,MAAM,KAAK,EAAE,OAAO,OAAOv6C,GAAGosE,GAAGnxE,GAAG,KAAK,KAAK,GAAG,OAAO87E,GAAG/2E,EAAE/E,EAAEgF,GAAG,KAAK,EAAE,OAAO6tE,GAAG7yE,EAAEA,EAAEiwD,UAAUgiB,eAAehtE,EAAEjF,EAAE8wE,aAAa,OAAO/rE,EAAE/E,EAAEs/C,MAAMgzB,GAAGtyE,EAAE,KAAKiF,EAAED,GAAGzY,GAAEwY,EAAE/E,EAAEiF,EAAED,GAAGhF,EAAEs/C,MAAM,KAAK,GAAG,OAAOr6C,EAAEjF,EAAEvQ,KAAKoL,EAAEmF,EAAE8wE,aAA2C2J,GAAG11E,EAAE/E,EAAEiF,EAArCpK,EAAEmF,EAAE2wE,cAAc1rE,EAAEpK,EAAEuwE,GAAGnmE,EAAEpK,GAAcmK,GAAG,KAAK,EAAE,OAAOzY,GAAEwY,EAAE/E,EAAEA,EAAE8wE,aAAa9rE,GAAGhF,EAAEs/C,MAAM,KAAK,EAAkD,KAAK,GAAG,OAAO/yD,GAAEwY,EAAE/E,EAAEA,EAAE8wE,aAAan/C,SAAS3sB,GAAGhF,EAAEs/C,MAAM,KAAK,GAAGv6C,EAAE,CAC9a,GAD+aE,EACtfjF,EAAEvQ,KAAKwqE,SAASp/D,EAAEmF,EAAE8wE,aAAah2E,EAAEkF,EAAE6+C,cAAwB8sB,GAAG3rE,EAAEiF,EAAfC,EAAErK,EAAEpN,OAAmB,OAAOqN,EAAE,GAAG4vE,GAAG5vE,EAAErN,MAAMyX,IAAI,GAAGpK,EAAE62B,WAAW92B,EAAE82B,WAAWhzB,GAAEosB,QAAQ,CAAC/qB,EAAE06E,GAAG31E,EAAE/E,EAAEgF,GAAG,MAAMD,CAAC,OAAO,IAAc,QAAVjK,EAAEkF,EAAEs/C,SAAiBxkD,EAAEi+D,OAAO/4D,GAAG,OAAOlF,GAAG,CAAC,IAAIqK,EAAErK,EAAEmxE,aAAa,GAAG,OAAO9mE,EAAE,CAACD,EAAEpK,EAAEwkD,MAAM,IAAI,IAAIh/C,EAAE6E,EAAE+mE,aAAa,OAAO5rE,GAAG,CAAC,GAAGA,EAAExN,UAAUmS,EAAE,CAAC,GAAG,IAAInK,EAAEmkE,IAAI,EAAC3+D,EAAE4sE,IAAI,EAAEloE,GAAGA,IAAKi6D,IAAI,EAAE,IAAIj7D,EAAElJ,EAAE4xE,YAAY,GAAG,OAAO1oE,EAAE,CAAY,IAAIrU,GAAfqU,EAAEA,EAAE8oE,QAAeC,QAAQ,OAAOp9E,EAAE2Q,EAAE06C,KAAK16C,GAAGA,EAAE06C,KAAKrrD,EAAEqrD,KAAKrrD,EAAEqrD,KAAK16C,GAAG0D,EAAE+oE,QAAQzsE,CAAC,CAAC,CAACxF,EAAEqxE,OAAOnnE,EAAgB,QAAd1E,EAAExF,EAAEk1D,aAAqB1vD,EAAE6rE,OACvfnnE,GAAGjH,GAAGjD,EAAEi+D,OAAO/zD,EAAEhF,GAAGmF,EAAEgnE,OAAOnnE,EAAE,KAAK,CAAC1E,EAAEA,EAAE06C,IAAI,CAAC,MAAM,GAAG,KAAKlgD,EAAEmkE,IAAI/5D,EAAEpK,EAAErL,OAAOuQ,EAAEvQ,KAAK,KAAKqL,EAAEwkD,WAAW,GAAG,KAAKxkD,EAAEmkE,IAAI,CAAY,GAAG,QAAd/5D,EAAEpK,EAAEi+D,QAAmB,MAAMzoE,MAAMsB,EAAE,MAAMsT,EAAEinE,OAAOnnE,EAAgB,QAAdG,EAAED,EAAE8qD,aAAqB7qD,EAAEgnE,OAAOnnE,GAAGjH,GAAGmH,EAAEF,EAAEhF,GAAGkF,EAAEpK,EAAEgyD,OAAO,MAAM5nD,EAAEpK,EAAEwkD,MAAM,GAAG,OAAOp6C,EAAEA,EAAE6zD,OAAOj+D,OAAO,IAAIoK,EAAEpK,EAAE,OAAOoK,GAAG,CAAC,GAAGA,IAAIlF,EAAE,CAACkF,EAAE,KAAK,KAAK,CAAa,GAAG,QAAfpK,EAAEoK,EAAE4nD,SAAoB,CAAChyD,EAAEi+D,OAAO7zD,EAAE6zD,OAAO7zD,EAAEpK,EAAE,KAAK,CAACoK,EAAEA,EAAE6zD,MAAM,CAACj+D,EAAEoK,CAAC,CAAC3Y,GAAEwY,EAAE/E,EAAEnF,EAAE82B,SAAS3sB,GAAGhF,EAAEA,EAAEs/C,KAAK,CAAC,OAAOt/C,EAAE,KAAK,EAAE,OAAOnF,EAAEmF,EAAEvQ,KAAKwV,EAAEjF,EAAE8wE,aAAan/C,SAASq6C,GAAGhsE,EAAEgF,GAAWC,EAAEA,EAAVpK,EAAEwxE,GAAGxxE,IAAUmF,EAAErR,OAChf,EAAEpC,GAAEwY,EAAE/E,EAAEiF,EAAED,GAAGhF,EAAEs/C,MAAM,KAAK,GAAG,OAAgBzkD,EAAEuwE,GAAXnmE,EAAEjF,EAAEvQ,KAAYuQ,EAAE8wE,cAA6B6J,GAAG51E,EAAE/E,EAAEiF,EAAtBpK,EAAEuwE,GAAGnmE,EAAExV,KAAKoL,GAAcmK,GAAG,KAAK,GAAG,OAAO81E,GAAG/1E,EAAE/E,EAAEA,EAAEvQ,KAAKuQ,EAAE8wE,aAAa9rE,GAAG,KAAK,GAAG,OAAOC,EAAEjF,EAAEvQ,KAAKoL,EAAEmF,EAAE8wE,aAAaj2E,EAAEmF,EAAE2wE,cAAc1rE,EAAEpK,EAAEuwE,GAAGnmE,EAAEpK,GAAG,OAAOkK,IAAIA,EAAEirD,UAAU,KAAKhwD,EAAEgwD,UAAU,KAAKhwD,EAAErR,OAAO,GAAGqR,EAAEi/D,IAAI,EAAE0I,GAAE1iE,IAAIF,GAAE,EAAGkjE,GAAGjoE,IAAI+E,GAAE,EAAGinE,GAAGhsE,EAAEgF,GAAG4pE,GAAG5uE,EAAEiF,EAAEpK,GAAGq0E,GAAGlvE,EAAEiF,EAAEpK,EAAEmK,GAAGy2E,GAAG,KAAKz7E,EAAEiF,GAAE,EAAGF,EAAEC,GAAG,KAAK,GAAG,OAAOu3E,GAAGx3E,EAAE/E,EAAEgF,GAAG,KAAK,GAAG,OAAOg2E,GAAGj2E,EAAE/E,EAAEgF,GAAG,MAAM1U,MAAMsB,EAAE,IAAIoO,EAAEi/D,KAAM,EAY7a3yE,EAAQy3F,2BAA2B,SAASh/E,GAAM,KAAKA,EAAEk6D,MAAeqP,GAAGvpE,EAAE,UAATqpE,MAAsBsV,GAAG3+E,EAAE,WAAW,EAAEzY,EAAQ03F,kCAAkC,SAASj/E,GAAG,GAAG,KAAKA,EAAEk6D,IAAI,CAAC,IAAIj/D,EAAEouE,KAAIppE,EAAEqpE,GAAGtpE,GAAGupE,GAAGvpE,EAAEC,EAAEhF,GAAG0jF,GAAG3+E,EAAEC,EAAE,CAAC,EAAE1Y,EAAQ23F,4BAA4B,SAASl/E,GAAG,OAAOA,EAAEk6D,KAAK,KAAK,EAAE,IAAIj/D,EAAE+E,EAAEkrD,UAAU,GAAGjwD,EAAE+qB,QAAQ+uC,cAAcggB,aAAa,CAAC,IAAI90E,EAAEqJ,GAAGrO,EAAE2oE,cAAc,IAAI3jE,IAAIqkE,GAAGrpE,EAAI,EAAFgF,GAAK47E,GAAE5gF,EAAE+pE,MAAK,KAAO,EAAFyD,MAAOyS,KAAKlV,MAAM,CAAC,MAAM,KAAK,GAAG,IAAI9lE,EAAEmpE,KAAI8T,IAAG,WAAW,OAAO5T,GAAGvpE,EAAE,EAAEE,EAAE,IAAGy+E,GAAG3+E,EAAE,GAAG,EACpezY,EAAQ43F,eAAe,SAASn/E,EAAE/E,GAAG,IAAIgF,EAAEwoE,GAAEA,IAAG,EAAE,IAAI,OAAOzoE,EAAE/E,EAAE,CAAC,QAAY,KAAJwtE,GAAExoE,KAAUi7E,KAAKrV,IAAIG,KAAK,CAAC,EAAEz+E,EAAQ63F,wBAAwB,SAASp/E,GAAG,MAAM,CAAC85D,SAAS2f,GAAG/wF,MAAMsX,EAAE,EAAEzY,EAAQ4mE,gBAAgB,SAASnuD,EAAE/E,EAAEgF,EAAEC,EAAEpK,EAAEC,EAAEoK,GAAG,OAAOo+E,GAAGv+E,EAAE/E,GAAE,EAAG,KAAKgF,EAAEC,EAAEpK,EAAEC,EAAEoK,EAAE,EAAE5Y,EAAQ83F,6BAA6B,SAASr/E,GAAG,MAAM,CAAC85D,SAAS4f,GAAGhxF,MAAMsX,EAAE,EAC9UzY,EAAQ+3F,yBAAyB,SAASt/E,EAAE/E,EAAEgF,EAAEC,EAAEpK,EAAEC,EAAEoK,EAAEC,EAAE7E,GAAqK,OAAlKyE,EAAEu+E,GAAGt+E,EAAEC,GAAE,EAAGF,EAAElK,EAAEC,EAAEoK,EAAEC,EAAE7E,IAAKxN,QAAQ0wF,GAAG,MAAMx+E,EAAED,EAAEgmB,SAAsBjwB,EAAEoyE,GAAhBjoE,EAAEmpE,KAAIvzE,EAAEwzE,GAAGrpE,KAAe4R,cAAS,IAAS5W,GAAG,OAAOA,EAAEA,EAAE,KAAKstE,GAAGtoE,EAAElK,GAAGiK,EAAEgmB,QAAQohD,MAAMtxE,EAAEsuE,GAAGpkE,EAAElK,EAAEoK,GAAG27E,GAAE77E,EAAEE,GAAUF,CAAC,EAAEzY,EAAQ4zC,aAAa,SAASn7B,EAAE/E,EAAEgF,GAAG,IAAIC,EAAE,EAAEzW,UAAU2B,aAAQ,IAAS3B,UAAU,GAAGA,UAAU,GAAG,KAAK,MAAM,CAACqwE,SAASf,EAAGjqE,IAAI,MAAMoR,EAAE,KAAK,GAAGA,EAAE0sB,SAAS5sB,EAAEktE,cAAcjyE,EAAEkyE,eAAeltE,EAAE,EAAE1Y,EAAQg4F,mBAAmB,SAASv/E,GAAG,MAAM,CAAC85D,SAAS6f,GAAGjxF,MAAMsX,EAAE,EACzezY,EAAQi4F,uBAAuB,SAASx/E,GAAG,MAAM,CAAC85D,SAAS8f,GAAGlxF,MAAMsX,EAAE,EAAEzY,EAAQk4F,mBAAmB,SAASz/E,GAAG,MAAM,CAAC85D,SAAS+f,GAAGnxF,MAAMsX,EAAE,EAAEzY,EAAQm4F,gBAAgB,SAAS1/E,GAAG,IAAI/E,EAAEspE,GAAEtkE,EAAEw6E,GAAEzI,WAAW,IAAI,OAAOyI,GAAEzI,WAAW,KAAKzN,GAAE,GAAGvkE,GAAG,CAAC,QAAQukE,GAAEtpE,EAAEw/E,GAAEzI,WAAW/xE,CAAC,CAAC,EAAE1Y,EAAQo4F,gBAAgB,SAAS3/E,EAAE/E,EAAEgF,EAAEC,EAAEpK,GAAG,IAAIC,EAAEwuE,GAAEpkE,EAAEs6E,GAAEzI,WAAW,IAAI,OAAOyI,GAAEzI,WAAW,KAAKzN,GAAE,EAAEvkE,EAAE/E,EAAEgF,EAAEC,EAAEpK,EAAE,CAAC,QAAQyuE,GAAExuE,EAAE0kF,GAAEzI,WAAW7xE,EAAE,IAAIsoE,IAAGyS,IAAI,CAAC,EAAE3zF,EAAQq4F,aAAaxF,GACvb7yF,EAAQs4F,kBAAkB,SAAS7/E,EAAE/E,GAAG,IAAImhE,GAAG,MAAM7wE,MAAMsB,EAAE,MAAMoO,EAAEm/E,GAAGp6E,EAAE/E,GAAG+E,EAAE,GAAG,IAAI,IAAIC,EAAE,EAAEA,EAAEhF,EAAE7P,OAAO6U,IAAID,EAAE7U,KAAKoxE,GAAGthE,EAAEgF,KAAK,IAAIhF,EAAE+E,EAAE5U,OAAO,EAAE,EAAE6P,EAAEA,IAAY,IAAI,IAAIiF,GAAfD,EAAED,EAAE/E,IAAepD,EAAE/B,EAAEoK,EAAED,EAAEozB,MAAMt9B,EAAEkK,EAAEnI,EAAEqI,EAAEpK,EAAEkK,EAAEqzB,OAAOlzB,EAAEnF,EAAE,EAAE,GAAGmF,EAAEA,IAAI,GAAGnF,IAAImF,EAAE,CAAC,IAAI7E,EAAEyE,EAAEI,GAAGnB,EAAE1D,EAAE1D,EAAEjN,EAAEqU,EAAE1D,EAAE83B,MAAM55B,EAAE8B,EAAEzD,EAAE+D,EAAEpC,EAAE8B,EAAE+3B,OAAO,GAAGpzB,GAAGjB,GAAGlJ,GAAG0D,GAAG3D,GAAGlL,GAAGuV,GAAGtE,EAAE,CAACmE,EAAE2B,OAAO1G,EAAE,GAAG,KAAK,CAAM,KAAKiF,IAAIjB,GAAGgB,EAAEozB,QAAQ93B,EAAE83B,OAAOx3B,EAAE9F,GAAG0D,EAAE0G,GAAG,CAAC1G,EAAE1D,IAAIwF,EAAE+3B,QAAQ75B,EAAE1D,EAAEwF,EAAEzD,EAAE/B,GAAG8F,EAAEsE,IAAI5E,EAAE+3B,OAAOnzB,EAAE1G,GAAGuG,EAAE2B,OAAO1G,EAAE,GAAG,KAAK,CAAM,KAAKlF,IAAI0D,GAAGwG,EAAEqzB,SAAS/3B,EAAE+3B,QAAQ1oC,EAAEsV,GAAGjB,EAAEnJ,GAAG,CAACmJ,EAAEiB,IAAI3E,EAAE83B,OAC/ep0B,EAAEiB,EAAE3E,EAAE1D,EAAEqI,GAAGtV,EAAEkL,IAAIyF,EAAE83B,MAAMv9B,EAAEmJ,GAAGe,EAAE2B,OAAO1G,EAAE,GAAG,KAAK,CAAC,CAAE,OAAO+E,CAAC,EAAEzY,EAAQu4F,iBAAiBpB,GAAGn3F,EAAQw4F,8BAA8B,SAAS//E,GAAiC,OAAO,QAA7BA,EAAE,QAAVA,EAAEq6D,EAAGr6D,IAAcw6D,EAAGx6D,GAAG,MAAqB,KAAKA,EAAEkrD,SAAS,EAAE3jE,EAAQy4F,4BAA4B,SAAShgF,GAAG,OAAO0+E,GAAG1+E,EAAE,EAAEzY,EAAQ04F,gBAAgB,SAASjgF,GAAG,IAAI/E,EAAEwtE,GAAEA,IAAG,EAAE,IAAIxoE,EAAEw6E,GAAEzI,WAAW9xE,EAAEqkE,GAAE,IAAIkW,GAAEzI,WAAW,KAAKzN,GAAE,EAAEvkE,GAAG,CAAC,QAAQukE,GAAErkE,EAAEu6E,GAAEzI,WAAW/xE,EAAM,KAAJwoE,GAAExtE,KAAUigF,KAAKlV,KAAK,CAAC,EAAEz+E,EAAQ24F,oBAAoB3D,GAAGh1F,EAAQ44F,UAAUhD,GACrd51F,EAAQ64F,YAAY,SAASpgF,EAAE/E,GAAG,IAAImhE,GAAG,MAAM7wE,MAAMsB,EAAE,MAAwC,IAA1BoO,EAAEk/E,GAAVn6E,EAAE+5E,GAAG/5E,GAAU/E,GAAGA,EAAEzO,MAAMuU,KAAK9F,GAAO+E,EAAE,EAAEA,EAAE/E,EAAE7P,QAAQ,CAAC,IAAI6U,EAAEhF,EAAE+E,KAAK,IAAI28D,GAAG18D,GAAG,CAAC,GAAG,IAAIA,EAAEi6D,KAAK6C,GAAG98D,EAAEirD,WAAW,OAAM,EAAG,IAAIjrD,EAAEA,EAAEs6C,MAAM,OAAOt6C,GAAGhF,EAAE9P,KAAK8U,GAAGA,EAAEA,EAAE8nD,OAAO,CAAC,CAAC,OAAM,CAAE,EAAExgE,EAAQ84F,yBAAyB,WAAW,OAAO9b,EAAC,EAChSh9E,EAAQ+4F,kCAAkC,SAAStgF,EAAE/E,GAAG,IAAImhE,GAAG,MAAM7wE,MAAMsB,EAAE,MAAM,IAAIoT,EAAE,EAAEC,EAAE,GAAGF,EAAE,CAAC+5E,GAAG/5E,GAAG,GAAG,IAAI,IAAIlK,EAAE,EAAEA,EAAEkK,EAAE5U,QAAQ,CAAC,IAAI2K,EAAEiK,EAAElK,KAAKqK,EAAEH,EAAElK,KAAKsK,EAAEnF,EAAEkF,GAAG,IAAG,IAAIpK,EAAEmkE,MAAMyC,GAAG5mE,MAAMikF,GAAGjkF,EAAEqK,KAAKF,EAAE/U,KAAK+uF,GAAG95E,MAAID,EAAMF,IAAIA,EAAEE,IAAIA,EAAElF,EAAE7P,QAAO,IAAI2K,EAAEA,EAAEwkD,MAAM,OAAOxkD,GAAGiK,EAAE7U,KAAK4K,EAAEoK,GAAGpK,EAAEA,EAAEgyD,OAAO,CAAC,GAAG9nD,EAAEhF,EAAE7P,OAAO,CAAC,IAAI4U,EAAE,GAAGC,EAAEhF,EAAE7P,OAAO6U,IAAID,EAAE7U,KAAK+uF,GAAGj/E,EAAEgF,KAAK,MAAM,2DAA4DC,EAAEo2B,KAAK,OAAO,+CAAgDt2B,EAAEs2B,KAAK,MAAM,CAAC,OAAO,IAAI,EAC9e/uC,EAAQg5F,sBAAsB,SAASvgF,GAAe,OAAZA,EAAEA,EAAEgmB,SAAcu0B,MAA2C,IAAlBv6C,EAAEu6C,MAAM2f,IAAmBS,EAAG36D,EAAEu6C,MAAM2Q,WAA0BlrD,EAAEu6C,MAAM2Q,UAApF,IAA8F,EACvK3jE,EAAQwpE,mBAAmB,SAAS/wD,GACkI,GAD/HA,EAAE,CAACgxD,WAAWhxD,EAAEgxD,WAAWE,QAAQlxD,EAAEkxD,QAAQD,oBAAoBjxD,EAAEixD,oBAAoBuvB,eAAexgF,EAAEwgF,eAAeC,kBAAkB,KAAKC,4BAA4B,KAAKC,4BAA4B,KAAKC,cAAc,KAAKC,wBAAwB,KAAKC,wBAAwB,KAAKC,gBAAgB,KAAKC,mBAAmB,KAAKC,eAAe,KAAKC,qBAAqBvoB,EAAGjE,uBAAuBysB,wBAAwBvC,GAAGwC,wBAAwBphF,EAAEohF,yBACzevC,GAAGwC,4BAA4B,KAAKC,gBAAgB,KAAKC,aAAa,KAAKC,kBAAkB,KAAKC,gBAAgB,KAAKC,kBAAkB,6BAAgC,qBAAqBC,+BAA+B3hF,GAAE,MAAO,CAAC,IAAI/E,EAAE0mF,+BAA+B,GAAG1mF,EAAE2mF,aAAa3mF,EAAE4mF,cAAc7hF,GAAE,MAAO,CAAC,IAAIylE,GAAGxqE,EAAEy1D,OAAO1wD,GAAG0lE,GAAGzqE,CAAC,CAAC,MAAMgF,GAAG,CAACD,IAAE/E,EAAE6mF,QAAc,CAAC,CAAC,OAAO9hF,CAAC,EAAEzY,EAAQw6F,mBAAmB,WAAW,OAAM,CAAE,EACtax6F,EAAQy6F,oBAAoB,SAAShiF,EAAE/E,EAAEgF,EAAEC,GAAG,IAAIk8D,GAAG,MAAM7wE,MAAMsB,EAAE,MAAMmT,EAAEo6E,GAAGp6E,EAAE/E,GAAG,IAAInF,EAAEmnE,GAAGj9D,EAAEC,EAAEC,GAAGwvD,WAAW,MAAM,CAACA,WAAW,WAAW55D,GAAG,EAAE,EAAEvO,EAAQ06F,kCAAkC,SAASjiF,EAAE/E,GAAG,IAAIgF,EAAEhF,EAAEinF,YAAYjiF,EAAEA,EAAEhF,EAAEknF,SAAS,MAAMniF,EAAEs+E,gCAAgCt+E,EAAEs+E,gCAAgC,CAACrjF,EAAEgF,GAAGD,EAAEs+E,gCAAgCnzF,KAAK8P,EAAEgF,EAAE,EAAE1Y,EAAQ66F,gBAAgB,SAASpiF,EAAE/E,GAAG,IAAIgF,EAAEskE,GAAE,IAAI,OAAOA,GAAEvkE,EAAE/E,GAAG,CAAC,QAAQspE,GAAEtkE,CAAC,CAAC,EAAE1Y,EAAQ86F,YAAY,WAAW,OAAO,IAAI,EACne96F,EAAQ+6F,cAAc,WAAW,OAAM,CAAE,EAAE/6F,EAAQuoE,gBAAgB,SAAS9vD,EAAE/E,EAAEgF,EAAEC,GAAG,IAAIpK,EAAEmF,EAAE+qB,QAAQjwB,EAAEszE,KAAIlpE,EAAEmpE,GAAGxzE,GAAgL,OAA7KmK,EAAEw+E,GAAGx+E,GAAG,OAAOhF,EAAElN,QAAQkN,EAAElN,QAAQkS,EAAEhF,EAAE65E,eAAe70E,GAAEhF,EAAEktE,GAAGpyE,EAAEoK,IAAKmoE,QAAQ,CAACr6B,QAAQjuC,GAAuB,QAApBE,OAAE,IAASA,EAAE,KAAKA,KAAajF,EAAE4W,SAAS3R,GAAGqoE,GAAGzyE,EAAEmF,GAAe,QAAZ+E,EAAEupE,GAAGzzE,EAAEqK,EAAEpK,KAAa2yE,GAAG1oE,EAAElK,EAAEqK,GAAUA,CAAC,EAE7R5Y,CACX,qCClOE6wE,EAAO7wE,QAAU,EAAjB6wE,wCCAAA,EAAO7wE,QAAU,EAAjB6wE,uCCMW,SAASriE,EAAEiK,EAAE/E,GAAG,IAAIgF,EAAED,EAAE5U,OAAO4U,EAAE7U,KAAK8P,GAAG+E,EAAE,KAAK,EAAEC,GAAG,CAAC,IAAIC,EAAED,EAAE,IAAI,EAAEnK,EAAEkK,EAAEE,GAAG,KAAG,EAAEC,EAAErK,EAAEmF,IAA0B,MAAM+E,EAA7BA,EAAEE,GAAGjF,EAAE+E,EAAEC,GAAGnK,EAAEmK,EAAEC,CAAc,CAAC,CAAC,SAASE,EAAEJ,GAAG,OAAO,IAAIA,EAAE5U,OAAO,KAAK4U,EAAE,EAAE,CAAC,SAASzE,EAAEyE,GAAG,GAAG,IAAIA,EAAE5U,OAAO,OAAO,KAAK,IAAI6P,EAAE+E,EAAE,GAAGC,EAAED,EAAEtR,MAAM,GAAGuR,IAAIhF,EAAE,CAAC+E,EAAE,GAAGC,EAAED,EAAE,IAAI,IAAIE,EAAE,EAAEpK,EAAEkK,EAAE5U,OAAOE,EAAEwK,IAAI,EAAEoK,EAAE5U,GAAG,CAAC,IAAIV,EAAE,GAAGsV,EAAE,GAAG,EAAE0iE,EAAE5iE,EAAEpV,GAAGiC,EAAEjC,EAAE,EAAEiN,EAAEmI,EAAEnT,GAAG,GAAG,EAAEsT,EAAEyiE,EAAE3iE,GAAGpT,EAAEiJ,GAAG,EAAEqK,EAAEtI,EAAE+qE,IAAI5iE,EAAEE,GAAGrI,EAAEmI,EAAEnT,GAAGoT,EAAEC,EAAErT,IAAImT,EAAEE,GAAG0iE,EAAE5iE,EAAEpV,GAAGqV,EAAEC,EAAEtV,OAAQ,MAAGiC,EAAEiJ,GAAG,EAAEqK,EAAEtI,EAAEoI,IAA0B,MAAMD,EAA7BA,EAAEE,GAAGrI,EAAEmI,EAAEnT,GAAGoT,EAAEC,EAAErT,CAAc,EAAC,CAAC,OAAOoO,CAAC,CAC3c,SAASkF,EAAEH,EAAE/E,GAAG,IAAIgF,EAAED,EAAEuiF,UAAUtnF,EAAEsnF,UAAU,OAAO,IAAItiF,EAAEA,EAAED,EAAEhH,GAAGiC,EAAEjC,EAAE,CAAC,GAAG,kBAAkBmoB,aAAa,oBAAoBA,YAAYC,IAAI,CAAC,IAAIniB,EAAEkiB,YAAY55B,EAAQ09E,aAAa,WAAW,OAAOhmE,EAAEmiB,KAAK,CAAC,KAAK,CAAC,IAAI9lB,EAAEgmB,KAAKvlB,EAAET,EAAE8lB,MAAM75B,EAAQ09E,aAAa,WAAW,OAAO3pE,EAAE8lB,MAAMrlB,CAAC,CAAC,CAAC,IAAIF,EAAE,GAAGb,EAAE,GAAGkE,EAAE,EAAEzF,EAAE,KAAK3B,EAAE,EAAEC,GAAE,EAAG4B,GAAE,EAAGC,GAAE,EAAG2qE,EAAE,oBAAoBttB,WAAWA,WAAW,KAAK+tB,EAAE,oBAAoBphB,aAAaA,aAAa,KAAK4kB,EAAE,qBAAqBga,aAAaA,aAAa,KACnT,SAAS/Z,EAAEzoE,GAAG,IAAI,IAAI/E,EAAEmF,EAAEpF,GAAG,OAAOC,GAAG,CAAC,GAAG,OAAOA,EAAE4W,SAAStW,EAAEP,OAAQ,MAAGC,EAAEwnF,WAAWziF,GAAgD,MAA9CzE,EAAEP,GAAGC,EAAEsnF,UAAUtnF,EAAEynF,eAAe3sF,EAAE8F,EAAEZ,EAAa,CAACA,EAAEmF,EAAEpF,EAAE,CAAC,CAAC,SAASquE,EAAErpE,GAAa,GAAVpG,GAAE,EAAG6uE,EAAEzoE,IAAOrG,EAAE,GAAG,OAAOyG,EAAEvE,GAAGlC,GAAE,EAAGgd,EAAEu3D,OAAO,CAAC,IAAIjzE,EAAEmF,EAAEpF,GAAG,OAAOC,GAAG2zE,EAAEvF,EAAEpuE,EAAEwnF,UAAUziF,EAAE,CAAC,CACra,SAASkuE,EAAEluE,EAAE/E,GAAGtB,GAAE,EAAGC,IAAIA,GAAE,EAAGorE,EAAE6J,GAAGA,GAAG,GAAG92E,GAAE,EAAG,IAAIkI,EAAEnI,EAAE,IAAS,IAAL2wE,EAAExtE,GAAOxB,EAAE2G,EAAEvE,GAAG,OAAOpC,MAAMA,EAAEipF,eAAeznF,IAAI+E,IAAInD,MAAM,CAAC,IAAIqD,EAAEzG,EAAEoY,SAAS,GAAG,oBAAoB3R,EAAE,CAACzG,EAAEoY,SAAS,KAAK/Z,EAAE2B,EAAEkpF,cAAc,IAAI7sF,EAAEoK,EAAEzG,EAAEipF,gBAAgBznF,GAAGA,EAAE1T,EAAQ09E,eAAe,oBAAoBnvE,EAAE2D,EAAEoY,SAAS/b,EAAE2D,IAAI2G,EAAEvE,IAAIN,EAAEM,GAAG4sE,EAAExtE,EAAE,MAAMM,EAAEM,GAAGpC,EAAE2G,EAAEvE,EAAE,CAAC,GAAG,OAAOpC,EAAE,IAAInO,GAAE,MAAO,CAAC,IAAIV,EAAEwV,EAAEpF,GAAG,OAAOpQ,GAAGgkF,EAAEvF,EAAEz+E,EAAE63F,UAAUxnF,GAAG3P,GAAE,CAAE,CAAC,OAAOA,CAAC,CAAC,QAAQmO,EAAE,KAAK3B,EAAEmI,EAAElI,GAAE,CAAE,CAAC,CAD1a,qBAAqB88C,gBAAW,IAASA,UAAU+tC,iBAAY,IAAS/tC,UAAU+tC,WAAWC,gBAAgBhuC,UAAU+tC,WAAWC,eAAe32F,KAAK2oD,UAAU+tC,YAC2Q,IACzP9K,EAD6PlpE,GAAE,EAAGsgE,EAAE,KAAKL,GAAG,EAAE+F,EAAE,EAAEK,GAAG,EACvc,SAASp4E,IAAI,QAAOtV,EAAQ09E,eAAegQ,EAAEL,EAAO,CAAC,SAASptF,IAAI,GAAG,OAAO0nF,EAAE,CAAC,IAAIlvE,EAAEzY,EAAQ09E,eAAegQ,EAAEj1E,EAAE,IAAI/E,GAAE,EAAG,IAAIA,EAAEi0E,GAAE,EAAGlvE,EAAE,CAAC,QAAQ/E,EAAE68E,KAAKlpE,GAAE,EAAGsgE,EAAE,KAAK,CAAC,MAAMtgE,GAAE,CAAE,CAAO,GAAG,oBAAoB45D,EAAEsP,EAAE,WAAWtP,EAAEhhF,EAAE,OAAO,GAAG,qBAAqBs7F,eAAe,CAAC,IAAIjpF,EAAE,IAAIipF,eAAerI,EAAE5gF,EAAEkpF,MAAMlpF,EAAEmpF,MAAMztF,UAAU/N,EAAEswF,EAAE,WAAW2C,EAAEhnF,YAAY,KAAK,CAAC,MAAMqkF,EAAE,WAAWvT,EAAE/8E,EAAE,EAAE,EAAE,SAASmvB,EAAE3W,GAAGkvE,EAAElvE,EAAE4O,IAAIA,GAAE,EAAGkpE,IAAI,CAAC,SAASlJ,EAAE5uE,EAAE/E,GAAG4zE,EAAEtK,GAAE,WAAWvkE,EAAEzY,EAAQ09E,eAAe,GAAEhqE,EAAE,CAC5d1T,EAAQshE,sBAAsB,EAAEthE,EAAQ49E,2BAA2B,EAAE59E,EAAQ07F,qBAAqB,EAAE17F,EAAQg+E,wBAAwB,EAAEh+E,EAAQ27F,mBAAmB,KAAK37F,EAAQ89E,8BAA8B,EAAE99E,EAAQo9E,wBAAwB,SAAS3kE,GAAGA,EAAE6R,SAAS,IAAI,EAAEtqB,EAAQ47F,2BAA2B,WAAWxpF,GAAG5B,IAAI4B,GAAE,EAAGgd,EAAEu3D,GAAG,EAC1U3mF,EAAQ67F,wBAAwB,SAASpjF,GAAG,EAAEA,GAAG,IAAIA,EAAEtU,QAAQkC,MAAM,mHAAmHgnF,EAAE,EAAE50E,EAAE/C,KAAKi5B,MAAM,IAAIl2B,GAAG,CAAC,EAAEzY,EAAQ87F,iCAAiC,WAAW,OAAOvrF,CAAC,EAAEvQ,EAAQ+7F,8BAA8B,WAAW,OAAOljF,EAAEvE,EAAE,EAAEtU,EAAQg8F,cAAc,SAASvjF,GAAG,OAAOlI,GAAG,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,IAAImD,EAAE,EAAE,MAAM,QAAQA,EAAEnD,EAAE,IAAImI,EAAEnI,EAAEA,EAAEmD,EAAE,IAAI,OAAO+E,GAAG,CAAC,QAAQlI,EAAEmI,CAAC,CAAC,EAAE1Y,EAAQi8F,wBAAwB,WAAW,EAC9fj8F,EAAQw9E,sBAAsB,WAAW,EAAEx9E,EAAQk8F,yBAAyB,SAASzjF,EAAE/E,GAAG,OAAO+E,GAAG,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,QAAQA,EAAE,EAAE,IAAIC,EAAEnI,EAAEA,EAAEkI,EAAE,IAAI,OAAO/E,GAAG,CAAC,QAAQnD,EAAEmI,CAAC,CAAC,EAChM1Y,EAAQqhE,0BAA0B,SAAS5oD,EAAE/E,EAAEgF,GAAG,IAAIC,EAAE3Y,EAAQ09E,eAA8F,OAA/E,kBAAkBhlE,GAAG,OAAOA,EAAaA,EAAE,kBAAZA,EAAEA,EAAEyjF,QAA6B,EAAEzjF,EAAEC,EAAED,EAAEC,EAAGD,EAAEC,EAASF,GAAG,KAAK,EAAE,IAAIlK,GAAG,EAAE,MAAM,KAAK,EAAEA,EAAE,IAAI,MAAM,KAAK,EAAEA,EAAE,WAAW,MAAM,KAAK,EAAEA,EAAE,IAAI,MAAM,QAAQA,EAAE,IAAmN,OAAzMkK,EAAE,CAAChH,GAAGkG,IAAI2S,SAAS5W,EAAE0nF,cAAc3iF,EAAEyiF,UAAUxiF,EAAEyiF,eAAvD5sF,EAAEmK,EAAEnK,EAAoEysF,WAAW,GAAGtiF,EAAEC,GAAGF,EAAEuiF,UAAUtiF,EAAElK,EAAEiF,EAAEgF,GAAG,OAAOI,EAAEvE,IAAImE,IAAII,EAAEpF,KAAKpB,GAAGorE,EAAE6J,GAAGA,GAAG,GAAGj1E,GAAE,EAAGg1E,EAAEvF,EAAEppE,EAAEC,MAAMF,EAAEuiF,UAAUzsF,EAAEC,EAAE8F,EAAEmE,GAAGrG,GAAG5B,IAAI4B,GAAE,EAAGgd,EAAEu3D,KAAYluE,CAAC,EACnezY,EAAQs9E,qBAAqBhoE,EAAEtV,EAAQo8F,sBAAsB,SAAS3jF,GAAG,IAAI/E,EAAEnD,EAAE,OAAO,WAAW,IAAImI,EAAEnI,EAAEA,EAAEmD,EAAE,IAAI,OAAO+E,EAAErY,MAAMkB,KAAKY,UAAU,CAAC,QAAQqO,EAAEmI,CAAC,CAAC,CAAC,qCCf7Jm4D,EAAO7wE,QAAU,EAAjB6wE,gLC0RF,SAASwrB,EAAoBltD,EAAUmtD,GACrC,GAAIA,IAAaC,EAAAA,kBAEf,OADAp4F,QAAQC,KAAK,2FACN+qC,EAET,GAAImtD,IAAaE,EAAAA,qBAAuBF,IAAaG,EAAAA,sBAAuB,CAC1E,IAAIv1F,EAAQioC,EAASutD,WACrB,GAAc,OAAVx1F,EAAgB,CAClB,IAAMmxB,EAAU,GACVtxB,EAAWooC,EAASwtD,aAAa,YACvC,QAAiB,IAAb51F,EAUF,OAHA5C,QAAQkC,MACN,2GAEK8oC,EATP,IAAK,IAAIjqC,EAAI,EAAGA,EAAI6B,EAAS7C,MAAOgB,IAClCmzB,EAAQz0B,KAAKsB,GAEfiqC,EAASytD,SAASvkE,GAClBnxB,EAAQioC,EAASutD,UAOrB,CACA,IAAMG,EAAoB31F,EAAMhD,MAAQ,EAClC44F,EAAa,GACnB,GAAI51F,EACF,GAAIo1F,IAAaE,EAAAA,oBACf,IAAK,IAAIt3F,EAAI,EAAGA,GAAK23F,EAAmB33F,IACtC43F,EAAWl5F,KAAKsD,EAAM61F,KAAK,IAC3BD,EAAWl5F,KAAKsD,EAAM61F,KAAK73F,IAC3B43F,EAAWl5F,KAAKsD,EAAM61F,KAAK73F,EAAI,SAGjC,IAAK,IAAIA,EAAI,EAAGA,EAAI23F,EAAmB33F,IACjCA,EAAI,IAAM,GACZ43F,EAAWl5F,KAAKsD,EAAM61F,KAAK73F,IAC3B43F,EAAWl5F,KAAKsD,EAAM61F,KAAK73F,EAAI,IAC/B43F,EAAWl5F,KAAKsD,EAAM61F,KAAK73F,EAAI,MAE/B43F,EAAWl5F,KAAKsD,EAAM61F,KAAK73F,EAAI,IAC/B43F,EAAWl5F,KAAKsD,EAAM61F,KAAK73F,EAAI,IAC/B43F,EAAWl5F,KAAKsD,EAAM61F,KAAK73F,KAK/B43F,EAAWj5F,OAAS,IAAMg5F,GAC5B14F,QAAQkC,MAAM,oGAEhB,IAAM22F,EAAc7tD,EAASztB,QAG7B,OAFAs7E,EAAYJ,SAASE,GACrBE,EAAYC,cACLD,CACT,CAEE,OADA74F,QAAQkC,MAAM,sEAAuEi2F,GAC9EntD,CAEX,CCrVsE,IAChE+tD,EAAU,SAAAC,IAAAxzF,EAAAA,EAAAA,GAAAuzF,EAAAC,GAAA,IAAAvzF,GAAAC,EAAAA,EAAAA,GAAAqzF,GACd,SAAAA,EAAYvzD,GAAS,IAAA5/B,EAkDhB,OAlDgBC,EAAAA,EAAAA,GAAA,KAAAkzF,IACnBnzF,EAAAH,EAAAlJ,KAAA,KAAMipC,IACDyzD,YAAc,KACnBrzF,EAAKszF,WAAa,KAClBtzF,EAAKuzF,eAAiB,KACtBvzF,EAAKwzF,gBAAkB,GACvBxzF,EAAKyzF,UAAS,SAASC,GACrB,OAAO,IAAIC,EAAgCD,EAC7C,IACA1zF,EAAKyzF,UAAS,SAASC,GACrB,OAAO,IAAIE,EAA2BF,EACxC,IACA1zF,EAAKyzF,UAAS,SAASC,GACrB,OAAO,IAAIG,EAAyBH,EACtC,IACA1zF,EAAKyzF,UAAS,SAASC,GACrB,OAAO,IAAII,EAAyBJ,EACtC,IACA1zF,EAAKyzF,UAAS,SAASC,GACrB,OAAO,IAAIK,EAA4BL,EACzC,IACA1zF,EAAKyzF,UAAS,SAASC,GACrB,OAAO,IAAIM,EAAmCN,EAChD,IACA1zF,EAAKyzF,UAAS,SAASC,GACrB,OAAO,IAAIO,EAA6BP,EAC1C,IACA1zF,EAAKyzF,UAAS,SAASC,GACrB,OAAO,IAAIQ,EAA0BR,EACvC,IACA1zF,EAAKyzF,UAAS,SAASC,GACrB,OAAO,IAAIS,EAAuCT,EACpD,IACA1zF,EAAKyzF,UAAS,SAASC,GACrB,OAAO,IAAIU,EAA+BV,EAC5C,IACA1zF,EAAKyzF,UAAS,SAASC,GACrB,OAAO,IAAIW,EAAkCX,EAC/C,IACA1zF,EAAKyzF,UAAS,SAASC,GACrB,OAAO,IAAIY,EAAiCZ,EAC9C,IACA1zF,EAAKyzF,UAAS,SAASC,GACrB,OAAO,IAAIa,EAAoBb,EACjC,IACA1zF,EAAKyzF,UAAS,SAASC,GACrB,OAAO,IAAIc,EAAuBd,EACpC,IACA1zF,EAAKyzF,UAAS,SAASC,GACrB,OAAO,IAAIe,EAAsBf,EACnC,IAAG1zF,CACL,CAqJC,OArJAkC,EAAAA,EAAAA,GAAAixF,EAAA,EAAA31F,IAAA,OAAApG,MACD,SAAKkI,EAAK6jC,EAAQC,EAAYC,GAC5B,IACIqxD,EADEz9C,EAAQ1/C,KAGZm9F,EADwB,KAAtBn9F,KAAKm9F,aACQn9F,KAAKm9F,aACG,KAAdn9F,KAAKgwC,KACChwC,KAAKgwC,KAELotD,EAAAA,YAAYC,eAAet1F,GAE5C/H,KAAKqoC,QAAQi1D,UAAUv1F,GACvB,IAAMw1F,EAAW,SAAStwF,GACpB6+B,EACFA,EAAQ7+B,GAERpK,QAAQkC,MAAMkI,GAEhByyC,EAAMrX,QAAQm1D,UAAUz1F,GACxB23C,EAAMrX,QAAQo1D,QAAQ11F,EACxB,EACMuoC,EAAS,IAAIotD,EAAAA,WAAW19F,KAAKqoC,SACnCiI,EAAOI,QAAQ1wC,KAAKgwC,MACpBM,EAAOqtD,gBAAgB,eACvBrtD,EAAOstD,iBAAiB59F,KAAK69F,eAC7BvtD,EAAOwtD,mBAAmB99F,KAAK+9F,iBAC/BztD,EAAO8sB,KACLr1D,GACA,SAAS4E,GACP,IACE+yC,EAAMs+C,MACJrxF,EACAwwF,GACA,SAASc,GACPryD,EAAOqyD,GACPv+C,EAAMrX,QAAQo1D,QAAQ11F,EACxB,GACAw1F,EAEJ,CAAE,MAAOtwF,GACPswF,EAAStwF,EACX,CACF,GACA4+B,EACA0xD,EAEJ,GAAC,CAAAt3F,IAAA,iBAAApG,MACD,SAAei8F,GAEb,OADA97F,KAAK87F,YAAcA,EACZ97F,IACT,GAAC,CAAAiG,IAAA,eAAApG,MACD,WACE,MAAM,IAAI6C,MAAM,mGAClB,GAAC,CAAAuD,IAAA,gBAAApG,MACD,SAAck8F,GAEZ,OADA/7F,KAAK+7F,WAAaA,EACX/7F,IACT,GAAC,CAAAiG,IAAA,oBAAApG,MACD,SAAkBm8F,GAEhB,OADAh8F,KAAKg8F,eAAiBA,EACfh8F,IACT,GAAC,CAAAiG,IAAA,WAAApG,MACD,SAASmpB,GAIP,OAHgD,IAA5ChpB,KAAKi8F,gBAAgB10F,QAAQyhB,IAC/BhpB,KAAKi8F,gBAAgB35F,KAAK0mB,GAErBhpB,IACT,GAAC,CAAAiG,IAAA,aAAApG,MACD,SAAWmpB,GAIT,OAHgD,IAA5ChpB,KAAKi8F,gBAAgB10F,QAAQyhB,IAC/BhpB,KAAKi8F,gBAAgBnjF,OAAO9Y,KAAKi8F,gBAAgB10F,QAAQyhB,GAAW,GAE/DhpB,IACT,GAAC,CAAAiG,IAAA,QAAApG,MACD,SAAM8M,EAAMqjC,EAAMpE,EAAQE,GACxB,IAAIoyD,EACE9tD,EAAa,CAAC,EACd+tD,EAAU,CAAC,EACjB,GAAoB,kBAATxxF,EACTuxF,EAAOE,KAAKJ,MAAMrxF,QACb,GAAIA,aAAgB0xF,YAAa,CAEtC,GADcjB,EAAAA,YAAYkB,WAAW,IAAIt3F,WAAW2F,EAAKhM,MAAM,EAAG,OACpD49F,EAA+B,CAC3C,IACEnuD,EAAWouD,EAAWC,iBAAmB,IAAIC,EAAoB/xF,EACnE,CAAE,MAAO5H,GAGP,YAFI+mC,GACFA,EAAQ/mC,GAEZ,CACAm5F,EAAOE,KAAKJ,MAAM5tD,EAAWouD,EAAWC,iBAAiBE,QAC3D,MACET,EAAOE,KAAKJ,MAAMZ,EAAAA,YAAYkB,WAAW,IAAIt3F,WAAW2F,IAE5D,MACEuxF,EAAOvxF,EAET,QAAmB,IAAfuxF,EAAKU,OAAoBV,EAAKU,MAAMv2B,QAAQ,GAAK,EAC/Cv8B,GACFA,EAAQ,IAAIppC,MAAM,gFAFtB,CAKA,IAAMy5F,EAAS,IAAI0C,GAAWX,EAAM,CAClCluD,KAAMA,GAAQhwC,KAAKm9F,cAAgB,GACnC2B,YAAa9+F,KAAK8+F,YAClBjB,cAAe79F,KAAK69F,cACpBx1D,QAASroC,KAAKqoC,QACd0zD,WAAY/7F,KAAK+7F,WACjBC,eAAgBh8F,KAAKg8F,iBAEvBG,EAAO4C,WAAWnB,iBAAiB59F,KAAK69F,eACxC,IAAK,IAAIj6F,EAAI,EAAGA,EAAI5D,KAAKi8F,gBAAgB15F,OAAQqB,IAAK,CACpD,IAAMo7F,EAASh/F,KAAKi8F,gBAAgBr4F,GAAGu4F,GACvCgC,EAAQa,EAAO7+F,MAAQ6+F,EACvB5uD,EAAW4uD,EAAO7+F,OAAQ,CAC5B,CACA,GAAI+9F,EAAKe,eACP,IAAK,IAAIr7F,EAAI,EAAGA,EAAIs6F,EAAKe,eAAe18F,SAAUqB,EAAG,CACnD,IAAMs7F,EAAgBhB,EAAKe,eAAer7F,GACpCu7F,EAAqBjB,EAAKiB,oBAAsB,GACtD,OAAQD,GACN,KAAKV,EAAWY,oBACdhvD,EAAW8uD,GAAiB,IAAIG,EAChC,MACF,KAAKb,EAAWc,2BACdlvD,EAAW8uD,GAAiB,IAAIK,EAAkCrB,EAAMl+F,KAAK87F,aAC7E,MACF,KAAK0C,EAAWgB,sBACdpvD,EAAW8uD,GAAiB,IAAIO,EAChC,MACF,KAAKjB,EAAWkB,sBACdtvD,EAAW8uD,GAAiB,IAAIS,EAChC,MACF,QACMR,EAAmB53F,QAAQ23F,IAAkB,QAAgC,IAA3Bf,EAAQe,IAC5Dr8F,QAAQC,KAAK,wCAA0Co8F,EAAgB,MAG/E,CAEF/C,EAAOyD,cAAcxvD,GACrB+rD,EAAO0D,WAAW1B,GAClBhC,EAAO6B,MAAMpyD,EAAQE,EAzCrB,CA0CF,GAAC,CAAA7lC,IAAA,aAAApG,MACD,SAAW8M,EAAMqjC,GACf,IAAM0P,EAAQ1/C,KACd,OAAO,IAAII,SAAQ,SAASC,EAASC,GACnCo/C,EAAMs+C,MAAMrxF,EAAMqjC,EAAM3vC,EAASC,EACnC,GACF,KAACs7F,CAAA,CAzMa,CAASkE,EAAAA,QA2MzB,SAASC,IACP,IAAI1vC,EAAU,CAAC,EACf,MAAO,CACL7rD,IAAK,SAASyB,GACZ,OAAOoqD,EAAQpqD,EACjB,EACA6hB,IAAK,SAAS7hB,EAAK+3B,GACjBqyB,EAAQpqD,GAAO+3B,CACjB,EACA4C,OAAQ,SAAS36B,UACRoqD,EAAQpqD,EACjB,EACA+5F,UAAW,WACT3vC,EAAU,CAAC,CACb,EAEJ,CACA,IAAMmuC,EAAa,CACjBC,gBAAiB,kBACjBa,2BAA4B,6BAC5BW,oBAAqB,sBACrBC,wBAAyB,0BACzBC,kBAAmB,oBACnBC,oBAAqB,sBACrBC,uBAAwB,yBACxBC,2BAA4B,6BAC5BC,0BAA2B,4BAC3BC,yBAA0B,2BAC1BpB,oBAAqB,sBACrBqB,qBAAsB,uBACtBC,mBAAoB,qBACpBlB,sBAAuB,wBACvBE,sBAAuB,wBACvBiB,gCAAiC,kCACjCC,iBAAkB,mBAClBC,iBAAkB,mBAClBC,wBAAyB,0BACzBC,wBAAyB,2BAErB/D,EAAmB,WACvB,SAAAA,EAAYb,IAAQzzF,EAAAA,EAAAA,GAAA,KAAAs0F,GAClBh9F,KAAKm8F,OAASA,EACdn8F,KAAKG,KAAOq+F,EAAWyB,oBACvBjgG,KAAK4hC,MAAQ,CAAErC,KAAM,CAAC,EAAGyhE,KAAM,CAAC,EAClC,CA6EC,OA7EAr2F,EAAAA,EAAAA,GAAAqyF,EAAA,EAAA/2F,IAAA,YAAApG,MACD,WAGE,IAFA,IAAMs8F,EAASn8F,KAAKm8F,OACd8E,EAAWjhG,KAAKm8F,OAAO+B,KAAKvtC,OAAS,GAClCuwC,EAAY,EAAGC,EAAaF,EAAS1+F,OAAQ2+F,EAAYC,EAAYD,IAAa,CACzF,IAAME,EAAUH,EAASC,GACrBE,EAAQhxD,YAAcgxD,EAAQhxD,WAAWpwC,KAAKG,YAAiD,IAAxCihG,EAAQhxD,WAAWpwC,KAAKG,MAAMkhG,OACvFlF,EAAOmF,YAAYthG,KAAK4hC,MAAOw/D,EAAQhxD,WAAWpwC,KAAKG,MAAMkhG,MAEjE,CACF,GAAC,CAAAp7F,IAAA,aAAApG,MACD,SAAW0hG,GACT,IAAMpF,EAASn8F,KAAKm8F,OACdqF,EAAW,SAAWD,EACxBE,EAAatF,EAAOv6D,MAAMp9B,IAAIg9F,GAClC,GAAIC,EACF,OAAOA,EACT,IAIIC,EAJExD,EAAO/B,EAAO+B,KAGdyD,IAFazD,EAAK9tD,YAAc8tD,EAAK9tD,WAAWpwC,KAAKG,OAAS,CAAC,GACxCyhG,QAAU,IACZL,GAErBM,EAAQ,IAAIC,EAAAA,MAAM,eACD,IAAnBH,EAASE,OACXA,EAAMrkE,UAAUmkE,EAASE,OAC3B,IAAME,OAA2B,IAAnBJ,EAASI,MAAmBJ,EAASI,MAAQ,EAC3D,OAAQJ,EAAS9/F,MACf,IAAK,eACH6/F,EAAY,IAAIM,EAAAA,iBAAiBH,IACvB9iG,OAAO0G,SAAShB,IAAI,EAAG,GAAI,GACrCi9F,EAAU55E,IAAI45E,EAAU3iG,QACxB,MACF,IAAK,SACH2iG,EAAY,IAAIO,EAAAA,WAAWJ,IACjB/wE,SAAWixE,EACrB,MACF,IAAK,QACHL,EAAY,IAAIQ,EAAAA,UAAUL,IAChB/wE,SAAWixE,EACrBJ,EAASQ,KAAOR,EAASQ,MAAQ,CAAC,EAClCR,EAASQ,KAAKC,oBAAkD,IAAjCT,EAASQ,KAAKC,eAA4BT,EAASQ,KAAKC,eAAiB,EACxGT,EAASQ,KAAKE,oBAAkD,IAAjCV,EAASQ,KAAKE,eAA4BV,EAASQ,KAAKE,eAAiBjuF,KAAKyF,GAAK,EAClH6nF,EAAUxoF,MAAQyoF,EAASQ,KAAKE,eAChCX,EAAUY,SAAW,EAAIX,EAASQ,KAAKC,eAAiBT,EAASQ,KAAKE,eACtEX,EAAU3iG,OAAO0G,SAAShB,IAAI,EAAG,GAAI,GACrCi9F,EAAU55E,IAAI45E,EAAU3iG,QACxB,MACF,QACE,MAAM,IAAI2D,MAAM,4CAA8Ci/F,EAAS9/F,MAU3E,OARA6/F,EAAUj8F,SAAShB,IAAI,EAAG,EAAG,GAC7Bi9F,EAAUa,MAAQ,EAClBC,GAAuBd,EAAWC,QACP,IAAvBA,EAASc,YACXf,EAAUe,UAAYd,EAASc,WACjCf,EAAUvhG,KAAOg8F,EAAOuG,iBAAiBf,EAASxhG,MAAQ,SAAWohG,GACrEE,EAAarhG,QAAQC,QAAQqhG,GAC7BvF,EAAOv6D,MAAM9Z,IAAI05E,EAAUC,GACpBA,CACT,GAAC,CAAAx7F,IAAA,gBAAApG,MACD,SAAcgC,EAAM+D,GAClB,GAAa,UAAT/D,EAEJ,OAAO7B,KAAK2iG,WAAW/8F,EACzB,GAAC,CAAAK,IAAA,uBAAApG,MACD,SAAqBqhG,GACnB,IAAM0B,EAAQ5iG,KACRm8F,EAASn8F,KAAKm8F,OAEdiF,EADOjF,EAAO+B,KACCvtC,MAAMuwC,GAErBK,GADWH,EAAQhxD,YAAcgxD,EAAQhxD,WAAWpwC,KAAKG,OAAS,CAAC,GAC7CkhG,MAC5B,YAAmB,IAAfE,EACK,KACFvhG,KAAK2iG,WAAWpB,GAAYrzC,MAAK,SAASmzC,GAC/C,OAAOlF,EAAO0G,YAAYD,EAAMhhE,MAAO2/D,EAAYF,EACrD,GACF,KAACrE,CAAA,CAlFsB,GAoFnBqC,EAA2B,WAC/B,SAAAA,KAAc32F,EAAAA,EAAAA,GAAA,KAAA22F,GACZr/F,KAAKG,KAAOq+F,EAAWY,mBACzB,CAoBC,OApBAz0F,EAAAA,EAAAA,GAAA00F,EAAA,EAAAp5F,IAAA,kBAAApG,MACD,WACE,OAAOijG,EAAAA,iBACT,GAAC,CAAA78F,IAAA,eAAApG,MACD,SAAakjG,EAAgBC,EAAa7G,GACxC,IAAMhd,EAAU,GAChB4jB,EAAelB,MAAQ,IAAIC,EAAAA,MAAM,EAAG,EAAG,GACvCiB,EAAeE,QAAU,EACzB,IAAMC,EAAoBF,EAAYG,qBACtC,GAAID,EAAmB,CACrB,GAAIv/F,MAAM0sC,QAAQ6yD,EAAkBE,iBAAkB,CACpD,IAAMhkC,EAAQ8jC,EAAkBE,gBAChCL,EAAelB,MAAMrkE,UAAU4hC,GAC/B2jC,EAAeE,QAAU7jC,EAAM,EACjC,MAC2C,IAAvC8jC,EAAkBG,kBACpBlkB,EAAQ78E,KAAK65F,EAAOmH,cAAcP,EAAgB,MAAOG,EAAkBG,iBAAkB,MAEjG,CACA,OAAOjjG,QAAQ88D,IAAIiiB,EACrB,KAACkgB,CAAA,CAvB8B,GAyB3BzC,EAAsC,WAC1C,SAAAA,EAAYT,IAAQzzF,EAAAA,EAAAA,GAAA,KAAAk0F,GAClB58F,KAAKm8F,OAASA,EACdn8F,KAAKG,KAAOq+F,EAAWmC,+BACzB,CAYC,OAZAh2F,EAAAA,EAAAA,GAAAiyF,EAAA,EAAA32F,IAAA,uBAAApG,MACD,SAAqB0jG,EAAeR,GAClC,IACMC,EADShjG,KAAKm8F,OACO+B,KAAKttC,UAAU2yC,GAC1C,IAAKP,EAAY5yD,aAAe4yD,EAAY5yD,WAAWpwC,KAAKG,MAC1D,OAAOC,QAAQC,UAEjB,IAAMmjG,EAAmBR,EAAY5yD,WAAWpwC,KAAKG,MAAMqjG,iBAI3D,YAHyB,IAArBA,IACFT,EAAeU,kBAAoBD,GAE9BpjG,QAAQC,SACjB,KAACu8F,CAAA,CAhByC,GAkBtCR,EAA+B,WACnC,SAAAA,EAAYD,IAAQzzF,EAAAA,EAAAA,GAAA,KAAA0zF,GAClBp8F,KAAKm8F,OAASA,EACdn8F,KAAKG,KAAOq+F,EAAW0B,uBACzB,CAoCC,OApCAv1F,EAAAA,EAAAA,GAAAyxF,EAAA,EAAAn2F,IAAA,kBAAApG,MACD,SAAgB0jG,GACd,IACMP,EADShjG,KAAKm8F,OACO+B,KAAKttC,UAAU2yC,GAC1C,OAAKP,EAAY5yD,YAAe4yD,EAAY5yD,WAAWpwC,KAAKG,MAErDujG,EAAAA,qBADE,IAEX,GAAC,CAAAz9F,IAAA,uBAAApG,MACD,SAAqB0jG,EAAeR,GAClC,IAAM5G,EAASn8F,KAAKm8F,OACd6G,EAAc7G,EAAO+B,KAAKttC,UAAU2yC,GAC1C,IAAKP,EAAY5yD,aAAe4yD,EAAY5yD,WAAWpwC,KAAKG,MAC1D,OAAOC,QAAQC,UAEjB,IAAM8+E,EAAU,GACVwkB,EAAYX,EAAY5yD,WAAWpwC,KAAKG,MAa9C,QAZkC,IAA9BwjG,EAAUC,kBACZb,EAAec,UAAYF,EAAUC,sBAEJ,IAA/BD,EAAUG,kBACZ3kB,EAAQ78E,KAAK65F,EAAOmH,cAAcP,EAAgB,eAAgBY,EAAUG,wBAEnC,IAAvCH,EAAUI,2BACZhB,EAAeiB,mBAAqBL,EAAUI,+BAEJ,IAAxCJ,EAAUM,2BACZ9kB,EAAQ78E,KAAK65F,EAAOmH,cAAcP,EAAgB,wBAAyBY,EAAUM,iCAE9C,IAArCN,EAAUO,yBACZ/kB,EAAQ78E,KAAK65F,EAAOmH,cAAcP,EAAgB,qBAAsBY,EAAUO,8BACnC,IAA3CP,EAAUO,uBAAuBv9E,OAAkB,CACrD,IAAMA,EAAQg9E,EAAUO,uBAAuBv9E,MAC/Co8E,EAAeoB,qBAAuB,IAAI/wD,EAAAA,QAAQzsB,EAAOA,EAC3D,CAEF,OAAOvmB,QAAQ88D,IAAIiiB,EACrB,KAACid,CAAA,CAxCkC,GA0C/BU,EAAiC,WACrC,SAAAA,EAAYX,IAAQzzF,EAAAA,EAAAA,GAAA,KAAAo0F,GAClB98F,KAAKm8F,OAASA,EACdn8F,KAAKG,KAAOq+F,EAAW+B,yBACzB,CAwCC,OAxCA51F,EAAAA,EAAAA,GAAAmyF,EAAA,EAAA72F,IAAA,kBAAApG,MACD,SAAgB0jG,GACd,IACMP,EADShjG,KAAKm8F,OACO+B,KAAKttC,UAAU2yC,GAC1C,OAAKP,EAAY5yD,YAAe4yD,EAAY5yD,WAAWpwC,KAAKG,MAErDujG,EAAAA,qBADE,IAEX,GAAC,CAAAz9F,IAAA,uBAAApG,MACD,SAAqB0jG,EAAeR,GAClC,IAAM5G,EAASn8F,KAAKm8F,OACd6G,EAAc7G,EAAO+B,KAAKttC,UAAU2yC,GAC1C,IAAKP,EAAY5yD,aAAe4yD,EAAY5yD,WAAWpwC,KAAKG,MAC1D,OAAOC,QAAQC,UAEjB,IAAM8+E,EAAU,GACVwkB,EAAYX,EAAY5yD,WAAWpwC,KAAKG,MAwB9C,YAvBoC,IAAhCwjG,EAAUS,oBACZrB,EAAesB,YAAcV,EAAUS,wBAEJ,IAAjCT,EAAUW,oBACZnlB,EAAQ78E,KAAK65F,EAAOmH,cAAcP,EAAgB,iBAAkBY,EAAUW,0BAE/C,IAA7BX,EAAUY,iBACZxB,EAAeyB,eAAiBb,EAAUY,qBAEK,IAA7CxB,EAAe0B,4BACjB1B,EAAe0B,0BAA4B,CAAC,IAAK,WAEL,IAA1Cd,EAAUe,8BACZ3B,EAAe0B,0BAA0B,GAAKd,EAAUe,kCAEZ,IAA1Cf,EAAUgB,8BACZ5B,EAAe0B,0BAA0B,GAAKd,EAAUgB,kCAEZ,IAA1ChB,EAAUiB,6BACZzlB,EAAQ78E,KACN65F,EAAOmH,cAAcP,EAAgB,0BAA2BY,EAAUiB,8BAGvExkG,QAAQ88D,IAAIiiB,EACrB,KAAC2d,CAAA,CA5CoC,GA8CjCN,EAA2B,WAC/B,SAAAA,EAAYL,IAAQzzF,EAAAA,EAAAA,GAAA,KAAA8zF,GAClBx8F,KAAKm8F,OAASA,EACdn8F,KAAKG,KAAOq+F,EAAW4B,mBACzB,CAgCC,OAhCAz1F,EAAAA,EAAAA,GAAA6xF,EAAA,EAAAv2F,IAAA,kBAAApG,MACD,SAAgB0jG,GACd,IACMP,EADShjG,KAAKm8F,OACO+B,KAAKttC,UAAU2yC,GAC1C,OAAKP,EAAY5yD,YAAe4yD,EAAY5yD,WAAWpwC,KAAKG,MAErDujG,EAAAA,qBADE,IAEX,GAAC,CAAAz9F,IAAA,uBAAApG,MACD,SAAqB0jG,EAAeR,GAClC,IAAM5G,EAASn8F,KAAKm8F,OACd6G,EAAc7G,EAAO+B,KAAKttC,UAAU2yC,GAC1C,IAAKP,EAAY5yD,aAAe4yD,EAAY5yD,WAAWpwC,KAAKG,MAC1D,OAAOC,QAAQC,UAEjB,IAAM8+E,EAAU,GAChB4jB,EAAe8B,WAAa,IAAI/C,EAAAA,MAAM,EAAG,EAAG,GAC5CiB,EAAe+B,eAAiB,EAChC/B,EAAegC,MAAQ,EACvB,IAAMpB,EAAYX,EAAY5yD,WAAWpwC,KAAKG,MAa9C,YAZmC,IAA/BwjG,EAAUqB,kBACZjC,EAAe8B,WAAWrnE,UAAUmmE,EAAUqB,uBAET,IAAnCrB,EAAUsB,uBACZlC,EAAe+B,eAAiBnB,EAAUsB,2BAER,IAAhCtB,EAAUuB,mBACZ/lB,EAAQ78E,KAAK65F,EAAOmH,cAAcP,EAAgB,gBAAiBY,EAAUuB,kBAAmB,YAE1D,IAApCvB,EAAUwB,uBACZhmB,EAAQ78E,KAAK65F,EAAOmH,cAAcP,EAAgB,oBAAqBY,EAAUwB,wBAE5E/kG,QAAQ88D,IAAIiiB,EACrB,KAACqd,CAAA,CApC8B,GAsC3BC,EAAkC,WACtC,SAAAA,EAAYN,IAAQzzF,EAAAA,EAAAA,GAAA,KAAA+zF,GAClBz8F,KAAKm8F,OAASA,EACdn8F,KAAKG,KAAOq+F,EAAW8B,0BACzB,CAuBC,OAvBA31F,EAAAA,EAAAA,GAAA8xF,EAAA,EAAAx2F,IAAA,kBAAApG,MACD,SAAgB0jG,GACd,IACMP,EADShjG,KAAKm8F,OACO+B,KAAKttC,UAAU2yC,GAC1C,OAAKP,EAAY5yD,YAAe4yD,EAAY5yD,WAAWpwC,KAAKG,MAErDujG,EAAAA,qBADE,IAEX,GAAC,CAAAz9F,IAAA,uBAAApG,MACD,SAAqB0jG,EAAeR,GAClC,IAAM5G,EAASn8F,KAAKm8F,OACd6G,EAAc7G,EAAO+B,KAAKttC,UAAU2yC,GAC1C,IAAKP,EAAY5yD,aAAe4yD,EAAY5yD,WAAWpwC,KAAKG,MAC1D,OAAOC,QAAQC,UAEjB,IAAM8+E,EAAU,GACVwkB,EAAYX,EAAY5yD,WAAWpwC,KAAKG,MAO9C,YANqC,IAAjCwjG,EAAUyB,qBACZrC,EAAesC,aAAe1B,EAAUyB,yBAEJ,IAAlCzB,EAAU2B,qBACZnmB,EAAQ78E,KAAK65F,EAAOmH,cAAcP,EAAgB,kBAAmBY,EAAU2B,sBAE1EllG,QAAQ88D,IAAIiiB,EACrB,KAACsd,CAAA,CA3BqC,GA6BlCC,EAA4B,WAChC,SAAAA,EAAYP,IAAQzzF,EAAAA,EAAAA,GAAA,KAAAg0F,GAClB18F,KAAKm8F,OAASA,EACdn8F,KAAKG,KAAOq+F,EAAWiC,oBACzB,CAwBC,OAxBA91F,EAAAA,EAAAA,GAAA+xF,EAAA,EAAAz2F,IAAA,kBAAApG,MACD,SAAgB0jG,GACd,IACMP,EADShjG,KAAKm8F,OACO+B,KAAKttC,UAAU2yC,GAC1C,OAAKP,EAAY5yD,YAAe4yD,EAAY5yD,WAAWpwC,KAAKG,MAErDujG,EAAAA,qBADE,IAEX,GAAC,CAAAz9F,IAAA,uBAAApG,MACD,SAAqB0jG,EAAeR,GAClC,IAAM5G,EAASn8F,KAAKm8F,OACd6G,EAAc7G,EAAO+B,KAAKttC,UAAU2yC,GAC1C,IAAKP,EAAY5yD,aAAe4yD,EAAY5yD,WAAWpwC,KAAKG,MAC1D,OAAOC,QAAQC,UAEjB,IAAM8+E,EAAU,GACVwkB,EAAYX,EAAY5yD,WAAWpwC,KAAKG,MAC9C4iG,EAAewC,eAA0C,IAA9B5B,EAAU6B,gBAA6B7B,EAAU6B,gBAAkB,OAC3D,IAA/B7B,EAAU8B,kBACZtmB,EAAQ78E,KAAK65F,EAAOmH,cAAcP,EAAgB,eAAgBY,EAAU8B,mBAE9E1C,EAAe2C,oBAAsB/B,EAAU+B,qBAAuB9yF,IACtE,IAAM+yF,EAAahC,EAAUiC,kBAAoB,CAAC,EAAG,EAAG,GAExD,OADA7C,EAAe6C,iBAAmB,IAAI9D,EAAAA,MAAM6D,EAAW,GAAIA,EAAW,GAAIA,EAAW,IAC9EvlG,QAAQ88D,IAAIiiB,EACrB,KAACud,CAAA,CA5B+B,GA8B5BC,EAAyB,WAC7B,SAAAA,EAAYR,IAAQzzF,EAAAA,EAAAA,GAAA,KAAAi0F,GAClB38F,KAAKm8F,OAASA,EACdn8F,KAAKG,KAAOq+F,EAAW2B,iBACzB,CAiBC,OAjBAx1F,EAAAA,EAAAA,GAAAgyF,EAAA,EAAA12F,IAAA,kBAAApG,MACD,SAAgB0jG,GACd,IACMP,EADShjG,KAAKm8F,OACO+B,KAAKttC,UAAU2yC,GAC1C,OAAKP,EAAY5yD,YAAe4yD,EAAY5yD,WAAWpwC,KAAKG,MAErDujG,EAAAA,qBADE,IAEX,GAAC,CAAAz9F,IAAA,uBAAApG,MACD,SAAqB0jG,EAAeR,GAClC,IACMC,EADShjG,KAAKm8F,OACO+B,KAAKttC,UAAU2yC,GAC1C,IAAKP,EAAY5yD,aAAe4yD,EAAY5yD,WAAWpwC,KAAKG,MAC1D,OAAOC,QAAQC,UAEjB,IAAMsjG,EAAYX,EAAY5yD,WAAWpwC,KAAKG,MAE9C,OADA4iG,EAAe8C,SAAwB,IAAlBlC,EAAUkC,IAAiBlC,EAAUkC,IAAM,IACzDzlG,QAAQC,SACjB,KAACs8F,CAAA,CArB4B,GAuBzBE,EAA8B,WAClC,SAAAA,EAAYV,IAAQzzF,EAAAA,EAAAA,GAAA,KAAAm0F,GAClB78F,KAAKm8F,OAASA,EACdn8F,KAAKG,KAAOq+F,EAAW6B,sBACzB,CA6BC,OA7BA11F,EAAAA,EAAAA,GAAAkyF,EAAA,EAAA52F,IAAA,kBAAApG,MACD,SAAgB0jG,GACd,IACMP,EADShjG,KAAKm8F,OACO+B,KAAKttC,UAAU2yC,GAC1C,OAAKP,EAAY5yD,YAAe4yD,EAAY5yD,WAAWpwC,KAAKG,MAErDujG,EAAAA,qBADE,IAEX,GAAC,CAAAz9F,IAAA,uBAAApG,MACD,SAAqB0jG,EAAeR,GAClC,IAAM5G,EAASn8F,KAAKm8F,OACd6G,EAAc7G,EAAO+B,KAAKttC,UAAU2yC,GAC1C,IAAKP,EAAY5yD,aAAe4yD,EAAY5yD,WAAWpwC,KAAKG,MAC1D,OAAOC,QAAQC,UAEjB,IAAM8+E,EAAU,GACVwkB,EAAYX,EAAY5yD,WAAWpwC,KAAKG,MAC9C4iG,EAAe+C,uBAAiD,IAA7BnC,EAAUoC,eAA4BpC,EAAUoC,eAAiB,OAClE,IAA9BpC,EAAUqC,iBACZ7mB,EAAQ78E,KAAK65F,EAAOmH,cAAcP,EAAgB,uBAAwBY,EAAUqC,kBAEtF,IAAML,EAAahC,EAAUsC,qBAAuB,CAAC,EAAG,EAAG,GAQ3D,OAPAlD,EAAemD,cAAgB,IAAIpE,EAAAA,MAAM6D,EAAW,GAAIA,EAAW,GAAIA,EAAW,SAC3C,IAAnChC,EAAUwC,sBACZhnB,EAAQ78E,KACN65F,EAAOmH,cAAcP,EAAgB,mBAAoBY,EAAUwC,qBAAsB,OAItF/lG,QAAQ88D,IAAIiiB,EACrB,KAAC0d,CAAA,CAjCiC,GAmC9BE,EAAgC,WACpC,SAAAA,EAAYZ,IAAQzzF,EAAAA,EAAAA,GAAA,KAAAq0F,GAClB/8F,KAAKm8F,OAASA,EACdn8F,KAAKG,KAAOq+F,EAAWgC,wBACzB,CA0BC,OA1BA71F,EAAAA,EAAAA,GAAAoyF,EAAA,EAAA92F,IAAA,kBAAApG,MACD,SAAgB0jG,GACd,IACMP,EADShjG,KAAKm8F,OACO+B,KAAKttC,UAAU2yC,GAC1C,OAAKP,EAAY5yD,YAAe4yD,EAAY5yD,WAAWpwC,KAAKG,MAErDujG,EAAAA,qBADE,IAEX,GAAC,CAAAz9F,IAAA,uBAAApG,MACD,SAAqB0jG,EAAeR,GAClC,IAAM5G,EAASn8F,KAAKm8F,OACd6G,EAAc7G,EAAO+B,KAAKttC,UAAU2yC,GAC1C,IAAKP,EAAY5yD,aAAe4yD,EAAY5yD,WAAWpwC,KAAKG,MAC1D,OAAOC,QAAQC,UAEjB,IAAM8+E,EAAU,GACVwkB,EAAYX,EAAY5yD,WAAWpwC,KAAKG,MAU9C,YATqC,IAAjCwjG,EAAUyC,qBACZrD,EAAesD,WAAa1C,EAAUyC,yBAEH,IAAjCzC,EAAU2C,qBACZvD,EAAeuD,mBAAqB3C,EAAU2C,yBAEZ,IAAhC3C,EAAU4C,mBACZpnB,EAAQ78E,KAAK65F,EAAOmH,cAAcP,EAAgB,gBAAiBY,EAAU4C,oBAExEnmG,QAAQ88D,IAAIiiB,EACrB,KAAC4d,CAAA,CA9BmC,GAgChCV,EAA0B,WAC9B,SAAAA,EAAYF,IAAQzzF,EAAAA,EAAAA,GAAA,KAAA2zF,GAClBr8F,KAAKm8F,OAASA,EACdn8F,KAAKG,KAAOq+F,EAAWkC,kBACzB,CAkBC,OAlBA/1F,EAAAA,EAAAA,GAAA0xF,EAAA,EAAAp2F,IAAA,cAAApG,MACD,SAAY2mG,GACV,IAAMrK,EAASn8F,KAAKm8F,OACd+B,EAAO/B,EAAO+B,KACduI,EAAavI,EAAKwI,SAASF,GACjC,IAAKC,EAAWr2D,aAAeq2D,EAAWr2D,WAAWpwC,KAAKG,MACxD,OAAO,KAET,IAAMwjG,EAAY8C,EAAWr2D,WAAWpwC,KAAKG,MACvCmwC,EAAS6rD,EAAOn0F,QAAQ+zF,WAC9B,IAAKzrD,EAAQ,CACX,GAAI4tD,EAAKiB,oBAAsBjB,EAAKiB,mBAAmB53F,QAAQvH,KAAKG,OAAS,EAC3E,MAAM,IAAIuC,MAAM,+EAEhB,OAAO,IAEX,CACA,OAAOy5F,EAAOwK,iBAAiBH,EAAc7C,EAAUh9F,OAAQ2pC,EACjE,KAAC+rD,CAAA,CAtB6B,GAwB1BC,EAAwB,WAC5B,SAAAA,EAAYH,IAAQzzF,EAAAA,EAAAA,GAAA,KAAA4zF,GAClBt8F,KAAKm8F,OAASA,EACdn8F,KAAKG,KAAOq+F,EAAWoC,iBACvB5gG,KAAK4mG,YAAc,IACrB,CAqCC,OArCAj8F,EAAAA,EAAAA,GAAA2xF,EAAA,EAAAr2F,IAAA,cAAApG,MACD,SAAY2mG,GACV,IAAMrmG,EAAOH,KAAKG,KACZg8F,EAASn8F,KAAKm8F,OACd+B,EAAO/B,EAAO+B,KACduI,EAAavI,EAAKwI,SAASF,GACjC,IAAKC,EAAWr2D,aAAeq2D,EAAWr2D,WAAWjwC,GACnD,OAAO,KAET,IAAMwjG,EAAY8C,EAAWr2D,WAAWjwC,GAClCwG,EAASu3F,EAAK2I,OAAOlD,EAAUh9F,QACjC2pC,EAAS6rD,EAAO2K,cACpB,GAAIngG,EAAOogG,IAAK,CACd,IAAMjmG,EAAUq7F,EAAOn0F,QAAQqgC,QAAQ2+D,WAAWrgG,EAAOogG,KACzC,OAAZjmG,IACFwvC,EAASxvC,EACb,CACA,OAAOd,KAAKinG,gBAAgB/4C,MAAK,SAAS04C,GACxC,GAAIA,EACF,OAAOzK,EAAOwK,iBAAiBH,EAAc7C,EAAUh9F,OAAQ2pC,GACjE,GAAI4tD,EAAKiB,oBAAsBjB,EAAKiB,mBAAmB53F,QAAQpH,IAAS,EACtE,MAAM,IAAIuC,MAAM,6DAElB,OAAOy5F,EAAO+K,YAAYV,EAC5B,GACF,GAAC,CAAAvgG,IAAA,gBAAApG,MACD,WAUE,OATKG,KAAK4mG,cACR5mG,KAAK4mG,YAAc,IAAIxmG,SAAQ,SAASC,GACtC,IAAM8sC,EAAQ,IAAIg6D,MAClBh6D,EAAMi6D,IAAM,kFACZj6D,EAAMk6D,OAASl6D,EAAMm6D,QAAU,WAC7BjnG,EAAyB,IAAjB8sC,EAAM1C,OAChB,CACF,KAEKzqC,KAAK4mG,WACd,KAACtK,CAAA,CA1C2B,GA4CxBC,EAAwB,WAC5B,SAAAA,EAAYJ,IAAQzzF,EAAAA,EAAAA,GAAA,KAAA6zF,GAClBv8F,KAAKm8F,OAASA,EACdn8F,KAAKG,KAAOq+F,EAAWqC,iBACvB7gG,KAAK4mG,YAAc,IACrB,CAqCC,OArCAj8F,EAAAA,EAAAA,GAAA4xF,EAAA,EAAAt2F,IAAA,cAAApG,MACD,SAAY2mG,GACV,IAAMrmG,EAAOH,KAAKG,KACZg8F,EAASn8F,KAAKm8F,OACd+B,EAAO/B,EAAO+B,KACduI,EAAavI,EAAKwI,SAASF,GACjC,IAAKC,EAAWr2D,aAAeq2D,EAAWr2D,WAAWjwC,GACnD,OAAO,KAET,IAAMwjG,EAAY8C,EAAWr2D,WAAWjwC,GAClCwG,EAASu3F,EAAK2I,OAAOlD,EAAUh9F,QACjC2pC,EAAS6rD,EAAO2K,cACpB,GAAIngG,EAAOogG,IAAK,CACd,IAAMjmG,EAAUq7F,EAAOn0F,QAAQqgC,QAAQ2+D,WAAWrgG,EAAOogG,KACzC,OAAZjmG,IACFwvC,EAASxvC,EACb,CACA,OAAOd,KAAKinG,gBAAgB/4C,MAAK,SAAS04C,GACxC,GAAIA,EACF,OAAOzK,EAAOwK,iBAAiBH,EAAc7C,EAAUh9F,OAAQ2pC,GACjE,GAAI4tD,EAAKiB,oBAAsBjB,EAAKiB,mBAAmB53F,QAAQpH,IAAS,EACtE,MAAM,IAAIuC,MAAM,6DAElB,OAAOy5F,EAAO+K,YAAYV,EAC5B,GACF,GAAC,CAAAvgG,IAAA,gBAAApG,MACD,WAUE,OATKG,KAAK4mG,cACR5mG,KAAK4mG,YAAc,IAAIxmG,SAAQ,SAASC,GACtC,IAAM8sC,EAAQ,IAAIg6D,MAClBh6D,EAAMi6D,IAAM,kbACZj6D,EAAMk6D,OAASl6D,EAAMm6D,QAAU,WAC7BjnG,EAAyB,IAAjB8sC,EAAM1C,OAChB,CACF,KAEKzqC,KAAK4mG,WACd,KAACrK,CAAA,CA1C2B,GA4CxBU,EAAsB,WAC1B,SAAAA,EAAYd,IAAQzzF,EAAAA,EAAAA,GAAA,KAAAu0F,GAClBj9F,KAAKG,KAAOq+F,EAAWsC,wBACvB9gG,KAAKm8F,OAASA,CAChB,CA2CC,OA3CAxxF,EAAAA,EAAAA,GAAAsyF,EAAA,EAAAh3F,IAAA,iBAAApG,MACD,SAAe+F,GACb,IAAMs4F,EAAOl+F,KAAKm8F,OAAO+B,KACnBqJ,EAAarJ,EAAKsJ,YAAY5hG,GACpC,GAAI2hG,EAAWn3D,YAAcm3D,EAAWn3D,WAAWpwC,KAAKG,MAAO,CAC7D,IAAMsnG,EAAeF,EAAWn3D,WAAWpwC,KAAKG,MAC1CiH,EAASpH,KAAKm8F,OAAOuL,cAAc,SAAUD,EAAargG,QAC1DugG,EAAU3nG,KAAKm8F,OAAOn0F,QAAQg0F,eACpC,IAAK2L,IAAYA,EAAQC,UAAW,CAClC,GAAI1J,EAAKiB,oBAAsBjB,EAAKiB,mBAAmB53F,QAAQvH,KAAKG,OAAS,EAC3E,MAAM,IAAIuC,MAAM,sFAEhB,OAAO,IAEX,CACA,OAAO0E,EAAO8mD,MAAK,SAASiP,GAC1B,IAAM0qC,EAAaJ,EAAaI,YAAc,EACxC73F,EAAay3F,EAAaz3F,YAAc,EACxCpN,EAAQ6kG,EAAa7kG,MACrBklG,EAASL,EAAaM,WACtBphG,EAAS,IAAIK,WAAWm2D,EAAK0qC,EAAY73F,GAC/C,OAAI23F,EAAQK,sBACHL,EAAQK,sBAAsBplG,EAAOklG,EAAQnhG,EAAQ8gG,EAAa71E,KAAM61E,EAAajyC,QAAQtH,MAAK,SAAS+5C,GAChH,OAAOA,EAAK7gG,MACd,IAEOugG,EAAQO,MAAMh6C,MAAK,WACxB,IAAMjwC,EAAS,IAAIogF,YAAYz7F,EAAQklG,GASvC,OARAH,EAAQQ,iBACN,IAAInhG,WAAWiX,GACfrb,EACAklG,EACAnhG,EACA8gG,EAAa71E,KACb61E,EAAajyC,QAERv3C,CACT,GAEJ,GACF,CACE,OAAO,IAEX,KAACg/E,CAAA,CA/CyB,GAiDtBC,EAAqB,WACzB,SAAAA,EAAYf,IAAQzzF,EAAAA,EAAAA,GAAA,KAAAw0F,GAClBl9F,KAAKG,KAAOq+F,EAAWuC,wBACvB/gG,KAAKm8F,OAASA,CAChB,CAoEC,OApEAxxF,EAAAA,EAAAA,GAAAuyF,EAAA,EAAAj3F,IAAA,iBAAApG,MACD,SAAeqhG,GAAW,IAAAz0F,EAAA,KAClByxF,EAAOl+F,KAAKm8F,OAAO+B,KACnBkD,EAAUlD,EAAKvtC,MAAMuwC,GAC3B,IAAKE,EAAQhxD,aAAegxD,EAAQhxD,WAAWpwC,KAAKG,YAA0B,IAAjBihG,EAAQprE,KACnE,OAAO,KAET,IAC0CppB,EADpCw7F,EAAUlK,EAAKmK,OAAOjH,EAAQprE,MAAMnpB,GAAAC,EAAAA,EAAAA,GAClBs7F,EAAQE,YAAU,IAA1C,IAAAz7F,EAAAE,MAAAH,EAAAC,EAAA7I,KAAAgJ,MAA4C,KAAjC+jD,EAASnkD,EAAA/M,MAClB,GAAIkxD,EAAUn/B,OAAS22E,EAAgBC,WAAaz3C,EAAUn/B,OAAS22E,EAAgBE,gBAAkB13C,EAAUn/B,OAAS22E,EAAgBG,mBAAmC,IAAnB33C,EAAUn/B,KACpK,OAAO,IAEX,CAAC,OAAApxB,GAAAqM,EAAAI,EAAAzM,EAAA,SAAAqM,EAAAK,GAAA,CACD,IACMy7F,EADevH,EAAQhxD,WAAWpwC,KAAKG,MACVyoG,WAC7BzpB,EAAU,GACVypB,EAAa,CAAC,EAAEpwC,EAAA,SAAAvyD,GAEpBk5E,EAAQ78E,KACNmK,EAAK0vF,OAAOuL,cAAc,WAAYiB,EAAc1iG,IAAMioD,MAAK,SAAC26C,GAE9D,OADAD,EAAW3iG,GAAO4iG,EACXD,EAAW3iG,EACpB,IAEJ,EAPA,IAAK,IAAMA,KAAO0iG,EAAanwC,EAAAvyD,GAQ/B,OAAIk5E,EAAQ58E,OAAS,EACZ,MAET48E,EAAQ78E,KAAKtC,KAAKm8F,OAAO2M,eAAe5H,IACjC9gG,QAAQ88D,IAAIiiB,GAASjxB,MAAK,SAACmP,GAChC,IAIyBzF,EAJnBmxC,EAAa1rC,EAAQx3D,MACrBwiG,EAASU,EAAWC,QAAUD,EAAWhlE,SAAW,CAACglE,GACrDnmG,EAAQy6D,EAAQ,GAAGz6D,MACnBqmG,EAAkB,GAAGpxC,GAAA/qD,EAAAA,EAAAA,GACRu7F,GAAM,IAAzB,IAAAxwC,EAAA9qD,MAAA6qD,EAAAC,EAAA7zD,KAAAgJ,MAA2B,CAMzB,IANyB,IAAhBgpB,EAAI4hC,EAAA/3D,MACPkC,EAAI,IAAIw6B,EAAAA,QACR9pB,EAAI,IAAI6pB,EAAAA,QACRppB,EAAI,IAAImmB,EAAAA,WACRtsB,EAAI,IAAIuvB,EAAAA,QAAQ,EAAG,EAAG,GACtB4sE,EAAgB,IAAIrpE,EAAAA,cAAc7J,EAAK6X,SAAU7X,EAAK9Y,SAAUta,GAC7DgB,EAAI,EAAGA,EAAIhB,EAAOgB,IACrBglG,EAAWO,aACb12F,EAAE22F,oBAAoBR,EAAWO,YAAavlG,GAE5CglG,EAAWS,UACbn2F,EAAEk2F,oBAAoBR,EAAWS,SAAUzlG,GAEzCglG,EAAWU,OACbv8F,EAAEq8F,oBAAoBR,EAAWU,MAAO1lG,GAE1CslG,EAAc9oE,YAAYx8B,EAAG7B,EAAEyhC,QAAQ/wB,EAAGS,EAAGnG,IAE/C,IAAK,IAAMw8F,KAAiBX,EACJ,gBAAlBW,GAAqD,aAAlBA,GAAkD,UAAlBA,GACrEvzE,EAAK6X,SAAS8H,aAAa4zD,EAAeX,EAAWW,IAGzD/sE,EAAAA,SAASr9B,UAAU8E,KAAK7E,KAAK8pG,EAAelzE,GAC5CvpB,EAAK0vF,OAAOqN,oBAAoBN,GAChCD,EAAgB3mG,KAAK4mG,EACvB,CAAC,OAAA1oG,GAAAq3D,EAAA5qD,EAAAzM,EAAA,SAAAq3D,EAAA3qD,GAAA,CACD,OAAI67F,EAAWC,SACbD,EAAW7rD,QACX6rD,EAAWjhF,IAAGhpB,MAAdiqG,EAAkBE,GACXF,GAEFE,EAAgB,EACzB,IACF,KAAC/L,CAAA,CAxEwB,GA0ErBqB,EAAgC,OAEhCkL,EAAuC,WAAvCA,EAAwD,QACxD/K,GAAmB/zF,EAAAA,EAAAA,IACvB,SAAA+zF,EAAY/xF,IAAMjE,EAAAA,EAAAA,GAAA,KAAAg2F,GAChB1+F,KAAKG,KAAOq+F,EAAWC,gBACvBz+F,KAAK2+F,QAAU,KACf3+F,KAAKwH,KAAO,KACZ,IAAMkiG,EAAa,IAAIC,SAASh9F,EAAM,EAPH,IAanC,GALA3M,KAAKgqC,OAAS,CACZ4/D,MAAOxM,EAAAA,YAAYkB,WAAW,IAAIt3F,WAAW2F,EAAKhM,MAAM,EAAG,KAC3D0nE,QAASqhC,EAAWG,UAAU,GAAG,GACjCtnG,OAAQmnG,EAAWG,UAAU,GAAG,IAE9B7pG,KAAKgqC,OAAO4/D,QAAUrL,EACxB,MAAM,IAAI77F,MAAM,qDACX,GAAI1C,KAAKgqC,OAAOq+B,QAAU,EAC/B,MAAM,IAAI3lE,MAAM,kDAKlB,IAHA,IAAMonG,EAAsB9pG,KAAKgqC,OAAOznC,OAlBL,GAmB7BwnG,EAAY,IAAIJ,SAASh9F,EAnBI,IAoB/Bq9F,EAAa,EACVA,EAAaF,GAAqB,CACvC,IAAMG,EAAcF,EAAUF,UAAUG,GAAY,GACpDA,GAAc,EACd,IAAME,EAAYH,EAAUF,UAAUG,GAAY,GAElD,GADAA,GAAc,EACVE,IAAcT,EAAmC,CACnD,IAAMU,EAAe,IAAInjG,WAAW2F,EA3BL,GA2B4Cq9F,EAAYC,GACvFjqG,KAAK2+F,QAAUvB,EAAAA,YAAYkB,WAAW6L,EACxC,MAAO,GAAID,IAAcT,EAAkC,CACzD,IAAM5B,EA9ByB,GA8BqBmC,EACpDhqG,KAAKwH,KAAOmF,EAAKhM,MAAMknG,EAAYA,EAAaoC,EAClD,CACAD,GAAcC,CAChB,CACA,GAAqB,OAAjBjqG,KAAK2+F,QACP,MAAM,IAAIj8F,MAAM,4CAEpB,IAEI68F,EAAiC,WACrC,SAAAA,EAAYrB,EAAMpC,GAChB,IAD6BpzF,EAAAA,EAAAA,GAAA,KAAA62F,IACxBzD,EACH,MAAM,IAAIp5F,MAAM,uDAElB1C,KAAKG,KAAOq+F,EAAWc,2BACvBt/F,KAAKk+F,KAAOA,EACZl+F,KAAK87F,YAAcA,EACnB97F,KAAK87F,YAAYnuC,SACnB,CAwCC,OAxCAhjD,EAAAA,EAAAA,GAAA40F,EAAA,EAAAt5F,IAAA,kBAAApG,MACD,SAAgBkxD,EAAWorC,GACzB,IAAM+B,EAAOl+F,KAAKk+F,KACZpC,EAAc97F,KAAK87F,YACnBsO,EAAkBr5C,EAAU3gB,WAAWpwC,KAAKG,MAAMonG,WAClD8C,EAAmBt5C,EAAU3gB,WAAWpwC,KAAKG,MAAMyoG,WACnD0B,EAAoB,CAAC,EACrBC,EAAyB,CAAC,EAC1BC,EAAmB,CAAC,EAC1B,IAAK,IAAMjB,KAAiBc,EAAkB,CAC5C,IAAMI,EAAqBC,EAAWnB,IAAkBA,EAAcnY,cACtEkZ,EAAkBG,GAAsBJ,EAAiBd,EAC3D,CACA,IAAK,IAAMA,KAAiBx4C,EAAU63C,WAAY,CAChD,IAAM6B,EAAqBC,EAAWnB,IAAkBA,EAAcnY,cACtE,QAAwC,IAApCiZ,EAAiBd,GAA2B,CAC9C,IAAMoB,EAAczM,EAAK0M,UAAU75C,EAAU63C,WAAWW,IAClDsB,EAAgBC,EAAsBH,EAAYE,eACxDL,EAAiBC,GAAsBI,EAAc1qG,KACrDoqG,EAAuBE,IAAiD,IAA3BE,EAAYI,UAC3D,CACF,CACA,OAAO5O,EAAOuL,cAAc,aAAc0C,GAAiBl8C,MAAK,SAASq5C,GACvE,OAAO,IAAInnG,SAAQ,SAASC,GAC1By7F,EAAYkP,gBACVzD,GACA,SAAS15D,GACP,IAAK,IAAM07D,KAAiB17D,EAAS+6D,WAAY,CAC/C,IAAMqC,EAAYp9D,EAAS+6D,WAAWW,GAChCwB,EAAaR,EAAuBhB,QACvB,IAAfwB,IACFE,EAAUF,WAAaA,EAC3B,CACA1qG,EAAQwtC,EACV,GACAy8D,EACAE,EAEJ,GACF,GACF,KAACjL,CAAA,CAjDoC,GAmDjCE,EAA6B,WACjC,SAAAA,KAAc/2F,EAAAA,EAAAA,GAAA,KAAA+2F,GACZz/F,KAAKG,KAAOq+F,EAAWgB,qBACzB,CAoBC,OApBA70F,EAAAA,EAAAA,GAAA80F,EAAA,EAAAx5F,IAAA,gBAAApG,MACD,SAAcosC,EAASi/D,GACrB,YAA4B,IAAvBA,EAAUC,UAAuBD,EAAUC,WAAal/D,EAAQm/D,cAAiC,IAArBF,EAAUtkF,aAA4C,IAAvBskF,EAAU7sE,eAA2C,IAApB6sE,EAAUvkF,OAG3JslB,EAAUA,EAAQ7rB,aACS,IAAvB8qF,EAAUC,WACZl/D,EAAQm/D,QAAUF,EAAUC,eAEL,IAArBD,EAAUtkF,QACZqlB,EAAQrlB,OAAO4W,UAAU0tE,EAAUtkF,aAEV,IAAvBskF,EAAU7sE,WACZ4N,EAAQ5N,SAAW6sE,EAAU7sE,eAEP,IAApB6sE,EAAUvkF,OACZslB,EAAQuxB,OAAOhgC,UAAU0tE,EAAUvkF,OAErCslB,EAAQ5L,aAAc,EACf4L,GAhBEA,CAiBX,KAACwzD,CAAA,CAvBgC,GAyB7BE,GAA6Bh1F,EAAAA,EAAAA,IACjC,SAAAg1F,KAAcj3F,EAAAA,EAAAA,GAAA,KAAAi3F,GACZ3/F,KAAKG,KAAOq+F,EAAWkB,qBACzB,IAEI2L,EAA0B,SAAAC,IAAAjjG,EAAAA,EAAAA,GAAAgjG,EAAAC,GAAA,IAAA3sF,GAAApW,EAAAA,EAAAA,GAAA8iG,GAC9B,SAAAA,EAAYE,EAAoBC,EAAcC,EAAYC,GAAc,OAAAhjG,EAAAA,EAAAA,GAAA,KAAA2iG,GAAA1sF,EAAAvf,KAAA,KAChEmsG,EAAoBC,EAAcC,EAAYC,EACtD,CAgCC,OAhCA/gG,EAAAA,EAAAA,GAAA0gG,EAAA,EAAAplG,IAAA,mBAAApG,MACD,SAAiB+F,GAEf,IADA,IAAMqY,EAASje,KAAK0rG,aAAcpkE,EAAStnC,KAAKwrG,aAAcG,EAAY3rG,KAAK2rG,UAAW/kF,EAAShhB,EAAQ+lG,EAAY,EAAIA,EAClH/nG,EAAI,EAAGA,IAAM+nG,EAAW/nG,IAC/Bqa,EAAOra,GAAK0jC,EAAO1gB,EAAShjB,GAE9B,OAAOqa,CACT,GAAC,CAAAhY,IAAA,eAAApG,MACD,SAAa+rG,EAAIC,EAAI15F,EAAG0C,GAgBtB,IAfA,IAAMoJ,EAASje,KAAK0rG,aACdpkE,EAAStnC,KAAKwrG,aACd1D,EAAS9nG,KAAK2rG,UACdG,EAAmB,EAAThE,EACViE,EAAmB,EAATjE,EACVhoB,EAAKjrE,EAAKg3F,EACVp5F,GAAKN,EAAI05F,GAAM/rB,EACfksB,EAAKv5F,EAAIA,EACTw5F,EAAMD,EAAKv5F,EACXy5F,EAAUN,EAAKG,EACfI,EAAUD,EAAUH,EACpB/vF,GAAM,EAAIiwF,EAAM,EAAID,EACpB/vF,EAAKgwF,EAAMD,EACXI,EAAK,EAAIpwF,EACTD,EAAKE,EAAK+vF,EAAKv5F,EACZ7O,EAAI,EAAGA,IAAMkkG,EAAQlkG,IAAK,CACjC,IAAMyoG,EAAK/kE,EAAO6kE,EAAUvoG,EAAIkkG,GAC1BwE,EAAKhlE,EAAO6kE,EAAUvoG,EAAIkoG,GAAWhsB,EACrCysB,EAAKjlE,EAAO4kE,EAAUtoG,EAAIkkG,GAC1B/5E,EAAKuZ,EAAO4kE,EAAUtoG,GAAKk8E,EACjC7hE,EAAOra,GAAKwoG,EAAKC,EAAKtwF,EAAKuwF,EAAKtwF,EAAKuwF,EAAKtwF,EAAK8R,CACjD,CACA,OAAO9P,CACT,KAACotF,CAAA,CAnC6B,CAASmB,EAAAA,aAqCnCC,EAAqB,IAAIpzE,EAAAA,WACzBqzE,EAAoC,SAAAC,IAAAtkG,EAAAA,EAAAA,GAAAqkG,EAAAC,GAAA,IAAAxkF,GAAA5f,EAAAA,EAAAA,GAAAmkG,GAAA,SAAAA,IAAA,OAAAhkG,EAAAA,EAAAA,GAAA,KAAAgkG,GAAAvkF,EAAArpB,MAAA,KAAA8B,UAAA,CAKvC,OALuC+J,EAAAA,EAAAA,GAAA+hG,EAAA,EAAAzmG,IAAA,eAAApG,MACxC,SAAa+rG,EAAIC,EAAI15F,EAAG0C,GACtB,IAAMoJ,GAAM8tB,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA0gE,EAAAvtG,WAAA,qBAAAC,KAAA,KAAsBwsG,EAAIC,EAAI15F,EAAG0C,GAE7C,OADA43F,EAAGjvE,UAAUvf,GAAQ3E,YAAYmkB,QAAQxf,GAClCA,CACT,KAACyuF,CAAA,CALuC,CAASrB,GAO7C9C,EAAkB,CACtBqE,MAAO,KAEPC,WAAY,MACZC,WAAY,MACZC,WAAY,MACZC,WAAY,MACZC,WAAY,MACZC,OAAQ,KACRC,OAAQ,MACRC,WAAY,MACZC,OAAQ,EACRC,MAAO,EACPC,UAAW,EACXC,WAAY,EACZhF,UAAW,EACXC,eAAgB,EAChBC,aAAc,EACd+E,cAAe,KACfC,eAAgB,MAEZ5C,EAAwB,CAC5B,KAAM6C,UACN,KAAM3mG,WACN,KAAM4mG,WACN,KAAMzmG,YACN,KAAM0mG,YACN,KAAMpjG,cAEFqjG,EAAgB,CACpB,KAAMC,EAAAA,cACN,KAAMzhE,EAAAA,aACN,KAAM0hE,EAAAA,2BACN,KAAMC,EAAAA,0BACN,KAAMC,EAAAA,0BACN,KAAMC,EAAAA,0BAEFC,EAAkB,CACtB,MAAOC,EAAAA,oBACP,MAAOC,EAAAA,uBACP,MAAOC,EAAAA,gBAEHC,EAAmB,CACvBC,OAAQ,EACRC,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,IAEFrE,GAAUpqE,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,CACd0uE,SAAU,WACVC,OAAQ,SACRC,QAAS,WAINxhE,EAAAA,SAASC,QAAQ,OAAQ,KAAO,IAAM,CACvCwhE,WAAY,KACZC,WAAY,MACZC,WAAY,MACZC,WAAY,OACV,CACFH,WAAY,KACZC,WAAY,QACb,IACDG,QAAS,QACTC,UAAW,aACXC,SAAU,cAENC,EAAkB,CACtB/oF,MAAO,QACPgpF,YAAa,WACbtxE,SAAU,aACVuxE,QAAS,yBAELC,EAAgB,CACpBC,iBAAa,EAGb5C,OAAQ6C,EAAAA,kBACRC,KAAMC,EAAAA,qBAEFC,EACI,SADJA,EAEE,OAFFA,EAGG,QAgBT,SAASC,GAA+BC,EAAiBpyE,EAAQqyE,GAC/D,IAAK,IAAMlwG,KAAQkwG,EAAUjgE,gBACG,IAA1BggE,EAAgBjwG,KAClB69B,EAAOO,SAAS+xE,eAAiBtyE,EAAOO,SAAS+xE,gBAAkB,CAAC,EACpEtyE,EAAOO,SAAS+xE,eAAenwG,GAAQkwG,EAAUjgE,WAAWjwC,GAGlE,CACA,SAASqiG,GAAuBxkE,EAAQuyE,QACf,IAAnBA,EAAQC,SACoB,kBAAnBD,EAAQC,OACjBlxG,OAAO4rD,OAAOltB,EAAOO,SAAUgyE,EAAQC,QAEvC3tG,QAAQC,KAAK,sDAAwDytG,EAAQC,QAGnF,CAsDA,SAASC,GAAmBz6E,EAAMoyE,GAEhC,GADApyE,EAAKy6E,0BACmB,IAApBrI,EAAQwH,QACV,IAAK,IAAIhsG,EAAI,EAAG8sG,EAAKtI,EAAQwH,QAAQrtG,OAAQqB,EAAI8sG,EAAI9sG,IACnDoyB,EAAK26E,sBAAsB/sG,GAAKwkG,EAAQwH,QAAQhsG,GAGpD,GAAIwkG,EAAQoI,QAAU7sG,MAAM0sC,QAAQ+3D,EAAQoI,OAAOI,aAAc,CAC/D,IAAMA,EAAcxI,EAAQoI,OAAOI,YACnC,GAAI56E,EAAK26E,sBAAsBpuG,SAAWquG,EAAYruG,OAAQ,CAC5DyzB,EAAK66E,sBAAwB,CAAC,EAC9B,IAAK,IAAIjtG,EAAI,EAAG8sG,EAAKE,EAAYruG,OAAQqB,EAAI8sG,EAAI9sG,IAC/CoyB,EAAK66E,sBAAsBD,EAAYhtG,IAAMA,CAEjD,MACEf,QAAQC,KAAK,uEAEjB,CACF,CACA,SAASguG,GAAmBC,GAC1B,IAAIC,EACEC,EAAiBF,EAAa3gE,YAAc2gE,EAAa3gE,WAAWouD,EAAWc,4BAMrF,GAJE0R,EADEC,EACY,SAAWA,EAAe1J,WAAa,IAAM0J,EAAel6E,QAAU,IAAMm6E,GAAoBD,EAAerI,YAE/GmI,EAAah6E,QAAU,IAAMm6E,GAAoBH,EAAanI,YAAc,IAAMmI,EAAan/E,UAElF,IAAzBm/E,EAAaI,QACf,IAAK,IAAIvtG,EAAI,EAAG8sG,EAAKK,EAAaI,QAAQ5uG,OAAQqB,EAAI8sG,EAAI9sG,IACxDotG,GAAe,IAAME,GAAoBH,EAAaI,QAAQvtG,IAGlE,OAAOotG,CACT,CACA,SAASE,GAAoBtI,GAG3B,IAFA,IAAIwI,EAAgB,GACdlrG,EAAO5G,OAAO4G,KAAK0iG,GAAYtxC,OAC5B1zD,EAAI,EAAG8sG,EAAKxqG,EAAK3D,OAAQqB,EAAI8sG,EAAI9sG,IACxCwtG,GAAiBlrG,EAAKtC,GAAK,IAAMglG,EAAW1iG,EAAKtC,IAAM,IAEzD,OAAOwtG,CACT,CACA,SAASC,GAA4Bz9C,GACnC,OAAQA,GACN,KAAK+5C,UACH,OAAO,EAAI,IACb,KAAK3mG,WACH,OAAO,EAAI,IACb,KAAK4mG,WACH,OAAO,EAAI,MACb,KAAKzmG,YACH,OAAO,EAAI,MACb,QACE,MAAM,IAAIzE,MAAM,qEAEtB,CAQA,IAAM4uG,GAAkC,IAAI/0E,EAAAA,QACtCsiE,GAAU,WACd,SAAAA,IAAqC,IAAzBX,EAAIt9F,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,CAAC,EAAGoH,EAAOpH,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,CAAC,GAAC8H,EAAAA,EAAAA,GAAA,KAAAm2F,GACjC7+F,KAAKk+F,KAAOA,EACZl+F,KAAKowC,WAAa,CAAC,EACnBpwC,KAAKm+F,QAAU,CAAC,EAChBn+F,KAAKgI,QAAUA,EACfhI,KAAK4hC,MAAQ,IAAIm+D,EACjB//F,KAAKuxG,aAA+B,IAAIx4C,IACxC/4D,KAAKwxG,eAAiB,CAAC,EACvBxxG,KAAKyxG,UAAY,CAAC,EAClBzxG,KAAK0xG,UAAY,CAAEnyE,KAAM,CAAC,EAAGyhE,KAAM,CAAC,GACpChhG,KAAK2xG,YAAc,CAAEpyE,KAAM,CAAC,EAAGyhE,KAAM,CAAC,GACtChhG,KAAK4xG,WAAa,CAAEryE,KAAM,CAAC,EAAGyhE,KAAM,CAAC,GACrChhG,KAAK6xG,YAAc,CAAC,EACpB7xG,KAAK8xG,aAAe,CAAC,EACrB9xG,KAAK+xG,cAAgB,CAAC,EACtB,IAAIC,GAAW,EACXC,GAAY,EACZC,GAAkB,EACG,qBAAdlmD,WAA4D,qBAAxBA,UAAUC,YACvD+lD,GAA0E,IAA/D,iCAAiC12F,KAAK0wC,UAAUC,WAE3DimD,GADAD,EAAYjmD,UAAUC,UAAU1kD,QAAQ,YAAc,GACzBykD,UAAUC,UAAUtiB,MAAM,uBAAuB,IAAM,GAErD,qBAAtBwoE,mBAAqCH,GAAYC,GAAaC,EAAiB,GACxFlyG,KAAK8mG,cAAgB,IAAIsL,EAAAA,cAAcpyG,KAAKgI,QAAQqgC,SAEpDroC,KAAK8mG,cAAgB,IAAIuL,EAAAA,kBAAkBryG,KAAKgI,QAAQqgC,SAE1DroC,KAAK8mG,cAAcwL,eAAetyG,KAAKgI,QAAQ82F,aAC/C9+F,KAAK8mG,cAAclJ,iBAAiB59F,KAAKgI,QAAQ61F,eACjD79F,KAAK++F,WAAa,IAAIrB,EAAAA,WAAW19F,KAAKgI,QAAQqgC,SAC9CroC,KAAK++F,WAAWpB,gBAAgB,eACC,oBAA7B39F,KAAKgI,QAAQ82F,aACf9+F,KAAK++F,WAAWjB,oBAAmB,EAEvC,CA2kCC,OA3kCAnzF,EAAAA,EAAAA,GAAAk0F,EAAA,EAAA54F,IAAA,gBAAApG,MACD,SAAcuwC,GACZpwC,KAAKowC,WAAaA,CACpB,GAAC,CAAAnqC,IAAA,aAAApG,MACD,SAAWs+F,GACTn+F,KAAKm+F,QAAUA,CACjB,GAAC,CAAAl4F,IAAA,QAAApG,MACD,SAAM+rC,EAAQE,GACZ,IAAMqwD,EAASn8F,KACTk+F,EAAOl+F,KAAKk+F,KACZ9tD,EAAapwC,KAAKowC,WACxBpwC,KAAK4hC,MAAMo+D,YACXhgG,KAAKyxG,UAAY,CAAC,EAClBzxG,KAAKuyG,YAAW,SAASC,GACvB,OAAOA,EAAIC,WAAaD,EAAIC,WAC9B,IACAryG,QAAQ88D,IACNl9D,KAAKuyG,YAAW,SAASC,GACvB,OAAOA,EAAIE,YAAcF,EAAIE,YAC/B,KACAxkD,MAAK,WACL,OAAO9tD,QAAQ88D,IAAI,CACjBi/B,EAAOwW,gBAAgB,SACvBxW,EAAOwW,gBAAgB,aACvBxW,EAAOwW,gBAAgB,WAE3B,IAAGzkD,MAAK,SAASmwB,GACf,IAAMpgE,EAAS,CACbgxB,MAAOovC,EAAa,GAAG6f,EAAKjvD,OAAS,GACrC2jE,OAAQv0B,EAAa,GACrBw0B,WAAYx0B,EAAa,GACzBy0B,QAASz0B,EAAa,GACtBugB,MAAOV,EAAKU,MACZzC,OAAAA,EACA59D,SAAU,CAAC,GAEb4xE,GAA+B//D,EAAYnyB,EAAQigF,GACnDsE,GAAuBvkF,EAAQigF,GAC/B99F,QAAQ88D,IACNi/B,EAAOoW,YAAW,SAASC,GACzB,OAAOA,EAAIO,WAAaP,EAAIO,UAAU90F,EACxC,KACAiwC,MAAK,WACLtiB,EAAO3tB,EACT,GACF,IAAGowC,MAAMviB,EACX,GACA,CAAA7lC,IAAA,YAAApG,MAGA,WAIE,IAHA,IAAMohG,EAAWjhG,KAAKk+F,KAAKvtC,OAAS,GAC9BqiD,EAAWhzG,KAAKk+F,KAAK+U,OAAS,GAC9BC,EAAWlzG,KAAKk+F,KAAKmK,QAAU,GAC5B8K,EAAY,EAAGC,EAAaJ,EAASzwG,OAAQ4wG,EAAYC,EAAYD,IAE5E,IADA,IAAME,EAASL,EAASG,GAAWE,OAC1BzvG,EAAI,EAAG8sG,EAAK2C,EAAO9wG,OAAQqB,EAAI8sG,EAAI9sG,IAC1Cq9F,EAASoS,EAAOzvG,IAAI0vG,QAAS,EAGjC,IAAK,IAAIpS,EAAY,EAAGC,EAAaF,EAAS1+F,OAAQ2+F,EAAYC,EAAYD,IAAa,CACzF,IAAME,EAAUH,EAASC,QACJ,IAAjBE,EAAQprE,OACVh2B,KAAKshG,YAAYthG,KAAK0xG,UAAWtQ,EAAQprE,WACpB,IAAjBorE,EAAQmS,OACVL,EAAS9R,EAAQprE,MAAMw9E,eAAgB,SAGpB,IAAnBpS,EAAQrvD,QACV/xC,KAAKshG,YAAYthG,KAAK2xG,YAAavQ,EAAQrvD,OAE/C,CACF,GACA,CAAA9rC,IAAA,cAAApG,MASA,SAAY+hC,EAAOh8B,QACH,IAAVA,SAEsB,IAAtBg8B,EAAMrC,KAAK35B,KACbg8B,EAAMrC,KAAK35B,GAASg8B,EAAMo/D,KAAKp7F,GAAS,GAE1Cg8B,EAAMrC,KAAK35B,KACb,GACA,CAAAK,IAAA,cAAApG,MACA,SAAY+hC,EAAOh8B,EAAOo4B,GAAQ,IAAApf,EAAA,KAChC,GAAIgjB,EAAMrC,KAAK35B,IAAU,EACvB,OAAOo4B,EACT,IAAMtB,EAAMsB,EAAO5d,QAYnB,OAXuB,SAAjBqzF,EAAkBC,EAAUtzF,GAChC,IAAMuzF,EAAW/0F,EAAK2yF,aAAa/sG,IAAIkvG,GACvB,MAAZC,GACF/0F,EAAK2yF,aAAa9sG,IAAI2b,EAAOuzF,GAC9B,IACmDt7C,EADnDE,GAAAzrD,EAAAA,EAAAA,GACwB4mG,EAAS3vE,SAASqtB,WAAS,IAApD,IAAAmH,EAAAxrD,MAAAsrD,EAAAE,EAAAv0D,KAAAgJ,MAAsD,KAAA4mG,GAAAzoG,EAAAA,EAAAA,GAAAktD,EAAAx4D,MAAA,GAA1C+D,EAACgwG,EAAA,GACXH,EADkBG,EAAA,GACIxzF,EAAM2jB,SAASngC,GACvC,CAAC,OAAApD,GAAA+3D,EAAAtrD,EAAAzM,EAAA,SAAA+3D,EAAArrD,GAAA,CACH,CACAumG,CAAez1E,EAAQtB,GACvBA,EAAIv8B,MAAQ,aAAeyhC,EAAMo/D,KAAKp7F,KAC/B82B,CACT,GAAC,CAAAz2B,IAAA,aAAApG,MACD,SAAWkvE,GACT,IAAM3+B,EAAa9wC,OAAOgoC,OAAOtnC,KAAKm+F,SACtC/tD,EAAW9tC,KAAKtC,MAChB,IAAK,IAAI4D,EAAI,EAAGA,EAAIwsC,EAAW7tC,OAAQqB,IAAK,CAC1C,IAAMqa,EAAS8wD,EAAK3+B,EAAWxsC,IAC/B,GAAIqa,EACF,OAAOA,CACX,CACA,OAAO,IACT,GAAC,CAAAhY,IAAA,aAAApG,MACD,SAAWkvE,GACT,IAAM3+B,EAAa9wC,OAAOgoC,OAAOtnC,KAAKm+F,SACtC/tD,EAAW/tC,QAAQrC,MAEnB,IADA,IAAMm/E,EAAU,GACPv7E,EAAI,EAAGA,EAAIwsC,EAAW7tC,OAAQqB,IAAK,CAC1C,IAAMqa,EAAS8wD,EAAK3+B,EAAWxsC,IAC3Bqa,GACFkhE,EAAQ78E,KAAK2b,EACjB,CACA,OAAOkhE,CACT,GACA,CAAAl5E,IAAA,gBAAApG,MAMA,SAAcgC,EAAM+D,GAClB,IAAM47F,EAAW3/F,EAAO,IAAM+D,EAC1B67F,EAAazhG,KAAK4hC,MAAMp9B,IAAIg9F,GAChC,IAAKC,EAAY,CACf,OAAQ5/F,GACN,IAAK,QACH4/F,EAAazhG,KAAK6zG,UAAUjuG,GAC5B,MACF,IAAK,OACH67F,EAAazhG,KAAK8zG,YAAW,SAAStB,GACpC,OAAOA,EAAIuB,UAAYvB,EAAIuB,SAASnuG,EACtC,IACA,MACF,IAAK,OACH67F,EAAazhG,KAAK8zG,YAAW,SAAStB,GACpC,OAAOA,EAAIwB,UAAYxB,EAAIwB,SAASpuG,EACtC,IACA,MACF,IAAK,WACH67F,EAAazhG,KAAKi0G,aAAaruG,GAC/B,MACF,IAAK,aACH67F,EAAazhG,KAAK8zG,YAAW,SAAStB,GACpC,OAAOA,EAAI0B,gBAAkB1B,EAAI0B,eAAetuG,EAClD,IACA,MACF,IAAK,SACH67F,EAAazhG,KAAKm0G,WAAWvuG,GAC7B,MACF,IAAK,WACH67F,EAAazhG,KAAK8zG,YAAW,SAAStB,GACpC,OAAOA,EAAI4B,cAAgB5B,EAAI4B,aAAaxuG,EAC9C,IACA,MACF,IAAK,UACH67F,EAAazhG,KAAK8zG,YAAW,SAAStB,GACpC,OAAOA,EAAItL,aAAesL,EAAItL,YAAYthG,EAC5C,IACA,MACF,IAAK,OACH67F,EAAazhG,KAAKq0G,SAASzuG,GAC3B,MACF,IAAK,YACH67F,EAAazhG,KAAK8zG,YAAW,SAAStB,GACpC,OAAOA,EAAI8B,eAAiB9B,EAAI8B,cAAc1uG,EAChD,IACA,MACF,IAAK,SACH67F,EAAazhG,KAAKu0G,WAAW3uG,GAC7B,MACF,QAIE,KAHA67F,EAAazhG,KAAK8zG,YAAW,SAAStB,GACpC,OAAOA,GAAOxyG,MAAQwyG,EAAI9K,eAAiB8K,EAAI9K,cAAc7lG,EAAM+D,EACrE,KAEE,MAAM,IAAIlD,MAAM,iBAAmBb,GAIzC7B,KAAK4hC,MAAM9Z,IAAI05E,EAAUC,EAC3B,CACA,OAAOA,CACT,GACA,CAAAx7F,IAAA,kBAAApG,MAKA,SAAgBgC,GACd,IAAIw8E,EAAer+E,KAAK4hC,MAAMp9B,IAAI3C,GAClC,IAAKw8E,EAAc,CACjB,IAAM8d,EAASn8F,KACTw0G,EAAOx0G,KAAKk+F,KAAKr8F,GAAiB,SAATA,EAAkB,KAAO,OAAS,GACjEw8E,EAAej+E,QAAQ88D,IACrBs3C,EAAKt0E,KAAI,SAAS6M,EAAKnnC,GACrB,OAAOu2F,EAAOuL,cAAc7lG,EAAM+D,EACpC,KAEF5F,KAAK4hC,MAAM9Z,IAAIjmB,EAAMw8E,EACvB,CACA,OAAOA,CACT,GACA,CAAAp4E,IAAA,aAAApG,MAKA,SAAW40G,GACT,IAAMC,EAAY10G,KAAKk+F,KAAK3zF,QAAQkqG,GAC9BnkE,EAAStwC,KAAK++F,WACpB,GAAI2V,EAAU7yG,MAA2B,gBAAnB6yG,EAAU7yG,KAC9B,MAAM,IAAIa,MAAM,qBAAuBgyG,EAAU7yG,KAAO,kCAE1D,QAAsB,IAAlB6yG,EAAU3N,KAAkC,IAAhB0N,EAC9B,OAAOr0G,QAAQC,QAAQL,KAAKowC,WAAWouD,EAAWC,iBAAiBj3F,MAErE,IAAMQ,EAAUhI,KAAKgI,QACrB,OAAO,IAAI5H,SAAQ,SAASC,EAASC,GACnCgwC,EAAO8sB,KAAKggC,EAAAA,YAAYuX,WAAWD,EAAU3N,IAAK/+F,EAAQgoC,MAAO3vC,OAAS,GAAQ,WAChFC,EAAO,IAAIoC,MAAM,4CAA8CgyG,EAAU3N,IAAM,MACjF,GACF,GACF,GACA,CAAA9gG,IAAA,iBAAApG,MAKA,SAAeuqG,GACb,IAAMwK,EAAgB50G,KAAKk+F,KAAKsJ,YAAY4C,GAC5C,OAAOpqG,KAAK0nG,cAAc,SAAUkN,EAAcxtG,QAAQ8mD,MAAK,SAAS9mD,GACtE,IAAM4I,EAAa4kG,EAAc5kG,YAAc,EACzC63F,EAAa+M,EAAc/M,YAAc,EAC/C,OAAOzgG,EAAOzG,MAAMknG,EAAYA,EAAa73F,EAC/C,GACF,GACA,CAAA/J,IAAA,eAAApG,MAKA,SAAag1G,GACX,IAAM1Y,EAASn8F,KACTk+F,EAAOl+F,KAAKk+F,KACZyM,EAAc3qG,KAAKk+F,KAAK0M,UAAUiK,GACxC,QAA+B,IAA3BlK,EAAYpD,iBAAgD,IAAvBoD,EAAYmK,OAAmB,CACtE,IAAMC,EAAWvG,EAAiB7D,EAAY9oG,MACxCmzG,EAAalK,EAAsBH,EAAYE,eAC/CE,GAAwC,IAA3BJ,EAAYI,WACzB3rC,EAAQ,IAAI41C,EAAWrK,EAAY/nG,MAAQmyG,GACjD,OAAO30G,QAAQC,QAAQ,IAAIu1C,EAAAA,gBAAgBwpB,EAAO21C,EAAUhK,GAC9D,CACA,IAAMkK,EAAqB,GAU3B,YAT+B,IAA3BtK,EAAYpD,WACd0N,EAAmB3yG,KAAKtC,KAAK0nG,cAAc,aAAciD,EAAYpD,aAErE0N,EAAmB3yG,KAAK,WAEC,IAAvBqoG,EAAYmK,SACdG,EAAmB3yG,KAAKtC,KAAK0nG,cAAc,aAAciD,EAAYmK,OAAO/9E,QAAQwwE,aACpF0N,EAAmB3yG,KAAKtC,KAAK0nG,cAAc,aAAciD,EAAYmK,OAAOxtE,OAAOigE,cAE9EnnG,QAAQ88D,IAAI+3C,GAAoB/mD,MAAK,SAASs5C,GACnD,IAQIpoC,EAAO81C,EARL3N,EAAaC,EAAY,GACzBuN,EAAWvG,EAAiB7D,EAAY9oG,MACxCmzG,EAAalK,EAAsBH,EAAYE,eAC/CsK,EAAeH,EAAWI,kBAC1BC,EAAYF,EAAeJ,EAC3BlN,EAAa8C,EAAY9C,YAAc,EACvCE,OAAwC,IAA3B4C,EAAYpD,WAAwBrJ,EAAKsJ,YAAYmD,EAAYpD,YAAYQ,gBAAa,EACvGgD,GAAwC,IAA3BJ,EAAYI,WAE/B,GAAIhD,GAAcA,IAAesN,EAAW,CAC1C,IAAMC,EAAUlhG,KAAKi5B,MAAMw6D,EAAaE,GAClCwN,EAAa,qBAAuB5K,EAAYpD,WAAa,IAAMoD,EAAYE,cAAgB,IAAMyK,EAAU,IAAM3K,EAAY/nG,MACnIwxE,EAAK+nB,EAAOv6D,MAAMp9B,IAAI+wG,GACrBnhC,IACHhV,EAAQ,IAAI41C,EAAWzN,EAAY+N,EAAUvN,EAAY4C,EAAY/nG,MAAQmlG,EAAaoN,GAC1F/gC,EAAK,IAAIohC,EAAAA,kBAAkBp2C,EAAO2oC,EAAaoN,GAC/ChZ,EAAOv6D,MAAM9Z,IAAIytF,EAAYnhC,IAE/B8gC,EAAkB,IAAIO,EAAAA,2BACpBrhC,EACA2gC,EACAlN,EAAaE,EAAaoN,EAC1BpK,EAEJ,MAEI3rC,EADiB,OAAfmoC,EACM,IAAIyN,EAAWrK,EAAY/nG,MAAQmyG,GAEnC,IAAIC,EAAWzN,EAAYM,EAAY8C,EAAY/nG,MAAQmyG,GAErEG,EAAkB,IAAIt/D,EAAAA,gBAAgBwpB,EAAO21C,EAAUhK,GAEzD,QAA2B,IAAvBJ,EAAYmK,OAAmB,CACjC,IAAMY,EAAkBlH,EAAiBC,OACnCkH,EAAoB7K,EAAsBH,EAAYmK,OAAO/9E,QAAQ8zE,eACrE+K,EAAoBjL,EAAYmK,OAAO/9E,QAAQ8wE,YAAc,EAC7DgO,EAAmBlL,EAAYmK,OAAOxtE,OAAOugE,YAAc,EAC3DiO,EAAgB,IAAIH,EACxBnO,EAAY,GACZoO,EACAjL,EAAYmK,OAAOlyG,MAAQ8yG,GAEvBK,EAAe,IAAIf,EAAWxN,EAAY,GAAIqO,EAAkBlL,EAAYmK,OAAOlyG,MAAQmyG,GAC9E,OAAfxN,IACF2N,EAAkB,IAAIt/D,EAAAA,gBACpBs/D,EAAgB91C,MAAMz+D,QACtBu0G,EAAgBH,SAChBG,EAAgBnK,aAGpB,IAAK,IAAInnG,EAAI,EAAG8sG,EAAKoF,EAAcvzG,OAAQqB,EAAI8sG,EAAI9sG,IAAK,CACtD,IAAMgC,EAAQkwG,EAAclyG,GAQ5B,GAPAsxG,EAAgBc,KAAKpwG,EAAOmwG,EAAanyG,EAAImxG,IACzCA,GAAY,GACdG,EAAgBe,KAAKrwG,EAAOmwG,EAAanyG,EAAImxG,EAAW,IACtDA,GAAY,GACdG,EAAgBgB,KAAKtwG,EAAOmwG,EAAanyG,EAAImxG,EAAW,IACtDA,GAAY,GACdG,EAAgBiB,KAAKvwG,EAAOmwG,EAAanyG,EAAImxG,EAAW,IACtDA,GAAY,EACd,MAAM,IAAIryG,MAAM,oEACpB,CACF,CACA,OAAOwyG,CACT,GACF,GACA,CAAAjvG,IAAA,cAAApG,MAKA,SAAY2mG,GACV,IAAMtI,EAAOl+F,KAAKk+F,KACZl2F,EAAUhI,KAAKgI,QAEfouG,EADalY,EAAKwI,SAASF,GACF7/F,OACzB0vG,EAAYnY,EAAK2I,OAAOuP,GAC1B9lE,EAAStwC,KAAK8mG,cAClB,GAAIuP,EAAUtP,IAAK,CACjB,IAAMjmG,EAAUkH,EAAQqgC,QAAQ2+D,WAAWqP,EAAUtP,KACrC,OAAZjmG,IACFwvC,EAASxvC,EACb,CACA,OAAOd,KAAK2mG,iBAAiBH,EAAc4P,EAAa9lE,EAC1D,GAAC,CAAArqC,IAAA,mBAAApG,MACD,SAAiB2mG,EAAc4P,EAAa9lE,GAC1C,IAAM6rD,EAASn8F,KACTk+F,EAAOl+F,KAAKk+F,KACZuI,EAAavI,EAAKwI,SAASF,GAC3B6P,EAAYnY,EAAK2I,OAAOuP,GACxB5U,GAAY6U,EAAUtP,KAAOsP,EAAU9O,YAAc,IAAMd,EAAW6P,QAC5E,GAAIt2G,KAAK8xG,aAAatQ,GACpB,OAAOxhG,KAAK8xG,aAAatQ,GAE3B,IAAMvzC,EAAUjuD,KAAKu2G,gBAAgBH,EAAa9lE,GAAQ4d,MAAK,SAASjiB,GACtEA,EAAQQ,OAAQ,EAChBR,EAAQ9rC,KAAOsmG,EAAWtmG,MAAQk2G,EAAUl2G,MAAQ,GAC/B,KAAjB8rC,EAAQ9rC,MAAwC,kBAAlBk2G,EAAUtP,MAAgE,IAA5CsP,EAAUtP,IAAIt0C,WAAW,iBACvFxmB,EAAQ9rC,KAAOk2G,EAAUtP,KAE3B,IACMuP,GADWpY,EAAKsY,UAAY,CAAC,GACV/P,EAAW6P,UAAY,CAAC,EAMjD,OALArqE,EAAQM,UAAYuhE,EAAcwI,EAAQ/pE,YAAcD,EAAAA,aACxDL,EAAQI,UAAYyhE,EAAcwI,EAAQjqE,YAAc8hE,EAAAA,yBACxDliE,EAAQwqE,MAAQrI,EAAgBkI,EAAQG,QAAUlI,EAAAA,eAClDtiE,EAAQyqE,MAAQtI,EAAgBkI,EAAQI,QAAUnI,EAAAA,eAClDpS,EAAOoV,aAAa9sG,IAAIwnC,EAAS,CAAEy6D,SAAUF,IACtCv6D,CACT,IAAGoiB,OAAM,WACP,OAAO,IACT,IAEA,OADAruD,KAAK8xG,aAAatQ,GAAYvzC,EACvBA,CACT,GAAC,CAAAhoD,IAAA,kBAAApG,MACD,SAAgBu2G,EAAa9lE,GAC3B,IACM4tD,EAAOl+F,KAAKk+F,KACZl2F,EAAUhI,KAAKgI,QACrB,QAAsC,IAAlChI,KAAK6xG,YAAYuE,GACnB,OAAOp2G,KAAK6xG,YAAYuE,GAAaloD,MAAK,SAACjiB,GAAO,OAAKA,EAAQ7rB,OAAO,IAExE,IAAMi2F,EAAYnY,EAAK2I,OAAOuP,GACxBxuG,EAAMm8D,KAAKn8D,KAAOm8D,KAAK4yC,UACzBC,EAAYP,EAAUtP,KAAO,GAC7B8P,GAAc,EAClB,QAA6B,IAAzBR,EAAU9O,WACZqP,EAXa52G,KAWM0nG,cAAc,aAAc2O,EAAU9O,YAAYr5C,MAAK,SAASq5C,GACjFsP,GAAc,EACd,IAAMnvG,EAAO,IAAIC,KAAK,CAAC4/F,GAAa,CAAE1lG,KAAMw0G,EAAUS,WAEtD,OADAF,EAAYhvG,EAAIC,gBAAgBH,EAElC,SACK,QAAsB,IAAlB2uG,EAAUtP,IACnB,MAAM,IAAIrkG,MAAM,2BAA6B0zG,EAAc,kCAE7D,IAAMnoD,EAAU7tD,QAAQC,QAAQu2G,GAAW1oD,MAAK,SAAS6oD,GACvD,OAAO,IAAI32G,SAAQ,SAASC,EAASC,GACnC,IAAIsrC,EAASvrC,GACsB,IAA/BiwC,EAAO0mE,sBACTprE,EAAS,SAASqrE,GAChB,IAAMhrE,EAAU,IAAIirE,EAAAA,QAAQD,GAC5BhrE,EAAQ5L,aAAc,EACtBhgC,EAAQ4rC,EACV,GAEFqE,EAAO8sB,KAAKggC,EAAAA,YAAYuX,WAAWoC,EAAY/uG,EAAQgoC,MAAOpE,OAAQ,EAAQtrC,EAChF,GACF,IAAG4tD,MAAK,SAASjiB,GArdrB,IAA6B86D,EA0dvB,OAJoB,IAAhB8P,GACFjvG,EAAIuvG,gBAAgBP,GAEtB3qE,EAAQ1N,SAASu4E,SAAWT,EAAUS,YAzdf/P,EAyd+CsP,EAAUtP,KAxd5EqQ,OAAO,kBAAoB,GAA0C,IAArCrQ,EAAIqQ,OAAO,sBAC1C,aACLrQ,EAAIqQ,OAAO,iBAAmB,GAA0C,IAArCrQ,EAAIqQ,OAAO,sBACzC,aACF,aAqdInrE,CACT,IAAGoiB,OAAM,SAAStpD,GAEhB,MADAlC,QAAQkC,MAAM,0CAA2C6xG,GACnD7xG,CACR,IAEA,OADA/E,KAAK6xG,YAAYuE,GAAenoD,EACzBA,CACT,GACA,CAAAhoD,IAAA,gBAAApG,MAOA,SAAckjG,EAAgBsU,EAASC,EAAQlrE,GAC7C,IAAM+vD,EAASn8F,KACf,OAAOA,KAAK0nG,cAAc,UAAW4P,EAAO1xG,OAAOsoD,MAAK,SAASjiB,GAC/D,IAAKA,EACH,OAAO,KAKT,QAJwB,IAApBqrE,EAAOnM,UAAuBmM,EAAOnM,SAAW,KAClDl/D,EAAUA,EAAQ7rB,SACVgrF,QAAUkM,EAAOnM,UAEvBhP,EAAO/rD,WAAWouD,EAAWgB,uBAAwB,CACvD,IAAM0L,OAAkC,IAAtBoM,EAAOlnE,WAAwBknE,EAAOlnE,WAAWouD,EAAWgB,4BAAyB,EACvG,GAAI0L,EAAW,CACb,IAAMqM,EAAgBpb,EAAOoV,aAAa/sG,IAAIynC,GAC9CA,EAAUkwD,EAAO/rD,WAAWouD,EAAWgB,uBAAuBgY,cAAcvrE,EAASi/D,GACrF/O,EAAOoV,aAAa9sG,IAAIwnC,EAASsrE,EACnC,CACF,CAQA,YAPiB,IAAbnrE,IACE,eAAgBH,EAClBA,EAAQE,WAA0B,OAAbC,EAAoB,OAAS,cAElDH,EAAQG,SAAWA,GAEvB22D,EAAesU,GAAWprE,EACnBA,CACT,GACF,GACA,CAAAhmC,IAAA,sBAAApG,MAQA,SAAoBm2B,GAClB,IAAM6X,EAAW7X,EAAK6X,SAClB3wB,EAAW8Y,EAAK9Y,SACdu6F,OAAwD,IAAhC5pE,EAAS+6D,WAAW8O,QAC5CC,OAAgD,IAA9B9pE,EAAS+6D,WAAW/G,MACtC+V,OAAgD,IAA/B/pE,EAAS+6D,WAAW5jF,OAC3C,GAAIgR,EAAK6hF,SAAU,CACjB,IAAMrW,EAAW,kBAAoBtkF,EAASlS,KAC1C8sG,EAAiB93G,KAAK4hC,MAAMp9B,IAAIg9F,GAC/BsW,IACHA,EAAiB,IAAIC,EAAAA,eACrB9/E,EAAAA,SAAS94B,UAAU8E,KAAK7E,KAAK04G,EAAgB56F,GAC7C46F,EAAejW,MAAM59F,KAAKiZ,EAAS2kF,OACnCiW,EAAe53E,IAAMhjB,EAASgjB,IAC9B43E,EAAeE,iBAAkB,EACjCh4G,KAAK4hC,MAAM9Z,IAAI05E,EAAUsW,IAE3B56F,EAAW46F,CACb,MAAO,GAAI9hF,EAAKiiF,OAAQ,CACtB,IAAMzW,EAAW,qBAAuBtkF,EAASlS,KAC7CktG,EAAel4G,KAAK4hC,MAAMp9B,IAAIg9F,GAC7B0W,IACHA,EAAe,IAAIC,EAAAA,kBACnBlgF,EAAAA,SAAS94B,UAAU8E,KAAK7E,KAAK84G,EAAch7F,GAC3Cg7F,EAAarW,MAAM59F,KAAKiZ,EAAS2kF,OACjCqW,EAAah4E,IAAMhjB,EAASgjB,IAC5BlgC,KAAK4hC,MAAM9Z,IAAI05E,EAAU0W,IAE3Bh7F,EAAWg7F,CACb,CACA,GAAIT,GAAyBE,GAAmBC,EAAgB,CAC9D,IAAIpW,EAAW,kBAAoBtkF,EAASlS,KAAO,IAC/CysG,IACFjW,GAAY,wBACVmW,IACFnW,GAAY,kBACVoW,IACFpW,GAAY,iBACd,IAAI4W,EAAiBp4G,KAAK4hC,MAAMp9B,IAAIg9F,GAC/B4W,IACHA,EAAiBl7F,EAASkD,QACtBu3F,IACFS,EAAeC,cAAe,GAC5BT,IACFQ,EAAeE,aAAc,GAC3Bb,IACEW,EAAeG,cACjBH,EAAeG,YAAYtpG,IAAM,GAC/BmpG,EAAejU,uBACjBiU,EAAejU,qBAAqBl1F,IAAM,IAE9CjP,KAAK4hC,MAAM9Z,IAAI05E,EAAU4W,GACzBp4G,KAAKuxG,aAAa9sG,IAAI2zG,EAAgBp4G,KAAKuxG,aAAa/sG,IAAI0Y,KAE9DA,EAAWk7F,CACb,CACApiF,EAAK9Y,SAAWA,CAClB,GAAC,CAAAjX,IAAA,kBAAApG,MACD,WACE,OAAO04C,EAAAA,oBACT,GACA,CAAAtyC,IAAA,eAAApG,MAKA,SAAa0jG,GACX,IAIIiV,EAJErc,EAASn8F,KACTk+F,EAAOl+F,KAAKk+F,KACZ9tD,EAAapwC,KAAKowC,WAClB4yD,EAAc9E,EAAKttC,UAAU2yC,GAE7BR,EAAiB,CAAC,EAElB5jB,EAAU,GAChB,IAF2B6jB,EAAY5yD,YAAc,CAAC,GAE/BouD,EAAWY,qBAAsB,CACtD,IAAMqZ,EAAeroE,EAAWouD,EAAWY,qBAC3CoZ,EAAeC,EAAaC,kBAC5Bv5B,EAAQ78E,KAAKm2G,EAAaE,aAAa5V,EAAgBC,EAAa7G,GACtE,KAAO,CACL,IAAM+G,EAAoBF,EAAYG,sBAAwB,CAAC,EAG/D,GAFAJ,EAAelB,MAAQ,IAAIC,EAAAA,MAAM,EAAG,EAAG,GACvCiB,EAAeE,QAAU,EACrBt/F,MAAM0sC,QAAQ6yD,EAAkBE,iBAAkB,CACpD,IAAMhkC,EAAQ8jC,EAAkBE,gBAChCL,EAAelB,MAAMrkE,UAAU4hC,GAC/B2jC,EAAeE,QAAU7jC,EAAM,EACjC,MAC2C,IAAvC8jC,EAAkBG,kBACpBlkB,EAAQ78E,KAAK65F,EAAOmH,cAAcP,EAAgB,MAAOG,EAAkBG,iBAAkB,OAE/FN,EAAe6V,eAAiD,IAArC1V,EAAkB2V,eAA4B3V,EAAkB2V,eAAiB,EAC5G9V,EAAe+V,eAAkD,IAAtC5V,EAAkB6V,gBAA6B7V,EAAkB6V,gBAAkB,OAC3D,IAA/C7V,EAAkB8V,2BACpB75B,EAAQ78E,KAAK65F,EAAOmH,cAAcP,EAAgB,eAAgBG,EAAkB8V,2BACpF75B,EAAQ78E,KAAK65F,EAAOmH,cAAcP,EAAgB,eAAgBG,EAAkB8V,4BAEtFR,EAAex4G,KAAK8zG,YAAW,SAAStB,GACtC,OAAOA,EAAIkG,iBAAmBlG,EAAIkG,gBAAgBnV,EACpD,IACApkB,EAAQ78E,KACNlC,QAAQ88D,IACNl9D,KAAKuyG,YAAW,SAASC,GACvB,OAAOA,EAAIyG,sBAAwBzG,EAAIyG,qBAAqB1V,EAAeR,EAC7E,KAGN,EACgC,IAA5BC,EAAYkW,cACdnW,EAAe90D,KAAOC,EAAAA,YAExB,IAAMirE,EAAYnW,EAAYmW,WAAajJ,EAU3C,GATIiJ,IAAcjJ,GAChBnN,EAAeqW,aAAc,EAC7BrW,EAAe7uD,YAAa,IAE5B6uD,EAAeqW,aAAc,EACzBD,IAAcjJ,IAChBnN,EAAesW,eAAwC,IAA5BrW,EAAYsW,YAAyBtW,EAAYsW,YAAc,UAG5D,IAA9BtW,EAAYuW,eAA4Bf,IAAiB1V,EAAAA,oBAC3D3jB,EAAQ78E,KAAK65F,EAAOmH,cAAcP,EAAgB,YAAaC,EAAYuW,gBAC3ExW,EAAewV,YAAc,IAAInlE,EAAAA,QAAQ,EAAG,QACJ,IAApC4vD,EAAYuW,cAAc5yF,OAAkB,CAC9C,IAAMA,EAAQq8E,EAAYuW,cAAc5yF,MACxCo8E,EAAewV,YAAY9zG,IAAIkiB,EAAOA,EACxC,CAcF,YAZqC,IAAjCq8E,EAAYwW,kBAA+BhB,IAAiB1V,EAAAA,oBAC9D3jB,EAAQ78E,KAAK65F,EAAOmH,cAAcP,EAAgB,QAASC,EAAYwW,wBACzB,IAA1CxW,EAAYwW,iBAAiBC,WAC/B1W,EAAe2W,eAAiB1W,EAAYwW,iBAAiBC,gBAG9B,IAA/BzW,EAAY2W,gBAA6BnB,IAAiB1V,EAAAA,oBAC5DC,EAAe6W,UAAW,IAAI9X,EAAAA,OAAQtkE,UAAUwlE,EAAY2W,sBAE1B,IAAhC3W,EAAY6W,iBAA8BrB,IAAiB1V,EAAAA,mBAC7D3jB,EAAQ78E,KAAK65F,EAAOmH,cAAcP,EAAgB,cAAeC,EAAY6W,gBAAiB,OAEzFz5G,QAAQ88D,IAAIiiB,GAASjxB,MAAK,WAC/B,IAAMhxC,EAAW,IAAIs7F,EAAazV,GAOlC,OANIC,EAAY7iG,OACd+c,EAAS/c,KAAO6iG,EAAY7iG,MAC9BqiG,GAAuBtlF,EAAU8lF,GACjC7G,EAAOoV,aAAa9sG,IAAIyY,EAAU,CAAE0zC,UAAW2yC,IAC3CP,EAAY5yD,YACd+/D,GAA+B//D,EAAYlzB,EAAU8lF,GAChD9lF,CACT,GACF,GACA,CAAAjX,IAAA,mBAAApG,MACA,SAAiBi6G,GACf,IAAMC,EAAgBC,EAAAA,gBAAgBC,iBAAiBH,GAAgB,IACvE,OAAIC,KAAiB/5G,KAAK+xG,cACjBgI,EAAgB,OAAQ/5G,KAAK+xG,cAAcgI,IAElD/5G,KAAK+xG,cAAcgI,GAAiB,EAC7BA,EAEX,GACA,CAAA9zG,IAAA,iBAAApG,MAQA,SAAeyoG,GACb,IAAMnM,EAASn8F,KACTowC,EAAapwC,KAAKowC,WAClBxO,EAAQ5hC,KAAKwxG,eACnB,SAAS0I,EAAqBnpD,GAC5B,OAAO3gB,EAAWouD,EAAWc,4BAA4B6a,gBAAgBppD,EAAWorC,GAAQjuC,MAAK,SAASrgB,GACxG,OAAOusE,GAAuBvsE,EAAUkjB,EAAWorC,EACrD,GACF,CAEA,IADA,IAAMhd,EAAU,GACPv7E,EAAI,EAAG8sG,EAAKpI,EAAW/lG,OAAQqB,EAAI8sG,EAAI9sG,IAAK,CACnD,IAAMmtD,EAAYu3C,EAAW1kG,GACvB49F,EAAWsP,GAAmB//C,GAC9BspD,EAASz4E,EAAM4/D,GACrB,GAAI6Y,EACFl7B,EAAQ78E,KAAK+3G,EAAOpsD,aACf,CACL,IAAIqsD,OAAe,EAEjBA,EADEvpD,EAAU3gB,YAAc2gB,EAAU3gB,WAAWouD,EAAWc,4BACxC4a,EAAqBnpD,GAErBqpD,GAAuB,IAAI1kE,EAAAA,eAAkBqb,EAAWorC,GAE5Ev6D,EAAM4/D,GAAY,CAAEzwC,UAAAA,EAAW9C,QAASqsD,GACxCn7B,EAAQ78E,KAAKg4G,EACf,CACF,CACA,OAAOl6G,QAAQ88D,IAAIiiB,EACrB,GACA,CAAAl5E,IAAA,WAAApG,MAKA,SAAS06G,GAOP,IANA,IAr2B2B34E,EAq2BrBu6D,EAASn8F,KACTk+F,EAAOl+F,KAAKk+F,KACZ9tD,EAAapwC,KAAKowC,WAClBg4D,EAAUlK,EAAKmK,OAAOkS,GACtBjS,EAAaF,EAAQE,WACrBnpB,EAAU,GACPv7E,EAAI,EAAG8sG,EAAKpI,EAAW/lG,OAAQqB,EAAI8sG,EAAI9sG,IAAK,CACnD,IAAMsZ,OAAsC,IAA3BorF,EAAW1kG,GAAGsZ,eA32BF,KADJ0kB,EA42BkD5hC,KAAK4hC,OA32BzD,kBACzBA,EAAuB,gBAAI,IAAI2W,EAAAA,qBAAqB,CAClDspD,MAAO,SACP+X,SAAU,EACVhB,UAAW,EACXE,UAAW,EACXM,aAAa,EACbjlE,WAAW,EACXlG,KAAMusE,EAAAA,aAGH54E,EAAuB,iBAg2B+D5hC,KAAK0nG,cAAc,WAAYY,EAAW1kG,GAAGsZ,UACtIiiE,EAAQ78E,KAAK4a,EACf,CAEA,OADAiiE,EAAQ78E,KAAK65F,EAAOse,eAAenS,IAC5BloG,QAAQ88D,IAAIiiB,GAASjxB,MAAK,SAASmP,GAIxC,IAHA,IAAMzM,EAAYyM,EAAQ18D,MAAM,EAAG08D,EAAQ96D,OAAS,GAC9Cm4G,EAAar9C,EAAQA,EAAQ96D,OAAS,GACtC8lG,EAAS,GACNzkG,EAAI,EAAG8sG,EAAKgK,EAAWn4G,OAAQqB,EAAI8sG,EAAI9sG,IAAK,CACnD,IAAMiqC,EAAW6sE,EAAW92G,GACtBmtD,EAAYu3C,EAAW1kG,GACzBoyB,OAAI,EACF9Y,EAAW0zC,EAAUhtD,GAC3B,GAAImtD,EAAUn/B,OAAS22E,EAAgBC,WAAaz3C,EAAUn/B,OAAS22E,EAAgBE,gBAAkB13C,EAAUn/B,OAAS22E,EAAgBG,mBAAmC,IAAnB33C,EAAUn/B,MAEzI,KAD3BoE,GAAiC,IAA1BoyE,EAAQoL,cAAyB,IAAImH,EAAAA,YAAY9sE,EAAU3wB,GAAY,IAAIixB,EAAAA,KAAKN,EAAU3wB,IACxFs2F,eACPx9E,EAAK4kF,uBAEH7pD,EAAUn/B,OAAS22E,EAAgBE,eACrCzyE,EAAK6X,SAAWktD,EAAoB/kE,EAAK6X,SAAUstD,EAAAA,uBAC1CpqC,EAAUn/B,OAAS22E,EAAgBG,eAC5C1yE,EAAK6X,SAAWktD,EAAoB/kE,EAAK6X,SAAUqtD,EAAAA,2BAEhD,GAAInqC,EAAUn/B,OAAS22E,EAAgB+E,MAC5Ct3E,EAAO,IAAI6kF,EAAAA,aAAahtE,EAAU3wB,QAC7B,GAAI6zC,EAAUn/B,OAAS22E,EAAgBiF,WAC5Cx3E,EAAO,IAAI8kF,EAAAA,KAAKjtE,EAAU3wB,QACrB,GAAI6zC,EAAUn/B,OAAS22E,EAAgBgF,UAC5Cv3E,EAAO,IAAI+kF,EAAAA,SAASltE,EAAU3wB,OACzB,IAAI6zC,EAAUn/B,OAAS22E,EAAgB8E,OAG5C,MAAM,IAAI3qG,MAAM,iDAAmDquD,EAAUn/B,MAF7EoE,EAAO,IAAIglF,EAAAA,OAAOntE,EAAU3wB,EAG9B,CACI5d,OAAO4G,KAAK8vB,EAAK6X,SAASotE,iBAAiB14G,OAAS,GACtDkuG,GAAmBz6E,EAAMoyE,GAE3BpyE,EAAK71B,KAAOg8F,EAAOuG,iBAAiB0F,EAAQjoG,MAAQ,QAAUo6G,GAC9D/X,GAAuBxsE,EAAMoyE,GACzBr3C,EAAU3gB,YACZ+/D,GAA+B//D,EAAYpa,EAAM+6B,GACnDorC,EAAOqN,oBAAoBxzE,GAC3BqyE,EAAO/lG,KAAK0zB,EACd,CACA,IAAK,IAAIpyB,EAAI,EAAG8sG,EAAKrI,EAAO9lG,OAAQqB,EAAI8sG,EAAI9sG,IAC1Cu4F,EAAOoV,aAAa9sG,IAAI4jG,EAAOzkG,GAAI,CACjCykG,OAAQkS,EACRjS,WAAY1kG,IAGhB,GAAsB,IAAlBykG,EAAO9lG,OAGT,OAFI6lG,EAAQh4D,YACV+/D,GAA+B//D,EAAYi4D,EAAO,GAAID,GACjDC,EAAO,GAEhB,IAAM6S,EAAQ,IAAIC,EAAAA,MACd/S,EAAQh4D,YACV+/D,GAA+B//D,EAAY8qE,EAAO9S,GACpDjM,EAAOoV,aAAa9sG,IAAIy2G,EAAO,CAAE7S,OAAQkS,IACzC,IAAK,IAAI32G,EAAI,EAAG8sG,EAAKrI,EAAO9lG,OAAQqB,EAAI8sG,EAAI9sG,IAC1Cs3G,EAAMpzF,IAAIugF,EAAOzkG,IAEnB,OAAOs3G,CACT,GACF,GACA,CAAAj1G,IAAA,aAAApG,MAKA,SAAWu7G,GACT,IAAIrpE,EACEspE,EAAYr7G,KAAKk+F,KAAK4U,QAAQsI,GAC9B50C,EAAS60C,EAAUA,EAAUx5G,MACnC,GAAK2kE,EAiBL,MAbuB,gBAAnB60C,EAAUx5G,KACZkwC,EAAS,IAAI0I,EAAAA,kBACX6gE,EAAAA,UAAUC,SAAS/0C,EAAOg1C,MAC1Bh1C,EAAOi1C,aAAe,EACtBj1C,EAAOk1C,OAAS,EAChBl1C,EAAOm1C,MAAQ,KAEW,iBAAnBN,EAAUx5G,OACnBkwC,EAAS,IAAI2T,EAAAA,oBAAoB8gB,EAAOo1C,KAAMp1C,EAAOo1C,KAAMp1C,EAAOq1C,MAAOr1C,EAAOq1C,KAAMr1C,EAAOk1C,MAAOl1C,EAAOm1C,OAEzGN,EAAUl7G,OACZ4xC,EAAO5xC,KAAOH,KAAK0iG,iBAAiB2Y,EAAUl7G,OAChDqiG,GAAuBzwD,EAAQspE,GACxBj7G,QAAQC,QAAQ0xC,GAhBrBlvC,QAAQC,KAAK,+CAiBjB,GACA,CAAAmD,IAAA,WAAApG,MAKA,SAASszG,GAGP,IAFA,IAAM2I,EAAU97G,KAAKk+F,KAAK+U,MAAME,GAC1Bh0B,EAAU,GACPv7E,EAAI,EAAG8sG,EAAKoL,EAAQzI,OAAO9wG,OAAQqB,EAAI8sG,EAAI9sG,IAClDu7E,EAAQ78E,KAAKtC,KAAK+7G,iBAAiBD,EAAQzI,OAAOzvG,KAOpD,YALoC,IAAhCk4G,EAAQE,oBACV78B,EAAQ78E,KAAKtC,KAAK0nG,cAAc,WAAYoU,EAAQE,sBAEpD78B,EAAQ78E,KAAK,MAERlC,QAAQ88D,IAAIiiB,GAASjxB,MAAK,SAASmP,GAKxC,IAJA,IAAM2+C,EAAsB3+C,EAAQx3D,MAC9Bo2G,EAAa5+C,EACb6+C,EAAQ,GACRC,EAAe,GACZv4G,EAAI,EAAG8sG,EAAKuL,EAAW15G,OAAQqB,EAAI8sG,EAAI9sG,IAAK,CACnD,IAAMw4G,EAAYH,EAAWr4G,GAC7B,GAAIw4G,EAAW,CACbF,EAAM55G,KAAK85G,GACX,IAAMC,EAAM,IAAI9/E,EAAAA,QACY,OAAxBy/E,GACFK,EAAI7+E,UAAUw+E,EAAoB58C,MAAW,GAAJx7D,GAE3Cu4G,EAAa75G,KAAK+5G,EACpB,MACEx5G,QAAQC,KAAK,mDAAoDg5G,EAAQzI,OAAOzvG,GAEpF,CACA,OAAO,IAAI04G,EAAAA,SAASJ,EAAOC,EAC7B,GACF,GACA,CAAAl2G,IAAA,gBAAApG,MAKA,SAAc08G,GASZ,IARA,IACMC,EADOx8G,KAAKk+F,KACQ2U,WAAW0J,GAC/BE,EAAgBD,EAAar8G,KAAOq8G,EAAar8G,KAAO,aAAeo8G,EACvEG,EAAe,GACfC,EAAwB,GACxBC,EAAyB,GACzBC,EAAkB,GAClBC,EAAiB,GACdl5G,EAAI,EAAG8sG,EAAK8L,EAAaO,SAASx6G,OAAQqB,EAAI8sG,EAAI9sG,IAAK,CAC9D,IAAMwnG,EAAUoR,EAAaO,SAASn5G,GAChC0yG,EAAUkG,EAAahG,SAASpL,EAAQkL,SACxCv3G,EAASqsG,EAAQrsG,OACjBoB,EAAOpB,EAAO2rE,KACd1N,OAAoC,IAA5Bw/C,EAAahmE,WAAwBgmE,EAAahmE,WAAW8/D,EAAQt5C,OAASs5C,EAAQt5C,MAC9FggD,OAAqC,IAA5BR,EAAahmE,WAAwBgmE,EAAahmE,WAAW8/D,EAAQ0G,QAAU1G,EAAQ0G,YAClF,IAAhBj+G,EAAO2rE,OAEXgyC,EAAap6G,KAAKtC,KAAK0nG,cAAc,OAAQvnG,IAC7Cw8G,EAAsBr6G,KAAKtC,KAAK0nG,cAAc,WAAY1qC,IAC1D4/C,EAAuBt6G,KAAKtC,KAAK0nG,cAAc,WAAYsV,IAC3DH,EAAgBv6G,KAAKg0G,GACrBwG,EAAex6G,KAAKvD,GACtB,CACA,OAAOqB,QAAQ88D,IAAI,CACjB98D,QAAQ88D,IAAIw/C,GACZt8G,QAAQ88D,IAAIy/C,GACZv8G,QAAQ88D,IAAI0/C,GACZx8G,QAAQ88D,IAAI2/C,GACZz8G,QAAQ88D,IAAI4/C,KACX5uD,MAAK,SAASmwB,GAOf,IANA,IAAM1tB,EAAQ0tB,EAAa,GACrB4+B,EAAiB5+B,EAAa,GAC9B6+B,EAAkB7+B,EAAa,GAC/Bm4B,EAAWn4B,EAAa,GACxB8yB,EAAU9yB,EAAa,GACvB8+B,EAAS,GAAGpnD,EAAA,WAEhB,IAQIqnD,EARE1yC,EAAO/Z,EAAM/sD,GACby5G,EAAgBJ,EAAer5G,GAC/B05G,EAAiBJ,EAAgBt5G,GACjC0yG,EAAUE,EAAS5yG,GACnB7E,EAASoyG,EAAQvtG,GACvB,QAAa,IAAT8mE,EAAe,SAInB,OAFAA,EAAKjsC,eAEGixE,EAAgB3wG,EAAOixC,OAC7B,KAAK0/D,EAAgBE,QACnBwN,EAAqBG,EAAAA,oBACrB,MACF,KAAK7N,EAAgBrxE,SACnB++E,EAAqBI,EAAAA,wBACrB,MAGF,QACEJ,EAAqBK,EAAAA,oBAGzB,IAAMC,EAAahzC,EAAKvqE,KAAOuqE,EAAKvqE,KAAOuqE,EAAK1/D,KAC1C2yG,OAA0C,IAA1BrH,EAAQqH,cAA2B9N,EAAcyG,EAAQqH,eAAiB5N,EAAAA,kBAC1Fa,EAAc,GAChBlB,EAAgB3wG,EAAOixC,QAAU0/D,EAAgBE,QACnDllC,EAAK7Z,UAAS,SAAS7yB,GACjBA,EAAO2yE,uBACTC,EAAYtuG,KAAK07B,EAAO79B,KAAO69B,EAAO79B,KAAO69B,EAAOhzB,KAExD,IAEA4lG,EAAYtuG,KAAKo7G,GAEnB,IAAIE,EAAcN,EAAel+C,MACjC,GAAIk+C,EAAevS,WAAY,CAG7B,IAFA,IAAMpkF,EAAQ0qF,GAA4BuM,EAAYhqD,aAChDiqD,EAAS,IAAIpzG,aAAamzG,EAAYr7G,QACnC8P,EAAI,EAAGyrG,EAAKF,EAAYr7G,OAAQ8P,EAAIyrG,EAAIzrG,IAC/CwrG,EAAOxrG,GAAKurG,EAAYvrG,GAAKsU,EAE/Bi3F,EAAcC,CAChB,CACA,IAAK,IAAIxrG,EAAI,EAAGyrG,EAAKlN,EAAYruG,OAAQ8P,EAAIyrG,EAAIzrG,IAAK,CACpD,IAAM0rG,EAAQ,IAAIX,EAChBxM,EAAYv+F,GAAK,IAAMq9F,EAAgB3wG,EAAOixC,MAC9CqtE,EAAcj+C,MACdw+C,EACAD,GAE4B,gBAA1BrH,EAAQqH,gBACVI,EAAMC,kBAAoB,SAAiD//F,GAEzE,OAAO,IADiBje,gBAAgBw9G,EAAAA,wBAA0B9Q,EAAuCrB,GAC9ErrG,KAAKi+G,MAAOj+G,KAAKsnC,OAAQtnC,KAAKk+G,eAAiB,EAAGjgG,EAC/E,EACA8/F,EAAMC,kBAAkBG,2CAA4C,GAEtEhB,EAAO76G,KAAKy7G,EACd,CACF,EA5DSn6G,EAAI,EAAG8sG,EAAK//C,EAAMpuD,OAAQqB,EAAI8sG,EAAI9sG,IAAGmyD,IA6D9C,OAAO,IAAIqoD,EAAAA,cAAc3B,OAAe,EAAQU,EAClD,GACF,GAAC,CAAAl3G,IAAA,iBAAApG,MACD,SAAeqhG,GACb,IAAMhD,EAAOl+F,KAAKk+F,KACZ/B,EAASn8F,KACTohG,EAAUlD,EAAKvtC,MAAMuwC,GAC3B,YAAqB,IAAjBE,EAAQprE,KACH,KACFmmE,EAAOuL,cAAc,OAAQtG,EAAQprE,MAAMk4B,MAAK,SAASl4B,GAC9D,IAAM00C,EAAOyxB,EAAO0G,YAAY1G,EAAOuV,UAAWtQ,EAAQprE,KAAMA,GAUhE,YATwB,IAApBorE,EAAQwO,SACVllC,EAAK7Z,UAAS,SAAS6O,GACrB,GAAKA,EAAE2+C,OAEP,IAAK,IAAIz6G,EAAI,EAAG8sG,EAAKtP,EAAQwO,QAAQrtG,OAAQqB,EAAI8sG,EAAI9sG,IACnD87D,EAAEixC,sBAAsB/sG,GAAKw9F,EAAQwO,QAAQhsG,EAEjD,IAEK8mE,CACT,GACF,GACA,CAAAzkE,IAAA,WAAApG,MAKA,SAASqhG,GAOP,IANA,IACM/E,EAASn8F,KACTohG,EAFOphG,KAAKk+F,KAEGvtC,MAAMuwC,GACrBod,EAAcniB,EAAO4f,iBAAiB7a,GACtCqd,EAAe,GACfC,EAAcpd,EAAQr9D,UAAY,GAC/BngC,EAAI,EAAG8sG,EAAK8N,EAAYj8G,OAAQqB,EAAI8sG,EAAI9sG,IAC/C26G,EAAaj8G,KAAK65F,EAAOuL,cAAc,OAAQ8W,EAAY56G,KAE7D,IAAM66G,OAAmC,IAAjBrd,EAAQmS,KAAkBnzG,QAAQC,QAAQ,MAAQ87F,EAAOuL,cAAc,OAAQtG,EAAQmS,MAC/G,OAAOnzG,QAAQ88D,IAAI,CAACohD,EAAal+G,QAAQ88D,IAAIqhD,GAAeE,IAAkBvwD,MAAK,SAASmP,GAC1F,IAAMqN,EAAOrN,EAAQ,GACft5B,EAAWs5B,EAAQ,GACnBqhD,EAAWrhD,EAAQ,GACR,OAAbqhD,GACFh0C,EAAK7Z,UAAS,SAAS76B,GAChBA,EAAKw9E,eAEVx9E,EAAK3yB,KAAKq7G,EAAUpN,GACtB,IAEF,IAAK,IAAI1tG,EAAI,EAAG8sG,EAAK3sE,EAASxhC,OAAQqB,EAAI8sG,EAAI9sG,IAC5C8mE,EAAK5iD,IAAIic,EAASngC,IAEpB,OAAO8mE,CACT,GACF,GAEA,CAAAzkE,IAAA,mBAAApG,MACA,SAAiBqhG,GACf,IAAMhD,EAAOl+F,KAAKk+F,KACZ9tD,EAAapwC,KAAKowC,WAClB+rD,EAASn8F,KACf,QAAkC,IAA9BA,KAAKyxG,UAAUvQ,GACjB,OAAOlhG,KAAKyxG,UAAUvQ,GAExB,IAAME,EAAUlD,EAAKvtC,MAAMuwC,GACrByd,EAAWvd,EAAQjhG,KAAOg8F,EAAOuG,iBAAiBtB,EAAQjhG,MAAQ,GAClEg/E,EAAU,GACVy/B,EAAcziB,EAAO2X,YAAW,SAAStB,GAC7C,OAAOA,EAAI1J,gBAAkB0J,EAAI1J,eAAe5H,EAClD,IA4DA,OA3DI0d,GACFz/B,EAAQ78E,KAAKs8G,QAEQ,IAAnBxd,EAAQrvD,QACVotC,EAAQ78E,KACN65F,EAAOuL,cAAc,SAAUtG,EAAQrvD,QAAQmc,MAAK,SAASnc,GAC3D,OAAOoqD,EAAO0G,YAAY1G,EAAOwV,YAAavQ,EAAQrvD,OAAQA,EAChE,KAGJoqD,EAAOoW,YAAW,SAASC,GACzB,OAAOA,EAAIqM,sBAAwBrM,EAAIqM,qBAAqB3d,EAC9D,IAAGvgE,SAAQ,SAASstB,GAClBkxB,EAAQ78E,KAAK2rD,EACf,IACAjuD,KAAKyxG,UAAUvQ,GAAa9gG,QAAQ88D,IAAIiiB,GAASjxB,MAAK,SAASmC,GAC7D,IAAIqa,EAUJ,IAREA,GADqB,IAAnB02B,EAAQkS,OACH,IAAIwL,EAAAA,KACFzuD,EAAQ9tD,OAAS,EACnB,IAAI44G,EAAAA,MACiB,IAAnB9qD,EAAQ9tD,OACV8tD,EAAQ,GAER,IAAI7zB,EAAAA,YAEA6zB,EAAQ,GACnB,IAAK,IAAIzsD,EAAI,EAAG8sG,EAAKrgD,EAAQ9tD,OAAQqB,EAAI8sG,EAAI9sG,IAC3C8mE,EAAK5iD,IAAIuoC,EAAQzsD,IAUrB,GAPIw9F,EAAQjhG,OACVuqE,EAAKnsC,SAASp+B,KAAOihG,EAAQjhG,KAC7BuqE,EAAKvqE,KAAOw+G,GAEdnc,GAAuB93B,EAAM02B,GACzBA,EAAQhxD,YACV+/D,GAA+B//D,EAAYs6B,EAAM02B,QAC5B,IAAnBA,EAAQvwF,OAAmB,CAC7B,IAAMA,EAAS,IAAI0rB,EAAAA,QACnB1rB,EAAO2sB,UAAU4jE,EAAQvwF,QACzB65D,EAAKxvB,aAAarqC,EACpB,WAC8B,IAAxBuwF,EAAQuO,aACVjlC,EAAKjlE,SAAS+3B,UAAU4jE,EAAQuO,kBAET,IAArBvO,EAAQ/iE,UACVqsC,EAAKx0D,WAAWsnB,UAAU4jE,EAAQ/iE,eAEd,IAAlB+iE,EAAQz6E,OACV+jD,EAAK/jD,MAAM6W,UAAU4jE,EAAQz6E,OAOjC,OAJKw1E,EAAOoV,aAAa/6C,IAAIkU,IAC3ByxB,EAAOoV,aAAa9sG,IAAIimE,EAAM,CAAC,GAEjCyxB,EAAOoV,aAAa/sG,IAAIkmE,GAAM/Z,MAAQuwC,EAC/Bx2B,CACT,IACO1qE,KAAKyxG,UAAUvQ,EACxB,GACA,CAAAj7F,IAAA,YAAApG,MAKA,SAAUk/G,GACR,IAAM3uE,EAAapwC,KAAKowC,WAClB4uE,EAAWh/G,KAAKk+F,KAAK0U,OAAOmM,GAC5B5iB,EAASn8F,KACTivC,EAAQ,IAAIksE,EAAAA,MACd6D,EAAS7+G,OACX8uC,EAAM9uC,KAAOg8F,EAAOuG,iBAAiBsc,EAAS7+G,OAChDqiG,GAAuBvzD,EAAO+vE,GAC1BA,EAAS5uE,YACX+/D,GAA+B//D,EAAYnB,EAAO+vE,GAGpD,IAFA,IAAMC,EAAUD,EAASruD,OAAS,GAC5BwuB,EAAU,GACPv7E,EAAI,EAAG8sG,EAAKuO,EAAQ18G,OAAQqB,EAAI8sG,EAAI9sG,IAC3Cu7E,EAAQ78E,KAAK65F,EAAOuL,cAAc,OAAQuX,EAAQr7G,KAEpD,OAAOxD,QAAQ88D,IAAIiiB,GAASjxB,MAAK,SAASyC,GACxC,IAAK,IAAI/sD,EAAI,EAAG8sG,EAAK//C,EAAMpuD,OAAQqB,EAAI8sG,EAAI9sG,IACzCqrC,EAAMnnB,IAAI6oC,EAAM/sD,IAkBlB,OADAu4F,EAAOoV,aAfoB,SAAC7mC,GAC1B,IAC8C9U,EADxCspD,EAAsC,IAAInmD,IAAMlD,GAAA/oD,EAAAA,EAAAA,GAC3BqvF,EAAOoV,cAAY,IAA9C,IAAA17C,EAAA9oD,MAAA6oD,EAAAC,EAAA7xD,KAAAgJ,MAAgD,KAAAmyG,GAAAh0G,EAAAA,EAAAA,GAAAyqD,EAAA/1D,MAAA,GAApCoG,EAAGk5G,EAAA,GAAEt/G,EAAKs/G,EAAA,IAChBl5G,aAAegyB,EAAAA,UAAYhyB,aAAeixG,EAAAA,UAC5CgI,EAAoBz6G,IAAIwB,EAAKpG,EAEjC,CAAC,OAAAW,GAAAq1D,EAAA5oD,EAAAzM,EAAA,SAAAq1D,EAAA3oD,GAAA,CAOD,OANAw9D,EAAK7Z,UAAS,SAACuuD,GACb,IAAMzL,EAAWxX,EAAOoV,aAAa/sG,IAAI46G,GACzB,MAAZzL,GACFuL,EAAoBz6G,IAAI26G,EAAOzL,EAEnC,IACOuL,CACT,CACsBG,CAAmBpwE,GAClCA,CACT,GACF,KAAC4vD,CAAA,CA/mCa,GAsqChB,SAASub,GAAuBvsE,EAAUkjE,EAAc5U,GACtD,IAAMyM,EAAamI,EAAanI,WAC1BzpB,EAAU,GAChB,SAASmgC,EAAwBzK,EAAetL,GAC9C,OAAOpN,EAAOuL,cAAc,WAAYmN,GAAe3mD,MAAK,SAAS26C,GACnEh7D,EAAS8H,aAAa4zD,EAAeV,EACvC,GACF,CACA,IAAK,IAAM0W,KAAqB3W,EAAY,CAC1C,IAAM6B,EAAqBC,EAAW6U,IAAsBA,EAAkBnuB,cAC1EqZ,KAAsB58D,EAAS+6D,YAEnCzpB,EAAQ78E,KAAKg9G,EAAwB1W,EAAW2W,GAAoB9U,GACtE,CACA,QAA6B,IAAzBsG,EAAah6E,UAAuB8W,EAASjoC,MAAO,CACtD,IAAMijG,EAAW1M,EAAOuL,cAAc,WAAYqJ,EAAah6E,SAASm3B,MAAK,SAASsxD,GACpF3xE,EAASytD,SAASkkB,EACpB,IACArgC,EAAQ78E,KAAKumG,EACf,CAGA,OAFArG,GAAuB30D,EAAUkjE,GAzEnC,SAAuBljE,EAAUkjE,EAAc5U,GAC7C,IAAMyM,EAAamI,EAAanI,WAC1Br1E,EAAM,IAAIksF,EAAAA,KAChB,QAA4B,IAAxB7W,EAAWoG,SAAf,CACE,IAAMnG,EAAW1M,EAAO+B,KAAK0M,UAAUhC,EAAWoG,UAC5Ct4F,EAAMmyF,EAASnyF,IACfC,EAAMkyF,EAASlyF,IACrB,QAAY,IAARD,QAA0B,IAARC,EAAtB,CAEE,GADA4c,EAAI9uB,IAAI,IAAI63B,EAAAA,QAAQ5lB,EAAI,GAAIA,EAAI,GAAIA,EAAI,IAAK,IAAI4lB,EAAAA,QAAQ3lB,EAAI,GAAIA,EAAI,GAAIA,EAAI,KACzEkyF,EAASkC,WAAY,CACvB,IAAM2U,EAAWrO,GAA4BvG,EAAsBjC,EAASgC,gBAC5Et3E,EAAI7c,IAAI49B,eAAeorE,GACvBnsF,EAAI5c,IAAI29B,eAAeorE,EACzB,CAQJ,IAAMvO,EAAUJ,EAAaI,QAC7B,QAAgB,IAAZA,EAAoB,CAGtB,IAFA,IAAMwO,EAAkB,IAAIrjF,EAAAA,QACtB5rB,EAAS,IAAI4rB,EAAAA,QACV14B,EAAI,EAAG8sG,EAAKS,EAAQ5uG,OAAQqB,EAAI8sG,EAAI9sG,IAAK,CAChD,IAAM7E,EAASoyG,EAAQvtG,GACvB,QAAwB,IAApB7E,EAAOiwG,SAAqB,CAC9B,IAAMnG,EAAW1M,EAAO+B,KAAK0M,UAAU7rG,EAAOiwG,UACxCt4F,EAAMmyF,EAASnyF,IACfC,EAAMkyF,EAASlyF,IACrB,QAAY,IAARD,QAA0B,IAARC,EAAgB,CAIpC,GAHAjG,EAAOslG,KAAK5hG,KAAKuC,IAAIvC,KAAKgB,IAAIsB,EAAI,IAAKtC,KAAKgB,IAAIuB,EAAI,MACpDjG,EAAOulG,KAAK7hG,KAAKuC,IAAIvC,KAAKgB,IAAIsB,EAAI,IAAKtC,KAAKgB,IAAIuB,EAAI,MACpDjG,EAAOwlG,KAAK9hG,KAAKuC,IAAIvC,KAAKgB,IAAIsB,EAAI,IAAKtC,KAAKgB,IAAIuB,EAAI,MAChDkyF,EAASkC,WAAY,CACvB,IAAM2U,EAAWrO,GAA4BvG,EAAsBjC,EAASgC,gBAC5En6F,EAAO4jC,eAAeorE,EACxB,CACAC,EAAgBhpG,IAAIjG,EACtB,MACE7N,QAAQC,KAAK,sEAEjB,CACF,CACAywB,EAAIqsF,eAAeD,EACrB,CACA9xE,EAASgyE,YAActsF,EACvB,IAAMwB,EAAS,IAAI+qF,EAAAA,OACnBvsF,EAAIwsF,UAAUhrF,EAAOirF,QACrBjrF,EAAO1H,OAASkG,EAAI7c,IAAI0c,WAAWG,EAAI5c,KAAO,EAC9Ck3B,EAASoyE,eAAiBlrF,CAlCxB,MAFElyB,QAAQC,KAAK,sEAKjB,CAgCF,CAsBEo9G,CAAcryE,EAAUkjE,EAAc5U,GAC/B/7F,QAAQ88D,IAAIiiB,GAASjxB,MAAK,WAC/B,YAAgC,IAAzB6iD,EAAaI,QAlzCxB,SAAyBtjE,EAAUsjE,EAAShV,GAI1C,IAHA,IAAIgkB,GAAmB,EACnBC,GAAiB,EACjBC,GAAgB,EACXz8G,EAAI,EAAG8sG,EAAKS,EAAQ5uG,OAAQqB,EAAI8sG,EAAI9sG,IAAK,CAChD,IAAM7E,EAASoyG,EAAQvtG,GAOvB,QANwB,IAApB7E,EAAOiwG,WACTmR,GAAmB,QACC,IAAlBphH,EAAOkwG,SACTmR,GAAiB,QACI,IAAnBrhH,EAAOwwG,UACT8Q,GAAgB,GACdF,GAAoBC,GAAkBC,EACxC,KACJ,CACA,IAAKF,IAAqBC,IAAmBC,EAC3C,OAAOjgH,QAAQC,QAAQwtC,GAIzB,IAHA,IAAMyyE,EAA2B,GAC3BC,EAAyB,GACzBC,EAAwB,GACrB58G,EAAI,EAAG8sG,EAAKS,EAAQ5uG,OAAQqB,EAAI8sG,EAAI9sG,IAAK,CAChD,IAAM7E,EAASoyG,EAAQvtG,GACvB,GAAIu8G,EAAkB,CACpB,IAAMM,OAAsC,IAApB1hH,EAAOiwG,SAAsB7S,EAAOuL,cAAc,WAAY3oG,EAAOiwG,UAAYnhE,EAAS+6D,WAAWnjG,SAC7H66G,EAAyBh+G,KAAKm+G,EAChC,CACA,GAAIL,EAAgB,CAClB,IAAMK,OAAoC,IAAlB1hH,EAAOkwG,OAAoB9S,EAAOuL,cAAc,WAAY3oG,EAAOkwG,QAAUphE,EAAS+6D,WAAW5jF,OACzHu7F,EAAuBj+G,KAAKm+G,EAC9B,CACA,GAAIJ,EAAe,CACjB,IAAMI,OAAqC,IAAnB1hH,EAAOwwG,QAAqBpT,EAAOuL,cAAc,WAAY3oG,EAAOwwG,SAAW1hE,EAAS+6D,WAAW/G,MAC3H2e,EAAsBl+G,KAAKm+G,EAC7B,CACF,CACA,OAAOrgH,QAAQ88D,IAAI,CACjB98D,QAAQ88D,IAAIojD,GACZlgH,QAAQ88D,IAAIqjD,GACZngH,QAAQ88D,IAAIsjD,KACXtyD,MAAK,SAAS08C,GACf,IAAM8V,EAAiB9V,EAAU,GAC3B+V,EAAe/V,EAAU,GACzBgW,EAAchW,EAAU,GAQ9B,OAPIuV,IACFtyE,EAASotE,gBAAgBx1G,SAAWi7G,GAClCN,IACFvyE,EAASotE,gBAAgBj2F,OAAS27F,GAChCN,IACFxyE,EAASotE,gBAAgBpZ,MAAQ+e,GACnC/yE,EAASgzE,sBAAuB,EACzBhzE,CACT,GACF,CA8vC6CizE,CAAgBjzE,EAAUkjE,EAAaI,QAAShV,GAAUtuD,CACrG,GACF,oCCp8Ee,SAASkzE,EAAkBt9G,EAAK0B,IAClC,MAAPA,GAAeA,EAAM1B,EAAIlB,UAAQ4C,EAAM1B,EAAIlB,QAC/C,IAAK,IAAIqB,EAAI,EAAGo9G,EAAO,IAAIr9G,MAAMwB,GAAMvB,EAAIuB,EAAKvB,IAAKo9G,EAAKp9G,GAAKH,EAAIG,GACnE,OAAOo9G,CACT,oECJe,SAASC,EAAgBx9G,GACtC,GAAIE,MAAM0sC,QAAQ5sC,GAAM,OAAOA,CACjC,oECFe,SAASs6C,EAAuBgmB,GAC7C,QAAa,IAATA,EACF,MAAM,IAAIm9C,eAAe,6DAE3B,OAAOn9C,CACT,oECLe,SAASr7D,EAAgBooD,EAAUqwD,GAChD,KAAMrwD,aAAoBqwD,GACxB,MAAM,IAAI1/G,UAAU,oCAExB,4HCFe,SAASkgC,EAAWy/E,EAAQniH,EAAMoiH,GAa/C,OAXE1/E,GADE,SACW/iC,QAAQw6E,UAAU/1E,OAElB,SAAoB+9G,EAAQniH,EAAMoiH,GAC7C,IAAIlqG,EAAI,CAAC,MACTA,EAAE7U,KAAKxD,MAAMqY,EAAGlY,GAChB,IACI6xD,EAAW,IADG5xD,SAASmE,KAAKvE,MAAMsiH,EAAQjqG,IAG9C,OADIkqG,IAAO,OAAevwD,EAAUuwD,EAAMliH,WACnC2xD,CACT,EAEKnvB,EAAW7iC,MAAM,KAAM8B,UAChC,mFCfA,SAAS0gH,EAAkBviH,EAAQ+L,GACjC,IAAK,IAAIlH,EAAI,EAAGA,EAAIkH,EAAMvI,OAAQqB,IAAK,CACrC,IAAI29G,EAAaz2G,EAAMlH,GACvB29G,EAAWh9G,WAAag9G,EAAWh9G,aAAc,EACjDg9G,EAAWhkE,cAAe,EACtB,UAAWgkE,IAAYA,EAAW/jE,UAAW,GACjDl+C,OAAOgF,eAAevF,GAAQ,OAAcwiH,EAAWt7G,KAAMs7G,EAC/D,CACF,CACe,SAAS52G,EAAaw2G,EAAaK,EAAYC,GAM5D,OALID,GAAYF,EAAkBH,EAAYhiH,UAAWqiH,GACrDC,GAAaH,EAAkBH,EAAaM,GAChDniH,OAAOgF,eAAe68G,EAAa,YAAa,CAC9C3jE,UAAU,IAEL2jE,CACT,kFChBe,SAASr0G,EAA2B4yD,EAAGgiD,GACpD,IAAIC,EAAuB,qBAAX10D,QAA0ByS,EAAEzS,OAAOC,WAAawS,EAAE,cAClE,IAAKiiD,EAAI,CACP,GAAIh+G,MAAM0sC,QAAQqvB,KAAOiiD,GAAK,OAA2BjiD,KAAOgiD,GAAkBhiD,GAAyB,kBAAbA,EAAEn9D,OAAqB,CAC/Go/G,IAAIjiD,EAAIiiD,GACZ,IAAI/9G,EAAI,EACJ+7E,EAAI,WAAc,EACtB,MAAO,CACL5yE,EAAG4yE,EACH37E,EAAG,WACD,OAAIJ,GAAK87D,EAAEn9D,OAAe,CACxByK,MAAM,GAED,CACLA,MAAM,EACNnN,MAAO6/D,EAAE97D,KAEb,EACAqJ,EAAG,SAAW61C,GACZ,MAAMA,CACR,EACA51C,EAAGyyE,EAEP,CACA,MAAM,IAAIl+E,UAAU,wIACtB,CACA,IAEEjB,EAFEohH,GAAmB,EACrBC,GAAS,EAEX,MAAO,CACL90G,EAAG,WACD40G,EAAKA,EAAGviH,KAAKsgE,EACf,EACA17D,EAAG,WACD,IAAIyhC,EAAOk8E,EAAGv0D,OAEd,OADAw0D,EAAmBn8E,EAAKz4B,KACjBy4B,CACT,EACAx4B,EAAG,SAAW60G,GACZD,GAAS,EACTrhH,EAAMshH,CACR,EACA50G,EAAG,WACD,IACO00G,GAAoC,MAAhBD,EAAW,QAAWA,EAAW,QAC5D,CAAE,QACA,GAAIE,EAAQ,MAAMrhH,CACpB,CACF,EAEJ,iHChDe,SAAS+H,EAAaw5G,GACnC,IAAIC,GAA4B,EAAAC,EAAA,KAChC,OAAO,WACL,IACEhkG,EADEikG,GAAQ,EAAAv9G,EAAA,GAAeo9G,GAE3B,GAAIC,EAA2B,CAC7B,IAAIG,GAAY,EAAAx9G,EAAA,GAAe3E,MAAM4zD,YACrC31C,EAASrf,QAAQw6E,UAAU8oC,EAAOthH,UAAWuhH,EAC/C,MACElkG,EAASikG,EAAMpjH,MAAMkB,KAAMY,WAE7B,OCZW,SAAoCmjE,EAAM3kE,GACvD,GAAIA,IAA2B,YAAlB,OAAQA,IAAsC,oBAATA,GAChD,OAAOA,EACF,QAAa,IAATA,EACT,MAAM,IAAIqC,UAAU,4DAEtB,OAAO,EAAA2gH,EAAA,GAAsBr+C,EAC/B,CDKW,CAA0B/jE,KAAMie,EACzC,CACF,mFEfe,SAAS4f,EAAgBqR,EAAKjpC,EAAKpG,GAYhD,OAXAoG,GAAM,OAAcA,MACTipC,EACT5vC,OAAOgF,eAAe4qC,EAAKjpC,EAAK,CAC9BpG,MAAOA,EACP0E,YAAY,EACZg5C,cAAc,EACdC,UAAU,IAGZtO,EAAIjpC,GAAOpG,EAENqvC,CACT,qCCde,SAAS6D,IAYtB,OAXAA,EAAWzzC,OAAO4rD,OAAS5rD,OAAO4rD,OAAO7nD,OAAS,SAAUtE,GAC1D,IAAK,IAAI6E,EAAI,EAAGA,EAAIhD,UAAU2B,OAAQqB,IAAK,CACzC,IAAI+C,EAAS/F,UAAUgD,GACvB,IAAK,IAAIqC,KAAOU,EACVrH,OAAOH,UAAU4uD,eAAe3uD,KAAKuH,EAAQV,KAC/ClH,EAAOkH,GAAOU,EAAOV,GAG3B,CACA,OAAOlH,CACT,EACOg0C,EAASj0C,MAAMkB,KAAMY,UAC9B,kHCZe,SAASmrC,IActB,OAZEA,EADqB,qBAAZntC,SAA2BA,QAAQ4F,IACrC5F,QAAQ4F,IAAInB,OAEZ,SAActE,EAAQk6D,EAAUj6D,GACrC,IAAIqjH,ECLK,SAAwBrkF,EAAQi7B,GAC7C,MAAQ35D,OAAOH,UAAU4uD,eAAe3uD,KAAK4+B,EAAQi7B,IAEpC,QADfj7B,GAAS,EAAAr5B,EAAA,GAAeq5B,MAG1B,OAAOA,CACT,CDDiB,CAAcj/B,EAAQk6D,GACjC,GAAKopD,EAAL,CACA,IAAIC,EAAOhjH,OAAOijH,yBAAyBF,EAAMppD,GACjD,OAAIqpD,EAAK99G,IACA89G,EAAK99G,IAAIpF,KAAKwB,UAAU2B,OAAS,EAAIxD,EAASC,GAEhDsjH,EAAKziH,KALK,CAMnB,EAEKksC,EAAKjtC,MAAMkB,KAAMY,UAC1B,qCEhBe,SAASorC,EAAgB0zB,GAItC,OAHA1zB,EAAkB1sC,OAAOkjH,eAAiBljH,OAAOqF,eAAetB,OAAS,SAAyBq8D,GAChG,OAAOA,EAAE+iD,WAAanjH,OAAOqF,eAAe+6D,EAC9C,EACO1zB,EAAgB0zB,EACzB,iHCJe,SAASr3D,EAAUq6G,EAAUC,GAC1C,GAA0B,oBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAIlhH,UAAU,sDAEtBihH,EAASvjH,UAAYG,OAAO4C,OAAOygH,GAAcA,EAAWxjH,UAAW,CACrEy0D,YAAa,CACX/zD,MAAO6iH,EACPllE,UAAU,EACVD,cAAc,KAGlBj+C,OAAOgF,eAAeo+G,EAAU,YAAa,CAC3CllE,UAAU,IAERmlE,IAAY,OAAeD,EAAUC,EAC3C,qCChBe,SAASC,IACtB,GAAuB,qBAAZhkH,UAA4BA,QAAQw6E,UAAW,OAAO,EACjE,GAAIx6E,QAAQw6E,UAAUypC,KAAM,OAAO,EACnC,GAAqB,oBAAVC,MAAsB,OAAO,EACxC,IAEE,OADA72F,QAAQ9sB,UAAU4jH,QAAQ3jH,KAAKR,QAAQw6E,UAAUntD,QAAS,IAAI,WAAa,MACpE,CACT,CAAE,MAAOhf,GACP,OAAO,CACT,CACF,oECVe,SAAS+1G,EAAiBC,GACvC,GAAsB,qBAAXh2D,QAAmD,MAAzBg2D,EAAKh2D,OAAOC,WAA2C,MAAtB+1D,EAAK,cAAuB,OAAOt/G,MAAMuU,KAAK+qG,EACtH,oECFe,SAASC,IACtB,MAAM,IAAIzhH,UAAU,4IACtB,kHCDA,SAASpC,EAAQ4N,EAAG+F,GAClB,IAAIb,EAAI7S,OAAO4G,KAAK+G,GACpB,GAAI3N,OAAOC,sBAAuB,CAChC,IAAImgE,EAAIpgE,OAAOC,sBAAsB0N,GACrC+F,IAAM0sD,EAAIA,EAAElK,QAAO,SAAUxiD,GAC3B,OAAO1T,OAAOijH,yBAAyBt1G,EAAG+F,GAAGzO,UAC/C,KAAK4N,EAAE7P,KAAKxD,MAAMqT,EAAGutD,EACvB,CACA,OAAOvtD,CACT,CACe,SAASgxG,EAAel2G,GACrC,IAAK,IAAI+F,EAAI,EAAGA,EAAIpS,UAAU2B,OAAQyQ,IAAK,CACzC,IAAIb,EAAI,MAAQvR,UAAUoS,GAAKpS,UAAUoS,GAAK,CAAC,EAC/CA,EAAI,EAAI3T,EAAQC,OAAO6S,IAAI,GAAIwuB,SAAQ,SAAU3tB,IAC/C,OAAe/F,EAAG+F,EAAGb,EAAEa,GACzB,IAAK1T,OAAO8jH,0BAA4B9jH,OAAO+rE,iBAAiBp+D,EAAG3N,OAAO8jH,0BAA0BjxG,IAAM9S,EAAQC,OAAO6S,IAAIwuB,SAAQ,SAAU3tB,GAC7I1T,OAAOgF,eAAe2I,EAAG+F,EAAG1T,OAAOijH,yBAAyBpwG,EAAGa,GACjE,GACF,CACA,OAAO/F,CACT,qCCpBe,SAASwzB,EAAyB95B,EAAQ08G,GACvD,GAAc,MAAV18G,EAAgB,MAAO,CAAC,EAC5B,IACIV,EAAKrC,EADL7E,ECHS,SAAuC4H,EAAQ08G,GAC5D,GAAc,MAAV18G,EAAgB,MAAO,CAAC,EAC5B,IAEIV,EAAKrC,EAFL7E,EAAS,CAAC,EACVukH,EAAahkH,OAAO4G,KAAKS,GAE7B,IAAK/C,EAAI,EAAGA,EAAI0/G,EAAW/gH,OAAQqB,IACjCqC,EAAMq9G,EAAW1/G,GACby/G,EAAS97G,QAAQtB,IAAQ,IAC7BlH,EAAOkH,GAAOU,EAAOV,IAEvB,OAAOlH,CACT,CDRe,CAA6B4H,EAAQ08G,GAElD,GAAI/jH,OAAOC,sBAAuB,CAChC,IAAIgkH,EAAmBjkH,OAAOC,sBAAsBoH,GACpD,IAAK/C,EAAI,EAAGA,EAAI2/G,EAAiBhhH,OAAQqB,IACvCqC,EAAMs9G,EAAiB3/G,GACnBy/G,EAAS97G,QAAQtB,IAAQ,GACxB3G,OAAOH,UAAUqkH,qBAAqBpkH,KAAKuH,EAAQV,KACxDlH,EAAOkH,GAAOU,EAAOV,GAEzB,CACA,OAAOlH,CACT,oEEfe,SAAS0kH,EAAgB/jD,EAAGjtD,GAKzC,OAJAgxG,EAAkBnkH,OAAOkjH,eAAiBljH,OAAOkjH,eAAen/G,OAAS,SAAyBq8D,EAAGjtD,GAEnG,OADAitD,EAAE+iD,UAAYhwG,EACPitD,CACT,EACO+jD,EAAgB/jD,EAAGjtD,EAC5B,yICFe,SAAStH,EAAe1H,EAAKG,GAC1C,OAAO,EAAA4vD,EAAA,GAAe/vD,ICLT,SAA+BuP,EAAGoD,GAC/C,IAAIjE,EAAI,MAAQa,EAAI,KAAO,oBAAsBi6C,QAAUj6C,EAAEi6C,OAAOC,WAAal6C,EAAE,cACnF,GAAI,MAAQb,EAAG,CACb,IAAIlF,EACFjJ,EACAJ,EACAyS,EACAc,EAAI,GACJjK,GAAI,EACJwyD,GAAI,EACN,IACE,GAAI97D,GAAKuO,EAAIA,EAAE/S,KAAK4T,IAAIo6C,KAAM,IAAMh3C,EAAG,CACrC,GAAI9W,OAAO6S,KAAOA,EAAG,OACrBjF,GAAI,CACN,MAAO,OAASA,GAAKD,EAAIrJ,EAAExE,KAAK+S,IAAInF,QAAUmK,EAAE7U,KAAK2K,EAAEpN,OAAQsX,EAAE5U,SAAW6T,GAAIlJ,GAAI,GACtF,CAAE,MAAO8F,GACP0sD,GAAI,EAAI17D,EAAIgP,CACd,CAAE,QACA,IACE,IAAK9F,GAAK,MAAQiF,EAAU,SAAMkE,EAAIlE,EAAU,SAAK7S,OAAO+W,KAAOA,GAAI,MACzE,CAAE,QACA,GAAIqpD,EAAG,MAAM17D,CACf,CACF,CACA,OAAOmT,CACT,CACF,CDrBgC,CAAqB1T,EAAKG,KAAM,EAAA8vD,EAAA,GAA2BjwD,EAAKG,KAAM,EAAA+vD,EAAA,IACtG,yGEFe,SAASn1B,EAAmB/6B,GACzC,OCJa,SAA4BA,GACzC,GAAIE,MAAM0sC,QAAQ5sC,GAAM,OAAO,EAAAigH,EAAA,GAAiBjgH,EAClD,CDES,CAAkBA,KAAQ,EAAAgwD,EAAA,GAAgBhwD,KAAQ,EAAAiwD,EAAA,GAA2BjwD,IELvE,WACb,MAAM,IAAIhC,UAAU,uIACtB,CFG8F,EAC9F,mFGJe,SAASkiH,EAAev/G,GACrC,IAAI6B,ECFS,SAAsB+2D,EAAO4mD,GAC1C,GAAuB,YAAnB,OAAQ5mD,IAAiC,OAAVA,EAAgB,OAAOA,EAC1D,IAAI6mD,EAAO7mD,EAAM/P,OAAO62D,aACxB,QAAa3iH,IAAT0iH,EAAoB,CACtB,IAAI1mD,EAAM0mD,EAAKzkH,KAAK49D,EAAO4mD,GAAQ,WACnC,GAAqB,YAAjB,OAAQzmD,GAAmB,OAAOA,EACtC,MAAM,IAAI17D,UAAU,+CACtB,CACA,OAAiB,WAATmiH,EAAoBjhH,OAAShD,QAAQq9D,EAC/C,CDPY,CAAY54D,EAAK,UAC3B,MAAwB,YAAjB,OAAQ6B,GAAoBA,EAAMtD,OAAOsD,EAClD,iFEJe,SAAS89G,EAA4BrkD,EAAGskD,GACrD,GAAKtkD,EAAL,CACA,GAAiB,kBAANA,EAAgB,OAAO,OAAiBA,EAAGskD,GACtD,IAAIhgH,EAAI1E,OAAOH,UAAU0T,SAASzT,KAAKsgE,GAAG/+D,MAAM,GAAI,GAEpD,MADU,WAANqD,GAAkB07D,EAAE9L,cAAa5vD,EAAI07D,EAAE9L,YAAYzzD,MAC7C,QAAN6D,GAAqB,QAANA,EAAoBL,MAAMuU,KAAKwnD,GACxC,cAAN17D,GAAqB,2CAA2CsX,KAAKtX,IAAW,OAAiB07D,EAAGskD,QAAxG,CALc,CAMhB,4qeCJe,SAASC,EAAiB5C,GACvC,IAAI6C,EAAwB,oBAARnrD,IAAqB,IAAIA,SAAQ53D,EAuBrD,OAtBA8iH,EAAmB,SAA0B5C,GAC3C,GAAc,OAAVA,ICPkCniF,EDOEmiF,GCNsB,IAAzDniH,SAAS2T,SAASzT,KAAK8/B,GAAI33B,QAAQ,kBDMQ,OAAO85G,ECP5C,IAA2BniF,EDQtC,GAAqB,oBAAVmiF,EACT,MAAM,IAAI5/G,UAAU,sDAEtB,GAAsB,qBAAXyiH,EAAwB,CACjC,GAAIA,EAAO1tD,IAAI6qD,GAAQ,OAAO6C,EAAO1/G,IAAI68G,GACzC6C,EAAOz/G,IAAI48G,EAAO8C,EACpB,CACA,SAASA,IACP,OAAO,EAAA/qC,EAAA,GAAUioC,EAAOzgH,WAAW,EAAA+D,EAAA,GAAe3E,MAAM4zD,YAC1D,CASA,OARAuwD,EAAQhlH,UAAYG,OAAO4C,OAAOm/G,EAAMliH,UAAW,CACjDy0D,YAAa,CACX/zD,MAAOskH,EACP5/G,YAAY,EACZi5C,UAAU,EACVD,cAAc,MAGX,EAAAilE,EAAA,GAAe2B,EAAS9C,EACjC,EACO4C,EAAiB5C,EAC1B,8HExBM3zE,EAAW,MACX0Q,EAAQ,CAAEJ,KAAM,EAAGM,OAAQ,EAAGJ,MAAO,EAAGG,OAAQ,EAAGE,MAAO,EAAGC,IAAK,GAClEE,EAAQ,CAAEL,OAAQ,EAAGG,IAAK,EAAGI,UAAW,EAAGkJ,aAAc,GACzDs8D,EAAe,EACfC,EAAe,EACfC,EAAgB,EAChBC,EAAoB,EACpBC,EAAiB,EACjBC,EAAe,EACfC,EAAmB,EACnBC,EAAe,EACfnK,EAAY,EACZoK,EAAW,EACX12E,EAAa,EACb+F,EAAa,EACb4wE,EAAiB,EACjBC,EAAmB,EACnBC,EAAsB,EACtBC,EAAmB,EACnBC,EAAiB,EACjBC,EAAc,IACdC,EAAmB,IACnBC,EAA0B,IAC1BC,EAAc,IACdC,EAAc,IACdC,EAAa,IACbC,EAAY,IACZC,EAAiB,IACjBC,EAAyB,IACzBC,EAAiB,IACjBC,EAAyB,IACzBC,EAAiB,IACjBC,EAAyB,IACzBC,EAAiB,IACjBC,GAAyB,IACzBC,GAAyB,IACzBC,GAAa,EACbC,GAAc,EACdC,GAAY,EACZC,GAAiB,EACjBC,GAAa,EACbC,GAAoB,EACpBC,GAAe,EACfC,GAAgB,EAChBC,GAAoB,EACpBC,GAAe,EACfC,GAAe,EACfC,GAAgB,EAChBC,GAAoB,EACpBC,GAAsB,EACtBC,GAAoB,EACpBC,GAAwB,EACxBC,GAAoB,EAEpBC,GAAY,IACZv2E,GAAwB,IACxBw2E,GAAwB,IACxBv2E,GAAmC,IACnCw2E,GAAmC,IACnCC,GAA0B,IAC1B/Y,GAAiB,IACjBF,GAAsB,KACtBC,GAAyB,KACzBP,GAAgB,KAChBC,GAA6B,KAC7BuZ,GAA6B,KAC7BrZ,GAA4B,KAC5BsZ,GAA4B,KAC5Bl7E,GAAe,KACf2hE,GAA4B,KAC5BwZ,GAA4B,KAC5BtZ,GAA2B,KAC3BuZ,GAA2B,KAC3BC,GAAmB,KACnBC,GAAW,KACXC,GAAY,KACZ1rE,GAAoB,KACpB2rE,GAAU,KACVC,GAAkB,KAClBt8E,GAAY,KACZnD,GAAgB,KAChB0/E,GAAwB,KACxBC,GAAwB,KACxBC,GAAqB,KACrBC,GAAc,KACdC,GAAY,KACZC,GAAa,KACbC,GAAkB,KAClBC,GAAuB,KACvBrsE,GAAc,KACdssE,GAAqB,KACrBC,GAAY,KACZC,GAAmB,KACnBC,GAAW,KACXC,GAAkB,KAClBC,GAAoB,KAEpBC,GAAuB,MACvBC,GAAwB,MACxBC,GAAwB,MACxBC,GAAwB,MACxBC,GAA0B,MAC1BC,GAA0B,MAC1BC,GAA2B,MAC3BC,GAA2B,MAC3BC,GAAkB,MAClBC,GAAkB,MAClBC,GAAuB,MACvBC,GAAuB,MACvBC,GAAuB,MACvBC,GAAuB,MACvBC,GAAuB,MACvBC,GAAuB,MACvBC,GAAuB,MACvBC,GAAuB,MACvBC,GAAuB,MACvBC,GAAwB,MACxBC,GAAwB,MACxBC,GAAwB,MACxBC,GAAyB,MACzBC,GAAyB,MACzBC,GAAyB,MACzBC,GAAmB,MACnBC,GAAW,KACXC,GAAa,KACbC,GAAe,KACfza,GAAsB,KACtBF,GAAoB,KACpB4a,GAAoB,KACpBC,GAAsB,KACtBC,GAAkB,KAClBC,GAAmB,KACnBC,GAA2B,KAC3BC,GAA6B,KAC7B/vB,GAAoB,EACpBE,GAAwB,EACxBD,GAAsB,EACtBnqD,GAAiB,IACjBD,GAAe,KACfm6E,GAAoB,KACpBC,GAAmB,KACnBC,GAAwB,EACxBC,GAAuB,EAGvBC,GAAe,GACfC,GAAiB,OACjBC,GAAuB,cAEvBC,GAAgB,EAChBC,GAAgB,KAChBC,GAAmB,KACnBC,GAAqB,KACrBC,GAAqB,KACrBC,GAAyB,MACzBC,GAAyB,MACzBC,GAAkB,KAElBC,GAAmB,IACnBC,GAAkB,IAClBC,GAAmB,IACnBC,GAAuB,IACvBC,GAAqB,IACrBC,GAAsB,IACtBC,GAA0B,IAC1BC,GAAoB,IAEpBC,GAAkB,MAClBxsF,GAAmB,MACnBysF,GAAkB,MAClBC,GAAkB,MAClBC,GAAmB,MACnBC,GAAkB,MAClBC,GAAkB,MAClBC,GAAmB,MACnBC,GAAkB,MAElBC,GAAQ,MACRC,GAAQ,SAERC,GAAe,KAMf1jE,GAAe,oBAAAA,KAAA9gD,EAAAA,EAAAA,GAAA,KAAA8gD,EAAA,CA6EnB,OA7EmB7+C,EAAAA,EAAAA,GAAA6+C,EAAA,EAAAvjD,IAAA,mBAAApG,MAEpB,SAAkBgC,EAAML,QAEEL,IAApBnB,KAAKsD,aAA2BtD,KAAKsD,WAAa,CAAC,GAExD,IAAM8B,EAAYpF,KAAKsD,gBAEInC,IAAtBiE,EAAWvD,KAEfuD,EAAWvD,GAAS,KAI4B,IAA5CuD,EAAWvD,GAAO0F,QAAS/F,IAE/B4D,EAAWvD,GAAOS,KAAMd,EAI1B,GAAC,CAAAyE,IAAA,mBAAApG,MAED,SAAkBgC,EAAML,GAEvB,QAAyBL,IAApBnB,KAAKsD,WAA2B,OAAO,EAE5C,IAAM8B,EAAYpF,KAAKsD,WAEvB,YAA6BnC,IAAtBiE,EAAWvD,KAAoE,IAA5CuD,EAAWvD,GAAO0F,QAAS/F,EAEtE,GAAC,CAAAyE,IAAA,sBAAApG,MAED,SAAqBgC,EAAML,GAE1B,QAAyBL,IAApBnB,KAAKsD,WAAV,CAEA,IACM0V,EADYhZ,KAAKsD,WACUzB,GAEjC,QAAuBV,IAAlB6X,EAA8B,CAElC,IAAMpT,EAAQoT,EAAczR,QAAS/F,IAEpB,IAAZoE,GAEJoT,EAAcF,OAAQlT,EAAO,EAI/B,CAf2C,CAiB5C,GAAC,CAAAK,IAAA,gBAAApG,MAED,SAAekZ,GAEd,QAAyB5X,IAApBnB,KAAKsD,WAAV,CAEA,IACM0V,EADYhZ,KAAKsD,WACUyV,EAAMlX,MAEvC,QAAuBV,IAAlB6X,EAA8B,CAElCD,EAAMha,OAASiB,KAKf,IAFA,IAAMo/D,EAAQpmD,EAAcrY,MAAO,GAEzBiD,EAAI,EAAGwS,EAAIgpD,EAAM78D,OAAQqB,EAAIwS,EAAGxS,IAEzCw7D,EAAOx7D,GAAIxE,KAAMY,KAAM+Y,GAIxBA,EAAMha,OAAS,IAEhB,CApB2C,CAsB5C,KAACyqD,CAAA,CA7EmB,GAiFf2jE,GAAO,CAAE,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAErgDC,GAAQ,QAGNC,GAAUj5G,KAAKyF,GAAK,IACpByzG,GAAU,IAAMl5G,KAAKyF,GAG3B,SAAS0zG,KAER,IAAMnqG,EAAqB,WAAhBhP,KAAKo5G,SAAwB,EAClCnqG,EAAqB,WAAhBjP,KAAKo5G,SAAwB,EAClCp4F,EAAqB,WAAhBhhB,KAAKo5G,SAAwB,EAClCC,EAAqB,WAAhBr5G,KAAKo5G,SAAwB,EAOxC,OANaL,GAAW,IAAL/pG,GAAc+pG,GAAM/pG,GAAM,EAAI,KAAS+pG,GAAM/pG,GAAM,GAAK,KAAS+pG,GAAM/pG,GAAM,GAAK,KAAS,IAC5G+pG,GAAW,IAAL9pG,GAAc8pG,GAAM9pG,GAAM,EAAI,KAAS,IAAM8pG,GAAM9pG,GAAM,GAAK,GAAO,IAAS8pG,GAAM9pG,GAAM,GAAK,KAAS,IAC9G8pG,GAAW,GAAL/3F,EAAY,KAAS+3F,GAAM/3F,GAAM,EAAI,KAAS,IAAM+3F,GAAM/3F,GAAM,GAAK,KAAS+3F,GAAM/3F,GAAM,GAAK,KACrG+3F,GAAW,IAALM,GAAcN,GAAMM,GAAM,EAAI,KAASN,GAAMM,GAAM,GAAK,KAASN,GAAMM,GAAM,GAAK,MAG9Er8B,aAEb,CAEA,SAASs8B,GAAO7tH,EAAO6W,EAAKC,GAE3B,OAAOvC,KAAKuC,IAAKD,EAAKtC,KAAKsC,IAAKC,EAAK9W,GAEtC,CAIA,SAAS8tH,GAAiB3pH,EAAGjC,GAE5B,OAAWiC,EAAIjC,EAAMA,GAAMA,CAE5B,CAyBA,SAAS6jB,GAAM5W,EAAGC,EAAGkD,GAEpB,OAAS,EAAIA,GAAMnD,EAAImD,EAAIlD,CAE5B,CAyFA,SAAS2+G,GAAc/tH,GAEtB,OAAqC,KAA5BA,EAAUA,EAAQ,IAAyB,IAAVA,CAE3C,CAEA,SAASguH,GAAgBhuH,GAExB,OAAOuU,KAAK0F,IAAK,EAAG1F,KAAKq9E,KAAMr9E,KAAK0Q,IAAKjlB,GAAUuU,KAAKwmE,KAEzD,CAEA,SAASkzC,GAAiBjuH,GAEzB,OAAOuU,KAAK0F,IAAK,EAAG1F,KAAKi5B,MAAOj5B,KAAK0Q,IAAKjlB,GAAUuU,KAAKwmE,KAE1D,CA0DA,SAASmzC,GAAaluH,EAAOu/D,GAE5B,OAASA,EAAMxL,aAEd,KAAKnpD,aAEJ,OAAO5K,EAER,KAAKsH,YAEJ,OAAOtH,EAAQ,MAEhB,KAAKmH,WAEJ,OAAOnH,EAAQ,IAEhB,KAAK+tG,WAEJ,OAAOx5F,KAAKuC,IAAK9W,EAAQ,OAAW,GAErC,KAAK8tG,UAEJ,OAAOv5F,KAAKuC,IAAK9W,EAAQ,KAAS,GAEnC,QAEC,MAAM,IAAI6C,MAAO,2BAIpB,CAEA,SAAS4W,GAAWzZ,EAAOu/D,GAE1B,OAASA,EAAMxL,aAEd,KAAKnpD,aAEJ,OAAO5K,EAER,KAAKsH,YAEJ,OAAOiN,KAAK8jD,MAAe,MAARr4D,GAEpB,KAAKmH,WAEJ,OAAOoN,KAAK8jD,MAAe,IAARr4D,GAEpB,KAAK+tG,WAEJ,OAAOx5F,KAAK8jD,MAAe,MAARr4D,GAEpB,KAAK8tG,UAEJ,OAAOv5F,KAAK8jD,MAAe,IAARr4D,GAEpB,QAEC,MAAM,IAAI6C,MAAO,2BAIpB,CAEA,IAAI44G,GAAyBh8G,OAAOqqE,OAAO,CAC1C84C,UAAW,KACX4K,QAASA,GACTC,QAASA,GACTC,aAAcA,GACdG,MAAOA,GACPC,gBAAiBA,GACjBK,UApQD,SAAoBh/G,EAAGi/G,EAAIC,EAAIC,EAAIC,GAElC,OAAOD,GAAOn/G,EAAIi/G,IAASG,EAAKD,IAASD,EAAKD,EAE/C,EAiQCI,YA9PD,SAAsBr/G,EAAGC,EAAGpP,GAE3B,OAAKmP,IAAMC,GAEDpP,EAAQmP,IAAQC,EAAID,GAItB,CAIT,EAmPC4W,KAAMA,GACN0oG,KA1OD,SAAet/G,EAAGC,EAAGs/G,EAAQ9xG,GAE5B,OAAOmJ,GAAM5W,EAAGC,EAAG,EAAImF,KAAKo6G,KAAOD,EAAS9xG,GAE7C,EAuOCgyG,SApOD,SAAmBz/G,GAAgB,IAAbzM,EAAM3B,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAE9B,OAAO2B,EAAS6R,KAAKgB,IAAKu4G,GAAiB3+G,EAAY,EAATzM,GAAeA,EAE9D,EAiOCmsH,WA9ND,SAAqB1/G,EAAG0H,EAAKC,GAE5B,OAAK3H,GAAK0H,EAAa,EAClB1H,GAAK2H,EAAa,GAEvB3H,GAAMA,EAAI0H,IAAUC,EAAMD,IAEf1H,GAAM,EAAI,EAAIA,EAE1B,EAsNC2/G,aApND,SAAuB3/G,EAAG0H,EAAKC,GAE9B,OAAK3H,GAAK0H,EAAa,EAClB1H,GAAK2H,EAAa,GAEvB3H,GAAMA,EAAI0H,IAAUC,EAAMD,IAEf1H,EAAIA,GAAMA,GAAU,EAAJA,EAAQ,IAAO,GAE3C,EA4MC4/G,QAzMD,SAAkBC,EAAKC,GAEtB,OAAOD,EAAMz6G,KAAKi5B,MAAOj5B,KAAKo5G,UAAasB,EAAOD,EAAM,GAEzD,EAsMCE,UAnMD,SAAoBF,EAAKC,GAExB,OAAOD,EAAMz6G,KAAKo5G,UAAasB,EAAOD,EAEvC,EAgMCG,gBA7LD,SAA0BjtB,GAEzB,OAAOA,GAAU,GAAM3tF,KAAKo5G,SAE7B,EA0LCyB,aAvLD,SAAuBliH,QAEX5L,IAAN4L,IAAkBqgH,GAAQrgH,GAI/B,IAAIoF,EAAIi7G,IAAS,WAMjB,OAJAj7G,EAAIiC,KAAK86G,KAAM/8G,EAAIA,IAAM,GAAQ,EAAJA,MAE7BA,GAAKA,EAAIiC,KAAK86G,KAAM/8G,EAAIA,IAAM,EAAO,GAAJA,IAElBA,IAAM,MAAS,GAAM,UAErC,EA0KCg9G,SAxKD,SAAmBC,GAElB,OAAOA,EAAU/B,EAElB,EAqKC9R,SAnKD,SAAmB8T,GAElB,OAAOA,EAAU/B,EAElB,EAgKCM,aAAcA,GACdC,eAAgBA,GAChBC,gBAAiBA,GACjBwB,6BA/ID,SAAuCp8G,EAAGiE,EAAG/E,EAAGgF,EAAG8D,GAQlD,IAAM9B,EAAMhF,KAAKgF,IACXD,EAAM/E,KAAK+E,IAEX0C,EAAKzC,EAAKhH,EAAI,GACd4J,EAAK7C,EAAK/G,EAAI,GAEdm9G,EAAMn2G,GAAOjC,EAAIC,GAAM,GACvBo4G,EAAMr2G,GAAOhC,EAAIC,GAAM,GAEvBq4G,EAAOr2G,GAAOjC,EAAIC,GAAM,GACxBs4G,EAAOv2G,GAAOhC,EAAIC,GAAM,GAExBu4G,EAAOv2G,GAAOhC,EAAID,GAAM,GACxBy4G,EAAOz2G,GAAO/B,EAAID,GAAM,GAE9B,OAAS+D,GAER,IAAK,MACJhI,EAAEzO,IAAKoX,EAAK2zG,EAAKxzG,EAAKyzG,EAAMzzG,EAAK0zG,EAAM7zG,EAAK0zG,GAC5C,MAED,IAAK,MACJr8G,EAAEzO,IAAKuX,EAAK0zG,EAAM7zG,EAAK2zG,EAAKxzG,EAAKyzG,EAAM5zG,EAAK0zG,GAC5C,MAED,IAAK,MACJr8G,EAAEzO,IAAKuX,EAAKyzG,EAAMzzG,EAAK0zG,EAAM7zG,EAAK2zG,EAAK3zG,EAAK0zG,GAC5C,MAED,IAAK,MACJr8G,EAAEzO,IAAKoX,EAAK2zG,EAAKxzG,EAAK4zG,EAAM5zG,EAAK2zG,EAAM9zG,EAAK0zG,GAC5C,MAED,IAAK,MACJr8G,EAAEzO,IAAKuX,EAAK2zG,EAAM9zG,EAAK2zG,EAAKxzG,EAAK4zG,EAAM/zG,EAAK0zG,GAC5C,MAED,IAAK,MACJr8G,EAAEzO,IAAKuX,EAAK4zG,EAAM5zG,EAAK2zG,EAAM9zG,EAAK2zG,EAAK3zG,EAAK0zG,GAC5C,MAED,QACC1sH,QAAQC,KAAM,kFAAoFoY,GAIrG,EA0FC5B,UAAWA,GACXy0G,YAAaA,KAGR36E,GAAO,SAAAy8E,GAEZ,SAAAz8E,IAA4B,IAAfpkC,EAACpO,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGqO,EAACrO,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAC8H,EAAAA,EAAAA,GAAA,KAAA0qC,GAExBA,EAAQj0C,UAAU2wH,WAAY,EAE9B9vH,KAAKgP,EAAIA,EACThP,KAAKiP,EAAIA,CAEV,CAkcC,OAlcAtE,EAAAA,EAAAA,GAAAyoC,EAAA,EAAAntC,IAAA,QAAAzB,IAED,WAEC,OAAOxE,KAAKgP,CAEb,EAACvK,IAED,SAAW5E,GAEVG,KAAKgP,EAAInP,CAEV,GAAC,CAAAoG,IAAA,SAAAzB,IAED,WAEC,OAAOxE,KAAKiP,CAEb,EAACxK,IAED,SAAY5E,GAEXG,KAAKiP,EAAIpP,CAEV,GAAC,CAAAoG,IAAA,MAAApG,MAED,SAAKmP,EAAGC,GAKP,OAHAjP,KAAKgP,EAAIA,EACThP,KAAKiP,EAAIA,EAEFjP,IAER,GAAC,CAAAiG,IAAA,YAAApG,MAED,SAAW+U,GAKV,OAHA5U,KAAKgP,EAAI4F,EACT5U,KAAKiP,EAAI2F,EAEF5U,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAMmP,GAIL,OAFAhP,KAAKgP,EAAIA,EAEFhP,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAMoP,GAIL,OAFAjP,KAAKiP,EAAIA,EAEFjP,IAER,GAAC,CAAAiG,IAAA,eAAApG,MAED,SAAc+F,EAAO/F,GAEpB,OAAS+F,GAER,KAAK,EAAG5F,KAAKgP,EAAInP,EAAO,MACxB,KAAK,EAAGG,KAAKiP,EAAIpP,EAAO,MACxB,QAAS,MAAM,IAAI6C,MAAO,0BAA4BkD,GAIvD,OAAO5F,IAER,GAAC,CAAAiG,IAAA,eAAApG,MAED,SAAc+F,GAEb,OAASA,GAER,KAAK,EAAG,OAAO5F,KAAKgP,EACpB,KAAK,EAAG,OAAOhP,KAAKiP,EACpB,QAAS,MAAM,IAAIvM,MAAO,0BAA4BkD,GAIxD,GAAC,CAAAK,IAAA,QAAApG,MAED,WAEC,OAAO,IAAIG,KAAK4zD,YAAa5zD,KAAKgP,EAAGhP,KAAKiP,EAE3C,GAAC,CAAAhJ,IAAA,OAAApG,MAED,SAAM+Q,GAKL,OAHA5Q,KAAKgP,EAAI4B,EAAE5B,EACXhP,KAAKiP,EAAI2B,EAAE3B,EAEJjP,IAER,GAAC,CAAAiG,IAAA,MAAApG,MAED,SAAK+Q,GAKJ,OAHA5Q,KAAKgP,GAAK4B,EAAE5B,EACZhP,KAAKiP,GAAK2B,EAAE3B,EAELjP,IAER,GAAC,CAAAiG,IAAA,YAAApG,MAED,SAAWkN,GAKV,OAHA/M,KAAKgP,GAAKjC,EACV/M,KAAKiP,GAAKlC,EAEH/M,IAER,GAAC,CAAAiG,IAAA,aAAApG,MAED,SAAYsX,EAAG/E,GAKd,OAHApS,KAAKgP,EAAImI,EAAEnI,EAAIoD,EAAEpD,EACjBhP,KAAKiP,EAAIkI,EAAElI,EAAImD,EAAEnD,EAEVjP,IAER,GAAC,CAAAiG,IAAA,kBAAApG,MAED,SAAiB+Q,EAAG7D,GAKnB,OAHA/M,KAAKgP,GAAK4B,EAAE5B,EAAIjC,EAChB/M,KAAKiP,GAAK2B,EAAE3B,EAAIlC,EAET/M,IAER,GAAC,CAAAiG,IAAA,MAAApG,MAED,SAAK+Q,GAKJ,OAHA5Q,KAAKgP,GAAK4B,EAAE5B,EACZhP,KAAKiP,GAAK2B,EAAE3B,EAELjP,IAER,GAAC,CAAAiG,IAAA,YAAApG,MAED,SAAWkN,GAKV,OAHA/M,KAAKgP,GAAKjC,EACV/M,KAAKiP,GAAKlC,EAEH/M,IAER,GAAC,CAAAiG,IAAA,aAAApG,MAED,SAAYsX,EAAG/E,GAKd,OAHApS,KAAKgP,EAAImI,EAAEnI,EAAIoD,EAAEpD,EACjBhP,KAAKiP,EAAIkI,EAAElI,EAAImD,EAAEnD,EAEVjP,IAER,GAAC,CAAAiG,IAAA,WAAApG,MAED,SAAU+Q,GAKT,OAHA5Q,KAAKgP,GAAK4B,EAAE5B,EACZhP,KAAKiP,GAAK2B,EAAE3B,EAELjP,IAER,GAAC,CAAAiG,IAAA,iBAAApG,MAED,SAAgB+U,GAKf,OAHA5U,KAAKgP,GAAK4F,EACV5U,KAAKiP,GAAK2F,EAEH5U,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQ+Q,GAKP,OAHA5Q,KAAKgP,GAAK4B,EAAE5B,EACZhP,KAAKiP,GAAK2B,EAAE3B,EAELjP,IAER,GAAC,CAAAiG,IAAA,eAAApG,MAED,SAAc+U,GAEb,OAAO5U,KAAKs0C,eAAgB,EAAI1/B,EAEjC,GAAC,CAAA3O,IAAA,eAAApG,MAED,SAAckC,GAEb,IAAMiN,EAAIhP,KAAKgP,EAAGC,EAAIjP,KAAKiP,EACrBhC,EAAIlL,EAAE0O,SAKZ,OAHAzQ,KAAKgP,EAAI/B,EAAG,GAAM+B,EAAI/B,EAAG,GAAMgC,EAAIhC,EAAG,GACtCjN,KAAKiP,EAAIhC,EAAG,GAAM+B,EAAI/B,EAAG,GAAMgC,EAAIhC,EAAG,GAE/BjN,IAER,GAAC,CAAAiG,IAAA,MAAApG,MAED,SAAK+Q,GAKJ,OAHA5Q,KAAKgP,EAAIoF,KAAKsC,IAAK1W,KAAKgP,EAAG4B,EAAE5B,GAC7BhP,KAAKiP,EAAImF,KAAKsC,IAAK1W,KAAKiP,EAAG2B,EAAE3B,GAEtBjP,IAER,GAAC,CAAAiG,IAAA,MAAApG,MAED,SAAK+Q,GAKJ,OAHA5Q,KAAKgP,EAAIoF,KAAKuC,IAAK3W,KAAKgP,EAAG4B,EAAE5B,GAC7BhP,KAAKiP,EAAImF,KAAKuC,IAAK3W,KAAKiP,EAAG2B,EAAE3B,GAEtBjP,IAER,GAAC,CAAAiG,IAAA,QAAApG,MAED,SAAO6W,EAAKC,GAOX,OAHA3W,KAAKgP,EAAIoF,KAAKuC,IAAKD,EAAI1H,EAAGoF,KAAKsC,IAAKC,EAAI3H,EAAGhP,KAAKgP,IAChDhP,KAAKiP,EAAImF,KAAKuC,IAAKD,EAAIzH,EAAGmF,KAAKsC,IAAKC,EAAI1H,EAAGjP,KAAKiP,IAEzCjP,IAER,GAAC,CAAAiG,IAAA,cAAApG,MAED,SAAakwH,EAAQC,GAKpB,OAHAhwH,KAAKgP,EAAIoF,KAAKuC,IAAKo5G,EAAQ37G,KAAKsC,IAAKs5G,EAAQhwH,KAAKgP,IAClDhP,KAAKiP,EAAImF,KAAKuC,IAAKo5G,EAAQ37G,KAAKsC,IAAKs5G,EAAQhwH,KAAKiP,IAE3CjP,IAER,GAAC,CAAAiG,IAAA,cAAApG,MAED,SAAa6W,EAAKC,GAEjB,IAAMpU,EAASvC,KAAKuC,SAEpB,OAAOvC,KAAKiwH,aAAc1tH,GAAU,GAAI+xC,eAAgBlgC,KAAKuC,IAAKD,EAAKtC,KAAKsC,IAAKC,EAAKpU,IAEvF,GAAC,CAAA0D,IAAA,QAAApG,MAED,WAKC,OAHAG,KAAKgP,EAAIoF,KAAKi5B,MAAOrtC,KAAKgP,GAC1BhP,KAAKiP,EAAImF,KAAKi5B,MAAOrtC,KAAKiP,GAEnBjP,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,WAKC,OAHAG,KAAKgP,EAAIoF,KAAKq9E,KAAMzxF,KAAKgP,GACzBhP,KAAKiP,EAAImF,KAAKq9E,KAAMzxF,KAAKiP,GAElBjP,IAER,GAAC,CAAAiG,IAAA,QAAApG,MAED,WAKC,OAHAG,KAAKgP,EAAIoF,KAAK8jD,MAAOl4D,KAAKgP,GAC1BhP,KAAKiP,EAAImF,KAAK8jD,MAAOl4D,KAAKiP,GAEnBjP,IAER,GAAC,CAAAiG,IAAA,cAAApG,MAED,WAKC,OAHAG,KAAKgP,EAAMhP,KAAKgP,EAAI,EAAMoF,KAAKq9E,KAAMzxF,KAAKgP,GAAMoF,KAAKi5B,MAAOrtC,KAAKgP,GACjEhP,KAAKiP,EAAMjP,KAAKiP,EAAI,EAAMmF,KAAKq9E,KAAMzxF,KAAKiP,GAAMmF,KAAKi5B,MAAOrtC,KAAKiP,GAE1DjP,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,WAKC,OAHAG,KAAKgP,GAAMhP,KAAKgP,EAChBhP,KAAKiP,GAAMjP,KAAKiP,EAETjP,IAER,GAAC,CAAAiG,IAAA,MAAApG,MAED,SAAK+Q,GAEJ,OAAO5Q,KAAKgP,EAAI4B,EAAE5B,EAAIhP,KAAKiP,EAAI2B,EAAE3B,CAElC,GAAC,CAAAhJ,IAAA,QAAApG,MAED,SAAO+Q,GAEN,OAAO5Q,KAAKgP,EAAI4B,EAAE3B,EAAIjP,KAAKiP,EAAI2B,EAAE5B,CAElC,GAAC,CAAA/I,IAAA,WAAApG,MAED,WAEC,OAAOG,KAAKgP,EAAIhP,KAAKgP,EAAIhP,KAAKiP,EAAIjP,KAAKiP,CAExC,GAAC,CAAAhJ,IAAA,SAAApG,MAED,WAEC,OAAOuU,KAAKC,KAAMrU,KAAKgP,EAAIhP,KAAKgP,EAAIhP,KAAKiP,EAAIjP,KAAKiP,EAEnD,GAAC,CAAAhJ,IAAA,kBAAApG,MAED,WAEC,OAAOuU,KAAKgB,IAAKpV,KAAKgP,GAAMoF,KAAKgB,IAAKpV,KAAKiP,EAE5C,GAAC,CAAAhJ,IAAA,YAAApG,MAED,WAEC,OAAOG,KAAKiwH,aAAcjwH,KAAKuC,UAAY,EAE5C,GAAC,CAAA0D,IAAA,QAAApG,MAED,WAIC,IAAMqZ,EAAQ9E,KAAKmH,OAASvb,KAAKiP,GAAKjP,KAAKgP,GAAMoF,KAAKyF,GAEtD,OAAOX,CAER,GAAC,CAAAjT,IAAA,aAAApG,MAED,SAAY+Q,GAEX,OAAOwD,KAAKC,KAAMrU,KAAKkiD,kBAAmBtxC,GAE3C,GAAC,CAAA3K,IAAA,oBAAApG,MAED,SAAmB+Q,GAElB,IAAMq2C,EAAKjnD,KAAKgP,EAAI4B,EAAE5B,EAAGk4C,EAAKlnD,KAAKiP,EAAI2B,EAAE3B,EACzC,OAAOg4C,EAAKA,EAAKC,EAAKA,CAEvB,GAAC,CAAAjhD,IAAA,sBAAApG,MAED,SAAqB+Q,GAEpB,OAAOwD,KAAKgB,IAAKpV,KAAKgP,EAAI4B,EAAE5B,GAAMoF,KAAKgB,IAAKpV,KAAKiP,EAAI2B,EAAE3B,EAExD,GAAC,CAAAhJ,IAAA,YAAApG,MAED,SAAW0C,GAEV,OAAOvC,KAAKsZ,YAAYg7B,eAAgB/xC,EAEzC,GAAC,CAAA0D,IAAA,OAAApG,MAED,SAAM+Q,EAAG4zD,GAKR,OAHAxkE,KAAKgP,IAAO4B,EAAE5B,EAAIhP,KAAKgP,GAAMw1D,EAC7BxkE,KAAKiP,IAAO2B,EAAE3B,EAAIjP,KAAKiP,GAAMu1D,EAEtBxkE,IAER,GAAC,CAAAiG,IAAA,cAAApG,MAED,SAAag8B,EAAIC,EAAI0oC,GAKpB,OAHAxkE,KAAKgP,EAAI6sB,EAAG7sB,GAAM8sB,EAAG9sB,EAAI6sB,EAAG7sB,GAAMw1D,EAClCxkE,KAAKiP,EAAI4sB,EAAG5sB,GAAM6sB,EAAG7sB,EAAI4sB,EAAG5sB,GAAMu1D,EAE3BxkE,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQ+Q,GAEP,OAAWA,EAAE5B,IAAMhP,KAAKgP,GAAS4B,EAAE3B,IAAMjP,KAAKiP,CAE/C,GAAC,CAAAhJ,IAAA,YAAApG,MAED,SAAWu/D,GAAoB,IAAbx4C,EAAMhmB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAK1B,OAHAZ,KAAKgP,EAAIowD,EAAOx4C,GAChB5mB,KAAKiP,EAAImwD,EAAOx4C,EAAS,GAElB5mB,IAER,GAAC,CAAAiG,IAAA,UAAApG,MAED,WAAkC,IAAzBu/D,EAAKx+D,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAIgmB,EAAMhmB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAK7B,OAHAw+D,EAAOx4C,GAAW5mB,KAAKgP,EACvBowD,EAAOx4C,EAAS,GAAM5mB,KAAKiP,EAEpBmwD,CAER,GAAC,CAAAn5D,IAAA,sBAAApG,MAED,SAAqBorG,EAAWrlG,GAK/B,OAHA5F,KAAKgP,EAAIi8F,EAAUxP,KAAM71F,GACzB5F,KAAKiP,EAAIg8F,EAAUilB,KAAMtqH,GAElB5F,IAER,GAAC,CAAAiG,IAAA,eAAApG,MAED,SAAcmgH,EAAQ9mG,GAErB,IAAM9B,EAAIhD,KAAKgF,IAAKF,GAASnM,EAAIqH,KAAK+E,IAAKD,GAErClK,EAAIhP,KAAKgP,EAAIgxG,EAAOhxG,EACpBC,EAAIjP,KAAKiP,EAAI+wG,EAAO/wG,EAK1B,OAHAjP,KAAKgP,EAAIA,EAAIoI,EAAInI,EAAIlC,EAAIizG,EAAOhxG,EAChChP,KAAKiP,EAAID,EAAIjC,EAAIkC,EAAImI,EAAI4oG,EAAO/wG,EAEzBjP,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,WAKC,OAHAG,KAAKgP,EAAIoF,KAAKo5G,SACdxtH,KAAKiP,EAAImF,KAAKo5G,SAEPxtH,IAER,GAAC,CAAAiG,IAAA4pH,EAAAhwH,OAAAswH,EAAAA,EAAAA,KAAAC,MAED,SAAAvwH,IAAA,OAAAswH,EAAAA,EAAAA,KAAAE,MAAA,SAAAC,GAAA,cAAAA,EAAAroD,KAAAqoD,EAAAljE,MAAA,OAEC,OAFDkjE,EAAAljE,KAAA,EAEOptD,KAAKgP,EAAC,OACZ,OADYshH,EAAAljE,KAAA,EACNptD,KAAKiP,EAAC,wBAAAqhH,EAAA90D,OAAA,GAAA37D,EAAA,YAEZuzC,CAAA,CA3cW,CAscT6Z,OAAOC,UASLqjE,GAAO,WAEZ,SAAAA,KAAc7nH,EAAAA,EAAAA,GAAA,KAAA6nH,GAEbA,EAAQpxH,UAAUqxH,WAAY,EAE9BxwH,KAAKyQ,SAAW,CAEf,EAAG,EAAG,EACN,EAAG,EAAG,EACN,EAAG,EAAG,EAIR,CA0TC,OA1TA9F,EAAAA,EAAAA,GAAA4lH,EAAA,EAAAtqH,IAAA,MAAApG,MAED,SAAK4wH,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,GAE5C,IAAMlsC,EAAK/kF,KAAKyQ,SAMhB,OAJAs0E,EAAI,GAAM0rC,EAAK1rC,EAAI,GAAM6rC,EAAK7rC,EAAI,GAAMgsC,EACxChsC,EAAI,GAAM2rC,EAAK3rC,EAAI,GAAM8rC,EAAK9rC,EAAI,GAAMisC,EACxCjsC,EAAI,GAAM4rC,EAAK5rC,EAAI,GAAM+rC,EAAK/rC,EAAI,GAAMksC,EAEjCjxH,IAER,GAAC,CAAAiG,IAAA,WAAApG,MAED,WAUC,OARAG,KAAKyE,IAEJ,EAAG,EAAG,EACN,EAAG,EAAG,EACN,EAAG,EAAG,GAIAzE,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAMkC,GAEL,IAAMgjF,EAAK/kF,KAAKyQ,SACV8zE,EAAKxiF,EAAE0O,SAMb,OAJAs0E,EAAI,GAAMR,EAAI,GAAKQ,EAAI,GAAMR,EAAI,GAAKQ,EAAI,GAAMR,EAAI,GACpDQ,EAAI,GAAMR,EAAI,GAAKQ,EAAI,GAAMR,EAAI,GAAKQ,EAAI,GAAMR,EAAI,GACpDQ,EAAI,GAAMR,EAAI,GAAKQ,EAAI,GAAMR,EAAI,GAAKQ,EAAI,GAAMR,EAAI,GAE7CvkF,IAER,GAAC,CAAAiG,IAAA,eAAApG,MAED,SAAcqxH,EAAOC,EAAOC,GAM3B,OAJAF,EAAMG,qBAAsBrxH,KAAM,GAClCmxH,EAAME,qBAAsBrxH,KAAM,GAClCoxH,EAAMC,qBAAsBrxH,KAAM,GAE3BA,IAER,GAAC,CAAAiG,IAAA,iBAAApG,MAED,SAAgBkC,GAEf,IAAMwiF,EAAKxiF,EAAE0O,SAUb,OARAzQ,KAAKyE,IAEJ8/E,EAAI,GAAKA,EAAI,GAAKA,EAAI,GACtBA,EAAI,GAAKA,EAAI,GAAKA,EAAI,GACtBA,EAAI,GAAKA,EAAI,GAAKA,EAAI,KAIhBvkF,IAER,GAAC,CAAAiG,IAAA,WAAApG,MAED,SAAUkC,GAET,OAAO/B,KAAKsxH,iBAAkBtxH,KAAM+B,EAErC,GAAC,CAAAkE,IAAA,cAAApG,MAED,SAAakC,GAEZ,OAAO/B,KAAKsxH,iBAAkBvvH,EAAG/B,KAElC,GAAC,CAAAiG,IAAA,mBAAApG,MAED,SAAkBsX,EAAG/E,GAEpB,IAAMmxE,EAAKpsE,EAAE1G,SACP+yE,EAAKpxE,EAAE3B,SACPs0E,EAAK/kF,KAAKyQ,SAEVQ,EAAMsyE,EAAI,GAAKryE,EAAMqyE,EAAI,GAAKpyE,EAAMoyE,EAAI,GACxCnyE,EAAMmyE,EAAI,GAAKlyE,EAAMkyE,EAAI,GAAKjyE,EAAMiyE,EAAI,GACxChyE,EAAMgyE,EAAI,GAAK/xE,EAAM+xE,EAAI,GAAK9xE,EAAM8xE,EAAI,GAExC7xE,EAAM8xE,EAAI,GAAK7xE,EAAM6xE,EAAI,GAAK5xE,EAAM4xE,EAAI,GACxC3xE,EAAM2xE,EAAI,GAAK1xE,EAAM0xE,EAAI,GAAKzxE,EAAMyxE,EAAI,GACxCxxE,EAAMwxE,EAAI,GAAKvxE,EAAMuxE,EAAI,GAAKtxE,EAAMsxE,EAAI,GAc9C,OAZAuB,EAAI,GAAM9zE,EAAMS,EAAMR,EAAMW,EAAMV,EAAMa,EACxC+yE,EAAI,GAAM9zE,EAAMU,EAAMT,EAAMY,EAAMX,EAAMc,EACxC8yE,EAAI,GAAM9zE,EAAMW,EAAMV,EAAMa,EAAMZ,EAAMe,EAExC6yE,EAAI,GAAM3zE,EAAMM,EAAML,EAAMQ,EAAMP,EAAMU,EACxC+yE,EAAI,GAAM3zE,EAAMO,EAAMN,EAAMS,EAAMR,EAAMW,EACxC8yE,EAAI,GAAM3zE,EAAMQ,EAAMP,EAAMU,EAAMT,EAAMY,EAExC6yE,EAAI,GAAMxzE,EAAMG,EAAMF,EAAMK,EAAMJ,EAAMO,EACxC+yE,EAAI,GAAMxzE,EAAMI,EAAMH,EAAMM,EAAML,EAAMQ,EACxC8yE,EAAI,GAAMxzE,EAAMK,EAAMJ,EAAMO,EAAMN,EAAMS,EAEjClS,IAER,GAAC,CAAAiG,IAAA,iBAAApG,MAED,SAAgBkN,GAEf,IAAMg4E,EAAK/kF,KAAKyQ,SAMhB,OAJAs0E,EAAI,IAAOh4E,EAAGg4E,EAAI,IAAOh4E,EAAGg4E,EAAI,IAAOh4E,EACvCg4E,EAAI,IAAOh4E,EAAGg4E,EAAI,IAAOh4E,EAAGg4E,EAAI,IAAOh4E,EACvCg4E,EAAI,IAAOh4E,EAAGg4E,EAAI,IAAOh4E,EAAGg4E,EAAI,IAAOh4E,EAEhC/M,IAER,GAAC,CAAAiG,IAAA,cAAApG,MAED,WAEC,IAAMklF,EAAK/kF,KAAKyQ,SAEV0G,EAAI4tE,EAAI,GAAK3yE,EAAI2yE,EAAI,GAAK3tE,EAAI2tE,EAAI,GACvC1tE,EAAI0tE,EAAI,GAAK93E,EAAI83E,EAAI,GAAK73E,EAAI63E,EAAI,GAClCztE,EAAIytE,EAAI,GAAKxtE,EAAIwtE,EAAI,GAAKnhF,EAAImhF,EAAI,GAEnC,OAAO5tE,EAAIlK,EAAIrJ,EAAIuT,EAAIjK,EAAIqK,EAAInF,EAAIiF,EAAIzT,EAAIwO,EAAIlF,EAAIoK,EAAIF,EAAIC,EAAIE,EAAIH,EAAInK,EAAIqK,CAE5E,GAAC,CAAArR,IAAA,SAAApG,MAED,WAEC,IAAMklF,EAAK/kF,KAAKyQ,SAEfggH,EAAM1rC,EAAI,GAAK6rC,EAAM7rC,EAAI,GAAKgsC,EAAMhsC,EAAI,GACxC2rC,EAAM3rC,EAAI,GAAK8rC,EAAM9rC,EAAI,GAAKisC,EAAMjsC,EAAI,GACxC4rC,EAAM5rC,EAAI,GAAK+rC,EAAM/rC,EAAI,GAAKksC,EAAMlsC,EAAI,GAExCwsC,EAAMN,EAAMJ,EAAMG,EAAMF,EACxBU,EAAMR,EAAML,EAAMM,EAAMP,EACxBe,EAAMX,EAAMJ,EAAMG,EAAMF,EAExBe,EAAMjB,EAAMc,EAAMX,EAAMY,EAAMT,EAAMU,EAErC,GAAa,IAARC,EAAY,OAAO1xH,KAAKyE,IAAK,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAE1D,IAAMktH,EAAS,EAAID,EAcnB,OAZA3sC,EAAI,GAAMwsC,EAAMI,EAChB5sC,EAAI,IAAQgsC,EAAMD,EAAMG,EAAML,GAAQe,EACtC5sC,EAAI,IAAQisC,EAAMJ,EAAMG,EAAMF,GAAQc,EAEtC5sC,EAAI,GAAMysC,EAAMG,EAChB5sC,EAAI,IAAQksC,EAAMR,EAAMM,EAAMJ,GAAQgB,EACtC5sC,EAAI,IAAQgsC,EAAML,EAAMM,EAAMP,GAAQkB,EAEtC5sC,EAAI,GAAM0sC,EAAME,EAChB5sC,EAAI,IAAQ6rC,EAAMD,EAAMG,EAAML,GAAQkB,EACtC5sC,EAAI,IAAQ8rC,EAAMJ,EAAMG,EAAMF,GAAQiB,EAE/B3xH,IAER,GAAC,CAAAiG,IAAA,YAAApG,MAED,WAEC,IAAIkU,EACEhS,EAAI/B,KAAKyQ,SAMf,OAJAsD,EAAMhS,EAAG,GAAKA,EAAG,GAAMA,EAAG,GAAKA,EAAG,GAAMgS,EACxCA,EAAMhS,EAAG,GAAKA,EAAG,GAAMA,EAAG,GAAKA,EAAG,GAAMgS,EACxCA,EAAMhS,EAAG,GAAKA,EAAG,GAAMA,EAAG,GAAKA,EAAG,GAAMgS,EAEjC/T,IAER,GAAC,CAAAiG,IAAA,kBAAApG,MAED,SAAiB+xH,GAEhB,OAAO5xH,KAAK6xH,eAAgBD,GAAUjxE,SAASvyB,WAEhD,GAAC,CAAAnoB,IAAA,qBAAApG,MAED,SAAoBmT,GAEnB,IAAMjR,EAAI/B,KAAKyQ,SAYf,OAVAuC,EAAG,GAAMjR,EAAG,GACZiR,EAAG,GAAMjR,EAAG,GACZiR,EAAG,GAAMjR,EAAG,GACZiR,EAAG,GAAMjR,EAAG,GACZiR,EAAG,GAAMjR,EAAG,GACZiR,EAAG,GAAMjR,EAAG,GACZiR,EAAG,GAAMjR,EAAG,GACZiR,EAAG,GAAMjR,EAAG,GACZiR,EAAG,GAAMjR,EAAG,GAEL/B,IAER,GAAC,CAAAiG,IAAA,iBAAApG,MAED,SAAgBowB,EAAIC,EAAI1H,EAAIC,EAAI4V,EAAUyzF,EAAIC,GAE7C,IAAM36G,EAAIhD,KAAKgF,IAAKilB,GACdtxB,EAAIqH,KAAK+E,IAAKklB,GAQpB,OANAr+B,KAAKyE,IACJ+jB,EAAKpR,EAAGoR,EAAKzb,GAAKyb,GAAOpR,EAAI06G,EAAK/kH,EAAIglH,GAAOD,EAAK7hG,GAChDxH,EAAK1b,EAAG0b,EAAKrR,GAAKqR,IAAS1b,EAAI+kH,EAAK16G,EAAI26G,GAAOA,EAAK7hG,EACtD,EAAG,EAAG,GAGAlwB,IAER,GAAC,CAAAiG,IAAA,QAAApG,MAED,SAAO2oB,EAAIC,GAEV,IAAMs8D,EAAK/kF,KAAKyQ,SAKhB,OAHAs0E,EAAI,IAAOv8D,EAAIu8D,EAAI,IAAOv8D,EAAIu8D,EAAI,IAAOv8D,EACzCu8D,EAAI,IAAOt8D,EAAIs8D,EAAI,IAAOt8D,EAAIs8D,EAAI,IAAOt8D,EAElCzoB,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQw/C,GAEP,IAAMjoC,EAAIhD,KAAKgF,IAAKimC,GACdtyC,EAAIqH,KAAK+E,IAAKkmC,GAEd0lC,EAAK/kF,KAAKyQ,SAEVQ,EAAM8zE,EAAI,GAAK7zE,EAAM6zE,EAAI,GAAK5zE,EAAM4zE,EAAI,GACxC3zE,EAAM2zE,EAAI,GAAK1zE,EAAM0zE,EAAI,GAAKzzE,EAAMyzE,EAAI,GAU9C,OARAA,EAAI,GAAM3tE,EAAInG,EAAMlE,EAAIqE,EACxB2zE,EAAI,GAAM3tE,EAAIlG,EAAMnE,EAAIsE,EACxB0zE,EAAI,GAAM3tE,EAAIjG,EAAMpE,EAAIuE,EAExByzE,EAAI,IAAQh4E,EAAIkE,EAAMmG,EAAIhG,EAC1B2zE,EAAI,IAAQh4E,EAAImE,EAAMkG,EAAI/F,EAC1B0zE,EAAI,IAAQh4E,EAAIoE,EAAMiG,EAAI9F,EAEnBtR,IAER,GAAC,CAAAiG,IAAA,YAAApG,MAED,SAAWowB,EAAIC,GAEd,IAAM60D,EAAK/kF,KAAKyQ,SAKhB,OAHAs0E,EAAI,IAAO90D,EAAK80D,EAAI,GAAKA,EAAI,IAAO90D,EAAK80D,EAAI,GAAKA,EAAI,IAAO90D,EAAK80D,EAAI,GACtEA,EAAI,IAAO70D,EAAK60D,EAAI,GAAKA,EAAI,IAAO70D,EAAK60D,EAAI,GAAKA,EAAI,IAAO70D,EAAK60D,EAAI,GAE/D/kF,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQgR,GAKP,IAHA,IAAMk0E,EAAK/kF,KAAKyQ,SACV8zE,EAAK1zE,EAAOJ,SAER7M,EAAI,EAAGA,EAAI,EAAGA,IAEvB,GAAKmhF,EAAInhF,KAAQ2gF,EAAI3gF,GAAM,OAAO,EAInC,OAAO,CAER,GAAC,CAAAqC,IAAA,YAAApG,MAED,SAAWu/D,GAEV,IAF8B,IAAbx4C,EAAMhmB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAEhBgD,EAAI,EAAGA,EAAI,EAAGA,IAEvB5D,KAAKyQ,SAAU7M,GAAMw7D,EAAOx7D,EAAIgjB,GAIjC,OAAO5mB,IAER,GAAC,CAAAiG,IAAA,UAAApG,MAED,WAAkC,IAAzBu/D,EAAKx+D,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAIgmB,EAAMhmB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAEvBmkF,EAAK/kF,KAAKyQ,SAchB,OAZA2uD,EAAOx4C,GAAWm+D,EAAI,GACtB3lB,EAAOx4C,EAAS,GAAMm+D,EAAI,GAC1B3lB,EAAOx4C,EAAS,GAAMm+D,EAAI,GAE1B3lB,EAAOx4C,EAAS,GAAMm+D,EAAI,GAC1B3lB,EAAOx4C,EAAS,GAAMm+D,EAAI,GAC1B3lB,EAAOx4C,EAAS,GAAMm+D,EAAI,GAE1B3lB,EAAOx4C,EAAS,GAAMm+D,EAAI,GAC1B3lB,EAAOx4C,EAAS,GAAMm+D,EAAI,GAC1B3lB,EAAOx4C,EAAS,GAAMm+D,EAAI,GAEnB3lB,CAER,GAAC,CAAAn5D,IAAA,QAAApG,MAED,WAEC,OAAO,IAAIG,KAAK4zD,aAAcp2B,UAAWx9B,KAAKyQ,SAE/C,KAAC8/G,CAAA,CAxUW,GA4Ub,SAASyB,GAAkB5yD,GAI1B,IAAM,IAAIx7D,EAAIw7D,EAAM78D,OAAS,EAAGqB,GAAK,IAAMA,EAE1C,GAAKw7D,EAAOx7D,IAAO,MAAQ,OAAO,EAInC,OAAO,CAER,CAEA,IAAMquH,GAAe,CACpBtkB,UAAWA,UACX3mG,WAAYA,WACZkrH,kBAAmBA,kBACnBtkB,WAAYA,WACZzmG,YAAaA,YACbgrH,WAAYA,WACZtkB,YAAaA,YACbpjG,aAAcA,aACd2nH,aAAcA,cAGf,SAASC,GAAexwH,EAAMuF,GAE7B,OAAO,IAAI6qH,GAAcpwH,GAAQuF,EAElC,CAEA,SAASkrH,GAAiBnyH,GAEzB,OAAOiiD,SAASkwE,gBAAiB,+BAAgCnyH,EAElE,CAEA,SAASoyH,GAAcn7G,GAEtB,OAASA,EAAI,OAAgB,YAAJA,EAAmBhD,KAAK0F,IAAS,YAAJ1C,EAAmB,YAAc,IAExF,CAEA,SAASo7G,GAAcp7G,GAEtB,OAASA,EAAI,SAAkB,MAAJA,EAAY,MAAUhD,KAAK0F,IAAK1C,EAAG,QAAc,IAE7E,CAIA,IAAMq7G,IAAEC,EAAG,CAAC,GAAJ70F,EAAAA,EAAAA,GAAA60F,EACLpH,IAAcztF,EAAAA,EAAAA,GAAA,GAAQ0tF,GAAwBgH,MAAY10F,EAAAA,EAAAA,GAAA60F,EAC1DnH,IAAoB1tF,EAAAA,EAAAA,GAAA,GAAQytF,GAAkBkH,KAAYE,GAGvDC,GAAkB,CAEvBC,YAAY,EAEZ,qBAAIC,GAEH,OAAOtH,EAER,EAEA,qBAAIsH,CAAmB1mF,GAEtBtpC,QAAQC,KAAM,yDAEf,EAEAgwH,QAAS,SAAWjxB,EAAOkxB,EAAkBC,GAE5C,GAAKhzH,KAAK4yH,YAAcG,IAAqBC,IAAsBD,IAAsBC,EAExF,OAAOnxB,EAIR,GAAK4wB,GAAIM,SAAqE5xH,IAA/CsxH,GAAIM,GAAoBC,GAAmC,CAEzF,IAAM9zF,EAAKuzF,GAAIM,GAAoBC,GAMnC,OAJAnxB,EAAM7uF,EAAIksB,EAAI2iE,EAAM7uF,GACpB6uF,EAAMvqF,EAAI4nB,EAAI2iE,EAAMvqF,GACpBuqF,EAAMzvF,EAAI8sB,EAAI2iE,EAAMzvF,GAEbyvF,CAER,CAEA,MAAM,IAAIn/F,MAAO,sCAElB,EAEAuwH,sBAAuB,SAAWpxB,EAAOmxB,GAExC,OAAOhzH,KAAK8yH,QAASjxB,EAAO7hG,KAAK6yH,kBAAmBG,EAErD,EAEAE,oBAAqB,SAAWrxB,EAAOkxB,GAEtC,OAAO/yH,KAAK8yH,QAASjxB,EAAOkxB,EAAkB/yH,KAAK6yH,kBAEpD,GAIKM,GAAiB,CAAE,UAAa,SAAU,aAAgB,SAAU,KAAQ,MAAU,WAAc,QAAU,MAAS,SAC5H,MAAS,SAAU,OAAU,SAAU,MAAS,EAAU,eAAkB,SAAU,KAAQ,IAAU,WAAc,QACtH,MAAS,SAAU,UAAa,SAAU,UAAa,QAAU,WAAc,QAAU,UAAa,SAAU,MAAS,SACzH,eAAkB,QAAU,SAAY,SAAU,QAAW,SAAU,KAAQ,MAAU,SAAY,IAAU,SAAY,MAC3H,cAAiB,SAAU,SAAY,SAAU,UAAa,MAAU,SAAY,SAAU,UAAa,SAAU,YAAe,QACpI,eAAkB,QAAU,WAAc,SAAU,WAAc,SAAU,QAAW,QAAU,WAAc,SAAU,aAAgB,QACzI,cAAiB,QAAU,cAAiB,QAAU,cAAiB,QAAU,cAAiB,MAAU,WAAc,QAC1H,SAAY,SAAU,YAAe,MAAU,QAAW,QAAU,QAAW,QAAU,WAAc,QAAU,UAAa,SAC9H,YAAe,SAAU,YAAe,QAAU,QAAW,SAAU,UAAa,SAAU,WAAc,SAAU,KAAQ,SAC9H,UAAa,SAAU,KAAQ,QAAU,MAAS,MAAU,YAAe,SAAU,KAAQ,QAAU,SAAY,SAAU,QAAW,SACxI,UAAa,SAAU,OAAU,QAAU,MAAS,SAAU,MAAS,SAAU,SAAY,SAAU,cAAiB,SAAU,UAAa,QAC/I,aAAgB,SAAU,UAAa,SAAU,WAAc,SAAU,UAAa,SAAU,qBAAwB,SAAU,UAAa,SAC/I,WAAc,QAAU,UAAa,SAAU,UAAa,SAAU,YAAe,SAAU,cAAiB,QAAU,aAAgB,QAC1I,eAAkB,QAAU,eAAkB,QAAU,eAAkB,SAAU,YAAe,SAAU,KAAQ,MAAU,UAAa,QAC5I,MAAS,SAAU,QAAW,SAAU,OAAU,QAAU,iBAAoB,QAAU,WAAc,IAAU,aAAgB,SAClI,aAAgB,QAAU,eAAkB,QAAU,gBAAmB,QAAU,kBAAqB,MAAU,gBAAmB,QACrI,gBAAmB,SAAU,aAAgB,QAAU,UAAa,SAAU,UAAa,SAAU,SAAY,SAAU,YAAe,SAC1I,KAAQ,IAAU,QAAW,SAAU,MAAS,QAAU,UAAa,QAAU,OAAU,SAAU,UAAa,SAAU,OAAU,SACtI,cAAiB,SAAU,UAAa,SAAU,cAAiB,SAAU,cAAiB,SAAU,WAAc,SAAU,UAAa,SAC7I,KAAQ,SAAU,KAAQ,SAAU,KAAQ,SAAU,WAAc,SAAU,OAAU,QAAU,cAAiB,QAAU,IAAO,SAAU,UAAa,SAC3J,UAAa,QAAU,YAAe,QAAU,OAAU,SAAU,WAAc,SAAU,SAAY,QAAU,SAAY,SAC9H,OAAU,SAAU,OAAU,SAAU,QAAW,QAAU,UAAa,QAAU,UAAa,QAAU,UAAa,QAAU,KAAQ,SAC1I,YAAe,MAAU,UAAa,QAAU,IAAO,SAAU,KAAQ,MAAU,QAAW,SAAU,OAAU,SAAU,UAAa,QACzI,OAAU,SAAU,MAAS,SAAU,MAAS,SAAU,WAAc,SAAU,OAAU,SAAU,YAAe,UAEhHC,GAAO,CAAEpgH,EAAG,EAAGsE,EAAG,EAAGlF,EAAG,GACxBihH,GAAQ,CAAE97G,EAAG,EAAGxK,EAAG,EAAGqJ,EAAG,GACzBk9G,GAAQ,CAAE/7G,EAAG,EAAGxK,EAAG,EAAGqJ,EAAG,GAE/B,SAASm9G,GAAS9gH,EAAGS,EAAGf,GAIvB,OAFKA,EAAI,IAAIA,GAAK,GACbA,EAAI,IAAIA,GAAK,GACbA,EAAI,EAAI,EAAWM,EAAgB,GAAVS,EAAIT,GAAUN,EACvCA,EAAI,GAAee,EACnBf,EAAI,EAAI,EAAWM,EAAgB,GAAVS,EAAIT,IAAY,EAAI,EAAIN,GAC/CM,CAER,CAEA,SAAS+gH,GAAc7sH,EAAQ5H,GAM9B,OAJAA,EAAOiU,EAAIrM,EAAOqM,EAClBjU,EAAOuY,EAAI3Q,EAAO2Q,EAClBvY,EAAOqT,EAAIzL,EAAOyL,EAEXrT,CAER,CAAC,IAwiBG00H,GAtiBE3xB,GAAK,SAAA4xB,GAEV,SAAA5xB,EAAa9uF,EAAGsE,EAAGlF,GAQlB,OARsB1J,EAAAA,EAAAA,GAAA,KAAAo5F,GAEtB9hG,KAAKi0D,SAAU,EAEfj0D,KAAKgT,EAAI,EACThT,KAAKsX,EAAI,EACTtX,KAAKoS,EAAI,OAEEjR,IAANmW,QAAyBnW,IAANiR,EAGhBpS,KAAKyE,IAAKuO,GAIXhT,KAAK2zH,OAAQ3gH,EAAGsE,EAAGlF,EAE3B,CA6gBC,OA7gBAzH,EAAAA,EAAAA,GAAAm3F,EAAA,EAAA77F,IAAA,MAAApG,MAED,SAAKA,GAgBJ,OAdKA,GAASA,EAAMo0D,QAEnBj0D,KAAKiE,KAAMpE,GAEiB,kBAAVA,EAElBG,KAAK4zH,OAAQ/zH,GAEe,kBAAVA,GAElBG,KAAK6zH,SAAUh0H,GAITG,IAER,GAAC,CAAAiG,IAAA,YAAApG,MAED,SAAW+U,GAMV,OAJA5U,KAAKgT,EAAI4B,EACT5U,KAAKsX,EAAI1C,EACT5U,KAAKoS,EAAIwC,EAEF5U,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQi0H,GAAmC,IAA9B3nF,EAAUvrC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG0qH,GAUzB,OARAwI,EAAM1/G,KAAKi5B,MAAOymF,GAElB9zH,KAAKgT,GAAM8gH,GAAO,GAAK,KAAQ,IAC/B9zH,KAAKsX,GAAMw8G,GAAO,EAAI,KAAQ,IAC9B9zH,KAAKoS,GAAY,IAAN0hH,GAAc,IAEzBnB,GAAgBO,oBAAqBlzH,KAAMmsC,GAEpCnsC,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQmT,EAAGsE,EAAGlF,GAAuC,IAApC+5B,EAAUvrC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG2qH,GAQ7B,OANAvrH,KAAKgT,EAAIA,EACThT,KAAKsX,EAAIA,EACTtX,KAAKoS,EAAIA,EAETugH,GAAgBO,oBAAqBlzH,KAAMmsC,GAEpCnsC,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQ0X,EAAGxK,EAAGqJ,GAAuC,IAApC+1B,EAAUvrC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG2qH,GAO7B,GAJAh0G,EAAIo2G,GAAiBp2G,EAAG,GACxBxK,EAAI2gH,GAAO3gH,EAAG,EAAG,GACjBqJ,EAAIs3G,GAAOt3G,EAAG,EAAG,GAEN,IAANrJ,EAEJ/M,KAAKgT,EAAIhT,KAAKsX,EAAItX,KAAKoS,EAAIgE,MAErB,CAEN,IAAM3D,EAAI2D,GAAK,GAAMA,GAAM,EAAIrJ,GAAMqJ,EAAIrJ,EAAMqJ,EAAIrJ,EAC7CmG,EAAM,EAAIkD,EAAM3D,EAEtBzS,KAAKgT,EAAIugH,GAASrgH,EAAGT,EAAG8E,EAAI,EAAI,GAChCvX,KAAKsX,EAAIi8G,GAASrgH,EAAGT,EAAG8E,GACxBvX,KAAKoS,EAAImhH,GAASrgH,EAAGT,EAAG8E,EAAI,EAAI,EAEjC,CAIA,OAFAo7G,GAAgBO,oBAAqBlzH,KAAMmsC,GAEpCnsC,IAER,GAAC,CAAAiG,IAAA,WAAApG,MAED,SAAUwiD,GAAqC,IAe1CtgD,EAfYoqC,EAAUvrC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG0qH,GAE7B,SAASyI,EAAa7pF,QAEL/oC,IAAX+oC,GAEAQ,WAAYR,GAAW,GAE3BrnC,QAAQC,KAAM,mCAAqCu/C,EAAQ,oBAI7D,CAKA,GAAKtgD,EAAI,+BAA+BiyH,KAAM3xE,GAAU,CAIvD,IAAIw/C,EACE1hG,EAAO4B,EAAG,GACVkyH,EAAalyH,EAAG,GAEtB,OAAS5B,GAER,IAAK,MACL,IAAK,OAEJ,GAAK0hG,EAAQ,+DAA+DmyB,KAAMC,GAWjF,OARAj0H,KAAKgT,EAAIoB,KAAKsC,IAAK,IAAKi0B,SAAUk3D,EAAO,GAAK,KAAS,IACvD7hG,KAAKsX,EAAIlD,KAAKsC,IAAK,IAAKi0B,SAAUk3D,EAAO,GAAK,KAAS,IACvD7hG,KAAKoS,EAAIgC,KAAKsC,IAAK,IAAKi0B,SAAUk3D,EAAO,GAAK,KAAS,IAEvD8wB,GAAgBO,oBAAqBlzH,KAAMmsC,GAE3C4nF,EAAalyB,EAAO,IAEb7hG,KAIR,GAAK6hG,EAAQ,qEAAqEmyB,KAAMC,GAWvF,OARAj0H,KAAKgT,EAAIoB,KAAKsC,IAAK,IAAKi0B,SAAUk3D,EAAO,GAAK,KAAS,IACvD7hG,KAAKsX,EAAIlD,KAAKsC,IAAK,IAAKi0B,SAAUk3D,EAAO,GAAK,KAAS,IACvD7hG,KAAKoS,EAAIgC,KAAKsC,IAAK,IAAKi0B,SAAUk3D,EAAO,GAAK,KAAS,IAEvD8wB,GAAgBO,oBAAqBlzH,KAAMmsC,GAE3C4nF,EAAalyB,EAAO,IAEb7hG,KAIR,MAED,IAAK,MACL,IAAK,OAEJ,GAAK6hG,EAAQ,qFAAqFmyB,KAAMC,GAAe,CAGtH,IAAM18G,EAAImzB,WAAYm3D,EAAO,IAAQ,IAC/B90F,EAAI29B,WAAYm3D,EAAO,IAAQ,IAC/BzrF,EAAIs0B,WAAYm3D,EAAO,IAAQ,IAIrC,OAFAkyB,EAAalyB,EAAO,IAEb7hG,KAAKk0H,OAAQ38G,EAAGxK,EAAGqJ,EAAG+1B,EAE9B,EAMH,MAAO,GAAKpqC,EAAI,oBAAoBiyH,KAAM3xE,GAAU,CAInD,IAAMyxE,EAAM/xH,EAAG,GACTgI,EAAO+pH,EAAIvxH,OAEjB,GAAc,IAATwH,EASJ,OANA/J,KAAKgT,EAAI23B,SAAUmpF,EAAI/2F,OAAQ,GAAM+2F,EAAI/2F,OAAQ,GAAK,IAAO,IAC7D/8B,KAAKsX,EAAIqzB,SAAUmpF,EAAI/2F,OAAQ,GAAM+2F,EAAI/2F,OAAQ,GAAK,IAAO,IAC7D/8B,KAAKoS,EAAIu4B,SAAUmpF,EAAI/2F,OAAQ,GAAM+2F,EAAI/2F,OAAQ,GAAK,IAAO,IAE7D41F,GAAgBO,oBAAqBlzH,KAAMmsC,GAEpCnsC,KAED,GAAc,IAAT+J,EASX,OANA/J,KAAKgT,EAAI23B,SAAUmpF,EAAI/2F,OAAQ,GAAM+2F,EAAI/2F,OAAQ,GAAK,IAAO,IAC7D/8B,KAAKsX,EAAIqzB,SAAUmpF,EAAI/2F,OAAQ,GAAM+2F,EAAI/2F,OAAQ,GAAK,IAAO,IAC7D/8B,KAAKoS,EAAIu4B,SAAUmpF,EAAI/2F,OAAQ,GAAM+2F,EAAI/2F,OAAQ,GAAK,IAAO,IAE7D41F,GAAgBO,oBAAqBlzH,KAAMmsC,GAEpCnsC,IAIT,CAEA,OAAKqiD,GAASA,EAAM9/C,OAAS,EAErBvC,KAAKm0H,aAAc9xE,EAAOlW,GAI3BnsC,IAER,GAAC,CAAAiG,IAAA,eAAApG,MAED,SAAcwiD,GAAqC,IAA9BlW,EAAUvrC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG0qH,GAG3BwI,EAAMX,GAAgB9wE,EAAM+uC,eAclC,YAZajwF,IAAR2yH,EAGJ9zH,KAAK4zH,OAAQE,EAAK3nF,GAKlBtpC,QAAQC,KAAM,8BAAgCu/C,GAIxCriD,IAER,GAAC,CAAAiG,IAAA,QAAApG,MAED,WAEC,OAAO,IAAIG,KAAK4zD,YAAa5zD,KAAKgT,EAAGhT,KAAKsX,EAAGtX,KAAKoS,EAEnD,GAAC,CAAAnM,IAAA,OAAApG,MAED,SAAMgiG,GAML,OAJA7hG,KAAKgT,EAAI6uF,EAAM7uF,EACfhT,KAAKsX,EAAIuqF,EAAMvqF,EACftX,KAAKoS,EAAIyvF,EAAMzvF,EAERpS,IAER,GAAC,CAAAiG,IAAA,mBAAApG,MAED,SAAkBgiG,GAMjB,OAJA7hG,KAAKgT,EAAIu/G,GAAc1wB,EAAM7uF,GAC7BhT,KAAKsX,EAAIi7G,GAAc1wB,EAAMvqF,GAC7BtX,KAAKoS,EAAImgH,GAAc1wB,EAAMzvF,GAEtBpS,IAER,GAAC,CAAAiG,IAAA,mBAAApG,MAED,SAAkBgiG,GAMjB,OAJA7hG,KAAKgT,EAAIw/G,GAAc3wB,EAAM7uF,GAC7BhT,KAAKsX,EAAIk7G,GAAc3wB,EAAMvqF,GAC7BtX,KAAKoS,EAAIogH,GAAc3wB,EAAMzvF,GAEtBpS,IAER,GAAC,CAAAiG,IAAA,sBAAApG,MAED,WAIC,OAFAG,KAAKo0H,iBAAkBp0H,MAEhBA,IAER,GAAC,CAAAiG,IAAA,sBAAApG,MAED,WAIC,OAFAG,KAAKq0H,iBAAkBr0H,MAEhBA,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,WAAsC,IAA9BssC,EAAUvrC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG0qH,GAIpB,OAFAqH,GAAgBM,sBAAuBO,GAAcxzH,KAAMozH,IAAQjnF,GAE5DuhF,GAAgB,IAAT0F,GAAKpgH,EAAS,EAAG,MAAS,GAAK06G,GAAgB,IAAT0F,GAAK97G,EAAS,EAAG,MAAS,EAAIo2G,GAAgB,IAAT0F,GAAKhhH,EAAS,EAAG,MAAS,CAEpH,GAAC,CAAAnM,IAAA,eAAApG,MAED,WAA4C,IAA9BssC,EAAUvrC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG0qH,GAE1B,OAAS,SAAWtrH,KAAKs0H,OAAQnoF,GAAat5B,SAAU,KAAOlS,OAAS,EAEzE,GAAC,CAAAsF,IAAA,SAAApG,MAED,SAAQd,GAA4C,IAApCotC,EAAUvrC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG2qH,GAI5BoH,GAAgBM,sBAAuBO,GAAcxzH,KAAMozH,IAAQjnF,GAEnE,IAKIooF,EAAKC,EALHxhH,EAAIogH,GAAKpgH,EAAGsE,EAAI87G,GAAK97G,EAAGlF,EAAIghH,GAAKhhH,EAEjCuE,EAAMvC,KAAKuC,IAAK3D,EAAGsE,EAAGlF,GACtBsE,EAAMtC,KAAKsC,IAAK1D,EAAGsE,EAAGlF,GAGtBqiH,GAAc/9G,EAAMC,GAAQ,EAElC,GAAKD,IAAQC,EAEZ49G,EAAM,EACNC,EAAa,MAEP,CAEN,IAAMx/F,EAAQre,EAAMD,EAIpB,OAFA89G,EAAaC,GAAa,GAAMz/F,GAAUre,EAAMD,GAAQse,GAAU,EAAIre,EAAMD,GAEnEC,GAER,KAAK3D,EAAGuhH,GAAQj9G,EAAIlF,GAAM4iB,GAAU1d,EAAIlF,EAAI,EAAI,GAAK,MACrD,KAAKkF,EAAGi9G,GAAQniH,EAAIY,GAAMgiB,EAAQ,EAAG,MACrC,KAAK5iB,EAAGmiH,GAAQvhH,EAAIsE,GAAM0d,EAAQ,EAInCu/F,GAAO,CAER,CAMA,OAJAx1H,EAAOwY,EAAIg9G,EACXx1H,EAAOgO,EAAIynH,EACXz1H,EAAOqX,EAAIq+G,EAEJ11H,CAER,GAAC,CAAAkH,IAAA,SAAApG,MAED,SAAQd,GAA4C,IAApCotC,EAAUvrC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG2qH,GAQ5B,OANAoH,GAAgBM,sBAAuBO,GAAcxzH,KAAMozH,IAAQjnF,GAEnEptC,EAAOiU,EAAIogH,GAAKpgH,EAChBjU,EAAOuY,EAAI87G,GAAK97G,EAChBvY,EAAOqT,EAAIghH,GAAKhhH,EAETrT,CAER,GAAC,CAAAkH,IAAA,WAAApG,MAED,WAAwC,IAA9BssC,EAAUvrC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG0qH,GAItB,OAFAqH,GAAgBM,sBAAuBO,GAAcxzH,KAAMozH,IAAQjnF,GAE9DA,IAAem/E,GAGZ,SAAP7rH,OAAiB0sC,EAAU,KAAA1sC,OAAM2zH,GAAKpgH,EAAC,KAAAvT,OAAM2zH,GAAK97G,EAAC,KAAA7X,OAAM2zH,GAAKhhH,EAAC,KAIzD,OAAP3S,OAAyB,IAAT2zH,GAAKpgH,EAAY,EAAC,KAAAvT,OAAe,IAAT2zH,GAAK97G,EAAY,EAAC,KAAA7X,OAAe,IAAT2zH,GAAKhhH,EAAY,EAAC,IAEnF,GAAC,CAAAnM,IAAA,YAAApG,MAED,SAAW0X,EAAGxK,EAAGqJ,GAQhB,OANApW,KAAK00H,OAAQrB,IAEbA,GAAM97G,GAAKA,EAAG87G,GAAMtmH,GAAKA,EAAGsmH,GAAMj9G,GAAKA,EAEvCpW,KAAKk0H,OAAQb,GAAM97G,EAAG87G,GAAMtmH,EAAGsmH,GAAMj9G,GAE9BpW,IAER,GAAC,CAAAiG,IAAA,MAAApG,MAED,SAAKgiG,GAMJ,OAJA7hG,KAAKgT,GAAK6uF,EAAM7uF,EAChBhT,KAAKsX,GAAKuqF,EAAMvqF,EAChBtX,KAAKoS,GAAKyvF,EAAMzvF,EAETpS,IAER,GAAC,CAAAiG,IAAA,YAAApG,MAED,SAAW80H,EAAQC,GAMlB,OAJA50H,KAAKgT,EAAI2hH,EAAO3hH,EAAI4hH,EAAO5hH,EAC3BhT,KAAKsX,EAAIq9G,EAAOr9G,EAAIs9G,EAAOt9G,EAC3BtX,KAAKoS,EAAIuiH,EAAOviH,EAAIwiH,EAAOxiH,EAEpBpS,IAER,GAAC,CAAAiG,IAAA,YAAApG,MAED,SAAWkN,GAMV,OAJA/M,KAAKgT,GAAKjG,EACV/M,KAAKsX,GAAKvK,EACV/M,KAAKoS,GAAKrF,EAEH/M,IAER,GAAC,CAAAiG,IAAA,MAAApG,MAED,SAAKgiG,GAMJ,OAJA7hG,KAAKgT,EAAIoB,KAAKuC,IAAK,EAAG3W,KAAKgT,EAAI6uF,EAAM7uF,GACrChT,KAAKsX,EAAIlD,KAAKuC,IAAK,EAAG3W,KAAKsX,EAAIuqF,EAAMvqF,GACrCtX,KAAKoS,EAAIgC,KAAKuC,IAAK,EAAG3W,KAAKoS,EAAIyvF,EAAMzvF,GAE9BpS,IAER,GAAC,CAAAiG,IAAA,WAAApG,MAED,SAAUgiG,GAMT,OAJA7hG,KAAKgT,GAAK6uF,EAAM7uF,EAChBhT,KAAKsX,GAAKuqF,EAAMvqF,EAChBtX,KAAKoS,GAAKyvF,EAAMzvF,EAETpS,IAER,GAAC,CAAAiG,IAAA,iBAAApG,MAED,SAAgBkN,GAMf,OAJA/M,KAAKgT,GAAKjG,EACV/M,KAAKsX,GAAKvK,EACV/M,KAAKoS,GAAKrF,EAEH/M,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAMgiG,EAAOr9B,GAMZ,OAJAxkE,KAAKgT,IAAO6uF,EAAM7uF,EAAIhT,KAAKgT,GAAMwxD,EACjCxkE,KAAKsX,IAAOuqF,EAAMvqF,EAAItX,KAAKsX,GAAMktD,EACjCxkE,KAAKoS,IAAOyvF,EAAMzvF,EAAIpS,KAAKoS,GAAMoyD,EAE1BxkE,IAER,GAAC,CAAAiG,IAAA,aAAApG,MAED,SAAY80H,EAAQC,EAAQpwD,GAM3B,OAJAxkE,KAAKgT,EAAI2hH,EAAO3hH,GAAM4hH,EAAO5hH,EAAI2hH,EAAO3hH,GAAMwxD,EAC9CxkE,KAAKsX,EAAIq9G,EAAOr9G,GAAMs9G,EAAOt9G,EAAIq9G,EAAOr9G,GAAMktD,EAC9CxkE,KAAKoS,EAAIuiH,EAAOviH,GAAMwiH,EAAOxiH,EAAIuiH,EAAOviH,GAAMoyD,EAEvCxkE,IAER,GAAC,CAAAiG,IAAA,UAAApG,MAED,SAASgiG,EAAOr9B,GAEfxkE,KAAK00H,OAAQrB,IACbxxB,EAAM6yB,OAAQpB,IAEd,IAAM/7G,EAAIqO,GAAMytG,GAAM97G,EAAG+7G,GAAM/7G,EAAGitD,GAC5Bz3D,EAAI6Y,GAAMytG,GAAMtmH,EAAGumH,GAAMvmH,EAAGy3D,GAC5BpuD,EAAIwP,GAAMytG,GAAMj9G,EAAGk9G,GAAMl9G,EAAGouD,GAIlC,OAFAxkE,KAAKk0H,OAAQ38G,EAAGxK,EAAGqJ,GAEZpW,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQuX,GAEP,OAASA,EAAEpE,IAAMhT,KAAKgT,GAASoE,EAAEE,IAAMtX,KAAKsX,GAASF,EAAEhF,IAAMpS,KAAKoS,CAEnE,GAAC,CAAAnM,IAAA,YAAApG,MAED,SAAWu/D,GAAoB,IAAbx4C,EAAMhmB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAM1B,OAJAZ,KAAKgT,EAAIosD,EAAOx4C,GAChB5mB,KAAKsX,EAAI8nD,EAAOx4C,EAAS,GACzB5mB,KAAKoS,EAAIgtD,EAAOx4C,EAAS,GAElB5mB,IAER,GAAC,CAAAiG,IAAA,UAAApG,MAED,WAAkC,IAAzBu/D,EAAKx+D,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAIgmB,EAAMhmB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAM7B,OAJAw+D,EAAOx4C,GAAW5mB,KAAKgT,EACvBosD,EAAOx4C,EAAS,GAAM5mB,KAAKsX,EAC3B8nD,EAAOx4C,EAAS,GAAM5mB,KAAKoS,EAEpBgtD,CAER,GAAC,CAAAn5D,IAAA,sBAAApG,MAED,SAAqBorG,EAAWrlG,GAM/B,OAJA5F,KAAKgT,EAAIi4F,EAAUxP,KAAM71F,GACzB5F,KAAKsX,EAAI2zF,EAAUilB,KAAMtqH,GACzB5F,KAAKoS,EAAI64F,EAAU4pB,KAAMjvH,GAElB5F,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,WAEC,OAAOG,KAAKs0H,QAEb,GAAC,CAAAruH,IAAAytH,EAAA7zH,OAAAswH,EAAAA,EAAAA,KAAAC,MAED,SAAAvwH,IAAA,OAAAswH,EAAAA,EAAAA,KAAAE,MAAA,SAAAyE,GAAA,cAAAA,EAAA7sD,KAAA6sD,EAAA1nE,MAAA,OAEC,OAFD0nE,EAAA1nE,KAAA,EAEOptD,KAAKgT,EAAC,OACZ,OADY8hH,EAAA1nE,KAAA,EACNptD,KAAKsX,EAAC,OACZ,OADYw9G,EAAA1nE,KAAA,EACNptD,KAAKoS,EAAC,wBAAA0iH,EAAAt5D,OAAA,GAAA37D,EAAA,YAEZiiG,CAAA,CAhiBS,CA0hBP70C,OAAOC,UAUX40C,GAAMizB,MAAQ5B,GAEF,IAEN6B,GAAU,oBAAAA,KAAAtsH,EAAAA,EAAAA,GAAA,KAAAssH,EAAA,CAuHd,OAvHcrqH,EAAAA,EAAAA,GAAAqqH,EAAA,OAAA/uH,IAAA,aAAApG,MAEf,SAAmBstC,GAElB,GAAK,UAAU7xB,KAAM6xB,EAAMi6D,KAE1B,OAAOj6D,EAAMi6D,IAId,GAAiC,oBAArBziC,kBAEX,OAAOx3B,EAAMi6D,IAId,IAAIhjC,EAEJ,GAAKj3B,aAAiBw3B,kBAErBP,EAASj3B,MAEH,MAEWhsC,IAAZsyH,KAAwBA,GAAUnB,GAAiB,WAExDmB,GAAQjpF,MAAQ2C,EAAM3C,MACtBipF,GAAQhpF,OAAS0C,EAAM1C,OAEvB,IAAMvlC,EAAUuuH,GAAQwB,WAAY,MAE/B9nF,aAAiB+nF,UAErBhwH,EAAQiwH,aAAchoF,EAAO,EAAG,GAIhCjoC,EAAQkwH,UAAWjoF,EAAO,EAAG,EAAGA,EAAM3C,MAAO2C,EAAM1C,QAIpD25B,EAASqvD,EAEV,CAEA,OAAKrvD,EAAO55B,MAAQ,MAAQ45B,EAAO35B,OAAS,MAE3C5nC,QAAQC,KAAM,8EAA+EqqC,GAEtFi3B,EAAOixD,UAAW,aAAc,KAIhCjxD,EAAOixD,UAAW,YAI3B,GAAC,CAAApvH,IAAA,eAAApG,MAED,SAAqBstC,GAEpB,GAAmC,qBAArBmoF,kBAAoCnoF,aAAiBmoF,kBACnC,qBAAtB3wD,mBAAqCx3B,aAAiBw3B,mBACtC,qBAAhB4wD,aAA+BpoF,aAAiBooF,YAAgB,CAEzE,IAAMnxD,EAASkuD,GAAiB,UAEhCluD,EAAO55B,MAAQ2C,EAAM3C,MACrB45B,EAAO35B,OAAS0C,EAAM1C,OAEtB,IAAMvlC,EAAUk/D,EAAO6wD,WAAY,MACnC/vH,EAAQkwH,UAAWjoF,EAAO,EAAG,EAAGA,EAAM3C,MAAO2C,EAAM1C,QAKnD,IAHA,IAAM+qF,EAAYtwH,EAAQuwH,aAAc,EAAG,EAAGtoF,EAAM3C,MAAO2C,EAAM1C,QAC3D99B,EAAO6oH,EAAU7oH,KAEb/I,EAAI,EAAGA,EAAI+I,EAAKpK,OAAQqB,IAEjC+I,EAAM/I,GAAwC,IAAlC2uH,GAAc5lH,EAAM/I,GAAM,KAMvC,OAFAsB,EAAQiwH,aAAcK,EAAW,EAAG,GAE7BpxD,CAER,CAAO,GAAKj3B,EAAMxgC,KAAO,CAIxB,IAFA,IAAMA,EAAOwgC,EAAMxgC,KAAKhM,MAAO,GAErBiD,EAAI,EAAGA,EAAI+I,EAAKpK,OAAQqB,IAE5B+I,aAAgB3F,YAAc2F,aAAgBulH,kBAElDvlH,EAAM/I,GAAMwQ,KAAKi5B,MAAyC,IAAlCklF,GAAc5lH,EAAM/I,GAAM,MAMlD+I,EAAM/I,GAAM2uH,GAAc5lH,EAAM/I,IAMlC,MAAO,CACN+I,KAAMA,EACN69B,MAAO2C,EAAM3C,MACbC,OAAQ0C,EAAM1C,OAGhB,CAGC,OADA5nC,QAAQC,KAAM,+FACPqqC,CAIT,KAAC6nF,CAAA,CAvHc,GA2HVU,GAAM,WAEX,SAAAA,IAA2B,IAAd/oH,EAAI/L,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,MAAI8H,EAAAA,EAAAA,GAAA,KAAAgtH,GAEvB11H,KAAK21H,UAAW,EAEhB31H,KAAKgL,KAAOuiH,KAEZvtH,KAAK2M,KAAOA,EAEZ3M,KAAKqoE,QAAU,CAEhB,CAqEC,OArEA19D,EAAAA,EAAAA,GAAA+qH,EAAA,EAAAzvH,IAAA,cAAAxB,IAED,SAAiB5E,IAED,IAAVA,GAAiBG,KAAKqoE,SAE5B,GAAC,CAAApiE,IAAA,SAAApG,MAED,SAAQ+1H,GAEP,IAAMC,OAA0B10H,IAATy0H,GAAsC,kBAATA,EAEpD,IAAOC,QAA6C10H,IAA7By0H,EAAK/uB,OAAQ7mG,KAAKgL,MAExC,OAAO4qH,EAAK/uB,OAAQ7mG,KAAKgL,MAI1B,IAAMgyG,EAAS,CACdhyG,KAAMhL,KAAKgL,KACXjD,IAAK,IAGA4E,EAAO3M,KAAK2M,KAElB,GAAc,OAATA,EAAgB,CAEpB,IAAI5E,EAEJ,GAAKpE,MAAM0sC,QAAS1jC,GAAS,CAI5B5E,EAAM,GAEN,IAAM,IAAInE,EAAI,EAAGwS,EAAIzJ,EAAKpK,OAAQqB,EAAIwS,EAAGxS,IAEnC+I,EAAM/I,GAAIkyH,cAEd/tH,EAAIzF,KAAMyzH,GAAgBppH,EAAM/I,GAAIupC,QAIpCplC,EAAIzF,KAAMyzH,GAAgBppH,EAAM/I,IAMnC,MAICmE,EAAMguH,GAAgBppH,GAIvBqwG,EAAOj1G,IAAMA,CAEd,CAQA,OANO8tH,IAEND,EAAK/uB,OAAQ7mG,KAAKgL,MAASgyG,GAIrBA,CAER,KAAC0Y,CAAA,CAjFU,GAqFZ,SAASK,GAAgB5oF,GAExB,MAAmC,qBAArBmoF,kBAAoCnoF,aAAiBmoF,kBACnC,qBAAtB3wD,mBAAqCx3B,aAAiBw3B,mBACtC,qBAAhB4wD,aAA+BpoF,aAAiBooF,YAIlDP,GAAWgB,WAAY7oF,GAIzBA,EAAMxgC,KAIH,CACNA,KAAMhJ,MAAMuU,KAAMi1B,EAAMxgC,MACxB69B,MAAO2C,EAAM3C,MACbC,OAAQ0C,EAAM1C,OACd5oC,KAAMsrC,EAAMxgC,KAAKinD,YAAYzzD,OAK9B0C,QAAQC,KAAM,+CACP,CAAC,EAMX,CAEA,IAAImzH,GAAY,EAEV/e,GAAO,SAAAr5D,IAAAx1C,EAAAA,EAAAA,GAAA6uG,EAAAr5D,GAAA,IAAAv1C,GAAAC,EAAAA,EAAAA,GAAA2uG,GAEZ,SAAAA,IAAmS,IAAAzqG,EAAtR0gC,EAAKvsC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAGs2G,EAAQgf,cAAevlF,EAAO/vC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAGs2G,EAAQif,gBAAiB1f,EAAK71G,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAGytG,GAAqBqI,EAAK91G,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAGytG,GAAqB9hE,EAAS3rC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG0rC,GAAcD,EAASzrC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAGutG,GAA0B9jE,EAAMzpC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAGynH,GAAYxmH,EAAIjB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG+mH,GAAkBthB,EAAUzlG,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGwrC,EAAQxrC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAGmwC,GAsDlP,OAtDgQroC,EAAAA,EAAAA,GAAA,KAAAwuG,IAE/RzqG,EAAAnE,EAAAlJ,KAAA,OAEKg3H,WAAY,EAEjB92H,OAAOgF,gBAAcy5C,EAAAA,EAAAA,GAAAtxC,GAAQ,KAAM,CAAE5M,MAAOo2H,OAE5CxpH,EAAKzB,KAAOuiH,KAEZ9gH,EAAKtM,KAAO,GAEZsM,EAAK9F,OAAS,IAAI+uH,GAAQvoF,GAC1B1gC,EAAK4pH,QAAU,GAEf5pH,EAAKkkC,QAAUA,EAEflkC,EAAKgqG,MAAQA,EACbhqG,EAAKiqG,MAAQA,EAEbjqG,EAAK8/B,UAAYA,EACjB9/B,EAAK4/B,UAAYA,EAEjB5/B,EAAK45F,WAAaA,EAElB55F,EAAK49B,OAASA,EACd59B,EAAK6pH,eAAiB,KACtB7pH,EAAK5K,KAAOA,EAEZ4K,EAAKma,OAAS,IAAIwsB,GAAS,EAAG,GAC9B3mC,EAAK+wD,OAAS,IAAIpqB,GAAS,EAAG,GAC9B3mC,EAAKuzG,OAAS,IAAI5sE,GAAS,EAAG,GAC9B3mC,EAAK4xB,SAAW,EAEhB5xB,EAAKg3B,kBAAmB,EACxBh3B,EAAKoE,OAAS,IAAI0/G,GAElB9jH,EAAK+/B,iBAAkB,EACvB//B,EAAK8pH,kBAAmB,EACxB9pH,EAAKggC,OAAQ,EACbhgC,EAAK+pH,gBAAkB,EAMvB/pH,EAAK2/B,SAAWA,EAEhB3/B,EAAK8xB,SAAW,CAAC,EAEjB9xB,EAAK47D,QAAU,EACf57D,EAAKmoD,SAAW,KAEhBnoD,EAAKgqH,uBAAwB,EAC7BhqH,EAAKiqH,kBAAmB,EAAOjqH,CAEhC,CA+NC,OA/NA9B,EAAAA,EAAAA,GAAAusG,EAAA,EAAAjxG,IAAA,QAAAzB,IAED,WAEC,OAAOxE,KAAK2G,OAAOgG,IAEpB,EAAClI,IAED,SAAW5E,GAEVG,KAAK2G,OAAOgG,KAAO9M,CAEpB,GAAC,CAAAoG,IAAA,eAAApG,MAED,WAECG,KAAK6Q,OAAO8lH,eAAgB32H,KAAK4mB,OAAO5X,EAAGhP,KAAK4mB,OAAO3X,EAAGjP,KAAKw9D,OAAOxuD,EAAGhP,KAAKw9D,OAAOvuD,EAAGjP,KAAKq+B,SAAUr+B,KAAKggH,OAAOhxG,EAAGhP,KAAKggH,OAAO/wG,EAEnI,GAAC,CAAAhJ,IAAA,QAAApG,MAED,WAEC,OAAO,IAAIG,KAAK4zD,aAAc3vD,KAAMjE,KAErC,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAM8G,GAuCL,OArCA3G,KAAKG,KAAOwG,EAAOxG,KAEnBH,KAAK2G,OAASA,EAAOA,OACrB3G,KAAKq2H,QAAU1vH,EAAO0vH,QAAQ11H,MAAO,GAErCX,KAAK2wC,QAAUhqC,EAAOgqC,QAEtB3wC,KAAKy2G,MAAQ9vG,EAAO8vG,MACpBz2G,KAAK02G,MAAQ/vG,EAAO+vG,MAEpB12G,KAAKusC,UAAY5lC,EAAO4lC,UACxBvsC,KAAKqsC,UAAY1lC,EAAO0lC,UAExBrsC,KAAKqmG,WAAa1/F,EAAO0/F,WAEzBrmG,KAAKqqC,OAAS1jC,EAAO0jC,OACrBrqC,KAAKs2H,eAAiB3vH,EAAO2vH,eAC7Bt2H,KAAK6B,KAAO8E,EAAO9E,KAEnB7B,KAAK4mB,OAAO3iB,KAAM0C,EAAOigB,QACzB5mB,KAAKw9D,OAAOv5D,KAAM0C,EAAO62D,QACzBx9D,KAAKggH,OAAO/7G,KAAM0C,EAAOq5G,QACzBhgH,KAAKq+B,SAAW13B,EAAO03B,SAEvBr+B,KAAKyjC,iBAAmB98B,EAAO88B,iBAC/BzjC,KAAK6Q,OAAO5M,KAAM0C,EAAOkK,QAEzB7Q,KAAKwsC,gBAAkB7lC,EAAO6lC,gBAC9BxsC,KAAKu2H,iBAAmB5vH,EAAO4vH,iBAC/Bv2H,KAAKysC,MAAQ9lC,EAAO8lC,MACpBzsC,KAAKw2H,gBAAkB7vH,EAAO6vH,gBAC9Bx2H,KAAKosC,SAAWzlC,EAAOylC,SAEvBpsC,KAAKu+B,SAAW6/D,KAAKJ,MAAOI,KAAKw4B,UAAWjwH,EAAO43B,WAEnDv+B,KAAKqgC,aAAc,EAEZrgC,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQ+1H,GAEP,IAAMC,OAA0B10H,IAATy0H,GAAsC,kBAATA,EAEpD,IAAOC,QAA+C10H,IAA/By0H,EAAKlvB,SAAU1mG,KAAKgL,MAE1C,OAAO4qH,EAAKlvB,SAAU1mG,KAAKgL,MAI5B,IAAMgyG,EAAS,CAEd6Z,SAAU,CACTxuD,QAAS,IACTxmE,KAAM,UACNi1H,UAAW,kBAGZ9rH,KAAMhL,KAAKgL,KACX7K,KAAMH,KAAKG,KAEXgtC,MAAOntC,KAAK2G,OAAOowH,OAAQnB,GAAO5qH,KAElC2lC,QAAS3wC,KAAK2wC,QAEd6sB,OAAQ,CAAEx9D,KAAKw9D,OAAOxuD,EAAGhP,KAAKw9D,OAAOvuD,GACrC2X,OAAQ,CAAE5mB,KAAK4mB,OAAO5X,EAAGhP,KAAK4mB,OAAO3X,GACrC+wG,OAAQ,CAAEhgH,KAAKggH,OAAOhxG,EAAGhP,KAAKggH,OAAO/wG,GACrCovB,SAAUr+B,KAAKq+B,SAEfgyF,KAAM,CAAErwH,KAAKy2G,MAAOz2G,KAAK02G,OAEzBrsE,OAAQrqC,KAAKqqC,OACbxoC,KAAM7B,KAAK6B,KACXuqC,SAAUpsC,KAAKosC,SAEfC,UAAWrsC,KAAKqsC,UAChBE,UAAWvsC,KAAKusC,UAChB85D,WAAYrmG,KAAKqmG,WAEjB55D,MAAOzsC,KAAKysC,MAEZ8pF,iBAAkBv2H,KAAKu2H,iBACvBC,gBAAiBx2H,KAAKw2H,iBAYvB,MARyC,OAApCp4B,KAAKw4B,UAAW52H,KAAKu+B,YAAsBy+E,EAAOz+E,SAAWv+B,KAAKu+B,UAEhEs3F,IAEND,EAAKlvB,SAAU1mG,KAAKgL,MAASgyG,GAIvBA,CAER,GAAC,CAAA/2G,IAAA,UAAApG,MAED,WAECG,KAAKssB,cAAe,CAAEzqB,KAAM,WAE7B,GAAC,CAAAoE,IAAA,cAAApG,MAED,SAAam3H,GAEZ,GAAKh3H,KAAK2wC,UAAYw2E,GAAY,OAAO6P,EAIzC,GAFAA,EAAGC,aAAcj3H,KAAK6Q,QAEjBmmH,EAAGhoH,EAAI,GAAKgoH,EAAGhoH,EAAI,EAEvB,OAAShP,KAAKy2G,OAEb,KAAKlI,GAEJyoB,EAAGhoH,EAAIgoH,EAAGhoH,EAAIoF,KAAKi5B,MAAO2pF,EAAGhoH,GAC7B,MAED,KAAKq/F,GAEJ2oB,EAAGhoH,EAAIgoH,EAAGhoH,EAAI,EAAI,EAAI,EACtB,MAED,KAAKs/F,GAEwC,IAAvCl6F,KAAKgB,IAAKhB,KAAKi5B,MAAO2pF,EAAGhoH,GAAM,GAEnCgoH,EAAGhoH,EAAIoF,KAAKq9E,KAAMulC,EAAGhoH,GAAMgoH,EAAGhoH,EAI9BgoH,EAAGhoH,EAAIgoH,EAAGhoH,EAAIoF,KAAKi5B,MAAO2pF,EAAGhoH,GAUjC,GAAKgoH,EAAG/nH,EAAI,GAAK+nH,EAAG/nH,EAAI,EAEvB,OAASjP,KAAK02G,OAEb,KAAKnI,GAEJyoB,EAAG/nH,EAAI+nH,EAAG/nH,EAAImF,KAAKi5B,MAAO2pF,EAAG/nH,GAC7B,MAED,KAAKo/F,GAEJ2oB,EAAG/nH,EAAI+nH,EAAG/nH,EAAI,EAAI,EAAI,EACtB,MAED,KAAKq/F,GAEwC,IAAvCl6F,KAAKgB,IAAKhB,KAAKi5B,MAAO2pF,EAAG/nH,GAAM,GAEnC+nH,EAAG/nH,EAAImF,KAAKq9E,KAAMulC,EAAG/nH,GAAM+nH,EAAG/nH,EAI9B+nH,EAAG/nH,EAAI+nH,EAAG/nH,EAAImF,KAAKi5B,MAAO2pF,EAAG/nH,GAgBjC,OANKjP,KAAKysC,QAETuqF,EAAG/nH,EAAI,EAAI+nH,EAAG/nH,GAIR+nH,CAER,GAAC,CAAA/wH,IAAA,cAAAxB,IAED,SAAiB5E,IAED,IAAVA,IAEJG,KAAKqoE,UACLroE,KAAK2G,OAAO05B,aAAc,EAI5B,KAAC62E,CAAA,CAzRW,CAAS1tD,IA6RtB0tD,GAAQgf,cAAgB,KACxBhf,GAAQif,gBAAkBhP,GAAU,IAE9BltE,GAAO,SAAAi9E,GAEZ,SAAAj9E,IAA0C,IAA7BjrC,EAACpO,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGqO,EAACrO,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGsO,EAACtO,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAG6B,EAAC7B,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAC8H,EAAAA,EAAAA,GAAA,KAAAuxC,GAEtCA,EAAQ96C,UAAUg4H,WAAY,EAE9Bn3H,KAAKgP,EAAIA,EACThP,KAAKiP,EAAIA,EACTjP,KAAKkP,EAAIA,EACTlP,KAAKyC,EAAIA,CAEV,CAonBC,OApnBAkI,EAAAA,EAAAA,GAAAsvC,EAAA,EAAAh0C,IAAA,QAAAzB,IAED,WAEC,OAAOxE,KAAKkP,CAEb,EAACzK,IAED,SAAW5E,GAEVG,KAAKkP,EAAIrP,CAEV,GAAC,CAAAoG,IAAA,SAAAzB,IAED,WAEC,OAAOxE,KAAKyC,CAEb,EAACgC,IAED,SAAY5E,GAEXG,KAAKyC,EAAI5C,CAEV,GAAC,CAAAoG,IAAA,MAAApG,MAED,SAAKmP,EAAGC,EAAGC,EAAGzM,GAOb,OALAzC,KAAKgP,EAAIA,EACThP,KAAKiP,EAAIA,EACTjP,KAAKkP,EAAIA,EACTlP,KAAKyC,EAAIA,EAEFzC,IAER,GAAC,CAAAiG,IAAA,YAAApG,MAED,SAAW+U,GAOV,OALA5U,KAAKgP,EAAI4F,EACT5U,KAAKiP,EAAI2F,EACT5U,KAAKkP,EAAI0F,EACT5U,KAAKyC,EAAImS,EAEF5U,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAMmP,GAIL,OAFAhP,KAAKgP,EAAIA,EAEFhP,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAMoP,GAIL,OAFAjP,KAAKiP,EAAIA,EAEFjP,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAMqP,GAIL,OAFAlP,KAAKkP,EAAIA,EAEFlP,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAM4C,GAIL,OAFAzC,KAAKyC,EAAIA,EAEFzC,IAER,GAAC,CAAAiG,IAAA,eAAApG,MAED,SAAc+F,EAAO/F,GAEpB,OAAS+F,GAER,KAAK,EAAG5F,KAAKgP,EAAInP,EAAO,MACxB,KAAK,EAAGG,KAAKiP,EAAIpP,EAAO,MACxB,KAAK,EAAGG,KAAKkP,EAAIrP,EAAO,MACxB,KAAK,EAAGG,KAAKyC,EAAI5C,EAAO,MACxB,QAAS,MAAM,IAAI6C,MAAO,0BAA4BkD,GAIvD,OAAO5F,IAER,GAAC,CAAAiG,IAAA,eAAApG,MAED,SAAc+F,GAEb,OAASA,GAER,KAAK,EAAG,OAAO5F,KAAKgP,EACpB,KAAK,EAAG,OAAOhP,KAAKiP,EACpB,KAAK,EAAG,OAAOjP,KAAKkP,EACpB,KAAK,EAAG,OAAOlP,KAAKyC,EACpB,QAAS,MAAM,IAAIC,MAAO,0BAA4BkD,GAIxD,GAAC,CAAAK,IAAA,QAAApG,MAED,WAEC,OAAO,IAAIG,KAAK4zD,YAAa5zD,KAAKgP,EAAGhP,KAAKiP,EAAGjP,KAAKkP,EAAGlP,KAAKyC,EAE3D,GAAC,CAAAwD,IAAA,OAAApG,MAED,SAAM+Q,GAOL,OALA5Q,KAAKgP,EAAI4B,EAAE5B,EACXhP,KAAKiP,EAAI2B,EAAE3B,EACXjP,KAAKkP,EAAI0B,EAAE1B,EACXlP,KAAKyC,OAActB,IAARyP,EAAEnO,EAAoBmO,EAAEnO,EAAI,EAEhCzC,IAER,GAAC,CAAAiG,IAAA,MAAApG,MAED,SAAK+Q,GAOJ,OALA5Q,KAAKgP,GAAK4B,EAAE5B,EACZhP,KAAKiP,GAAK2B,EAAE3B,EACZjP,KAAKkP,GAAK0B,EAAE1B,EACZlP,KAAKyC,GAAKmO,EAAEnO,EAELzC,IAER,GAAC,CAAAiG,IAAA,YAAApG,MAED,SAAWkN,GAOV,OALA/M,KAAKgP,GAAKjC,EACV/M,KAAKiP,GAAKlC,EACV/M,KAAKkP,GAAKnC,EACV/M,KAAKyC,GAAKsK,EAEH/M,IAER,GAAC,CAAAiG,IAAA,aAAApG,MAED,SAAYsX,EAAG/E,GAOd,OALApS,KAAKgP,EAAImI,EAAEnI,EAAIoD,EAAEpD,EACjBhP,KAAKiP,EAAIkI,EAAElI,EAAImD,EAAEnD,EACjBjP,KAAKkP,EAAIiI,EAAEjI,EAAIkD,EAAElD,EACjBlP,KAAKyC,EAAI0U,EAAE1U,EAAI2P,EAAE3P,EAEVzC,IAER,GAAC,CAAAiG,IAAA,kBAAApG,MAED,SAAiB+Q,EAAG7D,GAOnB,OALA/M,KAAKgP,GAAK4B,EAAE5B,EAAIjC,EAChB/M,KAAKiP,GAAK2B,EAAE3B,EAAIlC,EAChB/M,KAAKkP,GAAK0B,EAAE1B,EAAInC,EAChB/M,KAAKyC,GAAKmO,EAAEnO,EAAIsK,EAET/M,IAER,GAAC,CAAAiG,IAAA,MAAApG,MAED,SAAK+Q,GAOJ,OALA5Q,KAAKgP,GAAK4B,EAAE5B,EACZhP,KAAKiP,GAAK2B,EAAE3B,EACZjP,KAAKkP,GAAK0B,EAAE1B,EACZlP,KAAKyC,GAAKmO,EAAEnO,EAELzC,IAER,GAAC,CAAAiG,IAAA,YAAApG,MAED,SAAWkN,GAOV,OALA/M,KAAKgP,GAAKjC,EACV/M,KAAKiP,GAAKlC,EACV/M,KAAKkP,GAAKnC,EACV/M,KAAKyC,GAAKsK,EAEH/M,IAER,GAAC,CAAAiG,IAAA,aAAApG,MAED,SAAYsX,EAAG/E,GAOd,OALApS,KAAKgP,EAAImI,EAAEnI,EAAIoD,EAAEpD,EACjBhP,KAAKiP,EAAIkI,EAAElI,EAAImD,EAAEnD,EACjBjP,KAAKkP,EAAIiI,EAAEjI,EAAIkD,EAAElD,EACjBlP,KAAKyC,EAAI0U,EAAE1U,EAAI2P,EAAE3P,EAEVzC,IAER,GAAC,CAAAiG,IAAA,WAAApG,MAED,SAAU+Q,GAOT,OALA5Q,KAAKgP,GAAK4B,EAAE5B,EACZhP,KAAKiP,GAAK2B,EAAE3B,EACZjP,KAAKkP,GAAK0B,EAAE1B,EACZlP,KAAKyC,GAAKmO,EAAEnO,EAELzC,IAER,GAAC,CAAAiG,IAAA,iBAAApG,MAED,SAAgB+U,GAOf,OALA5U,KAAKgP,GAAK4F,EACV5U,KAAKiP,GAAK2F,EACV5U,KAAKkP,GAAK0F,EACV5U,KAAKyC,GAAKmS,EAEH5U,IAER,GAAC,CAAAiG,IAAA,eAAApG,MAED,SAAckC,GAEb,IAAMiN,EAAIhP,KAAKgP,EAAGC,EAAIjP,KAAKiP,EAAGC,EAAIlP,KAAKkP,EAAGzM,EAAIzC,KAAKyC,EAC7CwK,EAAIlL,EAAE0O,SAOZ,OALAzQ,KAAKgP,EAAI/B,EAAG,GAAM+B,EAAI/B,EAAG,GAAMgC,EAAIhC,EAAG,GAAMiC,EAAIjC,EAAG,IAAOxK,EAC1DzC,KAAKiP,EAAIhC,EAAG,GAAM+B,EAAI/B,EAAG,GAAMgC,EAAIhC,EAAG,GAAMiC,EAAIjC,EAAG,IAAOxK,EAC1DzC,KAAKkP,EAAIjC,EAAG,GAAM+B,EAAI/B,EAAG,GAAMgC,EAAIhC,EAAG,IAAOiC,EAAIjC,EAAG,IAAOxK,EAC3DzC,KAAKyC,EAAIwK,EAAG,GAAM+B,EAAI/B,EAAG,GAAMgC,EAAIhC,EAAG,IAAOiC,EAAIjC,EAAG,IAAOxK,EAEpDzC,IAER,GAAC,CAAAiG,IAAA,eAAApG,MAED,SAAc+U,GAEb,OAAO5U,KAAKs0C,eAAgB,EAAI1/B,EAEjC,GAAC,CAAA3O,IAAA,6BAAApG,MAED,SAA4BqT,GAM3BlT,KAAKyC,EAAI,EAAI2R,KAAKmF,KAAMrG,EAAEzQ,GAE1B,IAAMsK,EAAIqH,KAAKC,KAAM,EAAInB,EAAEzQ,EAAIyQ,EAAEzQ,GAgBjC,OAdKsK,EAAI,MAER/M,KAAKgP,EAAI,EACThP,KAAKiP,EAAI,EACTjP,KAAKkP,EAAI,IAITlP,KAAKgP,EAAIkE,EAAElE,EAAIjC,EACf/M,KAAKiP,EAAIiE,EAAEjE,EAAIlC,EACf/M,KAAKkP,EAAIgE,EAAEhE,EAAInC,GAIT/M,IAER,GAAC,CAAAiG,IAAA,iCAAApG,MAED,SAAgCkC,GAM/B,IAAImX,EAAOlK,EAAGC,EAAGC,EACXkoH,EAAU,IACfC,EAAW,GAEXtyC,EAAKhjF,EAAE0O,SAEP6mH,EAAMvyC,EAAI,GAAKwyC,EAAMxyC,EAAI,GAAKyyC,EAAMzyC,EAAI,GACxC0yC,EAAM1yC,EAAI,GAAK2yC,EAAM3yC,EAAI,GAAK4yC,EAAM5yC,EAAI,GACxC6yC,EAAM7yC,EAAI,GAAK8yC,EAAM9yC,EAAI,GAAK+yC,EAAM/yC,EAAI,IAEzC,GAAO3wE,KAAKgB,IAAKmiH,EAAME,GAAQL,GACxBhjH,KAAKgB,IAAKoiH,EAAMI,GAAQR,GACxBhjH,KAAKgB,IAAKuiH,EAAME,GAAQT,EAAY,CAM1C,GAAOhjH,KAAKgB,IAAKmiH,EAAME,GAAQJ,GACxBjjH,KAAKgB,IAAKoiH,EAAMI,GAAQP,GACxBjjH,KAAKgB,IAAKuiH,EAAME,GAAQR,GACxBjjH,KAAKgB,IAAKkiH,EAAMI,EAAMI,EAAM,GAAMT,EAMxC,OAFAr3H,KAAKyE,IAAK,EAAG,EAAG,EAAG,GAEZzE,KAMRkZ,EAAQ9E,KAAKyF,GAEb,IAAMvG,GAAOgkH,EAAM,GAAM,EACnB7jH,GAAOikH,EAAM,GAAM,EACnB/jH,GAAOmkH,EAAM,GAAM,EACnBvkH,GAAOgkH,EAAME,GAAQ,EACrBjkH,GAAOgkH,EAAMI,GAAQ,EACrBlkH,GAAOikH,EAAME,GAAQ,EA4D3B,OA1DOvkH,EAAKG,GAAUH,EAAKK,EAIrBL,EAAK8jH,GAETpoH,EAAI,EACJC,EAAI,WACJC,EAAI,aAKJD,EAAIsE,GADJvE,EAAIoF,KAAKC,KAAMf,IAEfpE,EAAIsE,EAAKxE,GAICyE,EAAKE,EAIXF,EAAK2jH,GAETpoH,EAAI,WACJC,EAAI,EACJC,EAAI,aAKJF,EAAIuE,GADJtE,EAAImF,KAAKC,KAAMZ,IAEfvE,EAAIwE,EAAKzE,GAQL0E,EAAKyjH,GAETpoH,EAAI,WACJC,EAAI,WACJC,EAAI,IAKJF,EAAIwE,GADJtE,EAAIkF,KAAKC,KAAMV,IAEf1E,EAAIyE,EAAKxE,GAMXlP,KAAKyE,IAAKuK,EAAGC,EAAGC,EAAGgK,GAEZlZ,IAER,CAIA,IAAI+M,EAAIqH,KAAKC,MAAQwjH,EAAMF,IAAUE,EAAMF,IACxCH,EAAMI,IAAUJ,EAAMI,IACtBH,EAAMF,IAAUE,EAAMF,IAYzB,OAVKnjH,KAAKgB,IAAKrI,GAAM,OAAQA,EAAI,GAKjC/M,KAAKgP,GAAM6oH,EAAMF,GAAQ5qH,EACzB/M,KAAKiP,GAAMuoH,EAAMI,GAAQ7qH,EACzB/M,KAAKkP,GAAMuoH,EAAMF,GAAQxqH,EACzB/M,KAAKyC,EAAI2R,KAAKmF,MAAQ+9G,EAAMI,EAAMI,EAAM,GAAM,GAEvC93H,IAER,GAAC,CAAAiG,IAAA,MAAApG,MAED,SAAK+Q,GAOJ,OALA5Q,KAAKgP,EAAIoF,KAAKsC,IAAK1W,KAAKgP,EAAG4B,EAAE5B,GAC7BhP,KAAKiP,EAAImF,KAAKsC,IAAK1W,KAAKiP,EAAG2B,EAAE3B,GAC7BjP,KAAKkP,EAAIkF,KAAKsC,IAAK1W,KAAKkP,EAAG0B,EAAE1B,GAC7BlP,KAAKyC,EAAI2R,KAAKsC,IAAK1W,KAAKyC,EAAGmO,EAAEnO,GAEtBzC,IAER,GAAC,CAAAiG,IAAA,MAAApG,MAED,SAAK+Q,GAOJ,OALA5Q,KAAKgP,EAAIoF,KAAKuC,IAAK3W,KAAKgP,EAAG4B,EAAE5B,GAC7BhP,KAAKiP,EAAImF,KAAKuC,IAAK3W,KAAKiP,EAAG2B,EAAE3B,GAC7BjP,KAAKkP,EAAIkF,KAAKuC,IAAK3W,KAAKkP,EAAG0B,EAAE1B,GAC7BlP,KAAKyC,EAAI2R,KAAKuC,IAAK3W,KAAKyC,EAAGmO,EAAEnO,GAEtBzC,IAER,GAAC,CAAAiG,IAAA,QAAApG,MAED,SAAO6W,EAAKC,GASX,OALA3W,KAAKgP,EAAIoF,KAAKuC,IAAKD,EAAI1H,EAAGoF,KAAKsC,IAAKC,EAAI3H,EAAGhP,KAAKgP,IAChDhP,KAAKiP,EAAImF,KAAKuC,IAAKD,EAAIzH,EAAGmF,KAAKsC,IAAKC,EAAI1H,EAAGjP,KAAKiP,IAChDjP,KAAKkP,EAAIkF,KAAKuC,IAAKD,EAAIxH,EAAGkF,KAAKsC,IAAKC,EAAIzH,EAAGlP,KAAKkP,IAChDlP,KAAKyC,EAAI2R,KAAKuC,IAAKD,EAAIjU,EAAG2R,KAAKsC,IAAKC,EAAIlU,EAAGzC,KAAKyC,IAEzCzC,IAER,GAAC,CAAAiG,IAAA,cAAApG,MAED,SAAakwH,EAAQC,GAOpB,OALAhwH,KAAKgP,EAAIoF,KAAKuC,IAAKo5G,EAAQ37G,KAAKsC,IAAKs5G,EAAQhwH,KAAKgP,IAClDhP,KAAKiP,EAAImF,KAAKuC,IAAKo5G,EAAQ37G,KAAKsC,IAAKs5G,EAAQhwH,KAAKiP,IAClDjP,KAAKkP,EAAIkF,KAAKuC,IAAKo5G,EAAQ37G,KAAKsC,IAAKs5G,EAAQhwH,KAAKkP,IAClDlP,KAAKyC,EAAI2R,KAAKuC,IAAKo5G,EAAQ37G,KAAKsC,IAAKs5G,EAAQhwH,KAAKyC,IAE3CzC,IAER,GAAC,CAAAiG,IAAA,cAAApG,MAED,SAAa6W,EAAKC,GAEjB,IAAMpU,EAASvC,KAAKuC,SAEpB,OAAOvC,KAAKiwH,aAAc1tH,GAAU,GAAI+xC,eAAgBlgC,KAAKuC,IAAKD,EAAKtC,KAAKsC,IAAKC,EAAKpU,IAEvF,GAAC,CAAA0D,IAAA,QAAApG,MAED,WAOC,OALAG,KAAKgP,EAAIoF,KAAKi5B,MAAOrtC,KAAKgP,GAC1BhP,KAAKiP,EAAImF,KAAKi5B,MAAOrtC,KAAKiP,GAC1BjP,KAAKkP,EAAIkF,KAAKi5B,MAAOrtC,KAAKkP,GAC1BlP,KAAKyC,EAAI2R,KAAKi5B,MAAOrtC,KAAKyC,GAEnBzC,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,WAOC,OALAG,KAAKgP,EAAIoF,KAAKq9E,KAAMzxF,KAAKgP,GACzBhP,KAAKiP,EAAImF,KAAKq9E,KAAMzxF,KAAKiP,GACzBjP,KAAKkP,EAAIkF,KAAKq9E,KAAMzxF,KAAKkP,GACzBlP,KAAKyC,EAAI2R,KAAKq9E,KAAMzxF,KAAKyC,GAElBzC,IAER,GAAC,CAAAiG,IAAA,QAAApG,MAED,WAOC,OALAG,KAAKgP,EAAIoF,KAAK8jD,MAAOl4D,KAAKgP,GAC1BhP,KAAKiP,EAAImF,KAAK8jD,MAAOl4D,KAAKiP,GAC1BjP,KAAKkP,EAAIkF,KAAK8jD,MAAOl4D,KAAKkP,GAC1BlP,KAAKyC,EAAI2R,KAAK8jD,MAAOl4D,KAAKyC,GAEnBzC,IAER,GAAC,CAAAiG,IAAA,cAAApG,MAED,WAOC,OALAG,KAAKgP,EAAMhP,KAAKgP,EAAI,EAAMoF,KAAKq9E,KAAMzxF,KAAKgP,GAAMoF,KAAKi5B,MAAOrtC,KAAKgP,GACjEhP,KAAKiP,EAAMjP,KAAKiP,EAAI,EAAMmF,KAAKq9E,KAAMzxF,KAAKiP,GAAMmF,KAAKi5B,MAAOrtC,KAAKiP,GACjEjP,KAAKkP,EAAMlP,KAAKkP,EAAI,EAAMkF,KAAKq9E,KAAMzxF,KAAKkP,GAAMkF,KAAKi5B,MAAOrtC,KAAKkP,GACjElP,KAAKyC,EAAMzC,KAAKyC,EAAI,EAAM2R,KAAKq9E,KAAMzxF,KAAKyC,GAAM2R,KAAKi5B,MAAOrtC,KAAKyC,GAE1DzC,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,WAOC,OALAG,KAAKgP,GAAMhP,KAAKgP,EAChBhP,KAAKiP,GAAMjP,KAAKiP,EAChBjP,KAAKkP,GAAMlP,KAAKkP,EAChBlP,KAAKyC,GAAMzC,KAAKyC,EAETzC,IAER,GAAC,CAAAiG,IAAA,MAAApG,MAED,SAAK+Q,GAEJ,OAAO5Q,KAAKgP,EAAI4B,EAAE5B,EAAIhP,KAAKiP,EAAI2B,EAAE3B,EAAIjP,KAAKkP,EAAI0B,EAAE1B,EAAIlP,KAAKyC,EAAImO,EAAEnO,CAEhE,GAAC,CAAAwD,IAAA,WAAApG,MAED,WAEC,OAAOG,KAAKgP,EAAIhP,KAAKgP,EAAIhP,KAAKiP,EAAIjP,KAAKiP,EAAIjP,KAAKkP,EAAIlP,KAAKkP,EAAIlP,KAAKyC,EAAIzC,KAAKyC,CAE5E,GAAC,CAAAwD,IAAA,SAAApG,MAED,WAEC,OAAOuU,KAAKC,KAAMrU,KAAKgP,EAAIhP,KAAKgP,EAAIhP,KAAKiP,EAAIjP,KAAKiP,EAAIjP,KAAKkP,EAAIlP,KAAKkP,EAAIlP,KAAKyC,EAAIzC,KAAKyC,EAEvF,GAAC,CAAAwD,IAAA,kBAAApG,MAED,WAEC,OAAOuU,KAAKgB,IAAKpV,KAAKgP,GAAMoF,KAAKgB,IAAKpV,KAAKiP,GAAMmF,KAAKgB,IAAKpV,KAAKkP,GAAMkF,KAAKgB,IAAKpV,KAAKyC,EAEtF,GAAC,CAAAwD,IAAA,YAAApG,MAED,WAEC,OAAOG,KAAKiwH,aAAcjwH,KAAKuC,UAAY,EAE5C,GAAC,CAAA0D,IAAA,YAAApG,MAED,SAAW0C,GAEV,OAAOvC,KAAKsZ,YAAYg7B,eAAgB/xC,EAEzC,GAAC,CAAA0D,IAAA,OAAApG,MAED,SAAM+Q,EAAG4zD,GAOR,OALAxkE,KAAKgP,IAAO4B,EAAE5B,EAAIhP,KAAKgP,GAAMw1D,EAC7BxkE,KAAKiP,IAAO2B,EAAE3B,EAAIjP,KAAKiP,GAAMu1D,EAC7BxkE,KAAKkP,IAAO0B,EAAE1B,EAAIlP,KAAKkP,GAAMs1D,EAC7BxkE,KAAKyC,IAAOmO,EAAEnO,EAAIzC,KAAKyC,GAAM+hE,EAEtBxkE,IAER,GAAC,CAAAiG,IAAA,cAAApG,MAED,SAAag8B,EAAIC,EAAI0oC,GAOpB,OALAxkE,KAAKgP,EAAI6sB,EAAG7sB,GAAM8sB,EAAG9sB,EAAI6sB,EAAG7sB,GAAMw1D,EAClCxkE,KAAKiP,EAAI4sB,EAAG5sB,GAAM6sB,EAAG7sB,EAAI4sB,EAAG5sB,GAAMu1D,EAClCxkE,KAAKkP,EAAI2sB,EAAG3sB,GAAM4sB,EAAG5sB,EAAI2sB,EAAG3sB,GAAMs1D,EAClCxkE,KAAKyC,EAAIo5B,EAAGp5B,GAAMq5B,EAAGr5B,EAAIo5B,EAAGp5B,GAAM+hE,EAE3BxkE,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQ+Q,GAEP,OAAWA,EAAE5B,IAAMhP,KAAKgP,GAAS4B,EAAE3B,IAAMjP,KAAKiP,GAAS2B,EAAE1B,IAAMlP,KAAKkP,GAAS0B,EAAEnO,IAAMzC,KAAKyC,CAE3F,GAAC,CAAAwD,IAAA,YAAApG,MAED,SAAWu/D,GAAoB,IAAbx4C,EAAMhmB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAO1B,OALAZ,KAAKgP,EAAIowD,EAAOx4C,GAChB5mB,KAAKiP,EAAImwD,EAAOx4C,EAAS,GACzB5mB,KAAKkP,EAAIkwD,EAAOx4C,EAAS,GACzB5mB,KAAKyC,EAAI28D,EAAOx4C,EAAS,GAElB5mB,IAER,GAAC,CAAAiG,IAAA,UAAApG,MAED,WAAkC,IAAzBu/D,EAAKx+D,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAIgmB,EAAMhmB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAO7B,OALAw+D,EAAOx4C,GAAW5mB,KAAKgP,EACvBowD,EAAOx4C,EAAS,GAAM5mB,KAAKiP,EAC3BmwD,EAAOx4C,EAAS,GAAM5mB,KAAKkP,EAC3BkwD,EAAOx4C,EAAS,GAAM5mB,KAAKyC,EAEpB28D,CAER,GAAC,CAAAn5D,IAAA,sBAAApG,MAED,SAAqBorG,EAAWrlG,GAO/B,OALA5F,KAAKgP,EAAIi8F,EAAUxP,KAAM71F,GACzB5F,KAAKiP,EAAIg8F,EAAUilB,KAAMtqH,GACzB5F,KAAKkP,EAAI+7F,EAAU4pB,KAAMjvH,GACzB5F,KAAKyC,EAAIwoG,EAAU8sB,KAAMnyH,GAElB5F,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,WAOC,OALAG,KAAKgP,EAAIoF,KAAKo5G,SACdxtH,KAAKiP,EAAImF,KAAKo5G,SACdxtH,KAAKkP,EAAIkF,KAAKo5G,SACdxtH,KAAKyC,EAAI2R,KAAKo5G,SAEPxtH,IAER,GAAC,CAAAiG,IAAAixH,EAAAr3H,OAAAswH,EAAAA,EAAAA,KAAAC,MAED,SAAAvwH,IAAA,OAAAswH,EAAAA,EAAAA,KAAAE,MAAA,SAAA2H,GAAA,cAAAA,EAAA/vD,KAAA+vD,EAAA5qE,MAAA,OAEC,OAFD4qE,EAAA5qE,KAAA,EAEOptD,KAAKgP,EAAC,OACZ,OADYgpH,EAAA5qE,KAAA,EACNptD,KAAKiP,EAAC,OACZ,OADY+oH,EAAA5qE,KAAA,EACNptD,KAAKkP,EAAC,OACZ,OADY8oH,EAAA5qE,KAAA,EACNptD,KAAKyC,EAAC,wBAAAu1H,EAAAx8D,OAAA,GAAA37D,EAAA,YAEZo6C,CAAA,CA/nBW,CAwnBTgT,OAAOC,UAgBLlY,GAAiB,SAAAijF,IAAA5vH,EAAAA,EAAAA,GAAA2sC,EAAAijF,GAAA,IAAAt5G,GAAApW,EAAAA,EAAAA,GAAAysC,GAEtB,SAAAA,EAAaxK,EAAOC,GAAuB,IAAA7rB,EAAf5W,EAAOpH,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,CAAC,GAAC8H,EAAAA,EAAAA,GAAA,KAAAssC,IAEvCp2B,EAAAD,EAAAvf,KAAA,OAEK84H,qBAAsB,EAE3Bt5G,EAAK4rB,MAAQA,EACb5rB,EAAK6rB,OAASA,EACd7rB,EAAKiG,MAAQ,EAEbjG,EAAKu5G,QAAU,IAAIl+E,GAAS,EAAG,EAAGzP,EAAOC,GACzC7rB,EAAKw5G,aAAc,EAEnBx5G,EAAKq8C,SAAW,IAAIhhB,GAAS,EAAG,EAAGzP,EAAOC,GAE1C,IAAM0C,EAAQ,CAAE3C,MAAOA,EAAOC,OAAQA,EAAQ5lB,MAAO,GAec,OAbnEjG,EAAKqtB,QAAU,IAAIirE,GAAS/pE,EAAOnlC,EAAQ2oC,QAAS3oC,EAAQyuG,MAAOzuG,EAAQ0uG,MAAO1uG,EAAQukC,UAAWvkC,EAAQqkC,UAAWrkC,EAAQqiC,OAAQriC,EAAQnG,KAAMmG,EAAQq+F,WAAYr+F,EAAQokC,UAClLxtB,EAAKqtB,QAAQwqF,uBAAwB,EAErC73G,EAAKqtB,QAAQQ,OAAQ,EACrB7tB,EAAKqtB,QAAQO,qBAA8CrrC,IAA5B6G,EAAQwkC,iBAAgCxkC,EAAQwkC,gBAC/E5tB,EAAKqtB,QAAQqqF,oBAA4Cn1H,IAA3B6G,EAAQsuH,eAA+BtuH,EAAQsuH,eAAiB,KAC9F13G,EAAKqtB,QAAQI,eAAkClrC,IAAtB6G,EAAQqkC,UAA0BrkC,EAAQqkC,UAAYC,GAE/E1tB,EAAK20B,iBAAsCpyC,IAAxB6G,EAAQurC,aAA4BvrC,EAAQurC,YAC/D30B,EAAKq2B,mBAA0C9zC,IAA1B6G,EAAQitC,eAA8BjtC,EAAQitC,cAEnEr2B,EAAKq3B,kBAAwC90C,IAAzB6G,EAAQiuC,aAA6BjuC,EAAQiuC,aAAe,KAEhFr3B,EAAKy5G,aAA8Bl3H,IAApB6G,EAAQqwH,QAAwBrwH,EAAQqwH,QAAU,EAAEz5G,CAEpE,CA4DC,OA5DAjU,EAAAA,EAAAA,GAAAqqC,EAAA,EAAA/uC,IAAA,UAAApG,MAED,SAAS2qC,EAAOC,GAAoB,IAAZ5lB,EAAKjkB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAE1BZ,KAAKwqC,QAAUA,GAASxqC,KAAKyqC,SAAWA,GAAUzqC,KAAK6kB,QAAUA,IAErE7kB,KAAKwqC,MAAQA,EACbxqC,KAAKyqC,OAASA,EACdzqC,KAAK6kB,MAAQA,EAEb7kB,KAAKisC,QAAQkB,MAAM3C,MAAQA,EAC3BxqC,KAAKisC,QAAQkB,MAAM1C,OAASA,EAC5BzqC,KAAKisC,QAAQkB,MAAMtoB,MAAQA,EAE3B7kB,KAAK2iD,WAIN3iD,KAAKi7D,SAASx2D,IAAK,EAAG,EAAG+lC,EAAOC,GAChCzqC,KAAKm4H,QAAQ1zH,IAAK,EAAG,EAAG+lC,EAAOC,EAEhC,GAAC,CAAAxkC,IAAA,QAAApG,MAED,WAEC,OAAO,IAAIG,KAAK4zD,aAAc3vD,KAAMjE,KAErC,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAM8G,GAEL3G,KAAKwqC,MAAQ7jC,EAAO6jC,MACpBxqC,KAAKyqC,OAAS9jC,EAAO8jC,OACrBzqC,KAAK6kB,MAAQle,EAAOke,MAEpB7kB,KAAKi7D,SAASh3D,KAAM0C,EAAOs0D,UAE3Bj7D,KAAKisC,QAAUtlC,EAAOslC,QAAQ7rB,QAC9BpgB,KAAKisC,QAAQwqF,uBAAwB,EAIrC,IAAMtpF,EAAQ7tC,OAAO4rD,OAAQ,CAAC,EAAGvkD,EAAOslC,QAAQkB,OAUhD,OATAntC,KAAKisC,QAAQtlC,OAAS,IAAI+uH,GAAQvoF,GAElCntC,KAAKuzC,YAAc5sC,EAAO4sC,YAC1BvzC,KAAKi1C,cAAgBtuC,EAAOsuC,cAEC,OAAxBtuC,EAAOsvC,eAAwBj2C,KAAKi2C,aAAetvC,EAAOsvC,aAAa71B,SAE5EpgB,KAAKq4H,QAAU1xH,EAAO0xH,QAEfr4H,IAER,GAAC,CAAAiG,IAAA,UAAApG,MAED,WAECG,KAAKssB,cAAe,CAAEzqB,KAAM,WAE7B,KAACmzC,CAAA,CA9FqB,CAASwU,IAkG1B8uE,GAAgB,SAAAC,IAAAlwH,EAAAA,EAAAA,GAAAiwH,EAAAC,GAAA,IAAApwG,GAAA5f,EAAAA,EAAAA,GAAA+vH,GAErB,SAAAA,IAA6D,IAAAjwG,EAAhD1b,EAAI/L,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,KAAM4pC,EAAK5pC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAG6pC,EAAM7pC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGikB,EAAKjkB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAe/B,OAfgC8H,EAAAA,EAAAA,GAAA,KAAA4vH,IAEzDjwG,EAAAF,EAAA/oB,KAAA,KAAO,OAEFo5H,oBAAqB,EAE1BnwG,EAAK8kB,MAAQ,CAAExgC,KAAAA,EAAM69B,MAAAA,EAAOC,OAAAA,EAAQ5lB,MAAAA,GAEpCwD,EAAKkkB,UAAYwhE,GACjB1lF,EAAKgkB,UAAY0hE,GAEjB1lF,EAAKowG,MAAQpqB,GAEbhmF,EAAKmkB,iBAAkB,EACvBnkB,EAAKokB,OAAQ,EACbpkB,EAAKmuG,gBAAkB,EAAEnuG,CAE1B,CAAC,OAAA1d,EAAAA,EAAAA,GAAA2tH,EAAA,CAnBoB,CAASphB,IAuBzBwhB,GAAsB,SAAAC,IAAAtwH,EAAAA,EAAAA,GAAAqwH,EAAAC,GAAA,IAAAnvG,GAAAjhB,EAAAA,EAAAA,GAAAmwH,GAE3B,SAAAA,EAAaluF,EAAOC,EAAQ5lB,GAAQ,IAAA4E,EAUO,OAVP/gB,EAAAA,EAAAA,GAAA,KAAAgwH,IAEnCjvG,EAAAD,EAAApqB,KAAA,KAAOorC,EAAOC,IAETmuF,0BAA2B,EAEhCnvG,EAAK5E,MAAQA,EAEb4E,EAAKwiB,QAAU,IAAIqsF,GAAkB,KAAM9tF,EAAOC,EAAQ5lB,GAE1D4E,EAAKwiB,QAAQwqF,uBAAwB,EAAKhtG,CAE3C,CAAC,OAAA9e,EAAAA,EAAAA,GAAA+tH,EAAA,CAd0B,CAAS1jF,IAkB/B6jF,GAAa,SAAAC,IAAAzwH,EAAAA,EAAAA,GAAAwwH,EAAAC,GAAA,IAAAC,GAAAxwH,EAAAA,EAAAA,GAAAswH,GAElB,SAAAA,IAA6D,IAAAG,EAAhDrsH,EAAI/L,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,KAAM4pC,EAAK5pC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAG6pC,EAAM7pC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGikB,EAAKjkB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAuB/B,OAvBgC8H,EAAAA,EAAAA,GAAA,KAAAmwH,IAUzDG,EAAAD,EAAA35H,KAAA,KAAO,OAEF65H,iBAAkB,EAEvBD,EAAK7rF,MAAQ,CAAExgC,KAAAA,EAAM69B,MAAAA,EAAOC,OAAAA,EAAQ5lB,MAAAA,GAEpCm0G,EAAKzsF,UAAYwhE,GACjBirB,EAAK3sF,UAAY0hE,GAEjBirB,EAAKP,MAAQpqB,GAEb2qB,EAAKxsF,iBAAkB,EACvBwsF,EAAKvsF,OAAQ,EACbusF,EAAKxC,gBAAkB,EAAEwC,CAE1B,CAAC,OAAAruH,EAAAA,EAAAA,GAAAkuH,EAAA,CA3BiB,CAAS3hB,IA+BtBgiB,GAAmB,SAAAC,IAAA9wH,EAAAA,EAAAA,GAAA6wH,EAAAC,GAAA,IAAAC,GAAA7wH,EAAAA,EAAAA,GAAA2wH,GAExB,SAAAA,EAAa1uF,EAAOC,EAAQ5lB,GAAQ,IAAAw0G,EAUO,OAVP3wH,EAAAA,EAAAA,GAAA,KAAAwwH,IAEnCG,EAAAD,EAAAh6H,KAAA,KAAOorC,EAAOC,IAET6uF,uBAAwB,EAE7BD,EAAKx0G,MAAQA,EAEbw0G,EAAKptF,QAAU,IAAI4sF,GAAe,KAAMruF,EAAOC,EAAQ5lB,GAEvDw0G,EAAKptF,QAAQwqF,uBAAwB,EAAK4C,CAE3C,CAAC,OAAA1uH,EAAAA,EAAAA,GAAAuuH,EAAA,CAduB,CAASlkF,IAkB5BukF,GAA0B,SAAAC,IAAAnxH,EAAAA,EAAAA,GAAAkxH,EAAAC,GAAA,IAAAC,GAAAlxH,EAAAA,EAAAA,GAAAgxH,GAE/B,SAAAA,EAAa/uF,EAAOC,EAAQ7nC,GAAsB,IAAA82H,EAAf1xH,EAAOpH,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,CAAC,GAAC8H,EAAAA,EAAAA,GAAA,KAAA6wH,IAE9CG,EAAAD,EAAAr6H,KAAA,KAAOorC,EAAOC,EAAQziC,IAEjB2xH,8BAA+B,EAEpC,IAAM1tF,EAAUytF,EAAKztF,QAErBytF,EAAKztF,QAAU,GAEf,IAAM,IAAIroC,EAAI,EAAGA,EAAIhB,EAAOgB,IAE3B81H,EAAKztF,QAASroC,GAAMqoC,EAAQ7rB,QAC5Bs5G,EAAKztF,QAASroC,GAAI6yH,uBAAwB,EAE1C,OAAAiD,CAEF,CAwDC,OAxDA/uH,EAAAA,EAAAA,GAAA4uH,EAAA,EAAAtzH,IAAA,UAAApG,MAED,SAAS2qC,EAAOC,GAAoB,IAAZ5lB,EAAKjkB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAE/B,GAAKZ,KAAKwqC,QAAUA,GAASxqC,KAAKyqC,SAAWA,GAAUzqC,KAAK6kB,QAAUA,EAAQ,CAE7E7kB,KAAKwqC,MAAQA,EACbxqC,KAAKyqC,OAASA,EACdzqC,KAAK6kB,MAAQA,EAEb,IAAM,IAAIjhB,EAAI,EAAG8sG,EAAK1wG,KAAKisC,QAAQ1pC,OAAQqB,EAAI8sG,EAAI9sG,IAElD5D,KAAKisC,QAASroC,GAAIupC,MAAM3C,MAAQA,EAChCxqC,KAAKisC,QAASroC,GAAIupC,MAAM1C,OAASA,EACjCzqC,KAAKisC,QAASroC,GAAIupC,MAAMtoB,MAAQA,EAIjC7kB,KAAK2iD,SAEN,CAKA,OAHA3iD,KAAKi7D,SAASx2D,IAAK,EAAG,EAAG+lC,EAAOC,GAChCzqC,KAAKm4H,QAAQ1zH,IAAK,EAAG,EAAG+lC,EAAOC,GAExBzqC,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAM8G,GAEL3G,KAAK2iD,UAEL3iD,KAAKwqC,MAAQ7jC,EAAO6jC,MACpBxqC,KAAKyqC,OAAS9jC,EAAO8jC,OACrBzqC,KAAK6kB,MAAQle,EAAOke,MAEpB7kB,KAAKi7D,SAASx2D,IAAK,EAAG,EAAGzE,KAAKwqC,MAAOxqC,KAAKyqC,QAC1CzqC,KAAKm4H,QAAQ1zH,IAAK,EAAG,EAAGzE,KAAKwqC,MAAOxqC,KAAKyqC,QAEzCzqC,KAAKuzC,YAAc5sC,EAAO4sC,YAC1BvzC,KAAKi1C,cAAgBtuC,EAAOsuC,cAEC,OAAxBtuC,EAAOsvC,eAAwBj2C,KAAKi2C,aAAetvC,EAAOsvC,aAAa71B,SAE5EpgB,KAAKisC,QAAQ1pC,OAAS,EAEtB,IAAM,IAAIqB,EAAI,EAAG8sG,EAAK/pG,EAAOslC,QAAQ1pC,OAAQqB,EAAI8sG,EAAI9sG,IAEpD5D,KAAKisC,QAASroC,GAAM+C,EAAOslC,QAASroC,GAAIwc,QACxCpgB,KAAKisC,QAASroC,GAAI6yH,uBAAwB,EAI3C,OAAOz2H,IAER,KAACu5H,CAAA,CA3E8B,CAASvkF,IA+EnC3b,GAAU,SAAAugG,GAEf,SAAAvgG,IAA0C,IAA7BrqB,EAACpO,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGqO,EAACrO,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGsO,EAACtO,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAG6B,EAAC7B,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAC8H,EAAAA,EAAAA,GAAA,KAAA2wB,GAEtCr5B,KAAK65H,cAAe,EAEpB75H,KAAK85H,GAAK9qH,EACVhP,KAAK+5H,GAAK9qH,EACVjP,KAAKg6H,GAAK9qH,EACVlP,KAAKi6H,GAAKx3H,CAEX,CAqGC,OArGAkI,EAAAA,EAAAA,GAAA0uB,EAAA,EAAApzB,IAAA,IAAAzB,IAuGD,WAEC,OAAOxE,KAAK85H,EAEb,EAACr1H,IAED,SAAO5E,GAENG,KAAK85H,GAAKj6H,EACVG,KAAKk6H,mBAEN,GAAC,CAAAj0H,IAAA,IAAAzB,IAED,WAEC,OAAOxE,KAAK+5H,EAEb,EAACt1H,IAED,SAAO5E,GAENG,KAAK+5H,GAAKl6H,EACVG,KAAKk6H,mBAEN,GAAC,CAAAj0H,IAAA,IAAAzB,IAED,WAEC,OAAOxE,KAAKg6H,EAEb,EAACv1H,IAED,SAAO5E,GAENG,KAAKg6H,GAAKn6H,EACVG,KAAKk6H,mBAEN,GAAC,CAAAj0H,IAAA,IAAAzB,IAED,WAEC,OAAOxE,KAAKi6H,EAEb,EAACx1H,IAED,SAAO5E,GAENG,KAAKi6H,GAAKp6H,EACVG,KAAKk6H,mBAEN,GAAC,CAAAj0H,IAAA,MAAApG,MAED,SAAKmP,EAAGC,EAAGC,EAAGzM,GASb,OAPAzC,KAAK85H,GAAK9qH,EACVhP,KAAK+5H,GAAK9qH,EACVjP,KAAKg6H,GAAK9qH,EACVlP,KAAKi6H,GAAKx3H,EAEVzC,KAAKk6H,oBAEEl6H,IAER,GAAC,CAAAiG,IAAA,QAAApG,MAED,WAEC,OAAO,IAAIG,KAAK4zD,YAAa5zD,KAAK85H,GAAI95H,KAAK+5H,GAAI/5H,KAAKg6H,GAAIh6H,KAAKi6H,GAE9D,GAAC,CAAAh0H,IAAA,OAAApG,MAED,SAAMqW,GASL,OAPAlW,KAAK85H,GAAK5jH,EAAWlH,EACrBhP,KAAK+5H,GAAK7jH,EAAWjH,EACrBjP,KAAKg6H,GAAK9jH,EAAWhH,EACrBlP,KAAKi6H,GAAK/jH,EAAWzT,EAErBzC,KAAKk6H,oBAEEl6H,IAER,GAAC,CAAAiG,IAAA,eAAApG,MAED,SAAcs6H,EAAO9nF,GAEpB,IAAMrjC,EAAImrH,EAAML,GAAI7qH,EAAIkrH,EAAMJ,GAAI7qH,EAAIirH,EAAMH,GAAI9+G,EAAQi/G,EAAMC,OAMxDhhH,EAAMhF,KAAKgF,IACXD,EAAM/E,KAAK+E,IAEXyC,EAAKxC,EAAKpK,EAAI,GACd6M,EAAKzC,EAAKnK,EAAI,GACd6M,EAAK1C,EAAKlK,EAAI,GAEd6M,EAAK5C,EAAKnK,EAAI,GACdgN,EAAK7C,EAAKlK,EAAI,GACdgN,EAAK9C,EAAKjK,EAAI,GAEpB,OAASgM,GAER,IAAK,MACJlb,KAAK85H,GAAK/9G,EAAKF,EAAKC,EAAKF,EAAKI,EAAKC,EACnCjc,KAAK+5H,GAAKn+G,EAAKI,EAAKF,EAAKC,EAAKF,EAAKI,EACnCjc,KAAKg6H,GAAKp+G,EAAKC,EAAKI,EAAKF,EAAKC,EAAKF,EACnC9b,KAAKi6H,GAAKr+G,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EACnC,MAED,IAAK,MACJjc,KAAK85H,GAAK/9G,EAAKF,EAAKC,EAAKF,EAAKI,EAAKC,EACnCjc,KAAK+5H,GAAKn+G,EAAKI,EAAKF,EAAKC,EAAKF,EAAKI,EACnCjc,KAAKg6H,GAAKp+G,EAAKC,EAAKI,EAAKF,EAAKC,EAAKF,EACnC9b,KAAKi6H,GAAKr+G,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EACnC,MAED,IAAK,MACJjc,KAAK85H,GAAK/9G,EAAKF,EAAKC,EAAKF,EAAKI,EAAKC,EACnCjc,KAAK+5H,GAAKn+G,EAAKI,EAAKF,EAAKC,EAAKF,EAAKI,EACnCjc,KAAKg6H,GAAKp+G,EAAKC,EAAKI,EAAKF,EAAKC,EAAKF,EACnC9b,KAAKi6H,GAAKr+G,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EACnC,MAED,IAAK,MACJjc,KAAK85H,GAAK/9G,EAAKF,EAAKC,EAAKF,EAAKI,EAAKC,EACnCjc,KAAK+5H,GAAKn+G,EAAKI,EAAKF,EAAKC,EAAKF,EAAKI,EACnCjc,KAAKg6H,GAAKp+G,EAAKC,EAAKI,EAAKF,EAAKC,EAAKF,EACnC9b,KAAKi6H,GAAKr+G,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EACnC,MAED,IAAK,MACJjc,KAAK85H,GAAK/9G,EAAKF,EAAKC,EAAKF,EAAKI,EAAKC,EACnCjc,KAAK+5H,GAAKn+G,EAAKI,EAAKF,EAAKC,EAAKF,EAAKI,EACnCjc,KAAKg6H,GAAKp+G,EAAKC,EAAKI,EAAKF,EAAKC,EAAKF,EACnC9b,KAAKi6H,GAAKr+G,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EACnC,MAED,IAAK,MACJjc,KAAK85H,GAAK/9G,EAAKF,EAAKC,EAAKF,EAAKI,EAAKC,EACnCjc,KAAK+5H,GAAKn+G,EAAKI,EAAKF,EAAKC,EAAKF,EAAKI,EACnCjc,KAAKg6H,GAAKp+G,EAAKC,EAAKI,EAAKF,EAAKC,EAAKF,EACnC9b,KAAKi6H,GAAKr+G,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EACnC,MAED,QACCpZ,QAAQC,KAAM,mEAAqEoY,GAMrF,OAFgB,IAAXm3B,GAAmBryC,KAAKk6H,oBAEtBl6H,IAER,GAAC,CAAAiG,IAAA,mBAAApG,MAED,SAAkB+iB,EAAM1J,GAMvB,IAAMmhH,EAAYnhH,EAAQ,EAAGnM,EAAIqH,KAAK+E,IAAKkhH,GAS3C,OAPAr6H,KAAK85H,GAAKl3G,EAAK5T,EAAIjC,EACnB/M,KAAK+5H,GAAKn3G,EAAK3T,EAAIlC,EACnB/M,KAAKg6H,GAAKp3G,EAAK1T,EAAInC,EACnB/M,KAAKi6H,GAAK7lH,KAAKgF,IAAKihH,GAEpBr6H,KAAKk6H,oBAEEl6H,IAER,GAAC,CAAAiG,IAAA,wBAAApG,MAED,SAAuBkC,GAMtB,IAAMgjF,EAAKhjF,EAAE0O,SAEZ6mH,EAAMvyC,EAAI,GAAKwyC,EAAMxyC,EAAI,GAAKyyC,EAAMzyC,EAAI,GACxC0yC,EAAM1yC,EAAI,GAAK2yC,EAAM3yC,EAAI,GAAK4yC,EAAM5yC,EAAI,GACxC6yC,EAAM7yC,EAAI,GAAK8yC,EAAM9yC,EAAI,GAAK+yC,EAAM/yC,EAAI,IAExCu1C,EAAQhD,EAAMI,EAAMI,EAErB,GAAKwC,EAAQ,EAAI,CAEhB,IAAMvtH,EAAI,GAAMqH,KAAKC,KAAMimH,EAAQ,GAEnCt6H,KAAKi6H,GAAK,IAAOltH,EACjB/M,KAAK85H,IAAOjC,EAAMF,GAAQ5qH,EAC1B/M,KAAK+5H,IAAOvC,EAAMI,GAAQ7qH,EAC1B/M,KAAKg6H,IAAOvC,EAAMF,GAAQxqH,CAE3B,MAAO,GAAKuqH,EAAMI,GAAOJ,EAAMQ,EAAM,CAEpC,IAAM/qH,EAAI,EAAMqH,KAAKC,KAAM,EAAMijH,EAAMI,EAAMI,GAE7C93H,KAAKi6H,IAAOpC,EAAMF,GAAQ5qH,EAC1B/M,KAAK85H,GAAK,IAAO/sH,EACjB/M,KAAK+5H,IAAOxC,EAAME,GAAQ1qH,EAC1B/M,KAAKg6H,IAAOxC,EAAMI,GAAQ7qH,CAE3B,MAAO,GAAK2qH,EAAMI,EAAM,CAEvB,IAAM/qH,EAAI,EAAMqH,KAAKC,KAAM,EAAMqjH,EAAMJ,EAAMQ,GAE7C93H,KAAKi6H,IAAOzC,EAAMI,GAAQ7qH,EAC1B/M,KAAK85H,IAAOvC,EAAME,GAAQ1qH,EAC1B/M,KAAK+5H,GAAK,IAAOhtH,EACjB/M,KAAKg6H,IAAOrC,EAAME,GAAQ9qH,CAE3B,KAAO,CAEN,IAAMA,EAAI,EAAMqH,KAAKC,KAAM,EAAMyjH,EAAMR,EAAMI,GAE7C13H,KAAKi6H,IAAOxC,EAAMF,GAAQxqH,EAC1B/M,KAAK85H,IAAOtC,EAAMI,GAAQ7qH,EAC1B/M,KAAK+5H,IAAOpC,EAAME,GAAQ9qH,EAC1B/M,KAAKg6H,GAAK,IAAOjtH,CAElB,CAIA,OAFA/M,KAAKk6H,oBAEEl6H,IAER,GAAC,CAAAiG,IAAA,qBAAApG,MAED,SAAoB06H,EAAOC,GAI1B,IAAIxnH,EAAIunH,EAAM/lH,IAAKgmH,GAAQ,EAmC3B,OAjCKxnH,EAAIrT,OAAO86H,SAIfznH,EAAI,EAECoB,KAAKgB,IAAKmlH,EAAMvrH,GAAMoF,KAAKgB,IAAKmlH,EAAMrrH,IAE1ClP,KAAK85H,IAAOS,EAAMtrH,EAClBjP,KAAK+5H,GAAKQ,EAAMvrH,EAChBhP,KAAKg6H,GAAK,EACVh6H,KAAKi6H,GAAKjnH,IAIVhT,KAAK85H,GAAK,EACV95H,KAAK+5H,IAAOQ,EAAMrrH,EAClBlP,KAAKg6H,GAAKO,EAAMtrH,EAChBjP,KAAKi6H,GAAKjnH,KAQXhT,KAAK85H,GAAKS,EAAMtrH,EAAIurH,EAAItrH,EAAIqrH,EAAMrrH,EAAIsrH,EAAIvrH,EAC1CjP,KAAK+5H,GAAKQ,EAAMrrH,EAAIsrH,EAAIxrH,EAAIurH,EAAMvrH,EAAIwrH,EAAItrH,EAC1ClP,KAAKg6H,GAAKO,EAAMvrH,EAAIwrH,EAAIvrH,EAAIsrH,EAAMtrH,EAAIurH,EAAIxrH,EAC1ChP,KAAKi6H,GAAKjnH,GAIJhT,KAAKsZ,WAEb,GAAC,CAAArT,IAAA,UAAApG,MAED,SAASqT,GAER,OAAO,EAAIkB,KAAKmF,KAAMnF,KAAKgB,IAAKs4G,GAAO1tH,KAAKwU,IAAKtB,IAAO,EAAG,IAE5D,GAAC,CAAAjN,IAAA,gBAAApG,MAED,SAAeqT,EAAGuyB,GAEjB,IAAMvsB,EAAQlZ,KAAK06H,QAASxnH,GAE5B,GAAe,IAAVgG,EAAc,OAAOlZ,KAE1B,IAAMmS,EAAIiC,KAAKsC,IAAK,EAAG+uB,EAAOvsB,GAI9B,OAFAlZ,KAAK26H,MAAOznH,EAAGf,GAERnS,IAER,GAAC,CAAAiG,IAAA,WAAApG,MAED,WAEC,OAAOG,KAAKyE,IAAK,EAAG,EAAG,EAAG,EAE3B,GAAC,CAAAwB,IAAA,SAAApG,MAED,WAIC,OAAOG,KAAKwa,WAEb,GAAC,CAAAvU,IAAA,YAAApG,MAED,WAQC,OANAG,KAAK85H,KAAQ,EACb95H,KAAK+5H,KAAQ,EACb/5H,KAAKg6H,KAAQ,EAEbh6H,KAAKk6H,oBAEEl6H,IAER,GAAC,CAAAiG,IAAA,MAAApG,MAED,SAAK+Q,GAEJ,OAAO5Q,KAAK85H,GAAKlpH,EAAEkpH,GAAK95H,KAAK+5H,GAAKnpH,EAAEmpH,GAAK/5H,KAAKg6H,GAAKppH,EAAEopH,GAAKh6H,KAAKi6H,GAAKrpH,EAAEqpH,EAEvE,GAAC,CAAAh0H,IAAA,WAAApG,MAED,WAEC,OAAOG,KAAK85H,GAAK95H,KAAK85H,GAAK95H,KAAK+5H,GAAK/5H,KAAK+5H,GAAK/5H,KAAKg6H,GAAKh6H,KAAKg6H,GAAKh6H,KAAKi6H,GAAKj6H,KAAKi6H,EAEnF,GAAC,CAAAh0H,IAAA,SAAApG,MAED,WAEC,OAAOuU,KAAKC,KAAMrU,KAAK85H,GAAK95H,KAAK85H,GAAK95H,KAAK+5H,GAAK/5H,KAAK+5H,GAAK/5H,KAAKg6H,GAAKh6H,KAAKg6H,GAAKh6H,KAAKi6H,GAAKj6H,KAAKi6H,GAE9F,GAAC,CAAAh0H,IAAA,YAAApG,MAED,WAEC,IAAIuW,EAAIpW,KAAKuC,SAsBb,OApBW,IAAN6T,GAEJpW,KAAK85H,GAAK,EACV95H,KAAK+5H,GAAK,EACV/5H,KAAKg6H,GAAK,EACVh6H,KAAKi6H,GAAK,IAIV7jH,EAAI,EAAIA,EAERpW,KAAK85H,GAAK95H,KAAK85H,GAAK1jH,EACpBpW,KAAK+5H,GAAK/5H,KAAK+5H,GAAK3jH,EACpBpW,KAAKg6H,GAAKh6H,KAAKg6H,GAAK5jH,EACpBpW,KAAKi6H,GAAKj6H,KAAKi6H,GAAK7jH,GAIrBpW,KAAKk6H,oBAEEl6H,IAER,GAAC,CAAAiG,IAAA,WAAApG,MAED,SAAUqT,GAET,OAAOlT,KAAK46H,oBAAqB56H,KAAMkT,EAExC,GAAC,CAAAjN,IAAA,cAAApG,MAED,SAAaqT,GAEZ,OAAOlT,KAAK46H,oBAAqB1nH,EAAGlT,KAErC,GAAC,CAAAiG,IAAA,sBAAApG,MAED,SAAqBsX,EAAG/E,GAIvB,IAAMyoH,EAAM1jH,EAAE2iH,GAAIgB,EAAM3jH,EAAE4iH,GAAIgB,EAAM5jH,EAAE6iH,GAAIgB,EAAM7jH,EAAE8iH,GAC5CgB,EAAM7oH,EAAE0nH,GAAIoB,EAAM9oH,EAAE2nH,GAAIoB,EAAM/oH,EAAE4nH,GAAIoB,EAAMhpH,EAAE6nH,GASlD,OAPAj6H,KAAK85H,GAAKe,EAAMO,EAAMJ,EAAMC,EAAMH,EAAMK,EAAMJ,EAAMG,EACpDl7H,KAAK+5H,GAAKe,EAAMM,EAAMJ,EAAME,EAAMH,EAAME,EAAMJ,EAAMM,EACpDn7H,KAAKg6H,GAAKe,EAAMK,EAAMJ,EAAMG,EAAMN,EAAMK,EAAMJ,EAAMG,EACpDj7H,KAAKi6H,GAAKe,EAAMI,EAAMP,EAAMI,EAAMH,EAAMI,EAAMH,EAAMI,EAEpDn7H,KAAKk6H,oBAEEl6H,IAER,GAAC,CAAAiG,IAAA,QAAApG,MAED,SAAOi1E,EAAI3iE,GAEV,GAAW,IAANA,EAAU,OAAOnS,KACtB,GAAW,IAANmS,EAAU,OAAOnS,KAAKiE,KAAM6wE,GAEjC,IAAM9lE,EAAIhP,KAAK85H,GAAI7qH,EAAIjP,KAAK+5H,GAAI7qH,EAAIlP,KAAKg6H,GAAIv3H,EAAIzC,KAAKi6H,GAIlDoB,EAAe54H,EAAIqyE,EAAGmlD,GAAKjrH,EAAI8lE,EAAGglD,GAAK7qH,EAAI6lE,EAAGilD,GAAK7qH,EAAI4lE,EAAGklD,GAiB9D,GAfKqB,EAAe,GAEnBr7H,KAAKi6H,IAAOnlD,EAAGmlD,GACfj6H,KAAK85H,IAAOhlD,EAAGglD,GACf95H,KAAK+5H,IAAOjlD,EAAGilD,GACf/5H,KAAKg6H,IAAOllD,EAAGklD,GAEfqB,GAAiBA,GAIjBr7H,KAAKiE,KAAM6wE,GAIPumD,GAAgB,EAOpB,OALAr7H,KAAKi6H,GAAKx3H,EACVzC,KAAK85H,GAAK9qH,EACVhP,KAAK+5H,GAAK9qH,EACVjP,KAAKg6H,GAAK9qH,EAEHlP,KAIR,IAAMs7H,EAAkB,EAAMD,EAAeA,EAE7C,GAAKC,GAAmB37H,OAAO86H,QAAU,CAExC,IAAM1tH,EAAI,EAAIoF,EASd,OARAnS,KAAKi6H,GAAKltH,EAAItK,EAAI0P,EAAInS,KAAKi6H,GAC3Bj6H,KAAK85H,GAAK/sH,EAAIiC,EAAImD,EAAInS,KAAK85H,GAC3B95H,KAAK+5H,GAAKhtH,EAAIkC,EAAIkD,EAAInS,KAAK+5H,GAC3B/5H,KAAKg6H,GAAKjtH,EAAImC,EAAIiD,EAAInS,KAAKg6H,GAE3Bh6H,KAAKsZ,YACLtZ,KAAKk6H,oBAEEl6H,IAER,CAEA,IAAMu7H,EAAennH,KAAKC,KAAMinH,GAC1BE,EAAYpnH,KAAKmH,MAAOggH,EAAcF,GACtCI,EAASrnH,KAAK+E,KAAO,EAAIhH,GAAMqpH,GAAcD,EAClDG,EAAStnH,KAAK+E,IAAKhH,EAAIqpH,GAAcD,EAStC,OAPAv7H,KAAKi6H,GAAOx3H,EAAIg5H,EAASz7H,KAAKi6H,GAAKyB,EACnC17H,KAAK85H,GAAO9qH,EAAIysH,EAASz7H,KAAK85H,GAAK4B,EACnC17H,KAAK+5H,GAAO9qH,EAAIwsH,EAASz7H,KAAK+5H,GAAK2B,EACnC17H,KAAKg6H,GAAO9qH,EAAIusH,EAASz7H,KAAKg6H,GAAK0B,EAEnC17H,KAAKk6H,oBAEEl6H,IAER,GAAC,CAAAiG,IAAA,mBAAApG,MAED,SAAkB8wE,EAAImE,EAAI3iE,GAEzB,OAAOnS,KAAKiE,KAAM0sE,GAAKgqD,MAAO7lD,EAAI3iE,EAEnC,GAAC,CAAAlM,IAAA,SAAApG,MAED,WAMC,IAAMgX,EAAKzC,KAAKo5G,SACVmO,EAAUvnH,KAAKC,KAAM,EAAIwC,GACzB+kH,EAASxnH,KAAKC,KAAMwC,GAEpBE,EAAK,EAAI3C,KAAKyF,GAAKzF,KAAKo5G,SAExBqO,EAAK,EAAIznH,KAAKyF,GAAKzF,KAAKo5G,SAE9B,OAAOxtH,KAAKyE,IACXk3H,EAAUvnH,KAAKgF,IAAKrC,GACpB6kH,EAASxnH,KAAK+E,IAAK0iH,GACnBD,EAASxnH,KAAKgF,IAAKyiH,GACnBF,EAAUvnH,KAAK+E,IAAKpC,GAGtB,GAAC,CAAA9Q,IAAA,SAAApG,MAED,SAAQqW,GAEP,OAASA,EAAW4jH,KAAO95H,KAAK85H,IAAU5jH,EAAW6jH,KAAO/5H,KAAK+5H,IAAU7jH,EAAW8jH,KAAOh6H,KAAKg6H,IAAU9jH,EAAW+jH,KAAOj6H,KAAKi6H,EAEpI,GAAC,CAAAh0H,IAAA,YAAApG,MAED,SAAWu/D,GAAoB,IAAbx4C,EAAMhmB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAS1B,OAPAZ,KAAK85H,GAAK16D,EAAOx4C,GACjB5mB,KAAK+5H,GAAK36D,EAAOx4C,EAAS,GAC1B5mB,KAAKg6H,GAAK56D,EAAOx4C,EAAS,GAC1B5mB,KAAKi6H,GAAK76D,EAAOx4C,EAAS,GAE1B5mB,KAAKk6H,oBAEEl6H,IAER,GAAC,CAAAiG,IAAA,UAAApG,MAED,WAAkC,IAAzBu/D,EAAKx+D,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAIgmB,EAAMhmB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAO7B,OALAw+D,EAAOx4C,GAAW5mB,KAAK85H,GACvB16D,EAAOx4C,EAAS,GAAM5mB,KAAK+5H,GAC3B36D,EAAOx4C,EAAS,GAAM5mB,KAAKg6H,GAC3B56D,EAAOx4C,EAAS,GAAM5mB,KAAKi6H,GAEpB76D,CAER,GAAC,CAAAn5D,IAAA,sBAAApG,MAED,SAAqBorG,EAAWrlG,GAO/B,OALA5F,KAAK85H,GAAK7uB,EAAUxP,KAAM71F,GAC1B5F,KAAK+5H,GAAK9uB,EAAUilB,KAAMtqH,GAC1B5F,KAAKg6H,GAAK/uB,EAAU4pB,KAAMjvH,GAC1B5F,KAAKi6H,GAAKhvB,EAAU8sB,KAAMnyH,GAEnB5F,IAER,GAAC,CAAAiG,IAAA,YAAApG,MAED,SAAWmpB,GAIV,OAFAhpB,KAAKk6H,kBAAoBlxG,EAElBhpB,IAER,GAAC,CAAAiG,IAAA,oBAAApG,MAED,WAAqB,GAAC,CAAAoG,IAAA2zH,EAAA/5H,OAAAswH,EAAAA,EAAAA,KAAAC,MAEtB,SAAAvwH,IAAA,OAAAswH,EAAAA,EAAAA,KAAAE,MAAA,SAAAyL,GAAA,cAAAA,EAAA7zD,KAAA6zD,EAAA1uE,MAAA,OAEC,OAFD0uE,EAAA1uE,KAAA,EAEOptD,KAAK85H,GAAE,OACb,OADagC,EAAA1uE,KAAA,EACPptD,KAAK+5H,GAAE,OACb,OADa+B,EAAA1uE,KAAA,EACPptD,KAAKg6H,GAAE,OACb,OADa8B,EAAA1uE,KAAA,EACPptD,KAAKi6H,GAAE,wBAAA6B,EAAAtgE,OAAA,GAAA37D,EAAA,WAEb,EAAAoG,IAAA,YAAApG,MAlpBD,SAAkBk8H,EAAKC,EAAWC,EAAMC,EAAYC,EAAMC,EAAYjqH,GAIrE,IAAIkqH,EAAKJ,EAAMC,EAAa,GAC3BI,EAAKL,EAAMC,EAAa,GACxBK,EAAKN,EAAMC,EAAa,GACxBM,EAAKP,EAAMC,EAAa,GAEnBO,EAAKN,EAAMC,EAAa,GAC7BM,EAAKP,EAAMC,EAAa,GACxBO,EAAKR,EAAMC,EAAa,GACxBQ,EAAKT,EAAMC,EAAa,GAEzB,GAAW,IAANjqH,EAMJ,OAJA4pH,EAAKC,EAAY,GAAMK,EACvBN,EAAKC,EAAY,GAAMM,EACvBP,EAAKC,EAAY,GAAMO,OACvBR,EAAKC,EAAY,GAAMQ,GAKxB,GAAW,IAANrqH,EAMJ,OAJA4pH,EAAKC,EAAY,GAAMS,EACvBV,EAAKC,EAAY,GAAMU,EACvBX,EAAKC,EAAY,GAAMW,OACvBZ,EAAKC,EAAY,GAAMY,GAKxB,GAAKJ,IAAOI,GAAMP,IAAOI,GAAMH,IAAOI,GAAMH,IAAOI,EAAK,CAEvD,IAAI5vH,EAAI,EAAIoF,EACNiH,EAAMijH,EAAKI,EAAKH,EAAKI,EAAKH,EAAKI,EAAKH,EAAKI,EAC9CC,EAAQzjH,GAAO,EAAI,GAAM,EACzB0jH,EAAS,EAAI1jH,EAAMA,EAGpB,GAAK0jH,EAASn9H,OAAO86H,QAAU,CAE9B,IAAMthH,EAAM/E,KAAKC,KAAMyoH,GACtB33H,EAAMiP,KAAKmH,MAAOpC,EAAKC,EAAMyjH,GAE9B9vH,EAAIqH,KAAK+E,IAAKpM,EAAI5H,GAAQgU,EAC1BhH,EAAIiC,KAAK+E,IAAKhH,EAAIhN,GAAQgU,CAE3B,CAEA,IAAM4jH,EAAO5qH,EAAI0qH,EAQjB,GANAR,EAAKA,EAAKtvH,EAAI0vH,EAAKM,EACnBT,EAAKA,EAAKvvH,EAAI2vH,EAAKK,EACnBR,EAAKA,EAAKxvH,EAAI4vH,EAAKI,EACnBP,EAAKA,EAAKzvH,EAAI6vH,EAAKG,EAGdhwH,IAAM,EAAIoF,EAAI,CAElB,IAAMjF,EAAI,EAAIkH,KAAKC,KAAMgoH,EAAKA,EAAKC,EAAKA,EAAKC,EAAKA,EAAKC,EAAKA,GAE5DH,GAAMnvH,EACNovH,GAAMpvH,EACNqvH,GAAMrvH,EACNsvH,GAAMtvH,CAEP,CAED,CAEA6uH,EAAKC,GAAcK,EACnBN,EAAKC,EAAY,GAAMM,EACvBP,EAAKC,EAAY,GAAMO,EACvBR,EAAKC,EAAY,GAAMQ,CAExB,GAAC,CAAAv2H,IAAA,0BAAApG,MAED,SAAgCk8H,EAAKC,EAAWC,EAAMC,EAAYC,EAAMC,GAEvE,IAAMC,EAAKJ,EAAMC,GACXI,EAAKL,EAAMC,EAAa,GACxBK,EAAKN,EAAMC,EAAa,GACxBM,EAAKP,EAAMC,EAAa,GAExBO,EAAKN,EAAMC,GACXM,EAAKP,EAAMC,EAAa,GACxBO,EAAKR,EAAMC,EAAa,GACxBQ,EAAKT,EAAMC,EAAa,GAO9B,OALAL,EAAKC,GAAcK,EAAKO,EAAKJ,EAAKC,EAAKH,EAAKK,EAAKJ,EAAKG,EACtDX,EAAKC,EAAY,GAAMM,EAAKM,EAAKJ,EAAKE,EAAKH,EAAKE,EAAKJ,EAAKM,EAC1DZ,EAAKC,EAAY,GAAMO,EAAKK,EAAKJ,EAAKG,EAAKN,EAAKK,EAAKJ,EAAKG,EAC1DV,EAAKC,EAAY,GAAMQ,EAAKI,EAAKP,EAAKI,EAAKH,EAAKI,EAAKH,EAAKI,EAEnDZ,CAER,KAAC1iG,CAAA,CAhHc,CAwpBZ4zB,OAAOC,UAWL5wB,GAAO,SAAA0gG,GAEZ,SAAA1gG,IAAmC,IAAtBttB,EAACpO,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGqO,EAACrO,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGsO,EAACtO,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAC8H,EAAAA,EAAAA,GAAA,KAAA4zB,GAE/BA,EAAQn9B,UAAU89H,WAAY,EAE9Bj9H,KAAKgP,EAAIA,EACThP,KAAKiP,EAAIA,EACTjP,KAAKkP,EAAIA,CAEV,CAsrBC,OAtrBAvE,EAAAA,EAAAA,GAAA2xB,EAAA,EAAAr2B,IAAA,MAAApG,MAED,SAAKmP,EAAGC,EAAGC,GAQV,YANW/N,IAAN+N,IAAkBA,EAAIlP,KAAKkP,GAEhClP,KAAKgP,EAAIA,EACThP,KAAKiP,EAAIA,EACTjP,KAAKkP,EAAIA,EAEFlP,IAER,GAAC,CAAAiG,IAAA,YAAApG,MAED,SAAW+U,GAMV,OAJA5U,KAAKgP,EAAI4F,EACT5U,KAAKiP,EAAI2F,EACT5U,KAAKkP,EAAI0F,EAEF5U,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAMmP,GAIL,OAFAhP,KAAKgP,EAAIA,EAEFhP,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAMoP,GAIL,OAFAjP,KAAKiP,EAAIA,EAEFjP,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAMqP,GAIL,OAFAlP,KAAKkP,EAAIA,EAEFlP,IAER,GAAC,CAAAiG,IAAA,eAAApG,MAED,SAAc+F,EAAO/F,GAEpB,OAAS+F,GAER,KAAK,EAAG5F,KAAKgP,EAAInP,EAAO,MACxB,KAAK,EAAGG,KAAKiP,EAAIpP,EAAO,MACxB,KAAK,EAAGG,KAAKkP,EAAIrP,EAAO,MACxB,QAAS,MAAM,IAAI6C,MAAO,0BAA4BkD,GAIvD,OAAO5F,IAER,GAAC,CAAAiG,IAAA,eAAApG,MAED,SAAc+F,GAEb,OAASA,GAER,KAAK,EAAG,OAAO5F,KAAKgP,EACpB,KAAK,EAAG,OAAOhP,KAAKiP,EACpB,KAAK,EAAG,OAAOjP,KAAKkP,EACpB,QAAS,MAAM,IAAIxM,MAAO,0BAA4BkD,GAIxD,GAAC,CAAAK,IAAA,QAAApG,MAED,WAEC,OAAO,IAAIG,KAAK4zD,YAAa5zD,KAAKgP,EAAGhP,KAAKiP,EAAGjP,KAAKkP,EAEnD,GAAC,CAAAjJ,IAAA,OAAApG,MAED,SAAM+Q,GAML,OAJA5Q,KAAKgP,EAAI4B,EAAE5B,EACXhP,KAAKiP,EAAI2B,EAAE3B,EACXjP,KAAKkP,EAAI0B,EAAE1B,EAEJlP,IAER,GAAC,CAAAiG,IAAA,MAAApG,MAED,SAAK+Q,GAMJ,OAJA5Q,KAAKgP,GAAK4B,EAAE5B,EACZhP,KAAKiP,GAAK2B,EAAE3B,EACZjP,KAAKkP,GAAK0B,EAAE1B,EAELlP,IAER,GAAC,CAAAiG,IAAA,YAAApG,MAED,SAAWkN,GAMV,OAJA/M,KAAKgP,GAAKjC,EACV/M,KAAKiP,GAAKlC,EACV/M,KAAKkP,GAAKnC,EAEH/M,IAER,GAAC,CAAAiG,IAAA,aAAApG,MAED,SAAYsX,EAAG/E,GAMd,OAJApS,KAAKgP,EAAImI,EAAEnI,EAAIoD,EAAEpD,EACjBhP,KAAKiP,EAAIkI,EAAElI,EAAImD,EAAEnD,EACjBjP,KAAKkP,EAAIiI,EAAEjI,EAAIkD,EAAElD,EAEVlP,IAER,GAAC,CAAAiG,IAAA,kBAAApG,MAED,SAAiB+Q,EAAG7D,GAMnB,OAJA/M,KAAKgP,GAAK4B,EAAE5B,EAAIjC,EAChB/M,KAAKiP,GAAK2B,EAAE3B,EAAIlC,EAChB/M,KAAKkP,GAAK0B,EAAE1B,EAAInC,EAET/M,IAER,GAAC,CAAAiG,IAAA,MAAApG,MAED,SAAK+Q,GAMJ,OAJA5Q,KAAKgP,GAAK4B,EAAE5B,EACZhP,KAAKiP,GAAK2B,EAAE3B,EACZjP,KAAKkP,GAAK0B,EAAE1B,EAELlP,IAER,GAAC,CAAAiG,IAAA,YAAApG,MAED,SAAWkN,GAMV,OAJA/M,KAAKgP,GAAKjC,EACV/M,KAAKiP,GAAKlC,EACV/M,KAAKkP,GAAKnC,EAEH/M,IAER,GAAC,CAAAiG,IAAA,aAAApG,MAED,SAAYsX,EAAG/E,GAMd,OAJApS,KAAKgP,EAAImI,EAAEnI,EAAIoD,EAAEpD,EACjBhP,KAAKiP,EAAIkI,EAAElI,EAAImD,EAAEnD,EACjBjP,KAAKkP,EAAIiI,EAAEjI,EAAIkD,EAAElD,EAEVlP,IAER,GAAC,CAAAiG,IAAA,WAAApG,MAED,SAAU+Q,GAMT,OAJA5Q,KAAKgP,GAAK4B,EAAE5B,EACZhP,KAAKiP,GAAK2B,EAAE3B,EACZjP,KAAKkP,GAAK0B,EAAE1B,EAELlP,IAER,GAAC,CAAAiG,IAAA,iBAAApG,MAED,SAAgB+U,GAMf,OAJA5U,KAAKgP,GAAK4F,EACV5U,KAAKiP,GAAK2F,EACV5U,KAAKkP,GAAK0F,EAEH5U,IAER,GAAC,CAAAiG,IAAA,kBAAApG,MAED,SAAiBsX,EAAG/E,GAMnB,OAJApS,KAAKgP,EAAImI,EAAEnI,EAAIoD,EAAEpD,EACjBhP,KAAKiP,EAAIkI,EAAElI,EAAImD,EAAEnD,EACjBjP,KAAKkP,EAAIiI,EAAEjI,EAAIkD,EAAElD,EAEVlP,IAER,GAAC,CAAAiG,IAAA,aAAApG,MAED,SAAYs6H,GAEX,OAAOn6H,KAAKghD,gBAAiBk8E,GAAcC,aAAchD,GAE1D,GAAC,CAAAl0H,IAAA,iBAAApG,MAED,SAAgB+iB,EAAM1J,GAErB,OAAOlZ,KAAKghD,gBAAiBk8E,GAActjH,iBAAkBgJ,EAAM1J,GAEpE,GAAC,CAAAjT,IAAA,eAAApG,MAED,SAAckC,GAEb,IAAMiN,EAAIhP,KAAKgP,EAAGC,EAAIjP,KAAKiP,EAAGC,EAAIlP,KAAKkP,EACjCjC,EAAIlL,EAAE0O,SAMZ,OAJAzQ,KAAKgP,EAAI/B,EAAG,GAAM+B,EAAI/B,EAAG,GAAMgC,EAAIhC,EAAG,GAAMiC,EAC5ClP,KAAKiP,EAAIhC,EAAG,GAAM+B,EAAI/B,EAAG,GAAMgC,EAAIhC,EAAG,GAAMiC,EAC5ClP,KAAKkP,EAAIjC,EAAG,GAAM+B,EAAI/B,EAAG,GAAMgC,EAAIhC,EAAG,GAAMiC,EAErClP,IAER,GAAC,CAAAiG,IAAA,oBAAApG,MAED,SAAmBkC,GAElB,OAAO/B,KAAKi3H,aAAcl1H,GAAIuX,WAE/B,GAAC,CAAArT,IAAA,eAAApG,MAED,SAAckC,GAEb,IAAMiN,EAAIhP,KAAKgP,EAAGC,EAAIjP,KAAKiP,EAAGC,EAAIlP,KAAKkP,EACjCjC,EAAIlL,EAAE0O,SAENhO,EAAI,GAAMwK,EAAG,GAAM+B,EAAI/B,EAAG,GAAMgC,EAAIhC,EAAG,IAAOiC,EAAIjC,EAAG,KAM3D,OAJAjN,KAAKgP,GAAM/B,EAAG,GAAM+B,EAAI/B,EAAG,GAAMgC,EAAIhC,EAAG,GAAMiC,EAAIjC,EAAG,KAASxK,EAC9DzC,KAAKiP,GAAMhC,EAAG,GAAM+B,EAAI/B,EAAG,GAAMgC,EAAIhC,EAAG,GAAMiC,EAAIjC,EAAG,KAASxK,EAC9DzC,KAAKkP,GAAMjC,EAAG,GAAM+B,EAAI/B,EAAG,GAAMgC,EAAIhC,EAAG,IAAOiC,EAAIjC,EAAG,KAASxK,EAExDzC,IAER,GAAC,CAAAiG,IAAA,kBAAApG,MAED,SAAiBqT,GAEhB,IAAMlE,EAAIhP,KAAKgP,EAAGC,EAAIjP,KAAKiP,EAAGC,EAAIlP,KAAKkP,EACjCwL,EAAKxH,EAAElE,EAAG2L,EAAKzH,EAAEjE,EAAG2L,EAAK1H,EAAEhE,EAAG2L,EAAK3H,EAAEzQ,EAIrCqY,EAAKD,EAAK7L,EAAI2L,EAAKzL,EAAI0L,EAAK3L,EAC5B8L,EAAKF,EAAK5L,EAAI2L,EAAK5L,EAAI0L,EAAKxL,EAC5B8L,EAAKH,EAAK3L,EAAIwL,EAAKzL,EAAI0L,EAAK3L,EAC5BiM,GAAOP,EAAK1L,EAAI2L,EAAK1L,EAAI2L,EAAK1L,EAQpC,OAJAlP,KAAKgP,EAAI8L,EAAKD,EAAKI,GAAOP,EAAKK,GAAOH,EAAKI,GAAOL,EAClD3a,KAAKiP,EAAI8L,EAAKF,EAAKI,GAAON,EAAKK,GAAON,EAAKI,GAAOF,EAClD5a,KAAKkP,EAAI8L,EAAKH,EAAKI,GAAOL,EAAKE,GAAOH,EAAKI,GAAOL,EAE3C1a,IAER,GAAC,CAAAiG,IAAA,UAAApG,MAED,SAASkyC,GAER,OAAO/xC,KAAKk7C,aAAcnJ,EAAO4J,oBAAqBT,aAAcnJ,EAAO0J,iBAE5E,GAAC,CAAAx1C,IAAA,YAAApG,MAED,SAAWkyC,GAEV,OAAO/xC,KAAKk7C,aAAcnJ,EAAOqrF,yBAA0BliF,aAAcnJ,EAAOiJ,YAEjF,GAAC,CAAA/0C,IAAA,qBAAApG,MAED,SAAoBkC,GAKnB,IAAMiN,EAAIhP,KAAKgP,EAAGC,EAAIjP,KAAKiP,EAAGC,EAAIlP,KAAKkP,EACjCjC,EAAIlL,EAAE0O,SAMZ,OAJAzQ,KAAKgP,EAAI/B,EAAG,GAAM+B,EAAI/B,EAAG,GAAMgC,EAAIhC,EAAG,GAAMiC,EAC5ClP,KAAKiP,EAAIhC,EAAG,GAAM+B,EAAI/B,EAAG,GAAMgC,EAAIhC,EAAG,GAAMiC,EAC5ClP,KAAKkP,EAAIjC,EAAG,GAAM+B,EAAI/B,EAAG,GAAMgC,EAAIhC,EAAG,IAAOiC,EAEtClP,KAAKsZ,WAEb,GAAC,CAAArT,IAAA,SAAApG,MAED,SAAQ+Q,GAMP,OAJA5Q,KAAKgP,GAAK4B,EAAE5B,EACZhP,KAAKiP,GAAK2B,EAAE3B,EACZjP,KAAKkP,GAAK0B,EAAE1B,EAELlP,IAER,GAAC,CAAAiG,IAAA,eAAApG,MAED,SAAc+U,GAEb,OAAO5U,KAAKs0C,eAAgB,EAAI1/B,EAEjC,GAAC,CAAA3O,IAAA,MAAApG,MAED,SAAK+Q,GAMJ,OAJA5Q,KAAKgP,EAAIoF,KAAKsC,IAAK1W,KAAKgP,EAAG4B,EAAE5B,GAC7BhP,KAAKiP,EAAImF,KAAKsC,IAAK1W,KAAKiP,EAAG2B,EAAE3B,GAC7BjP,KAAKkP,EAAIkF,KAAKsC,IAAK1W,KAAKkP,EAAG0B,EAAE1B,GAEtBlP,IAER,GAAC,CAAAiG,IAAA,MAAApG,MAED,SAAK+Q,GAMJ,OAJA5Q,KAAKgP,EAAIoF,KAAKuC,IAAK3W,KAAKgP,EAAG4B,EAAE5B,GAC7BhP,KAAKiP,EAAImF,KAAKuC,IAAK3W,KAAKiP,EAAG2B,EAAE3B,GAC7BjP,KAAKkP,EAAIkF,KAAKuC,IAAK3W,KAAKkP,EAAG0B,EAAE1B,GAEtBlP,IAER,GAAC,CAAAiG,IAAA,QAAApG,MAED,SAAO6W,EAAKC,GAQX,OAJA3W,KAAKgP,EAAIoF,KAAKuC,IAAKD,EAAI1H,EAAGoF,KAAKsC,IAAKC,EAAI3H,EAAGhP,KAAKgP,IAChDhP,KAAKiP,EAAImF,KAAKuC,IAAKD,EAAIzH,EAAGmF,KAAKsC,IAAKC,EAAI1H,EAAGjP,KAAKiP,IAChDjP,KAAKkP,EAAIkF,KAAKuC,IAAKD,EAAIxH,EAAGkF,KAAKsC,IAAKC,EAAIzH,EAAGlP,KAAKkP,IAEzClP,IAER,GAAC,CAAAiG,IAAA,cAAApG,MAED,SAAakwH,EAAQC,GAMpB,OAJAhwH,KAAKgP,EAAIoF,KAAKuC,IAAKo5G,EAAQ37G,KAAKsC,IAAKs5G,EAAQhwH,KAAKgP,IAClDhP,KAAKiP,EAAImF,KAAKuC,IAAKo5G,EAAQ37G,KAAKsC,IAAKs5G,EAAQhwH,KAAKiP,IAClDjP,KAAKkP,EAAIkF,KAAKuC,IAAKo5G,EAAQ37G,KAAKsC,IAAKs5G,EAAQhwH,KAAKkP,IAE3ClP,IAER,GAAC,CAAAiG,IAAA,cAAApG,MAED,SAAa6W,EAAKC,GAEjB,IAAMpU,EAASvC,KAAKuC,SAEpB,OAAOvC,KAAKiwH,aAAc1tH,GAAU,GAAI+xC,eAAgBlgC,KAAKuC,IAAKD,EAAKtC,KAAKsC,IAAKC,EAAKpU,IAEvF,GAAC,CAAA0D,IAAA,QAAApG,MAED,WAMC,OAJAG,KAAKgP,EAAIoF,KAAKi5B,MAAOrtC,KAAKgP,GAC1BhP,KAAKiP,EAAImF,KAAKi5B,MAAOrtC,KAAKiP,GAC1BjP,KAAKkP,EAAIkF,KAAKi5B,MAAOrtC,KAAKkP,GAEnBlP,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,WAMC,OAJAG,KAAKgP,EAAIoF,KAAKq9E,KAAMzxF,KAAKgP,GACzBhP,KAAKiP,EAAImF,KAAKq9E,KAAMzxF,KAAKiP,GACzBjP,KAAKkP,EAAIkF,KAAKq9E,KAAMzxF,KAAKkP,GAElBlP,IAER,GAAC,CAAAiG,IAAA,QAAApG,MAED,WAMC,OAJAG,KAAKgP,EAAIoF,KAAK8jD,MAAOl4D,KAAKgP,GAC1BhP,KAAKiP,EAAImF,KAAK8jD,MAAOl4D,KAAKiP,GAC1BjP,KAAKkP,EAAIkF,KAAK8jD,MAAOl4D,KAAKkP,GAEnBlP,IAER,GAAC,CAAAiG,IAAA,cAAApG,MAED,WAMC,OAJAG,KAAKgP,EAAMhP,KAAKgP,EAAI,EAAMoF,KAAKq9E,KAAMzxF,KAAKgP,GAAMoF,KAAKi5B,MAAOrtC,KAAKgP,GACjEhP,KAAKiP,EAAMjP,KAAKiP,EAAI,EAAMmF,KAAKq9E,KAAMzxF,KAAKiP,GAAMmF,KAAKi5B,MAAOrtC,KAAKiP,GACjEjP,KAAKkP,EAAMlP,KAAKkP,EAAI,EAAMkF,KAAKq9E,KAAMzxF,KAAKkP,GAAMkF,KAAKi5B,MAAOrtC,KAAKkP,GAE1DlP,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,WAMC,OAJAG,KAAKgP,GAAMhP,KAAKgP,EAChBhP,KAAKiP,GAAMjP,KAAKiP,EAChBjP,KAAKkP,GAAMlP,KAAKkP,EAETlP,IAER,GAAC,CAAAiG,IAAA,MAAApG,MAED,SAAK+Q,GAEJ,OAAO5Q,KAAKgP,EAAI4B,EAAE5B,EAAIhP,KAAKiP,EAAI2B,EAAE3B,EAAIjP,KAAKkP,EAAI0B,EAAE1B,CAEjD,GAEA,CAAAjJ,IAAA,WAAApG,MAEA,WAEC,OAAOG,KAAKgP,EAAIhP,KAAKgP,EAAIhP,KAAKiP,EAAIjP,KAAKiP,EAAIjP,KAAKkP,EAAIlP,KAAKkP,CAE1D,GAAC,CAAAjJ,IAAA,SAAApG,MAED,WAEC,OAAOuU,KAAKC,KAAMrU,KAAKgP,EAAIhP,KAAKgP,EAAIhP,KAAKiP,EAAIjP,KAAKiP,EAAIjP,KAAKkP,EAAIlP,KAAKkP,EAErE,GAAC,CAAAjJ,IAAA,kBAAApG,MAED,WAEC,OAAOuU,KAAKgB,IAAKpV,KAAKgP,GAAMoF,KAAKgB,IAAKpV,KAAKiP,GAAMmF,KAAKgB,IAAKpV,KAAKkP,EAEjE,GAAC,CAAAjJ,IAAA,YAAApG,MAED,WAEC,OAAOG,KAAKiwH,aAAcjwH,KAAKuC,UAAY,EAE5C,GAAC,CAAA0D,IAAA,YAAApG,MAED,SAAW0C,GAEV,OAAOvC,KAAKsZ,YAAYg7B,eAAgB/xC,EAEzC,GAAC,CAAA0D,IAAA,OAAApG,MAED,SAAM+Q,EAAG4zD,GAMR,OAJAxkE,KAAKgP,IAAO4B,EAAE5B,EAAIhP,KAAKgP,GAAMw1D,EAC7BxkE,KAAKiP,IAAO2B,EAAE3B,EAAIjP,KAAKiP,GAAMu1D,EAC7BxkE,KAAKkP,IAAO0B,EAAE1B,EAAIlP,KAAKkP,GAAMs1D,EAEtBxkE,IAER,GAAC,CAAAiG,IAAA,cAAApG,MAED,SAAag8B,EAAIC,EAAI0oC,GAMpB,OAJAxkE,KAAKgP,EAAI6sB,EAAG7sB,GAAM8sB,EAAG9sB,EAAI6sB,EAAG7sB,GAAMw1D,EAClCxkE,KAAKiP,EAAI4sB,EAAG5sB,GAAM6sB,EAAG7sB,EAAI4sB,EAAG5sB,GAAMu1D,EAClCxkE,KAAKkP,EAAI2sB,EAAG3sB,GAAM4sB,EAAG5sB,EAAI2sB,EAAG3sB,GAAMs1D,EAE3BxkE,IAER,GAAC,CAAAiG,IAAA,QAAApG,MAED,SAAO+Q,GAEN,OAAO5Q,KAAKglD,aAAchlD,KAAM4Q,EAEjC,GAAC,CAAA3K,IAAA,eAAApG,MAED,SAAcsX,EAAG/E,GAEhB,IAAM4H,EAAK7C,EAAEnI,EAAGiL,EAAK9C,EAAElI,EAAGiL,EAAK/C,EAAEjI,EAC3BkL,EAAKhI,EAAEpD,EAAGqL,EAAKjI,EAAEnD,EAAGqL,EAAKlI,EAAElD,EAMjC,OAJAlP,KAAKgP,EAAIiL,EAAKK,EAAKJ,EAAKG,EACxBra,KAAKiP,EAAIiL,EAAKE,EAAKJ,EAAKM,EACxBta,KAAKkP,EAAI8K,EAAKK,EAAKJ,EAAKG,EAEjBpa,IAER,GAAC,CAAAiG,IAAA,kBAAApG,MAED,SAAiB+Q,GAEhB,IAAMysH,EAAczsH,EAAE0sH,WAEtB,GAAqB,IAAhBD,EAAoB,OAAOr9H,KAAKyE,IAAK,EAAG,EAAG,GAEhD,IAAMmQ,EAAShE,EAAE4D,IAAKxU,MAASq9H,EAE/B,OAAOr9H,KAAKiE,KAAM2M,GAAI0jC,eAAgB1/B,EAEvC,GAAC,CAAA3O,IAAA,iBAAApG,MAED,SAAgBslB,GAIf,OAFAo4G,GAAUt5H,KAAMjE,MAAOw9H,gBAAiBr4G,GAEjCnlB,KAAK+gD,IAAKw8E,GAElB,GAAC,CAAAt3H,IAAA,UAAApG,MAED,SAASmlB,GAKR,OAAOhlB,KAAK+gD,IAAKw8E,GAAUt5H,KAAM+gB,GAASsvB,eAAgB,EAAIt0C,KAAKwU,IAAKwQ,IAEzE,GAAC,CAAA/e,IAAA,UAAApG,MAED,SAAS+Q,GAER,IAAMysH,EAAcjpH,KAAKC,KAAMrU,KAAKs9H,WAAa1sH,EAAE0sH,YAEnD,GAAqB,IAAhBD,EAAoB,OAAOjpH,KAAKyF,GAAK,EAE1C,IAAMwlC,EAAQr/C,KAAKwU,IAAK5D,GAAMysH,EAI9B,OAAOjpH,KAAKmF,KAAMm0G,GAAOruE,GAAS,EAAG,GAEtC,GAAC,CAAAp5C,IAAA,aAAApG,MAED,SAAY+Q,GAEX,OAAOwD,KAAKC,KAAMrU,KAAKkiD,kBAAmBtxC,GAE3C,GAAC,CAAA3K,IAAA,oBAAApG,MAED,SAAmB+Q,GAElB,IAAMq2C,EAAKjnD,KAAKgP,EAAI4B,EAAE5B,EAAGk4C,EAAKlnD,KAAKiP,EAAI2B,EAAE3B,EAAGwuH,EAAKz9H,KAAKkP,EAAI0B,EAAE1B,EAE5D,OAAO+3C,EAAKA,EAAKC,EAAKA,EAAKu2E,EAAKA,CAEjC,GAAC,CAAAx3H,IAAA,sBAAApG,MAED,SAAqB+Q,GAEpB,OAAOwD,KAAKgB,IAAKpV,KAAKgP,EAAI4B,EAAE5B,GAAMoF,KAAKgB,IAAKpV,KAAKiP,EAAI2B,EAAE3B,GAAMmF,KAAKgB,IAAKpV,KAAKkP,EAAI0B,EAAE1B,EAEnF,GAAC,CAAAjJ,IAAA,mBAAApG,MAED,SAAkBkN,GAEjB,OAAO/M,KAAK09H,uBAAwB3wH,EAAEsgB,OAAQtgB,EAAEoyC,IAAKpyC,EAAEsyC,MAExD,GAAC,CAAAp5C,IAAA,yBAAApG,MAED,SAAwBwtB,EAAQ8xB,EAAKE,GAEpC,IAAMs+E,EAAevpH,KAAK+E,IAAKgmC,GAAQ9xB,EAMvC,OAJArtB,KAAKgP,EAAI2uH,EAAevpH,KAAK+E,IAAKkmC,GAClCr/C,KAAKiP,EAAImF,KAAKgF,IAAK+lC,GAAQ9xB,EAC3BrtB,KAAKkP,EAAIyuH,EAAevpH,KAAKgF,IAAKimC,GAE3Br/C,IAER,GAAC,CAAAiG,IAAA,qBAAApG,MAED,SAAoBuX,GAEnB,OAAOpX,KAAK49H,yBAA0BxmH,EAAEiW,OAAQjW,EAAEioC,MAAOjoC,EAAEnI,EAE5D,GAAC,CAAAhJ,IAAA,2BAAApG,MAED,SAA0BwtB,EAAQgyB,EAAOpwC,GAMxC,OAJAjP,KAAKgP,EAAIqe,EAASjZ,KAAK+E,IAAKkmC,GAC5Br/C,KAAKiP,EAAIA,EACTjP,KAAKkP,EAAIme,EAASjZ,KAAKgF,IAAKimC,GAErBr/C,IAER,GAAC,CAAAiG,IAAA,wBAAApG,MAED,SAAuBkC,GAEtB,IAAMkL,EAAIlL,EAAE0O,SAMZ,OAJAzQ,KAAKgP,EAAI/B,EAAG,IACZjN,KAAKiP,EAAIhC,EAAG,IACZjN,KAAKkP,EAAIjC,EAAG,IAELjN,IAER,GAAC,CAAAiG,IAAA,qBAAApG,MAED,SAAoBkC,GAEnB,IAAMymB,EAAKxoB,KAAK6kD,oBAAqB9iD,EAAG,GAAIQ,SACtCkmB,EAAKzoB,KAAK6kD,oBAAqB9iD,EAAG,GAAIQ,SACtCmmB,EAAK1oB,KAAK6kD,oBAAqB9iD,EAAG,GAAIQ,SAM5C,OAJAvC,KAAKgP,EAAIwZ,EACTxoB,KAAKiP,EAAIwZ,EACTzoB,KAAKkP,EAAIwZ,EAEF1oB,IAER,GAAC,CAAAiG,IAAA,sBAAApG,MAED,SAAqBkC,EAAG6D,GAEvB,OAAO5F,KAAKw9B,UAAWz7B,EAAE0O,SAAkB,EAAR7K,EAEpC,GAAC,CAAAK,IAAA,uBAAApG,MAED,SAAsBkC,EAAG6D,GAExB,OAAO5F,KAAKw9B,UAAWz7B,EAAE0O,SAAkB,EAAR7K,EAEpC,GAAC,CAAAK,IAAA,eAAApG,MAED,SAAcoN,GAMb,OAJAjN,KAAKgP,EAAI/B,EAAE6sH,GACX95H,KAAKiP,EAAIhC,EAAE8sH,GACX/5H,KAAKkP,EAAIjC,EAAE+sH,GAEJh6H,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQ+Q,GAEP,OAAWA,EAAE5B,IAAMhP,KAAKgP,GAAS4B,EAAE3B,IAAMjP,KAAKiP,GAAS2B,EAAE1B,IAAMlP,KAAKkP,CAErE,GAAC,CAAAjJ,IAAA,YAAApG,MAED,SAAWu/D,GAAoB,IAAbx4C,EAAMhmB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAM1B,OAJAZ,KAAKgP,EAAIowD,EAAOx4C,GAChB5mB,KAAKiP,EAAImwD,EAAOx4C,EAAS,GACzB5mB,KAAKkP,EAAIkwD,EAAOx4C,EAAS,GAElB5mB,IAER,GAAC,CAAAiG,IAAA,UAAApG,MAED,WAAkC,IAAzBu/D,EAAKx+D,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAIgmB,EAAMhmB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAM7B,OAJAw+D,EAAOx4C,GAAW5mB,KAAKgP,EACvBowD,EAAOx4C,EAAS,GAAM5mB,KAAKiP,EAC3BmwD,EAAOx4C,EAAS,GAAM5mB,KAAKkP,EAEpBkwD,CAER,GAAC,CAAAn5D,IAAA,sBAAApG,MAED,SAAqBorG,EAAWrlG,GAM/B,OAJA5F,KAAKgP,EAAIi8F,EAAUxP,KAAM71F,GACzB5F,KAAKiP,EAAIg8F,EAAUilB,KAAMtqH,GACzB5F,KAAKkP,EAAI+7F,EAAU4pB,KAAMjvH,GAElB5F,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,WAMC,OAJAG,KAAKgP,EAAIoF,KAAKo5G,SACdxtH,KAAKiP,EAAImF,KAAKo5G,SACdxtH,KAAKkP,EAAIkF,KAAKo5G,SAEPxtH,IAER,GAAC,CAAAiG,IAAA,kBAAApG,MAED,WAIC,IAAMwW,EAA8B,GAAxBjC,KAAKo5G,SAAW,IACtBr7G,EAAIiC,KAAKo5G,SAAWp5G,KAAKyF,GAAK,EAC9B3M,EAAIkH,KAAKC,KAAM,EAACD,KAAA0F,IAAGzD,EAAK,IAM9B,OAJArW,KAAKgP,EAAI9B,EAAIkH,KAAKgF,IAAKjH,GACvBnS,KAAKiP,EAAI/B,EAAIkH,KAAK+E,IAAKhH,GACvBnS,KAAKkP,EAAImH,EAEFrW,IAER,GAAC,CAAAiG,IAAA+2H,EAAAn9H,OAAAswH,EAAAA,EAAAA,KAAAC,MAED,SAAAvwH,IAAA,OAAAswH,EAAAA,EAAAA,KAAAE,MAAA,SAAAwN,GAAA,cAAAA,EAAA51D,KAAA41D,EAAAzwE,MAAA,OAEC,OAFDywE,EAAAzwE,KAAA,EAEOptD,KAAKgP,EAAC,OACZ,OADY6uH,EAAAzwE,KAAA,EACNptD,KAAKiP,EAAC,OACZ,OADY4uH,EAAAzwE,KAAA,EACNptD,KAAKkP,EAAC,wBAAA2uH,EAAAriE,OAAA,GAAA37D,EAAA,YAEZy8B,CAAA,CAhsBW,CA0rBT2wB,OAAOC,UAULqwE,GAA0B,IAAIjhG,GAC9B4gG,GAA8B,IAAI7jG,GAElComF,GAAI,WAET,SAAAA,IAAgI,IAAnH/oG,EAAG9V,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAI07B,GAAW1pB,IAAYA,IAAYA,KAAY+D,EAAG/V,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAI07B,IAAW1pB,KAAYA,KAAYA,MAAUlK,EAAAA,EAAAA,GAAA,KAAA+2G,GAE5Hz/G,KAAK89H,QAAS,EAEd99H,KAAK0W,IAAMA,EACX1W,KAAK2W,IAAMA,CAEZ,CA0cC,OA1cAhM,EAAAA,EAAAA,GAAA80G,EAAA,EAAAx5G,IAAA,MAAApG,MAED,SAAK6W,EAAKC,GAKT,OAHA3W,KAAK0W,IAAIzS,KAAMyS,GACf1W,KAAK2W,IAAI1S,KAAM0S,GAER3W,IAER,GAAC,CAAAiG,IAAA,eAAApG,MAED,SAAcu/D,GAUb,IARA,IAAI2+D,EAASnrH,IACTorH,EAASprH,IACTqrH,EAASrrH,IAETsrH,GAAStrH,IACTurH,GAASvrH,IACTwrH,GAASxrH,IAEHhP,EAAI,EAAGwS,EAAIgpD,EAAM78D,OAAQqB,EAAIwS,EAAGxS,GAAK,EAAI,CAElD,IAAMoL,EAAIowD,EAAOx7D,GACXqL,EAAImwD,EAAOx7D,EAAI,GACfsL,EAAIkwD,EAAOx7D,EAAI,GAEhBoL,EAAI+uH,IAAOA,EAAO/uH,GAClBC,EAAI+uH,IAAOA,EAAO/uH,GAClBC,EAAI+uH,IAAOA,EAAO/uH,GAElBF,EAAIkvH,IAAOA,EAAOlvH,GAClBC,EAAIkvH,IAAOA,EAAOlvH,GAClBC,EAAIkvH,IAAOA,EAAOlvH,EAExB,CAKA,OAHAlP,KAAK0W,IAAIjS,IAAKs5H,EAAMC,EAAMC,GAC1Bj+H,KAAK2W,IAAIlS,IAAKy5H,EAAMC,EAAMC,GAEnBp+H,IAER,GAAC,CAAAiG,IAAA,yBAAApG,MAED,SAAwBorG,GAUvB,IARA,IAAI8yB,EAASnrH,IACTorH,EAASprH,IACTqrH,EAASrrH,IAETsrH,GAAStrH,IACTurH,GAASvrH,IACTwrH,GAASxrH,IAEHhP,EAAI,EAAGwS,EAAI60F,EAAUroG,MAAOgB,EAAIwS,EAAGxS,IAAO,CAEnD,IAAMoL,EAAIi8F,EAAUxP,KAAM73F,GACpBqL,EAAIg8F,EAAUilB,KAAMtsH,GACpBsL,EAAI+7F,EAAU4pB,KAAMjxH,GAErBoL,EAAI+uH,IAAOA,EAAO/uH,GAClBC,EAAI+uH,IAAOA,EAAO/uH,GAClBC,EAAI+uH,IAAOA,EAAO/uH,GAElBF,EAAIkvH,IAAOA,EAAOlvH,GAClBC,EAAIkvH,IAAOA,EAAOlvH,GAClBC,EAAIkvH,IAAOA,EAAOlvH,EAExB,CAKA,OAHAlP,KAAK0W,IAAIjS,IAAKs5H,EAAMC,EAAMC,GAC1Bj+H,KAAK2W,IAAIlS,IAAKy5H,EAAMC,EAAMC,GAEnBp+H,IAER,GAAC,CAAAiG,IAAA,gBAAApG,MAED,SAAeoW,GAEdjW,KAAKq+H,YAEL,IAAM,IAAIz6H,EAAI,EAAG8sG,EAAKz6F,EAAO1T,OAAQqB,EAAI8sG,EAAI9sG,IAE5C5D,KAAKs+H,cAAeroH,EAAQrS,IAI7B,OAAO5D,IAER,GAAC,CAAAiG,IAAA,uBAAApG,MAED,SAAsBmgH,EAAQj2G,GAE7B,IAAMw0H,EAAWC,GAAUv6H,KAAM8F,GAAOuqC,eAAgB,IAKxD,OAHAt0C,KAAK0W,IAAIzS,KAAM+7G,GAASj/D,IAAKw9E,GAC7Bv+H,KAAK2W,IAAI1S,KAAM+7G,GAASl4F,IAAKy2G,GAEtBv+H,IAER,GAAC,CAAAiG,IAAA,gBAAApG,MAED,SAAem+B,GAA0B,IAAlBygG,EAAO79H,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,IAAAA,UAAA,GAI7B,OAFAZ,KAAKq+H,YAEEr+H,KAAK0+H,eAAgB1gG,EAAQygG,EAErC,GAAC,CAAAx4H,IAAA,QAAApG,MAED,WAEC,OAAO,IAAIG,KAAK4zD,aAAc3vD,KAAMjE,KAErC,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAM0zB,GAKL,OAHAvzB,KAAK0W,IAAIzS,KAAMsvB,EAAI7c,KACnB1W,KAAK2W,IAAI1S,KAAMsvB,EAAI5c,KAEZ3W,IAER,GAAC,CAAAiG,IAAA,YAAApG,MAED,WAKC,OAHAG,KAAK0W,IAAI1H,EAAIhP,KAAK0W,IAAIzH,EAAIjP,KAAK0W,IAAIxH,EAAM0D,IACzC5S,KAAK2W,IAAI3H,EAAIhP,KAAK2W,IAAI1H,EAAIjP,KAAK2W,IAAIzH,GAAM0D,IAElC5S,IAER,GAAC,CAAAiG,IAAA,UAAApG,MAED,WAIC,OAASG,KAAK2W,IAAI3H,EAAIhP,KAAK0W,IAAI1H,GAAShP,KAAK2W,IAAI1H,EAAIjP,KAAK0W,IAAIzH,GAASjP,KAAK2W,IAAIzH,EAAIlP,KAAK0W,IAAIxH,CAE9F,GAAC,CAAAjJ,IAAA,YAAApG,MAED,SAAWd,GAEV,OAAOiB,KAAK2+H,UAAY5/H,EAAO0F,IAAK,EAAG,EAAG,GAAM1F,EAAO6/H,WAAY5+H,KAAK0W,IAAK1W,KAAK2W,KAAM29B,eAAgB,GAEzG,GAAC,CAAAruC,IAAA,UAAApG,MAED,SAASd,GAER,OAAOiB,KAAK2+H,UAAY5/H,EAAO0F,IAAK,EAAG,EAAG,GAAM1F,EAAOq8C,WAAYp7C,KAAK2W,IAAK3W,KAAK0W,IAEnF,GAAC,CAAAzQ,IAAA,gBAAApG,MAED,SAAeklB,GAKd,OAHA/kB,KAAK0W,IAAIA,IAAKqO,GACd/kB,KAAK2W,IAAIA,IAAKoO,GAEP/kB,IAER,GAAC,CAAAiG,IAAA,iBAAApG,MAED,SAAgB6Q,GAKf,OAHA1Q,KAAK0W,IAAIqqC,IAAKrwC,GACd1Q,KAAK2W,IAAImR,IAAKpX,GAEP1Q,IAER,GAAC,CAAAiG,IAAA,iBAAApG,MAED,SAAgB+U,GAKf,OAHA5U,KAAK0W,IAAImoH,WAAajqH,GACtB5U,KAAK2W,IAAIkoH,UAAWjqH,GAEb5U,IAER,GAAC,CAAAiG,IAAA,iBAAApG,MAED,SAAgBm+B,GAA0B,IAAlBygG,EAAO79H,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,IAAAA,UAAA,GAK9Bo9B,EAAO8gG,mBAAmB,GAAO,GAEjC,IAAMjxF,EAAW7P,EAAO6P,SAExB,QAAkB1sC,IAAb0sC,EAEJ,GAAK4wF,QAAkCt9H,GAAvB0sC,EAAS+6D,iBAA4DznG,IAAjC0sC,EAAS+6D,WAAWnjG,SAGvE,IADA,IAAMA,EAAWooC,EAAS+6D,WAAWnjG,SAC3B7B,EAAI,EAAGwS,EAAI3Q,EAAS7C,MAAOgB,EAAIwS,EAAGxS,IAE3C46H,GAAUp1B,oBAAqB3jG,EAAU7B,GAAIs3C,aAAcld,EAAOgd,aAClEh7C,KAAKs+H,cAAeE,SAMS,OAAzB3wF,EAASgyE,aAEbhyE,EAASkxF,qBAIVC,GAAO/6H,KAAM4pC,EAASgyE,aACtBmf,GAAO9jF,aAAcld,EAAOgd,aAE5Bh7C,KAAKi/H,MAAOD,IAQd,IAFA,IAAMj7F,EAAW/F,EAAO+F,SAEdngC,EAAI,EAAGwS,EAAI2tB,EAASxhC,OAAQqB,EAAIwS,EAAGxS,IAE5C5D,KAAK0+H,eAAgB36F,EAAUngC,GAAK66H,GAIrC,OAAOz+H,IAER,GAAC,CAAAiG,IAAA,gBAAApG,MAED,SAAeklB,GAEd,QAAOA,EAAM/V,EAAIhP,KAAK0W,IAAI1H,GAAK+V,EAAM/V,EAAIhP,KAAK2W,IAAI3H,GACjD+V,EAAM9V,EAAIjP,KAAK0W,IAAIzH,GAAK8V,EAAM9V,EAAIjP,KAAK2W,IAAI1H,GAC3C8V,EAAM7V,EAAIlP,KAAK0W,IAAIxH,GAAK6V,EAAM7V,EAAIlP,KAAK2W,IAAIzH,EAE7C,GAAC,CAAAjJ,IAAA,cAAApG,MAED,SAAa0zB,GAEZ,OAAOvzB,KAAK0W,IAAI1H,GAAKukB,EAAI7c,IAAI1H,GAAKukB,EAAI5c,IAAI3H,GAAKhP,KAAK2W,IAAI3H,GACvDhP,KAAK0W,IAAIzH,GAAKskB,EAAI7c,IAAIzH,GAAKskB,EAAI5c,IAAI1H,GAAKjP,KAAK2W,IAAI1H,GACjDjP,KAAK0W,IAAIxH,GAAKqkB,EAAI7c,IAAIxH,GAAKqkB,EAAI5c,IAAIzH,GAAKlP,KAAK2W,IAAIzH,CAEnD,GAAC,CAAAjJ,IAAA,eAAApG,MAED,SAAcklB,EAAOhmB,GAKpB,OAAOA,EAAO0F,KACXsgB,EAAM/V,EAAIhP,KAAK0W,IAAI1H,IAAQhP,KAAK2W,IAAI3H,EAAIhP,KAAK0W,IAAI1H,IACjD+V,EAAM9V,EAAIjP,KAAK0W,IAAIzH,IAAQjP,KAAK2W,IAAI1H,EAAIjP,KAAK0W,IAAIzH,IACjD8V,EAAM7V,EAAIlP,KAAK0W,IAAIxH,IAAQlP,KAAK2W,IAAIzH,EAAIlP,KAAK0W,IAAIxH,GAGrD,GAAC,CAAAjJ,IAAA,gBAAApG,MAED,SAAe0zB,GAGd,QAAOA,EAAI5c,IAAI3H,EAAIhP,KAAK0W,IAAI1H,GAAKukB,EAAI7c,IAAI1H,EAAIhP,KAAK2W,IAAI3H,GACrDukB,EAAI5c,IAAI1H,EAAIjP,KAAK0W,IAAIzH,GAAKskB,EAAI7c,IAAIzH,EAAIjP,KAAK2W,IAAI1H,GAC/CskB,EAAI5c,IAAIzH,EAAIlP,KAAK0W,IAAIxH,GAAKqkB,EAAI7c,IAAIxH,EAAIlP,KAAK2W,IAAIzH,EAEjD,GAAC,CAAAjJ,IAAA,mBAAApG,MAED,SAAkBk1B,GAMjB,OAHA/0B,KAAKk/H,WAAYnqG,EAAOirF,OAAQwe,IAGzBA,GAAUt8E,kBAAmBntB,EAAOirF,SAAcjrF,EAAO1H,OAAS0H,EAAO1H,MAEjF,GAAC,CAAApnB,IAAA,kBAAApG,MAED,SAAiBs/H,GAKhB,IAAIzoH,EAAKC,EAsCT,OApCKwoH,EAAMn6G,OAAOhW,EAAI,GAErB0H,EAAMyoH,EAAMn6G,OAAOhW,EAAIhP,KAAK0W,IAAI1H,EAChC2H,EAAMwoH,EAAMn6G,OAAOhW,EAAIhP,KAAK2W,IAAI3H,IAIhC0H,EAAMyoH,EAAMn6G,OAAOhW,EAAIhP,KAAK2W,IAAI3H,EAChC2H,EAAMwoH,EAAMn6G,OAAOhW,EAAIhP,KAAK0W,IAAI1H,GAI5BmwH,EAAMn6G,OAAO/V,EAAI,GAErByH,GAAOyoH,EAAMn6G,OAAO/V,EAAIjP,KAAK0W,IAAIzH,EACjC0H,GAAOwoH,EAAMn6G,OAAO/V,EAAIjP,KAAK2W,IAAI1H,IAIjCyH,GAAOyoH,EAAMn6G,OAAO/V,EAAIjP,KAAK2W,IAAI1H,EACjC0H,GAAOwoH,EAAMn6G,OAAO/V,EAAIjP,KAAK0W,IAAIzH,GAI7BkwH,EAAMn6G,OAAO9V,EAAI,GAErBwH,GAAOyoH,EAAMn6G,OAAO9V,EAAIlP,KAAK0W,IAAIxH,EACjCyH,GAAOwoH,EAAMn6G,OAAO9V,EAAIlP,KAAK2W,IAAIzH,IAIjCwH,GAAOyoH,EAAMn6G,OAAO9V,EAAIlP,KAAK2W,IAAIzH,EACjCyH,GAAOwoH,EAAMn6G,OAAO9V,EAAIlP,KAAK0W,IAAIxH,GAIzBwH,IAASyoH,EAAMtjF,UAAYllC,IAASwoH,EAAMtjF,QAEpD,GAAC,CAAA51C,IAAA,qBAAApG,MAED,SAAoBu/H,GAEnB,GAAKp/H,KAAK2+H,UAET,OAAO,EAKR3+H,KAAK+/G,UAAWsf,IAChBC,GAASlkF,WAAYp7C,KAAK2W,IAAK0oH,IAG/BE,GAAMnkF,WAAYgkF,EAASjoH,EAAGkoH,IAC9BG,GAAMpkF,WAAYgkF,EAAShtH,EAAGitH,IAC9BI,GAAMrkF,WAAYgkF,EAAShoH,EAAGioH,IAG9BK,GAAItkF,WAAYokF,GAAOD,IACvBI,GAAIvkF,WAAYqkF,GAAOD,IACvBI,GAAIxkF,WAAYmkF,GAAOE,IAKvB,IAAIrgH,EAAO,CACV,GAAKsgH,GAAIxwH,EAAGwwH,GAAIzwH,EAAG,GAAK0wH,GAAIzwH,EAAGywH,GAAI1wH,EAAG,GAAK2wH,GAAI1wH,EAAG0wH,GAAI3wH,EACtDywH,GAAIxwH,EAAG,GAAKwwH,GAAI1wH,EAAG2wH,GAAIzwH,EAAG,GAAKywH,GAAI3wH,EAAG4wH,GAAI1wH,EAAG,GAAK0wH,GAAI5wH,GACpD0wH,GAAIzwH,EAAGywH,GAAI1wH,EAAG,GAAK2wH,GAAI1wH,EAAG0wH,GAAI3wH,EAAG,GAAK4wH,GAAI3wH,EAAG2wH,GAAI5wH,EAAG,GAEvD,QAAO6wH,GAAYzgH,EAAMmgH,GAAOC,GAAOC,GAAOH,QAQvCO,GADPzgH,EAAO,CAAE,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACRmgH,GAAOC,GAAOC,GAAOH,MAQ9CQ,GAAgB96E,aAAc06E,GAAKC,IAG5BE,GAFPzgH,EAAO,CAAE0gH,GAAgB9wH,EAAG8wH,GAAgB7wH,EAAG6wH,GAAgB5wH,GAEtCqwH,GAAOC,GAAOC,GAAOH,KAE/C,GAAC,CAAAr5H,IAAA,aAAApG,MAED,SAAYklB,EAAOhmB,GAElB,OAAOA,EAAOkF,KAAM8gB,GAAQ2oG,MAAO1tH,KAAK0W,IAAK1W,KAAK2W,IAEnD,GAAC,CAAA1Q,IAAA,kBAAApG,MAED,SAAiBklB,GAIhB,OAFqBy5G,GAAUv6H,KAAM8gB,GAAQ2oG,MAAO1tH,KAAK0W,IAAK1W,KAAK2W,KAE/CoqC,IAAKh8B,GAAQxiB,QAElC,GAAC,CAAA0D,IAAA,oBAAApG,MAED,SAAmBd,GAMlB,OAJAiB,KAAK+/G,UAAWhhH,EAAOihH,QAEvBjhH,EAAOsuB,OAA8C,GAArCrtB,KAAK+/H,QAASvB,IAAYj8H,SAEnCxD,CAER,GAAC,CAAAkH,IAAA,YAAApG,MAED,SAAW0zB,GAQV,OANAvzB,KAAK0W,IAAIC,IAAK4c,EAAI7c,KAClB1W,KAAK2W,IAAID,IAAK6c,EAAI5c,KAGb3W,KAAK2+H,WAAY3+H,KAAKq+H,YAEpBr+H,IAER,GAAC,CAAAiG,IAAA,QAAApG,MAED,SAAO0zB,GAKN,OAHAvzB,KAAK0W,IAAIA,IAAK6c,EAAI7c,KAClB1W,KAAK2W,IAAIA,IAAK4c,EAAI5c,KAEX3W,IAER,GAAC,CAAAiG,IAAA,eAAApG,MAED,SAAcgR,GAGb,OAAK7Q,KAAK2+H,YAGVqB,GAAS,GAAIv7H,IAAKzE,KAAK0W,IAAI1H,EAAGhP,KAAK0W,IAAIzH,EAAGjP,KAAK0W,IAAIxH,GAAIgsC,aAAcrqC,GACrEmvH,GAAS,GAAIv7H,IAAKzE,KAAK0W,IAAI1H,EAAGhP,KAAK0W,IAAIzH,EAAGjP,KAAK2W,IAAIzH,GAAIgsC,aAAcrqC,GACrEmvH,GAAS,GAAIv7H,IAAKzE,KAAK0W,IAAI1H,EAAGhP,KAAK2W,IAAI1H,EAAGjP,KAAK0W,IAAIxH,GAAIgsC,aAAcrqC,GACrEmvH,GAAS,GAAIv7H,IAAKzE,KAAK0W,IAAI1H,EAAGhP,KAAK2W,IAAI1H,EAAGjP,KAAK2W,IAAIzH,GAAIgsC,aAAcrqC,GACrEmvH,GAAS,GAAIv7H,IAAKzE,KAAK2W,IAAI3H,EAAGhP,KAAK0W,IAAIzH,EAAGjP,KAAK0W,IAAIxH,GAAIgsC,aAAcrqC,GACrEmvH,GAAS,GAAIv7H,IAAKzE,KAAK2W,IAAI3H,EAAGhP,KAAK0W,IAAIzH,EAAGjP,KAAK2W,IAAIzH,GAAIgsC,aAAcrqC,GACrEmvH,GAAS,GAAIv7H,IAAKzE,KAAK2W,IAAI3H,EAAGhP,KAAK2W,IAAI1H,EAAGjP,KAAK0W,IAAIxH,GAAIgsC,aAAcrqC,GACrEmvH,GAAS,GAAIv7H,IAAKzE,KAAK2W,IAAI3H,EAAGhP,KAAK2W,IAAI1H,EAAGjP,KAAK2W,IAAIzH,GAAIgsC,aAAcrqC,GAErE7Q,KAAK8X,cAAekoH,KAZShgI,IAgB9B,GAAC,CAAAiG,IAAA,YAAApG,MAED,SAAW+mB,GAKV,OAHA5mB,KAAK0W,IAAIoR,IAAKlB,GACd5mB,KAAK2W,IAAImR,IAAKlB,GAEP5mB,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQ0zB,GAEP,OAAOA,EAAI7c,IAAIupH,OAAQjgI,KAAK0W,MAAS6c,EAAI5c,IAAIspH,OAAQjgI,KAAK2W,IAE3D,KAAC8oG,CAAA,CAndQ,GAudJugB,GAAU,CACD,IAAI1jG,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,GACJ,IAAIA,IAGbkiG,GAA0B,IAAIliG,GAE9B0iG,GAAuB,IAAIvf,GAI3B8f,GAAsB,IAAIjjG,GAC1BkjG,GAAsB,IAAIljG,GAC1BmjG,GAAsB,IAAInjG,GAI1BojG,GAAoB,IAAIpjG,GACxBqjG,GAAoB,IAAIrjG,GACxBsjG,GAAoB,IAAItjG,GAExB+iG,GAAwB,IAAI/iG,GAC5BgjG,GAAyB,IAAIhjG,GAC7BwjG,GAAgC,IAAIxjG,GACpC4jG,GAA0B,IAAI5jG,GAEpC,SAASujG,GAAYzgH,EAAMqb,EAAIoB,EAAIC,EAAIqkG,GAEtC,IAAM,IAAIv8H,EAAI,EAAGyO,EAAI+M,EAAK7c,OAAS,EAAGqB,GAAKyO,EAAGzO,GAAK,EAAI,CAEtDs8H,GAAU1iG,UAAWpe,EAAMxb,GAE3B,IAAMoP,EAAImtH,EAAQnxH,EAAIoF,KAAKgB,IAAK8qH,GAAUlxH,GAAMmxH,EAAQlxH,EAAImF,KAAKgB,IAAK8qH,GAAUjxH,GAAMkxH,EAAQjxH,EAAIkF,KAAKgB,IAAK8qH,GAAUhxH,GAEhHm9F,EAAK5xE,EAAGjmB,IAAK0rH,IACb3zB,EAAK1wE,EAAGrnB,IAAK0rH,IACbE,EAAKtkG,EAAGtnB,IAAK0rH,IAEnB,GAAK9rH,KAAKuC,KAAOvC,KAAKuC,IAAK01F,EAAIE,EAAI6zB,GAAMhsH,KAAKsC,IAAK21F,EAAIE,EAAI6zB,IAASptH,EAInE,OAAO,CAIT,CAEA,OAAO,CAER,CAEA,IAAMqtH,GAAuB,IAAI5gB,GAC3B6gB,GAAsB,IAAIhkG,GAC1BikG,GAAiC,IAAIjkG,GACrCkkG,GAAyB,IAAIlkG,GAE7BwjF,GAAM,WAEX,SAAAA,IAAoD,IAAvCE,EAAMp/G,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAI07B,GAAWjP,EAAMzsB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,IAAK,GAAC8H,EAAAA,EAAAA,GAAA,KAAAo3G,GAEhD9/G,KAAKggH,OAASA,EACdhgH,KAAKqtB,OAASA,CAEf,CAsOC,OAtOA1iB,EAAAA,EAAAA,GAAAm1G,EAAA,EAAA75G,IAAA,MAAApG,MAED,SAAKmgH,EAAQ3yF,GAKZ,OAHArtB,KAAKggH,OAAO/7G,KAAM+7G,GAClBhgH,KAAKqtB,OAASA,EAEPrtB,IAER,GAAC,CAAAiG,IAAA,gBAAApG,MAED,SAAeoW,EAAQwqH,GAEtB,IAAMzgB,EAAShgH,KAAKggH,YAEI7+G,IAAnBs/H,EAEJzgB,EAAO/7G,KAAMw8H,GAIbJ,GAAOvoH,cAAe7B,GAAS8pG,UAAWC,GAM3C,IAFA,IAAI0gB,EAAc,EAER98H,EAAI,EAAG8sG,EAAKz6F,EAAO1T,OAAQqB,EAAI8sG,EAAI9sG,IAE5C88H,EAActsH,KAAKuC,IAAK+pH,EAAa1gB,EAAO99D,kBAAmBjsC,EAAQrS,KAMxE,OAFA5D,KAAKqtB,OAASjZ,KAAKC,KAAMqsH,GAElB1gI,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAMk1B,GAKL,OAHA/0B,KAAKggH,OAAO/7G,KAAM8wB,EAAOirF,QACzBhgH,KAAKqtB,OAAS0H,EAAO1H,OAEdrtB,IAER,GAAC,CAAAiG,IAAA,UAAApG,MAED,WAEC,OAASG,KAAKqtB,OAAS,CAExB,GAAC,CAAApnB,IAAA,YAAApG,MAED,WAKC,OAHAG,KAAKggH,OAAOv7G,IAAK,EAAG,EAAG,GACvBzE,KAAKqtB,QAAW,EAETrtB,IAER,GAAC,CAAAiG,IAAA,gBAAApG,MAED,SAAeklB,GAEd,OAASA,EAAMm9B,kBAAmBliD,KAAKggH,SAAchgH,KAAKqtB,OAASrtB,KAAKqtB,MAEzE,GAAC,CAAApnB,IAAA,kBAAApG,MAED,SAAiBklB,GAEhB,OAASA,EAAMqO,WAAYpzB,KAAKggH,QAAWhgH,KAAKqtB,MAEjD,GAAC,CAAApnB,IAAA,mBAAApG,MAED,SAAkBk1B,GAEjB,IAAM4rG,EAAY3gI,KAAKqtB,OAAS0H,EAAO1H,OAEvC,OAAO0H,EAAOirF,OAAO99D,kBAAmBliD,KAAKggH,SAAc2gB,EAAYA,CAExE,GAAC,CAAA16H,IAAA,gBAAApG,MAED,SAAe0zB,GAEd,OAAOA,EAAIqtG,iBAAkB5gI,KAE9B,GAAC,CAAAiG,IAAA,kBAAApG,MAED,SAAiBs/H,GAEhB,OAAO/qH,KAAKgB,IAAK+pH,EAAM0B,gBAAiB7gI,KAAKggH,UAAchgH,KAAKqtB,MAEjE,GAAC,CAAApnB,IAAA,aAAApG,MAED,SAAYklB,EAAOhmB,GAElB,IAAM+hI,EAAgB9gI,KAAKggH,OAAO99D,kBAAmBn9B,GAWrD,OATAhmB,EAAOkF,KAAM8gB,GAER+7G,EAAkB9gI,KAAKqtB,OAASrtB,KAAKqtB,SAEzCtuB,EAAOgiD,IAAK/gD,KAAKggH,QAAS1mG,YAC1Bva,EAAOu1C,eAAgBt0C,KAAKqtB,QAASvF,IAAK9nB,KAAKggH,SAIzCjhH,CAER,GAAC,CAAAkH,IAAA,iBAAApG,MAED,SAAgBd,GAEf,OAAKiB,KAAK2+H,WAGT5/H,EAAOs/H,YACAt/H,IAIRA,EAAO0F,IAAKzE,KAAKggH,OAAQhgH,KAAKggH,QAC9BjhH,EAAOgiI,eAAgB/gI,KAAKqtB,QAErBtuB,EAER,GAAC,CAAAkH,IAAA,eAAApG,MAED,SAAcgR,GAKb,OAHA7Q,KAAKggH,OAAO9kE,aAAcrqC,GAC1B7Q,KAAKqtB,OAASrtB,KAAKqtB,OAASxc,EAAOmwH,oBAE5BhhI,IAER,GAAC,CAAAiG,IAAA,YAAApG,MAED,SAAW+mB,GAIV,OAFA5mB,KAAKggH,OAAOl4F,IAAKlB,GAEV5mB,IAER,GAAC,CAAAiG,IAAA,gBAAApG,MAED,SAAeklB,GAEd,GAAK/kB,KAAK2+H,UAKT,OAHA3+H,KAAKggH,OAAO/7G,KAAM8gB,GAClB/kB,KAAKqtB,OAAS,EAEPrtB,KAMRwgI,GAASplF,WAAYr2B,EAAO/kB,KAAKggH,QAEjC,IAAMsd,EAAWkD,GAASlD,WAE1B,GAAKA,EAAat9H,KAAKqtB,OAASrtB,KAAKqtB,OAAW,CAE/C,IAAM9qB,EAAS6R,KAAKC,KAAMipH,GACpB2D,EAA+C,IAAzB1+H,EAASvC,KAAKqtB,QAM1CrtB,KAAKggH,OAAOl4F,IAAK04G,GAASlsF,eAAgB2sF,EAAoB1+H,IAC9DvC,KAAKqtB,QAAU4zG,CAEhB,CAEA,OAAOjhI,IAER,GAAC,CAAAiG,IAAA,QAAApG,MAED,SAAOk1B,GAGN,OAAKA,EAAO4pG,UAEJ3+H,KAEIA,KAAK2+H,WAEhB3+H,KAAKiE,KAAM8wB,GAEJ/0B,QAUsC,IAAxCA,KAAKggH,OAAOigB,OAAQlrG,EAAOirF,QAE/BugB,GAAiB97H,IAAK,EAAG,EAAG,GAAI6vC,eAAgBvf,EAAO1H,QAKxDkzG,GAAiBnlF,WAAYrmB,EAAOirF,OAAQhgH,KAAKggH,QAAS1mG,YAAYg7B,eAAgBvf,EAAO1H,QAI9FrtB,KAAKs+H,cAAegC,GAAMr8H,KAAM8wB,EAAOirF,QAASl4F,IAAKy4G,KACrDvgI,KAAKs+H,cAAegC,GAAMr8H,KAAM8wB,EAAOirF,QAASj/D,IAAKw/E,KAE9CvgI,KAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQk1B,GAEP,OAAOA,EAAOirF,OAAOigB,OAAQjgI,KAAKggH,SAAcjrF,EAAO1H,SAAWrtB,KAAKqtB,MAExE,GAAC,CAAApnB,IAAA,QAAApG,MAED,WAEC,OAAO,IAAIG,KAAK4zD,aAAc3vD,KAAMjE,KAErC,KAAC8/G,CAAA,CA7OU,GAiPNohB,GAA0B,IAAI5kG,GAC9B6kG,GAA2B,IAAI7kG,GAC/B8kG,GAAwB,IAAI9kG,GAC5B+kG,GAAsB,IAAI/kG,GAE1BglG,GAAuB,IAAIhlG,GAC3BilG,GAAuB,IAAIjlG,GAC3BklG,GAA0B,IAAIllG,GAE9BzC,GAAG,WAER,SAAAA,IAA4E,IAA/D4nG,EAAM7gI,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAI07B,GAAWrkB,EAASrX,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAI07B,GAAS,EAAG,GAAK,IAAG5zB,EAAAA,EAAAA,GAAA,KAAAmxB,GAExE75B,KAAKyhI,OAASA,EACdzhI,KAAKiY,UAAYA,CAElB,CAydC,OAzdAtN,EAAAA,EAAAA,GAAAkvB,EAAA,EAAA5zB,IAAA,MAAApG,MAED,SAAK4hI,EAAQxpH,GAKZ,OAHAjY,KAAKyhI,OAAOx9H,KAAMw9H,GAClBzhI,KAAKiY,UAAUhU,KAAMgU,GAEdjY,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAMmY,GAKL,OAHAhY,KAAKyhI,OAAOx9H,KAAM+T,EAAIypH,QACtBzhI,KAAKiY,UAAUhU,KAAM+T,EAAIC,WAElBjY,IAER,GAAC,CAAAiG,IAAA,KAAApG,MAED,SAAIsS,EAAGpT,GAEN,OAAOA,EAAOkF,KAAMjE,KAAKiY,WAAYq8B,eAAgBniC,GAAI2V,IAAK9nB,KAAKyhI,OAEpE,GAAC,CAAAx7H,IAAA,SAAApG,MAED,SAAQ+Q,GAIP,OAFA5Q,KAAKiY,UAAUhU,KAAM2M,GAAImwC,IAAK/gD,KAAKyhI,QAASnoH,YAErCtZ,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQsS,GAIP,OAFAnS,KAAKyhI,OAAOx9H,KAAMjE,KAAK6hC,GAAI1vB,EAAG+uH,KAEvBlhI,IAER,GAAC,CAAAiG,IAAA,sBAAApG,MAED,SAAqBklB,EAAOhmB,GAE3BA,EAAOq8C,WAAYr2B,EAAO/kB,KAAKyhI,QAE/B,IAAMC,EAAoB3iI,EAAOyV,IAAKxU,KAAKiY,WAE3C,OAAKypH,EAAoB,EAEjB3iI,EAAOkF,KAAMjE,KAAKyhI,QAInB1iI,EAAOkF,KAAMjE,KAAKiY,WAAYq8B,eAAgBotF,GAAoB55G,IAAK9nB,KAAKyhI,OAEpF,GAAC,CAAAx7H,IAAA,kBAAApG,MAED,SAAiBklB,GAEhB,OAAO3Q,KAAKC,KAAMrU,KAAK2hI,kBAAmB58G,GAE3C,GAAC,CAAA9e,IAAA,oBAAApG,MAED,SAAmBklB,GAElB,IAAM28G,EAAoBR,GAAU9lF,WAAYr2B,EAAO/kB,KAAKyhI,QAASjtH,IAAKxU,KAAKiY,WAI/E,OAAKypH,EAAoB,EAEjB1hI,KAAKyhI,OAAOv/E,kBAAmBn9B,IAIvCm8G,GAAUj9H,KAAMjE,KAAKiY,WAAYq8B,eAAgBotF,GAAoB55G,IAAK9nB,KAAKyhI,QAExEP,GAAUh/E,kBAAmBn9B,GAErC,GAAC,CAAA9e,IAAA,sBAAApG,MAED,SAAqB46B,EAAIoB,EAAI+lG,EAAoBC,GAShDV,GAAWl9H,KAAMw2B,GAAK3S,IAAK+T,GAAKyY,eAAgB,IAChD8sF,GAAQn9H,KAAM43B,GAAKklB,IAAKtmB,GAAKnhB,YAC7B+nH,GAAMp9H,KAAMjE,KAAKyhI,QAAS1gF,IAAKogF,IAE/B,IAMI/0B,EAAIrwF,EAAI+lH,EAASC,EANfC,EAAkC,GAAtBvnG,EAAGrH,WAAYyI,GAC3BomG,GAAQjiI,KAAKiY,UAAUzD,IAAK4sH,IAC5Bc,EAAKb,GAAM7sH,IAAKxU,KAAKiY,WACrBk2G,GAAOkT,GAAM7sH,IAAK4sH,IAClBhqH,EAAIiqH,GAAM/D,WACV5L,EAAMt9G,KAAKgB,IAAK,EAAI6sH,EAAMA,GAGhC,GAAKvQ,EAAM,EAQV,GAHA31G,EAAKkmH,EAAMC,EAAK/T,EAChB4T,EAASC,EAAYtQ,GAFrBtlB,EAAK61B,EAAM9T,EAAK+T,IAIL,EAEV,GAAKnmH,IAAQgmH,EAEZ,GAAKhmH,GAAMgmH,EAAS,CAKnB,IAAMI,EAAS,EAAIzQ,EAGnBoQ,GAFA11B,GAAM+1B,IAEW/1B,EAAK61B,GADtBlmH,GAAMomH,GAC2B,EAAID,GAAOnmH,GAAOkmH,EAAM71B,EAAKrwF,EAAK,EAAIoyG,GAAO/2G,CAE/E,MAIC2E,EAAKimH,EAELF,IADA11B,EAAKh4F,KAAKuC,IAAK,IAAOsrH,EAAMlmH,EAAKmmH,KAChB91B,EAAKrwF,GAAOA,EAAK,EAAIoyG,GAAO/2G,OAQ9C2E,GAAOimH,EAEPF,IADA11B,EAAKh4F,KAAKuC,IAAK,IAAOsrH,EAAMlmH,EAAKmmH,KAChB91B,EAAKrwF,GAAOA,EAAK,EAAIoyG,GAAO/2G,OAMzC2E,IAAQgmH,EAMZD,IAFA11B,EAAKh4F,KAAKuC,IAAK,KAASsrH,EAAMD,EAAYE,KAEzB91B,GADjBrwF,EAAOqwF,EAAK,GAAQ41B,EAAY5tH,KAAKsC,IAAKtC,KAAKuC,KAAOqrH,GAAa7T,GAAM6T,KAC5CjmH,EAAK,EAAIoyG,GAAO/2G,EAElC2E,GAAMgmH,GAIjB31B,EAAK,EAEL01B,GADA/lH,EAAK3H,KAAKsC,IAAKtC,KAAKuC,KAAOqrH,GAAa7T,GAAM6T,KAC7BjmH,EAAK,EAAIoyG,GAAO/2G,GAQjC0qH,IAFA11B,EAAKh4F,KAAKuC,IAAK,IAAOsrH,EAAMD,EAAYE,KAEvB91B,GADjBrwF,EAAOqwF,EAAK,EAAM41B,EAAY5tH,KAAKsC,IAAKtC,KAAKuC,KAAOqrH,GAAa7T,GAAM6T,KAC1CjmH,EAAK,EAAIoyG,GAAO/2G,OAU/C2E,EAAOkmH,EAAM,GAAQD,EAAYA,EAEjCF,IADA11B,EAAKh4F,KAAKuC,IAAK,IAAOsrH,EAAMlmH,EAAKmmH,KAChB91B,EAAKrwF,GAAOA,EAAK,EAAIoyG,GAAO/2G,EAgB9C,OAZKwqH,GAEJA,EAAmB39H,KAAMjE,KAAKiY,WAAYq8B,eAAgB83D,GAAKtkF,IAAK9nB,KAAKyhI,QAIrEI,GAEJA,EAAuB59H,KAAMm9H,IAAU9sF,eAAgBv4B,GAAK+L,IAAKq5G,IAI3DW,CAER,GAAC,CAAA77H,IAAA,kBAAApG,MAED,SAAiBk1B,EAAQh2B,GAExBmiI,GAAU9lF,WAAYrmB,EAAOirF,OAAQhgH,KAAKyhI,QAC1C,IAAMW,EAAMlB,GAAU1sH,IAAKxU,KAAKiY,WAC1Bmd,EAAK8rG,GAAU1sH,IAAK0sH,IAAckB,EAAMA,EACxCC,EAAUttG,EAAO1H,OAAS0H,EAAO1H,OAEvC,GAAK+H,EAAKitG,EAAU,OAAO,KAE3B,IAAMC,EAAMluH,KAAKC,KAAMguH,EAAUjtG,GAG3By2E,EAAKu2B,EAAME,EAGXztH,EAAKutH,EAAME,EAGjB,OAAKz2B,EAAK,GAAKh3F,EAAK,EAAW,KAK1Bg3F,EAAK,EAAW7rG,KAAK6hC,GAAIhtB,EAAI9V,GAG3BiB,KAAK6hC,GAAIgqE,EAAI9sG,EAErB,GAAC,CAAAkH,IAAA,mBAAApG,MAED,SAAkBk1B,GAEjB,OAAO/0B,KAAK2hI,kBAAmB5sG,EAAOirF,SAAcjrF,EAAO1H,OAAS0H,EAAO1H,MAE5E,GAAC,CAAApnB,IAAA,kBAAApG,MAED,SAAiBs/H,GAEhB,IAAM9B,EAAc8B,EAAMn6G,OAAOxQ,IAAKxU,KAAKiY,WAE3C,GAAqB,IAAhBolH,EAGJ,OAA8C,IAAzC8B,EAAM0B,gBAAiB7gI,KAAKyhI,QAEzB,EAMD,KAIR,IAAMtvH,IAAQnS,KAAKyhI,OAAOjtH,IAAK2qH,EAAMn6G,QAAWm6G,EAAMtjF,UAAawhF,EAInE,OAAOlrH,GAAK,EAAIA,EAAI,IAErB,GAAC,CAAAlM,IAAA,iBAAApG,MAED,SAAgBs/H,EAAOpgI,GAEtB,IAAMoT,EAAInS,KAAKuiI,gBAAiBpD,GAEhC,OAAW,OAANhtH,EAEG,KAIDnS,KAAK6hC,GAAI1vB,EAAGpT,EAEpB,GAAC,CAAAkH,IAAA,kBAAApG,MAED,SAAiBs/H,GAIhB,IAAMqD,EAAcrD,EAAM0B,gBAAiB7gI,KAAKyhI,QAEhD,OAAqB,IAAhBe,GAMerD,EAAMn6G,OAAOxQ,IAAKxU,KAAKiY,WAExBuqH,EAAc,CAUlC,GAAC,CAAAv8H,IAAA,eAAApG,MAED,SAAc0zB,EAAKx0B,GAElB,IAAI2Z,EAAMC,EAAM8pH,EAAOC,EAAOC,EAAOC,EAE/BC,EAAU,EAAI7iI,KAAKiY,UAAUjJ,EAClC8zH,EAAU,EAAI9iI,KAAKiY,UAAUhJ,EAC7B8zH,EAAU,EAAI/iI,KAAKiY,UAAU/I,EAExBuyH,EAASzhI,KAAKyhI,OA0BpB,OAxBKoB,GAAW,GAEfnqH,GAAS6a,EAAI7c,IAAI1H,EAAIyyH,EAAOzyH,GAAM6zH,EAClClqH,GAAS4a,EAAI5c,IAAI3H,EAAIyyH,EAAOzyH,GAAM6zH,IAIlCnqH,GAAS6a,EAAI5c,IAAI3H,EAAIyyH,EAAOzyH,GAAM6zH,EAClClqH,GAAS4a,EAAI7c,IAAI1H,EAAIyyH,EAAOzyH,GAAM6zH,GAI9BC,GAAW,GAEfL,GAAUlvG,EAAI7c,IAAIzH,EAAIwyH,EAAOxyH,GAAM6zH,EACnCJ,GAAUnvG,EAAI5c,IAAI1H,EAAIwyH,EAAOxyH,GAAM6zH,IAInCL,GAAUlvG,EAAI5c,IAAI1H,EAAIwyH,EAAOxyH,GAAM6zH,EACnCJ,GAAUnvG,EAAI7c,IAAIzH,EAAIwyH,EAAOxyH,GAAM6zH,GAI7BpqH,EAAOgqH,GAAaD,EAAQ9pH,EAAgB,OAK9C8pH,EAAQ/pH,GAAQA,IAASA,KAAOA,EAAO+pH,IAEvCC,EAAQ/pH,GAAQA,IAASA,KAAOA,EAAO+pH,GAEvCK,GAAW,GAEfJ,GAAUpvG,EAAI7c,IAAIxH,EAAIuyH,EAAOvyH,GAAM6zH,EACnCH,GAAUrvG,EAAI5c,IAAIzH,EAAIuyH,EAAOvyH,GAAM6zH,IAInCJ,GAAUpvG,EAAI5c,IAAIzH,EAAIuyH,EAAOvyH,GAAM6zH,EACnCH,GAAUrvG,EAAI7c,IAAIxH,EAAIuyH,EAAOvyH,GAAM6zH,GAI7BrqH,EAAOkqH,GAAaD,EAAQhqH,EAAgB,OAE9CgqH,EAAQjqH,GAAQA,IAASA,KAAOA,EAAOiqH,IAEvCC,EAAQjqH,GAAQA,IAASA,KAAOA,EAAOiqH,GAIvCjqH,EAAO,EAAW,KAEhB3Y,KAAK6hC,GAAInpB,GAAQ,EAAIA,EAAOC,EAAM5Z,IAE1C,GAAC,CAAAkH,IAAA,gBAAApG,MAED,SAAe0zB,GAEd,OAA+C,OAAxCvzB,KAAKgjI,aAAczvG,EAAK2tG,GAEhC,GAAC,CAAAj7H,IAAA,oBAAApG,MAED,SAAmBsX,EAAG/E,EAAGgF,EAAG6rH,EAAiBlkI,GAM5CuiI,GAAOlmF,WAAYhpC,EAAG+E,GACtBoqH,GAAOnmF,WAAYhkC,EAAGD,GACtBqqH,GAAUx8E,aAAcs8E,GAAQC,IAOhC,IACIzlF,EADAonF,EAAMljI,KAAKiY,UAAUzD,IAAKgtH,IAG9B,GAAK0B,EAAM,EAAI,CAEd,GAAKD,EAAkB,OAAO,KAC9BnnF,EAAO,CAER,KAAO,MAAKonF,EAAM,GAOjB,OAAO,KALPpnF,GAAS,EACTonF,GAAQA,CAMT,CAEA7B,GAAMjmF,WAAYp7C,KAAKyhI,OAAQtqH,GAC/B,IAAMgsH,EAASrnF,EAAO97C,KAAKiY,UAAUzD,IAAK+sH,GAAOv8E,aAAcq8E,GAAOE,KAGtE,GAAK4B,EAAS,EAEb,OAAO,KAIR,IAAMC,EAAStnF,EAAO97C,KAAKiY,UAAUzD,IAAK8sH,GAAOjsH,MAAOgsH,KAGxD,GAAK+B,EAAS,EAEb,OAAO,KAKR,GAAKD,EAASC,EAASF,EAEtB,OAAO,KAKR,IAAMG,GAAQvnF,EAAOulF,GAAM7sH,IAAKgtH,IAGhC,OAAK6B,EAAM,EAEH,KAKDrjI,KAAK6hC,GAAIwhG,EAAMH,EAAKnkI,EAE5B,GAAC,CAAAkH,IAAA,eAAApG,MAED,SAAc+xH,GAKb,OAHA5xH,KAAKyhI,OAAOvmF,aAAc02E,GAC1B5xH,KAAKiY,UAAUqrH,mBAAoB1R,GAE5B5xH,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQmY,GAEP,OAAOA,EAAIypH,OAAOxB,OAAQjgI,KAAKyhI,SAAYzpH,EAAIC,UAAUgoH,OAAQjgI,KAAKiY,UAEvE,GAAC,CAAAhS,IAAA,QAAApG,MAED,WAEC,OAAO,IAAIG,KAAK4zD,aAAc3vD,KAAMjE,KAErC,KAAC65B,CAAA,CAheO,GAoeH0C,GAAO,WAEZ,SAAAA,KAAc7zB,EAAAA,EAAAA,GAAA,KAAA6zB,GAEbA,EAAQp9B,UAAUokI,WAAY,EAE9BvjI,KAAKyQ,SAAW,CAEf,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EAIX,CA8zBC,OA9zBA9F,EAAAA,EAAAA,GAAA4xB,EAAA,EAAAt2B,IAAA,MAAApG,MAED,SAAK4wH,EAAKC,EAAKC,EAAK6S,EAAK5S,EAAKC,EAAKC,EAAK2S,EAAK1S,EAAKC,EAAKC,EAAKyS,EAAKC,EAAKC,EAAKC,EAAKC,GAE/E,IAAM/+C,EAAK/kF,KAAKyQ,SAOhB,OALAs0E,EAAI,GAAM0rC,EAAK1rC,EAAI,GAAM2rC,EAAK3rC,EAAI,GAAM4rC,EAAK5rC,EAAI,IAAOy+C,EACxDz+C,EAAI,GAAM6rC,EAAK7rC,EAAI,GAAM8rC,EAAK9rC,EAAI,GAAM+rC,EAAK/rC,EAAI,IAAO0+C,EACxD1+C,EAAI,GAAMgsC,EAAKhsC,EAAI,GAAMisC,EAAKjsC,EAAI,IAAOksC,EAAKlsC,EAAI,IAAO2+C,EACzD3+C,EAAI,GAAM4+C,EAAK5+C,EAAI,GAAM6+C,EAAK7+C,EAAI,IAAO8+C,EAAK9+C,EAAI,IAAO++C,EAElD9jI,IAER,GAAC,CAAAiG,IAAA,WAAApG,MAED,WAWC,OATAG,KAAKyE,IAEJ,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,GAIHzE,IAER,GAAC,CAAAiG,IAAA,QAAApG,MAED,WAEC,OAAO,IAAI08B,GAAUiB,UAAWx9B,KAAKyQ,SAEtC,GAAC,CAAAxK,IAAA,OAAApG,MAED,SAAMkC,GAEL,IAAMgjF,EAAK/kF,KAAKyQ,SACV8zE,EAAKxiF,EAAE0O,SAOb,OALAs0E,EAAI,GAAMR,EAAI,GAAKQ,EAAI,GAAMR,EAAI,GAAKQ,EAAI,GAAMR,EAAI,GAAKQ,EAAI,GAAMR,EAAI,GACvEQ,EAAI,GAAMR,EAAI,GAAKQ,EAAI,GAAMR,EAAI,GAAKQ,EAAI,GAAMR,EAAI,GAAKQ,EAAI,GAAMR,EAAI,GACvEQ,EAAI,GAAMR,EAAI,GAAKQ,EAAI,GAAMR,EAAI,GAAKQ,EAAI,IAAOR,EAAI,IAAMQ,EAAI,IAAOR,EAAI,IAC1EQ,EAAI,IAAOR,EAAI,IAAMQ,EAAI,IAAOR,EAAI,IAAMQ,EAAI,IAAOR,EAAI,IAAMQ,EAAI,IAAOR,EAAI,IAEvEvkF,IAER,GAAC,CAAAiG,IAAA,eAAApG,MAED,SAAckC,GAEb,IAAMgjF,EAAK/kF,KAAKyQ,SAAU8zE,EAAKxiF,EAAE0O,SAMjC,OAJAs0E,EAAI,IAAOR,EAAI,IACfQ,EAAI,IAAOR,EAAI,IACfQ,EAAI,IAAOR,EAAI,IAERvkF,IAER,GAAC,CAAAiG,IAAA,iBAAApG,MAED,SAAgBkC,GAEf,IAAMwiF,EAAKxiF,EAAE0O,SAWb,OATAzQ,KAAKyE,IAEJ8/E,EAAI,GAAKA,EAAI,GAAKA,EAAI,GAAK,EAC3BA,EAAI,GAAKA,EAAI,GAAKA,EAAI,GAAK,EAC3BA,EAAI,GAAKA,EAAI,GAAKA,EAAI,GAAK,EAC3B,EAAG,EAAG,EAAG,GAIHvkF,IAER,GAAC,CAAAiG,IAAA,eAAApG,MAED,SAAcqxH,EAAOC,EAAOC,GAM3B,OAJAF,EAAMrsE,oBAAqB7kD,KAAM,GACjCmxH,EAAMtsE,oBAAqB7kD,KAAM,GACjCoxH,EAAMvsE,oBAAqB7kD,KAAM,GAE1BA,IAER,GAAC,CAAAiG,IAAA,YAAApG,MAED,SAAWqxH,EAAOC,EAAOC,GASxB,OAPApxH,KAAKyE,IACJysH,EAAMliH,EAAGmiH,EAAMniH,EAAGoiH,EAAMpiH,EAAG,EAC3BkiH,EAAMjiH,EAAGkiH,EAAMliH,EAAGmiH,EAAMniH,EAAG,EAC3BiiH,EAAMhiH,EAAGiiH,EAAMjiH,EAAGkiH,EAAMliH,EAAG,EAC3B,EAAG,EAAG,EAAG,GAGHlP,IAER,GAAC,CAAAiG,IAAA,kBAAApG,MAED,SAAiBkC,GAIhB,IAAMgjF,EAAK/kF,KAAKyQ,SACV8zE,EAAKxiF,EAAE0O,SAEPszH,EAAS,EAAIC,GAAMn/E,oBAAqB9iD,EAAG,GAAIQ,SAC/C0hI,EAAS,EAAID,GAAMn/E,oBAAqB9iD,EAAG,GAAIQ,SAC/C2hI,EAAS,EAAIF,GAAMn/E,oBAAqB9iD,EAAG,GAAIQ,SAsBrD,OApBAwiF,EAAI,GAAMR,EAAI,GAAMw/C,EACpBh/C,EAAI,GAAMR,EAAI,GAAMw/C,EACpBh/C,EAAI,GAAMR,EAAI,GAAMw/C,EACpBh/C,EAAI,GAAM,EAEVA,EAAI,GAAMR,EAAI,GAAM0/C,EACpBl/C,EAAI,GAAMR,EAAI,GAAM0/C,EACpBl/C,EAAI,GAAMR,EAAI,GAAM0/C,EACpBl/C,EAAI,GAAM,EAEVA,EAAI,GAAMR,EAAI,GAAM2/C,EACpBn/C,EAAI,GAAMR,EAAI,GAAM2/C,EACpBn/C,EAAI,IAAOR,EAAI,IAAO2/C,EACtBn/C,EAAI,IAAO,EAEXA,EAAI,IAAO,EACXA,EAAI,IAAO,EACXA,EAAI,IAAO,EACXA,EAAI,IAAO,EAEJ/kF,IAER,GAAC,CAAAiG,IAAA,wBAAApG,MAED,SAAuBs6H,GAEtB,IAAMp1C,EAAK/kF,KAAKyQ,SAEVzB,EAAImrH,EAAMnrH,EAAGC,EAAIkrH,EAAMlrH,EAAGC,EAAIirH,EAAMjrH,EACpCiI,EAAI/C,KAAKgF,IAAKpK,GAAKoD,EAAIgC,KAAK+E,IAAKnK,GACjCoI,EAAIhD,KAAKgF,IAAKnK,GAAKoI,EAAIjD,KAAK+E,IAAKlK,GACjChC,EAAImH,KAAKgF,IAAKlK,GAAKhC,EAAIkH,KAAK+E,IAAKjK,GAEvC,GAAqB,QAAhBirH,EAAMj/G,MAAkB,CAE5B,IAAMqoE,EAAKpsE,EAAIlK,EAAGg7E,EAAK9wE,EAAIjK,EAAGs2E,EAAKpxE,EAAInF,EAAGm7E,EAAKh2E,EAAIlF,EAEnD63E,EAAI,GAAM3tE,EAAInK,EACd83E,EAAI,IAAQ3tE,EAAIlK,EAChB63E,EAAI,GAAM1tE,EAEV0tE,EAAI,GAAMkD,EAAKzE,EAAKnsE,EACpB0tE,EAAI,GAAMxB,EAAK6E,EAAK/wE,EACpB0tE,EAAI,IAAQ3yE,EAAIgF,EAEhB2tE,EAAI,GAAMqD,EAAK7E,EAAKlsE,EACpB0tE,EAAI,GAAMvB,EAAKyE,EAAK5wE,EACpB0tE,EAAI,IAAO5tE,EAAIC,CAEhB,MAAO,GAAqB,QAAhB+iH,EAAMj/G,MAAkB,CAEnC,IAAMuoE,EAAKrsE,EAAInK,EAAGo7E,EAAKjxE,EAAIlK,EAAGw2E,EAAKrsE,EAAIpK,EAAGq7E,EAAKjxE,EAAInK,EAEnD63E,EAAI,GAAMtB,EAAK6E,EAAKl2E,EACpB2yE,EAAI,GAAMrB,EAAKtxE,EAAIi2E,EACnBtD,EAAI,GAAM5tE,EAAIE,EAEd0tE,EAAI,GAAM5tE,EAAIjK,EACd63E,EAAI,GAAM5tE,EAAIlK,EACd83E,EAAI,IAAQ3yE,EAEZ2yE,EAAI,GAAMsD,EAAKj2E,EAAIsxE,EACnBqB,EAAI,GAAMuD,EAAK7E,EAAKrxE,EACpB2yE,EAAI,IAAO5tE,EAAIC,CAEhB,MAAO,GAAqB,QAAhB+iH,EAAMj/G,MAAkB,CAEnC,IAAMuoE,EAAKrsE,EAAInK,EAAGo7E,EAAKjxE,EAAIlK,EAAGw2E,EAAKrsE,EAAIpK,EAAGq7E,EAAKjxE,EAAInK,EAEnD63E,EAAI,GAAMtB,EAAK6E,EAAKl2E,EACpB2yE,EAAI,IAAQ5tE,EAAIjK,EAChB63E,EAAI,GAAMrB,EAAK2E,EAAKj2E,EAEpB2yE,EAAI,GAAMsD,EAAK3E,EAAKtxE,EACpB2yE,EAAI,GAAM5tE,EAAIlK,EACd83E,EAAI,GAAMuD,EAAK7E,EAAKrxE,EAEpB2yE,EAAI,IAAQ5tE,EAAIE,EAChB0tE,EAAI,GAAM3yE,EACV2yE,EAAI,IAAO5tE,EAAIC,CAEhB,MAAO,GAAqB,QAAhB+iH,EAAMj/G,MAAkB,CAEnC,IAAMqoE,EAAKpsE,EAAIlK,EAAGg7E,EAAK9wE,EAAIjK,EAAGs2E,EAAKpxE,EAAInF,EAAGm7E,EAAKh2E,EAAIlF,EAEnD63E,EAAI,GAAM3tE,EAAInK,EACd83E,EAAI,GAAMvB,EAAKnsE,EAAI4wE,EACnBlD,EAAI,GAAMxB,EAAKlsE,EAAI+wE,EAEnBrD,EAAI,GAAM3tE,EAAIlK,EACd63E,EAAI,GAAMqD,EAAK/wE,EAAIksE,EACnBwB,EAAI,GAAMkD,EAAK5wE,EAAImsE,EAEnBuB,EAAI,IAAQ1tE,EACZ0tE,EAAI,GAAM3yE,EAAIgF,EACd2tE,EAAI,IAAO5tE,EAAIC,CAEhB,MAAO,GAAqB,QAAhB+iH,EAAMj/G,MAAkB,CAEnC,IAAM49D,EAAK3hE,EAAIC,EAAGomE,EAAKrmE,EAAIE,EAAG4hE,EAAK7mE,EAAIgF,EAAGsmE,EAAKtrE,EAAIiF,EAEnD0tE,EAAI,GAAM3tE,EAAInK,EACd83E,EAAI,GAAMrH,EAAK5E,EAAK5rE,EACpB63E,EAAI,GAAM9L,EAAK/rE,EAAIswE,EAEnBuH,EAAI,GAAM73E,EACV63E,EAAI,GAAM5tE,EAAIlK,EACd83E,EAAI,IAAQ3yE,EAAInF,EAEhB83E,EAAI,IAAQ1tE,EAAIpK,EAChB83E,EAAI,GAAMvH,EAAKtwE,EAAI+rE,EACnB8L,EAAI,IAAOjM,EAAK4E,EAAKxwE,CAEtB,MAAO,GAAqB,QAAhBitH,EAAMj/G,MAAkB,CAEnC,IAAM49D,EAAK3hE,EAAIC,EAAGomE,EAAKrmE,EAAIE,EAAG4hE,EAAK7mE,EAAIgF,EAAGsmE,EAAKtrE,EAAIiF,EAEnD0tE,EAAI,GAAM3tE,EAAInK,EACd83E,EAAI,IAAQ73E,EACZ63E,EAAI,GAAM1tE,EAAIpK,EAEd83E,EAAI,GAAMjM,EAAK5rE,EAAIwwE,EACnBqH,EAAI,GAAM5tE,EAAIlK,EACd83E,EAAI,GAAMvH,EAAKtwE,EAAI+rE,EAEnB8L,EAAI,GAAM9L,EAAK/rE,EAAIswE,EACnBuH,EAAI,GAAM3yE,EAAInF,EACd83E,EAAI,IAAOrH,EAAKxwE,EAAI4rE,CAErB,CAaA,OAVAiM,EAAI,GAAM,EACVA,EAAI,GAAM,EACVA,EAAI,IAAO,EAGXA,EAAI,IAAO,EACXA,EAAI,IAAO,EACXA,EAAI,IAAO,EACXA,EAAI,IAAO,EAEJ/kF,IAER,GAAC,CAAAiG,IAAA,6BAAApG,MAED,SAA4BqT,GAE3B,OAAOlT,KAAKwjC,QAAS2gG,GAAOjxH,EAAGkxH,GAEhC,GAAC,CAAAn+H,IAAA,SAAApG,MAED,SAAQwkI,EAAKtlI,EAAQu8C,GAEpB,IAAMypC,EAAK/kF,KAAKyQ,SAyChB,OAvCAupH,GAAG5+E,WAAYipF,EAAKtlI,GAEG,IAAlBi7H,GAAGsD,aAIPtD,GAAG9qH,EAAI,GAIR8qH,GAAG1gH,YACHwgH,GAAG90E,aAAc1J,EAAI0+E,IAEE,IAAlBF,GAAGwD,aAImB,IAArBlpH,KAAKgB,IAAKkmC,EAAGpsC,GAEjB8qH,GAAGhrH,GAAK,KAIRgrH,GAAG9qH,GAAK,KAIT8qH,GAAG1gH,YACHwgH,GAAG90E,aAAc1J,EAAI0+E,KAItBF,GAAGxgH,YACHygH,GAAG/0E,aAAcg1E,GAAIF,IAErB/0C,EAAI,GAAM+0C,GAAG9qH,EAAG+1E,EAAI,GAAMg1C,GAAG/qH,EAAG+1E,EAAI,GAAMi1C,GAAGhrH,EAC7C+1E,EAAI,GAAM+0C,GAAG7qH,EAAG81E,EAAI,GAAMg1C,GAAG9qH,EAAG81E,EAAI,GAAMi1C,GAAG/qH,EAC7C81E,EAAI,GAAM+0C,GAAG5qH,EAAG61E,EAAI,GAAMg1C,GAAG7qH,EAAG61E,EAAI,IAAOi1C,GAAG9qH,EAEvClP,IAER,GAAC,CAAAiG,IAAA,WAAApG,MAED,SAAUkC,GAET,OAAO/B,KAAKsxH,iBAAkBtxH,KAAM+B,EAErC,GAAC,CAAAkE,IAAA,cAAApG,MAED,SAAakC,GAEZ,OAAO/B,KAAKsxH,iBAAkBvvH,EAAG/B,KAElC,GAAC,CAAAiG,IAAA,mBAAApG,MAED,SAAkBsX,EAAG/E,GAEpB,IAAMmxE,EAAKpsE,EAAE1G,SACP+yE,EAAKpxE,EAAE3B,SACPs0E,EAAK/kF,KAAKyQ,SAEVQ,EAAMsyE,EAAI,GAAKryE,EAAMqyE,EAAI,GAAKpyE,EAAMoyE,EAAI,GAAK+gD,EAAM/gD,EAAI,IACvDnyE,EAAMmyE,EAAI,GAAKlyE,EAAMkyE,EAAI,GAAKjyE,EAAMiyE,EAAI,GAAKghD,EAAMhhD,EAAI,IACvDhyE,EAAMgyE,EAAI,GAAK/xE,EAAM+xE,EAAI,GAAK9xE,EAAM8xE,EAAI,IAAMihD,EAAMjhD,EAAI,IACxDkhD,EAAMlhD,EAAI,GAAKmhD,EAAMnhD,EAAI,GAAKohD,EAAMphD,EAAI,IAAMqhD,EAAMrhD,EAAI,IAExD7xE,EAAM8xE,EAAI,GAAK7xE,EAAM6xE,EAAI,GAAK5xE,EAAM4xE,EAAI,GAAKqhD,EAAMrhD,EAAI,IACvD3xE,EAAM2xE,EAAI,GAAK1xE,EAAM0xE,EAAI,GAAKzxE,EAAMyxE,EAAI,GAAKshD,EAAMthD,EAAI,IACvDxxE,EAAMwxE,EAAI,GAAKvxE,EAAMuxE,EAAI,GAAKtxE,EAAMsxE,EAAI,IAAMuhD,EAAMvhD,EAAI,IACxDwhD,EAAMxhD,EAAI,GAAKyhD,EAAMzhD,EAAI,GAAK0hD,EAAM1hD,EAAI,IAAM2hD,EAAM3hD,EAAI,IAsB9D,OApBAuB,EAAI,GAAM9zE,EAAMS,EAAMR,EAAMW,EAAMV,EAAMa,EAAMsyH,EAAMU,EACpDjgD,EAAI,GAAM9zE,EAAMU,EAAMT,EAAMY,EAAMX,EAAMc,EAAMqyH,EAAMW,EACpDlgD,EAAI,GAAM9zE,EAAMW,EAAMV,EAAMa,EAAMZ,EAAMe,EAAMoyH,EAAMY,EACpDngD,EAAI,IAAO9zE,EAAM4zH,EAAM3zH,EAAM4zH,EAAM3zH,EAAM4zH,EAAMT,EAAMa,EAErDpgD,EAAI,GAAM3zE,EAAMM,EAAML,EAAMQ,EAAMP,EAAMU,EAAMuyH,EAAMS,EACpDjgD,EAAI,GAAM3zE,EAAMO,EAAMN,EAAMS,EAAMR,EAAMW,EAAMsyH,EAAMU,EACpDlgD,EAAI,GAAM3zE,EAAMQ,EAAMP,EAAMU,EAAMT,EAAMY,EAAMqyH,EAAMW,EACpDngD,EAAI,IAAO3zE,EAAMyzH,EAAMxzH,EAAMyzH,EAAMxzH,EAAMyzH,EAAMR,EAAMY,EAErDpgD,EAAI,GAAMxzE,EAAMG,EAAMF,EAAMK,EAAMJ,EAAMO,EAAMwyH,EAAMQ,EACpDjgD,EAAI,GAAMxzE,EAAMI,EAAMH,EAAMM,EAAML,EAAMQ,EAAMuyH,EAAMS,EACpDlgD,EAAI,IAAOxzE,EAAMK,EAAMJ,EAAMO,EAAMN,EAAMS,EAAMsyH,EAAMU,EACrDngD,EAAI,IAAOxzE,EAAMszH,EAAMrzH,EAAMszH,EAAMrzH,EAAMszH,EAAMP,EAAMW,EAErDpgD,EAAI,GAAM0/C,EAAM/yH,EAAMgzH,EAAM7yH,EAAM8yH,EAAM3yH,EAAM4yH,EAAMI,EACpDjgD,EAAI,GAAM0/C,EAAM9yH,EAAM+yH,EAAM5yH,EAAM6yH,EAAM1yH,EAAM2yH,EAAMK,EACpDlgD,EAAI,IAAO0/C,EAAM7yH,EAAM8yH,EAAM3yH,EAAM4yH,EAAMzyH,EAAM0yH,EAAMM,EACrDngD,EAAI,IAAO0/C,EAAMI,EAAMH,EAAMI,EAAMH,EAAMI,EAAMH,EAAMO,EAE9CnlI,IAER,GAAC,CAAAiG,IAAA,iBAAApG,MAED,SAAgBkN,GAEf,IAAMg4E,EAAK/kF,KAAKyQ,SAOhB,OALAs0E,EAAI,IAAOh4E,EAAGg4E,EAAI,IAAOh4E,EAAGg4E,EAAI,IAAOh4E,EAAGg4E,EAAI,KAAQh4E,EACtDg4E,EAAI,IAAOh4E,EAAGg4E,EAAI,IAAOh4E,EAAGg4E,EAAI,IAAOh4E,EAAGg4E,EAAI,KAAQh4E,EACtDg4E,EAAI,IAAOh4E,EAAGg4E,EAAI,IAAOh4E,EAAGg4E,EAAI,KAAQh4E,EAAGg4E,EAAI,KAAQh4E,EACvDg4E,EAAI,IAAOh4E,EAAGg4E,EAAI,IAAOh4E,EAAGg4E,EAAI,KAAQh4E,EAAGg4E,EAAI,KAAQh4E,EAEhD/M,IAER,GAAC,CAAAiG,IAAA,cAAApG,MAED,WAEC,IAAMklF,EAAK/kF,KAAKyQ,SAEVggH,EAAM1rC,EAAI,GAAK2rC,EAAM3rC,EAAI,GAAK4rC,EAAM5rC,EAAI,GAAKy+C,EAAMz+C,EAAI,IACvD6rC,EAAM7rC,EAAI,GAAK8rC,EAAM9rC,EAAI,GAAK+rC,EAAM/rC,EAAI,GAAK0+C,EAAM1+C,EAAI,IACvDgsC,EAAMhsC,EAAI,GAAKisC,EAAMjsC,EAAI,GAAKksC,EAAMlsC,EAAI,IAAM2+C,EAAM3+C,EAAI,IAM9D,OALYA,EAAI,KAOZy+C,EAAM1S,EAAME,EACXL,EAAM8S,EAAMzS,EACZwS,EAAM3S,EAAMI,EACZP,EAAM+S,EAAMxS,EACZN,EAAME,EAAM6S,EACZhT,EAAMI,EAAM4S,GAZU3+C,EAAI,KAe3B0rC,EAAMK,EAAM4S,EACXjT,EAAMgT,EAAMxS,EACZuS,EAAM5S,EAAMK,EACZN,EAAMC,EAAM8S,EACZ/S,EAAM8S,EAAM1S,EACZyS,EAAM1S,EAAMC,GApByBhsC,EAAI,MAuB1C0rC,EAAMgT,EAAMzS,EACXP,EAAMI,EAAM6S,EACZF,EAAM5S,EAAMI,EACZN,EAAME,EAAM8S,EACZF,EAAM3S,EAAME,EACZL,EAAM+S,EAAM1S,GA5ByChsC,EAAI,MA+B1D4rC,EAAME,EAAME,EACXN,EAAMK,EAAME,EACZP,EAAMI,EAAMI,EACZN,EAAMC,EAAMI,EACZN,EAAME,EAAMK,EACZP,EAAMI,EAAMC,EAKlB,GAAC,CAAA9qH,IAAA,YAAApG,MAED,WAEC,IACIkU,EADEgxE,EAAK/kF,KAAKyQ,SAWhB,OARAsD,EAAMgxE,EAAI,GAAKA,EAAI,GAAMA,EAAI,GAAKA,EAAI,GAAMhxE,EAC5CA,EAAMgxE,EAAI,GAAKA,EAAI,GAAMA,EAAI,GAAKA,EAAI,GAAMhxE,EAC5CA,EAAMgxE,EAAI,GAAKA,EAAI,GAAMA,EAAI,GAAKA,EAAI,GAAMhxE,EAE5CA,EAAMgxE,EAAI,GAAKA,EAAI,GAAMA,EAAI,IAAMA,EAAI,IAAOhxE,EAC9CA,EAAMgxE,EAAI,GAAKA,EAAI,GAAMA,EAAI,IAAMA,EAAI,IAAOhxE,EAC9CA,EAAMgxE,EAAI,IAAMA,EAAI,IAAOA,EAAI,IAAMA,EAAI,IAAOhxE,EAEzC/T,IAER,GAAC,CAAAiG,IAAA,cAAApG,MAED,SAAamP,EAAGC,EAAGC,GAElB,IAAM61E,EAAK/kF,KAAKyQ,SAgBhB,OAdKzB,EAAEiuH,WAENl4C,EAAI,IAAO/1E,EAAEA,EACb+1E,EAAI,IAAO/1E,EAAEC,EACb81E,EAAI,IAAO/1E,EAAEE,IAIb61E,EAAI,IAAO/1E,EACX+1E,EAAI,IAAO91E,EACX81E,EAAI,IAAO71E,GAILlP,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,WAGC,IAAMklF,EAAK/kF,KAAKyQ,SAEfggH,EAAM1rC,EAAI,GAAK6rC,EAAM7rC,EAAI,GAAKgsC,EAAMhsC,EAAI,GAAK4+C,EAAM5+C,EAAI,GACvD2rC,EAAM3rC,EAAI,GAAK8rC,EAAM9rC,EAAI,GAAKisC,EAAMjsC,EAAI,GAAK6+C,EAAM7+C,EAAI,GACvD4rC,EAAM5rC,EAAI,GAAK+rC,EAAM/rC,EAAI,GAAKksC,EAAMlsC,EAAI,IAAM8+C,EAAM9+C,EAAI,IACxDy+C,EAAMz+C,EAAI,IAAM0+C,EAAM1+C,EAAI,IAAM2+C,EAAM3+C,EAAI,IAAM++C,EAAM/+C,EAAI,IAE1DwsC,EAAMT,EAAM4S,EAAME,EAAMH,EAAMxS,EAAM2S,EAAMH,EAAMzS,EAAM6S,EAAMhT,EAAM6S,EAAMG,EAAM/S,EAAME,EAAM8S,EAAMjT,EAAMI,EAAM6S,EAC5GtS,EAAMgS,EAAMvS,EAAM2S,EAAMjT,EAAM+S,EAAME,EAAMJ,EAAMxS,EAAM6S,EAAMnT,EAAMgT,EAAMG,EAAMlT,EAAMK,EAAM8S,EAAMpT,EAAMO,EAAM6S,EAC5GrS,EAAMd,EAAM8S,EAAMG,EAAMJ,EAAM1S,EAAM8S,EAAMJ,EAAM3S,EAAMgT,EAAMnT,EAAM+S,EAAMI,EAAMlT,EAAME,EAAMiT,EAAMpT,EAAMI,EAAMgT,EAC5GsB,EAAM5B,EAAM1S,EAAME,EAAML,EAAM8S,EAAMzS,EAAMwS,EAAM3S,EAAMI,EAAMP,EAAM+S,EAAMxS,EAAMN,EAAME,EAAM6S,EAAMhT,EAAMI,EAAM4S,EAEvGhS,EAAMjB,EAAMc,EAAMX,EAAMY,EAAMT,EAAMU,EAAMkS,EAAMyB,EAEtD,GAAa,IAAR1T,EAAY,OAAO1xH,KAAKyE,IAAK,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAE/E,IAAMktH,EAAS,EAAID,EAsBnB,OApBA3sC,EAAI,GAAMwsC,EAAMI,EAChB5sC,EAAI,IAAQ0+C,EAAMxS,EAAM0S,EAAM7S,EAAM4S,EAAMC,EAAMF,EAAM1S,EAAM8S,EAAMjT,EAAM8S,EAAMG,EAAM/S,EAAMC,EAAM+S,EAAMlT,EAAMK,EAAM6S,GAAQnS,EAC1H5sC,EAAI,IAAQ8rC,EAAM6S,EAAMC,EAAMF,EAAMzS,EAAM2S,EAAMF,EAAM1S,EAAM6S,EAAMhT,EAAM8S,EAAME,EAAM/S,EAAME,EAAM+S,EAAMlT,EAAMI,EAAM8S,GAAQnS,EAC1H5sC,EAAI,IAAQ+rC,EAAME,EAAM2S,EAAM9S,EAAMI,EAAM0S,EAAM7S,EAAMC,EAAM6S,EAAMhT,EAAMK,EAAM2S,EAAM/S,EAAME,EAAM8S,EAAMjT,EAAMI,EAAM6S,GAAQlS,EAE1H5sC,EAAI,GAAMysC,EAAMG,EAChB5sC,EAAI,IAAQ4rC,EAAM+S,EAAMC,EAAMH,EAAMvS,EAAM0S,EAAMH,EAAMzS,EAAM8S,EAAMpT,EAAMiT,EAAMG,EAAMlT,EAAMI,EAAM+S,EAAMrT,EAAMQ,EAAM6S,GAAQnS,EAC1H5sC,EAAI,IAAQy+C,EAAMxS,EAAM2S,EAAMjT,EAAMgT,EAAMC,EAAMH,EAAMzS,EAAM6S,EAAMnT,EAAMiT,EAAME,EAAMlT,EAAMK,EAAM+S,EAAMrT,EAAMO,EAAM8S,GAAQnS,EAC1H5sC,EAAI,IAAQ2rC,EAAMO,EAAM0S,EAAMhT,EAAMK,EAAM2S,EAAMhT,EAAMI,EAAM6S,EAAMnT,EAAMQ,EAAM2S,EAAMlT,EAAMK,EAAM8S,EAAMpT,EAAMO,EAAM6S,GAAQlS,EAE1H5sC,EAAI,GAAM0sC,EAAME,EAChB5sC,EAAI,IAAQy+C,EAAM1S,EAAM6S,EAAMhT,EAAM8S,EAAME,EAAMH,EAAM5S,EAAMiT,EAAMpT,EAAMgT,EAAMI,EAAMlT,EAAMC,EAAMkT,EAAMrT,EAAMK,EAAMgT,GAAQnS,EAC1H5sC,EAAI,KAAS2rC,EAAM+S,EAAME,EAAMH,EAAM3S,EAAM8S,EAAMH,EAAM5S,EAAMgT,EAAMnT,EAAMgT,EAAMG,EAAMlT,EAAME,EAAMkT,EAAMrT,EAAMI,EAAMiT,GAAQnS,EAC3H5sC,EAAI,KAAS4rC,EAAME,EAAM8S,EAAMjT,EAAMI,EAAM6S,EAAMhT,EAAMC,EAAMgT,EAAMnT,EAAMK,EAAM8S,EAAMlT,EAAME,EAAMiT,EAAMpT,EAAMI,EAAMgT,GAAQlS,EAE3H5sC,EAAI,IAAOqgD,EAAMzT,EACjB5sC,EAAI,KAAS4rC,EAAM8S,EAAM1S,EAAMyS,EAAM1S,EAAMC,EAAMyS,EAAM5S,EAAMK,EAAMR,EAAMgT,EAAMxS,EAAMN,EAAMC,EAAM8S,EAAMjT,EAAMK,EAAM4S,GAAQ/R,EAC3H5sC,EAAI,KAASy+C,EAAM3S,EAAME,EAAML,EAAM+S,EAAM1S,EAAMyS,EAAM5S,EAAMI,EAAMP,EAAMgT,EAAMzS,EAAMN,EAAME,EAAM8S,EAAMjT,EAAMI,EAAM6S,GAAQ/R,EAC3H5sC,EAAI,KAAS2rC,EAAMI,EAAMC,EAAMJ,EAAME,EAAME,EAAMJ,EAAMC,EAAMI,EAAMP,EAAMK,EAAME,EAAMN,EAAME,EAAMK,EAAMR,EAAMI,EAAMI,GAAQU,EAEpH3xH,IAER,GAAC,CAAAiG,IAAA,QAAApG,MAED,SAAO+Q,GAEN,IAAMm0E,EAAK/kF,KAAKyQ,SACVzB,EAAI4B,EAAE5B,EAAGC,EAAI2B,EAAE3B,EAAGC,EAAI0B,EAAE1B,EAO9B,OALA61E,EAAI,IAAO/1E,EAAG+1E,EAAI,IAAO91E,EAAG81E,EAAI,IAAO71E,EACvC61E,EAAI,IAAO/1E,EAAG+1E,EAAI,IAAO91E,EAAG81E,EAAI,IAAO71E,EACvC61E,EAAI,IAAO/1E,EAAG+1E,EAAI,IAAO91E,EAAG81E,EAAI,KAAQ71E,EACxC61E,EAAI,IAAO/1E,EAAG+1E,EAAI,IAAO91E,EAAG81E,EAAI,KAAQ71E,EAEjClP,IAER,GAAC,CAAAiG,IAAA,oBAAApG,MAED,WAEC,IAAMklF,EAAK/kF,KAAKyQ,SAEV40H,EAAWtgD,EAAI,GAAMA,EAAI,GAAMA,EAAI,GAAMA,EAAI,GAAMA,EAAI,GAAMA,EAAI,GACjEugD,EAAWvgD,EAAI,GAAMA,EAAI,GAAMA,EAAI,GAAMA,EAAI,GAAMA,EAAI,GAAMA,EAAI,GACjEwgD,EAAWxgD,EAAI,GAAMA,EAAI,GAAMA,EAAI,GAAMA,EAAI,GAAMA,EAAI,IAAOA,EAAI,IAExE,OAAO3wE,KAAKC,KAAMD,KAAKuC,IAAK0uH,EAAUC,EAAUC,GAEjD,GAAC,CAAAt/H,IAAA,kBAAApG,MAED,SAAiBmP,EAAGC,EAAGC,GAWtB,OATAlP,KAAKyE,IAEJ,EAAG,EAAG,EAAGuK,EACT,EAAG,EAAG,EAAGC,EACT,EAAG,EAAG,EAAGC,EACT,EAAG,EAAG,EAAG,GAIHlP,IAER,GAAC,CAAAiG,IAAA,gBAAApG,MAED,SAAew/C,GAEd,IAAMjoC,EAAIhD,KAAKgF,IAAKimC,GAAStyC,EAAIqH,KAAK+E,IAAKkmC,GAW3C,OATAr/C,KAAKyE,IAEJ,EAAG,EAAG,EAAG,EACT,EAAG2S,GAAKrK,EAAG,EACX,EAAGA,EAAGqK,EAAG,EACT,EAAG,EAAG,EAAG,GAIHpX,IAER,GAAC,CAAAiG,IAAA,gBAAApG,MAED,SAAew/C,GAEd,IAAMjoC,EAAIhD,KAAKgF,IAAKimC,GAAStyC,EAAIqH,KAAK+E,IAAKkmC,GAW3C,OATAr/C,KAAKyE,IAEH2S,EAAG,EAAGrK,EAAG,EACT,EAAG,EAAG,EAAG,GACRA,EAAG,EAAGqK,EAAG,EACV,EAAG,EAAG,EAAG,GAIJpX,IAER,GAAC,CAAAiG,IAAA,gBAAApG,MAED,SAAew/C,GAEd,IAAMjoC,EAAIhD,KAAKgF,IAAKimC,GAAStyC,EAAIqH,KAAK+E,IAAKkmC,GAW3C,OATAr/C,KAAKyE,IAEJ2S,GAAKrK,EAAG,EAAG,EACXA,EAAGqK,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,GAIHpX,IAER,GAAC,CAAAiG,IAAA,mBAAApG,MAED,SAAkB+iB,EAAM1J,GAIvB,IAAM9B,EAAIhD,KAAKgF,IAAKF,GACdnM,EAAIqH,KAAK+E,IAAKD,GACd/G,EAAI,EAAIiF,EACRpI,EAAI4T,EAAK5T,EAAGC,EAAI2T,EAAK3T,EAAGC,EAAI0T,EAAK1T,EACjC+gB,EAAK9d,EAAInD,EAAGkhB,EAAK/d,EAAIlD,EAW3B,OATAjP,KAAKyE,IAEJwrB,EAAKjhB,EAAIoI,EAAG6Y,EAAKhhB,EAAIlC,EAAImC,EAAG+gB,EAAK/gB,EAAInC,EAAIkC,EAAG,EAC5CghB,EAAKhhB,EAAIlC,EAAImC,EAAGghB,EAAKjhB,EAAImI,EAAG8Y,EAAKhhB,EAAInC,EAAIiC,EAAG,EAC5CihB,EAAK/gB,EAAInC,EAAIkC,EAAGihB,EAAKhhB,EAAInC,EAAIiC,EAAGmD,EAAIjD,EAAIA,EAAIkI,EAAG,EAC/C,EAAG,EAAG,EAAG,GAIHpX,IAER,GAAC,CAAAiG,IAAA,YAAApG,MAED,SAAWmP,EAAGC,EAAGC,GAWhB,OATAlP,KAAKyE,IAEJuK,EAAG,EAAG,EAAG,EACT,EAAGC,EAAG,EAAG,EACT,EAAG,EAAGC,EAAG,EACT,EAAG,EAAG,EAAG,GAIHlP,IAER,GAAC,CAAAiG,IAAA,YAAApG,MAED,SAAW0T,EAAIC,EAAIgyH,EAAI9xH,EAAI+xH,EAAIC,GAW9B,OATA1lI,KAAKyE,IAEJ,EAAG+gI,EAAIC,EAAI,EACXlyH,EAAI,EAAGmyH,EAAI,EACXlyH,EAAIE,EAAI,EAAG,EACX,EAAG,EAAG,EAAG,GAIH1T,IAER,GAAC,CAAAiG,IAAA,UAAApG,MAED,SAAS4F,EAAUyQ,EAAYyQ,GAE9B,IAAMo+D,EAAK/kF,KAAKyQ,SAEVzB,EAAIkH,EAAW4jH,GAAI7qH,EAAIiH,EAAW6jH,GAAI7qH,EAAIgH,EAAW8jH,GAAIv3H,EAAIyT,EAAW+jH,GACxE9mH,EAAKnE,EAAIA,EAAGoE,EAAKnE,EAAIA,EAAGoE,EAAKnE,EAAIA,EACjCoE,EAAKtE,EAAImE,EAAII,EAAKvE,EAAIoE,EAAII,EAAKxE,EAAIqE,EACnCI,EAAKxE,EAAImE,EAAIM,EAAKzE,EAAIoE,EAAIM,EAAKzE,EAAImE,EACnCO,EAAKnR,EAAI0Q,EAAIU,EAAKpR,EAAI2Q,EAAIU,EAAKrR,EAAI4Q,EAEnCmV,EAAK7B,EAAM3X,EAAGyZ,EAAK9B,EAAM1X,EAAGyZ,EAAK/B,EAAMzX,EAsB7C,OApBA61E,EAAI,IAAQ,GAAMtxE,EAAKE,IAAS6U,EAChCu8D,EAAI,IAAQxxE,EAAKO,GAAO0U,EACxBu8D,EAAI,IAAQvxE,EAAKK,GAAO2U,EACxBu8D,EAAI,GAAM,EAEVA,EAAI,IAAQxxE,EAAKO,GAAO2U,EACxBs8D,EAAI,IAAQ,GAAMzxE,EAAKK,IAAS8U,EAChCs8D,EAAI,IAAQrxE,EAAKE,GAAO6U,EACxBs8D,EAAI,GAAM,EAEVA,EAAI,IAAQvxE,EAAKK,GAAO6U,EACxBq8D,EAAI,IAAQrxE,EAAKE,GAAO8U,EACxBq8D,EAAI,KAAS,GAAMzxE,EAAKG,IAASiV,EACjCq8D,EAAI,IAAO,EAEXA,EAAI,IAAOt/E,EAASuJ,EACpB+1E,EAAI,IAAOt/E,EAASwJ,EACpB81E,EAAI,IAAOt/E,EAASyJ,EACpB61E,EAAI,IAAO,EAEJ/kF,IAER,GAAC,CAAAiG,IAAA,YAAApG,MAED,SAAW4F,EAAUyQ,EAAYyQ,GAEhC,IAAMo+D,EAAK/kF,KAAKyQ,SAEZ+X,EAAKw7G,GAAMv/H,IAAKsgF,EAAI,GAAKA,EAAI,GAAKA,EAAI,IAAMxiF,SAC1CkmB,EAAKu7G,GAAMv/H,IAAKsgF,EAAI,GAAKA,EAAI,GAAKA,EAAI,IAAMxiF,SAC5CmmB,EAAKs7G,GAAMv/H,IAAKsgF,EAAI,GAAKA,EAAI,GAAKA,EAAI,KAAOxiF,SAGvCvC,KAAK2lI,cACN,IAAIn9G,GAAOA,GAEtB/iB,EAASuJ,EAAI+1E,EAAI,IACjBt/E,EAASwJ,EAAI81E,EAAI,IACjBt/E,EAASyJ,EAAI61E,EAAI,IAGjB6gD,GAAM3hI,KAAMjE,MAEZ,IAAM6lI,EAAQ,EAAIr9G,EACZs9G,EAAQ,EAAIr9G,EACZs9G,EAAQ,EAAIr9G,EAoBlB,OAlBAk9G,GAAMn1H,SAAU,IAAOo1H,EACvBD,GAAMn1H,SAAU,IAAOo1H,EACvBD,GAAMn1H,SAAU,IAAOo1H,EAEvBD,GAAMn1H,SAAU,IAAOq1H,EACvBF,GAAMn1H,SAAU,IAAOq1H,EACvBF,GAAMn1H,SAAU,IAAOq1H,EAEvBF,GAAMn1H,SAAU,IAAOs1H,EACvBH,GAAMn1H,SAAU,IAAOs1H,EACvBH,GAAMn1H,SAAU,KAAQs1H,EAExB7vH,EAAW8vH,sBAAuBJ,IAElCj/G,EAAM3X,EAAIwZ,EACV7B,EAAM1X,EAAIwZ,EACV9B,EAAMzX,EAAIwZ,EAEH1oB,IAER,GAAC,CAAAiG,IAAA,kBAAApG,MAED,SAAiBgmD,EAAMD,EAAOG,EAAKC,EAAQ3U,EAAME,GAEhD,IAAMwzC,EAAK/kF,KAAKyQ,SACVzB,EAAI,EAAIqiC,GAASuU,EAAQC,GACzB52C,EAAI,EAAIoiC,GAAS0U,EAAMC,GAEvB7uC,GAAMyuC,EAAQC,IAAWD,EAAQC,GACjCzzC,GAAM2zC,EAAMC,IAAaD,EAAMC,GAC/B5uC,IAAQm6B,EAAMF,IAAWE,EAAMF,GAC/Bh6B,GAAM,EAAIk6B,EAAMF,GAASE,EAAMF,GAOrC,OALA0zC,EAAI,GAAM/1E,EAAG+1E,EAAI,GAAM,EAAGA,EAAI,GAAM5tE,EAAG4tE,EAAI,IAAO,EAClDA,EAAI,GAAM,EAAGA,EAAI,GAAM91E,EAAG81E,EAAI,GAAM3yE,EAAG2yE,EAAI,IAAO,EAClDA,EAAI,GAAM,EAAGA,EAAI,GAAM,EAAGA,EAAI,IAAO3tE,EAAG2tE,EAAI,IAAO1tE,EACnD0tE,EAAI,GAAM,EAAGA,EAAI,GAAM,EAAGA,EAAI,KAAS,EAAGA,EAAI,IAAO,EAE9C/kF,IAER,GAAC,CAAAiG,IAAA,mBAAApG,MAED,SAAkBgmD,EAAMD,EAAOG,EAAKC,EAAQ3U,EAAME,GAEjD,IAAMwzC,EAAK/kF,KAAKyQ,SACVhO,EAAI,GAAQmjD,EAAQC,GACpBtuC,EAAI,GAAQwuC,EAAMC,GAClBvzC,EAAI,GAAQ8+B,EAAMF,GAElBriC,GAAM42C,EAAQC,GAASpjD,EACvBwM,GAAM82C,EAAMC,GAAWzuC,EACvBrI,GAAMqiC,EAAMF,GAAS5+B,EAO3B,OALAsyE,EAAI,GAAM,EAAItiF,EAAGsiF,EAAI,GAAM,EAAGA,EAAI,GAAM,EAAGA,EAAI,KAAS/1E,EACxD+1E,EAAI,GAAM,EAAGA,EAAI,GAAM,EAAIxtE,EAAGwtE,EAAI,GAAM,EAAGA,EAAI,KAAS91E,EACxD81E,EAAI,GAAM,EAAGA,EAAI,GAAM,EAAGA,EAAI,KAAS,EAAItyE,EAAGsyE,EAAI,KAAS71E,EAC3D61E,EAAI,GAAM,EAAGA,EAAI,GAAM,EAAGA,EAAI,IAAO,EAAGA,EAAI,IAAO,EAE5C/kF,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQgR,GAKP,IAHA,IAAMk0E,EAAK/kF,KAAKyQ,SACV8zE,EAAK1zE,EAAOJ,SAER7M,EAAI,EAAGA,EAAI,GAAIA,IAExB,GAAKmhF,EAAInhF,KAAQ2gF,EAAI3gF,GAAM,OAAO,EAInC,OAAO,CAER,GAAC,CAAAqC,IAAA,YAAApG,MAED,SAAWu/D,GAEV,IAF8B,IAAbx4C,EAAMhmB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAEhBgD,EAAI,EAAGA,EAAI,GAAIA,IAExB5D,KAAKyQ,SAAU7M,GAAMw7D,EAAOx7D,EAAIgjB,GAIjC,OAAO5mB,IAER,GAAC,CAAAiG,IAAA,UAAApG,MAED,WAAkC,IAAzBu/D,EAAKx+D,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAIgmB,EAAMhmB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAEvBmkF,EAAK/kF,KAAKyQ,SAsBhB,OApBA2uD,EAAOx4C,GAAWm+D,EAAI,GACtB3lB,EAAOx4C,EAAS,GAAMm+D,EAAI,GAC1B3lB,EAAOx4C,EAAS,GAAMm+D,EAAI,GAC1B3lB,EAAOx4C,EAAS,GAAMm+D,EAAI,GAE1B3lB,EAAOx4C,EAAS,GAAMm+D,EAAI,GAC1B3lB,EAAOx4C,EAAS,GAAMm+D,EAAI,GAC1B3lB,EAAOx4C,EAAS,GAAMm+D,EAAI,GAC1B3lB,EAAOx4C,EAAS,GAAMm+D,EAAI,GAE1B3lB,EAAOx4C,EAAS,GAAMm+D,EAAI,GAC1B3lB,EAAOx4C,EAAS,GAAMm+D,EAAI,GAC1B3lB,EAAOx4C,EAAS,IAAOm+D,EAAI,IAC3B3lB,EAAOx4C,EAAS,IAAOm+D,EAAI,IAE3B3lB,EAAOx4C,EAAS,IAAOm+D,EAAI,IAC3B3lB,EAAOx4C,EAAS,IAAOm+D,EAAI,IAC3B3lB,EAAOx4C,EAAS,IAAOm+D,EAAI,IAC3B3lB,EAAOx4C,EAAS,IAAOm+D,EAAI,IAEpB3lB,CAER,KAAC7iC,CAAA,CA70BW,GAi1BPynG,GAAsB,IAAI1nG,GAC1BspG,GAAsB,IAAIrpG,GAC1B4nG,GAAsB,IAAI7nG,GAAS,EAAG,EAAG,GACzC8nG,GAAqB,IAAI9nG,GAAS,EAAG,EAAG,GACxCw9F,GAAmB,IAAIx9F,GACvBy9F,GAAmB,IAAIz9F,GACvB09F,GAAmB,IAAI19F,GAEvB2pG,GAA0B,IAAI1pG,GAC9B2pG,GAA8B,IAAI7sG,GAElC+D,GAAK,SAAA+oG,GAEV,SAAA/oG,IAA+D,IAAlDpuB,EAACpO,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGqO,EAACrO,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGsO,EAACtO,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGsa,EAAKta,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAGw8B,EAAMgpG,cAAY19H,EAAAA,EAAAA,GAAA,KAAA00B,GAE3Dp9B,KAAKqmI,SAAU,EAEfrmI,KAAK85H,GAAK9qH,EACVhP,KAAK+5H,GAAK9qH,EACVjP,KAAKg6H,GAAK9qH,EACVlP,KAAKo6H,OAASl/G,CAEf,CA0SC,OA1SAvQ,EAAAA,EAAAA,GAAAyyB,EAAA,EAAAn3B,IAAA,IAAAzB,IAED,WAEC,OAAOxE,KAAK85H,EAEb,EAACr1H,IAED,SAAO5E,GAENG,KAAK85H,GAAKj6H,EACVG,KAAKk6H,mBAEN,GAAC,CAAAj0H,IAAA,IAAAzB,IAED,WAEC,OAAOxE,KAAK+5H,EAEb,EAACt1H,IAED,SAAO5E,GAENG,KAAK+5H,GAAKl6H,EACVG,KAAKk6H,mBAEN,GAAC,CAAAj0H,IAAA,IAAAzB,IAED,WAEC,OAAOxE,KAAKg6H,EAEb,EAACv1H,IAED,SAAO5E,GAENG,KAAKg6H,GAAKn6H,EACVG,KAAKk6H,mBAEN,GAAC,CAAAj0H,IAAA,QAAAzB,IAED,WAEC,OAAOxE,KAAKo6H,MAEb,EAAC31H,IAED,SAAW5E,GAEVG,KAAKo6H,OAASv6H,EACdG,KAAKk6H,mBAEN,GAAC,CAAAj0H,IAAA,MAAApG,MAED,SAAKmP,EAAGC,EAAGC,GAAyB,IAAtBgM,EAAKta,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAGZ,KAAKo6H,OAS1B,OAPAp6H,KAAK85H,GAAK9qH,EACVhP,KAAK+5H,GAAK9qH,EACVjP,KAAKg6H,GAAK9qH,EACVlP,KAAKo6H,OAASl/G,EAEdlb,KAAKk6H,oBAEEl6H,IAER,GAAC,CAAAiG,IAAA,QAAApG,MAED,WAEC,OAAO,IAAIG,KAAK4zD,YAAa5zD,KAAK85H,GAAI95H,KAAK+5H,GAAI/5H,KAAKg6H,GAAIh6H,KAAKo6H,OAE9D,GAAC,CAAAn0H,IAAA,OAAApG,MAED,SAAMs6H,GASL,OAPAn6H,KAAK85H,GAAKK,EAAML,GAChB95H,KAAK+5H,GAAKI,EAAMJ,GAChB/5H,KAAKg6H,GAAKG,EAAMH,GAChBh6H,KAAKo6H,OAASD,EAAMC,OAEpBp6H,KAAKk6H,oBAEEl6H,IAER,GAAC,CAAAiG,IAAA,wBAAApG,MAED,SAAuBkC,GAAwC,IAArCmZ,EAAKta,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAGZ,KAAKo6H,OAAQ/nF,IAAMzxC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,KAAAA,UAAA,GAI9CmkF,EAAKhjF,EAAE0O,SACP6mH,EAAMvyC,EAAI,GAAKwyC,EAAMxyC,EAAI,GAAKyyC,EAAMzyC,EAAI,GACxC0yC,EAAM1yC,EAAI,GAAK2yC,EAAM3yC,EAAI,GAAK4yC,EAAM5yC,EAAI,GACxC6yC,EAAM7yC,EAAI,GAAK8yC,EAAM9yC,EAAI,GAAK+yC,EAAM/yC,EAAI,IAE9C,OAAS7pE,GAER,IAAK,MAEJlb,KAAK+5H,GAAK3lH,KAAKuH,KAAM+xG,GAAO8J,GAAO,EAAG,IAEjCpjH,KAAKgB,IAAKoiH,GAAQ,UAEtBx3H,KAAK85H,GAAK1lH,KAAKmH,OAASo8G,EAAKG,GAC7B93H,KAAKg6H,GAAK5lH,KAAKmH,OAASg8G,EAAKD,KAI7Bt3H,KAAK85H,GAAK1lH,KAAKmH,MAAOs8G,EAAKH,GAC3B13H,KAAKg6H,GAAK,GAIX,MAED,IAAK,MAEJh6H,KAAK85H,GAAK1lH,KAAKuH,MAAQ+xG,GAAOiK,GAAO,EAAG,IAEnCvjH,KAAKgB,IAAKuiH,GAAQ,UAEtB33H,KAAK+5H,GAAK3lH,KAAKmH,MAAOi8G,EAAKM,GAC3B93H,KAAKg6H,GAAK5lH,KAAKmH,MAAOk8G,EAAKC,KAI3B13H,KAAK+5H,GAAK3lH,KAAKmH,OAASq8G,EAAKN,GAC7Bt3H,KAAKg6H,GAAK,GAIX,MAED,IAAK,MAEJh6H,KAAK85H,GAAK1lH,KAAKuH,KAAM+xG,GAAOmK,GAAO,EAAG,IAEjCzjH,KAAKgB,IAAKyiH,GAAQ,UAEtB73H,KAAK+5H,GAAK3lH,KAAKmH,OAASq8G,EAAKE,GAC7B93H,KAAKg6H,GAAK5lH,KAAKmH,OAASg8G,EAAKG,KAI7B13H,KAAK+5H,GAAK,EACV/5H,KAAKg6H,GAAK5lH,KAAKmH,MAAOk8G,EAAKH,IAI5B,MAED,IAAK,MAEJt3H,KAAK+5H,GAAK3lH,KAAKuH,MAAQ+xG,GAAOkK,GAAO,EAAG,IAEnCxjH,KAAKgB,IAAKwiH,GAAQ,UAEtB53H,KAAK85H,GAAK1lH,KAAKmH,MAAOs8G,EAAKC,GAC3B93H,KAAKg6H,GAAK5lH,KAAKmH,MAAOk8G,EAAKH,KAI3Bt3H,KAAK85H,GAAK,EACV95H,KAAKg6H,GAAK5lH,KAAKmH,OAASg8G,EAAKG,IAI9B,MAED,IAAK,MAEJ13H,KAAKg6H,GAAK5lH,KAAKuH,KAAM+xG,GAAO+J,GAAO,EAAG,IAEjCrjH,KAAKgB,IAAKqiH,GAAQ,UAEtBz3H,KAAK85H,GAAK1lH,KAAKmH,OAASo8G,EAAKD,GAC7B13H,KAAK+5H,GAAK3lH,KAAKmH,OAASq8G,EAAKN,KAI7Bt3H,KAAK85H,GAAK,EACV95H,KAAK+5H,GAAK3lH,KAAKmH,MAAOi8G,EAAKM,IAI5B,MAED,IAAK,MAEJ93H,KAAKg6H,GAAK5lH,KAAKuH,MAAQ+xG,GAAO6J,GAAO,EAAG,IAEnCnjH,KAAKgB,IAAKmiH,GAAQ,UAEtBv3H,KAAK85H,GAAK1lH,KAAKmH,MAAOs8G,EAAKH,GAC3B13H,KAAK+5H,GAAK3lH,KAAKmH,MAAOi8G,EAAKF,KAI3Bt3H,KAAK85H,GAAK1lH,KAAKmH,OAASo8G,EAAKG,GAC7B93H,KAAK+5H,GAAK,GAIX,MAED,QAECl3H,QAAQC,KAAM,uEAAyEoY,GAQzF,OAJAlb,KAAKo6H,OAASl/G,GAEE,IAAXm3B,GAAkBryC,KAAKk6H,oBAErBl6H,IAER,GAAC,CAAAiG,IAAA,oBAAApG,MAED,SAAmBqT,EAAGgI,EAAOm3B,GAI5B,OAFA4zF,GAAUK,2BAA4BpzH,GAE/BlT,KAAKgmI,sBAAuBC,GAAW/qH,EAAOm3B,EAEtD,GAAC,CAAApsC,IAAA,iBAAApG,MAED,SAAgB+Q,GAAyB,IAAtBsK,EAAKta,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAGZ,KAAKo6H,OAE/B,OAAOp6H,KAAKyE,IAAKmM,EAAE5B,EAAG4B,EAAE3B,EAAG2B,EAAE1B,EAAGgM,EAEjC,GAAC,CAAAjV,IAAA,UAAApG,MAED,SAAS0mI,GAMR,OAFAL,GAAc/I,aAAcn9H,MAErBA,KAAKu9B,kBAAmB2oG,GAAeK,EAE/C,GAAC,CAAAtgI,IAAA,SAAApG,MAED,SAAQs6H,GAEP,OAASA,EAAML,KAAO95H,KAAK85H,IAAUK,EAAMJ,KAAO/5H,KAAK+5H,IAAUI,EAAMH,KAAOh6H,KAAKg6H,IAAUG,EAAMC,SAAWp6H,KAAKo6H,MAEpH,GAAC,CAAAn0H,IAAA,YAAApG,MAED,SAAWu/D,GASV,OAPAp/D,KAAK85H,GAAK16D,EAAO,GACjBp/D,KAAK+5H,GAAK36D,EAAO,GACjBp/D,KAAKg6H,GAAK56D,EAAO,QACGj+D,IAAfi+D,EAAO,KAAoBp/D,KAAKo6H,OAASh7D,EAAO,IAErDp/D,KAAKk6H,oBAEEl6H,IAER,GAAC,CAAAiG,IAAA,UAAApG,MAED,WAAkC,IAAzBu/D,EAAKx+D,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAIgmB,EAAMhmB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAO7B,OALAw+D,EAAOx4C,GAAW5mB,KAAK85H,GACvB16D,EAAOx4C,EAAS,GAAM5mB,KAAK+5H,GAC3B36D,EAAOx4C,EAAS,GAAM5mB,KAAKg6H,GAC3B56D,EAAOx4C,EAAS,GAAM5mB,KAAKo6H,OAEpBh7D,CAER,GAAC,CAAAn5D,IAAA,YAAApG,MAED,SAAWmpB,GAIV,OAFAhpB,KAAKk6H,kBAAoBlxG,EAElBhpB,IAER,GAAC,CAAAiG,IAAA,oBAAApG,MAED,WAAqB,GAAC,CAAAoG,IAAAkgI,EAAAtmI,OAAAswH,EAAAA,EAAAA,KAAAC,MAEtB,SAAAvwH,IAAA,OAAAswH,EAAAA,EAAAA,KAAAE,MAAA,SAAAmW,GAAA,cAAAA,EAAAv+D,KAAAu+D,EAAAp5E,MAAA,OAEC,OAFDo5E,EAAAp5E,KAAA,EAEOptD,KAAK85H,GAAE,OACb,OADa0M,EAAAp5E,KAAA,EACPptD,KAAK+5H,GAAE,OACb,OADayM,EAAAp5E,KAAA,EACPptD,KAAKg6H,GAAE,OACb,OADawM,EAAAp5E,KAAA,EACPptD,KAAKo6H,OAAM,wBAAAoM,EAAAhrE,OAAA,GAAA37D,EAAA,UAIlB,CAAAoG,IAAA,YAAApG,MAEA,WAECgD,QAAQkC,MAAO,iFAEhB,KAACq4B,CAAA,CArTS,CAsSP6vB,OAAOC,UAmBX9vB,GAAMgpG,aAAe,MACrBhpG,GAAMqpG,eAAiB,CAAE,MAAO,MAAO,MAAO,MAAO,MAAO,OAAQ,IAE9DC,GAAM,WAEX,SAAAA,KAAch+H,EAAAA,EAAAA,GAAA,KAAAg+H,GAEb1mI,KAAKm0D,KAAO,CAEb,CAgDC,OAhDAxpD,EAAAA,EAAAA,GAAA+7H,EAAA,EAAAzgI,IAAA,MAAApG,MAED,SAAKurG,GAEJprG,KAAKm0D,MAAS,GAAKi3C,EAAU,KAAQ,CAEtC,GAAC,CAAAnlG,IAAA,SAAApG,MAED,SAAQurG,GAEPprG,KAAKm0D,MAAQ,GAAKi3C,EAAU,CAE7B,GAAC,CAAAnlG,IAAA,YAAApG,MAED,WAECG,KAAKm0D,MAAO,CAEb,GAAC,CAAAluD,IAAA,SAAApG,MAED,SAAQurG,GAEPprG,KAAKm0D,MAAQ,GAAKi3C,EAAU,CAE7B,GAAC,CAAAnlG,IAAA,UAAApG,MAED,SAASurG,GAERprG,KAAKm0D,QAAY,GAAKi3C,EAAU,EAEjC,GAAC,CAAAnlG,IAAA,aAAApG,MAED,WAECG,KAAKm0D,KAAO,CAEb,GAAC,CAAAluD,IAAA,OAAApG,MAED,SAAM8mI,GAEL,OAAuC,KAA9B3mI,KAAKm0D,KAAOwyE,EAAOxyE,KAE7B,GAAC,CAAAluD,IAAA,YAAApG,MAED,SAAWurG,GAEV,OAAgD,KAAvCprG,KAAKm0D,MAAS,GAAKi3C,EAAU,GAEvC,KAACs7B,CAAA,CAtDU,GA0DRE,GAAc,EAEZC,GAAsB,IAAIvqG,GAC1BwqG,GAAoB,IAAIztG,GACxB0tG,GAAsB,IAAIxqG,GAC1ByqG,GAAwB,IAAI1qG,GAE5B2qG,GAA4B,IAAI3qG,GAChC4qG,GAAyB,IAAI5qG,GAC7B6qG,GAA8B,IAAI9tG,GAElC+tG,GAAuB,IAAI9qG,GAAS,EAAG,EAAG,GAC1C+qG,GAAuB,IAAI/qG,GAAS,EAAG,EAAG,GAC1CgrG,GAAuB,IAAIhrG,GAAS,EAAG,EAAG,GAE1CirG,GAAc,CAAE1lI,KAAM,SACtB2lI,GAAgB,CAAE3lI,KAAM,WAExB26B,GAAQ,SAAAirG,IAAAp/H,EAAAA,EAAAA,GAAAm0B,EAAAirG,GAAA,IAAAC,GAAAn/H,EAAAA,EAAAA,GAAAi0B,GAEb,SAAAA,IAAc,IAAAmrG,GAAAj/H,EAAAA,EAAAA,GAAA,KAAA8zB,IAEbmrG,EAAAD,EAAAtoI,KAAA,OAEKy/D,YAAa,EAElBv/D,OAAOgF,gBAAcy5C,EAAAA,EAAAA,GAAA4pF,GAAQ,KAAM,CAAE9nI,MAAO+mI,OAE5Ce,EAAK38H,KAAOuiH,KAEZoa,EAAKxnI,KAAO,GACZwnI,EAAK9lI,KAAO,WAEZ8lI,EAAK9sF,OAAS,KACd8sF,EAAK5jG,SAAW,GAEhB4jG,EAAKrsF,GAAK9e,EAASorG,UAAUxnH,QAE7B,IAAM3a,EAAW,IAAI62B,GACf+B,EAAW,IAAIjB,GACflnB,EAAa,IAAImjB,GACjB1S,EAAQ,IAAI2V,GAAS,EAAG,EAAG,GAiEd,OAnDnB+B,EAASwpG,WAZT,WAEC3xH,EAAWinH,aAAc9+F,GAAU,EAEpC,IASAnoB,EAAW2xH,WAPX,WAECxpG,EAASd,kBAAmBrnB,OAAY/U,GAAW,EAEpD,IAKA7B,OAAO+rE,kBAAgBttB,EAAAA,EAAAA,GAAA4pF,GAAQ,CAC9BliI,SAAU,CACT83C,cAAc,EACdh5C,YAAY,EACZ1E,MAAO4F,GAER44B,SAAU,CACTkf,cAAc,EACdh5C,YAAY,EACZ1E,MAAOw+B,GAERnoB,WAAY,CACXqnC,cAAc,EACdh5C,YAAY,EACZ1E,MAAOqW,GAERyQ,MAAO,CACN42B,cAAc,EACdh5C,YAAY,EACZ1E,MAAO8mB,GAERmhH,gBAAiB,CAChBjoI,MAAO,IAAI08B,IAEZwrG,aAAc,CACbloI,MAAO,IAAI0wH,MAIboX,EAAK92H,OAAS,IAAI0rB,GAClBorG,EAAK3sF,YAAc,IAAIze,GAEvBorG,EAAKlkG,iBAAmBjH,EAASwrG,wBACjCL,EAAKM,wBAAyB,EAE9BN,EAAKO,sBAAwB1rG,EAAS2rG,6BAEtCR,EAAKhB,OAAS,IAAID,GAClBiB,EAAKlrF,SAAU,EAEfkrF,EAAKS,YAAa,EAClBT,EAAKU,eAAgB,EAErBV,EAAK7xF,eAAgB,EACrB6xF,EAAKW,YAAc,EAEnBX,EAAK90B,WAAa,GAElB80B,EAAKppG,SAAW,CAAC,EAAEopG,CAEpB,CAkzBC,OAlzBAh9H,EAAAA,EAAAA,GAAA6xB,EAAA,EAAAv2B,IAAA,iBAAApG,MAED,WAA4E,GAAC,CAAAoG,IAAA,gBAAApG,MAE7E,WAA2E,GAAC,CAAAoG,IAAA,eAAApG,MAE5E,SAAcgR,GAER7Q,KAAKyjC,kBAAmBzjC,KAAKy+B,eAElCz+B,KAAK6Q,OAAO03H,YAAa13H,GAEzB7Q,KAAK6Q,OAAO23H,UAAWxoI,KAAKyF,SAAUzF,KAAKkW,WAAYlW,KAAK2mB,MAE7D,GAAC,CAAA1gB,IAAA,kBAAApG,MAED,SAAiBqT,GAIhB,OAFAlT,KAAKkW,WAAWqyH,YAAar1H,GAEtBlT,IAER,GAAC,CAAAiG,IAAA,2BAAApG,MAED,SAA0B+iB,EAAM1J,GAI/BlZ,KAAKkW,WAAW0D,iBAAkBgJ,EAAM1J,EAEzC,GAAC,CAAAjT,IAAA,uBAAApG,MAED,SAAsBs6H,GAErBn6H,KAAKkW,WAAWinH,aAAchD,GAAO,EAEtC,GAAC,CAAAl0H,IAAA,wBAAApG,MAED,SAAuBkC,GAItB/B,KAAKkW,WAAW8vH,sBAAuBjkI,EAExC,GAAC,CAAAkE,IAAA,4BAAApG,MAED,SAA2BqT,GAI1BlT,KAAKkW,WAAWjS,KAAMiP,EAEvB,GAAC,CAAAjN,IAAA,eAAApG,MAED,SAAc+iB,EAAM1J,GASnB,OAJA4tH,GAAIltH,iBAAkBgJ,EAAM1J,GAE5BlZ,KAAKkW,WAAWwlC,SAAUorF,IAEnB9mI,IAER,GAAC,CAAAiG,IAAA,oBAAApG,MAED,SAAmB+iB,EAAM1J,GAUxB,OAJA4tH,GAAIltH,iBAAkBgJ,EAAM1J,GAE5BlZ,KAAKkW,WAAWqyH,YAAazB,IAEtB9mI,IAER,GAAC,CAAAiG,IAAA,UAAApG,MAED,SAASqZ,GAER,OAAOlZ,KAAKyoI,aAAcrB,GAAQluH,EAEnC,GAAC,CAAAjT,IAAA,UAAApG,MAED,SAASqZ,GAER,OAAOlZ,KAAKyoI,aAAcpB,GAAQnuH,EAEnC,GAAC,CAAAjT,IAAA,UAAApG,MAED,SAASqZ,GAER,OAAOlZ,KAAKyoI,aAAcnB,GAAQpuH,EAEnC,GAAC,CAAAjT,IAAA,kBAAApG,MAED,SAAiB+iB,EAAMkO,GAStB,OAJA+1G,GAAM5iI,KAAM2e,GAAOo+B,gBAAiBhhD,KAAKkW,YAEzClW,KAAKyF,SAASqiB,IAAK++G,GAAMvyF,eAAgBxjB,IAElC9wB,IAER,GAAC,CAAAiG,IAAA,aAAApG,MAED,SAAYixB,GAEX,OAAO9wB,KAAK0oI,gBAAiBtB,GAAQt2G,EAEtC,GAAC,CAAA7qB,IAAA,aAAApG,MAED,SAAYixB,GAEX,OAAO9wB,KAAK0oI,gBAAiBrB,GAAQv2G,EAEtC,GAAC,CAAA7qB,IAAA,aAAApG,MAED,SAAYixB,GAEX,OAAO9wB,KAAK0oI,gBAAiBpB,GAAQx2G,EAEtC,GAAC,CAAA7qB,IAAA,eAAApG,MAED,SAAc6Q,GAEb,OAAOA,EAAOwqC,aAAcl7C,KAAKg7C,YAElC,GAAC,CAAA/0C,IAAA,eAAApG,MAED,SAAc6Q,GAEb,OAAOA,EAAOwqC,aAAc6rF,GAAM9iI,KAAMjE,KAAKg7C,aAAc2F,SAE5D,GAAC,CAAA16C,IAAA,SAAApG,MAED,SAAQmP,EAAGC,EAAGC,GAIRF,EAAEiuH,UAEN+J,GAAQ/iI,KAAM+K,GAIdg4H,GAAQviI,IAAKuK,EAAGC,EAAGC,GAIpB,IAAM2rC,EAAS76C,KAAK66C,OAEpB76C,KAAK8+H,mBAAmB,GAAM,GAE9BmI,GAAYlsF,sBAAuB/6C,KAAKg7C,aAEnCh7C,KAAKymE,UAAYzmE,KAAK2oI,QAE1B5B,GAAMxrF,OAAQ0rF,GAAaD,GAAShnI,KAAKs7C,IAIzCyrF,GAAMxrF,OAAQyrF,GAASC,GAAajnI,KAAKs7C,IAI1Ct7C,KAAKkW,WAAW8vH,sBAAuBe,IAElClsF,IAEJksF,GAAM9rF,gBAAiBJ,EAAOG,aAC9B8rF,GAAId,sBAAuBe,IAC3B/mI,KAAKkW,WAAWqyH,YAAazB,GAAInmF,UAInC,GAAC,CAAA16C,IAAA,MAAApG,MAED,SAAKm+B,GAEJ,GAAKp9B,UAAU2B,OAAS,EAAI,CAE3B,IAAM,IAAIqB,EAAI,EAAGA,EAAIhD,UAAU2B,OAAQqB,IAEtC5D,KAAK8nB,IAAKlnB,UAAWgD,IAItB,OAAO5D,IAER,CAEA,OAAKg+B,IAAWh+B,MAEf6C,QAAQkC,MAAO,kEAAoEi5B,GAC5Eh+B,OAIHg+B,GAAUA,EAAO6gC,YAEE,OAAlB7gC,EAAO6c,QAEX7c,EAAO6c,OAAOja,OAAQ5C,GAIvBA,EAAO6c,OAAS76C,KAChBA,KAAK+jC,SAASzhC,KAAM07B,GAEpBA,EAAO1R,cAAei7G,KAItB1kI,QAAQkC,MAAO,gEAAiEi5B,GAI1Eh+B,KAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQm+B,GAEP,GAAKp9B,UAAU2B,OAAS,EAAI,CAE3B,IAAM,IAAIqB,EAAI,EAAGA,EAAIhD,UAAU2B,OAAQqB,IAEtC5D,KAAK4gC,OAAQhgC,UAAWgD,IAIzB,OAAO5D,IAER,CAEA,IAAM4F,EAAQ5F,KAAK+jC,SAASx8B,QAASy2B,GAWrC,OATiB,IAAZp4B,IAEJo4B,EAAO6c,OAAS,KAChB76C,KAAK+jC,SAASjrB,OAAQlT,EAAO,GAE7Bo4B,EAAO1R,cAAek7G,KAIhBxnI,IAER,GAAC,CAAAiG,IAAA,mBAAApG,MAED,WAEC,IAAMg7C,EAAS76C,KAAK66C,OAQpB,OANgB,OAAXA,GAEJA,EAAOja,OAAQ5gC,MAITA,IAER,GAAC,CAAAiG,IAAA,QAAApG,MAED,WAEC,IAAM,IAAI+D,EAAI,EAAGA,EAAI5D,KAAK+jC,SAASxhC,OAAQqB,IAAO,CAEjD,IAAMo6B,EAASh+B,KAAK+jC,SAAUngC,GAE9Bo6B,EAAO6c,OAAS,KAEhB7c,EAAO1R,cAAek7G,GAEvB,CAIA,OAFAxnI,KAAK+jC,SAASxhC,OAAS,EAEhBvC,IAGR,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQm+B,GAwBP,OAlBAh+B,KAAK8+H,mBAAmB,GAAM,GAE9BiI,GAAM9iI,KAAMjE,KAAKg7C,aAAc2F,SAER,OAAlB3iB,EAAO6c,SAEX7c,EAAO6c,OAAOikF,mBAAmB,GAAM,GAEvCiI,GAAMrrF,SAAU1d,EAAO6c,OAAOG,cAI/Bhd,EAAOkd,aAAc6rF,IAErB/mI,KAAK8nB,IAAKkW,GAEVA,EAAO8gG,mBAAmB,GAAO,GAE1B9+H,IAER,GAAC,CAAAiG,IAAA,gBAAApG,MAED,SAAesQ,GAEd,OAAOnQ,KAAK4oI,oBAAqB,KAAMz4H,EAExC,GAAC,CAAAlK,IAAA,kBAAApG,MAED,SAAiBM,GAEhB,OAAOH,KAAK4oI,oBAAqB,OAAQzoI,EAE1C,GAAC,CAAA8F,IAAA,sBAAApG,MAED,SAAqBM,EAAMN,GAE1B,GAAKG,KAAMG,KAAWN,EAAQ,OAAOG,KAErC,IAAM,IAAI4D,EAAI,EAAGwS,EAAIpW,KAAK+jC,SAASxhC,OAAQqB,EAAIwS,EAAGxS,IAAO,CAExD,IACMo6B,EADQh+B,KAAK+jC,SAAUngC,GACRglI,oBAAqBzoI,EAAMN,GAEhD,QAAgBsB,IAAX68B,EAEJ,OAAOA,CAIT,CAID,GAAC,CAAA/3B,IAAA,mBAAApG,MAED,SAAkBd,GAIjB,OAFAiB,KAAK8+H,mBAAmB,GAAM,GAEvB//H,EAAOg8C,sBAAuB/6C,KAAKg7C,YAE3C,GAAC,CAAA/0C,IAAA,qBAAApG,MAED,SAAoBd,GAMnB,OAJAiB,KAAK8+H,mBAAmB,GAAM,GAE9B9+H,KAAKg7C,YAAYwtF,UAAWvB,GAAaloI,EAAQmoI,IAE1CnoI,CAER,GAAC,CAAAkH,IAAA,gBAAApG,MAED,SAAed,GAMd,OAJAiB,KAAK8+H,mBAAmB,GAAM,GAE9B9+H,KAAKg7C,YAAYwtF,UAAWvB,GAAaE,GAAepoI,GAEjDA,CAER,GAAC,CAAAkH,IAAA,oBAAApG,MAED,SAAmBd,GAElBiB,KAAK8+H,mBAAmB,GAAM,GAE9B,IAAM7xH,EAAIjN,KAAKg7C,YAAYvqC,SAE3B,OAAO1R,EAAO0F,IAAKwI,EAAG,GAAKA,EAAG,GAAKA,EAAG,KAAOqM,WAE9C,GAAC,CAAArT,IAAA,UAAApG,MAED,WAAwC,GAAC,CAAAoG,IAAA,WAAApG,MAEzC,SAAUmpB,GAETA,EAAUhpB,MAIV,IAFA,IAAM+jC,EAAW/jC,KAAK+jC,SAEZngC,EAAI,EAAGwS,EAAI2tB,EAASxhC,OAAQqB,EAAIwS,EAAGxS,IAE5CmgC,EAAUngC,GAAIitD,SAAU7nC,EAI1B,GAAC,CAAA/iB,IAAA,kBAAApG,MAED,SAAiBmpB,GAEhB,IAAsB,IAAjBhpB,KAAKy8C,QAAV,CAEAzzB,EAAUhpB,MAIV,IAFA,IAAM+jC,EAAW/jC,KAAK+jC,SAEZngC,EAAI,EAAGwS,EAAI2tB,EAASxhC,OAAQqB,EAAIwS,EAAGxS,IAE5CmgC,EAAUngC,GAAIilI,gBAAiB7/G,EARI,CAYrC,GAAC,CAAA/iB,IAAA,oBAAApG,MAED,SAAmBmpB,GAElB,IAAM6xB,EAAS76C,KAAK66C,OAEJ,OAAXA,IAEJ7xB,EAAU6xB,GAEVA,EAAOiuF,kBAAmB9/G,GAI5B,GAAC,CAAA/iB,IAAA,eAAApG,MAED,WAECG,KAAK6Q,OAAO2yB,QAASxjC,KAAKyF,SAAUzF,KAAKkW,WAAYlW,KAAK2mB,OAE1D3mB,KAAKioI,wBAAyB,CAE/B,GAAC,CAAAhiI,IAAA,oBAAApG,MAED,SAAmBoqB,GAEbjqB,KAAKyjC,kBAAmBzjC,KAAKy+B,gBAE7Bz+B,KAAKioI,wBAA0Bh+G,KAEd,OAAhBjqB,KAAK66C,OAET76C,KAAKg7C,YAAY/2C,KAAMjE,KAAK6Q,QAI5B7Q,KAAKg7C,YAAYs2E,iBAAkBtxH,KAAK66C,OAAOG,YAAah7C,KAAK6Q,QAIlE7Q,KAAKioI,wBAAyB,EAE9Bh+G,GAAQ,GAQT,IAFA,IAAM8Z,EAAW/jC,KAAK+jC,SAEZngC,EAAI,EAAGwS,EAAI2tB,EAASxhC,OAAQqB,EAAIwS,EAAGxS,IAAO,CAEnD,IAAM8tD,EAAQ3tB,EAAUngC,IAEa,IAAhC8tD,EAAMw2E,wBAA4C,IAAVj+G,GAE5CynC,EAAMlW,kBAAmBvxB,EAI3B,CAED,GAAC,CAAAhkB,IAAA,oBAAApG,MAED,SAAmBkpI,EAAeC,GAEjC,IAAMnuF,EAAS76C,KAAK66C,OAsBpB,IApBuB,IAAlBkuF,GAAqC,OAAXluF,IAAoD,IAAjCA,EAAOqtF,uBAExDrtF,EAAOikF,mBAAmB,GAAM,GAI5B9+H,KAAKyjC,kBAAmBzjC,KAAKy+B,eAEb,OAAhBz+B,KAAK66C,OAET76C,KAAKg7C,YAAY/2C,KAAMjE,KAAK6Q,QAI5B7Q,KAAKg7C,YAAYs2E,iBAAkBtxH,KAAK66C,OAAOG,YAAah7C,KAAK6Q,SAM1C,IAAnBm4H,EAIJ,IAFA,IAAMjlG,EAAW/jC,KAAK+jC,SAEZngC,EAAI,EAAGwS,EAAI2tB,EAASxhC,OAAQqB,EAAIwS,EAAGxS,IAAO,CAEnD,IAAM8tD,EAAQ3tB,EAAUngC,IAEa,IAAhC8tD,EAAMw2E,uBAEVx2E,EAAMotE,mBAAmB,GAAO,EAIlC,CAIF,GAAC,CAAA74H,IAAA,SAAApG,MAED,SAAQ+1H,GAGP,IAAMC,OAA0B10H,IAATy0H,GAAsC,kBAATA,EAE9C5Y,EAAS,CAAC,EAKX6Y,IAGJD,EAAO,CACNlb,WAAY,CAAC,EACb9pD,UAAW,CAAC,EACZ81C,SAAU,CAAC,EACXG,OAAQ,CAAC,EACT57E,OAAQ,CAAC,EACTg+G,UAAW,CAAC,EACZp2B,WAAY,CAAC,EACbliD,MAAO,CAAC,GAGTqsD,EAAO6Z,SAAW,CACjBxuD,QAAS,IACTxmE,KAAM,SACNi1H,UAAW,oBAOb,IAAM94F,EAAS,CAAC,EA+BhB,SAASkrG,EAAWC,EAAS/jF,GAQ5B,YANiCjkD,IAA5BgoI,EAAS/jF,EAAQp6C,QAErBm+H,EAAS/jF,EAAQp6C,MAASo6C,EAAQ2xE,OAAQnB,IAIpCxwE,EAAQp6C,IAEhB,CAEA,GAzCAgzB,EAAOhzB,KAAOhL,KAAKgL,KACnBgzB,EAAOn8B,KAAO7B,KAAK6B,KAEA,KAAd7B,KAAKG,OAAc69B,EAAO79B,KAAOH,KAAKG,OAClB,IAApBH,KAAKooI,aAAsBpqG,EAAOoqG,YAAa,IACxB,IAAvBpoI,KAAKqoI,gBAAyBrqG,EAAOqqG,eAAgB,IACpC,IAAjBroI,KAAKy8C,UAAoBze,EAAOye,SAAU,IACnB,IAAvBz8C,KAAK81C,gBAA0B9X,EAAO8X,eAAgB,GACjC,IAArB91C,KAAKsoI,cAAoBtqG,EAAOsqG,YAActoI,KAAKsoI,aACf,OAApClqC,KAAKw4B,UAAW52H,KAAKu+B,YAAsBP,EAAOO,SAAWv+B,KAAKu+B,UAEvEP,EAAO2oG,OAAS3mI,KAAK2mI,OAAOxyE,KAC5Bn2B,EAAOntB,OAAS7Q,KAAK6Q,OAAO4sB,WAEG,IAA1Bz9B,KAAKyjC,mBAA6BzF,EAAOyF,kBAAmB,GAI5DzjC,KAAKopI,kBAETprG,EAAOn8B,KAAO,gBACdm8B,EAAOp7B,MAAQ5C,KAAK4C,MACpBo7B,EAAO8B,eAAiB9/B,KAAK8/B,eAAei3F,SAChB,OAAvB/2H,KAAKqpI,gBAAyBrrG,EAAOqrG,cAAgBrpI,KAAKqpI,cAActS,WAkBzE/2H,KAAKmvC,QAEJnvC,KAAKsvC,aAEJtvC,KAAKsvC,WAAW2kB,QAEpBj2B,EAAOsR,WAAatvC,KAAKsvC,WAAWynF,SAEzB/2H,KAAKsvC,WAAW8mF,YAE3Bp4F,EAAOsR,WAAatvC,KAAKsvC,WAAWynF,OAAQnB,GAAO5qH,OAMhDhL,KAAK2vC,aAAe3vC,KAAK2vC,YAAYymF,YAAwD,IAA3Cp2H,KAAK2vC,YAAY8mF,wBAEvEz4F,EAAO2R,YAAc3vC,KAAK2vC,YAAYonF,OAAQnB,GAAO5qH,WAIhD,GAAKhL,KAAKq+G,QAAUr+G,KAAKi4G,QAAUj4G,KAAK63G,SAAW,CAEzD75E,EAAO6P,SAAWq7F,EAAWtT,EAAKlb,WAAY16G,KAAK6tC,UAEnD,IAAM2I,EAAax2C,KAAK6tC,SAAS2I,WAEjC,QAAoBr1C,IAAfq1C,QAAkDr1C,IAAtBq1C,EAAWvrB,OAAuB,CAElE,IAAMA,EAASurB,EAAWvrB,OAE1B,GAAKtnB,MAAM0sC,QAASplB,GAEnB,IAAM,IAAIrnB,EAAI,EAAGwS,EAAI6U,EAAO1oB,OAAQqB,EAAIwS,EAAGxS,IAAO,CAEjD,IAAM0jB,EAAQ2D,EAAQrnB,GAEtBslI,EAAWtT,EAAK3qG,OAAQ3D,EAEzB,MAIA4hH,EAAWtT,EAAK3qG,OAAQA,EAI1B,CAED,CAiBA,GAfKjrB,KAAKwzG,gBAETx1E,EAAOsrG,SAAWtpI,KAAKspI,SACvBtrG,EAAOurG,WAAavpI,KAAKupI,WAAW9rG,eAEbt8B,IAAlBnB,KAAK0+G,WAETwqB,EAAWtT,EAAKqT,UAAWjpI,KAAK0+G,UAEhC1gF,EAAO0gF,SAAW1+G,KAAK0+G,SAAS1zG,YAMX7J,IAAlBnB,KAAKkd,SAET,GAAKvZ,MAAM0sC,QAASrwC,KAAKkd,UAAa,CAIrC,IAFA,IAAM+pB,EAAQ,GAEJrjC,EAAI,EAAGwS,EAAIpW,KAAKkd,SAAS3a,OAAQqB,EAAIwS,EAAGxS,IAEjDqjC,EAAM3kC,KAAM4mI,EAAWtT,EAAKhlE,UAAW5wD,KAAKkd,SAAUtZ,KAIvDo6B,EAAO9gB,SAAW+pB,CAEnB,MAECjJ,EAAO9gB,SAAWgsH,EAAWtT,EAAKhlE,UAAW5wD,KAAKkd,UAQpD,GAAKld,KAAK+jC,SAASxhC,OAAS,EAAI,CAE/By7B,EAAO+F,SAAW,GAElB,IAAM,IAAIngC,EAAI,EAAGA,EAAI5D,KAAK+jC,SAASxhC,OAAQqB,IAE1Co6B,EAAO+F,SAASzhC,KAAMtC,KAAK+jC,SAAUngC,GAAImzH,OAAQnB,GAAO53F,OAI1D,CAIA,GAAKh+B,KAAK6yG,WAAWtwG,OAAS,EAAI,CAEjCy7B,EAAO60E,WAAa,GAEpB,IAAM,IAAIjvG,EAAI,EAAGA,EAAI5D,KAAK6yG,WAAWtwG,OAAQqB,IAAO,CAEnD,IAAM4lI,EAAYxpI,KAAK6yG,WAAYjvG,GAEnCo6B,EAAO60E,WAAWvwG,KAAM4mI,EAAWtT,EAAK/iB,WAAY22B,GAErD,CAED,CAEA,GAAK3T,EAAe,CAEnB,IAAMnb,EAAa+uB,EAAkB7T,EAAKlb,YACpC9pD,EAAY64E,EAAkB7T,EAAKhlE,WACnC81C,EAAW+iC,EAAkB7T,EAAKlvB,UAClCG,EAAS4iC,EAAkB7T,EAAK/uB,QAChC57E,EAASw+G,EAAkB7T,EAAK3qG,QAChCg+G,EAAYQ,EAAkB7T,EAAKqT,WACnCp2B,EAAa42B,EAAkB7T,EAAK/iB,YACpCliD,EAAQ84E,EAAkB7T,EAAKjlE,OAEhC+pD,EAAWn4G,OAAS,IAAIy6G,EAAOtC,WAAaA,GAC5C9pD,EAAUruD,OAAS,IAAIy6G,EAAOpsD,UAAYA,GAC1C81C,EAASnkG,OAAS,IAAIy6G,EAAOtW,SAAWA,GACxCG,EAAOtkG,OAAS,IAAIy6G,EAAOnW,OAASA,GACpC57E,EAAO1oB,OAAS,IAAIy6G,EAAO/xF,OAASA,GACpCg+G,EAAU1mI,OAAS,IAAIy6G,EAAOisB,UAAYA,GAC1Cp2B,EAAWtwG,OAAS,IAAIy6G,EAAOnK,WAAaA,GAC5CliD,EAAMpuD,OAAS,IAAIy6G,EAAOrsD,MAAQA,EAExC,CAIA,OAFAqsD,EAAOh/E,OAASA,EAETg/E,EAKP,SAASysB,EAAkB7nG,GAE1B,IAAM0F,EAAS,GACf,IAAM,IAAMrhC,KAAO27B,EAAQ,CAE1B,IAAMj1B,EAAOi1B,EAAO37B,UACb0G,EAAKkqH,SACZvvF,EAAOhlC,KAAMqK,EAEd,CAEA,OAAO26B,CAER,CAED,GAAC,CAAArhC,IAAA,QAAApG,MAED,SAAO6pI,GAEN,OAAO,IAAI1pI,KAAK4zD,aAAc3vD,KAAMjE,KAAM0pI,EAE3C,GAAC,CAAAzjI,IAAA,OAAApG,MAED,SAAM8G,GAA2B,IAAnB+iI,IAAS9oI,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,KAAAA,UAAA,GA8BtB,GA5BAZ,KAAKG,KAAOwG,EAAOxG,KAEnBH,KAAKs7C,GAAGr3C,KAAM0C,EAAO20C,IAErBt7C,KAAKyF,SAASxB,KAAM0C,EAAOlB,UAC3BzF,KAAKq+B,SAASnjB,MAAQvU,EAAO03B,SAASnjB,MACtClb,KAAKkW,WAAWjS,KAAM0C,EAAOuP,YAC7BlW,KAAK2mB,MAAM1iB,KAAM0C,EAAOggB,OAExB3mB,KAAK6Q,OAAO5M,KAAM0C,EAAOkK,QACzB7Q,KAAKg7C,YAAY/2C,KAAM0C,EAAOq0C,aAE9Bh7C,KAAKyjC,iBAAmB98B,EAAO88B,iBAC/BzjC,KAAKioI,uBAAyBthI,EAAOshI,uBAErCjoI,KAAKkoI,sBAAwBvhI,EAAOuhI,sBAEpCloI,KAAK2mI,OAAOxyE,KAAOxtD,EAAOggI,OAAOxyE,KACjCn0D,KAAKy8C,QAAU91C,EAAO81C,QAEtBz8C,KAAKooI,WAAazhI,EAAOyhI,WACzBpoI,KAAKqoI,cAAgB1hI,EAAO0hI,cAE5BroI,KAAK81C,cAAgBnvC,EAAOmvC,cAC5B91C,KAAKsoI,YAAc3hI,EAAO2hI,YAE1BtoI,KAAKu+B,SAAW6/D,KAAKJ,MAAOI,KAAKw4B,UAAWjwH,EAAO43B,YAEhC,IAAdmrG,EAEJ,IAAM,IAAI9lI,EAAI,EAAGA,EAAI+C,EAAOo9B,SAASxhC,OAAQqB,IAAO,CAEnD,IAAM8tD,EAAQ/qD,EAAOo9B,SAAUngC,GAC/B5D,KAAK8nB,IAAK4pC,EAAMtxC,QAEjB,CAID,OAAOpgB,IAER,KAACw8B,CAAA,CA54BY,CAASgtB,IAg5BvBhtB,GAASorG,UAA0B,IAAItrG,GAAS,EAAG,EAAG,GACtDE,GAASwrG,yBAA0B,EACnCxrG,GAAS2rG,8BAA+B,EAExC,IAAMwB,GAAsB,IAAIrtG,GAC1BstG,GAAsB,IAAIttG,GAC1ButG,GAAsB,IAAIvtG,GAC1BwtG,GAAsB,IAAIxtG,GAE1BytG,GAAqB,IAAIztG,GACzB0tG,GAAqB,IAAI1tG,GACzB2tG,GAAqB,IAAI3tG,GACzB4tG,GAAqB,IAAI5tG,GACzB6tG,GAAqB,IAAI7tG,GACzB8tG,GAAqB,IAAI9tG,GAEzB+tG,GAAQ,WAEb,SAAAA,IAAuE,IAA1DlzH,EAACvW,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAI07B,GAAWlqB,EAACxR,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAI07B,GAAWllB,EAACxW,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAI07B,IAAS5zB,EAAAA,EAAAA,GAAA,KAAA2hI,GAEnErqI,KAAKmX,EAAIA,EACTnX,KAAKoS,EAAIA,EACTpS,KAAKoX,EAAIA,CAEV,CAkFC,OAlFAzM,EAAAA,EAAAA,GAAA0/H,EAAA,EAAApkI,IAAA,MAAApG,MAoFD,SAAKsX,EAAG/E,EAAGgF,GAMV,OAJApX,KAAKmX,EAAElT,KAAMkT,GACbnX,KAAKoS,EAAEnO,KAAMmO,GACbpS,KAAKoX,EAAEnT,KAAMmT,GAENpX,IAER,GAAC,CAAAiG,IAAA,0BAAApG,MAED,SAAyBoW,EAAQq0H,EAAI1+B,EAAI2+B,GAMxC,OAJAvqI,KAAKmX,EAAElT,KAAMgS,EAAQq0H,IACrBtqI,KAAKoS,EAAEnO,KAAMgS,EAAQ21F,IACrB5rG,KAAKoX,EAAEnT,KAAMgS,EAAQs0H,IAEdvqI,IAER,GAAC,CAAAiG,IAAA,6BAAApG,MAED,SAA4BorG,EAAWq/B,EAAI1+B,EAAI2+B,GAM9C,OAJAvqI,KAAKmX,EAAEiyF,oBAAqB6B,EAAWq/B,GACvCtqI,KAAKoS,EAAEg3F,oBAAqB6B,EAAWW,GACvC5rG,KAAKoX,EAAEgyF,oBAAqB6B,EAAWs/B,GAEhCvqI,IAER,GAAC,CAAAiG,IAAA,QAAApG,MAED,WAEC,OAAO,IAAIG,KAAK4zD,aAAc3vD,KAAMjE,KAErC,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAMu/H,GAML,OAJAp/H,KAAKmX,EAAElT,KAAMm7H,EAASjoH,GACtBnX,KAAKoS,EAAEnO,KAAMm7H,EAAShtH,GACtBpS,KAAKoX,EAAEnT,KAAMm7H,EAAShoH,GAEfpX,IAER,GAAC,CAAAiG,IAAA,UAAApG,MAED,WAKC,OAHA8pI,GAAMvuF,WAAYp7C,KAAKoX,EAAGpX,KAAKoS,GAC/Bw3H,GAAMxuF,WAAYp7C,KAAKmX,EAAGnX,KAAKoS,GAEQ,GAAhCu3H,GAAMt0H,MAAOu0H,IAAQrnI,QAE7B,GAAC,CAAA0D,IAAA,cAAApG,MAED,SAAad,GAEZ,OAAOA,EAAO6/H,WAAY5+H,KAAKmX,EAAGnX,KAAKoS,GAAI0V,IAAK9nB,KAAKoX,GAAIk9B,eAAgB,EAAI,EAE9E,GAAC,CAAAruC,IAAA,YAAApG,MAED,SAAWd,GAEV,OAAOsrI,EAAShzG,UAAWr3B,KAAKmX,EAAGnX,KAAKoS,EAAGpS,KAAKoX,EAAGrY,EAEpD,GAAC,CAAAkH,IAAA,WAAApG,MAED,SAAUd,GAET,OAAOA,EAAOyrI,sBAAuBxqI,KAAKmX,EAAGnX,KAAKoS,EAAGpS,KAAKoX,EAE3D,GAAC,CAAAnR,IAAA,eAAApG,MAED,SAAcklB,EAAOhmB,GAEpB,OAAOsrI,EAASI,aAAc1lH,EAAO/kB,KAAKmX,EAAGnX,KAAKoS,EAAGpS,KAAKoX,EAAGrY,EAE9D,GAAC,CAAAkH,IAAA,QAAApG,MAED,SAAOklB,EAAO2lH,EAAKC,EAAKC,EAAK7rI,GAE5B,OAAOsrI,EAASQ,MAAO9lH,EAAO/kB,KAAKmX,EAAGnX,KAAKoS,EAAGpS,KAAKoX,EAAGszH,EAAKC,EAAKC,EAAK7rI,EAEtE,GAAC,CAAAkH,IAAA,gBAAApG,MAED,SAAeklB,GAEd,OAAOslH,EAASS,cAAe/lH,EAAO/kB,KAAKmX,EAAGnX,KAAKoS,EAAGpS,KAAKoX,EAE5D,GAAC,CAAAnR,IAAA,gBAAApG,MAED,SAAeoY,GAEd,OAAOoyH,EAASU,cAAe/qI,KAAKmX,EAAGnX,KAAKoS,EAAGpS,KAAKoX,EAAGa,EAExD,GAAC,CAAAhS,IAAA,gBAAApG,MAED,SAAe0zB,GAEd,OAAOA,EAAIy3G,mBAAoBhrI,KAEhC,GAAC,CAAAiG,IAAA,sBAAApG,MAED,SAAqB4S,EAAG1T,GAEvB,IACI6R,EAAGnO,EADD0U,EAAInX,KAAKmX,EAAG/E,EAAIpS,KAAKoS,EAAGgF,EAAIpX,KAAKoX,EASvC2yH,GAAK3uF,WAAYhpC,EAAG+E,GACpB6yH,GAAK5uF,WAAYhkC,EAAGD,GACpB+yH,GAAK9uF,WAAY3oC,EAAG0E,GACpB,IAAMkM,EAAK0mH,GAAKv1H,IAAK01H,IACf90G,EAAK40G,GAAKx1H,IAAK01H,IACrB,GAAK7mH,GAAM,GAAK+R,GAAM,EAGrB,OAAOr2B,EAAOkF,KAAMkT,GAIrBgzH,GAAK/uF,WAAY3oC,EAAGL,GACpB,IAAMq7G,EAAKsc,GAAKv1H,IAAK21H,IACfc,EAAKjB,GAAKx1H,IAAK21H,IACrB,GAAK1c,GAAM,GAAKwd,GAAMxd,EAGrB,OAAO1uH,EAAOkF,KAAMmO,GAIrB,IAAMqO,EAAK4C,EAAK4nH,EAAKxd,EAAKr4F,EAC1B,GAAK3U,GAAM,GAAK4C,GAAM,GAAKoqG,GAAM,EAIhC,OAFA78G,EAAIyS,GAAOA,EAAKoqG,GAET1uH,EAAOkF,KAAMkT,GAAIgkC,gBAAiB4uF,GAAMn5H,GAIhDw5H,GAAKhvF,WAAY3oC,EAAG2E,GACpB,IAAM8zH,EAAKnB,GAAKv1H,IAAK41H,IACfe,EAAKnB,GAAKx1H,IAAK41H,IACrB,GAAKe,GAAM,GAAKD,GAAMC,EAGrB,OAAOpsI,EAAOkF,KAAMmT,GAIrB,IAAMoJ,EAAK0qH,EAAK91G,EAAK/R,EAAK8nH,EAC1B,GAAK3qH,GAAM,GAAK4U,GAAM,GAAK+1G,GAAM,EAIhC,OAFA1oI,EAAI2yB,GAAOA,EAAK+1G,GAETpsI,EAAOkF,KAAMkT,GAAIgkC,gBAAiB6uF,GAAMvnI,GAIhD,IAAM8d,EAAKktG,EAAK0d,EAAKD,EAAKD,EAC1B,GAAK1qH,GAAM,GAAO0qH,EAAKxd,GAAQ,GAAOyd,EAAKC,GAAQ,EAKlD,OAHAlB,GAAK7uF,WAAYhkC,EAAGhF,GACpB3P,GAAMwoI,EAAKxd,IAAWwd,EAAKxd,GAASyd,EAAKC,IAElCpsI,EAAOkF,KAAMmO,GAAI+oC,gBAAiB8uF,GAAMxnI,GAKhD,IAAM2oI,EAAQ,GAAM7qH,EAAKC,EAAKC,GAK9B,OAHA7P,EAAI4P,EAAK4qH,EACT3oI,EAAIge,EAAK2qH,EAEFrsI,EAAOkF,KAAMkT,GAAIgkC,gBAAiB4uF,GAAMn5H,GAAIuqC,gBAAiB6uF,GAAMvnI,EAE3E,GAAC,CAAAwD,IAAA,SAAApG,MAED,SAAQu/H,GAEP,OAAOA,EAASjoH,EAAE8oH,OAAQjgI,KAAKmX,IAAOioH,EAAShtH,EAAE6tH,OAAQjgI,KAAKoS,IAAOgtH,EAAShoH,EAAE6oH,OAAQjgI,KAAKoX,EAE9F,IAAC,EAAAnR,IAAA,YAAApG,MA9QD,SAAkBsX,EAAG/E,EAAGgF,EAAGrY,GAE1BA,EAAOq8C,WAAYhkC,EAAGhF,GACtBu3H,GAAMvuF,WAAYjkC,EAAG/E,GACrBrT,EAAOsW,MAAOs0H,IAEd,IAAM0B,EAAiBtsI,EAAOu+H,WAC9B,OAAK+N,EAAiB,EAEdtsI,EAAOu1C,eAAgB,EAAIlgC,KAAKC,KAAMg3H,IAIvCtsI,EAAO0F,IAAK,EAAG,EAAG,EAE1B,GAGA,CAAAwB,IAAA,eAAApG,MACA,SAAqBklB,EAAO5N,EAAG/E,EAAGgF,EAAGrY,GAEpC4qI,GAAMvuF,WAAYhkC,EAAGD,GACrByyH,GAAMxuF,WAAYhpC,EAAG+E,GACrB0yH,GAAMzuF,WAAYr2B,EAAO5N,GAEzB,IAAMygB,EAAQ+xG,GAAMn1H,IAAKm1H,IACnB9xG,EAAQ8xG,GAAMn1H,IAAKo1H,IACnB9xG,EAAQ6xG,GAAMn1H,IAAKq1H,IACnB9xG,EAAQ6xG,GAAMp1H,IAAKo1H,IACnB5xG,EAAQ4xG,GAAMp1H,IAAKq1H,IAEnBuB,EAAUxzG,EAAQG,EAAQF,EAAQA,EAGxC,GAAe,IAAVuzG,EAIJ,OAAOrsI,EAAO0F,KAAO,GAAK,GAAK,GAIhC,IAAM6mI,EAAW,EAAIF,EACf/0H,GAAM0hB,EAAQD,EAAQD,EAAQG,GAAUszG,EACxC16H,GAAMgnB,EAAQI,EAAQH,EAAQC,GAAUwzG,EAG9C,OAAOvsI,EAAO0F,IAAK,EAAI4R,EAAIzF,EAAGA,EAAGyF,EAElC,GAAC,CAAApQ,IAAA,gBAAApG,MAED,SAAsBklB,EAAO5N,EAAG/E,EAAGgF,GAIlC,OAFApX,KAAKyqI,aAAc1lH,EAAO5N,EAAG/E,EAAGgF,EAAG0yH,IAE1BA,GAAM96H,GAAK,GAAS86H,GAAM76H,GAAK,GAAW66H,GAAM96H,EAAI86H,GAAM76H,GAAO,CAE3E,GAAC,CAAAhJ,IAAA,QAAApG,MAED,SAAcklB,EAAOwnF,EAAI6zB,EAAImL,EAAIb,EAAKC,EAAKC,EAAK7rI,GAS/C,OAPAiB,KAAKyqI,aAAc1lH,EAAOwnF,EAAI6zB,EAAImL,EAAIzB,IAEtC/qI,EAAO0F,IAAK,EAAG,GACf1F,EAAOo8C,gBAAiBuvF,EAAKZ,GAAM96H,GACnCjQ,EAAOo8C,gBAAiBwvF,EAAKb,GAAM76H,GACnClQ,EAAOo8C,gBAAiByvF,EAAKd,GAAM56H,GAE5BnQ,CAER,GAAC,CAAAkH,IAAA,gBAAApG,MAED,SAAsBsX,EAAG/E,EAAGgF,EAAGa,GAM9B,OAJA0xH,GAAMvuF,WAAYhkC,EAAGhF,GACrBw3H,GAAMxuF,WAAYjkC,EAAG/E,GAGZu3H,GAAMt0H,MAAOu0H,IAAQp1H,IAAKyD,GAAc,CAElD,KAACoyH,CAAA,CA1FY,GA4RVmB,GAAa,EAEXvzG,GAAQ,SAAAwzG,IAAApjI,EAAAA,EAAAA,GAAA4vB,EAAAwzG,GAAA,IAAAC,GAAAnjI,EAAAA,EAAAA,GAAA0vB,GAEb,SAAAA,IAAc,IAAA0zG,EAmEO,OAnEPjjI,EAAAA,EAAAA,GAAA,KAAAuvB,IAEb0zG,EAAAD,EAAAtsI,KAAA,OAEKwsI,YAAa,EAElBtsI,OAAOgF,gBAAcy5C,EAAAA,EAAAA,GAAA4tF,GAAQ,KAAM,CAAE9rI,MAAO2rI,OAE5CG,EAAK3gI,KAAOuiH,KAEZoe,EAAKxrI,KAAO,GACZwrI,EAAK9pI,KAAO,WAEZ8pI,EAAK33F,SAAW6wE,EAChB8mB,EAAK19F,KAAOusE,EACZmxB,EAAKtzB,cAAe,EAEpBszB,EAAK1oC,QAAU,EACf0oC,EAAKvyB,aAAc,EAEnBuyB,EAAKE,SAAWlmB,EAChBgmB,EAAKG,SAAWlmB,EAChB+lB,EAAKI,cAAgB7mB,EACrBymB,EAAKK,cAAgB,KACrBL,EAAKM,cAAgB,KACrBN,EAAKO,mBAAqB,KAE1BP,EAAKQ,UAAY9lB,GACjBslB,EAAKx3F,WAAY,EACjBw3F,EAAKz3F,YAAa,EAElBy3F,EAAKS,iBAAmB,IACxBT,EAAKU,YAAc9f,GACnBof,EAAKW,WAAa,EAClBX,EAAKY,gBAAkB,IACvBZ,EAAKa,YAAc/gB,GACnBkgB,EAAKc,aAAehhB,GACpBkgB,EAAKe,aAAejhB,GACpBkgB,EAAKgB,cAAe,EAEpBhB,EAAKiB,eAAiB,KACtBjB,EAAKkB,kBAAmB,EACxBlB,EAAKmB,aAAc,EAEnBnB,EAAKoB,WAAa,KAElBpB,EAAKqB,YAAa,EAElBrB,EAAKr2H,UAAY,KAEjBq2H,EAAKsB,eAAgB,EACrBtB,EAAKuB,oBAAsB,EAC3BvB,EAAKwB,mBAAqB,EAE1BxB,EAAKyB,WAAY,EAEjBzB,EAAK0B,iBAAkB,EACvB1B,EAAK2B,oBAAqB,EAE1B3B,EAAKlvF,SAAU,EAEfkvF,EAAKv3F,YAAa,EAElBu3F,EAAKptG,SAAW,CAAC,EAEjBotG,EAAKtjE,QAAU,EAEfsjE,EAAK4B,WAAa,EAAE5B,CAErB,CA2ZC,OA3ZAhhI,EAAAA,EAAAA,GAAAstB,EAAA,EAAAhyB,IAAA,YAAAzB,IAED,WAEC,OAAOxE,KAAKutI,UAEb,EAAC9oI,IAED,SAAe5E,GAETG,KAAKutI,WAAa,IAAM1tI,EAAQ,GAEpCG,KAAKqoE,UAINroE,KAAKutI,WAAa1tI,CAEnB,GAAC,CAAAoG,IAAA,UAAApG,MAED,WAAyC,GAAC,CAAAoG,IAAA,iBAAApG,MAE1C,WAA0E,GAAC,CAAAoG,IAAA,kBAAApG,MAE3E,WAAiD,GAAC,CAAAoG,IAAA,wBAAApG,MAElD,WAEC,OAAOG,KAAKwtI,gBAAgB36H,UAE7B,GAAC,CAAA5M,IAAA,YAAApG,MAED,SAAWynC,GAEV,QAAgBnmC,IAAXmmC,EAEL,IAAM,IAAMrhC,KAAOqhC,EAAS,CAE3B,IAAMmmG,EAAWnmG,EAAQrhC,GAEzB,QAAkB9E,IAAbssI,EAAL,CAOA,IAAMC,EAAe1tI,KAAMiG,QAEL9E,IAAjBusI,EAOAA,GAAgBA,EAAaz5E,QAEjCy5E,EAAajpI,IAAKgpI,GAELC,GAAgBA,EAAazQ,WAAiBwQ,GAAYA,EAASxQ,UAEhFyQ,EAAazpI,KAAMwpI,GAInBztI,KAAMiG,GAAQwnI,EAfd5qI,QAAQC,KAAM,SAAW9C,KAAK6B,KAAO,MAASoE,EAAM,wCANrD,MAHCpD,QAAQC,KAAM,oBAAuBmD,EAAM,4BA4B7C,CAED,GAAC,CAAAA,IAAA,SAAApG,MAED,SAAQ+1H,GAEP,IAAMC,OAA0B10H,IAATy0H,GAAsC,kBAATA,EAE/CC,IAEJD,EAAO,CACNlvB,SAAU,CAAC,EACXG,OAAQ,CAAC,IAKX,IAAMl6F,EAAO,CACZkqH,SAAU,CACTxuD,QAAS,IACTxmE,KAAM,WACNi1H,UAAW,oBAqMb,SAAS2S,EAAkB7nG,GAE1B,IAAM0F,EAAS,GAEf,IAAM,IAAMrhC,KAAO27B,EAAQ,CAE1B,IAAMj1B,EAAOi1B,EAAO37B,UACb0G,EAAKkqH,SACZvvF,EAAOhlC,KAAMqK,EAEd,CAEA,OAAO26B,CAER,CAEA,GAhNA36B,EAAK3B,KAAOhL,KAAKgL,KACjB2B,EAAK9K,KAAO7B,KAAK6B,KAEE,KAAd7B,KAAKG,OAAcwM,EAAKxM,KAAOH,KAAKG,MAEpCH,KAAK6hG,OAAS7hG,KAAK6hG,MAAM5tC,UAAUtnD,EAAKk1F,MAAQ7hG,KAAK6hG,MAAMyyB,eAExCnzH,IAAnBnB,KAAK84G,YAA0BnsG,EAAKmsG,UAAY94G,KAAK84G,gBAClC33G,IAAnBnB,KAAK44G,YAA0BjsG,EAAKisG,UAAY54G,KAAK44G,gBAEtCz3G,IAAfnB,KAAK+kG,QAAsBp4F,EAAKo4F,MAAQ/kG,KAAK+kG,OAC7C/kG,KAAK6kG,YAAc7kG,KAAK6kG,WAAW5wC,UAAUtnD,EAAKk4F,WAAa7kG,KAAK6kG,WAAWyvB,eACvDnzH,IAAxBnB,KAAK8kG,iBAA+Bn4F,EAAKm4F,eAAiB9kG,KAAK8kG,gBAC/D9kG,KAAK45G,UAAY55G,KAAK45G,SAAS3lD,UAAUtnD,EAAKitG,SAAW55G,KAAK45G,SAAS0a,UACvEt0H,KAAKyjG,mBAAgD,IAA3BzjG,KAAKyjG,oBAA0B92F,EAAK82F,kBAAoBzjG,KAAKyjG,mBAEvFzjG,KAAK2tI,UAAY3tI,KAAK2tI,SAAS15E,UAAUtnD,EAAKghI,SAAW3tI,KAAK2tI,SAASrZ,eAC5CnzH,IAA3BnB,KAAK8lG,oBAAkCn5F,EAAKm5F,kBAAoB9lG,KAAK8lG,mBACrE9lG,KAAKkmG,eAAiBlmG,KAAKkmG,cAAcjyC,UAAUtnD,EAAKu5F,cAAgBlmG,KAAKkmG,cAAcouB,eACxEnzH,IAAnBnB,KAAK4tI,YAA0BjhI,EAAKihI,UAAY5tI,KAAK4tI,gBAClCzsI,IAAnBnB,KAAK6jG,YAA0Bl3F,EAAKk3F,UAAY7jG,KAAK6jG,gBACzB1iG,IAA5BnB,KAAKgkG,qBAAmCr3F,EAAKq3F,mBAAqBhkG,KAAKgkG,oBAEvEhkG,KAAK6tI,cAAgB7tI,KAAK6tI,aAAazX,YAE3CzpH,EAAKkhI,aAAe7tI,KAAK6tI,aAAa9W,OAAQnB,GAAO5qH,MAIjDhL,KAAK8tI,uBAAyB9tI,KAAK8tI,sBAAsB1X,YAE7DzpH,EAAKmhI,sBAAwB9tI,KAAK8tI,sBAAsB/W,OAAQnB,GAAO5qH,MAInEhL,KAAK+tI,oBAAsB/tI,KAAK+tI,mBAAmB3X,YAEvDzpH,EAAKohI,mBAAqB/tI,KAAK+tI,mBAAmBhX,OAAQnB,GAAO5qH,KACjE2B,EAAKw3F,qBAAuBnkG,KAAKmkG,qBAAqB1mE,gBAI7Bt8B,IAArBnB,KAAKqkG,cAA4B13F,EAAK03F,YAAcrkG,KAAKqkG,kBACjCljG,IAAxBnB,KAAKwkG,iBAA+B73F,EAAK63F,eAAiBxkG,KAAKwkG,qBAC5BrjG,IAAnCnB,KAAKykG,4BAA0C93F,EAAK83F,0BAA4BzkG,KAAKykG,2BAErFzkG,KAAKguI,gBAAkBhuI,KAAKguI,eAAe5X,YAE/CzpH,EAAKqhI,eAAiBhuI,KAAKguI,eAAejX,OAAQnB,GAAO5qH,MAIrDhL,KAAKiuI,yBAA2BjuI,KAAKiuI,wBAAwB7X,YAEjEzpH,EAAKshI,wBAA0BjuI,KAAKiuI,wBAAwBlX,OAAQnB,GAAO5qH,MAIvEhL,KAAKkgC,KAAOlgC,KAAKkgC,IAAIk2F,YAAYzpH,EAAKuzB,IAAMlgC,KAAKkgC,IAAI62F,OAAQnB,GAAO5qH,MACpEhL,KAAKkuI,QAAUluI,KAAKkuI,OAAO9X,YAAYzpH,EAAKuhI,OAASluI,KAAKkuI,OAAOnX,OAAQnB,GAAO5qH,MAChFhL,KAAKmuI,UAAYnuI,KAAKmuI,SAAS/X,YAAYzpH,EAAKwhI,SAAWnuI,KAAKmuI,SAASpX,OAAQnB,GAAO5qH,MAExFhL,KAAKouI,UAAYpuI,KAAKouI,SAAShY,YAEnCzpH,EAAKyhI,SAAWpuI,KAAKouI,SAASrX,OAAQnB,GAAO5qH,KAC7C2B,EAAK0hI,kBAAoBruI,KAAKquI,mBAI1BruI,KAAKsuI,OAAStuI,KAAKsuI,MAAMlY,YAE7BzpH,EAAK2hI,MAAQtuI,KAAKsuI,MAAMvX,OAAQnB,GAAO5qH,KACvC2B,EAAK+sG,eAAiB15G,KAAK05G,gBAIvB15G,KAAKuuI,SAAWvuI,KAAKuuI,QAAQnY,YAEjCzpH,EAAK4hI,QAAUvuI,KAAKuuI,QAAQxX,OAAQnB,GAAO5qH,KAC3C2B,EAAK6hI,UAAYxuI,KAAKwuI,WAIlBxuI,KAAKyuI,WAAazuI,KAAKyuI,UAAUrY,YAErCzpH,EAAK8hI,UAAYzuI,KAAKyuI,UAAU1X,OAAQnB,GAAO5qH,KAC/C2B,EAAK+hI,cAAgB1uI,KAAK0uI,cAC1B/hI,EAAK4rG,YAAcv4G,KAAKu4G,YAAY96E,WAIhCz9B,KAAK2uI,iBAAmB3uI,KAAK2uI,gBAAgBvY,YAEjDzpH,EAAKgiI,gBAAkB3uI,KAAK2uI,gBAAgB5X,OAAQnB,GAAO5qH,KAC3D2B,EAAKiiI,kBAAoB5uI,KAAK4uI,kBAC9BjiI,EAAKkiI,iBAAmB7uI,KAAK6uI,kBAIzB7uI,KAAK8uI,cAAgB9uI,KAAK8uI,aAAa1Y,YAAYzpH,EAAKmiI,aAAe9uI,KAAK8uI,aAAa/X,OAAQnB,GAAO5qH,MACxGhL,KAAK+uI,cAAgB/uI,KAAK+uI,aAAa3Y,YAAYzpH,EAAKoiI,aAAe/uI,KAAK+uI,aAAahY,OAAQnB,GAAO5qH,MAExGhL,KAAKgvI,aAAehvI,KAAKgvI,YAAY5Y,YAAYzpH,EAAKqiI,YAAchvI,KAAKgvI,YAAYjY,OAAQnB,GAAO5qH,MACpGhL,KAAKivI,aAAejvI,KAAKivI,YAAY7Y,YAAYzpH,EAAKsiI,YAAcjvI,KAAKivI,YAAYlY,OAAQnB,GAAO5qH,MACpGhL,KAAKkvI,sBAAwBlvI,KAAKkvI,qBAAqB9Y,YAAYzpH,EAAKuiI,qBAAuBlvI,KAAKkvI,qBAAqBnY,OAAQnB,GAAO5qH,MACxIhL,KAAKmvI,kBAAoBnvI,KAAKmvI,iBAAiB/Y,YAAYzpH,EAAKwiI,iBAAmBnvI,KAAKmvI,iBAAiBpY,OAAQnB,GAAO5qH,MAExHhL,KAAKovI,QAAUpvI,KAAKovI,OAAOhZ,YAE/BzpH,EAAKyiI,OAASpvI,KAAKovI,OAAOrY,OAAQnB,GAAO5qH,UAEnB7J,IAAjBnB,KAAKqvI,UAAwB1iI,EAAK0iI,QAAUrvI,KAAKqvI,eAIzBluI,IAAzBnB,KAAKsvI,kBAAgC3iI,EAAK2iI,gBAAkBtvI,KAAKsvI,sBAC3CnuI,IAAtBnB,KAAKuvI,eAA6B5iI,EAAK4iI,aAAevvI,KAAKuvI,mBAClCpuI,IAAzBnB,KAAKwvI,kBAAgC7iI,EAAK6iI,gBAAkBxvI,KAAKwvI,iBAEjExvI,KAAKyvI,aAAezvI,KAAKyvI,YAAYrZ,YAEzCzpH,EAAK8iI,YAAczvI,KAAKyvI,YAAY1Y,OAAQnB,GAAO5qH,WAIzB7J,IAAtBnB,KAAKqlG,eAA6B14F,EAAK04F,aAAerlG,KAAKqlG,cAC3DrlG,KAAK0vI,iBAAmB1vI,KAAK0vI,gBAAgBtZ,YAAYzpH,EAAK+iI,gBAAkB1vI,KAAK0vI,gBAAgB3Y,OAAQnB,GAAO5qH,WACjG7J,IAAnBnB,KAAKulG,YAA0B54F,EAAK44F,UAAYvlG,KAAKulG,WACrDvlG,KAAK2vI,cAAgB3vI,KAAK2vI,aAAavZ,YAAYzpH,EAAKgjI,aAAe3vI,KAAK2vI,aAAa5Y,OAAQnB,GAAO5qH,WAC3E7J,IAA7BnB,KAAK0lG,sBAAoC/4F,EAAK+4F,oBAAsB1lG,KAAK0lG,0BAC/CvkG,IAA1BnB,KAAK4lG,mBAAiCj5F,EAAKi5F,iBAAmB5lG,KAAK4lG,iBAAiB0uB,eAEtEnzH,IAAdnB,KAAK+J,OAAqB4C,EAAK5C,KAAO/J,KAAK+J,MACvB,OAApB/J,KAAK+sI,aAAsBpgI,EAAKogI,WAAa/sI,KAAK+sI,iBACzB5rI,IAAzBnB,KAAKg4G,kBAAgCrrG,EAAKqrG,gBAAkBh4G,KAAKg4G,iBAEjEh4G,KAAKg0C,WAAa6wE,IAAiBl4G,EAAKqnC,SAAWh0C,KAAKg0C,UACxDh0C,KAAKiuC,OAASusE,IAAY7tG,EAAKshC,KAAOjuC,KAAKiuC,MAC3CjuC,KAAKq4G,eAAe1rG,EAAK0rG,cAAe,GAExCr4G,KAAKijG,QAAU,IAAIt2F,EAAKs2F,QAAUjjG,KAAKijG,UAClB,IAArBjjG,KAAKo5G,cAAuBzsG,EAAKysG,YAAcp5G,KAAKo5G,aAEzDzsG,EAAKw/H,UAAYnsI,KAAKmsI,UACtBx/H,EAAKwnC,UAAYn0C,KAAKm0C,UACtBxnC,EAAKunC,WAAal0C,KAAKk0C,WACvBvnC,EAAKqgI,WAAahtI,KAAKgtI,WAEvBrgI,EAAKggI,aAAe3sI,KAAK2sI,aACzBhgI,EAAKy/H,iBAAmBpsI,KAAKosI,iBAC7Bz/H,EAAK0/H,YAAcrsI,KAAKqsI,YACxB1/H,EAAK2/H,WAAatsI,KAAKssI,WACvB3/H,EAAK4/H,gBAAkBvsI,KAAKusI,gBAC5B5/H,EAAK6/H,YAAcxsI,KAAKwsI,YACxB7/H,EAAK8/H,aAAezsI,KAAKysI,aACzB9/H,EAAK+/H,aAAe1sI,KAAK0sI,kBAGFvrI,IAAlBnB,KAAKq+B,UAA4C,IAAlBr+B,KAAKq+B,WAAiB1xB,EAAK0xB,SAAWr+B,KAAKq+B,WAEnD,IAAvBr+B,KAAKitI,gBAAyBtgI,EAAKsgI,eAAgB,GACtB,IAA7BjtI,KAAKktI,sBAA4BvgI,EAAKugI,oBAAsBltI,KAAKktI,qBACrC,IAA5BltI,KAAKmtI,qBAA2BxgI,EAAKwgI,mBAAqBntI,KAAKmtI,yBAE5ChsI,IAAnBnB,KAAK4vI,WAA8C,IAAnB5vI,KAAK4vI,YAAkBjjI,EAAKijI,UAAY5vI,KAAK4vI,gBAC3DzuI,IAAlBnB,KAAK6vI,WAAyBljI,EAAKkjI,SAAW7vI,KAAK6vI,eAClC1uI,IAAjBnB,KAAK8vI,UAAwBnjI,EAAKmjI,QAAU9vI,KAAK8vI,cAClC3uI,IAAfnB,KAAK2mB,QAAsBha,EAAKga,MAAQ3mB,KAAK2mB,QAE1B,IAAnB3mB,KAAKotI,YAAqBzgI,EAAKygI,WAAY,GAE3CptI,KAAKq5G,UAAY,IAAI1sG,EAAK0sG,UAAYr5G,KAAKq5G,YAClB,IAAzBr5G,KAAKqtI,kBAA2B1gI,EAAK0gI,gBAAkBrtI,KAAKqtI,kBAChC,IAA5BrtI,KAAKstI,qBAA8B3gI,EAAK2gI,mBAAqBttI,KAAKstI,qBAE/C,IAAnBttI,KAAK+vI,YAAqBpjI,EAAKojI,UAAY/vI,KAAK+vI,WAChD/vI,KAAKgwI,mBAAqB,IAAIrjI,EAAKqjI,mBAAqBhwI,KAAKgwI,oBACnC,UAA1BhwI,KAAKiwI,mBAA+BtjI,EAAKsjI,iBAAmBjwI,KAAKiwI,kBACtC,UAA3BjwI,KAAKkwI,oBAAgCvjI,EAAKujI,kBAAoBlwI,KAAKkwI,oBAE9C,IAArBlwI,KAAKs4G,cAAuB3rG,EAAK2rG,YAAct4G,KAAKs4G,cAEnC,IAAjBt4G,KAAKy8C,UAAoB9vC,EAAK8vC,SAAU,IAEpB,IAApBz8C,KAAKo0C,aAAuBznC,EAAKynC,YAAa,IAEjC,IAAbp0C,KAAKmwI,MAAgBxjI,EAAKwjI,KAAM,GAEI,OAApC/xC,KAAKw4B,UAAW52H,KAAKu+B,YAAsB5xB,EAAK4xB,SAAWv+B,KAAKu+B,UAoBhEs3F,EAAe,CAEnB,IAAMnvB,EAAW+iC,EAAkB7T,EAAKlvB,UAClCG,EAAS4iC,EAAkB7T,EAAK/uB,QAEjCH,EAASnkG,OAAS,IAAIoK,EAAK+5F,SAAWA,GACtCG,EAAOtkG,OAAS,IAAIoK,EAAKk6F,OAASA,EAExC,CAEA,OAAOl6F,CAER,GAAC,CAAA1G,IAAA,QAAApG,MAED,WAEC,OAAO,IAAIG,KAAK4zD,aAAc3vD,KAAMjE,KAErC,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAM8G,GAEL3G,KAAKG,KAAOwG,EAAOxG,KAEnBH,KAAKg0C,SAAWrtC,EAAOqtC,SACvBh0C,KAAKiuC,KAAOtnC,EAAOsnC,KACnBjuC,KAAKq4G,aAAe1xG,EAAO0xG,aAE3Br4G,KAAKijG,QAAUt8F,EAAOs8F,QACtBjjG,KAAKo5G,YAAczyG,EAAOyyG,YAE1Bp5G,KAAK6rI,SAAWllI,EAAOklI,SACvB7rI,KAAK8rI,SAAWnlI,EAAOmlI,SACvB9rI,KAAK+rI,cAAgBplI,EAAOolI,cAC5B/rI,KAAKgsI,cAAgBrlI,EAAOqlI,cAC5BhsI,KAAKisI,cAAgBtlI,EAAOslI,cAC5BjsI,KAAKksI,mBAAqBvlI,EAAOulI,mBAEjClsI,KAAKmsI,UAAYxlI,EAAOwlI,UACxBnsI,KAAKm0C,UAAYxtC,EAAOwtC,UACxBn0C,KAAKk0C,WAAavtC,EAAOutC,WAEzBl0C,KAAKosI,iBAAmBzlI,EAAOylI,iBAC/BpsI,KAAKqsI,YAAc1lI,EAAO0lI,YAC1BrsI,KAAKssI,WAAa3lI,EAAO2lI,WACzBtsI,KAAKusI,gBAAkB5lI,EAAO4lI,gBAC9BvsI,KAAKwsI,YAAc7lI,EAAO6lI,YAC1BxsI,KAAKysI,aAAe9lI,EAAO8lI,aAC3BzsI,KAAK0sI,aAAe/lI,EAAO+lI,aAC3B1sI,KAAK2sI,aAAehmI,EAAOgmI,aAE3B,IAAMyD,EAAYzpI,EAAOimI,eACrByD,EAAY,KAEhB,GAAmB,OAAdD,EAAqB,CAEzB,IAAMpsI,EAAIosI,EAAU7tI,OACpB8tI,EAAY,IAAI1sI,MAAOK,GAEvB,IAAM,IAAIJ,EAAI,EAAGA,IAAMI,IAAMJ,EAE5BysI,EAAWzsI,GAAMwsI,EAAWxsI,GAAIwc,OAIlC,CA4BA,OA1BApgB,KAAK4sI,eAAiByD,EACtBrwI,KAAK6sI,iBAAmBlmI,EAAOkmI,iBAC/B7sI,KAAK8sI,YAAcnmI,EAAOmmI,YAE1B9sI,KAAK+sI,WAAapmI,EAAOomI,WAEzB/sI,KAAKgtI,WAAarmI,EAAOqmI,WAEzBhtI,KAAKsV,UAAY3O,EAAO2O,UAExBtV,KAAKitI,cAAgBtmI,EAAOsmI,cAC5BjtI,KAAKktI,oBAAsBvmI,EAAOumI,oBAClCltI,KAAKmtI,mBAAqBxmI,EAAOwmI,mBAEjCntI,KAAKotI,UAAYzmI,EAAOymI,UAExBptI,KAAKq5G,UAAY1yG,EAAO0yG,UACxBr5G,KAAKqtI,gBAAkB1mI,EAAO0mI,gBAC9BrtI,KAAKstI,mBAAqB3mI,EAAO2mI,mBAEjCttI,KAAKy8C,QAAU91C,EAAO81C,QAEtBz8C,KAAKo0C,WAAaztC,EAAOytC,WAEzBp0C,KAAKu+B,SAAW6/D,KAAKJ,MAAOI,KAAKw4B,UAAWjwH,EAAO43B,WAE5Cv+B,IAER,GAAC,CAAAiG,IAAA,UAAApG,MAED,WAECG,KAAKssB,cAAe,CAAEzqB,KAAM,WAE7B,GAAC,CAAAoE,IAAA,cAAAxB,IAED,SAAiB5E,IAED,IAAVA,GAAiBG,KAAKqoE,SAE5B,KAACpwC,CAAA,CAleY,CAASuxB,IAsejBs5C,GAAiB,SAAAwtC,IAAAjoI,EAAAA,EAAAA,GAAAy6F,EAAAwtC,GAAA,IAAAC,GAAAhoI,EAAAA,EAAAA,GAAAu6F,GAEtB,SAAAA,EAAatsD,GAAa,IAAAg6F,EAkCI,OAlCJ9nI,EAAAA,EAAAA,GAAA,KAAAo6F,IAEzB0tC,EAAAD,EAAAnxI,KAAA,OAEKqxI,qBAAsB,EAE3BD,EAAK3uI,KAAO,oBAEZ2uI,EAAK3uC,MAAQ,IAAIC,GAAO,UAExB0uC,EAAKtwG,IAAM,KAEXswG,EAAKpC,SAAW,KAChBoC,EAAKnC,kBAAoB,EAEzBmC,EAAKlC,MAAQ,KACbkC,EAAK92B,eAAiB,EAEtB82B,EAAKvB,YAAc,KAEnBuB,EAAKrC,SAAW,KAEhBqC,EAAKpB,OAAS,KACdoB,EAAKnB,QAAU3oB,GACf8pB,EAAKjB,aAAe,EACpBiB,EAAKhB,gBAAkB,IAEvBgB,EAAKT,WAAY,EACjBS,EAAKR,mBAAqB,EAC1BQ,EAAKP,iBAAmB,QACxBO,EAAKN,kBAAoB,QAEzBM,EAAKL,KAAM,EAEXK,EAAKh5F,UAAWhB,GAAag6F,CAE9B,CAkCC,OAlCA7lI,EAAAA,EAAAA,GAAAm4F,EAAA,EAAA78F,IAAA,OAAApG,MAED,SAAM8G,GA8BL,OA5BAolC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA82D,EAAA3jG,WAAA,aAAAC,KAAA,KAAYuH,GAEZ3G,KAAK6hG,MAAM59F,KAAM0C,EAAOk7F,OAExB7hG,KAAKkgC,IAAMv5B,EAAOu5B,IAElBlgC,KAAKouI,SAAWznI,EAAOynI,SACvBpuI,KAAKquI,kBAAoB1nI,EAAO0nI,kBAEhCruI,KAAKsuI,MAAQ3nI,EAAO2nI,MACpBtuI,KAAK05G,eAAiB/yG,EAAO+yG,eAE7B15G,KAAKivI,YAActoI,EAAOsoI,YAE1BjvI,KAAKmuI,SAAWxnI,EAAOwnI,SAEvBnuI,KAAKovI,OAASzoI,EAAOyoI,OACrBpvI,KAAKqvI,QAAU1oI,EAAO0oI,QACtBrvI,KAAKuvI,aAAe5oI,EAAO4oI,aAC3BvvI,KAAKwvI,gBAAkB7oI,EAAO6oI,gBAE9BxvI,KAAK+vI,UAAYppI,EAAOopI,UACxB/vI,KAAKgwI,mBAAqBrpI,EAAOqpI,mBACjChwI,KAAKiwI,iBAAmBtpI,EAAOspI,iBAC/BjwI,KAAKkwI,kBAAoBvpI,EAAOupI,kBAEhClwI,KAAKmwI,IAAMxpI,EAAOwpI,IAEXnwI,IAER,KAAC8iG,CAAA,CAxEqB,CAAS7qE,IA4E1By4G,GAA0B,IAAIp0G,GAC9Bq0G,GAA2B,IAAIv9F,GAE/BwC,GAAe,WAEpB,SAAAA,EAAawpB,EAAO21C,EAAUhK,GAE7B,IAF0CriG,EAAAA,EAAAA,GAAA,KAAAktC,GAErCjyC,MAAM0sC,QAAS+uB,GAEnB,MAAM,IAAI39D,UAAW,yDAItBzB,KAAK4wI,mBAAoB,EAEzB5wI,KAAKG,KAAO,GAEZH,KAAKo/D,MAAQA,EACbp/D,KAAK+0G,SAAWA,EAChB/0G,KAAK4C,WAAkBzB,IAAVi+D,EAAsBA,EAAM78D,OAASwyG,EAAW,EAC7D/0G,KAAK+qG,YAA4B,IAAfA,EAElB/qG,KAAK6wI,MAAQrkB,GACbxsH,KAAK8wI,YAAc,CAAElqH,OAAQ,EAAGhkB,OAAS,GAEzC5C,KAAKqoE,QAAU,CAEhB,CAiVC,OAjVA19D,EAAAA,EAAAA,GAAAirC,EAAA,EAAA3vC,IAAA,mBAAApG,MAED,WAAoB,GAAC,CAAAoG,IAAA,cAAAxB,IAErB,SAAiB5E,IAED,IAAVA,GAAiBG,KAAKqoE,SAE5B,GAAC,CAAApiE,IAAA,WAAApG,MAED,SAAUA,GAIT,OAFAG,KAAK6wI,MAAQhxI,EAENG,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAM8G,GAUL,OARA3G,KAAKG,KAAOwG,EAAOxG,KACnBH,KAAKo/D,MAAQ,IAAIz4D,EAAOy4D,MAAMxL,YAAajtD,EAAOy4D,OAClDp/D,KAAK+0G,SAAWpuG,EAAOouG,SACvB/0G,KAAK4C,MAAQ+D,EAAO/D,MACpB5C,KAAK+qG,WAAapkG,EAAOokG,WAEzB/qG,KAAK6wI,MAAQlqI,EAAOkqI,MAEb7wI,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQkxI,EAAQ9lC,EAAW+lC,GAE1BD,GAAU/wI,KAAK+0G,SACfi8B,GAAU/lC,EAAU8J,SAEpB,IAAM,IAAInxG,EAAI,EAAGwS,EAAIpW,KAAK+0G,SAAUnxG,EAAIwS,EAAGxS,IAE1C5D,KAAKo/D,MAAO2xE,EAASntI,GAAMqnG,EAAU7rC,MAAO4xE,EAASptI,GAItD,OAAO5D,IAER,GAAC,CAAAiG,IAAA,YAAApG,MAED,SAAWu/D,GAIV,OAFAp/D,KAAKo/D,MAAM36D,IAAK26D,GAETp/D,IAER,GAAC,CAAAiG,IAAA,eAAApG,MAED,SAAckC,GAEb,GAAuB,IAAlB/B,KAAK+0G,SAET,IAAM,IAAInxG,EAAI,EAAGwS,EAAIpW,KAAK4C,MAAOgB,EAAIwS,EAAGxS,IAEvC+sI,GAAWvnC,oBAAqBppG,KAAM4D,GACtC+sI,GAAW1Z,aAAcl1H,GAEzB/B,KAAKixI,MAAOrtI,EAAG+sI,GAAW3hI,EAAG2hI,GAAW1hI,QAInC,GAAuB,IAAlBjP,KAAK+0G,SAEhB,IAAM,IAAInxG,EAAI,EAAGwS,EAAIpW,KAAK4C,MAAOgB,EAAIwS,EAAGxS,IAEvC8sI,GAAUtnC,oBAAqBppG,KAAM4D,GACrC8sI,GAAUzZ,aAAcl1H,GAExB/B,KAAKkxI,OAAQttI,EAAG8sI,GAAU1hI,EAAG0hI,GAAUzhI,EAAGyhI,GAAUxhI,GAMtD,OAAOlP,IAER,GAAC,CAAAiG,IAAA,eAAApG,MAED,SAAckC,GAEb,IAAM,IAAI6B,EAAI,EAAGwS,EAAIpW,KAAK4C,MAAOgB,EAAIwS,EAAGxS,IAEvC8sI,GAAUtnC,oBAAqBppG,KAAM4D,GAErC8sI,GAAUx1F,aAAcn5C,GAExB/B,KAAKkxI,OAAQttI,EAAG8sI,GAAU1hI,EAAG0hI,GAAUzhI,EAAGyhI,GAAUxhI,GAIrD,OAAOlP,IAER,GAAC,CAAAiG,IAAA,oBAAApG,MAED,SAAmBkC,GAElB,IAAM,IAAI6B,EAAI,EAAGwS,EAAIpW,KAAK4C,MAAOgB,EAAIwS,EAAGxS,IAEvC8sI,GAAUtnC,oBAAqBppG,KAAM4D,GAErC8sI,GAAUS,kBAAmBpvI,GAE7B/B,KAAKkxI,OAAQttI,EAAG8sI,GAAU1hI,EAAG0hI,GAAUzhI,EAAGyhI,GAAUxhI,GAIrD,OAAOlP,IAER,GAAC,CAAAiG,IAAA,qBAAApG,MAED,SAAoBkC,GAEnB,IAAM,IAAI6B,EAAI,EAAGwS,EAAIpW,KAAK4C,MAAOgB,EAAIwS,EAAGxS,IAEvC8sI,GAAUtnC,oBAAqBppG,KAAM4D,GAErC8sI,GAAUpN,mBAAoBvhI,GAE9B/B,KAAKkxI,OAAQttI,EAAG8sI,GAAU1hI,EAAG0hI,GAAUzhI,EAAGyhI,GAAUxhI,GAIrD,OAAOlP,IAER,GAAC,CAAAiG,IAAA,MAAApG,MAED,SAAKA,GAAoB,IAAb+mB,EAAMhmB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAKpB,OAFAZ,KAAKo/D,MAAM36D,IAAK5E,EAAO+mB,GAEhB5mB,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAM+F,GAEL,IAAIoJ,EAAIhP,KAAKo/D,MAAOx5D,EAAQ5F,KAAK+0G,UAIjC,OAFK/0G,KAAK+qG,aAAa/7F,EAAI++G,GAAa/+G,EAAGhP,KAAKo/D,QAEzCpwD,CAER,GAAC,CAAA/I,IAAA,OAAApG,MAED,SAAM+F,EAAOoJ,GAMZ,OAJKhP,KAAK+qG,aAAa/7F,EAAIsK,GAAWtK,EAAGhP,KAAKo/D,QAE9Cp/D,KAAKo/D,MAAOx5D,EAAQ5F,KAAK+0G,UAAa/lG,EAE/BhP,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAM+F,GAEL,IAAIqJ,EAAIjP,KAAKo/D,MAAOx5D,EAAQ5F,KAAK+0G,SAAW,GAI5C,OAFK/0G,KAAK+qG,aAAa97F,EAAI8+G,GAAa9+G,EAAGjP,KAAKo/D,QAEzCnwD,CAER,GAAC,CAAAhJ,IAAA,OAAApG,MAED,SAAM+F,EAAOqJ,GAMZ,OAJKjP,KAAK+qG,aAAa97F,EAAIqK,GAAWrK,EAAGjP,KAAKo/D,QAE9Cp/D,KAAKo/D,MAAOx5D,EAAQ5F,KAAK+0G,SAAW,GAAM9lG,EAEnCjP,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAM+F,GAEL,IAAIsJ,EAAIlP,KAAKo/D,MAAOx5D,EAAQ5F,KAAK+0G,SAAW,GAI5C,OAFK/0G,KAAK+qG,aAAa77F,EAAI6+G,GAAa7+G,EAAGlP,KAAKo/D,QAEzClwD,CAER,GAAC,CAAAjJ,IAAA,OAAApG,MAED,SAAM+F,EAAOsJ,GAMZ,OAJKlP,KAAK+qG,aAAa77F,EAAIoK,GAAWpK,EAAGlP,KAAKo/D,QAE9Cp/D,KAAKo/D,MAAOx5D,EAAQ5F,KAAK+0G,SAAW,GAAM7lG,EAEnClP,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAM+F,GAEL,IAAInD,EAAIzC,KAAKo/D,MAAOx5D,EAAQ5F,KAAK+0G,SAAW,GAI5C,OAFK/0G,KAAK+qG,aAAatoG,EAAIsrH,GAAatrH,EAAGzC,KAAKo/D,QAEzC38D,CAER,GAAC,CAAAwD,IAAA,OAAApG,MAED,SAAM+F,EAAOnD,GAMZ,OAJKzC,KAAK+qG,aAAatoG,EAAI6W,GAAW7W,EAAGzC,KAAKo/D,QAE9Cp/D,KAAKo/D,MAAOx5D,EAAQ5F,KAAK+0G,SAAW,GAAMtyG,EAEnCzC,IAER,GAAC,CAAAiG,IAAA,QAAApG,MAED,SAAO+F,EAAOoJ,EAAGC,GAchB,OAZArJ,GAAS5F,KAAK+0G,SAET/0G,KAAK+qG,aAET/7F,EAAIsK,GAAWtK,EAAGhP,KAAKo/D,OACvBnwD,EAAIqK,GAAWrK,EAAGjP,KAAKo/D,QAIxBp/D,KAAKo/D,MAAOx5D,EAAQ,GAAMoJ,EAC1BhP,KAAKo/D,MAAOx5D,EAAQ,GAAMqJ,EAEnBjP,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQ+F,EAAOoJ,EAAGC,EAAGC,GAgBpB,OAdAtJ,GAAS5F,KAAK+0G,SAET/0G,KAAK+qG,aAET/7F,EAAIsK,GAAWtK,EAAGhP,KAAKo/D,OACvBnwD,EAAIqK,GAAWrK,EAAGjP,KAAKo/D,OACvBlwD,EAAIoK,GAAWpK,EAAGlP,KAAKo/D,QAIxBp/D,KAAKo/D,MAAOx5D,EAAQ,GAAMoJ,EAC1BhP,KAAKo/D,MAAOx5D,EAAQ,GAAMqJ,EAC1BjP,KAAKo/D,MAAOx5D,EAAQ,GAAMsJ,EAEnBlP,IAER,GAAC,CAAAiG,IAAA,UAAApG,MAED,SAAS+F,EAAOoJ,EAAGC,EAAGC,EAAGzM,GAkBxB,OAhBAmD,GAAS5F,KAAK+0G,SAET/0G,KAAK+qG,aAET/7F,EAAIsK,GAAWtK,EAAGhP,KAAKo/D,OACvBnwD,EAAIqK,GAAWrK,EAAGjP,KAAKo/D,OACvBlwD,EAAIoK,GAAWpK,EAAGlP,KAAKo/D,OACvB38D,EAAI6W,GAAW7W,EAAGzC,KAAKo/D,QAIxBp/D,KAAKo/D,MAAOx5D,EAAQ,GAAMoJ,EAC1BhP,KAAKo/D,MAAOx5D,EAAQ,GAAMqJ,EAC1BjP,KAAKo/D,MAAOx5D,EAAQ,GAAMsJ,EAC1BlP,KAAKo/D,MAAOx5D,EAAQ,GAAMnD,EAEnBzC,IAER,GAAC,CAAAiG,IAAA,WAAApG,MAED,SAAUmpB,GAIT,OAFAhpB,KAAKoxI,iBAAmBpoH,EAEjBhpB,IAER,GAAC,CAAAiG,IAAA,QAAApG,MAED,WAEC,OAAO,IAAIG,KAAK4zD,YAAa5zD,KAAKo/D,MAAOp/D,KAAK+0G,UAAW9wG,KAAMjE,KAEhE,GAAC,CAAAiG,IAAA,SAAApG,MAED,WAEC,IAAM8M,EAAO,CACZooG,SAAU/0G,KAAK+0G,SACflzG,KAAM7B,KAAKo/D,MAAMxL,YAAYzzD,KAC7Bi/D,MAAOz7D,MAAMuU,KAAMlY,KAAKo/D,OACxB2rC,WAAY/qG,KAAK+qG,YAOlB,MAJmB,KAAd/qG,KAAKG,OAAcwM,EAAKxM,KAAOH,KAAKG,MACpCH,KAAK6wI,QAAUrkB,KAAkB7/G,EAAKkkI,MAAQ7wI,KAAK6wI,OACvB,IAA5B7wI,KAAK8wI,YAAYlqH,SAA6C,IAA7B5mB,KAAK8wI,YAAYluI,QAAgB+J,EAAKmkI,YAAc9wI,KAAK8wI,aAExFnkI,CAER,GAEA,CAAA1G,IAAA,kBAAApG,MAEA,WAECgD,QAAQkC,MAAO,gEAEhB,GAAC,CAAAkB,IAAA,oBAAApG,MAED,WAECgD,QAAQkC,MAAO,kEAEhB,GAAC,CAAAkB,IAAA,oBAAApG,MAED,WAECgD,QAAQkC,MAAO,kEAEhB,GAAC,CAAAkB,IAAA,oBAAApG,MAED,WAECgD,QAAQkC,MAAO,kEAEhB,KAAC6wC,CAAA,CAzWmB,GA+Wfy7F,GAAmB,SAAAC,IAAAjpI,EAAAA,EAAAA,GAAAgpI,EAAAC,GAAA,IAAAC,GAAAhpI,EAAAA,EAAAA,GAAA8oI,GAExB,SAAAA,EAAajyE,EAAO21C,EAAUhK,GAAa,OAAAriG,EAAAA,EAAAA,GAAA,KAAA2oI,GAAAE,EAAAnyI,KAAA,KAEnC,IAAIuuG,UAAWvuC,GAAS21C,EAAUhK,EAE1C,CAAC,OAAApgG,EAAAA,EAAAA,GAAA0mI,EAAA,CANuB,CAASz7F,IAU5B47F,GAAoB,SAAAC,IAAAppI,EAAAA,EAAAA,GAAAmpI,EAAAC,GAAA,IAAAC,GAAAnpI,EAAAA,EAAAA,GAAAipI,GAEzB,SAAAA,EAAapyE,EAAO21C,EAAUhK,GAAa,OAAAriG,EAAAA,EAAAA,GAAA,KAAA8oI,GAAAE,EAAAtyI,KAAA,KAEnC,IAAI4H,WAAYo4D,GAAS21C,EAAUhK,EAE3C,CAAC,OAAApgG,EAAAA,EAAAA,GAAA6mI,EAAA,CANwB,CAAS57F,IAU7B+7F,GAA2B,SAAAC,IAAAvpI,EAAAA,EAAAA,GAAAspI,EAAAC,GAAA,IAAAC,GAAAtpI,EAAAA,EAAAA,GAAAopI,GAEhC,SAAAA,EAAavyE,EAAO21C,EAAUhK,GAAa,OAAAriG,EAAAA,EAAAA,GAAA,KAAAipI,GAAAE,EAAAzyI,KAAA,KAEnC,IAAI8yH,kBAAmB9yD,GAAS21C,EAAUhK,EAElD,CAAC,OAAApgG,EAAAA,EAAAA,GAAAgnI,EAAA,CAN+B,CAAS/7F,IAUpCk8F,GAAoB,SAAAC,IAAA1pI,EAAAA,EAAAA,GAAAypI,EAAAC,GAAA,IAAAC,GAAAzpI,EAAAA,EAAAA,GAAAupI,GAEzB,SAAAA,EAAa1yE,EAAO21C,EAAUhK,GAAa,OAAAriG,EAAAA,EAAAA,GAAA,KAAAopI,GAAAE,EAAA5yI,KAAA,KAEnC,IAAIwuG,WAAYxuC,GAAS21C,EAAUhK,EAE3C,CAAC,OAAApgG,EAAAA,EAAAA,GAAAmnI,EAAA,CANwB,CAASl8F,IAU7Bq8F,GAAqB,SAAAC,IAAA7pI,EAAAA,EAAAA,GAAA4pI,EAAAC,GAAA,IAAAC,GAAA5pI,EAAAA,EAAAA,GAAA0pI,GAE1B,SAAAA,EAAa7yE,EAAO21C,EAAUhK,GAAa,OAAAriG,EAAAA,EAAAA,GAAA,KAAAupI,GAAAE,EAAA/yI,KAAA,KAEnC,IAAI+H,YAAai4D,GAAS21C,EAAUhK,EAE5C,CAAC,OAAApgG,EAAAA,EAAAA,GAAAsnI,EAAA,CANyB,CAASr8F,IAU9Bw8F,GAAoB,SAAAC,IAAAhqI,EAAAA,EAAAA,GAAA+pI,EAAAC,GAAA,IAAAC,GAAA/pI,EAAAA,EAAAA,GAAA6pI,GAEzB,SAAAA,EAAahzE,EAAO21C,EAAUhK,GAAa,OAAAriG,EAAAA,EAAAA,GAAA,KAAA0pI,GAAAE,EAAAlzI,KAAA,KAEnC,IAAI+yH,WAAY/yD,GAAS21C,EAAUhK,EAE3C,CAAC,OAAApgG,EAAAA,EAAAA,GAAAynI,EAAA,CANwB,CAASx8F,IAU7B28F,GAAqB,SAAAC,IAAAnqI,EAAAA,EAAAA,GAAAkqI,EAAAC,GAAA,IAAAC,GAAAlqI,EAAAA,EAAAA,GAAAgqI,GAE1B,SAAAA,EAAanzE,EAAO21C,EAAUhK,GAAa,OAAAriG,EAAAA,EAAAA,GAAA,KAAA6pI,GAAAE,EAAArzI,KAAA,KAEnC,IAAIyuG,YAAazuC,GAAS21C,EAAUhK,EAE5C,CAAC,OAAApgG,EAAAA,EAAAA,GAAA4nI,EAAA,CANyB,CAAS38F,IAU9B88F,GAAsB,SAAAC,IAAAtqI,EAAAA,EAAAA,GAAAqqI,EAAAC,GAAA,IAAAC,GAAArqI,EAAAA,EAAAA,GAAAmqI,GAE3B,SAAAA,EAAatzE,EAAO21C,EAAUhK,GAAa,IAAA8nC,EAIL,OAJKnqI,EAAAA,EAAAA,GAAA,KAAAgqI,IAE1CG,EAAAD,EAAAxzI,KAAA,KAAO,IAAI+H,YAAai4D,GAAS21C,EAAUhK,IAEtC+nC,0BAA2B,EAAKD,CAEtC,CAAC,OAAAloI,EAAAA,EAAAA,GAAA+nI,EAAA,CAR0B,CAAS98F,IAa/Bm9F,GAAsB,SAAAC,IAAA3qI,EAAAA,EAAAA,GAAA0qI,EAAAC,GAAA,IAAAC,GAAA1qI,EAAAA,EAAAA,GAAAwqI,GAE3B,SAAAA,EAAa3zE,EAAO21C,EAAUhK,GAAa,OAAAriG,EAAAA,EAAAA,GAAA,KAAAqqI,GAAAE,EAAA7zI,KAAA,KAEnC,IAAIqL,aAAc20D,GAAS21C,EAAUhK,EAE7C,CAAC,OAAApgG,EAAAA,EAAAA,GAAAooI,EAAA,CAN0B,CAASn9F,IAU/Bs9F,GAAsB,SAAAC,IAAA9qI,EAAAA,EAAAA,GAAA6qI,EAAAC,GAAA,IAAAC,GAAA7qI,EAAAA,EAAAA,GAAA2qI,GAE3B,SAAAA,EAAa9zE,EAAO21C,EAAUhK,GAAa,OAAAriG,EAAAA,EAAAA,GAAA,KAAAwqI,GAAAE,EAAAh0I,KAAA,KAEnC,IAAIgzH,aAAchzD,GAAS21C,EAAUhK,EAE7C,CAAC,OAAApgG,EAAAA,EAAAA,GAAAuoI,EAAA,CAN0B,CAASt9F,IAUjCy9F,GAAQ,EAENC,GAAoB,IAAI/2G,GACxBg3G,GAAqB,IAAI/2G,GACzBvP,GAAwB,IAAIqP,GAC5Bk3G,GAAuB,IAAI/zB,GAC3Bg0B,GAAiC,IAAIh0B,GACrCi0B,GAA0B,IAAIp3G,GAE9BoZ,GAAc,SAAAi+F,IAAAtrI,EAAAA,EAAAA,GAAAqtC,EAAAi+F,GAAA,IAAAC,GAAArrI,EAAAA,EAAAA,GAAAmtC,GAEnB,SAAAA,IAAc,IAAAm+F,EA0BM,OA1BNnrI,EAAAA,EAAAA,GAAA,KAAAgtC,IAEbm+F,EAAAD,EAAAx0I,KAAA,OAEK00I,kBAAmB,EAExBx0I,OAAOgF,gBAAcy5C,EAAAA,EAAAA,GAAA81F,GAAQ,KAAM,CAAEh0I,MAAOwzI,OAE5CQ,EAAK7oI,KAAOuiH,KAEZsmB,EAAK1zI,KAAO,GACZ0zI,EAAKhyI,KAAO,iBAEZgyI,EAAKjuI,MAAQ,KACbiuI,EAAKjrC,WAAa,CAAC,EAEnBirC,EAAK54B,gBAAkB,CAAC,EACxB44B,EAAKhzB,sBAAuB,EAE5BgzB,EAAKE,OAAS,GAEdF,EAAKh0B,YAAc,KACnBg0B,EAAK5zB,eAAiB,KAEtB4zB,EAAKG,UAAY,CAAE1sI,MAAO,EAAG1E,MAAOgQ,KAEpCihI,EAAKt1G,SAAW,CAAC,EAAEs1G,CAEpB,CA4gCC,OA5gCAlpI,EAAAA,EAAAA,GAAA+qC,EAAA,EAAAzvC,IAAA,WAAApG,MAED,WAEC,OAAOG,KAAK4F,KAEb,GAAC,CAAAK,IAAA,WAAApG,MAED,SAAU+F,GAYT,OAVKjC,MAAM0sC,QAASzqC,GAEnB5F,KAAK4F,MAAQ,IAAMosH,GAAkBpsH,GAAU2sI,GAAwBN,IAAyBrsI,EAAO,GAIvG5F,KAAK4F,MAAQA,EAIP5F,IAER,GAAC,CAAAiG,IAAA,eAAApG,MAED,SAAcM,GAEb,OAAOH,KAAK4oG,WAAYzoG,EAEzB,GAAC,CAAA8F,IAAA,eAAApG,MAED,SAAcM,EAAM8qG,GAInB,OAFAjrG,KAAK4oG,WAAYzoG,GAAS8qG,EAEnBjrG,IAER,GAAC,CAAAiG,IAAA,kBAAApG,MAED,SAAiBM,GAIhB,cAFOH,KAAK4oG,WAAYzoG,GAEjBH,IAER,GAAC,CAAAiG,IAAA,eAAApG,MAED,SAAcM,GAEb,YAAmCgB,IAA5BnB,KAAK4oG,WAAYzoG,EAEzB,GAAC,CAAA8F,IAAA,WAAApG,MAED,SAAUyH,EAAO1E,GAA2B,IAApB2gG,EAAa3iG,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAEvCZ,KAAK+zI,OAAOzxI,KAAM,CAEjBgF,MAAOA,EACP1E,MAAOA,EACP2gG,cAAeA,GAIjB,GAAC,CAAAt9F,IAAA,cAAApG,MAED,WAECG,KAAK+zI,OAAS,EAEf,GAAC,CAAA9tI,IAAA,eAAApG,MAED,SAAcyH,EAAO1E,GAEpB5C,KAAKg0I,UAAU1sI,MAAQA,EACvBtH,KAAKg0I,UAAUpxI,MAAQA,CAExB,GAAC,CAAAqD,IAAA,eAAApG,MAED,SAAcgR,GAEb,IAAMpL,EAAWzF,KAAK4oG,WAAWnjG,cAEftE,IAAbsE,IAEJA,EAASy1C,aAAcrqC,GAEvBpL,EAAS46B,aAAc,GAIxB,IAAMrb,EAAShlB,KAAK4oG,WAAW5jF,OAE/B,QAAgB7jB,IAAX6jB,EAAuB,CAE3B,IAAM+iH,GAAe,IAAIxX,IAAU0jB,gBAAiBpjI,GAEpDmU,EAAOmsH,kBAAmBpJ,GAE1B/iH,EAAOqb,aAAc,CAEtB,CAEA,IAAMq3E,EAAU13G,KAAK4oG,WAAW8O,QAsBhC,YApBiBv2G,IAAZu2G,IAEJA,EAAQ4rB,mBAAoBzyH,GAE5B6mG,EAAQr3E,aAAc,GAIG,OAArBrgC,KAAK6/G,aAET7/G,KAAK++H,qBAIuB,OAAxB/+H,KAAKigH,gBAETjgH,KAAKk0I,wBAICl0I,IAER,GAAC,CAAAiG,IAAA,kBAAApG,MAED,SAAiBqT,GAMhB,OAJAogI,GAAIhN,2BAA4BpzH,GAEhClT,KAAKk7C,aAAco4F,IAEZtzI,IAER,GAAC,CAAAiG,IAAA,UAAApG,MAED,SAASqZ,GAQR,OAJAo6H,GAAIa,cAAej7H,GAEnBlZ,KAAKk7C,aAAco4F,IAEZtzI,IAER,GAAC,CAAAiG,IAAA,UAAApG,MAED,SAASqZ,GAQR,OAJAo6H,GAAIc,cAAel7H,GAEnBlZ,KAAKk7C,aAAco4F,IAEZtzI,IAER,GAAC,CAAAiG,IAAA,UAAApG,MAED,SAASqZ,GAQR,OAJAo6H,GAAIe,cAAen7H,GAEnBlZ,KAAKk7C,aAAco4F,IAEZtzI,IAER,GAAC,CAAAiG,IAAA,YAAApG,MAED,SAAWmP,EAAGC,EAAGC,GAQhB,OAJAokI,GAAIgB,gBAAiBtlI,EAAGC,EAAGC,GAE3BlP,KAAKk7C,aAAco4F,IAEZtzI,IAER,GAAC,CAAAiG,IAAA,QAAApG,MAED,SAAOmP,EAAGC,EAAGC,GAQZ,OAJAokI,GAAIiB,UAAWvlI,EAAGC,EAAGC,GAErBlP,KAAKk7C,aAAco4F,IAEZtzI,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQ6Q,GAQP,OANA6iI,GAAKh4F,OAAQ7qC,GAEb6iI,GAAK90G,eAELz+B,KAAKk7C,aAAcq4F,GAAK1iI,QAEjB7Q,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,WAQC,OANAG,KAAK++H,qBAEL/+H,KAAK6/G,YAAYE,UAAW9yF,IAAU1X,SAEtCvV,KAAKw0I,UAAWvnH,GAAQje,EAAGie,GAAQhe,EAAGge,GAAQ/d,GAEvClP,IAER,GAAC,CAAAiG,IAAA,gBAAApG,MAED,SAAeoW,GAId,IAFA,IAAMxQ,EAAW,GAEP7B,EAAI,EAAGwS,EAAIH,EAAO1T,OAAQqB,EAAIwS,EAAGxS,IAAO,CAEjD,IAAMmhB,EAAQ9O,EAAQrS,GACtB6B,EAASnD,KAAMyiB,EAAM/V,EAAG+V,EAAM9V,EAAG8V,EAAM7V,GAAK,EAE7C,CAIA,OAFAlP,KAAK21C,aAAc,WAAY,IAAIo9F,GAAwBttI,EAAU,IAE9DzF,IAER,GAAC,CAAAiG,IAAA,qBAAApG,MAED,WAE2B,OAArBG,KAAK6/G,cAET7/G,KAAK6/G,YAAc,IAAIJ,IAIxB,IAAMh6G,EAAWzF,KAAK4oG,WAAWnjG,SAC3BgvI,EAA0Bz0I,KAAKi7G,gBAAgBx1G,SAErD,GAAKA,GAAYA,EAASivI,oBASzB,OAPA7xI,QAAQkC,MAAO,kJAAmJ/E,WAElKA,KAAK6/G,YAAYp7G,IAChB,IAAI63B,IAAW1pB,KAAYA,KAAYA,KACvC,IAAI0pB,GAAW1pB,IAAYA,IAAYA,MAOzC,QAAkBzR,IAAbsE,GAMJ,GAJAzF,KAAK6/G,YAAY80B,uBAAwBlvI,GAIpCgvI,EAEJ,IAAM,IAAI7wI,EAAI,EAAG8sG,EAAK+jC,EAAwBlyI,OAAQqB,EAAI8sG,EAAI9sG,IAAO,CAEpE,IAAMgxI,EAAiBH,EAAyB7wI,GAChD4vI,GAAOmB,uBAAwBC,GAE1B50I,KAAK6gH,sBAET6yB,GAAU9U,WAAY5+H,KAAK6/G,YAAYnpG,IAAK88H,GAAO98H,KACnD1W,KAAK6/G,YAAYye,cAAeoV,IAEhCA,GAAU9U,WAAY5+H,KAAK6/G,YAAYlpG,IAAK68H,GAAO78H,KACnD3W,KAAK6/G,YAAYye,cAAeoV,MAIhC1zI,KAAK6/G,YAAYye,cAAekV,GAAO98H,KACvC1W,KAAK6/G,YAAYye,cAAekV,GAAO78H,KAIzC,OAMD3W,KAAK6/G,YAAYwe,aAIbz+H,MAAOI,KAAK6/G,YAAYnpG,IAAI1H,IAAOpP,MAAOI,KAAK6/G,YAAYnpG,IAAIzH,IAAOrP,MAAOI,KAAK6/G,YAAYnpG,IAAIxH,KAEtGrM,QAAQkC,MAAO,sIAAuI/E,KAIxJ,GAAC,CAAAiG,IAAA,wBAAApG,MAED,WAE8B,OAAxBG,KAAKigH,iBAETjgH,KAAKigH,eAAiB,IAAIH,IAI3B,IAAMr6G,EAAWzF,KAAK4oG,WAAWnjG,SAC3BgvI,EAA0Bz0I,KAAKi7G,gBAAgBx1G,SAErD,GAAKA,GAAYA,EAASivI,oBAMzB,OAJA7xI,QAAQkC,MAAO,wJAAyJ/E,WAExKA,KAAKigH,eAAex7G,IAAK,IAAI63B,GAAW1pB,KAMzC,GAAKnN,EAAW,CAIf,IAAMu6G,EAAShgH,KAAKigH,eAAeD,OAMnC,GAJAwzB,GAAOmB,uBAAwBlvI,GAI1BgvI,EAEJ,IAAM,IAAI7wI,EAAI,EAAG8sG,EAAK+jC,EAAwBlyI,OAAQqB,EAAI8sG,EAAI9sG,IAAO,CAEpE,IAAMgxI,EAAiBH,EAAyB7wI,GAChD6vI,GAAiBkB,uBAAwBC,GAEpC50I,KAAK6gH,sBAET6yB,GAAU9U,WAAY4U,GAAO98H,IAAK+8H,GAAiB/8H,KACnD88H,GAAOlV,cAAeoV,IAEtBA,GAAU9U,WAAY4U,GAAO78H,IAAK88H,GAAiB98H,KACnD68H,GAAOlV,cAAeoV,MAItBF,GAAOlV,cAAemV,GAAiB/8H,KACvC88H,GAAOlV,cAAemV,GAAiB98H,KAIzC,CAID68H,GAAOzzB,UAAWC,GAOlB,IAFA,IAAI0gB,EAAc,EAER98H,EAAI,EAAG8sG,EAAKjrG,EAAS7C,MAAOgB,EAAI8sG,EAAI9sG,IAE7C8vI,GAAUtqC,oBAAqB3jG,EAAU7B,GAEzC88H,EAActsH,KAAKuC,IAAK+pH,EAAa1gB,EAAO99D,kBAAmBwxF,KAMhE,GAAKe,EAEJ,IAAM,IAAI7wI,EAAI,EAAG8sG,EAAK+jC,EAAwBlyI,OAAQqB,EAAI8sG,EAAI9sG,IAK7D,IAHA,IAAMgxI,EAAiBH,EAAyB7wI,GAC1Ci9G,EAAuB7gH,KAAK6gH,qBAExBxuG,EAAI,EAAGyrG,EAAK82B,EAAehyI,MAAOyP,EAAIyrG,EAAIzrG,IAEnDqhI,GAAUtqC,oBAAqBwrC,EAAgBviI,GAE1CwuG,IAEJ5zF,GAAQm8E,oBAAqB3jG,EAAU4M,GACvCqhI,GAAU5rH,IAAKmF,KAIhByzG,EAActsH,KAAKuC,IAAK+pH,EAAa1gB,EAAO99D,kBAAmBwxF,KAQlE1zI,KAAKigH,eAAe5yF,OAASjZ,KAAKC,KAAMqsH,GAEnC9gI,MAAOI,KAAKigH,eAAe5yF,SAE/BxqB,QAAQkC,MAAO,+HAAgI/E,KAIjJ,CAED,GAAC,CAAAiG,IAAA,kBAAApG,MAED,WAEC,IAAM+F,EAAQ5F,KAAK4F,MACbgjG,EAAa5oG,KAAK4oG,WAKxB,GAAe,OAAVhjG,QACqBzE,IAAxBynG,EAAWnjG,eACWtE,IAAtBynG,EAAW5jF,aACO7jB,IAAlBynG,EAAWouB,GAHb,CAUA,IAAMjgG,EAAUnxB,EAAMw5D,MAChB50D,EAAYo+F,EAAWnjG,SAAS25D,MAChCjgD,EAAUypF,EAAW5jF,OAAOo6C,MAC5B3pB,EAAMmzD,EAAWouB,GAAG53D,MAEpBy1E,EAAYrqI,EAAUjI,OAAS,GAEG,IAAnCvC,KAAK80I,aAAc,YAEvB90I,KAAK21C,aAAc,UAAW,IAAIC,GAAiB,IAAInrC,aAAc,EAAIoqI,GAAa,IAQvF,IAJA,IAAMl7H,EAAW3Z,KAAKq7F,aAAc,WAAYj8B,MAE1C21E,EAAO,GAAIC,EAAO,GAEdpxI,EAAI,EAAGA,EAAIixI,EAAWjxI,IAE/BmxI,EAAMnxI,GAAM,IAAI04B,GAChB04G,EAAMpxI,GAAM,IAAI04B,GAIjB,IAAM24G,EAAK,IAAI34G,GACd44G,EAAK,IAAI54G,GACT64G,EAAK,IAAI74G,GAET84G,EAAM,IAAIhiG,GACViiG,EAAM,IAAIjiG,GACVkiG,EAAM,IAAIliG,GAEVmiG,EAAO,IAAIj5G,GACXk5G,EAAO,IAAIl5G,GAqCRy3G,EAAS/zI,KAAK+zI,OAEK,IAAlBA,EAAOxxI,SAEXwxI,EAAS,CAAE,CACVzsI,MAAO,EACP1E,MAAOm0B,EAAQx0B,UAKjB,IAAM,IAAIqB,EAAI,EAAG8sG,EAAKqjC,EAAOxxI,OAAQqB,EAAI8sG,IAAO9sG,EAO/C,IALA,IAAMs3G,EAAQ64B,EAAQnwI,GAEhB0D,EAAQ4zG,EAAM5zG,MAGV+K,EAAI/K,EAAOw2G,EAAKx2G,EAFZ4zG,EAAMt4G,MAEqByP,EAAIyrG,EAAIzrG,GAAK,EAErDojI,EACC1+G,EAAS1kB,EAAI,GACb0kB,EAAS1kB,EAAI,GACb0kB,EAAS1kB,EAAI,IAmChB,IA5BA,IAAM0B,EAAM,IAAIuoB,GAAWo5G,EAAO,IAAIp5G,GAChCt4B,EAAI,IAAIs4B,GAAWq5G,EAAK,IAAIr5G,GA2BxB14B,EAAI,EAAG8sG,EAAKqjC,EAAOxxI,OAAQqB,EAAI8sG,IAAO9sG,EAO/C,IALA,IAAMs3G,EAAQ64B,EAAQnwI,GAEhB0D,EAAQ4zG,EAAM5zG,MAGV+K,EAAI/K,EAAOw2G,EAAKx2G,EAFZ4zG,EAAMt4G,MAEqByP,EAAIyrG,EAAIzrG,GAAK,EAErDujI,EAAc7+G,EAAS1kB,EAAI,IAC3BujI,EAAc7+G,EAAS1kB,EAAI,IAC3BujI,EAAc7+G,EAAS1kB,EAAI,GA7I7B,MAHCxP,QAAQkC,MAAO,gHAwChB,SAAS0wI,EAAgBt+H,EAAG/E,EAAGgF,GAE9B69H,EAAGz3G,UAAWhzB,EAAe,EAAJ2M,GACzB+9H,EAAG13G,UAAWhzB,EAAe,EAAJ4H,GACzB+iI,EAAG33G,UAAWhzB,EAAe,EAAJ4M,GAEzBg+H,EAAI53G,UAAWiY,EAAS,EAAJt+B,GACpBk+H,EAAI73G,UAAWiY,EAAS,EAAJrjC,GACpBkjI,EAAI93G,UAAWiY,EAAS,EAAJr+B,GAEpB89H,EAAGn0F,IAAKk0F,GACRE,EAAGp0F,IAAKk0F,GAERI,EAAIt0F,IAAKq0F,GACTE,EAAIv0F,IAAKq0F,GAET,IAAMpiI,EAAI,GAAQqiI,EAAIrmI,EAAIsmI,EAAIrmI,EAAIqmI,EAAItmI,EAAIqmI,EAAIpmI,GAIvCwyC,SAAUzuC,KAEjBuiI,EAAKtxI,KAAMixI,GAAK5gG,eAAgBghG,EAAIrmI,GAAIksC,gBAAiBg6F,GAAME,EAAIpmI,GAAIqlC,eAAgBthC,GACvFwiI,EAAKvxI,KAAMkxI,GAAK7gG,eAAgB+gG,EAAIrmI,GAAImsC,gBAAiB+5F,GAAMI,EAAItmI,GAAIslC,eAAgBthC,GAEvF+hI,EAAM59H,GAAI2Q,IAAKytH,GACfR,EAAM3iI,GAAI0V,IAAKytH,GACfR,EAAM39H,GAAI0Q,IAAKytH,GAEfP,EAAM79H,GAAI2Q,IAAK0tH,GACfR,EAAM5iI,GAAI0V,IAAK0tH,GACfR,EAAM59H,GAAI0Q,IAAK0tH,GAEhB,CAmCA,SAASI,EAAchlI,GAEtB5M,EAAEw5B,UAAWre,EAAa,EAAJvO,GACtB+kI,EAAG1xI,KAAMD,GAET,IAAMmO,EAAI4iI,EAAMnkI,GAIhBmD,EAAI9P,KAAMkO,GACV4B,EAAIgtC,IAAK/8C,EAAEswC,eAAgBtwC,EAAEwQ,IAAKrC,KAAQmH,YAI1Co8H,EAAK1wF,aAAc2wF,EAAIxjI,GACvB,IACM1P,EADOizI,EAAKlhI,IAAKwgI,EAAMpkI,IACV,GAAU,EAAM,EAEnC+I,EAAc,EAAJ/I,GAAUmD,EAAI/E,EACxB2K,EAAc,EAAJ/I,EAAQ,GAAMmD,EAAI9E,EAC5B0K,EAAc,EAAJ/I,EAAQ,GAAMmD,EAAI7E,EAC5ByK,EAAc,EAAJ/I,EAAQ,GAAMnO,CAEzB,CAmBD,GAAC,CAAAwD,IAAA,uBAAApG,MAED,WAEC,IAAM+F,EAAQ5F,KAAK4F,MACbiwI,EAAoB71I,KAAKq7F,aAAc,YAE7C,QAA2Bl6F,IAAtB00I,EAAkC,CAEtC,IAAIC,EAAkB91I,KAAKq7F,aAAc,UAEzC,QAAyBl6F,IAApB20I,EAEJA,EAAkB,IAAIlgG,GAAiB,IAAInrC,aAAwC,EAA1BorI,EAAkBjzI,OAAa,GACxF5C,KAAK21C,aAAc,SAAUmgG,QAM7B,IAAM,IAAIlyI,EAAI,EAAG8sG,EAAKolC,EAAgBlzI,MAAOgB,EAAI8sG,EAAI9sG,IAEpDkyI,EAAgB5E,OAAQttI,EAAG,EAAG,EAAG,GAMnC,IAAMmyI,EAAK,IAAIz5G,GAAW05G,EAAK,IAAI15G,GAAW25G,EAAK,IAAI35G,GACjD45G,EAAK,IAAI55G,GAAW65G,EAAK,IAAI75G,GAAW85G,EAAK,IAAI95G,GACjDnV,EAAK,IAAImV,GAAWlV,EAAK,IAAIkV,GAInC,GAAK12B,EAEJ,IAAM,IAAIhC,EAAI,EAAG8sG,EAAK9qG,EAAMhD,MAAOgB,EAAI8sG,EAAI9sG,GAAK,EAAI,CAEnD,IAAMqxI,EAAKrvI,EAAM61F,KAAM73F,EAAI,GACrBsxI,EAAKtvI,EAAM61F,KAAM73F,EAAI,GACrBuxI,EAAKvvI,EAAM61F,KAAM73F,EAAI,GAE3BmyI,EAAG3sC,oBAAqBysC,EAAmBZ,GAC3Ce,EAAG5sC,oBAAqBysC,EAAmBX,GAC3Ce,EAAG7sC,oBAAqBysC,EAAmBV,GAE3ChuH,EAAGi0B,WAAY66F,EAAID,GACnB5uH,EAAGg0B,WAAY26F,EAAIC,GACnB7uH,EAAG9R,MAAO+R,GAEV8uH,EAAG9sC,oBAAqB0sC,EAAiBb,GACzCkB,EAAG/sC,oBAAqB0sC,EAAiBZ,GACzCkB,EAAGhtC,oBAAqB0sC,EAAiBX,GAEzCe,EAAGpuH,IAAKX,GACRgvH,EAAGruH,IAAKX,GACRivH,EAAGtuH,IAAKX,GAER2uH,EAAgB5E,OAAQ+D,EAAIiB,EAAGlnI,EAAGknI,EAAGjnI,EAAGinI,EAAGhnI,GAC3C4mI,EAAgB5E,OAAQgE,EAAIiB,EAAGnnI,EAAGmnI,EAAGlnI,EAAGknI,EAAGjnI,GAC3C4mI,EAAgB5E,OAAQiE,EAAIiB,EAAGpnI,EAAGonI,EAAGnnI,EAAGmnI,EAAGlnI,EAE5C,MAMA,IAAM,IAAItL,EAAI,EAAG8sG,EAAKmlC,EAAkBjzI,MAAOgB,EAAI8sG,EAAI9sG,GAAK,EAE3DmyI,EAAG3sC,oBAAqBysC,EAAmBjyI,EAAI,GAC/CoyI,EAAG5sC,oBAAqBysC,EAAmBjyI,EAAI,GAC/CqyI,EAAG7sC,oBAAqBysC,EAAmBjyI,EAAI,GAE/CujB,EAAGi0B,WAAY66F,EAAID,GACnB5uH,EAAGg0B,WAAY26F,EAAIC,GACnB7uH,EAAG9R,MAAO+R,GAEV0uH,EAAgB5E,OAAQttI,EAAI,EAAGujB,EAAGnY,EAAGmY,EAAGlY,EAAGkY,EAAGjY,GAC9C4mI,EAAgB5E,OAAQttI,EAAI,EAAGujB,EAAGnY,EAAGmY,EAAGlY,EAAGkY,EAAGjY,GAC9C4mI,EAAgB5E,OAAQttI,EAAI,EAAGujB,EAAGnY,EAAGmY,EAAGlY,EAAGkY,EAAGjY,GAMhDlP,KAAKq2I,mBAELP,EAAgBz1G,aAAc,CAE/B,CAED,GAEA,CAAAp6B,IAAA,QAAApG,MAEA,WAGC,OADAgD,QAAQkC,MAAO,iHACR/E,IAER,GAAC,CAAAiG,IAAA,mBAAApG,MAED,WAIC,IAFA,IAAMsf,EAAUnf,KAAK4oG,WAAW5jF,OAEtBphB,EAAI,EAAG8sG,EAAKvxF,EAAQvc,MAAOgB,EAAI8sG,EAAI9sG,IAE5C8vI,GAAUtqC,oBAAqBjqF,EAASvb,GAExC8vI,GAAUp6H,YAEV6F,EAAQ+xH,OAAQttI,EAAG8vI,GAAU1kI,EAAG0kI,GAAUzkI,EAAGykI,GAAUxkI,EAIzD,GAAC,CAAAjJ,IAAA,eAAApG,MAED,WAEC,SAASy2I,EAAwBrrC,EAAWl0E,GAU3C,IARA,IAAMqoC,EAAQ6rC,EAAU7rC,MAClB21C,EAAW9J,EAAU8J,SACrBhK,EAAaE,EAAUF,WAEvBwrC,EAAS,IAAIn3E,EAAMxL,YAAa78B,EAAQx0B,OAASwyG,GAEnDnvG,EAAQ,EAAGorI,EAAS,EAEdptI,EAAI,EAAGwS,EAAI2gB,EAAQx0B,OAAQqB,EAAIwS,EAAGxS,IAAO,CAIjDgC,EAFIqlG,EAAUurC,6BAENz/G,EAASnzB,GAAMqnG,EAAUt+F,KAAKm7F,OAASmD,EAAUrkF,OAIjDmQ,EAASnzB,GAAMmxG,EAIxB,IAAM,IAAI1iG,EAAI,EAAGA,EAAI0iG,EAAU1iG,IAE9BkkI,EAAQvF,KAAc5xE,EAAOx5D,IAI/B,CAEA,OAAO,IAAIgwC,GAAiB2gG,EAAQxhC,EAAUhK,EAE/C,CAIA,GAAoB,OAAf/qG,KAAK4F,MAGT,OADA/C,QAAQC,KAAM,+EACP9C,KAIR,IAAMy2I,EAAY,IAAI/gG,EAEhB3e,EAAU/2B,KAAK4F,MAAMw5D,MACrBwpC,EAAa5oG,KAAK4oG,WAIxB,IAAM,IAAMzoG,KAAQyoG,EAAa,CAEhC,IAEM8tC,EAAeJ,EAFH1tC,EAAYzoG,GAE0B42B,GAExD0/G,EAAU9gG,aAAcx1C,EAAMu2I,EAE/B,CAIA,IAAMz7B,EAAkBj7G,KAAKi7G,gBAE7B,IAAM,IAAM96G,KAAQ86G,EAAkB,CAKrC,IAHA,IAAM07B,EAAa,GACb/B,EAAiB35B,EAAiB96G,GAE9ByD,EAAI,EAAG8sG,EAAKkkC,EAAeryI,OAAQqB,EAAI8sG,EAAI9sG,IAAO,CAE3D,IAEM8yI,EAAeJ,EAFH1B,EAAgBhxI,GAEsBmzB,GAExD4/G,EAAWr0I,KAAMo0I,EAElB,CAEAD,EAAUx7B,gBAAiB96G,GAASw2I,CAErC,CAEAF,EAAU51B,qBAAuB7gH,KAAK6gH,qBAMtC,IAFA,IAAMkzB,EAAS/zI,KAAK+zI,OAEVnwI,EAAI,EAAGwS,EAAI29H,EAAOxxI,OAAQqB,EAAIwS,EAAGxS,IAAO,CAEjD,IAAMs3G,EAAQ64B,EAAQnwI,GACtB6yI,EAAUG,SAAU17B,EAAM5zG,MAAO4zG,EAAMt4G,MAAOs4G,EAAM3X,cAErD,CAEA,OAAOkzC,CAER,GAAC,CAAAxwI,IAAA,SAAApG,MAED,WAEC,IAAM8M,EAAO,CACZkqH,SAAU,CACTxuD,QAAS,IACTxmE,KAAM,iBACNi1H,UAAW,0BAWb,GALAnqH,EAAK3B,KAAOhL,KAAKgL,KACjB2B,EAAK9K,KAAO7B,KAAK6B,KACE,KAAd7B,KAAKG,OAAcwM,EAAKxM,KAAOH,KAAKG,MACpCb,OAAO4G,KAAMlG,KAAKu+B,UAAWh8B,OAAS,IAAIoK,EAAK4xB,SAAWv+B,KAAKu+B,eAE3Cp9B,IAApBnB,KAAKw2C,WAA2B,CAEpC,IAAMA,EAAax2C,KAAKw2C,WAExB,IAAM,IAAMvwC,KAAOuwC,OAESr1C,IAAtBq1C,EAAYvwC,KAAsB0G,EAAM1G,GAAQuwC,EAAYvwC,IAIlE,OAAO0G,CAER,CAIAA,EAAKA,KAAO,CAAEi8F,WAAY,CAAC,GAE3B,IAAMhjG,EAAQ5F,KAAK4F,MAEJ,OAAVA,IAEJ+G,EAAKA,KAAK/G,MAAQ,CACjB/D,KAAM+D,EAAMw5D,MAAMxL,YAAYzzD,KAC9Bi/D,MAAOz7D,MAAMxE,UAAUwB,MAAMvB,KAAMwG,EAAMw5D,SAK3C,IAAMwpC,EAAa5oG,KAAK4oG,WAExB,IAAM,IAAM3iG,KAAO2iG,EAAa,CAE/B,IAAMqC,EAAYrC,EAAY3iG,GAE9B0G,EAAKA,KAAKi8F,WAAY3iG,GAAQglG,EAAU8rB,OAAQpqH,EAAKA,KAEtD,CAEA,IAAMsuG,EAAkB,CAAC,EACrB47B,GAAqB,EAEzB,IAAM,IAAM5wI,KAAOjG,KAAKi7G,gBAAkB,CAMzC,IAJA,IAAM67B,EAAiB92I,KAAKi7G,gBAAiBh1G,GAEvCm5D,EAAQ,GAEJx7D,EAAI,EAAG8sG,EAAKomC,EAAev0I,OAAQqB,EAAI8sG,EAAI9sG,IAAO,CAE3D,IAAMqnG,EAAY6rC,EAAgBlzI,GAElCw7D,EAAM98D,KAAM2oG,EAAU8rB,OAAQpqH,EAAKA,MAEpC,CAEKyyD,EAAM78D,OAAS,IAEnB04G,EAAiBh1G,GAAQm5D,EAEzBy3E,GAAqB,EAIvB,CAEKA,IAEJlqI,EAAKA,KAAKsuG,gBAAkBA,EAC5BtuG,EAAKA,KAAKk0G,qBAAuB7gH,KAAK6gH,sBAIvC,IAAMkzB,EAAS/zI,KAAK+zI,OAEfA,EAAOxxI,OAAS,IAEpBoK,EAAKA,KAAKonI,OAAS31C,KAAKJ,MAAOI,KAAKw4B,UAAWmd,KAIhD,IAAM9zB,EAAiBjgH,KAAKigH,eAW5B,OATwB,OAAnBA,IAEJtzG,EAAKA,KAAKszG,eAAiB,CAC1BD,OAAQC,EAAeD,OAAOviF,UAC9BpQ,OAAQ4yF,EAAe5yF,SAKlB1gB,CAER,GAAC,CAAA1G,IAAA,QAAApG,MAED,WAEE,OAAO,IAAIG,KAAK4zD,aAAc3vD,KAAMjE,KAEtC,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAM8G,GAIL3G,KAAK4F,MAAQ,KACb5F,KAAK4oG,WAAa,CAAC,EACnB5oG,KAAKi7G,gBAAkB,CAAC,EACxBj7G,KAAK+zI,OAAS,GACd/zI,KAAK6/G,YAAc,KACnB7/G,KAAKigH,eAAiB,KAItB,IAAMtzG,EAAO,CAAC,EAId3M,KAAKG,KAAOwG,EAAOxG,KAInB,IAAMyF,EAAQe,EAAOf,MAEN,OAAVA,GAEJ5F,KAAKs7F,SAAU11F,EAAMwa,MAAOzT,IAM7B,IAAMi8F,EAAajiG,EAAOiiG,WAE1B,IAAM,IAAMzoG,KAAQyoG,EAAa,CAEhC,IAAMqC,EAAYrC,EAAYzoG,GAC9BH,KAAK21C,aAAcx1C,EAAM8qG,EAAU7qF,MAAOzT,GAE3C,CAIA,IAAMsuG,EAAkBt0G,EAAOs0G,gBAE/B,IAAM,IAAM96G,KAAQ86G,EAAkB,CAKrC,IAHA,IAAM77C,EAAQ,GACRw1E,EAAiB35B,EAAiB96G,GAE9ByD,EAAI,EAAGwS,EAAIw+H,EAAeryI,OAAQqB,EAAIwS,EAAGxS,IAElDw7D,EAAM98D,KAAMsyI,EAAgBhxI,GAAIwc,MAAOzT,IAIxC3M,KAAKi7G,gBAAiB96G,GAASi/D,CAEhC,CAEAp/D,KAAK6gH,qBAAuBl6G,EAAOk6G,qBAMnC,IAFA,IAAMkzB,EAASptI,EAAOotI,OAEZnwI,EAAI,EAAGwS,EAAI29H,EAAOxxI,OAAQqB,EAAIwS,EAAGxS,IAAO,CAEjD,IAAMs3G,EAAQ64B,EAAQnwI,GACtB5D,KAAK42I,SAAU17B,EAAM5zG,MAAO4zG,EAAMt4G,MAAOs4G,EAAM3X,cAEhD,CAIA,IAAMsc,EAAcl5G,EAAOk5G,YAEN,OAAhBA,IAEJ7/G,KAAK6/G,YAAcA,EAAYz/F,SAMhC,IAAM6/F,EAAiBt5G,EAAOs5G,eAqB9B,OAnBwB,OAAnBA,IAEJjgH,KAAKigH,eAAiBA,EAAe7/F,SAMtCpgB,KAAKg0I,UAAU1sI,MAAQX,EAAOqtI,UAAU1sI,MACxCtH,KAAKg0I,UAAUpxI,MAAQ+D,EAAOqtI,UAAUpxI,MAIxC5C,KAAKu+B,SAAW53B,EAAO43B,cAIIp9B,IAAtBwF,EAAO6vC,aAA2Bx2C,KAAKw2C,WAAal3C,OAAO4rD,OAAQ,CAAC,EAAGvkD,EAAO6vC,aAE5Ex2C,IAER,GAAC,CAAAiG,IAAA,UAAApG,MAED,WAECG,KAAKssB,cAAe,CAAEzqB,KAAM,WAE7B,KAAC6zC,CAAA,CA1iCkB,CAAS8T,IA8iCvButF,GAAiC,IAAIx6G,GACrCy6G,GAAuB,IAAIn9G,GAC3Bo9G,GAA0B,IAAIn3B,GAE9Bo3B,GAAsB,IAAI56G,GAC1B66G,GAAsB,IAAI76G,GAC1B86G,GAAsB,IAAI96G,GAE1B+6G,GAAuB,IAAI/6G,GAC3Bg7G,GAAuB,IAAIh7G,GAC3Bi7G,GAAuB,IAAIj7G,GAE3Bk7G,GAAwB,IAAIl7G,GAC5Bm7G,GAAwB,IAAIn7G,GAC5Bo7G,GAAwB,IAAIp7G,GAE5Bq7G,GAAuB,IAAIvkG,GAC3BwkG,GAAuB,IAAIxkG,GAC3BykG,GAAuB,IAAIzkG,GAE3B0kG,GAAmC,IAAIx7G,GACvCy7G,GAAwC,IAAIz7G,GAE5C6R,GAAI,SAAA6pG,IAAA3vI,EAAAA,EAAAA,GAAA8lC,EAAA6pG,GAAA,IAAAC,GAAA1vI,EAAAA,EAAAA,GAAA4lC,GAET,SAAAA,IAAmF,IAAA+pG,EAAtErqG,EAAQjtC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAI80C,GAAkBx4B,EAAQtc,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAIkiG,GAWlC,OAXqDp6F,EAAAA,EAAAA,GAAA,KAAAylC,IAE/E+pG,EAAAD,EAAA74I,KAAA,OAEKi/G,QAAS,EAEd65B,EAAKr2I,KAAO,OAEZq2I,EAAKrqG,SAAWA,EAChBqqG,EAAKh7H,SAAWA,EAEhBg7H,EAAKznC,qBAAqBynC,CAE3B,CAuNC,OAvNAvtI,EAAAA,EAAAA,GAAAwjC,EAAA,EAAAloC,IAAA,OAAApG,MAED,SAAM8G,EAAQ+iI,GAmBb,OAjBA39F,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAmC,EAAAhvC,WAAA,aAAAC,KAAA,KAAYuH,EAAQ+iI,QAEkBvoI,IAAjCwF,EAAOgqG,wBAEX3wG,KAAK2wG,sBAAwBhqG,EAAOgqG,sBAAsBhwG,cAIrBQ,IAAjCwF,EAAOkqG,wBAEX7wG,KAAK6wG,sBAAwBvxG,OAAO4rD,OAAQ,CAAC,EAAGvkD,EAAOkqG,wBAIxD7wG,KAAKkd,SAAWvW,EAAOuW,SACvBld,KAAK6tC,SAAWlnC,EAAOknC,SAEhB7tC,IAER,GAAC,CAAAiG,IAAA,qBAAApG,MAED,WAEC,IAEMo7G,EAFWj7G,KAAK6tC,SAEWotE,gBAC3B/0G,EAAO5G,OAAO4G,KAAM+0G,GAE1B,GAAK/0G,EAAK3D,OAAS,EAAI,CAEtB,IAAMqyI,EAAiB35B,EAAiB/0G,EAAM,IAE9C,QAAwB/E,IAAnByzI,EAA+B,CAEnC50I,KAAK2wG,sBAAwB,GAC7B3wG,KAAK6wG,sBAAwB,CAAC,EAE9B,IAAM,IAAI9uG,EAAI,EAAGo2I,EAAKvD,EAAeryI,OAAQR,EAAIo2I,EAAIp2I,IAAO,CAE3D,IAAM5B,EAAOy0I,EAAgB7yI,GAAI5B,MAAQwC,OAAQZ,GAEjD/B,KAAK2wG,sBAAsBruG,KAAM,GACjCtC,KAAK6wG,sBAAuB1wG,GAAS4B,CAEtC,CAED,CAED,CAED,GAAC,CAAAkE,IAAA,UAAApG,MAED,SAASm3D,EAAWohF,GAEnB,IAAMvqG,EAAW7tC,KAAK6tC,SAChB3wB,EAAWld,KAAKkd,SAChB89B,EAAch7C,KAAKg7C,YAEzB,QAAkB75C,IAAb+b,IAI4B,OAA5B2wB,EAASoyE,gBAA0BpyE,EAASqmG,wBAEjD+C,GAAUhzI,KAAM4pC,EAASoyE,gBACzBg3B,GAAU/7F,aAAcF,IAE6B,IAAhDgc,EAAUh/C,IAAI4oH,iBAAkBqW,MAIrCF,GAAiB9yI,KAAM+2C,GAAc2F,SACrCq2F,GAAO/yI,KAAM+yD,EAAUh/C,KAAMkjC,aAAc67F,IAIb,OAAzBlpG,EAASgyE,cAEyC,IAAjDm3B,GAAOqB,cAAexqG,EAASgyE,eAFrC,CAMA,IAAI/nD,EAEElyD,EAAQioC,EAASjoC,MACjBH,EAAWooC,EAAS+6D,WAAWnjG,SAC/B6yI,EAAgBzqG,EAASotE,gBAAgBx1G,SACzCo7G,EAAuBhzE,EAASgzE,qBAChCmW,EAAKnpF,EAAS+6D,WAAWouB,GACzB2T,EAAM98F,EAAS+6D,WAAW+hC,IAC1BoJ,EAASlmG,EAASkmG,OAClBC,EAAYnmG,EAASmmG,UAE3B,GAAe,OAAVpuI,EAIJ,GAAKjC,MAAM0sC,QAASnzB,GAEnB,IAAM,IAAItZ,EAAI,EAAG8sG,EAAKqjC,EAAOxxI,OAAQqB,EAAI8sG,EAAI9sG,IAQ5C,IANA,IAAMs3G,EAAQ64B,EAAQnwI,GAChB20I,EAAgBr7H,EAAUg+F,EAAM3X,eAK5BlxF,EAHI+B,KAAKuC,IAAKukG,EAAM5zG,MAAO0sI,EAAU1sI,OAG1Bw2G,EAFT1pG,KAAKsC,IAAK9Q,EAAMhD,MAAOwR,KAAKsC,IAAOwkG,EAAM5zG,MAAQ4zG,EAAMt4G,MAAWoxI,EAAU1sI,MAAQ0sI,EAAUpxI,QAE3EyP,EAAIyrG,EAAIzrG,GAAK,EAAI,CAE/C,IAAM8E,EAAIvR,EAAM61F,KAAMppF,GAChBD,EAAIxM,EAAM61F,KAAMppF,EAAI,GACpB+E,EAAIxR,EAAM61F,KAAMppF,EAAI,IAE1BylD,EAAe0gF,GAAiCx4I,KAAMu4I,EAAevhF,EAAWggF,GAAQvxI,EAAU6yI,EAAez3B,EAAsBmW,EAAI2T,EAAKxzH,EAAG/E,EAAGgF,MAIrJ0gD,EAAa2gF,UAAYrkI,KAAKi5B,MAAOh7B,EAAI,GACzCylD,EAAa73C,KAAKsjF,cAAgB2X,EAAM3X,cACxC60C,EAAW91I,KAAMw1D,GAInB,MASD,IAHA,IAGUl0D,EAHIwQ,KAAKuC,IAAK,EAAGq9H,EAAU1sI,OAGhBopG,EAFTt8F,KAAKsC,IAAK9Q,EAAMhD,MAASoxI,EAAU1sI,MAAQ0sI,EAAUpxI,OAElCgB,EAAI8sG,EAAI9sG,GAAK,EAAI,CAE/C,IAAMuT,EAAIvR,EAAM61F,KAAM73F,GAChBwO,EAAIxM,EAAM61F,KAAM73F,EAAI,GACpBwT,EAAIxR,EAAM61F,KAAM73F,EAAI,IAE1Bk0D,EAAe0gF,GAAiCx4I,KAAMkd,EAAU85C,EAAWggF,GAAQvxI,EAAU6yI,EAAez3B,EAAsBmW,EAAI2T,EAAKxzH,EAAG/E,EAAGgF,MAIhJ0gD,EAAa2gF,UAAYrkI,KAAKi5B,MAAOzpC,EAAI,GACzCw0I,EAAW91I,KAAMw1D,GAInB,MAIK,QAAkB32D,IAAbsE,EAIX,GAAK9B,MAAM0sC,QAASnzB,GAEnB,IAAM,IAAItZ,EAAI,EAAG8sG,EAAKqjC,EAAOxxI,OAAQqB,EAAI8sG,EAAI9sG,IAQ5C,IANA,IAAMs3G,EAAQ64B,EAAQnwI,GAChB20I,EAAgBr7H,EAAUg+F,EAAM3X,eAK5BlxF,EAHI+B,KAAKuC,IAAKukG,EAAM5zG,MAAO0sI,EAAU1sI,OAG1Bw2G,EAFT1pG,KAAKsC,IAAKjR,EAAS7C,MAAOwR,KAAKsC,IAAOwkG,EAAM5zG,MAAQ4zG,EAAMt4G,MAAWoxI,EAAU1sI,MAAQ0sI,EAAUpxI,QAE9EyP,EAAIyrG,EAAIzrG,GAAK,EAAI,EAM/CylD,EAAe0gF,GAAiCx4I,KAAMu4I,EAAevhF,EAAWggF,GAAQvxI,EAAU6yI,EAAez3B,EAAsBmW,EAAI2T,EAJjIt4H,EACAA,EAAI,EACJA,EAAI,MAMbylD,EAAa2gF,UAAYrkI,KAAKi5B,MAAOh7B,EAAI,GACzCylD,EAAa73C,KAAKsjF,cAAgB2X,EAAM3X,cACxC60C,EAAW91I,KAAMw1D,GAInB,MASD,IAHA,IAGUl0D,EAHIwQ,KAAKuC,IAAK,EAAGq9H,EAAU1sI,OAGhBopG,EAFTt8F,KAAKsC,IAAKjR,EAAS7C,MAASoxI,EAAU1sI,MAAQ0sI,EAAUpxI,OAErCgB,EAAI8sG,EAAI9sG,GAAK,EAAI,EAM/Ck0D,EAAe0gF,GAAiCx4I,KAAMkd,EAAU85C,EAAWggF,GAAQvxI,EAAU6yI,EAAez3B,EAAsBmW,EAAI2T,EAJ5H/mI,EACAA,EAAI,EACJA,EAAI,MAMbk0D,EAAa2gF,UAAYrkI,KAAKi5B,MAAOzpC,EAAI,GACzCw0I,EAAW91I,KAAMw1D,GAInB,CA7HF,CAmID,KAAC3pB,CAAA,CAtOQ,CAAS3R,IAyQnB,SAASg8G,GAAiCx6G,EAAQ9gB,EAAU85C,EAAWh/C,EAAKvS,EAAU6yI,EAAez3B,EAAsBmW,EAAI2T,EAAKxzH,EAAG/E,EAAGgF,GAEzI8/H,GAAM9tC,oBAAqB3jG,EAAU0R,GACrCggI,GAAM/tC,oBAAqB3jG,EAAU2M,GACrCglI,GAAMhuC,oBAAqB3jG,EAAU2R,GAErC,IAAMshI,EAAkB16G,EAAO2yE,sBAE/B,GAAK2nC,GAAiBI,EAAkB,CAEvClB,GAAQ/yI,IAAK,EAAG,EAAG,GACnBgzI,GAAQhzI,IAAK,EAAG,EAAG,GACnBizI,GAAQjzI,IAAK,EAAG,EAAG,GAEnB,IAAM,IAAIb,EAAI,EAAG8sG,EAAK4nC,EAAc/1I,OAAQqB,EAAI8sG,EAAI9sG,IAAO,CAE1D,IAAM+0I,EAAYD,EAAiB90I,GAC7BgxI,EAAiB0D,EAAe10I,GAEnB,IAAd+0I,IAELtB,GAAOjuC,oBAAqBwrC,EAAgBz9H,GAC5CmgI,GAAOluC,oBAAqBwrC,EAAgBxiI,GAC5CmlI,GAAOnuC,oBAAqBwrC,EAAgBx9H,GAEvCypG,GAEJ22B,GAAQr8F,gBAAiBk8F,GAAQsB,GACjClB,GAAQt8F,gBAAiBm8F,GAAQqB,GACjCjB,GAAQv8F,gBAAiBo8F,GAAQoB,KAIjCnB,GAAQr8F,gBAAiBk8F,GAAOt2F,IAAKm2F,IAASyB,GAC9ClB,GAAQt8F,gBAAiBm8F,GAAOv2F,IAAKo2F,IAASwB,GAC9CjB,GAAQv8F,gBAAiBo8F,GAAOx2F,IAAKq2F,IAASuB,IAIhD,CAEAzB,GAAMpvH,IAAK0vH,IACXL,GAAMrvH,IAAK2vH,IACXL,GAAMtvH,IAAK4vH,GAEZ,CAEK15G,EAAOw1E,gBAEXx1E,EAAO46G,cAAezhI,EAAG+/H,IACzBl5G,EAAO46G,cAAexmI,EAAG+kI,IACzBn5G,EAAO46G,cAAexhI,EAAGggI,KAI1B,IAAMt/E,EAtFP,SAA4B95B,EAAQ9gB,EAAU85C,EAAWh/C,EAAK+9H,EAAIC,EAAIC,EAAIlxH,GAczE,GAAmB,QAVd7H,EAAS+wB,OAAS22E,EAEV5sG,EAAI6gI,kBAAmB5C,EAAID,EAAID,GAAI,EAAMhxH,GAIzC/M,EAAI6gI,kBAAmB9C,EAAIC,EAAIC,EAAI/4H,EAAS+wB,OAASC,EAAYnpB,IAIpD,OAAO,KAEjCgzH,GAAwB9zI,KAAM8gB,GAC9BgzH,GAAwB78F,aAAcld,EAAOgd,aAE7C,IAAMlqB,EAAWkmC,EAAUh/C,IAAIypH,OAAOruG,WAAY2kH,IAElD,OAAKjnH,EAAWkmC,EAAU3lB,MAAQvgB,EAAWkmC,EAAUzlB,IAAa,KAE7D,CACNzgB,SAAUA,EACV/L,MAAOgzH,GAAwB33H,QAC/B4d,OAAQA,EAGV,CAyDsB86G,CAAmB96G,EAAQ9gB,EAAU85C,EAAWh/C,EAAKk/H,GAAOC,GAAOC,GAAOU,IAE/F,GAAKhgF,EAAe,CAEdk/D,IAEJ2gB,GAAOvuC,oBAAqB4tB,EAAI7/G,GAChCygI,GAAOxuC,oBAAqB4tB,EAAI5kH,GAChCylI,GAAOzuC,oBAAqB4tB,EAAI5/G,GAEhC0gD,EAAak/D,GAAKqT,GAASQ,MAAOiN,GAAoBZ,GAAOC,GAAOC,GAAOO,GAAQC,GAAQC,GAAQ,IAAIzkG,KAInGu3F,IAEJgN,GAAOvuC,oBAAqBuhC,EAAKxzH,GACjCygI,GAAOxuC,oBAAqBuhC,EAAKv4H,GACjCylI,GAAOzuC,oBAAqBuhC,EAAKvzH,GAEjC0gD,EAAa6yE,IAAMN,GAASQ,MAAOiN,GAAoBZ,GAAOC,GAAOC,GAAOO,GAAQC,GAAQC,GAAQ,IAAIzkG,KAIzG,IAAMnzB,EAAO,CACZ9I,EAAGA,EACH/E,EAAGA,EACHgF,EAAGA,EACH4N,OAAQ,IAAIsX,GACZinE,cAAe,GAGhB8mC,GAAShzG,UAAW6/G,GAAOC,GAAOC,GAAOn3H,EAAK+E,QAE9C8yC,EAAa73C,KAAOA,CAErB,CAEA,OAAO63C,CAER,CAAC,IAEKihF,GAAW,SAAAC,IAAA3wI,EAAAA,EAAAA,GAAA0wI,EAAAC,GAAA,IAAAC,GAAA1wI,EAAAA,EAAAA,GAAAwwI,GAEhB,SAAAA,IAA0G,IAAAG,EAA7F1uG,EAAK5pC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAG6pC,EAAM7pC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGikB,EAAKjkB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGu4I,EAAav4I,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGw4I,EAAcx4I,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGy4I,EAAaz4I,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAC8H,EAAAA,EAAAA,GAAA,KAAAqwI,IAEtGG,EAAAD,EAAA75I,KAAA,OAEKyC,KAAO,cAEZq3I,EAAK1iG,WAAa,CACjBhM,MAAOA,EACPC,OAAQA,EACR5lB,MAAOA,EACPs0H,cAAeA,EACfC,eAAgBA,EAChBC,cAAeA,GAGhB,IAAM35F,GAAK3B,EAAAA,EAAAA,GAAAm7F,GAIXC,EAAgB/kI,KAAKi5B,MAAO8rG,GAC5BC,EAAiBhlI,KAAKi5B,MAAO+rG,GAC7BC,EAAgBjlI,KAAKi5B,MAAOgsG,GAI5B,IAAMtiH,EAAU,GACVhY,EAAW,GACXI,EAAU,GACVs2B,EAAM,GAIR6jG,EAAmB,EACnBC,EAAa,EAkBjB,SAASC,EAAYnjI,EAAGzF,EAAGnO,EAAGg3I,EAAMC,EAAMlvG,EAAOC,EAAQ5lB,EAAO80H,EAAOC,EAAOr2C,GAmB7E,IAjBA,IAAMs2C,EAAervG,EAAQmvG,EACvBG,EAAgBrvG,EAASmvG,EAEzBG,EAAYvvG,EAAQ,EACpBwvG,EAAavvG,EAAS,EACtBwvG,EAAYp1H,EAAQ,EAEpBq1H,EAASP,EAAQ,EACjBQ,EAASP,EAAQ,EAEnBQ,EAAgB,EAChBC,EAAa,EAEX3pI,EAAS,IAAI4rB,GAITvhB,EAAK,EAAGA,EAAKo/H,EAAQp/H,IAI9B,IAFA,IAAM9L,EAAI8L,EAAK++H,EAAgBE,EAErBl/H,EAAK,EAAGA,EAAKo/H,EAAQp/H,IAAQ,CAEtC,IAAM9L,EAAI8L,EAAK++H,EAAeE,EAI9BrpI,EAAQ2F,GAAMrH,EAAIyqI,EAClB/oI,EAAQE,GAAM3B,EAAIyqI,EAClBhpI,EAAQjO,GAAMw3I,EAIdl7H,EAASzc,KAAMoO,EAAO1B,EAAG0B,EAAOzB,EAAGyB,EAAOxB,GAI1CwB,EAAQ2F,GAAM,EACd3F,EAAQE,GAAM,EACdF,EAAQjO,GAAMoiB,EAAQ,EAAI,GAAM,EAIhC1F,EAAQ7c,KAAMoO,EAAO1B,EAAG0B,EAAOzB,EAAGyB,EAAOxB,GAIzCumC,EAAInzC,KAAMwY,EAAK6+H,GACflkG,EAAInzC,KAAM,EAAMyY,EAAK6+H,GAIrBQ,GAAiB,CAElB,CAUD,IAAM,IAAIr/H,EAAK,EAAGA,EAAK6+H,EAAO7+H,IAE7B,IAAM,IAAID,EAAK,EAAGA,EAAK6+H,EAAO7+H,IAAQ,CAErC,IAAM3D,EAAImiI,EAAmBx+H,EAAKo/H,EAASn/H,EACrC3I,EAAIknI,EAAmBx+H,EAAKo/H,GAAWn/H,EAAK,GAC5C3D,EAAIkiI,GAAqBx+H,EAAK,GAAMo/H,GAAWn/H,EAAK,GACpD1D,EAAIiiI,GAAqBx+H,EAAK,GAAMo/H,EAASn/H,EAInDgc,EAAQz0B,KAAM6U,EAAG/E,EAAGiF,GACpB0f,EAAQz0B,KAAM8P,EAAGgF,EAAGC,GAIpBgjI,GAAc,CAEf,CAMD36F,EAAMk3F,SAAU2C,EAAYc,EAAY92C,GAIxCg2C,GAAcc,EAIdf,GAAoBc,CAErB,CAAC,OAlHDZ,EAAY,IAAK,IAAK,KAAO,GAAK,EAAG30H,EAAO4lB,EAAQD,EAAO6uG,EAAeD,EAAgB,GAC1FI,EAAY,IAAK,IAAK,IAAK,GAAK,EAAG30H,EAAO4lB,GAAUD,EAAO6uG,EAAeD,EAAgB,GAC1FI,EAAY,IAAK,IAAK,IAAK,EAAG,EAAGhvG,EAAO3lB,EAAO4lB,EAAQ0uG,EAAeE,EAAe,GACrFG,EAAY,IAAK,IAAK,IAAK,GAAK,EAAGhvG,EAAO3lB,GAAS4lB,EAAQ0uG,EAAeE,EAAe,GACzFG,EAAY,IAAK,IAAK,IAAK,GAAK,EAAGhvG,EAAOC,EAAQ5lB,EAAOs0H,EAAeC,EAAgB,GACxFI,EAAY,IAAK,IAAK,KAAO,GAAK,EAAGhvG,EAAOC,GAAU5lB,EAAOs0H,EAAeC,EAAgB,GAI5FF,EAAK59C,SAAUvkE,GACfmiH,EAAKvjG,aAAc,WAAY,IAAIo9F,GAAwBh0H,EAAU,IACrEm6H,EAAKvjG,aAAc,SAAU,IAAIo9F,GAAwB5zH,EAAS,IAClE+5H,EAAKvjG,aAAc,KAAM,IAAIo9F,GAAwBt9F,EAAK,IAsGzDyjG,CAEF,CAMC,OANAvuI,EAAAA,EAAAA,GAAAouI,EAAA,OAAA9yI,IAAA,WAAApG,MAED,SAAiB8M,GAEhB,OAAO,IAAIosI,EAAapsI,EAAK69B,MAAO79B,EAAK89B,OAAQ99B,EAAKkY,MAAOlY,EAAKwsI,cAAexsI,EAAKysI,eAAgBzsI,EAAK0sI,cAE5G,KAACN,CAAA,CAjKe,CAASrjG,IAyK1B,SAAS4kG,GAAelzC,GAEvB,IAAM20B,EAAM,CAAC,EAEb,IAAM,IAAM1lH,KAAK+wF,EAIhB,IAAM,IAAM30F,KAFZspH,EAAK1lH,GAAM,CAAC,EAEK+wF,EAAK/wF,GAAM,CAE3B,IAAM4iD,EAAWmuC,EAAK/wF,GAAK5D,GAEtBwmD,IAAcA,EAAShF,SAC3BgF,EAASu3D,WAAav3D,EAASsqE,WAC/BtqE,EAAS62D,WAAa72D,EAASgkE,WAAahkE,EAASk+D,WACrDl+D,EAASm9D,WAAan9D,EAAS4gE,cAE/BkC,EAAK1lH,GAAK5D,GAAMwmD,EAAS74C,QAEdzc,MAAM0sC,QAAS4oB,GAE1B8iE,EAAK1lH,GAAK5D,GAAMwmD,EAASt4D,QAIzBo7H,EAAK1lH,GAAK5D,GAAMwmD,CAIlB,CAID,OAAO8iE,CAER,CAEA,SAASwe,GAAe3sG,GAIvB,IAFA,IAAM4sG,EAAS,CAAC,EAENnkI,EAAI,EAAGA,EAAIu3B,EAASrrC,OAAQ8T,IAAO,CAE5C,IAAMtC,EAAMumI,GAAe1sG,EAAUv3B,IAErC,IAAM,IAAM5D,KAAKsB,EAEhBymI,EAAQ/nI,GAAMsB,EAAKtB,EAIrB,CAEA,OAAO+nI,CAER,CAkBA,IAAMC,GAAgB,CAAEr6H,MAAOk6H,GAAeI,MAAOH,IAM/CxsG,GAAc,SAAA4sG,IAAAtyI,EAAAA,EAAAA,GAAA0lC,EAAA4sG,GAAA,IAAAC,GAAAryI,EAAAA,EAAAA,GAAAwlC,GAEnB,SAAAA,EAAayI,GAAa,IAAAqkG,EAgDxB,OAhDwBnyI,EAAAA,EAAAA,GAAA,KAAAqlC,IAEzB8sG,EAAAD,EAAAx7I,KAAA,OAEK07I,kBAAmB,EAExBD,EAAKh5I,KAAO,iBAEZg5I,EAAKtlG,QAAU,CAAC,EAChBslG,EAAKjtG,SAAW,CAAC,EACjBitG,EAAKE,eAAiB,GAEtBF,EAAK7sG,aAlBc,gGAmBnB6sG,EAAKrtG,eAjBgB,iEAmBrBqtG,EAAKjL,UAAY,EAEjBiL,EAAK9K,WAAY,EACjB8K,EAAK7K,mBAAqB,EAE1B6K,EAAK1K,KAAM,EACX0K,EAAKj5C,QAAS,EACdi5C,EAAKG,UAAW,EAEhBH,EAAKzqG,WAAa,CACjB6qG,aAAa,EACbC,WAAW,EACXC,aAAa,EACbC,kBAAkB,GAKnBP,EAAKQ,uBAAyB,CAC7B,MAAS,CAAE,EAAG,EAAG,GACjB,GAAM,CAAE,EAAG,GACX,IAAO,CAAE,EAAG,IAGbR,EAAKS,yBAAsBn6I,EAC3B05I,EAAKU,oBAAqB,EAE1BV,EAAKW,YAAc,UAECr6I,IAAfq1C,GAEJqkG,EAAKrjG,UAAWhB,GAEhBqkG,CAEF,CAuHC,OAvHAlwI,EAAAA,EAAAA,GAAAojC,EAAA,EAAA9nC,IAAA,OAAApG,MAED,SAAM8G,GAuBL,OArBAolC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA+B,EAAA5uC,WAAA,aAAAC,KAAA,KAAYuH,GAEZ3G,KAAKwtC,eAAiB7mC,EAAO6mC,eAC7BxtC,KAAKguC,aAAernC,EAAOqnC,aAE3BhuC,KAAK4tC,SAAW0sG,GAAe3zI,EAAOinC,UACtC5tC,KAAK+6I,eApFP,SAA8B3zC,GAI7B,IAFA,IAAM20B,EAAM,GAEF1lH,EAAI,EAAGA,EAAI+wF,EAAI7kG,OAAQ8T,IAEhC0lH,EAAIz5H,KAAM8kG,EAAK/wF,GAAI+J,SAIpB,OAAO27G,CAER,CAwEwB0f,CAAqB90I,EAAOo0I,gBAElD/6I,KAAKu1C,QAAUj2C,OAAO4rD,OAAQ,CAAC,EAAGvkD,EAAO4uC,SAEzCv1C,KAAK+vI,UAAYppI,EAAOopI,UACxB/vI,KAAKgwI,mBAAqBrpI,EAAOqpI,mBAEjChwI,KAAKmwI,IAAMxpI,EAAOwpI,IAClBnwI,KAAK4hG,OAASj7F,EAAOi7F,OACrB5hG,KAAKg7I,SAAWr0I,EAAOq0I,SAEvBh7I,KAAKowC,WAAa9wC,OAAO4rD,OAAQ,CAAC,EAAGvkD,EAAOypC,YAE5CpwC,KAAKw7I,YAAc70I,EAAO60I,YAEnBx7I,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQ+1H,GAEP,IAAMjpH,GAAIo/B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA+B,EAAA5uC,WAAA,eAAAC,KAAA,KAAiBw2H,GAK3B,IAAM,IAAMz1H,KAHZwM,EAAK6uI,YAAcx7I,KAAKw7I,YACxB7uI,EAAKihC,SAAW,CAAC,EAEG5tC,KAAK4tC,SAAW,CAEnC,IACM/tC,EADUG,KAAK4tC,SAAUztC,GACTN,MAEjBA,GAASA,EAAMu2H,UAEnBzpH,EAAKihC,SAAUztC,GAAS,CACvB0B,KAAM,IACNhC,MAAOA,EAAMk3H,OAAQnB,GAAO5qH,MAGlBnL,GAASA,EAAMo0D,QAE1BtnD,EAAKihC,SAAUztC,GAAS,CACvB0B,KAAM,IACNhC,MAAOA,EAAMy0H,UAGHz0H,GAASA,EAAMiwH,UAE1BnjH,EAAKihC,SAAUztC,GAAS,CACvB0B,KAAM,KACNhC,MAAOA,EAAM49B,WAGH59B,GAASA,EAAMo9H,UAE1BtwH,EAAKihC,SAAUztC,GAAS,CACvB0B,KAAM,KACNhC,MAAOA,EAAM49B,WAGH59B,GAASA,EAAMs3H,UAE1BxqH,EAAKihC,SAAUztC,GAAS,CACvB0B,KAAM,KACNhC,MAAOA,EAAM49B,WAGH59B,GAASA,EAAM2wH,UAE1B7jH,EAAKihC,SAAUztC,GAAS,CACvB0B,KAAM,KACNhC,MAAOA,EAAM49B,WAGH59B,GAASA,EAAM0jI,UAE1B52H,EAAKihC,SAAUztC,GAAS,CACvB0B,KAAM,KACNhC,MAAOA,EAAM49B,WAKd9wB,EAAKihC,SAAUztC,GAAS,CACvBN,MAAOA,EAOV,CAEKP,OAAO4G,KAAMlG,KAAKu1C,SAAUhzC,OAAS,IAAIoK,EAAK4oC,QAAUv1C,KAAKu1C,SAElE5oC,EAAKqhC,aAAehuC,KAAKguC,aACzBrhC,EAAK6gC,eAAiBxtC,KAAKwtC,eAE3B,IAAM4C,EAAa,CAAC,EAEpB,IAAM,IAAMnqC,KAAOjG,KAAKowC,YAES,IAA3BpwC,KAAKowC,WAAYnqC,KAAiBmqC,EAAYnqC,IAAQ,GAM5D,OAFK3G,OAAO4G,KAAMkqC,GAAa7tC,OAAS,IAAIoK,EAAKyjC,WAAaA,GAEvDzjC,CAER,KAACohC,CAAA,CA3KkB,CAAS9V,IA+KvBqd,GAAM,SAAAomG,IAAArzI,EAAAA,EAAAA,GAAAitC,EAAAomG,GAAA,IAAAC,GAAApzI,EAAAA,EAAAA,GAAA+sC,GAEX,SAAAA,IAAc,IAAAsmG,EAWgC,OAXhClzI,EAAAA,EAAAA,GAAA,KAAA4sC,IAEbsmG,EAAAD,EAAAv8I,KAAA,OAEKqnE,UAAW,EAEhBm1E,EAAK/5I,KAAO,SAEZ+5I,EAAKjgG,mBAAqB,IAAIpf,GAE9Bq/G,EAAKngG,iBAAmB,IAAIlf,GAC5Bq/G,EAAKxe,wBAA0B,IAAI7gG,GAAUq/G,CAE9C,CA6CC,OA7CAjxI,EAAAA,EAAAA,GAAA2qC,EAAA,EAAArvC,IAAA,OAAApG,MAED,SAAM8G,EAAQ+iI,GASb,OAPA39F,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAsJ,EAAAn2C,WAAA,aAAAC,KAAA,KAAYuH,EAAQ+iI,GAEpB1pI,KAAK27C,mBAAmB13C,KAAM0C,EAAOg1C,oBAErC37C,KAAKy7C,iBAAiBx3C,KAAM0C,EAAO80C,kBACnCz7C,KAAKo9H,wBAAwBn5H,KAAM0C,EAAOy2H,yBAEnCp9H,IAER,GAAC,CAAAiG,IAAA,oBAAApG,MAED,SAAmBd,GAElBiB,KAAK8+H,mBAAmB,GAAM,GAE9B,IAAM7xH,EAAIjN,KAAKg7C,YAAYvqC,SAE3B,OAAO1R,EAAO0F,KAAOwI,EAAG,IAAOA,EAAG,IAAOA,EAAG,KAAOqM,WAEpD,GAAC,CAAArT,IAAA,oBAAApG,MAED,SAAmBoqB,IAElB8hB,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAsJ,EAAAn2C,WAAA,0BAAAC,KAAA,KAAyB6qB,GAEzBjqB,KAAK27C,mBAAmB13C,KAAMjE,KAAKg7C,aAAc2F,QAElD,GAAC,CAAA16C,IAAA,oBAAApG,MAED,SAAmBkpI,EAAeC,IAEjCj9F,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAsJ,EAAAn2C,WAAA,0BAAAC,KAAA,KAAyB2pI,EAAeC,GAExChpI,KAAK27C,mBAAmB13C,KAAMjE,KAAKg7C,aAAc2F,QAElD,GAAC,CAAA16C,IAAA,QAAApG,MAED,WAEC,OAAO,IAAIG,KAAK4zD,aAAc3vD,KAAMjE,KAErC,KAACs1C,CAAA,CA5DU,CAAS9Y,IAgEfie,GAAiB,SAAAohG,IAAAxzI,EAAAA,EAAAA,GAAAoyC,EAAAohG,GAAA,IAAAC,GAAAvzI,EAAAA,EAAAA,GAAAkyC,GAEtB,SAAAA,IAA4D,IAAAshG,EAA/Cv2F,EAAG5kD,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAI6pD,EAAM7pD,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGywC,EAAIzwC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAK2wC,EAAG3wC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAqBtB,OArB0B8H,EAAAA,EAAAA,GAAA,KAAA+xC,IAExDshG,EAAAD,EAAA18I,KAAA,OAEKimD,qBAAsB,EAE3B02F,EAAKl6I,KAAO,oBAEZk6I,EAAKv2F,IAAMA,EACXu2F,EAAK/8F,KAAO,EAEZ+8F,EAAK1qG,KAAOA,EACZ0qG,EAAKxqG,IAAMA,EACXwqG,EAAKC,MAAQ,GAEbD,EAAKtxF,OAASA,EACdsxF,EAAK3hG,KAAO,KAEZ2hG,EAAKE,UAAY,GACjBF,EAAKG,WAAa,EAElBH,EAAK17F,yBAAyB07F,CAE/B,CAwMC,OAxMApxI,EAAAA,EAAAA,GAAA8vC,EAAA,EAAAx0C,IAAA,OAAApG,MAED,SAAM8G,EAAQ+iI,GAiBb,OAfA39F,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAyO,EAAAt7C,WAAA,aAAAC,KAAA,KAAYuH,EAAQ+iI,GAEpB1pI,KAAKwlD,IAAM7+C,EAAO6+C,IAClBxlD,KAAKg/C,KAAOr4C,EAAOq4C,KAEnBh/C,KAAKqxC,KAAO1qC,EAAO0qC,KACnBrxC,KAAKuxC,IAAM5qC,EAAO4qC,IAClBvxC,KAAKg8I,MAAQr1I,EAAOq1I,MAEpBh8I,KAAKyqD,OAAS9jD,EAAO8jD,OACrBzqD,KAAKo6C,KAAuB,OAAhBzzC,EAAOyzC,KAAgB,KAAO96C,OAAO4rD,OAAQ,CAAC,EAAGvkD,EAAOyzC,MAEpEp6C,KAAKi8I,UAAYt1I,EAAOs1I,UACxBj8I,KAAKk8I,WAAav1I,EAAOu1I,WAElBl8I,IAER,GAEA,CAAAiG,IAAA,iBAAApG,MAQA,SAAgBs8I,GAGf,IAAMC,EAAe,GAAMp8I,KAAKq8I,gBAAkBF,EAElDn8I,KAAKwlD,IAAgB,EAAV8nE,GAAcl5G,KAAKkoI,KAAMF,GACpCp8I,KAAKqgD,wBAEN,GAEA,CAAAp6C,IAAA,iBAAApG,MAGA,WAEC,IAAMu8I,EAAehoI,KAAKmxC,IAAe,GAAV8nE,GAAgBrtH,KAAKwlD,KAEpD,MAAO,GAAMxlD,KAAKq8I,gBAAkBD,CAErC,GAAC,CAAAn2I,IAAA,kBAAApG,MAED,WAEC,OAAiB,EAAVytH,GAAcl5G,KAAKkoI,KACzBloI,KAAKmxC,IAAe,GAAV8nE,GAAgBrtH,KAAKwlD,KAAQxlD,KAAKg/C,KAE9C,GAAC,CAAA/4C,IAAA,eAAApG,MAED,WAGC,OAAOG,KAAKi8I,UAAY7nI,KAAKsC,IAAK1W,KAAKyqD,OAAQ,EAEhD,GAAC,CAAAxkD,IAAA,gBAAApG,MAED,WAGC,OAAOG,KAAKi8I,UAAY7nI,KAAKuC,IAAK3W,KAAKyqD,OAAQ,EAEhD,GAEA,CAAAxkD,IAAA,gBAAApG,MAmCA,SAAe08I,EAAWC,EAAYxtI,EAAGC,EAAGu7B,EAAOC,GAElDzqC,KAAKyqD,OAAS8xF,EAAYC,EAEP,OAAdx8I,KAAKo6C,OAETp6C,KAAKo6C,KAAO,CACXwC,SAAS,EACT2/F,UAAW,EACXC,WAAY,EACZzkF,QAAS,EACTE,QAAS,EACTztB,MAAO,EACPC,OAAQ,IAKVzqC,KAAKo6C,KAAKwC,SAAU,EACpB58C,KAAKo6C,KAAKmiG,UAAYA,EACtBv8I,KAAKo6C,KAAKoiG,WAAaA,EACvBx8I,KAAKo6C,KAAK2d,QAAU/oD,EACpBhP,KAAKo6C,KAAK6d,QAAUhpD,EACpBjP,KAAKo6C,KAAK5P,MAAQA,EAClBxqC,KAAKo6C,KAAK3P,OAASA,EAEnBzqC,KAAKqgD,wBAEN,GAAC,CAAAp6C,IAAA,kBAAApG,MAED,WAEoB,OAAdG,KAAKo6C,OAETp6C,KAAKo6C,KAAKwC,SAAU,GAIrB58C,KAAKqgD,wBAEN,GAAC,CAAAp6C,IAAA,yBAAApG,MAED,WAEC,IAAMwxC,EAAOrxC,KAAKqxC,KACd0U,EAAM1U,EAAOj9B,KAAKmxC,IAAe,GAAV8nE,GAAgBrtH,KAAKwlD,KAAQxlD,KAAKg/C,KACzDvU,EAAS,EAAIsb,EACbvb,EAAQxqC,KAAKyqD,OAAShgB,EACtBob,GAAS,GAAMrb,EACb4P,EAAOp6C,KAAKo6C,KAElB,GAAmB,OAAdp6C,KAAKo6C,MAAiBp6C,KAAKo6C,KAAKwC,QAAU,CAE9C,IAAM2/F,EAAYniG,EAAKmiG,UACtBC,EAAapiG,EAAKoiG,WAEnB32F,GAAQzL,EAAK2d,QAAUvtB,EAAQ+xG,EAC/Bx2F,GAAO3L,EAAK6d,QAAUxtB,EAAS+xG,EAC/BhyG,GAAS4P,EAAK5P,MAAQ+xG,EACtB9xG,GAAU2P,EAAK3P,OAAS+xG,CAEzB,CAEA,IAAMC,EAAOz8I,KAAKk8I,WACJ,IAATO,IAAa52F,GAAQxU,EAAOorG,EAAOz8I,KAAK08I,gBAE7C18I,KAAKy7C,iBAAiBkhG,gBAAiB92F,EAAMA,EAAOrb,EAAOub,EAAKA,EAAMtb,EAAQ4G,EAAMrxC,KAAKuxC,KAEzFvxC,KAAKo9H,wBAAwBn5H,KAAMjE,KAAKy7C,kBAAmBkF,QAE5D,GAAC,CAAA16C,IAAA,SAAApG,MAED,SAAQ+1H,GAEP,IAAMjpH,GAAIo/B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAyO,EAAAt7C,WAAA,eAAAC,KAAA,KAAiBw2H,GAgB3B,OAdAjpH,EAAKqxB,OAAOwnB,IAAMxlD,KAAKwlD,IACvB74C,EAAKqxB,OAAOghB,KAAOh/C,KAAKg/C,KAExBryC,EAAKqxB,OAAOqT,KAAOrxC,KAAKqxC,KACxB1kC,EAAKqxB,OAAOuT,IAAMvxC,KAAKuxC,IACvB5kC,EAAKqxB,OAAOg+G,MAAQh8I,KAAKg8I,MAEzBrvI,EAAKqxB,OAAOysB,OAASzqD,KAAKyqD,OAEP,OAAdzqD,KAAKo6C,OAAgBztC,EAAKqxB,OAAOoc,KAAO96C,OAAO4rD,OAAQ,CAAC,EAAGlrD,KAAKo6C,OAErEztC,EAAKqxB,OAAOi+G,UAAYj8I,KAAKi8I,UAC7BtvI,EAAKqxB,OAAOk+G,WAAal8I,KAAKk8I,WAEvBvvI,CAER,KAAC8tC,CAAA,CAjOqB,CAASnF,IAqO1BkQ,GAAM,GAENo3F,GAAU,SAAAC,IAAAx0I,EAAAA,EAAAA,GAAAu0I,EAAAC,GAAA,IAAAC,GAAAv0I,EAAAA,EAAAA,GAAAq0I,GAEf,SAAAA,EAAavrG,EAAME,EAAKwrG,GAAe,IAAAC,GAAAt0I,EAAAA,EAAAA,GAAA,KAAAk0I,IAEtCI,EAAAF,EAAA19I,KAAA,OAEKyC,KAAO,aAEZm7I,EAAKD,aAAeA,EAEpB,IAAME,EAAW,IAAIxiG,GAAmB+K,GAZjB,EAY8BnU,EAAME,GAC3D0rG,EAAStW,OAASqW,EAAKrW,OACvBsW,EAAS3hG,GAAG72C,IAAK,GAAK,EAAG,GACzBw4I,EAAS1hG,OAAQ,IAAIjf,GAAS,EAAG,EAAG,IACpC0gH,EAAKl1H,IAAKm1H,GAEV,IAAMC,EAAW,IAAIziG,GAAmB+K,GAlBjB,EAkB8BnU,EAAME,GAC3D2rG,EAASvW,OAASqW,EAAKrW,OACvBuW,EAAS5hG,GAAG72C,IAAK,GAAK,EAAG,GACzBy4I,EAAS3hG,OAAQ,IAAIjf,IAAW,EAAG,EAAG,IACtC0gH,EAAKl1H,IAAKo1H,GAEV,IAAMC,EAAW,IAAI1iG,GAAmB+K,GAxBjB,EAwB8BnU,EAAME,GAC3D4rG,EAASxW,OAASqW,EAAKrW,OACvBwW,EAAS7hG,GAAG72C,IAAK,EAAG,EAAG,GACvB04I,EAAS5hG,OAAQ,IAAIjf,GAAS,EAAG,EAAG,IACpC0gH,EAAKl1H,IAAKq1H,GAEV,IAAMC,EAAW,IAAI3iG,GAAmB+K,GA9BjB,EA8B8BnU,EAAME,GAC3D6rG,EAASzW,OAASqW,EAAKrW,OACvByW,EAAS9hG,GAAG72C,IAAK,EAAG,GAAK,GACzB24I,EAAS7hG,OAAQ,IAAIjf,GAAS,GAAK,EAAG,IACtC0gH,EAAKl1H,IAAKs1H,GAEV,IAAMC,EAAW,IAAI5iG,GAAmB+K,GApCjB,EAoC8BnU,EAAME,GAC3D8rG,EAAS1W,OAASqW,EAAKrW,OACvB0W,EAAS/hG,GAAG72C,IAAK,GAAK,EAAG,GACzB44I,EAAS9hG,OAAQ,IAAIjf,GAAS,EAAG,EAAG,IACpC0gH,EAAKl1H,IAAKu1H,GAEV,IAAMC,EAAW,IAAI7iG,GAAmB+K,GA1CjB,EA0C8BnU,EAAME,GAItC,OAHrB+rG,EAAS3W,OAASqW,EAAKrW,OACvB2W,EAAShiG,GAAG72C,IAAK,GAAK,EAAG,GACzB64I,EAAS/hG,OAAQ,IAAIjf,GAAS,EAAG,GAAK,IACtC0gH,EAAKl1H,IAAKw1H,GAAWN,CAEtB,CAiDC,OAjDAryI,EAAAA,EAAAA,GAAAiyI,EAAA,EAAA32I,IAAA,SAAApG,MAED,SAAQk2C,EAAU9G,GAEI,OAAhBjvC,KAAK66C,QAAkB76C,KAAKw7C,oBAEjC,IAAMuhG,EAAe/8I,KAAK+8I,aAE1BQ,GAAApyI,EAAAA,EAAAA,GAAuEnL,KAAK+jC,SAAQ,GAA5Ek5G,EAAQM,EAAA,GAAEL,EAAQK,EAAA,GAAEJ,EAAQI,EAAA,GAAEH,EAAQG,EAAA,GAAEF,EAAQE,EAAA,GAAED,EAAQC,EAAA,GAE5DC,EAAsBznG,EAAS0nG,kBAE/BC,EAAqB3nG,EAASixB,YAC9BtqB,EAAmB3G,EAAS4G,GAAGC,QAErC7G,EAASixB,YAAc6/C,GACvB9wE,EAAS4G,GAAGC,SAAU,EAEtB,IAAMpQ,EAAkBuwG,EAAa9wG,QAAQO,gBAE7CuwG,EAAa9wG,QAAQO,iBAAkB,EAEvCuJ,EAASK,gBAAiB2mG,EAAc,GACxChnG,EAASM,OAAQpH,EAAOguG,GAExBlnG,EAASK,gBAAiB2mG,EAAc,GACxChnG,EAASM,OAAQpH,EAAOiuG,GAExBnnG,EAASK,gBAAiB2mG,EAAc,GACxChnG,EAASM,OAAQpH,EAAOkuG,GAExBpnG,EAASK,gBAAiB2mG,EAAc,GACxChnG,EAASM,OAAQpH,EAAOmuG,GAExBrnG,EAASK,gBAAiB2mG,EAAc,GACxChnG,EAASM,OAAQpH,EAAOouG,GAExBN,EAAa9wG,QAAQO,gBAAkBA,EAEvCuJ,EAASK,gBAAiB2mG,EAAc,GACxChnG,EAASM,OAAQpH,EAAOquG,GAExBvnG,EAASK,gBAAiBonG,GAE1BznG,EAASixB,YAAc02E,EACvB3nG,EAAS4G,GAAGC,QAAUF,EAEtBqgG,EAAa9wG,QAAQyqF,kBAAmB,CAEzC,KAACkmB,CAAA,CA/Fc,CAASpgH,IAmGnBmhH,GAAW,SAAAC,IAAAv1I,EAAAA,EAAAA,GAAAs1I,EAAAC,GAAA,IAAAC,GAAAt1I,EAAAA,EAAAA,GAAAo1I,GAEhB,SAAAA,EAAa92C,EAAQl2D,EAAS8lE,EAAOC,EAAOnqE,EAAWF,EAAWhC,EAAQxoC,EAAMwkG,EAAYj6D,GAAW,IAAA0xG,EASnF,OATmFp1I,EAAAA,EAAAA,GAAA,KAAAi1I,GAEtG92C,OAAoB1lG,IAAX0lG,EAAuBA,EAAS,GACzCl2D,OAAsBxvC,IAAZwvC,EAAwBA,EAAUC,IAE5CktG,EAAAD,EAAAz+I,KAAA,KAAOynG,EAAQl2D,EAAS8lE,EAAOC,EAAOnqE,EAAWF,EAAWhC,EAAQxoC,EAAMwkG,EAAYj6D,IAEjFa,eAAgB,EAErB6wG,EAAKrxG,OAAQ,EAAMqxG,CAEpB,CAYC,OAZAnzI,EAAAA,EAAAA,GAAAgzI,EAAA,EAAA13I,IAAA,SAAAzB,IAED,WAEC,OAAOxE,KAAKmtC,KAEb,EAAC1oC,IAED,SAAY5E,GAEXG,KAAKmtC,MAAQttC,CAEd,KAAC89I,CAAA,CAzBe,CAASzmC,IA6BpB9kE,GAAqB,SAAA2rG,IAAA11I,EAAAA,EAAAA,GAAA+pC,EAAA2rG,GAAA,IAAAC,GAAAz1I,EAAAA,EAAAA,GAAA6pC,GAE1B,SAAAA,EAAaroC,GAAqB,IAAAk0I,EAAfj2I,EAAOpH,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,CAAC,GAAC8H,EAAAA,EAAAA,GAAA,KAAA0pC,IAE9B6rG,EAAAD,EAAA5+I,KAAA,KAAO2K,EAAMA,EAAM/B,IAEdk2I,yBAA0B,EAE/B,IAAM/wG,EAAQ,CAAE3C,MAAOzgC,EAAM0gC,OAAQ1gC,EAAM8a,MAAO,GAC5CgiF,EAAS,CAAE15D,EAAOA,EAAOA,EAAOA,EAAOA,EAAOA,GAewC,OAb5F8wG,EAAKhyG,QAAU,IAAI0xG,GAAa92C,EAAQ7+F,EAAQ2oC,QAAS3oC,EAAQyuG,MAAOzuG,EAAQ0uG,MAAO1uG,EAAQukC,UAAWvkC,EAAQqkC,UAAWrkC,EAAQqiC,OAAQriC,EAAQnG,KAAMmG,EAAQq+F,WAAYr+F,EAAQokC,UAUvL6xG,EAAKhyG,QAAQwqF,uBAAwB,EAErCwnB,EAAKhyG,QAAQO,qBAA8CrrC,IAA5B6G,EAAQwkC,iBAAgCxkC,EAAQwkC,gBAC/EyxG,EAAKhyG,QAAQI,eAAkClrC,IAAtB6G,EAAQqkC,UAA0BrkC,EAAQqkC,UAAYC,GAAa2xG,CAE7F,CA0GC,OA1GAtzI,EAAAA,EAAAA,GAAAynC,EAAA,EAAAnsC,IAAA,6BAAApG,MAED,SAA4Bk2C,EAAU9J,GAErCjsC,KAAKisC,QAAQpqC,KAAOoqC,EAAQpqC,KAC5B7B,KAAKisC,QAAQG,SAAWH,EAAQG,SAEhCpsC,KAAKisC,QAAQO,gBAAkBP,EAAQO,gBACvCxsC,KAAKisC,QAAQI,UAAYJ,EAAQI,UACjCrsC,KAAKisC,QAAQM,UAAYN,EAAQM,UAEjC,IAAMkL,EAEK,CACT0mG,UAAW,CAAEt+I,MAAO,OAHhB43C,EAMmB,qYANnBA,EA0BqB,+UAoBrB5J,EAAW,IAAIkrG,GAAa,EAAG,EAAG,GAElC77H,EAAW,IAAI6wB,GAAgB,CAEpC5tC,KAAM,sBAENytC,SAAU0sG,GAAe7iG,GACzBzJ,aAAcyJ,EACdjK,eAAgBiK,EAChBxJ,KAAM22E,EACN5wE,SAAUC,IAIX/2B,EAAS0wB,SAASuwG,UAAUt+I,MAAQosC,EAEpC,IAAMjW,EAAO,IAAImY,GAAMN,EAAU3wB,GAE3BkhI,EAAmBnyG,EAAQI,UAajC,OAVKJ,EAAQI,YAAc8hE,KAA2BliE,EAAQI,UAAYC,IAE3D,IAAIswG,GAAY,EAAG,GAAI58I,MAC/BqyC,OAAQ0D,EAAU/f,GAEzBiW,EAAQI,UAAY+xG,EAEpBpoH,EAAK6X,SAAS8U,UACd3sB,EAAK9Y,SAASylC,UAEP3iD,IAER,GAAC,CAAAiG,IAAA,QAAApG,MAED,SAAOk2C,EAAU8rD,EAAOh9E,EAAOw5H,GAI9B,IAFA,IAAMb,EAAsBznG,EAAS0nG,kBAE3B75I,EAAI,EAAGA,EAAI,EAAGA,IAEvBmyC,EAASK,gBAAiBp2C,KAAM4D,GAEhCmyC,EAASmH,MAAO2kD,EAAOh9E,EAAOw5H,GAI/BtoG,EAASK,gBAAiBonG,EAE3B,KAACprG,CAAA,CApIyB,CAAS4C,IAwI9BspG,GAAyB,IAAIhiH,GAC7BiiH,GAAyB,IAAIjiH,GAC7BkiH,GAA8B,IAAIjuB,GAElCl3E,GAAK,WAEV,SAAAA,IAA6D,IAAhDr0B,EAAMpkB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAI07B,GAAS,EAAG,EAAG,GAAKuf,EAAQj7C,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAC8H,EAAAA,EAAAA,GAAA,KAAA2wC,GAEzDr5C,KAAKy+I,SAAU,EAIfz+I,KAAKglB,OAASA,EACdhlB,KAAK67C,SAAWA,CAEjB,CAsLC,OAtLAlxC,EAAAA,EAAAA,GAAA0uC,EAAA,EAAApzC,IAAA,MAAApG,MAED,SAAKmlB,EAAQ62B,GAKZ,OAHA77C,KAAKglB,OAAO/gB,KAAM+gB,GAClBhlB,KAAK67C,SAAWA,EAET77C,IAER,GAAC,CAAAiG,IAAA,gBAAApG,MAED,SAAemP,EAAGC,EAAGC,EAAGzM,GAKvB,OAHAzC,KAAKglB,OAAOvgB,IAAKuK,EAAGC,EAAGC,GACvBlP,KAAK67C,SAAWp5C,EAETzC,IAER,GAAC,CAAAiG,IAAA,gCAAApG,MAED,SAA+BmlB,EAAQD,GAKtC,OAHA/kB,KAAKglB,OAAO/gB,KAAM+gB,GAClBhlB,KAAK67C,UAAa92B,EAAMvQ,IAAKxU,KAAKglB,QAE3BhlB,IAER,GAAC,CAAAiG,IAAA,wBAAApG,MAED,SAAuBsX,EAAG/E,EAAGgF,GAE5B,IAAM4N,EAASs5H,GAASljG,WAAYhkC,EAAGhF,GAAIiD,MAAOkpI,GAASnjG,WAAYjkC,EAAG/E,IAAMkH,YAMhF,OAFAtZ,KAAK47C,8BAA+B52B,EAAQ7N,GAErCnX,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAMs/H,GAKL,OAHAn/H,KAAKglB,OAAO/gB,KAAMk7H,EAAMn6G,QACxBhlB,KAAK67C,SAAWsjF,EAAMtjF,SAEf77C,IAER,GAAC,CAAAiG,IAAA,YAAApG,MAED,WAIC,IAAM6+I,EAAsB,EAAM1+I,KAAKglB,OAAOziB,SAI9C,OAHAvC,KAAKglB,OAAOsvB,eAAgBoqG,GAC5B1+I,KAAK67C,UAAY6iG,EAEV1+I,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,WAKC,OAHAG,KAAK67C,WAAc,EACnB77C,KAAKglB,OAAOzP,SAELvV,IAER,GAAC,CAAAiG,IAAA,kBAAApG,MAED,SAAiBklB,GAEhB,OAAO/kB,KAAKglB,OAAOxQ,IAAKuQ,GAAU/kB,KAAK67C,QAExC,GAAC,CAAA51C,IAAA,mBAAApG,MAED,SAAkBk1B,GAEjB,OAAO/0B,KAAK6gI,gBAAiB9rG,EAAOirF,QAAWjrF,EAAO1H,MAEvD,GAAC,CAAApnB,IAAA,eAAApG,MAED,SAAcklB,EAAOhmB,GAEpB,OAAOA,EAAOkF,KAAMjE,KAAKglB,QAASsvB,gBAAkBt0C,KAAK6gI,gBAAiB97G,IAAU+C,IAAK/C,EAE1F,GAAC,CAAA9e,IAAA,gBAAApG,MAED,SAAe6pC,EAAM3qC,GAEpB,IAAMkZ,EAAYyxB,EAAK1U,MAAOspH,IAExBjhB,EAAcr9H,KAAKglB,OAAOxQ,IAAKyD,GAErC,GAAqB,IAAhBolH,EAGJ,OAA4C,IAAvCr9H,KAAK6gI,gBAAiBn3F,EAAKpiC,OAExBvI,EAAOkF,KAAMylC,EAAKpiC,OAKnB,KAIR,IAAM6K,IAAQu3B,EAAKpiC,MAAMkN,IAAKxU,KAAKglB,QAAWhlB,KAAK67C,UAAawhF,EAEhE,OAAKlrH,EAAI,GAAKA,EAAI,EAEV,KAIDpT,EAAOkF,KAAMgU,GAAYq8B,eAAgBniC,GAAI2V,IAAK4hB,EAAKpiC,MAE/D,GAAC,CAAArB,IAAA,iBAAApG,MAED,SAAgB6pC,GAIf,IAAMi1G,EAAY3+I,KAAK6gI,gBAAiBn3F,EAAKpiC,OACvCs3I,EAAU5+I,KAAK6gI,gBAAiBn3F,EAAKm1G,KAE3C,OAASF,EAAY,GAAKC,EAAU,GAASA,EAAU,GAAKD,EAAY,CAEzE,GAAC,CAAA14I,IAAA,gBAAApG,MAED,SAAe0zB,GAEd,OAAOA,EAAIurH,gBAAiB9+I,KAE7B,GAAC,CAAAiG,IAAA,mBAAApG,MAED,SAAkBk1B,GAEjB,OAAOA,EAAO+pH,gBAAiB9+I,KAEhC,GAAC,CAAAiG,IAAA,gBAAApG,MAED,SAAed,GAEd,OAAOA,EAAOkF,KAAMjE,KAAKglB,QAASsvB,gBAAkBt0C,KAAK67C,SAE1D,GAAC,CAAA51C,IAAA,eAAApG,MAED,SAAcgR,EAAQkuI,GAErB,IAAMhX,EAAegX,GAAwBP,GAAcvK,gBAAiBpjI,GAEtEmuI,EAAiBh/I,KAAKi/I,cAAeX,IAAWpjG,aAAcrqC,GAE9DmU,EAAShlB,KAAKglB,OAAOiyG,aAAc8Q,GAAezuH,YAIxD,OAFAtZ,KAAK67C,UAAamjG,EAAexqI,IAAKwQ,GAE/BhlB,IAER,GAAC,CAAAiG,IAAA,YAAApG,MAED,SAAW+mB,GAIV,OAFA5mB,KAAK67C,UAAYj1B,EAAOpS,IAAKxU,KAAKglB,QAE3BhlB,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQs/H,GAEP,OAAOA,EAAMn6G,OAAOi7G,OAAQjgI,KAAKglB,SAAcm6G,EAAMtjF,WAAa77C,KAAK67C,QAExE,GAAC,CAAA51C,IAAA,QAAApG,MAED,WAEC,OAAO,IAAIG,KAAK4zD,aAAc3vD,KAAMjE,KAErC,KAACq5C,CAAA,CAjMS,GAqML6lG,GAA0B,IAAIp/B,GAC9Bq/B,GAA0B,IAAI7iH,GAE9B8iH,GAAO,WAEZ,SAAAA,IAA0H,IAA7G/yC,EAAEzrG,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAIy4C,GAASkzD,EAAE3rG,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAIy4C,GAAS+mF,EAAEx/H,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAIy4C,GAASkyF,EAAE3qI,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAIy4C,GAASgmG,EAAEz+I,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAIy4C,GAASimG,EAAE1+I,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAIy4C,IAAO3wC,EAAAA,EAAAA,GAAA,KAAA02I,GAEtHp/I,KAAKu/I,OAAS,CAAElzC,EAAIE,EAAI6zB,EAAImL,EAAI8T,EAAIC,EAErC,CA+IC,OA/IA30I,EAAAA,EAAAA,GAAAy0I,EAAA,EAAAn5I,IAAA,MAAApG,MAED,SAAKwsG,EAAIE,EAAI6zB,EAAImL,EAAI8T,EAAIC,GAExB,IAAMC,EAASv/I,KAAKu/I,OASpB,OAPAA,EAAQ,GAAIt7I,KAAMooG,GAClBkzC,EAAQ,GAAIt7I,KAAMsoG,GAClBgzC,EAAQ,GAAIt7I,KAAMm8H,GAClBmf,EAAQ,GAAIt7I,KAAMsnI,GAClBgU,EAAQ,GAAIt7I,KAAMo7I,GAClBE,EAAQ,GAAIt7I,KAAMq7I,GAEXt/I,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAM2/I,GAIL,IAFA,IAAMD,EAASv/I,KAAKu/I,OAEV37I,EAAI,EAAGA,EAAI,EAAGA,IAEvB27I,EAAQ37I,GAAIK,KAAMu7I,EAAQD,OAAQ37I,IAInC,OAAO5D,IAER,GAAC,CAAAiG,IAAA,0BAAApG,MAED,SAAyBkC,GAExB,IAAMw9I,EAASv/I,KAAKu/I,OACdh7D,EAAKxiF,EAAE0O,SACPgvI,EAAMl7D,EAAI,GAAKm7D,EAAMn7D,EAAI,GAAKo7D,EAAMp7D,EAAI,GAAKq7D,EAAMr7D,EAAI,GACvDs7D,EAAMt7D,EAAI,GAAKu7D,EAAMv7D,EAAI,GAAKw7D,EAAMx7D,EAAI,GAAKy7D,EAAMz7D,EAAI,GACvD07D,EAAM17D,EAAI,GAAK27D,EAAM37D,EAAI,GAAK47D,EAAO57D,EAAI,IAAM67D,EAAO77D,EAAI,IAC1D87D,EAAO97D,EAAI,IAAM+7D,EAAO/7D,EAAI,IAAMg8D,EAAOh8D,EAAI,IAAMi8D,EAAOj8D,EAAI,IASpE,OAPAg7D,EAAQ,GAAIkB,cAAeb,EAAMH,EAAKO,EAAMH,EAAKO,EAAOH,EAAKO,EAAOH,GAAO/mI,YAC3EimI,EAAQ,GAAIkB,cAAeb,EAAMH,EAAKO,EAAMH,EAAKO,EAAOH,EAAKO,EAAOH,GAAO/mI,YAC3EimI,EAAQ,GAAIkB,cAAeb,EAAMF,EAAKM,EAAMF,EAAKM,EAAOF,EAAKM,EAAOF,GAAOhnI,YAC3EimI,EAAQ,GAAIkB,cAAeb,EAAMF,EAAKM,EAAMF,EAAKM,EAAOF,EAAKM,EAAOF,GAAOhnI,YAC3EimI,EAAQ,GAAIkB,cAAeb,EAAMD,EAAKK,EAAMD,EAAKK,EAAOD,EAAMK,EAAOD,GAAOjnI,YAC5EimI,EAAQ,GAAIkB,cAAeb,EAAMD,EAAKK,EAAMD,EAAKK,EAAOD,EAAMK,EAAOD,GAAOjnI,YAErEtZ,IAER,GAAC,CAAAiG,IAAA,mBAAApG,MAED,SAAkBm+B,GAEjB,IAAM6P,EAAW7P,EAAO6P,SAMxB,OAJiC,OAA5BA,EAASoyE,gBAA0BpyE,EAASqmG,wBAEjDgL,GAAUj7I,KAAM4pC,EAASoyE,gBAAiB/kE,aAAcld,EAAOgd,aAExDh7C,KAAK4gI,iBAAkBse,GAE/B,GAAC,CAAAj5I,IAAA,mBAAApG,MAED,SAAkB6gJ,GAMjB,OAJAxB,GAAUl/B,OAAOv7G,IAAK,EAAG,EAAG,GAC5By6I,GAAU7xH,OAAS,kBACnB6xH,GAAUhkG,aAAcwlG,EAAO1lG,aAExBh7C,KAAK4gI,iBAAkBse,GAE/B,GAAC,CAAAj5I,IAAA,mBAAApG,MAED,SAAkBk1B,GAMjB,IAJA,IAAMwqH,EAASv/I,KAAKu/I,OACdv/B,EAASjrF,EAAOirF,OAChB2gC,GAAc5rH,EAAO1H,OAEjBzpB,EAAI,EAAGA,EAAI,EAAGA,IAAO,CAI9B,GAFiB27I,EAAQ37I,GAAIi9H,gBAAiB7gB,GAE9B2gC,EAEf,OAAO,CAIT,CAEA,OAAO,CAER,GAAC,CAAA16I,IAAA,gBAAApG,MAED,SAAe0zB,GAId,IAFA,IAAMgsH,EAASv/I,KAAKu/I,OAEV37I,EAAI,EAAGA,EAAI,EAAGA,IAAO,CAE9B,IAAMu7H,EAAQogB,EAAQ37I,GAQtB,GAJAu7I,GAAUnwI,EAAImwH,EAAMn6G,OAAOhW,EAAI,EAAIukB,EAAI5c,IAAI3H,EAAIukB,EAAI7c,IAAI1H,EACvDmwI,GAAUlwI,EAAIkwH,EAAMn6G,OAAO/V,EAAI,EAAIskB,EAAI5c,IAAI1H,EAAIskB,EAAI7c,IAAIzH,EACvDkwI,GAAUjwI,EAAIiwH,EAAMn6G,OAAO9V,EAAI,EAAIqkB,EAAI5c,IAAIzH,EAAIqkB,EAAI7c,IAAIxH,EAElDiwH,EAAM0B,gBAAiBse,IAAc,EAEzC,OAAO,CAIT,CAEA,OAAO,CAER,GAAC,CAAAl5I,IAAA,gBAAApG,MAED,SAAeklB,GAId,IAFA,IAAMw6H,EAASv/I,KAAKu/I,OAEV37I,EAAI,EAAGA,EAAI,EAAGA,IAEvB,GAAK27I,EAAQ37I,GAAIi9H,gBAAiB97G,GAAU,EAE3C,OAAO,EAMT,OAAO,CAER,GAAC,CAAA9e,IAAA,QAAApG,MAED,WAEC,OAAO,IAAIG,KAAK4zD,aAAc3vD,KAAMjE,KAErC,KAACo/I,CAAA,CArJW,GAyJb,SAASwB,KAER,IAAI17I,EAAU,KACV27I,GAAc,EACdC,EAAgB,KAChBC,EAAY,KAEhB,SAASC,EAAkBx0H,EAAMhV,GAEhCspI,EAAet0H,EAAMhV,GAErBupI,EAAY77I,EAAQw4D,sBAAuBsjF,EAE5C,CAEA,MAAO,CAEN15I,MAAO,YAEe,IAAhBu5I,GACkB,OAAlBC,IAELC,EAAY77I,EAAQw4D,sBAAuBsjF,GAE3CH,GAAc,EAEf,EAEArlF,KAAM,WAELt2D,EAAQ64D,qBAAsBgjF,GAE9BF,GAAc,CAEf,EAEAj6E,iBAAkB,SAAW59C,GAE5B83H,EAAgB93H,CAEjB,EAEAi4H,WAAY,SAAWphJ,GAEtBqF,EAAUrF,CAEX,EAIF,CAEA,SAASqhJ,GAAiBpvG,EAAIqvG,GAE7B,IAAMC,EAAWD,EAAaC,SAExB72I,EAAU,IAAImgF,QAiLpB,MAAO,CAENlmF,IAjED,SAAcymG,GAIb,OAFKA,EAAUurC,+BAA+BvrC,EAAYA,EAAUt+F,MAE7DpC,EAAQ/F,IAAKymG,EAErB,EA4DCrqE,OA1DD,SAAiBqqE,GAEXA,EAAUurC,+BAA+BvrC,EAAYA,EAAUt+F,MAEpE,IAAMA,EAAOpC,EAAQ/F,IAAKymG,GAErBt+F,IAEJmlC,EAAGuvG,aAAc10I,EAAKvF,QAEtBmD,EAAQohD,OAAQs/C,GAIlB,EA6CC54D,OA3CD,SAAiB44D,EAAWq2C,GAE3B,GAAKr2C,EAAUypC,oBAAf,CAEC,IAAMr6B,EAAS9vG,EAAQ/F,IAAKymG,KAErBoP,GAAUA,EAAOhyC,QAAU4iC,EAAU5iC,UAE3C99D,EAAQ9F,IAAKwmG,EAAW,CACvB7jG,OAAQ6jG,EAAU7jG,OAClBvF,KAAMopG,EAAUppG,KAChB0/I,gBAAiBt2C,EAAUl3E,YAC3Bs0C,QAAS4iC,EAAU5iC,SAOtB,KAjBA,CAmBK4iC,EAAUurC,+BAA+BvrC,EAAYA,EAAUt+F,MAEpE,IAAMA,EAAOpC,EAAQ/F,IAAKymG,QAEZ9pG,IAATwL,EAEJpC,EAAQ9F,IAAKwmG,EAnKf,SAAuBA,EAAWq2C,GAEjC,IAUIz/I,EAVEu9D,EAAQ6rC,EAAU7rC,MAClByxE,EAAQ5lC,EAAU4lC,MAElBzpI,EAAS0qC,EAAG0vG,eASlB,GAPA1vG,EAAG2vG,WAAYH,EAAYl6I,GAC3B0qC,EAAG4vG,WAAYJ,EAAYliF,EAAOyxE,GAElC5lC,EAAUmmC,mBAILhyE,aAAiB30D,aAErB5I,EAAO,UAED,GAAKu9D,aAAiBj4D,YAE5B,GAAK8jG,EAAU6nC,yBAA2B,CAEzC,IAAKsO,EAMJ,MAAM,IAAI1+I,MAAO,2EAJjBb,EAAO,IAQT,MAECA,EAAO,UAIF,GAAKu9D,aAAiBwuC,WAE5B/rG,EAAO,UAED,GAAKu9D,aAAiByuC,YAE5BhsG,EAAO,UAED,GAAKu9D,aAAiB+yD,WAE5BtwH,EAAO,UAED,GAAKu9D,aAAiBuuC,UAE5B9rG,EAAO,UAED,GAAKu9D,aAAiBp4D,WAE5BnF,EAAO,SAED,MAAKu9D,aAAiB8yD,mBAM5B,MAAM,IAAIxvH,MAAO,0DAA4D08D,GAJ7Ev9D,EAAO,IAMR,CAEA,MAAO,CACNuF,OAAQA,EACRvF,KAAMA,EACN0/I,gBAAiBniF,EAAMg2C,kBACvB/sC,QAAS4iC,EAAU5iC,QAGrB,CAwF0Bm5E,CAAcv2C,EAAWq2C,IAEtC30I,EAAK07D,QAAU4iC,EAAU5iC,WAxFtC,SAAuBjhE,EAAQ6jG,EAAWq2C,GAEzC,IAAMliF,EAAQ6rC,EAAU7rC,MAClB0xE,EAAc7lC,EAAU6lC,YAE9Bh/F,EAAG2vG,WAAYH,EAAYl6I,IAEE,IAAxB0pI,EAAYluI,MAIhBkvC,EAAG6vG,cAAeL,EAAY,EAAGliF,IAI5BgiF,EAEJtvG,EAAG6vG,cAAeL,EAAYxQ,EAAYlqH,OAASw4C,EAAMg2C,kBACxDh2C,EAAO0xE,EAAYlqH,OAAQkqH,EAAYluI,OAIxCkvC,EAAG6vG,cAAeL,EAAYxQ,EAAYlqH,OAASw4C,EAAMg2C,kBACxDh2C,EAAMr2B,SAAU+nG,EAAYlqH,OAAQkqH,EAAYlqH,OAASkqH,EAAYluI,QAIvEkuI,EAAYluI,OAAU,EAIxB,CA2DEg/I,CAAcj1I,EAAKvF,OAAQ6jG,EAAWq2C,GAEtC30I,EAAK07D,QAAU4iC,EAAU5iC,QAd1B,CAkBD,EAUD,CAAC,IAEKw5E,GAAa,SAAAC,IAAAz5I,EAAAA,EAAAA,GAAAw5I,EAAAC,GAAA,IAAAC,GAAAx5I,EAAAA,EAAAA,GAAAs5I,GAElB,SAAAA,IAA4E,IAAAG,EAA/Dx3G,EAAK5pC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAG6pC,EAAM7pC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGu4I,EAAav4I,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGw4I,EAAcx4I,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAC8H,EAAAA,EAAAA,GAAA,KAAAm5I,IAExEG,EAAAD,EAAA3iJ,KAAA,OAEKyC,KAAO,gBAEZmgJ,EAAKxrG,WAAa,CACjBhM,MAAOA,EACPC,OAAQA,EACR0uG,cAAeA,EACfC,eAAgBA,GAsBjB,IAnBA,IAAM6I,EAAaz3G,EAAQ,EACrB03G,EAAcz3G,EAAS,EAEvBkvG,EAAQvlI,KAAKi5B,MAAO8rG,GACpBS,EAAQxlI,KAAKi5B,MAAO+rG,GAEpBc,EAASP,EAAQ,EACjBQ,EAASP,EAAQ,EAEjBuI,EAAgB33G,EAAQmvG,EACxByI,EAAiB33G,EAASmvG,EAI1B7iH,EAAU,GACVhY,EAAW,GACXI,EAAU,GACVs2B,EAAM,GAEF16B,EAAK,EAAGA,EAAKo/H,EAAQp/H,IAI9B,IAFA,IAAM9L,EAAI8L,EAAKqnI,EAAiBF,EAEtBpnI,EAAK,EAAGA,EAAKo/H,EAAQp/H,IAAQ,CAEtC,IAAM9L,EAAI8L,EAAKqnI,EAAgBF,EAE/BljI,EAASzc,KAAM0M,GAAKC,EAAG,GAEvBkQ,EAAQ7c,KAAM,EAAG,EAAG,GAEpBmzC,EAAInzC,KAAMwY,EAAK6+H,GACflkG,EAAInzC,KAAM,EAAMyY,EAAK6+H,EAEtB,CAID,IAAM,IAAI7+H,EAAK,EAAGA,EAAK6+H,EAAO7+H,IAE7B,IAAM,IAAID,EAAK,EAAGA,EAAK6+H,EAAO7+H,IAAQ,CAErC,IAAM3D,EAAI2D,EAAKo/H,EAASn/H,EAClB3I,EAAI0I,EAAKo/H,GAAWn/H,EAAK,GACzB3D,EAAM0D,EAAK,EAAMo/H,GAAWn/H,EAAK,GACjC1D,EAAMyD,EAAK,EAAMo/H,EAASn/H,EAEhCgc,EAAQz0B,KAAM6U,EAAG/E,EAAGiF,GACpB0f,EAAQz0B,KAAM8P,EAAGgF,EAAGC,EAErB,CAO+D,OAHhE2qI,EAAK1mD,SAAUvkE,GACfirH,EAAKrsG,aAAc,WAAY,IAAIo9F,GAAwBh0H,EAAU,IACrEijI,EAAKrsG,aAAc,SAAU,IAAIo9F,GAAwB5zH,EAAS,IAClE6iI,EAAKrsG,aAAc,KAAM,IAAIo9F,GAAwBt9F,EAAK,IAAMusG,CAEjE,CAMC,OANAr3I,EAAAA,EAAAA,GAAAk3I,EAAA,OAAA57I,IAAA,WAAApG,MAED,SAAiB8M,GAEhB,OAAO,IAAIk1I,EAAel1I,EAAK69B,MAAO79B,EAAK89B,OAAQ99B,EAAKwsI,cAAexsI,EAAKysI,eAE7E,KAACyI,CAAA,CAhFiB,CAASnsG,IAwWtB2sG,GAAc,CACnBC,kBArRuB,iFAsRvBC,uBApR4B,6DAqR5BC,mBAnRwB,6EAoRxBC,wBAlR6B,2DAmR7BC,eAjRoB,maAkRpBC,oBAhRyB,wFAiRzBC,aA/QkB,uCAgRlBC,mBA9QwB,+GA+QxBC,MA7QW,gzMA8QXC,qBA5Q0B,w2FA6Q1BC,sBA3Q2B,o2BA4Q3BC,yBA1Q8B,6nBA2Q9BC,8BAzQmC,4HA0QnCC,4BAxQiC,qEAyQjCC,uBAvQ4B,2EAwQ5BC,eAtQoB,+HAuQpBC,oBArQyB,qHAsQzBC,kBApQuB,wJAqQvBC,aAnQkB,iRAoQlBC,OAlQY,mzEAmQZC,4BAjQiC,2pHAkQjCC,qBAhQ0B,2jBAiQ1BC,4BA/PiC,kJAgQjCC,uBA9P4B,mKA+P5BC,qBA7P0B,uIA8P1BC,0BA5P+B,mEA6P/BC,mBA3PwB,sDA4PxBC,wBA1P6B,6QA2P7BC,gBAzPqB,sxCA0PrBC,4BAxPiC,6MAyPjCC,qBAvP0B,+UAwP1BC,mBAtPwB,sTAuPxBC,8BA/NmC,04BAgOnCC,cAtPmB,4oBAuPnBC,WArPgB,wDAsPhBC,gBApPqB,qDAqPrBC,aAnPkB,2RAoPlBC,kBAlPuB,2MAmPvBC,0BAjP+B,8cAkP/BC,kBAhPuB,gNAiPvBC,uBA/O4B,iGAgP5BC,wBA9O6B,sHA+O7BC,6BA7OkC,64BA8OlCC,kBA5OuB,iwJA6OvBC,qBAzO0B,oEA0O1BC,0BAxO+B,20BAyO/BC,sBAvO2B,sMAwO3BC,2BAtOgC,mqCAuOhCC,yBArO8B,ozFAsO9BC,8BApOmC,0hQAqOnCC,sBAnO2B,mvKAoO3BC,qBAlO0B,gsBAmO1BC,oBAjOyB,2QAkOzBC,qBAhO0B,mLAiO1BC,0BA/N+B,yKAgO/BC,wBA9N6B,sLA+N7BC,mBA7NwB,+XA8NxBC,aA5NkB,8ZA6NlBC,kBA3NuB,mDA4NvBC,sBA1N2B,iSA2N3BC,2BAzNgC,uMA0NhCC,sBAxN2B,uKAyN3BC,2BAvNgC,qEAwNhCC,kBAtNuB,6eAuNvBC,mBArNwB,+jBAsNxBC,wBApN6B,k1BAqN7BC,mBAnNwB,u2BAoNxBC,sBAlN2B,4uBAmN3BC,qBAjN0B,mqBAkN1BC,qBAhN0B,iJAiN1BC,mBA/MwB,iJAgNxBC,cA9MmB,mOA+MnBC,wBA7M6B,q5BA8M7BC,gCA5MqC,yEA6MrCC,+BA3MoC,mXA4MpCC,wBA1M6B,mRA2M7BC,0BAzM+B,oKA0M/BC,gBAxMqB,4LAyMrBC,QAvMa,4jDAwMbC,6BAtMkC,4EAuMlCC,eArMoB,oNAsMpBC,mBApMwB,gFAqMxBC,wBAnM6B,2UAoM7BC,sBAlM2B,uKAmM3BC,2BAjMgC,qEAkMhCC,wBAhM6B,uiSAiM7BC,sBA/L2B,kzCAgM3BC,iBA9LsB,88CA+LtBC,yBA7L8B,i5CA8L9BC,gBA5LqB,kOA6LrBC,qBA3L0B,qyBA4L1BC,gBA1LqB,+XA2LrBC,kBAzLuB,qdA0LvBC,qBAxL0B,0LAyL1BC,0BAvL+B,mEAwL/BC,qBAtL0B,6FAuL1BC,0BArL+B,oyCAsL/BC,sBApL2B,sjCAqL3BC,2BAnLgC,ymGAoLhCC,iBAlLsB,yFAmLtBC,eAjLoB,wIAkLpBC,UAhLe,qEAiLfC,kBA/KuB,oFAgLvBC,gBA9KqB,yIA+KrBC,WA7KgB,8GA8KhBC,gBA5KqB,+UA8KrBC,gBA5KgB,8JA6KhBC,gBA3KkB,gbA4KlBC,UA1KgB,iOA2KhBC,UAzKkB,0VA0KlBC,WAxKgB,wuBAyKhBC,WAvKkB,83BAwKlBC,kBAtKgB,ktBAuKhBC,kBArKkB,iuBAsKlBC,cApKgB,+LAqKhBC,cAnKkB,yTAoKlBC,gBAlKgB,+jBAmKhBC,gBAjKkB,wwBAkKlBC,eAhKgB,o7BAiKhBC,eA/JkB,qnDAgKlBC,iBA9JgB,koCA+JhBC,iBA7JkB,s7DA8JlBC,gBA5JgB,k7BA6JhBC,gBA3JkB,y+CA4JlBC,gBA1JgB,4+BA2JhBC,gBAzJkB,0qBA0JlBC,eAxJgB,goCAyJhBC,eAvJkB,oiEAwJlBC,kBAtJgB,itCAuJhBC,kBArJkB,+2HAsJlBC,cApJgB,okCAqJhBC,cAnJkB,myDAoJlBC,YAlJgB,qtBAmJhBC,YAjJkB,6vBAkJlBC,YAhJgB,yhBAiJhBC,YA/IkB,maAgJlBC,YA9IgB,snCA+IhBC,YA7IkB,ouBAoJbC,GAAc,CAEnBvH,OAAQ,CAEPwH,QAAS,CAAEprJ,MAAqB,IAAIiiG,GAAO,WAC3CmB,QAAS,CAAEpjG,MAAO,GAElBqgC,IAAK,CAAErgC,MAAO,MACdqrJ,YAAa,CAAErrJ,MAAqB,IAAI0wH,IACxC46B,aAAc,CAAEtrJ,MAAqB,IAAI0wH,IAEzC4d,SAAU,CAAEtuI,MAAO,MACnBw5G,UAAW,CAAEx5G,MAAO,IAIrBurJ,YAAa,CAEZnc,YAAa,CAAEpvI,MAAO,OAIvBwrJ,OAAQ,CAEPjc,OAAQ,CAAEvvI,MAAO,MACjByrJ,WAAY,CAAEzrJ,OAAS,GACvB0vI,aAAc,CAAE1vI,MAAO,GACvBgmG,IAAK,CAAEhmG,MAAO,KACd2vI,gBAAiB,CAAE3vI,MAAO,MAI3B0rJ,MAAO,CAENjd,MAAO,CAAEzuI,MAAO,MAChB65G,eAAgB,CAAE75G,MAAO,IAI1B2rJ,SAAU,CAETpd,SAAU,CAAEvuI,MAAO,MACnBwuI,kBAAmB,CAAExuI,MAAO,IAI7B4rJ,YAAa,CAEZzc,YAAa,CAAEnvI,MAAO,OAIvB6rJ,QAAS,CAERnd,QAAS,CAAE1uI,MAAO,MAClB2uI,UAAW,CAAE3uI,MAAO,IAIrB8rJ,UAAW,CAEVld,UAAW,CAAE5uI,MAAO,MACpB04G,YAAa,CAAE14G,MAAqB,IAAIuzC,GAAS,EAAG,KAIrDw4G,gBAAiB,CAEhBjd,gBAAiB,CAAE9uI,MAAO,MAC1B+uI,kBAAmB,CAAE/uI,MAAO,GAC5BgvI,iBAAkB,CAAEhvI,MAAO,IAI5BgsJ,aAAc,CAEb/c,aAAc,CAAEjvI,MAAO,OAIxBisJ,aAAc,CAEb/c,aAAc,CAAElvI,MAAO,OAIxBksJ,YAAa,CAEZtc,YAAa,CAAE5vI,MAAO,OAIvBswI,IAAK,CAEJ6b,WAAY,CAAEnsJ,MAAO,OACrBosJ,QAAS,CAAEpsJ,MAAO,GAClBqsJ,OAAQ,CAAErsJ,MAAO,KACjBssJ,SAAU,CAAEtsJ,MAAqB,IAAIiiG,GAAO,YAI7CF,OAAQ,CAEPwqD,kBAAmB,CAAEvsJ,MAAO,IAE5BwsJ,WAAY,CAAExsJ,MAAO,IAErBysJ,kBAAmB,CAAEzsJ,MAAO,GAAI0sJ,WAAY,CAC3Ct0I,UAAW,CAAC,EACZ4pF,MAAO,CAAC,IAGT2qD,wBAAyB,CAAE3sJ,MAAO,GAAI0sJ,WAAY,CACjDE,WAAY,CAAC,EACbC,iBAAkB,CAAC,EACnBC,aAAc,CAAC,EACfC,cAAe,CAAC,IAGjBC,qBAAsB,CAAEhtJ,MAAO,IAC/BitJ,wBAAyB,CAAEjtJ,MAAO,IAElCktJ,WAAY,CAAEltJ,MAAO,GAAI0sJ,WAAY,CACpC1qD,MAAO,CAAC,EACRp8F,SAAU,CAAC,EACXwS,UAAW,CAAC,EACZ6Y,SAAU,CAAC,EACXk8H,QAAS,CAAC,EACVC,YAAa,CAAC,EACd1qD,MAAO,CAAC,IAGT2qD,iBAAkB,CAAErtJ,MAAO,GAAI0sJ,WAAY,CAC1CE,WAAY,CAAC,EACbC,iBAAkB,CAAC,EACnBC,aAAc,CAAC,EACfC,cAAe,CAAC,IAGjBO,aAAc,CAAEttJ,MAAO,IACvButJ,cAAe,CAAEvtJ,MAAO,IACxBwtJ,gBAAiB,CAAExtJ,MAAO,IAE1BytJ,YAAa,CAAEztJ,MAAO,GAAI0sJ,WAAY,CACrC1qD,MAAO,CAAC,EACRp8F,SAAU,CAAC,EACX88F,MAAO,CAAC,EACRzxE,SAAU,CAAC,IAGZy8H,kBAAmB,CAAE1tJ,MAAO,GAAI0sJ,WAAY,CAC3CE,WAAY,CAAC,EACbC,iBAAkB,CAAC,EACnBC,aAAc,CAAC,EACfC,cAAe,CAAC,EAChBY,iBAAkB,CAAC,EACnBC,gBAAiB,CAAC,IAGnBC,eAAgB,CAAE7tJ,MAAO,IACzB8tJ,kBAAmB,CAAE9tJ,MAAO,IAE5B+tJ,iBAAkB,CAAE/tJ,MAAO,GAAI0sJ,WAAY,CAC1Ct0I,UAAW,CAAC,EACZ41I,SAAU,CAAC,EACXC,YAAa,CAAC,IAIfC,eAAgB,CAAEluJ,MAAO,GAAI0sJ,WAAY,CACxC1qD,MAAO,CAAC,EACRp8F,SAAU,CAAC,EACX+kC,MAAO,CAAC,EACRC,OAAQ,CAAC,IAGVujH,MAAO,CAAEnuJ,MAAO,MAChBouJ,MAAO,CAAEpuJ,MAAO,OAIjBoW,OAAQ,CAEPg1I,QAAS,CAAEprJ,MAAqB,IAAIiiG,GAAO,WAC3CmB,QAAS,CAAEpjG,MAAO,GAClBkK,KAAM,CAAElK,MAAO,GACf8mB,MAAO,CAAE9mB,MAAO,GAChBqgC,IAAK,CAAErgC,MAAO,MACdsuI,SAAU,CAAEtuI,MAAO,MACnBw5G,UAAW,CAAEx5G,MAAO,GACpBqrJ,YAAa,CAAErrJ,MAAqB,IAAI0wH,KAIzCmwB,OAAQ,CAEPuK,QAAS,CAAEprJ,MAAqB,IAAIiiG,GAAO,WAC3CmB,QAAS,CAAEpjG,MAAO,GAClBmgH,OAAQ,CAAEngH,MAAqB,IAAIuzC,GAAS,GAAK,KACjD/U,SAAU,CAAEx+B,MAAO,GACnBqgC,IAAK,CAAErgC,MAAO,MACdsuI,SAAU,CAAEtuI,MAAO,MACnBw5G,UAAW,CAAEx5G,MAAO,GACpBqrJ,YAAa,CAAErrJ,MAAqB,IAAI0wH,MAMpC29B,GAAY,CAEjBC,MAAO,CAENvgH,SAAwB2sG,GAAe,CACtCyQ,GAAYvH,OACZuH,GAAYI,YACZJ,GAAYK,OACZL,GAAYO,MACZP,GAAYQ,SACZR,GAAY7a,MAGbniG,aAAcq0G,GAAYuH,eAC1Bp8G,eAAgB60G,GAAYwH,gBAI7BuE,QAAS,CAERxgH,SAAwB2sG,GAAe,CACtCyQ,GAAYvH,OACZuH,GAAYI,YACZJ,GAAYK,OACZL,GAAYO,MACZP,GAAYQ,SACZR,GAAYS,YACZT,GAAYU,QACZV,GAAYW,UACZX,GAAYY,gBACZZ,GAAY7a,IACZ6a,GAAYppD,OACZ,CACCgY,SAAU,CAAE/5G,MAAqB,IAAIiiG,GAAO,OAI9C9zD,aAAcq0G,GAAYyH,iBAC1Bt8G,eAAgB60G,GAAY0H,kBAI7BsE,MAAO,CAENzgH,SAAwB2sG,GAAe,CACtCyQ,GAAYvH,OACZuH,GAAYI,YACZJ,GAAYK,OACZL,GAAYO,MACZP,GAAYQ,SACZR,GAAYS,YACZT,GAAYU,QACZV,GAAYW,UACZX,GAAYY,gBACZZ,GAAY7a,IACZ6a,GAAYppD,OACZ,CACCgY,SAAU,CAAE/5G,MAAqB,IAAIiiG,GAAO,IAC5C6rC,SAAU,CAAE9tI,MAAqB,IAAIiiG,GAAO,UAC5C8rC,UAAW,CAAE/tI,MAAO,OAItBmuC,aAAcq0G,GAAY+H,eAC1B58G,eAAgB60G,GAAYgI,gBAI7BiE,SAAU,CAET1gH,SAAwB2sG,GAAe,CACtCyQ,GAAYvH,OACZuH,GAAYK,OACZL,GAAYO,MACZP,GAAYQ,SACZR,GAAYS,YACZT,GAAYU,QACZV,GAAYW,UACZX,GAAYY,gBACZZ,GAAYa,aACZb,GAAYc,aACZd,GAAY7a,IACZ6a,GAAYppD,OACZ,CACCgY,SAAU,CAAE/5G,MAAqB,IAAIiiG,GAAO,IAC5CgX,UAAW,CAAEj5G,MAAO,GACpB+4G,UAAW,CAAE/4G,MAAO,GACpByvI,gBAAiB,CAAEzvI,MAAO,MAI5BmuC,aAAcq0G,GAAYiI,kBAC1B98G,eAAgB60G,GAAYkI,mBAI7BgE,KAAM,CAEL3gH,SAAwB2sG,GAAe,CACtCyQ,GAAYvH,OACZuH,GAAYO,MACZP,GAAYQ,SACZR,GAAYS,YACZT,GAAYU,QACZV,GAAYW,UACZX,GAAYY,gBACZZ,GAAYe,YACZf,GAAY7a,IACZ6a,GAAYppD,OACZ,CACCgY,SAAU,CAAE/5G,MAAqB,IAAIiiG,GAAO,OAI9C9zD,aAAcq0G,GAAYmI,cAC1Bh9G,eAAgB60G,GAAYoI,eAI7Bvc,OAAQ,CAEPtgG,SAAwB2sG,GAAe,CACtCyQ,GAAYvH,OACZuH,GAAYU,QACZV,GAAYW,UACZX,GAAYY,gBACZZ,GAAY7a,IACZ,CACCjC,OAAQ,CAAEruI,MAAO,SAInBmuC,aAAcq0G,GAAY2H,gBAC1Bx8G,eAAgB60G,GAAY4H,iBAI7Bh0I,OAAQ,CAEP23B,SAAwB2sG,GAAe,CACtCyQ,GAAY/0I,OACZ+0I,GAAY7a,MAGbniG,aAAcq0G,GAAYqI,YAC1Bl9G,eAAgB60G,GAAYsI,aAI7B6D,OAAQ,CAEP5gH,SAAwB2sG,GAAe,CACtCyQ,GAAYvH,OACZuH,GAAY7a,IACZ,CACCxpH,MAAO,CAAE9mB,MAAO,GAChBgwI,SAAU,CAAEhwI,MAAO,GACnB4uJ,UAAW,CAAE5uJ,MAAO,MAItBmuC,aAAcq0G,GAAYqH,gBAC1Bl8G,eAAgB60G,GAAYsH,iBAI7B9kI,MAAO,CAEN+oB,SAAwB2sG,GAAe,CACtCyQ,GAAYvH,OACZuH,GAAYY,kBAGb59G,aAAcq0G,GAAY+G,WAC1B57G,eAAgB60G,GAAYgH,YAI7BrkI,OAAQ,CAEP4oB,SAAwB2sG,GAAe,CACtCyQ,GAAYvH,OACZuH,GAAYU,QACZV,GAAYW,UACZX,GAAYY,gBACZ,CACC3oD,QAAS,CAAEpjG,MAAO,MAIpBmuC,aAAcq0G,GAAY6H,gBAC1B18G,eAAgB60G,GAAY8H,iBAI7BzJ,OAAQ,CAEP9yG,SAAwB2sG,GAAe,CACtCyQ,GAAYtK,OACZsK,GAAY7a,MAGbniG,aAAcq0G,GAAYyI,YAC1Bt9G,eAAgB60G,GAAY0I,aAI7Bz7G,WAAY,CAEX1B,SAAU,CACTs9G,YAAa,CAAErrJ,MAAqB,IAAI0wH,IACxCm+B,IAAK,CAAE7uJ,MAAO,OAGfmuC,aAAcq0G,GAAY2G,gBAC1Bx7G,eAAgB60G,GAAY4G,iBAI7B0F,KAAM,CAEL/gH,SAAwB2sG,GAAe,CACtCyQ,GAAYK,OACZ,CACCpoD,QAAS,CAAEpjG,MAAO,MAIpBmuC,aAAcq0G,GAAY6G,UAC1B17G,eAAgB60G,GAAY8G,WAI7ByF,SAAU,CAEThhH,SAAU,CACTuwG,UAAW,CAAEt+I,MAAO,OAGrBmuC,aAAcq0G,GAAYmH,cAC1Bh8G,eAAgB60G,GAAYoH,eAI7BoF,aAAc,CAEbjhH,SAAwB2sG,GAAe,CACtCyQ,GAAYvH,OACZuH,GAAYY,gBACZ,CACCkD,kBAAmB,CAAEjvJ,MAAqB,IAAIy8B,IAC9CyyH,aAAc,CAAElvJ,MAAO,GACvBmvJ,YAAa,CAAEnvJ,MAAO,QAIxBmuC,aAAcq0G,GAAYiH,kBAC1B97G,eAAgB60G,GAAYkH,mBAI7B0F,OAAQ,CAEPrhH,SAAwB2sG,GAAe,CACtCyQ,GAAYppD,OACZopD,GAAY7a,IACZ,CACCtuC,MAAO,CAAEhiG,MAAqB,IAAIiiG,GAAO,IACzCmB,QAAS,CAAEpjG,MAAO,MAIpBmuC,aAAcq0G,GAAYuI,YAC1Bp9G,eAAgB60G,GAAYwI,cAgD9B,SAASqE,GAAiBn5G,EAAUo5G,EAAUhsJ,EAAOktD,EAASmU,EAAO8oE,GAEpE,IAGI8hB,EACAC,EAJEC,EAAa,IAAIxtD,GAAO,GAC1BytD,GAAuB,IAAV/qF,EAAiB,EAAI,EAKlCgrF,EAAoB,KACpBC,EAA2B,EAC3BC,EAAqB,KA0KzB,SAASC,EAAU9tD,EAAOr9B,GAEzBrhE,EAAMoH,QAAQs3F,MAAM8tD,SAAU9tD,EAAM7uF,EAAG6uF,EAAMvqF,EAAGuqF,EAAMzvF,EAAGoyD,EAAO8oE,EAEjE,CAEA,MAAO,CAENsiB,cAAe,WAEd,OAAON,CAER,EACAO,cAAe,SAAWhuD,GAAmB,IAAZr9B,EAAK5jE,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAExC0uJ,EAAW7qJ,IAAKo9F,GAEhB8tD,EAAUL,EADVC,EAAa/qF,EAGd,EACAsrF,cAAe,WAEd,OAAOP,CAER,EACAQ,cAAe,SAAWvrF,GAGzBmrF,EAAUL,EADVC,EAAa/qF,EAGd,EACAnuB,OAvMD,SAAiB25G,EAAY/gH,GAE5B,IAAIghH,GAAa,EACb3gH,GAA+B,IAAlBL,EAAME,QAAmBF,EAAMK,WAAa,KAExDA,GAAcA,EAAW8mF,YAE7B9mF,EAAa6/G,EAAS3qJ,IAAK8qC,IAO5B,IAAMqN,EAAK5G,EAAS4G,GACduzG,EAAUvzG,EAAGwzG,YAAcxzG,EAAGwzG,aAE/BD,GAA4C,aAAjCA,EAAQE,uBAEvB9gH,EAAa,MAIM,OAAfA,EAEJqgH,EAAUL,EAAYC,GAEXjgH,GAAcA,EAAW2kB,UAEpC07F,EAAUrgH,EAAY,GACtB2gH,GAAa,IAITl6G,EAASkH,WAAagzG,IAE1Bl6G,EAASmH,MAAOnH,EAASs6G,eAAgBt6G,EAASu6G,eAAgBv6G,EAASw6G,kBAIvEjhH,IAAgBA,EAAWrC,eAAiBqC,EAAWqB,UAAY22E,UAEtDnmH,IAAZkuJ,KAEJA,EAAU,IAAIlhH,GACb,IAAI4qG,GAAa,EAAG,EAAG,GACvB,IAAIhrG,GAAgB,CACnB5tC,KAAM,yBACNytC,SAAU0sG,GAAe4T,GAAUS,KAAK/gH,UACxCI,aAAckgH,GAAUS,KAAK3gH,aAC7BR,eAAgB0gH,GAAUS,KAAKnhH,eAC/BS,KAAM22E,EACNzwE,WAAW,EACXD,YAAY,EACZi8F,KAAK,MAICtiG,SAAS2iH,gBAAiB,UAClCnB,EAAQxhH,SAAS2iH,gBAAiB,MAElCnB,EAAQoB,eAAiB,SAAW16G,EAAU9G,EAAO8C,GAEpD/xC,KAAKg7C,YAAY01G,aAAc3+G,EAAOiJ,YAEvC,EAGA17C,OAAOgF,eAAgB+qJ,EAAQnyI,SAAU,SAAU,CAElD1Y,IAAK,WAEJ,OAAOxE,KAAK4tC,SAASwhG,OAAOvvI,KAE7B,IAIDwwD,EAAQhe,OAAQg9G,IAIjBA,EAAQnyI,SAAS0wB,SAASwhG,OAAOvvI,MAAQyvC,EACzC+/G,EAAQnyI,SAAS0wB,SAAS09G,WAAWzrJ,MAAUyvC,EAAWrC,gBAAsD,IAArCqC,EAAWmnF,uBAAsC,EAAI,EAE3H+4B,IAAsBlgH,GAC1BmgH,IAA6BngH,EAAW+4B,SACxCqnF,IAAuB35G,EAASixB,cAEhCqoF,EAAQnyI,SAASmjB,aAAc,EAE/BmvH,EAAoBlgH,EACpBmgH,EAA2BngH,EAAW+4B,QACtCqnF,EAAqB35G,EAASixB,aAI/BqoF,EAAQ1oB,OAAOgqB,YAGfX,EAAW3tJ,QAASgtJ,EAASA,EAAQxhH,SAAUwhH,EAAQnyI,SAAU,EAAG,EAAG,OAE5DoyB,GAAcA,EAAW8mF,iBAEjBj1H,IAAdiuJ,KAEJA,EAAY,IAAIjhH,GACf,IAAI0zG,GAAe,EAAG,GACtB,IAAI9zG,GAAgB,CACnB5tC,KAAM,qBACNytC,SAAU0sG,GAAe4T,GAAU5+G,WAAW1B,UAC9CI,aAAckgH,GAAU5+G,WAAWtB,aACnCR,eAAgB0gH,GAAU5+G,WAAW9B,eACrCS,KAAMusE,EACNrmE,WAAW,EACXD,YAAY,EACZi8F,KAAK,MAIGtiG,SAAS2iH,gBAAiB,UAGpClxJ,OAAOgF,eAAgB8qJ,EAAUlyI,SAAU,MAAO,CAEjD1Y,IAAK,WAEJ,OAAOxE,KAAK4tC,SAAS8gH,IAAI7uJ,KAE1B,IAIDwwD,EAAQhe,OAAQ+8G,IAIjBA,EAAUlyI,SAAS0wB,SAAS8gH,IAAI7uJ,MAAQyvC,GAEH,IAAhCA,EAAW7L,kBAEf6L,EAAW7Q,eAIZ2wH,EAAUlyI,SAAS0wB,SAASs9G,YAAYrrJ,MAAMoE,KAAMqrC,EAAWz+B,QAE1D2+I,IAAsBlgH,GAC1BmgH,IAA6BngH,EAAW+4B,SACxCqnF,IAAuB35G,EAASixB,cAEhCooF,EAAUlyI,SAASmjB,aAAc,EAEjCmvH,EAAoBlgH,EACpBmgH,EAA2BngH,EAAW+4B,QACtCqnF,EAAqB35G,EAASixB,aAI/BooF,EAAUzoB,OAAOgqB,YAGjBX,EAAW3tJ,QAAS+sJ,EAAWA,EAAUvhH,SAAUuhH,EAAUlyI,SAAU,EAAG,EAAG,MAI/E,EAqCD,CAEA,SAAS0zI,GAAoB9+G,EAAI1B,EAAYw4D,EAAYu4C,GAExD,IAAM0P,EAAsB/+G,EAAGg/G,aAAc,OAEvCntD,EAAYw9C,EAAaC,SAAW,KAAOhxG,EAAW5rC,IAAK,2BAC3DusJ,EAAe5P,EAAaC,UAA0B,OAAdz9C,EAExCqtD,EAAgB,CAAC,EAEjBC,EAAeC,EAAoB,MACrCC,EAAeF,EACf3kG,GAAc,EAqElB,SAAS8kG,EAAuBC,GAE/B,OAAKlQ,EAAaC,SAAkBtvG,EAAGw/G,gBAAiBD,GAEjD1tD,EAAU4tD,mBAAoBF,EAEtC,CAEA,SAASG,EAAyBH,GAEjC,OAAKlQ,EAAaC,SAAkBtvG,EAAG2/G,kBAAmBJ,GAEnD1tD,EAAU+tD,qBAAsBL,EAExC,CAqCA,SAASH,EAAoBG,GAM5B,IAJA,IAAMM,EAAgB,GAChBC,EAAoB,GACpBC,EAAoB,GAEhBjuJ,EAAI,EAAGA,EAAIitJ,EAAqBjtJ,IAEzC+tJ,EAAe/tJ,GAAM,EACrBguJ,EAAmBhuJ,GAAM,EACzBiuJ,EAAmBjuJ,GAAM,EAI1B,MAAO,CAGNiqC,SAAU,KACVikH,QAAS,KACT/hB,WAAW,EAEX4hB,cAAeA,EACfC,kBAAmBA,EACnBC,kBAAmBA,EACnB7zH,OAAQqzH,EACRzoD,WAAY,CAAC,EACbhjG,MAAO,KAIT,CA8FA,SAASmsJ,IAIR,IAFA,IAAMJ,EAAgBR,EAAaQ,cAEzB/tJ,EAAI,EAAG8sG,EAAKihD,EAAcpvJ,OAAQqB,EAAI8sG,EAAI9sG,IAEnD+tJ,EAAe/tJ,GAAM,CAIvB,CAEA,SAASouJ,EAAiB/mD,GAEzBgnD,EAA2BhnD,EAAW,EAEvC,CAEA,SAASgnD,EAA2BhnD,EAAWinD,GAE9C,IAAMP,EAAgBR,EAAaQ,cAC7BC,EAAoBT,EAAaS,kBACjCC,EAAoBV,EAAaU,mBAEvCF,EAAe1mD,GAAc,EAEW,IAAnC2mD,EAAmB3mD,KAEvBn5D,EAAGqgH,wBAAyBlnD,GAC5B2mD,EAAmB3mD,GAAc,GAI7B4mD,EAAmB5mD,KAAgBinD,MAErB/Q,EAAaC,SAAWtvG,EAAK1B,EAAW5rC,IAAK,2BAEpD28I,EAAaC,SAAW,sBAAwB,4BAA8Bn2C,EAAWinD,GACpGL,EAAmB5mD,GAAcinD,EAInC,CAEA,SAASE,IAKR,IAHA,IAAMT,EAAgBR,EAAaQ,cAC7BC,EAAoBT,EAAaS,kBAE7BhuJ,EAAI,EAAG8sG,EAAKkhD,EAAkBrvJ,OAAQqB,EAAI8sG,EAAI9sG,IAElDguJ,EAAmBhuJ,KAAQ+tJ,EAAe/tJ,KAE9CkuC,EAAGugH,yBAA0BzuJ,GAC7BguJ,EAAmBhuJ,GAAM,EAM5B,CAEA,SAAS0uJ,EAAqB1sJ,EAAOmE,EAAMlI,EAAMkpG,EAAYjD,EAAQlhF,IAErC,IAA1Bu6H,EAAaC,UAAgC,OAATv/I,GAA0B,OAATA,EAMzDiwC,EAAGwgH,oBAAqB1sJ,EAAOmE,EAAMlI,EAAMkpG,EAAYjD,EAAQlhF,GAJ/DkrB,EAAGygH,qBAAsB3sJ,EAAOmE,EAAMlI,EAAMimG,EAAQlhF,EAQtD,CA6PA,SAASwL,IAERogI,IACAlmG,GAAc,EAET6kG,IAAiBF,GAGtBG,GADAD,EAAeF,GACqBjzH,OAErC,CAIA,SAASw0H,IAERvB,EAAapjH,SAAW,KACxBojH,EAAaa,QAAU,KACvBb,EAAalhB,WAAY,CAE1B,CAEA,MAAO,CAEN0iB,MAjlBD,SAAgBz0H,EAAQ9gB,EAAU40I,EAASjkH,EAAUjoC,GAEpD,IAAI8sJ,GAAgB,EAEpB,GAAK3B,EAAe,CAEnB,IAAM5tJ,EA6ER,SAA0B0qC,EAAUikH,EAAS50I,GAE5C,IAAM6yH,GAAqC,IAAvB7yH,EAAS6yH,UAEzB4iB,EAAa3B,EAAenjH,EAAS19B,SAErBhP,IAAfwxJ,IAEJA,EAAa,CAAC,EACd3B,EAAenjH,EAAS19B,IAAOwiJ,GAIhC,IAAIC,EAAWD,EAAYb,EAAQ3hJ,SAEjBhP,IAAbyxJ,IAEJA,EAAW,CAAC,EACZD,EAAYb,EAAQ3hJ,IAAOyiJ,GAI5B,IAAIzvJ,EAAQyvJ,EAAU7iB,QAEP5uI,IAAVgC,IAEJA,EAAQ+tJ,EAhDJ/P,EAAaC,SAAkBtvG,EAAG+gH,oBAEhClvD,EAAUmvD,wBA+ChBF,EAAU7iB,GAAc5sI,GAIzB,OAAOA,CAER,CA9GgB4vJ,CAAiBllH,EAAUikH,EAAS50I,GAE7Ci0I,IAAiBhuJ,GAGrBiuJ,GADAD,EAAehuJ,GACqB66B,QAIrC00H,EAuIF,SAAsB10H,EAAQ6P,EAAUikH,EAASlsJ,GAEhD,IAAMotJ,EAAmB7B,EAAavoD,WAChCqqD,EAAqBplH,EAAS+6D,WAEhCsqD,EAAgB,EAEdC,EAAoBrB,EAAQsB,gBAElC,IAAM,IAAMjzJ,KAAQgzJ,EAAoB,CAIvC,GAFyBA,EAAmBhzJ,GAEtBkzJ,UAAY,EAAI,CAErC,IAAMC,EAAkBN,EAAkB7yJ,GACtCozJ,EAAoBN,EAAoB9yJ,GAS5C,QAP2BgB,IAAtBoyJ,IAEU,mBAATpzJ,GAA6B69B,EAAO8B,iBAAiByzH,EAAoBv1H,EAAO8B,gBACvE,kBAAT3/B,GAA4B69B,EAAOqrG,gBAAgBkqB,EAAoBv1H,EAAOqrG,qBAI3DloI,IAApBmyJ,EAAgC,OAAO,EAE5C,GAAKA,EAAgBroD,YAAcsoD,EAAoB,OAAO,EAE9D,GAAKA,GAAqBD,EAAgB3mJ,OAAS4mJ,EAAkB5mJ,KAAO,OAAO,EAEnFumJ,GAED,CAED,CAEA,OAAK/B,EAAa+B,gBAAkBA,GAE/B/B,EAAavrJ,QAAUA,CAI7B,CAlLkBy6B,CAAarC,EAAQ6P,EAAUikH,EAASlsJ,GAEnD8sJ,GAkLP,SAAoB10H,EAAQ6P,EAAUikH,EAASlsJ,GAE9C,IAAMg8B,EAAQ,CAAC,EACTgnE,EAAa/6D,EAAS+6D,WACxBsqD,EAAgB,EAEdC,EAAoBrB,EAAQsB,gBAElC,IAAM,IAAMjzJ,KAAQgzJ,EAAoB,CAIvC,GAFyBA,EAAmBhzJ,GAEtBkzJ,UAAY,EAAI,CAErC,IAAIpoD,EAAYrC,EAAYzoG,QAETgB,IAAd8pG,IAEU,mBAAT9qG,GAA6B69B,EAAO8B,iBAAiBmrE,EAAYjtE,EAAO8B,gBAC/D,kBAAT3/B,GAA4B69B,EAAOqrG,gBAAgBp+B,EAAYjtE,EAAOqrG,gBAI5E,IAAM18H,EAAO,CAAC,EACdA,EAAKs+F,UAAYA,EAEZA,GAAaA,EAAUt+F,OAE3BA,EAAKA,KAAOs+F,EAAUt+F,MAIvBi1B,EAAOzhC,GAASwM,EAEhBumJ,GAED,CAED,CAEA/B,EAAavoD,WAAahnE,EAC1BuvH,EAAa+B,cAAgBA,EAE7B/B,EAAavrJ,MAAQA,CAEtB,CA/NuB4tJ,CAAWx1H,EAAQ6P,EAAUikH,EAASlsJ,EAE5D,KAAO,CAEN,IAAMmqI,GAAqC,IAAvB7yH,EAAS6yH,UAExBohB,EAAatjH,WAAaA,EAAS19B,IACvCghJ,EAAaW,UAAYA,EAAQ3hJ,IACjCghJ,EAAaphB,YAAcA,IAE3BohB,EAAatjH,SAAWA,EAAS19B,GACjCghJ,EAAaW,QAAUA,EAAQ3hJ,GAC/BghJ,EAAaphB,UAAYA,EAEzB2iB,GAAgB,EAIlB,CAEe,OAAV9sJ,GAEJgjG,EAAWv2D,OAAQzsC,EAAO,QAItB8sJ,GAAiBpmG,KAErBA,GAAc,EAiRhB,SAAgCtuB,EAAQ9gB,EAAU40I,EAASjkH,GAE1D,IAA+B,IAA1BszG,EAAaC,WAAwBpjH,EAAOorG,iBAAmBv7F,EAAS4lH,4BAExB,OAA/CrjH,EAAW5rC,IAAK,0BAAsC,OAI5DutJ,IAEA,IAAMkB,EAAqBplH,EAAS+6D,WAE9BuqD,EAAoBrB,EAAQsB,gBAE5BM,EAAiCx2I,EAASm+H,uBAEhD,IAAM,IAAMl7I,KAAQgzJ,EAAoB,CAEvC,IAAMQ,EAAmBR,EAAmBhzJ,GAE5C,GAAKwzJ,EAAiBN,UAAY,EAAI,CAErC,IAAIE,EAAoBN,EAAoB9yJ,GAS5C,QAP2BgB,IAAtBoyJ,IAEU,mBAATpzJ,GAA6B69B,EAAO8B,iBAAiByzH,EAAoBv1H,EAAO8B,gBACvE,kBAAT3/B,GAA4B69B,EAAOqrG,gBAAgBkqB,EAAoBv1H,EAAOqrG,qBAIzDloI,IAAtBoyJ,EAAkC,CAEtC,IAAMxoD,EAAawoD,EAAkBxoD,WAC/BhhG,EAAOwpJ,EAAkBx+C,SAEzB9J,EAAYrC,EAAWpkG,IAAK+uJ,GAIlC,QAAmBpyJ,IAAd8pG,EAA0B,SAE/B,IAAM7jG,EAAS6jG,EAAU7jG,OACnBvF,EAAOopG,EAAUppG,KACjB0/I,EAAkBt2C,EAAUs2C,gBAElC,GAAKgS,EAAkB/c,6BAA+B,CAErD,IAAM7pI,EAAO4mJ,EAAkB5mJ,KACzBm7F,EAASn7F,EAAKm7F,OACdlhF,EAAS2sI,EAAkB3sI,OAEjC,GAAKja,EAAKinJ,6BAA+B,CAExC,IAAM,IAAIhwJ,EAAI,EAAGA,EAAI+vJ,EAAiBE,aAAcjwJ,IAEnDquJ,EAA2B0B,EAAiBN,SAAWzvJ,EAAG+I,EAAKulJ,mBAIhC,IAA3Bl0H,EAAOorG,sBAA2DjoI,IAA/B0sC,EAASimH,oBAEhDjmH,EAASimH,kBAAoBnnJ,EAAKulJ,iBAAmBvlJ,EAAK/J,MAI5D,MAEC,IAAM,IAAIgB,EAAI,EAAGA,EAAI+vJ,EAAiBE,aAAcjwJ,IAEnDouJ,EAAiB2B,EAAiBN,SAAWzvJ,GAM/CkuC,EAAG2vG,WAAY,MAAOr6I,GAEtB,IAAM,IAAIxD,EAAI,EAAGA,EAAI+vJ,EAAiBE,aAAcjwJ,IAEnD0uJ,EACCqB,EAAiBN,SAAWzvJ,EAC5BmG,EAAO4pJ,EAAiBE,aACxBhyJ,EACAkpG,EACAjD,EAASy5C,GACP36H,EAAW7c,EAAO4pJ,EAAiBE,aAAiBjwJ,GAAM29I,EAK/D,KAAO,CAEN,GAAKgS,EAAkBQ,2BAA6B,CAEnD,IAAM,IAAInwJ,EAAI,EAAGA,EAAI+vJ,EAAiBE,aAAcjwJ,IAEnDquJ,EAA2B0B,EAAiBN,SAAWzvJ,EAAG2vJ,EAAkBrB,mBAI7C,IAA3Bl0H,EAAOorG,sBAA2DjoI,IAA/B0sC,EAASimH,oBAEhDjmH,EAASimH,kBAAoBP,EAAkBrB,iBAAmBqB,EAAkB3wJ,MAItF,MAEC,IAAM,IAAIgB,EAAI,EAAGA,EAAI+vJ,EAAiBE,aAAcjwJ,IAEnDouJ,EAAiB2B,EAAiBN,SAAWzvJ,GAM/CkuC,EAAG2vG,WAAY,MAAOr6I,GAEtB,IAAM,IAAIxD,EAAI,EAAGA,EAAI+vJ,EAAiBE,aAAcjwJ,IAEnD0uJ,EACCqB,EAAiBN,SAAWzvJ,EAC5BmG,EAAO4pJ,EAAiBE,aACxBhyJ,EACAkpG,EACAhhG,EAAOw3I,EACLx3I,EAAO4pJ,EAAiBE,aAAiBjwJ,EAAI29I,EAKlD,CAED,MAAO,QAAwCpgJ,IAAnCuyJ,EAA+C,CAE1D,IAAM7zJ,EAAQ6zJ,EAAgCvzJ,GAE9C,QAAegB,IAAVtB,EAEJ,OAASA,EAAM0C,QAEd,KAAK,EACJuvC,EAAGkiH,gBAAiBL,EAAiBN,SAAUxzJ,GAC/C,MAED,KAAK,EACJiyC,EAAGmiH,gBAAiBN,EAAiBN,SAAUxzJ,GAC/C,MAED,KAAK,EACJiyC,EAAGoiH,gBAAiBP,EAAiBN,SAAUxzJ,GAC/C,MAED,QACCiyC,EAAGqiH,gBAAiBR,EAAiBN,SAAUxzJ,GAMnD,CAED,CAED,CAEAuyJ,GAED,CAxbEgC,CAAuBp2H,EAAQ9gB,EAAU40I,EAASjkH,GAEnC,OAAVjoC,GAEJksC,EAAG2vG,WAAY,MAAO74C,EAAWpkG,IAAKoB,GAAQwB,QAMjD,EAyhBCgrB,MAAOA,EACPogI,kBAAmBA,EACnB7vG,QA3GD,WAIC,IAAM,IAAM0xG,KAFZjiI,IAE0B4+H,EAAgB,CAEzC,IAAM2B,EAAa3B,EAAeqD,GAElC,IAAM,IAAMC,KAAa3B,EAAa,CAErC,IAAMC,EAAWD,EAAY2B,GAE7B,IAAM,IAAMvkB,KAAa6iB,EAExBpB,EAAyBoB,EAAU7iB,GAAY/xG,eAExC40H,EAAU7iB,UAIX4iB,EAAY2B,EAEpB,QAEOtD,EAAeqD,EAEvB,CAED,EAgFCE,wBA9ED,SAAkC1mH,GAEjC,QAAsC1sC,IAAjC6vJ,EAAenjH,EAAS19B,IAA7B,CAEA,IAAMwiJ,EAAa3B,EAAenjH,EAAS19B,IAE3C,IAAM,IAAMmkJ,KAAa3B,EAAa,CAErC,IAAMC,EAAWD,EAAY2B,GAE7B,IAAM,IAAMvkB,KAAa6iB,EAExBpB,EAAyBoB,EAAU7iB,GAAY/xG,eAExC40H,EAAU7iB,UAIX4iB,EAAY2B,EAEpB,QAEOtD,EAAenjH,EAAS19B,GApByB,CAsBzD,EAuDCqkJ,uBArDD,SAAiC1C,GAEhC,IAAM,IAAMuC,KAAcrD,EAAgB,CAEzC,IAAM2B,EAAa3B,EAAeqD,GAElC,QAAkClzJ,IAA7BwxJ,EAAYb,EAAQ3hJ,IAAzB,CAEA,IAAMyiJ,EAAWD,EAAYb,EAAQ3hJ,IAErC,IAAM,IAAM4/H,KAAa6iB,EAExBpB,EAAyBoB,EAAU7iB,GAAY/xG,eAExC40H,EAAU7iB,UAIX4iB,EAAYb,EAAQ3hJ,GAZ2B,CAcvD,CAED,EAiCC4hJ,eAAgBA,EAChBC,gBAAiBA,EACjBI,wBAAyBA,EAI3B,CAEA,SAASqC,GAAqB3iH,EAAI1B,EAAYskH,EAAMvT,GAEnD,IAEIvvH,EAFEwvH,EAAWD,EAAaC,SAmD9BphJ,KAAK20J,QA/CL,SAAkB90J,GAEjB+xB,EAAO/xB,CAER,EA4CAG,KAAKq2C,OA1CL,SAAiB/uC,EAAO1E,GAEvBkvC,EAAG8iH,WAAYhjI,EAAMtqB,EAAO1E,GAE5B8xJ,EAAKriH,OAAQzvC,EAAOgvB,EAAM,EAE3B,EAqCA5xB,KAAK60J,gBAnCL,SAA0BvtJ,EAAO1E,EAAOkyJ,GAEvC,GAAmB,IAAdA,EAAL,CAEA,IAAInxD,EAAWoxD,EAEf,GAAK3T,EAEJz9C,EAAY7xD,EACZijH,EAAa,2BAOb,GAFAA,EAAa,2BAEM,QAHnBpxD,EAAYvzD,EAAW5rC,IAAK,2BAM3B,YADA3B,QAAQkC,MAAO,kIAOjB4+F,EAAWoxD,GAAcnjI,EAAMtqB,EAAO1E,EAAOkyJ,GAE7CJ,EAAKriH,OAAQzvC,EAAOgvB,EAAMkjI,EAzBG,CA2B9B,CAQD,CAEA,SAASE,GAAmBljH,EAAI1B,EAAYoG,GAE3C,IAAIy+G,EAsBJ,SAASC,EAAiB5/I,GAEzB,GAAmB,UAAdA,EAAwB,CAE5B,GAAKw8B,EAAGqjH,yBAA0B,MAAO,OAAQ7/I,UAAY,GAC5Dw8B,EAAGqjH,yBAA0B,MAAO,OAAQ7/I,UAAY,EAExD,MAAO,QAIRA,EAAY,SAEb,CAEA,MAAmB,YAAdA,GAECw8B,EAAGqjH,yBAA0B,MAAO,OAAQ7/I,UAAY,GAC5Dw8B,EAAGqjH,yBAA0B,MAAO,OAAQ7/I,UAAY,EAEjD,UAMF,MAER,CAEA,IAAM8rI,EAA+C,qBAA3BgU,wBAA0CtjH,aAAcsjH,wBACtC,qBAAlCC,+BAAiDvjH,aAAcujH,8BAErE//I,OAAqCnU,IAAzBq1C,EAAWlhC,UAA0BkhC,EAAWlhC,UAAY,QACtEggJ,EAAeJ,EAAiB5/I,GAEjCggJ,IAAiBhgJ,IAErBzS,QAAQC,KAAM,uBAAwBwS,EAAW,uBAAwBggJ,EAAc,YACvFhgJ,EAAYggJ,GAIb,IAAMna,EAAciG,GAAYhxG,EAAWomB,IAAK,sBAE1C++F,GAA+D,IAAtC/+G,EAAW++G,uBAEpCC,EAAc1jH,EAAGg/G,aAAc,OAC/B2E,EAAoB3jH,EAAGg/G,aAAc,OACrC4E,EAAiB5jH,EAAGg/G,aAAc,MAClC6E,EAAiB7jH,EAAGg/G,aAAc,OAElC8E,EAAgB9jH,EAAGg/G,aAAc,OACjC+E,EAAoB/jH,EAAGg/G,aAAc,OACrCgF,EAAchkH,EAAGg/G,aAAc,OAC/BiF,EAAsBjkH,EAAGg/G,aAAc,OAEvCkF,EAAiBP,EAAoB,EACrCQ,EAAwB7U,GAAYhxG,EAAWomB,IAAK,qBAK1D,MAAO,CAEN4qF,SAAUA,EAEVjG,YAAaA,EAEb+a,iBAzFD,WAEC,QAAuB/0J,IAAlB8zJ,EAA8B,OAAOA,EAE1C,IAA4D,IAAvD7kH,EAAWomB,IAAK,kCAA8C,CAElE,IAAMmtC,EAAYvzD,EAAW5rC,IAAK,kCAElCywJ,EAAgBnjH,EAAGg/G,aAAcntD,EAAUwyD,+BAE5C,MAEClB,EAAgB,EAIjB,OAAOA,CAER,EAwECC,gBAAiBA,EAEjB5/I,UAAWA,EACXigJ,uBAAwBA,EAExBC,YAAaA,EACbC,kBAAmBA,EACnBC,eAAgBA,EAChBC,eAAgBA,EAEhBC,cAAeA,EACfC,kBAAmBA,EACnBC,YAAaA,EACbC,oBAAqBA,EAErBC,eAAgBA,EAChBC,sBAAuBA,EACvBG,oBA5B2BJ,GAAkBC,EA8B7CI,WA5BkBjV,EAAWtvG,EAAGg/G,aAAc,OAAU,EAgC1D,CAEA,SAASwF,GAAe/J,GAEvB,IAAM7sG,EAAQ1/C,KAEVu2J,EAAc,KACjBC,EAAkB,EAClBC,GAAuB,EACvBC,GAAmB,EAEdv3B,EAAQ,IAAI9lF,GACjBs9G,EAAmB,IAAIpmC,GAEvBqmC,EAAU,CAAE/2J,MAAO,KAAMwgC,aAAa,GAyFvC,SAASw2H,IAEHD,EAAQ/2J,QAAU02J,IAEtBK,EAAQ/2J,MAAQ02J,EAChBK,EAAQv2H,YAAcm2H,EAAkB,GAIzC92G,EAAMo3G,UAAYN,EAClB92G,EAAMq3G,gBAAkB,CAEzB,CAEA,SAASC,EAAezX,EAAQxtG,EAAQiqF,EAAWi7B,GAElD,IAAMC,EAAqB,OAAX3X,EAAkBA,EAAOh9I,OAAS,EAC9C40J,EAAW,KAEf,GAAiB,IAAZD,EAAgB,CAIpB,GAFAC,EAAWP,EAAQ/2J,OAEI,IAAlBo3J,GAAuC,OAAbE,EAAoB,CAElD,IAAMC,EAAWp7B,EAAsB,EAAVk7B,EAC5BG,EAAatlH,EAAO4J,mBAErBg7G,EAAiB1iB,gBAAiBojB,IAEhB,OAAbF,GAAqBA,EAAS50J,OAAS60J,KAE3CD,EAAW,IAAI1sJ,aAAc2sJ,IAI9B,IAAM,IAAIxzJ,EAAI,EAAG0zJ,EAAKt7B,EAAWp4H,IAAMszJ,IAAYtzJ,EAAG0zJ,GAAM,EAE3Dn4B,EAAMl7H,KAAMs7I,EAAQ37I,IAAMs3C,aAAcm8G,EAAYV,GAEpDx3B,EAAMn6G,OAAOyY,QAAS05H,EAAUG,GAChCH,EAAUG,EAAK,GAAMn4B,EAAMtjF,QAI7B,CAEA+6G,EAAQ/2J,MAAQs3J,EAChBP,EAAQv2H,aAAc,CAEvB,CAKA,OAHAqf,EAAMo3G,UAAYI,EAClBx3G,EAAMq3G,gBAAkB,EAEjBI,CAER,CAhJAn3J,KAAK42J,QAAUA,EACf52J,KAAK82J,UAAY,EACjB92J,KAAK+2J,gBAAkB,EAEvB/2J,KAAKD,KAAO,SAAWw/I,EAAQgY,EAAqBxlH,GAEnD,IAAM6K,EACa,IAAlB2iG,EAAOh9I,QACPg1J,GAGoB,IAApBf,GACAC,EAOD,OALAA,EAAuBc,EAEvBhB,EAAcS,EAAezX,EAAQxtG,EAAQ,GAC7CykH,EAAkBjX,EAAOh9I,OAElBq6C,CAER,EAEA58C,KAAKw3J,aAAe,WAEnBd,GAAmB,EACnBM,EAAe,KAEhB,EAEAh3J,KAAKy3J,WAAa,WAEjBf,GAAmB,EACnBG,GAED,EAEA72J,KAAK8qD,SAAW,SAAW5tC,EAAU60B,EAAQ2lH,GAE5C,IAAMnY,EAASriI,EAAS0vH,eACvBC,EAAmB3vH,EAAS2vH,iBAC5BC,EAAc5vH,EAAS4vH,YAElB6qB,EAAqBpL,EAAW/nJ,IAAK0Y,GAE3C,IAAOu5I,GAAmC,OAAXlX,GAAqC,IAAlBA,EAAOh9I,QAAgBm0J,IAAsB5pB,EAIzF4pB,EAIJM,EAAe,MAIfH,QAIK,CAEN,IAAMe,EAAUlB,EAAmB,EAAIF,EACtCqB,EAAoB,EAAVD,EAEPT,EAAWQ,EAAmBG,eAAiB,KAEnDlB,EAAQ/2J,MAAQs3J,EAEhBA,EAAWH,EAAezX,EAAQxtG,EAAQ8lH,EAASH,GAEnD,IAAM,IAAI9zJ,EAAI,EAAGA,IAAMi0J,IAAYj0J,EAElCuzJ,EAAUvzJ,GAAM2yJ,EAAa3yJ,GAI9B+zJ,EAAmBG,cAAgBX,EACnCn3J,KAAK+2J,gBAAkBlqB,EAAmB7sI,KAAK82J,UAAY,EAC3D92J,KAAK82J,WAAac,CAEnB,CAGD,CA6DD,CAEA,SAASG,GAAehiH,GAEvB,IAAIo5G,EAAW,IAAIzkE,QAEnB,SAASstE,EAAmB/rH,EAAS0E,GAYpC,OAVKA,IAAYE,GAEhB5E,EAAQ0E,QAAUC,GAEPD,IAAY02E,KAEvBp7E,EAAQ0E,QAAUy2E,IAIZn7E,CAER,CA+CA,SAASgsH,EAAkBl/I,GAE1B,IAAMkzB,EAAUlzB,EAAMha,OAEtBktC,EAAQ5nC,oBAAqB,UAAW4zJ,GAExC,IAAMC,EAAU/I,EAAS3qJ,IAAKynC,QAEb9qC,IAAZ+2J,IAEJ/I,EAASxjG,OAAQ1f,GACjBisH,EAAQv1G,UAIV,CAQA,MAAO,CACNn+C,IArED,SAAcynC,GAEb,GAAKA,GAAWA,EAAQmqF,YAA+C,IAAlCnqF,EAAQwqF,sBAAkC,CAE9E,IAAM9lF,EAAU1E,EAAQ0E,QAExB,GAAKA,IAAYE,IAAoCF,IAAY02E,GAAmC,CAEnG,GAAK8nC,EAAS34F,IAAKvqB,GAGlB,OAAO+rH,EADS7I,EAAS3qJ,IAAKynC,GAAUA,QACLA,EAAQ0E,SAI3C,IAAMxD,EAAQlB,EAAQkB,MAEtB,GAAKA,GAASA,EAAM1C,OAAS,EAAI,CAEhC,IAAMsyG,EAAe,IAAI3qG,GAAuBjF,EAAM1C,OAAS,GAM/D,OALAsyG,EAAaob,2BAA4BpiH,EAAU9J,GACnDkjH,EAAS1qJ,IAAKwnC,EAAS8wG,GAEvB9wG,EAAQ/nC,iBAAkB,UAAW+zJ,GAE9BD,EAAmBjb,EAAa9wG,QAASA,EAAQ0E,QAEzD,CAIC,OAAO,IAMV,CAED,CAEA,OAAO1E,CAER,EA2BC0W,QARD,WAECwsG,EAAW,IAAIzkE,OAEhB,EAOD,CAjyCAwjE,GAAUkK,SAAW,CAEpBxqH,SAAwB2sG,GAAe,CACtC2T,GAAUI,SAAS1gH,SACnB,CACCi2D,UAAW,CAAEhkG,MAAO,GACpBguI,aAAc,CAAEhuI,MAAO,MACvBmkG,mBAAoB,CAAEnkG,MAAO,GAC7BiuI,sBAAuB,CAAEjuI,MAAO,MAChCskG,qBAAsB,CAAEtkG,MAAqB,IAAIuzC,GAAS,EAAG,IAC7D26F,mBAAoB,CAAEluI,MAAO,MAC7BwkG,YAAa,CAAExkG,MAAO,GACtBmuI,eAAgB,CAAEnuI,MAAO,MACzB2kG,eAAgB,CAAE3kG,MAAO,KACzB6kG,4BAA6B,CAAE7kG,MAAO,KACtC8kG,4BAA6B,CAAE9kG,MAAO,KACtCouI,wBAAyB,CAAEpuI,MAAO,MAClCklG,MAAO,CAAEllG,MAAO,GAChBglG,WAAY,CAAEhlG,MAAqB,IAAIiiG,GAAO,IAC9Cu2D,cAAe,CAAEx4J,MAAO,MACxBilG,eAAgB,CAAEjlG,MAAO,GACzBy4J,kBAAmB,CAAEz4J,MAAO,MAC5BwlG,aAAc,CAAExlG,MAAO,GACvB6vI,gBAAiB,CAAE7vI,MAAO,MAC1B04J,wBAAyB,CAAE14J,MAAqB,IAAIuzC,IACpDolH,uBAAwB,CAAE34J,MAAO,MACjC0lG,UAAW,CAAE1lG,MAAO,GACpB8vI,aAAc,CAAE9vI,MAAO,MACvB6lG,oBAAqB,CAAE7lG,MAAO,GAC9B+lG,iBAAkB,CAAE/lG,MAAqB,IAAIiiG,GAAO,IACpDgE,kBAAmB,CAAEjmG,MAAO,GAC5BqvI,qBAAsB,CAAErvI,MAAO,MAC/BqmG,cAAe,CAAErmG,MAAqB,IAAIiiG,GAAO,EAAG,EAAG,IACvDqtC,iBAAkB,CAAEtvI,MAAO,SAI7BmuC,aAAcq0G,GAAYiI,kBAC1B98G,eAAgB60G,GAAYkI,mBA2vC5B,IAEK7kG,GAAkB,SAAA+yG,IAAApwJ,EAAAA,EAAAA,GAAAq9C,EAAA+yG,GAAA,IAAAC,GAAAnwJ,EAAAA,EAAAA,GAAAm9C,GAEvB,SAAAA,IAAoF,IAAAizG,EAAvE9yG,EAAIjlD,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,IAAK,EAAGglD,EAAKhlD,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGmlD,EAAGnlD,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGolD,EAAMplD,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,IAAK,EAAGywC,EAAIzwC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAK2wC,EAAG3wC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAmB9C,OAnBkD8H,EAAAA,EAAAA,GAAA,KAAAg9C,IAEhFizG,EAAAD,EAAAt5J,KAAA,OAEKumD,sBAAuB,EAE5BgzG,EAAK92J,KAAO,qBAEZ82J,EAAK35G,KAAO,EACZ25G,EAAKv+G,KAAO,KAEZu+G,EAAK9yG,KAAOA,EACZ8yG,EAAK/yG,MAAQA,EACb+yG,EAAK5yG,IAAMA,EACX4yG,EAAK3yG,OAASA,EAEd2yG,EAAKtnH,KAAOA,EACZsnH,EAAKpnH,IAAMA,EAEXonH,EAAKt4G,yBAAyBs4G,CAE/B,CA0GC,OA1GAhuJ,EAAAA,EAAAA,GAAA+6C,EAAA,EAAAz/C,IAAA,OAAApG,MAED,SAAM8G,EAAQ+iI,GAcb,OAZA39F,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA0Z,EAAAvmD,WAAA,aAAAC,KAAA,KAAYuH,EAAQ+iI,GAEpB1pI,KAAK6lD,KAAOl/C,EAAOk/C,KACnB7lD,KAAK4lD,MAAQj/C,EAAOi/C,MACpB5lD,KAAK+lD,IAAMp/C,EAAOo/C,IAClB/lD,KAAKgmD,OAASr/C,EAAOq/C,OACrBhmD,KAAKqxC,KAAO1qC,EAAO0qC,KACnBrxC,KAAKuxC,IAAM5qC,EAAO4qC,IAElBvxC,KAAKg/C,KAAOr4C,EAAOq4C,KACnBh/C,KAAKo6C,KAAuB,OAAhBzzC,EAAOyzC,KAAgB,KAAO96C,OAAO4rD,OAAQ,CAAC,EAAGvkD,EAAOyzC,MAE7Dp6C,IAER,GAAC,CAAAiG,IAAA,gBAAApG,MAED,SAAe08I,EAAWC,EAAYxtI,EAAGC,EAAGu7B,EAAOC,GAE/B,OAAdzqC,KAAKo6C,OAETp6C,KAAKo6C,KAAO,CACXwC,SAAS,EACT2/F,UAAW,EACXC,WAAY,EACZzkF,QAAS,EACTE,QAAS,EACTztB,MAAO,EACPC,OAAQ,IAKVzqC,KAAKo6C,KAAKwC,SAAU,EACpB58C,KAAKo6C,KAAKmiG,UAAYA,EACtBv8I,KAAKo6C,KAAKoiG,WAAaA,EACvBx8I,KAAKo6C,KAAK2d,QAAU/oD,EACpBhP,KAAKo6C,KAAK6d,QAAUhpD,EACpBjP,KAAKo6C,KAAK5P,MAAQA,EAClBxqC,KAAKo6C,KAAK3P,OAASA,EAEnBzqC,KAAKqgD,wBAEN,GAAC,CAAAp6C,IAAA,kBAAApG,MAED,WAEoB,OAAdG,KAAKo6C,OAETp6C,KAAKo6C,KAAKwC,SAAU,GAIrB58C,KAAKqgD,wBAEN,GAAC,CAAAp6C,IAAA,yBAAApG,MAED,WAEC,IAAMonD,GAAOjnD,KAAK4lD,MAAQ5lD,KAAK6lD,OAAW,EAAI7lD,KAAKg/C,MAC7CkI,GAAOlnD,KAAK+lD,IAAM/lD,KAAKgmD,SAAa,EAAIhmD,KAAKg/C,MAC7C8yE,GAAO9xH,KAAK4lD,MAAQ5lD,KAAK6lD,MAAS,EAClCksE,GAAO/xH,KAAK+lD,IAAM/lD,KAAKgmD,QAAW,EAEpCH,EAAOisE,EAAK7qE,EACZrB,EAAQksE,EAAK7qE,EACblB,EAAMgsE,EAAK7qE,EACXlB,EAAS+rE,EAAK7qE,EAElB,GAAmB,OAAdlnD,KAAKo6C,MAAiBp6C,KAAKo6C,KAAKwC,QAAU,CAE9C,IAAMg8G,GAAW54J,KAAK4lD,MAAQ5lD,KAAK6lD,MAAS7lD,KAAKo6C,KAAKmiG,UAAYv8I,KAAKg/C,KACjE65G,GAAW74J,KAAK+lD,IAAM/lD,KAAKgmD,QAAWhmD,KAAKo6C,KAAKoiG,WAAax8I,KAAKg/C,KAGxE4G,GADAC,GAAQ+yG,EAAS54J,KAAKo6C,KAAK2d,SACZ6gG,EAAS54J,KAAKo6C,KAAK5P,MAElCwb,GADAD,GAAO8yG,EAAS74J,KAAKo6C,KAAK6d,SACX4gG,EAAS74J,KAAKo6C,KAAK3P,MAEnC,CAEAzqC,KAAKy7C,iBAAiBq9G,iBAAkBjzG,EAAMD,EAAOG,EAAKC,EAAQhmD,KAAKqxC,KAAMrxC,KAAKuxC,KAElFvxC,KAAKo9H,wBAAwBn5H,KAAMjE,KAAKy7C,kBAAmBkF,QAE5D,GAAC,CAAA16C,IAAA,SAAApG,MAED,SAAQ+1H,GAEP,IAAMjpH,GAAIo/B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA0Z,EAAAvmD,WAAA,eAAAC,KAAA,KAAiBw2H,GAY3B,OAVAjpH,EAAKqxB,OAAOghB,KAAOh/C,KAAKg/C,KACxBryC,EAAKqxB,OAAO6nB,KAAO7lD,KAAK6lD,KACxBl5C,EAAKqxB,OAAO4nB,MAAQ5lD,KAAK4lD,MACzBj5C,EAAKqxB,OAAO+nB,IAAM/lD,KAAK+lD,IACvBp5C,EAAKqxB,OAAOgoB,OAAShmD,KAAKgmD,OAC1Br5C,EAAKqxB,OAAOqT,KAAOrxC,KAAKqxC,KACxB1kC,EAAKqxB,OAAOuT,IAAMvxC,KAAKuxC,IAEJ,OAAdvxC,KAAKo6C,OAAgBztC,EAAKqxB,OAAOoc,KAAO96C,OAAO4rD,OAAQ,CAAC,EAAGlrD,KAAKo6C,OAE9DztC,CAER,KAAC+4C,CAAA,CAjIsB,CAASpQ,IA2I3ByjH,GAAkB,CAAE,KAAO,KAAO,IAAM,KAAO,KAAO,MAItDC,GAAc,GAEdC,GAA4B,IAAIvzG,GAChCwzG,GAA4B,IAAIp3D,GAClCq3D,GAAa,KAGXC,IAAQ,EAAIhlJ,KAAKC,KAAM,IAAQ,EAC/BglJ,GAAU,EAAID,GAIdE,GAAkB,CACT,IAAIh9H,GAAS,EAAG,EAAG,GACnB,IAAIA,IAAW,EAAG,EAAG,GACrB,IAAIA,GAAS,EAAG,GAAK,GACrB,IAAIA,IAAW,EAAG,GAAK,GACvB,IAAIA,GAAS,EAAG88H,GAAKC,IACrB,IAAI/8H,GAAS,EAAG88H,IAAOC,IACvB,IAAI/8H,GAAS+8H,GAAS,EAAGD,IACzB,IAAI98H,IAAW+8H,GAAS,EAAGD,IAC3B,IAAI98H,GAAS88H,GAAKC,GAAS,GAC3B,IAAI/8H,IAAW88H,GAAKC,GAAS,IAiBtCE,GAAc,WAEnB,SAAAA,EAAaxjH,IAAWrtC,EAAAA,EAAAA,GAAA,KAAA6wJ,GAEvBv5J,KAAKw5J,UAAYzjH,EACjB/1C,KAAKy5J,sBAAwB,KAE7Bz5J,KAAKotC,QAAU,EACfptC,KAAKutC,UAAY,EACjBvtC,KAAK05J,WAAa,GAClB15J,KAAK25J,UAAY,GACjB35J,KAAK45J,QAAU,GAEf55J,KAAK65J,cAAgB,KACrB75J,KAAK85J,iBAAmB,KACxB95J,KAAK+5J,kBAAoB,KAEzB/5J,KAAKg6J,iBAAkBh6J,KAAK65J,cAE7B,CA+cC,OA7cDlvJ,EAAAA,EAAAA,GAAA4uJ,EAAA,EAAAtzJ,IAAA,YAAApG,MAOA,SAAWovC,GAA0C,IAAnCgrH,EAAKr5J,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGywC,EAAIzwC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAK2wC,EAAG3wC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAE9Cu4J,GAAan5J,KAAKw5J,UAAU/b,kBAE5Bz9I,KAAKk6J,SAAU,KAEf,IAAMC,EAAqBn6J,KAAKo6J,mBAchC,OAbAD,EAAmB5mH,aAAc,EAEjCvzC,KAAKq6J,eAAgBprH,EAAOoC,EAAME,EAAK4oH,GAElCF,EAAQ,GAEZj6J,KAAKs6J,MAAOH,EAAoB,EAAG,EAAGF,GAIvCj6J,KAAKu6J,YAAaJ,GAClBn6J,KAAKw6J,SAAUL,GAERA,CAER,GAEA,CAAAl0J,IAAA,sBAAApG,MAKA,SAAqB46J,GAAuC,IAAtB1d,EAAYn8I,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,KAEpD,OAAOZ,KAAK06J,aAAcD,EAAiB1d,EAE5C,GAEA,CAAA92I,IAAA,cAAApG,MAKA,SAAaq4J,GAA+B,IAAtBnb,EAAYn8I,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,KAEpC,OAAOZ,KAAK06J,aAAcxC,EAASnb,EAEpC,GAEA,CAAA92I,IAAA,uBAAApG,MAIA,WAEgC,OAA1BG,KAAK85J,mBAET95J,KAAK85J,iBAAmBa,KACxB36J,KAAKg6J,iBAAkBh6J,KAAK85J,kBAI9B,GAEA,CAAA7zJ,IAAA,+BAAApG,MAIA,WAEiC,OAA3BG,KAAK+5J,oBAET/5J,KAAK+5J,kBAAoBa,KACzB56J,KAAKg6J,iBAAkBh6J,KAAK+5J,mBAI9B,GAEA,CAAA9zJ,IAAA,UAAApG,MAKA,WAECG,KAAK66J,WAE0B,OAA1B76J,KAAK85J,kBAA4B95J,KAAK85J,iBAAiBn3G,UAC5B,OAA3B3iD,KAAK+5J,mBAA6B/5J,KAAK+5J,kBAAkBp3G,SAE/D,GAEA,CAAA18C,IAAA,WAAApG,MAEA,SAAUqtC,GAETltC,KAAKotC,QAAUh5B,KAAKi5B,MAAOj5B,KAAKk5B,KAAMJ,IACtCltC,KAAKutC,UAAYn5B,KAAK0F,IAAK,EAAG9Z,KAAKotC,QAEpC,GAAC,CAAAnnC,IAAA,WAAApG,MAED,WAE6B,OAAvBG,KAAK65J,eAAyB75J,KAAK65J,cAAcl3G,UAElB,OAA/B3iD,KAAKy5J,uBAAiCz5J,KAAKy5J,sBAAsB92G,UAEtE,IAAM,IAAI/+C,EAAI,EAAGA,EAAI5D,KAAK05J,WAAWn3J,OAAQqB,IAE5C5D,KAAK05J,WAAY91J,GAAI++C,SAIvB,GAAC,CAAA18C,IAAA,WAAApG,MAED,SAAUi7J,GAET96J,KAAKw5J,UAAUpjH,gBAAiB+iH,IAChC2B,EAAa1iC,aAAc,EAC3B2iC,GAAcD,EAAc,EAAG,EAAGA,EAAatwH,MAAOswH,EAAarwH,OAEpE,GAAC,CAAAxkC,IAAA,eAAApG,MAED,SAAcosC,EAAS8wG,GAEjB9wG,EAAQ0E,UAAYC,IAAyB3E,EAAQ0E,UAAYy2E,GAErEpnH,KAAKk6J,SAAmC,IAAzBjuH,EAAQkB,MAAM5qC,OAAe,GAAO0pC,EAAQkB,MAAO,GAAI3C,OAASyB,EAAQkB,MAAO,GAAIA,MAAM3C,OAIxGxqC,KAAKk6J,SAAUjuH,EAAQkB,MAAM3C,MAAQ,GAItC2uH,GAAan5J,KAAKw5J,UAAU/b,kBAE5B,IAAM0c,EAAqBpd,GAAgB/8I,KAAKo6J,mBAKhD,OAJAp6J,KAAKg7J,iBAAkB/uH,EAASkuH,GAChCn6J,KAAKu6J,YAAaJ,GAClBn6J,KAAKw6J,SAAUL,GAERA,CAER,GAAC,CAAAl0J,IAAA,mBAAApG,MAED,WAEC,IAAM2qC,EAAQ,EAAIp2B,KAAKuC,IAAK3W,KAAKutC,UAAW,KACtC9C,EAAS,EAAIzqC,KAAKutC,UAElBi5B,EAAS,CACdj6B,UAAWD,GACXD,UAAWC,GACXE,iBAAiB,EACjB3qC,KAAMymC,GACN+B,OAAQg+E,GACRj8E,SAAU2E,GACVwC,aAAa,GAGR4mH,EAAqBc,GAAqBzwH,EAAOC,EAAQ+7B,GAE/D,GAAoC,OAA/BxmE,KAAKy5J,uBAAkCz5J,KAAKy5J,sBAAsBjvH,QAAUA,EAAQ,CAEpD,OAA/BxqC,KAAKy5J,uBAETz5J,KAAK66J,WAIN76J,KAAKy5J,sBAAwBwB,GAAqBzwH,EAAOC,EAAQ+7B,GAEjE,IAAQp5B,EAAYptC,KAAZotC,QAAiB8tH,EAiS5B,SAAwBC,GAUvB,IARA,IAAMC,EAAY,GACZC,EAAW,GACXC,EAAS,GAEXC,EAAMJ,EAEJK,EAAYL,EAjiBH,EAiiBsB,EAAIpC,GAAgBx2J,OAE/CqB,EAAI,EAAGA,EAAI43J,EAAW53J,IAAO,CAEtC,IAAM63J,EAAUrnJ,KAAK0F,IAAK,EAAGyhJ,GAC7BF,EAAS/4J,KAAMm5J,GACf,IAAIxB,EAAQ,EAAMwB,EAEb73J,EAAIu3J,EAziBK,EA2iBblB,EAAQlB,GAAiBn1J,EAAIu3J,EA3iBhB,EA2iBmC,GAE/B,IAANv3J,IAEXq2J,EAAQ,GAITqB,EAAOh5J,KAAM23J,GAiBb,IAfA,IAAM9mH,EAAY,GAAQsoH,EAAU,GAC9B/kJ,GAAQy8B,EACRx8B,EAAM,EAAIw8B,EACVu3F,EAAM,CAAEh0H,EAAKA,EAAKC,EAAKD,EAAKC,EAAKA,EAAKD,EAAKA,EAAKC,EAAKA,EAAKD,EAAKC,GAE/D+kJ,EAAY,EACZ38I,EAAW,EACX48I,EAAe,EACfC,EAAS,EACTC,EAAgB,EAEhBp2J,EAAW,IAAIgF,aAAckxJ,EAAe58I,EAAW28I,GACvD1kC,EAAK,IAAIvsH,aAAcmxJ,EAAS78I,EAAW28I,GAC3CjjB,EAAY,IAAIhuI,aAAcoxJ,EAAgB98I,EAAW28I,GAErDz7I,EAAO,EAAGA,EAAOy7I,EAAWz7I,IAAU,CAE/C,IAAMjR,EAAMiR,EAAO,EAAM,EAAI,EAAI,EAC3BhR,EAAIgR,EAAO,EAAI,GAAM,EACrB67I,EAAc,CACnB9sJ,EAAGC,EAAG,EACND,EAAI,EAAI,EAAGC,EAAG,EACdD,EAAI,EAAI,EAAGC,EAAI,EAAG,EAClBD,EAAGC,EAAG,EACND,EAAI,EAAI,EAAGC,EAAI,EAAG,EAClBD,EAAGC,EAAI,EAAG,GAEXxJ,EAAShB,IAAKq3J,EAAaH,EAAe58I,EAAWkB,GACrD+2G,EAAGvyH,IAAKimI,EAAKkxB,EAAS78I,EAAWkB,GACjC,IAAMggB,EAAO,CAAEhgB,EAAMA,EAAMA,EAAMA,EAAMA,EAAMA,GAC7Cw4H,EAAUh0I,IAAKw7B,EAAM47H,EAAgB98I,EAAWkB,EAEjD,CAEA,IAAMs/H,EAAS,IAAI7pG,GACnB6pG,EAAO5pG,aAAc,WAAY,IAAIC,GAAiBnwC,EAAUk2J,IAChEpc,EAAO5pG,aAAc,KAAM,IAAIC,GAAiBohF,EAAI4kC,IACpDrc,EAAO5pG,aAAc,YAAa,IAAIC,GAAiB6iG,EAAWojB,IAClET,EAAU94J,KAAMi9I,GAEXgc,EA7lBS,GA+lBbA,GAIF,CAEA,MAAO,CAAEH,UAAAA,EAAWC,SAAAA,EAAUC,OAAAA,EAE/B,CA9WsFS,CAAe3uH,GAApFptC,KAAK25J,UAASuB,EAAxBG,SAAqCr7J,KAAK05J,WAAUwB,EAA1BE,UAAoCp7J,KAAK45J,QAAOsB,EAApBI,OAE1Dt7J,KAAK65J,cA+XR,SAAyBsB,EAAQ3wH,EAAOC,GAEvC,IAAMmlE,EAAU,IAAInlG,aAAcuuJ,IAC5BgD,EAAW,IAAI1/H,GAAS,EAAG,EAAG,GAC9B2/H,EAAiB,IAAIluH,GAAgB,CAE1C5tC,KAAM,wBAENo1C,QAAS,CACR,EAAKyjH,GACL,mBAAsB,EAAMxuH,EAC5B,oBAAuB,EAAMC,EAC7B,eAAkB,GAAFhrC,OAAK07J,EAAM,OAG5BvtH,SAAU,CACT,OAAU,CAAE/tC,MAAO,MACnB,QAAW,CAAEA,MAAO,GACpB,QAAW,CAAEA,MAAO+vG,GACpB,YAAe,CAAE/vG,OAAO,GACxB,OAAU,CAAEA,MAAO,GACnB,OAAU,CAAEA,MAAO,GACnB,SAAY,CAAEA,MAAOm8J,IAGtBhuH,aA4JM,yoCA1JNR,eAA0B,miDA8D1BwG,SAAUC,EACVE,WAAW,EACXD,YAAY,IAIb,OAAO+nH,CAER,CAhewBC,CAAgB9uH,EAAS5C,EAAOC,EAEtD,CAEA,OAAO0vH,CAER,GAAC,CAAAl0J,IAAA,mBAAApG,MAED,SAAkBqd,GAEjB,IAAMi/I,EAAU,IAAIhuH,GAAMnuC,KAAK05J,WAAY,GAAKx8I,GAChDld,KAAKw5J,UAAU4C,QAASD,EAASlD,GAElC,GAAC,CAAAhzJ,IAAA,iBAAApG,MAED,SAAgBovC,EAAOoC,EAAME,EAAK4oH,GAEjC,IAEMkC,EAAa,IAAI5hH,GAFX,GACG,EACwCpJ,EAAME,GACvD+qH,EAAS,CAAE,GAAK,EAAG,EAAG,EAAG,EAAG,GAC5BC,EAAc,CAAE,EAAG,EAAG,GAAK,GAAK,GAAK,GACrCxmH,EAAW/1C,KAAKw5J,UAEhBgD,EAAoBzmH,EAASkH,UAC7B+pB,EAAcjxB,EAASixB,YAC7BjxB,EAAS65G,cAAesJ,IAExBnjH,EAASixB,YAAc6/C,GACvB9wE,EAASkH,WAAY,EAErB,IAAMw/G,EAAqB,IAAI35D,GAAmB,CACjD3iG,KAAM,mBACN8tC,KAAM22E,EACN1wE,YAAY,EACZC,WAAW,IAGNuoH,EAAgB,IAAIvuH,GAAM,IAAI4qG,GAAe0jB,GAE/CE,GAAgB,EACdrtH,EAAaL,EAAMK,WAEpBA,EAECA,EAAW2kB,UAEfwoG,EAAmB56D,MAAM59F,KAAMqrC,GAC/BL,EAAMK,WAAa,KACnBqtH,GAAgB,IAMjBF,EAAmB56D,MAAM59F,KAAMi1J,IAC/ByD,GAAgB,GAIjB,IAAM,IAAI/4J,EAAI,EAAGA,EAAI,EAAGA,IAAO,CAE9B,IAAMg5J,EAAMh5J,EAAI,EAEH,IAARg5J,GAEJP,EAAW/gH,GAAG72C,IAAK,EAAG63J,EAAQ14J,GAAK,GACnCy4J,EAAW9gH,OAAQghH,EAAa34J,GAAK,EAAG,IAErB,IAARg5J,GAEXP,EAAW/gH,GAAG72C,IAAK,EAAG,EAAG63J,EAAQ14J,IACjCy4J,EAAW9gH,OAAQ,EAAGghH,EAAa34J,GAAK,KAIxCy4J,EAAW/gH,GAAG72C,IAAK,EAAG63J,EAAQ14J,GAAK,GACnCy4J,EAAW9gH,OAAQ,EAAG,EAAGghH,EAAa34J,KAIvC,IAAMmG,EAAO/J,KAAKutC,UAElBwtH,GAAcZ,EAAoByC,EAAM7yJ,EAAMnG,EAAI,EAAImG,EAAO,EAAGA,EAAMA,GAEtEgsC,EAASK,gBAAiB+jH,GAErBwC,GAEJ5mH,EAASM,OAAQqmH,EAAeL,GAIjCtmH,EAASM,OAAQpH,EAAOotH,EAEzB,CAEAK,EAAc7uH,SAAS8U,UACvB+5G,EAAcx/I,SAASylC,UAEvB5M,EAASixB,YAAcA,EACvBjxB,EAASkH,UAAYu/G,EACrBvtH,EAAMK,WAAaA,CAEpB,GAAC,CAAArpC,IAAA,mBAAApG,MAED,SAAkBosC,EAASkuH,GAE1B,IAAMpkH,EAAW/1C,KAAKw5J,UAEhBvsH,EAAkBhB,EAAQ0E,UAAYC,IAAyB3E,EAAQ0E,UAAYy2E,GAEpFn6E,GAE2B,OAA1BjtC,KAAK85J,mBAET95J,KAAK85J,iBAAmBa,MAIzB36J,KAAK85J,iBAAiBlsH,SAAS09G,WAAWzrJ,OAA4C,IAAlCosC,EAAQwqF,uBAAsC,EAAI,GAItE,OAA3Bz2H,KAAK+5J,oBAET/5J,KAAK+5J,kBAAoBa,MAM3B,IAAM19I,EAAW+vB,EAAgBjtC,KAAK85J,iBAAmB95J,KAAK+5J,kBACxD/jI,EAAO,IAAImY,GAAMnuC,KAAK05J,WAAY,GAAKx8I,GAE5BA,EAAS0wB,SAER,OAAG/tC,MAAQosC,EAE7B,IAAMliC,EAAO/J,KAAKutC,UAElBwtH,GAAcZ,EAAoB,EAAG,EAAG,EAAIpwJ,EAAM,EAAIA,GAEtDgsC,EAASK,gBAAiB+jH,GAC1BpkH,EAASM,OAAQrgB,EAAMijI,GAExB,GAAC,CAAAhzJ,IAAA,cAAApG,MAED,SAAas6J,GAEZ,IAAMpkH,EAAW/1C,KAAKw5J,UAChBv8G,EAAYlH,EAASkH,UAC3BlH,EAASkH,WAAY,EAErB,IAAM,IAAIr5C,EAAI,EAAGA,EAAI5D,KAAK05J,WAAWn3J,OAAQqB,IAAO,CAEnD,IAAMq2J,EAAQ7lJ,KAAKC,KAAMrU,KAAK45J,QAASh2J,GAAM5D,KAAK45J,QAASh2J,GAAM5D,KAAK45J,QAASh2J,EAAI,GAAM5D,KAAK45J,QAASh2J,EAAI,IAErGo4J,EAAW1C,IAAmB11J,EAAI,GAAM01J,GAAgB/2J,QAE9DvC,KAAKs6J,MAAOH,EAAoBv2J,EAAI,EAAGA,EAAGq2J,EAAO+B,EAElD,CAEAjmH,EAASkH,UAAYA,CAEtB,GAEA,CAAAh3C,IAAA,QAAApG,MAOA,SAAOs6J,EAAoB0C,EAAOC,EAAQ7C,EAAO+B,GAEhD,IAAMe,EAAuB/8J,KAAKy5J,sBAElCz5J,KAAKg9J,UACJ7C,EACA4C,EACAF,EACAC,EACA7C,EACA,cACA+B,GAEDh8J,KAAKg9J,UACJD,EACA5C,EACA2C,EACAA,EACA7C,EACA,eACA+B,EAEF,GAAC,CAAA/1J,IAAA,YAAApG,MAED,SAAWo9J,EAAUC,EAAWL,EAAOC,EAAQK,EAAcllJ,EAAW+jJ,GAEvE,IAAMjmH,EAAW/1C,KAAKw5J,UAChB4D,EAAep9J,KAAK65J,cAEP,gBAAd5hJ,GAA6C,iBAAdA,GAEnCpV,QAAQkC,MACP,8DAKF,IAEMs4J,EAAW,IAAIlvH,GAAMnuC,KAAK05J,WAAYoD,GAAUM,GAChDE,EAAeF,EAAaxvH,SAE5B2vH,EAASv9J,KAAK25J,UAAWkD,GAAU,EACnCW,EAAkB/7G,SAAU07G,GAAiB/oJ,KAAKyF,IAAO,EAAI0jJ,GAAW,EAAInpJ,KAAKyF,GAAK,GACtF4jJ,EAAcN,EAAeK,EAC7BnlC,EAAU52E,SAAU07G,GAAiB,EAAI/oJ,KAAKi5B,MARxB,EAQqDowH,GAAgBzE,GAE5F3gC,EAAU2gC,IAEdn2J,QAAQC,KAAK,iBAADrD,OACX09J,EAAY,kDAAA19J,OACZ44H,EAAO,wCAAA54H,OAAuCu5J,KAOhD,IAHA,IAAMppD,EAAU,GACZ8tD,EAAM,EAEA95J,EAAI,EAAGA,EAAIo1J,KAAgBp1J,EAAI,CAExC,IAAMoL,EAAIpL,EAAI65J,EACRE,EAASvpJ,KAAKo6G,KAAOx/G,EAAIA,EAAI,GACnC4gG,EAAQttG,KAAMq7J,GAEH,IAAN/5J,EAEJ85J,GAAOC,EAEI/5J,EAAIy0H,IAEfqlC,GAAO,EAAIC,EAIb,CAEA,IAAM,IAAI/5J,EAAI,EAAGA,EAAIgsG,EAAQrtG,OAAQqB,IAEpCgsG,EAAShsG,GAAMgsG,EAAShsG,GAAM85J,EAI/BJ,EAAsB,OAAGz9J,MAAQo9J,EAAShxH,QAC1CqxH,EAAuB,QAAGz9J,MAAQw4H,EAClCilC,EAAuB,QAAGz9J,MAAQ+vG,EAClC0tD,EAA2B,YAAGz9J,MAAsB,gBAAdoY,EAEjC+jJ,IAEJsB,EAAwB,SAAGz9J,MAAQm8J,GAIpC,IAAQ5uH,EAAYptC,KAAZotC,QACRkwH,EAAsB,OAAGz9J,MAAQ29J,EACjCF,EAAsB,OAAGz9J,MAAQutC,EAAUyvH,EAE3C,IAAMe,EAAa59J,KAAK25J,UAAWmD,GAInC/B,GAAcmC,EAHJ,EAAIU,GAAed,EAAS1vH,EA5gBxB,EA4gB4C0vH,EAAS1vH,EA5gBrD,EA4gByE,GAC7E,GAAMptC,KAAKutC,UAAYqwH,GAEF,EAAIA,EAAY,EAAIA,GACnD7nH,EAASK,gBAAiB8mH,GAC1BnnH,EAASM,OAAQgnH,EAAUpE,GAE5B,KAACM,CAAA,CAlekB,GAwjBpB,SAAS0B,GAAqBzwH,EAAOC,EAAQ+7B,GAE5C,IAAM2zF,EAAqB,IAAInlH,GAAmBxK,EAAOC,EAAQ+7B,GAIjE,OAHA2zF,EAAmBluH,QAAQ0E,QAAU22E,GACrC6yC,EAAmBluH,QAAQ9rC,KAAO,eAClCg6J,EAAmB/hC,aAAc,EAC1B+hC,CAER,CAEA,SAASY,GAAch8J,EAAQiQ,EAAGC,EAAGu7B,EAAOC,GAE3C1rC,EAAOk8D,SAASx2D,IAAKuK,EAAGC,EAAGu7B,EAAOC,GAClC1rC,EAAOo5H,QAAQ1zH,IAAKuK,EAAGC,EAAGu7B,EAAOC,EAElC,CAqGA,SAASmwH,KAER,OAAO,IAAI7sH,GAAgB,CAE1B5tC,KAAM,0BAENytC,SAAU,CACT,OAAU,CAAE/tC,MAAO,OAGpBmuC,aAwEM,yoCAtENR,eAA0B,yYAqB1BwG,SAAUC,EACVE,WAAW,EACXD,YAAY,GAId,CAEA,SAASymH,KAER,OAAO,IAAI5sH,GAAgB,CAE1B5tC,KAAM,kBAENytC,SAAU,CACT,OAAU,CAAE/tC,MAAO,MACnB,WAAc,CAAEA,OAAS,IAG1BmuC,aA8BM,yoCA5BNR,eAA0B,0UAkB1BwG,SAAUC,EACVE,WAAW,EACXD,YAAY,GAId,CA+DA,SAAS2pH,GAAiB9nH,GAEzB,IAAI+nH,EAAa,IAAIpzE,QAEjBqzE,EAAiB,KAqFrB,SAAS9F,EAAkBl/I,GAE1B,IAAMkzB,EAAUlzB,EAAMha,OAEtBktC,EAAQ5nC,oBAAqB,UAAW4zJ,GAExC,IAAM+F,EAAYF,EAAWt5J,IAAKynC,QAEf9qC,IAAd68J,IAEJF,EAAWnyG,OAAQ1f,GACnB+xH,EAAUr7G,UAIZ,CAeA,MAAO,CACNn+C,IAlHD,SAAcynC,GAEb,GAAKA,GAAWA,EAAQmqF,UAAY,CAEnC,IAAMzlF,EAAU1E,EAAQ0E,QAElBstH,EAAkBttH,IAAYE,IAAoCF,IAAY02E,GAC9Er6E,EAAc2D,IAAYC,IAAyBD,IAAYy2E,GAIrE,GAAK62C,GAAiBjxH,EAAY,CAEjC,GAAKf,EAAQwqF,wBAAsD,IAA7BxqF,EAAQyqF,iBAA4B,CAEzEzqF,EAAQyqF,kBAAmB,EAE3B,IAAIqmB,EAAe+gB,EAAWt5J,IAAKynC,GAOnC,OALwB,OAAnB8xH,IAA0BA,EAAiB,IAAIxE,GAAgBxjH,IAEpEgnG,EAAekhB,EAAgBF,EAAeG,oBAAqBjyH,EAAS8wG,GAAiBghB,EAAeI,YAAalyH,EAAS8wG,GAClI+gB,EAAWr5J,IAAKwnC,EAAS8wG,GAElBA,EAAa9wG,OAErB,CAEC,GAAK6xH,EAAWtnG,IAAKvqB,GAEpB,OAAO6xH,EAAWt5J,IAAKynC,GAAUA,QAIjC,IAAMkB,EAAQlB,EAAQkB,MAEtB,GAAO8wH,GAAiB9wH,GAASA,EAAM1C,OAAS,GAASuC,GAAaG,GA+B3E,SAAgCA,GAK/B,IAHA,IAAIvqC,EAAQ,EACNL,EAAS,EAELqB,EAAI,EAAGA,EAAIrB,EAAQqB,SAERzC,IAAfgsC,EAAOvpC,IAAoBhB,IAIjC,OAAOA,IAAUL,CAGlB,CA7CoF67J,CAAuBjxH,GAAY,CAEzF,OAAnB4wH,IAA0BA,EAAiB,IAAIxE,GAAgBxjH,IAEpE,IAAMgnG,EAAekhB,EAAgBF,EAAeG,oBAAqBjyH,GAAY8xH,EAAeI,YAAalyH,GAKjH,OAJA6xH,EAAWr5J,IAAKwnC,EAAS8wG,GAEzB9wG,EAAQ/nC,iBAAkB,UAAW+zJ,GAE9Blb,EAAa9wG,OAErB,CAIC,OAAO,IAQX,CAED,CAEA,OAAOA,CAER,EAkDC0W,QAfD,WAECm7G,EAAa,IAAIpzE,QAEO,OAAnBqzE,IAEJA,EAAep7G,UACfo7G,EAAiB,KAInB,EAOD,CAEA,SAASM,GAAiBvsH,GAEzB,IAAM1B,EAAa,CAAC,EAEpB,SAASkuH,EAAcn+J,GAEtB,QAA4BgB,IAAvBivC,EAAYjwC,GAEhB,OAAOiwC,EAAYjwC,GAIpB,IAAIwjG,EAEJ,OAASxjG,GAER,IAAK,sBACJwjG,EAAY7xD,EAAGwsH,aAAc,wBAA2BxsH,EAAGwsH,aAAc,4BAA+BxsH,EAAGwsH,aAAc,8BACzH,MAED,IAAK,iCACJ36D,EAAY7xD,EAAGwsH,aAAc,mCAAsCxsH,EAAGwsH,aAAc,uCAA0CxsH,EAAGwsH,aAAc,yCAC/I,MAED,IAAK,gCACJ36D,EAAY7xD,EAAGwsH,aAAc,kCAAqCxsH,EAAGwsH,aAAc,sCAAyCxsH,EAAGwsH,aAAc,wCAC7I,MAED,IAAK,iCACJ36D,EAAY7xD,EAAGwsH,aAAc,mCAAsCxsH,EAAGwsH,aAAc,yCACpF,MAED,QACC36D,EAAY7xD,EAAGwsH,aAAcn+J,GAM/B,OAFAiwC,EAAYjwC,GAASwjG,EAEdA,CAER,CAEA,MAAO,CAENntC,IAAK,SAAWr2D,GAEf,OAAgC,OAAzBm+J,EAAcn+J,EAEtB,EAEAJ,KAAM,SAAWohJ,GAEXA,EAAaC,SAEjBkd,EAAc,2BAIdA,EAAc,uBACdA,EAAc,qBACdA,EAAc,0BACdA,EAAc,iCACdA,EAAc,4BACdA,EAAc,0BACdA,EAAc,2BACdA,EAAc,2BAIfA,EAAc,4BACdA,EAAc,+BACdA,EAAc,uCAEf,EAEA95J,IAAK,SAAWrE,GAEf,IAAMwjG,EAAY26D,EAAcn+J,GAQhC,OANmB,OAAdwjG,GAEJ9gG,QAAQC,KAAM,wBAA0B3C,EAAO,6BAIzCwjG,CAER,EAIF,CAEA,SAAS46D,GAAiBzsH,EAAI82D,EAAY8rD,EAAM1D,GAE/C,IAAMt2C,EAAa,CAAC,EACd8jD,EAAsB,IAAI9zE,QAEhC,SAAS+zE,EAAmB1lJ,GAE3B,IAAM80B,EAAW90B,EAAMha,OAQvB,IAAM,IAAMoB,KANY,OAAnB0tC,EAASjoC,OAEbgjG,EAAWhoE,OAAQiN,EAASjoC,OAITioC,EAAS+6D,WAE5BA,EAAWhoE,OAAQiN,EAAS+6D,WAAYzoG,IAIzC0tC,EAASxpC,oBAAqB,UAAWo6J,UAElC/jD,EAAY7sE,EAAS19B,IAE5B,IAAM86F,EAAYuzD,EAAoBh6J,IAAKqpC,GAEtCo9D,IAEJrC,EAAWhoE,OAAQqqE,GACnBuzD,EAAoB7yG,OAAQ9d,IAI7BmjH,EAAcuD,wBAAyB1mH,IAEK,IAAvCA,EAAS4lH,kCAEN5lH,EAASimH,kBAMjBY,EAAKgK,OAAOhkD,YAEb,CA8CA,SAASikD,EAA0B9wH,GAElC,IAAM9W,EAAU,GAEV6nI,EAAgB/wH,EAASjoC,MACzBi5J,EAAmBhxH,EAAS+6D,WAAWnjG,SACzC4iE,EAAU,EAEd,GAAuB,OAAlBu2F,EAAyB,CAE7B,IAAMx/F,EAAQw/F,EAAcx/F,MAC5BiJ,EAAUu2F,EAAcv2F,QAExB,IAAM,IAAIzkE,EAAI,EAAGwS,EAAIgpD,EAAM78D,OAAQqB,EAAIwS,EAAGxS,GAAK,EAAI,CAElD,IAAMuT,EAAIioD,EAAOx7D,EAAI,GACfwO,EAAIgtD,EAAOx7D,EAAI,GACfwT,EAAIgoD,EAAOx7D,EAAI,GAErBmzB,EAAQz0B,KAAM6U,EAAG/E,EAAGA,EAAGgF,EAAGA,EAAGD,EAE9B,CAED,KAAO,CAEN,IAAMioD,EAAQy/F,EAAiBz/F,MAC/BiJ,EAAUw2F,EAAiBx2F,QAE3B,IAAM,IAAIzkE,EAAI,EAAGwS,EAAMgpD,EAAM78D,OAAS,EAAM,EAAGqB,EAAIwS,EAAGxS,GAAK,EAAI,CAE9D,IAAMuT,EAAIvT,EAAI,EACRwO,EAAIxO,EAAI,EACRwT,EAAIxT,EAAI,EAEdmzB,EAAQz0B,KAAM6U,EAAG/E,EAAGA,EAAGgF,EAAGA,EAAGD,EAE9B,CAED,CAEA,IAAM8zF,EAAY,IAAM+mB,GAAkBj7F,GAAYw7G,GAAwBN,IAAyBl7G,EAAS,GAChHk0E,EAAU5iC,QAAUA,EAMpB,IAAMy2F,EAAoBN,EAAoBh6J,IAAKqpC,GAE9CixH,GAAoBl2D,EAAWhoE,OAAQk+H,GAI5CN,EAAoB/5J,IAAKopC,EAAUo9D,EAEpC,CAgCA,MAAO,CAENzmG,IArID,SAAcw5B,EAAQ6P,GAErB,OAAmC,IAA9B6sE,EAAY7sE,EAAS19B,MAE1B09B,EAAS3pC,iBAAkB,UAAWu6J,GAEtC/jD,EAAY7sE,EAAS19B,KAAO,EAE5BukJ,EAAKgK,OAAOhkD,cANqC7sE,CAUlD,EA0HCwE,OAxHD,SAAiBxE,GAEhB,IAAMolH,EAAqBplH,EAAS+6D,WAIpC,IAAM,IAAMzoG,KAAQ8yJ,EAEnBrqD,EAAWv2D,OAAQ4gH,EAAoB9yJ,GAAQ,OAMhD,IAAM86G,EAAkBptE,EAASotE,gBAEjC,IAAM,IAAM96G,KAAQ86G,EAInB,IAFA,IAAM77C,EAAQ67C,EAAiB96G,GAErByD,EAAI,EAAGwS,EAAIgpD,EAAM78D,OAAQqB,EAAIwS,EAAGxS,IAEzCglG,EAAWv2D,OAAQ+sB,EAAOx7D,GAAK,MAMlC,EA8FCm7J,sBAnCD,SAAgClxH,GAE/B,IAAMmxH,EAAmBR,EAAoBh6J,IAAKqpC,GAElD,GAAKmxH,EAAmB,CAEvB,IAAMJ,EAAgB/wH,EAASjoC,MAER,OAAlBg5J,GAICI,EAAiB32F,QAAUu2F,EAAcv2F,SAE7Cs2F,EAA0B9wH,EAM7B,MAEC8wH,EAA0B9wH,GAI3B,OAAO2wH,EAAoBh6J,IAAKqpC,EAEjC,EAWD,CAEA,SAASoxH,GAA4BntH,EAAI1B,EAAYskH,EAAMvT,GAE1D,IAEIvvH,EAQA/vB,EAAM0/I,EAVJH,EAAWD,EAAaC,SA4D9BphJ,KAAK20J,QAxDL,SAAkB90J,GAEjB+xB,EAAO/xB,CAER,EAqDAG,KAAKs7F,SAjDL,SAAmBz7F,GAElBgC,EAAOhC,EAAMgC,KACb0/I,EAAkB1hJ,EAAM0hJ,eAEzB,EA6CAvhJ,KAAKq2C,OA3CL,SAAiB/uC,EAAO1E,GAEvBkvC,EAAGotH,aAActtI,EAAMhvB,EAAOf,EAAMyF,EAAQi6I,GAE5CmT,EAAKriH,OAAQzvC,EAAOgvB,EAAM,EAE3B,EAsCA5xB,KAAK60J,gBApCL,SAA0BvtJ,EAAO1E,EAAOkyJ,GAEvC,GAAmB,IAAdA,EAAL,CAEA,IAAInxD,EAAWoxD,EAEf,GAAK3T,EAEJz9C,EAAY7xD,EACZijH,EAAa,6BAOb,GAFAA,EAAa,6BAEM,QAHnBpxD,EAAYvzD,EAAW5rC,IAAK,2BAM3B,YADA3B,QAAQkC,MAAO,yIAOjB4+F,EAAWoxD,GAAcnjI,EAAMhvB,EAAOf,EAAMyF,EAAQi6I,EAAiBuT,GAErEJ,EAAKriH,OAAQzvC,EAAOgvB,EAAMkjI,EAzBG,CA2B9B,CASD,CAEA,SAASqK,GAAWrtH,GAEnB,IAKMuE,EAAS,CACd7+B,MAAO,EACP4nJ,MAAO,EACPlpI,UAAW,EACXjgB,OAAQ,EACRopJ,MAAO,GA+CR,MAAO,CACNX,OA1Dc,CACdhkD,WAAY,EACZhU,SAAU,GAyDVrwD,OAAQA,EACRipH,SAAU,KACVC,WAAW,EACXntI,MAfD,WAECikB,EAAO7+B,QACP6+B,EAAO+oH,MAAQ,EACf/oH,EAAOngB,UAAY,EACnBmgB,EAAOpgC,OAAS,EAChBogC,EAAOgpH,MAAQ,CAEhB,EAQChtH,OAlDD,SAAiBzvC,EAAOgvB,EAAM4tI,GAI7B,OAFAnpH,EAAO+oH,QAEExtI,GAER,KAAK,EACJykB,EAAOngB,WAAaspI,GAAkB58J,EAAQ,GAC9C,MAED,KAAK,EACJyzC,EAAOgpH,OAASG,GAAkB58J,EAAQ,GAC1C,MAED,KAAK,EACJyzC,EAAOgpH,OAASG,GAAkB58J,EAAQ,GAC1C,MAED,KAAK,EACJyzC,EAAOgpH,OAASG,EAAgB58J,EAChC,MAED,KAAK,EACJyzC,EAAOpgC,QAAUupJ,EAAgB58J,EACjC,MAED,QACCC,QAAQkC,MAAO,sCAAuC6sB,GAKzD,EAqBD,CAEA,SAAS6tI,GAAetoJ,EAAG/E,GAE1B,OAAO+E,EAAG,GAAM/E,EAAG,EAEpB,CAEA,SAASstJ,GAAkBvoJ,EAAG/E,GAE7B,OAAOgC,KAAKgB,IAAKhD,EAAG,IAAQgC,KAAKgB,IAAK+B,EAAG,GAE1C,CAEA,SAASwoJ,GAAmB7tH,EAAIqvG,EAAcz6C,GAS7C,IAPA,IAAMk5D,EAAiB,CAAC,EAClBlnB,EAAkB,IAAIjuI,aAAc,GACpCo1J,EAAgB,IAAIn1E,QACpBo1E,EAAQ,IAAI7lH,GAEZ8lH,EAAiB,GAEbn8J,EAAI,EAAGA,EAAI,EAAGA,IAEvBm8J,EAAgBn8J,GAAM,CAAEA,EAAG,GAsQ5B,MAAO,CAENyuC,OApQD,SAAiBrU,EAAQ6P,EAAU3wB,EAAU40I,GAE5C,IAAMkO,EAAmBhiI,EAAO2yE,sBAEhC,IAA+B,IAA1BwwC,EAAaC,SAAoB,CAKrC,IAAMxM,EAAiB/mG,EAASotE,gBAAgBx1G,UAAYooC,EAASotE,gBAAgBj2F,QAAU6oB,EAASotE,gBAAgBpZ,MAClHo+D,OAAyC9+J,IAAnByzI,EAAiCA,EAAeryI,OAAS,EAEjFurD,EAAQ+xG,EAAcr7J,IAAKqpC,GAE/B,QAAe1sC,IAAV2sD,GAAuBA,EAAMlrD,QAAUq9J,EAAoB,MAEhD9+J,IAAV2sD,GAAsBA,EAAM7hB,QAAQ0W,UAEzC,IAAMw9D,OAAyDh/G,IAAtC0sC,EAASotE,gBAAgBx1G,SAC5Cy6J,OAAsD/+J,IAApC0sC,EAASotE,gBAAgBj2F,OAC3Cm7I,OAAoDh/J,IAAnC0sC,EAASotE,gBAAgBpZ,MAE1Cu+D,EAAevyH,EAASotE,gBAAgBx1G,UAAY,GACpDk7G,EAAe9yE,EAASotE,gBAAgBj2F,QAAU,GAClD47F,EAAc/yE,EAASotE,gBAAgBpZ,OAAS,GAElDw+D,EAAkB,GAEI,IAArBlgD,IAA4BkgD,EAAkB,IAC1B,IAApBH,IAA2BG,EAAkB,IAC1B,IAAnBF,IAA0BE,EAAkB,GAEjD,IAAI71H,EAAQqD,EAAS+6D,WAAWnjG,SAAS7C,MAAQy9J,EAC7C51H,EAAS,EAERD,EAAQ22G,EAAauU,iBAEzBjrH,EAASr2B,KAAKq9E,KAAMjnD,EAAQ22G,EAAauU,gBACzClrH,EAAQ22G,EAAauU,gBAItB,IAAMtuJ,EAAS,IAAIqD,aAAc+/B,EAAQC,EAAS,EAAIw1H,GAEhDh0H,EAAU,IAAIqsF,GAAkBlxH,EAAQojC,EAAOC,EAAQw1H,GAC7Dh0H,EAAQpqC,KAAO4pC,GACfQ,EAAQ5L,aAAc,EAMtB,IAFA,IAAMigI,EAAqC,EAAlBD,EAEfz8J,EAAI,EAAGA,EAAIq8J,EAAmBr8J,IAQvC,IANA,IAAM28J,EAAcH,EAAcx8J,GAC5B48J,EAAc7/C,EAAc/8G,GAC5B68J,EAAa7/C,EAAah9G,GAE1BgjB,EAAS4jB,EAAQC,EAAS,EAAI7mC,EAE1ByO,EAAI,EAAGA,EAAIkuJ,EAAY39J,MAAOyP,IAAO,CAE9C,IAAMy1F,EAASz1F,EAAIiuJ,GAEO,IAArBngD,IAEJ2/C,EAAM12D,oBAAqBm3D,EAAaluJ,GAExCjL,EAAQwf,EAASkhF,EAAS,GAAMg4D,EAAM9wJ,EACtC5H,EAAQwf,EAASkhF,EAAS,GAAMg4D,EAAM7wJ,EACtC7H,EAAQwf,EAASkhF,EAAS,GAAMg4D,EAAM5wJ,EACtC9H,EAAQwf,EAASkhF,EAAS,GAAM,IAIR,IAApBo4D,IAEJJ,EAAM12D,oBAAqBo3D,EAAanuJ,GAExCjL,EAAQwf,EAASkhF,EAAS,GAAMg4D,EAAM9wJ,EACtC5H,EAAQwf,EAASkhF,EAAS,GAAMg4D,EAAM7wJ,EACtC7H,EAAQwf,EAASkhF,EAAS,GAAMg4D,EAAM5wJ,EACtC9H,EAAQwf,EAASkhF,EAAS,GAAM,IAIT,IAAnBq4D,IAEJL,EAAM12D,oBAAqBq3D,EAAYpuJ,GAEvCjL,EAAQwf,EAASkhF,EAAS,GAAMg4D,EAAM9wJ,EACtC5H,EAAQwf,EAASkhF,EAAS,GAAMg4D,EAAM7wJ,EACtC7H,EAAQwf,EAASkhF,EAAS,IAAOg4D,EAAM5wJ,EACvC9H,EAAQwf,EAASkhF,EAAS,IAAiC,IAAxB24D,EAAW1rD,SAAmB+qD,EAAMr9J,EAAI,EAI7E,CAIDqrD,EAAQ,CACPlrD,MAAOq9J,EACPh0H,QAASA,EACTliC,KAAM,IAAIqpC,GAAS5I,EAAOC,IAG3Bo1H,EAAcp7J,IAAKopC,EAAUigB,GAY7BjgB,EAAS3pC,iBAAkB,WAV3B,SAASw8J,IAERz0H,EAAQ0W,UAERk9G,EAAcl0G,OAAQ9d,GAEtBA,EAASxpC,oBAAqB,UAAWq8J,EAE1C,GAID,CAMA,IAFA,IAAIC,EAAqB,EAEf/8J,EAAI,EAAGA,EAAIo8J,EAAiBz9J,OAAQqB,IAE7C+8J,GAAsBX,EAAkBp8J,GAIzC,IAAMg9J,EAAqB/yH,EAASgzE,qBAAuB,EAAI,EAAI8/C,EAEnE7O,EAAQ+O,cAAcC,SAAUhvH,EAAI,2BAA4B8uH,GAChE9O,EAAQ+O,cAAcC,SAAUhvH,EAAI,wBAAyBkuH,GAE7DlO,EAAQ+O,cAAcC,SAAUhvH,EAAI,sBAAuBgc,EAAM7hB,QAASy6D,GAC1EorD,EAAQ+O,cAAcC,SAAUhvH,EAAI,0BAA2Bgc,EAAM/jD,KAGtE,KAAO,CAKN,IAAMxH,OAA8BpB,IAArB6+J,EAAiC,EAAIA,EAAiBz9J,OAEjEw+J,EAAanB,EAAgB/xH,EAAS19B,IAE1C,QAAoBhP,IAAf4/J,GAA4BA,EAAWx+J,SAAWA,EAAS,CAI/Dw+J,EAAa,GAEb,IAAM,IAAIn9J,EAAI,EAAGA,EAAIrB,EAAQqB,IAE5Bm9J,EAAYn9J,GAAM,CAAEA,EAAG,GAIxBg8J,EAAgB/xH,EAAS19B,IAAO4wJ,CAEjC,CAIA,IAAM,IAAIn9J,EAAI,EAAGA,EAAIrB,EAAQqB,IAAO,CAEnC,IAAM+0I,EAAYooB,EAAYn9J,GAE9B+0I,EAAW,GAAM/0I,EACjB+0I,EAAW,GAAMqnB,EAAkBp8J,EAEpC,CAEAm9J,EAAWzpG,KAAMooG,IAEjB,IAAM,IAAI97J,EAAI,EAAGA,EAAI,EAAGA,IAElBA,EAAIrB,GAAUw+J,EAAYn9J,GAAK,IAEnCm8J,EAAgBn8J,GAAK,GAAMm9J,EAAYn9J,GAAK,GAC5Cm8J,EAAgBn8J,GAAK,GAAMm9J,EAAYn9J,GAAK,KAI5Cm8J,EAAgBn8J,GAAK,GAAMjE,OAAOqhK,iBAClCjB,EAAgBn8J,GAAK,GAAM,GAM7Bm8J,EAAezoG,KAAMmoG,IAOrB,IALA,IAAMW,EAAevyH,EAASotE,gBAAgBx1G,SACxCk7G,EAAe9yE,EAASotE,gBAAgBj2F,OAE1C27I,EAAqB,EAEf/8J,EAAI,EAAGA,EAAI,EAAGA,IAAO,CAE9B,IAAM+0I,EAAYonB,EAAgBn8J,GAC5BgC,EAAQ+yI,EAAW,GACnB94I,EAAQ84I,EAAW,GAEpB/yI,IAAUjG,OAAOqhK,kBAAoBnhK,GAEpCugK,GAAgBvyH,EAASwtD,aAAc,cAAgBz3F,KAAQw8J,EAAcx6J,IAEjFioC,EAAS8H,aAAc,cAAgB/xC,EAAGw8J,EAAcx6J,IAIpD+6G,GAAgB9yE,EAASwtD,aAAc,cAAgBz3F,KAAQ+8G,EAAc/6G,IAEjFioC,EAAS8H,aAAc,cAAgB/xC,EAAG+8G,EAAc/6G,IAIzD8yI,EAAiB90I,GAAM/D,EACvB8gK,GAAsB9gK,IAIjBugK,IAA+D,IAA/CvyH,EAASinG,aAAc,cAAgBlxI,IAE3DiqC,EAAS2iH,gBAAiB,cAAgB5sJ,GAItC+8G,IAA+D,IAA/C9yE,EAASinG,aAAc,cAAgBlxI,IAE3DiqC,EAAS2iH,gBAAiB,cAAgB5sJ,GAI3C80I,EAAiB90I,GAAM,EAIzB,CAKA,IAAMg9J,EAAqB/yH,EAASgzE,qBAAuB,EAAI,EAAI8/C,EAEnE7O,EAAQ+O,cAAcC,SAAUhvH,EAAI,2BAA4B8uH,GAChE9O,EAAQ+O,cAAcC,SAAUhvH,EAAI,wBAAyB4mG,EAE9D,CAED,EAQD,CAEA,SAASuoB,GAAcnvH,EAAI4oE,EAAY9R,EAAY8rD,GAElD,IAAIwM,EAAY,IAAIx2E,QA+CpB,SAASy2E,EAAwBpoJ,GAEhC,IAAMmwF,EAAgBnwF,EAAMha,OAE5BmqG,EAAc7kG,oBAAqB,UAAW88J,GAE9Cv4D,EAAWhoE,OAAQsoE,EAAcppE,gBAEI,OAAhCopE,EAAcmgC,eAAyBzgC,EAAWhoE,OAAQsoE,EAAcmgC,cAE9E,CAEA,MAAO,CAENh3F,OA3DD,SAAiBrU,GAEhB,IAAMxmB,EAAQk9I,EAAKr+G,OAAO7+B,MAEpBq2B,EAAW7P,EAAO6P,SAClBuzH,EAAiB1mD,EAAWl2G,IAAKw5B,EAAQ6P,GA8B/C,OA1BKqzH,EAAU18J,IAAK48J,KAAqB5pJ,IAExCkjG,EAAWroE,OAAQ+uH,GAEnBF,EAAUz8J,IAAK28J,EAAgB5pJ,IAI3BwmB,EAAOorG,mBAE2D,IAAjEprG,EAAOqjI,iBAAkB,UAAWF,IAExCnjI,EAAO95B,iBAAkB,UAAWi9J,GAIrCv4D,EAAWv2D,OAAQrU,EAAO8B,eAAgB,OAEZ,OAAzB9B,EAAOqrG,eAEXzgC,EAAWv2D,OAAQrU,EAAOqrG,cAAe,QAMpC+3B,CAER,EAuBCz+G,QArBD,WAECu+G,EAAY,IAAIx2E,OAEjB,EAqBD,CA6CA,IAAM42E,GAA6B,IAAIpqD,GACjCqqD,GAAkC,IAAIjpC,GACtCkpC,GAA+B,IAAI3oC,GACnC4oC,GAAiC,IAAI9jB,GAMrC+jB,GAAgB,GAChBC,GAAgB,GAIhBC,GAAY,IAAIn3J,aAAc,IAC9Bo3J,GAAY,IAAIp3J,aAAc,GAC9Bq3J,GAAY,IAAIr3J,aAAc,GAIpC,SAASs3J,GAAS3iG,EAAO4iG,EAASC,GAEjC,IAAMC,EAAY9iG,EAAO,GAEzB,GAAK8iG,GAAa,GAAKA,EAAY,EAAI,OAAO9iG,EAI9C,IAAMp7D,EAAIg+J,EAAUC,EAChBjvJ,EAAI0uJ,GAAe19J,GASvB,QAPW7C,IAAN6R,IAEJA,EAAI,IAAIvI,aAAczG,GACtB09J,GAAe19J,GAAMgP,GAIL,IAAZgvJ,EAAgB,CAEpBE,EAAUzkI,QAASzqB,EAAG,GAEtB,IAAM,IAAIpP,EAAI,EAAGgjB,EAAS,EAAGhjB,IAAMo+J,IAAYp+J,EAE9CgjB,GAAUq7I,EACV7iG,EAAOx7D,GAAI65B,QAASzqB,EAAG4T,EAIzB,CAEA,OAAO5T,CAER,CAEA,SAASmvJ,GAAahrJ,EAAG/E,GAExB,GAAK+E,EAAE5U,SAAW6P,EAAE7P,OAAS,OAAO,EAEpC,IAAM,IAAIqB,EAAI,EAAGwS,EAAIe,EAAE5U,OAAQqB,EAAIwS,EAAGxS,IAErC,GAAKuT,EAAGvT,KAAQwO,EAAGxO,GAAM,OAAO,EAIjC,OAAO,CAER,CAEA,SAASw+J,GAAWjrJ,EAAG/E,GAEtB,IAAM,IAAIxO,EAAI,EAAGwS,EAAIhE,EAAE7P,OAAQqB,EAAIwS,EAAGxS,IAErCuT,EAAGvT,GAAMwO,EAAGxO,EAId,CAIA,SAASy+J,GAAe37D,EAAU1iG,GAEjC,IAAIgP,EAAI2uJ,GAAe39J,QAEZ7C,IAAN6R,IAEJA,EAAI,IAAIm/G,WAAYnuH,GACpB29J,GAAe39J,GAAMgP,GAItB,IAAM,IAAIpP,EAAI,EAAGA,IAAMI,IAAMJ,EAE5BoP,EAAGpP,GAAM8iG,EAAS47D,sBAInB,OAAOtvJ,CAER,CASA,SAASuvJ,GAAazwH,EAAIlhC,GAEzB,IAAMgxB,EAAQ5hC,KAAK4hC,MAEdA,EAAO,KAAQhxB,IAEpBkhC,EAAG0wH,UAAWxiK,KAAKyiK,KAAM7xJ,GAEzBgxB,EAAO,GAAMhxB,EAEd,CAIA,SAAS8xJ,GAAa5wH,EAAIlhC,GAEzB,IAAMgxB,EAAQ5hC,KAAK4hC,MAEnB,QAAazgC,IAARyP,EAAE5B,EAED4yB,EAAO,KAAQhxB,EAAE5B,GAAK4yB,EAAO,KAAQhxB,EAAE3B,IAE3C6iC,EAAG6wH,UAAW3iK,KAAKyiK,KAAM7xJ,EAAE5B,EAAG4B,EAAE3B,GAEhC2yB,EAAO,GAAMhxB,EAAE5B,EACf4yB,EAAO,GAAMhxB,EAAE3B,OAIV,CAEN,GAAKkzJ,GAAavgI,EAAOhxB,GAAM,OAE/BkhC,EAAG8wH,WAAY5iK,KAAKyiK,KAAM7xJ,GAE1BwxJ,GAAWxgI,EAAOhxB,EAEnB,CAED,CAEA,SAASiyJ,GAAa/wH,EAAIlhC,GAEzB,IAAMgxB,EAAQ5hC,KAAK4hC,MAEnB,QAAazgC,IAARyP,EAAE5B,EAED4yB,EAAO,KAAQhxB,EAAE5B,GAAK4yB,EAAO,KAAQhxB,EAAE3B,GAAK2yB,EAAO,KAAQhxB,EAAE1B,IAEjE4iC,EAAGgxH,UAAW9iK,KAAKyiK,KAAM7xJ,EAAE5B,EAAG4B,EAAE3B,EAAG2B,EAAE1B,GAErC0yB,EAAO,GAAMhxB,EAAE5B,EACf4yB,EAAO,GAAMhxB,EAAE3B,EACf2yB,EAAO,GAAMhxB,EAAE1B,QAIV,QAAa/N,IAARyP,EAAEoC,EAER4uB,EAAO,KAAQhxB,EAAEoC,GAAK4uB,EAAO,KAAQhxB,EAAE0G,GAAKsqB,EAAO,KAAQhxB,EAAEwB,IAEjE0/B,EAAGgxH,UAAW9iK,KAAKyiK,KAAM7xJ,EAAEoC,EAAGpC,EAAE0G,EAAG1G,EAAEwB,GAErCwvB,EAAO,GAAMhxB,EAAEoC,EACf4uB,EAAO,GAAMhxB,EAAE0G,EACfsqB,EAAO,GAAMhxB,EAAEwB,OAIV,CAEN,GAAK+vJ,GAAavgI,EAAOhxB,GAAM,OAE/BkhC,EAAGixH,WAAY/iK,KAAKyiK,KAAM7xJ,GAE1BwxJ,GAAWxgI,EAAOhxB,EAEnB,CAED,CAEA,SAASoyJ,GAAalxH,EAAIlhC,GAEzB,IAAMgxB,EAAQ5hC,KAAK4hC,MAEnB,QAAazgC,IAARyP,EAAE5B,EAED4yB,EAAO,KAAQhxB,EAAE5B,GAAK4yB,EAAO,KAAQhxB,EAAE3B,GAAK2yB,EAAO,KAAQhxB,EAAE1B,GAAK0yB,EAAO,KAAQhxB,EAAEnO,IAEvFqvC,EAAGmxH,UAAWjjK,KAAKyiK,KAAM7xJ,EAAE5B,EAAG4B,EAAE3B,EAAG2B,EAAE1B,EAAG0B,EAAEnO,GAE1Cm/B,EAAO,GAAMhxB,EAAE5B,EACf4yB,EAAO,GAAMhxB,EAAE3B,EACf2yB,EAAO,GAAMhxB,EAAE1B,EACf0yB,EAAO,GAAMhxB,EAAEnO,OAIV,CAEN,GAAK0/J,GAAavgI,EAAOhxB,GAAM,OAE/BkhC,EAAGoxH,WAAYljK,KAAKyiK,KAAM7xJ,GAE1BwxJ,GAAWxgI,EAAOhxB,EAEnB,CAED,CAIA,SAASuyJ,GAAYrxH,EAAIlhC,GAExB,IAAMgxB,EAAQ5hC,KAAK4hC,MACbnxB,EAAWG,EAAEH,SAEnB,QAAkBtP,IAAbsP,EAAyB,CAE7B,GAAK0xJ,GAAavgI,EAAOhxB,GAAM,OAE/BkhC,EAAGsxH,iBAAkBpjK,KAAKyiK,MAAM,EAAO7xJ,GAEvCwxJ,GAAWxgI,EAAOhxB,EAEnB,KAAO,CAEN,GAAKuxJ,GAAavgI,EAAOnxB,GAAa,OAEtCqxJ,GAAUr9J,IAAKgM,GAEfqhC,EAAGsxH,iBAAkBpjK,KAAKyiK,MAAM,EAAOX,IAEvCM,GAAWxgI,EAAOnxB,EAEnB,CAED,CAEA,SAAS4yJ,GAAYvxH,EAAIlhC,GAExB,IAAMgxB,EAAQ5hC,KAAK4hC,MACbnxB,EAAWG,EAAEH,SAEnB,QAAkBtP,IAAbsP,EAAyB,CAE7B,GAAK0xJ,GAAavgI,EAAOhxB,GAAM,OAE/BkhC,EAAGwxH,iBAAkBtjK,KAAKyiK,MAAM,EAAO7xJ,GAEvCwxJ,GAAWxgI,EAAOhxB,EAEnB,KAAO,CAEN,GAAKuxJ,GAAavgI,EAAOnxB,GAAa,OAEtCoxJ,GAAUp9J,IAAKgM,GAEfqhC,EAAGwxH,iBAAkBtjK,KAAKyiK,MAAM,EAAOZ,IAEvCO,GAAWxgI,EAAOnxB,EAEnB,CAED,CAEA,SAAS8yJ,GAAYzxH,EAAIlhC,GAExB,IAAMgxB,EAAQ5hC,KAAK4hC,MACbnxB,EAAWG,EAAEH,SAEnB,QAAkBtP,IAAbsP,EAAyB,CAE7B,GAAK0xJ,GAAavgI,EAAOhxB,GAAM,OAE/BkhC,EAAG0xH,iBAAkBxjK,KAAKyiK,MAAM,EAAO7xJ,GAEvCwxJ,GAAWxgI,EAAOhxB,EAEnB,KAAO,CAEN,GAAKuxJ,GAAavgI,EAAOnxB,GAAa,OAEtCmxJ,GAAUn9J,IAAKgM,GAEfqhC,EAAG0xH,iBAAkBxjK,KAAKyiK,MAAM,EAAOb,IAEvCQ,GAAWxgI,EAAOnxB,EAEnB,CAED,CAIA,SAASgzJ,GAAa3xH,EAAIlhC,GAEzB,IAAMgxB,EAAQ5hC,KAAK4hC,MAEdA,EAAO,KAAQhxB,IAEpBkhC,EAAG4xH,UAAW1jK,KAAKyiK,KAAM7xJ,GAEzBgxB,EAAO,GAAMhxB,EAEd,CAIA,SAAS+yJ,GAAa7xH,EAAIlhC,GAEzB,IAAMgxB,EAAQ5hC,KAAK4hC,MAEdugI,GAAavgI,EAAOhxB,KAEzBkhC,EAAG8xH,WAAY5jK,KAAKyiK,KAAM7xJ,GAE1BwxJ,GAAWxgI,EAAOhxB,GAEnB,CAEA,SAASizJ,GAAa/xH,EAAIlhC,GAEzB,IAAMgxB,EAAQ5hC,KAAK4hC,MAEdugI,GAAavgI,EAAOhxB,KAEzBkhC,EAAGgyH,WAAY9jK,KAAKyiK,KAAM7xJ,GAE1BwxJ,GAAWxgI,EAAOhxB,GAEnB,CAEA,SAASmzJ,GAAajyH,EAAIlhC,GAEzB,IAAMgxB,EAAQ5hC,KAAK4hC,MAEdugI,GAAavgI,EAAOhxB,KAEzBkhC,EAAGkyH,WAAYhkK,KAAKyiK,KAAM7xJ,GAE1BwxJ,GAAWxgI,EAAOhxB,GAEnB,CAIA,SAASqzJ,GAAcnyH,EAAIlhC,GAE1B,IAAMgxB,EAAQ5hC,KAAK4hC,MAEdA,EAAO,KAAQhxB,IAEpBkhC,EAAGoyH,WAAYlkK,KAAKyiK,KAAM7xJ,GAE1BgxB,EAAO,GAAMhxB,EAEd,CAIA,SAASuzJ,GAAcryH,EAAIlhC,GAE1B,IAAMgxB,EAAQ5hC,KAAK4hC,MAEdugI,GAAavgI,EAAOhxB,KAEzBkhC,EAAGsyH,YAAapkK,KAAKyiK,KAAM7xJ,GAE3BwxJ,GAAWxgI,EAAOhxB,GAEnB,CAEA,SAASyzJ,GAAcvyH,EAAIlhC,GAE1B,IAAMgxB,EAAQ5hC,KAAK4hC,MAEdugI,GAAavgI,EAAOhxB,KAEzBkhC,EAAGwyH,YAAatkK,KAAKyiK,KAAM7xJ,GAE3BwxJ,GAAWxgI,EAAOhxB,GAEnB,CAEA,SAAS2zJ,GAAczyH,EAAIlhC,GAE1B,IAAMgxB,EAAQ5hC,KAAK4hC,MAEdugI,GAAavgI,EAAOhxB,KAEzBkhC,EAAG0yH,YAAaxkK,KAAKyiK,KAAM7xJ,GAE3BwxJ,GAAWxgI,EAAOhxB,GAEnB,CAKA,SAAS6zJ,GAAY3yH,EAAIlhC,EAAG81F,GAE3B,IAAM9kE,EAAQ5hC,KAAK4hC,MACb8iI,EAAOh+D,EAAS47D,sBAEjB1gI,EAAO,KAAQ8iI,IAEnB5yH,EAAG4xH,UAAW1jK,KAAKyiK,KAAMiC,GACzB9iI,EAAO,GAAM8iI,GAIdh+D,EAASi+D,aAAc/zJ,GAAK0wJ,GAAcoD,EAE3C,CAEA,SAASE,GAAc9yH,EAAIlhC,EAAG81F,GAE7B,IAAM9kE,EAAQ5hC,KAAK4hC,MACb8iI,EAAOh+D,EAAS47D,sBAEjB1gI,EAAO,KAAQ8iI,IAEnB5yH,EAAG4xH,UAAW1jK,KAAKyiK,KAAMiC,GACzB9iI,EAAO,GAAM8iI,GAIdh+D,EAASm+D,aAAcj0J,GAAK4wJ,GAAgBkD,EAE7C,CAEA,SAASI,GAAYhzH,EAAIlhC,EAAG81F,GAE3B,IAAM9kE,EAAQ5hC,KAAK4hC,MACb8iI,EAAOh+D,EAAS47D,sBAEjB1gI,EAAO,KAAQ8iI,IAEnB5yH,EAAG4xH,UAAW1jK,KAAKyiK,KAAMiC,GACzB9iI,EAAO,GAAM8iI,GAIdh+D,EAASq+D,eAAgBn0J,GAAK6wJ,GAAkBiD,EAEjD,CAEA,SAASM,GAAmBlzH,EAAIlhC,EAAG81F,GAElC,IAAM9kE,EAAQ5hC,KAAK4hC,MACb8iI,EAAOh+D,EAAS47D,sBAEjB1gI,EAAO,KAAQ8iI,IAEnB5yH,EAAG4xH,UAAW1jK,KAAKyiK,KAAMiC,GACzB9iI,EAAO,GAAM8iI,GAIdh+D,EAASu+D,kBAAmBr0J,GAAK2wJ,GAAmBmD,EAErD,CA0DA,SAASQ,GAAkBpzH,EAAIlhC,GAE9BkhC,EAAGqzH,WAAYnlK,KAAKyiK,KAAM7xJ,EAE3B,CAIA,SAASw0J,GAAkBtzH,EAAIlhC,GAE9B,IAAMjE,EAAOo1J,GAASnxJ,EAAG5Q,KAAK+J,KAAM,GAEpC+nC,EAAG8wH,WAAY5iK,KAAKyiK,KAAM91J,EAE3B,CAEA,SAAS04J,GAAkBvzH,EAAIlhC,GAE9B,IAAMjE,EAAOo1J,GAASnxJ,EAAG5Q,KAAK+J,KAAM,GAEpC+nC,EAAGixH,WAAY/iK,KAAKyiK,KAAM91J,EAE3B,CAEA,SAAS24J,GAAkBxzH,EAAIlhC,GAE9B,IAAMjE,EAAOo1J,GAASnxJ,EAAG5Q,KAAK+J,KAAM,GAEpC+nC,EAAGoxH,WAAYljK,KAAKyiK,KAAM91J,EAE3B,CAIA,SAAS44J,GAAiBzzH,EAAIlhC,GAE7B,IAAMjE,EAAOo1J,GAASnxJ,EAAG5Q,KAAK+J,KAAM,GAEpC+nC,EAAGsxH,iBAAkBpjK,KAAKyiK,MAAM,EAAO91J,EAExC,CAEA,SAAS64J,GAAiB1zH,EAAIlhC,GAE7B,IAAMjE,EAAOo1J,GAASnxJ,EAAG5Q,KAAK+J,KAAM,GAEpC+nC,EAAGwxH,iBAAkBtjK,KAAKyiK,MAAM,EAAO91J,EAExC,CAEA,SAAS84J,GAAiB3zH,EAAIlhC,GAE7B,IAAMjE,EAAOo1J,GAASnxJ,EAAG5Q,KAAK+J,KAAM,IAEpC+nC,EAAG0xH,iBAAkBxjK,KAAKyiK,MAAM,EAAO91J,EAExC,CAIA,SAAS+4J,GAAkB5zH,EAAIlhC,GAE9BkhC,EAAG6zH,WAAY3lK,KAAKyiK,KAAM7xJ,EAE3B,CAIA,SAASg1J,GAAkB9zH,EAAIlhC,GAE9BkhC,EAAG8xH,WAAY5jK,KAAKyiK,KAAM7xJ,EAE3B,CAEA,SAASi1J,GAAkB/zH,EAAIlhC,GAE9BkhC,EAAGgyH,WAAY9jK,KAAKyiK,KAAM7xJ,EAE3B,CAEA,SAASk1J,GAAkBh0H,EAAIlhC,GAE9BkhC,EAAGkyH,WAAYhkK,KAAKyiK,KAAM7xJ,EAE3B,CAIA,SAASm1J,GAAmBj0H,EAAIlhC,GAE/BkhC,EAAGk0H,YAAahmK,KAAKyiK,KAAM7xJ,EAE5B,CAIA,SAASq1J,GAAmBn0H,EAAIlhC,GAE/BkhC,EAAGsyH,YAAapkK,KAAKyiK,KAAM7xJ,EAE5B,CAEA,SAASs1J,GAAmBp0H,EAAIlhC,GAE/BkhC,EAAGwyH,YAAatkK,KAAKyiK,KAAM7xJ,EAE5B,CAEA,SAASu1J,GAAmBr0H,EAAIlhC,GAE/BkhC,EAAG0yH,YAAaxkK,KAAKyiK,KAAM7xJ,EAE5B,CAKA,SAASw1J,GAAiBt0H,EAAIlhC,EAAG81F,GAEhC,IAAM9kE,EAAQ5hC,KAAK4hC,MAEb59B,EAAI4M,EAAErO,OAEN8jK,EAAQhE,GAAe37D,EAAU1iG,GAEhCm+J,GAAavgI,EAAOykI,KAE1Bv0H,EAAG6zH,WAAY3lK,KAAKyiK,KAAM4D,GAE1BjE,GAAWxgI,EAAOykI,IAInB,IAAM,IAAIziK,EAAI,EAAGA,IAAMI,IAAMJ,EAE5B8iG,EAASi+D,aAAc/zJ,EAAGhN,IAAO09J,GAAc+E,EAAOziK,GAIxD,CAEA,SAAS0iK,GAAkBx0H,EAAIlhC,EAAG81F,GAEjC,IAAM9kE,EAAQ5hC,KAAK4hC,MAEb59B,EAAI4M,EAAErO,OAEN8jK,EAAQhE,GAAe37D,EAAU1iG,GAEhCm+J,GAAavgI,EAAOykI,KAE1Bv0H,EAAG6zH,WAAY3lK,KAAKyiK,KAAM4D,GAE1BjE,GAAWxgI,EAAOykI,IAInB,IAAM,IAAIziK,EAAI,EAAGA,IAAMI,IAAMJ,EAE5B8iG,EAASm+D,aAAcj0J,EAAGhN,IAAO49J,GAAgB6E,EAAOziK,GAI1D,CAEA,SAAS2iK,GAAiBz0H,EAAIlhC,EAAG81F,GAEhC,IAAM9kE,EAAQ5hC,KAAK4hC,MAEb59B,EAAI4M,EAAErO,OAEN8jK,EAAQhE,GAAe37D,EAAU1iG,GAEhCm+J,GAAavgI,EAAOykI,KAE1Bv0H,EAAG6zH,WAAY3lK,KAAKyiK,KAAM4D,GAE1BjE,GAAWxgI,EAAOykI,IAInB,IAAM,IAAIziK,EAAI,EAAGA,IAAMI,IAAMJ,EAE5B8iG,EAASq+D,eAAgBn0J,EAAGhN,IAAO69J,GAAkB4E,EAAOziK,GAI9D,CAEA,SAAS4iK,GAAuB10H,EAAIlhC,EAAG81F,GAEtC,IAAM9kE,EAAQ5hC,KAAK4hC,MAEb59B,EAAI4M,EAAErO,OAEN8jK,EAAQhE,GAAe37D,EAAU1iG,GAEhCm+J,GAAavgI,EAAOykI,KAE1Bv0H,EAAG6zH,WAAY3lK,KAAKyiK,KAAM4D,GAE1BjE,GAAWxgI,EAAOykI,IAInB,IAAM,IAAIziK,EAAI,EAAGA,IAAMI,IAAMJ,EAE5B8iG,EAASu+D,kBAAmBr0J,EAAGhN,IAAO29J,GAAmB8E,EAAOziK,GAIlE,CAwDA,IAEM6iK,IAAa97J,EAAAA,EAAAA,IAElB,SAAA87J,EAAat2J,EAAIu2J,EAAYjE,IAAO/5J,EAAAA,EAAAA,GAAA,KAAA+9J,GAEnCzmK,KAAKmQ,GAAKA,EACVnQ,KAAKyiK,KAAOA,EACZziK,KAAK4hC,MAAQ,GACb5hC,KAAK8gK,SA1UP,SAA4Bj/J,GAE3B,OAASA,GAER,KAAK,KAAQ,OAAO0gK,GACpB,KAAK,MAAQ,OAAOG,GACpB,KAAK,MAAQ,OAAOG,GACpB,KAAK,MAAQ,OAAOG,GAEpB,KAAK,MAAQ,OAAOG,GACpB,KAAK,MAAQ,OAAOE,GACpB,KAAK,MAAQ,OAAOE,GAEpB,KAAK,KAAQ,KAAK,MAAQ,OAAOE,GACjC,KAAK,MAAQ,KAAK,MAAQ,OAAOE,GACjC,KAAK,MAAQ,KAAK,MAAQ,OAAOE,GACjC,KAAK,MAAQ,KAAK,MAAQ,OAAOE,GAEjC,KAAK,KAAQ,OAAOE,GACpB,KAAK,MAAQ,OAAOE,GACpB,KAAK,MAAQ,OAAOE,GACpB,KAAK,MAAQ,OAAOE,GAEpB,KAAK,MACL,KAAK,MACL,KAAK,MACL,KAAK,MACL,KAAK,MACJ,OAAOE,GAER,KAAK,MACL,KAAK,MACL,KAAK,MACJ,OAAOG,GAER,KAAK,MACL,KAAK,MACL,KAAK,MACL,KAAK,MACJ,OAAOE,GAER,KAAK,MACL,KAAK,MACL,KAAK,MACL,KAAK,MACJ,OAAOE,GAIV,CAyRkB2B,CAAmBD,EAAW7kK,KAI/C,IAIK+kK,IAAgBj8J,EAAAA,EAAAA,IAErB,SAAAi8J,EAAaz2J,EAAIu2J,EAAYjE,IAAO/5J,EAAAA,EAAAA,GAAA,KAAAk+J,GAEnC5mK,KAAKmQ,GAAKA,EACVnQ,KAAKyiK,KAAOA,EACZziK,KAAK4hC,MAAQ,GACb5hC,KAAK+J,KAAO28J,EAAW38J,KACvB/J,KAAK8gK,SA5EP,SAA6Bj/J,GAE5B,OAASA,GAER,KAAK,KAAQ,OAAOqjK,GACpB,KAAK,MAAQ,OAAOE,GACpB,KAAK,MAAQ,OAAOC,GACpB,KAAK,MAAQ,OAAOC,GAEpB,KAAK,MAAQ,OAAOC,GACpB,KAAK,MAAQ,OAAOC,GACpB,KAAK,MAAQ,OAAOC,GAEpB,KAAK,KAAQ,KAAK,MAAQ,OAAOC,GACjC,KAAK,MAAQ,KAAK,MAAQ,OAAOE,GACjC,KAAK,MAAQ,KAAK,MAAQ,OAAOC,GACjC,KAAK,MAAQ,KAAK,MAAQ,OAAOC,GAEjC,KAAK,KAAQ,OAAOC,GACpB,KAAK,MAAQ,OAAOE,GACpB,KAAK,MAAQ,OAAOC,GACpB,KAAK,MAAQ,OAAOC,GAEpB,KAAK,MACL,KAAK,MACL,KAAK,MACL,KAAK,MACL,KAAK,MACJ,OAAOC,GAER,KAAK,MACL,KAAK,MACL,KAAK,MACJ,OAAOE,GAER,KAAK,MACL,KAAK,MACL,KAAK,MACL,KAAK,MACJ,OAAOC,GAER,KAAK,MACL,KAAK,MACL,KAAK,MACL,KAAK,MACJ,OAAOC,GAIV,CA2BkBK,CAAoBH,EAAW7kK,KAIhD,IAIKilK,GAAiB,WAEtB,SAAAA,EAAa32J,IAAKzH,EAAAA,EAAAA,GAAA,KAAAo+J,GAEjB9mK,KAAKmQ,GAAKA,EAEVnQ,KAAK+mK,IAAM,GACX/mK,KAAKkgC,IAAM,CAAC,CAEb,CAaC,OAbAv1B,EAAAA,EAAAA,GAAAm8J,EAAA,EAAA7gK,IAAA,WAAApG,MAED,SAAUiyC,EAAIjyC,EAAO6mG,GAIpB,IAFA,IAAMqgE,EAAM/mK,KAAK+mK,IAEPnjK,EAAI,EAAGI,EAAI+iK,EAAIxkK,OAAQqB,IAAMI,IAAMJ,EAAI,CAEhD,IAAMyS,EAAI0wJ,EAAKnjK,GACfyS,EAAEyqJ,SAAUhvH,EAAIjyC,EAAOwW,EAAElG,IAAMu2F,EAEhC,CAED,KAACogE,CAAA,CAtBqB,GA8BjBE,GAAa,sBAWnB,SAASC,GAAYtmG,EAAWumG,GAE/BvmG,EAAUomG,IAAIzkK,KAAM4kK,GACpBvmG,EAAUzgC,IAAKgnI,EAAc/2J,IAAO+2J,CAErC,CAEA,SAASC,GAAcT,EAAYjE,EAAM9hG,GAExC,IAAM3wB,EAAO02H,EAAWvmK,KACvBinK,EAAap3H,EAAKztC,OAKnB,IAFAykK,GAAWK,UAAY,IAER,CAEd,IAAM19H,EAAQq9H,GAAWhzC,KAAMhkF,GAC9Bs3H,EAAWN,GAAWK,UAEnBl3J,EAAKw5B,EAAO,GACV49H,EAA2B,MAAf59H,EAAO,GACxB69H,EAAY79H,EAAO,GAIpB,GAFK49H,IAAYp3J,GAAU,QAERhP,IAAdqmK,GAAyC,MAAdA,GAAqBF,EAAW,IAAMF,EAAa,CAIlFH,GAAYtmG,OAAyBx/D,IAAdqmK,EACtB,IAAIf,GAAet2J,EAAIu2J,EAAYjE,GACnC,IAAImE,GAAkBz2J,EAAIu2J,EAAYjE,IAEvC,KAED,CAIC,IACIr1G,EADQuT,EAAUzgC,IACN/vB,QAEFhP,IAATisD,GAGJ65G,GAAYtmG,EADZvT,EAAO,IAAI05G,GAAmB32J,IAK/BwwD,EAAYvT,CAId,CAED,CAEA,IAEMq6G,GAAa,WAElB,SAAAA,EAAa31H,EAAIggH,IAAUppJ,EAAAA,EAAAA,GAAA,KAAA++J,GAE1BznK,KAAK+mK,IAAM,GACX/mK,KAAKkgC,IAAM,CAAC,EAIZ,IAFA,IAAMl8B,EAAI8tC,EAAG41H,oBAAqB5V,EAAS,OAEjCluJ,EAAI,EAAGA,EAAII,IAAMJ,EAAI,CAE9B,IAAM8wJ,EAAO5iH,EAAG61H,iBAAkB7V,EAASluJ,GAG3CujK,GAAczS,EAFN5iH,EAAG81H,mBAAoB9V,EAAS4C,EAAKv0J,MAEnBH,KAE3B,CAED,CAiDC,OAjDA2K,EAAAA,EAAAA,GAAA88J,EAAA,EAAAxhK,IAAA,WAAApG,MAED,SAAUiyC,EAAI3xC,EAAMN,EAAO6mG,GAE1B,IAAMrwF,EAAIrW,KAAKkgC,IAAK//B,QAETgB,IAANkV,GAAkBA,EAAEyqJ,SAAUhvH,EAAIjyC,EAAO6mG,EAE/C,GAAC,CAAAzgG,IAAA,cAAApG,MAED,SAAaiyC,EAAI9T,EAAQ79B,GAExB,IAAMyQ,EAAIotB,EAAQ79B,QAEPgB,IAANyP,GAAkB5Q,KAAK8gK,SAAUhvH,EAAI3xC,EAAMyQ,EAEjD,IAAC,EAAA3K,IAAA,SAAApG,MAED,SAAeiyC,EAAIi1H,EAAKz/H,EAAQo/D,GAE/B,IAAM,IAAI9iG,EAAI,EAAGI,EAAI+iK,EAAIxkK,OAAQqB,IAAMI,IAAMJ,EAAI,CAEhD,IAAMyS,EAAI0wJ,EAAKnjK,GACdgN,EAAI02B,EAAQjxB,EAAElG,KAEQ,IAAlBS,EAAEyvB,aAGNhqB,EAAEyqJ,SAAUhvH,EAAIlhC,EAAE/Q,MAAO6mG,EAI3B,CAED,GAAC,CAAAzgG,IAAA,eAAApG,MAED,SAAqBknK,EAAKz/H,GAIzB,IAFA,IAAMt0B,EAAI,GAEApP,EAAI,EAAGI,EAAI+iK,EAAIxkK,OAAQqB,IAAMI,IAAMJ,EAAI,CAEhD,IAAMyS,EAAI0wJ,EAAKnjK,GACVyS,EAAElG,MAAMm3B,GAASt0B,EAAE1Q,KAAM+T,EAE/B,CAEA,OAAOrD,CAER,KAACy0J,CAAA,CAnEiB,GAuEnB,SAASI,GAAa/1H,EAAIjwC,EAAMqoC,GAE/B,IAAMuN,EAAS3F,EAAGg2H,aAAcjmK,GAKhC,OAHAiwC,EAAGi2H,aAActwH,EAAQvN,GACzB4H,EAAGk2H,cAAevwH,GAEXA,CAER,CAEA,IAAIwwH,GAAiB,EAqCrB,SAASC,GAAiBp2H,EAAI2F,EAAQ51C,GAErC,IAAMsmK,EAASr2H,EAAGs2H,mBAAoB3wH,EAAQ,OACxC4wH,EAASv2H,EAAGw2H,iBAAkB7wH,GAASuhC,OAE7C,GAAKmvF,GAAqB,KAAXE,EAAgB,MAAO,GAEtC,IAAME,EAAe,iBAAiBv0C,KAAMq0C,GAC5C,GAAKE,EAAe,CAKnB,IAAMC,EAAY79H,SAAU49H,EAAc,IAC1C,OAAO1mK,EAAKm7B,cAAgB,OAASqrI,EAAS,OAjDhD,SAAuBn+H,EAAQs+H,GAQ9B,IANA,IAAMnJ,EAAQn1H,EAAOmnB,MAAO,MACtBo3G,EAAS,GAETvwJ,EAAO9D,KAAKuC,IAAK6xJ,EAAY,EAAG,GAChC/2I,EAAKrd,KAAKsC,IAAK8xJ,EAAY,EAAGnJ,EAAM98J,QAEhCqB,EAAIsU,EAAMtU,EAAI6tB,EAAI7tB,IAAO,CAElC,IAAM8lC,EAAO9lC,EAAI,EACjB6kK,EAAOnmK,KAAK,GAAD7C,OAAKiqC,IAAS8+H,EAAY,IAAM,IAAG,KAAA/oK,OAAIiqC,EAAI,MAAAjqC,OAAK4/J,EAAOz7J,IAEnE,CAEA,OAAO6kK,EAAOh7H,KAAM,KAErB,CAgCyDi7H,CAAc52H,EAAG62H,gBAAiBlxH,GAAU+wH,EAEpG,CAEC,OAAOH,CAIT,CAEA,SAASO,GAA0BC,EAAcz8H,GAEhD,IAAM6nF,EA1CP,SAAgC7nF,GAE/B,OAASA,GAER,KAAK2E,GACJ,MAAO,CAAE,SAAU,aACpB,KAAKD,GACJ,MAAO,CAAE,OAAQ,aAClB,QAEC,OADAjuC,QAAQC,KAAM,4CAA6CspC,GACpD,CAAE,SAAU,aAItB,CA4BoB08H,CAAuB18H,GAC1C,MAAO,QAAUy8H,EAAe,mCAAqC50C,EAAY,GAAMA,EAAY,GAAM,KAE1G,CAEA,SAAS80C,GAAwBF,EAAc7hG,GAE9C,IAAIgiG,EAEJ,OAAShiG,GAER,KAAK8/C,GACJkiD,EAAkB,SAClB,MAED,KAAKjiD,GACJiiD,EAAkB,WAClB,MAED,KAAKhiD,GACJgiD,EAAkB,kBAClB,MAED,KAAK/hD,GACJ+hD,EAAkB,aAClB,MAED,KAAK9hD,GACJ8hD,EAAkB,SAClB,MAED,QACCnmK,QAAQC,KAAM,+CAAgDkkE,GAC9DgiG,EAAkB,SAIpB,MAAO,QAAUH,EAAe,2BAA6BG,EAAkB,yBAEhF,CA+DA,SAASC,GAAiB/+H,GAEzB,MAAkB,KAAXA,CAER,CAEA,SAASg/H,GAAkBh/H,EAAQsM,GAElC,IAAM2yH,EAAqB3yH,EAAW4yH,oBAAsB5yH,EAAW6yH,iBAAmB7yH,EAAW8yH,4BAErG,OAAOp/H,EACLyD,QAAS,kBAAmB6I,EAAW+yH,cACvC57H,QAAS,mBAAoB6I,EAAWgzH,eACxC77H,QAAS,uBAAwB6I,EAAW6yH,kBAC5C17H,QAAS,yBAA0Bw7H,GACnCx7H,QAAS,wBAAyB6I,EAAWizH,mBAC7C97H,QAAS,oBAAqB6I,EAAWkzH,gBACzC/7H,QAAS,mBAAoB6I,EAAWmzH,eACxCh8H,QAAS,yBAA0B6I,EAAWozH,oBAC9Cj8H,QAAS,oCAAqC6I,EAAW8yH,6BACzD37H,QAAS,0BAA2B6I,EAAW4yH,qBAC/Cz7H,QAAS,2BAA4B6I,EAAWqzH,qBAEnD,CAEA,SAASC,GAA0B5/H,EAAQsM,GAE1C,OAAOtM,EACLyD,QAAS,uBAAwB6I,EAAWuzH,mBAC5Cp8H,QAAS,yBAA4B6I,EAAWuzH,kBAAoBvzH,EAAWwzH,oBAElF,CAIA,IAAMC,GAAiB,mCAEvB,SAASC,GAAiBhgI,GAEzB,OAAOA,EAAOyD,QAASs8H,GAAgBE,GAExC,CAEA,SAASA,GAAiBxgI,EAAOygI,GAEhC,IAAMlgI,EAASm4G,GAAa+nB,GAE5B,QAAgBjpK,IAAX+oC,EAEJ,MAAM,IAAIxnC,MAAO,6BAA+B0nK,EAAU,KAI3D,OAAOF,GAAiBhgI,EAEzB,CAIA,IAAMmgI,GAAoB,+IAE1B,SAASC,GAAapgI,GAErB,OAAOA,EAAOyD,QAAS08H,GAAmBE,GAE3C,CAEA,SAASA,GAAc5gI,EAAOriC,EAAOu3I,EAAK2rB,GAIzC,IAFA,IAAItgI,EAAS,GAEHtmC,EAAI+mC,SAAUrjC,GAAS1D,EAAI+mC,SAAUk0G,GAAOj7I,IAErDsmC,GAAUsgI,EACR78H,QAAS,eAAgB,KAAO/pC,EAAI,MACpC+pC,QAAS,uBAAwB/pC,GAIpC,OAAOsmC,CAER,CAIA,SAASugI,GAAmBj0H,GAE3B,IAAIk0H,EAAkB,aAAel0H,EAAWlhC,UAAY,sBAAwBkhC,EAAWlhC,UAAY,QAgB3G,MAd8B,UAAzBkhC,EAAWlhC,UAEfo1J,GAAmB,2BAEiB,YAAzBl0H,EAAWlhC,UAEtBo1J,GAAmB,6BAEiB,SAAzBl0H,EAAWlhC,YAEtBo1J,GAAmB,2BAIbA,CAER,CAkHA,SAASC,GAAc50H,EAAUyrD,EAAUhrD,EAAYw6G,GAKtD,IAmBI4Z,EAAcC,EAnBZ/4H,EAAKiE,EAASk/E,aAEd1/E,EAAUiB,EAAWjB,QAEvBvH,EAAewI,EAAWxI,aAC1BR,EAAiBgJ,EAAWhJ,eAE1Bs9H,EA5HP,SAAsCt0H,GAErC,IAAIs0H,EAAsB,uBAgB1B,OAdKt0H,EAAWu0H,gBAAkBtmD,EAEjCqmD,EAAsB,qBAEXt0H,EAAWu0H,gBAAkBrmD,EAExComD,EAAsB,0BAEXt0H,EAAWu0H,gBAAkBpmD,IAExCmmD,EAAsB,sBAIhBA,CAER,CAwG6BE,CAA6Bx0H,GACnDy0H,EAvGP,SAAmCz0H,GAElC,IAAIy0H,EAAmB,mBAEvB,GAAKz0H,EAAW44F,OAEf,OAAS54F,EAAW00H,YAEnB,KAAKt6H,GACL,KAAKw2E,GACJ6jD,EAAmB,mBACnB,MAED,KAAK3jD,GACJ2jD,EAAmB,sBAOtB,OAAOA,CAER,CAgF0BE,CAA0B30H,GAC7C40H,EA/EP,SAAmC50H,GAElC,IAAI40H,EAAmB,yBAElB50H,EAAW44F,QAEN54F,EAAW00H,aAEd9jD,KAEJgkD,EAAmB,0BAOtB,OAAOA,CAER,CA4D0BC,CAA0B70H,GAC7C80H,EA3DP,SAAuC90H,GAEtC,IAAI80H,EAAuB,uBAE3B,GAAK90H,EAAW44F,OAEf,OAAS54F,EAAW64F,SAEnB,KAAK3oB,GACJ4kD,EAAuB,2BACvB,MAED,KAAK3kD,GACJ2kD,EAAuB,sBACvB,MAED,KAAK1kD,GACJ0kD,EAAuB,sBAO1B,OAAOA,CAER,CAiC8BC,CAA8B/0H,GACrDg1H,EAhCP,SAA6Bh1H,GAE5B,IAAMi1H,EAAcj1H,EAAWk1H,mBAE/B,GAAqB,OAAhBD,EAAuB,OAAO,KAEnC,IAAME,EAASv3J,KAAKk5B,KAAMm+H,GAAgB,EAEpCG,EAAc,EAAMH,EAI1B,MAAO,CAAEI,WAFU,GAAQ,EAAIz3J,KAAKuC,IAAKvC,KAAK0F,IAAK,EAAG6xJ,GAAU,MAE3CC,YAAAA,EAAaD,OAAAA,EAEnC,CAkB0BG,CAAoBt1H,GAEvCu1H,EAAmBv1H,EAAW4qG,SAAW,GA1ShD,SAA6B5qG,GAS5B,MAPe,CACZA,EAAWw1H,sBAA2Bx1H,EAAWk1H,oBAAsBl1H,EAAW+3F,SAAW/3F,EAAWy1H,uBAAyBz1H,EAAWu3F,oBAAsBv3F,EAAW8hE,aAAuC,aAAxB9hE,EAAW01H,SAA4B,kDAAoD,IACvR11H,EAAW21H,oBAAsB31H,EAAW++G,yBAA4B/+G,EAAW41H,2BAA6B,wCAA0C,GAC1J51H,EAAW61H,sBAAwB71H,EAAW81H,6BAAiC,2CAA6C,IAC5H91H,EAAW+1H,2BAA6B/1H,EAAW44F,QAAU54F,EAAW6uD,eAAkB7uD,EAAWg2H,kCAAoC,gDAAkD,IAGhLh3G,OAAQyzG,IAAkBx7H,KAAM,KAE/C,CA+RqDg/H,CAAoBj2H,GAElEk2H,EA/RP,SAA0Bn3H,GAEzB,IAAMo3H,EAAS,GAEf,IAAM,IAAMxsK,KAAQo1C,EAAU,CAE7B,IAAM11C,EAAQ01C,EAASp1C,IAER,IAAVN,GAEL8sK,EAAOrqK,KAAM,WAAanC,EAAO,IAAMN,EAExC,CAEA,OAAO8sK,EAAOl/H,KAAM,KAErB,CA+QuBm/H,CAAiBr3H,GAEjCu8G,EAAUhgH,EAAG+6H,gBAGfC,EAAgBt2H,EAAWglG,YAAc,YAAchlG,EAAWglG,YAAc,KAAO,GAEtFhlG,EAAWu2H,sBAEfnC,EAAe,CAEd8B,GAECl3G,OAAQyzG,IAAkBx7H,KAAM,OAEhBlrC,OAAS,IAE1BqoK,GAAgB,OAIjBC,EAAiB,CAEhBkB,EACAW,GAECl3G,OAAQyzG,IAAkBx7H,KAAM,OAEdlrC,OAAS,IAE5BsoK,GAAkB,QAMnBD,EAAe,CAEdH,GAAmBj0H,GAEnB,uBAAyBA,EAAWw2H,WAEpCN,EAEAl2H,EAAWy2H,WAAa,yBAA2B,GACnDz2H,EAAW02H,gBAAkB,+BAAiC,GAE9D12H,EAAW22H,uBAAyB,0BAA4B,GAE9D32H,EAAW42H,QAAU52H,EAAW25F,IAAQ,kBAAoB,GAC5D35F,EAAW42H,QAAU52H,EAAW62H,QAAY,mBAAqB,GAEnE72H,EAAWtW,IAAM,kBAAoB,GACrCsW,EAAW44F,OAAS,qBAAuB,GAC3C54F,EAAW44F,OAAS,WAAag8B,EAAmB,GACpD50H,EAAW43F,SAAW,uBAAyB,GAC/C53F,EAAW83F,MAAQ,oBAAsB,GACzC93F,EAAWw4F,YAAc,0BAA4B,GACrDx4F,EAAW+3F,QAAU,sBAAwB,GAC7C/3F,EAAWi4F,UAAY,wBAA0B,GAC/Cj4F,EAAWi4F,WAAaj4F,EAAW82H,qBAAyB,gCAAkC,GAC9F92H,EAAWi4F,WAAaj4F,EAAWy1H,sBAA0B,iCAAmC,GAElGz1H,EAAWq3F,aAAe,2BAA6B,GACvDr3F,EAAWs3F,sBAAwB,qCAAuC,GAC1Et3F,EAAWu3F,mBAAqB,kCAAoC,GAEpEv3F,EAAWw3F,eAAiB,6BAA+B,GAC3Dx3F,EAAWy3F,wBAA0B,uCAAyC,GAE9Ez3F,EAAWm4F,iBAAmBn4F,EAAW22H,uBAAyB,8BAAgC,GAElG32H,EAAWy4F,YAAc,0BAA4B,GACrDz4F,EAAW04F,qBAAuB,mCAAqC,GACvE14F,EAAW24F,iBAAmB,+BAAiC,GAE/D34F,EAAWs4F,aAAe,2BAA6B,GACvDt4F,EAAWu4F,aAAe,2BAA6B,GACvDv4F,EAAW23F,SAAW,uBAAyB,GAE/C33F,EAAW6uD,aAAe,2BAA6B,GACvD7uD,EAAWk5F,gBAAkB,8BAAgC,GAC7Dl5F,EAAWm5F,aAAe,2BAA6B,GAEvDn5F,EAAW6hH,cAAgB,4BAA8B,GACzD7hH,EAAW8hH,kBAAoB,gCAAkC,GAEjE9hH,EAAW+2H,eAAiB,sBAAwB,GACpD/2H,EAAW6hE,aAAe,oBAAsB,GAChD7hE,EAAWg3H,aAAe,0BAA4B,GACtDh3H,EAAWi3H,UAAY,iBAAmB,GAC1Cj3H,EAAWk3H,cAAgB,0BAA4B,GAEvDl3H,EAAW8hE,YAAc,sBAAwB,GAEjD9hE,EAAWm3H,SAAW,uBAAyB,GAE/Cn3H,EAAW4pH,aAAe,2BAA6B,GACvD5pH,EAAWmqE,eAA2C,IAA3BnqE,EAAW8hE,YAAwB,2BAA6B,GACzF9hE,EAAWoqE,aAAepqE,EAAW4qG,SAAa,0BAA4B,GAC9E5qG,EAAWypH,kBAAoB,GAAKzpH,EAAW4qG,SAAa,+BAAiC,GAC7F5qG,EAAWypH,kBAAoB,GAAKzpH,EAAW4qG,SAAa,uCAAyC5qG,EAAWo3H,mBAAqB,GACrIp3H,EAAWypH,kBAAoB,GAAKzpH,EAAW4qG,SAAa,8BAAgC5qG,EAAWypH,kBAAoB,GAC7HzpH,EAAW0iE,YAAc,uBAAyB,GAClD1iE,EAAWq3H,UAAY,qBAAuB,GAE9Cr3H,EAAWs3H,iBAAmB,wBAA0B,GACxDt3H,EAAWs3H,iBAAmB,WAAahD,EAAsB,GAEjEt0H,EAAWwhE,gBAAkB,8BAAgC,GAE7DxhE,EAAW++G,uBAAyB,0BAA4B,GAC9D/+G,EAAW++G,wBAA0B/+G,EAAW41H,2BAA+B,8BAAgC,GAEjH,4BACA,gCACA,iCACA,2BACA,6BACA,+BACA,+BAEA,wBAEA,mCAEA,SAEA,8BAEA,kCAEA,SAEA,2BACA,yBACA,qBAEA,qBAEA,4BAEA,SAEA,iCAEA,0BAEA,6BAEA,0BAEA,SAEA,2EAEA,iCACA,iCACA,iCACA,iCAEA,4BAEA,mCACA,mCACA,mCACA,mCAEA,UAEA,mCACA,mCACA,mCACA,mCAEA,WAEA,SAEA,sBAEA,8BACA,+BAEA,SAEA,MAEC52G,OAAQyzG,IAAkBx7H,KAAM,MAElCo9H,EAAiB,CAEhBkB,EAEAtB,GAAmBj0H,GAEnB,uBAAyBA,EAAWw2H,WAEpCN,EAEEl2H,EAAW42H,QAAU52H,EAAW25F,IAAQ,kBAAoB,GAC5D35F,EAAW42H,QAAU52H,EAAW62H,QAAY,mBAAqB,GAEnE72H,EAAWtW,IAAM,kBAAoB,GACrCsW,EAAW03F,OAAS,qBAAuB,GAC3C13F,EAAW44F,OAAS,qBAAuB,GAC3C54F,EAAW44F,OAAS,WAAa67B,EAAmB,GACpDz0H,EAAW44F,OAAS,WAAag8B,EAAmB,GACpD50H,EAAW44F,OAAS,WAAak8B,EAAuB,GACxDE,EAAmB,8BAAgCA,EAAiBK,WAAa,GACjFL,EAAmB,+BAAiCA,EAAiBI,YAAc,GACnFJ,EAAmB,0BAA4BA,EAAiBG,OAAS,KAAO,GAChFn1H,EAAW43F,SAAW,uBAAyB,GAC/C53F,EAAW83F,MAAQ,oBAAsB,GACzC93F,EAAWw4F,YAAc,0BAA4B,GACrDx4F,EAAW+3F,QAAU,sBAAwB,GAC7C/3F,EAAWi4F,UAAY,wBAA0B,GAC/Cj4F,EAAWi4F,WAAaj4F,EAAW82H,qBAAyB,gCAAkC,GAC9F92H,EAAWi4F,WAAaj4F,EAAWy1H,sBAA0B,iCAAmC,GAElGz1H,EAAWqtD,UAAY,wBAA0B,GACjDrtD,EAAWq3F,aAAe,2BAA6B,GACvDr3F,EAAWs3F,sBAAwB,qCAAuC,GAC1Et3F,EAAWu3F,mBAAqB,kCAAoC,GAEpEv3F,EAAW6tD,YAAc,0BAA4B,GACrD7tD,EAAWw3F,eAAiB,6BAA+B,GAC3Dx3F,EAAWy3F,wBAA0B,uCAAyC,GAE9Ez3F,EAAWy4F,YAAc,0BAA4B,GACrDz4F,EAAW04F,qBAAuB,mCAAqC,GACvE14F,EAAW24F,iBAAmB,+BAAiC,GAC/D34F,EAAWs4F,aAAe,2BAA6B,GACvDt4F,EAAWu4F,aAAe,2BAA6B,GAEvDv4F,EAAW23F,SAAW,uBAAyB,GAC/C33F,EAAW6iE,UAAY,wBAA0B,GAEjD7iE,EAAWuuD,MAAQ,oBAAsB,GACzCvuD,EAAW6hH,cAAgB,4BAA8B,GACzD7hH,EAAW8hH,kBAAoB,gCAAkC,GAEjE9hH,EAAW6uD,aAAe,2BAA6B,GACvD7uD,EAAWk5F,gBAAkB,8BAAgC,GAC7Dl5F,EAAWm5F,aAAe,2BAA6B,GAEvDn5F,EAAWu3H,mBAAqB,+BAAiC,GAEjEv3H,EAAW+2H,eAAiB,sBAAwB,GACpD/2H,EAAW6hE,cAAgB7hE,EAAW02H,gBAAkB,oBAAsB,GAC9E12H,EAAWg3H,aAAe,0BAA4B,GACtDh3H,EAAWi3H,UAAY,iBAAmB,GAC1Cj3H,EAAWk3H,cAAgB,0BAA4B,GAEvDl3H,EAAWi5F,YAAc,0BAA4B,GAErDj5F,EAAW8hE,YAAc,sBAAwB,GAEjD9hE,EAAW0iE,YAAc,uBAAyB,GAClD1iE,EAAWq3H,UAAY,qBAAuB,GAE9Cr3H,EAAWs3H,iBAAmB,wBAA0B,GACxDt3H,EAAWs3H,iBAAmB,WAAahD,EAAsB,GAEjEt0H,EAAW82F,mBAAqB,8BAAgC,GAEhE92F,EAAWw3H,wBAA0B,oCAAsC,GAE3Ex3H,EAAW++G,uBAAyB,0BAA4B,GAC9D/+G,EAAW++G,wBAA0B/+G,EAAW41H,2BAA+B,8BAAgC,GAEjH,2BACA,+BACA,+BAEE51H,EAAWwwB,cAAgB6/C,GAAkB,uBAAyB,GACtErwE,EAAWwwB,cAAgB6/C,GAAkBw7B,GAAwC,0BAAK,GAC1F7rG,EAAWwwB,cAAgB6/C,GAAkBkiD,GAAwB,cAAevyH,EAAWwwB,aAAgB,GAEjHxwB,EAAW42F,UAAY,oBAAsB,GAC7C52F,EAAWy3H,OAAS,iBAAmB,GAEvC5rB,GAAsC,wBACtCumB,GAA0B,sBAAuBpyH,EAAWtB,gBAE5DsB,EAAW03H,gBAAkB,yBAA2B13H,EAAW23H,aAAe,GAElF,MAEC34G,OAAQyzG,IAAkBx7H,KAAM,OAMnCO,EAAe87H,GADf97H,EAAek7H,GADfl7H,EAAek8H,GAAiBl8H,GACewI,GACQA,GAIvDhJ,EAAiBs8H,GADjBt8H,EAAiB07H,GADjB17H,EAAiB08H,GAAiB18H,GACiBgJ,GACQA,GAE3DxI,EAAes8H,GAAat8H,GAC5BR,EAAiB88H,GAAa98H,GAEzBgJ,EAAW4qG,WAA+C,IAAnC5qG,EAAWu2H,sBAItCD,EAAgB,oBAEhBlC,EAAe,CACd,oCACA,uBACA,sBACA,6BACCn9H,KAAM,MAAS,KAAOm9H,EAExBC,EAAiB,CAChB,qBACEr0H,EAAWglG,cAAgBvuB,GAAU,GAAK,oDAC1Cz2E,EAAWglG,cAAgBvuB,GAAU,GAAK,oCAC5C,uCACA,4BACA,8BACA,oCACA,qCACA,6CACA,uCACA,uCACA,+CACA,0CACCx/E,KAAM,MAAS,KAAOo9H,GAIzB,IAqGIuD,EAgBApb,EApHEqb,EAAevB,EAAgBjC,EAAiBr9H,EAKhD8gI,EAAiBzG,GAAa/1H,EAAI,MANrBg7H,EAAgBlC,EAAe58H,GAO5CugI,EAAmB1G,GAAa/1H,EAAI,MAAOu8H,GAqBjD,GAnBAv8H,EAAG08H,aAAc1c,EAASwc,GAC1Bx8H,EAAG08H,aAAc1c,EAASyc,QAIcptK,IAAnCq1C,EAAW8kG,oBAEfxpG,EAAG28H,mBAAoB3c,EAAS,EAAGt7G,EAAW8kG,sBAEP,IAA5B9kG,EAAW4pH,cAGtBtuH,EAAG28H,mBAAoB3c,EAAS,EAAG,YAIpChgH,EAAG48H,YAAa5c,GAGX/7G,EAAS44H,MAAMC,kBAAoB,CAEvC,IAAMC,EAAa/8H,EAAGg9H,kBAAmBhd,GAAU94E,OAC7C+1F,EAAYj9H,EAAGw2H,iBAAkBgG,GAAiBt1F,OAClDg2F,EAAcl9H,EAAGw2H,iBAAkBiG,GAAmBv1F,OAExDi2F,GAAW,EACXC,GAAkB,EAEtB,IAAkD,IAA7Cp9H,EAAG41H,oBAAqB5V,EAAS,OAAoB,CAEzDmd,GAAW,EAEX,IAAME,EAAejH,GAAiBp2H,EAAIw8H,EAAgB,UACpDc,EAAiBlH,GAAiBp2H,EAAIy8H,EAAkB,YAE9D1rK,QAAQkC,MACP,oCAAsC+sC,EAAGu9H,WAAzC,sBACqBv9H,EAAG41H,oBAAqB5V,EAAS,OADtD,yBAEuB+c,EAAa,KACpCM,EAAe,KACfC,EAGF,KAA2B,KAAfP,EAEXhsK,QAAQC,KAAM,wCAAyC+rK,GAE9B,KAAdE,GAAoC,KAAhBC,IAE/BE,GAAkB,GAIdA,IAEJlvK,KAAKsvK,YAAc,CAElBL,SAAUA,EAEVJ,WAAYA,EAEZ7gI,aAAc,CAEblpB,IAAKiqJ,EACLQ,OAAQ3E,GAITp9H,eAAgB,CAEf1oB,IAAKkqJ,EACLO,OAAQ1E,IAQZ,CAgEA,OAxDA/4H,EAAG09H,aAAclB,GACjBx8H,EAAG09H,aAAcjB,GAMjBvuK,KAAK6gK,YAAc,WAQlB,YANwB1/J,IAAnBitK,IAEJA,EAAiB,IAAI3G,GAAe31H,EAAIggH,IAIlCsc,CAER,EAMApuK,KAAKozJ,cAAgB,WAQpB,YAN0BjyJ,IAArB6xJ,IAEJA,EAvtBH,SAAkClhH,EAAIggH,GAMrC,IAJA,IAAMlpD,EAAa,CAAC,EAEd5kG,EAAI8tC,EAAG41H,oBAAqB5V,EAAS,OAEjCluJ,EAAI,EAAGA,EAAII,EAAGJ,IAAO,CAE9B,IAAM8wJ,EAAO5iH,EAAG29H,gBAAiB3d,EAASluJ,GACpCzD,EAAOu0J,EAAKv0J,KAEd0zJ,EAAe,EACA,QAAda,EAAK7yJ,OAAiBgyJ,EAAe,GACvB,QAAda,EAAK7yJ,OAAiBgyJ,EAAe,GACvB,QAAda,EAAK7yJ,OAAiBgyJ,EAAe,GAI1CjrD,EAAYzoG,GAAS,CACpB0B,KAAM6yJ,EAAK7yJ,KACXwxJ,SAAUvhH,EAAG49H,kBAAmB5d,EAAS3xJ,GACzC0zJ,aAAcA,EAGhB,CAEA,OAAOjrD,CAER,CA2rBsB+mE,CAAyB79H,EAAIggH,IAI1CkB,CAER,EAIAhzJ,KAAK6rD,QAAU,WAEdmlG,EAAcwD,uBAAwBx0J,MAEtC8xC,EAAG89H,cAAe9d,GAClB9xJ,KAAK8xJ,aAAU3wJ,CAEhB,EAIAnB,KAAKG,KAAOq2C,EAAWw2H,WACvBhtK,KAAKmQ,GAAK83J,KACVjoK,KAAKwhG,SAAWA,EAChBxhG,KAAK6vK,UAAY,EACjB7vK,KAAK8xJ,QAAUA,EACf9xJ,KAAKguC,aAAesgI,EACpBtuK,KAAKwtC,eAAiB+gI,EAEfvuK,IAER,CAEA,IAAI8vK,GAAM,EAEJC,GAAgB,WAErB,SAAAA,KAAcrnK,EAAAA,EAAAA,GAAA,KAAAqnK,GAEb/vK,KAAKgwK,YAAc,IAAIj3G,IACvB/4D,KAAKiwK,cAAgB,IAAIl3G,GAE1B,CAiGC,OAjGApuD,EAAAA,EAAAA,GAAAolK,EAAA,EAAA9pK,IAAA,SAAApG,MAED,SAAQqd,GAEP,IAAM8wB,EAAe9wB,EAAS8wB,aACxBR,EAAiBtwB,EAASswB,eAE1B0iI,EAAoBlwK,KAAKmwK,gBAAiBniI,GAC1CoiI,EAAsBpwK,KAAKmwK,gBAAiB3iI,GAE5C6iI,EAAkBrwK,KAAKswK,2BAA4BpzJ,GAgBzD,OAdkD,IAA7CmzJ,EAAgB75G,IAAK05G,KAEzBG,EAAgBvoJ,IAAKooJ,GACrBA,EAAkBL,cAIiC,IAA/CQ,EAAgB75G,IAAK45G,KAEzBC,EAAgBvoJ,IAAKsoJ,GACrBA,EAAoBP,aAId7vK,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQqd,GAEP,IAE0CtQ,EAFpCyjK,EAAkBrwK,KAAKiwK,cAAczrK,IAAK0Y,GAAWrQ,GAAAC,EAAAA,EAAAA,GAEhCujK,GAAe,IAA1C,IAAAxjK,EAAAE,MAAAH,EAAAC,EAAA7I,KAAAgJ,MAA6C,KAAjCujK,EAAW3jK,EAAA/M,MAEtB0wK,EAAYV,YAEmB,IAA1BU,EAAYV,WAAkB7vK,KAAKgwK,YAAYrkH,OAAQ4kH,EAAYnnH,KAEzE,CAAC,OAAA5oD,GAAAqM,EAAAI,EAAAzM,EAAA,SAAAqM,EAAAK,GAAA,CAID,OAFAlN,KAAKiwK,cAActkH,OAAQzuC,GAEpBld,IAER,GAAC,CAAAiG,IAAA,oBAAApG,MAED,SAAmBqd,GAElB,OAAOld,KAAKmwK,gBAAiBjzJ,EAAS8wB,cAAe79B,EAEtD,GAAC,CAAAlK,IAAA,sBAAApG,MAED,SAAqBqd,GAEpB,OAAOld,KAAKmwK,gBAAiBjzJ,EAASswB,gBAAiBr9B,EAExD,GAAC,CAAAlK,IAAA,UAAApG,MAED,WAECG,KAAKgwK,YAAY9yH,QACjBl9C,KAAKiwK,cAAc/yH,OAEpB,GAAC,CAAAj3C,IAAA,6BAAApG,MAED,SAA4Bqd,GAE3B,IAAM0kB,EAAQ5hC,KAAKiwK,cACfxrK,EAAMm9B,EAAMp9B,IAAK0Y,GASrB,YAPa/b,IAARsD,IAEJA,EAAM,IAAIomD,IACVjpB,EAAMn9B,IAAKyY,EAAUzY,IAIfA,CAER,GAAC,CAAAwB,IAAA,kBAAApG,MAED,SAAiBupD,GAEhB,IAAMxnB,EAAQ5hC,KAAKgwK,YACfQ,EAAQ5uI,EAAMp9B,IAAK4kD,GASvB,YAPejoD,IAAVqvK,IAEJA,EAAQ,IAAIC,GAAkBrnH,GAC9BxnB,EAAMn9B,IAAK2kD,EAAMonH,IAIXA,CAER,KAACT,CAAA,CAxGoB,GA4GhBU,IAAgB9lK,EAAAA,EAAAA,IAErB,SAAA8lK,EAAarnH,IAAO1gD,EAAAA,EAAAA,GAAA,KAAA+nK,GAEnBzwK,KAAKmQ,GAAK2/J,KAEV9vK,KAAKopD,KAAOA,EACZppD,KAAK6vK,UAAY,CAElB,IAID,SAASa,GAAe36H,EAAUo5G,EAAUwhB,EAAYvgI,EAAY+wG,EAAc6P,EAAehW,GAEhG,IAAM41B,EAAiB,IAAIlqC,GACrBmqC,EAAiB,IAAId,GACrBzQ,EAAW,GAEXle,EAAWD,EAAaC,SACxBmU,EAAyBpU,EAAaoU,uBACtCS,EAAiB7U,EAAa6U,eAChC1gJ,EAAY6rI,EAAa7rI,UAEvBw7J,EAAY,CACjBC,kBAAmB,QACnBC,qBAAsB,eACtBC,mBAAoB,SACpBnuE,kBAAmB,QACnBouE,oBAAqB,UACrBC,kBAAmB,QACnBC,iBAAkB,OAClB74H,qBAAsB,WACtBmrD,qBAAsB,WACtB2tE,mBAAoB,SACpBl5D,kBAAmB,QACnBm5D,mBAAoB,SACpBv5D,eAAgB,SAChBw5D,eAAgB,SAChBC,eAAgB,UA6ejB,MAAO,CACNC,cA3eD,SAAwBv0J,EAAU0kF,EAAQ97B,EAAS72B,EAAOjR,GAEzD,IAAMmyG,EAAMlhG,EAAMkhG,IACZtiG,EAAW7P,EAAO6P,SAClB8B,EAAczyB,EAASw0J,uBAAyBziI,EAAMU,YAAc,KAEpEy/F,GAAWlyH,EAASw0J,uBAAyBf,EAAaxhB,GAAW3qJ,IAAK0Y,EAASkyH,QAAUz/F,GAC7F+7H,EAA0Bt8B,GAAcA,EAAOz+F,UAAY22E,GAA4B8nB,EAAOjiG,MAAM1C,OAAS,KAE7GyhI,EAAW4E,EAAW5zJ,EAASrb,MAKT,OAAvBqb,EAAS5H,YAEbA,EAAY6rI,EAAa+T,gBAAiBh4I,EAAS5H,cAEhC4H,EAAS5H,WAE3BzS,QAAQC,KAAM,oCAAqCoa,EAAS5H,UAAW,uBAAwBA,EAAW,YAQ5G,IAWI04B,EAAcR,EACdmkI,EAAsBC,EAZpBh9B,EAAiB/mG,EAASotE,gBAAgBx1G,UAAYooC,EAASotE,gBAAgBj2F,QAAU6oB,EAASotE,gBAAgBpZ,MAClHo+D,OAAyC9+J,IAAnByzI,EAAiCA,EAAeryI,OAAS,EAEjFqrK,EAAqB,EAWzB,QAT2CzsK,IAAtC0sC,EAASotE,gBAAgBx1G,WAAyBmoK,EAAqB,QACnCzsK,IAApC0sC,EAASotE,gBAAgBj2F,SAAuB4oJ,EAAqB,QAClCzsK,IAAnC0sC,EAASotE,gBAAgBpZ,QAAsB+rE,EAAqB,GAOpE1B,EAAW,CAEf,IAAMz0H,EAASy2G,GAAWge,GAE1Bl+H,EAAeyJ,EAAOzJ,aACtBR,EAAiBiK,EAAOjK,cAEzB,MAECQ,EAAe9wB,EAAS8wB,aACxBR,EAAiBtwB,EAASswB,eAE1BqjI,EAAex+H,OAAQn1B,GAEvBy0J,EAAuBd,EAAegB,kBAAmB30J,GACzD00J,EAAyBf,EAAeiB,oBAAqB50J,GAI9D,IAAMsgI,EAAsBznG,EAAS0nG,kBAE/Bs0B,EAAe70J,EAASm8F,UAAY,EACpC24D,EAAe90J,EAAS2mF,UAAY,EACpCouE,EAAiB/0J,EAASmnF,YAAc,EA+I9C,MA7ImB,CAElB+8C,SAAUA,EAEV8qB,SAAUA,EACVc,WAAY9vJ,EAASrb,KAErBmsC,aAAcA,EACdR,eAAgBA,EAChB+H,QAASr4B,EAASq4B,QAElBo8H,qBAAsBA,EACtBC,uBAAwBA,EAExB7E,qBAAsD,IAAjC7vJ,EAAS6vJ,oBAC9BvxB,YAAat+H,EAASs+H,YAEtBlmI,UAAWA,EAEX23J,YAAuC,IAA3BjvI,EAAOorG,gBACnB8jC,iBAA4C,IAA3BlvI,EAAOorG,iBAAqD,OAAzBprG,EAAOqrG,cAE3D8jC,uBAAwBnX,EACxB9gH,eAA0C,OAAxBsoG,EAAiCznG,EAASb,gBAA4D,IAAzCsoG,EAAoB00B,iBAA4B10B,EAAoBvxG,QAAQG,SAAW2E,GACtK7Q,MAAQhjB,EAASgjB,IACjBguG,SAAWhxH,EAASgxH,OACpBkB,SAAWA,EACX87B,WAAY97B,GAAUA,EAAOz+F,QAC7B+6H,mBAAoBA,EACpBt9B,WAAalxH,EAASkxH,SACtBE,QAAUpxH,EAASoxH,MACnBU,cAAgB9xH,EAAS8xH,YACzBT,UAAYrxH,EAASqxH,QACrBE,YAAcvxH,EAASuxH,UACvB6+B,qBAAsBpwJ,EAASwxH,gBAAkBtjB,GACjD6gD,sBAAuB/uJ,EAASwxH,gBAAkBvjB,GAElD4iD,qBAAuB7wJ,EAASgjB,MAAyC,IAAhChjB,EAASgjB,IAAIiyI,gBAA+Bj1J,EAASgjB,IAAIkM,WAAa0E,GAE/G+yD,UAAWmuE,EACXnkC,aAAcmkC,KAAmB90J,EAAS2wH,aAC1CC,sBAAuBkkC,KAAmB90J,EAAS4wH,sBACnDC,mBAAoBikC,KAAmB90J,EAAS6wH,mBAEhD1pC,YAAa4tE,EACbjkC,eAAgBikC,KAAqB/0J,EAAS8wH,eAC9CC,wBAAyBgkC,KAAqB/0J,EAAS+wH,wBAEvDU,kBAAoBzxH,EAASyxH,gBAC7BG,eAAiB5xH,EAAS4xH,aAC1BC,eAAiB7xH,EAAS6xH,aAC1BE,cAAgB/xH,EAAS+xH,YACzBC,uBAAyBhyH,EAASgyH,qBAClCC,mBAAqBjyH,EAASiyH,iBAE9B8+B,QAAiC,IAAzB/wJ,EAASk8F,aAAyBl8F,EAAS82B,WAAa6wE,EAEhEspB,WAAajxH,EAASixH,SACtB90B,UAAW04D,EAEXtiC,cAAgBvyH,EAASuyH,YAEzB1qC,MAAO7nF,EAAS6nF,MAAQ,EACxBszD,gBAAkBn7I,EAASm7I,cAC3BC,oBAAsBp7I,EAASo7I,kBAE/BjzD,aAAcnoF,EAASmoF,aAAe,EACtCqqC,kBAAoBxyH,EAASwyH,gBAC7BC,eAAiBzyH,EAASyyH,aAE1BN,QAASnyH,EAASmyH,QAElBk+B,iBAAqBrwJ,EAASuxH,aAAgB5gG,EAAS+6D,WAAW8O,QAClEW,aAAcn7F,EAASm7F,aACvBm1D,cAAwC,IAA1BtwJ,EAASm7F,gBAA4BxqE,EAAS+6D,WAAW/G,OAAgD,IAAvCh0D,EAAS+6D,WAAW/G,MAAMkT,SAC1G04D,YAAcvwJ,EAASgjB,OAAUhjB,EAASqxH,WAAcrxH,EAASuxH,aAAgBvxH,EAAS+xH,eAAkB/xH,EAASixH,YAAejxH,EAAS8xH,eAAkB9xH,EAAS4xH,gBAAmB5xH,EAAS6xH,gBAAmB7xH,EAAS2wH,gBAAmB3wH,EAAS4wH,yBAA4B5wH,EAAS6wH,sBAAyB7wH,EAAS8wH,kBAAqB9wH,EAAS+wH,2BAA8B/wH,EAASyxH,mBAAsBzxH,EAASwyH,mBAAsBxyH,EAASyyH,gBAAmBzyH,EAASgyH,wBAA2BhyH,EAASiyH,oBAAuBjyH,EAASm7I,iBAAoBn7I,EAASo7I,kBACnkBoV,gBAAsBxwJ,EAASgjB,KAAUhjB,EAASqxH,SAAcrxH,EAASuxH,WAAgBvxH,EAAS+xH,aAAkB/xH,EAASixH,UAAejxH,EAAS8xH,aAAkB9xH,EAAS4xH,cAAmB5xH,EAAS6xH,cAAmB7xH,EAAS6wH,oBAAyB7wH,EAAS8wH,gBAAqB9wH,EAAS+wH,yBAA2B/wH,EAASmoF,aAAe,GAAQnoF,EAASwyH,iBAAsBxyH,EAASyyH,cAAmBzyH,EAASgyH,sBAA2BhyH,EAASiyH,kBAAoBjyH,EAAS6nF,MAAQ,GAAQ7nF,EAASm7I,eAAoBn7I,EAASo7I,sBAA0Bp7I,EAASyxH,gBAEjkBwB,MAAQA,EACRi9B,QAAyB,IAAjBlwJ,EAASizH,IACjBk9B,QAAWl9B,GAAOA,EAAIiiC,UAEtB95D,cAAgBp7F,EAASo7F,YAEzBN,gBAAiB96F,EAAS86F,gBAC1Bu9C,uBAAwBA,EAExBoY,UAAmC,IAAzB3vI,EAAOw1E,cAEjB4sD,kBAAoDj/J,IAAtC0sC,EAASotE,gBAAgBx1G,SACvCk7G,kBAAkDx/G,IAApC0sC,EAASotE,gBAAgBj2F,OACvC47F,iBAAgDz/G,IAAnC0sC,EAASotE,gBAAgBpZ,MACtCo+D,kBAAmBA,EACnB2N,mBAAoBA,EAEpBrE,aAAc3nE,EAAOywE,YAAY9vK,OACjCmnK,eAAgB9nE,EAAO78E,MAAMxiB,OAC7BinK,cAAe5nE,EAAOO,KAAK5/F,OAC3B8mK,iBAAkBznE,EAAOurD,aAAa5qJ,OACtCknK,kBAAmB7nE,EAAO0wE,SAAS/vK,OACnConK,cAAe/nE,EAAO2wE,KAAKhwK,OAE3BqnK,mBAAoBhoE,EAAOirD,qBAAqBtqJ,OAChDsnK,qBAAsBjoE,EAAO8rD,eAAenrJ,OAC5C6mK,oBAAqBxnE,EAAOwrD,cAAc7qJ,OAC1C+mK,4BAA6B1nE,EAAO0nE,4BAEpCS,kBAAmB/uB,EAAS8b,UAC5BkT,oBAAqBhvB,EAAS+b,gBAE9B3pB,UAAWlwH,EAASkwH,UAEpB0gC,iBAAkB/3H,EAAS+G,UAAUF,SAAWkpB,EAAQvjE,OAAS,EACjEwoK,cAAeh1H,EAAS+G,UAAUj7C,KAElCmlE,YAAa9pD,EAASk3B,WAAa2B,EAASixB,YAAc6/C,GAC1DmnD,wBAAyBj4H,EAASi4H,wBAElC1gC,mBAAoBpwH,EAASowH,mBAE7Bp0B,YAAah8F,EAAS+wB,OAASC,EAC/B2/H,UAAW3wJ,EAAS+wB,OAAS22E,EAE7BspD,kBAAoBhxJ,EAASixJ,aAC7BA,aAAcjxJ,EAASixJ,cAAgB,EAEvC7yB,oBAAqBp+H,EAASo+H,oBAE9B0wB,qBAAsB9uJ,EAASkzB,YAAclzB,EAASkzB,WAAW6qG,YACjEkxB,mBAAoBjvJ,EAASkzB,YAAclzB,EAASkzB,WAAW8qG,UAC/DmxB,qBAAsBnvJ,EAASkzB,YAAclzB,EAASkzB,WAAW+qG,YACjEoxB,0BAA2BrvJ,EAASkzB,YAAclzB,EAASkzB,WAAWgrG,iBAEtEgxB,2BAA4BhrB,GAAYhxG,EAAWomB,IAAK,kBACxD81G,6BAA8BlrB,GAAYhxG,EAAWomB,IAAK,sBAC1Dg2G,kCAAmCprB,GAAYhxG,EAAWomB,IAAK,0BAE/Dg8G,sBAAuBt1J,EAASs1J,wBAMlC,EA0RCC,mBAxRD,SAA6Bj8H,GAE5B,IAAM4oB,EAAQ,GAad,GAXK5oB,EAAW01H,SAEf9sG,EAAM98D,KAAMk0C,EAAW01H,WAIvB9sG,EAAM98D,KAAMk0C,EAAWm7H,sBACvBvyG,EAAM98D,KAAMk0C,EAAWo7H,8BAIIzwK,IAAvBq1C,EAAWjB,QAEf,IAAM,IAAMp1C,KAAQq2C,EAAWjB,QAE9B6pB,EAAM98D,KAAMnC,GACZi/D,EAAM98D,KAAMk0C,EAAWjB,QAASp1C,IAgBlC,OAVwC,IAAnCq2C,EAAWu2H,uBAcjB,SAAuC3tG,EAAO5oB,GAE7C4oB,EAAM98D,KAAMk0C,EAAWlhC,WACvB8pD,EAAM98D,KAAMk0C,EAAWtB,gBACvBkqB,EAAM98D,KAAMk0C,EAAW00H,YACvB9rG,EAAM98D,KAAMk0C,EAAWk1H,oBACvBtsG,EAAM98D,KAAMk0C,EAAW64F,SACvBjwE,EAAM98D,KAAMk0C,EAAWi3H,WACvBruG,EAAM98D,KAAMk0C,EAAW62H,SACvBjuG,EAAM98D,KAAMk0C,EAAWwhE,iBACvB54C,EAAM98D,KAAMk0C,EAAWypH,mBACvB7gG,EAAM98D,KAAMk0C,EAAWk8H,qBACvBtzG,EAAM98D,KAAMk0C,EAAW+yH,cACvBnqG,EAAM98D,KAAMk0C,EAAWkzH,gBACvBtqG,EAAM98D,KAAMk0C,EAAWgzH,eACvBpqG,EAAM98D,KAAMk0C,EAAW6yH,kBACvBjqG,EAAM98D,KAAMk0C,EAAWmzH,eACvBvqG,EAAM98D,KAAMk0C,EAAWizH,mBACvBrqG,EAAM98D,KAAMk0C,EAAWozH,oBACvBxqG,EAAM98D,KAAMk0C,EAAWqzH,sBACvBzqG,EAAM98D,KAAMk0C,EAAW4yH,qBACvBhqG,EAAM98D,KAAMk0C,EAAW8yH,6BACvBlqG,EAAM98D,KAAMk0C,EAAWu0H,eACvB3rG,EAAM98D,KAAMk0C,EAAWwwB,aACvB5H,EAAM98D,KAAMk0C,EAAWuzH,mBACvB3qG,EAAM98D,KAAMk0C,EAAWwzH,qBACvB5qG,EAAM98D,KAAMk0C,EAAW23H,aAExB,CAxCEwE,CAA8BvzG,EAAO5oB,GA0CvC,SAAqC4oB,EAAO5oB,GAE3Co6H,EAAegC,aAEVp8H,EAAW4qG,UACfwvB,EAAeiC,OAAQ,GACnBr8H,EAAW22H,wBACfyD,EAAeiC,OAAQ,GACnBr8H,EAAWy2H,YACf2D,EAAeiC,OAAQ,GACnBr8H,EAAW02H,iBACf0D,EAAeiC,OAAQ,GACnBr8H,EAAWtW,KACf0wI,EAAeiC,OAAQ,GACnBr8H,EAAW03F,QACf0iC,EAAeiC,OAAQ,GACnBr8H,EAAW44F,QACfwhC,EAAeiC,OAAQ,GACnBr8H,EAAW43F,UACfwiC,EAAeiC,OAAQ,GACnBr8H,EAAW83F,OACfsiC,EAAeiC,OAAQ,GACnBr8H,EAAWw4F,aACf4hC,EAAeiC,OAAQ,GACnBr8H,EAAW+3F,SACfqiC,EAAeiC,OAAQ,IACnBr8H,EAAWi4F,WACfmiC,EAAeiC,OAAQ,IACnBr8H,EAAW82H,sBACfsD,EAAeiC,OAAQ,IACnBr8H,EAAWy1H,uBACf2E,EAAeiC,OAAQ,IACnBr8H,EAAWqtD,WACf+sE,EAAeiC,OAAQ,IACnBr8H,EAAWq3F,cACf+iC,EAAeiC,OAAQ,IACnBr8H,EAAWs3F,uBACf8iC,EAAeiC,OAAQ,IACnBr8H,EAAWu3F,oBACf6iC,EAAeiC,OAAQ,IACnBr8H,EAAW6tD,aACfusE,EAAeiC,OAAQ,IACnBr8H,EAAWw3F,gBACf4iC,EAAeiC,OAAQ,IACnBr8H,EAAWy3F,yBACf2iC,EAAeiC,OAAQ,IACnBr8H,EAAWm4F,iBACfiiC,EAAeiC,OAAQ,IACnBr8H,EAAWy4F,aACf2hC,EAAeiC,OAAQ,IACnBr8H,EAAWs4F,cACf8hC,EAAeiC,OAAQ,IACnBr8H,EAAWu4F,cACf6hC,EAAeiC,OAAQ,IACnBr8H,EAAWi5F,aACfmhC,EAAeiC,OAAQ,IACnBr8H,EAAW23F,UACfyiC,EAAeiC,OAAQ,IACnBr8H,EAAW6iE,WACfu3D,EAAeiC,OAAQ,IACnBr8H,EAAW6hE,cACfu4D,EAAeiC,OAAQ,IACnBr8H,EAAWg3H,cACfoD,EAAeiC,OAAQ,IACnBr8H,EAAWi3H,WACfmD,EAAeiC,OAAQ,IACnBr8H,EAAW+2H,gBACfqD,EAAeiC,OAAQ,IACnBr8H,EAAWk3H,eACfkD,EAAeiC,OAAQ,IAExBzzG,EAAM98D,KAAMsuK,EAAez8G,MAC3By8G,EAAegC,aAEVp8H,EAAW25F,KACfygC,EAAeiC,OAAQ,GACnBr8H,EAAW42H,QACfwD,EAAeiC,OAAQ,GACnBr8H,EAAW8hE,aACfs4D,EAAeiC,OAAQ,GACnBr8H,EAAW++G,wBACfqb,EAAeiC,OAAQ,GACnBr8H,EAAWm3H,UACfiD,EAAeiC,OAAQ,GACnBr8H,EAAW4pH,cACfwQ,EAAeiC,OAAQ,GACnBr8H,EAAWmqE,cACfiwD,EAAeiC,OAAQ,GACnBr8H,EAAWoqE,aACfgwD,EAAeiC,OAAQ,GACnBr8H,EAAW82F,oBACfsjC,EAAeiC,OAAQ,GACnBr8H,EAAWs3H,kBACf8C,EAAeiC,OAAQ,GACnBr8H,EAAWw3H,yBACf4C,EAAeiC,OAAQ,IACnBr8H,EAAW0iE,aACf03D,EAAeiC,OAAQ,IACnBr8H,EAAWq3H,WACf+C,EAAeiC,OAAQ,IACnBr8H,EAAW03H,iBACf0C,EAAeiC,OAAQ,IACnBr8H,EAAW42F,WACfwjC,EAAeiC,OAAQ,IACnBr8H,EAAW04F,sBACf0hC,EAAeiC,OAAQ,IACnBr8H,EAAW24F,kBACfyhC,EAAeiC,OAAQ,IACnBr8H,EAAW6uD,cACfurE,EAAeiC,OAAQ,IACnBr8H,EAAWk5F,iBACfkhC,EAAeiC,OAAQ,IACnBr8H,EAAWm5F,cACfihC,EAAeiC,OAAQ,IACnBr8H,EAAWuuD,OACf6rE,EAAeiC,OAAQ,IACnBr8H,EAAW6hH,eACfuY,EAAeiC,OAAQ,IACnBr8H,EAAW8hH,mBACfsY,EAAeiC,OAAQ,IACnBr8H,EAAWu3H,oBACf6C,EAAeiC,OAAQ,IACnBr8H,EAAWy3H,QACf2C,EAAeiC,OAAQ,IAExBzzG,EAAM98D,KAAMsuK,EAAez8G,KAE5B,CAxKE2+G,CAA4B1zG,EAAO5oB,GACnC4oB,EAAM98D,KAAMyzC,EAASb,iBAItBkqB,EAAM98D,KAAMk0C,EAAWg8H,uBAEhBpzG,EAAM3xB,MAEd,EAmPCozH,YAlFD,SAAsB3jJ,GAErB,IACI0wB,EADEs+H,EAAW4E,EAAW5zJ,EAASrb,MAGrC,GAAKqqK,EAAW,CAEf,IAAMz0H,EAASy2G,GAAWge,GAC1Bt+H,EAAW6sG,GAAcr6H,MAAOq3B,EAAO7J,SAExC,MAECA,EAAW1wB,EAAS0wB,SAIrB,OAAOA,CAER,EAiECmlI,eA/DD,SAAyBv8H,EAAYgrD,GAKpC,IAHA,IAAIswD,EAGMr/I,EAAI,EAAGugK,EAAK1T,EAAS/8J,OAAQkQ,EAAIugK,EAAIvgK,IAAO,CAErD,IAAMwgK,EAAqB3T,EAAU7sJ,GAErC,GAAKwgK,EAAmBzxE,WAAaA,EAAW,IAE/CswD,EAAUmhB,GACCpD,UAEX,KAED,CAED,CASA,YAPiB1uK,IAAZ2wJ,IAEJA,EAAU,IAAI6Y,GAAc50H,EAAUyrD,EAAUhrD,EAAYw6G,GAC5DsO,EAASh9J,KAAMwvJ,IAITA,CAER,EAmCCohB,eAjCD,SAAyBphB,GAExB,GAA8B,MAAtBA,EAAQ+d,UAAkB,CAGjC,IAAMjsK,EAAI07J,EAAS/3J,QAASuqJ,GAC5BwN,EAAU17J,GAAM07J,EAAUA,EAAS/8J,OAAS,GAC5C+8J,EAASz5J,MAGTisJ,EAAQjmG,SAET,CAED,EAoBCsnH,mBAlBD,SAA6Bj2J,GAE5B2zJ,EAAejwI,OAAQ1jB,EAExB,EAgBCoiJ,SAAUA,EACV38G,QAfD,WAECkuH,EAAeluH,SAEhB,EAcD,CAEA,SAASywH,KAER,IAAI7mB,EAAa,IAAI7hE,QAmCrB,MAAO,CACNlmF,IAlCD,SAAcw5B,GAEb,IAAIkC,EAAMqsH,EAAW/nJ,IAAKw5B,GAS1B,YAPa78B,IAAR++B,IAEJA,EAAM,CAAC,EACPqsH,EAAW9nJ,IAAKu5B,EAAQkC,IAIlBA,CAER,EAsBCU,OApBD,SAAiB5C,GAEhBuuH,EAAW5gG,OAAQ3tB,EAEpB,EAiBCqU,OAfD,SAAiBrU,EAAQ/3B,EAAKpG,GAE7B0sJ,EAAW/nJ,IAAKw5B,GAAU/3B,GAAQpG,CAEnC,EAYC8iD,QAVD,WAEC4pG,EAAa,IAAI7hE,OAElB,EASD,CAEA,SAAS2oF,GAAmBl8J,EAAG/E,GAE9B,OAAK+E,EAAEm8J,aAAelhK,EAAEkhK,WAEhBn8J,EAAEm8J,WAAalhK,EAAEkhK,WAEbn8J,EAAEmxH,cAAgBl2H,EAAEk2H,YAExBnxH,EAAEmxH,YAAcl2H,EAAEk2H,YAEdnxH,EAAE+F,SAAS/M,KAAOiC,EAAE8K,SAAS/M,GAEjCgH,EAAE+F,SAAS/M,GAAKiC,EAAE8K,SAAS/M,GAEvBgH,EAAEjI,IAAMkD,EAAElD,EAEdiI,EAAEjI,EAAIkD,EAAElD,EAIRiI,EAAEhH,GAAKiC,EAAEjC,EAIlB,CAEA,SAASojK,GAA0Bp8J,EAAG/E,GAErC,OAAK+E,EAAEm8J,aAAelhK,EAAEkhK,WAEhBn8J,EAAEm8J,WAAalhK,EAAEkhK,WAEbn8J,EAAEmxH,cAAgBl2H,EAAEk2H,YAExBnxH,EAAEmxH,YAAcl2H,EAAEk2H,YAEdnxH,EAAEjI,IAAMkD,EAAElD,EAEdkD,EAAElD,EAAIiI,EAAEjI,EAIRiI,EAAEhH,GAAKiC,EAAEjC,EAIlB,CAGA,SAASqjK,KAER,IAAMC,EAAc,GAChBC,EAAmB,EAEjBzF,EAAS,GACT0F,EAAe,GACfv6D,EAAc,GAYpB,SAASw6D,EAAmB51I,EAAQ6P,EAAU3wB,EAAUo2J,EAAYpkK,EAAGgsG,GAEtE,IAAI24D,EAAaJ,EAAaC,GAgC9B,YA9BoBvyK,IAAf0yK,GAEJA,EAAa,CACZ1jK,GAAI6tB,EAAO7tB,GACX6tB,OAAQA,EACR6P,SAAUA,EACV3wB,SAAUA,EACVo2J,WAAYA,EACZhrC,YAAatqG,EAAOsqG,YACpBp5H,EAAGA,EACHgsG,MAAOA,GAGRu4D,EAAaC,GAAqBG,IAIlCA,EAAW1jK,GAAK6tB,EAAO7tB,GACvB0jK,EAAW71I,OAASA,EACpB61I,EAAWhmI,SAAWA,EACtBgmI,EAAW32J,SAAWA,EACtB22J,EAAWP,WAAaA,EACxBO,EAAWvrC,YAActqG,EAAOsqG,YAChCurC,EAAW3kK,EAAIA,EACf2kK,EAAW34D,MAAQA,GAIpBw4D,IAEOG,CAER,CAsEA,MAAO,CAEN5F,OAAQA,EACR0F,aAAcA,EACdv6D,YAAaA,EAEbr5G,KA1HD,WAEC2zK,EAAmB,EAEnBzF,EAAO1rK,OAAS,EAChBoxK,EAAapxK,OAAS,EACtB62G,EAAY72G,OAAS,CAEtB,EAmHCD,KA3ED,SAAe07B,EAAQ6P,EAAU3wB,EAAUo2J,EAAYpkK,EAAGgsG,GAEzD,IAAM24D,EAAaD,EAAmB51I,EAAQ6P,EAAU3wB,EAAUo2J,EAAYpkK,EAAGgsG,GAE5Eh+F,EAASmoF,aAAe,EAE5BsuE,EAAarxK,KAAMuxK,IAEiB,IAAzB32J,EAASk8F,YAEpBA,EAAY92G,KAAMuxK,GAIlB5F,EAAO3rK,KAAMuxK,EAIf,EA0DCxxK,QAxDD,SAAkB27B,EAAQ6P,EAAU3wB,EAAUo2J,EAAYpkK,EAAGgsG,GAE5D,IAAM24D,EAAaD,EAAmB51I,EAAQ6P,EAAU3wB,EAAUo2J,EAAYpkK,EAAGgsG,GAE5Eh+F,EAASmoF,aAAe,EAE5BsuE,EAAatxK,QAASwxK,IAEc,IAAzB32J,EAASk8F,YAEpBA,EAAY/2G,QAASwxK,GAIrB5F,EAAO5rK,QAASwxK,EAIlB,EAuCCC,OA7BD,WAIC,IAAM,IAAIlwK,EAAI8vK,EAAkBhjE,EAAK+iE,EAAYlxK,OAAQqB,EAAI8sG,EAAI9sG,IAAO,CAEvE,IAAMiwK,EAAaJ,EAAa7vK,GAEhC,GAAuB,OAAlBiwK,EAAW1jK,GAAc,MAE9B0jK,EAAW1jK,GAAK,KAChB0jK,EAAW71I,OAAS,KACpB61I,EAAWhmI,SAAW,KACtBgmI,EAAW32J,SAAW,KACtB22J,EAAW34D,MAAQ,IAEpB,CAED,EAaC5jD,KAvCD,SAAey8G,EAAkBC,GAE3B/F,EAAO1rK,OAAS,GAAI0rK,EAAO32G,KAAMy8G,GAAoBV,IACrDM,EAAapxK,OAAS,GAAIoxK,EAAar8G,KAAM08G,GAAyBT,IACtEn6D,EAAY72G,OAAS,GAAI62G,EAAY9hD,KAAM08G,GAAyBT,GAE1E,EAoCD,CAEA,SAASU,KAER,IAAIC,EAAQ,IAAIxpF,QAqChB,MAAO,CACNlmF,IApCD,SAAcyqC,EAAOklI,GAEpB,IACI3uK,EADE4uK,EAAYF,EAAM1vK,IAAKyqC,GAuB7B,YApBmB9tC,IAAdizK,GAEJ5uK,EAAO,IAAIguK,GACXU,EAAMzvK,IAAKwqC,EAAO,CAAEzpC,KAIf2uK,GAAmBC,EAAU7xK,QAEjCiD,EAAO,IAAIguK,GACXY,EAAU9xK,KAAMkD,IAIhBA,EAAO4uK,EAAWD,GAMb3uK,CAER,EAUCm9C,QARD,WAECuxH,EAAQ,IAAIxpF,OAEb,EAOD,CAEA,SAAS2pF,KAER,IAAMzyE,EAAS,CAAC,EAEhB,MAAO,CAENp9F,IAAK,SAAW68F,GAEf,QAA4BlgG,IAAvBygG,EAAQP,EAAMlxF,IAElB,OAAOyxF,EAAQP,EAAMlxF,IAItB,IAAIy9B,EAEJ,OAASyzD,EAAMx/F,MAEd,IAAK,mBACJ+rC,EAAW,CACV31B,UAAW,IAAIqkB,GACfulE,MAAO,IAAIC,IAEZ,MAED,IAAK,YACJl0D,EAAW,CACVnoC,SAAU,IAAI62B,GACdrkB,UAAW,IAAIqkB,GACfulE,MAAO,IAAIC,GACXhxE,SAAU,EACVk8H,QAAS,EACTC,YAAa,EACb1qD,MAAO,GAER,MAED,IAAK,aACJ30D,EAAW,CACVnoC,SAAU,IAAI62B,GACdulE,MAAO,IAAIC,GACXhxE,SAAU,EACVyxE,MAAO,GAER,MAED,IAAK,kBACJ30D,EAAW,CACV31B,UAAW,IAAIqkB,GACfuxH,SAAU,IAAI/rD,GACdgsD,YAAa,IAAIhsD,IAElB,MAED,IAAK,gBACJl0D,EAAW,CACVi0D,MAAO,IAAIC,GACXr8F,SAAU,IAAI62B,GACdg4I,UAAW,IAAIh4I,GACfi4I,WAAY,IAAIj4I,IAQnB,OAFAslE,EAAQP,EAAMlxF,IAAOy9B,EAEdA,CAER,EAIF,CAiEA,IAAI4mI,GAAc,EAElB,SAASC,GAAsCC,EAAQC,GAEtD,OAASA,EAAOvsC,WAAa,EAAI,IAAQssC,EAAOtsC,WAAa,EAAI,IAAQusC,EAAOz0I,IAAM,EAAI,IAAQw0I,EAAOx0I,IAAM,EAAI,EAEpH,CAEA,SAAS00I,GAAaxkI,EAAY+wG,GA8CjC,IA5CA,IAAMv/G,EAAQ,IAAIyyI,GAEZQ,EA3EP,WAEC,IAAMjzE,EAAS,CAAC,EAEhB,MAAO,CAENp9F,IAAK,SAAW68F,GAEf,QAA4BlgG,IAAvBygG,EAAQP,EAAMlxF,IAElB,OAAOyxF,EAAQP,EAAMlxF,IAItB,IAAIy9B,EAEJ,OAASyzD,EAAMx/F,MAEd,IAAK,mBASL,IAAK,YACJ+rC,EAAW,CACV6+G,WAAY,EACZC,iBAAkB,EAClBC,aAAc,EACdC,cAAe,IAAIx5G,IAEpB,MAED,IAAK,aACJxF,EAAW,CACV6+G,WAAY,EACZC,iBAAkB,EAClBC,aAAc,EACdC,cAAe,IAAIx5G,GACnBo6G,iBAAkB,EAClBC,gBAAiB,KAUpB,OAFA7rD,EAAQP,EAAMlxF,IAAOy9B,EAEdA,CAER,EAIF,CAgBqBknI,GAEd3xK,EAAQ,CAEbklE,QAAS,EAET0sG,KAAM,CACLC,mBAAqB,EACrBC,aAAe,EACfC,YAAc,EACdC,gBAAkB,EAClBC,YAAc,EAEdC,uBAAyB,EACzBC,iBAAmB,EACnBC,gBAAkB,EAClBC,aAAe,GAGhBC,QAAS,CAAE,EAAG,EAAG,GACjBC,MAAO,GACPrD,YAAa,GACbsD,kBAAmB,GACnB9oB,qBAAsB,GACtBC,wBAAyB,GACzB3qD,KAAM,GACNgrD,aAAc,GACdyoB,WAAY,GACZxoB,cAAe,GACfC,gBAAiB,GACjBilB,SAAU,GACVuD,aAAc,KACdC,aAAc,KACd/wJ,MAAO,GACPgxJ,YAAa,GACbroB,eAAgB,GAChBC,kBAAmB,GACnB4kB,KAAM,GACNjJ,4BAA6B,GAIpB1lK,EAAI,EAAGA,EAAI,EAAGA,IAAOT,EAAMuyK,MAAMpzK,KAAM,IAAIg6B,IAErD,IAAM05I,EAAU,IAAI15I,GACds1F,EAAU,IAAIr1F,GACd05I,EAAW,IAAI15I,GA0WrB,MAAO,CACNk2H,MAzWD,SAAgB7wD,EAAQosE,GAIvB,IAFA,IAAIh7J,EAAI,EAAGsE,EAAI,EAAGlF,EAAI,EAEZxO,EAAI,EAAGA,EAAI,EAAGA,IAAOT,EAAMuyK,MAAO9xK,GAAIa,IAAK,EAAG,EAAG,GAE3D,IAAIuwK,EAAoB,EACpBC,EAAc,EACdC,EAAa,EACbC,EAAiB,EACjBC,EAAa,EAEbC,EAAwB,EACxBC,EAAkB,EAClBC,EAAiB,EACjBC,EAAc,EACdU,EAAyB,EAG7Bt0E,EAAOtqC,KAAMm9G,IAKb,IAFA,IAAM0B,GAA4C,IAA5BnI,EAAqC55J,KAAKyF,GAAK,EAE3DjW,EAAI,EAAGwS,EAAIwrF,EAAOr/F,OAAQqB,EAAIwS,EAAGxS,IAAO,CAEjD,IAAMy9F,EAAQO,EAAQh+F,GAEhBi+F,EAAQR,EAAMQ,MACdY,EAAYpB,EAAMoB,UAClB3xE,EAAWuwE,EAAMvwE,SAEjBgsB,EAAcukD,EAAM4tD,QAAU5tD,EAAM4tD,OAAO/uH,IAAQmhE,EAAM4tD,OAAO/uH,IAAI+L,QAAU,KAEpF,GAAKo1D,EAAM+0E,eAEVpjK,GAAK6uF,EAAM7uF,EAAIyvF,EAAY0zE,EAC3B7+J,GAAKuqF,EAAMvqF,EAAImrF,EAAY0zE,EAC3B/jK,GAAKyvF,EAAMzvF,EAAIqwF,EAAY0zE,OAErB,GAAK90E,EAAMg1E,aAEjB,IAAM,IAAIhkK,EAAI,EAAGA,EAAI,EAAGA,IAEvBlP,EAAMuyK,MAAOrjK,GAAI8oC,gBAAiBkmD,EAAMhP,GAAGikF,aAAcjkK,GAAKowF,QAIzD,GAAKpB,EAAMk1E,mBAAqB,CAEtC,IAAM3oI,EAAWhM,EAAMp9B,IAAK68F,GAI5B,GAFAzzD,EAASi0D,MAAM59F,KAAMo9F,EAAMQ,OAAQvtD,eAAgB+sD,EAAMoB,UAAY0zE,GAEhE90E,EAAM+mC,WAAa,CAEvB,IAAM6mB,EAAS5tD,EAAM4tD,OAEfunB,EAAiB3B,EAAYrwK,IAAK68F,GAExCm1E,EAAe/pB,WAAawC,EAAOwnB,KACnCD,EAAe9pB,iBAAmBuC,EAAOynB,WACzCF,EAAe7pB,aAAesC,EAAO5hI,OACrCmpJ,EAAe5pB,cAAgBqC,EAAO0nB,QAEtCxzK,EAAMwyK,kBAAmBX,GAAsBwB,EAC/CrzK,EAAM0pJ,qBAAsBmoB,GAAsBl4H,EAClD35C,EAAM2pJ,wBAAyBkoB,GAAsB3zE,EAAM4tD,OAAOp+I,OAElEwkK,GAED,CAEAlyK,EAAMkvK,YAAa2C,GAAsBpnI,EAEzConI,GAED,MAAO,GAAK3zE,EAAMu1E,YAAc,CAE/B,IAAMhpI,EAAWhM,EAAMp9B,IAAK68F,GAE5BzzD,EAASnoC,SAASs1C,sBAAuBsmD,EAAMrmD,aAE/CpN,EAASi0D,MAAM59F,KAAM49F,GAAQvtD,eAAgBmuD,EAAY0zE,GACzDvoI,EAAS9c,SAAWA,EAEpB8c,EAASo/G,QAAU54I,KAAKgF,IAAKioF,EAAMnoF,OACnC00B,EAASq/G,YAAc74I,KAAKgF,IAAKioF,EAAMnoF,OAAU,EAAImoF,EAAMiB,WAC3D10D,EAAS20D,MAAQlB,EAAMkB,MAEvBp/F,EAAMg/F,KAAM+yE,GAAetnI,EAE3B,IAAMqhH,EAAS5tD,EAAM4tD,OAiBrB,GAfK5tD,EAAMnhE,MAEV/8B,EAAMgqJ,aAAcqoB,GAAgBn0E,EAAMnhE,IAC1Cs1I,IAIAvmB,EAAO4nB,eAAgBx1E,GAElBA,EAAM+mC,YAAa8tC,KAIzB/yK,EAAMkqJ,gBAAiB6nB,GAAejmB,EAAOp+I,OAExCwwF,EAAM+mC,WAAa,CAEvB,IAAMouC,EAAiB3B,EAAYrwK,IAAK68F,GAExCm1E,EAAe/pB,WAAawC,EAAOwnB,KACnCD,EAAe9pB,iBAAmBuC,EAAOynB,WACzCF,EAAe7pB,aAAesC,EAAO5hI,OACrCmpJ,EAAe5pB,cAAgBqC,EAAO0nB,QAEtCxzK,EAAMyyK,WAAYV,GAAesB,EACjCrzK,EAAMiqJ,cAAe8nB,GAAep4H,EAEpCy4H,GAED,CAEAL,GAED,MAAO,GAAK7zE,EAAMy1E,gBAAkB,CAEnC,IAAMlpI,EAAWhM,EAAMp9B,IAAK68F,GAM5BzzD,EAASi0D,MAAM59F,KAAM49F,GAAQvtD,eAAgBmuD,GAE7C70D,EAAS0mI,UAAU7vK,IAAmB,GAAd48F,EAAM72D,MAAa,EAAK,GAChDoD,EAAS2mI,WAAW9vK,IAAK,EAAoB,GAAf48F,EAAM52D,OAAc,GAElDtnC,EAAMmvK,SAAU6C,GAAmBvnI,EAEnCunI,GAED,MAAO,GAAK9zE,EAAM01E,aAAe,CAEhC,IAAMnpI,EAAWhM,EAAMp9B,IAAK68F,GAM5B,GAJAzzD,EAASi0D,MAAM59F,KAAMo9F,EAAMQ,OAAQvtD,eAAgB+sD,EAAMoB,UAAY0zE,GACrEvoI,EAAS9c,SAAWuwE,EAAMvwE,SAC1B8c,EAAS20D,MAAQlB,EAAMkB,MAElBlB,EAAM+mC,WAAa,CAEvB,IAAM6mB,EAAS5tD,EAAM4tD,OAEfunB,EAAiB3B,EAAYrwK,IAAK68F,GAExCm1E,EAAe/pB,WAAawC,EAAOwnB,KACnCD,EAAe9pB,iBAAmBuC,EAAOynB,WACzCF,EAAe7pB,aAAesC,EAAO5hI,OACrCmpJ,EAAe5pB,cAAgBqC,EAAO0nB,QACtCH,EAAehpB,iBAAmByB,EAAOl9G,OAAOV,KAChDmlI,EAAe/oB,gBAAkBwB,EAAOl9G,OAAOR,IAE/CpuC,EAAM4yK,YAAad,GAAgBuB,EACnCrzK,EAAMuqJ,eAAgBunB,GAAgBn4H,EACtC35C,EAAMwqJ,kBAAmBsnB,GAAgB5zE,EAAM4tD,OAAOp+I,OAEtDykK,GAED,CAEAnyK,EAAM4hB,MAAOkwJ,GAAgBrnI,EAE7BqnI,GAED,MAAO,GAAK5zE,EAAM21E,kBAAoB,CAErC,IAAMppI,EAAWhM,EAAMp9B,IAAK68F,GAE5BzzD,EAASigH,SAAS5pJ,KAAMo9F,EAAMQ,OAAQvtD,eAAgBmuD,EAAY0zE,GAClEvoI,EAASkgH,YAAY7pJ,KAAMo9F,EAAMysD,aAAcx5G,eAAgBmuD,EAAY0zE,GAE3EhzK,EAAMovK,KAAM6C,GAAexnI,EAE3BwnI,GAED,CAED,CAEKD,EAAiB,IAEhBh0B,EAAaC,WAWqC,IAAjDhxG,EAAWomB,IAAK,6BAPrBrzD,EAAM0yK,aAAe7qB,GAAYisB,YACjC9zK,EAAM2yK,aAAe9qB,GAAYksB,cAWiC,IAAtD9mI,EAAWomB,IAAK,kCAE3BrzD,EAAM0yK,aAAe7qB,GAAYmsB,WACjCh0K,EAAM2yK,aAAe9qB,GAAYosB,YAIjCv0K,QAAQkC,MAAO,gFAQlB5B,EAAMsyK,QAAS,GAAMziK,EACrB7P,EAAMsyK,QAAS,GAAMn+J,EACrBnU,EAAMsyK,QAAS,GAAMrjK,EAErB,IAAM2iK,EAAO5xK,EAAM4xK,KAEdA,EAAKC,oBAAsBA,GAC/BD,EAAKE,cAAgBA,GACrBF,EAAKG,aAAeA,GACpBH,EAAKI,iBAAmBA,GACxBJ,EAAKK,aAAeA,GACpBL,EAAKM,wBAA0BA,GAC/BN,EAAKO,kBAAoBA,GACzBP,EAAKQ,iBAAmBA,GACxBR,EAAKS,cAAgBA,IAErBryK,EAAMkvK,YAAY9vK,OAASyyK,EAC3B7xK,EAAMg/F,KAAK5/F,OAAS2yK,EACpB/xK,EAAMmvK,SAAS/vK,OAAS4yK,EACxBhyK,EAAM4hB,MAAMxiB,OAAS0yK,EACrB9xK,EAAMovK,KAAKhwK,OAAS6yK,EAEpBjyK,EAAMwyK,kBAAkBpzK,OAAS8yK,EACjClyK,EAAM0pJ,qBAAqBtqJ,OAAS8yK,EACpClyK,EAAM4yK,YAAYxzK,OAAS+yK,EAC3BnyK,EAAMuqJ,eAAenrJ,OAAS+yK,EAC9BnyK,EAAMyyK,WAAWrzK,OAASgzK,EAC1BpyK,EAAMiqJ,cAAc7qJ,OAASgzK,EAC7BpyK,EAAM2pJ,wBAAwBvqJ,OAAS8yK,EACvClyK,EAAMwqJ,kBAAkBprJ,OAAS+yK,EACjCnyK,EAAMkqJ,gBAAgB9qJ,OAASgzK,EAAiBC,EAAcU,EAC9D/yK,EAAMgqJ,aAAa5qJ,OAASizK,EAC5BryK,EAAMmmK,4BAA8B4M,EAEpCnB,EAAKC,kBAAoBA,EACzBD,EAAKE,YAAcA,EACnBF,EAAKG,WAAaA,EAClBH,EAAKI,eAAiBA,EACtBJ,EAAKK,WAAaA,EAElBL,EAAKM,sBAAwBA,EAC7BN,EAAKO,gBAAkBA,EACvBP,EAAKQ,eAAiBA,EACtBR,EAAKS,YAAcA,EAEnBryK,EAAMklE,QAAUmsG,KAIlB,EAwFC6C,UAtFD,SAAoBz1E,EAAQ7vD,GAU3B,IARA,IAAIijI,EAAoB,EACpBC,EAAc,EACdC,EAAa,EACbC,EAAiB,EACjBC,EAAa,EAEX/d,EAAatlH,EAAO4J,mBAEhB/3C,EAAI,EAAGwS,EAAIwrF,EAAOr/F,OAAQqB,EAAIwS,EAAGxS,IAAO,CAEjD,IAAMy9F,EAAQO,EAAQh+F,GAEtB,GAAKy9F,EAAMk1E,mBAAqB,CAE/B,IAAM3oI,EAAWzqC,EAAMkvK,YAAa2C,GAEpCpnI,EAAS31B,UAAU8iC,sBAAuBsmD,EAAMrmD,aAChDg7H,EAAQj7H,sBAAuBsmD,EAAMtiG,OAAOi8C,aAC5CpN,EAAS31B,UAAU8oC,IAAKi1H,GACxBpoI,EAAS31B,UAAUqrH,mBAAoB+zB,GAEvC2d,GAED,MAAO,GAAK3zE,EAAMu1E,YAAc,CAE/B,IAAMhpI,EAAWzqC,EAAMg/F,KAAM+yE,GAE7BtnI,EAASnoC,SAASs1C,sBAAuBsmD,EAAMrmD,aAC/CpN,EAASnoC,SAASy1C,aAAcm8G,GAEhCzpH,EAAS31B,UAAU8iC,sBAAuBsmD,EAAMrmD,aAChDg7H,EAAQj7H,sBAAuBsmD,EAAMtiG,OAAOi8C,aAC5CpN,EAAS31B,UAAU8oC,IAAKi1H,GACxBpoI,EAAS31B,UAAUqrH,mBAAoB+zB,GAEvC6d,GAED,MAAO,GAAK7zE,EAAMy1E,gBAAkB,CAEnC,IAAMlpI,EAAWzqC,EAAMmvK,SAAU6C,GAEjCvnI,EAASnoC,SAASs1C,sBAAuBsmD,EAAMrmD,aAC/CpN,EAASnoC,SAASy1C,aAAcm8G,GAGhC4e,EAASvyI,WACTkuF,EAAQ3tH,KAAMo9F,EAAMrmD,aACpB42E,EAAQ2W,YAAa8uB,GACrB4e,EAASh7H,gBAAiB22E,GAE1BhkF,EAAS0mI,UAAU7vK,IAAmB,GAAd48F,EAAM72D,MAAa,EAAK,GAChDoD,EAAS2mI,WAAW9vK,IAAK,EAAoB,GAAf48F,EAAM52D,OAAc,GAElDmD,EAAS0mI,UAAUp5H,aAAc+6H,GACjCroI,EAAS2mI,WAAWr5H,aAAc+6H,GAElCd,GAED,MAAO,GAAK9zE,EAAM01E,aAAe,CAEhC,IAAMnpI,EAAWzqC,EAAM4hB,MAAOkwJ,GAE9BrnI,EAASnoC,SAASs1C,sBAAuBsmD,EAAMrmD,aAC/CpN,EAASnoC,SAASy1C,aAAcm8G,GAEhC4d,GAED,MAAO,GAAK5zE,EAAM21E,kBAAoB,CAErC,IAAMppI,EAAWzqC,EAAMovK,KAAM6C,GAE7BxnI,EAAS31B,UAAU8iC,sBAAuBsmD,EAAMrmD,aAChDpN,EAAS31B,UAAUqrH,mBAAoB+zB,GAEvC+d,GAED,CAED,CAED,EAKCjyK,MAAOA,EAGT,CAEA,SAASm0K,GAAkBlnI,EAAY+wG,GAEtC,IAAMv/C,EAAS,IAAIgzE,GAAaxkI,EAAY+wG,GAEtCo2B,EAAc,GACdC,EAAe,GAwCrB,MAAO,CACNz3K,KAvCD,WAECw3K,EAAYh1K,OAAS,EACrBi1K,EAAaj1K,OAAS,CAEvB,EAmCCY,MATa,CACbo0K,YAAaA,EACbC,aAAcA,EAEd51E,OAAQA,GAMR61E,YAtBD,SAAsBzJ,GAErBpsE,EAAO6wD,MAAO8kB,EAAavJ,EAE5B,EAmBC0J,gBAjBD,SAA0B3lI,GAEzB6vD,EAAOy1E,UAAWE,EAAaxlI,EAEhC,EAeC4lI,UArCD,SAAoBt2E,GAEnBk2E,EAAYj1K,KAAM++F,EAEnB,EAkCCu2E,WAhCD,SAAqBC,GAEpBL,EAAal1K,KAAMu1K,EAEpB,EA+BD,CAEA,SAASC,GAAmB1nI,EAAY+wG,GAEvC,IAAI42B,EAAe,IAAIrtF,QAqCvB,MAAO,CACNlmF,IApCD,SAAcyqC,GAA6B,IAGtC+oI,EAHgB7D,EAAevzK,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAEhCq3K,EAAmBF,EAAavzK,IAAKyqC,GAuB3C,YApB0B9tC,IAArB82K,GAEJD,EAAc,IAAIV,GAAkBlnI,EAAY+wG,GAChD42B,EAAatzK,IAAKwqC,EAAO,CAAE+oI,KAItB7D,GAAmB8D,EAAiB11K,QAExCy1K,EAAc,IAAIV,GAAkBlnI,EAAY+wG,GAChD82B,EAAiB31K,KAAM01K,IAIvBA,EAAcC,EAAkB9D,GAM3B6D,CAER,EAUCr1H,QARD,WAECo1H,EAAe,IAAIrtF,OAEpB,EAOD,CAAC,IAEKqmF,GAAiB,SAAAmH,IAAA7vK,EAAAA,EAAAA,GAAA0oK,EAAAmH,GAAA,IAAAC,GAAA5vK,EAAAA,EAAAA,GAAAwoK,GAEtB,SAAAA,EAAav6H,GAAa,IAAA4hI,EAqBI,OArBJ1vK,EAAAA,EAAAA,GAAA,KAAAqoK,IAEzBqH,EAAAD,EAAA/4K,KAAA,OAEKi5K,qBAAsB,EAE3BD,EAAKv2K,KAAO,oBAEZu2K,EAAKjK,aAAeljD,GAEpBmtD,EAAKl4I,IAAM,KAEXk4I,EAAKjqC,SAAW,KAEhBiqC,EAAKzpC,gBAAkB,KACvBypC,EAAKxpC,kBAAoB,EACzBwpC,EAAKvpC,iBAAmB,EAExBupC,EAAKroC,WAAY,EACjBqoC,EAAKpoC,mBAAqB,EAE1BooC,EAAK5gI,UAAWhB,GAAa4hI,CAE9B,CAqBC,OArBAztK,EAAAA,EAAAA,GAAAomK,EAAA,EAAA9qK,IAAA,OAAApG,MAED,SAAM8G,GAiBL,OAfAolC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA+kI,EAAA5xK,WAAA,aAAAC,KAAA,KAAYuH,GAEZ3G,KAAKmuK,aAAexnK,EAAOwnK,aAE3BnuK,KAAKkgC,IAAMv5B,EAAOu5B,IAElBlgC,KAAKmuI,SAAWxnI,EAAOwnI,SAEvBnuI,KAAK2uI,gBAAkBhoI,EAAOgoI,gBAC9B3uI,KAAK4uI,kBAAoBjoI,EAAOioI,kBAChC5uI,KAAK6uI,iBAAmBloI,EAAOkoI,iBAE/B7uI,KAAK+vI,UAAYppI,EAAOopI,UACxB/vI,KAAKgwI,mBAAqBrpI,EAAOqpI,mBAE1BhwI,IAER,KAAC+wK,CAAA,CA9CqB,CAAS94I,IAkD1B+4I,GAAoB,SAAAsH,IAAAjwK,EAAAA,EAAAA,GAAA2oK,EAAAsH,GAAA,IAAAC,GAAAhwK,EAAAA,EAAAA,GAAAyoK,GAEzB,SAAAA,EAAax6H,GAAa,IAAAgiI,EAoBI,OApBJ9vK,EAAAA,EAAAA,GAAA,KAAAsoK,IAEzBwH,EAAAD,EAAAn5K,KAAA,OAEKq5K,wBAAyB,EAE9BD,EAAK32K,KAAO,uBAEZ22K,EAAK1pB,kBAAoB,IAAIxyH,GAC7Bk8I,EAAKzpB,aAAe,EACpBypB,EAAKxpB,YAAc,IAEnBwpB,EAAKt4I,IAAM,KAEXs4I,EAAKrqC,SAAW,KAEhBqqC,EAAK7pC,gBAAkB,KACvB6pC,EAAK5pC,kBAAoB,EACzB4pC,EAAK3pC,iBAAmB,EAExB2pC,EAAKhhI,UAAWhB,GAAagiI,CAE9B,CAoBC,OApBA7tK,EAAAA,EAAAA,GAAAqmK,EAAA,EAAA/qK,IAAA,OAAApG,MAED,SAAM8G,GAgBL,OAdAolC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAglI,EAAA7xK,WAAA,aAAAC,KAAA,KAAYuH,GAEZ3G,KAAK8uJ,kBAAkB7qJ,KAAM0C,EAAOmoJ,mBACpC9uJ,KAAK+uJ,aAAepoJ,EAAOooJ,aAC3B/uJ,KAAKgvJ,YAAcroJ,EAAOqoJ,YAE1BhvJ,KAAKkgC,IAAMv5B,EAAOu5B,IAElBlgC,KAAKmuI,SAAWxnI,EAAOwnI,SAEvBnuI,KAAK2uI,gBAAkBhoI,EAAOgoI,gBAC9B3uI,KAAK4uI,kBAAoBjoI,EAAOioI,kBAChC5uI,KAAK6uI,iBAAmBloI,EAAOkoI,iBAExB7uI,IAER,KAACgxK,CAAA,CA5CwB,CAAS/4I,IAgD7B3X,GAAS,2DAETo4J,GAAW,kmCAEjB,SAASC,GAAgBnf,EAAWof,EAAUC,GAE7C,IAAIC,EAAW,IAAI15B,GAEb25B,EAAiB,IAAI3lI,GAC1B4lI,EAAgB,IAAI5lI,GAEpB6lI,EAAY,IAAIh/H,GAEhBi/H,EAAiB,IAAInI,GAAmB,CAAE5C,aAAcjjD,KACxDiuD,EAAoB,IAAInI,GAExBoI,EAAiB,CAAC,EAElBC,EAAkBR,EAAcnjB,eAE3B3oB,EAAa,CAAE,EAAGnoB,EAAU,EAAGpK,EAAW,EAAGtsE,GAE7CorI,EAAyB,IAAIvrI,GAAgB,CAClDwH,QAAS,CACRgkI,YAAa,GAEd3rI,SAAU,CACT4rI,YAAa,CAAE35K,MAAO,MACtB4xC,WAAY,CAAE5xC,MAAO,IAAIuzC,IACzB/lB,OAAQ,CAAExtB,MAAO,IAGlBmuC,aAAc1tB,GACdktB,eAAgBkrI,KAIXe,EAA2BH,EAAuBl5J,QACxDq5J,EAAyBlkI,QAAQmkI,gBAAkB,EAEnD,IAAMC,EAAgB,IAAIjkI,GAC1BikI,EAAchkI,aACb,WACA,IAAIC,GACH,IAAInrC,aAAc,EAAI,GAAK,EAAG,GAAK,GAAK,EAAG,IAAO,EAAG,EAAG,KACxD,IAIF,IAAMmvK,EAAiB,IAAIzrI,GAAMwrI,EAAeL,GAE1C55H,EAAQ1/C,KA+Hd,SAAS65K,EAAS5qB,EAAQl9G,GAEzB,IAAMlE,EAAW+qI,EAASvmI,OAAQunI,GAE7BN,EAAuB/jI,QAAQgkI,cAAgBtqB,EAAO6qB,cAE1DR,EAAuB/jI,QAAQgkI,YAActqB,EAAO6qB,YACpDL,EAAyBlkI,QAAQgkI,YAActqB,EAAO6qB,YAEtDR,EAAuBj5I,aAAc,EACrCo5I,EAAyBp5I,aAAc,GAIhB,OAAnB4uH,EAAO8qB,UAEX9qB,EAAO8qB,QAAU,IAAI/kI,GAAmB+jI,EAAe/pK,EAAG+pK,EAAe9pK,IAM1EqqK,EAAuB1rI,SAAS4rI,YAAY35K,MAAQovJ,EAAO/uH,IAAI+L,QAC/DqtI,EAAuB1rI,SAAS6D,WAAW5xC,MAAQovJ,EAAO0nB,QAC1D2C,EAAuB1rI,SAASvgB,OAAOxtB,MAAQovJ,EAAO5hI,OACtDmsI,EAAUpjH,gBAAiB64G,EAAO8qB,SAClCvgB,EAAUt8G,QACVs8G,EAAUwgB,mBAAoBjoI,EAAQ,KAAMlE,EAAUyrI,EAAwBM,EAAgB,MAI9FH,EAAyB7rI,SAAS4rI,YAAY35K,MAAQovJ,EAAO8qB,QAAQ9tI,QACrEwtI,EAAyB7rI,SAAS6D,WAAW5xC,MAAQovJ,EAAO0nB,QAC5D8C,EAAyB7rI,SAASvgB,OAAOxtB,MAAQovJ,EAAO5hI,OACxDmsI,EAAUpjH,gBAAiB64G,EAAO/uH,KAClCs5H,EAAUt8G,QACVs8G,EAAUwgB,mBAAoBjoI,EAAQ,KAAMlE,EAAU4rI,EAA0BG,EAAgB,KAEjG,CAEA,SAASK,EAAkBj8I,EAAQ9gB,EAAUmkF,EAAOmsD,EAAkBC,EAAiB5rJ,GAEtF,IAAIoc,EAAS,KAEPi8J,GAA0C,IAAvB74E,EAAM01E,aAA0B/4I,EAAOm8I,uBAAyBn8I,EAAOo8I,oBAYhG,GARCn8J,OAFuB9c,IAAnB+4K,EAEKA,GAIyB,IAAvB74E,EAAM01E,aAA0BoC,EAAoBD,EAIzD1f,EAAU/C,uBAAiD,IAAzBv5I,EAAS4vH,aAAwBnpI,MAAM0sC,QAASnzB,EAAS0vH,iBAAuD,IAAnC1vH,EAAS0vH,eAAerqI,QAC3I2a,EAASyxH,iBAAkD,IAA/BzxH,EAAS0xH,mBACrC1xH,EAASixH,UAAYjxH,EAASm8F,UAAY,EAAM,CAKlD,IAAMghE,EAAOp8J,EAAOjT,KAAMsvK,EAAOp9J,EAASlS,KAEtCuvK,EAAsBnB,EAAgBiB,QAEbl5K,IAAxBo5K,IAEJA,EAAsB,CAAC,EACvBnB,EAAgBiB,GAASE,GAI1B,IAAIniE,EAAiBmiE,EAAqBD,QAElBn5K,IAAnBi3G,IAEJA,EAAiBn6F,EAAOmC,QACxBm6J,EAAqBD,GAASliE,GAI/Bn6F,EAASm6F,CAEV,CAqCA,OAnCAn6F,EAAOw+B,QAAUv/B,EAASu/B,QAC1Bx+B,EAAO8xH,UAAY7yH,EAAS6yH,UAI3B9xH,EAAOgwB,KAFHpsC,IAAS8iH,EAE2B,OAAxBznG,EAAS6vH,WAAwB7vH,EAAS6vH,WAAa7vH,EAAS+wB,KAIxC,OAAxB/wB,EAAS6vH,WAAwB7vH,EAAS6vH,WAAaA,EAAY7vH,EAAS+wB,MAI7FhwB,EAAOkwH,SAAWjxH,EAASixH,SAC3BlwH,EAAOo7F,UAAYn8F,EAASm8F,UAE5Bp7F,EAAO6uH,YAAc5vH,EAAS4vH,YAC9B7uH,EAAO2uH,eAAiB1vH,EAAS0vH,eACjC3uH,EAAO4uH,iBAAmB3vH,EAAS2vH,iBAEnC5uH,EAAO0wH,gBAAkBzxH,EAASyxH,gBAClC1wH,EAAO2wH,kBAAoB1xH,EAAS0xH,kBACpC3wH,EAAO4wH,iBAAmB3xH,EAAS2xH,iBAEnC5wH,EAAO+xH,mBAAqB9yH,EAAS8yH,mBACrC/xH,EAAO2xH,UAAY1yH,EAAS0yH,WAEA,IAAvBvuC,EAAM01E,eAA2D,IAAlC94J,EAAOw6J,yBAE1Cx6J,EAAO6wI,kBAAkB/zG,sBAAuBsmD,EAAMrmD,aACtD/8B,EAAO8wI,aAAevB,EACtBvvI,EAAO+wI,YAAcvB,GAIfxvI,CAER,CAEA,SAASu8J,EAAcx8I,EAAQ+T,EAAQ0oI,EAAcp5E,EAAOx/F,GAE3D,IAAwB,IAAnBm8B,EAAOye,QAAZ,CAIA,GAFgBze,EAAO2oG,OAAOrrH,KAAMy2B,EAAO40F,UAEzB3oG,EAAOqgF,QAAUrgF,EAAOi6E,QAAUj6E,EAAO65E,YAEnD75E,EAAOoqG,YAAgBpqG,EAAOqqG,eAAiBxmI,IAAS8iH,MAAwB3mF,EAAO8X,eAAiBgjI,EAAS4B,iBAAkB18I,IAAa,CAEtJA,EAAO8pG,gBAAgBxW,iBAAkBmpD,EAAa9+H,mBAAoB3d,EAAOgd,aAEjF,IAAMnN,EAAW+qI,EAASvmI,OAAQrU,GAC5B9gB,EAAW8gB,EAAO9gB,SAExB,GAAKvZ,MAAM0sC,QAASnzB,GAInB,IAFA,IAAM62H,EAASlmG,EAASkmG,OAEdrhI,EAAI,EAAGioK,EAAK5mC,EAAOxxI,OAAQmQ,EAAIioK,EAAIjoK,IAAO,CAEnD,IAAMwoG,EAAQ64B,EAAQrhI,GAChB6lI,EAAgBr7H,EAAUg+F,EAAM3X,eAEtC,GAAKg1C,GAAiBA,EAAc97F,QAAU,CAE7C,IAAMm+H,EAAgBX,EAAkBj8I,EAAQu6G,EAAel3C,EAAOo5E,EAAappI,KAAMopI,EAAalpI,IAAK1vC,GAE3G23J,EAAUwgB,mBAAoBS,EAAc,KAAM5sI,EAAU+sI,EAAe58I,EAAQk9E,EAEpF,CAED,MAEM,GAAKh+F,EAASu/B,QAAU,CAE9B,IAAMm+H,EAAgBX,EAAkBj8I,EAAQ9gB,EAAUmkF,EAAOo5E,EAAappI,KAAMopI,EAAalpI,IAAK1vC,GAEtG23J,EAAUwgB,mBAAoBS,EAAc,KAAM5sI,EAAU+sI,EAAe58I,EAAQ,KAEpF,CAED,CAMD,IAFA,IAAM+F,EAAW/F,EAAO+F,SAEdngC,EAAI,EAAGwS,EAAI2tB,EAASxhC,OAAQqB,EAAIwS,EAAGxS,IAE5C42K,EAAcz2I,EAAUngC,GAAKmuC,EAAQ0oI,EAAcp5E,EAAOx/F,EAhDrB,CAoDvC,CAjTA7B,KAAK48C,SAAU,EAEf58C,KAAK+8C,YAAa,EAClB/8C,KAAKqgC,aAAc,EAEnBrgC,KAAK6B,KAAO4iH,EAEZzkH,KAAKq2C,OAAS,SAAWurD,EAAQ3yD,EAAO8C,GAEvC,IAAuB,IAAlB2N,EAAM9C,WACe,IAArB8C,EAAM3C,aAA8C,IAAtB2C,EAAMrf,cAElB,IAAlBuhE,EAAOr/F,OAAZ,CAEA,IAAMi7I,EAAsBgc,EAAU/b,kBAChCo9B,EAAiBrhB,EAAUshB,oBAC3BC,EAAoBvhB,EAAUwhB,uBAE9BC,EAASzhB,EAAUr2J,MAGzB83K,EAAOC,YAAajnI,GACpBgnI,EAAO1wK,QAAQs3F,MAAM8tD,SAAU,EAAG,EAAG,EAAG,GACxCsrB,EAAO1wK,QAAQsa,MAAMs2J,SAAS,GAC9BF,EAAOG,gBAAgB,GAIvB,IAAM,IAAIx3K,EAAI,EAAG8sG,EAAK9O,EAAOr/F,OAAQqB,EAAI8sG,EAAI9sG,IAAO,CAEnD,IAAMy9F,EAAQO,EAAQh+F,GAChBqrJ,EAAS5tD,EAAM4tD,OAErB,QAAgB9tJ,IAAX8tJ,GAOL,IAA2B,IAAtBA,EAAOlyG,aAA+C,IAAvBkyG,EAAO5uH,YAA3C,CAEA04I,EAAe90K,KAAMgrJ,EAAO0nB,SAE5B,IAAM0E,EAAqBpsB,EAAOqsB,kBA0BlC,GAxBAvC,EAAer9H,SAAU2/H,GAEzBrC,EAAc/0K,KAAMgrJ,EAAO0nB,UAEtBoC,EAAe/pK,EAAIqqK,GAAmBN,EAAe9pK,EAAIoqK,KAExDN,EAAe/pK,EAAIqqK,IAEvBL,EAAchqK,EAAIoF,KAAKi5B,MAAOgsI,EAAkBgC,EAAmBrsK,GACnE+pK,EAAe/pK,EAAIgqK,EAAchqK,EAAIqsK,EAAmBrsK,EACxDigJ,EAAO0nB,QAAQ3nK,EAAIgqK,EAAchqK,GAI7B+pK,EAAe9pK,EAAIoqK,IAEvBL,EAAc/pK,EAAImF,KAAKi5B,MAAOgsI,EAAkBgC,EAAmBpsK,GACnE8pK,EAAe9pK,EAAI+pK,EAAc/pK,EAAIosK,EAAmBpsK,EACxDggJ,EAAO0nB,QAAQ1nK,EAAI+pK,EAAc/pK,IAMf,OAAfggJ,EAAO/uH,IAAe,CAE1B,IAAMq7I,EAASv7K,KAAK6B,OAAS8iH,EAAiB,CAAEt4E,UAAW0hE,GAAexhE,UAAWwhE,IAAkB,CAAC,EAExGkhD,EAAO/uH,IAAM,IAAI8U,GAAmB+jI,EAAe/pK,EAAG+pK,EAAe9pK,EAAGssK,GACxEtsB,EAAO/uH,IAAI+L,QAAQ9rC,KAAOkhG,EAAMlhG,KAAO,aAEvC8uJ,EAAOl9G,OAAOsO,wBAEf,CAEAm5G,EAAUpjH,gBAAiB64G,EAAO/uH,KAClCs5H,EAAUt8G,QAIV,IAFA,IAAMs+H,EAAgBvsB,EAAOwsB,mBAEnBC,EAAK,EAAGA,EAAKF,EAAeE,IAAQ,CAE7C,IAAMzgH,EAAWg0F,EAAO0sB,YAAaD,GAErCzC,EAAUx0K,IACTu0K,EAAchqK,EAAIisD,EAASjsD,EAC3BgqK,EAAc/pK,EAAIgsD,EAAShsD,EAC3B+pK,EAAchqK,EAAIisD,EAAS/rD,EAC3B8pK,EAAc/pK,EAAIgsD,EAASx4D,GAG5Bw4K,EAAOhgH,SAAUg+G,GAEjBhqB,EAAO4nB,eAAgBx1E,EAAOq6E,GAE9B5C,EAAW7pB,EAAO2sB,aAElBpB,EAAcvrI,EAAO8C,EAAQk9G,EAAOl9G,OAAQsvD,EAAOrhG,KAAK6B,KAEzD,EAImC,IAA9BotJ,EAAO4sB,oBAA+B77K,KAAK6B,OAAS8iH,GAExDk1D,EAAS5qB,EAAQl9G,GAIlBk9G,EAAO5uH,aAAc,CA3EsD,OAL1Ex9B,QAAQC,KAAM,wBAAyBu+F,EAAO,iBAkFhD,CAEA3hD,EAAMrf,aAAc,EAEpBm5H,EAAUpjH,gBAAiBonG,EAAqBq9B,EAAgBE,EA7G/B,CA+GlC,CAwLD,CAEA,SAASe,GAAYhqI,EAAI1B,EAAY+wG,GAAe,IAAA46B,EAAAC,EAE7C56B,EAAWD,EAAaC,SA2S9B,IAAM66B,EAAc,IAzSpB,WAEC,IAAIC,GAAS,EAEPr6E,EAAQ,IAAI5nD,GACdkiI,EAAmB,KACjBC,EAAoB,IAAIniI,GAAS,EAAG,EAAG,EAAG,GAEhD,MAAO,CAEN+C,QAAS,SAAWq/H,GAEdF,IAAqBE,GAAeH,IAExCpqI,EAAGuqI,UAAWA,EAAWA,EAAWA,EAAWA,GAC/CF,EAAmBE,EAIrB,EAEAC,UAAW,SAAWC,GAErBL,EAASK,CAEV,EAEA5sB,SAAU,SAAW38I,EAAGsE,EAAGlF,EAAG+E,EAAGm2H,IAEJ,IAAvBA,IAEJt6H,GAAKmE,EAAGG,GAAKH,EAAG/E,GAAK+E,GAItB0qF,EAAMp9F,IAAKuO,EAAGsE,EAAGlF,EAAG+E,IAEuB,IAAtCilK,EAAkBn8C,OAAQp+B,KAE9B/vD,EAAGw9G,WAAYt8I,EAAGsE,EAAGlF,EAAG+E,GACxBilK,EAAkBn4K,KAAM49F,GAI1B,EAEAzvE,MAAO,WAEN8pJ,GAAS,EAETC,EAAmB,KACnBC,EAAkB33K,KAAO,EAAG,EAAG,EAAG,EAEnC,EAIF,EAiPM8uC,EAAc,IA/OpB,WAEC,IAAI2oI,GAAS,EAETM,EAAmB,KACnBC,EAAmB,KACnBC,EAAoB,KAExB,MAAO,CAENvB,QAAS,SAAWhnI,GAEdA,EAEJ0+H,GAAQ,MAIR8J,GAAS,KAIX,EAEA3/H,QAAS,SAAW4/H,GAEdJ,IAAqBI,GAAeV,IAExCpqI,EAAG8qI,UAAWA,GACdJ,EAAmBI,EAIrB,EAEAC,QAAS,SAAW1wC,GAEnB,GAAKswC,IAAqBtwC,EAAY,CAErC,OAASA,GAER,KAAKjmB,GAEJp0E,EAAGq6F,UAAW,KACd,MAED,KAAKhmB,GAEJr0E,EAAGq6F,UAAW,KACd,MAED,KAAK/lB,GAEJt0E,EAAGq6F,UAAW,KACd,MAED,KAAK9lB,GAEJv0E,EAAGq6F,UAAW,KACd,MAED,KAAK7lB,GAEJx0E,EAAGq6F,UAAW,KACd,MAED,KAAK5lB,GAEJz0E,EAAGq6F,UAAW,KACd,MAED,KAAK3lB,GAEJ10E,EAAGq6F,UAAW,KACd,MAED,KAAK1lB,GAEJ30E,EAAGq6F,UAAW,KACd,MAED,QAECr6F,EAAGq6F,UAAW,KAIhBswC,EAAmBtwC,CAEpB,CAED,EAEAmwC,UAAW,SAAWC,GAErBL,EAASK,CAEV,EAEA5sB,SAAU,SAAW9qI,GAEf63J,IAAsB73J,IAE1BitB,EAAGgrI,WAAYj4J,GACf63J,EAAoB73J,EAItB,EAEAuN,MAAO,WAEN8pJ,GAAS,EAETM,EAAmB,KACnBC,EAAmB,KACnBC,EAAoB,IAErB,EAIF,EAsHMznI,EAAgB,IApHtB,WAEC,IAAIinI,GAAS,EAETa,EAAqB,KACrBC,EAAqB,KACrBC,EAAoB,KACpBC,EAAyB,KACzBC,EAAqB,KACrBC,EAAsB,KACtBC,EAAsB,KACtBC,EAAsB,KAE1B,MAAO,CAENnC,QAAS,SAAWoC,GAEZrB,IAEDqB,EAEJ1K,GAAQ,MAIR8J,GAAS,MAMZ,EAEA3/H,QAAS,SAAWwgI,GAEdT,IAAuBS,GAAiBtB,IAE5CpqI,EAAG0rI,YAAaA,GAChBT,EAAqBS,EAIvB,EAEAX,QAAS,SAAWxwC,EAAaC,EAAYkxC,GAEvCR,IAAuB3wC,GACvB4wC,IAAsB3wC,GACtB4wC,IAA2BM,IAE/B1rI,EAAGu6F,YAAaA,EAAaC,EAAYkxC,GAEzCR,EAAqB3wC,EACrB4wC,EAAoB3wC,EACpB4wC,EAAyBM,EAI3B,EAEAC,MAAO,SAAWjxC,EAAaC,EAAcC,GAEvCywC,IAAuB3wC,GACvB4wC,IAAwB3wC,GACxB4wC,IAAwB3wC,IAE5B56F,EAAG4rI,UAAWlxC,EAAaC,EAAcC,GAEzCywC,EAAqB3wC,EACrB4wC,EAAsB3wC,EACtB4wC,EAAsB3wC,EAIxB,EAEA4vC,UAAW,SAAWC,GAErBL,EAASK,CAEV,EAEA5sB,SAAU,SAAWtR,GAEfi/B,IAAwBj/B,IAE5BvsG,EAAG6rI,aAAct/B,GACjBi/B,EAAsBj/B,EAIxB,EAEAjsH,MAAO,WAEN8pJ,GAAS,EAETa,EAAqB,KACrBC,EAAqB,KACrBC,EAAoB,KACpBC,EAAyB,KACzBC,EAAqB,KACrBC,EAAsB,KACtBC,EAAsB,KACtBC,EAAsB,IAEvB,EAIF,EAQMM,EAAc,IAAIlzF,QAClBmzF,EAAe,IAAInzF,QAErBozF,EAAsB,CAAC,EAEvBC,EAA2B,CAAC,EAC5BC,EAAqB,IAAItzF,QACzBuzF,EAAqB,GAErBC,EAAiB,KAEjBC,GAAyB,EACzBC,EAAkB,KAClBC,EAAuB,KACvBC,EAAkB,KAClBC,EAAkB,KAClBC,EAA4B,KAC5BC,EAAuB,KACvBC,EAAuB,KACvBC,GAA2B,EAE3BC,EAAmB,KACnBC,EAAkB,KAElBC,EAAmB,KAEnBC,GAA6B,KAC7BC,GAA4B,KAE1BxpB,GAAc1jH,EAAGg/G,aAAc,OAEjCmuB,IAAqB,EACrB52G,GAAU,EACR62G,GAAYptI,EAAGg/G,aAAc,OAEK,IAAnCouB,GAAU33K,QAAS,UAEvB8gE,GAAU39B,WAAY,cAAcspF,KAAMkrD,IAAa,IACvDD,GAAuB52G,IAAW,IAEgB,IAAvC62G,GAAU33K,QAAS,eAE9B8gE,GAAU39B,WAAY,kBAAkBspF,KAAMkrD,IAAa,IAC3DD,GAAuB52G,IAAW,GAInC,IAAI82G,GAAqB,KACrBC,GAAuB,CAAC,EAEtBC,GAAevtI,EAAGg/G,aAAc,MAChCwuB,GAAgBxtI,EAAGg/G,aAAc,MAEjCyuB,IAAiB,IAAItlI,IAAUzc,UAAW6hJ,IAC1CG,IAAkB,IAAIvlI,IAAUzc,UAAW8hJ,IAEjD,SAASG,GAAe59K,EAAM9C,EAAQ6D,GAErC,IAAM+J,EAAO,IAAI3F,WAAY,GACvBilC,EAAU6F,EAAG2tI,gBAEnB3tI,EAAG4tI,YAAa79K,EAAMoqC,GACtB6F,EAAG6tI,cAAe99K,EAAM,MAAO,MAC/BiwC,EAAG6tI,cAAe99K,EAAM,MAAO,MAE/B,IAAM,IAAI+B,EAAI,EAAGA,EAAIhB,EAAOgB,IAE3BkuC,EAAG8tI,WAAY7gL,EAAS6E,EAAG,EAAG,KAAM,EAAG,EAAG,EAAG,KAAM,KAAM+I,GAI1D,OAAOs/B,CAER,CAEA,IAAM4zI,GAAgB,CAAC,EAqBvB,SAAShN,GAAQ1iK,IAEmB,IAA9B2tK,EAAqB3tK,KAEzB2hC,EAAG+gI,OAAQ1iK,GACX2tK,EAAqB3tK,IAAO,EAI9B,CAEA,SAASwsK,GAASxsK,IAEkB,IAA9B2tK,EAAqB3tK,KAEzB2hC,EAAG6qI,QAASxsK,GACZ2tK,EAAqB3tK,IAAO,EAI9B,CAxCA0vK,GAAe,MAASJ,GAAe,KAAM,KAAM,GACnDI,GAAe,OAAUJ,GAAe,MAAO,MAAO,GAItDxD,EAAYtsB,SAAU,EAAG,EAAG,EAAG,GAC/Bp8G,EAAYo8G,SAAU,GACtB16G,EAAc06G,SAAU,GAExBkjB,GAAQ,MACRt/H,EAAYspI,QAASx2D,IAErBy5D,IAAc,GACdC,GAAa17D,GACbwuD,GAAQ,MAERqI,GAAajnI,GAwJb,IAAM+rI,IAAYjE,EAAG,CAAC,GAAJl+I,EAAAA,EAAAA,GAAAk+I,EACf72D,EAAe,QAAKrnF,EAAAA,EAAAA,GAAAk+I,EACpB52D,EAAoB,QAAKtnF,EAAAA,EAAAA,GAAAk+I,EACzB32D,EAA2B,OAAK22D,GAGnC,GAAK36B,EAEJ4+B,GAAc36D,GAAgB,MAC9B26D,GAAc16D,GAAgB,UAExB,CAEN,IAAM3hB,GAAYvzD,EAAW5rC,IAAK,oBAEf,OAAdm/F,KAEJq8E,GAAc36D,GAAgB1hB,GAAUs8E,QACxCD,GAAc16D,GAAgB3hB,GAAUu8E,QAI1C,CAEA,IAAMC,IAAUnE,EAAG,CAAC,GAAJn+I,EAAAA,EAAAA,GAAAm+I,EACbz2D,EAAc,IAAC1nF,EAAAA,EAAAA,GAAAm+I,EACfx2D,EAAa,IAAC3nF,EAAAA,EAAAA,GAAAm+I,EACdv2D,EAAkB,MAAG5nF,EAAAA,EAAAA,GAAAm+I,EACrBr2D,EAAkB,MAAG9nF,EAAAA,EAAAA,GAAAm+I,EACrB/1D,GAA0B,MAAGpoF,EAAAA,EAAAA,GAAAm+I,EAC7Bj2D,EAAkB,MAAGloF,EAAAA,EAAAA,GAAAm+I,EACrBn2D,EAAkB,MAAGhoF,EAAAA,EAAAA,GAAAm+I,EACrBt2D,EAA0B,MAAG7nF,EAAAA,EAAAA,GAAAm+I,EAC7Bp2D,EAA0B,MAAG/nF,EAAAA,EAAAA,GAAAm+I,EAC7Bh2D,GAA0B,MAAGnoF,EAAAA,EAAAA,GAAAm+I,EAC7Bl2D,EAA0B,KAAGk2D,GAGhC,SAASd,GAAalnI,EAAU+3F,EAAeF,EAAUC,EAAUI,EAAoBF,EAAeC,EAAeqB,GAEpH,GAAKt5F,IAAaC,GAoBlB,IAPgC,IAA3BkqI,IAEJtL,GAAQ,MACRsL,GAAyB,GAIrBnqI,IAAaixE,EAmFlBinB,EAAqBA,GAAsBH,EAC3CC,EAAgBA,GAAiBH,EACjCI,EAAgBA,GAAiBH,EAE5BC,IAAkBsyC,GAAwBnyC,IAAuBsyC,IAErE1sI,EAAGsuI,sBAAuBJ,GAAcj0C,GAAiBi0C,GAAc9zC,IAEvEmyC,EAAuBtyC,EACvByyC,EAA4BtyC,GAIxBL,IAAayyC,GAAmBxyC,IAAayyC,GAAmBvyC,IAAkByyC,GAAwBxyC,IAAkByyC,IAEhI5sI,EAAGuuI,kBAAmBF,GAAYt0C,GAAYs0C,GAAYr0C,GAAYq0C,GAAYn0C,GAAiBm0C,GAAYl0C,IAE/GqyC,EAAkBzyC,EAClB0yC,EAAkBzyC,EAClB2yC,EAAuBzyC,EACvB0yC,EAAuBzyC,GAIxBmyC,EAAkBpqI,EAClB2qI,EAA2B,UA1G1B,GAAK3qI,IAAaoqI,GAAmB9wC,IAAuBqxC,EAA2B,CAWtF,GATKN,IAAyBn5D,GAAes5D,IAA8Bt5D,IAE1EpzE,EAAGi6F,cAAe,OAElBsyC,EAAuBn5D,EACvBs5D,EAA4Bt5D,GAIxBooB,EAEJ,OAASt5F,GAER,KAAK6wE,EACJ/yE,EAAGuuI,kBAAmB,EAAG,IAAK,EAAG,KACjC,MAED,KAAKv7D,EACJhzE,EAAGwuI,UAAW,EAAG,GACjB,MAED,KAAKv7D,EACJjzE,EAAGuuI,kBAAmB,EAAG,IAAK,EAAG,GACjC,MAED,KAAKr7D,EACJlzE,EAAGuuI,kBAAmB,EAAG,IAAK,EAAG,KACjC,MAED,QACCx9K,QAAQkC,MAAO,uCAAwCivC,QAOzD,OAASA,GAER,KAAK6wE,EACJ/yE,EAAGuuI,kBAAmB,IAAK,IAAK,EAAG,KACnC,MAED,KAAKv7D,EACJhzE,EAAGwuI,UAAW,IAAK,GACnB,MAED,KAAKv7D,EACJjzE,EAAGuuI,kBAAmB,EAAG,IAAK,EAAG,GACjC,MAED,KAAKr7D,EACJlzE,EAAGwuI,UAAW,EAAG,KACjB,MAED,QACCz9K,QAAQkC,MAAO,uCAAwCivC,GAO1DsqI,EAAkB,KAClBC,EAAkB,KAClBE,EAAuB,KACvBC,EAAuB,KAEvBN,EAAkBpqI,EAClB2qI,EAA2BrxC,CAE5B,OA7FgC,IAA3B6wC,IAEJxB,GAAS,MACTwB,GAAyB,EA6H5B,CA0CA,SAAS2B,GAAcjS,GAEjB+Q,IAAqB/Q,IAEpBA,EAEJ/7H,EAAGyuI,UAAW,MAIdzuI,EAAGyuI,UAAW,MAIf3B,EAAmB/Q,EAIrB,CAEA,SAASkS,GAAaS,GAEhBA,IAAap8D,GAEjByuD,GAAQ,MAEH2N,IAAa3B,IAEZ2B,IAAan8D,EAEjBvyE,EAAG0uI,SAAU,MAEFA,IAAal8D,EAExBxyE,EAAG0uI,SAAU,MAIb1uI,EAAG0uI,SAAU,QAQf7D,GAAS,MAIVkC,EAAkB2B,CAEnB,CAcA,SAASC,GAAkBxzC,EAAe7yE,EAAQisG,GAE5Cp5B,GAEJ4lC,GAAQ,OAEHkM,KAA+B3kH,GAAU4kH,KAA8B3Y,IAE3Ev0H,EAAGm7F,cAAe7yE,EAAQisG,GAE1B0Y,GAA6B3kH,EAC7B4kH,GAA4B3Y,IAM7BsW,GAAS,MAIX,CAuWA,MAAO,CAENpyK,QAAS,CACRs3F,MAAOo6E,EACPp3J,MAAO0uB,EACP8qG,QAASppG,GAGV49H,OAAQA,GACR8J,QAASA,GAET+D,gBA3xBD,SAA0B3hL,EAAQ4hL,GAEjC,OAAK5C,EAA0Bh/K,KAAa4hL,IAE3C7uI,EAAG4uI,gBAAiB3hL,EAAQ4hL,GAE5B5C,EAA0Bh/K,GAAW4hL,EAEhCv/B,IAIY,QAAXriJ,IAEJg/K,EAA0B,OAAU4C,GAIrB,QAAX5hL,IAEJg/K,EAA0B,OAAU4C,KAM/B,EAMT,EA4vBCxlC,YA1vBD,SAAsB4B,EAAc4jC,GAEnC,IAAIxlC,EAAc8iC,EAEd59I,GAAc,EAElB,GAAK08G,EAWJ,QAPqB57I,KAFrBg6I,EAAc6iC,EAAmBx5K,IAAKm8K,MAIrCxlC,EAAc,GACd6iC,EAAmBv5K,IAAKk8K,EAAaxlC,IAIjC4B,EAAapjB,6BAA+B,CAEhD,IAAMjzB,EAAWq2C,EAAa9wG,QAE9B,GAAKkvG,EAAY54I,SAAWmkG,EAASnkG,QAA+B,QAArB44I,EAAa,GAAgB,CAE3E,IAAM,IAAIv3I,EAAI,EAAG8sG,EAAKhK,EAASnkG,OAAQqB,EAAI8sG,EAAI9sG,IAE9Cu3I,EAAav3I,GAAM,MAAQA,EAI5Bu3I,EAAY54I,OAASmkG,EAASnkG,OAE9B89B,GAAc,CAEf,CAED,MAE2B,QAArB86G,EAAa,KAEjBA,EAAa,GAAM,MAEnB96G,GAAc,QAQU,OAArB86G,EAAa,KAEjBA,EAAa,GAAM,KAEnB96G,GAAc,GAMXA,IAEC8gH,EAAaC,SAEjBtvG,EAAGqpG,YAAaA,GAIhB/qG,EAAW5rC,IAAK,sBAAuBo8K,iBAAkBzlC,GAO5D,EAkrBC0lC,WAhrBD,SAAqB/uB,GAEpB,OAAKosB,IAAmBpsB,IAEvBhgH,EAAG+uI,WAAY/uB,GAEfosB,EAAiBpsB,GAEV,EAMT,EAoqBCopB,YAAaA,GACb4F,YAvfD,SAAsB5jK,EAAU6jK,GAE/B7jK,EAAS+wB,OAASC,EACfyuI,GAAS,MACT9J,GAAQ,MAEX,IAAIhF,EAAc3wJ,EAAS+wB,OAAS22E,EAC/Bm8D,IAAclT,GAAcA,GAEjCiS,GAAcjS,GAEZ3wJ,EAAS82B,WAAa6wE,IAA2C,IAAzB3nG,EAASk8F,YAChD8hE,GAAajnI,GACbinI,GAAah+J,EAAS82B,SAAU92B,EAAS6uH,cAAe7uH,EAAS2uH,SAAU3uH,EAAS4uH,SAAU5uH,EAASgvH,mBAAoBhvH,EAAS8uH,cAAe9uH,EAAS+uH,cAAe/uH,EAASowH,oBAEvL/5F,EAAYspI,QAAS3/J,EAASivH,WAC9B54F,EAAY4nI,QAASj+J,EAASi3B,WAC9BZ,EAAYyJ,QAAS9/B,EAASg3B,YAC9B+nI,EAAYj/H,QAAS9/B,EAAS8vH,YAE9B,IAAML,EAAezvH,EAASyvH,aAC9B13F,EAAckmI,QAASxuC,GAClBA,IAEJ13F,EAAc+H,QAAS9/B,EAASkvH,kBAChCn3F,EAAc4nI,QAAS3/J,EAASmvH,YAAanvH,EAASovH,WAAYpvH,EAASqvH,iBAC3Et3F,EAAcwoI,MAAOvgK,EAASsvH,YAAatvH,EAASuvH,aAAcvvH,EAASwvH,eAI5E+zC,GAAkBvjK,EAAS+vH,cAAe/vH,EAASgwH,oBAAqBhwH,EAASiwH,qBAEpD,IAA7BjwH,EAASmwH,gBACNwlC,GAAQ,OACR8J,GAAS,MAEb,EAqdCmD,aAAcA,GACdC,YAAaA,GAEbiB,aA9ZD,SAAuBx2I,GAEjBA,IAAUs0I,IAETG,IAAqBntI,EAAGmvI,UAAWz2I,GAExCs0I,EAAmBt0I,EAIrB,EAqZCi2I,iBAAkBA,GAElBrF,eA9XD,SAAyBhjD,GAEnBA,EAEJy6C,GAAQ,MAIR8J,GAAS,KAIX,EAoXCuE,cAhXD,SAAwBC,QAEJhgL,IAAdggL,IAA0BA,EAAY,MAAQ3rB,GAAc,GAE5D2pB,KAAuBgC,IAE3BrvI,EAAGovI,cAAeC,GAClBhC,GAAqBgC,EAIvB,EAsWCzB,YApWD,SAAsB0B,EAAWC,EAAcF,QAE3BhgL,IAAdggL,IAIHA,EAF2B,OAAvBhC,GAEQ,MAAQ3pB,GAAc,EAItB2pB,IAMd,IAAImC,EAAelC,GAAsB+B,QAEnBhgL,IAAjBmgL,IAEJA,EAAe,CAAEz/K,UAAMV,EAAW8qC,aAAS9qC,GAC3Ci+K,GAAsB+B,GAAcG,GAIhCA,EAAaz/K,OAASu/K,GAAaE,EAAar1I,UAAYo1I,IAE3DlC,KAAuBgC,IAE3BrvI,EAAGovI,cAAeC,GAClBhC,GAAqBgC,GAItBrvI,EAAG4tI,YAAa0B,EAAWC,GAAgBxB,GAAeuB,IAE1DE,EAAaz/K,KAAOu/K,EACpBE,EAAar1I,QAAUo1I,EAIzB,EA4TCE,cA1TD,WAEC,IAAMD,EAAelC,GAAsBD,SAErBh+K,IAAjBmgL,QAAoDngL,IAAtBmgL,EAAaz/K,OAE/CiwC,EAAG4tI,YAAa4B,EAAaz/K,KAAM,MAEnCy/K,EAAaz/K,UAAOV,EACpBmgL,EAAar1I,aAAU9qC,EAIzB,EA8SCqgL,qBA5SD,WAEC,IAEC1vI,EAAG0vI,qBAAqB1iL,MAAOgzC,EAAIlxC,UAEpC,CAAE,MAAQmE,GAETlC,QAAQkC,MAAO,oBAAqBA,EAErC,CAED,EAiSC66K,WAzND,WAEC,IAEC9tI,EAAG8tI,WAAW9gL,MAAOgzC,EAAIlxC,UAE1B,CAAE,MAAQmE,GAETlC,QAAQkC,MAAO,oBAAqBA,EAErC,CAED,EA8MC08K,WA5MD,WAEC,IAEC3vI,EAAG2vI,WAAW3iL,MAAOgzC,EAAIlxC,UAE1B,CAAE,MAAQmE,GAETlC,QAAQkC,MAAO,oBAAqBA,EAErC,CAED,EAkMC28K,iBAxKD,SAA2BC,EAAe7vB,GAEzC,IAAInhH,EAAUktI,EAAar5K,IAAKstJ,QAEf3wJ,IAAZwvC,IAEJA,EAAU,IAAI+5C,QAEdmzF,EAAap5K,IAAKqtJ,EAASnhH,IAI5B,IAAIixI,EAAajxI,EAAQnsC,IAAKm9K,QAEVxgL,IAAfygL,IAEJA,EAAa9vI,EAAG+vI,qBAAsB/vB,EAAS6vB,EAAcxhL,MAE7DwwC,EAAQlsC,IAAKk9K,EAAeC,GAI9B,EAmJCE,oBAjJD,SAA8BH,EAAe7vB,GAE5C,IACM8vB,EADU/D,EAAar5K,IAAKstJ,GACPttJ,IAAKm9K,GAE3B/D,EAAYp5K,IAAKm9K,KAAoBC,IAIzC9vI,EAAGgwI,oBAAqBhwB,EAAS8vB,EAAYD,EAAcI,qBAE3DnE,EAAYn5K,IAAKk9K,EAAeC,GAIlC,EAoICI,aA3PD,WAEC,IAEClwI,EAAGkwI,aAAaljL,MAAOgzC,EAAIlxC,UAE5B,CAAE,MAAQmE,GAETlC,QAAQkC,MAAO,oBAAqBA,EAErC,CAED,EAgPCk9K,aA9OD,WAEC,IAECnwI,EAAGmwI,aAAanjL,MAAOgzC,EAAIlxC,UAE5B,CAAE,MAAQmE,GAETlC,QAAQkC,MAAO,oBAAqBA,EAErC,CAED,EAmOCm9K,cAvSD,WAEC,IAECpwI,EAAGowI,cAAcpjL,MAAOgzC,EAAIlxC,UAE7B,CAAE,MAAQmE,GAETlC,QAAQkC,MAAO,oBAAqBA,EAErC,CAED,EA4RCo9K,cA1RD,WAEC,IAECrwI,EAAGqwI,cAAcrjL,MAAOgzC,EAAIlxC,UAE7B,CAAE,MAAQmE,GAETlC,QAAQkC,MAAO,oBAAqBA,EAErC,CAED,EA+QCq9K,wBA7QD,WAEC,IAECtwI,EAAGswI,wBAAwBtjL,MAAOgzC,EAAIlxC,UAEvC,CAAE,MAAQmE,GAETlC,QAAQkC,MAAO,oBAAqBA,EAErC,CAED,EAmQCozH,QAvMD,SAAkBA,IAEyB,IAArConD,GAAet/C,OAAQ9H,KAE3BrmF,EAAGqmF,QAASA,EAAQnpH,EAAGmpH,EAAQlpH,EAAGkpH,EAAQjpH,EAAGipH,EAAQ11H,GACrD88K,GAAet7K,KAAMk0H,GAIvB,EA+LCl9D,SA7LD,SAAmBA,IAE0B,IAAvCukH,GAAgBv/C,OAAQhlE,KAE5BnpB,EAAGmpB,SAAUA,EAASjsD,EAAGisD,EAAShsD,EAAGgsD,EAAS/rD,EAAG+rD,EAASx4D,GAC1D+8K,GAAgBv7K,KAAMg3D,GAIxB,EAsLC7oC,MAzID,WAIC0f,EAAG6qI,QAAS,MACZ7qI,EAAG6qI,QAAS,MACZ7qI,EAAG6qI,QAAS,MACZ7qI,EAAG6qI,QAAS,OACZ7qI,EAAG6qI,QAAS,MACZ7qI,EAAG6qI,QAAS,MACZ7qI,EAAG6qI,QAAS,OAEZ7qI,EAAGi6F,cAAe,OAClBj6F,EAAGwuI,UAAW,EAAG,GACjBxuI,EAAGuuI,kBAAmB,EAAG,EAAG,EAAG,GAE/BvuI,EAAGuqI,WAAW,GAAM,GAAM,GAAM,GAChCvqI,EAAGw9G,WAAY,EAAG,EAAG,EAAG,GAExBx9G,EAAG8qI,WAAW,GACd9qI,EAAGq6F,UAAW,KACdr6F,EAAGgrI,WAAY,GAEfhrI,EAAG0rI,YAAa,YAChB1rI,EAAGu6F,YAAa,IAAK,EAAG,YACxBv6F,EAAG4rI,UAAW,KAAM,KAAM,MAC1B5rI,EAAG6rI,aAAc,GAEjB7rI,EAAG0uI,SAAU,MACb1uI,EAAGyuI,UAAW,MAEdzuI,EAAGm7F,cAAe,EAAG,GAErBn7F,EAAGovI,cAAe,OAElBpvI,EAAG4uI,gBAAiB,MAAO,OAET,IAAbt/B,IAEJtvG,EAAG4uI,gBAAiB,MAAO,MAC3B5uI,EAAG4uI,gBAAiB,MAAO,OAI5B5uI,EAAG+uI,WAAY,MAEf/uI,EAAGmvI,UAAW,GAEdnvI,EAAGqmF,QAAS,EAAG,EAAGrmF,EAAGsyB,OAAO55B,MAAOsH,EAAGsyB,OAAO35B,QAC7CqH,EAAGmpB,SAAU,EAAG,EAAGnpB,EAAGsyB,OAAO55B,MAAOsH,EAAGsyB,OAAO35B,QAI9CqzI,EAAsB,CAAC,EAEvBqB,GAAqB,KACrBC,GAAuB,CAAC,EAExBrB,EAA2B,CAAC,EAC5BC,EAAqB,IAAItzF,QACzBuzF,EAAqB,GAErBC,EAAiB,KAEjBC,GAAyB,EACzBC,EAAkB,KAClBC,EAAuB,KACvBC,EAAkB,KAClBC,EAAkB,KAClBC,EAA4B,KAC5BC,EAAuB,KACvBC,EAAuB,KACvBC,GAA2B,EAE3BC,EAAmB,KACnBC,EAAkB,KAElBC,EAAmB,KAEnBC,GAA6B,KAC7BC,GAA4B,KAE5BO,GAAe96K,IAAK,EAAG,EAAGqtC,EAAGsyB,OAAO55B,MAAOsH,EAAGsyB,OAAO35B,QACrD+0I,GAAgB/6K,IAAK,EAAG,EAAGqtC,EAAGsyB,OAAO55B,MAAOsH,EAAGsyB,OAAO35B,QAEtDwxI,EAAY7pJ,QACZmhB,EAAYnhB,QACZ6iB,EAAc7iB,OAEf,EAoDD,CAEA,SAASiwJ,GAAeC,EAAKlyI,EAAYjtC,EAAOopJ,EAAYpL,EAAcohC,EAAO7tB,GAAO,IAAA8tB,EAAAC,EAWnFhvD,EATE2tB,EAAWD,EAAaC,SACxBoU,EAAcrU,EAAaqU,YAC3BG,EAAiBxU,EAAawU,eAC9BD,EAAiBvU,EAAauU,eAC9BW,EAAalV,EAAakV,WAC1BqsB,EAAqBtyI,EAAWomB,IAAK,wCAA2CpmB,EAAW5rC,IAAK,wCAA2C,KAC3Im+K,EAAgC,iBAAiBrnK,KAAM0wC,UAAUC,WAEjE22H,EAAiB,IAAIl4F,QAGrBm4F,EAAW,IAAIn4F,QAMjBo4F,GAAqB,EAEzB,IAECA,EAAgD,qBAApBC,iBAE+B,OAArD,IAAIA,gBAAiB,EAAG,GAAI9tD,WAAY,KAE/C,CAAE,MAAQz0H,GAET,CAID,SAASwiL,EAAcx4I,EAAOC,GAI7B,OAAOq4I,EAEN,IAAIC,gBAAiBv4I,EAAOC,GAAW6nF,GAAiB,SAE1D,CAEA,SAAS2wD,EAAa91I,EAAO+1I,EAAiBC,EAAgBC,GAE7D,IAAIz8J,EAAQ,EAYZ,IARKwmB,EAAM3C,MAAQ44I,GAAWj2I,EAAM1C,OAAS24I,KAE5Cz8J,EAAQy8J,EAAUhvK,KAAKuC,IAAKw2B,EAAM3C,MAAO2C,EAAM1C,SAM3C9jB,EAAQ,IAAyB,IAApBu8J,EAA2B,CAI5C,GAAmC,qBAArB5tD,kBAAoCnoF,aAAiBmoF,kBACnC,qBAAtB3wD,mBAAqCx3B,aAAiBw3B,mBACtC,qBAAhB4wD,aAA+BpoF,aAAiBooF,YAAgB,CAEzE,IAAMloF,EAAQ61I,EAAkBp1D,GAAkB15G,KAAKi5B,MAEjD7C,EAAQ6C,EAAO1mB,EAAQwmB,EAAM3C,OAC7BC,EAAS4C,EAAO1mB,EAAQwmB,EAAM1C,aAEnBtpC,IAAZsyH,IAAwBA,EAAUuvD,EAAcx4I,EAAOC,IAI5D,IAAM25B,EAAS++G,EAAiBH,EAAcx4I,EAAOC,GAAWgpF,EAUhE,OARArvD,EAAO55B,MAAQA,EACf45B,EAAO35B,OAASA,EAEA25B,EAAO6wD,WAAY,MAC3BG,UAAWjoF,EAAO,EAAG,EAAG3C,EAAOC,GAEvC5nC,QAAQC,KAAM,uDAAyDqqC,EAAM3C,MAAQ,IAAM2C,EAAM1C,OAAS,SAAWD,EAAQ,IAAMC,EAAS,MAErI25B,CAER,CAQC,MANK,SAAUj3B,GAEdtqC,QAAQC,KAAM,yDAA2DqqC,EAAM3C,MAAQ,IAAM2C,EAAM1C,OAAS,MAItG0C,CAIT,CAEA,OAAOA,CAER,CAEA,SAASk2I,EAAgBl2I,GAExB,OAAOygF,GAAczgF,EAAM3C,QAAWojF,GAAczgF,EAAM1C,OAE3D,CAWA,SAAS64I,EAA6Br3I,EAASs3I,GAE9C,OAAOt3I,EAAQO,iBAAmB+2I,GACjCt3I,EAAQI,YAAc0hE,IAAiB9hE,EAAQI,YAAcC,EAE/D,CAEA,SAASk3I,EAAgBzkL,GAExBujL,EAAIkB,eAAgBzkL,EAErB,CAEA,SAAS0kL,EAAmBC,EAAoBC,EAAUC,EAAQx3I,GAAwC,IAA9By3I,EAAmBjjL,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,IAAAA,UAAA,GAE9F,IAAkB,IAAbwgJ,EAAqB,OAAOuiC,EAEjC,GAA4B,OAAvBD,EAA8B,CAElC,QAAmCviL,IAA9BmhL,EAAKoB,GAAqC,OAAOpB,EAAKoB,GAE3D7gL,QAAQC,KAAM,2EAA8E4gL,EAAqB,IAElH,CAEA,IAAIptD,EAAiBqtD,EAoCrB,OAlCkB,OAAbA,IAEY,OAAXC,IAAkBttD,EAAiB,OACxB,OAAXstD,IAAkBttD,EAAiB,OACxB,OAAXstD,IAAkBttD,EAAiB,QAIvB,QAAbqtD,IAEY,OAAXC,IAAkBttD,EAAiB,OACxB,OAAXstD,IAAkBttD,EAAiB,OACxB,OAAXstD,IAAkBttD,EAAiB,QAIvB,OAAbqtD,IAEY,OAAXC,IAAkBttD,EAAiB,OACxB,OAAXstD,IAAkBttD,EAAiB,OACxB,OAAXstD,IAAkBttD,EAAmBlqF,IAAa0E,KAAwC,IAAxB+yI,EAAkC,MAAQ,OACjG,QAAXD,IAAmBttD,EAAiB,OACzB,QAAXstD,IAAmBttD,EAAiB,QAIlB,QAAnBA,GAA+C,QAAnBA,GACb,QAAnBA,GAA+C,QAAnBA,GACT,QAAnBA,GAA+C,QAAnBA,GAE5BlmF,EAAW5rC,IAAK,0BAIV8xH,CAER,CAEA,SAASwtD,EAAc73I,EAASkB,EAAOo2I,GAEtC,OAA8D,IAAzDD,EAA6Br3I,EAASs3I,IAA6Bt3I,EAAQ83I,sBAAwB93I,EAAQI,YAAc0hE,IAAiB9hE,EAAQI,YAAcC,GAE7Jl4B,KAAKk5B,KAAMl5B,KAAKuC,IAAKw2B,EAAM3C,MAAO2C,EAAM1C,SAAa,OAE7BtpC,IAApB8qC,EAAQoqF,SAAyBpqF,EAAQoqF,QAAQ9zH,OAAS,EAI9D0pC,EAAQoqF,QAAQ9zH,OAEZ0pC,EAAQ+3I,qBAAuBrgL,MAAM0sC,QAASpE,EAAQkB,OAE1DA,EAAMkpF,QAAQ9zH,OAMd,CAIT,CAIA,SAAS0hL,EAAgB/2K,GAExB,OAAKA,IAAM6gG,IAAiB7gG,IAAM8gG,IAA8B9gG,IAAMghG,GAE9D,KAID,IAER,CAIA,SAAS+pD,EAAkBl/I,GAE1B,IAAMkzB,EAAUlzB,EAAMha,OAEtBktC,EAAQ5nC,oBAAqB,UAAW4zJ,GAwBzC,SAA4BhsH,GAE3B,IAAMi4I,EAAoB33B,EAAW/nJ,IAAKynC,GAE1C,QAAuC9qC,IAAlC+iL,EAAkBC,YAA4B,OAInD,IAAMx9K,EAASslC,EAAQtlC,OACjBy9K,EAAgBvB,EAASr+K,IAAKmC,GAEpC,GAAKy9K,EAAgB,CAEpB,IAAM/C,EAAe+C,EAAeF,EAAkBG,YACtDhD,EAAaxR,YAImB,IAA3BwR,EAAaxR,WAEjByU,EAAer4I,GAM6B,IAAxC3sC,OAAO4G,KAAMk+K,GAAgB7hL,QAEjCsgL,EAASl3H,OAAQhlD,EAInB,CAEA4lJ,EAAW3rH,OAAQqL,EAEpB,CA1DCs4I,CAAmBt4I,GAEdA,EAAQkmI,gBAEZyQ,EAAej3H,OAAQ1f,EAIzB,CAEA,SAASu4I,EAAuBzrK,GAE/B,IAAMgkI,EAAehkI,EAAMha,OAE3Bg+I,EAAa14I,oBAAqB,UAAWmgL,GA2D9C,SAAiCznC,GAEhC,IAAM9wG,EAAU8wG,EAAa9wG,QAEvBw4I,EAAyBl4B,EAAW/nJ,IAAKu4I,GACzCmnC,EAAoB33B,EAAW/nJ,IAAKynC,QAEA9qC,IAArC+iL,EAAkBQ,iBAEtBpC,EAAIgC,cAAeJ,EAAkBQ,gBAErChwB,EAAKgK,OAAOh4D,YAIRq2C,EAAa9mG,cAEjB8mG,EAAa9mG,aAAa0M,UAI3B,GAAKo6F,EAAamB,wBAEjB,IAAM,IAAIt6I,EAAI,EAAGA,EAAI,EAAGA,IAEvB0+K,EAAIqC,kBAAmBF,EAAuBG,mBAAoBhhL,IAC7D6gL,EAAuBI,oBAAqBvC,EAAIwC,mBAAoBL,EAAuBI,mBAAoBjhL,QAI/G,CAMN,GAJA0+K,EAAIqC,kBAAmBF,EAAuBG,oBACzCH,EAAuBI,oBAAqBvC,EAAIwC,mBAAoBL,EAAuBI,oBAC3FJ,EAAuBM,gCAAiCzC,EAAIqC,kBAAmBF,EAAuBM,gCAEtGN,EAAuBO,yBAE3B,IAAM,IAAIphL,EAAI,EAAGA,EAAI6gL,EAAuBO,yBAAyBziL,OAAQqB,IAEvE6gL,EAAuBO,yBAA0BphL,IAAM0+K,EAAIwC,mBAAoBL,EAAuBO,yBAA0BphL,IAMlI6gL,EAAuBQ,0BAA2B3C,EAAIwC,mBAAoBL,EAAuBQ,yBAEvG,CAEA,GAAKloC,EAAapjB,6BAEjB,IAAM,IAAI/1H,EAAI,EAAG8sG,EAAKzkE,EAAQ1pC,OAAQqB,EAAI8sG,EAAI9sG,IAAO,CAEpD,IAAMshL,EAAuB34B,EAAW/nJ,IAAKynC,EAASroC,IAEjDshL,EAAqBR,iBAEzBpC,EAAIgC,cAAeY,EAAqBR,gBAExChwB,EAAKgK,OAAOh4D,YAIb6lD,EAAW3rH,OAAQqL,EAASroC,GAE7B,CAID2oJ,EAAW3rH,OAAQqL,GACnBsgH,EAAW3rH,OAAQm8G,EAEpB,CAlICooC,CAAwBpoC,EAEzB,CA0CA,SAASunC,EAAer4I,GAEvB,IAAMi4I,EAAoB33B,EAAW/nJ,IAAKynC,GAC1Cq2I,EAAIgC,cAAeJ,EAAkBQ,gBAErC,IAAM/9K,EAASslC,EAAQtlC,cACDk8K,EAASr+K,IAAKmC,GACdu9K,EAAkBG,YAExC3vB,EAAKgK,OAAOh4D,UAEb,CA+EA,IAAI0+E,EAAe,EAgDnB,SAASzgB,EAAc14H,EAASo5I,GAE/B,IAAMnB,EAAoB33B,EAAW/nJ,IAAKynC,GAI1C,GAFKA,EAAQkmI,gBAm4Cd,SAA6BlmI,GAE5B,IAAMz0B,EAAQk9I,EAAKr+G,OAAO7+B,MAIrBorK,EAAep+K,IAAKynC,KAAcz0B,IAEtCorK,EAAen+K,IAAKwnC,EAASz0B,GAC7By0B,EAAQoG,SAIV,CAh5C+BizI,CAAoBr5I,IAEX,IAAlCA,EAAQwqF,uBAAmCxqF,EAAQo8B,QAAU,GAAK67G,EAAkBqB,YAAct5I,EAAQo8B,QAAU,CAExH,IAAMl7B,EAAQlB,EAAQkB,MAEtB,GAAe,OAAVA,EAEJtqC,QAAQC,KAAM,+EAER,KAAwB,IAAnBqqC,EAAMq4I,SAOjB,YADAC,EAAevB,EAAmBj4I,EAASo5I,GAJ3CxiL,QAAQC,KAAM,yEAOf,CAED,CAEAK,EAAMu8K,YAAa,KAAMwE,EAAkBQ,eAAgB,MAAQW,EAEpE,CA+CA,IAAMK,GAAYlD,EAAG,CAAC,GAAJ3kJ,EAAAA,EAAAA,GAAA2kJ,EACfj0E,GAAkB,QAAK1wE,EAAAA,EAAAA,GAAA2kJ,EACvBn0E,GAAuB,QAAKxwE,EAAAA,EAAAA,GAAA2kJ,EAC5Bl0E,GAA0B,OAAKk0E,GAG5BmD,GAAUlD,EAAG,CAAC,GAAJ5kJ,EAAAA,EAAAA,GAAA4kJ,EACb10E,GAAiB,OAAIlwE,EAAAA,EAAAA,GAAA4kJ,EACrBz0E,GAA8B,OAAInwE,EAAAA,EAAAA,GAAA4kJ,EAClCv0E,GAA6B,OAAIrwE,EAAAA,EAAAA,GAAA4kJ,EAEjCn2I,GAAgB,OAAIzO,EAAAA,EAAAA,GAAA4kJ,EACpBx0E,GAA6B,OAAIpwE,EAAAA,EAAAA,GAAA4kJ,EACjCt0E,GAA4B,MAAIs0E,GAGnC,SAASmD,EAAsBC,EAAa55I,EAASs3I,GA4CpD,GA1CKA,GAEJjB,EAAI3C,cAAekG,EAAa,MAAOH,EAAcz5I,EAAQwqE,QAC7D6rE,EAAI3C,cAAekG,EAAa,MAAOH,EAAcz5I,EAAQyqE,QAExC,QAAhBmvE,GAAyC,QAAhBA,GAE7BvD,EAAI3C,cAAekG,EAAa,MAAOH,EAAcz5I,EAAQwsF,QAI9D6pD,EAAI3C,cAAekG,EAAa,MAAOF,EAAY15I,EAAQM,YAC3D+1I,EAAI3C,cAAekG,EAAa,MAAOF,EAAY15I,EAAQI,cAI3Di2I,EAAI3C,cAAekG,EAAa,MAAO,OACvCvD,EAAI3C,cAAekG,EAAa,MAAO,OAElB,QAAhBA,GAAyC,QAAhBA,GAE7BvD,EAAI3C,cAAekG,EAAa,MAAO,OAInC55I,EAAQwqE,QAAUpI,IAAuBpiE,EAAQyqE,QAAUrI,IAE/DxrG,QAAQC,KAAM,iIAIfw/K,EAAI3C,cAAekG,EAAa,MAAO5B,EAAgBh4I,EAAQM,YAC/D+1I,EAAI3C,cAAekG,EAAa,MAAO5B,EAAgBh4I,EAAQI,YAE1DJ,EAAQI,YAAc0hE,IAAiB9hE,EAAQI,YAAcC,IAEjEzpC,QAAQC,KAAM,qIAM4C,IAAvDstC,EAAWomB,IAAK,kCAA8C,CAElE,IAAMmtC,EAAYvzD,EAAW5rC,IAAK,kCAElC,GAAKynC,EAAQpqC,OAAS4pC,KAA8D,IAAjD2E,EAAWomB,IAAK,4BAAyC,OAC5F,IAAkB,IAAb4qF,GAAwBn1G,EAAQpqC,OAASymC,KAAuE,IAAtD8H,EAAWomB,IAAK,iCAAgD,QAE1HvqB,EAAQo6D,WAAa,GAAKkmD,EAAW/nJ,IAAKynC,GAAU65I,uBAExDxD,EAAIyD,cAAeF,EAAaliF,EAAUqiF,2BAA4B5xK,KAAKsC,IAAKu1B,EAAQo6D,WAAY86C,EAAa+U,qBACjH3J,EAAW/nJ,IAAKynC,GAAU65I,oBAAsB75I,EAAQo6D,WAI1D,CAED,CAEA,SAAS4/E,EAAa/B,EAAmBj4I,GAExC,IAAIi6I,GAAc,OAEqB/kL,IAAlC+iL,EAAkBC,cAEtBD,EAAkBC,aAAc,EAEhCl4I,EAAQ/nC,iBAAkB,UAAW+zJ,IAMtC,IAAMtxJ,EAASslC,EAAQtlC,OACnBy9K,EAAgBvB,EAASr+K,IAAKmC,QAEXxF,IAAlBijL,IAEJA,EAAgB,CAAC,EACjBvB,EAASp+K,IAAKkC,EAAQy9K,IAMvB,IAAM+B,EA5MP,SAA6Bl6I,GAE5B,IAAMmzB,EAAQ,GAgBd,OAdAA,EAAM98D,KAAM2pC,EAAQwqE,OACpBr3C,EAAM98D,KAAM2pC,EAAQyqE,OACpBt3C,EAAM98D,KAAM2pC,EAAQM,WACpB6yB,EAAM98D,KAAM2pC,EAAQI,WACpB+yB,EAAM98D,KAAM2pC,EAAQo6D,YACpBjnC,EAAM98D,KAAM2pC,EAAQqqF,gBACpBl3D,EAAM98D,KAAM2pC,EAAQ5B,QACpB+0B,EAAM98D,KAAM2pC,EAAQpqC,MACpBu9D,EAAM98D,KAAM2pC,EAAQO,iBACpB4yB,EAAM98D,KAAM2pC,EAAQsqF,kBACpBn3D,EAAM98D,KAAM2pC,EAAQQ,OACpB2yB,EAAM98D,KAAM2pC,EAAQuqF,iBACpBp3D,EAAM98D,KAAM2pC,EAAQG,UAEbgzB,EAAM3xB,MAEd,CAwLyB24I,CAAoBn6I,GAE5C,GAAKk6I,IAAoBjC,EAAkBG,WAAa,MAIbljL,IAArCijL,EAAe+B,KAInB/B,EAAe+B,GAAoB,CAClCl6I,QAASq2I,EAAI7C,gBACb5P,UAAW,GAGZnb,EAAKgK,OAAOh4D,WAKZw/E,GAAc,GAIf9B,EAAe+B,GAAkBtW,YAKjC,IAAMwR,EAAe+C,EAAeF,EAAkBG,iBAEhCljL,IAAjBkgL,IAEJ+C,EAAeF,EAAkBG,YAAaxU,YAEd,IAA3BwR,EAAaxR,WAEjByU,EAAer4I,IAQjBi4I,EAAkBG,WAAa8B,EAC/BjC,EAAkBQ,eAAiBN,EAAe+B,GAAkBl6I,OAErE,CAEA,OAAOi6I,CAER,CAEA,SAAST,EAAevB,EAAmBj4I,EAASo5I,GAEnD,IAAIQ,EAAc,KAEb55I,EAAQusF,qBAAqBqtD,EAAc,OAC3C55I,EAAQgtF,kBAAkB4sD,EAAc,OAE7C,IAAMK,EAAcD,EAAa/B,EAAmBj4I,GAC9CtlC,EAASslC,EAAQtlC,OAEvBxD,EAAMu8K,YAAamG,EAAa3B,EAAkBQ,eAAgB,MAAQW,GAE1E,IAAMgB,EAAmB95B,EAAW/nJ,IAAKmC,GAEzC,GAAKA,EAAO0hE,UAAYg+G,EAAiBd,YAA6B,IAAhBW,EAAuB,CAE5E/iL,EAAM+9K,cAAe,MAAQmE,GAE7B/C,EAAIgE,YAAa,MAAOr6I,EAAQQ,OAChC61I,EAAIgE,YAAa,MAAOr6I,EAAQsqF,kBAChC+rD,EAAIgE,YAAa,KAAMr6I,EAAQuqF,iBAC/B8rD,EAAIgE,YAAa,MAAO,GAExB,IAYIC,EAZErD,EAjkBR,SAAiCj3I,GAEhC,OAAKm1G,IAEIn1G,EAAQwqE,QAAUpI,IAAuBpiE,EAAQyqE,QAAUrI,IACjEpiE,EAAQI,YAAc0hE,IAAiB9hE,EAAQI,YAAcC,GAEjE,CA0jB0Bk6I,CAAwBv6I,KAAiD,IAApCo3I,EAAgBp3I,EAAQkB,OACjFA,EAAQ81I,EAAah3I,EAAQkB,MAAO+1I,GAAiB,EAAOxtB,GAG1D6tB,EAAeF,EAFrBl2I,EAAQs5I,EAAkBx6I,EAASkB,KAEai0G,EAC/CuiC,EAAWpB,EAAMzvD,QAAS7mF,EAAQ5B,OAAQ4B,EAAQG,UAE/Cw3I,EAASrB,EAAMzvD,QAAS7mF,EAAQpqC,MACnC6kL,EAAmBjD,EAAmBx3I,EAAQqqF,eAAgBqtD,EAAUC,EAAQ33I,EAAQG,SAAUH,EAAQkmI,gBAE3GyT,EAAsBC,EAAa55I,EAASs3I,GAG5C,IAAMltD,EAAUpqF,EAAQoqF,QAElBswD,EAAkBvlC,IAAuC,IAA3Bn1G,EAAQkmI,eACtCyU,OAAkDzlL,IAA/BklL,EAAiBd,YAA+C,IAAhBW,EACnEW,EAAS/C,EAAc73I,EAASkB,EAAOo2I,GAE7C,GAAKt3I,EAAQ66I,eAIZJ,EAAmB,KAEdtlC,EAIHslC,EAFIz6I,EAAQpqC,OAAS4pC,GAEF,MAERQ,EAAQpqC,OAASkmH,GAET,MAER97E,EAAQpqC,OAASqmH,GAET,MAIA,MAMfj8E,EAAQpqC,OAAS4pC,IAErB5oC,QAAQkC,MAAO,gEAQZknC,EAAQ5B,SAAW6R,IAAoC,OAArBwqI,GAKjCz6I,EAAQpqC,OAASs6C,IAAqBlQ,EAAQpqC,OAASkmH,KAE3DllH,QAAQC,KAAM,+FAEdmpC,EAAQpqC,KAAOkmH,GACf67D,EAASrB,EAAMzvD,QAAS7mF,EAAQpqC,OAM7BoqC,EAAQ5B,SAAWm+E,IAA2C,OAArBk+D,IAI7CA,EAAmB,MAKdz6I,EAAQpqC,OAASqmH,KAErBrlH,QAAQC,KAAM,oFAEdmpC,EAAQpqC,KAAOqmH,GACf07D,EAASrB,EAAMzvD,QAAS7mF,EAAQpqC,QAQ7B+kL,IAECD,EAEJxjL,EAAM6+K,aAAc,KAAM,EAAG0E,EAAkBv5I,EAAM3C,MAAO2C,EAAM1C,QAIlEtnC,EAAMy8K,WAAY,KAAM,EAAG8G,EAAkBv5I,EAAM3C,MAAO2C,EAAM1C,OAAQ,EAAGk5I,EAAUC,EAAQ,YAMzF,GAAK33I,EAAQ6pF,cAMnB,GAAKO,EAAQ9zH,OAAS,GAAKghL,EAAe,CAEpCoD,GAAiBC,GAErBzjL,EAAM6+K,aAAc,KAAM6E,EAAQH,EAAkBrwD,EAAS,GAAI7rF,MAAO6rF,EAAS,GAAI5rF,QAItF,IAAM,IAAI7mC,EAAI,EAAG8sG,EAAK2lB,EAAQ9zH,OAAQqB,EAAI8sG,EAAI9sG,IAE7C2iL,EAASlwD,EAASzyH,GAEb+iL,EAEJxjL,EAAM++K,cAAe,KAAMt+K,EAAG,EAAG,EAAG2iL,EAAO/7I,MAAO+7I,EAAO97I,OAAQk5I,EAAUC,EAAQ2C,EAAO55K,MAI1FxJ,EAAMy8K,WAAY,KAAMh8K,EAAG8iL,EAAkBH,EAAO/7I,MAAO+7I,EAAO97I,OAAQ,EAAGk5I,EAAUC,EAAQ2C,EAAO55K,MAMxGs/B,EAAQO,iBAAkB,CAE3B,MAEMm6I,GAECC,GAEJzjL,EAAM6+K,aAAc,KAAM6E,EAAQH,EAAkBv5I,EAAM3C,MAAO2C,EAAM1C,QAIxEtnC,EAAM++K,cAAe,KAAM,EAAG,EAAG,EAAG/0I,EAAM3C,MAAO2C,EAAM1C,OAAQk5I,EAAUC,EAAQz2I,EAAMxgC,OAIvFxJ,EAAMy8K,WAAY,KAAM,EAAG8G,EAAkBv5I,EAAM3C,MAAO2C,EAAM1C,OAAQ,EAAGk5I,EAAUC,EAAQz2I,EAAMxgC,WAM/F,GAAKs/B,EAAQ+3I,oBAAsB,CAEpC2C,GAAiBC,GAErBzjL,EAAM6+K,aAAc,KAAM6E,EAAQH,EAAkBrwD,EAAS,GAAI7rF,MAAO6rF,EAAS,GAAI5rF,QAItF,IAAM,IAAI7mC,EAAI,EAAG8sG,EAAK2lB,EAAQ9zH,OAAQqB,EAAI8sG,EAAI9sG,IAE7C2iL,EAASlwD,EAASzyH,GAEbqoC,EAAQ5B,SAAWg+E,GAEL,OAAbs7D,EAECgD,EAEJxjL,EAAMi/K,wBAAyB,KAAMx+K,EAAG,EAAG,EAAG2iL,EAAO/7I,MAAO+7I,EAAO97I,OAAQk5I,EAAU4C,EAAO55K,MAI5FxJ,EAAMq+K,qBAAsB,KAAM59K,EAAG8iL,EAAkBH,EAAO/7I,MAAO+7I,EAAO97I,OAAQ,EAAG87I,EAAO55K,MAM/F9J,QAAQC,KAAM,kGAMV6jL,EAEJxjL,EAAM++K,cAAe,KAAMt+K,EAAG,EAAG,EAAG2iL,EAAO/7I,MAAO+7I,EAAO97I,OAAQk5I,EAAUC,EAAQ2C,EAAO55K,MAI1FxJ,EAAMy8K,WAAY,KAAMh8K,EAAG8iL,EAAkBH,EAAO/7I,MAAO+7I,EAAO97I,OAAQ,EAAGk5I,EAAUC,EAAQ2C,EAAO55K,KAQ1G,MAAO,GAAKs/B,EAAQusF,mBAEdmuD,GAECC,GAEJzjL,EAAM8+K,aAAc,MAAO4E,EAAQH,EAAkBv5I,EAAM3C,MAAO2C,EAAM1C,OAAQ0C,EAAMtoB,OAIvF1hB,EAAMg/K,cAAe,MAAO,EAAG,EAAG,EAAG,EAAGh1I,EAAM3C,MAAO2C,EAAM1C,OAAQ0C,EAAMtoB,MAAO8+J,EAAUC,EAAQz2I,EAAMxgC,OAIxGxJ,EAAMs+K,WAAY,MAAO,EAAGiF,EAAkBv5I,EAAM3C,MAAO2C,EAAM1C,OAAQ0C,EAAMtoB,MAAO,EAAG8+J,EAAUC,EAAQz2I,EAAMxgC,WAI5G,GAAKs/B,EAAQgtF,gBAEd0tD,GAECC,GAEJzjL,EAAM8+K,aAAc,MAAO4E,EAAQH,EAAkBv5I,EAAM3C,MAAO2C,EAAM1C,OAAQ0C,EAAMtoB,OAIvF1hB,EAAMg/K,cAAe,MAAO,EAAG,EAAG,EAAG,EAAGh1I,EAAM3C,MAAO2C,EAAM1C,OAAQ0C,EAAMtoB,MAAO8+J,EAAUC,EAAQz2I,EAAMxgC,OAIxGxJ,EAAMs+K,WAAY,MAAO,EAAGiF,EAAkBv5I,EAAM3C,MAAO2C,EAAM1C,OAAQ0C,EAAMtoB,MAAO,EAAG8+J,EAAUC,EAAQz2I,EAAMxgC,WAI5G,GAAKs/B,EAAQ83I,sBAEnB,GAAK6C,EAEJ,GAAKD,EAEJxjL,EAAM6+K,aAAc,KAAM6E,EAAQH,EAAkBv5I,EAAM3C,MAAO2C,EAAM1C,aAMvE,IAFA,IAAID,EAAQ2C,EAAM3C,MAAOC,EAAS0C,EAAM1C,OAE9B7mC,EAAI,EAAGA,EAAIijL,EAAQjjL,IAE5BT,EAAMy8K,WAAY,KAAMh8K,EAAG8iL,EAAkBl8I,EAAOC,EAAQ,EAAGk5I,EAAUC,EAAQ,MAEjFp5I,IAAU,EACVC,IAAW,OAgBd,GAAK4rF,EAAQ9zH,OAAS,GAAKghL,EAAe,CAEpCoD,GAAiBC,GAErBzjL,EAAM6+K,aAAc,KAAM6E,EAAQH,EAAkBrwD,EAAS,GAAI7rF,MAAO6rF,EAAS,GAAI5rF,QAItF,IAAM,IAAI7mC,EAAI,EAAG8sG,EAAK2lB,EAAQ9zH,OAAQqB,EAAI8sG,EAAI9sG,IAE7C2iL,EAASlwD,EAASzyH,GAEb+iL,EAEJxjL,EAAM++K,cAAe,KAAMt+K,EAAG,EAAG,EAAG+/K,EAAUC,EAAQ2C,GAItDpjL,EAAMy8K,WAAY,KAAMh8K,EAAG8iL,EAAkB/C,EAAUC,EAAQ2C,GAMjEt6I,EAAQO,iBAAkB,CAE3B,MAEMm6I,GAECC,GAEJzjL,EAAM6+K,aAAc,KAAM6E,EAAQH,EAAkBv5I,EAAM3C,MAAO2C,EAAM1C,QAIxEtnC,EAAM++K,cAAe,KAAM,EAAG,EAAG,EAAGyB,EAAUC,EAAQz2I,IAItDhqC,EAAMy8K,WAAY,KAAM,EAAG8G,EAAkB/C,EAAUC,EAAQz2I,GAQ7Dm2I,EAA6Br3I,EAASs3I,IAE1CC,EAAgBqC,GAIjBQ,EAAiBd,UAAY5+K,EAAO0hE,QAE/Bp8B,EAAQ2oB,UAAW3oB,EAAQ2oB,SAAU3oB,EAE3C,CAEAi4I,EAAkBqB,UAAYt5I,EAAQo8B,OAEvC,CAoNA,SAAS0+G,EAAyBpG,EAAa5jC,EAAc9wG,EAAS+6I,EAAYC,GAEjF,IAAMtD,EAAWpB,EAAMzvD,QAAS7mF,EAAQ5B,OAAQ4B,EAAQG,UAClDw3I,EAASrB,EAAMzvD,QAAS7mF,EAAQpqC,MAChC6kL,EAAmBjD,EAAmBx3I,EAAQqqF,eAAgBqtD,EAAUC,EAAQ33I,EAAQG,UAC/DmgH,EAAW/nJ,IAAKu4I,GAEjBmqC,wBAEN,QAAlBD,GAA6C,QAAlBA,EAE/B9jL,EAAMs+K,WAAYwF,EAAe,EAAGP,EAAkB3pC,EAAavyG,MAAOuyG,EAAatyG,OAAQsyG,EAAal4H,MAAO,EAAG8+J,EAAUC,EAAQ,MAIxIzgL,EAAMy8K,WAAYqH,EAAe,EAAGP,EAAkB3pC,EAAavyG,MAAOuyG,EAAatyG,OAAQ,EAAGk5I,EAAUC,EAAQ,OAMtHzgL,EAAMu9K,gBAAiB,MAAOC,GAEzBwG,EAAoBpqC,GAExB2lC,EAAmB0E,mCAAoC,MAAOJ,EAAYC,EAAe16B,EAAW/nJ,IAAKynC,GAAUy4I,eAAgB,EAAG2C,EAAwBtqC,IAI9JulC,EAAIgF,qBAAsB,MAAON,EAAYC,EAAe16B,EAAW/nJ,IAAKynC,GAAUy4I,eAAgB,GAIvGvhL,EAAMu9K,gBAAiB,MAAO,KAE/B,CAIA,SAAS6G,EAA0BC,EAAczqC,EAAc0qC,GAI9D,GAFAnF,EAAIoF,iBAAkB,MAAOF,GAExBzqC,EAAaxpG,cAAiBwpG,EAAa9nG,cAAgB,CAE/D,IAAIyxI,EAAmB,MAEvB,GAAKe,GAAiBN,EAAoBpqC,GAAiB,CAE1D,IAAM9mG,EAAe8mG,EAAa9mG,aAE7BA,GAAgBA,EAAa6wI,iBAE5B7wI,EAAap0C,OAAS4pC,GAE1Bi7I,EAAmB,MAERzwI,EAAap0C,OAASkmH,KAEjC2+D,EAAmB,QAMrB,IAAMruD,EAAUgvD,EAAwBtqC,GAEnCoqC,EAAoBpqC,GAExB2lC,EAAmBiF,kCAAmC,MAAOtvD,EAASquD,EAAkB3pC,EAAavyG,MAAOuyG,EAAatyG,QAIzH63I,EAAIsF,+BAAgC,MAAOvvD,EAASquD,EAAkB3pC,EAAavyG,MAAOuyG,EAAatyG,OAIzG,MAEC63I,EAAIuF,oBAAqB,MAAOnB,EAAkB3pC,EAAavyG,MAAOuyG,EAAatyG,QAIpF63I,EAAIwF,wBAAyB,MAAO,MAAO,MAAON,EAEnD,MAAO,GAAKzqC,EAAaxpG,aAAewpG,EAAa9nG,cAAgB,CAEpE,IAAMojF,EAAUgvD,EAAwBtqC,GAEnC0qC,IAAwD,IAAvCN,EAAoBpqC,GAEzCulC,EAAIsF,+BAAgC,MAAOvvD,EAAS,MAAO0kB,EAAavyG,MAAOuyG,EAAatyG,QAEjF08I,EAAoBpqC,GAE/B2lC,EAAmBiF,kCAAmC,MAAOtvD,EAAS,MAAO0kB,EAAavyG,MAAOuyG,EAAatyG,QAI9G63I,EAAIuF,oBAAqB,MAAO,MAAO9qC,EAAavyG,MAAOuyG,EAAatyG,QAKzE63I,EAAIwF,wBAAyB,MAAO,MAAO,MAAON,EAEnD,MAIC,IAFA,IAAM9gF,GAAyD,IAA9Cq2C,EAAapjB,6BAAwCojB,EAAa9wG,QAAU,CAAE8wG,EAAa9wG,SAElGroC,EAAI,EAAGA,EAAI8iG,EAASnkG,OAAQqB,IAAO,CAE5C,IAAMqoC,EAAUy6D,EAAU9iG,GAEpB+/K,EAAWpB,EAAMzvD,QAAS7mF,EAAQ5B,OAAQ4B,EAAQG,UAClDw3I,EAASrB,EAAMzvD,QAAS7mF,EAAQpqC,MAChC6kL,EAAmBjD,EAAmBx3I,EAAQqqF,eAAgBqtD,EAAUC,EAAQ33I,EAAQG,UACxFisF,EAAUgvD,EAAwBtqC,GAEnC0qC,IAAwD,IAAvCN,EAAoBpqC,GAEzCulC,EAAIsF,+BAAgC,MAAOvvD,EAASquD,EAAkB3pC,EAAavyG,MAAOuyG,EAAatyG,QAE5F08I,EAAoBpqC,GAE/B2lC,EAAmBiF,kCAAmC,MAAOtvD,EAASquD,EAAkB3pC,EAAavyG,MAAOuyG,EAAatyG,QAIzH63I,EAAIuF,oBAAqB,MAAOnB,EAAkB3pC,EAAavyG,MAAOuyG,EAAatyG,OAIrF,CAID63I,EAAIoF,iBAAkB,MAAO,KAE9B,CAiEA,SAASK,EAAwBhrC,GAEhC,IAAM0nC,EAAyBl4B,EAAW/nJ,IAAKu4I,GACzCirC,GAAoD,IAAzCjrC,EAAamB,wBAE9B,GAAKnB,EAAa9mG,eAAkBwuI,EAAuBwD,0BAA4B,CAEtF,GAAKD,EAAS,MAAM,IAAItlL,MAAO,6DArEjC,SAA4Bi+K,EAAa5jC,GAGxC,GADiBA,GAAgBA,EAAamB,wBAChC,MAAM,IAAIx7I,MAAO,2DAI/B,GAFAS,EAAMu9K,gBAAiB,MAAOC,IAErB5jC,EAAa9mG,eAAgB8mG,EAAa9mG,aAAa6wI,eAE/D,MAAM,IAAIpkL,MAAO,uEAKX6pJ,EAAW/nJ,IAAKu4I,EAAa9mG,cAAeyuI,gBACjD3nC,EAAa9mG,aAAa9I,MAAM3C,QAAUuyG,EAAavyG,OACvDuyG,EAAa9mG,aAAa9I,MAAM1C,SAAWsyG,EAAatyG,SAEzDsyG,EAAa9mG,aAAa9I,MAAM3C,MAAQuyG,EAAavyG,MACrDuyG,EAAa9mG,aAAa9I,MAAM1C,OAASsyG,EAAatyG,OACtDsyG,EAAa9mG,aAAa5V,aAAc,GAIzCskI,EAAc5nB,EAAa9mG,aAAc,GAEzC,IAAMiyI,EAAoB37B,EAAW/nJ,IAAKu4I,EAAa9mG,cAAeyuI,eAChErsD,EAAUgvD,EAAwBtqC,GAExC,GAAKA,EAAa9mG,aAAa5L,SAAW6R,GAEpCirI,EAAoBpqC,GAExB2lC,EAAmB0E,mCAAoC,MAAO,MAAO,KAAMc,EAAmB,EAAG7vD,GAIjGiqD,EAAIgF,qBAAsB,MAAO,MAAO,KAAMY,EAAmB,OAI5D,IAAKnrC,EAAa9mG,aAAa5L,SAAWm+E,GAchD,MAAM,IAAI9lH,MAAO,+BAZZykL,EAAoBpqC,GAExB2lC,EAAmB0E,mCAAoC,MAAO,MAAO,KAAMc,EAAmB,EAAG7vD,GAIjGiqD,EAAIgF,qBAAsB,MAAO,MAAO,KAAMY,EAAmB,EAQnE,CAED,CAYEC,CAAmB1D,EAAuBG,mBAAoB7nC,EAE/D,MAEC,GAAKirC,EAAS,CAEbvD,EAAuBI,mBAAqB,GAE5C,IAAM,IAAIjhL,EAAI,EAAGA,EAAI,EAAGA,IAEvBT,EAAMu9K,gBAAiB,MAAO+D,EAAuBG,mBAAoBhhL,IACzE6gL,EAAuBI,mBAAoBjhL,GAAM0+K,EAAI8F,qBACrDb,EAA0B9C,EAAuBI,mBAAoBjhL,GAAKm5I,GAAc,EAI1F,MAEC55I,EAAMu9K,gBAAiB,MAAO+D,EAAuBG,oBACrDH,EAAuBI,mBAAqBvC,EAAI8F,qBAChDb,EAA0B9C,EAAuBI,mBAAoB9nC,GAAc,GAMrF55I,EAAMu9K,gBAAiB,MAAO,KAE/B,CA+VA,SAAS2G,EAAwBtqC,GAEhC,OAAO3oI,KAAKsC,IAAK2/I,EAAYtZ,EAAa1kB,QAE3C,CAEA,SAAS8uD,EAAoBpqC,GAE5B,IAAM0nC,EAAyBl4B,EAAW/nJ,IAAKu4I,GAE/C,OAAOqE,GAAYrE,EAAa1kB,QAAU,IAAkE,IAA7DjoF,EAAWomB,IAAK,0CAAqG,IAAhDiuH,EAAuB4D,oBAE5I,CAiBA,SAAS5B,EAAkBx6I,EAASkB,GAEnC,IAAMf,EAAWH,EAAQG,SACnB/B,EAAS4B,EAAQ5B,OACjBxoC,EAAOoqC,EAAQpqC,KAErB,OAAqC,IAAhCoqC,EAAQ+3I,sBAA2D,IAA3B/3I,EAAQkmI,gBAA2BlmI,EAAQ5B,SAAW6iF,IAE9F9gF,IAAa2E,KAIZ3E,IAAa0E,IAEC,IAAbswG,GAIkC,IAAjChxG,EAAWomB,IAAK,aAAyBnsB,IAAWg+E,IAExDp8E,EAAQ5B,OAAS6iF,GAIjBjhF,EAAQI,UAAYC,GACpBL,EAAQO,iBAAkB,GAM1BW,EAAQ6nF,GAAWszD,aAAcn7I,GAQ7B9C,IAAWg+E,IAAcxmH,IAAS8lH,IAEtC9kH,QAAQC,KAAM,2FAQhBD,QAAQkC,MAAO,qDAAsDqnC,IA3CkDe,CAmD1H,CAIAntC,KAAKsiK,oBA3/CL,WAEC,IAAMimB,EAAcnD,EAUpB,OARKmD,GAAe/yB,GAEnB3yJ,QAAQC,KAAM,sCAAwCylL,EAAc,+CAAiD/yB,GAItH4vB,GAAgB,EAETmD,CAER,EA8+CAvoL,KAAKwoL,kBAlgDL,WAECpD,EAAe,CAEhB,EAggDAplL,KAAK2kK,aAAeA,EACpB3kK,KAAKilK,kBAx7CL,SAA4Bh5H,EAASo5I,GAEpC,IAAMnB,EAAoB33B,EAAW/nJ,IAAKynC,GAErCA,EAAQo8B,QAAU,GAAK67G,EAAkBqB,YAAct5I,EAAQo8B,QAEnEo9G,EAAevB,EAAmBj4I,EAASo5I,GAK5CliL,EAAMu8K,YAAa,MAAOwE,EAAkBQ,eAAgB,MAAQW,EAErE,EA46CArlL,KAAK6kK,aA16CL,SAAuB54H,EAASo5I,GAE/B,IAAMnB,EAAoB33B,EAAW/nJ,IAAKynC,GAErCA,EAAQo8B,QAAU,GAAK67G,EAAkBqB,YAAct5I,EAAQo8B,QAEnEo9G,EAAevB,EAAmBj4I,EAASo5I,GAK5CliL,EAAMu8K,YAAa,MAAOwE,EAAkBQ,eAAgB,MAAQW,EAErE,EA85CArlL,KAAK+kK,eA55CL,SAAyB94H,EAASo5I,GAEjC,IAAMnB,EAAoB33B,EAAW/nJ,IAAKynC,GAErCA,EAAQo8B,QAAU,GAAK67G,EAAkBqB,YAAct5I,EAAQo8B,QAshBrE,SAA4B67G,EAAmBj4I,EAASo5I,GAEvD,GAA8B,IAAzBp5I,EAAQkB,MAAM5qC,OAAe,OAElC,IAAM2jL,EAAcD,EAAa/B,EAAmBj4I,GAC9CtlC,EAASslC,EAAQtlC,OAEvBxD,EAAMu8K,YAAa,MAAOwE,EAAkBQ,eAAgB,MAAQW,GAEpE,IAAMgB,EAAmB95B,EAAW/nJ,IAAKmC,GAEzC,GAAKA,EAAO0hE,UAAYg+G,EAAiBd,YAA6B,IAAhBW,EAAuB,CAE5E/iL,EAAM+9K,cAAe,MAAQmE,GAE7B/C,EAAIgE,YAAa,MAAOr6I,EAAQQ,OAChC61I,EAAIgE,YAAa,MAAOr6I,EAAQsqF,kBAChC+rD,EAAIgE,YAAa,KAAMr6I,EAAQuqF,iBAC/B8rD,EAAIgE,YAAa,MAAO,GAOxB,IALA,IAAMmC,EAAiBx8I,EAAQ+3I,qBAAuB/3I,EAAQkB,MAAO,GAAI62I,oBACnEluD,EAAkB7pF,EAAQkB,MAAO,IAAOlB,EAAQkB,MAAO,GAAI2oF,cAE3D4yD,EAAY,GAER9kL,EAAI,EAAGA,EAAI,EAAGA,IAQtB8kL,EAAW9kL,GANL6kL,GAAkB3yD,EAMPA,EAAgB7pF,EAAQkB,MAAOvpC,GAAIupC,MAAQlB,EAAQkB,MAAOvpC,GAJ1Dq/K,EAAah3I,EAAQkB,MAAOvpC,IAAK,GAAO,EAAM+xJ,GAQhE+yB,EAAW9kL,GAAM6iL,EAAkBx6I,EAASy8I,EAAW9kL,IAIxD,IAYIyyH,EAZElpF,EAAQu7I,EAAW,GACxBnF,EAAeF,EAAgBl2I,IAAWi0G,EAC1CuiC,EAAWpB,EAAMzvD,QAAS7mF,EAAQ5B,OAAQ4B,EAAQG,UAClDw3I,EAASrB,EAAMzvD,QAAS7mF,EAAQpqC,MAChC6kL,EAAmBjD,EAAmBx3I,EAAQqqF,eAAgBqtD,EAAUC,EAAQ33I,EAAQG,UAEnFu6I,EAAkBvlC,IAAuC,IAA3Bn1G,EAAQkmI,eACtCyU,OAAkDzlL,IAA/BklL,EAAiBd,YAA+C,IAAhBW,EACrEW,EAAS/C,EAAc73I,EAASkB,EAAOo2I,GAM3C,GAJAqC,EAAsB,MAAO35I,EAASs3I,GAIjCkF,EAAe,CAEd9B,GAAiBC,GAErBzjL,EAAM6+K,aAAc,MAAO6E,EAAQH,EAAkBv5I,EAAM3C,MAAO2C,EAAM1C,QAIzE,IAAM,IAAI7mC,EAAI,EAAGA,EAAI,EAAGA,IAAO,CAE9ByyH,EAAUqyD,EAAW9kL,GAAIyyH,QAEzB,IAAM,IAAIhkH,EAAI,EAAGA,EAAIgkH,EAAQ9zH,OAAQ8P,IAAO,CAE3C,IAAMk0K,EAASlwD,EAAShkH,GAEnB45B,EAAQ5B,SAAWg+E,GAEL,OAAbs7D,EAECgD,EAEJxjL,EAAMi/K,wBAAyB,MAAQx+K,EAAGyO,EAAG,EAAG,EAAGk0K,EAAO/7I,MAAO+7I,EAAO97I,OAAQk5I,EAAU4C,EAAO55K,MAIjGxJ,EAAMq+K,qBAAsB,MAAQ59K,EAAGyO,EAAGq0K,EAAkBH,EAAO/7I,MAAO+7I,EAAO97I,OAAQ,EAAG87I,EAAO55K,MAMpG9J,QAAQC,KAAM,mGAMV6jL,EAEJxjL,EAAM++K,cAAe,MAAQt+K,EAAGyO,EAAG,EAAG,EAAGk0K,EAAO/7I,MAAO+7I,EAAO97I,OAAQk5I,EAAUC,EAAQ2C,EAAO55K,MAI/FxJ,EAAMy8K,WAAY,MAAQh8K,EAAGyO,EAAGq0K,EAAkBH,EAAO/7I,MAAO+7I,EAAO97I,OAAQ,EAAGk5I,EAAUC,EAAQ2C,EAAO55K,KAM9G,CAED,CAED,KAAO,CAEN0pH,EAAUpqF,EAAQoqF,QAEbswD,GAAiBC,IAMhBvwD,EAAQ9zH,OAAS,GAAIskL,IAE1B1jL,EAAM6+K,aAAc,MAAO6E,EAAQH,EAAkBgC,EAAW,GAAIl+I,MAAOk+I,EAAW,GAAIj+I,SAI3F,IAAM,IAAI7mC,EAAI,EAAGA,EAAI,EAAGA,IAEvB,GAAKkyH,EAAgB,CAEf6wD,EAEJxjL,EAAM++K,cAAe,MAAQt+K,EAAG,EAAG,EAAG,EAAG8kL,EAAW9kL,GAAI4mC,MAAOk+I,EAAW9kL,GAAI6mC,OAAQk5I,EAAUC,EAAQ8E,EAAW9kL,GAAI+I,MAIvHxJ,EAAMy8K,WAAY,MAAQh8K,EAAG,EAAG8iL,EAAkBgC,EAAW9kL,GAAI4mC,MAAOk+I,EAAW9kL,GAAI6mC,OAAQ,EAAGk5I,EAAUC,EAAQ8E,EAAW9kL,GAAI+I,MAIpI,IAAM,IAAI0F,EAAI,EAAGA,EAAIgkH,EAAQ9zH,OAAQ8P,IAAO,CAE3C,IACMs2K,EADStyD,EAAShkH,GACG86B,MAAOvpC,GAAIupC,MAEjCw5I,EAEJxjL,EAAM++K,cAAe,MAAQt+K,EAAGyO,EAAI,EAAG,EAAG,EAAGs2K,EAAYn+I,MAAOm+I,EAAYl+I,OAAQk5I,EAAUC,EAAQ+E,EAAYh8K,MAIlHxJ,EAAMy8K,WAAY,MAAQh8K,EAAGyO,EAAI,EAAGq0K,EAAkBiC,EAAYn+I,MAAOm+I,EAAYl+I,OAAQ,EAAGk5I,EAAUC,EAAQ+E,EAAYh8K,KAIhI,CAED,KAAO,CAEDg6K,EAEJxjL,EAAM++K,cAAe,MAAQt+K,EAAG,EAAG,EAAG,EAAG+/K,EAAUC,EAAQ8E,EAAW9kL,IAItET,EAAMy8K,WAAY,MAAQh8K,EAAG,EAAG8iL,EAAkB/C,EAAUC,EAAQ8E,EAAW9kL,IAIhF,IAAM,IAAIyO,EAAI,EAAGA,EAAIgkH,EAAQ9zH,OAAQ8P,IAAO,CAE3C,IAAMk0K,EAASlwD,EAAShkH,GAEnBs0K,EAEJxjL,EAAM++K,cAAe,MAAQt+K,EAAGyO,EAAI,EAAG,EAAG,EAAGsxK,EAAUC,EAAQ2C,EAAOp5I,MAAOvpC,IAI7ET,EAAMy8K,WAAY,MAAQh8K,EAAGyO,EAAI,EAAGq0K,EAAkB/C,EAAUC,EAAQ2C,EAAOp5I,MAAOvpC,GAIxF,CAED,CAIF,CAEK0/K,EAA6Br3I,EAASs3I,IAG1CC,EAAgB,OAIjB6C,EAAiBd,UAAY5+K,EAAO0hE,QAE/Bp8B,EAAQ2oB,UAAW3oB,EAAQ2oB,SAAU3oB,EAE3C,CAEAi4I,EAAkBqB,UAAYt5I,EAAQo8B,OAEvC,CAjuBEugH,CAAmB1E,EAAmBj4I,EAASo5I,GAKhDliL,EAAMu8K,YAAa,MAAOwE,EAAkBQ,eAAgB,MAAQW,EAErE,EAg5CArlL,KAAK6oL,eA7bL,SAAyB9rC,EAAc+rC,EAAc7yI,GAEpD,IAAMwuI,EAAyBl4B,EAAW/nJ,IAAKu4I,QAEzB57I,IAAjB2nL,GAEJ/B,EAAyBtC,EAAuBG,mBAAoB7nC,EAAcA,EAAa9wG,QAAS,MAAO,WAI1F9qC,IAAjB80C,GAEJ8xI,EAAwBhrC,EAI1B,EA8aA/8I,KAAK+oL,kBA3aL,SAA4BhsC,GAE3B,IAAM9wG,EAAU8wG,EAAa9wG,QAEvBw4I,EAAyBl4B,EAAW/nJ,IAAKu4I,GACzCmnC,EAAoB33B,EAAW/nJ,IAAKynC,GAE1C8wG,EAAa74I,iBAAkB,UAAWsgL,IAES,IAA9CznC,EAAapjB,oCAEyBx4H,IAArC+iL,EAAkBQ,iBAEtBR,EAAkBQ,eAAiBpC,EAAI7C,iBAIxCyE,EAAkBqB,UAAYt5I,EAAQo8B,QACtCqsF,EAAKgK,OAAOh4D,YAIb,IAAMshF,GAAoD,IAAzCjrC,EAAamB,wBACxB8qC,GAA0E,IAA9CjsC,EAAapjB,6BACzC4pD,EAAeF,EAAgBtmC,IAAkBqE,EAIvD,GAAK4mC,EAAS,CAEbvD,EAAuBG,mBAAqB,GAE5C,IAAM,IAAIhhL,EAAI,EAAGA,EAAI,EAAGA,IAEvB6gL,EAAuBG,mBAAoBhhL,GAAM0+K,EAAI2G,mBAIvD,KAAO,CAIN,GAFAxE,EAAuBG,mBAAqBtC,EAAI2G,oBAE3CD,EAEJ,GAAK7nC,EAAahG,YAIjB,IAFA,IAAMz0C,EAAWq2C,EAAa9wG,QAEpBroC,EAAI,EAAG8sG,EAAKhK,EAASnkG,OAAQqB,EAAI8sG,EAAI9sG,IAAO,CAErD,IAAMshL,EAAuB34B,EAAW/nJ,IAAKkiG,EAAU9iG,SAEVzC,IAAxC+jL,EAAqBR,iBAEzBQ,EAAqBR,eAAiBpC,EAAI7C,gBAE1C/qB,EAAKgK,OAAOh4D,WAId,MAIA7jG,QAAQC,KAAM,iHAMhB,GAAOs+I,GAAYrE,EAAa1kB,QAAU,IAA8C,IAAvC8uD,EAAoBpqC,GAA2B,CAE/F,IAAMr2C,EAAWsiF,EAA0B/8I,EAAU,CAAEA,GAEvDw4I,EAAuBM,+BAAiCzC,EAAI2G,oBAC5DxE,EAAuBO,yBAA2B,GAElD7hL,EAAMu9K,gBAAiB,MAAO+D,EAAuBM,gCAErD,IAAM,IAAInhL,EAAI,EAAGA,EAAI8iG,EAASnkG,OAAQqB,IAAO,CAE5C,IAAMqoC,EAAUy6D,EAAU9iG,GAC1B6gL,EAAuBO,yBAA0BphL,GAAM0+K,EAAI8F,qBAE3D9F,EAAIoF,iBAAkB,MAAOjD,EAAuBO,yBAA0BphL,IAE9E,IAAM+/K,EAAWpB,EAAMzvD,QAAS7mF,EAAQ5B,OAAQ4B,EAAQG,UAClDw3I,EAASrB,EAAMzvD,QAAS7mF,EAAQpqC,MAChC6kL,EAAmBjD,EAAmBx3I,EAAQqqF,eAAgBqtD,EAAUC,EAAQ33I,EAAQG,UAA4C,IAAlC2wG,EAAam1B,kBAC/G75C,EAAUgvD,EAAwBtqC,GACxCulC,EAAIsF,+BAAgC,MAAOvvD,EAASquD,EAAkB3pC,EAAavyG,MAAOuyG,EAAatyG,QAEvG63I,EAAIwF,wBAAyB,MAAO,MAAQlkL,EAAG,MAAO6gL,EAAuBO,yBAA0BphL,GAExG,CAEA0+K,EAAIoF,iBAAkB,MAAO,MAExB3qC,EAAaxpG,cAEjBkxI,EAAuBQ,yBAA2B3C,EAAI8F,qBACtDb,EAA0B9C,EAAuBQ,yBAA0BloC,GAAc,IAI1F55I,EAAMu9K,gBAAiB,MAAO,KAE/B,CAED,CAIA,GAAKsH,EAAS,CAEb7kL,EAAMu8K,YAAa,MAAOwE,EAAkBQ,gBAC5CkB,EAAsB,MAAO35I,EAASs3I,GAEtC,IAAM,IAAI3/K,EAAI,EAAGA,EAAI,EAAGA,IAEvBmjL,EAAyBtC,EAAuBG,mBAAoBhhL,GAAKm5I,EAAc9wG,EAAS,MAAO,MAAQroC,GAI3G0/K,EAA6Br3I,EAASs3I,IAE1CC,EAAgB,OAIjBrgL,EAAMo+K,eAEP,MAAO,GAAKyH,EAA0B,CAIrC,IAFA,IAAMtiF,EAAWq2C,EAAa9wG,QAEpBroC,EAAI,EAAG8sG,EAAKhK,EAASnkG,OAAQqB,EAAI8sG,EAAI9sG,IAAO,CAErD,IAAMojL,EAAatgF,EAAU9iG,GACvBshL,EAAuB34B,EAAW/nJ,IAAKwiL,GAE7C7jL,EAAMu8K,YAAa,KAAMwF,EAAqBR,gBAC9CkB,EAAsB,KAAMoB,EAAYzD,GACxCwD,EAAyBtC,EAAuBG,mBAAoB7nC,EAAciqC,EAAY,MAAQpjL,EAAG,MAEpG0/K,EAA6B0D,EAAYzD,IAE7CC,EAAgB,KAIlB,CAEArgL,EAAMo+K,eAEP,KAAO,CAEN,IAAI2H,EAAgB,MAEfnsC,EAAazjB,uBAAyByjB,EAAankB,4BAElDwoB,EAEJ8nC,EAAgBnsC,EAAazjB,sBAAwB,MAAQ,MAI7Dz2H,QAAQkC,MAAO,oGAMjB5B,EAAMu8K,YAAawJ,EAAehF,EAAkBQ,gBACpDkB,EAAsBsD,EAAej9I,EAASs3I,GAC9CwD,EAAyBtC,EAAuBG,mBAAoB7nC,EAAc9wG,EAAS,MAAOi9I,GAE7F5F,EAA6Br3I,EAASs3I,IAE1CC,EAAgB0F,GAIjB/lL,EAAMo+K,eAEP,CAIKxkC,EAAaxpG,aAEjBw0I,EAAwBhrC,EAI1B,EAyOA/8I,KAAKmpL,yBAvOL,SAAmCpsC,GAMlC,IAJA,IAAMwmC,EAAeF,EAAgBtmC,IAAkBqE,EAEjD16C,GAAyD,IAA9Cq2C,EAAapjB,6BAAwCojB,EAAa9wG,QAAU,CAAE8wG,EAAa9wG,SAElGroC,EAAI,EAAG8sG,EAAKhK,EAASnkG,OAAQqB,EAAI8sG,EAAI9sG,IAAO,CAErD,IAAMqoC,EAAUy6D,EAAU9iG,GAE1B,GAAK0/K,EAA6Br3I,EAASs3I,GAAiB,CAE3D,IAAMxkL,EAASg+I,EAAamB,wBAA0B,MAAQ,KACxDmjC,EAAe90B,EAAW/nJ,IAAKynC,GAAUy4I,eAE/CvhL,EAAMu8K,YAAa3gL,EAAQsiL,GAC3BmC,EAAgBzkL,GAChBoE,EAAMo+K,eAEP,CAED,CAED,EAiNAvhL,KAAKopL,8BA/ML,SAAwCrsC,GAEvC,GAAOqE,GAAYrE,EAAa1kB,QAAU,IAA8C,IAAvC8uD,EAAoBpqC,GAA2B,CAE/F,IAAMr2C,EAAWq2C,EAAapjB,6BAA+BojB,EAAa9wG,QAAU,CAAE8wG,EAAa9wG,SAC7FzB,EAAQuyG,EAAavyG,MACrBC,EAASsyG,EAAatyG,OACxB0pB,EAAO,MACLk1H,EAAoB,GACpBC,EAAavsC,EAAa9nG,cAAgB,MAAQ,MAClDwvI,EAAyBl4B,EAAW/nJ,IAAKu4I,GACzCisC,GAA0E,IAA9CjsC,EAAapjB,6BAG/C,GAAKqvD,EAEJ,IAAM,IAAIplL,EAAI,EAAGA,EAAI8iG,EAASnkG,OAAQqB,IAErCT,EAAMu9K,gBAAiB,MAAO+D,EAAuBM,gCACrDzC,EAAIwF,wBAAyB,MAAO,MAAQlkL,EAAG,MAAO,MAEtDT,EAAMu9K,gBAAiB,MAAO+D,EAAuBG,oBACrDtC,EAAIgF,qBAAsB,MAAO,MAAQ1jL,EAAG,KAAM,KAAM,GAM1DT,EAAMu9K,gBAAiB,MAAO+D,EAAuBM,gCACrD5hL,EAAMu9K,gBAAiB,MAAO+D,EAAuBG,oBAErD,IAAM,IAAIhhL,EAAI,EAAGA,EAAI8iG,EAASnkG,OAAQqB,IAAO,CAE5CylL,EAAkB/mL,KAAM,MAAQsB,GAE3Bm5I,EAAaxpG,aAEjB81I,EAAkB/mL,KAAMgnL,GAIzB,IAAMC,OAAqEpoL,IAA/CsjL,EAAuB+E,qBAAsC/E,EAAuB+E,oBAsBhH,IApB2B,IAAtBD,IAECxsC,EAAaxpG,cAAc4gB,GAAQ,KACnC4oF,EAAa9nG,gBAAgBkf,GAAQ,OAItC60H,GAEJ1G,EAAIwF,wBAAyB,MAAO,MAAO,MAAOrD,EAAuBO,yBAA0BphL,KAIzE,IAAtB2lL,IAEJjH,EAAImH,sBAAuB,MAAO,CAAEH,IACpChH,EAAImH,sBAAuB,MAAO,CAAEH,KAIhCN,EAA0B,CAE9B,IAAM3H,EAAe90B,EAAW/nJ,IAAKkiG,EAAU9iG,IAAM8gL,eACrDpC,EAAIgF,qBAAsB,MAAO,MAAO,KAAMjG,EAAc,EAE7D,CAEAiB,EAAIoH,gBAAiB,EAAG,EAAGl/I,EAAOC,EAAQ,EAAG,EAAGD,EAAOC,EAAQ0pB,EAAM,MAEhEwuH,GAEJL,EAAImH,sBAAuB,MAAOJ,EAKpC,CAMA,GAJAlmL,EAAMu9K,gBAAiB,MAAO,MAC9Bv9K,EAAMu9K,gBAAiB,MAAO,MAGzBsI,EAEJ,IAAM,IAAIplL,EAAI,EAAGA,EAAI8iG,EAASnkG,OAAQqB,IAAO,CAE5CT,EAAMu9K,gBAAiB,MAAO+D,EAAuBM,gCACrDzC,EAAIwF,wBAAyB,MAAO,MAAQlkL,EAAG,MAAO6gL,EAAuBO,yBAA0BphL,IAEvG,IAAMy9K,EAAe90B,EAAW/nJ,IAAKkiG,EAAU9iG,IAAM8gL,eAErDvhL,EAAMu9K,gBAAiB,MAAO+D,EAAuBG,oBACrDtC,EAAIgF,qBAAsB,MAAO,MAAQ1jL,EAAG,KAAMy9K,EAAc,EAEjE,CAIDl+K,EAAMu9K,gBAAiB,MAAO+D,EAAuBM,+BAEtD,CAED,EAuGA/kL,KAAK+nL,uBAAyBA,EAC9B/nL,KAAK+mL,wBAA0BA,EAC/B/mL,KAAKmnL,mBAAqBA,CAE3B,CAEA,SAASwC,GAAY73I,EAAI1B,EAAY+wG,GAEpC,IAAMC,EAAWD,EAAaC,SAgQ9B,MAAO,CAAEtuB,QA9PT,SAAkBrgH,GAAqB,IAElCkxF,EAFgBv3D,EAAQxrC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,KAI/B,GAAK6R,IAAMk1G,GAAmB,OAAO,KACrC,GAAKl1G,IAAMu1G,GAAwB,OAAO,MAC1C,GAAKv1G,IAAMw1G,GAAwB,OAAO,MAE1C,GAAKx1G,IAAMm1G,GAAW,OAAO,KAC7B,GAAKn1G,IAAMo1G,GAAY,OAAO,KAC9B,GAAKp1G,IAAM0pC,GAAoB,OAAO,KACtC,GAAK1pC,IAAMq1G,GAAU,OAAO,KAC5B,GAAKr1G,IAAMs1G,GAAkB,OAAO,KACpC,GAAKt1G,IAAMg5B,GAAY,OAAO,KAE9B,GAAKh5B,IAAM61B,GAEV,OAAK84G,EAAkB,KAIJ,QAFnBz9C,EAAYvzD,EAAW5rC,IAAK,2BAIpBm/F,EAAUimF,eAIV,KAMT,GAAKn3K,IAAM01G,GAAc,OAAO,KAChC,GAAK11G,IAAM41G,GAAa,OAAO,KAC/B,GAAK51G,IAAM61G,GAAkB,OAAO,KACpC,GAAK71G,IAAM81G,GAAuB,OAAO,KACzC,GAAK91G,IAAMypC,GAAc,OAAO,KAChC,GAAKzpC,IAAM+1G,GAAqB,OAAO,MACvC,GAAK/1G,IAAMg2G,GAAY,OAAO,KAI9B,GAAKh2G,IAAM21G,GAGV,OADAvlH,QAAQC,KAAM,sIACP,KAMR,GAAK2P,IAAMy6G,GAIV,OAAmB,QAFnBvpB,EAAYvzD,EAAW5rC,IAAK,aAIpBm/F,EAAUkmF,eAIV,KAQT,GAAKp3K,IAAMi2G,GAAmB,OAAO,MACrC,GAAKj2G,IAAMk2G,GAAW,OAAO,MAC7B,GAAKl2G,IAAMm2G,GAAkB,OAAO,MACpC,GAAKn2G,IAAMo2G,GAAoB,OAAO,MAItC,GAAKp2G,IAAMq2G,IAAwBr2G,IAAMs2G,IAAyBt2G,IAAMu2G,IAAyBv2G,IAAMw2G,GAEtG,GAAK78E,IAAa0E,GAAe,CAIhC,GAAmB,QAFnB6yD,EAAYvzD,EAAW5rC,IAAK,uCAW3B,OAAO,KAPP,GAAKiO,IAAMq2G,GAAuB,OAAOnlB,EAAUmmF,8BACnD,GAAKr3K,IAAMs2G,GAAwB,OAAOplB,EAAUomF,oCACpD,GAAKt3K,IAAMu2G,GAAwB,OAAOrlB,EAAUqmF,oCACpD,GAAKv3K,IAAMw2G,GAAwB,OAAOtlB,EAAUsmF,mCAQtD,KAAO,CAIN,GAAmB,QAFnBtmF,EAAYvzD,EAAW5rC,IAAK,kCAW3B,OAAO,KAPP,GAAKiO,IAAMq2G,GAAuB,OAAOnlB,EAAUumF,6BACnD,GAAKz3K,IAAMs2G,GAAwB,OAAOplB,EAAUwmF,8BACpD,GAAK13K,IAAMu2G,GAAwB,OAAOrlB,EAAUymF,8BACpD,GAAK33K,IAAMw2G,GAAwB,OAAOtlB,EAAU0mF,6BAQtD,CAMD,GAAK53K,IAAMy2G,IAA2Bz2G,IAAM02G,IAA2B12G,IAAM22G,IAA4B32G,IAAM42G,GAA2B,CAIzI,GAAmB,QAFnB1lB,EAAYvzD,EAAW5rC,IAAK,mCAW3B,OAAO,KAPP,GAAKiO,IAAMy2G,GAA0B,OAAOvlB,EAAU2mF,gCACtD,GAAK73K,IAAM02G,GAA0B,OAAOxlB,EAAU4mF,gCACtD,GAAK93K,IAAM22G,GAA2B,OAAOzlB,EAAU6mF,iCACvD,GAAK/3K,IAAM42G,GAA2B,OAAO1lB,EAAU8mF,gCAQzD,CAIA,GAAKh4K,IAAM62G,GAIV,OAAmB,QAFnB3lB,EAAYvzD,EAAW5rC,IAAK,kCAIpBm/F,EAAU+mF,0BAIV,KAQT,GAAKj4K,IAAM82G,IAAmB92G,IAAM+2G,GAAuB,CAI1D,GAAmB,QAFnB7lB,EAAYvzD,EAAW5rC,IAAK,iCAS3B,OAAO,KALP,GAAKiO,IAAM82G,GAAkB,OAASn9E,IAAa0E,GAAiB6yD,EAAUgnF,sBAAwBhnF,EAAUinF,qBAChH,GAAKn4K,IAAM+2G,GAAuB,OAASp9E,IAAa0E,GAAiB6yD,EAAUknF,iCAAmClnF,EAAUmnF,yBAQlI,CAIA,GAAKr4K,IAAMg3G,IAAwBh3G,IAAMi3G,IAAwBj3G,IAAMk3G,IACtEl3G,IAAMm3G,IAAwBn3G,IAAMo3G,IAAwBp3G,IAAMq3G,IAClEr3G,IAAMs3G,IAAwBt3G,IAAMu3G,IAAwBv3G,IAAMw3G,IAClEx3G,IAAMy3G,IAAyBz3G,IAAM03G,IAAyB13G,IAAM23G,IACpE33G,IAAM43G,IAA0B53G,IAAM63G,GAAyB,CAI/D,GAAmB,QAFnB3mB,EAAYvzD,EAAW5rC,IAAK,kCAqB3B,OAAO,KAjBP,GAAKiO,IAAMg3G,GAAuB,OAASr9E,IAAa0E,GAAiB6yD,EAAUonF,qCAAuCpnF,EAAUqnF,6BACpI,GAAKv4K,IAAMi3G,GAAuB,OAASt9E,IAAa0E,GAAiB6yD,EAAUsnF,qCAAuCtnF,EAAUunF,6BACpI,GAAKz4K,IAAMk3G,GAAuB,OAASv9E,IAAa0E,GAAiB6yD,EAAUwnF,qCAAuCxnF,EAAUynF,6BACpI,GAAK34K,IAAMm3G,GAAuB,OAASx9E,IAAa0E,GAAiB6yD,EAAU0nF,qCAAuC1nF,EAAU2nF,6BACpI,GAAK74K,IAAMo3G,GAAuB,OAASz9E,IAAa0E,GAAiB6yD,EAAU4nF,qCAAuC5nF,EAAU6nF,6BACpI,GAAK/4K,IAAMq3G,GAAuB,OAAS19E,IAAa0E,GAAiB6yD,EAAU8nF,qCAAuC9nF,EAAU+nF,6BACpI,GAAKj5K,IAAMs3G,GAAuB,OAAS39E,IAAa0E,GAAiB6yD,EAAUgoF,qCAAuChoF,EAAUioF,6BACpI,GAAKn5K,IAAMu3G,GAAuB,OAAS59E,IAAa0E,GAAiB6yD,EAAUkoF,qCAAuCloF,EAAUmoF,6BACpI,GAAKr5K,IAAMw3G,GAAwB,OAAS79E,IAAa0E,GAAiB6yD,EAAUooF,sCAAwCpoF,EAAUqoF,8BACtI,GAAKv5K,IAAMy3G,GAAwB,OAAS99E,IAAa0E,GAAiB6yD,EAAUsoF,sCAAwCtoF,EAAUuoF,8BACtI,GAAKz5K,IAAM03G,GAAwB,OAAS/9E,IAAa0E,GAAiB6yD,EAAUwoF,sCAAwCxoF,EAAUyoF,8BACtI,GAAK35K,IAAM23G,GAAyB,OAASh+E,IAAa0E,GAAiB6yD,EAAU0oF,uCAAyC1oF,EAAU2oF,+BACxI,GAAK75K,IAAM43G,GAAyB,OAASj+E,IAAa0E,GAAiB6yD,EAAU4oF,uCAAyC5oF,EAAU6oF,+BACxI,GAAK/5K,IAAM63G,GAAyB,OAASl+E,IAAa0E,GAAiB6yD,EAAU8oF,uCAAyC9oF,EAAU+oF,8BAQ1I,CAIA,GAAKj6K,IAAM83G,GAAmB,CAI7B,GAAmB,QAFnB5mB,EAAYvzD,EAAW5rC,IAAK,iCAQ3B,OAAO,KAJP,GAAKiO,IAAM83G,GAAmB,OAASn+E,IAAa0E,GAAiB6yD,EAAUgpF,qCAAuChpF,EAAUipF,8BAQlI,CAIA,OAAKn6K,IAAMy1G,GAELk5B,EAAkB,MAIJ,QAFnBz9C,EAAYvzD,EAAW5rC,IAAK,wBAIpBm/F,EAAUkpF,wBAIV,UAQY1rL,IAAZ2wC,EAAIr/B,GAAsBq/B,EAAIr/B,GAAM,IAE9C,EAID,CAAC,IAEKq6K,GAAW,SAAAC,IAAA1kL,EAAAA,EAAAA,GAAAykL,EAAAC,GAAA,IAAAC,GAAAzkL,EAAAA,EAAAA,GAAAukL,GAEhB,SAAAA,IAA0B,IAAAG,EAAb7tH,EAAKx+D,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAMC,OANC8H,EAAAA,EAAAA,GAAA,KAAAokL,IAEtBG,EAAAD,EAAA5tL,KAAA,OAEK8tL,eAAgB,EAErBD,EAAKn6E,QAAU1zC,EAAM6tH,CAEtB,CAAC,OAAAtiL,EAAAA,EAAAA,GAAAmiL,EAAA,CAVe,CAASryI,IAcpB0gE,GAAK,SAAAgyE,IAAA9kL,EAAAA,EAAAA,GAAA8yG,EAAAgyE,GAAA,IAAAC,GAAA7kL,EAAAA,EAAAA,GAAA4yG,GAEV,SAAAA,IAAc,IAAAkyE,EAMO,OANP3kL,EAAAA,EAAAA,GAAA,KAAAyyG,IAEbkyE,EAAAD,EAAAhuL,KAAA,OAEK4pG,SAAU,EAEfqkF,EAAKxrL,KAAO,QAAQwrL,CAErB,CAAC,OAAA1iL,EAAAA,EAAAA,GAAAwwG,EAAA,CAVS,CAAS3+E,IAcd8wJ,GAAa,CAAEzrL,KAAM,QAErB0rL,GAAe,WAEpB,SAAAA,KAAc7kL,EAAAA,EAAAA,GAAA,KAAA6kL,GAEbvtL,KAAKwtL,WAAa,KAClBxtL,KAAKytL,MAAQ,KACbztL,KAAK0tL,MAAQ,IAEd,CAgSC,OAhSA/iL,EAAAA,EAAAA,GAAA4iL,EAAA,EAAAtnL,IAAA,eAAApG,MAED,WAaC,OAXoB,OAAfG,KAAK0tL,QAET1tL,KAAK0tL,MAAQ,IAAIvyE,GACjBn7G,KAAK0tL,MAAMjqJ,kBAAmB,EAC9BzjC,KAAK0tL,MAAMjxI,SAAU,EAErBz8C,KAAK0tL,MAAMr6E,OAAS,CAAC,EACrBrzG,KAAK0tL,MAAMC,WAAa,CAAEC,UAAU,IAI9B5tL,KAAK0tL,KAEb,GAAC,CAAAznL,IAAA,oBAAApG,MAED,WAcC,OAZyB,OAApBG,KAAKwtL,aAETxtL,KAAKwtL,WAAa,IAAIryE,GACtBn7G,KAAKwtL,WAAW/pJ,kBAAmB,EACnCzjC,KAAKwtL,WAAW/wI,SAAU,EAC1Bz8C,KAAKwtL,WAAWK,mBAAoB,EACpC7tL,KAAKwtL,WAAWM,eAAiB,IAAIxxJ,GACrCt8B,KAAKwtL,WAAWO,oBAAqB,EACrC/tL,KAAKwtL,WAAWhxK,gBAAkB,IAAI8f,IAIhCt8B,KAAKwtL,UAEb,GAAC,CAAAvnL,IAAA,eAAApG,MAED,WAcC,OAZoB,OAAfG,KAAKytL,QAETztL,KAAKytL,MAAQ,IAAItyE,GACjBn7G,KAAKytL,MAAMhqJ,kBAAmB,EAC9BzjC,KAAKytL,MAAMhxI,SAAU,EACrBz8C,KAAKytL,MAAMI,mBAAoB,EAC/B7tL,KAAKytL,MAAMK,eAAiB,IAAIxxJ,GAChCt8B,KAAKytL,MAAMM,oBAAqB,EAChC/tL,KAAKytL,MAAMjxK,gBAAkB,IAAI8f,IAI3Bt8B,KAAKytL,KAEb,GAAC,CAAAxnL,IAAA,gBAAApG,MAED,SAAekZ,GAoBd,OAlByB,OAApB/Y,KAAKwtL,YAETxtL,KAAKwtL,WAAWlhK,cAAevT,GAIZ,OAAf/Y,KAAKytL,OAETztL,KAAKytL,MAAMnhK,cAAevT,GAIP,OAAf/Y,KAAK0tL,OAET1tL,KAAK0tL,MAAMphK,cAAevT,GAIpB/Y,IAER,GAAC,CAAAiG,IAAA,aAAApG,MAED,SAAYmuL,GAsBX,OApBAhuL,KAAKssB,cAAe,CAAEzqB,KAAM,eAAgB8K,KAAMqhL,IAEzB,OAApBhuL,KAAKwtL,aAETxtL,KAAKwtL,WAAW/wI,SAAU,GAIP,OAAfz8C,KAAKytL,QAETztL,KAAKytL,MAAMhxI,SAAU,GAIF,OAAfz8C,KAAK0tL,QAET1tL,KAAK0tL,MAAMjxI,SAAU,GAIfz8C,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQmuL,EAAax2K,EAAOy2K,GAE3B,IAAIC,EAAY,KACZC,EAAW,KACXC,EAAW,KAETC,EAAYruL,KAAKwtL,WACjBc,EAAOtuL,KAAKytL,MACZc,EAAOvuL,KAAK0tL,MAElB,GAAKM,GAAiD,oBAAlCx2K,EAAM04I,QAAQs+B,gBAAwC,CAEzE,GAAKD,GAAQP,EAAYO,KAAO,CAE/BH,GAAW,EAAK,IAEmCx2H,EAFnCC,GAAA/qD,EAAAA,EAAAA,GAEUkhL,EAAYO,KAAKjnJ,UAAQ,IAAnD,IAAAuwB,EAAA9qD,MAAA6qD,EAAAC,EAAA7zD,KAAAgJ,MAAsD,KAA1CyhL,EAAU72H,EAAA/3D,MAGf6uL,EAAYl3K,EAAMm3K,aAAcF,EAAYR,GAElD,QAA6C9sL,IAAxCotL,EAAKl7E,OAAQo7E,EAAWG,WAA4B,CAGxD,IAAMC,EAAQ,IAAI1zE,GAClB0zE,EAAMprJ,kBAAmB,EACzBorJ,EAAMpyI,SAAU,EAChB8xI,EAAKl7E,OAAQo7E,EAAWG,WAAcC,EAEtCN,EAAKzmK,IAAK+mK,EAEX,CAEA,IAAMA,EAAQN,EAAKl7E,OAAQo7E,EAAWG,WAEnB,OAAdF,IAEJG,EAAMh+K,OAAO2sB,UAAWkxJ,EAAUxjF,UAAUr6F,QAC5Cg+K,EAAMh+K,OAAO23H,UAAWqmD,EAAMppL,SAAUopL,EAAMxwJ,SAAUwwJ,EAAMloK,OAC9DkoK,EAAMC,YAAcJ,EAAUrhK,QAI/BwhK,EAAMpyI,QAAwB,OAAdiyI,CAEjB,CAIA,OAAAluL,GAAAq3D,EAAA5qD,EAAAzM,EAAA,SAAAq3D,EAAA3qD,GAAA,CACA,IAAM6hL,EAAWR,EAAKl7E,OAAQ,oBACxB27E,EAAWT,EAAKl7E,OAAQ,aACxBviF,EAAWi+J,EAAStpL,SAAS2tB,WAAY47J,EAASvpL,UAKnD8oL,EAAKZ,WAAWC,UAAY98J,EAAWm+J,MAE3CV,EAAKZ,WAAWC,UAAW,EAC3B5tL,KAAKssB,cAAe,CACnBzqB,KAAM,WACNqtL,WAAYlB,EAAYkB,WACxBnwL,OAAQiB,SAGIuuL,EAAKZ,WAAWC,UAAY98J,GAAYm+J,OAErDV,EAAKZ,WAAWC,UAAW,EAC3B5tL,KAAKssB,cAAe,CACnBzqB,KAAM,aACNqtL,WAAYlB,EAAYkB,WACxBnwL,OAAQiB,OAKX,MAEe,OAATsuL,GAAiBN,EAAYmB,WAIf,QAFlBhB,EAAW32K,EAAM43K,QAASpB,EAAYmB,UAAWlB,MAIhDK,EAAKz9K,OAAO2sB,UAAW2wJ,EAASjjF,UAAUr6F,QAC1Cy9K,EAAKz9K,OAAO23H,UAAW8lD,EAAK7oL,SAAU6oL,EAAKjwJ,SAAUiwJ,EAAK3nK,OAErDwnK,EAASL,gBAEbQ,EAAKT,mBAAoB,EACzBS,EAAKR,eAAe7pL,KAAMkqL,EAASL,iBAInCQ,EAAKT,mBAAoB,EAIrBM,EAAS3xK,iBAEb8xK,EAAKP,oBAAqB,EAC1BO,EAAK9xK,gBAAgBvY,KAAMkqL,EAAS3xK,kBAIpC8xK,EAAKP,oBAAqB,GAUX,OAAdM,IAKe,QAHnBH,EAAY12K,EAAM43K,QAASpB,EAAYqB,eAAgBpB,KAGf,OAAbE,IAE1BD,EAAYC,GAIM,OAAdD,IAEJG,EAAUx9K,OAAO2sB,UAAW0wJ,EAAUhjF,UAAUr6F,QAChDw9K,EAAUx9K,OAAO23H,UAAW6lD,EAAU5oL,SAAU4oL,EAAUhwJ,SAAUgwJ,EAAU1nK,OAEzEunK,EAAUJ,gBAEdO,EAAUR,mBAAoB,EAC9BQ,EAAUP,eAAe7pL,KAAMiqL,EAAUJ,iBAIzCO,EAAUR,mBAAoB,EAI1BK,EAAU1xK,iBAEd6xK,EAAUN,oBAAqB,EAC/BM,EAAU7xK,gBAAgBvY,KAAMiqL,EAAU1xK,kBAI1C6xK,EAAUN,oBAAqB,EAIhC/tL,KAAKssB,cAAeghK,KAOvB,CAoBA,OAlBmB,OAAde,IAEJA,EAAU5xI,QAA0B,OAAdyxI,GAIT,OAATI,IAEJA,EAAK7xI,QAAyB,OAAb0xI,GAIJ,OAATI,IAEJA,EAAK9xI,QAAyB,OAAb2xI,GAIXpuL,IAER,KAACutL,CAAA,CAxSmB,GA4SftxI,GAAY,SAAAqzI,IAAAjnL,EAAAA,EAAAA,GAAA4zC,EAAAqzI,GAAA,IAAAC,GAAAhnL,EAAAA,EAAAA,GAAA0zC,GAEjB,SAAAA,EAAazR,EAAOC,EAAQ5oC,EAAM8uC,EAAS8lE,EAAOC,EAAOnqE,EAAWF,EAAWg6D,EAAYh8D,GAAS,IAAAmlJ,EAInG,IAJmG9mL,EAAAA,EAAAA,GAAA,KAAAuzC,IAEnG5R,OAAoBlpC,IAAXkpC,EAAuBA,EAAS6R,MAEzBA,IAAe7R,IAAWm+E,GAEzC,MAAM,IAAI9lH,MAAO,oFAiBW,YAbfvB,IAATU,GAAsBwoC,IAAW6R,KAAcr6C,EAAOkmH,SAC7C5mH,IAATU,GAAsBwoC,IAAWm+E,KAAqB3mH,EAAOqmH,KAElEsnE,EAAAD,EAAAnwL,KAAA,KAAO,KAAMuxC,EAAS8lE,EAAOC,EAAOnqE,EAAWF,EAAWhC,EAAQxoC,EAAMwkG,IAEnEygF,gBAAiB,EAEtB0I,EAAKriJ,MAAQ,CAAE3C,MAAOA,EAAOC,OAAQA,GAErC+kJ,EAAKjjJ,eAA0BprC,IAAdorC,EAA0BA,EAAYwhE,GACvDyhF,EAAKnjJ,eAA0BlrC,IAAdkrC,EAA0BA,EAAY0hE,GAEvDyhF,EAAK/iJ,OAAQ,EACb+iJ,EAAKhjJ,iBAAkB,EAAMgjJ,CAE9B,CAAC,OAAA7kL,EAAAA,EAAAA,GAAAsxC,EAAA,CA3BgB,CAASi7D,IAgCrBu4E,GAAY,SAAAC,IAAArnL,EAAAA,EAAAA,GAAAonL,EAAAC,GAAA,IAAAC,GAAApnL,EAAAA,EAAAA,GAAAknL,GAEjB,SAAAA,EAAa15I,EAAUjE,GAAK,IAAA89I,GAAAlnL,EAAAA,EAAAA,GAAA,KAAA+mL,GAE3BG,EAAAD,EAAAvwL,KAAA,MAEA,IAAMsgD,GAAK3B,EAAAA,EAAAA,GAAA6xI,GAEP1/B,EAAU,KACV2/B,EAAyB,EAEzB5B,EAAiB,KACjB6B,EAAqB,cACrBC,EAAuB,KAEvBC,EAAO,KACPC,EAAY,KACZC,EAAc,KACdC,EAAc,KACdC,EAAU,KACRxnF,EAAa92D,EAAGu+I,uBAClBC,EAAsB,KACtBC,EAAkB,KAEhBC,EAAc,GACdC,EAAyB,GAIzBC,EAAU,IAAIj2I,GACpBi2I,EAAQ/pD,OAAOksC,OAAQ,GACvB6d,EAAQz1H,SAAW,IAAIhhB,GAEvB,IAAM02I,EAAU,IAAIl2I,GACpBk2I,EAAQhqD,OAAOksC,OAAQ,GACvB8d,EAAQ11H,SAAW,IAAIhhB,GAEvB,IAAM64D,EAAU,CAAE49E,EAASC,GAErBC,EAAW,IAAI9D,GACrB8D,EAASjqD,OAAOksC,OAAQ,GACxB+d,EAASjqD,OAAOksC,OAAQ,GAExB,IAAIge,EAAoB,KACpBC,EAAmB,KAwDvB,SAASC,EAAgBh4K,GAExB,IAAMi4K,EAAkBP,EAAuBlpL,QAASwR,EAAMi1K,aAE9D,IAA2B,IAAtBgD,EAAL,CAMA,IAAMC,EAAaT,EAAaQ,QAEZ7vL,IAAf8vL,GAEJA,EAAW3kK,cAAe,CAAEzqB,KAAMkX,EAAMlX,KAAM8K,KAAMoM,EAAMi1K,aAN3D,CAUD,CAEA,SAASkD,IAERhhC,EAAQ7rJ,oBAAqB,SAAU0sL,GACvC7gC,EAAQ7rJ,oBAAqB,cAAe0sL,GAC5C7gC,EAAQ7rJ,oBAAqB,YAAa0sL,GAC1C7gC,EAAQ7rJ,oBAAqB,UAAW0sL,GACxC7gC,EAAQ7rJ,oBAAqB,eAAgB0sL,GAC7C7gC,EAAQ7rJ,oBAAqB,aAAc0sL,GAC3C7gC,EAAQ7rJ,oBAAqB,MAAO6sL,GACpChhC,EAAQ7rJ,oBAAqB,qBAAsB8sL,GAEnD,IAAM,IAAIvtL,EAAI,EAAGA,EAAI4sL,EAAYjuL,OAAQqB,IAAO,CAE/C,IAAMoqL,EAAcyC,EAAwB7sL,GAEvB,OAAhBoqL,IAELyC,EAAwB7sL,GAAM,KAE9B4sL,EAAa5sL,GAAIijE,WAAYmnH,GAE9B,CAEA6C,EAAoB,KACpBC,EAAmB,KAInB/6I,EAASK,gBAAiBk6I,GAE1BH,EAAc,KACdD,EAAc,KACdD,EAAY,KACZ//B,EAAU,KACVqgC,EAAkB,KAIlB/mD,EAAUhuE,OAEV9b,EAAMoe,cAAe,EAErBpe,EAAMpzB,cAAe,CAAEzqB,KAAM,cAE9B,CA4KA,SAASsvL,EAAsBp4K,GAI9B,IAAM,IAAInV,EAAI,EAAGA,EAAImV,EAAMq4K,QAAQ7uL,OAAQqB,IAAO,CAEjD,IAAMoqL,EAAcj1K,EAAMq4K,QAASxtL,GAC7BgC,EAAQ6qL,EAAuBlpL,QAASymL,GAEzCpoL,GAAS,IAEb6qL,EAAwB7qL,GAAU,KAClC4qL,EAAa5qL,GAAQ0mB,cAAe,CAAEzqB,KAAM,eAAgB8K,KAAMqhL,IAIpE,CAIA,IAAM,IAAIpqL,EAAI,EAAGA,EAAImV,EAAM6lD,MAAMr8D,OAAQqB,IAAO,CAE/C,IAAMoqL,EAAcj1K,EAAM6lD,MAAOh7D,GAE7BotL,EAAkBP,EAAuBlpL,QAASymL,GAEtD,IAA2B,IAAtBgD,EAA0B,CAI9B,IAAM,IAAIptL,EAAI,EAAGA,EAAI4sL,EAAYjuL,OAAQqB,IAAO,CAE/C,GAAKA,GAAK6sL,EAAuBluL,OAAS,CAEzCkuL,EAAuBnuL,KAAM0rL,GAC7BgD,EAAkBptL,EAClB,KAED,CAAO,GAAqC,OAAhC6sL,EAAwB7sL,GAAe,CAElD6sL,EAAwB7sL,GAAMoqL,EAC9BgD,EAAkBptL,EAClB,KAED,CAED,CAIA,IAA2B,IAAtBotL,EAA0B,KAEhC,CAEA,IAAMC,EAAaT,EAAaQ,GAE3BC,GAEJA,EAAW3kK,cAAe,CAAEzqB,KAAM,YAAa8K,KAAMqhL,GAIvD,CAED,CAhWA4B,EAAKyB,kBAAmB,EACxBzB,EAAKhzI,SAAU,EAEfgzI,EAAK9xH,cAAe,EAEpB8xH,EAAK0B,cAAgB,SAAW1rL,GAE/B,IAAIqrL,EAAaT,EAAa5qL,GAS9B,YAPoBzE,IAAf8vL,IAEJA,EAAa,IAAI1D,GACjBiD,EAAa5qL,GAAUqrL,GAIjBA,EAAWM,mBAEnB,EAEA3B,EAAK4B,kBAAoB,SAAW5rL,GAEnC,IAAIqrL,EAAaT,EAAa5qL,GAS9B,YAPoBzE,IAAf8vL,IAEJA,EAAa,IAAI1D,GACjBiD,EAAa5qL,GAAUqrL,GAIjBA,EAAWQ,cAEnB,EAEA7B,EAAK8B,QAAU,SAAW9rL,GAEzB,IAAIqrL,EAAaT,EAAa5qL,GAS9B,YAPoBzE,IAAf8vL,IAEJA,EAAa,IAAI1D,GACjBiD,EAAa5qL,GAAUqrL,GAIjBA,EAAWU,cAEnB,EAsEA/B,EAAKgC,0BAA4B,SAAW/xL,GAE3CgwL,EAAyBhwL,GAEG,IAAvB6/C,EAAMoe,cAEVj7D,QAAQC,KAAM,wEAIhB,EAEA8sL,EAAKiC,sBAAwB,SAAWhyL,GAEvCiwL,EAAqBjwL,GAEO,IAAvB6/C,EAAMoe,cAEVj7D,QAAQC,KAAM,2EAIhB,EAEA8sL,EAAKkC,kBAAoB,WAExB,OAAO/B,GAAwB9B,CAEhC,EAEA2B,EAAKmC,kBAAoB,SAAWC,GAEnCjC,EAAuBiC,CAExB,EAEApC,EAAKqC,aAAe,WAEnB,OAAuB,OAAhB/B,EAAuBA,EAAcC,CAE7C,EAEAP,EAAKsC,WAAa,WAEjB,OAAOjC,CAER,EAEAL,EAAKuC,SAAW,WAEf,OAAO/B,CAER,EAEAR,EAAKz/B,WAAa,WAEjB,OAAOD,CAER,EAEA0/B,EAAKwC,WAAU,eAAA5pL,GAAA6pL,EAAAA,EAAAA,IAAAliE,EAAAA,EAAAA,KAAAC,MAAG,SAAAkiE,EAAiBzyL,GAAK,IAAA0yL,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAxiE,EAAAA,EAAAA,KAAAE,MAAA,SAAAuiE,GAAA,cAAAA,EAAA3qH,KAAA2qH,EAAAxlI,MAAA,OAEvB,GAEC,QAFjB8iG,EAAUrwJ,GAEW,CAAA+yL,EAAAxlI,KAAA,SAWmD,GATvEkjI,EAAsBv6I,EAAS0nG,kBAE/ByS,EAAQhsJ,iBAAkB,SAAU6sL,GACpC7gC,EAAQhsJ,iBAAkB,cAAe6sL,GACzC7gC,EAAQhsJ,iBAAkB,YAAa6sL,GACvC7gC,EAAQhsJ,iBAAkB,UAAW6sL,GACrC7gC,EAAQhsJ,iBAAkB,eAAgB6sL,GAC1C7gC,EAAQhsJ,iBAAkB,aAAc6sL,GACxC7gC,EAAQhsJ,iBAAkB,MAAOgtL,GACjChhC,EAAQhsJ,iBAAkB,qBAAsBitL,IAEf,IAA5BvoF,EAAWiqF,aAAqB,CAAAD,EAAAxlI,KAAA,gBAAAwlI,EAAAxlI,KAAA,GAE9Btb,EAAGghJ,mBAAkB,QA6EA,YAzEU3xL,IAA/B+uJ,EAAQ8nB,YAAYrxC,SAA+D,IAAnC5wF,EAASorG,aAAaC,UAEtEmxC,EAAY,CACjBhuH,eAA4CpjE,IAA/B+uJ,EAAQ8nB,YAAYrxC,QAAyB/9B,EAAWrkC,UACrEC,MAAOokC,EAAWpkC,MAClB3/C,MAAO+jF,EAAW/jF,MAClBw5H,QAASz1C,EAAWy1C,QACpBwxC,uBAAwBA,GAGzBM,EAAc,IAAI4C,aAAc7iC,EAASp+G,EAAIygJ,GAE7CriC,EAAQ8iC,kBAAmB,CAAEC,UAAW9C,IAExCI,EAAkB,IAAIv7I,GACrBm7I,EAAY+C,iBACZ/C,EAAYgD,kBACZ,CACC9oJ,OAAQg+E,GACRxmH,KAAM8lH,GACNv7E,SAAU2J,EAASb,eACnBD,cAAe2zD,EAAWy1C,YAMxBm0C,EAAc,KACdC,EAAY,KACZC,EAAgB,KAEf9pF,EAAW/jF,QAEf6tK,EAAgB9pF,EAAWy1C,QAAU,MAAQ,MAC7Cm0C,EAAc5pF,EAAWy1C,QAAU71B,GAAqBtsE,GACxDu2I,EAAY7pF,EAAWy1C,QAAUn2B,GAAqBH,IAIjD4qE,EAAsB,CAC3BS,YAAa,MACbZ,YAAaE,EACbvc,YAAa0Z,GAGdI,EAAY,IAAIoD,eAAgBnjC,EAASp+G,GAEzCo+I,EAAcD,EAAUqD,sBAAuBX,GAE/CziC,EAAQ8iC,kBAAmB,CAAErsD,OAAQ,CAAEupD,KAEvCK,EAAkB,IAAIv7I,GACrBk7I,EAAYqD,aACZrD,EAAYsD,cACZ,CACCnpJ,OAAQg+E,GACRxmH,KAAM8lH,GACN1xE,aAAc,IAAIgG,GAAci0I,EAAYqD,aAAcrD,EAAYsD,cAAef,OAAWtxL,OAAWA,OAAWA,OAAWA,OAAWA,OAAWA,EAAWqxL,GAClKv9I,cAAe2zD,EAAWy1C,QAC1BjyG,SAAU2J,EAASb,eACnBmjF,QAASzvB,EAAWrkC,UAAY,EAAI,IAGPxuB,EAASw2G,WAAW/nJ,IAAK+rL,GACjC/G,oBAAsB0G,EAAY3G,mBAI1DgH,EAAgBre,kBAAmB,EAGnClyK,KAAKyzL,aAAc,GAEnB1D,EAAuB,KAAK6C,EAAAxlI,KAAA,GACL8iG,EAAQwjC,sBAAuB5D,GAAoB,QAA1E7B,EAAc2E,EAAAe,KAEdnqD,EAAUyX,WAAYiP,GACtB1mB,EAAUliI,QAEVo4C,EAAMoe,cAAe,EAErBpe,EAAMpzB,cAAe,CAAEzqB,KAAM,iBAAmB,yBAAA+wL,EAAAp3H,OAAA,GAAA82H,EAAA,UAIjD,gBAAAsB,GAAA,OAAAprL,EAAA1J,MAAA,KAAA8B,UAAA,EA5Gc,GAkLf,IAAMizL,EAAa,IAAIv3J,GACjBw3J,EAAa,IAAIx3J,GAyDvB,SAASu4B,EAAc9iB,EAAQ8I,GAEd,OAAXA,EAEJ9I,EAAOiJ,YAAY/2C,KAAM8tC,EAAOlhC,QAIhCkhC,EAAOiJ,YAAYs2E,iBAAkBz2E,EAAOG,YAAajJ,EAAOlhC,QAIjEkhC,EAAO4J,mBAAmB13C,KAAM8tC,EAAOiJ,aAAc2F,QAEtD,CAEAivI,EAAK/6H,aAAe,SAAW9iB,GAE9B,GAAiB,OAAZm+G,EAAL,CAEA0gC,EAASv/I,KAAOs/I,EAAQt/I,KAAOq/I,EAAQr/I,KAAOU,EAAOV,KACrDu/I,EAASr/I,IAAMo/I,EAAQp/I,IAAMm/I,EAAQn/I,IAAMQ,EAAOR,IAE7Cs/I,IAAsBD,EAASv/I,MAAQy/I,IAAqBF,EAASr/I,MAIzE2+G,EAAQ8iC,kBAAmB,CAC1Be,UAAWnD,EAASv/I,KACpB2iJ,SAAUpD,EAASr/I,MAGpBs/I,EAAoBD,EAASv/I,KAC7By/I,EAAmBF,EAASr/I,KAI7B,IAAMsJ,EAAS9I,EAAO8I,OAChBi4D,EAAU89E,EAAS99E,QAEzBj+C,EAAc+7H,EAAU/1I,GAExB,IAAM,IAAIj3C,EAAI,EAAGA,EAAIkvG,EAAQvwG,OAAQqB,IAEpCixD,EAAci+C,EAASlvG,GAAKi3C,GAI7B+1I,EAAS51I,YAAYwtF,UAAWooD,EAASnrL,SAAUmrL,EAAS16K,WAAY06K,EAASjqK,OAIjForB,EAAOlhC,OAAO5M,KAAM2sL,EAAS//K,QAC7BkhC,EAAOlhC,OAAO23H,UAAWz2F,EAAOtsC,SAAUssC,EAAO77B,WAAY67B,EAAOprB,OAIpE,IAFA,IAAMod,EAAWgO,EAAOhO,SAEdngC,EAAI,EAAGwS,EAAI2tB,EAASxhC,OAAQqB,EAAIwS,EAAGxS,IAE5CmgC,EAAUngC,GAAI43C,mBAAmB,GAMV,IAAnBs3D,EAAQvwG,OAlHd,SAAiCwvC,EAAQ2+I,EAASC,GAEjDkD,EAAW94I,sBAAuB21I,EAAQ11I,aAC1C84I,EAAW/4I,sBAAuB41I,EAAQ31I,aAE1C,IAAMi5I,EAAMJ,EAAWzgK,WAAY0gK,GAE7BI,EAAQxD,EAAQj1I,iBAAiBhrC,SACjC0jL,EAAQxD,EAAQl1I,iBAAiBhrC,SAKjC4gC,EAAO6iJ,EAAO,KAASA,EAAO,IAAO,GACrC3iJ,EAAM2iJ,EAAO,KAASA,EAAO,IAAO,GACpCE,GAAWF,EAAO,GAAM,GAAMA,EAAO,GACrCG,GAAcH,EAAO,GAAM,GAAMA,EAAO,GAExCI,GAAYJ,EAAO,GAAM,GAAMA,EAAO,GACtCK,GAAaJ,EAAO,GAAM,GAAMA,EAAO,GACvCtuI,EAAOxU,EAAOijJ,EACd1uI,EAAQvU,EAAOkjJ,EAIfC,EAAUP,IAAUK,EAAUC,GAC9BE,EAAUD,GAAYF,EAG5B5D,EAAQ11I,YAAYwtF,UAAWz2F,EAAOtsC,SAAUssC,EAAO77B,WAAY67B,EAAOprB,OAC1EorB,EAAO2iJ,WAAYD,GACnB1iJ,EAAO4iJ,WAAYH,GACnBziJ,EAAOiJ,YAAYxX,QAASuO,EAAOtsC,SAAUssC,EAAO77B,WAAY67B,EAAOprB,OACvEorB,EAAO4J,mBAAmB13C,KAAM8tC,EAAOiJ,aAAc2F,SAKrD,IAAMi0I,EAAQvjJ,EAAOmjJ,EACfK,EAAOtjJ,EAAMijJ,EACbM,EAAQjvI,EAAO4uI,EACfM,EAASnvI,GAAUquI,EAAMQ,GACzBO,EAAOZ,EAAS7iJ,EAAMsjJ,EAAOD,EAC7BK,EAAUZ,EAAY9iJ,EAAMsjJ,EAAOD,EAEzC7iJ,EAAO0J,iBAAiBkhG,gBAAiBm4C,EAAOC,EAAQC,EAAMC,EAASL,EAAOC,EAE/E,CAqEEK,CAAwBtE,EAAUF,EAASC,GAM3CC,EAASn1I,iBAAiBx3C,KAAMysL,EAAQj1I,iBAvDX,CA2D/B,EAEAm0I,EAAKuF,UAAY,WAEhB,OAAOvE,CAER,EAEAhB,EAAKwF,aAAe,WAEnB,OAAqB,OAAhBlF,EAEGA,EAAYmF,eAIC,OAAhBlF,EAEGA,EAAYkF,oBAFpB,CAQD,EAEAzF,EAAK6D,aAAe,SAAW6B,GAKT,OAAhBpF,IAEJA,EAAYmF,eAAiBC,GAIT,OAAhBnF,QAAuDhvL,IAA/BgvL,EAAYkF,iBAExClF,EAAYkF,eAAiBC,EAI/B,EAIA,IAAIC,EAA2B,KA8G/B,IAAM/rD,EAAY,IAAIoX,GAUQ,OAR9BpX,EAAU5iE,kBA9GV,SAA2Bp6C,EAAMhV,GAKhC,GAHAw4K,EAAOx4K,EAAMg+K,cAAezF,GAAwB9B,GACpDmC,EAAU54K,EAEI,OAATw4K,EAAgB,CAEpB,IAAMyF,EAAQzF,EAAKyF,MAEE,OAAhBtF,IAEJp6I,EAAS2/I,2BAA4BnF,EAAiBJ,EAAYxP,aAClE5qI,EAASK,gBAAiBm6I,IAI3B,IAAIoF,GAAsB,EAIrBF,EAAMlzL,SAAWquL,EAAS99E,QAAQvwG,SAEtCquL,EAAS99E,QAAQvwG,OAAS,EAC1BozL,GAAsB,GAIvB,IAAM,IAAI/xL,EAAI,EAAGA,EAAI6xL,EAAMlzL,OAAQqB,IAAO,CAEzC,IAAMw2C,EAAOq7I,EAAO7xL,GAEhBq3D,EAAW,KAEf,GAAqB,OAAhBk1H,EAEJl1H,EAAWk1H,EAAYxU,YAAavhI,OAE9B,CAEN,IAAMw7I,EAAa3F,EAAU4F,gBAAiB3F,EAAa91I,GAC3D6gB,EAAW26H,EAAW36H,SAGX,IAANr3D,IAEJmyC,EAAS+/I,wBACRvF,EACAqF,EAAW9M,aACXoH,EAAY3G,uBAAoBpoL,EAAYy0L,EAAWG,qBAExDhgJ,EAASK,gBAAiBm6I,GAI5B,CAEA,IAAIx+I,EAAS+gE,EAASlvG,QAENzC,IAAX4wC,KAEJA,EAAS,IAAI0I,IACNksF,OAAOksC,OAAQjvK,GACtBmuC,EAAOkpB,SAAW,IAAIhhB,GACtB64D,EAASlvG,GAAMmuC,GAIhBA,EAAOlhC,OAAO2sB,UAAW4c,EAAK8wD,UAAUr6F,QACxCkhC,EAAO0J,iBAAiBje,UAAW4c,EAAKqB,kBACxC1J,EAAOkpB,SAASx2D,IAAKw2D,EAASjsD,EAAGisD,EAAShsD,EAAGgsD,EAASzwB,MAAOywB,EAASxwB,QAE3D,IAAN7mC,GAEJgtL,EAAS//K,OAAO5M,KAAM8tC,EAAOlhC,SAID,IAAxB8kL,GAEJ/E,EAAS99E,QAAQxwG,KAAMyvC,EAIzB,CAED,CAIA,IAAM,IAAInuC,EAAI,EAAGA,EAAI4sL,EAAYjuL,OAAQqB,IAAO,CAE/C,IAAMoqL,EAAcyC,EAAwB7sL,GACtCqtL,EAAaT,EAAa5sL,GAEX,OAAhBoqL,QAAuC7sL,IAAf8vL,GAE5BA,EAAW5+I,OAAQ27I,EAAax2K,EAAOu4K,GAAwB9B,EAIjE,CAEKsH,GAA2BA,EAA0B/oK,EAAMhV,GAEhE44K,EAAU,IAEX,IAMAR,EAAKhpH,iBAAmB,SAAW59C,GAElCusK,EAA2BvsK,CAE5B,EAEA4mK,EAAKjtI,QAAU,WAAa,EAAEitI,CAE/B,CAAC,OAAAjlL,EAAAA,EAAAA,GAAA8kL,EAAA,CApsBgB,CAASjmI,IAwsB3B,SAASwsI,GAAgBjgJ,EAAUw2G,GAmGlC,SAAS0pC,EAAuBroJ,EAAU1wB,GAEzC0wB,EAASq1D,QAAQpjG,MAAQqd,EAAS+lF,QAE7B/lF,EAAS2kF,OAEbj0D,EAASq9G,QAAQprJ,MAAMoE,KAAMiZ,EAAS2kF,OAIlC3kF,EAAS08F,UAEbhsE,EAASgsE,SAAS/5G,MAAMoE,KAAMiZ,EAAS08F,UAAWtlE,eAAgBp3B,EAASumF,mBAIvEvmF,EAASgjB,MAEb0N,EAAS1N,IAAIrgC,MAAQqd,EAASgjB,KAI1BhjB,EAASixH,WAEbvgG,EAASugG,SAAStuI,MAAQqd,EAASixH,UAI/BjxH,EAASqxH,UAEb3gG,EAAS2gG,QAAQ1uI,MAAQqd,EAASqxH,QAClC3gG,EAAS4gG,UAAU3uI,MAAQqd,EAASsxH,UAC/BtxH,EAAS+wB,OAAS22E,IAAWh3E,EAAS4gG,UAAU3uI,QAAW,IAI5Dqd,EAASyxH,kBAEb/gG,EAAS+gG,gBAAgB9uI,MAAQqd,EAASyxH,gBAC1C/gG,EAASghG,kBAAkB/uI,MAAQqd,EAAS0xH,kBAC5ChhG,EAASihG,iBAAiBhvI,MAAQqd,EAAS2xH,kBAIvC3xH,EAAS8xH,cAEbphG,EAASohG,YAAYnvI,MAAQqd,EAAS8xH,aAIlC9xH,EAASuxH,YAEb7gG,EAAS6gG,UAAU5uI,MAAQqd,EAASuxH,UACpC7gG,EAAS2qE,YAAY14G,MAAMoE,KAAMiZ,EAASq7F,aACrCr7F,EAAS+wB,OAAS22E,GAAWh3E,EAAS2qE,YAAY14G,MAAM0V,UAIzD2H,EAAS+xH,cAEbrhG,EAASqhG,YAAYpvI,MAAQqd,EAAS+xH,aAIlC/xH,EAASm8F,UAAY,IAEzBzrE,EAASyrE,UAAUx5G,MAAQqd,EAASm8F,WAIrC,IAoDI68E,EA2GAC,EA/JE/mD,EAASmd,EAAW/nJ,IAAK0Y,GAAWkyH,OAc1C,GAZKA,IAEJxhG,EAASwhG,OAAOvvI,MAAQuvI,EAExBxhG,EAAS09G,WAAWzrJ,MAAUuvI,EAAOniG,gBAAkD,IAAjCmiG,EAAO3Y,uBAAsC,EAAI,EAEvG7oF,EAAS2hG,aAAa1vI,MAAQqd,EAASqyH,aACvC3hG,EAASi4D,IAAIhmG,MAAQqd,EAAS2oF,IAC9Bj4D,EAAS4hG,gBAAgB3vI,MAAQqd,EAASsyH,iBAItCtyH,EAASkxH,SAAW,CAExBxgG,EAASwgG,SAASvuI,MAAQqd,EAASkxH,SAGnC,IAAM+nC,GAAqD,IAArCpgI,EAASi4H,wBAAqC55J,KAAKyF,GAAK,EAE9E+zB,EAASygG,kBAAkBxuI,MAAQqd,EAASmxH,kBAAoB8nC,CAEjE,CAEKj5J,EAASoxH,QAEb1gG,EAAS0gG,MAAMzuI,MAAQqd,EAASoxH,MAChC1gG,EAAS8rE,eAAe75G,MAAQqd,EAASw8F,gBA0BrCx8F,EAASgjB,IAEbg2J,EAAah5K,EAASgjB,IAEXhjB,EAAS+xH,YAEpBinD,EAAah5K,EAAS+xH,YAEX/xH,EAASyxH,gBAEpBunD,EAAah5K,EAASyxH,gBAEXzxH,EAASuxH,UAEpBynD,EAAah5K,EAASuxH,UAEXvxH,EAASqxH,QAEpB2nD,EAAah5K,EAASqxH,QAEXrxH,EAAS4xH,aAEpBonD,EAAah5K,EAAS4xH,aAEX5xH,EAAS6xH,aAEpBmnD,EAAah5K,EAAS6xH,aAEX7xH,EAASixH,SAEpB+nD,EAAah5K,EAASixH,SAEXjxH,EAAS8xH,YAEpBknD,EAAah5K,EAAS8xH,YAEX9xH,EAAS2wH,aAEpBqoD,EAAah5K,EAAS2wH,aAEX3wH,EAAS6wH,mBAEpBmoD,EAAah5K,EAAS6wH,mBAEX7wH,EAAS4wH,sBAEpBooD,EAAah5K,EAAS4wH,sBAEX5wH,EAAS8wH,eAEpBkoD,EAAah5K,EAAS8wH,eAEX9wH,EAAS+wH,wBAEpBioD,EAAah5K,EAAS+wH,wBAEX/wH,EAASgyH,qBAEpBgnD,EAAah5K,EAASgyH,qBAEXhyH,EAASiyH,iBAEpB+mD,EAAah5K,EAASiyH,iBAEXjyH,EAASwyH,gBAEpBwmD,EAAah5K,EAASwyH,gBAEXxyH,EAASyyH,aAEpBumD,EAAah5K,EAASyyH,aAEXzyH,EAASm7I,cAEpB69B,EAAah5K,EAASm7I,cAEXn7I,EAASo7I,oBAEpB49B,EAAah5K,EAASo7I,wBAIHn3J,IAAf+0L,IAGCA,EAAWh+D,sBAEfg+D,EAAaA,EAAWjqJ,UAIY,IAAhCiqJ,EAAWzyJ,kBAEfyyJ,EAAWz3J,eAIZmP,EAASs9G,YAAYrrJ,MAAMoE,KAAMiyL,EAAWrlL,SAUxCqM,EAASoxH,MAEb6nD,EAAcj5K,EAASoxH,MAEZpxH,EAASkxH,WAEpB+nD,EAAcj5K,EAASkxH,eAIHjtI,IAAhBg1L,IAGCA,EAAYj+D,sBAEhBi+D,EAAcA,EAAYlqJ,UAIW,IAAjCkqJ,EAAY1yJ,kBAEhB0yJ,EAAY13J,eAIbmP,EAASu9G,aAAatrJ,MAAMoE,KAAMkyL,EAAYtlL,QAIhD,CAoTA,MAAO,CACNulL,mBA1pBD,SAA6BxoJ,EAAUuiG,GAEtCviG,EAASu+G,SAAStsJ,MAAMoE,KAAMksI,EAAItuC,OAE7BsuC,EAAIkmD,OAERzoJ,EAASq+G,QAAQpsJ,MAAQswI,EAAI9+F,KAC7BzD,EAASs+G,OAAOrsJ,MAAQswI,EAAI5+F,KAEjB4+F,EAAIiiC,YAEfxkI,EAASo+G,WAAWnsJ,MAAQswI,EAAImmD,QAIlC,EA4oBCC,wBA1oBD,SAAkC3oJ,EAAU1wB,EAAUs5K,EAAY/rJ,EAAQgsJ,GAEpEv5K,EAASuzH,qBAIFvzH,EAASw5K,sBAFpBT,EAAuBroJ,EAAU1wB,GAMtBA,EAASy5K,oBAEpBV,EAAuBroJ,EAAU1wB,GA6cnC,SAA8B0wB,EAAU1wB,GAElCA,EAASuyH,cAEb7hG,EAAS6hG,YAAY5vI,MAAQqd,EAASuyH,YAIxC,CApdEmnD,CAAqBhpJ,EAAU1wB,IAEpBA,EAAS25K,qBAEpBZ,EAAuBroJ,EAAU1wB,GAicnC,SAA+B0wB,EAAU1wB,GAExC0wB,EAAS+/F,SAAS9tI,MAAMoE,KAAMiZ,EAASywH,UACvC//F,EAASggG,UAAU/tI,MAAQuU,KAAKuC,IAAKuG,EAAS0wH,UAAW,KAE1D,CArcEkpD,CAAsBlpJ,EAAU1wB,IAErBA,EAASw0J,wBAEpBukB,EAAuBroJ,EAAU1wB,GA6cnC,SAAkC0wB,EAAU1wB,GAE3C0wB,EAASkrE,UAAUj5G,MAAQqd,EAAS47F,UACpClrE,EAASgrE,UAAU/4G,MAAQqd,EAAS07F,UAE/B17F,EAAS4xH,eAEblhG,EAASkhG,aAAajvI,MAAQqd,EAAS4xH,cAInC5xH,EAAS6xH,eAEbnhG,EAASmhG,aAAalvI,MAAQqd,EAAS6xH,cAIxC,IAAMK,EAASmd,EAAW/nJ,IAAK0Y,GAAWkyH,OAErCA,IAGJxhG,EAAS0hG,gBAAgBzvI,MAAQqd,EAASoyH,gBAI5C,CAteEynD,CAAyBnpJ,EAAU1wB,GAE9BA,EAAS85K,wBAsehB,SAAkCppJ,EAAU1wB,EAAUu5K,GAErD7oJ,EAASi4D,IAAIhmG,MAAQqd,EAAS2oF,IAEzB3oF,EAAS6nF,MAAQ,IAErBn3D,EAASi3D,WAAWhlG,MAAMoE,KAAMiZ,EAAS2nF,YAAavwD,eAAgBp3B,EAAS6nF,OAE/En3D,EAASk3D,eAAejlG,MAAQqd,EAAS4nF,eAEpC5nF,EAASm7I,gBAEbzqH,EAASyqH,cAAcx4J,MAAQqd,EAASm7I,eAIpCn7I,EAASo7I,oBAEb1qH,EAAS0qH,kBAAkBz4J,MAAQqd,EAASo7I,oBAMzCp7I,EAAS2mF,UAAY,IAEzBj2D,EAASi2D,UAAUhkG,MAAQqd,EAAS2mF,UACpCj2D,EAASo2D,mBAAmBnkG,MAAQqd,EAAS8mF,mBAExC9mF,EAAS2wH,eAEbjgG,EAASigG,aAAahuI,MAAQqd,EAAS2wH,cAInC3wH,EAAS4wH,wBAEblgG,EAASkgG,sBAAsBjuI,MAAQqd,EAAS4wH,uBAI5C5wH,EAAS6wH,qBAEbngG,EAASu2D,qBAAqBtkG,MAAMoE,KAAMiZ,EAASinF,sBACnDv2D,EAASmgG,mBAAmBluI,MAAQqd,EAAS6wH,mBAExC7wH,EAAS+wB,OAAS22E,GAEtBh3E,EAASu2D,qBAAqBtkG,MAAM0V,WAQlC2H,EAASmnF,YAAc,IAE3Bz2D,EAASy2D,YAAYxkG,MAAQqd,EAASmnF,YACtCz2D,EAAS42D,eAAe3kG,MAAQqd,EAASsnF,eACzC52D,EAAS82D,4BAA4B7kG,MAAQqd,EAASunF,0BAA2B,GACjF72D,EAAS+2D,4BAA4B9kG,MAAQqd,EAASunF,0BAA2B,GAE5EvnF,EAAS8wH,iBAEbpgG,EAASogG,eAAenuI,MAAQqd,EAAS8wH,gBAIrC9wH,EAAS+wH,0BAEbrgG,EAASqgG,wBAAwBpuI,MAAQqd,EAAS+wH,0BAM/C/wH,EAASmoF,aAAe,IAE5Bz3D,EAASy3D,aAAaxlG,MAAQqd,EAASmoF,aACvCz3D,EAAS4qH,uBAAuB34J,MAAQ42L,EAAyBxqJ,QACjE2B,EAAS2qH,wBAAwB14J,MAAM4E,IAAKgyL,EAAyBjsJ,MAAOisJ,EAAyBhsJ,QAEhGvtB,EAASwyH,kBAEb9hG,EAAS8hG,gBAAgB7vI,MAAQqd,EAASwyH,iBAI3C9hG,EAAS23D,UAAU1lG,MAAQqd,EAASqoF,UAE/BroF,EAASyyH,eAEb/hG,EAAS+hG,aAAa9vI,MAAQqd,EAASyyH,cAIxC/hG,EAAS83D,oBAAoB7lG,MAAQqd,EAASwoF,oBAC9C93D,EAASg4D,iBAAiB/lG,MAAMoE,KAAMiZ,EAAS0oF,mBAIhDh4D,EAASk4D,kBAAkBjmG,MAAQqd,EAAS4oF,kBAC5Cl4D,EAASs4D,cAAcrmG,MAAMoE,KAAMiZ,EAASgpF,eAEvChpF,EAASgyH,uBAEbthG,EAASshG,qBAAqBrvI,MAAQqd,EAASgyH,sBAI3ChyH,EAASiyH,mBAEbvhG,EAASuhG,iBAAiBtvI,MAAQqd,EAASiyH,iBAI7C,CAzlBG8nD,CAAyBrpJ,EAAU1wB,EAAUu5K,IAInCv5K,EAASg6K,sBAEpBjB,EAAuBroJ,EAAU1wB,GAqlBnC,SAAgC0wB,EAAU1wB,GAEpCA,EAASgxH,SAEbtgG,EAASsgG,OAAOruI,MAAQqd,EAASgxH,OAInC,CA5lBEipD,CAAuBvpJ,EAAU1wB,IAEtBA,EAASm7J,oBAEpB4d,EAAuBroJ,EAAU1wB,GAEtBA,EAASu7J,wBAEpBwd,EAAuBroJ,EAAU1wB,GAslBnC,SAAkC0wB,EAAU1wB,GAE3C0wB,EAASkhH,kBAAkBjvJ,MAAMoE,KAAMiZ,EAAS4xI,mBAChDlhH,EAASmhH,aAAalvJ,MAAQqd,EAAS6xI,aACvCnhH,EAASohH,YAAYnvJ,MAAQqd,EAAS8xI,WAEvC,CA3lBEooC,CAAyBxpJ,EAAU1wB,IAExBA,EAASm6K,qBAEpBpB,EAAuBroJ,EAAU1wB,GAEtBA,EAASo6K,qBAqStB,SAA8B1pJ,EAAU1wB,GAEvC0wB,EAASq9G,QAAQprJ,MAAMoE,KAAMiZ,EAAS2kF,OACtCj0D,EAASq1D,QAAQpjG,MAAQqd,EAAS+lF,OAEnC,CAxSEs0F,CAAqB3pJ,EAAU1wB,GAE1BA,EAASs6K,sBAwShB,SAA8B5pJ,EAAU1wB,GAEvC0wB,EAASiiG,SAAShwI,MAAQqd,EAAS2yH,SACnCjiG,EAAS6gH,UAAU5uJ,MAAQqd,EAAS2yH,SAAW3yH,EAAS4yH,QACxDliG,EAASjnB,MAAM9mB,MAAQqd,EAASyJ,KAEjC,CA5SG8wK,CAAqB7pJ,EAAU1wB,IAIrBA,EAASw6K,iBA0StB,SAAgC9pJ,EAAU1wB,EAAUs5K,EAAY/rJ,GAE/DmD,EAASq9G,QAAQprJ,MAAMoE,KAAMiZ,EAAS2kF,OACtCj0D,EAASq1D,QAAQpjG,MAAQqd,EAAS+lF,QAClCr1D,EAAS7jC,KAAKlK,MAAQqd,EAASnT,KAAOysL,EACtC5oJ,EAASjnB,MAAM9mB,MAAiB,GAAT4qC,EAElBvtB,EAASgjB,MAEb0N,EAAS1N,IAAIrgC,MAAQqd,EAASgjB,KAI1BhjB,EAASixH,WAEbvgG,EAASugG,SAAStuI,MAAQqd,EAASixH,UAI/BjxH,EAASm8F,UAAY,IAEzBzrE,EAASyrE,UAAUx5G,MAAQqd,EAASm8F,WAQrC,IAAI68E,EAECh5K,EAASgjB,IAEbg2J,EAAah5K,EAASgjB,IAEXhjB,EAASixH,WAEpB+nD,EAAah5K,EAASixH,eAIHhtI,IAAf+0L,KAEiC,IAAhCA,EAAWzyJ,kBAEfyyJ,EAAWz3J,eAIZmP,EAASs9G,YAAYrrJ,MAAMoE,KAAMiyL,EAAWrlL,QAI9C,CA7VE8mL,CAAuB/pJ,EAAU1wB,EAAUs5K,EAAY/rJ,GAE5CvtB,EAAS06K,iBA6VtB,SAAiChqJ,EAAU1wB,GAE1C0wB,EAASq9G,QAAQprJ,MAAMoE,KAAMiZ,EAAS2kF,OACtCj0D,EAASq1D,QAAQpjG,MAAQqd,EAAS+lF,QAClCr1D,EAASvP,SAASx+B,MAAQqd,EAASmhB,SAE9BnhB,EAASgjB,MAEb0N,EAAS1N,IAAIrgC,MAAQqd,EAASgjB,KAI1BhjB,EAASixH,WAEbvgG,EAASugG,SAAStuI,MAAQqd,EAASixH,UAI/BjxH,EAASm8F,UAAY,IAEzBzrE,EAASyrE,UAAUx5G,MAAQqd,EAASm8F,WAQrC,IAAI68E,EAECh5K,EAASgjB,IAEbg2J,EAAah5K,EAASgjB,IAEXhjB,EAASixH,WAEpB+nD,EAAah5K,EAASixH,eAIHhtI,IAAf+0L,KAEiC,IAAhCA,EAAWzyJ,kBAEfyyJ,EAAWz3J,eAIZmP,EAASs9G,YAAYrrJ,MAAMoE,KAAMiyL,EAAWrlL,QAI9C,CA/YEgnL,CAAwBjqJ,EAAU1wB,GAEvBA,EAAS46K,kBAEpBlqJ,EAASi0D,MAAMhiG,MAAMoE,KAAMiZ,EAAS2kF,OACpCj0D,EAASq1D,QAAQpjG,MAAQqd,EAAS+lF,SAEvB/lF,EAAS49H,mBAEpB59H,EAASq+H,oBAAqB,EAIhC,EA+jBD,CAEA,SAASw8C,GAAqBjmJ,EAAI4iH,EAAMvT,EAAch+I,GAErD,IAAIoH,EAAU,CAAC,EACXytL,EAAa,CAAC,EACdC,EAAyB,GAEvBC,EAAqB/2C,EAAaC,SAAatvG,EAAGg/G,aAAc,OAAU,EA+IhF,SAASqnC,EAAmBvhC,EAAShxJ,EAAOg8B,GAE3C,IAAM/hC,EAAQ+2J,EAAQ/2J,MAEtB,QAAwBsB,IAAnBygC,EAAOh8B,GAcX,OARCg8B,EAAOh8B,GAFc,kBAAV/F,EAEMA,EAIAA,EAAMugB,SAIjB,EAMP,GAAsB,kBAAVvgB,GAEX,GAAK+hC,EAAOh8B,KAAY/F,EAGvB,OADA+hC,EAAOh8B,GAAU/F,GACV,MAIF,CAEN,IAAMu4L,EAAex2J,EAAOh8B,GAE5B,IAAsC,IAAjCwyL,EAAan4D,OAAQpgI,GAGzB,OADAu4L,EAAan0L,KAAMpE,IACZ,CAIT,CAID,OAAO,CAER,CA+DA,SAASw4L,EAAgBzhC,GAExB,IAAM/2J,EAAQ+2J,EAAQ/2J,MAEhB60J,EAAO,CACZ4jC,SAAU,EACVC,QAAS,GAyDV,MApDsB,kBAAV14L,GAIX60J,EAAK4jC,SAAW,EAChB5jC,EAAK6jC,QAAU,GAEJ14L,EAAMiwH,WAIjB4kC,EAAK4jC,SAAW,EAChB5jC,EAAK6jC,QAAU,GAEJ14L,EAAMo9H,WAAap9H,EAAMo0D,SAIpCygG,EAAK4jC,SAAW,GAChB5jC,EAAK6jC,QAAU,IAEJ14L,EAAMs3H,WAIjBu9B,EAAK4jC,SAAW,GAChB5jC,EAAK6jC,QAAU,IAEJ14L,EAAM2wH,WAIjBkkC,EAAK4jC,SAAW,GAChB5jC,EAAK6jC,QAAU,IAEJ14L,EAAM0jI,WAIjBmxB,EAAK4jC,SAAW,GAChB5jC,EAAK6jC,QAAU,IAEJ14L,EAAMu2H,UAEjBvzH,QAAQC,KAAM,+EAIdD,QAAQC,KAAM,uDAAwDjD,GAIhE60J,CAER,CAEA,SAAS8jC,EAAyBz/K,GAEjC,IAAM4oK,EAAgB5oK,EAAMha,OAE5B4iL,EAAct9K,oBAAqB,UAAWm0L,GAE9C,IAAM5yL,EAAQqyL,EAAuB1wL,QAASo6K,EAAcI,qBAC5DkW,EAAuBn/K,OAAQlT,EAAO,GAEtCksC,EAAGuvG,aAAc92I,EAASo3K,EAAcxxK,YAEjC5F,EAASo3K,EAAcxxK,WACvB6nL,EAAYrW,EAAcxxK,GAElC,CAgBA,MAAO,CAEN9M,KAjWD,SAAes+K,EAAe7vB,GAE7B,IAAM2mC,EAAe3mC,EAAQA,QAC7B3uJ,EAAM2+K,oBAAqBH,EAAe8W,EAE3C,EA6VCpmJ,OA3VD,SAAiBsvI,EAAe7vB,GAE/B,IAAI1qJ,EAASmD,EAASo3K,EAAcxxK,SAEpBhP,IAAXiG,KAsLN,SAA+Bu6K,GAW9B,IANA,IAAM/zI,EAAW+zI,EAAc/zI,SAE3BhnB,EAAS,EACP8xK,EAAY,GACdC,EAAc,EAER/0L,EAAI,EAAGwS,EAAIw3B,EAASrrC,OAAQqB,EAAIwS,EAAGxS,IAAO,CAEnD,IAAMgzJ,EAAUhpH,EAAUhqC,GACpB8wJ,EAAO2jC,EAAgBzhC,GAS7B,GALAA,EAAQgiC,OAAS,IAAInuL,aAAciqJ,EAAK6jC,QAAU9tL,aAAa2qG,mBAC/DwhD,EAAQiiC,SAAWjyK,EAIdhjB,EAAI,EAQa,KANrB+0L,EAAc/xK,EAAS8xK,IAEMA,EAAYC,EAIUjkC,EAAK4jC,SAAa,IAIpE1xK,GAAY8xK,EAAYC,EACxB/hC,EAAQiiC,SAAWjyK,GAMrBA,GAAU8tI,EAAK6jC,OAEhB,EAIAI,EAAc/xK,EAAS8xK,GAEJ,IAAI9xK,GAAY8xK,EAAYC,GAI/ChX,EAAcmX,OAASlyK,EACvB+6J,EAAcoX,QAAU,CAAC,CAI1B,CA/OEC,CAAsBrX,GAEtBv6K,EA0BF,SAAuBu6K,GAItB,IAAMsX,EAgBP,WAEC,IAAM,IAAIr1L,EAAI,EAAGA,EAAIs0L,EAAkBt0L,IAEtC,IAA+C,IAA1Cq0L,EAAuB1wL,QAAS3D,GAGpC,OADAq0L,EAAuB31L,KAAMsB,GACtBA,EAQT,OAFAf,QAAQkC,MAAO,yFAER,CAER,CAjC2Bm0L,GAC1BvX,EAAcI,oBAAsBkX,EAEpC,IAAM7xL,EAAS0qC,EAAG0vG,eACZz3I,EAAO43K,EAAcmX,OACrBjoD,EAAQ8wC,EAAc9wC,MAO5B,OALA/+F,EAAG2vG,WAAY,MAAOr6I,GACtB0qC,EAAG4vG,WAAY,MAAO33I,EAAM8mI,GAC5B/+F,EAAG2vG,WAAY,MAAO,MACtB3vG,EAAGqnJ,eAAgB,MAAOF,EAAmB7xL,GAEtCA,CAER,CA5CWo6I,CAAcmgC,GACvBp3K,EAASo3K,EAAcxxK,IAAO/I,EAE9Bu6K,EAAcz9K,iBAAkB,UAAWs0L,IAM5C,IAAMC,EAAe3mC,EAAQA,QAC7B3uJ,EAAMu+K,iBAAkBC,EAAe8W,GAIvC,IAAMjhL,EAAQk9I,EAAKr+G,OAAO7+B,MAErBwgL,EAAYrW,EAAcxxK,MAASqH,KAiDzC,SAA2BmqK,GAE1B,IAAMv6K,EAASmD,EAASo3K,EAAcxxK,IAChCy9B,EAAW+zI,EAAc/zI,SACzBhM,EAAQ+/I,EAAcoX,QAE5BjnJ,EAAG2vG,WAAY,MAAOr6I,GAEtB,IAAM,IAAIxD,EAAI,EAAG8sG,EAAK9iE,EAASrrC,OAAQqB,EAAI8sG,EAAI9sG,IAAO,CAErD,IAAMgzJ,EAAUhpH,EAAUhqC,GAI1B,IAAgD,IAA3Cu0L,EAAmBvhC,EAAShzJ,EAAGg+B,GAAmB,CAEtD,IAAM/hC,EAAQ+2J,EAAQ/2J,MAChB+mB,EAASgwI,EAAQiiC,SAED,kBAAVh5L,GAEX+2J,EAAQgiC,OAAQ,GAAM/4L,EACtBiyC,EAAG6vG,cAAe,MAAO/6H,EAAQgwI,EAAQgiC,UAIpChiC,EAAQ/2J,MAAM2wH,WAIlBomC,EAAQgiC,OAAQ,GAAMhiC,EAAQ/2J,MAAM4Q,SAAU,GAC9CmmJ,EAAQgiC,OAAQ,GAAMhiC,EAAQ/2J,MAAM4Q,SAAU,GAC9CmmJ,EAAQgiC,OAAQ,GAAMhiC,EAAQ/2J,MAAM4Q,SAAU,GAC9CmmJ,EAAQgiC,OAAQ,GAAMhiC,EAAQ/2J,MAAM4Q,SAAU,GAC9CmmJ,EAAQgiC,OAAQ,GAAMhiC,EAAQ/2J,MAAM4Q,SAAU,GAC9CmmJ,EAAQgiC,OAAQ,GAAMhiC,EAAQ/2J,MAAM4Q,SAAU,GAC9CmmJ,EAAQgiC,OAAQ,GAAMhiC,EAAQ/2J,MAAM4Q,SAAU,GAC9CmmJ,EAAQgiC,OAAQ,GAAMhiC,EAAQ/2J,MAAM4Q,SAAU,GAC9CmmJ,EAAQgiC,OAAQ,GAAMhiC,EAAQ/2J,MAAM4Q,SAAU,GAC9CmmJ,EAAQgiC,OAAQ,GAAMhiC,EAAQ/2J,MAAM4Q,SAAU,GAC9CmmJ,EAAQgiC,OAAQ,IAAOhiC,EAAQ/2J,MAAM4Q,SAAU,GAC/CmmJ,EAAQgiC,OAAQ,IAAOhiC,EAAQ/2J,MAAM4Q,SAAU,IAI/C5Q,EAAM49B,QAASm5H,EAAQgiC,QAIxB9mJ,EAAG6vG,cAAe,MAAO/6H,EAAQgwI,EAAQgiC,QAI3C,CAED,CAEA9mJ,EAAG2vG,WAAY,MAAO,KAEvB,CA1GE23C,CAAkBzX,GAElBqW,EAAYrW,EAAcxxK,IAAOqH,EAInC,EA6TCmrC,QAnBD,WAEC,IAAM,IAAMxyC,KAAM5F,EAEjBunC,EAAGuvG,aAAc92I,EAAS4F,IAI3B8nL,EAAyB,GACzB1tL,EAAU,CAAC,EACXytL,EAAa,CAAC,CAEf,EAWD,CAUA,SAASqB,KAAiC,IAAlB7iJ,EAAU51C,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,CAAC,EAErCZ,KAAKs5L,iBAAkB,EAEvB,IAWIC,EAXE9lE,OAAgCtyH,IAAtBq1C,EAAW4tB,OAAuB5tB,EAAW4tB,OAZ9D,WAEC,IAAMA,EAASkuD,GAAiB,UAEhC,OADAluD,EAAO/hB,MAAMwsB,QAAU,QAChBzK,CAER,CAMuEo1H,GACrEntH,OAAkClrE,IAAvBq1C,EAAWtxC,QAAwBsxC,EAAWtxC,QAAU,KAEnEu0L,OAA8Bt4L,IAArBq1C,EAAW3xB,OAAsB2xB,EAAW3xB,MACrD60K,OAAkCv4L,IAAvBq1C,EAAW6nG,SAAwB7nG,EAAW6nG,QACzDs7C,OAAsCx4L,IAAzBq1C,EAAW+tB,WAA0B/tB,EAAW+tB,UAC7Dq1H,OAAwDz4L,IAAlCq1C,EAAW82F,oBAAmC92F,EAAW82F,mBAC/EusD,OAA8D14L,IAArCq1C,EAAWsjJ,uBAAsCtjJ,EAAWsjJ,sBACrFC,OAAkD54L,IAA/Bq1C,EAAW8tB,gBAAgC9tB,EAAW8tB,gBAAkB,UAC3F01H,OAA4E74L,IAA5Cq1C,EAAWyjJ,8BAA6CzjJ,EAAWyjJ,6BAMnGV,EAFiB,OAAbltH,EAEKA,EAASgkH,uBAAuB7rH,WAIXrjE,IAArBq1C,EAAWguB,OAAsBhuB,EAAWguB,MAItD,IAAI01H,EAAoB,KACpBC,EAAqB,KAKnBC,EAAkB,GAClBC,EAAmB,GAIzBr6L,KAAK89C,WAAa21E,EAGlBzzH,KAAK2uK,MAAQ,CAMZC,mBAAmB,GAKpB5uK,KAAKi9C,WAAY,EACjBj9C,KAAKqwJ,gBAAiB,EACtBrwJ,KAAKswJ,gBAAiB,EACtBtwJ,KAAKuwJ,kBAAmB,EAIxBvwJ,KAAKs6L,aAAc,EAInBt6L,KAAK4sI,eAAiB,GACtB5sI,KAAKy2J,sBAAuB,EAI5Bz2J,KAAKk1C,eAAiBnE,GAItB/wC,KAAKguK,yBAA0B,EAI/BhuK,KAAKgnE,YAAc6/C,GACnB7mH,KAAKu6L,oBAAsB,EAI3Bj7L,OAAO+rE,iBAAkBrrE,KAAM,CAI9Bw6L,YAAa,CACZh2L,IAAK,WAGJ,OADA3B,QAAQC,KAAM,uDACP,CAER,EACA2B,IAAK,WAEJ5B,QAAQC,KAAM,sDAEf,KAOF,IAAM2F,EAAQzI,KAEVy6L,GAAiB,EAIjBC,EAAyB,EACzBC,EAA4B,EAC5BC,EAAuB,KACvBC,GAAuB,EAEvBC,EAAiB,KAEfC,EAAmB,IAAI9gJ,GACvB+gJ,EAAkB,IAAI/gJ,GACxBghJ,EAAsB,KAItBC,EAASznE,EAAQjpF,MACjB2wJ,EAAU1nE,EAAQhpF,OAElB2wJ,EAAc,EACdC,EAAc,KACdC,EAAmB,KAEjBriB,EAAY,IAAIh/H,GAAS,EAAG,EAAGihJ,EAAQC,GACvCI,EAAW,IAAIthJ,GAAS,EAAG,EAAGihJ,EAAQC,GACxCK,GAAe,EAIb1iB,EAAW,IAAI15B,GAIjBq8C,GAAmB,EACnBC,GAAwB,EAIxBC,EAA4B,KAI1BC,EAAoB,IAAIr/J,GAExBgiH,EAAW,IAAInrG,GACfyoJ,EAAW,IAAIv/J,GAEfw/J,EAAc,CAAExsJ,WAAY,KAAM6gG,IAAK,KAAMxgG,YAAa,KAAMosJ,iBAAkB,KAAM5sJ,SAAS,GAEvG,SAAS6sJ,IAER,OAAgC,OAAzBpB,EAAgCQ,EAAc,CAEtD,CAIA,IAoFIhrJ,EAAY+wG,EAAch+I,EAAOuxJ,EACjCnI,EAAY7lD,EAAUyoD,EAAUwhB,EAAY/nE,GAAY8R,GAAYrqD,GACpE4rI,GAAcrrI,GAAW6W,GAAaswG,GAAc/8B,GAAUl+F,GAE9DxN,GAAY4sJ,GAAcC,GAAgBC,GAE1C7Z,GAAOvxB,GAAejW,GA1FtBunC,GAAMj2G,EAEV,SAAS4oD,GAAYonE,EAAcC,GAElC,IAAM,IAAI14L,EAAI,EAAGA,EAAIy4L,EAAa95L,OAAQqB,IAAO,CAEhD,IAAM24L,EAAcF,EAAcz4L,GAC5BsB,EAAUuuH,EAAQwB,WAAYsnE,EAAaD,GACjD,GAAiB,OAAZp3L,EAAmB,OAAOA,CAEhC,CAEA,OAAO,IAER,CAEA,IAEC,IAAMo3L,GAAoB,CACzB93H,OAAO,EACP3/C,MAAO40K,EACPp7C,QAASq7C,EACTn1H,UAAWo1H,EACXrsD,mBAAoBssD,EACpBE,sBAAuBD,EACvBv1H,gBAAiBy1H,EACjBE,6BAA8BD,GAW/B,GAPK,iBAAkBvmE,GAAUA,EAAQ99E,aAAc,cAAe,aAAFl2C,OAAeiuC,IAGnF+lF,EAAQvvH,iBAAkB,mBAAoBs4L,IAAe,GAC7D/oE,EAAQvvH,iBAAkB,uBAAwBu4L,IAAkB,GACpEhpE,EAAQvvH,iBAAkB,4BAA6Bw4L,IAAwB,GAElE,OAARpa,GAAe,CAEnB,IAAM+Z,GAAe,CAAE,SAAU,QAAS,sBAU1C,IARgC,IAA3B5zL,EAAMk0L,kBAEVN,GAAa12L,QAMD,QAFb28K,GAAMrtD,GAAYonE,GAAcC,KAI/B,MAAKrnE,GAAYonE,IAEV,IAAI35L,MAAO,+DAIX,IAAIA,MAAO,gCAMpB,MAIsCvB,IAAjCmhL,GAAIntB,2BAERmtB,GAAIntB,yBAA2B,WAE9B,MAAO,CAAE,SAAY,EAAG,SAAY,EAAG,UAAa,EAErD,EAIF,CAAE,MAAQpwJ,IAGT,MADAlC,QAAQkC,MAAO,wBAA0BA,GAAME,SACzCF,EAEP,CAUA,SAAS63L,KAERxsJ,EAAa,IAAIiuH,GAAiBikB,IAElCnhC,EAAe,IAAI6T,GAAmBstB,GAAKlyI,EAAYoG,GAEvDpG,EAAWrwC,KAAMohJ,GAEjBohC,GAAQ,IAAIoH,GAAYrH,GAAKlyI,EAAY+wG,GAEzCh+I,EAAQ,IAAI24K,GAAYwG,GAAKlyI,EAAY+wG,GAEzCuT,EAAO,IAAIyK,GACX5S,EAAa,IAAI6mB,GACjB1sE,EAAW,IAAI27E,GAAeC,GAAKlyI,EAAYjtC,EAAOopJ,EAAYpL,EAAcohC,GAAO7tB,GACvFvF,EAAW,IAAI4I,GAAetvJ,GAC9BkoK,EAAa,IAAI9S,GAAiBp1J,GAClCmgG,GAAa,IAAIs4C,GAAiBohC,GAAKnhC,GACvC6P,GAAgB,IAAIJ,GAAoB0xB,GAAKlyI,EAAYw4D,GAAYu4C,GACrEzmC,GAAa,IAAI6jD,GAAiB+jB,GAAK15E,GAAY8rD,EAAM1D,IACzD3gG,GAAU,IAAI4wG,GAAcqhB,GAAK5nE,GAAY9R,GAAY8rD,GACzDwnC,GAAe,IAAIv8B,GAAmB2iB,GAAKnhC,EAAcz6C,GACzDs0C,GAAW,IAAIsb,GAAe/J,GAC9B0vC,GAAe,IAAIvrB,GAAejoK,EAAO0mJ,EAAUwhB,EAAYvgI,EAAY+wG,EAAc6P,GAAehW,IACxGpqF,GAAY,IAAIolI,GAAgBvtL,EAAO8jJ,GACvC9kF,GAAc,IAAIwsG,GAClB8D,GAAe,IAAID,GAAmB1nI,EAAY+wG,GAClD7xG,GAAa,IAAI4/G,GAAiBzmJ,EAAO0mJ,EAAUhsJ,EAAOktD,GAASkpI,EAAQK,GAC3E98I,GAAY,IAAI67H,GAAgBlwK,EAAO4nD,GAAS8wF,GAChDpG,GAAiB,IAAIg9C,GAAqBzV,GAAK5tB,EAAMvT,EAAch+I,GAEnEg5L,GAAiB,IAAI1nC,GAAqB6tB,GAAKlyI,EAAYskH,EAAMvT,GACjEi7C,GAAwB,IAAIn9B,GAA4BqjB,GAAKlyI,EAAYskH,EAAMvT,GAE/EuT,EAAK4K,SAAW28B,GAAa38B,SAE7B72J,EAAM04I,aAAeA,EACrB14I,EAAM2nC,WAAaA,EACnB3nC,EAAM8jJ,WAAaA,EACnB9jJ,EAAMg/D,YAAcA,GACpBh/D,EAAMq0C,UAAYA,GAClBr0C,EAAMtF,MAAQA,EACdsF,EAAMisJ,KAAOA,CAEd,CAEAkoC,KAIA,IAAMjgJ,GAAK,IAAI8yI,GAAchnL,EAAO65K,IA0QpC,SAASka,GAAezjL,GAEvBA,EAAMmwC,iBAENrmD,QAAQiiB,IAAK,sCAEb21K,GAAiB,CAElB,CAEA,SAASgC,KAER55L,QAAQiiB,IAAK,0CAEb21K,GAAiB,EAEjB,IAAMoC,EAAgBnoC,EAAK6K,UACrBuO,EAAmBhxH,GAAUF,QAC7BkgJ,EAAsBhgJ,GAAUC,WAChCggJ,EAAuBjgJ,GAAUzc,YACjC0qI,EAAgBjuH,GAAUj7C,KAEhC+6L,KAEAloC,EAAK6K,UAAYs9B,EACjB//I,GAAUF,QAAUkxH,EACpBhxH,GAAUC,WAAa+/I,EACvBhgJ,GAAUzc,YAAc08J,EACxBjgJ,GAAUj7C,KAAOkpK,CAElB,CAEA,SAAS2xB,GAAwB3jL,GAEhClW,QAAQkC,MAAO,sEAAuEgU,EAAMikL,cAE7F,CAEA,SAASC,GAAmBlkL,GAE3B,IAAMmE,EAAWnE,EAAMha,OAEvBme,EAAS7Y,oBAAqB,UAAW44L,IAQ1C,SAA6B//K,IAS7B,SAA2CA,GAE1C,IAAMoiJ,EAAW/S,EAAW/nJ,IAAK0Y,GAAWoiJ,cAE1Bn+J,IAAbm+J,IAEJA,EAAS3+H,SAAS,SAAWmxH,GAE5BmqC,GAAa/oB,eAAgBphB,EAE9B,IAEK50I,EAAS49H,kBAEbmhD,GAAa9oB,mBAAoBj2J,GAMpC,EA3BCggL,CAAkChgL,GAElCqvI,EAAW3rH,OAAQ1jB,EAEpB,CAZCigL,CAAoBjgL,EAErB,CAtTAld,KAAK28C,GAAKA,GAIV38C,KAAKi1H,WAAa,WAEjB,OAAOqtD,EAER,EAEAtiL,KAAKqwL,qBAAuB,WAE3B,OAAO/N,GAAI+N,sBAEZ,EAEArwL,KAAK0nE,iBAAmB,WAEvB,IAAMi8B,EAAYvzD,EAAW5rC,IAAK,sBAC7Bm/F,GAAYA,EAAUy5F,aAE5B,EAEAp9L,KAAKq9L,oBAAsB,WAE1B,IAAM15F,EAAYvzD,EAAW5rC,IAAK,sBAC7Bm/F,GAAYA,EAAU25F,gBAE5B,EAEAt9L,KAAKu9L,cAAgB,WAEpB,OAAOnC,CAER,EAEAp7L,KAAK+7D,cAAgB,SAAWl8D,QAEhBsB,IAAVtB,IAELu7L,EAAcv7L,EAEdG,KAAKo7D,QAAS8/H,EAAQC,GAAS,GAEhC,EAEAn7L,KAAK+/H,QAAU,SAAWhhI,GAEzB,OAAOA,EAAO0F,IAAKy2L,EAAQC,EAE5B,EAEAn7L,KAAKo7D,QAAU,SAAW5wB,EAAOC,EAAQuwB,GAEnCre,GAAGmhB,aAEPj7D,QAAQC,KAAM,0EAKfo4L,EAAS1wJ,EACT2wJ,EAAU1wJ,EAEVgpF,EAAQjpF,MAAQp2B,KAAKi5B,MAAO7C,EAAQ4wJ,GACpC3nE,EAAQhpF,OAASr2B,KAAKi5B,MAAO5C,EAAS2wJ,IAEjB,IAAhBpgI,IAEJy4D,EAAQpxE,MAAM7X,MAAQA,EAAQ,KAC9BipF,EAAQpxE,MAAM5X,OAASA,EAAS,MAIjCzqC,KAAKw9L,YAAa,EAAG,EAAGhzJ,EAAOC,GAEhC,EAEAzqC,KAAKy9L,qBAAuB,SAAW1+L,GAEtC,OAAOA,EAAO0F,IAAKy2L,EAASE,EAAaD,EAAUC,GAAc/tJ,OAElE,EAEArtC,KAAK09L,qBAAuB,SAAWlzJ,EAAOC,EAAQ+rJ,GAErD0E,EAAS1wJ,EACT2wJ,EAAU1wJ,EAEV2wJ,EAAc5E,EAEd/iE,EAAQjpF,MAAQp2B,KAAKi5B,MAAO7C,EAAQgsJ,GACpC/iE,EAAQhpF,OAASr2B,KAAKi5B,MAAO5C,EAAS+rJ,GAEtCx2L,KAAKw9L,YAAa,EAAG,EAAGhzJ,EAAOC,EAEhC,EAEAzqC,KAAKk6D,mBAAqB,SAAWn7D,GAEpC,OAAOA,EAAOkF,KAAM82L,EAErB,EAEA/6L,KAAK27K,YAAc,SAAW58K,GAE7B,OAAOA,EAAOkF,KAAMg1K,EAErB,EAEAj5K,KAAKw9L,YAAc,SAAWxuL,EAAGC,EAAGu7B,EAAOC,GAErCz7B,EAAEmoH,UAEN8hD,EAAUx0K,IAAKuK,EAAEA,EAAGA,EAAEC,EAAGD,EAAEE,EAAGF,EAAEvM,GAIhCw2K,EAAUx0K,IAAKuK,EAAGC,EAAGu7B,EAAOC,GAI7BtnC,EAAM83D,SAAU8/H,EAAiB92L,KAAMg1K,GAAY3kI,eAAgB8mJ,GAAc/tJ,QAElF,EAEArtC,KAAK29L,WAAa,SAAW5+L,GAE5B,OAAOA,EAAOkF,KAAMs3L,EAErB,EAEAv7L,KAAK49L,WAAa,SAAW5uL,EAAGC,EAAGu7B,EAAOC,GAEpCz7B,EAAEmoH,UAENokE,EAAS92L,IAAKuK,EAAEA,EAAGA,EAAEC,EAAGD,EAAEE,EAAGF,EAAEvM,GAI/B84L,EAAS92L,IAAKuK,EAAGC,EAAGu7B,EAAOC,GAI5BtnC,EAAMg1H,QAAS6iE,EAAgB/2L,KAAMs3L,GAAWjnJ,eAAgB8mJ,GAAc/tJ,QAE/E,EAEArtC,KAAK69L,eAAiB,WAErB,OAAOrC,CAER,EAEAx7L,KAAKo7K,eAAiB,SAAW0iB,GAEhC36L,EAAMi4K,eAAgBogB,EAAesC,EAEtC,EAEA99L,KAAK+9L,cAAgB,SAAWC,GAE/B3C,EAAc2C,CAEf,EAEAh+L,KAAKi+L,mBAAqB,SAAWD,GAEpC1C,EAAmB0C,CAEpB,EAIAh+L,KAAK4vJ,cAAgB,SAAW7wJ,GAE/B,OAAOA,EAAOkF,KAAMqrC,GAAWsgH,gBAEhC,EAEA5vJ,KAAK6vJ,cAAgB,WAEpBvgH,GAAWugH,cAAc/wJ,MAAOwwC,GAAY1uC,UAE7C,EAEAZ,KAAK8vJ,cAAgB,WAEpB,OAAOxgH,GAAWwgH,eAEnB,EAEA9vJ,KAAK+vJ,cAAgB,WAEpBzgH,GAAWygH,cAAcjxJ,MAAOwwC,GAAY1uC,UAE7C,EAEAZ,KAAKk9C,MAAQ,WAAwD,IAEhEghJ,EAAO,KAFiBt9L,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,KAAAA,UAAA,MAIfs9L,GAAQ,UAJqBt9L,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,KAAAA,UAAA,MAK7Bs9L,GAAQ,QALqCt9L,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,KAAAA,UAAA,MAM3Cs9L,GAAQ,MAEvB5b,GAAIplI,MAAOghJ,EAEZ,EAEAl+L,KAAKsvJ,WAAa,WAEjBtvJ,KAAKk9C,OAAO,GAAM,GAAO,EAE1B,EAEAl9C,KAAK88K,WAAa,WAEjB98K,KAAKk9C,OAAO,GAAO,GAAM,EAE1B,EAEAl9C,KAAK29K,aAAe,WAEnB39K,KAAKk9C,OAAO,GAAO,GAAO,EAE3B,EAIAl9C,KAAK2iD,QAAU,WAEd8wE,EAAQpvH,oBAAqB,mBAAoBm4L,IAAe,GAChE/oE,EAAQpvH,oBAAqB,uBAAwBo4L,IAAkB,GACvEhpE,EAAQpvH,oBAAqB,4BAA6Bq4L,IAAwB,GAElFj1H,GAAY9kB,UACZo1H,GAAap1H,UACb4pG,EAAW5pG,UACXwsG,EAASxsG,UACTguH,EAAWhuH,UACX0N,GAAQ1N,UACRquG,GAAcruG,UACdo4F,GAAep4F,UACfs5I,GAAat5I,UAEbhG,GAAGgG,UAEHhG,GAAGt4C,oBAAqB,eAAgB85L,IACxCxhJ,GAAGt4C,oBAAqB,aAAc+5L,IAEjCzC,IAEJA,EAA0Bh5I,UAC1Bg5I,EAA4B,MAI7BnyD,GAAUhuE,MAEX,EAuFAx7D,KAAKg6K,mBAAqB,SAAWjoI,EAAQ9C,EAAOpB,EAAU3wB,EAAU8gB,EAAQk9E,GAEhE,OAAVjsE,IAAiBA,EAAQ6sJ,GAE9B,IAAM/a,EAAgB/iJ,EAAOqgF,QAAUrgF,EAAOgd,YAAY2qF,cAAgB,EAEpEmsB,EAowBP,SAAqB//G,EAAQ9C,EAAOpB,EAAU3wB,EAAU8gB,IAEhC,IAAlBiR,EAAME,UAAmBF,EAAQ6sJ,GAEtCp1F,EAAS8hF,oBAET,IAAMr4C,EAAMlhG,EAAMkhG,IACZxgG,EAAczyB,EAASw0J,uBAAyBziI,EAAMU,YAAc,KACpEvD,EAAsC,OAAzBwuJ,EAAkCnyL,EAAMysC,gBAA6D,IAA1C0lJ,EAAqB1oB,iBAA4B0oB,EAAqB3uJ,QAAQG,SAAW2E,GACjKq+F,GAAWlyH,EAASw0J,uBAAyBf,EAAaxhB,GAAW3qJ,IAAK0Y,EAASkyH,QAAUz/F,GAC7F69H,GAAyC,IAA1BtwJ,EAASm7F,gBAA4BxqE,EAAS+6D,WAAW/G,OAAgD,IAAvCh0D,EAAS+6D,WAAW/G,MAAMkT,SAC3Gw4D,IAAoBrwJ,EAASuxH,aAAgB5gG,EAAS+6D,WAAW8O,QACjE0oD,IAAkBvyH,EAASotE,gBAAgBx1G,SAC3Ck7G,IAAkB9yE,EAASotE,gBAAgBj2F,OAC3C47F,IAAiB/yE,EAASotE,gBAAgBpZ,MAC1C76B,EAAc9pD,EAASk3B,WAAa3rC,EAAMu+D,YAAc6/C,GAExD+tB,EAAiB/mG,EAASotE,gBAAgBx1G,UAAYooC,EAASotE,gBAAgBj2F,QAAU6oB,EAASotE,gBAAgBpZ,MAClHo+D,OAAyC9+J,IAAnByzI,EAAiCA,EAAeryI,OAAS,EAE/Eo1J,EAAqBpL,EAAW/nJ,IAAK0Y,GACrC0kF,EAASu4F,EAAmBh3L,MAAMy+F,OAExC,IAA0B,IAArB65F,KAE2B,IAA1BC,GAAkC3pJ,IAAW+oJ,GAAiB,CAElE,IAAMpjC,EACL3lH,IAAW+oJ,GACX59K,EAAS/M,KAAO0qL,EAKjB7/C,GAASlwF,SAAU5tC,EAAU60B,EAAQ2lH,EAEtC,CAMD,IAAI2mC,GAAqB,EAEpBnhL,EAASmrD,UAAYsvF,EAAmB4tB,UAEvC5tB,EAAmB2mC,aAAiB3mC,EAAmB4mC,qBAAuB38F,EAAOz+F,MAAMklE,SAIpFsvF,EAAmBziH,iBAAmB9I,GAItCpO,EAAOorG,kBAAqD,IAAlCuuB,EAAmBsV,WANxDoxB,GAAqB,EAURrgK,EAAOorG,kBAAqD,IAAlCuuB,EAAmBsV,WAI/CjvI,EAAOw1E,gBAAiD,IAAhCmkD,EAAmBgW,SAEtD0wB,GAAqB,EAERrgK,EAAOw1E,gBAAiD,IAAhCmkD,EAAmBgW,SAI7ChW,EAAmBvoB,SAAWA,IAIb,IAAjBlyH,EAASizH,KAAgBwnB,EAAmBxnB,MAAQA,EAF/DkuD,GAAqB,OAM+Bl9L,IAAzCw2J,EAAmBoS,mBAC5BpS,EAAmBoS,oBAAsB/uB,GAAS8b,WACpDa,EAAmBZ,kBAAoB/b,GAAS+b,iBAIrCY,EAAmB6V,eAAiBA,GAIpC7V,EAAmB4V,iBAAmBA,GAItC5V,EAAmByI,eAAiBA,GAIpCzI,EAAmBh3C,eAAiBA,GAIpCg3C,EAAmB/2C,cAAgBA,GAInC+2C,EAAmB3wF,cAAgBA,IAIT,IAA1Bm6E,EAAaC,UAAqBuW,EAAmBsI,oBAAsBA,KAtBtFo+B,GAAqB,GAJrBA,GAAqB,EAdrBA,GAAqB,EARrBA,GAAqB,GAwDtBA,GAAqB,EACrB1mC,EAAmB4tB,UAAYroK,EAASmrD,SAMzC,IAAIypF,EAAU6F,EAAmBumB,gBAEL,IAAvBmgB,IAEJvsC,EAAU0sC,GAAYthL,EAAU+xB,EAAOjR,IAIxC,IAAIygK,GAAiB,EACjBC,GAAkB,EAClBC,GAAgB,EAEdC,EAAa9sC,EAAQ+O,cAC1Bg+B,EAAalnC,EAAmB/pH,SAE5BzqC,EAAM09K,WAAY/uB,EAAQA,WAE9B2sC,GAAiB,EACjBC,GAAkB,EAClBC,GAAgB,GAIZzhL,EAAS/M,KAAO0qL,IAEpBA,EAAqB39K,EAAS/M,GAE9BuuL,GAAkB,GAInB,GAAKD,GAAkB3D,IAAmB/oJ,EAAS,CA2BlD,GAzBA6sJ,EAAW99B,SAAUwhB,GAAK,mBAAoBvwI,EAAO0J,kBAEhD0lG,EAAaoU,wBAEjBqpC,EAAW99B,SAAUwhB,GAAK,gBACzB,GAAQluK,KAAK0Q,IAAKitB,EAAOR,IAAM,GAAQn9B,KAAKwmE,MAIzCkgH,IAAmB/oJ,IAEvB+oJ,EAAiB/oJ,EAMjB2sJ,GAAkB,EAClBC,GAAgB,GAOZzhL,EAAS49H,kBACb59H,EAAS25K,qBACT35K,EAASy5K,oBACTz5K,EAASw0J,wBACTx0J,EAASkyH,OAAS,CAElB,IAAM0vD,EAAUF,EAAW1+J,IAAI6+J,oBAEd59L,IAAZ29L,GAEJA,EAAQh+B,SAAUwhB,GACjBuZ,EAAS9gJ,sBAAuBhJ,EAAOiJ,aAI1C,EAEK99B,EAAS25K,qBACb35K,EAASy5K,oBACTz5K,EAASw5K,uBACTx5K,EAASuzH,qBACTvzH,EAASw0J,wBACTx0J,EAAS49H,mBAET8jD,EAAW99B,SAAUwhB,GAAK,kBAAkD,IAAhCvwI,EAAO4T,uBAI/CzoC,EAAS25K,qBACb35K,EAASy5K,oBACTz5K,EAASw5K,uBACTx5K,EAASuzH,qBACTvzH,EAASw0J,wBACTx0J,EAAS49H,kBACT59H,EAAS46K,kBACT95J,EAAOw1E,gBAEPorF,EAAW99B,SAAUwhB,GAAK,aAAcvwI,EAAO4J,mBAIjD,CAMA,GAAK3d,EAAOw1E,cAAgB,CAE3BorF,EAAWI,YAAa1c,GAAKtkJ,EAAQ,cACrC4gK,EAAWI,YAAa1c,GAAKtkJ,EAAQ,qBAErC,IAAM0gF,EAAW1gF,EAAO0gF,SAEnBA,IAECyiC,EAAaiV,qBAEa,OAAzB13C,EAASugF,aAAuBvgF,EAASwgF,qBAE9CN,EAAW99B,SAAUwhB,GAAK,cAAe5jE,EAASugF,YAAav4F,GAC/Dk4F,EAAW99B,SAAUwhB,GAAK,kBAAmB5jE,EAASygF,kBAItDt8L,QAAQC,KAAM,2IAMjB,CAEA,IAAMm4G,EAAkBptE,EAASotE,sBAEC95G,IAA7B85G,EAAgBx1G,eAAqDtE,IAA3B85G,EAAgBj2F,aAAoD7jB,IAA1B85G,EAAgBpZ,QAAiD,IAA1Bs/C,EAAaC,WAE5I86C,GAAa7pJ,OAAQrU,EAAQ6P,EAAU3wB,EAAU40I,IAI7C4sC,GAAmB/mC,EAAmBtvB,gBAAkBrqG,EAAOqqG,iBAEnEsvB,EAAmBtvB,cAAgBrqG,EAAOqqG,cAC1Cu2D,EAAW99B,SAAUwhB,GAAK,gBAAiBtkJ,EAAOqqG,gBAM9CnrH,EAASkiL,uBAA6C,OAApBliL,EAASkyH,SAE/CyvD,EAAWzvD,OAAOvvI,MAAQuvI,EAE1ByvD,EAAWvzC,WAAWzrJ,MAAUuvI,EAAOniG,gBAAkD,IAAjCmiG,EAAO3Y,uBAAsC,EAAI,GAIrGioE,IAEJE,EAAW99B,SAAUwhB,GAAK,sBAAuB75K,EAAM8xL,qBAElD5iC,EAAmB2mC,cA+EwBz+L,EApEJ8+L,GAoEN/wJ,EApENixJ,GAsExBzyC,kBAAkB/rH,YAAcxgC,EACzC+tC,EAASy+G,WAAWhsH,YAAcxgC,EAElC+tC,EAAS0+G,kBAAkBjsH,YAAcxgC,EACzC+tC,EAAS4+G,wBAAwBnsH,YAAcxgC,EAC/C+tC,EAAS0/G,YAAYjtH,YAAcxgC,EACnC+tC,EAAS2/G,kBAAkBltH,YAAcxgC,EACzC+tC,EAASm/G,WAAW1sH,YAAcxgC,EAClC+tC,EAASs/G,iBAAiB7sH,YAAcxgC,EACxC+tC,EAASmgH,eAAe1tH,YAAcxgC,EACtC+tC,EAASggH,iBAAiBvtH,YAAcxgC,GA1ElCswI,IAAwB,IAAjBjzH,EAASizH,KAEpBv/E,GAAUwlI,mBAAoByI,EAAY1uD,GAI3Cv/E,GAAU2lI,wBAAyBsI,EAAY3hL,EAAUk+K,EAAaD,EAASQ,GAE/El0B,GAAc43B,OAAQ/c,GAAK3qB,EAAmB2nC,aAAcT,EAAYn4F,IAsD1E,IAAwC94D,EAAU/tC,EAlD5Cqd,EAAS49H,mBAAoD,IAAhC59H,EAASq+H,qBAE1CksB,GAAc43B,OAAQ/c,GAAK3qB,EAAmB2nC,aAAcT,EAAYn4F,GACxExpF,EAASq+H,oBAAqB,GAI1Br+H,EAAS06K,kBAEbgH,EAAW99B,SAAUwhB,GAAK,SAAUtkJ,EAAOgiF,QAY5C,GANA4+E,EAAW99B,SAAUwhB,GAAK,kBAAmBtkJ,EAAO8pG,iBACpD82D,EAAW99B,SAAUwhB,GAAK,eAAgBtkJ,EAAO+pG,cACjD62D,EAAW99B,SAAUwhB,GAAK,cAAetkJ,EAAOgd,aAI3C99B,EAAS49H,kBAAoB59H,EAAS6vJ,oBAI1C,IAFA,IAAMh5B,EAAS72H,EAAS69H,eAEdn3I,EAAI,EAAGwS,EAAI29H,EAAOxxI,OAAQqB,EAAIwS,EAAGxS,IAE1C,GAAKu9I,EAAaC,SAAW,CAE5B,IAAMlmC,EAAQ64B,EAAQnwI,GAEtBm3I,GAAe1oG,OAAQ6oE,EAAO42C,GAC9B/W,GAAe13I,KAAM63G,EAAO42C,EAE7B,MAECjvJ,QAAQC,KAAM,8EAQjB,OAAOgvJ,CAER,CA1mCiBytC,CAAYxtJ,EAAQ9C,EAAOpB,EAAU3wB,EAAU8gB,GAE/D76B,EAAM29K,YAAa5jK,EAAU6jK,GAI7B,IAAIn7K,EAAQioC,EAASjoC,MACfH,EAAWooC,EAAS+6D,WAAWnjG,SAIrC,GAAe,OAAVG,GAEJ,QAAkBzE,IAAbsE,GAA6C,IAAnBA,EAAS7C,MAAc,YAEhD,GAAqB,IAAhBgD,EAAMhD,MAEjB,OAMD,IAWIqoG,EAXAu0F,EAAc,GAEU,IAAvBtiL,EAAS6yH,YAEbnqI,EAAQ80G,GAAWqkD,sBAAuBlxH,GAC1C2xJ,EAAc,GAIfxuC,GAAcyB,MAAOz0H,EAAQ9gB,EAAU40I,EAASjkH,EAAUjoC,GAG1D,IAAImwC,EAAWomJ,GAEA,OAAVv2L,IAEJqlG,EAAYrC,GAAWpkG,IAAKoB,IAE5BmwC,EAAWqmJ,IACF9gG,SAAU2P,IAMpB,IAAMw0F,EAAwB,OAAV75L,EAAmBA,EAAMhD,MAAQ6C,EAAS7C,MAExD88L,EAAa7xJ,EAASmmG,UAAU1sI,MAAQk4L,EACxCG,EAAa9xJ,EAASmmG,UAAUpxI,MAAQ48L,EAExCjmD,EAAuB,OAAVr+B,EAAiBA,EAAM5zG,MAAQk4L,EAAc,EAC1DnlD,EAAuB,OAAVn/B,EAAiBA,EAAMt4G,MAAQ48L,EAAc5sL,IAE1DgtL,EAAYxrL,KAAKuC,IAAK+oL,EAAYnmD,GAClCsmD,EAAUzrL,KAAKsC,IAAK+oL,EAAWC,EAAaC,EAAYpmD,EAAac,GAAe,EAEpFylD,EAAY1rL,KAAKuC,IAAK,EAAGkpL,EAAUD,EAAY,GAErD,GAAmB,IAAdE,EAAL,CAIA,GAAK9hK,EAAOqgF,QAEiB,IAAvBnhG,EAAS6yH,WAEb5sI,EAAM69K,aAAc9jK,EAAS8yH,mBAAqBgsD,KAClDjmJ,EAAS4+G,QAAS,IAIlB5+G,EAAS4+G,QAAS,QAIb,GAAK32H,EAAOi6E,OAAS,CAE3B,IAAIgpE,EAAY/jK,EAAS0yH,eAENzuI,IAAd8/K,IAA0BA,EAAY,GAE3C99K,EAAM69K,aAAcC,EAAY+a,KAE3Bh+J,EAAO+hK,eAEXhqJ,EAAS4+G,QAAS,GAEP32H,EAAOgiK,WAElBjqJ,EAAS4+G,QAAS,GAIlB5+G,EAAS4+G,QAAS,EAIpB,MAAY32H,EAAO65E,SAElB9hE,EAAS4+G,QAAS,GAEP32H,EAAOiiK,UAElBlqJ,EAAS4+G,QAAS,GAInB,GAAK32H,EAAOorG,gBAEXrzF,EAAS8+G,gBAAiB+qC,EAAWE,EAAW9hK,EAAOp7B,YAEjD,GAAKirC,EAAS4lH,0BAA4B,CAEhD,IAAM+L,EAAgBprJ,KAAKsC,IAAKm3B,EAAS2xH,cAAe3xH,EAASimH,mBAEjE/9G,EAAS8+G,gBAAiB+qC,EAAWE,EAAWtgC,EAEjD,MAECzpH,EAASM,OAAQupJ,EAAWE,EA7DA,CAiE9B,EAIA9/L,KAAKo8J,QAAU,SAAWntH,EAAO8C,GAEhC,SAAShU,EAAS7gB,EAAU+xB,EAAOjR,IAEJ,IAAzB9gB,EAASk8F,aAAwBl8F,EAAS+wB,OAASC,GAEvDhxB,EAAS+wB,KAAO22E,EAChB1nG,EAASmjB,aAAc,EACvBm+J,GAAYthL,EAAU+xB,EAAOjR,GAE7B9gB,EAAS+wB,KAAOusE,EAChBt9F,EAASmjB,aAAc,EACvBm+J,GAAYthL,EAAU+xB,EAAOjR,GAE7B9gB,EAAS+wB,KAAOC,GAIhBswJ,GAAYthL,EAAU+xB,EAAOjR,EAI/B,EAEAm8J,EAAqBpiB,GAAavzK,IAAKyqC,IACpBlvC,OAEnBs6L,EAAiB/3L,KAAM63L,GAEvBlrJ,EAAM45F,iBAAiB,SAAW7qG,GAE5BA,EAAO2qG,SAAW3qG,EAAO2oG,OAAOrrH,KAAMy2B,EAAO40F,UAEjDwzD,EAAmBxiB,UAAW35I,GAEzBA,EAAOoqG,YAEX+xD,EAAmBviB,WAAY55I,GAMlC,IAEAm8J,EAAmB1iB,YAAahvK,EAAMulK,yBAEtC/+H,EAAM4hB,UAAU,SAAW7yB,GAE1B,IAAM9gB,EAAW8gB,EAAO9gB,SAExB,GAAKA,EAEJ,GAAKvZ,MAAM0sC,QAASnzB,GAEnB,IAAM,IAAItZ,EAAI,EAAGA,EAAIsZ,EAAS3a,OAAQqB,IAAO,CAI5Cm6B,EAFkB7gB,EAAUtZ,GAERqrC,EAAOjR,EAE5B,MAIAD,EAAS7gB,EAAU+xB,EAAOjR,EAM7B,IAEAq8J,EAAiBx0L,MACjBs0L,EAAqB,IAEtB,EAIA,IAAI5E,GAA2B,KAQ/B,SAAS4I,KAER30D,GAAUhuE,MAEX,CAEA,SAAS4iI,KAER50D,GAAUliI,OAEX,CAEA,IAAMkiI,GAAY,IAAIoX,GAqKtB,SAASs/C,GAAeliK,EAAQ+T,EAAQuhI,EAAYgnB,GAEnD,IAAwB,IAAnBt8J,EAAOye,QAAZ,CAIA,GAFgBze,EAAO2oG,OAAOrrH,KAAMy2B,EAAO40F,QAI1C,GAAK3oG,EAAOgrE,QAEXsqE,EAAat1I,EAAOsqG,iBAEd,GAAKtqG,EAAOmiK,OAES,IAAtBniK,EAAO+e,YAAsB/e,EAAOqU,OAAQN,QAE3C,GAAK/T,EAAO2qG,QAElBwxD,EAAmBxiB,UAAW35I,GAEzBA,EAAOoqG,YAEX+xD,EAAmBviB,WAAY55I,QAI1B,GAAKA,EAAOiiK,UAElB,IAAOjiK,EAAO8X,eAAiBgjI,EAASsnB,iBAAkBpiK,GAAW,CAE/Ds8J,GAEJuB,EAAS9gJ,sBAAuB/c,EAAOgd,aACrCE,aAAc0gJ,GAIjB,IAAM/tJ,EAAWwiB,GAAQhe,OAAQrU,GAC3B9gB,EAAW8gB,EAAO9gB,SAEnBA,EAASu/B,SAEby9I,EAAkB53L,KAAM07B,EAAQ6P,EAAU3wB,EAAUo2J,EAAYuoB,EAAS3sL,EAAG,KAI9E,OAEM,IAAK8uB,EAAOqgF,QAAUrgF,EAAOi6E,QAAUj6E,EAAO65E,YAE/C75E,EAAOw1E,eAINx1E,EAAO0gF,SAASlnG,QAAUk9I,EAAKr+G,OAAO7+B,QAE1CwmB,EAAO0gF,SAASrsE,SAChBrU,EAAO0gF,SAASlnG,MAAQk9I,EAAKr+G,OAAO7+B,QAM/BwmB,EAAO8X,eAAiBgjI,EAAS4B,iBAAkB18I,IAAW,CAE/Ds8J,GAEJuB,EAAS9gJ,sBAAuB/c,EAAOgd,aACrCE,aAAc0gJ,GAIjB,IAAM/tJ,EAAWwiB,GAAQhe,OAAQrU,GAC3B9gB,EAAW8gB,EAAO9gB,SAExB,GAAKvZ,MAAM0sC,QAASnzB,GAInB,IAFA,IAAM62H,EAASlmG,EAASkmG,OAEdnwI,EAAI,EAAGwS,EAAI29H,EAAOxxI,OAAQqB,EAAIwS,EAAGxS,IAAO,CAEjD,IAAMs3G,EAAQ64B,EAAQnwI,GAChB20I,EAAgBr7H,EAAUg+F,EAAM3X,eAEjCg1C,GAAiBA,EAAc97F,SAEnCy9I,EAAkB53L,KAAM07B,EAAQ6P,EAAU0qG,EAAe+6B,EAAYuoB,EAAS3sL,EAAGgsG,EAInF,MAEWh+F,EAASu/B,SAEpBy9I,EAAkB53L,KAAM07B,EAAQ6P,EAAU3wB,EAAUo2J,EAAYuoB,EAAS3sL,EAAG,KAI9E,CAQF,IAFA,IAAM60B,EAAW/F,EAAO+F,SAEdngC,EAAI,EAAGwS,EAAI2tB,EAASxhC,OAAQqB,EAAIwS,EAAGxS,IAE5Cs8L,GAAen8J,EAAUngC,GAAKmuC,EAAQuhI,EAAYgnB,EA1Gb,CA8GvC,CAEA,SAAS+F,GAAanG,EAAmBjrJ,EAAO8C,EAAQkpB,GAEvD,IAAMqlI,EAAgBpG,EAAkBjsB,OAClCsyB,EAAsBrG,EAAkBvmB,aACxC6sB,EAAqBtG,EAAkB9gF,YAE7C+gF,EAAmBziB,gBAAiB3lI,GAE/BwuJ,EAAoBh+L,OAAS,GAkBnC,SAAiC+9L,EAAerxJ,EAAO8C,GAEtD,IAAMqvG,EAAWD,EAAaC,SAEK,OAA9Bu6C,IAEJA,EAA4B,IAAI3mJ,GAAmB,EAAG,EAAG,CACxDxI,iBAAiB,EACjB3qC,KAAMuuC,EAAWomB,IAAK,+BAAkCluB,GAAgBq/E,GACxEt7E,UAAW8hE,GACXkqB,QAAW+oB,IAA2B,IAAfu4C,EAAwB,EAAI,KAKrDlxL,EAAMg1L,qBAAsBl/C,GAEvB6C,EAEJu6C,EAA0BvgI,QAASmjF,EAASvvI,EAAGuvI,EAAStvI,GAIxD0sL,EAA0BvgI,QAAS0yD,GAAiBywB,EAASvvI,GAAK8+G,GAAiBywB,EAAStvI,IAM7F,IAAMuuI,EAAsB/0I,EAAMg1I,kBAClCh1I,EAAM2tC,gBAAiBulJ,GACvBlzL,EAAMy0C,QAIN,IAAMwgG,EAAqBj1I,EAAMu+D,YACjCv+D,EAAMu+D,YAAc6/C,GAEpB45E,GAAeH,EAAerxJ,EAAO8C,GAErCtpC,EAAMu+D,YAAc02E,EAEpBh3C,EAAS0iF,8BAA+BuS,GACxCj1F,EAASyiF,yBAA0BwS,GAEnClzL,EAAM2tC,gBAAiBonG,EAExB,CAjEuCkjD,CAAwBJ,EAAerxJ,EAAO8C,GAE/EkpB,GAAW93D,EAAM83D,SAAU8/H,EAAiB92L,KAAMg3D,IAElDqlI,EAAc/9L,OAAS,GAAIk+L,GAAeH,EAAerxJ,EAAO8C,GAChEwuJ,EAAoBh+L,OAAS,GAAIk+L,GAAeF,EAAqBtxJ,EAAO8C,GAC5EyuJ,EAAmBj+L,OAAS,GAAIk+L,GAAeD,EAAoBvxJ,EAAO8C,GAI/E5uC,EAAMoH,QAAQsa,MAAMs2J,SAAS,GAC7Bh4K,EAAMoH,QAAQsa,MAAMm4B,SAAS,GAC7B75C,EAAMoH,QAAQs3F,MAAM7kD,SAAS,GAE7B75C,EAAMs9K,kBAAkB,EAEzB,CAmDA,SAASggB,GAAezwC,EAAY/gH,EAAO8C,GAI1C,IAFA,IAAMgqJ,GAAqC,IAAlB9sJ,EAAME,QAAmBF,EAAM8sJ,iBAAmB,KAEjEn4L,EAAI,EAAGwS,EAAI45I,EAAWztJ,OAAQqB,EAAIwS,EAAGxS,IAAO,CAErD,IAAMiwK,EAAa7jB,EAAYpsJ,GAEzBo6B,EAAS61I,EAAW71I,OACpB6P,EAAWgmI,EAAWhmI,SACtB3wB,EAAgC,OAArB6+K,EAA4BloB,EAAW32J,SAAW6+K,EAC7D7gF,EAAQ24D,EAAW34D,MAEpBl9E,EAAO2oG,OAAOrrH,KAAMy2B,EAAO40F,SAE/B6zC,GAAcx8I,EAAQiR,EAAO8C,EAAQlE,EAAU3wB,EAAUg+F,EAI3D,CAED,CAEA,SAASs/D,GAAcx8I,EAAQiR,EAAO8C,EAAQlE,EAAU3wB,EAAUg+F,GAEjEl9E,EAAOyyH,eAAgBhoJ,EAAOwmC,EAAO8C,EAAQlE,EAAU3wB,EAAUg+F,GAEjEl9E,EAAO8pG,gBAAgBxW,iBAAkBv/E,EAAO4J,mBAAoB3d,EAAOgd,aAC3Ehd,EAAO+pG,aAAakM,gBAAiBj2G,EAAO8pG,iBAE5C5qH,EAASuzI,eAAgBhoJ,EAAOwmC,EAAO8C,EAAQlE,EAAU7P,EAAQk9E,IAEnC,IAAzBh+F,EAASk8F,aAAwBl8F,EAAS+wB,OAASC,GAEvDhxB,EAAS+wB,KAAO22E,EAChB1nG,EAASmjB,aAAc,EACvB53B,EAAMuxK,mBAAoBjoI,EAAQ9C,EAAOpB,EAAU3wB,EAAU8gB,EAAQk9E,GAErEh+F,EAAS+wB,KAAOusE,EAChBt9F,EAASmjB,aAAc,EACvB53B,EAAMuxK,mBAAoBjoI,EAAQ9C,EAAOpB,EAAU3wB,EAAU8gB,EAAQk9E,GAErEh+F,EAAS+wB,KAAOC,GAIhBzlC,EAAMuxK,mBAAoBjoI,EAAQ9C,EAAOpB,EAAU3wB,EAAU8gB,EAAQk9E,GAItEl9E,EAAO2iK,cAAel4L,EAAOwmC,EAAO8C,EAAQlE,EAAU3wB,EAAUg+F,EAEjE,CAEA,SAASsjF,GAAYthL,EAAU+xB,EAAOjR,IAEd,IAAlBiR,EAAME,UAAmBF,EAAQ6sJ,GAEtC,IAAMnkC,EAAqBpL,EAAW/nJ,IAAK0Y,GAErC0kF,EAASu4F,EAAmBh3L,MAAMy+F,OAClC41E,EAAe2iB,EAAmBh3L,MAAMq0K,aAExC+mB,EAAqB38F,EAAOz+F,MAAMklE,QAElC7xB,EAAaylJ,GAAaxqB,cAAev0J,EAAU0kF,EAAOz+F,MAAOq0K,EAAcvoI,EAAOjR,GACtF4iK,EAAkB3E,GAAaxpB,mBAAoBj8H,GAErD8oH,EAAW3H,EAAmB2H,SAIlC3H,EAAmBhoH,YAAczyB,EAASw0J,uBAAyBziI,EAAMU,YAAc,KACvFgoH,EAAmBxnB,IAAMlhG,EAAMkhG,IAC/BwnB,EAAmBvoB,QAAWlyH,EAASw0J,uBAAyBf,EAAaxhB,GAAW3qJ,IAAK0Y,EAASkyH,QAAUuoB,EAAmBhoH,kBAEjHxuC,IAAbm+J,IAIJpiJ,EAAShZ,iBAAkB,UAAW+4L,IAEtC39B,EAAW,IAAIvmG,IACf4+F,EAAmB2H,SAAWA,GAI/B,IAAIxN,EAAUwN,EAAS96J,IAAKo8L,GAE5B,QAAiBz/L,IAAZ2wJ,GAIJ,GAAK6F,EAAmBumB,iBAAmBpsB,GAAW6F,EAAmB4mC,qBAAuBA,EAI/F,OAFAsC,GAAgC3jL,EAAUs5B,GAEnCs7G,OAMRt7G,EAAW5I,SAAWquJ,GAAap7B,YAAa3jJ,GAEhDA,EAAS4jL,QAAS9iK,EAAQwY,EAAY/tC,GAEtCyU,EAASswH,gBAAiBh3F,EAAY/tC,GAEtCqpJ,EAAUmqC,GAAalpB,eAAgBv8H,EAAYoqJ,GACnDthC,EAAS76J,IAAKm8L,EAAiB9uC,GAE/B6F,EAAmB/pH,SAAW4I,EAAW5I,SAI1C,IAAMA,EAAW+pH,EAAmB/pH,UAE3B1wB,EAAS49H,kBAAsB59H,EAAS6vJ,uBAA+C,IAAtB7vJ,EAAS89H,WAElFptG,EAASg/F,eAAiBoO,GAAS4b,SAIpCiqC,GAAgC3jL,EAAUs5B,GAI1CmhH,EAAmB2mC,YAsbpB,SAA8BphL,GAE7B,OAAOA,EAASw5K,uBAAyBx5K,EAASy5K,oBAAsBz5K,EAAS25K,qBAChF35K,EAASw0J,wBAA0Bx0J,EAAS46K,kBAC1C56K,EAAS49H,mBAAwC,IAApB59H,EAAS0kF,MAE1C,CA5bkCm/F,CAAqB7jL,GACtDy6I,EAAmB4mC,mBAAqBA,EAEnC5mC,EAAmB2mC,cAIvB1wJ,EAASw+G,kBAAkBvsJ,MAAQ+hG,EAAOz+F,MAAMsyK,QAChD7nI,EAASy+G,WAAWxsJ,MAAQ+hG,EAAOz+F,MAAMuyK,MACzC9nI,EAAS0+G,kBAAkBzsJ,MAAQ+hG,EAAOz+F,MAAMkvK,YAChDzkI,EAAS4+G,wBAAwB3sJ,MAAQ+hG,EAAOz+F,MAAMwyK,kBACtD/nI,EAASm/G,WAAWltJ,MAAQ+hG,EAAOz+F,MAAMg/F,KACzCv0D,EAASs/G,iBAAiBrtJ,MAAQ+hG,EAAOz+F,MAAMyyK,WAC/ChoI,EAASmgH,eAAeluJ,MAAQ+hG,EAAOz+F,MAAMmvK,SAC7C1kI,EAASogH,MAAMnuJ,MAAQ+hG,EAAOz+F,MAAM0yK,aACpCjoI,EAASqgH,MAAMpuJ,MAAQ+hG,EAAOz+F,MAAM2yK,aACpCloI,EAAS0/G,YAAYztJ,MAAQ+hG,EAAOz+F,MAAM4hB,MAC1C6oB,EAAS2/G,kBAAkB1tJ,MAAQ+hG,EAAOz+F,MAAM4yK,YAChDnoI,EAASggH,iBAAiB/tJ,MAAQ+hG,EAAOz+F,MAAMovK,KAE/C3kI,EAASi/G,qBAAqBhtJ,MAAQ+hG,EAAOz+F,MAAM0pJ,qBACnDj/G,EAASk/G,wBAAwBjtJ,MAAQ+hG,EAAOz+F,MAAM2pJ,wBACtDl/G,EAASw/G,cAAcvtJ,MAAQ+hG,EAAOz+F,MAAMiqJ,cAC5Cx/G,EAASy/G,gBAAgBxtJ,MAAQ+hG,EAAOz+F,MAAMkqJ,gBAC9Cz/G,EAASu/G,aAAattJ,MAAQ+hG,EAAOz+F,MAAMgqJ,aAC3Cv/G,EAAS8/G,eAAe7tJ,MAAQ+hG,EAAOz+F,MAAMuqJ,eAC7C9/G,EAAS+/G,kBAAkB9tJ,MAAQ+hG,EAAOz+F,MAAMwqJ,mBAKjD,IAAMqzC,EAAelvC,EAAQ+O,cACvBy+B,EAAe73B,GAAcw5B,aAAcD,EAAaj6B,IAAKn5H,GAKnE,OAHA+pH,EAAmBumB,eAAiBpsB,EACpC6F,EAAmB2nC,aAAeA,EAE3BxtC,CAER,CAEA,SAAS+uC,GAAgC3jL,EAAUs5B,GAElD,IAAMmhH,EAAqBpL,EAAW/nJ,IAAK0Y,GAE3Cy6I,EAAmBziH,eAAiBsB,EAAWtB,eAC/CyiH,EAAmBsV,WAAaz2H,EAAWy2H,WAC3CtV,EAAmBgW,SAAWn3H,EAAWm3H,SACzChW,EAAmByI,aAAe5pH,EAAW4pH,aAC7CzI,EAAmBh3C,aAAenqE,EAAWmqE,aAC7Cg3C,EAAmB/2C,YAAcpqE,EAAWoqE,YAC5C+2C,EAAmBsI,kBAAoBzpH,EAAWypH,kBAClDtI,EAAmBoS,kBAAoBvzH,EAAWuzH,kBAClDpS,EAAmBZ,gBAAkBvgH,EAAWwzH,oBAChDrS,EAAmB6V,aAAeh3H,EAAWg3H,aAC7C7V,EAAmB4V,eAAiB/2H,EAAW+2H,eAC/C5V,EAAmB3wF,YAAcxwB,EAAWwwB,WAE7C,CA3hBAwiE,GAAU5iE,kBAnBV,SAA2Bp6C,GAErB+oK,IAA2BA,GAA0B/oK,EAE3D,IAiBqB,qBAATu3C,MAAuBylE,GAAUyX,WAAYl9E,MAEzD/jE,KAAK4mE,iBAAmB,SAAW59C,GAElCusK,GAA2BvsK,EAC3B2zB,GAAGiqB,iBAAkB59C,GAEN,OAAbA,EAAsBwgH,GAAUhuE,OAASguE,GAAUliI,OAEtD,EAEAq1C,GAAGz4C,iBAAkB,eAAgBi6L,IACrCxhJ,GAAGz4C,iBAAkB,aAAck6L,IAInCp+L,KAAKq2C,OAAS,SAAWpH,EAAO8C,GAE/B,QAAgB5wC,IAAX4wC,IAA4C,IAApBA,EAAO00B,UAOpC,IAAwB,IAAnBg0H,EAAL,EAIqC,IAAhCxrJ,EAAMi5F,uBAAiCj5F,EAAMuM,oBAI3B,OAAlBzJ,EAAO8I,SAAoD,IAAjC9I,EAAOm2F,uBAAiCn2F,EAAOyJ,qBAE1D,IAAfmB,GAAGC,UAAwC,IAApBD,GAAGmhB,gBAED,IAAxBnhB,GAAG00I,kBAA4B10I,GAAGkY,aAAc9iB,GAErDA,EAAS4K,GAAGw4I,cAKU,IAAlBlmJ,EAAME,SAAmBF,EAAMwhH,eAAgBhoJ,EAAOwmC,EAAO8C,EAAQ6oJ,IAE1ET,EAAqBpiB,GAAavzK,IAAKyqC,EAAOorJ,EAAiB93L,SAC5CxC,OAEnBs6L,EAAiB/3L,KAAM63L,GAEvByB,EAAkBtqE,iBAAkBv/E,EAAO0J,iBAAkB1J,EAAO4J,oBACpEm9H,EAASooB,wBAAyBtF,GAElCF,EAAwB17L,KAAKy2J,qBAC7BglC,EAAmBzgD,GAASj7I,KAAMC,KAAK4sI,eAAgB8uD,EAAuB3pJ,IAE9EmoJ,EAAoBzyH,GAAYjjE,IAAKyqC,EAAOmrJ,EAAgB73L,SAC1CxC,OAElBq6L,EAAgB93L,KAAM43L,GAEtBgG,GAAejxJ,EAAO8C,EAAQ,EAAGtpC,EAAM6xL,aAEvCJ,EAAkBpmB,UAES,IAAtBrrK,EAAM6xL,aAEVJ,EAAkB5iI,KAAM+jI,EAAaC,IAMZ,IAArBG,GAA4BzgD,GAASwc,eAE1C,IAAMggB,EAAe2iB,EAAmBh3L,MAAMq0K,aAkB9C,GAhBA16H,GAAUzG,OAAQmhI,EAAcvoI,EAAO8C,IAEb,IAArB0pJ,GAA4BzgD,GAASyc,cAIb,IAAxBz3J,KAAK00J,KAAK6K,WAAqBv/J,KAAK00J,KAAKtiI,QAI9Ckd,GAAW+G,OAAQ6jJ,EAAmBjrJ,GAItCkrJ,EAAmB1iB,YAAahvK,EAAMulK,yBAEjCj8H,EAAOm7I,cAIX,IAFA,IAAMp6E,EAAU/gE,EAAO+gE,QAEblvG,EAAI,EAAGwS,EAAI08F,EAAQvwG,OAAQqB,EAAIwS,EAAGxS,IAAO,CAElD,IAAMu9L,EAAUruF,EAASlvG,GAEzBy8L,GAAanG,EAAmBjrJ,EAAOkyJ,EAASA,EAAQlmI,SAEzD,MAIAolI,GAAanG,EAAmBjrJ,EAAO8C,GAMV,OAAzB6oJ,IAIJl0F,EAAS0iF,8BAA+BwR,GAIxCl0F,EAASyiF,yBAA0ByR,KAMb,IAAlB3rJ,EAAME,SAAmBF,EAAM0xJ,cAAel4L,EAAOwmC,EAAO8C,GAIjEi/G,GAAcwB,oBACdqoC,GAAuB,EACvBC,EAAiB,KAEjBT,EAAiBx0L,MAIhBs0L,EAFIE,EAAiB93L,OAAS,EAET83L,EAAkBA,EAAiB93L,OAAS,GAI5C,KAItB63L,EAAgBv0L,MAIfq0L,EAFIE,EAAgB73L,OAAS,EAET63L,EAAiBA,EAAgB73L,OAAS,GAI1C,IAnIgB,OALpCM,QAAQkC,MAAO,yEA4IjB,EA6vBA/E,KAAK86K,kBAAoB,WAExB,OAAO4f,CAER,EAEA16L,KAAKg7K,qBAAuB,WAE3B,OAAO2f,CAER,EAEA36L,KAAKy9I,gBAAkB,WAEtB,OAAOm9C,CAER,EAEA56L,KAAK81L,wBAA0B,SAAW/4C,EAAc+rC,EAAc7yI,GAErEs2G,EAAW/nJ,IAAKu4I,EAAa9wG,SAAUy4I,eAAiBoE,EACxDv8B,EAAW/nJ,IAAKu4I,EAAa9mG,cAAeyuI,eAAiBzuI,EAE7D,IAAMwuI,EAAyBl4B,EAAW/nJ,IAAKu4I,GAC/C0nC,EAAuByC,uBAAwB,EAE1CzC,EAAuByC,wBAE3BzC,EAAuBwD,+BAA6C9mL,IAAjB80C,EAE5CwuI,EAAuBwD,4BAIqC,IAA7D73I,EAAWomB,IAAK,0CAEpB3zD,QAAQC,KAAM,0GACd2hL,EAAuB4D,sBAAuB,GAQlD,EAEAroL,KAAK01L,2BAA6B,SAAW34C,EAAcqkD,GAE1D,IAAM3c,EAAyBl4B,EAAW/nJ,IAAKu4I,GAC/C0nC,EAAuBG,mBAAqBwc,EAC5C3c,EAAuB4c,6BAAiDlgM,IAAvBigM,CAElD,EAEAphM,KAAKo2C,gBAAkB,SAAW2mG,GAA0D,IAA5C89B,EAAcj6K,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGm6K,EAAiBn6K,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAEvFg6L,EAAuB79C,EACvB29C,EAAyB7f,EACzB8f,EAA4B5f,EAE5B,IAAIumB,GAAwB,EAE5B,GAAKvkD,EAAe,CAEnB,IAAM0nC,EAAyBl4B,EAAW/nJ,IAAKu4I,QAES57I,IAAnDsjL,EAAuB4c,yBAG3Bl+L,EAAMu9K,gBAAiB,MAAO,MAC9B4gB,GAAwB,QAEiCngM,IAA9CsjL,EAAuBG,mBAElCl+E,EAASqiF,kBAAmBhsC,GAEjB0nC,EAAuByC,uBAGlCxgF,EAASmiF,eAAgB9rC,EAAcwP,EAAW/nJ,IAAKu4I,EAAa9wG,SAAUy4I,eAAgBn4B,EAAW/nJ,IAAKu4I,EAAa9mG,cAAeyuI,eAI5I,CAEA,IAAI/D,EAAc,KACdqH,GAAS,EACTuZ,GAAmB,EAEvB,GAAKxkD,EAAe,CAEnB,IAAM9wG,EAAU8wG,EAAa9wG,SAExBA,EAAQgtF,iBAAmBhtF,EAAQusF,sBAEvC+oE,GAAmB,GAIpB,IAAM3c,EAAqBr4B,EAAW/nJ,IAAKu4I,GAAe6nC,mBAErD7nC,EAAamB,yBAEjByiC,EAAciE,EAAoB/J,GAClCmN,GAAS,GAITrH,EAFax/B,EAAaC,UAAYrE,EAAa1kB,QAAU,IAAuD,IAAhD3xB,EAASygF,mBAAoBpqC,GAEnFwP,EAAW/nJ,IAAKu4I,GAAegoC,+BAI/BH,EAIfmW,EAAiB92L,KAAM84I,EAAa9hF,UACpC+/H,EAAgB/2L,KAAM84I,EAAa5kB,SACnC8iE,EAAsBl+C,EAAa3kB,WAEpC,MAEC2iE,EAAiB92L,KAAMg1K,GAAY3kI,eAAgB8mJ,GAAc/tJ,QACjE2tJ,EAAgB/2L,KAAMs3L,GAAWjnJ,eAAgB8mJ,GAAc/tJ,QAC/D4tJ,EAAsBO,EAgBvB,GAZyBr4L,EAAMu9K,gBAAiB,MAAOC,IAE9Bx/B,EAAahG,aAAemmD,GAEpDn+L,EAAMg4I,YAAa4B,EAAc4jC,GAIlCx9K,EAAM83D,SAAU8/H,GAChB53L,EAAMg1H,QAAS6iE,GACf73L,EAAMi4K,eAAgB6f,GAEjBjT,EAAS,CAEb,IAAM9D,EAAoB33B,EAAW/nJ,IAAKu4I,EAAa9wG,SACvDq2I,GAAIgF,qBAAsB,MAAO,MAAO,MAAQzM,EAAgBqJ,EAAkBQ,eAAgB3J,EAEnG,MAAO,GAAKwmB,EAAmB,CAE9B,IAAMrd,EAAoB33B,EAAW/nJ,IAAKu4I,EAAa9wG,SACjDu1J,EAAQ3mB,GAAkB,EAChCyH,GAAImf,wBAAyB,MAAO,MAAOvd,EAAkBQ,eAAgB3J,GAAqB,EAAGymB,EAEtG,CAEA3G,GAAuB,CAExB,EAEA76L,KAAK0hM,uBAAyB,SAAW3kD,EAAc/tI,EAAGC,EAAGu7B,EAAOC,EAAQrjC,EAAQu6L,GAEnF,GAAS5kD,GAAgBA,EAAa7kB,oBAAtC,CAOA,IAAIyoD,EAAcp0B,EAAW/nJ,IAAKu4I,GAAe6nC,mBAQjD,GANK7nC,EAAamB,8BAAmD/8I,IAAxBwgM,IAE5ChhB,EAAcA,EAAaghB,IAIvBhhB,EAAc,CAElBx9K,EAAMu9K,gBAAiB,MAAOC,GAE9B,IAEC,IAAM10I,EAAU8wG,EAAa9wG,QACvB21J,EAAgB31J,EAAQ5B,OACxBw7I,EAAc55I,EAAQpqC,KAE5B,GAAK+/L,IAAkBv5E,IAAck6D,GAAMzvD,QAAS8uE,KAAoBtf,GAAIxxB,aAAc,OAGzF,YADAjuJ,QAAQkC,MAAO,6GAKhB,IAAM88L,EAA4Bhc,IAAgBv9I,KAAqB8H,EAAWomB,IAAK,gCAAqC2qF,EAAaC,UAAYhxG,EAAWomB,IAAK,2BAErK,GAAKqvH,IAAgBl+D,IAAoB46D,GAAMzvD,QAAS+yD,KAAkBvD,GAAIxxB,aAAc,SACvF+0B,IAAgBp6I,MAAe01G,EAAaC,UAAYhxG,EAAWomB,IAAK,sBAAyBpmB,EAAWomB,IAAK,gCACnHqrI,EAGF,YADAh/L,QAAQkC,MAAO,uHAOTiK,GAAK,GAAKA,GAAO+tI,EAAavyG,MAAQA,GAAev7B,GAAK,GAAKA,GAAO8tI,EAAatyG,OAASA,GAElG63I,GAAIwf,WAAY9yL,EAAGC,EAAGu7B,EAAOC,EAAQ83I,GAAMzvD,QAAS8uE,GAAiBrf,GAAMzvD,QAAS+yD,GAAez+K,EAIrG,CAAE,QAID,IAAMu5K,EAAyC,OAAzBia,EAAkCruC,EAAW/nJ,IAAKo2L,GAAuBhW,mBAAqB,KACpHzhL,EAAMu9K,gBAAiB,MAAOC,EAE/B,CAED,CAvDA,MAHC99K,QAAQkC,MAAO,2FA4DjB,EAEA/E,KAAK+hM,yBAA2B,SAAWt8L,EAAUwmC,GAAqB,IAAZ+1J,EAAKphM,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAE/DqhM,EAAa7tL,KAAK0F,IAAK,GAAKkoL,GAC5Bx3J,EAAQp2B,KAAKi5B,MAAOpB,EAAQkB,MAAM3C,MAAQy3J,GAC1Cx3J,EAASr2B,KAAKi5B,MAAOpB,EAAQkB,MAAM1C,OAASw3J,GAElDv7F,EAASi+D,aAAc14H,EAAS,GAEhCq2I,GAAI4f,kBAAmB,KAAMF,EAAO,EAAG,EAAGv8L,EAASuJ,EAAGvJ,EAASwJ,EAAGu7B,EAAOC,GAEzEtnC,EAAMo+K,eAEP,EAEAvhL,KAAKmiM,qBAAuB,SAAW18L,EAAU28L,EAAYC,GAAwB,IAAZL,EAAKphM,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAE1E4pC,EAAQ43J,EAAWj1J,MAAM3C,MACzBC,EAAS23J,EAAWj1J,MAAM1C,OAC1Bk5I,EAAWpB,GAAMzvD,QAASuvE,EAAWh4J,QACrCu5I,EAASrB,GAAMzvD,QAASuvE,EAAWxgM,MAEzC6kG,EAASi+D,aAAc09B,EAAY,GAInC/f,GAAIgE,YAAa,MAAO+b,EAAW51J,OACnC61I,GAAIgE,YAAa,MAAO+b,EAAW9rE,kBACnC+rD,GAAIgE,YAAa,KAAM+b,EAAW7rE,iBAE7B4rE,EAAWtsE,cAEfwsD,GAAIJ,cAAe,KAAM8f,EAAOv8L,EAASuJ,EAAGvJ,EAASwJ,EAAGu7B,EAAOC,EAAQk5I,EAAUC,EAAQwe,EAAWj1J,MAAMxgC,MAIrGy1L,EAAWpe,oBAEf1B,GAAIF,wBAAyB,KAAM4f,EAAOv8L,EAASuJ,EAAGvJ,EAASwJ,EAAGmzL,EAAW/rE,QAAS,GAAI7rF,MAAO43J,EAAW/rE,QAAS,GAAI5rF,OAAQk5I,EAAUye,EAAW/rE,QAAS,GAAI1pH,MAInK21K,GAAIJ,cAAe,KAAM8f,EAAOv8L,EAASuJ,EAAGvJ,EAASwJ,EAAG00K,EAAUC,EAAQwe,EAAWj1J,OAOxE,IAAV60J,GAAeK,EAAW71J,iBAAkB81I,GAAIkB,eAAgB,MAErErgL,EAAMo+K,eAEP,EAEAvhL,KAAKsiM,uBAAyB,SAAWC,EAAW98L,EAAU28L,EAAYC,GAAwB,IAAZL,EAAKphM,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAE7F,GAAK6H,EAAMk0L,iBAEV95L,QAAQC,KAAM,iFAFf,CAOA,IAKI0/L,EALEh4J,EAAQ+3J,EAAU5rL,IAAI3H,EAAIuzL,EAAU7rL,IAAI1H,EAAI,EAC5Cy7B,EAAS83J,EAAU5rL,IAAI1H,EAAIszL,EAAU7rL,IAAIzH,EAAI,EAC7C4V,EAAQ09K,EAAU5rL,IAAIzH,EAAIqzL,EAAU7rL,IAAIxH,EAAI,EAC5Cy0K,EAAWpB,GAAMzvD,QAASuvE,EAAWh4J,QACrCu5I,EAASrB,GAAMzvD,QAASuvE,EAAWxgM,MAGzC,GAAKwgM,EAAWppE,gBAEfvyB,EAASm+D,aAAcw9B,EAAY,GACnCG,EAAW,UAEL,KAAKH,EAAW7pE,mBAQtB,YADA31H,QAAQC,KAAM,+GALd4jG,EAASu+D,kBAAmBo9B,EAAY,GACxCG,EAAW,KAOZ,CAEAlgB,GAAIgE,YAAa,MAAO+b,EAAW51J,OACnC61I,GAAIgE,YAAa,MAAO+b,EAAW9rE,kBACnC+rD,GAAIgE,YAAa,KAAM+b,EAAW7rE,iBAElC,IAAMisE,EAAengB,GAAIxxB,aAAc,MACjC4xC,EAAoBpgB,GAAIxxB,aAAc,OACtC6xC,EAAmBrgB,GAAIxxB,aAAc,MACrC8xC,EAAiBtgB,GAAIxxB,aAAc,MACnC+xC,EAAmBvgB,GAAIxxB,aAAc,OAErC3jH,EAAQi1J,EAAWpe,oBAAsBoe,EAAW/rE,QAAS,GAAM+rE,EAAWj1J,MAEpFm1I,GAAIgE,YAAa,KAAMn5I,EAAM3C,OAC7B83I,GAAIgE,YAAa,MAAOn5I,EAAM1C,QAC9B63I,GAAIgE,YAAa,KAAMic,EAAU7rL,IAAI1H,GACrCszK,GAAIgE,YAAa,KAAMic,EAAU7rL,IAAIzH,GACrCqzK,GAAIgE,YAAa,MAAOic,EAAU7rL,IAAIxH,GAEjCkzL,EAAWtsE,eAAiBssE,EAAWnpE,gBAE3CqpD,GAAIH,cAAeqgB,EAAUR,EAAOv8L,EAASuJ,EAAGvJ,EAASwJ,EAAGxJ,EAASyJ,EAAGs7B,EAAOC,EAAQ5lB,EAAO8+J,EAAUC,EAAQz2I,EAAMxgC,MAIjHy1L,EAAWpe,qBAEfnhL,QAAQC,KAAM,2FACdw/K,GAAIwgB,wBAAyBN,EAAUR,EAAOv8L,EAASuJ,EAAGvJ,EAASwJ,EAAGxJ,EAASyJ,EAAGs7B,EAAOC,EAAQ5lB,EAAO8+J,EAAUx2I,EAAMxgC,OAIxH21K,GAAIH,cAAeqgB,EAAUR,EAAOv8L,EAASuJ,EAAGvJ,EAASwJ,EAAGxJ,EAASyJ,EAAGs7B,EAAOC,EAAQ5lB,EAAO8+J,EAAUC,EAAQz2I,GAMlHm1I,GAAIgE,YAAa,KAAMmc,GACvBngB,GAAIgE,YAAa,MAAOoc,GACxBpgB,GAAIgE,YAAa,KAAMqc,GACvBrgB,GAAIgE,YAAa,KAAMsc,GACvBtgB,GAAIgE,YAAa,MAAOuc,GAGT,IAAVb,GAAeK,EAAW71J,iBAAkB81I,GAAIkB,eAAgBgf,GAErEr/L,EAAMo+K,eAxEN,CA0ED,EAEAvhL,KAAKimL,YAAc,SAAWh6I,GAExBA,EAAQgB,cAEZy5D,EAASq+D,eAAgB94H,EAAS,GAEvBA,EAAQgtF,gBAEnBvyB,EAASm+D,aAAc54H,EAAS,GAErBA,EAAQusF,mBAEnB9xB,EAASu+D,kBAAmBh5H,EAAS,GAIrCy6D,EAASi+D,aAAc14H,EAAS,GAIjC9oC,EAAMo+K,eAEP,EAEAvhL,KAAK+iM,WAAa,WAEjBrI,EAAyB,EACzBC,EAA4B,EAC5BC,EAAuB,KAEvBz3L,EAAMivB,QACN4+H,GAAc5+H,OAEf,EAEmC,qBAAvB4wK,oBAEXA,mBAAmB12K,cAAe,IAAI22K,YAAa,UAAW,CAAEC,OAAQljM,OAI1E,CAAC,IAEKmjM,GAAc,SAAAC,IAAA/6L,EAAAA,EAAAA,GAAA86L,EAAAC,GAAA,IAAAC,GAAA96L,EAAAA,EAAAA,GAAA46L,GAAA,SAAAA,IAAA,OAAAz6L,EAAAA,EAAAA,GAAA,KAAAy6L,GAAAE,EAAAvkM,MAAA,KAAA8B,UAAA,QAAA+J,EAAAA,EAAAA,GAAAw4L,EAAA,EAAS9J,IAE7B8J,GAAehkM,UAAUw9L,kBAAmB,EAAK,IA2oB7C2G,GAzoBEC,GAAO,WAEZ,SAAAA,EAAa1hG,GAA2B,IAApBy0F,EAAO11L,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,OAAO8H,EAAAA,EAAAA,GAAA,KAAA66L,GAEpCvjM,KAAKoyK,WAAY,EAEjBpyK,KAAKG,KAAO,GAEZH,KAAK6hG,MAAQ,IAAIC,GAAOD,GACxB7hG,KAAKs2L,QAAUA,CAEhB,CAgBC,OAhBA3rL,EAAAA,EAAAA,GAAA44L,EAAA,EAAAt9L,IAAA,QAAApG,MAED,WAEC,OAAO,IAAI0jM,EAASvjM,KAAK6hG,MAAO7hG,KAAKs2L,QAEtC,GAAC,CAAArwL,IAAA,SAAApG,MAED,WAEC,MAAO,CACNgC,KAAM,UACNggG,MAAO7hG,KAAK6hG,MAAMyyB,SAClBgiE,QAASt2L,KAAKs2L,QAGhB,KAACiN,CAAA,CA3BW,GA+BPC,GAAG,WAER,SAAAA,EAAa3hG,GAA8B,IAAvBxwD,EAAIzwC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAG2wC,EAAG3wC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,KAAI8H,EAAAA,EAAAA,GAAA,KAAA86L,GAEvCxjM,KAAKq2L,OAAQ,EAEbr2L,KAAKG,KAAO,GAEZH,KAAK6hG,MAAQ,IAAIC,GAAOD,GAExB7hG,KAAKqxC,KAAOA,EACZrxC,KAAKuxC,IAAMA,CAEZ,CAiBC,OAjBA5mC,EAAAA,EAAAA,GAAA64L,EAAA,EAAAv9L,IAAA,QAAApG,MAED,WAEC,OAAO,IAAI2jM,EAAKxjM,KAAK6hG,MAAO7hG,KAAKqxC,KAAMrxC,KAAKuxC,IAE7C,GAAC,CAAAtrC,IAAA,SAAApG,MAED,WAEC,MAAO,CACNgC,KAAM,MACNggG,MAAO7hG,KAAK6hG,MAAMyyB,SAClBjjF,KAAMrxC,KAAKqxC,KACXE,IAAKvxC,KAAKuxC,IAGZ,KAACiyJ,CAAA,CA9BO,GAkCHvxJ,GAAK,SAAAwxJ,IAAAp7L,EAAAA,EAAAA,GAAA4pC,EAAAwxJ,GAAA,IAAAC,GAAAn7L,EAAAA,EAAAA,GAAA0pC,GAEV,SAAAA,IAAc,IAAA0xJ,EAkBZ,OAlBYj7L,EAAAA,EAAAA,GAAA,KAAAupC,IAEb0xJ,EAAAD,EAAAtkM,KAAA,OAEK+vC,SAAU,EAEfw0J,EAAK9hM,KAAO,QAEZ8hM,EAAKr0J,WAAa,KAClBq0J,EAAKh0J,YAAc,KACnBg0J,EAAKxzD,IAAM,KAEXwzD,EAAK5H,iBAAmB,KAEW,qBAAvBiH,oBAEXA,mBAAmB12K,cAAe,IAAI22K,YAAa,UAAW,CAAEC,QAAMnlJ,EAAAA,EAAAA,GAAA4lJ,MAEtEA,CAEF,CA0CC,OA1CAh5L,EAAAA,EAAAA,GAAAsnC,EAAA,EAAAhsC,IAAA,OAAApG,MAED,SAAM8G,EAAQ+iI,GAYb,OAVA39F,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAiG,EAAA9yC,WAAA,aAAAC,KAAA,KAAYuH,EAAQ+iI,GAEO,OAAtB/iI,EAAO2oC,aAAsBtvC,KAAKsvC,WAAa3oC,EAAO2oC,WAAWlvB,SAC1C,OAAvBzZ,EAAOgpC,cAAuB3vC,KAAK2vC,YAAchpC,EAAOgpC,YAAYvvB,SACrD,OAAfzZ,EAAOwpI,MAAenwI,KAAKmwI,IAAMxpI,EAAOwpI,IAAI/vH,SAEhB,OAA5BzZ,EAAOo1L,mBAA4B/7L,KAAK+7L,iBAAmBp1L,EAAOo1L,iBAAiB37K,SAExFpgB,KAAKyjC,iBAAmB98B,EAAO88B,iBAExBzjC,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQ+1H,GAEP,IAAMjpH,GAAIo/B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAiG,EAAA9yC,WAAA,eAAAC,KAAA,KAAiBw2H,GAI3B,OAFkB,OAAb51H,KAAKmwI,MAAexjI,EAAKqxB,OAAOmyG,IAAMnwI,KAAKmwI,IAAIpZ,UAE7CpqH,CAER,GAEA,CAAA1G,IAAA,aAAAzB,IAEA,WAGC,OADA3B,QAAQC,KAAM,yEACP9C,KAAKkoI,qBAEb,EAACzjI,IAED,SAAgB5E,GAEfgD,QAAQC,KAAM,yEACd9C,KAAKkoI,sBAAwBroI,CAE9B,KAACoyC,CAAA,CAhES,CAASzV,IAoEdg5E,GAAiB,WAEtB,SAAAA,EAAap2C,EAAO0oC,IAASp/F,EAAAA,EAAAA,GAAA,KAAA8sG,GAE5Bx1G,KAAK4jM,qBAAsB,EAE3B5jM,KAAKo/D,MAAQA,EACbp/D,KAAK8nG,OAASA,EACd9nG,KAAK4C,WAAkBzB,IAAVi+D,EAAsBA,EAAM78D,OAASulG,EAAS,EAE3D9nG,KAAK6wI,MAAQrkB,GACbxsH,KAAK8wI,YAAc,CAAElqH,OAAQ,EAAGhkB,OAAS,GAEzC5C,KAAKqoE,QAAU,EAEfroE,KAAKgL,KAAOuiH,IAEb,CAwHC,OAxHA5iH,EAAAA,EAAAA,GAAA6qG,EAAA,EAAAvvG,IAAA,mBAAApG,MAED,WAAoB,GAAC,CAAAoG,IAAA,cAAAxB,IAErB,SAAiB5E,IAED,IAAVA,GAAiBG,KAAKqoE,SAE5B,GAAC,CAAApiE,IAAA,WAAApG,MAED,SAAUA,GAIT,OAFAG,KAAK6wI,MAAQhxI,EAENG,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAM8G,GAOL,OALA3G,KAAKo/D,MAAQ,IAAIz4D,EAAOy4D,MAAMxL,YAAajtD,EAAOy4D,OAClDp/D,KAAK4C,MAAQ+D,EAAO/D,MACpB5C,KAAK8nG,OAASnhG,EAAOmhG,OACrB9nG,KAAK6wI,MAAQlqI,EAAOkqI,MAEb7wI,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQkxI,EAAQ9lC,EAAW+lC,GAE1BD,GAAU/wI,KAAK8nG,OACfkpC,GAAU/lC,EAAUnD,OAEpB,IAAM,IAAIlkG,EAAI,EAAGwS,EAAIpW,KAAK8nG,OAAQlkG,EAAIwS,EAAGxS,IAExC5D,KAAKo/D,MAAO2xE,EAASntI,GAAMqnG,EAAU7rC,MAAO4xE,EAASptI,GAItD,OAAO5D,IAER,GAAC,CAAAiG,IAAA,MAAApG,MAED,SAAKA,GAAoB,IAAb+mB,EAAMhmB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAIpB,OAFAZ,KAAKo/D,MAAM36D,IAAK5E,EAAO+mB,GAEhB5mB,IAER,GAAC,CAAAiG,IAAA,QAAApG,MAED,SAAO8M,QAEqBxL,IAAtBwL,EAAKk3L,eAETl3L,EAAKk3L,aAAe,CAAC,QAIW1iM,IAA5BnB,KAAKo/D,MAAMh4D,OAAO08L,QAEtB9jM,KAAKo/D,MAAMh4D,OAAO08L,MAAQv2E,WAI2BpsH,IAAjDwL,EAAKk3L,aAAc7jM,KAAKo/D,MAAMh4D,OAAO08L,SAEzCn3L,EAAKk3L,aAAc7jM,KAAKo/D,MAAMh4D,OAAO08L,OAAU9jM,KAAKo/D,MAAMz+D,MAAO,GAAIyG,QAItE,IAAMg4D,EAAQ,IAAIp/D,KAAKo/D,MAAMxL,YAAajnD,EAAKk3L,aAAc7jM,KAAKo/D,MAAMh4D,OAAO08L,QAEzE1vH,EAAK,IAAIp0E,KAAK4zD,YAAawL,EAAOp/D,KAAK8nG,QAG7C,OAFA1zB,EAAGr0C,SAAU//B,KAAK6wI,OAEXz8D,CAER,GAAC,CAAAnuE,IAAA,WAAApG,MAED,SAAUmpB,GAIT,OAFAhpB,KAAKoxI,iBAAmBpoH,EAEjBhpB,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQ8M,GAwBP,YAtB2BxL,IAAtBwL,EAAKk3L,eAETl3L,EAAKk3L,aAAe,CAAC,QAMW1iM,IAA5BnB,KAAKo/D,MAAMh4D,OAAO08L,QAEtB9jM,KAAKo/D,MAAMh4D,OAAO08L,MAAQv2E,WAI2BpsH,IAAjDwL,EAAKk3L,aAAc7jM,KAAKo/D,MAAMh4D,OAAO08L,SAEzCn3L,EAAKk3L,aAAc7jM,KAAKo/D,MAAMh4D,OAAO08L,OAAUngM,MAAMuU,KAAM,IAAI21F,YAAa7tG,KAAKo/D,MAAMh4D,UAMjF,CACN4D,KAAMhL,KAAKgL,KACX5D,OAAQpH,KAAKo/D,MAAMh4D,OAAO08L,MAC1BjiM,KAAM7B,KAAKo/D,MAAMxL,YAAYzzD,KAC7B2nG,OAAQ9nG,KAAK8nG,OAGf,KAAC0N,CAAA,CAzIqB,GA6IjBuuF,GAA0B,IAAIznK,GAE9Bm5E,GAA0B,WAE/B,SAAAA,EAAauuF,EAAmBjvF,EAAUnuF,GAA6B,IAArBmkF,EAAUnqG,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,IAAAA,UAAA,IAAQ8H,EAAAA,EAAAA,GAAA,KAAA+sG,GAEnEz1G,KAAKw2I,8BAA+B,EAEpCx2I,KAAKG,KAAO,GAEZH,KAAK2M,KAAOq3L,EACZhkM,KAAK+0G,SAAWA,EAChB/0G,KAAK4mB,OAASA,EAEd5mB,KAAK+qG,YAA4B,IAAfA,CAEnB,CAiTC,OAjTApgG,EAAAA,EAAAA,GAAA8qG,EAAA,EAAAxvG,IAAA,QAAAzB,IAED,WAEC,OAAOxE,KAAK2M,KAAK/J,KAElB,GAAC,CAAAqD,IAAA,QAAAzB,IAED,WAEC,OAAOxE,KAAK2M,KAAKyyD,KAElB,GAAC,CAAAn5D,IAAA,cAAAxB,IAED,SAAiB5E,GAEhBG,KAAK2M,KAAK0zB,YAAcxgC,CAEzB,GAAC,CAAAoG,IAAA,eAAApG,MAED,SAAckC,GAEb,IAAM,IAAI6B,EAAI,EAAGwS,EAAIpW,KAAK2M,KAAK/J,MAAOgB,EAAIwS,EAAGxS,IAE5CmgM,GAAU36F,oBAAqBppG,KAAM4D,GAErCmgM,GAAU7oJ,aAAcn5C,GAExB/B,KAAKkxI,OAAQttI,EAAGmgM,GAAU/0L,EAAG+0L,GAAU90L,EAAG80L,GAAU70L,GAIrD,OAAOlP,IAER,GAAC,CAAAiG,IAAA,oBAAApG,MAED,SAAmBkC,GAElB,IAAM,IAAI6B,EAAI,EAAGwS,EAAIpW,KAAK4C,MAAOgB,EAAIwS,EAAGxS,IAEvCmgM,GAAU36F,oBAAqBppG,KAAM4D,GAErCmgM,GAAU5yD,kBAAmBpvI,GAE7B/B,KAAKkxI,OAAQttI,EAAGmgM,GAAU/0L,EAAG+0L,GAAU90L,EAAG80L,GAAU70L,GAIrD,OAAOlP,IAER,GAAC,CAAAiG,IAAA,qBAAApG,MAED,SAAoBkC,GAEnB,IAAM,IAAI6B,EAAI,EAAGwS,EAAIpW,KAAK4C,MAAOgB,EAAIwS,EAAGxS,IAEvCmgM,GAAU36F,oBAAqBppG,KAAM4D,GAErCmgM,GAAUzgE,mBAAoBvhI,GAE9B/B,KAAKkxI,OAAQttI,EAAGmgM,GAAU/0L,EAAG+0L,GAAU90L,EAAG80L,GAAU70L,GAIrD,OAAOlP,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAM+F,EAAOoJ,GAMZ,OAJKhP,KAAK+qG,aAAa/7F,EAAIsK,GAAWtK,EAAGhP,KAAKo/D,QAE9Cp/D,KAAK2M,KAAKyyD,MAAOx5D,EAAQ5F,KAAK2M,KAAKm7F,OAAS9nG,KAAK4mB,QAAW5X,EAErDhP,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAM+F,EAAOqJ,GAMZ,OAJKjP,KAAK+qG,aAAa97F,EAAIqK,GAAWrK,EAAGjP,KAAKo/D,QAE9Cp/D,KAAK2M,KAAKyyD,MAAOx5D,EAAQ5F,KAAK2M,KAAKm7F,OAAS9nG,KAAK4mB,OAAS,GAAM3X,EAEzDjP,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAM+F,EAAOsJ,GAMZ,OAJKlP,KAAK+qG,aAAa77F,EAAIoK,GAAWpK,EAAGlP,KAAKo/D,QAE9Cp/D,KAAK2M,KAAKyyD,MAAOx5D,EAAQ5F,KAAK2M,KAAKm7F,OAAS9nG,KAAK4mB,OAAS,GAAM1X,EAEzDlP,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAM+F,EAAOnD,GAMZ,OAJKzC,KAAK+qG,aAAatoG,EAAI6W,GAAW7W,EAAGzC,KAAKo/D,QAE9Cp/D,KAAK2M,KAAKyyD,MAAOx5D,EAAQ5F,KAAK2M,KAAKm7F,OAAS9nG,KAAK4mB,OAAS,GAAMnkB,EAEzDzC,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAM+F,GAEL,IAAIoJ,EAAIhP,KAAK2M,KAAKyyD,MAAOx5D,EAAQ5F,KAAK2M,KAAKm7F,OAAS9nG,KAAK4mB,QAIzD,OAFK5mB,KAAK+qG,aAAa/7F,EAAI++G,GAAa/+G,EAAGhP,KAAKo/D,QAEzCpwD,CAER,GAAC,CAAA/I,IAAA,OAAApG,MAED,SAAM+F,GAEL,IAAIqJ,EAAIjP,KAAK2M,KAAKyyD,MAAOx5D,EAAQ5F,KAAK2M,KAAKm7F,OAAS9nG,KAAK4mB,OAAS,GAIlE,OAFK5mB,KAAK+qG,aAAa97F,EAAI8+G,GAAa9+G,EAAGjP,KAAKo/D,QAEzCnwD,CAER,GAAC,CAAAhJ,IAAA,OAAApG,MAED,SAAM+F,GAEL,IAAIsJ,EAAIlP,KAAK2M,KAAKyyD,MAAOx5D,EAAQ5F,KAAK2M,KAAKm7F,OAAS9nG,KAAK4mB,OAAS,GAIlE,OAFK5mB,KAAK+qG,aAAa77F,EAAI6+G,GAAa7+G,EAAGlP,KAAKo/D,QAEzClwD,CAER,GAAC,CAAAjJ,IAAA,OAAApG,MAED,SAAM+F,GAEL,IAAInD,EAAIzC,KAAK2M,KAAKyyD,MAAOx5D,EAAQ5F,KAAK2M,KAAKm7F,OAAS9nG,KAAK4mB,OAAS,GAIlE,OAFK5mB,KAAK+qG,aAAatoG,EAAIsrH,GAAatrH,EAAGzC,KAAKo/D,QAEzC38D,CAER,GAAC,CAAAwD,IAAA,QAAApG,MAED,SAAO+F,EAAOoJ,EAAGC,GAchB,OAZArJ,EAAQA,EAAQ5F,KAAK2M,KAAKm7F,OAAS9nG,KAAK4mB,OAEnC5mB,KAAK+qG,aAET/7F,EAAIsK,GAAWtK,EAAGhP,KAAKo/D,OACvBnwD,EAAIqK,GAAWrK,EAAGjP,KAAKo/D,QAIxBp/D,KAAK2M,KAAKyyD,MAAOx5D,EAAQ,GAAMoJ,EAC/BhP,KAAK2M,KAAKyyD,MAAOx5D,EAAQ,GAAMqJ,EAExBjP,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQ+F,EAAOoJ,EAAGC,EAAGC,GAgBpB,OAdAtJ,EAAQA,EAAQ5F,KAAK2M,KAAKm7F,OAAS9nG,KAAK4mB,OAEnC5mB,KAAK+qG,aAET/7F,EAAIsK,GAAWtK,EAAGhP,KAAKo/D,OACvBnwD,EAAIqK,GAAWrK,EAAGjP,KAAKo/D,OACvBlwD,EAAIoK,GAAWpK,EAAGlP,KAAKo/D,QAIxBp/D,KAAK2M,KAAKyyD,MAAOx5D,EAAQ,GAAMoJ,EAC/BhP,KAAK2M,KAAKyyD,MAAOx5D,EAAQ,GAAMqJ,EAC/BjP,KAAK2M,KAAKyyD,MAAOx5D,EAAQ,GAAMsJ,EAExBlP,IAER,GAAC,CAAAiG,IAAA,UAAApG,MAED,SAAS+F,EAAOoJ,EAAGC,EAAGC,EAAGzM,GAkBxB,OAhBAmD,EAAQA,EAAQ5F,KAAK2M,KAAKm7F,OAAS9nG,KAAK4mB,OAEnC5mB,KAAK+qG,aAET/7F,EAAIsK,GAAWtK,EAAGhP,KAAKo/D,OACvBnwD,EAAIqK,GAAWrK,EAAGjP,KAAKo/D,OACvBlwD,EAAIoK,GAAWpK,EAAGlP,KAAKo/D,OACvB38D,EAAI6W,GAAW7W,EAAGzC,KAAKo/D,QAIxBp/D,KAAK2M,KAAKyyD,MAAOx5D,EAAQ,GAAMoJ,EAC/BhP,KAAK2M,KAAKyyD,MAAOx5D,EAAQ,GAAMqJ,EAC/BjP,KAAK2M,KAAKyyD,MAAOx5D,EAAQ,GAAMsJ,EAC/BlP,KAAK2M,KAAKyyD,MAAOx5D,EAAQ,GAAMnD,EAExBzC,IAER,GAAC,CAAAiG,IAAA,QAAApG,MAED,SAAO8M,GAEN,QAAcxL,IAATwL,EAAqB,CAEzB9J,QAAQiiB,IAAK,oHAIb,IAFA,IAAMs6C,EAAQ,GAEJx7D,EAAI,EAAGA,EAAI5D,KAAK4C,MAAOgB,IAIhC,IAFA,IAAMgC,EAAQhC,EAAI5D,KAAK2M,KAAKm7F,OAAS9nG,KAAK4mB,OAEhCvU,EAAI,EAAGA,EAAIrS,KAAK+0G,SAAU1iG,IAEnC+sD,EAAM98D,KAAMtC,KAAK2M,KAAKyyD,MAAOx5D,EAAQyM,IAMvC,OAAO,IAAIujC,GAAiB,IAAI51C,KAAKo/D,MAAMxL,YAAawL,GAASp/D,KAAK+0G,SAAU/0G,KAAK+qG,WAEtF,CAcC,YAZiC5pG,IAA5BwL,EAAKs3L,qBAETt3L,EAAKs3L,mBAAqB,CAAC,QAIuB9iM,IAA9CwL,EAAKs3L,mBAAoBjkM,KAAK2M,KAAK3B,QAEvC2B,EAAKs3L,mBAAoBjkM,KAAK2M,KAAK3B,MAAShL,KAAK2M,KAAKyT,MAAOzT,IAIvD,IAAI8oG,EAA4B9oG,EAAKs3L,mBAAoBjkM,KAAK2M,KAAK3B,MAAQhL,KAAK+0G,SAAU/0G,KAAK4mB,OAAQ5mB,KAAK+qG,WAIrH,GAAC,CAAA9kG,IAAA,SAAApG,MAED,SAAQ8M,GAEP,QAAcxL,IAATwL,EAAqB,CAEzB9J,QAAQiiB,IAAK,yHAIb,IAFA,IAAMs6C,EAAQ,GAEJx7D,EAAI,EAAGA,EAAI5D,KAAK4C,MAAOgB,IAIhC,IAFA,IAAMgC,EAAQhC,EAAI5D,KAAK2M,KAAKm7F,OAAS9nG,KAAK4mB,OAEhCvU,EAAI,EAAGA,EAAIrS,KAAK+0G,SAAU1iG,IAEnC+sD,EAAM98D,KAAMtC,KAAK2M,KAAKyyD,MAAOx5D,EAAQyM,IAQvC,MAAO,CACN0iG,SAAU/0G,KAAK+0G,SACflzG,KAAM7B,KAAKo/D,MAAMxL,YAAYzzD,KAC7Bi/D,MAAOA,EACP2rC,WAAY/qG,KAAK+qG,WAGnB,CAgBC,YAZiC5pG,IAA5BwL,EAAKs3L,qBAETt3L,EAAKs3L,mBAAqB,CAAC,QAIuB9iM,IAA9CwL,EAAKs3L,mBAAoBjkM,KAAK2M,KAAK3B,QAEvC2B,EAAKs3L,mBAAoBjkM,KAAK2M,KAAK3B,MAAShL,KAAK2M,KAAKoqH,OAAQpqH,IAIxD,CACN6pI,8BAA8B,EAC9BzhC,SAAU/0G,KAAK+0G,SACfpoG,KAAM3M,KAAK2M,KAAK3B,KAChB4b,OAAQ5mB,KAAK4mB,OACbmkF,WAAY/qG,KAAK+qG,WAKpB,KAAC0K,CAAA,CA/T8B,GAmU1B+7D,GAAc,SAAA0yB,IAAA77L,EAAAA,EAAAA,GAAAmpK,EAAA0yB,GAAA,IAAAC,GAAA57L,EAAAA,EAAAA,GAAAipK,GAEnB,SAAAA,EAAah7H,GAAa,IAAA4tJ,EAsBI,OAtBJ17L,EAAAA,EAAAA,GAAA,KAAA8oK,IAEzB4yB,EAAAD,EAAA/kM,KAAA,OAEKw4L,kBAAmB,EAExBwM,EAAKviM,KAAO,iBAEZuiM,EAAKviG,MAAQ,IAAIC,GAAO,UAExBsiG,EAAKlkK,IAAM,KAEXkkK,EAAKj2D,SAAW,KAEhBi2D,EAAK/lK,SAAW,EAEhB+lK,EAAKpsF,iBAAkB,EAEvBosF,EAAKhrF,aAAc,EAEnBgrF,EAAKj0D,KAAM,EAEXi0D,EAAK5sJ,UAAWhB,GAAa4tJ,CAE9B,CAoBC,OApBAz5L,EAAAA,EAAAA,GAAA6mK,EAAA,EAAAvrK,IAAA,OAAApG,MAED,SAAM8G,GAgBL,OAdAolC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAwlI,EAAAryK,WAAA,aAAAC,KAAA,KAAYuH,GAEZ3G,KAAK6hG,MAAM59F,KAAM0C,EAAOk7F,OAExB7hG,KAAKkgC,IAAMv5B,EAAOu5B,IAElBlgC,KAAKmuI,SAAWxnI,EAAOwnI,SAEvBnuI,KAAKq+B,SAAW13B,EAAO03B,SAEvBr+B,KAAKg4G,gBAAkBrxG,EAAOqxG,gBAE9Bh4G,KAAKmwI,IAAMxpI,EAAOwpI,IAEXnwI,IAER,KAACwxK,CAAA,CA9CkB,CAASv5I,IAoDvBosK,GAAgC,IAAI/nK,GACpCgoK,GAA4B,IAAIhoK,GAChCioK,GAA4B,IAAIjoK,GAEhCkoK,GAAiC,IAAIpxJ,GACrCqxJ,GAAiC,IAAIrxJ,GACrCsxJ,GAAiC,IAAInoK,GAErCooK,GAAoB,IAAIroK,GACxBsoK,GAAoB,IAAItoK,GACxBuoK,GAAoB,IAAIvoK,GAExBwoK,GAAqB,IAAI1xJ,GACzB2xJ,GAAqB,IAAI3xJ,GACzB4xJ,GAAqB,IAAI5xJ,GAEzB6xJ,GAAM,SAAAC,IAAA78L,EAAAA,EAAAA,GAAA48L,EAAAC,GAAA,IAAAC,GAAA58L,EAAAA,EAAAA,GAAA08L,GAEX,SAAAA,EAAa/nL,GAAW,IAAAkoL,EAQvB,IARuB18L,EAAAA,EAAAA,GAAA,KAAAu8L,IAEvBG,EAAAD,EAAA/lM,KAAA,OAEK6gM,UAAW,EAEhBmF,EAAKvjM,KAAO,cAEOV,IAAdmiM,GAA0B,CAE9BA,GAAY,IAAI5tJ,GAEhB,IAAM2vJ,EAAe,IAAI56L,aAAc,EACpC,IAAO,GAAK,EAAG,EAAG,EACpB,IAAO,GAAK,EAAG,EAAG,EAClB,GAAK,GAAK,EAAG,EAAG,GACd,GAAK,GAAK,EAAG,EAAG,IAGbu5L,EAAoB,IAAIxuF,GAAmB6vF,EAAc,GAE/D/B,GAAUhoG,SAAU,CAAE,EAAG,EAAG,EAAG,EAAG,EAAG,IACrCgoG,GAAU3tJ,aAAc,WAAY,IAAI8/D,GAA4BuuF,EAAmB,EAAG,GAAG,IAC7FV,GAAU3tJ,aAAc,KAAM,IAAI8/D,GAA4BuuF,EAAmB,EAAG,GAAG,GAExF,CAKsC,OAHtCoB,EAAKv3J,SAAWy1J,GAChB8B,EAAKloL,cAA0B/b,IAAb+b,EAA2BA,EAAW,IAAIs0J,GAE5D4zB,EAAKplF,OAAS,IAAI5sE,GAAS,GAAK,IAAMgyJ,CAEvC,CAuFC,OAvFAz6L,EAAAA,EAAAA,GAAAs6L,EAAA,EAAAh/L,IAAA,UAAApG,MAED,SAASm3D,EAAWohF,GAEO,OAArBphF,EAAUjlB,QAEdlvC,QAAQkC,MAAO,yFAIhBu/L,GAAYgB,mBAAoBtlM,KAAKg7C,aAErC0pJ,GAAiBzgM,KAAM+yD,EAAUjlB,OAAOiJ,aACxCh7C,KAAK8nI,gBAAgBxW,iBAAkBt6D,EAAUjlB,OAAO4J,mBAAoB37C,KAAKg7C,aAEjFupJ,GAAYxpJ,sBAAuB/6C,KAAK8nI,iBAEnC9wE,EAAUjlB,OAAOsT,sBAAyD,IAAlCrlD,KAAKkd,SAAS86F,iBAE1DssF,GAAYhwJ,gBAAkBiwJ,GAAYr1L,GAI3C,IACIiK,EAAKC,EADHilB,EAAWr+B,KAAKkd,SAASmhB,SAGb,IAAbA,IAEJjlB,EAAMhF,KAAKgF,IAAKilB,GAChBllB,EAAM/E,KAAK+E,IAAKklB,IAIjB,IAAM2hF,EAAShgH,KAAKggH,OAEpBulF,GAAiBZ,GAAIlgM,KAAO,IAAO,GAAK,GAAK8/L,GAAavkF,EAAQskF,GAAanrL,EAAKC,GACpFmsL,GAAiBX,GAAIngM,IAAK,IAAO,GAAK,GAAK8/L,GAAavkF,EAAQskF,GAAanrL,EAAKC,GAClFmsL,GAAiBV,GAAIpgM,IAAK,GAAK,GAAK,GAAK8/L,GAAavkF,EAAQskF,GAAanrL,EAAKC,GAEhF0rL,GAAKrgM,IAAK,EAAG,GACbsgM,GAAKtgM,IAAK,EAAG,GACbugM,GAAKvgM,IAAK,EAAG,GAGb,IAAIi2B,EAAYs8B,EAAUh/C,IAAI6gI,kBAAmB8rD,GAAKC,GAAKC,IAAK,EAAOR,IAEvE,GAAmB,OAAd3pK,IAGJ6qK,GAAiBX,GAAIngM,KAAO,GAAK,GAAK,GAAK8/L,GAAavkF,EAAQskF,GAAanrL,EAAKC,GAClF2rL,GAAKtgM,IAAK,EAAG,GAGM,QADnBi2B,EAAYs8B,EAAUh/C,IAAI6gI,kBAAmB8rD,GAAKE,GAAKD,IAAK,EAAOP,MANpE,CAeA,IAAMvzK,EAAWkmC,EAAUh/C,IAAIypH,OAAOruG,WAAYixK,IAE7CvzK,EAAWkmC,EAAU3lB,MAAQvgB,EAAWkmC,EAAUzlB,KAEvD6mG,EAAW91I,KAAM,CAEhBwuB,SAAUA,EACV/L,MAAOs/K,GAAgBjkL,QACvB42G,GAAIqT,GAASQ,MAAOw5D,GAAiBM,GAAKC,GAAKC,GAAKC,GAAMC,GAAMC,GAAM,IAAI5xJ,IAC1EnzB,KAAM,KACN+d,OAAQh+B,MAZT,CAgBD,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAM8G,EAAQ+iI,GAQb,OANA39F,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAi5J,EAAA9lM,WAAA,aAAAC,KAAA,KAAYuH,EAAQ+iI,QAEGvoI,IAAlBwF,EAAOq5G,QAAuBhgH,KAAKggH,OAAO/7G,KAAM0C,EAAOq5G,QAE5DhgH,KAAKkd,SAAWvW,EAAOuW,SAEhBld,IAER,KAACilM,CAAA,CAzHU,CAASzoK,IA6HrB,SAAS+oK,GAAiBC,EAAgBC,EAAYzlF,EAAQr5F,EAAOxN,EAAKC,GAGzEorL,GAAiBppJ,WAAYoqJ,EAAgBxlF,GAAS6e,UAAW,IAAMnjF,SAAU/0B,QAGpExlB,IAARgY,GAEJsrL,GAAiBz1L,EAAMoK,EAAMorL,GAAiBx1L,EAAQmK,EAAMqrL,GAAiBv1L,EAC7Ew1L,GAAiBx1L,EAAMkK,EAAMqrL,GAAiBx1L,EAAQoK,EAAMorL,GAAiBv1L,GAI7Ew1L,GAAiBxgM,KAAMugM,IAKxBgB,EAAevhM,KAAMwhM,GACrBD,EAAex2L,GAAKy1L,GAAiBz1L,EACrCw2L,EAAev2L,GAAKw1L,GAAiBx1L,EAGrCu2L,EAAetqJ,aAAcwpJ,GAE9B,CAEA,IAAMgB,GAAsB,IAAIppK,GAC1BqpK,GAAsB,IAAIrpK,GAE1BspK,GAAG,SAAAC,IAAAx9L,EAAAA,EAAAA,GAAAu9L,EAAAC,GAAA,IAAAC,GAAAv9L,EAAAA,EAAAA,GAAAq9L,GAER,SAAAA,IAAc,IAAAG,EAkBU,OAlBVr9L,EAAAA,EAAAA,GAAA,KAAAk9L,IAEbG,EAAAD,EAAA1mM,KAAA,OAEK4mM,cAAgB,EAErBD,EAAKlkM,KAAO,MAEZvC,OAAO+rE,kBAAgBttB,EAAAA,EAAAA,GAAAgoJ,GAAQ,CAC9Blf,OAAQ,CACPtiL,YAAY,EACZ1E,MAAO,IAERsgM,MAAO,CACNtgM,OAAO,KAITkmM,EAAKhpJ,YAAa,EAAKgpJ,CAExB,CAiKC,OAjKAp7L,EAAAA,EAAAA,GAAAi7L,EAAA,EAAA3/L,IAAA,OAAApG,MAED,SAAM8G,IAELolC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA45J,EAAAzmM,WAAA,aAAAC,KAAA,KAAYuH,GAAQ,GAIpB,IAFA,IAAMkgL,EAASlgL,EAAOkgL,OAEZjjL,EAAI,EAAGwS,EAAIywK,EAAOtkL,OAAQqB,EAAIwS,EAAGxS,IAAO,CAEjD,IAAMo+L,EAAQnb,EAAQjjL,GAEtB5D,KAAKimM,SAAUjE,EAAMhkK,OAAO5d,QAAS4hL,EAAMlxK,SAE5C,CAIA,OAFA9wB,KAAK+8C,WAAap2C,EAAOo2C,WAElB/8C,IAER,GAAC,CAAAiG,IAAA,WAAApG,MAED,SAAUm+B,GAAuB,IAAflN,EAAQlwB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAE5BkwB,EAAW1c,KAAKgB,IAAK0b,GAErB,IAEI1a,EAFEywK,EAAS7mL,KAAK6mL,OAIpB,IAAMzwK,EAAI,EAAGA,EAAIywK,EAAOtkL,UAElBuuB,EAAW+1J,EAAQzwK,GAAI0a,UAFG1a,KAchC,OAJAywK,EAAO/tK,OAAQ1C,EAAG,EAAG,CAAE0a,SAAUA,EAAUkN,OAAQA,IAEnDh+B,KAAK8nB,IAAKkW,GAEHh+B,IAER,GAAC,CAAAiG,IAAA,kBAAApG,MAED,WAEC,OAAOG,KAAKgmM,aAEb,GAAC,CAAA//L,IAAA,uBAAApG,MAED,SAAsBixB,GAErB,IAAM+1J,EAAS7mL,KAAK6mL,OAEpB,GAAKA,EAAOtkL,OAAS,EAAI,CAExB,IAAIqB,EAAGwS,EAEP,IAAMxS,EAAI,EAAGwS,EAAIywK,EAAOtkL,OAAQqB,EAAIwS,KAE9B0a,EAAW+1J,EAAQjjL,GAAIktB,UAFUltB,KAUvC,OAAOijL,EAAQjjL,EAAI,GAAIo6B,MAExB,CAEA,OAAO,IAER,GAAC,CAAA/3B,IAAA,UAAApG,MAED,SAASm3D,EAAWohF,GAInB,GAFep4I,KAAK6mL,OAERtkL,OAAS,EAAI,CAExBmjM,GAAM3qJ,sBAAuB/6C,KAAKg7C,aAElC,IAAMlqB,EAAWkmC,EAAUh/C,IAAIypH,OAAOruG,WAAYsyK,IAElD1lM,KAAKkmM,qBAAsBp1K,GAAWyjC,QAASyC,EAAWohF,EAE3D,CAED,GAAC,CAAAnyI,IAAA,SAAApG,MAED,SAAQkyC,GAEP,IAAM80I,EAAS7mL,KAAK6mL,OAEpB,GAAKA,EAAOtkL,OAAS,EAAI,CAExBmjM,GAAM3qJ,sBAAuBhJ,EAAOiJ,aACpC2qJ,GAAM5qJ,sBAAuB/6C,KAAKg7C,aAElC,IAIIp3C,EAAGwS,EAJD0a,EAAW40K,GAAMtyK,WAAYuyK,IAAU5zJ,EAAOiN,KAMpD,IAJA6nI,EAAQ,GAAI7oJ,OAAOye,SAAU,EAIvB74C,EAAI,EAAGwS,EAAIywK,EAAOtkL,OAAQqB,EAAIwS,GAE9B0a,GAAY+1J,EAAQjjL,GAAIktB,SAFSltB,IAIrCijL,EAAQjjL,EAAI,GAAIo6B,OAAOye,SAAU,EACjCoqI,EAAQjjL,GAAIo6B,OAAOye,SAAU,EAY/B,IAFAz8C,KAAKgmM,cAAgBpiM,EAAI,EAEjBA,EAAIwS,EAAGxS,IAEdijL,EAAQjjL,GAAIo6B,OAAOye,SAAU,CAI/B,CAED,GAAC,CAAAx2C,IAAA,SAAApG,MAED,SAAQ+1H,GAEP,IAAMjpH,GAAIo/B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA45J,EAAAzmM,WAAA,eAAAC,KAAA,KAAiBw2H,IAEF,IAApB51H,KAAK+8C,aAAuBpwC,EAAKqxB,OAAO+e,YAAa,GAE1DpwC,EAAKqxB,OAAO6oJ,OAAS,GAIrB,IAFA,IAAMA,EAAS7mL,KAAK6mL,OAEVjjL,EAAI,EAAGwS,EAAIywK,EAAOtkL,OAAQqB,EAAIwS,EAAGxS,IAAO,CAEjD,IAAMo+L,EAAQnb,EAAQjjL,GAEtB+I,EAAKqxB,OAAO6oJ,OAAOvkL,KAAM,CACxB07B,OAAQgkK,EAAMhkK,OAAOhzB,KACrB8lB,SAAUkxK,EAAMlxK,UAGlB,CAEA,OAAOnkB,CAER,KAACi5L,CAAA,CAvLO,CAASppK,IA2LZ2pK,GAA8B,IAAI7pK,GAElC8pK,GAA2B,IAAInsJ,GAC/BosJ,GAA4B,IAAIpsJ,GAEhCqsJ,GAA0B,IAAIhqK,GAC9BiqK,GAAwB,IAAIhqK,GAE5Bo+E,GAAW,SAAA/tE,IAAAvkC,EAAAA,EAAAA,GAAAsyG,EAAA/tE,GAAA,IAAA45J,GAAAj+L,EAAAA,EAAAA,GAAAoyG,GAEhB,SAAAA,EAAa9sE,EAAU3wB,GAAW,IAAAupL,EAUM,OAVN/9L,EAAAA,EAAAA,GAAA,KAAAiyG,IAEjC8rF,EAAAD,EAAApnM,KAAA,KAAOyuC,EAAU3wB,IAEZs2F,eAAgB,EAErBizF,EAAK5kM,KAAO,cAEZ4kM,EAAKn9D,SAAW,WAChBm9D,EAAKl9D,WAAa,IAAIhtG,GACtBkqK,EAAKC,kBAAoB,IAAInqK,GAAUkqK,CAExC,CAuHC,OAvHA97L,EAAAA,EAAAA,GAAAgwG,EAAA,EAAA10G,IAAA,OAAApG,MAED,SAAM8G,EAAQ+iI,GAUb,OARA39F,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA2uE,EAAAx7G,WAAA,aAAAC,KAAA,KAAYuH,EAAQ+iI,GAEpB1pI,KAAKspI,SAAW3iI,EAAO2iI,SACvBtpI,KAAKupI,WAAWtlI,KAAM0C,EAAO4iI,YAC7BvpI,KAAK0mM,kBAAkBziM,KAAM0C,EAAO+/L,mBAEpC1mM,KAAK0+G,SAAW/3G,EAAO+3G,SAEhB1+G,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAM6+G,EAAU6qB,GAEfvpI,KAAK0+G,SAAWA,OAEIv9G,IAAfooI,IAEJvpI,KAAKw7C,mBAAmB,GAExBx7C,KAAK0+G,SAASioF,oBAEdp9D,EAAavpI,KAAKg7C,aAInBh7C,KAAKupI,WAAWtlI,KAAMslI,GACtBvpI,KAAK0mM,kBAAkBziM,KAAMslI,GAAa5oF,QAE3C,GAAC,CAAA16C,IAAA,OAAApG,MAED,WAECG,KAAK0+G,SAASsxE,MAEf,GAAC,CAAA/pL,IAAA,uBAAApG,MAED,WAMC,IAJA,IAAM6Q,EAAS,IAAIupC,GAEb2sJ,EAAa5mM,KAAK6tC,SAAS+6D,WAAWg+F,WAElChjM,EAAI,EAAGwS,EAAIwwL,EAAWhkM,MAAOgB,EAAIwS,EAAGxS,IAAO,CAEpD8M,EAAO04F,oBAAqBw9F,EAAYhjM,GAExC,IAAM+iB,EAAQ,EAAMjW,EAAOm2L,kBAEtBlgL,IAAU/T,IAEdlC,EAAO4jC,eAAgB3tB,GAIvBjW,EAAOjM,IAAK,EAAG,EAAG,EAAG,GAItBmiM,EAAWE,QAASljM,EAAG8M,EAAO1B,EAAG0B,EAAOzB,EAAGyB,EAAOxB,EAAGwB,EAAOjO,EAE7D,CAED,GAAC,CAAAwD,IAAA,oBAAApG,MAED,SAAmBoqB,IAElB8hB,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA2uE,EAAAx7G,WAAA,0BAAAC,KAAA,KAAyB6qB,GAEF,aAAlBjqB,KAAKspI,SAETtpI,KAAK0mM,kBAAkBziM,KAAMjE,KAAKg7C,aAAc2F,SAEnB,aAAlB3gD,KAAKspI,SAEhBtpI,KAAK0mM,kBAAkBziM,KAAMjE,KAAKupI,YAAa5oF,SAI/C99C,QAAQC,KAAM,6CAA+C9C,KAAKspI,SAIpE,GAAC,CAAArjI,IAAA,gBAAApG,MAED,SAAe+F,EAAO7G,GAErB,IAAM2/G,EAAW1+G,KAAK0+G,SAChB7wE,EAAW7tC,KAAK6tC,SAEtBu4J,GAAWh9F,oBAAqBv7D,EAAS+6D,WAAWuK,UAAWvtG,GAC/DygM,GAAYj9F,oBAAqBv7D,EAAS+6D,WAAWg+F,WAAYhhM,GAEjEugM,GAAcliM,KAAMlF,GAASm8C,aAAcl7C,KAAKupI,YAEhDxqI,EAAO0F,IAAK,EAAG,EAAG,GAElB,IAAM,IAAIb,EAAI,EAAGA,EAAI,EAAGA,IAAO,CAE9B,IAAM+5J,EAAS0oC,GAAYU,aAAcnjM,GAEzC,GAAgB,IAAX+5J,EAAe,CAEnB,IAAMqpC,EAAYZ,GAAWW,aAAcnjM,GAE3C2iM,GAAQj1E,iBAAkB5S,EAASxC,MAAO8qF,GAAYhsJ,YAAa0jE,EAASvC,aAAc6qF,IAE1FjoM,EAAOo8C,gBAAiBmrJ,GAAUriM,KAAMkiM,IAAgBjrJ,aAAcqrJ,IAAW5oC,EAElF,CAED,CAEA,OAAO5+J,EAAOm8C,aAAcl7C,KAAK0mM,kBAElC,KAAC/rF,CAAA,CArIe,CAASxsE,IAyIpB2wE,GAAI,SAAAmoF,IAAA5+L,EAAAA,EAAAA,GAAAy2G,EAAAmoF,GAAA,IAAAC,GAAA3+L,EAAAA,EAAAA,GAAAu2G,GAET,SAAAA,IAAc,IAAAqoF,EAMM,OANNz+L,EAAAA,EAAAA,GAAA,KAAAo2G,IAEbqoF,EAAAD,EAAA9nM,KAAA,OAEKk0G,QAAS,EAEd6zF,EAAKtlM,KAAO,OAAOslM,CAEpB,CAAC,OAAAx8L,EAAAA,EAAAA,GAAAm0G,EAAA,CAVQ,CAAStiF,IAcb4qK,GAAW,SAAAC,IAAAh/L,EAAAA,EAAAA,GAAA++L,EAAAC,GAAA,IAAAC,GAAA/+L,EAAAA,EAAAA,GAAA6+L,GAEhB,SAAAA,IAAmK,IAAAG,EAAtJ56L,EAAI/L,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,KAAM4pC,EAAK5pC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAG6pC,EAAM7pC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGypC,EAAMzpC,UAAA2B,OAAA,EAAA3B,UAAA,QAAAO,EAAEU,EAAIjB,UAAA2B,OAAA,EAAA3B,UAAA,QAAAO,EAAEwvC,EAAO/vC,UAAA2B,OAAA,EAAA3B,UAAA,QAAAO,EAAEs1G,EAAK71G,UAAA2B,OAAA,EAAA3B,UAAA,QAAAO,EAAEu1G,EAAK91G,UAAA2B,OAAA,EAAA3B,UAAA,QAAAO,EAAEorC,EAAS3rC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAGmtG,GAAe1hE,EAASzrC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAGmtG,GAAe1H,EAAUzlG,UAAA2B,OAAA,GAAA3B,UAAA,SAAAO,EAAEirC,EAAQxrC,UAAA2B,OAAA,GAAA3B,UAAA,SAAAO,EAUtI,OAVsIuH,EAAAA,EAAAA,GAAA,KAAA0+L,IAE/JG,EAAAD,EAAAloM,KAAA,KAAO,KAAMuxC,EAAS8lE,EAAOC,EAAOnqE,EAAWF,EAAWhC,EAAQxoC,EAAMwkG,EAAYj6D,IAE/E0pF,eAAgB,EAErByxE,EAAKp6J,MAAQ,CAAExgC,KAAMA,EAAM69B,MAAOA,EAAOC,OAAQA,GAEjD88J,EAAK/6J,iBAAkB,EACvB+6J,EAAK96J,OAAQ,EACb86J,EAAK/wE,gBAAkB,EAAE+wE,CAE1B,CAAC,OAAA58L,EAAAA,EAAAA,GAAAy8L,EAAA,CAde,CAASlwF,IAkBpBswF,GAA8B,IAAIjrK,GAClC+0E,GAAgC,IAAI/0E,GAEpC+/E,GAAQ,WAEb,SAAAA,IAA6C,IAAhCJ,EAAKt7G,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAIu7G,EAAYv7G,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAE8H,EAAAA,EAAAA,GAAA,KAAA4zG,GAEzCt8G,KAAKgL,KAAOuiH,KAEZvtH,KAAKk8G,MAAQA,EAAMv7G,MAAO,GAC1BX,KAAKm8G,aAAeA,EACpBn8G,KAAKynM,aAAe,KAEpBznM,KAAKi/L,YAAc,KACnBj/L,KAAKm/L,gBAAkB,EAEvBn/L,KAAKwX,OAAU,EAEfxX,KAAKD,MAEN,CAuPC,OAvPA4K,EAAAA,EAAAA,GAAA2xG,EAAA,EAAAr2G,IAAA,OAAApG,MAED,WAEC,IAAMq8G,EAAQl8G,KAAKk8G,MACbC,EAAen8G,KAAKm8G,aAM1B,GAJAn8G,KAAKynM,aAAe,IAAIh9L,aAA6B,GAAfyxG,EAAM35G,QAIf,IAAxB45G,EAAa55G,OAEjBvC,KAAK2mM,yBAML,GAAKzqF,EAAM35G,SAAW45G,EAAa55G,OAAS,CAE3CM,QAAQC,KAAM,mFAEd9C,KAAKm8G,aAAe,GAEpB,IAAM,IAAIv4G,EAAI,EAAG8sG,EAAK1wG,KAAKk8G,MAAM35G,OAAQqB,EAAI8sG,EAAI9sG,IAEhD5D,KAAKm8G,aAAa75G,KAAM,IAAIi6B,GAI9B,CAIF,GAAC,CAAAt2B,IAAA,oBAAApG,MAED,WAECG,KAAKm8G,aAAa55G,OAAS,EAE3B,IAAM,IAAIqB,EAAI,EAAG8sG,EAAK1wG,KAAKk8G,MAAM35G,OAAQqB,EAAI8sG,EAAI9sG,IAAO,CAEvD,IAAM8jM,EAAU,IAAInrK,GAEfv8B,KAAKk8G,MAAOt4G,IAEhB8jM,EAAQzjM,KAAMjE,KAAKk8G,MAAOt4G,GAAIo3C,aAAc2F,SAI7C3gD,KAAKm8G,aAAa75G,KAAMolM,EAEzB,CAED,GAAC,CAAAzhM,IAAA,OAAApG,MAED,WAIC,IAAM,IAAI+D,EAAI,EAAG8sG,EAAK1wG,KAAKk8G,MAAM35G,OAAQqB,EAAI8sG,EAAI9sG,IAAO,CAEvD,IAAM+jM,EAAO3nM,KAAKk8G,MAAOt4G,GAEpB+jM,GAEJA,EAAK3sJ,YAAY/2C,KAAMjE,KAAKm8G,aAAcv4G,IAAM+8C,QAIlD,CAIA,IAAM,IAAI/8C,EAAI,EAAG8sG,EAAK1wG,KAAKk8G,MAAM35G,OAAQqB,EAAI8sG,EAAI9sG,IAAO,CAEvD,IAAM+jM,EAAO3nM,KAAKk8G,MAAOt4G,GAEpB+jM,IAECA,EAAK9sJ,QAAU8sJ,EAAK9sJ,OAAOy4D,QAE/Bq0F,EAAK92L,OAAO5M,KAAM0jM,EAAK9sJ,OAAOG,aAAc2F,SAC5CgnJ,EAAK92L,OAAO6qC,SAAUisJ,EAAK3sJ,cAI3B2sJ,EAAK92L,OAAO5M,KAAM0jM,EAAK3sJ,aAIxB2sJ,EAAK92L,OAAO23H,UAAWm/D,EAAKliM,SAAUkiM,EAAKzxL,WAAYyxL,EAAKhhL,OAI9D,CAED,GAAC,CAAA1gB,IAAA,SAAApG,MAED,WASC,IAPA,IAAMq8G,EAAQl8G,KAAKk8G,MACbC,EAAen8G,KAAKm8G,aACpBsrF,EAAeznM,KAAKynM,aACpBxI,EAAcj/L,KAAKi/L,YAIfr7L,EAAI,EAAG8sG,EAAKwL,EAAM35G,OAAQqB,EAAI8sG,EAAI9sG,IAAO,CAIlD,IAAMiN,EAASqrG,EAAOt4G,GAAMs4G,EAAOt4G,GAAIo3C,YAAcs2D,GAErDk2F,GAAcl2E,iBAAkBzgH,EAAQsrG,EAAcv4G,IACtD4jM,GAAc/pK,QAASgqK,EAAkB,GAAJ7jM,EAEtC,CAEqB,OAAhBq7L,IAEJA,EAAY5+J,aAAc,EAI5B,GAAC,CAAAp6B,IAAA,QAAApG,MAED,WAEC,OAAO,IAAIy8G,EAAUt8G,KAAKk8G,MAAOl8G,KAAKm8G,aAEvC,GAAC,CAAAl2G,IAAA,qBAAApG,MAED,WASC,IAAIkK,EAAOqK,KAAKC,KAA0B,EAApBrU,KAAKk8G,MAAM35G,QACjCwH,EAAO8jH,GAAgB9jH,GACvBA,EAAOqK,KAAKuC,IAAK5M,EAAM,GAEvB,IAAM09L,EAAe,IAAIh9L,aAAcV,EAAOA,EAAO,GACrD09L,EAAahjM,IAAKzE,KAAKynM,cAEvB,IAAMxI,EAAc,IAAImI,GAAaK,EAAc19L,EAAMA,EAAMs+G,GAAY58E,IAO3E,OANAwzJ,EAAY5+J,aAAc,EAE1BrgC,KAAKynM,aAAeA,EACpBznM,KAAKi/L,YAAcA,EACnBj/L,KAAKm/L,gBAAkBp1L,EAEhB/J,IAER,GAAC,CAAAiG,IAAA,gBAAApG,MAED,SAAeM,GAEd,IAAM,IAAIyD,EAAI,EAAG8sG,EAAK1wG,KAAKk8G,MAAM35G,OAAQqB,EAAI8sG,EAAI9sG,IAAO,CAEvD,IAAM+jM,EAAO3nM,KAAKk8G,MAAOt4G,GAEzB,GAAK+jM,EAAKxnM,OAASA,EAElB,OAAOwnM,CAIT,CAID,GAAC,CAAA1hM,IAAA,UAAApG,MAED,WAE2B,OAArBG,KAAKi/L,cAETj/L,KAAKi/L,YAAYt8I,UAEjB3iD,KAAKi/L,YAAc,KAIrB,GAAC,CAAAh5L,IAAA,WAAApG,MAED,SAAUq+F,EAAMge,GAEfl8G,KAAKgL,KAAOkzF,EAAKlzF,KAEjB,IAAM,IAAIpH,EAAI,EAAGwS,EAAI8nF,EAAKge,MAAM35G,OAAQqB,EAAIwS,EAAGxS,IAAO,CAErD,IAAMoH,EAAOkzF,EAAKge,MAAOt4G,GACrB+jM,EAAOzrF,EAAOlxG,QAEJ7J,IAATwmM,IAEJ9kM,QAAQC,KAAM,2CAA4CkI,GAC1D28L,EAAO,IAAI7oF,IAIZ9+G,KAAKk8G,MAAM55G,KAAMqlM,GACjB3nM,KAAKm8G,aAAa75G,MAAM,IAAIi6B,IAAUiB,UAAW0gE,EAAKie,aAAcv4G,IAErE,CAIA,OAFA5D,KAAKD,OAEEC,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,WAEC,IAAM8M,EAAO,CACZkqH,SAAU,CACTxuD,QAAS,IACTxmE,KAAM,WACNi1H,UAAW,mBAEZ5a,MAAO,GACPC,aAAc,IAGfxvG,EAAK3B,KAAOhL,KAAKgL,KAKjB,IAHA,IAAMkxG,EAAQl8G,KAAKk8G,MACbC,EAAen8G,KAAKm8G,aAEhBv4G,EAAI,EAAGwS,EAAI8lG,EAAM35G,OAAQqB,EAAIwS,EAAGxS,IAAO,CAEhD,IAAM+jM,EAAOzrF,EAAOt4G,GACpB+I,EAAKuvG,MAAM55G,KAAMqlM,EAAK38L,MAEtB,IAAM48L,EAAczrF,EAAcv4G,GAClC+I,EAAKwvG,aAAa75G,KAAMslM,EAAYnqK,UAErC,CAEA,OAAO9wB,CAER,KAAC2vG,CAAA,CAxQY,GA4QRurF,GAAwB,SAAAC,IAAAz/L,EAAAA,EAAAA,GAAAw/L,EAAAC,GAAA,IAAAC,GAAAx/L,EAAAA,EAAAA,GAAAs/L,GAE7B,SAAAA,EAAazoI,EAAO21C,EAAUhK,GAAmC,IAAAi9F,EAAvB91C,EAAgBtxJ,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAMnB,OANoB8H,EAAAA,EAAAA,GAAA,KAAAm/L,IAE7DG,EAAAD,EAAA3oM,KAAA,KAAOggE,EAAO21C,EAAUhK,IAEnBgpD,4BAA6B,EAElCi0C,EAAK91C,iBAAmBA,EAAiB81C,CAE1C,CAsBC,OAtBAr9L,EAAAA,EAAAA,GAAAk9L,EAAA,EAAA5hM,IAAA,OAAApG,MAED,SAAM8G,GAML,OAJAolC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA67J,EAAA1oM,WAAA,aAAAC,KAAA,KAAYuH,GAEZ3G,KAAKkyJ,iBAAmBvrJ,EAAOurJ,iBAExBlyJ,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,WAEC,IAAM8M,GAAIo/B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA67J,EAAA1oM,WAAA,eAAAC,KAAA,MAMV,OAJAuN,EAAKulJ,iBAAmBlyJ,KAAKkyJ,iBAE7BvlJ,EAAKonJ,4BAA6B,EAE3BpnJ,CAER,KAACk7L,CAAA,CAhC4B,CAASjyJ,IAoCjCqyJ,GAAqC,IAAI1rK,GACzC2rK,GAAqC,IAAI3rK,GAEzC4rK,GAAsB,GAEtBC,GAAsB,IAAIj6J,GAE1BtO,GAAa,SAAAwoK,IAAAhgM,EAAAA,EAAAA,GAAAw3B,EAAAwoK,GAAA,IAAAC,GAAA//L,EAAAA,EAAAA,GAAAs3B,GAElB,SAAAA,EAAagO,EAAU3wB,EAAUta,GAAQ,IAAA2lM,EAWb,OAXa7/L,EAAAA,EAAAA,GAAA,KAAAm3B,IAExC0oK,EAAAD,EAAAlpM,KAAA,KAAOyuC,EAAU3wB,IAEZksH,iBAAkB,EAEvBm/D,EAAKzoK,eAAiB,IAAI+nK,GAA0B,IAAIp9L,aAAsB,GAAR7H,GAAc,IACpF2lM,EAAKl/D,cAAgB,KAErBk/D,EAAK3lM,MAAQA,EAEb2lM,EAAKzyJ,eAAgB,EAAMyyJ,CAE5B,CA+FC,OA/FA59L,EAAAA,EAAAA,GAAAk1B,EAAA,EAAA55B,IAAA,OAAApG,MAED,SAAM8G,EAAQ+iI,GAUb,OARA39F,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAnM,EAAA1gC,WAAA,aAAAC,KAAA,KAAYuH,EAAQ+iI,GAEpB1pI,KAAK8/B,eAAe77B,KAAM0C,EAAOm5B,gBAEH,OAAzBn5B,EAAO0iI,gBAAyBrpI,KAAKqpI,cAAgB1iI,EAAO0iI,cAAcjpH,SAE/EpgB,KAAK4C,MAAQ+D,EAAO/D,MAEb5C,IAER,GAAC,CAAAiG,IAAA,aAAApG,MAED,SAAY+F,EAAOi8F,GAElBA,EAAMrkE,UAAWx9B,KAAKqpI,cAAcjqE,MAAe,EAARx5D,EAE5C,GAAC,CAAAK,IAAA,cAAApG,MAED,SAAa+F,EAAOiL,GAEnBA,EAAO2sB,UAAWx9B,KAAK8/B,eAAes/B,MAAe,GAARx5D,EAE9C,GAAC,CAAAK,IAAA,UAAApG,MAED,SAASm3D,EAAWohF,GAEnB,IAAMp9F,EAAch7C,KAAKg7C,YACnBwtJ,EAAexoM,KAAK4C,MAK1B,GAHAwlM,GAAMv6J,SAAW7tC,KAAK6tC,SACtBu6J,GAAMlrL,SAAWld,KAAKkd,cAEE/b,IAAnBinM,GAAMlrL,SAEX,IAAM,IAAI83C,EAAa,EAAGA,EAAawzI,EAAcxzI,IAAgB,CAIpEh1D,KAAKyoM,YAAazzI,EAAYizI,IAE9BC,GAAqB52E,iBAAkBt2E,EAAaitJ,IAIpDG,GAAMptJ,YAAcktJ,GAEpBE,GAAM7zI,QAASyC,EAAWmxI,IAI1B,IAAM,IAAIvkM,EAAI,EAAGwS,EAAI+xL,GAAoB5lM,OAAQqB,EAAIwS,EAAGxS,IAAO,CAE9D,IAAM82B,EAAYytK,GAAqBvkM,GACvC82B,EAAUs6B,WAAaA,EACvBt6B,EAAUsD,OAASh+B,KACnBo4I,EAAW91I,KAAMo4B,EAElB,CAEAytK,GAAoB5lM,OAAS,CAE9B,CAED,GAAC,CAAA0D,IAAA,aAAApG,MAED,SAAY+F,EAAOi8F,GAEU,OAAvB7hG,KAAKqpI,gBAETrpI,KAAKqpI,cAAgB,IAAIw+D,GAA0B,IAAIp9L,aAA0C,EAA5BzK,KAAK8/B,eAAel9B,OAAa,IAIvGi/F,EAAMpkE,QAASz9B,KAAKqpI,cAAcjqE,MAAe,EAARx5D,EAE1C,GAAC,CAAAK,IAAA,cAAApG,MAED,SAAa+F,EAAOiL,GAEnBA,EAAO4sB,QAASz9B,KAAK8/B,eAAes/B,MAAe,GAARx5D,EAE5C,GAAC,CAAAK,IAAA,qBAAApG,MAED,WAEA,GAAC,CAAAoG,IAAA,UAAApG,MAED,WAECG,KAAKssB,cAAe,CAAEzqB,KAAM,WAE7B,KAACg+B,CAAA,CA9GiB,CAASsO,IAkHtBgqE,GAAiB,SAAAuwF,IAAArgM,EAAAA,EAAAA,GAAA8vG,EAAAuwF,GAAA,IAAAC,GAAApgM,EAAAA,EAAAA,GAAA4vG,GAEtB,SAAAA,EAAa3hE,GAAa,IAAAoyJ,EAgBI,OAhBJlgM,EAAAA,EAAAA,GAAA,KAAAyvG,IAEzBywF,EAAAD,EAAAvpM,KAAA,OAEKk4L,qBAAsB,EAE3BsR,EAAK/mM,KAAO,oBAEZ+mM,EAAK/mG,MAAQ,IAAIC,GAAO,UAExB8mG,EAAKh5D,UAAY,EACjBg5D,EAAKC,QAAU,QACfD,EAAKE,SAAW,QAEhBF,EAAKz4D,KAAM,EAEXy4D,EAAKpxJ,UAAWhB,GAAaoyJ,CAE9B,CAiBC,OAjBAj+L,EAAAA,EAAAA,GAAAwtG,EAAA,EAAAlyG,IAAA,OAAApG,MAGD,SAAM8G,GAYL,OAVAolC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAmsE,EAAAh5G,WAAA,aAAAC,KAAA,KAAYuH,GAEZ3G,KAAK6hG,MAAM59F,KAAM0C,EAAOk7F,OAExB7hG,KAAK4vI,UAAYjpI,EAAOipI,UACxB5vI,KAAK6oM,QAAUliM,EAAOkiM,QACtB7oM,KAAK8oM,SAAWniM,EAAOmiM,SAEvB9oM,KAAKmwI,IAAMxpI,EAAOwpI,IAEXnwI,IAER,KAACm4G,CAAA,CArCqB,CAASlgF,IAyC1B8wK,GAAyB,IAAIzsK,GAC7B0sK,GAAuB,IAAI1sK,GAC3B2sK,GAAiC,IAAI1sK,GACrC2sK,GAAuB,IAAIrvK,GAC3BsvK,GAA0B,IAAIrpF,GAE9BhF,GAAI,SAAAsuF,IAAA/gM,EAAAA,EAAAA,GAAAyyG,EAAAsuF,GAAA,IAAAC,GAAA9gM,EAAAA,EAAAA,GAAAuyG,GAET,SAAAA,IAAmF,IAAAwuF,EAAtEz7J,EAAQjtC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAI80C,GAAkBx4B,EAAQtc,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAIu3G,GAWlC,OAXqDzvG,EAAAA,EAAAA,GAAA,KAAAoyG,IAE/EwuF,EAAAD,EAAAjqM,KAAA,OAEK64G,QAAS,EAEdqxF,EAAKznM,KAAO,OAEZynM,EAAKz7J,SAAWA,EAChBy7J,EAAKpsL,SAAWA,EAEhBosL,EAAK74F,qBAAqB64F,CAE3B,CA2LC,OA3LA3+L,EAAAA,EAAAA,GAAAmwG,EAAA,EAAA70G,IAAA,OAAApG,MAED,SAAM8G,EAAQ+iI,GAOb,OALA39F,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA8uE,EAAA37G,WAAA,aAAAC,KAAA,KAAYuH,EAAQ+iI,GAEpB1pI,KAAKkd,SAAWvW,EAAOuW,SACvBld,KAAK6tC,SAAWlnC,EAAOknC,SAEhB7tC,IAER,GAAC,CAAAiG,IAAA,uBAAApG,MAED,WAEC,IAAMguC,EAAW7tC,KAAK6tC,SAItB,GAAwB,OAAnBA,EAASjoC,MAAiB,CAK9B,IAHA,IAAMiwI,EAAoBhoG,EAAS+6D,WAAWnjG,SACxC8jM,EAAgB,CAAE,GAEd3lM,EAAI,EAAGwS,EAAIy/H,EAAkBjzI,MAAOgB,EAAIwS,EAAGxS,IAEpDmlM,GAAS3/F,oBAAqBysC,EAAmBjyI,EAAI,GACrDolM,GAAO5/F,oBAAqBysC,EAAmBjyI,GAE/C2lM,EAAe3lM,GAAM2lM,EAAe3lM,EAAI,GACxC2lM,EAAe3lM,IAAOmlM,GAAS31K,WAAY41K,IAI5Cn7J,EAAS8H,aAAc,eAAgB,IAAIo9F,GAAwBw2D,EAAe,GAEnF,MAEC1mM,QAAQC,KAAM,iGAIf,OAAO9C,IAER,GAAC,CAAAiG,IAAA,UAAApG,MAED,SAASm3D,EAAWohF,GAEnB,IAAMvqG,EAAW7tC,KAAK6tC,SAChBmN,EAAch7C,KAAKg7C,YACnBwuJ,EAAYxyI,EAAUwP,OAAOs0C,KAAK0uF,UAClCx1D,EAAYnmG,EAASmmG,UAU3B,GANiC,OAA5BnmG,EAASoyE,gBAA0BpyE,EAASqmG,wBAEjDi1D,GAAUllM,KAAM4pC,EAASoyE,gBACzBkpF,GAAUjuJ,aAAcF,GACxBmuJ,GAAU97K,QAAUm8K,GAEiC,IAAhDxyI,EAAUh/C,IAAI4oH,iBAAkBuoE,IAArC,CAIAF,GAAiBhlM,KAAM+2C,GAAc2F,SACrCuoJ,GAAOjlM,KAAM+yD,EAAUh/C,KAAMkjC,aAAc+tJ,IAE3C,IAAMQ,EAAiBD,IAAgBxpM,KAAK2mB,MAAM3X,EAAIhP,KAAK2mB,MAAM1X,EAAIjP,KAAK2mB,MAAMzX,GAAM,GAChFw6L,EAAmBD,EAAiBA,EAEpCE,EAAS,IAAIrtK,GACbstK,EAAO,IAAIttK,GACXutK,EAAe,IAAIvtK,GACnBwtK,EAAW,IAAIxtK,GACfmJ,EAAOzlC,KAAK+/L,eAAiB,EAAI,EAEjCn6L,EAAQioC,EAASjoC,MAEjBiwI,EADahoG,EAAS+6D,WACSnjG,SAErC,GAAe,OAAVG,EAKJ,IAHA,IAGUhC,EAHIwQ,KAAKuC,IAAK,EAAGq9H,EAAU1sI,OAGhB8O,EAFThC,KAAKsC,IAAK9Q,EAAMhD,MAASoxI,EAAU1sI,MAAQ0sI,EAAUpxI,OAElC,EAAGgB,EAAIwS,EAAGxS,GAAK6hC,EAAO,CAEpD,IAAMtuB,EAAIvR,EAAM61F,KAAM73F,GAChBwO,EAAIxM,EAAM61F,KAAM73F,EAAI,GAO1B,GALA+lM,EAAOvgG,oBAAqBysC,EAAmB1+H,GAC/CyyL,EAAKxgG,oBAAqBysC,EAAmBzjI,KAE9B82L,GAAOa,oBAAqBJ,EAAQC,EAAME,EAAUD,GAErDH,GAAd,CAEAI,EAAS5uJ,aAAcl7C,KAAKg7C,aAE5B,IAAMlqB,EAAWkmC,EAAUh/C,IAAIypH,OAAOruG,WAAY02K,GAE7Ch5K,EAAWkmC,EAAU3lB,MAAQvgB,EAAWkmC,EAAUzlB,KAEvD6mG,EAAW91I,KAAM,CAEhBwuB,SAAUA,EAGV/L,MAAO8kL,EAAazpL,QAAQ86B,aAAcl7C,KAAKg7C,aAC/Cp1C,MAAOhC,EACPqc,KAAM,KACNw4H,UAAW,KACXz6G,OAAQh+B,MAjBgC,CAqB1C,MAOA,IAHA,IAGU4D,EAHIwQ,KAAKuC,IAAK,EAAGq9H,EAAU1sI,OAGhB8O,EAFThC,KAAKsC,IAAKm/H,EAAkBjzI,MAASoxI,EAAU1sI,MAAQ0sI,EAAUpxI,OAE9C,EAAGgB,EAAIwS,EAAGxS,GAAK6hC,EAAO,CAOpD,GALAkkK,EAAOvgG,oBAAqBysC,EAAmBjyI,GAC/CgmM,EAAKxgG,oBAAqBysC,EAAmBjyI,EAAI,KAElCslM,GAAOa,oBAAqBJ,EAAQC,EAAME,EAAUD,GAErDH,GAAd,CAEAI,EAAS5uJ,aAAcl7C,KAAKg7C,aAE5B,IAAMlqB,EAAWkmC,EAAUh/C,IAAIypH,OAAOruG,WAAY02K,GAE7Ch5K,EAAWkmC,EAAU3lB,MAAQvgB,EAAWkmC,EAAUzlB,KAEvD6mG,EAAW91I,KAAM,CAEhBwuB,SAAUA,EAGV/L,MAAO8kL,EAAazpL,QAAQ86B,aAAcl7C,KAAKg7C,aAC/Cp1C,MAAOhC,EACPqc,KAAM,KACNw4H,UAAW,KACXz6G,OAAQh+B,MAjBgC,CAqB1C,CA3FkE,CA+FpE,GAAC,CAAAiG,IAAA,qBAAApG,MAED,WAEC,IAEMo7G,EAFWj7G,KAAK6tC,SAEWotE,gBAC3B/0G,EAAO5G,OAAO4G,KAAM+0G,GAE1B,GAAK/0G,EAAK3D,OAAS,EAAI,CAEtB,IAAMqyI,EAAiB35B,EAAiB/0G,EAAM,IAE9C,QAAwB/E,IAAnByzI,EAA+B,CAEnC50I,KAAK2wG,sBAAwB,GAC7B3wG,KAAK6wG,sBAAwB,CAAC,EAE9B,IAAM,IAAI9uG,EAAI,EAAGo2I,EAAKvD,EAAeryI,OAAQR,EAAIo2I,EAAIp2I,IAAO,CAE3D,IAAM5B,EAAOy0I,EAAgB7yI,GAAI5B,MAAQwC,OAAQZ,GAEjD/B,KAAK2wG,sBAAsBruG,KAAM,GACjCtC,KAAK6wG,sBAAuB1wG,GAAS4B,CAEtC,CAED,CAED,CAED,KAAC+4G,CAAA,CA1MQ,CAASt+E,IA8MbwtK,GAAuB,IAAI1tK,GAC3B2tK,GAAqB,IAAI3tK,GAEzBu+E,GAAY,SAAAqvF,IAAA7hM,EAAAA,EAAAA,GAAAwyG,EAAAqvF,GAAA,IAAAC,GAAA5hM,EAAAA,EAAAA,GAAAsyG,GAEjB,SAAAA,EAAahtE,EAAU3wB,GAAW,IAAAktL,EAMN,OANM1hM,EAAAA,EAAAA,GAAA,KAAAmyG,IAEjCuvF,EAAAD,EAAA/qM,KAAA,KAAOyuC,EAAU3wB,IAEZ6iL,gBAAiB,EAEtBqK,EAAKvoM,KAAO,eAAeuoM,CAE5B,CAiCC,OAjCAz/L,EAAAA,EAAAA,GAAAkwG,EAAA,EAAA50G,IAAA,uBAAApG,MAED,WAEC,IAAMguC,EAAW7tC,KAAK6tC,SAItB,GAAwB,OAAnBA,EAASjoC,MAAiB,CAK9B,IAHA,IAAMiwI,EAAoBhoG,EAAS+6D,WAAWnjG,SACxC8jM,EAAgB,GAEZ3lM,EAAI,EAAGwS,EAAIy/H,EAAkBjzI,MAAOgB,EAAIwS,EAAGxS,GAAK,EAEzDomM,GAAO5gG,oBAAqBysC,EAAmBjyI,GAC/CqmM,GAAK7gG,oBAAqBysC,EAAmBjyI,EAAI,GAEjD2lM,EAAe3lM,GAAc,IAANA,EAAY,EAAI2lM,EAAe3lM,EAAI,GAC1D2lM,EAAe3lM,EAAI,GAAM2lM,EAAe3lM,GAAMomM,GAAO52K,WAAY62K,IAIlEp8J,EAAS8H,aAAc,eAAgB,IAAIo9F,GAAwBw2D,EAAe,GAEnF,MAEC1mM,QAAQC,KAAM,yGAIf,OAAO9C,IAER,KAAC66G,CAAA,CA3CgB,CAASC,IA+CrBC,GAAQ,SAAAsvF,IAAAhiM,EAAAA,EAAAA,GAAA0yG,EAAAsvF,GAAA,IAAAC,GAAA/hM,EAAAA,EAAAA,GAAAwyG,GAEb,SAAAA,EAAaltE,EAAU3wB,GAAW,IAAAqtL,EAMV,OANU7hM,EAAAA,EAAAA,GAAA,KAAAqyG,IAEjCwvF,EAAAD,EAAAlrM,KAAA,KAAOyuC,EAAU3wB,IAEZ8iL,YAAa,EAElBuK,EAAK1oM,KAAO,WAAW0oM,CAExB,CAAC,OAAA5/L,EAAAA,EAAAA,GAAAowG,EAAA,CAVY,CAASD,IAcjB/C,GAAc,SAAAyyF,IAAAniM,EAAAA,EAAAA,GAAA0vG,EAAAyyF,GAAA,IAAAC,GAAAliM,EAAAA,EAAAA,GAAAwvG,GAEnB,SAAAA,EAAavhE,GAAa,IAAAk0J,EAmBI,OAnBJhiM,EAAAA,EAAAA,GAAA,KAAAqvG,IAEzB2yF,EAAAD,EAAArrM,KAAA,OAEKs4L,kBAAmB,EAExBgT,EAAK7oM,KAAO,iBAEZ6oM,EAAK7oG,MAAQ,IAAIC,GAAO,UAExB4oG,EAAKxqK,IAAM,KAEXwqK,EAAKv8D,SAAW,KAEhBu8D,EAAK3gM,KAAO,EACZ2gM,EAAK1yF,iBAAkB,EAEvB0yF,EAAKv6D,KAAM,EAEXu6D,EAAKlzJ,UAAWhB,GAAak0J,CAE9B,CAmBC,OAnBA//L,EAAAA,EAAAA,GAAAotG,EAAA,EAAA9xG,IAAA,OAAApG,MAED,SAAM8G,GAeL,OAbAolC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA+rE,EAAA54G,WAAA,aAAAC,KAAA,KAAYuH,GAEZ3G,KAAK6hG,MAAM59F,KAAM0C,EAAOk7F,OAExB7hG,KAAKkgC,IAAMv5B,EAAOu5B,IAElBlgC,KAAKmuI,SAAWxnI,EAAOwnI,SAEvBnuI,KAAK+J,KAAOpD,EAAOoD,KACnB/J,KAAKg4G,gBAAkBrxG,EAAOqxG,gBAE9Bh4G,KAAKmwI,IAAMxpI,EAAOwpI,IAEXnwI,IAER,KAAC+3G,CAAA,CA1CkB,CAAS9/E,IA8CvB0yK,GAA+B,IAAIpuK,GACnCquK,GAAqB,IAAI/wK,GACzBgxK,GAAwB,IAAI/qF,GAC5BgrF,GAA4B,IAAIxuK,GAEhC0+E,GAAM,SAAA+vF,IAAA1iM,EAAAA,EAAAA,GAAA2yG,EAAA+vF,GAAA,IAAAC,GAAAziM,EAAAA,EAAAA,GAAAyyG,GAEX,SAAAA,IAAgF,IAAAiwF,EAAnEp9J,EAAQjtC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAI80C,GAAkBx4B,EAAQtc,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAIm3G,GAWlC,OAXkDrvG,EAAAA,EAAAA,GAAA,KAAAsyG,IAE5EiwF,EAAAD,EAAA5rM,KAAA,OAEKy4G,UAAW,EAEhBozF,EAAKppM,KAAO,SAEZopM,EAAKp9J,SAAWA,EAChBo9J,EAAK/tL,SAAWA,EAEhB+tL,EAAKx6F,qBAAqBw6F,CAE3B,CAuGC,OAvGAtgM,EAAAA,EAAAA,GAAAqwG,EAAA,EAAA/0G,IAAA,OAAApG,MAED,SAAM8G,EAAQ+iI,GAOb,OALA39F,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAgvE,EAAA77G,WAAA,aAAAC,KAAA,KAAYuH,EAAQ+iI,GAEpB1pI,KAAKkd,SAAWvW,EAAOuW,SACvBld,KAAK6tC,SAAWlnC,EAAOknC,SAEhB7tC,IAER,GAAC,CAAAiG,IAAA,UAAApG,MAED,SAASm3D,EAAWohF,GAEnB,IAAMvqG,EAAW7tC,KAAK6tC,SAChBmN,EAAch7C,KAAKg7C,YACnBwuJ,EAAYxyI,EAAUwP,OAAOw0C,OAAOwuF,UACpCx1D,EAAYnmG,EAASmmG,UAU3B,GANiC,OAA5BnmG,EAASoyE,gBAA0BpyE,EAASqmG,wBAEjD22D,GAAQ5mM,KAAM4pC,EAASoyE,gBACvB4qF,GAAQ3vJ,aAAcF,GACtB6vJ,GAAQx9K,QAAUm8K,GAEiC,IAA9CxyI,EAAUh/C,IAAI4oH,iBAAkBiqE,IAArC,CAIAF,GAAe1mM,KAAM+2C,GAAc2F,SACnCiqJ,GAAK3mM,KAAM+yD,EAAUh/C,KAAMkjC,aAAcyvJ,IAEzC,IAAMlB,EAAiBD,IAAgBxpM,KAAK2mB,MAAM3X,EAAIhP,KAAK2mB,MAAM1X,EAAIjP,KAAK2mB,MAAMzX,GAAM,GAChFw6L,EAAmBD,EAAiBA,EAEpC7jM,EAAQioC,EAASjoC,MAEjBiwI,EADahoG,EAAS+6D,WACSnjG,SAErC,GAAe,OAAVG,EAKJ,IAHA,IAGUhC,EAHIwQ,KAAKuC,IAAK,EAAGq9H,EAAU1sI,OAGhBopG,EAFTt8F,KAAKsC,IAAK9Q,EAAMhD,MAASoxI,EAAU1sI,MAAQ0sI,EAAUpxI,OAElCgB,EAAI8sG,EAAI9sG,IAAO,CAE7C,IAAMuT,EAAIvR,EAAM61F,KAAM73F,GAEtBknM,GAAY1hG,oBAAqBysC,EAAmB1+H,GAEpD+zL,GAAWJ,GAAa3zL,EAAGuyL,EAAkB1uJ,EAAagc,EAAWohF,EAAYp4I,KAElF,MAOA,IAHA,IAGU4D,EAHIwQ,KAAKuC,IAAK,EAAGq9H,EAAU1sI,OAGhB8O,EAFThC,KAAKsC,IAAKm/H,EAAkBjzI,MAASoxI,EAAU1sI,MAAQ0sI,EAAUpxI,OAE/CgB,EAAIwS,EAAGxS,IAEpCknM,GAAY1hG,oBAAqBysC,EAAmBjyI,GAEpDsnM,GAAWJ,GAAalnM,EAAG8lM,EAAkB1uJ,EAAagc,EAAWohF,EAAYp4I,KAtClB,CA4ClE,GAAC,CAAAiG,IAAA,qBAAApG,MAED,WAEC,IAEMo7G,EAFWj7G,KAAK6tC,SAEWotE,gBAC3B/0G,EAAO5G,OAAO4G,KAAM+0G,GAE1B,GAAK/0G,EAAK3D,OAAS,EAAI,CAEtB,IAAMqyI,EAAiB35B,EAAiB/0G,EAAM,IAE9C,QAAwB/E,IAAnByzI,EAA+B,CAEnC50I,KAAK2wG,sBAAwB,GAC7B3wG,KAAK6wG,sBAAwB,CAAC,EAE9B,IAAM,IAAI9uG,EAAI,EAAGo2I,EAAKvD,EAAeryI,OAAQR,EAAIo2I,EAAIp2I,IAAO,CAE3D,IAAM5B,EAAOy0I,EAAgB7yI,GAAI5B,MAAQwC,OAAQZ,GAEjD/B,KAAK2wG,sBAAsBruG,KAAM,GACjCtC,KAAK6wG,sBAAuB1wG,GAAS4B,CAEtC,CAED,CAED,CAED,KAACi5G,CAAA,CAtHU,CAASx+E,IA0HrB,SAAS0uK,GAAWnmL,EAAOnf,EAAO8jM,EAAkB1uJ,EAAagc,EAAWohF,EAAYp6G,GAEvF,IAAMmtK,EAAqBP,GAAKjpE,kBAAmB58G,GAEnD,GAAKomL,EAAqBzB,EAAmB,CAE5C,IAAMtuK,EAAiB,IAAIkB,GAE3BsuK,GAAKQ,oBAAqBrmL,EAAOqW,GACjCA,EAAe8f,aAAcF,GAE7B,IAAMlqB,EAAWkmC,EAAUh/C,IAAIypH,OAAOruG,WAAYgI,GAElD,GAAKtK,EAAWkmC,EAAU3lB,MAAQvgB,EAAWkmC,EAAUzlB,IAAM,OAE7D6mG,EAAW91I,KAAM,CAEhBwuB,SAAUA,EACVu6K,cAAej3L,KAAKC,KAAM82L,GAC1BpmL,MAAOqW,EACPx1B,MAAOA,EACPqa,KAAM,KACN+d,OAAQA,GAIV,CAED,CAAC,IAEKstK,GAAY,SAAAC,IAAAljM,EAAAA,EAAAA,GAAAijM,EAAAC,GAAA,IAAAC,GAAAjjM,EAAAA,EAAAA,GAAA+iM,GAEjB,SAAAA,EAAaG,EAAO96J,EAAS8lE,EAAOC,EAAOnqE,EAAWF,EAAWhC,EAAQxoC,EAAMwkG,GAAa,IAAAqlG,GAAAhjM,EAAAA,EAAAA,GAAA,KAAA4iM,IAE3FI,EAAAF,EAAApsM,KAAA,KAAOqsM,EAAO96J,EAAS8lE,EAAOC,EAAOnqE,EAAWF,EAAWhC,EAAQxoC,EAAMwkG,IAEpE8rE,gBAAiB,EAEtBu5B,EAAKr/J,eAA0BlrC,IAAdkrC,EAA0BA,EAAYC,GACvDo/J,EAAKn/J,eAA0BprC,IAAdorC,EAA0BA,EAAYD,GAEvDo/J,EAAKl/J,iBAAkB,EAEvB,IAAMkT,GAAK3B,EAAAA,EAAAA,GAAA2tJ,GAaV,MAJI,8BAA+BD,GAEnCA,EAAME,2BATP,SAASC,IAERlsJ,EAAMrf,aAAc,EACpBorK,EAAME,0BAA2BC,EAElC,IAMCF,CAEF,CAmBC,OAnBA/gM,EAAAA,EAAAA,GAAA2gM,EAAA,EAAArlM,IAAA,QAAApG,MAED,WAEC,OAAO,IAAIG,KAAK4zD,YAAa5zD,KAAKmtC,OAAQlpC,KAAMjE,KAEjD,GAAC,CAAAiG,IAAA,SAAApG,MAED,WAEC,IAAM4rM,EAAQzrM,KAAKmtC,OAGY,IAFD,8BAA+Bs+J,GAErBA,EAAMI,YAAcJ,EAAMK,oBAEjE9rM,KAAKqgC,aAAc,EAIrB,KAACirK,CAAA,CA/CgB,CAASp0F,IAmDrB60F,GAAkB,SAAAC,IAAA3jM,EAAAA,EAAAA,GAAA0jM,EAAAC,GAAA,IAAAC,GAAA1jM,EAAAA,EAAAA,GAAAwjM,GAEvB,SAAAA,EAAavhK,EAAOC,EAAQJ,GAAS,IAAA6hK,EAaZ,OAbYxjM,EAAAA,EAAAA,GAAA,KAAAqjM,IAEpCG,EAAAD,EAAA7sM,KAAA,KAAO,CAAEorC,MAAAA,EAAOC,OAAAA,KAEXs5I,sBAAuB,EAE5BmoB,EAAK7hK,OAASA,EAEd6hK,EAAK3/J,UAAYwhE,GACjBm+F,EAAK7/J,UAAY0hE,GAEjBm+F,EAAK1/J,iBAAkB,EAEvB0/J,EAAK7rK,aAAc,EAAK6rK,CAEzB,CAAC,OAAAvhM,EAAAA,EAAAA,GAAAohM,EAAA,CAjBsB,CAAS70F,IAqB3Bi1F,GAAiB,SAAAC,IAAA/jM,EAAAA,EAAAA,GAAA8jM,EAAAC,GAAA,IAAAC,GAAA9jM,EAAAA,EAAAA,GAAA4jM,GAEtB,SAAAA,EAAa91E,EAAS7rF,EAAOC,EAAQJ,EAAQxoC,EAAM8uC,EAAS8lE,EAAOC,EAAOnqE,EAAWF,EAAWg6D,EAAYj6D,GAAW,IAAAkgK,EAiBzF,OAjByF5jM,EAAAA,EAAAA,GAAA,KAAAyjM,IAEtHG,EAAAD,EAAAjtM,KAAA,KAAO,KAAMuxC,EAAS8lE,EAAOC,EAAOnqE,EAAWF,EAAWhC,EAAQxoC,EAAMwkG,EAAYj6D,IAE/E43I,qBAAsB,EAE3BsoB,EAAKn/J,MAAQ,CAAE3C,MAAOA,EAAOC,OAAQA,GACrC6hK,EAAKj2E,QAAUA,EAKfi2E,EAAK7/J,OAAQ,EAKb6/J,EAAK9/J,iBAAkB,EAAM8/J,CAE9B,CAAC,OAAA3hM,EAAAA,EAAAA,GAAAwhM,EAAA,CArBqB,CAASj1F,IAyB1Bq1F,GAAa,SAAAC,IAAAnkM,EAAAA,EAAAA,GAAAkkM,EAAAC,GAAA,IAAAC,GAAAlkM,EAAAA,EAAAA,GAAAgkM,GAElB,SAAAA,EAAanoI,EAAQzzB,EAAS8lE,EAAOC,EAAOnqE,EAAWF,EAAWhC,EAAQxoC,EAAMwkG,GAAa,IAAAqmG,EAMpE,OANoEhkM,EAAAA,EAAAA,GAAA,KAAA6jM,IAE5FG,EAAAD,EAAArtM,KAAA,KAAOglE,EAAQzzB,EAAS8lE,EAAOC,EAAOnqE,EAAWF,EAAWhC,EAAQxoC,EAAMwkG,IAErEsmG,iBAAkB,EAEvBD,EAAKrsK,aAAc,EAAKqsK,CAEzB,CAAC,OAAA/hM,EAAAA,EAAAA,GAAA4hM,EAAA,CAViB,CAASr1F,IA4CtB01F,GAAK,WAEV,SAAAA,KAAclkM,EAAAA,EAAAA,GAAA,KAAAkkM,GAEb5sM,KAAK6B,KAAO,QAEZ7B,KAAK6sM,mBAAqB,GAE3B,CA+WC,OA5WDliM,EAAAA,EAAAA,GAAAiiM,EAAA,EAAA3mM,IAAA,WAAApG,MAEA,WAGC,OADAgD,QAAQC,KAAM,6CACP,IAER,GAGA,CAAAmD,IAAA,aAAApG,MAEA,SAAYwW,EAAGy2L,GAEd,IAAM36L,EAAInS,KAAK+sM,eAAgB12L,GAC/B,OAAOrW,KAAKgtM,SAAU76L,EAAG26L,EAE1B,GAEA,CAAA7mM,IAAA,YAAApG,MAEA,WAIC,IAJ0B,IAAhBotM,EAASrsM,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAEhBqV,EAAS,GAELoB,EAAI,EAAGA,GAAK41L,EAAW51L,IAEhCpB,EAAO3T,KAAMtC,KAAKgtM,SAAU31L,EAAI41L,IAIjC,OAAOh3L,CAER,GAEA,CAAAhQ,IAAA,kBAAApG,MAEA,WAIC,IAJgC,IAAhBotM,EAASrsM,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAEtBqV,EAAS,GAELoB,EAAI,EAAGA,GAAK41L,EAAW51L,IAEhCpB,EAAO3T,KAAMtC,KAAKktM,WAAY71L,EAAI41L,IAInC,OAAOh3L,CAER,GAEA,CAAAhQ,IAAA,YAAApG,MAEA,WAEC,IAAMstM,EAAUntM,KAAKotM,aACrB,OAAOD,EAASA,EAAQ5qM,OAAS,EAElC,GAEA,CAAA0D,IAAA,aAAApG,MAEA,WAAkD,IAAtCotM,EAASrsM,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAGZ,KAAK6sM,mBAE5B,GAAK7sM,KAAKqtM,iBACPrtM,KAAKqtM,gBAAgB9qM,SAAW0qM,EAAY,IAC5CjtM,KAAKqgC,YAEP,OAAOrgC,KAAKqtM,gBAIbrtM,KAAKqgC,aAAc,EAEnB,IACIlD,EADEyE,EAAQ,GACD0vB,EAAOtxD,KAAKgtM,SAAU,GAC/BtvC,EAAM,EAEV97H,EAAMt/B,KAAM,GAEZ,IAAM,IAAImQ,EAAI,EAAGA,GAAKw6L,EAAWx6L,IAGhCirJ,IADAvgI,EAAUn9B,KAAKgtM,SAAUv6L,EAAIw6L,IACd75K,WAAYk+B,GAC3B1vB,EAAMt/B,KAAMo7J,GACZpsG,EAAOn0B,EAMR,OAFAn9B,KAAKqtM,gBAAkBzrK,EAEhBA,CAER,GAAC,CAAA37B,IAAA,mBAAApG,MAED,WAECG,KAAKqgC,aAAc,EACnBrgC,KAAKotM,YAEN,GAEA,CAAAnnM,IAAA,iBAAApG,MAEA,SAAgBwW,EAAGya,GAElB,IAKIw8K,EALEC,EAAavtM,KAAKotM,aAEpBxpM,EAAI,EACF8sG,EAAK68F,EAAWhrM,OAMrB+qM,EAFIx8K,GAMcza,EAAIk3L,EAAY78F,EAAK,GAQxC,IAFA,IAA4B88F,EAAxB3+E,EAAM,EAAGC,EAAOpe,EAAK,EAEjBme,GAAOC,GAMd,IAFA0+E,EAAaD,EAFb3pM,EAAIwQ,KAAKi5B,MAAOwhF,GAAQC,EAAOD,GAAQ,IAERy+E,GAEb,EAEjBz+E,EAAMjrH,EAAI,MAEJ,MAAK4pM,EAAa,GAIlB,CAEN1+E,EAAOlrH,EACP,KAID,CATCkrH,EAAOlrH,EAAI,CASZ,CAMD,GAAK2pM,EAFL3pM,EAAIkrH,KAEqBw+E,EAExB,OAAO1pM,GAAM8sG,EAAK,GAMnB,IAAM+8F,EAAeF,EAAY3pM,GAajC,OAFYA,GAJc0pM,EAAkBG,IANxBF,EAAY3pM,EAAI,GAEA6pM,KAQE/8F,EAAK,EAI5C,GAKA,CAAAzqG,IAAA,aAAApG,MAEA,SAAYsS,EAAG26L,GAEd,IAAM93K,EAAQ,KACVngB,EAAK1C,EAAI6iB,EACTlgB,EAAK3C,EAAI6iB,EAIRngB,EAAK,IAAIA,EAAK,GACdC,EAAK,IAAIA,EAAK,GAEnB,IAAM44L,EAAM1tM,KAAKgtM,SAAUn4L,GACrB84L,EAAM3tM,KAAKgtM,SAAUl4L,GAErB4iG,EAAUo1F,IAAsBY,EAAI59E,UAAc,IAAI18E,GAAY,IAAI9W,IAI5E,OAFAo7E,EAAQzzG,KAAM0pM,GAAM5sJ,IAAK2sJ,GAAMp0L,YAExBo+F,CAER,GAAC,CAAAzxG,IAAA,eAAApG,MAED,SAAcwW,EAAGy2L,GAEhB,IAAM36L,EAAInS,KAAK+sM,eAAgB12L,GAC/B,OAAOrW,KAAK4tM,WAAYz7L,EAAG26L,EAE5B,GAAC,CAAA7mM,IAAA,sBAAApG,MAED,SAAqBguM,EAAUC,GAe9B,IAXA,IAAM9oL,EAAS,IAAIsX,GAEb3iB,EAAW,GACXwF,EAAU,GACV4uL,EAAY,GAEZC,EAAM,IAAI1xK,GACV+/E,EAAM,IAAI9/E,GAIN34B,EAAI,EAAGA,GAAKiqM,EAAUjqM,IAAO,CAEtC,IAAMyS,EAAIzS,EAAIiqM,EAEdl0L,EAAU/V,GAAM5D,KAAKiuM,aAAc53L,EAAG,IAAIimB,GAE3C,CAKAnd,EAAS,GAAM,IAAImd,GACnByxK,EAAW,GAAM,IAAIzxK,GACrB,IAAI5lB,EAAM/W,OAAO2hB,UACX2O,EAAK7b,KAAKgB,IAAKuE,EAAU,GAAI3K,GAC7BkhB,EAAK9b,KAAKgB,IAAKuE,EAAU,GAAI1K,GAC7BkhB,EAAK/b,KAAKgB,IAAKuE,EAAU,GAAIzK,GAE9B+gB,GAAMvZ,IAEVA,EAAMuZ,EACNjL,EAAOvgB,IAAK,EAAG,EAAG,IAIdyrB,GAAMxZ,IAEVA,EAAMwZ,EACNlL,EAAOvgB,IAAK,EAAG,EAAG,IAId0rB,GAAMzZ,GAEVsO,EAAOvgB,IAAK,EAAG,EAAG,GAInBupM,EAAIhpJ,aAAcrrC,EAAU,GAAKqL,GAAS1L,YAE1C6F,EAAS,GAAI6lC,aAAcrrC,EAAU,GAAKq0L,GAC1CD,EAAW,GAAI/oJ,aAAcrrC,EAAU,GAAKwF,EAAS,IAKrD,IAAM,IAAIvb,EAAI,EAAGA,GAAKiqM,EAAUjqM,IAAO,CAQtC,GANAub,EAASvb,GAAMub,EAASvb,EAAI,GAAIwc,QAEhC2tL,EAAWnqM,GAAMmqM,EAAWnqM,EAAI,GAAIwc,QAEpC4tL,EAAIhpJ,aAAcrrC,EAAU/V,EAAI,GAAK+V,EAAU/V,IAE1CoqM,EAAIzrM,SAAW5C,OAAO86H,QAAU,CAEpCuzE,EAAI10L,YAEJ,IAAM+lC,EAAQjrC,KAAKmF,KAAMm0G,GAAO/zG,EAAU/V,EAAI,GAAI4Q,IAAKmF,EAAU/V,KAAS,EAAG,IAE7Eub,EAASvb,GAAIs3C,aAAcmhE,EAAI6xF,iBAAkBF,EAAK3uJ,GAEvD,CAEA0uJ,EAAWnqM,GAAIohD,aAAcrrC,EAAU/V,GAAKub,EAASvb,GAEtD,CAIA,IAAgB,IAAXkqM,EAAkB,CAEtB,IAAIzuJ,EAAQjrC,KAAKmF,KAAMm0G,GAAOvuG,EAAS,GAAI3K,IAAK2K,EAAS0uL,KAAgB,EAAG,IAC5ExuJ,GAASwuJ,EAEJl0L,EAAU,GAAInF,IAAKw5L,EAAIhpJ,aAAc7lC,EAAS,GAAKA,EAAS0uL,KAAiB,IAEjFxuJ,GAAUA,GAIX,IAAM,IAAIz7C,EAAI,EAAGA,GAAKiqM,EAAUjqM,IAG/Bub,EAASvb,GAAIs3C,aAAcmhE,EAAI6xF,iBAAkBv0L,EAAU/V,GAAKy7C,EAAQz7C,IACxEmqM,EAAWnqM,GAAIohD,aAAcrrC,EAAU/V,GAAKub,EAASvb,GAIvD,CAEA,MAAO,CACN+V,SAAUA,EACVwF,QAASA,EACT4uL,UAAWA,EAGb,GAAC,CAAA9nM,IAAA,QAAApG,MAED,WAEC,OAAO,IAAIG,KAAK4zD,aAAc3vD,KAAMjE,KAErC,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAM8G,GAIL,OAFA3G,KAAK6sM,mBAAqBlmM,EAAOkmM,mBAE1B7sM,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,WAEC,IAAM8M,EAAO,CACZkqH,SAAU,CACTxuD,QAAS,IACTxmE,KAAM,QACNi1H,UAAW,iBAOb,OAHAnqH,EAAKkgM,mBAAqB7sM,KAAK6sM,mBAC/BlgM,EAAK9K,KAAO7B,KAAK6B,KAEV8K,CAER,GAAC,CAAA1G,IAAA,WAAApG,MAED,SAAUq+F,GAIT,OAFAl+F,KAAK6sM,mBAAqB3uG,EAAK2uG,mBAExB7sM,IAER,KAAC4sM,CAAA,CAvXS,GA2XLuB,GAAY,SAAAC,IAAA/lM,EAAAA,EAAAA,GAAA8lM,EAAAC,GAAA,IAAAC,GAAA9lM,EAAAA,EAAAA,GAAA4lM,GAEjB,SAAAA,IAAqI,IAAAG,EAAxHC,EAAE3tM,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAG4tM,EAAE5tM,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAG6tM,EAAO7tM,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAG8tM,EAAO9tM,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAG+tM,EAAW/tM,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGguM,EAAShuM,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAa,EAAVwT,KAAKyF,GAAQg1L,EAAUjuM,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,IAAAA,UAAA,GAAUkuM,EAASluM,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAmBrG,OAnBsG8H,EAAAA,EAAAA,GAAA,KAAAylM,IAEjIG,EAAAD,EAAAjvM,KAAA,OAEK2vM,gBAAiB,EAEtBT,EAAKzsM,KAAO,eAEZysM,EAAKC,GAAKA,EACVD,EAAKE,GAAKA,EAEVF,EAAKG,QAAUA,EACfH,EAAKI,QAAUA,EAEfJ,EAAKK,YAAcA,EACnBL,EAAKM,UAAYA,EAEjBN,EAAKO,WAAaA,EAElBP,EAAKQ,UAAYA,EAAUR,CAE5B,CA6HC,OA7HA3jM,EAAAA,EAAAA,GAAAwjM,EAAA,EAAAloM,IAAA,WAAApG,MAED,SAAUsS,EAAG26L,GASZ,IAPA,IAAM/nL,EAAQ+nL,GAAkB,IAAI15J,GAE9B47J,EAAkB,EAAV56L,KAAKyF,GACfo1L,EAAajvM,KAAK4uM,UAAY5uM,KAAK2uM,YACjCO,EAAa96L,KAAKgB,IAAK65L,GAAetvM,OAAO86H,QAG3Cw0E,EAAa,GAAIA,GAAcD,EACvC,KAAQC,EAAaD,GAAQC,GAAcD,EAEtCC,EAAatvM,OAAO86H,UAIvBw0E,EAFIC,EAES,EAIAF,IAMU,IAApBhvM,KAAK6uM,YAAyBK,IAE7BD,IAAeD,EAEnBC,GAAeD,EAIfC,GAA0BD,GAM5B,IAAM91L,EAAQlZ,KAAK2uM,YAAcx8L,EAAI88L,EACjCjgM,EAAIhP,KAAKuuM,GAAKvuM,KAAKyuM,QAAUr6L,KAAKgF,IAAKF,GACvCjK,EAAIjP,KAAKwuM,GAAKxuM,KAAK0uM,QAAUt6L,KAAK+E,IAAKD,GAE3C,GAAwB,IAAnBlZ,KAAK8uM,UAAkB,CAE3B,IAAM11L,EAAMhF,KAAKgF,IAAKpZ,KAAK8uM,WACrB31L,EAAM/E,KAAK+E,IAAKnZ,KAAK8uM,WAErB7+K,EAAKjhB,EAAIhP,KAAKuuM,GACdr+K,EAAKjhB,EAAIjP,KAAKwuM,GAGpBx/L,EAAIihB,EAAK7W,EAAM8W,EAAK/W,EAAMnZ,KAAKuuM,GAC/Bt/L,EAAIghB,EAAK9W,EAAM+W,EAAK9W,EAAMpZ,KAAKwuM,EAEhC,CAEA,OAAOzpL,EAAMtgB,IAAKuK,EAAGC,EAEtB,GAAC,CAAAhJ,IAAA,OAAApG,MAED,SAAM8G,GAiBL,OAfAolC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAmiK,EAAAhvM,WAAA,aAAAC,KAAA,KAAYuH,GAEZ3G,KAAKuuM,GAAK5nM,EAAO4nM,GACjBvuM,KAAKwuM,GAAK7nM,EAAO6nM,GAEjBxuM,KAAKyuM,QAAU9nM,EAAO8nM,QACtBzuM,KAAK0uM,QAAU/nM,EAAO+nM,QAEtB1uM,KAAK2uM,YAAchoM,EAAOgoM,YAC1B3uM,KAAK4uM,UAAYjoM,EAAOioM,UAExB5uM,KAAK6uM,WAAaloM,EAAOkoM,WAEzB7uM,KAAK8uM,UAAYnoM,EAAOmoM,UAEjB9uM,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,WAEC,IAAM8M,GAAIo/B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAmiK,EAAAhvM,WAAA,eAAAC,KAAA,MAeV,OAbAuN,EAAK4hM,GAAKvuM,KAAKuuM,GACf5hM,EAAK6hM,GAAKxuM,KAAKwuM,GAEf7hM,EAAK8hM,QAAUzuM,KAAKyuM,QACpB9hM,EAAK+hM,QAAU1uM,KAAK0uM,QAEpB/hM,EAAKgiM,YAAc3uM,KAAK2uM,YACxBhiM,EAAKiiM,UAAY5uM,KAAK4uM,UAEtBjiM,EAAKkiM,WAAa7uM,KAAK6uM,WAEvBliM,EAAKmiM,UAAY9uM,KAAK8uM,UAEfniM,CAER,GAAC,CAAA1G,IAAA,WAAApG,MAED,SAAUq+F,GAiBT,OAfAnyD,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAmiK,EAAAhvM,WAAA,iBAAAC,KAAA,KAAgB8+F,GAEhBl+F,KAAKuuM,GAAKrwG,EAAKqwG,GACfvuM,KAAKwuM,GAAKtwG,EAAKswG,GAEfxuM,KAAKyuM,QAAUvwG,EAAKuwG,QACpBzuM,KAAK0uM,QAAUxwG,EAAKwwG,QAEpB1uM,KAAK2uM,YAAczwG,EAAKywG,YACxB3uM,KAAK4uM,UAAY1wG,EAAK0wG,UAEtB5uM,KAAK6uM,WAAa3wG,EAAK2wG,WAEvB7uM,KAAK8uM,UAAY5wG,EAAK4wG,UAEf9uM,IAER,KAACmuM,CAAA,CApJgB,CAASvB,IAwJrBuC,GAAQ,SAAAC,IAAA/mM,EAAAA,EAAAA,GAAA8mM,EAAAC,GAAA,IAAAC,GAAA9mM,EAAAA,EAAAA,GAAA4mM,GAEb,SAAAA,EAAaZ,EAAIC,EAAIc,EAASX,EAAaC,EAAWC,GAAa,IAAAU,EAM3C,OAN2C7mM,EAAAA,EAAAA,GAAA,KAAAymM,IAElEI,EAAAF,EAAAjwM,KAAA,KAAOmvM,EAAIC,EAAIc,EAASA,EAASX,EAAaC,EAAWC,IAEpDW,YAAa,EAElBD,EAAK1tM,KAAO,WAAW0tM,CAExB,CAAC,OAAA5kM,EAAAA,EAAAA,GAAAwkM,EAAA,CAVY,CAAShB,IAkCvB,SAASsB,KAER,IAAIC,EAAK,EAAG9zL,EAAK,EAAGC,EAAK,EAAGC,EAAK,EAUjC,SAAS/b,EAAMs8H,EAAII,EAAI5wB,EAAIh3F,GAE1B66L,EAAKrzE,EACLzgH,EAAKiwF,EACLhwF,GAAO,EAAIwgH,EAAK,EAAII,EAAK,EAAI5wB,EAAKh3F,EAClCiH,EAAK,EAAIugH,EAAK,EAAII,EAAK5wB,EAAKh3F,CAE7B,CAEA,MAAO,CAEN86L,eAAgB,SAAWtzE,EAAII,EAAItpH,EAAIy8L,EAAIC,GAE1C9vM,EAAM08H,EAAItpH,EAAI08L,GAAY18L,EAAKkpH,GAAMwzE,GAAYD,EAAKnzE,GAEvD,EAEAqzE,yBAA0B,SAAWzzE,EAAII,EAAItpH,EAAIy8L,EAAIG,EAAKC,EAAKC,GAG9D,IAAIp7L,GAAO4nH,EAAKJ,GAAO0zE,GAAQ58L,EAAKkpH,IAAS0zE,EAAMC,IAAU78L,EAAKspH,GAAOuzE,EACrEl7L,GAAO3B,EAAKspH,GAAOuzE,GAAQJ,EAAKnzE,IAASuzE,EAAMC,IAAUL,EAAKz8L,GAAO88L,EAMzElwM,EAAM08H,EAAItpH,EAHV0B,GAAMm7L,EACNl7L,GAAMk7L,EAIP,EAEAE,KAAM,SAAW/9L,GAEhB,IAAM2C,EAAK3C,EAAIA,EAEf,OAAOu9L,EAAK9zL,EAAKzJ,EAAI0J,EAAK/G,EAAKgH,GADpBhH,EAAK3C,EAGjB,EAIF,CAIA,IAAM4B,GAAoB,IAAIuoB,GACxB7nB,GAAmB,IAAIg7L,GACvB/6L,GAAmB,IAAI+6L,GACvB96L,GAAmB,IAAI86L,GAEvBU,GAAgB,SAAAC,IAAA/nM,EAAAA,EAAAA,GAAA8nM,EAAAC,GAAA,IAAAC,GAAA9nM,EAAAA,EAAAA,GAAA4nM,GAErB,SAAAA,IAAqF,IAAAG,EAAxEr6L,EAAMrV,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAIktM,EAAMltM,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,IAAAA,UAAA,GAAU2vM,EAAS3vM,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,cAAeivM,EAAOjvM,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAWvD,OAX0D8H,EAAAA,EAAAA,GAAA,KAAAynM,IAEjFG,EAAAD,EAAAjxM,KAAA,OAEKoxM,oBAAqB,EAE1BF,EAAKzuM,KAAO,mBAEZyuM,EAAKr6L,OAASA,EACdq6L,EAAKxC,OAASA,EACdwC,EAAKC,UAAYA,EACjBD,EAAKT,QAAUA,EAAQS,CAExB,CAsJC,OAtJA3lM,EAAAA,EAAAA,GAAAwlM,EAAA,EAAAlqM,IAAA,WAAApG,MAED,SAAUsS,GAAoC,IAsBzCk6F,EAAIk/B,EApBFxmH,EAFoBnkB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAI07B,GAI3BrmB,EAASjW,KAAKiW,OACdG,EAAIH,EAAO1T,OAEXkQ,GAAM2D,GAAMpW,KAAK8tM,OAAS,EAAI,IAAQ37L,EACxCs+L,EAAWr8L,KAAKi5B,MAAO56B,GACvBkrJ,EAASlrJ,EAAIg+L,EAEZzwM,KAAK8tM,OAET2C,GAAYA,EAAW,EAAI,GAAMr8L,KAAKi5B,MAAOj5B,KAAKgB,IAAKq7L,GAAar6L,GAAM,GAAMA,EAE1D,IAAXunJ,GAAgB8yC,IAAar6L,EAAI,IAE5Cq6L,EAAWr6L,EAAI,EACfunJ,EAAS,GAML39J,KAAK8tM,QAAU2C,EAAW,EAE9BpkG,EAAKp2F,GAAUw6L,EAAW,GAAMr6L,IAKhCrC,GAAIqnC,WAAYnlC,EAAQ,GAAKA,EAAQ,IAAM6R,IAAK7R,EAAQ,IACxDo2F,EAAKt4F,IAIN,IAAMw4F,EAAKt2F,EAAQw6L,EAAWr6L,GACxBgqH,EAAKnqH,GAAUw6L,EAAW,GAAMr6L,GActC,GAZKpW,KAAK8tM,QAAU2C,EAAW,EAAIr6L,EAElCm1H,EAAKt1H,GAAUw6L,EAAW,GAAMr6L,IAKhCrC,GAAIqnC,WAAYnlC,EAAQG,EAAI,GAAKH,EAAQG,EAAI,IAAM0R,IAAK7R,EAAQG,EAAI,IACpEm1H,EAAKx3H,IAIkB,gBAAnB/T,KAAKuwM,WAAkD,YAAnBvwM,KAAKuwM,UAA0B,CAGvE,IAAMz2L,EAAyB,YAAnB9Z,KAAKuwM,UAA0B,GAAM,IAC7CR,EAAM37L,KAAK0F,IAAKuyF,EAAGnqD,kBAAmBqqD,GAAMzyF,GAC5Ck2L,EAAM57L,KAAK0F,IAAKyyF,EAAGrqD,kBAAmBk+E,GAAMtmH,GAC5Cm2L,EAAM77L,KAAK0F,IAAKsmH,EAAGl+E,kBAAmBqpF,GAAMzxH,GAG3Ck2L,EAAM,OAAOA,EAAM,GACnBD,EAAM,OAAOA,EAAMC,GACnBC,EAAM,OAAOA,EAAMD,GAExBv7L,GAAGq7L,yBAA0BzjG,EAAGr9F,EAAGu9F,EAAGv9F,EAAGoxH,EAAGpxH,EAAGu8H,EAAGv8H,EAAG+gM,EAAKC,EAAKC,GAC/Dv7L,GAAGo7L,yBAA0BzjG,EAAGp9F,EAAGs9F,EAAGt9F,EAAGmxH,EAAGnxH,EAAGs8H,EAAGt8H,EAAG8gM,EAAKC,EAAKC,GAC/Dt7L,GAAGm7L,yBAA0BzjG,EAAGn9F,EAAGq9F,EAAGr9F,EAAGkxH,EAAGlxH,EAAGq8H,EAAGr8H,EAAG6gM,EAAKC,EAAKC,EAEhE,KAA+B,eAAnBjwM,KAAKuwM,YAEhB97L,GAAGk7L,eAAgBtjG,EAAGr9F,EAAGu9F,EAAGv9F,EAAGoxH,EAAGpxH,EAAGu8H,EAAGv8H,EAAGhP,KAAK6vM,SAChDn7L,GAAGi7L,eAAgBtjG,EAAGp9F,EAAGs9F,EAAGt9F,EAAGmxH,EAAGnxH,EAAGs8H,EAAGt8H,EAAGjP,KAAK6vM,SAChDl7L,GAAGg7L,eAAgBtjG,EAAGn9F,EAAGq9F,EAAGr9F,EAAGkxH,EAAGlxH,EAAGq8H,EAAGr8H,EAAGlP,KAAK6vM,UAUjD,OANA9qL,EAAMtgB,IACLgQ,GAAGy7L,KAAMvyC,GACTjpJ,GAAGw7L,KAAMvyC,GACThpJ,GAAGu7L,KAAMvyC,IAGH54I,CAER,GAAC,CAAA9e,IAAA,OAAApG,MAED,SAAM8G,IAELolC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAmkK,EAAAhxM,WAAA,aAAAC,KAAA,KAAYuH,GAEZ3G,KAAKiW,OAAS,GAEd,IAAM,IAAIrS,EAAI,EAAGwS,EAAIzP,EAAOsP,OAAO1T,OAAQqB,EAAIwS,EAAGxS,IAAO,CAExD,IAAMmhB,EAAQpe,EAAOsP,OAAQrS,GAE7B5D,KAAKiW,OAAO3T,KAAMyiB,EAAM3E,QAEzB,CAMA,OAJApgB,KAAK8tM,OAASnnM,EAAOmnM,OACrB9tM,KAAKuwM,UAAY5pM,EAAO4pM,UACxBvwM,KAAK6vM,QAAUlpM,EAAOkpM,QAEf7vM,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,WAEC,IAAM8M,GAAIo/B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAmkK,EAAAhxM,WAAA,eAAAC,KAAA,MAEVuN,EAAKsJ,OAAS,GAEd,IAAM,IAAIrS,EAAI,EAAGwS,EAAIpW,KAAKiW,OAAO1T,OAAQqB,EAAIwS,EAAGxS,IAAO,CAEtD,IAAMmhB,EAAQ/kB,KAAKiW,OAAQrS,GAC3B+I,EAAKsJ,OAAO3T,KAAMyiB,EAAM0Y,UAEzB,CAMA,OAJA9wB,EAAKmhM,OAAS9tM,KAAK8tM,OACnBnhM,EAAK4jM,UAAYvwM,KAAKuwM,UACtB5jM,EAAKkjM,QAAU7vM,KAAK6vM,QAEbljM,CAER,GAAC,CAAA1G,IAAA,WAAApG,MAED,SAAUq+F,IAETnyD,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAmkK,EAAAhxM,WAAA,iBAAAC,KAAA,KAAgB8+F,GAEhBl+F,KAAKiW,OAAS,GAEd,IAAM,IAAIrS,EAAI,EAAGwS,EAAI8nF,EAAKjoF,OAAO1T,OAAQqB,EAAIwS,EAAGxS,IAAO,CAEtD,IAAMmhB,EAAQm5E,EAAKjoF,OAAQrS,GAC3B5D,KAAKiW,OAAO3T,MAAM,IAAIg6B,IAAUkB,UAAWzY,GAE5C,CAMA,OAJA/kB,KAAK8tM,OAAS5vG,EAAK4vG,OACnB9tM,KAAKuwM,UAAYryG,EAAKqyG,UACtBvwM,KAAK6vM,QAAU3xG,EAAK2xG,QAEb7vM,IAER,KAACmwM,CAAA,CArKoB,CAASvD,IA8K/B,SAAS8D,GAAYv+L,EAAGk6F,EAAIE,EAAI6zB,EAAImL,GAEnC,IAAM9wG,EAAmB,IAAZ2lG,EAAK/zB,GACZxwE,EAAmB,IAAZ0vG,EAAKh/B,GACZz3F,EAAK3C,EAAIA,EAEf,OAAS,EAAIo6F,EAAK,EAAI6zB,EAAK3lG,EAAKoB,IADrB1pB,EAAI2C,KACiC,EAAIy3F,EAAK,EAAI6zB,EAAK,EAAI3lG,EAAKoB,GAAO/mB,EAAK2lB,EAAKtoB,EAAIo6F,CAEjG,CAuBA,SAASokG,GAAiBx+L,EAAGk6F,EAAIE,EAAI6zB,GAEpC,OArBD,SAA4BjuH,EAAGM,GAE9B,IAAMC,EAAI,EAAIP,EACd,OAAOO,EAAIA,EAAID,CAEhB,CAgBQm+L,CAAmBz+L,EAAGk6F,GAd9B,SAA4Bl6F,EAAGM,GAE9B,OAAO,GAAM,EAAIN,GAAMA,EAAIM,CAE5B,CAUqCo+L,CAAmB1+L,EAAGo6F,GAR3D,SAA4Bp6F,EAAGM,GAE9B,OAAON,EAAIA,EAAIM,CAEhB,CAKEq+L,CAAmB3+L,EAAGiuH,EAExB,CA8BA,SAAS2wE,GAAa5+L,EAAGk6F,EAAIE,EAAI6zB,EAAImL,GAEpC,OA5BD,SAAwBp5H,EAAGM,GAE1B,IAAMC,EAAI,EAAIP,EACd,OAAOO,EAAIA,EAAIA,EAAID,CAEpB,CAuBQu+L,CAAe7+L,EAAGk6F,GArB1B,SAAwBl6F,EAAGM,GAE1B,IAAMC,EAAI,EAAIP,EACd,OAAO,EAAIO,EAAIA,EAAIP,EAAIM,CAExB,CAgBiCw+L,CAAe9+L,EAAGo6F,GAdnD,SAAwBp6F,EAAGM,GAE1B,OAAO,GAAM,EAAIN,GAAMA,EAAIA,EAAIM,CAEhC,CAU0Dy+L,CAAe/+L,EAAGiuH,GAR5E,SAAwBjuH,EAAGM,GAE1B,OAAON,EAAIA,EAAIA,EAAIM,CAEpB,CAKE0+L,CAAeh/L,EAAGo5H,EAEpB,CAAC,IAEK6lE,GAAgB,SAAAC,IAAAhpM,EAAAA,EAAAA,GAAA+oM,EAAAC,GAAA,IAAAC,GAAA/oM,EAAAA,EAAAA,GAAA6oM,GAErB,SAAAA,IAA8F,IAAAG,EAAjF92K,EAAE75B,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAIwyC,GAAWvX,EAAEj7B,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAIwyC,GAAWtX,EAAEl7B,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAIwyC,GAAWo+J,EAAE5wM,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAIwyC,GAWpE,OAX6E1qC,EAAAA,EAAAA,GAAA,KAAA0oM,IAE1FG,EAAAD,EAAAlyM,KAAA,OAEKqyM,oBAAqB,EAE1BF,EAAK1vM,KAAO,mBAEZ0vM,EAAK92K,GAAKA,EACV82K,EAAK11K,GAAKA,EACV01K,EAAKz1K,GAAKA,EACVy1K,EAAKC,GAAKA,EAAGD,CAEd,CAsDC,OAtDA5mM,EAAAA,EAAAA,GAAAymM,EAAA,EAAAnrM,IAAA,WAAApG,MAED,SAAUsS,GAAoC,IAEvC4S,EAFoBnkB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAIwyC,GAI3B3Y,EAAKz6B,KAAKy6B,GAAIoB,EAAK77B,KAAK67B,GAAIC,EAAK97B,KAAK87B,GAAI01K,EAAKxxM,KAAKwxM,GAO1D,OALAzsL,EAAMtgB,IACLssM,GAAa5+L,EAAGsoB,EAAGzrB,EAAG6sB,EAAG7sB,EAAG8sB,EAAG9sB,EAAGwiM,EAAGxiM,GACrC+hM,GAAa5+L,EAAGsoB,EAAGxrB,EAAG4sB,EAAG5sB,EAAG6sB,EAAG7sB,EAAGuiM,EAAGviM,IAG/B8V,CAER,GAAC,CAAA9e,IAAA,OAAApG,MAED,SAAM8G,GASL,OAPAolC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAolK,EAAAjyM,WAAA,aAAAC,KAAA,KAAYuH,GAEZ3G,KAAKy6B,GAAGx2B,KAAM0C,EAAO8zB,IACrBz6B,KAAK67B,GAAG53B,KAAM0C,EAAOk1B,IACrB77B,KAAK87B,GAAG73B,KAAM0C,EAAOm1B,IACrB97B,KAAKwxM,GAAGvtM,KAAM0C,EAAO6qM,IAEdxxM,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,WAEC,IAAM8M,GAAIo/B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAolK,EAAAjyM,WAAA,eAAAC,KAAA,MAOV,OALAuN,EAAK8tB,GAAKz6B,KAAKy6B,GAAGgD,UAClB9wB,EAAKkvB,GAAK77B,KAAK67B,GAAG4B,UAClB9wB,EAAKmvB,GAAK97B,KAAK87B,GAAG2B,UAClB9wB,EAAK6kM,GAAKxxM,KAAKwxM,GAAG/zK,UAEX9wB,CAER,GAAC,CAAA1G,IAAA,WAAApG,MAED,SAAUq+F,GAST,OAPAnyD,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAolK,EAAAjyM,WAAA,iBAAAC,KAAA,KAAgB8+F,GAEhBl+F,KAAKy6B,GAAG+C,UAAW0gE,EAAKzjE,IACxBz6B,KAAK67B,GAAG2B,UAAW0gE,EAAKriE,IACxB77B,KAAK87B,GAAG0B,UAAW0gE,EAAKpiE,IACxB97B,KAAKwxM,GAAGh0K,UAAW0gE,EAAKszG,IAEjBxxM,IAER,KAACoxM,CAAA,CArEoB,CAASxE,IAyEzB8E,GAAiB,SAAAC,IAAAtpM,EAAAA,EAAAA,GAAAqpM,EAAAC,GAAA,IAAAC,GAAArpM,EAAAA,EAAAA,GAAAmpM,GAEtB,SAAAA,IAA8F,IAAAG,EAAjFp3K,EAAE75B,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAI07B,GAAWT,EAAEj7B,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAI07B,GAAWR,EAAEl7B,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAI07B,GAAWk1K,EAAE5wM,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAI07B,GAWpE,OAX6E5zB,EAAAA,EAAAA,GAAA,KAAAgpM,IAE1FG,EAAAD,EAAAxyM,KAAA,OAEK0yM,qBAAsB,EAE3BD,EAAKhwM,KAAO,oBAEZgwM,EAAKp3K,GAAKA,EACVo3K,EAAKh2K,GAAKA,EACVg2K,EAAK/1K,GAAKA,EACV+1K,EAAKL,GAAKA,EAAGK,CAEd,CAuDC,OAvDAlnM,EAAAA,EAAAA,GAAA+mM,EAAA,EAAAzrM,IAAA,WAAApG,MAED,SAAUsS,GAAoC,IAEvC4S,EAFoBnkB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAI07B,GAI3B7B,EAAKz6B,KAAKy6B,GAAIoB,EAAK77B,KAAK67B,GAAIC,EAAK97B,KAAK87B,GAAI01K,EAAKxxM,KAAKwxM,GAQ1D,OANAzsL,EAAMtgB,IACLssM,GAAa5+L,EAAGsoB,EAAGzrB,EAAG6sB,EAAG7sB,EAAG8sB,EAAG9sB,EAAGwiM,EAAGxiM,GACrC+hM,GAAa5+L,EAAGsoB,EAAGxrB,EAAG4sB,EAAG5sB,EAAG6sB,EAAG7sB,EAAGuiM,EAAGviM,GACrC8hM,GAAa5+L,EAAGsoB,EAAGvrB,EAAG2sB,EAAG3sB,EAAG4sB,EAAG5sB,EAAGsiM,EAAGtiM,IAG/B6V,CAER,GAAC,CAAA9e,IAAA,OAAApG,MAED,SAAM8G,GASL,OAPAolC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA0lK,EAAAvyM,WAAA,aAAAC,KAAA,KAAYuH,GAEZ3G,KAAKy6B,GAAGx2B,KAAM0C,EAAO8zB,IACrBz6B,KAAK67B,GAAG53B,KAAM0C,EAAOk1B,IACrB77B,KAAK87B,GAAG73B,KAAM0C,EAAOm1B,IACrB97B,KAAKwxM,GAAGvtM,KAAM0C,EAAO6qM,IAEdxxM,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,WAEC,IAAM8M,GAAIo/B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA0lK,EAAAvyM,WAAA,eAAAC,KAAA,MAOV,OALAuN,EAAK8tB,GAAKz6B,KAAKy6B,GAAGgD,UAClB9wB,EAAKkvB,GAAK77B,KAAK67B,GAAG4B,UAClB9wB,EAAKmvB,GAAK97B,KAAK87B,GAAG2B,UAClB9wB,EAAK6kM,GAAKxxM,KAAKwxM,GAAG/zK,UAEX9wB,CAER,GAAC,CAAA1G,IAAA,WAAApG,MAED,SAAUq+F,GAST,OAPAnyD,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA0lK,EAAAvyM,WAAA,iBAAAC,KAAA,KAAgB8+F,GAEhBl+F,KAAKy6B,GAAG+C,UAAW0gE,EAAKzjE,IACxBz6B,KAAK67B,GAAG2B,UAAW0gE,EAAKriE,IACxB77B,KAAK87B,GAAG0B,UAAW0gE,EAAKpiE,IACxB97B,KAAKwxM,GAAGh0K,UAAW0gE,EAAKszG,IAEjBxxM,IAER,KAAC0xM,CAAA,CAtEqB,CAAS9E,IA0E1BmF,GAAS,SAAAC,IAAA3pM,EAAAA,EAAAA,GAAA0pM,EAAAC,GAAA,IAAAC,GAAA1pM,EAAAA,EAAAA,GAAAwpM,GAEd,SAAAA,IAAsD,IAAAG,EAAzCr2K,EAAEj7B,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAIwyC,GAAWtX,EAAEl7B,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAIwyC,GAS5B,OATqC1qC,EAAAA,EAAAA,GAAA,KAAAqpM,IAElDG,EAAAD,EAAA7yM,KAAA,OAEK+yM,aAAc,EAEnBD,EAAKrwM,KAAO,YAEZqwM,EAAKr2K,GAAKA,EACVq2K,EAAKp2K,GAAKA,EAAGo2K,CAEd,CAqEC,OArEAvnM,EAAAA,EAAAA,GAAAonM,EAAA,EAAA9rM,IAAA,WAAApG,MAED,SAAUsS,GAAoC,IAEvC4S,EAFoBnkB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAIwyC,GAejC,OAXW,IAANjhC,EAEJ4S,EAAM9gB,KAAMjE,KAAK87B,KAIjB/W,EAAM9gB,KAAMjE,KAAK87B,IAAKilB,IAAK/gD,KAAK67B,IAChC9W,EAAMuvB,eAAgBniC,GAAI2V,IAAK9nB,KAAK67B,KAI9B9W,CAER,GAEA,CAAA9e,IAAA,aAAApG,MACA,SAAYwW,EAAGy2L,GAEd,OAAO9sM,KAAKgtM,SAAU32L,EAAGy2L,EAE1B,GAAC,CAAA7mM,IAAA,aAAApG,MAED,SAAYsS,EAAG26L,GAEd,IAAMp1F,EAAUo1F,GAAkB,IAAI15J,GAItC,OAFAskE,EAAQzzG,KAAMjE,KAAK87B,IAAKilB,IAAK/gD,KAAK67B,IAAKviB,YAEhCo+F,CAER,GAAC,CAAAzxG,IAAA,OAAApG,MAED,SAAM8G,GAOL,OALAolC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA+lK,EAAA5yM,WAAA,aAAAC,KAAA,KAAYuH,GAEZ3G,KAAK67B,GAAG53B,KAAM0C,EAAOk1B,IACrB77B,KAAK87B,GAAG73B,KAAM0C,EAAOm1B,IAEd97B,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,WAEC,IAAM8M,GAAIo/B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA+lK,EAAA5yM,WAAA,eAAAC,KAAA,MAKV,OAHAuN,EAAKkvB,GAAK77B,KAAK67B,GAAG4B,UAClB9wB,EAAKmvB,GAAK97B,KAAK87B,GAAG2B,UAEX9wB,CAER,GAAC,CAAA1G,IAAA,WAAApG,MAED,SAAUq+F,GAOT,OALAnyD,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA+lK,EAAA5yM,WAAA,iBAAAC,KAAA,KAAgB8+F,GAEhBl+F,KAAK67B,GAAG2B,UAAW0gE,EAAKriE,IACxB77B,KAAK87B,GAAG0B,UAAW0gE,EAAKpiE,IAEjB97B,IAER,KAAC+xM,CAAA,CAlFa,CAASnF,IAsFlBwF,GAAU,SAAAC,IAAAhqM,EAAAA,EAAAA,GAAA+pM,EAAAC,GAAA,IAAAC,GAAA/pM,EAAAA,EAAAA,GAAA6pM,GAEf,SAAAA,IAAsD,IAAAG,EAAzC12K,EAAEj7B,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAI07B,GAAWR,EAAEl7B,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAI07B,GAS5B,OATqC5zB,EAAAA,EAAAA,GAAA,KAAA0pM,IAElDG,EAAAD,EAAAlzM,KAAA,OAEKozM,cAAe,EAEpBD,EAAK1wM,KAAO,aAEZ0wM,EAAK12K,GAAKA,EACV02K,EAAKz2K,GAAKA,EAAGy2K,CAEd,CAsDC,OAtDA5nM,EAAAA,EAAAA,GAAAynM,EAAA,EAAAnsM,IAAA,WAAApG,MACD,SAAUsS,GAAoC,IAEvC4S,EAFoBnkB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAI07B,GAejC,OAXW,IAANnqB,EAEJ4S,EAAM9gB,KAAMjE,KAAK87B,KAIjB/W,EAAM9gB,KAAMjE,KAAK87B,IAAKilB,IAAK/gD,KAAK67B,IAChC9W,EAAMuvB,eAAgBniC,GAAI2V,IAAK9nB,KAAK67B,KAI9B9W,CAER,GACA,CAAA9e,IAAA,aAAApG,MACA,SAAYwW,EAAGy2L,GAEd,OAAO9sM,KAAKgtM,SAAU32L,EAAGy2L,EAE1B,GAAC,CAAA7mM,IAAA,OAAApG,MACD,SAAM8G,GAOL,OALAolC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAomK,EAAAjzM,WAAA,aAAAC,KAAA,KAAYuH,GAEZ3G,KAAK67B,GAAG53B,KAAM0C,EAAOk1B,IACrB77B,KAAK87B,GAAG73B,KAAM0C,EAAOm1B,IAEd97B,IAER,GAAC,CAAAiG,IAAA,SAAApG,MACD,WAEC,IAAM8M,GAAIo/B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAomK,EAAAjzM,WAAA,eAAAC,KAAA,MAKV,OAHAuN,EAAKkvB,GAAK77B,KAAK67B,GAAG4B,UAClB9wB,EAAKmvB,GAAK97B,KAAK87B,GAAG2B,UAEX9wB,CAER,GAAC,CAAA1G,IAAA,WAAApG,MACD,SAAUq+F,GAOT,OALAnyD,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAomK,EAAAjzM,WAAA,iBAAAC,KAAA,KAAgB8+F,GAEhBl+F,KAAK67B,GAAG2B,UAAW0gE,EAAKriE,IACxB77B,KAAK87B,GAAG0B,UAAW0gE,EAAKpiE,IAEjB97B,IAER,KAACoyM,CAAA,CAnEc,CAASxF,IAuEnB6F,GAAoB,SAAAC,IAAArqM,EAAAA,EAAAA,GAAAoqM,EAAAC,GAAA,IAAAC,GAAApqM,EAAAA,EAAAA,GAAAkqM,GAEzB,SAAAA,IAA0E,IAAAG,EAA7Dn4K,EAAE75B,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAIwyC,GAAWvX,EAAEj7B,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAIwyC,GAAWtX,EAAEl7B,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAIwyC,GAUhD,OAVyD1qC,EAAAA,EAAAA,GAAA,KAAA+pM,IAEtEG,EAAAD,EAAAvzM,KAAA,OAEKyzM,wBAAyB,EAE9BD,EAAK/wM,KAAO,uBAEZ+wM,EAAKn4K,GAAKA,EACVm4K,EAAK/2K,GAAKA,EACV+2K,EAAK92K,GAAKA,EAAG82K,CAEd,CAmDC,OAnDAjoM,EAAAA,EAAAA,GAAA8nM,EAAA,EAAAxsM,IAAA,WAAApG,MAED,SAAUsS,GAAoC,IAEvC4S,EAFoBnkB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAIwyC,GAI3B3Y,EAAKz6B,KAAKy6B,GAAIoB,EAAK77B,KAAK67B,GAAIC,EAAK97B,KAAK87B,GAO5C,OALA/W,EAAMtgB,IACLksM,GAAiBx+L,EAAGsoB,EAAGzrB,EAAG6sB,EAAG7sB,EAAG8sB,EAAG9sB,GACnC2hM,GAAiBx+L,EAAGsoB,EAAGxrB,EAAG4sB,EAAG5sB,EAAG6sB,EAAG7sB,IAG7B8V,CAER,GAAC,CAAA9e,IAAA,OAAApG,MAED,SAAM8G,GAQL,OANAolC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAymK,EAAAtzM,WAAA,aAAAC,KAAA,KAAYuH,GAEZ3G,KAAKy6B,GAAGx2B,KAAM0C,EAAO8zB,IACrBz6B,KAAK67B,GAAG53B,KAAM0C,EAAOk1B,IACrB77B,KAAK87B,GAAG73B,KAAM0C,EAAOm1B,IAEd97B,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,WAEC,IAAM8M,GAAIo/B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAymK,EAAAtzM,WAAA,eAAAC,KAAA,MAMV,OAJAuN,EAAK8tB,GAAKz6B,KAAKy6B,GAAGgD,UAClB9wB,EAAKkvB,GAAK77B,KAAK67B,GAAG4B,UAClB9wB,EAAKmvB,GAAK97B,KAAK87B,GAAG2B,UAEX9wB,CAER,GAAC,CAAA1G,IAAA,WAAApG,MAED,SAAUq+F,GAQT,OANAnyD,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAymK,EAAAtzM,WAAA,iBAAAC,KAAA,KAAgB8+F,GAEhBl+F,KAAKy6B,GAAG+C,UAAW0gE,EAAKzjE,IACxBz6B,KAAK67B,GAAG2B,UAAW0gE,EAAKriE,IACxB77B,KAAK87B,GAAG0B,UAAW0gE,EAAKpiE,IAEjB97B,IAER,KAACyyM,CAAA,CAjEwB,CAAS7F,IAqE7BkG,GAAqB,SAAAC,IAAA1qM,EAAAA,EAAAA,GAAAyqM,EAAAC,GAAA,IAAAC,GAAAzqM,EAAAA,EAAAA,GAAAuqM,GAE1B,SAAAA,IAA0E,IAAAG,EAA7Dx4K,EAAE75B,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAI07B,GAAWT,EAAEj7B,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAI07B,GAAWR,EAAEl7B,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAI07B,GAUhD,OAVyD5zB,EAAAA,EAAAA,GAAA,KAAAoqM,IAEtEG,EAAAD,EAAA5zM,KAAA,OAEK8zM,yBAA0B,EAE/BD,EAAKpxM,KAAO,wBAEZoxM,EAAKx4K,GAAKA,EACVw4K,EAAKp3K,GAAKA,EACVo3K,EAAKn3K,GAAKA,EAAGm3K,CAEd,CAoDC,OApDAtoM,EAAAA,EAAAA,GAAAmoM,EAAA,EAAA7sM,IAAA,WAAApG,MAED,SAAUsS,GAAoC,IAEvC4S,EAFoBnkB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAI07B,GAI3B7B,EAAKz6B,KAAKy6B,GAAIoB,EAAK77B,KAAK67B,GAAIC,EAAK97B,KAAK87B,GAQ5C,OANA/W,EAAMtgB,IACLksM,GAAiBx+L,EAAGsoB,EAAGzrB,EAAG6sB,EAAG7sB,EAAG8sB,EAAG9sB,GACnC2hM,GAAiBx+L,EAAGsoB,EAAGxrB,EAAG4sB,EAAG5sB,EAAG6sB,EAAG7sB,GACnC0hM,GAAiBx+L,EAAGsoB,EAAGvrB,EAAG2sB,EAAG3sB,EAAG4sB,EAAG5sB,IAG7B6V,CAER,GAAC,CAAA9e,IAAA,OAAApG,MAED,SAAM8G,GAQL,OANAolC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA8mK,EAAA3zM,WAAA,aAAAC,KAAA,KAAYuH,GAEZ3G,KAAKy6B,GAAGx2B,KAAM0C,EAAO8zB,IACrBz6B,KAAK67B,GAAG53B,KAAM0C,EAAOk1B,IACrB77B,KAAK87B,GAAG73B,KAAM0C,EAAOm1B,IAEd97B,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,WAEC,IAAM8M,GAAIo/B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA8mK,EAAA3zM,WAAA,eAAAC,KAAA,MAMV,OAJAuN,EAAK8tB,GAAKz6B,KAAKy6B,GAAGgD,UAClB9wB,EAAKkvB,GAAK77B,KAAK67B,GAAG4B,UAClB9wB,EAAKmvB,GAAK97B,KAAK87B,GAAG2B,UAEX9wB,CAER,GAAC,CAAA1G,IAAA,WAAApG,MAED,SAAUq+F,GAQT,OANAnyD,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA8mK,EAAA3zM,WAAA,iBAAAC,KAAA,KAAgB8+F,GAEhBl+F,KAAKy6B,GAAG+C,UAAW0gE,EAAKzjE,IACxBz6B,KAAK67B,GAAG2B,UAAW0gE,EAAKriE,IACxB77B,KAAK87B,GAAG0B,UAAW0gE,EAAKpiE,IAEjB97B,IAER,KAAC8yM,CAAA,CAlEyB,CAASlG,IAsE9BuG,GAAW,SAAAC,IAAA/qM,EAAAA,EAAAA,GAAA8qM,EAAAC,GAAA,IAAAC,GAAA9qM,EAAAA,EAAAA,GAAA4qM,GAEhB,SAAAA,IAA2B,IAAAG,EAAdr9L,EAAMrV,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAQA,OARE8H,EAAAA,EAAAA,GAAA,KAAAyqM,IAEvBG,EAAAD,EAAAj0M,KAAA,OAEKm0M,eAAgB,EAErBD,EAAKzxM,KAAO,cAEZyxM,EAAKr9L,OAASA,EAAOq9L,CAEtB,CA4EC,OA5EA3oM,EAAAA,EAAAA,GAAAwoM,EAAA,EAAAltM,IAAA,WAAApG,MAED,SAAUsS,GAAoC,IAEvC4S,EAFoBnkB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAIwyC,GAI3Bn9B,EAASjW,KAAKiW,OACdxD,GAAMwD,EAAO1T,OAAS,GAAM4P,EAE5Bs+L,EAAWr8L,KAAKi5B,MAAO56B,GACvBkrJ,EAASlrJ,EAAIg+L,EAEbpkG,EAAKp2F,EAAqB,IAAbw6L,EAAiBA,EAAWA,EAAW,GACpDlkG,EAAKt2F,EAAQw6L,GACbrwE,EAAKnqH,EAAQw6L,EAAWx6L,EAAO1T,OAAS,EAAI0T,EAAO1T,OAAS,EAAIkuM,EAAW,GAC3EllE,EAAKt1H,EAAQw6L,EAAWx6L,EAAO1T,OAAS,EAAI0T,EAAO1T,OAAS,EAAIkuM,EAAW,GAOjF,OALA1rL,EAAMtgB,IACLisM,GAAY/yC,EAAQtxD,EAAGr9F,EAAGu9F,EAAGv9F,EAAGoxH,EAAGpxH,EAAGu8H,EAAGv8H,GACzC0hM,GAAY/yC,EAAQtxD,EAAGp9F,EAAGs9F,EAAGt9F,EAAGmxH,EAAGnxH,EAAGs8H,EAAGt8H,IAGnC8V,CAER,GAAC,CAAA9e,IAAA,OAAApG,MAED,SAAM8G,IAELolC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAmnK,EAAAh0M,WAAA,aAAAC,KAAA,KAAYuH,GAEZ3G,KAAKiW,OAAS,GAEd,IAAM,IAAIrS,EAAI,EAAGwS,EAAIzP,EAAOsP,OAAO1T,OAAQqB,EAAIwS,EAAGxS,IAAO,CAExD,IAAMmhB,EAAQpe,EAAOsP,OAAQrS,GAE7B5D,KAAKiW,OAAO3T,KAAMyiB,EAAM3E,QAEzB,CAEA,OAAOpgB,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,WAEC,IAAM8M,GAAIo/B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAmnK,EAAAh0M,WAAA,eAAAC,KAAA,MAEVuN,EAAKsJ,OAAS,GAEd,IAAM,IAAIrS,EAAI,EAAGwS,EAAIpW,KAAKiW,OAAO1T,OAAQqB,EAAIwS,EAAGxS,IAAO,CAEtD,IAAMmhB,EAAQ/kB,KAAKiW,OAAQrS,GAC3B+I,EAAKsJ,OAAO3T,KAAMyiB,EAAM0Y,UAEzB,CAEA,OAAO9wB,CAER,GAAC,CAAA1G,IAAA,WAAApG,MAED,SAAUq+F,IAETnyD,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAmnK,EAAAh0M,WAAA,iBAAAC,KAAA,KAAgB8+F,GAEhBl+F,KAAKiW,OAAS,GAEd,IAAM,IAAIrS,EAAI,EAAGwS,EAAI8nF,EAAKjoF,OAAO1T,OAAQqB,EAAIwS,EAAGxS,IAAO,CAEtD,IAAMmhB,EAAQm5E,EAAKjoF,OAAQrS,GAC3B5D,KAAKiW,OAAO3T,MAAM,IAAI8wC,IAAU5V,UAAWzY,GAE5C,CAEA,OAAO/kB,IAER,KAACmzM,CAAA,CAxFe,CAASvG,IA4FtB4G,GAAsBl0M,OAAOqqE,OAAO,CACvC84C,UAAW,KACX0sF,SAAUA,GACVgB,iBAAkBA,GAClBiB,iBAAkBA,GAClBM,kBAAmBA,GACnBvD,aAAcA,GACd4D,UAAWA,GACXK,WAAYA,GACZK,qBAAsBA,GACtBK,sBAAuBA,GACvBK,YAAaA,KAQRM,GAAS,SAAAC,IAAArrM,EAAAA,EAAAA,GAAAorM,EAAAC,GAAA,IAAAC,GAAAprM,EAAAA,EAAAA,GAAAkrM,GAEd,SAAAA,IAAc,IAAAG,EAOW,OAPXlrM,EAAAA,EAAAA,GAAA,KAAA+qM,IAEbG,EAAAD,EAAAv0M,KAAA,OAEKyC,KAAO,YAEZ+xM,EAAKC,OAAS,GACdD,EAAKE,WAAY,EAAOF,CAEzB,CAmOC,OAnOAjpM,EAAAA,EAAAA,GAAA8oM,EAAA,EAAAxtM,IAAA,MAAApG,MAED,SAAKk0M,GAEJ/zM,KAAK6zM,OAAOvxM,KAAMyxM,EAEnB,GAAC,CAAA9tM,IAAA,YAAApG,MAED,WAGC,IAAMm0M,EAAah0M,KAAK6zM,OAAQ,GAAI7G,SAAU,GACxCiH,EAAWj0M,KAAK6zM,OAAQ7zM,KAAK6zM,OAAOtxM,OAAS,GAAIyqM,SAAU,GAE1DgH,EAAW/zE,OAAQg0E,IAEzBj0M,KAAK6zM,OAAOvxM,KAAM,IAAIyvM,GAAWkC,EAAUD,GAI7C,GASA,CAAA/tM,IAAA,WAAApG,MAEA,SAAUsS,EAAG26L,GAQZ,IANA,IAAMz1L,EAAIlF,EAAInS,KAAKk0M,YACbC,EAAen0M,KAAKo0M,kBACtBxwM,EAAI,EAIAA,EAAIuwM,EAAa5xM,QAAS,CAEjC,GAAK4xM,EAAcvwM,IAAOyT,EAAI,CAE7B,IAAMuqD,EAAOuyI,EAAcvwM,GAAMyT,EAC3B08L,EAAQ/zM,KAAK6zM,OAAQjwM,GAErBywM,EAAgBN,EAAMG,YACtB79L,EAAsB,IAAlBg+L,EAAsB,EAAI,EAAIzyI,EAAOyyI,EAE/C,OAAON,EAAM7G,WAAY72L,EAAGy2L,EAE7B,CAEAlpM,GAED,CAEA,OAAO,IAIR,GAIA,CAAAqC,IAAA,YAAApG,MAEA,WAEC,IAAMy0M,EAAOt0M,KAAKo0M,kBAClB,OAAOE,EAAMA,EAAK/xM,OAAS,EAE5B,GAEA,CAAA0D,IAAA,mBAAApG,MACA,WAECG,KAAKqgC,aAAc,EACnBrgC,KAAKu0M,aAAe,KACpBv0M,KAAKo0M,iBAEN,GAGA,CAAAnuM,IAAA,kBAAApG,MAEA,WAIC,GAAKG,KAAKu0M,cAAgBv0M,KAAKu0M,aAAahyM,SAAWvC,KAAK6zM,OAAOtxM,OAElE,OAAOvC,KAAKu0M,aAUb,IAHA,IAAMpH,EAAU,GACZqH,EAAO,EAED5wM,EAAI,EAAGwS,EAAIpW,KAAK6zM,OAAOtxM,OAAQqB,EAAIwS,EAAGxS,IAE/C4wM,GAAQx0M,KAAK6zM,OAAQjwM,GAAIswM,YACzB/G,EAAQ7qM,KAAMkyM,GAMf,OAFAx0M,KAAKu0M,aAAepH,EAEbA,CAER,GAAC,CAAAlnM,IAAA,kBAAApG,MAED,WAIC,IAJiC,IAAjBotM,EAASrsM,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAEtBqV,EAAS,GAELrS,EAAI,EAAGA,GAAKqpM,EAAWrpM,IAEhCqS,EAAO3T,KAAMtC,KAAKgtM,SAAUppM,EAAIqpM,IAUjC,OANKjtM,KAAK8zM,WAET79L,EAAO3T,KAAM2T,EAAQ,IAIfA,CAER,GAAC,CAAAhQ,IAAA,YAAApG,MAED,WAKC,IAL2B,IAGvByxD,EAHM27I,EAASrsM,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAEhBqV,EAAS,GAGLrS,EAAI,EAAGiwM,EAAS7zM,KAAK6zM,OAAQjwM,EAAIiwM,EAAOtxM,OAAQqB,IAUzD,IARA,IAAMmwM,EAAQF,EAAQjwM,GAChB6tC,EAAasiK,EAAMhF,eAA6B,EAAZ9B,EACrC8G,EAAM5B,aAAe4B,EAAMvB,aAAiB,EAC7CuB,EAAMR,cAAgBtG,EAAY8G,EAAM99L,OAAO1T,OAC9C0qM,EAECwH,EAAMV,EAAMW,UAAWjjK,GAEnBp/B,EAAI,EAAGA,EAAIoiM,EAAIlyM,OAAQ8P,IAAO,CAEvC,IAAM0S,EAAQ0vL,EAAKpiM,GAEdi/C,GAAQA,EAAK2uE,OAAQl7G,KAE1B9O,EAAO3T,KAAMyiB,GACbusC,EAAOvsC,EAER,CAUD,OANK/kB,KAAK8zM,WAAa79L,EAAO1T,OAAS,IAAO0T,EAAQA,EAAO1T,OAAS,GAAI09H,OAAQhqH,EAAQ,KAEzFA,EAAO3T,KAAM2T,EAAQ,IAIfA,CAER,GAAC,CAAAhQ,IAAA,OAAApG,MAED,SAAM8G,IAELolC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAynK,EAAAt0M,WAAA,aAAAC,KAAA,KAAYuH,GAEZ3G,KAAK6zM,OAAS,GAEd,IAAM,IAAIjwM,EAAI,EAAGwS,EAAIzP,EAAOktM,OAAOtxM,OAAQqB,EAAIwS,EAAGxS,IAAO,CAExD,IAAMmwM,EAAQptM,EAAOktM,OAAQjwM,GAE7B5D,KAAK6zM,OAAOvxM,KAAMyxM,EAAM3zL,QAEzB,CAIA,OAFApgB,KAAK8zM,UAAYntM,EAAOmtM,UAEjB9zM,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,WAEC,IAAM8M,GAAIo/B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAynK,EAAAt0M,WAAA,eAAAC,KAAA,MAEVuN,EAAKmnM,UAAY9zM,KAAK8zM,UACtBnnM,EAAKknM,OAAS,GAEd,IAAM,IAAIjwM,EAAI,EAAGwS,EAAIpW,KAAK6zM,OAAOtxM,OAAQqB,EAAIwS,EAAGxS,IAAO,CAEtD,IAAMmwM,EAAQ/zM,KAAK6zM,OAAQjwM,GAC3B+I,EAAKknM,OAAOvxM,KAAMyxM,EAAMh9E,SAEzB,CAEA,OAAOpqH,CAER,GAAC,CAAA1G,IAAA,WAAApG,MAED,SAAUq+F,IAETnyD,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAynK,EAAAt0M,WAAA,iBAAAC,KAAA,KAAgB8+F,GAEhBl+F,KAAK8zM,UAAY51G,EAAK41G,UACtB9zM,KAAK6zM,OAAS,GAEd,IAAM,IAAIjwM,EAAI,EAAGwS,EAAI8nF,EAAK21G,OAAOtxM,OAAQqB,EAAIwS,EAAGxS,IAAO,CAEtD,IAAMmwM,EAAQ71G,EAAK21G,OAAQjwM,GAC3B5D,KAAK6zM,OAAOvxM,MAAM,IAAIkxM,GAAQO,EAAMlyM,OAAS8yM,SAAUZ,GAExD,CAEA,OAAO/zM,IAER,KAACyzM,CAAA,CA9Oa,CAAS7G,IAkPlBgI,GAAI,SAAAC,IAAAxsM,EAAAA,EAAAA,GAAAusM,EAAAC,GAAA,IAAAC,GAAAvsM,EAAAA,EAAAA,GAAAqsM,GAET,SAAAA,EAAa3+L,GAAS,IAAA8+L,EAYpB,OAZoBrsM,EAAAA,EAAAA,GAAA,KAAAksM,IAErBG,EAAAD,EAAA11M,KAAA,OAEKyC,KAAO,OAEZkzM,EAAKC,aAAe,IAAI5hK,GAEnBn9B,GAEJ8+L,EAAKj9L,cAAe7B,GAEpB8+L,CAEF,CAsKC,OAtKApqM,EAAAA,EAAAA,GAAAiqM,EAAA,EAAA3uM,IAAA,gBAAApG,MAED,SAAeoW,GAEdjW,KAAKi1M,OAAQh/L,EAAQ,GAAIjH,EAAGiH,EAAQ,GAAIhH,GAExC,IAAM,IAAIrL,EAAI,EAAGwS,EAAIH,EAAO1T,OAAQqB,EAAIwS,EAAGxS,IAE1C5D,KAAKk1M,OAAQj/L,EAAQrS,GAAIoL,EAAGiH,EAAQrS,GAAIqL,GAIzC,OAAOjP,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQmP,EAAGC,GAIV,OAFAjP,KAAKg1M,aAAavwM,IAAKuK,EAAGC,GAEnBjP,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQmP,EAAGC,GAEV,IAAM8kM,EAAQ,IAAIhC,GAAW/xM,KAAKg1M,aAAa50L,QAAS,IAAIgzB,GAASpkC,EAAGC,IAKxE,OAJAjP,KAAK6zM,OAAOvxM,KAAMyxM,GAElB/zM,KAAKg1M,aAAavwM,IAAKuK,EAAGC,GAEnBjP,IAER,GAAC,CAAAiG,IAAA,mBAAApG,MAED,SAAkBs1M,EAAMC,EAAM7G,EAAIC,GAEjC,IAAMuF,EAAQ,IAAItB,GACjBzyM,KAAKg1M,aAAa50L,QAClB,IAAIgzB,GAAS+hK,EAAMC,GACnB,IAAIhiK,GAASm7J,EAAIC,IAOlB,OAJAxuM,KAAK6zM,OAAOvxM,KAAMyxM,GAElB/zM,KAAKg1M,aAAavwM,IAAK8pM,EAAIC,GAEpBxuM,IAER,GAAC,CAAAiG,IAAA,gBAAApG,MAED,SAAew1M,EAAOC,EAAOC,EAAOC,EAAOjH,EAAIC,GAE9C,IAAMuF,EAAQ,IAAI3C,GACjBpxM,KAAKg1M,aAAa50L,QAClB,IAAIgzB,GAASiiK,EAAOC,GACpB,IAAIliK,GAASmiK,EAAOC,GACpB,IAAIpiK,GAASm7J,EAAIC,IAOlB,OAJAxuM,KAAK6zM,OAAOvxM,KAAMyxM,GAElB/zM,KAAKg1M,aAAavwM,IAAK8pM,EAAIC,GAEpBxuM,IAER,GAAC,CAAAiG,IAAA,aAAApG,MAED,SAAY40M,GAEX,IAAMgB,EAAO,CAAEz1M,KAAKg1M,aAAa50L,SAAU3gB,OAAQg1M,GAE7CV,EAAQ,IAAIZ,GAAasC,GAK/B,OAJAz1M,KAAK6zM,OAAOvxM,KAAMyxM,GAElB/zM,KAAKg1M,aAAa/wM,KAAMwwM,EAAKA,EAAIlyM,OAAS,IAEnCvC,IAER,GAAC,CAAAiG,IAAA,MAAApG,MAED,SAAK0uM,EAAIC,EAAIc,EAASX,EAAaC,EAAWC,GAE7C,IAAMxyE,EAAKr8H,KAAKg1M,aAAahmM,EACvBstH,EAAKt8H,KAAKg1M,aAAa/lM,EAK7B,OAHAjP,KAAK01M,OAAQnH,EAAKlyE,EAAImyE,EAAKlyE,EAAIgzE,EAC9BX,EAAaC,EAAWC,GAElB7uM,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQ0uM,EAAIC,EAAIc,EAASX,EAAaC,EAAWC,GAIhD,OAFA7uM,KAAK21M,WAAYpH,EAAIC,EAAIc,EAASA,EAASX,EAAaC,EAAWC,GAE5D7uM,IAER,GAAC,CAAAiG,IAAA,UAAApG,MAED,SAAS0uM,EAAIC,EAAIC,EAASC,EAASC,EAAaC,EAAWC,EAAYC,GAEtE,IAAMzyE,EAAKr8H,KAAKg1M,aAAahmM,EACvBstH,EAAKt8H,KAAKg1M,aAAa/lM,EAI7B,OAFAjP,KAAK21M,WAAYpH,EAAKlyE,EAAImyE,EAAKlyE,EAAImyE,EAASC,EAASC,EAAaC,EAAWC,EAAYC,GAElF9uM,IAER,GAAC,CAAAiG,IAAA,aAAApG,MAED,SAAY0uM,EAAIC,EAAIC,EAASC,EAASC,EAAaC,EAAWC,EAAYC,GAEzE,IAAMiF,EAAQ,IAAI5F,GAAcI,EAAIC,EAAIC,EAASC,EAASC,EAAaC,EAAWC,EAAYC,GAE9F,GAAK9uM,KAAK6zM,OAAOtxM,OAAS,EAAI,CAG7B,IAAMqzM,EAAa7B,EAAM/G,SAAU,GAE5B4I,EAAW31E,OAAQjgI,KAAKg1M,eAE9Bh1M,KAAKk1M,OAAQU,EAAW5mM,EAAG4mM,EAAW3mM,EAIxC,CAEAjP,KAAK6zM,OAAOvxM,KAAMyxM,GAElB,IAAM8B,EAAY9B,EAAM/G,SAAU,GAGlC,OAFAhtM,KAAKg1M,aAAa/wM,KAAM4xM,GAEjB71M,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAM8G,GAML,OAJAolC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA4oK,EAAAz1M,WAAA,aAAAC,KAAA,KAAYuH,GAEZ3G,KAAKg1M,aAAa/wM,KAAM0C,EAAOquM,cAExBh1M,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,WAEC,IAAM8M,GAAIo/B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA4oK,EAAAz1M,WAAA,eAAAC,KAAA,MAIV,OAFAuN,EAAKqoM,aAAeh1M,KAAKg1M,aAAav3K,UAE/B9wB,CAER,GAAC,CAAA1G,IAAA,WAAApG,MAED,SAAUq+F,GAMT,OAJAnyD,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA4oK,EAAAz1M,WAAA,iBAAAC,KAAA,KAAgB8+F,GAEhBl+F,KAAKg1M,aAAax3K,UAAW0gE,EAAK82G,cAE3Bh1M,IAER,KAAC40M,CAAA,CAtLQ,CAASnB,IA0LbqC,GAAa,SAAAC,IAAA1tM,EAAAA,EAAAA,GAAAytM,EAAAC,GAAA,IAAAC,GAAAztM,EAAAA,EAAAA,GAAAutM,GAElB,SAAAA,IAAwJ,IAAAG,EAA3IhgM,EAAMrV,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,CAAE,IAAIwyC,GAAS,GAAK,IAAO,IAAIA,GAAS,GAAK,GAAK,IAAIA,GAAS,EAAG,KAASy6J,EAAQjtM,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAIs1M,EAAQt1M,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGu1M,EAASv1M,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAa,EAAVwT,KAAKyF,IAAMnR,EAAAA,EAAAA,GAAA,KAAAotM,IAEpJG,EAAAD,EAAA52M,KAAA,OAEKyC,KAAO,gBAEZo0M,EAAKz/J,WAAa,CACjBvgC,OAAQA,EACR43L,SAAUA,EACVqI,SAAUA,EACVC,UAAWA,GAGZtI,EAAWz5L,KAAKi5B,MAAOwgK,GAIvBsI,EAAYzoF,GAAOyoF,EAAW,EAAa,EAAV/hM,KAAKyF,IAuBtC,IAnBA,IAAMkd,EAAU,GACVhY,EAAW,GACX02B,EAAM,GACN2gK,EAAc,GACdj3L,EAAU,GAIVk3L,EAAkB,EAAMxI,EACxBvtL,EAAS,IAAIgc,GACb06F,EAAK,IAAI5jF,GACTpuB,EAAS,IAAIsX,GACbg6K,EAAY,IAAIh6K,GAChBi6K,EAAa,IAAIj6K,GACnB2qB,EAAK,EACLC,EAAK,EAIC70C,EAAI,EAAGA,GAAO4D,EAAO1T,OAAS,EAAK8P,IAE5C,OAASA,GAER,KAAK,EAEJ40C,EAAKhxC,EAAQ5D,EAAI,GAAIrD,EAAIiH,EAAQ5D,GAAIrD,EACrCk4C,EAAKjxC,EAAQ5D,EAAI,GAAIpD,EAAIgH,EAAQ5D,GAAIpD,EAErC+V,EAAOhW,EAAS,EAALk4C,EACXliC,EAAO/V,GAAMg4C,EACbjiC,EAAO9V,EAAS,EAALg4C,EAEXqvJ,EAAWtyM,KAAM+gB,GAEjBA,EAAO1L,YAEP88L,EAAY9zM,KAAM0iB,EAAOhW,EAAGgW,EAAO/V,EAAG+V,EAAO9V,GAE7C,MAED,KAAO+G,EAAO1T,OAAS,EAEtB6zM,EAAY9zM,KAAMi0M,EAAWvnM,EAAGunM,EAAWtnM,EAAGsnM,EAAWrnM,GAEzD,MAED,QAEC+3C,EAAKhxC,EAAQ5D,EAAI,GAAIrD,EAAIiH,EAAQ5D,GAAIrD,EACrCk4C,EAAKjxC,EAAQ5D,EAAI,GAAIpD,EAAIgH,EAAQ5D,GAAIpD,EAErC+V,EAAOhW,EAAS,EAALk4C,EACXliC,EAAO/V,GAAMg4C,EACbjiC,EAAO9V,EAAS,EAALg4C,EAEXovJ,EAAUryM,KAAM+gB,GAEhBA,EAAOhW,GAAKunM,EAAWvnM,EACvBgW,EAAO/V,GAAKsnM,EAAWtnM,EACvB+V,EAAO9V,GAAKqnM,EAAWrnM,EAEvB8V,EAAO1L,YAEP88L,EAAY9zM,KAAM0iB,EAAOhW,EAAGgW,EAAO/V,EAAG+V,EAAO9V,GAE7CqnM,EAAWtyM,KAAMqyM,GAQpB,IAAM,IAAI1yM,EAAI,EAAGA,GAAKiqM,EAAUjqM,IAO/B,IALA,IAAMu7C,EAAM+2J,EAAWtyM,EAAIyyM,EAAkBF,EAEvCh9L,EAAM/E,KAAK+E,IAAKgmC,GAChB/lC,EAAMhF,KAAKgF,IAAK+lC,GAEZ9sC,EAAI,EAAGA,GAAO4D,EAAO1T,OAAS,EAAK8P,IAAO,CAInDiO,EAAOtR,EAAIiH,EAAQ5D,GAAIrD,EAAImK,EAC3BmH,EAAOrR,EAAIgH,EAAQ5D,GAAIpD,EACvBqR,EAAOpR,EAAI+G,EAAQ5D,GAAIrD,EAAIoK,EAE3B2F,EAASzc,KAAMge,EAAOtR,EAAGsR,EAAOrR,EAAGqR,EAAOpR,GAI1C8nH,EAAGhoH,EAAIpL,EAAIiqM,EACX72E,EAAG/nH,EAAIoD,GAAM4D,EAAO1T,OAAS,GAE7BkzC,EAAInzC,KAAM00H,EAAGhoH,EAAGgoH,EAAG/nH,GAInB,IAAMD,EAAIonM,EAAa,EAAI/jM,EAAI,GAAM8G,EAC/BlK,EAAImnM,EAAa,EAAI/jM,EAAI,GACzBnD,EAAIknM,EAAa,EAAI/jM,EAAI,GAAM+G,EAErC+F,EAAQ7c,KAAM0M,EAAGC,EAAGC,EAErB,CAMD,IAAM,IAAItL,EAAI,EAAGA,EAAIiqM,EAAUjqM,IAE9B,IAAM,IAAIyO,EAAI,EAAGA,EAAM4D,EAAO1T,OAAS,EAAK8P,IAAO,CAElD,IAAMgwG,EAAOhwG,EAAIzO,EAAIqS,EAAO1T,OAEtB4U,EAAIkrG,EACJjwG,EAAIiwG,EAAOpsG,EAAO1T,OAClB6U,EAAIirG,EAAOpsG,EAAO1T,OAAS,EAC3B8U,EAAIgrG,EAAO,EAIjBtrF,EAAQz0B,KAAM6U,EAAG/E,EAAGiF,GACpB0f,EAAQz0B,KAAM8U,EAAGC,EAAGjF,EAErB,CASuE,OAHxE6jM,EAAK36G,SAAUvkE,GACfk/K,EAAKtgK,aAAc,WAAY,IAAIo9F,GAAwBh0H,EAAU,IACrEk3L,EAAKtgK,aAAc,KAAM,IAAIo9F,GAAwBt9F,EAAK,IAC1DwgK,EAAKtgK,aAAc,SAAU,IAAIo9F,GAAwB5zH,EAAS,IAAM82L,CAEzE,CAMC,OANAtrM,EAAAA,EAAAA,GAAAmrM,EAAA,OAAA7vM,IAAA,WAAApG,MAED,SAAiB8M,GAEhB,OAAO,IAAImpM,EAAenpM,EAAKsJ,OAAQtJ,EAAKkhM,SAAUlhM,EAAKupM,SAAUvpM,EAAKwpM,UAE3E,KAACL,CAAA,CAvKiB,CAASpgK,IA2KtB8gK,GAAe,SAAAC,IAAApuM,EAAAA,EAAAA,GAAAmuM,EAAAC,GAAA,IAAAC,GAAAnuM,EAAAA,EAAAA,GAAAiuM,GAEpB,SAAAA,IAA2E,IAAAG,EAA9DtpL,EAAMzsB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAG2B,EAAM3B,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGg2M,EAAWh2M,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGi2M,EAAcj2M,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAC8H,EAAAA,EAAAA,GAAA,KAAA8tM,GAEvE,IAAMxmK,EAAO,IAAI4kK,GAaf,OAZF5kK,EAAK0lK,OAAQ,GAAKnzM,EAAS,EAAG8qB,EAAkB,IAAVjZ,KAAKyF,GAAU,GACrDm2B,EAAK0lK,OAAQ,EAAGnzM,EAAS,EAAG8qB,EAAQ,EAAa,GAAVjZ,KAAKyF,KAE5C88L,EAAAD,EAAAt3M,KAAA,KAAO4wC,EAAK0kK,UAAWkC,GAAeC,IAEjCh1M,KAAO,kBAEZ80M,EAAKngK,WAAa,CACjBnpB,OAAQA,EACRod,OAAQloC,EACRq0M,YAAaA,EACbC,eAAgBA,GACfF,CAEH,CAMC,OANAhsM,EAAAA,EAAAA,GAAA6rM,EAAA,OAAAvwM,IAAA,WAAApG,MAED,SAAiB8M,GAEhB,OAAO,IAAI6pM,EAAiB7pM,EAAK0gB,OAAQ1gB,EAAKpK,OAAQoK,EAAKiqM,YAAajqM,EAAKkqM,eAE9E,KAACL,CAAA,CAzBmB,CAASV,IA6BxBgB,GAAc,SAAAC,IAAA1uM,EAAAA,EAAAA,GAAAyuM,EAAAC,GAAA,IAAAC,GAAAzuM,EAAAA,EAAAA,GAAAuuM,GAEnB,SAAAA,IAAmF,IAAAG,EAAtE5pL,EAAMzsB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGitM,EAAQjtM,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGs2M,EAAUt2M,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGu2M,EAAWv2M,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAa,EAAVwT,KAAKyF,IAAMnR,EAAAA,EAAAA,GAAA,KAAAouM,IAE/EG,EAAAD,EAAA53M,KAAA,OAEKyC,KAAO,iBAEZo1M,EAAKzgK,WAAa,CACjBnpB,OAAQA,EACRwgL,SAAUA,EACVqJ,WAAYA,EACZC,YAAaA,GAGdtJ,EAAWz5L,KAAKuC,IAAK,EAAGk3L,GAIxB,IAAM92K,EAAU,GACVhY,EAAW,GACXI,EAAU,GACVs2B,EAAM,GAINn1B,EAAS,IAAIgc,GACb06F,EAAK,IAAI5jF,GAIfr0B,EAASzc,KAAM,EAAG,EAAG,GACrB6c,EAAQ7c,KAAM,EAAG,EAAG,GACpBmzC,EAAInzC,KAAM,GAAK,IAEf,IAAM,IAAIyK,EAAI,EAAGnJ,EAAI,EAAGmJ,GAAK8gM,EAAU9gM,IAAMnJ,GAAK,EAAI,CAErD,IAAMwzM,EAAUF,EAAanqM,EAAI8gM,EAAWsJ,EAI5C72L,EAAOtR,EAAIqe,EAASjZ,KAAKgF,IAAKg+L,GAC9B92L,EAAOrR,EAAIoe,EAASjZ,KAAK+E,IAAKi+L,GAE9Br4L,EAASzc,KAAMge,EAAOtR,EAAGsR,EAAOrR,EAAGqR,EAAOpR,GAI1CiQ,EAAQ7c,KAAM,EAAG,EAAG,GAIpB00H,EAAGhoH,GAAM+P,EAAUnb,GAAMypB,EAAS,GAAM,EACxC2pG,EAAG/nH,GAAM8P,EAAUnb,EAAI,GAAMypB,EAAS,GAAM,EAE5CooB,EAAInzC,KAAM00H,EAAGhoH,EAAGgoH,EAAG/nH,EAEpB,CAIA,IAAM,IAAIrL,EAAI,EAAGA,GAAKiqM,EAAUjqM,IAE/BmzB,EAAQz0B,KAAMsB,EAAGA,EAAI,EAAG,GASuC,OAHhEqzM,EAAK37G,SAAUvkE,GACfkgL,EAAKthK,aAAc,WAAY,IAAIo9F,GAAwBh0H,EAAU,IACrEk4L,EAAKthK,aAAc,SAAU,IAAIo9F,GAAwB5zH,EAAS,IAClE83L,EAAKthK,aAAc,KAAM,IAAIo9F,GAAwBt9F,EAAK,IAAMwhK,CAEjE,CAMC,OANAtsM,EAAAA,EAAAA,GAAAmsM,EAAA,OAAA7wM,IAAA,WAAApG,MAED,SAAiB8M,GAEhB,OAAO,IAAImqM,EAAgBnqM,EAAK0gB,OAAQ1gB,EAAKkhM,SAAUlhM,EAAKuqM,WAAYvqM,EAAKwqM,YAE9E,KAACL,CAAA,CAhFkB,CAASphK,IAoFvB2hK,GAAgB,SAAAC,IAAAjvM,EAAAA,EAAAA,GAAAgvM,EAAAC,GAAA,IAAAC,GAAAhvM,EAAAA,EAAAA,GAAA8uM,GAErB,SAAAA,IAAiK,IAAAG,EAApJC,EAAS72M,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAG82M,EAAY92M,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAG6pC,EAAM7pC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGi2M,EAAcj2M,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGw4I,EAAcx4I,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAG+2M,EAAS/2M,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,IAAAA,UAAA,GAAUs2M,EAAUt2M,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGu2M,EAAWv2M,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAa,EAAVwT,KAAKyF,IAAMnR,EAAAA,EAAAA,GAAA,KAAA2uM,IAE7JG,EAAAD,EAAAn4M,KAAA,OAEKyC,KAAO,mBAEZ21M,EAAKhhK,WAAa,CACjBihK,UAAWA,EACXC,aAAcA,EACdjtK,OAAQA,EACRosK,eAAgBA,EAChBz9D,eAAgBA,EAChBu+D,UAAWA,EACXT,WAAYA,EACZC,YAAaA,GAGd,IAAMz3J,GAAK3B,EAAAA,EAAAA,GAAAy5J,GAEXX,EAAiBziM,KAAKi5B,MAAOwpK,GAC7Bz9D,EAAiBhlI,KAAKi5B,MAAO+rG,GAI7B,IAAMriH,EAAU,GACVhY,EAAW,GACXI,EAAU,GACVs2B,EAAM,GAIR7vC,EAAQ,EACNgyM,EAAa,GACbrjC,EAAa9pI,EAAS,EACxB8uG,EAAa,EAmHjB,SAASs+D,EAAa9xJ,GAiBrB,IAdA,IAAM+xJ,EAAmBlyM,EAEnBoxH,EAAK,IAAI5jF,GACT9yB,EAAS,IAAIgc,GAEf+9G,EAAa,EAEXhtH,GAAmB,IAAR04B,EAAiB0xJ,EAAYC,EACxC57J,GAAiB,IAARiK,EAAiB,GAAM,EAM5B/2C,EAAI,EAAGA,GAAK6nM,EAAgB7nM,IAIrC+P,EAASzc,KAAM,EAAGiyK,EAAaz4H,EAAM,GAIrC38B,EAAQ7c,KAAM,EAAGw5C,EAAM,GAIvBrG,EAAInzC,KAAM,GAAK,IAIfsD,IASD,IAJA,IAAMmyM,EAAiBnyM,EAIboJ,EAAI,EAAGA,GAAK6nM,EAAgB7nM,IAAO,CAE5C,IACMqwC,EADIrwC,EAAI6nM,EACIM,EAAcD,EAE1Bc,EAAW5jM,KAAKgF,IAAKimC,GACrB44J,EAAW7jM,KAAK+E,IAAKkmC,GAI3B/+B,EAAOtR,EAAIqe,EAAS4qL,EACpB33L,EAAOrR,EAAIslK,EAAaz4H,EACxBx7B,EAAOpR,EAAIme,EAAS2qL,EACpBj5L,EAASzc,KAAMge,EAAOtR,EAAGsR,EAAOrR,EAAGqR,EAAOpR,GAI1CiQ,EAAQ7c,KAAM,EAAGw5C,EAAM,GAIvBk7E,EAAGhoH,EAAiB,GAAXgpM,EAAmB,GAC5BhhF,EAAG/nH,EAAiB,GAAXgpM,EAAiBn8J,EAAS,GACnCrG,EAAInzC,KAAM00H,EAAGhoH,EAAGgoH,EAAG/nH,GAInBrJ,GAED,CAIA,IAAM,IAAIoJ,EAAI,EAAGA,EAAI6nM,EAAgB7nM,IAAO,CAE3C,IAAMoI,EAAI0gM,EAAmB9oM,EACvBpL,EAAIm0M,EAAiB/oM,GAEd,IAAR+2C,EAIJhvB,EAAQz0B,KAAMsB,EAAGA,EAAI,EAAGwT,GAMxB2f,EAAQz0B,KAAMsB,EAAI,EAAGA,EAAGwT,GAIzBijI,GAAc,CAEf,CAIA36F,EAAMk3F,SAAU2C,EAAYc,GAAoB,IAARt0F,EAAe,EAAI,GAI3DwzF,GAAcc,CAEf,CAAC,OAzMD,WAYC,IAVA,IAAMr1H,EAAS,IAAIsX,GACbhc,EAAS,IAAIgc,GAEf+9G,EAAa,EAGX69D,GAAUR,EAAeD,GAAchtK,EAInCx7B,EAAI,EAAGA,GAAKmqI,EAAgBnqI,IAAO,CAU5C,IARA,IAAMkpM,EAAW,GAEXvnM,EAAI3B,EAAImqI,EAIR/rH,EAASzc,GAAM8mM,EAAeD,GAAcA,EAExCzoM,EAAI,EAAGA,GAAK6nM,EAAgB7nM,IAAO,CAE5C,IAAMqH,EAAIrH,EAAI6nM,EAERx3J,EAAQhpC,EAAI8gM,EAAcD,EAE1Be,EAAW7jM,KAAK+E,IAAKkmC,GACrB24J,EAAW5jM,KAAKgF,IAAKimC,GAI3B/+B,EAAOtR,EAAIqe,EAAS4qL,EACpB33L,EAAOrR,GAAM2B,EAAI65B,EAAS8pI,EAC1Bj0J,EAAOpR,EAAIme,EAAS2qL,EACpBj5L,EAASzc,KAAMge,EAAOtR,EAAGsR,EAAOrR,EAAGqR,EAAOpR,GAI1C8V,EAAOvgB,IAAKwzM,EAAUC,EAAOF,GAAW1+L,YACxC6F,EAAQ7c,KAAM0iB,EAAOhW,EAAGgW,EAAO/V,EAAG+V,EAAO9V,GAIzCumC,EAAInzC,KAAM+T,EAAG,EAAIzF,GAIjBunM,EAAS71M,KAAMsD,IAEhB,CAIAgyM,EAAWt1M,KAAM61M,EAElB,CAIA,IAAM,IAAInpM,EAAI,EAAGA,EAAI6nM,EAAgB7nM,IAEpC,IAAM,IAAIC,EAAI,EAAGA,EAAImqI,EAAgBnqI,IAAO,CAI3C,IAAMkI,EAAIygM,EAAY3oM,GAAKD,GACrBoD,EAAIwlM,EAAY3oM,EAAI,GAAKD,GACzBoI,EAAIwgM,EAAY3oM,EAAI,GAAKD,EAAI,GAC7BqI,EAAIugM,EAAY3oM,GAAKD,EAAI,GAI/B+nB,EAAQz0B,KAAM6U,EAAG/E,EAAGiF,GACpB0f,EAAQz0B,KAAM8P,EAAGgF,EAAGC,GAIpBgjI,GAAc,CAEf,CAMD36F,EAAMk3F,SAAU2C,EAAYc,EAAY,GAIxCd,GAAcc,CAEf,CA7GA+9D,IAEmB,IAAdT,IAECF,EAAY,GAAII,GAAa,GAC7BH,EAAe,GAAIG,GAAa,IAMtCL,EAAKl8G,SAAUvkE,GACfygL,EAAK7hK,aAAc,WAAY,IAAIo9F,GAAwBh0H,EAAU,IACrEy4L,EAAK7hK,aAAc,SAAU,IAAIo9F,GAAwB5zH,EAAS,IAClEq4L,EAAK7hK,aAAc,KAAM,IAAIo9F,GAAwBt9F,EAAK,IA2MzD+hK,CAEF,CAMC,OANA7sM,EAAAA,EAAAA,GAAA0sM,EAAA,OAAApxM,IAAA,WAAApG,MAED,SAAiB8M,GAEhB,OAAO,IAAI0qM,EAAkB1qM,EAAK8qM,UAAW9qM,EAAK+qM,aAAc/qM,EAAK89B,OAAQ99B,EAAKkqM,eAAgBlqM,EAAKysI,eAAgBzsI,EAAKgrM,UAAWhrM,EAAKuqM,WAAYvqM,EAAKwqM,YAE9J,KAACE,CAAA,CAzQoB,CAAS3hK,IA6QzB2iK,GAAY,SAAAC,IAAAjwM,EAAAA,EAAAA,GAAAgwM,EAAAC,GAAA,IAAAC,GAAAhwM,EAAAA,EAAAA,GAAA8vM,GAEjB,SAAAA,IAA4I,IAAAG,EAA/HnrL,EAAMzsB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAG6pC,EAAM7pC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGi2M,EAAcj2M,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGw4I,EAAcx4I,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAG+2M,EAAS/2M,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,IAAAA,UAAA,GAAUs2M,EAAUt2M,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGu2M,EAAWv2M,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAa,EAAVwT,KAAKyF,GAchI,OAdsInR,EAAAA,EAAAA,GAAA,KAAA2vM,IAExIG,EAAAD,EAAAn5M,KAAA,KAAO,EAAGiuB,EAAQod,EAAQosK,EAAgBz9D,EAAgBu+D,EAAWT,EAAYC,IAE5Et1M,KAAO,eAEZ22M,EAAKhiK,WAAa,CACjBnpB,OAAQA,EACRod,OAAQA,EACRosK,eAAgBA,EAChBz9D,eAAgBA,EAChBu+D,UAAWA,EACXT,WAAYA,EACZC,YAAaA,GACZqB,CAEH,CAMC,OANA7tM,EAAAA,EAAAA,GAAA0tM,EAAA,OAAApyM,IAAA,WAAApG,MAED,SAAiB8M,GAEhB,OAAO,IAAI0rM,EAAc1rM,EAAK0gB,OAAQ1gB,EAAK89B,OAAQ99B,EAAKkqM,eAAgBlqM,EAAKysI,eAAgBzsI,EAAKgrM,UAAWhrM,EAAKuqM,WAAYvqM,EAAKwqM,YAEpI,KAACkB,CAAA,CAxBgB,CAAShB,IA4BrBoB,GAAkB,SAAAC,IAAArwM,EAAAA,EAAAA,GAAAowM,EAAAC,GAAA,IAAAC,GAAApwM,EAAAA,EAAAA,GAAAkwM,GAEvB,SAAAA,IAAmE,IAAAG,EAAtD75L,EAAQne,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAIm2B,EAAOn2B,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAIysB,EAAMzsB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGsiM,EAAMtiM,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAC8H,EAAAA,EAAAA,GAAA,KAAA+vM,IAE/DG,EAAAD,EAAAv5M,KAAA,OAEKyC,KAAO,qBAEZ+2M,EAAKpiK,WAAa,CACjBz3B,SAAUA,EACVgY,QAASA,EACT1J,OAAQA,EACR61K,OAAQA,GAKT,IAAM2V,EAAe,GACfC,EAAW,GAwDjB,SAASC,EAAe5hM,EAAG/E,EAAGgF,EAAG8rL,GAUhC,IARA,IAAM8V,EAAO9V,EAAS,EAIhBtyL,EAAI,GAIAhN,EAAI,EAAGA,GAAKo1M,EAAMp1M,IAAO,CAElCgN,EAAGhN,GAAM,GAOT,IALA,IAAMq1M,EAAK9hM,EAAEiJ,QAAQwF,KAAMxO,EAAGxT,EAAIo1M,GAC5BjzK,EAAK3zB,EAAEgO,QAAQwF,KAAMxO,EAAGxT,EAAIo1M,GAE5BE,EAAOF,EAAOp1M,EAEVyO,EAAI,EAAGA,GAAK6mM,EAAM7mM,IAI1BzB,EAAGhN,GAAKyO,GAFE,IAANA,GAAWzO,IAAMo1M,EAEPC,EAIAA,EAAG74L,QAAQwF,KAAMmgB,EAAI1zB,EAAI6mM,EAM1C,CAIA,IAAM,IAAIt1M,EAAI,EAAGA,EAAIo1M,EAAMp1M,IAE1B,IAAM,IAAIyO,EAAI,EAAGA,EAAI,GAAM2mM,EAAOp1M,GAAM,EAAGyO,IAAO,CAEjD,IAAMK,EAAI0B,KAAKi5B,MAAOh7B,EAAI,GAErBA,EAAI,IAAM,GAEd8mM,EAAYvoM,EAAGhN,GAAK8O,EAAI,IACxBymM,EAAYvoM,EAAGhN,EAAI,GAAK8O,IACxBymM,EAAYvoM,EAAGhN,GAAK8O,MAIpBymM,EAAYvoM,EAAGhN,GAAK8O,EAAI,IACxBymM,EAAYvoM,EAAGhN,EAAI,GAAK8O,EAAI,IAC5BymM,EAAYvoM,EAAGhN,EAAI,GAAK8O,IAI1B,CAIF,CA2EA,SAASymM,EAAY74L,GAEpBu4L,EAAav2M,KAAMge,EAAOtR,EAAGsR,EAAOrR,EAAGqR,EAAOpR,EAE/C,CAEA,SAASkqM,EAAkBxzM,EAAO0a,GAEjC,IAAMwnF,EAAiB,EAARliG,EAEf0a,EAAOtR,EAAI+P,EAAU+oF,EAAS,GAC9BxnF,EAAOrR,EAAI8P,EAAU+oF,EAAS,GAC9BxnF,EAAOpR,EAAI6P,EAAU+oF,EAAS,EAE/B,CAoCA,SAASuxG,EAAWriF,EAAIlvB,EAAQp3F,EAAQ4oM,GAEhCA,EAAU,GAAkB,IAATtiF,EAAGhoH,IAE5B8pM,EAAUhxG,GAAWkvB,EAAGhoH,EAAI,GAIT,IAAb0B,EAAO1B,GAA4B,IAAb0B,EAAOxB,IAEnC4pM,EAAUhxG,GAAWwxG,EAAU,EAAIllM,KAAKyF,GAAK,GAI/C,CAIA,SAASy/L,EAAS5oM,GAEjB,OAAO0D,KAAKmH,MAAO7K,EAAOxB,GAAKwB,EAAO1B,EAEvC,CASC,OAjPD,SAAoBk0L,GAQnB,IANA,IAAM/rL,EAAI,IAAImlB,GACRlqB,EAAI,IAAIkqB,GACRllB,EAAI,IAAIklB,GAIJ14B,EAAI,EAAGA,EAAImzB,EAAQx0B,OAAQqB,GAAK,EAIzCw1M,EAAkBriL,EAASnzB,EAAI,GAAKuT,GACpCiiM,EAAkBriL,EAASnzB,EAAI,GAAKwO,GACpCgnM,EAAkBriL,EAASnzB,EAAI,GAAKwT,GAIpC2hM,EAAe5hM,EAAG/E,EAAGgF,EAAG8rL,EAI1B,CAlDAqW,CAAWrW,GAmHX,SAAsB71K,GAMrB,IAJA,IAAM/M,EAAS,IAAIgc,GAIT14B,EAAI,EAAGA,EAAIi1M,EAAat2M,OAAQqB,GAAK,EAE9C0c,EAAOtR,EAAI6pM,EAAcj1M,EAAI,GAC7B0c,EAAOrR,EAAI4pM,EAAcj1M,EAAI,GAC7B0c,EAAOpR,EAAI2pM,EAAcj1M,EAAI,GAE7B0c,EAAOhH,YAAYg7B,eAAgBjnB,GAEnCwrL,EAAcj1M,EAAI,GAAM0c,EAAOtR,EAC/B6pM,EAAcj1M,EAAI,GAAM0c,EAAOrR,EAC/B4pM,EAAcj1M,EAAI,GAAM0c,EAAOpR,CAIjC,CAnIAsqM,CAAansL,GAqIb,WAIC,IAFA,IAAM/M,EAAS,IAAIgc,GAET14B,EAAI,EAAGA,EAAIi1M,EAAat2M,OAAQqB,GAAK,EAAI,CAElD0c,EAAOtR,EAAI6pM,EAAcj1M,EAAI,GAC7B0c,EAAOrR,EAAI4pM,EAAcj1M,EAAI,GAC7B0c,EAAOpR,EAAI2pM,EAAcj1M,EAAI,GAE7B,IAAMyS,EAAIijM,EAASh5L,GAAW,EAAIlM,KAAKyF,GAAK,GACtCjJ,GAqHcF,EArHG4P,EAuHjBlM,KAAKmH,OAAS7K,EAAOzB,EAAGmF,KAAKC,KAAQ3D,EAAO1B,EAAI0B,EAAO1B,EAAQ0B,EAAOxB,EAAIwB,EAAOxB,IAvHrDkF,KAAKyF,GAAK,IAC5Ci/L,EAASx2M,KAAM+T,EAAG,EAAIzF,EAEvB,CAkHD,IAAsBF,GA7DtB,WAYC,IAVA,IAAMyG,EAAI,IAAImlB,GACRlqB,EAAI,IAAIkqB,GACRllB,EAAI,IAAIklB,GAERm9K,EAAW,IAAIn9K,GAEf84G,EAAM,IAAIhiG,GACViiG,EAAM,IAAIjiG,GACVkiG,EAAM,IAAIliG,GAENxvC,EAAI,EAAGyO,EAAI,EAAGzO,EAAIi1M,EAAat2M,OAAQqB,GAAK,EAAGyO,GAAK,EAAI,CAEjE8E,EAAE1S,IAAKo0M,EAAcj1M,EAAI,GAAKi1M,EAAcj1M,EAAI,GAAKi1M,EAAcj1M,EAAI,IACvEwO,EAAE3N,IAAKo0M,EAAcj1M,EAAI,GAAKi1M,EAAcj1M,EAAI,GAAKi1M,EAAcj1M,EAAI,IACvEwT,EAAE3S,IAAKo0M,EAAcj1M,EAAI,GAAKi1M,EAAcj1M,EAAI,GAAKi1M,EAAcj1M,EAAI,IAEvEwxI,EAAI3wI,IAAKq0M,EAAUzmM,EAAI,GAAKymM,EAAUzmM,EAAI,IAC1CgjI,EAAI5wI,IAAKq0M,EAAUzmM,EAAI,GAAKymM,EAAUzmM,EAAI,IAC1CijI,EAAI7wI,IAAKq0M,EAAUzmM,EAAI,GAAKymM,EAAUzmM,EAAI,IAE1ConM,EAASx1M,KAAMkT,GAAI2Q,IAAK1V,GAAI0V,IAAK1Q,GAAI64G,aAAc,GAEnD,IAAMypF,EAAMJ,EAASG,GAErBJ,EAAWjkE,EAAK/iI,EAAI,EAAG8E,EAAGuiM,GAC1BL,EAAWhkE,EAAKhjI,EAAI,EAAGD,EAAGsnM,GAC1BL,EAAW/jE,EAAKjjI,EAAI,EAAG+E,EAAGsiM,EAE3B,CAED,EAnFCC,GAMD,WAIC,IAAM,IAAI/1M,EAAI,EAAGA,EAAIk1M,EAASv2M,OAAQqB,GAAK,EAAI,CAI9C,IAAMy4H,EAAKy8E,EAAUl1M,EAAI,GACnB64H,EAAKq8E,EAAUl1M,EAAI,GACnBuP,EAAK2lM,EAAUl1M,EAAI,GAEnB+S,EAAMvC,KAAKuC,IAAK0lH,EAAII,EAAItpH,GACxBuD,EAAMtC,KAAKsC,IAAK2lH,EAAII,EAAItpH,GAIzBwD,EAAM,IAAOD,EAAM,KAElB2lH,EAAK,KAAMy8E,EAAUl1M,EAAI,IAAO,GAChC64H,EAAK,KAAMq8E,EAAUl1M,EAAI,IAAO,GAChCuP,EAAK,KAAM2lM,EAAUl1M,EAAI,IAAO,GAIvC,CAED,CA/BCg2M,EAED,CArJAC,GAIAjB,EAAKjjK,aAAc,WAAY,IAAIo9F,GAAwB8lE,EAAc,IACzED,EAAKjjK,aAAc,SAAU,IAAIo9F,GAAwB8lE,EAAal4M,QAAS,IAC/Ei4M,EAAKjjK,aAAc,KAAM,IAAIo9F,GAAwB+lE,EAAU,IAE/C,IAAX5V,EAEJ0V,EAAKkB,uBAILlB,EAAKviE,mBAuPLuiE,CAEF,CAMC,OANAjuM,EAAAA,EAAAA,GAAA8tM,EAAA,OAAAxyM,IAAA,WAAApG,MAED,SAAiB8M,GAEhB,OAAO,IAAI8rM,EAAoB9rM,EAAKoS,SAAUpS,EAAKoqB,QAASpqB,EAAK0gB,OAAQ1gB,EAAKotM,QAE/E,KAACtB,CAAA,CA3SsB,CAAS/iK,IA+S3BskK,GAAoB,SAAAC,IAAA5xM,EAAAA,EAAAA,GAAA2xM,EAAAC,GAAA,IAAAC,GAAA3xM,EAAAA,EAAAA,GAAAyxM,GAEzB,SAAAA,IAAsC,IAAAG,EAAzB9sL,EAAMzsB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGsiM,EAAMtiM,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAC8H,EAAAA,EAAAA,GAAA,KAAAsxM,GAElC,IAAM7nM,GAAM,EAAIiC,KAAKC,KAAM,IAAQ,EAC7BrB,EAAI,EAAIb,EAER4M,EAAW,EAGd,GAAK,GAAK,GAAK,GAAK,EAAG,GACvB,EAAG,GAAK,GAAK,EAAG,EAAG,EACrB,GAAK,GAAK,EAAG,GAAK,EAAG,EACrB,EAAG,GAAK,EAAG,EAAG,EAAG,EAGjB,GAAK/L,GAAKb,EAAG,GAAKa,EAAGb,EACrB,EAAGa,GAAKb,EAAG,EAAGa,EAAGb,GAGfa,GAAKb,EAAG,GAAKa,EAAGb,EAAG,EACrBa,GAAKb,EAAG,EAAGa,EAAGb,EAAG,GAGfA,EAAG,GAAKa,EAAGb,EAAG,GAAKa,GACnBb,EAAG,EAAGa,EAAGb,EAAG,EAAGa,GAyBhB,OAPFmnM,EAAAD,EAAA96M,KAAA,KAAO2f,EAfS,CACf,EAAG,GAAI,EAAI,EAAG,EAAG,GAAK,EAAG,GAAI,GAC7B,EAAG,GAAI,GAAK,EAAG,GAAI,EAAI,EAAG,EAAG,GAC7B,GAAI,EAAG,EAAI,GAAI,EAAG,GAAK,GAAI,GAAI,EAC/B,EAAG,EAAG,GAAK,EAAG,GAAI,EAAI,EAAG,EAAG,GAC5B,EAAG,GAAI,EAAI,EAAG,EAAG,GAAK,EAAG,GAAI,GAC7B,EAAG,GAAI,EAAI,EAAG,EAAG,GAAK,EAAG,GAAI,GAC7B,EAAG,GAAI,GAAK,EAAG,GAAI,EAAI,EAAG,EAAG,GAC7B,GAAI,EAAG,EAAI,GAAI,EAAG,GAAK,GAAI,GAAI,EAC/B,EAAG,GAAI,GAAK,EAAG,GAAI,EAAI,EAAG,EAAG,EAC7B,GAAI,EAAG,EAAI,GAAI,EAAG,GAAK,GAAI,GAAI,EAC/B,GAAI,EAAG,GAAK,GAAI,GAAI,EAAI,GAAI,EAAG,GAC/B,EAAG,GAAI,GAAK,EAAG,GAAI,EAAI,EAAG,EAAG,GAGJsO,EAAQ61K,IAE7BrhM,KAAO,uBAEZs4M,EAAK3jK,WAAa,CACjBnpB,OAAQA,EACR61K,OAAQA,GACPiX,CAEH,CAMC,OANAxvM,EAAAA,EAAAA,GAAAqvM,EAAA,OAAA/zM,IAAA,WAAApG,MAED,SAAiB8M,GAEhB,OAAO,IAAIqtM,EAAsBrtM,EAAK0gB,OAAQ1gB,EAAKu2L,OAEpD,KAAC8W,CAAA,CA1DwB,CAASvB,IA8D7B2B,GAAoB,IAAI99K,GACxB+9K,GAAsB,IAAI/9K,GAC1Bg+K,GAAwB,IAAIh+K,GAC5Bi+K,GAA0B,IAAIlwE,GAE9BmwE,GAAa,SAAAC,IAAApyM,EAAAA,EAAAA,GAAAmyM,EAAAC,GAAA,IAAAC,GAAAnyM,EAAAA,EAAAA,GAAAiyM,GAElB,SAAAA,IAAmD,IAAAG,EAAtC9sK,EAAQjtC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,KAAMg6M,EAAch6M,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAW9C,IAX+C8H,EAAAA,EAAAA,GAAA,KAAA8xM,IAE/CG,EAAAD,EAAAt7M,KAAA,OAEKyC,KAAO,gBAEZ84M,EAAKnkK,WAAa,CACjB3I,SAAUA,EACV+sK,eAAgBA,GAGC,OAAb/sK,EAAoB,CAgBxB,IAdA,IACMv4B,EAAYlB,KAAK0F,IAAK,GADJ,GAElB+gM,EAAezmM,KAAKgF,IAAKi0G,GAAUutF,GAEnCE,EAAYjtK,EAASutD,WACrB2/G,EAAeltK,EAASwtD,aAAc,YACtC2/G,EAAaF,EAAYA,EAAUl4M,MAAQm4M,EAAan4M,MAExDq4M,EAAW,CAAE,EAAG,EAAG,GACnBC,EAAW,CAAE,IAAK,IAAK,KACvBC,EAAS,IAAIx3M,MAAO,GAEpBy3M,EAAW,CAAC,EACZr8L,EAAW,GACPnb,EAAI,EAAGA,EAAIo3M,EAAYp3M,GAAK,EAAI,CAEpCk3M,GAEJG,EAAU,GAAMH,EAAUr/G,KAAM73F,GAChCq3M,EAAU,GAAMH,EAAUr/G,KAAM73F,EAAI,GACpCq3M,EAAU,GAAMH,EAAUr/G,KAAM73F,EAAI,KAIpCq3M,EAAU,GAAMr3M,EAChBq3M,EAAU,GAAMr3M,EAAI,EACpBq3M,EAAU,GAAMr3M,EAAI,GAIrB,IAAQuT,EAAYojM,GAAZpjM,EAAG/E,EAASmoM,GAATnoM,EAAGgF,EAAMmjM,GAANnjM,EAYd,GAXAD,EAAEiyF,oBAAqB2xG,EAAcE,EAAU,IAC/C7oM,EAAEg3F,oBAAqB2xG,EAAcE,EAAU,IAC/C7jM,EAAEgyF,oBAAqB2xG,EAAcE,EAAU,IAC/CV,GAAUljL,UAAWijL,IAGrBa,EAAQ,GAAM,GAAH17M,OAAO2U,KAAK8jD,MAAO/gD,EAAEnI,EAAIsG,GAAW,KAAA7V,OAAM2U,KAAK8jD,MAAO/gD,EAAElI,EAAIqG,GAAW,KAAA7V,OAAM2U,KAAK8jD,MAAO/gD,EAAEjI,EAAIoG,IAC1G6lM,EAAQ,GAAM,GAAH17M,OAAO2U,KAAK8jD,MAAO9lD,EAAEpD,EAAIsG,GAAW,KAAA7V,OAAM2U,KAAK8jD,MAAO9lD,EAAEnD,EAAIqG,GAAW,KAAA7V,OAAM2U,KAAK8jD,MAAO9lD,EAAElD,EAAIoG,IAC1G6lM,EAAQ,GAAM,GAAH17M,OAAO2U,KAAK8jD,MAAO9gD,EAAEpI,EAAIsG,GAAW,KAAA7V,OAAM2U,KAAK8jD,MAAO9gD,EAAEnI,EAAIqG,GAAW,KAAA7V,OAAM2U,KAAK8jD,MAAO9gD,EAAElI,EAAIoG,IAGrG6lM,EAAQ,KAAQA,EAAQ,IAAOA,EAAQ,KAAQA,EAAQ,IAAOA,EAAQ,KAAQA,EAAQ,GAO3F,IAAM,IAAI9oM,EAAI,EAAGA,EAAI,EAAGA,IAAO,CAG9B,IAAMgpM,GAAUhpM,EAAI,GAAM,EACpBipM,EAAWH,EAAQ9oM,GACnBkpM,EAAWJ,EAAQE,GACnB5gL,EAAK8/K,GAAWW,EAAU7oM,IAC1BwpB,EAAK0+K,GAAWW,EAAUG,IAE1BtmC,EAAO,GAAHt1K,OAAO67M,EAAQ,KAAA77M,OAAM87M,GACzBC,EAAc,GAAH/7M,OAAO87M,EAAQ,KAAA97M,OAAM67M,GAEjCE,KAAeJ,GAAYA,EAAUI,IAIpClB,GAAQ9lM,IAAK4mM,EAAUI,GAAcx2L,SAAY61L,IAErD97L,EAASzc,KAAMm4B,EAAGzrB,EAAGyrB,EAAGxrB,EAAGwrB,EAAGvrB,GAC9B6P,EAASzc,KAAMu5B,EAAG7sB,EAAG6sB,EAAG5sB,EAAG4sB,EAAG3sB,IAI/BksM,EAAUI,GAAgB,MAEXzmC,KAAQqmC,IAGvBA,EAAUrmC,GAAS,CAElB0mC,OAAQR,EAAU5oM,GAClB0+H,OAAQkqE,EAAUI,GAClBr2L,OAAQs1L,GAAQl6L,SAMnB,CAED,CAGA,IAAM,IAAMna,KAAOm1M,EAElB,GAAKA,EAAUn1M,GAAQ,CAEtB,IAAAy1M,EAA2BN,EAAUn1M,GAA7Bw1M,EAAMC,EAAND,OAAQ1qE,EAAM2qE,EAAN3qE,OAChBqpE,GAAIhxG,oBAAqB2xG,EAAcU,GACvCpB,GAAMjxG,oBAAqB2xG,EAAchqE,GAEzChyH,EAASzc,KAAM83M,GAAIprM,EAAGorM,GAAInrM,EAAGmrM,GAAIlrM,GACjC6P,EAASzc,KAAM+3M,GAAMrrM,EAAGqrM,GAAMprM,EAAGorM,GAAMnrM,EAExC,CAIDyrM,EAAKhlK,aAAc,WAAY,IAAIo9F,GAAwBh0H,EAAU,GAEtE,CAAC,OAAA47L,CAEF,CAAC,OAAAhwM,EAAAA,EAAAA,GAAA6vM,EAAA,CA9HiB,CAAS9kK,IAkItBlc,GAAK,SAAAmiL,IAAAtzM,EAAAA,EAAAA,GAAAmxB,EAAAmiL,GAAA,IAAAC,GAAArzM,EAAAA,EAAAA,GAAAixB,GAEV,SAAAA,EAAavjB,GAAS,IAAA4lM,EAQL,OARKnzM,EAAAA,EAAAA,GAAA,KAAA8wB,IAErBqiL,EAAAD,EAAAx8M,KAAA,KAAO6W,IAEFjL,KAAOuiH,KAEZsuF,EAAKh6M,KAAO,QAEZg6M,EAAKC,MAAQ,GAAGD,CAEjB,CAiFC,OAjFAlxM,EAAAA,EAAAA,GAAA6uB,EAAA,EAAAvzB,IAAA,iBAAApG,MAED,SAAgBotM,GAIf,IAFA,IAAM8O,EAAW,GAEPn4M,EAAI,EAAGwS,EAAIpW,KAAK87M,MAAMv5M,OAAQqB,EAAIwS,EAAGxS,IAE9Cm4M,EAAUn4M,GAAM5D,KAAK87M,MAAOl4M,GAAI8wM,UAAWzH,GAI5C,OAAO8O,CAER,GAEA,CAAA91M,IAAA,gBAAApG,MAEA,SAAeotM,GAEd,MAAO,CAEN3lL,MAAOtnB,KAAK00M,UAAWzH,GACvB6O,MAAO97M,KAAKg8M,eAAgB/O,GAI9B,GAAC,CAAAhnM,IAAA,OAAApG,MAED,SAAM8G,IAELolC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAxS,EAAAr6B,WAAA,aAAAC,KAAA,KAAYuH,GAEZ3G,KAAK87M,MAAQ,GAEb,IAAM,IAAIl4M,EAAI,EAAGwS,EAAIzP,EAAOm1M,MAAMv5M,OAAQqB,EAAIwS,EAAGxS,IAAO,CAEvD,IAAMq4M,EAAOt1M,EAAOm1M,MAAOl4M,GAE3B5D,KAAK87M,MAAMx5M,KAAM25M,EAAK77L,QAEvB,CAEA,OAAOpgB,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,WAEC,IAAM8M,GAAIo/B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAxS,EAAAr6B,WAAA,eAAAC,KAAA,MAEVuN,EAAK3B,KAAOhL,KAAKgL,KACjB2B,EAAKmvM,MAAQ,GAEb,IAAM,IAAIl4M,EAAI,EAAGwS,EAAIpW,KAAK87M,MAAMv5M,OAAQqB,EAAIwS,EAAGxS,IAAO,CAErD,IAAMq4M,EAAOj8M,KAAK87M,MAAOl4M,GACzB+I,EAAKmvM,MAAMx5M,KAAM25M,EAAKllF,SAEvB,CAEA,OAAOpqH,CAER,GAAC,CAAA1G,IAAA,WAAApG,MAED,SAAUq+F,IAETnyD,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAxS,EAAAr6B,WAAA,iBAAAC,KAAA,KAAgB8+F,GAEhBl+F,KAAKgL,KAAOkzF,EAAKlzF,KACjBhL,KAAK87M,MAAQ,GAEb,IAAM,IAAIl4M,EAAI,EAAGwS,EAAI8nF,EAAK49G,MAAMv5M,OAAQqB,EAAIwS,EAAGxS,IAAO,CAErD,IAAMq4M,EAAO/9G,EAAK49G,MAAOl4M,GACzB5D,KAAK87M,MAAMx5M,MAAM,IAAIsyM,IAAOD,SAAUsH,GAEvC,CAEA,OAAOj8M,IAER,KAACw5B,CAAA,CA7FS,CAASo7K,IAqGdsH,GAEQ,SAAWvvM,EAAMwvM,GAAuB,IAShDp+E,EAAMC,EAAME,EAAMC,EAAMnvH,EAAGC,EAAGmtM,EATQC,EAAGz7M,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAE1C07M,EAAWH,GAAeA,EAAY55M,OACtCg6M,EAAWD,EAAWH,EAAa,GAAME,EAAM1vM,EAAKpK,OACtDi6M,EAAYC,GAAY9vM,EAAM,EAAG4vM,EAAUF,GAAK,GAC9CnmL,EAAY,GAElB,IAAOsmL,GAAaA,EAAUpvJ,OAASovJ,EAAUv0I,KAAO,OAAO/xC,EAO/D,GAHKomL,IAAWE,EAqTlB,SAAyB7vM,EAAMwvM,EAAaK,EAAWH,GAEtD,IACIz4M,EAAGuB,EAAiBK,EADlBuhF,EAAQ,GAGd,IAAMnjF,EAAI,EAAGuB,EAAMg3M,EAAY55M,OAAQqB,EAAIuB,EAAKvB,KAI/C4B,EAAOi3M,GAAY9vM,EAFXwvM,EAAav4M,GAAMy4M,EACrBz4M,EAAIuB,EAAM,EAAIg3M,EAAav4M,EAAI,GAAMy4M,EAAM1vM,EAAKpK,OACjB85M,GAAK,MAC5B72M,EAAK4nD,OAAO5nD,EAAKk3M,SAAU,GACzC31H,EAAMzkF,KAAMq6M,GAAan3M,IAO1B,IAHAuhF,EAAMzvB,KAAMslJ,IAGNh5M,EAAI,EAAGA,EAAImjF,EAAMxkF,OAAQqB,IAE9Bi5M,GAAe91H,EAAOnjF,GAAK44M,GAC3BA,EAAYM,GAAcN,EAAWA,EAAUpvJ,MAIhD,OAAOovJ,CAER,CAhV8BO,CAAgBpwM,EAAMwvM,EAAaK,EAAWH,IAGrE1vM,EAAKpK,OAAS,GAAK85M,EAAM,CAE7Bt+E,EAAOG,EAAOvxH,EAAM,GACpBqxH,EAAOG,EAAOxxH,EAAM,GAEpB,IAAM,IAAI/I,EAAIy4M,EAAKz4M,EAAI24M,EAAU34M,GAAKy4M,GAErCrtM,EAAIrC,EAAM/I,IAEDm6H,IAAOA,EAAO/uH,IADvBC,EAAItC,EAAM/I,EAAI,IAELo6H,IAAOA,EAAO/uH,GAClBD,EAAIkvH,IAAOA,EAAOlvH,GAClBC,EAAIkvH,IAAOA,EAAOlvH,GAMxBmtM,EAAsB,KADtBA,EAAUhoM,KAAKuC,IAAKunH,EAAOH,EAAMI,EAAOH,IACd,EAAIo+E,EAAU,CAEzC,CAIA,OAFAY,GAAcR,EAAWtmL,EAAWmmL,EAAKt+E,EAAMC,EAAMo+E,GAE9ClmL,CAER,EAKD,SAASumL,GAAY9vM,EAAMrF,EAAOu3I,EAAKw9D,EAAKY,GAE3C,IAAIr5M,EAAG0tD,EAEP,GAAK2rJ,IA+sBN,SAAqBtwM,EAAMrF,EAAOu3I,EAAKw9D,GAGtC,IADA,IAAI3+C,EAAM,EACA95J,EAAI0D,EAAO+K,EAAIwsI,EAAMw9D,EAAKz4M,EAAIi7I,EAAKj7I,GAAKy4M,EAEjD3+C,IAAS/wJ,EAAM0F,GAAM1F,EAAM/I,KAAU+I,EAAM/I,EAAI,GAAM+I,EAAM0F,EAAI,IAC/DA,EAAIzO,EAIL,OAAO85J,CAER,CA3tBsBw/C,CAAYvwM,EAAMrF,EAAOu3I,EAAKw9D,GAAQ,EAE1D,IAAMz4M,EAAI0D,EAAO1D,EAAIi7I,EAAKj7I,GAAKy4M,EAAM/qJ,EAAO6rJ,GAAYv5M,EAAG+I,EAAM/I,GAAK+I,EAAM/I,EAAI,GAAK0tD,QAIrF,IAAM1tD,EAAIi7I,EAAMw9D,EAAKz4M,GAAK0D,EAAO1D,GAAKy4M,EAAM/qJ,EAAO6rJ,GAAYv5M,EAAG+I,EAAM/I,GAAK+I,EAAM/I,EAAI,GAAK0tD,GAW7F,OAPKA,GAAQ2uE,GAAQ3uE,EAAMA,EAAKlE,QAE/BgwJ,GAAY9rJ,GACZA,EAAOA,EAAKlE,MAINkE,CAER,CAGA,SAASwrJ,GAAcx1M,EAAOu3I,GAE7B,IAAOv3I,EAAQ,OAAOA,EACfu3I,IAAMA,EAAMv3I,GAEnB,IACC+1M,EADG5qM,EAAInL,EAER,GAIC,GAFA+1M,GAAQ,EAED5qM,EAAEiqM,UAAaz8E,GAAQxtH,EAAGA,EAAE26C,OAAwC,IAA9BkwJ,GAAM7qM,EAAEw1D,KAAMx1D,EAAGA,EAAE26C,MAS/D36C,EAAIA,EAAE26C,SAT0E,CAIhF,GAFAgwJ,GAAY3qM,IACZA,EAAIosI,EAAMpsI,EAAEw1D,QACDx1D,EAAE26C,KAAO,MACpBiwJ,GAAQ,CAET,QAMSA,GAAS5qM,IAAMosI,GAEzB,OAAOA,CAER,CAGA,SAASm+D,GAAcO,EAAKrnL,EAAWmmL,EAAKt+E,EAAMC,EAAMo+E,EAASoB,GAEhE,GAAOD,EAAP,EAGOC,GAAQpB,GA0VhB,SAAqB90M,EAAOy2H,EAAMC,EAAMo+E,GAEvC,IAAI3pM,EAAInL,EACR,GAEc,OAARmL,EAAEvD,IAAauD,EAAEvD,EAAIuuM,GAAQhrM,EAAEzD,EAAGyD,EAAExD,EAAG8uH,EAAMC,EAAMo+E,IACxD3pM,EAAEirM,MAAQjrM,EAAEw1D,KACZx1D,EAAEkrM,MAAQlrM,EAAE26C,KACZ36C,EAAIA,EAAE26C,WAEG36C,IAAMnL,GAEhBmL,EAAEirM,MAAMC,MAAQ,KAChBlrM,EAAEirM,MAAQ,KAQX,SAAqBl4M,GAEpB,IAAI5B,EAAG6O,EAAGS,EAAGjG,EAAG6+E,EAAM8xH,EAAWC,EAAOC,EACvCC,EAAS,EAEV,EAAG,CAOF,IALAtrM,EAAIjN,EACJA,EAAO,KACPsmF,EAAO,KACP8xH,EAAY,EAEJnrM,GAAI,CAKX,IAHAmrM,IACA1qM,EAAIT,EACJorM,EAAQ,EACFj6M,EAAI,EAAGA,EAAIm6M,IAEhBF,IACA3qM,EAAIA,EAAEyqM,OAHkB/5M,KAUzB,IAFAk6M,EAAQC,EAEAF,EAAQ,GAAOC,EAAQ,GAAK5qM,GAEpB,IAAV2qM,IAA2B,IAAVC,IAAiB5qM,GAAKT,EAAEvD,GAAKgE,EAAEhE,IAEpDjC,EAAIwF,EACJA,EAAIA,EAAEkrM,MACNE,MAIA5wM,EAAIiG,EACJA,EAAIA,EAAEyqM,MACNG,KAIIhyH,EAAOA,EAAK6xH,MAAQ1wM,EACpBzH,EAAOyH,EAEZA,EAAEywM,MAAQ5xH,EACVA,EAAO7+E,EAIRwF,EAAIS,CAEL,CAEA44E,EAAK6xH,MAAQ,KACbI,GAAU,CAEX,OAAUH,EAAY,EAIvB,CApECI,CAAYvrM,EAEb,CA3W0BwrM,CAAYV,EAAKx/E,EAAMC,EAAMo+E,GAMtD,IAJA,IACCn0I,EAAM7a,EADHoO,EAAO+hJ,EAIHA,EAAIt1I,OAASs1I,EAAInwJ,MAKxB,GAHA6a,EAAOs1I,EAAIt1I,KACX7a,EAAOmwJ,EAAInwJ,KAENgvJ,EAAU8B,GAAaX,EAAKx/E,EAAMC,EAAMo+E,GAAY+B,GAAOZ,GAG/DrnL,EAAU5zB,KAAM2lE,EAAKrkE,EAAIy4M,GACzBnmL,EAAU5zB,KAAMi7M,EAAI35M,EAAIy4M,GACxBnmL,EAAU5zB,KAAM8qD,EAAKxpD,EAAIy4M,GAEzBe,GAAYG,GAGZA,EAAMnwJ,EAAKA,KACXoO,EAAOpO,EAAKA,UASb,IAHAmwJ,EAAMnwJ,KAGOoO,EAAO,CAGZgiJ,EAMc,IAATA,EAGXR,GADAO,EAAMa,GAAwBtB,GAAcS,GAAOrnL,EAAWmmL,GAC3CnmL,EAAWmmL,EAAKt+E,EAAMC,EAAMo+E,EAAS,GAIpC,IAAToB,GAEXa,GAAad,EAAKrnL,EAAWmmL,EAAKt+E,EAAMC,EAAMo+E,GAb9CY,GAAcF,GAAcS,GAAOrnL,EAAWmmL,EAAKt+E,EAAMC,EAAMo+E,EAAS,GAiBzE,KAED,CA1DkB,CA8DpB,CAGA,SAAS+B,GAAOZ,GAEf,IAAMpmM,EAAIomM,EAAIt1I,KACb71D,EAAImrM,EACJnmM,EAAImmM,EAAInwJ,KAET,GAAKkwJ,GAAMnmM,EAAG/E,EAAGgF,IAAO,EAAI,OAAO,EAKnC,IAFA,IAAI3E,EAAI8qM,EAAInwJ,KAAKA,KAET36C,IAAM8qM,EAAIt1I,MAAO,CAExB,GAAKlyC,GAAiB5e,EAAEnI,EAAGmI,EAAElI,EAAGmD,EAAEpD,EAAGoD,EAAEnD,EAAGmI,EAAEpI,EAAGoI,EAAEnI,EAAGwD,EAAEzD,EAAGyD,EAAExD,IAC1DquM,GAAM7qM,EAAEw1D,KAAMx1D,EAAGA,EAAE26C,OAAU,EAAI,OAAO,EACzC36C,EAAIA,EAAE26C,IAEP,CAEA,OAAO,CAER,CAEA,SAAS8wJ,GAAaX,EAAKx/E,EAAMC,EAAMo+E,GAEtC,IAAMjlM,EAAIomM,EAAIt1I,KACb71D,EAAImrM,EACJnmM,EAAImmM,EAAInwJ,KAET,GAAKkwJ,GAAMnmM,EAAG/E,EAAGgF,IAAO,EAAI,OAAO,EAgBnC,IAbA,IAAMknM,EAAQnnM,EAAEnI,EAAIoD,EAAEpD,EAAMmI,EAAEnI,EAAIoI,EAAEpI,EAAImI,EAAEnI,EAAIoI,EAAEpI,EAAQoD,EAAEpD,EAAIoI,EAAEpI,EAAIoD,EAAEpD,EAAIoI,EAAEpI,EAC3EuvM,EAAQpnM,EAAElI,EAAImD,EAAEnD,EAAMkI,EAAElI,EAAImI,EAAEnI,EAAIkI,EAAElI,EAAImI,EAAEnI,EAAQmD,EAAEnD,EAAImI,EAAEnI,EAAImD,EAAEnD,EAAImI,EAAEnI,EACtEuvM,EAAQrnM,EAAEnI,EAAIoD,EAAEpD,EAAMmI,EAAEnI,EAAIoI,EAAEpI,EAAImI,EAAEnI,EAAIoI,EAAEpI,EAAQoD,EAAEpD,EAAIoI,EAAEpI,EAAIoD,EAAEpD,EAAIoI,EAAEpI,EACtEyvM,EAAQtnM,EAAElI,EAAImD,EAAEnD,EAAMkI,EAAElI,EAAImI,EAAEnI,EAAIkI,EAAElI,EAAImI,EAAEnI,EAAQmD,EAAEnD,EAAImI,EAAEnI,EAAImD,EAAEnD,EAAImI,EAAEnI,EAGjEgvH,EAAOw/E,GAAQa,EAAOC,EAAOxgF,EAAMC,EAAMo+E,GAC9Ch+E,EAAOq/E,GAAQe,EAAOC,EAAO1gF,EAAMC,EAAMo+E,GAEtC3pM,EAAI8qM,EAAIG,MACX15M,EAAIu5M,EAAII,MAGDlrM,GAAKA,EAAEvD,GAAK+uH,GAAQj6H,GAAKA,EAAEkL,GAAKkvH,GAAO,CAE9C,GAAK3rH,IAAM8qM,EAAIt1I,MAAQx1D,IAAM8qM,EAAInwJ,MAChCr3B,GAAiB5e,EAAEnI,EAAGmI,EAAElI,EAAGmD,EAAEpD,EAAGoD,EAAEnD,EAAGmI,EAAEpI,EAAGoI,EAAEnI,EAAGwD,EAAEzD,EAAGyD,EAAExD,IACtDquM,GAAM7qM,EAAEw1D,KAAMx1D,EAAGA,EAAE26C,OAAU,EAAI,OAAO,EAGzC,GAFA36C,EAAIA,EAAEirM,MAED15M,IAAMu5M,EAAIt1I,MAAQjkE,IAAMu5M,EAAInwJ,MAChCr3B,GAAiB5e,EAAEnI,EAAGmI,EAAElI,EAAGmD,EAAEpD,EAAGoD,EAAEnD,EAAGmI,EAAEpI,EAAGoI,EAAEnI,EAAGjL,EAAEgL,EAAGhL,EAAEiL,IACtDquM,GAAMt5M,EAAEikE,KAAMjkE,EAAGA,EAAEopD,OAAU,EAAI,OAAO,EACzCppD,EAAIA,EAAE25M,KAEP,CAGA,KAAQlrM,GAAKA,EAAEvD,GAAK+uH,GAAO,CAE1B,GAAKxrH,IAAM8qM,EAAIt1I,MAAQx1D,IAAM8qM,EAAInwJ,MAChCr3B,GAAiB5e,EAAEnI,EAAGmI,EAAElI,EAAGmD,EAAEpD,EAAGoD,EAAEnD,EAAGmI,EAAEpI,EAAGoI,EAAEnI,EAAGwD,EAAEzD,EAAGyD,EAAExD,IACtDquM,GAAM7qM,EAAEw1D,KAAMx1D,EAAGA,EAAE26C,OAAU,EAAI,OAAO,EACzC36C,EAAIA,EAAEirM,KAEP,CAGA,KAAQ15M,GAAKA,EAAEkL,GAAKkvH,GAAO,CAE1B,GAAKp6H,IAAMu5M,EAAIt1I,MAAQjkE,IAAMu5M,EAAInwJ,MAChCr3B,GAAiB5e,EAAEnI,EAAGmI,EAAElI,EAAGmD,EAAEpD,EAAGoD,EAAEnD,EAAGmI,EAAEpI,EAAGoI,EAAEnI,EAAGjL,EAAEgL,EAAGhL,EAAEiL,IACtDquM,GAAMt5M,EAAEikE,KAAMjkE,EAAGA,EAAEopD,OAAU,EAAI,OAAO,EACzCppD,EAAIA,EAAE25M,KAEP,CAEA,OAAO,CAER,CAGA,SAASS,GAAwB92M,EAAO4uB,EAAWmmL,GAElD,IAAI5pM,EAAInL,EACR,EAAG,CAEF,IAAM6P,EAAI1E,EAAEw1D,KACX71D,EAAIK,EAAE26C,KAAKA,MAEL6yE,GAAQ9oH,EAAG/E,IAAOgmI,GAAYjhI,EAAG1E,EAAGA,EAAE26C,KAAMh7C,IAAOssM,GAAevnM,EAAG/E,IAAOssM,GAAetsM,EAAG+E,KAEpG+e,EAAU5zB,KAAM6U,EAAEvT,EAAIy4M,GACtBnmL,EAAU5zB,KAAMmQ,EAAE7O,EAAIy4M,GACtBnmL,EAAU5zB,KAAM8P,EAAExO,EAAIy4M,GAGtBe,GAAY3qM,GACZ2qM,GAAY3qM,EAAE26C,MAEd36C,EAAInL,EAAQ8K,GAIbK,EAAIA,EAAE26C,IAEP,OAAU36C,IAAMnL,GAEhB,OAAOw1M,GAAcrqM,EAEtB,CAGA,SAAS4rM,GAAa/2M,EAAO4uB,EAAWmmL,EAAKt+E,EAAMC,EAAMo+E,GAGxD,IAAIjlM,EAAI7P,EACR,EAAG,CAGF,IADA,IAAI8K,EAAI+E,EAAEi2C,KAAKA,KACPh7C,IAAM+E,EAAE8wD,MAAO,CAEtB,GAAK9wD,EAAEvT,IAAMwO,EAAExO,GAAK+6M,GAAiBxnM,EAAG/E,GAAM,CAG7C,IAAIgF,EAAIwnM,GAAcznM,EAAG/E,GASzB,OANA+E,EAAI2lM,GAAc3lM,EAAGA,EAAEi2C,MACvBh2C,EAAI0lM,GAAc1lM,EAAGA,EAAEg2C,MAGvB4vJ,GAAc7lM,EAAG+e,EAAWmmL,EAAKt+E,EAAMC,EAAMo+E,QAC7CY,GAAc5lM,EAAG8e,EAAWmmL,EAAKt+E,EAAMC,EAAMo+E,EAG9C,CAEAhqM,EAAIA,EAAEg7C,IAEP,CAEAj2C,EAAIA,EAAEi2C,IAEP,OAAUj2C,IAAM7P,EAEjB,CAgCA,SAASs1M,GAAUzlM,EAAG/E,GAErB,OAAO+E,EAAEnI,EAAIoD,EAAEpD,CAEhB,CAGA,SAAS6tM,GAAeZ,EAAMO,GAG7B,GADAA,EAcD,SAAyBP,EAAMO,GAE9B,IAGqBz6M,EAHjB0Q,EAAI+pM,EACFqC,EAAK5C,EAAKjtM,EACV8vM,EAAK7C,EAAKhtM,EACZyL,GAAO9H,IAIX,EAAG,CAEF,GAAKksM,GAAMrsM,EAAExD,GAAK6vM,GAAMrsM,EAAE26C,KAAKn+C,GAAKwD,EAAE26C,KAAKn+C,IAAMwD,EAAExD,EAAI,CAEtD,IAAMD,EAAIyD,EAAEzD,GAAM8vM,EAAKrsM,EAAExD,IAAQwD,EAAE26C,KAAKp+C,EAAIyD,EAAEzD,IAAQyD,EAAE26C,KAAKn+C,EAAIwD,EAAExD,GACnE,GAAKD,GAAK6vM,GAAM7vM,EAAI0L,EAAK,CAGxB,GADAA,EAAK1L,EACAA,IAAM6vM,EAAK,CAEf,GAAKC,IAAOrsM,EAAExD,EAAI,OAAOwD,EACzB,GAAKqsM,IAAOrsM,EAAE26C,KAAKn+C,EAAI,OAAOwD,EAAE26C,IAEjC,CAEArrD,EAAI0Q,EAAEzD,EAAIyD,EAAE26C,KAAKp+C,EAAIyD,EAAIA,EAAE26C,IAE5B,CAED,CAEA36C,EAAIA,EAAE26C,IAEP,OAAU36C,IAAM+pM,GAEhB,IAAOz6M,EAAI,OAAO,KAElB,GAAK88M,IAAOnkM,EAAK,OAAO3Y,EAMxB,IAGuBwjD,EAHjBiW,EAAOz5D,EACZg9M,EAAKh9M,EAAEiN,EACPgwM,EAAKj9M,EAAEkN,EACJgwM,EAASrsM,IAEbH,EAAI1Q,EAEJ,GAEM88M,GAAMpsM,EAAEzD,GAAKyD,EAAEzD,GAAK+vM,GAAMF,IAAOpsM,EAAEzD,GACtC+mB,GAAiB+oL,EAAKE,EAAKH,EAAKnkM,EAAIokM,EAAIC,EAAIC,EAAIF,EAAKE,EAAKtkM,EAAKmkM,EAAIC,EAAIrsM,EAAEzD,EAAGyD,EAAExD,KAE/Es2C,EAAMnxC,KAAKgB,IAAK0pM,EAAKrsM,EAAExD,IAAQ4vM,EAAKpsM,EAAEzD,GAEjC0vM,GAAejsM,EAAGwpM,KAAY12J,EAAM05J,GAAY15J,IAAQ05J,IAAYxsM,EAAEzD,EAAIjN,EAAEiN,GAAOyD,EAAEzD,IAAMjN,EAAEiN,GAAKkwM,GAAsBn9M,EAAG0Q,OAE/H1Q,EAAI0Q,EACJwsM,EAAS15J,IAMX9yC,EAAIA,EAAE26C,WAEG36C,IAAM+oD,GAEhB,OAAOz5D,CAER,CArFao9M,CAAgBlD,EAAMO,GAC7BA,EAAY,CAEhB,IAAMpqM,EAAIwsM,GAAcpC,EAAWP,GAGnCa,GAAcN,EAAWA,EAAUpvJ,MACnC0vJ,GAAc1qM,EAAGA,EAAEg7C,KAEpB,CAED,CA6EA,SAAS8xJ,GAAsBn9M,EAAG0Q,GAEjC,OAAO6qM,GAAMv7M,EAAEkmE,KAAMlmE,EAAG0Q,EAAEw1D,MAAS,GAAKq1I,GAAM7qM,EAAE26C,KAAMrrD,EAAGA,EAAEqrD,MAAS,CAErE,CAyFA,SAASqwJ,GAAQzuM,EAAGC,EAAG8uH,EAAMC,EAAMo+E,GAgBlC,OAPAptM,EAAyB,aADzBA,EAAyB,YADzBA,EAAyB,YADzBA,EAAyB,WAHzBA,EAAI,OAAUA,EAAI+uH,GAASq+E,GAGfptM,GAAK,IACLA,GAAK,IACLA,GAAK,IACLA,GAAK,KAKjBC,EAAyB,aADzBA,EAAyB,YADzBA,EAAyB,YADzBA,EAAyB,WAPzBA,EAAI,OAAUA,EAAI+uH,GAASo+E,GAOfntM,GAAK,IACLA,GAAK,IACLA,GAAK,IACLA,GAAK,KAEC,CAEnB,CAGA,SAAS0tM,GAAar1M,GAErB,IAAImL,EAAInL,EACP83M,EAAW93M,EACZ,IAEMmL,EAAEzD,EAAIowM,EAASpwM,GAAOyD,EAAEzD,IAAMowM,EAASpwM,GAAKyD,EAAExD,EAAImwM,EAASnwM,KAAMmwM,EAAW3sM,GACjFA,EAAIA,EAAE26C,WAEG36C,IAAMnL,GAEhB,OAAO83M,CAER,CAGA,SAASrpL,GAAiB/b,EAAIC,EAAIG,EAAIC,EAAIy3G,EAAIC,EAAIt9G,EAAIC,GAErD,OAASo9G,EAAKr9G,IAASwF,EAAKvF,IAASsF,EAAKvF,IAASs9G,EAAKr9G,IAAQ,IAC5DsF,EAAKvF,IAAS4F,EAAK3F,IAAS0F,EAAK3F,IAASwF,EAAKvF,IAAQ,IACvD0F,EAAK3F,IAASs9G,EAAKr9G,IAASo9G,EAAKr9G,IAAS4F,EAAK3F,IAAQ,CAE5D,CAGA,SAASiqM,GAAiBxnM,EAAG/E,GAE5B,OAAO+E,EAAEi2C,KAAKxpD,IAAMwO,EAAExO,GAAKuT,EAAE8wD,KAAKrkE,IAAMwO,EAAExO,IAsD3C,SAA4BuT,EAAG/E,GAE9B,IAAIK,EAAI0E,EACR,EAAG,CAEF,GAAK1E,EAAE7O,IAAMuT,EAAEvT,GAAK6O,EAAE26C,KAAKxpD,IAAMuT,EAAEvT,GAAK6O,EAAE7O,IAAMwO,EAAExO,GAAK6O,EAAE26C,KAAKxpD,IAAMwO,EAAExO,GACpEw0I,GAAY3lI,EAAGA,EAAE26C,KAAMj2C,EAAG/E,GAAM,OAAO,EACzCK,EAAIA,EAAE26C,IAEP,OAAU36C,IAAM0E,GAEhB,OAAO,CAER,CAnEkDkoM,CAAmBloM,EAAG/E,KACpEssM,GAAevnM,EAAG/E,IAAOssM,GAAetsM,EAAG+E,IA8E/C,SAAuBA,EAAG/E,GAEzB,IAAIK,EAAI0E,EACPmoM,GAAS,EACJ7qM,GAAO0C,EAAEnI,EAAIoD,EAAEpD,GAAM,EAC1B0F,GAAOyC,EAAElI,EAAImD,EAAEnD,GAAM,EACtB,GAEUwD,EAAExD,EAAIyF,IAAWjC,EAAE26C,KAAKn+C,EAAIyF,GAAUjC,EAAE26C,KAAKn+C,IAAMwD,EAAExD,GAC1DwF,GAAOhC,EAAE26C,KAAKp+C,EAAIyD,EAAEzD,IAAQ0F,EAAKjC,EAAExD,IAAQwD,EAAE26C,KAAKn+C,EAAIwD,EAAExD,GAAMwD,EAAEzD,IACnEswM,GAAWA,GACZ7sM,EAAIA,EAAE26C,WAEG36C,IAAM0E,GAEhB,OAAOmoM,CAER,CA/FsDC,CAAcpoM,EAAG/E,KACnEkrM,GAAMnmM,EAAE8wD,KAAM9wD,EAAG/E,EAAE61D,OAAUq1I,GAAMnmM,EAAG/E,EAAE61D,KAAM71D,KAChD6tH,GAAQ9oH,EAAG/E,IAAOkrM,GAAMnmM,EAAE8wD,KAAM9wD,EAAGA,EAAEi2C,MAAS,GAAKkwJ,GAAMlrM,EAAE61D,KAAM71D,EAAGA,EAAEg7C,MAAS,EAEjF,CAGA,SAASkwJ,GAAM7qM,EAAGS,EAAGF,GAEpB,OAASE,EAAEjE,EAAIwD,EAAExD,IAAQ+D,EAAEhE,EAAIkE,EAAElE,IAAQkE,EAAElE,EAAIyD,EAAEzD,IAAQgE,EAAE/D,EAAIiE,EAAEjE,EAElE,CAGA,SAASgxH,GAAQ1zB,EAAI6zB,GAEpB,OAAO7zB,EAAGv9F,IAAMoxH,EAAGpxH,GAAKu9F,EAAGt9F,IAAMmxH,EAAGnxH,CAErC,CAGA,SAASmpI,GAAY7rC,EAAIizG,EAAIp/E,EAAIq/E,GAEhC,IAAMC,EAAK5jK,GAAMwhK,GAAM/wG,EAAIizG,EAAIp/E,IACzBu/E,EAAK7jK,GAAMwhK,GAAM/wG,EAAIizG,EAAIC,IACzBG,EAAK9jK,GAAMwhK,GAAMl9E,EAAIq/E,EAAIlzG,IACzBszG,EAAK/jK,GAAMwhK,GAAMl9E,EAAIq/E,EAAID,IAE/B,OAAKE,IAAOC,GAAMC,IAAOC,MAEb,IAAPH,IAAYI,GAAWvzG,EAAI6zB,EAAIo/E,QACxB,IAAPG,IAAYG,GAAWvzG,EAAIkzG,EAAID,QACxB,IAAPI,IAAYE,GAAW1/E,EAAI7zB,EAAIkzG,OACxB,IAAPI,IAAYC,GAAW1/E,EAAIo/E,EAAIC,MAIrC,CAGA,SAASK,GAAWrtM,EAAGS,EAAGF,GAEzB,OAAOE,EAAElE,GAAKoF,KAAKuC,IAAKlE,EAAEzD,EAAGgE,EAAEhE,IAAOkE,EAAElE,GAAKoF,KAAKsC,IAAKjE,EAAEzD,EAAGgE,EAAEhE,IAAOkE,EAAEjE,GAAKmF,KAAKuC,IAAKlE,EAAExD,EAAG+D,EAAE/D,IAAOiE,EAAEjE,GAAKmF,KAAKsC,IAAKjE,EAAExD,EAAG+D,EAAE/D,EAE7H,CAEA,SAAS6sC,GAAMgU,GAEd,OAAOA,EAAM,EAAI,EAAIA,EAAM,GAAM,EAAI,CAEtC,CAmBA,SAAS4uJ,GAAevnM,EAAG/E,GAE1B,OAAOkrM,GAAMnmM,EAAE8wD,KAAM9wD,EAAGA,EAAEi2C,MAAS,EAClCkwJ,GAAMnmM,EAAG/E,EAAG+E,EAAEi2C,OAAU,GAAKkwJ,GAAMnmM,EAAGA,EAAE8wD,KAAM71D,IAAO,EACrDkrM,GAAMnmM,EAAG/E,EAAG+E,EAAE8wD,MAAS,GAAKq1I,GAAMnmM,EAAGA,EAAEi2C,KAAMh7C,GAAM,CAErD,CAwBA,SAASwsM,GAAcznM,EAAG/E,GAEzB,IAAM87G,EAAK,IAAI6xF,GAAM5oM,EAAEvT,EAAGuT,EAAEnI,EAAGmI,EAAElI,GAChCm/G,EAAK,IAAI2xF,GAAM3tM,EAAExO,EAAGwO,EAAEpD,EAAGoD,EAAEnD,GAC3B+wM,EAAK7oM,EAAEi2C,KACP6yJ,EAAK7tM,EAAE61D,KAcR,OAZA9wD,EAAEi2C,KAAOh7C,EACTA,EAAE61D,KAAO9wD,EAET+2G,EAAG9gE,KAAO4yJ,EACVA,EAAG/3I,KAAOimD,EAEVE,EAAGhhE,KAAO8gE,EACVA,EAAGjmD,KAAOmmD,EAEV6xF,EAAG7yJ,KAAOghE,EACVA,EAAGnmD,KAAOg4I,EAEH7xF,CAER,CAGA,SAAS+uF,GAAYv5M,EAAGoL,EAAGC,EAAGqiD,GAE7B,IAAM7+C,EAAI,IAAIstM,GAAMn8M,EAAGoL,EAAGC,GAgB1B,OAdOqiD,GAON7+C,EAAE26C,KAAOkE,EAAKlE,KACd36C,EAAEw1D,KAAO3W,EACTA,EAAKlE,KAAK6a,KAAOx1D,EACjB6+C,EAAKlE,KAAO36C,IARZA,EAAEw1D,KAAOx1D,EACTA,EAAE26C,KAAO36C,GAWHA,CAER,CAEA,SAAS2qM,GAAY3qM,GAEpBA,EAAE26C,KAAK6a,KAAOx1D,EAAEw1D,KAChBx1D,EAAEw1D,KAAK7a,KAAO36C,EAAE26C,KAEX36C,EAAEirM,QAAQjrM,EAAEirM,MAAMC,MAAQlrM,EAAEkrM,OAC5BlrM,EAAEkrM,QAAQlrM,EAAEkrM,MAAMD,MAAQjrM,EAAEirM,MAElC,CAEA,SAASqC,GAAMn8M,EAAGoL,EAAGC,GAGpBjP,KAAK4D,EAAIA,EAGT5D,KAAKgP,EAAIA,EACThP,KAAKiP,EAAIA,EAGTjP,KAAKioE,KAAO,KACZjoE,KAAKotD,KAAO,KAGZptD,KAAKkP,EAAI,KAGTlP,KAAK09M,MAAQ,KACb19M,KAAK29M,MAAQ,KAGb39M,KAAK08M,SAAU,CAEhB,CAcC,IAEKwD,GAAU,oBAAAA,KAAAx3M,EAAAA,EAAAA,GAAA,KAAAw3M,EAAA,CA8Dd,OA9Dcv1M,EAAAA,EAAAA,GAAAu1M,EAAA,OAAAj6M,IAAA,OAAApG,MAIf,SAAasgN,GAKZ,IAHA,IAAMn8M,EAAIm8M,EAAQ59M,OACd4U,EAAI,EAEE1E,EAAIzO,EAAI,EAAGkP,EAAI,EAAGA,EAAIlP,EAAGyO,EAAIS,IAEtCiE,GAAKgpM,EAAS1tM,GAAIzD,EAAImxM,EAASjtM,GAAIjE,EAAIkxM,EAASjtM,GAAIlE,EAAImxM,EAAS1tM,GAAIxD,EAItE,MAAW,GAAJkI,CAER,GAAC,CAAAlR,IAAA,cAAApG,MAED,SAAoB40M,GAEnB,OAAOyL,EAAW5C,KAAM7I,GAAQ,CAEjC,GAAC,CAAAxuM,IAAA,mBAAApG,MAED,SAAyBsgN,EAASrE,GAEjC,IAAM/8L,EAAW,GACXo9L,EAAc,GACdl9L,EAAQ,GAEdmhM,GAAiBD,GACjBE,GAAYthM,EAAUohM,GAItB,IAAIG,EAAYH,EAAQ59M,OAExBu5M,EAAMn7K,QAASy/K,IAEf,IAAM,IAAIx8M,EAAI,EAAGA,EAAIk4M,EAAMv5M,OAAQqB,IAElCu4M,EAAY75M,KAAMg+M,GAClBA,GAAaxE,EAAOl4M,GAAIrB,OACxB89M,GAAYthM,EAAU+8L,EAAOl4M,IAU9B,IAJA,IAAMsyB,EAAYgmL,GAAoBn9L,EAAUo9L,GAItCv4M,EAAI,EAAGA,EAAIsyB,EAAU3zB,OAAQqB,GAAK,EAE3Cqb,EAAM3c,KAAM4zB,EAAUv1B,MAAOiD,EAAGA,EAAI,IAIrC,OAAOqb,CAER,KAACihM,CAAA,CA9Dc,GAkEhB,SAASE,GAAiBnqM,GAEzB,IAAMG,EAAIH,EAAO1T,OAEZ6T,EAAI,GAAKH,EAAQG,EAAI,GAAI6pH,OAAQhqH,EAAQ,KAE7CA,EAAOpQ,KAIT,CAEA,SAASw6M,GAAYthM,EAAUohM,GAE9B,IAAM,IAAIv8M,EAAI,EAAGA,EAAIu8M,EAAQ59M,OAAQqB,IAEpCmb,EAASzc,KAAM69M,EAASv8M,GAAIoL,GAC5B+P,EAASzc,KAAM69M,EAASv8M,GAAIqL,EAI9B,CAEA,IAsBMsxM,GAAe,SAAAC,IAAAn4M,EAAAA,EAAAA,GAAAk4M,EAAAC,GAAA,IAAAC,GAAAl4M,EAAAA,EAAAA,GAAAg4M,GAEpB,SAAAA,IAAkK,IAAAG,EAArJz1L,EAAMrqB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAI44B,GAAO,CAAE,IAAI4Z,GAAS,GAAK,IAAO,IAAIA,IAAW,GAAK,IAAO,IAAIA,IAAW,IAAO,IAAO,IAAIA,GAAS,IAAO,MAAWprC,EAAOpH,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,CAAC,GAAC8H,EAAAA,EAAAA,GAAA,KAAA63M,IAE9JG,EAAAD,EAAArhN,KAAA,OAEKyC,KAAO,kBAEZ6+M,EAAKlqK,WAAa,CACjBvrB,OAAQA,EACRjjB,QAASA,GAGVijB,EAAStnB,MAAM0sC,QAASplB,GAAWA,EAAS,CAAEA,GAO9C,IALA,IAAMy0B,GAAK3B,EAAAA,EAAAA,GAAA2iK,GAELC,EAAgB,GAChBC,EAAU,GAENh9M,EAAI,EAAGwS,EAAI6U,EAAO1oB,OAAQqB,EAAIwS,EAAGxS,IAAO,CAGjDsoB,EADcjB,EAAQrnB,GAGvB,CAWA,SAASsoB,EAAU5E,GAElB,IAoBIu5L,EACAC,EAAYC,EAAU/7L,EAAQg8L,EArB5BC,EAAc,GAIdC,OAA0C//M,IAA1B6G,EAAQk5M,cAA8Bl5M,EAAQk5M,cAAgB,GAC9EC,OAA0BhgN,IAAlB6G,EAAQm5M,MAAsBn5M,EAAQm5M,MAAQ,EACtDt8L,OAA0B1jB,IAAlB6G,EAAQ6c,MAAsB7c,EAAQ6c,MAAQ,EAExDu8L,OAAwCjgN,IAAzB6G,EAAQo5M,cAA6Bp5M,EAAQo5M,aAC5DC,OAA4ClgN,IAA3B6G,EAAQq5M,eAA+Br5M,EAAQq5M,eAAiB,GACjFC,OAAkCngN,IAAtB6G,EAAQs5M,UAA0Bt5M,EAAQs5M,UAAYD,EAAiB,GACnFE,OAAsCpgN,IAAxB6G,EAAQu5M,YAA4Bv5M,EAAQu5M,YAAc,EACxEC,OAA0CrgN,IAA1B6G,EAAQw5M,cAA8Bx5M,EAAQw5M,cAAgB,EAE5EC,EAAcz5M,EAAQy5M,YAEtBC,OAAgCvgN,IAAxB6G,EAAQ25M,YAA4B35M,EAAQ25M,YAAcC,GAIxDC,GAAgB,EAG3BJ,IAEJZ,EAAaY,EAAYK,gBAAiBX,GAE1CU,GAAgB,EAChBT,GAAe,EAMfN,EAAaW,EAAYM,oBAAqBZ,GAAO,GAIrDJ,EAAW,IAAIzkL,GACftX,EAAS,IAAIsX,GACb0kL,EAAY,IAAI1kL,IAMV8kL,IAENI,EAAgB,EAChBH,EAAiB,EACjBC,EAAY,EACZC,EAAc,GAMf,IAAMS,EAAc16L,EAAM26L,cAAef,GAErCniM,EAAWijM,EAAY16L,MACrBw0L,EAAQkG,EAAYlG,MAI1B,IAFkBoE,GAAWgC,YAAanjM,GAE3B,CAEdA,EAAWA,EAASu0C,UAIpB,IAAM,IAAI/7C,EAAI,EAAG4qM,EAAKrG,EAAMv5M,OAAQgV,EAAI4qM,EAAI5qM,IAAO,CAElD,IAAM6qM,EAAQtG,EAAOvkM,GAEhB2oM,GAAWgC,YAAaE,KAE5BtG,EAAOvkM,GAAM6qM,EAAM9uJ,UAIrB,CAED,CASA,IANA,IAAMr0C,EAAQihM,GAAWmC,iBAAkBtjM,EAAU+8L,GAI/CqE,EAAUphM,EAENxH,EAAI,EAAG4qM,EAAKrG,EAAMv5M,OAAQgV,EAAI4qM,EAAI5qM,IAAO,CAElD,IAAM6qM,EAAQtG,EAAOvkM,GAErBwH,EAAWA,EAAStf,OAAQ2iN,EAE7B,CAGA,SAASE,EAAUC,EAAIvU,EAAKjkM,GAI3B,OAFOikM,GAAMnrM,QAAQkC,MAAO,6CAErBipM,EAAI5tL,QAAQk0B,eAAgBvqC,GAAO+d,IAAKy6L,EAEhD,CAEA,IAAMC,EAAOzjM,EAASxc,OAAQkgN,EAAOxjM,EAAM1c,OAM3C,SAASmgN,EAAaC,EAAMC,EAAQC,GASnC,IAAIC,EAAWC,EAAWC,EAKpBC,EAAWN,EAAK3zM,EAAI4zM,EAAO5zM,EAChCk0M,EAAWP,EAAK1zM,EAAI2zM,EAAO3zM,EACtBk0M,EAAWN,EAAO7zM,EAAI2zM,EAAK3zM,EAChCo0M,EAAWP,EAAO5zM,EAAI0zM,EAAK1zM,EAEtBo0M,EAAiBJ,EAAWA,EAAWC,EAAWA,EAGlDI,EAAeL,EAAWG,EAAWF,EAAWC,EAEtD,GAAK/uM,KAAKgB,IAAKkuM,GAAe3jN,OAAO86H,QAAU,CAM9C,IAAM8oF,EAAanvM,KAAKC,KAAMgvM,GACxBG,EAAapvM,KAAKC,KAAM8uM,EAAWA,EAAWC,EAAWA,GAIzDK,EAAkBb,EAAO5zM,EAAIk0M,EAAWK,EACxCG,EAAkBd,EAAO3zM,EAAIg0M,EAAWM,EAOxCl6H,IALkBw5H,EAAO7zM,EAAIo0M,EAAWI,EAKfC,GAAkBL,GAJzBP,EAAO5zM,EAAIk0M,EAAWK,EAK1BE,GAAkBP,IACnCF,EAAWG,EAAWF,EAAWC,GAS9BQ,GALNb,EAAcW,EAAgBR,EAAW55H,EAAKs5H,EAAK3zM,GAKf8zM,GAJpCC,EAAcW,EAAgBR,EAAW75H,EAAKs5H,EAAK1zM,GAIS8zM,EAC5D,GAAKY,GAAiB,EAErB,OAAO,IAAIvwK,GAAS0vK,EAAWC,GAI/BC,EAAY5uM,KAAKC,KAAMsvM,EAAgB,EAIzC,KAAO,CAIN,IAAIC,GAAe,EAEdX,EAAWtjN,OAAO86H,QAEjB0oF,EAAWxjN,OAAO86H,UAEtBmpF,GAAe,GAMXX,GAAatjN,OAAO86H,QAEnB0oF,GAAaxjN,OAAO86H,UAExBmpF,GAAe,GAMXxvM,KAAK0nC,KAAMonK,KAAe9uM,KAAK0nC,KAAMsnK,KAEzCQ,GAAe,GAQbA,GAGJd,GAAcI,EACdH,EAAYE,EACZD,EAAY5uM,KAAKC,KAAMgvM,KAKvBP,EAAYG,EACZF,EAAYG,EACZF,EAAY5uM,KAAKC,KAAMgvM,EAAe,GAIxC,CAEA,OAAO,IAAIjwK,GAAS0vK,EAAYE,EAAWD,EAAYC,EAExD,CAKA,IAFA,IAAMa,EAAmB,GAEfjgN,EAAI,EAAG8sG,EAAKyvG,EAAQ59M,OAAQ8P,EAAIq+F,EAAK,EAAGh+F,EAAI9O,EAAI,EAAGA,EAAI8sG,EAAI9sG,IAAMyO,IAAMK,IAE3EL,IAAMq+F,IAAKr+F,EAAI,GACfK,IAAMg+F,IAAKh+F,EAAI,GAKpBmxM,EAAkBjgN,GAAM8+M,EAAavC,EAASv8M,GAAKu8M,EAAS9tM,GAAK8tM,EAASztM,IAO3E,IAHA,IACIoxM,EADEC,EAAiB,GACDC,EAAoBH,EAAiBpkN,SAEjD8X,EAAI,EAAG4qM,EAAKrG,EAAMv5M,OAAQgV,EAAI4qM,EAAI5qM,IAAO,CAElD,IAAM6qM,EAAQtG,EAAOvkM,GAErBusM,EAAmB,GAEnB,IAAM,IAAIlgN,EAAI,EAAG8sG,EAAK0xG,EAAM7/M,OAAQ8P,EAAIq+F,EAAK,EAAGh+F,EAAI9O,EAAI,EAAGA,EAAI8sG,EAAI9sG,IAAMyO,IAAMK,IAEzEL,IAAMq+F,IAAKr+F,EAAI,GACfK,IAAMg+F,IAAKh+F,EAAI,GAGpBoxM,EAAkBlgN,GAAM8+M,EAAaN,EAAOx+M,GAAKw+M,EAAO/vM,GAAK+vM,EAAO1vM,IAIrEqxM,EAAezhN,KAAMwhN,GACrBE,EAAoBA,EAAkBvkN,OAAQqkN,EAE/C,CAKA,IAAM,IAAI1xM,EAAI,EAAGA,EAAIovM,EAAepvM,IAAO,CAU1C,IANA,IAAMD,EAAIC,EAAIovM,EACRtyM,GAAImyM,EAAiBjtM,KAAKgF,IAAKjH,EAAIiC,KAAKyF,GAAK,GAC7CoqM,GAAK3C,EAAYltM,KAAK+E,IAAKhH,EAAIiC,KAAKyF,GAAK,GAAM0nM,EAI3C39M,GAAI,EAAG8sG,GAAKyvG,EAAQ59M,OAAQqB,GAAI8sG,GAAI9sG,KAAO,CAEpD,IAAMsgN,GAAO5B,EAAUnC,EAASv8M,IAAKigN,EAAkBjgN,IAAKqgN,IAE5DrzM,GAAGszM,GAAKl1M,EAAGk1M,GAAKj1M,GAAKC,GAEtB,CAIA,IAAM,IAAIqI,GAAI,EAAG4qM,GAAKrG,EAAMv5M,OAAQgV,GAAI4qM,GAAI5qM,KAAO,CAElD,IAAM6qM,GAAQtG,EAAOvkM,IACrBusM,EAAmBC,EAAgBxsM,IAEnC,IAAM,IAAI3T,GAAI,EAAG8sG,GAAK0xG,GAAM7/M,OAAQqB,GAAI8sG,GAAI9sG,KAAO,CAElD,IAAMsgN,GAAO5B,EAAUF,GAAOx+M,IAAKkgN,EAAkBlgN,IAAKqgN,IAE1DrzM,GAAGszM,GAAKl1M,EAAGk1M,GAAKj1M,GAAKC,GAEtB,CAED,CAED,CAMA,IAJA,IAAM+0M,GAAK3C,EAAYC,EAIb39M,GAAI,EAAGA,GAAI4+M,EAAM5+M,KAAO,CAEjC,IAAMsgN,GAAO9C,EAAekB,EAAUvjM,EAAUnb,IAAKogN,EAAmBpgN,IAAKqgN,IAAOllM,EAAUnb,IAEvFi+M,GAQN78L,EAAO/gB,KAAM68M,EAAW3hM,QAAS,IAAMm1B,eAAgB4vK,GAAKl1M,GAC5D+xM,EAAS98M,KAAM68M,EAAW/S,UAAW,IAAMz5J,eAAgB4vK,GAAKj1M,GAEhE+xM,EAAU/8M,KAAM48M,EAAY,IAAM/4L,IAAK9C,GAAS8C,IAAKi5L,GAErDnwM,GAAGowM,EAAUhyM,EAAGgyM,EAAU/xM,EAAG+xM,EAAU9xM,IAXvC0B,GAAGszM,GAAKl1M,EAAGk1M,GAAKj1M,EAAG,EAerB,CAKA,IAAM,IAAIlC,GAAI,EAAGA,IAAKo0M,EAAOp0M,KAE5B,IAAM,IAAInJ,GAAI,EAAGA,GAAI4+M,EAAM5+M,KAAO,CAEjC,IAAMsgN,GAAO9C,EAAekB,EAAUvjM,EAAUnb,IAAKogN,EAAmBpgN,IAAKqgN,IAAOllM,EAAUnb,IAEvFi+M,GAQN78L,EAAO/gB,KAAM68M,EAAW3hM,QAASpS,KAAMunC,eAAgB4vK,GAAKl1M,GAC5D+xM,EAAS98M,KAAM68M,EAAW/S,UAAWhhM,KAAMunC,eAAgB4vK,GAAKj1M,GAEhE+xM,EAAU/8M,KAAM48M,EAAY9zM,KAAM+a,IAAK9C,GAAS8C,IAAKi5L,GAErDnwM,GAAGowM,EAAUhyM,EAAGgyM,EAAU/xM,EAAG+xM,EAAU9xM,IAXvC0B,GAAGszM,GAAKl1M,EAAGk1M,GAAKj1M,EAAG4V,EAAQs8L,EAAQp0M,GAerC,CAQD,IAAM,IAAIqF,GAAIovM,EAAgB,EAAGpvM,IAAK,EAAGA,KAAO,CAQ/C,IANA,IAAMD,GAAIC,GAAIovM,EACRtyM,GAAImyM,EAAiBjtM,KAAKgF,IAAKjH,GAAIiC,KAAKyF,GAAK,GAC7CoqM,GAAK3C,EAAYltM,KAAK+E,IAAKhH,GAAIiC,KAAKyF,GAAK,GAAM0nM,EAI3C39M,GAAI,EAAG8sG,GAAKyvG,EAAQ59M,OAAQqB,GAAI8sG,GAAI9sG,KAAO,CAEpD,IAAMsgN,GAAO5B,EAAUnC,EAASv8M,IAAKigN,EAAkBjgN,IAAKqgN,IAC5DrzM,GAAGszM,GAAKl1M,EAAGk1M,GAAKj1M,EAAG4V,EAAQ3V,GAE5B,CAIA,IAAM,IAAIqI,GAAI,EAAG4qM,GAAKrG,EAAMv5M,OAAQgV,GAAI4qM,GAAI5qM,KAAO,CAElD,IAAM6qM,GAAQtG,EAAOvkM,IACrBusM,EAAmBC,EAAgBxsM,IAEnC,IAAM,IAAI3T,GAAI,EAAG8sG,GAAK0xG,GAAM7/M,OAAQqB,GAAI8sG,GAAI9sG,KAAO,CAElD,IAAMsgN,GAAO5B,EAAUF,GAAOx+M,IAAKkgN,EAAkBlgN,IAAKqgN,IAEnDpC,EAMNjxM,GAAGszM,GAAKl1M,EAAGk1M,GAAKj1M,EAAI4xM,EAAYM,EAAQ,GAAIlyM,EAAG4xM,EAAYM,EAAQ,GAAInyM,EAAIE,IAJ3E0B,GAAGszM,GAAKl1M,EAAGk1M,GAAKj1M,EAAG4V,EAAQ3V,GAQ7B,CAED,CAED,CAgGA,SAASi1M,GAAWhE,EAASiE,GAI5B,IAFA,IAAIxgN,EAAIu8M,EAAQ59M,SAELqB,GAAK,GAAI,CAEnB,IAAMyO,EAAIzO,EACN8O,EAAI9O,EAAI,EACP8O,EAAI,IAAIA,EAAIytM,EAAQ59M,OAAS,GAIlC,IAAM,IAAIwK,EAAI,EAAGs3M,EAAOlD,EAAwB,EAAhBK,EAAqBz0M,EAAIs3M,EAAIt3M,IAAO,CAEnE,IAAMu3M,EAAQ9B,EAAOz1M,EACfw3M,EAAQ/B,GAASz1M,EAAI,GAO3By3M,GALUJ,EAAc/xM,EAAIiyM,EACvBF,EAAc1xM,EAAI4xM,EAClBF,EAAc1xM,EAAI6xM,EAClBH,EAAc/xM,EAAIkyM,EAIxB,CAED,CAED,CAEA,SAAS3zM,GAAG5B,EAAGC,EAAGC,GAEjB+xM,EAAY3+M,KAAM0M,GAClBiyM,EAAY3+M,KAAM2M,GAClBgyM,EAAY3+M,KAAM4M,EAEnB,CAGA,SAASu1M,GAAIttM,EAAG/E,EAAGgF,GAElBstM,GAAWvtM,GACXutM,GAAWtyM,GACXsyM,GAAWttM,GAEX,IAAMutM,EAAYhE,EAAcp+M,OAAS,EACnCkzC,EAAMisK,EAAMkD,cAAellK,EAAOihK,EAAegE,EAAY,EAAGA,EAAY,EAAGA,EAAY,GAEjGE,GAAOpvK,EAAK,IACZovK,GAAOpvK,EAAK,IACZovK,GAAOpvK,EAAK,GAEb,CAEA,SAAS+uK,GAAIrtM,EAAG/E,EAAGgF,EAAGC,GAErBqtM,GAAWvtM,GACXutM,GAAWtyM,GACXsyM,GAAWrtM,GAEXqtM,GAAWtyM,GACXsyM,GAAWttM,GACXstM,GAAWrtM,GAGX,IAAMstM,EAAYhE,EAAcp+M,OAAS,EACnCkzC,EAAMisK,EAAMoD,mBAAoBplK,EAAOihK,EAAegE,EAAY,EAAGA,EAAY,EAAGA,EAAY,EAAGA,EAAY,GAErHE,GAAOpvK,EAAK,IACZovK,GAAOpvK,EAAK,IACZovK,GAAOpvK,EAAK,IAEZovK,GAAOpvK,EAAK,IACZovK,GAAOpvK,EAAK,IACZovK,GAAOpvK,EAAK,GAEb,CAEA,SAASivK,GAAW9+M,GAEnB+6M,EAAcr+M,KAAM2+M,EAAqB,EAARr7M,EAAY,IAC7C+6M,EAAcr+M,KAAM2+M,EAAqB,EAARr7M,EAAY,IAC7C+6M,EAAcr+M,KAAM2+M,EAAqB,EAARr7M,EAAY,GAE9C,CAGA,SAASi/M,GAAOE,GAEfnE,EAAQt+M,KAAMyiN,EAAQ/1M,GACtB4xM,EAAQt+M,KAAMyiN,EAAQ91M,EAEvB,EA7KA,WAEC,IAAM3H,EAAQq5M,EAAcp+M,OAAS,EAErC,GAAK6+M,EAAe,CAOnB,IALA,IAAI5f,EAAQ,EACR56K,EAAS47L,EAAOhhB,EAIV59L,EAAI,EAAGA,EAAI6+M,EAAM7+M,IAAO,CAEjC,IAAMqc,EAAOhB,EAAOrb,GACpB6gN,GAAIxkM,EAAM,GAAM2G,EAAQ3G,EAAM,GAAM2G,EAAQ3G,EAAM,GAAM2G,EAEzD,CAGAA,EAAS47L,GADThhB,EAAQ2f,EAAwB,EAAhBK,GAKhB,IAAM,IAAI59M,EAAI,EAAGA,EAAI6+M,EAAM7+M,IAAO,CAEjC,IAAMqc,EAAOhB,EAAOrb,GACpB6gN,GAAIxkM,EAAM,GAAM2G,EAAQ3G,EAAM,GAAM2G,EAAQ3G,EAAM,GAAM2G,EAEzD,CAED,KAAO,CAIN,IAAM,IAAIhjB,EAAI,EAAGA,EAAI6+M,EAAM7+M,IAAO,CAEjC,IAAMqc,EAAOhB,EAAOrb,GACpB6gN,GAAIxkM,EAAM,GAAKA,EAAM,GAAKA,EAAM,GAEjC,CAIA,IAAM,IAAIrc,EAAI,EAAGA,EAAI6+M,EAAM7+M,IAAO,CAEjC,IAAMqc,EAAOhB,EAAOrb,GACpB6gN,GAAIxkM,EAAM,GAAMuiM,EAAOrB,EAAOlhM,EAAM,GAAMuiM,EAAOrB,EAAOlhM,EAAM,GAAMuiM,EAAOrB,EAE5E,CAED,CAEAzhK,EAAMk3F,SAAUtvI,EAAOq5M,EAAcp+M,OAAS,EAAI+E,EAAO,EAE1D,CA/DA09M,GAmEA,WAEC,IAAM19M,EAAQq5M,EAAcp+M,OAAS,EACjC6hN,EAAc,EAClBD,GAAWhE,EAASiE,GACpBA,GAAejE,EAAQ59M,OAEvB,IAAM,IAAIgV,EAAI,EAAG4qM,EAAKrG,EAAMv5M,OAAQgV,EAAI4qM,EAAI5qM,IAAO,CAElD,IAAM6qM,EAAQtG,EAAOvkM,GACrB4sM,GAAW/B,EAAOgC,GAGlBA,GAAehC,EAAM7/M,MAEtB,CAGAm9C,EAAMk3F,SAAUtvI,EAAOq5M,EAAcp+M,OAAS,EAAI+E,EAAO,EAG1D,CApFA29M,EAoLD,CAAC,OAxmBDvE,EAAK/qK,aAAc,WAAY,IAAIo9F,GAAwB4tE,EAAe,IAC1ED,EAAK/qK,aAAc,KAAM,IAAIo9F,GAAwB6tE,EAAS,IAE9DF,EAAK5G,uBAqmBJ4G,CAEF,CAmCC,OAnCA/1M,EAAAA,EAAAA,GAAA41M,EAAA,EAAAt6M,IAAA,SAAApG,MAED,WAEC,IAAM8M,GAAIo/B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAu0K,EAAAphN,WAAA,eAAAC,KAAA,MAKV,OAwFF,SAAmB6rB,EAAQjjB,EAAS2E,GAInC,GAFAA,EAAKse,OAAS,GAETtnB,MAAM0sC,QAASplB,GAEnB,IAAM,IAAIrnB,EAAI,EAAGwS,EAAI6U,EAAO1oB,OAAQqB,EAAIwS,EAAGxS,IAAO,CAEjD,IAAM0jB,EAAQ2D,EAAQrnB,GAEtB+I,EAAKse,OAAO3oB,KAAMglB,EAAMtc,KAEzB,MAIA2B,EAAKse,OAAO3oB,KAAM2oB,EAAOjgB,MAI1B2B,EAAK3E,QAAU1I,OAAO4rD,OAAQ,CAAC,EAAGljD,QAEL7G,IAAxB6G,EAAQy5M,cAA4B90M,EAAK3E,QAAQy5M,YAAcz5M,EAAQy5M,YAAY1qF,UAExF,OAAOpqH,CAER,CAlHSu4M,CAHQllN,KAAKw2C,WAAWvrB,OACfjrB,KAAKw2C,WAAWxuC,QAEE2E,EAEnC,IAAC,EAAA1G,IAAA,WAAApG,MAED,SAAiB8M,EAAMse,GAItB,IAFA,IAAMk6L,EAAiB,GAEb9yM,EAAI,EAAGyrG,EAAKnxG,EAAKse,OAAO1oB,OAAQ8P,EAAIyrG,EAAIzrG,IAAO,CAExD,IAAMiV,EAAQ2D,EAAQte,EAAKse,OAAQ5Y,IAEnC8yM,EAAe7iN,KAAMglB,EAEtB,CAEA,IAAMm6L,EAAc90M,EAAK3E,QAAQy5M,YAQjC,YANqBtgN,IAAhBsgN,IAEJ90M,EAAK3E,QAAQy5M,aAAc,IAAIjO,GAAQiO,EAAY5/M,OAAS8yM,SAAU8M,IAIhE,IAAIlB,EAAiB4E,EAAgBx4M,EAAK3E,QAElD,KAACu4M,CAAA,CA1qBmB,CAAS7qK,IA8qBxBksK,GAAmB,CAExBgD,cAAe,SAAW/2K,EAAU9uB,EAAUqmM,EAAQC,EAAQC,GAE7D,IAAMC,EAAMxmM,EAAmB,EAATqmM,GAChBI,EAAMzmM,EAAmB,EAATqmM,EAAa,GAC7BK,EAAM1mM,EAAmB,EAATsmM,GAChBK,EAAM3mM,EAAmB,EAATsmM,EAAa,GAC7BM,EAAM5mM,EAAmB,EAATumM,GAChBM,EAAM7mM,EAAmB,EAATumM,EAAa,GAEnC,MAAO,CACN,IAAIlyK,GAASmyK,EAAKC,GAClB,IAAIpyK,GAASqyK,EAAKC,GAClB,IAAItyK,GAASuyK,EAAKC,GAGpB,EAEAd,mBAAoB,SAAWj3K,EAAU9uB,EAAUqmM,EAAQC,EAAQC,EAAQO,GAE1E,IAAMN,EAAMxmM,EAAmB,EAATqmM,GAChBI,EAAMzmM,EAAmB,EAATqmM,EAAa,GAC7BU,EAAM/mM,EAAmB,EAATqmM,EAAa,GAC7BK,EAAM1mM,EAAmB,EAATsmM,GAChBK,EAAM3mM,EAAmB,EAATsmM,EAAa,GAC7BU,EAAMhnM,EAAmB,EAATsmM,EAAa,GAC7BM,EAAM5mM,EAAmB,EAATumM,GAChBM,EAAM7mM,EAAmB,EAATumM,EAAa,GAC7BU,EAAMjnM,EAAmB,EAATumM,EAAa,GAC7BW,EAAMlnM,EAAmB,EAAT8mM,GAChBK,EAAMnnM,EAAmB,EAAT8mM,EAAa,GAC7BM,EAAMpnM,EAAmB,EAAT8mM,EAAa,GAEnC,OAAKzxM,KAAKgB,IAAKowM,EAAME,GAAQtxM,KAAKgB,IAAKmwM,EAAME,GAErC,CACN,IAAIryK,GAASmyK,EAAK,EAAIO,GACtB,IAAI1yK,GAASqyK,EAAK,EAAIM,GACtB,IAAI3yK,GAASuyK,EAAK,EAAIK,GACtB,IAAI5yK,GAAS6yK,EAAK,EAAIE,IAKhB,CACN,IAAI/yK,GAASoyK,EAAK,EAAIM,GACtB,IAAI1yK,GAASsyK,EAAK,EAAIK,GACtB,IAAI3yK,GAASwyK,EAAK,EAAII,GACtB,IAAI5yK,GAAS8yK,EAAK,EAAIC,GAKzB,GA8BA,IAEKr4K,GAAmB,SAAAs4K,IAAA/9M,EAAAA,EAAAA,GAAAylC,EAAAs4K,GAAA,IAAAC,GAAA99M,EAAAA,EAAAA,GAAAulC,GAExB,SAAAA,IAAsC,IAAAw4K,EAAzBj5L,EAAMzsB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGsiM,EAAMtiM,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAC8H,EAAAA,EAAAA,GAAA,KAAAolC,GAElC,IAAM37B,GAAM,EAAIiC,KAAKC,KAAM,IAAQ,EAE7B0K,EAAW,EACd,EAAG5M,EAAG,EAAI,EAAGA,EAAG,GAAM,GAAKA,EAAG,EAAI,GAAKA,EAAG,EAC5C,GAAK,EAAGA,EAAI,EAAG,EAAGA,EAAG,GAAK,GAAKA,EAAI,EAAG,GAAKA,EAC3CA,EAAG,GAAK,EAAIA,EAAG,EAAG,GAAMA,EAAG,GAAK,GAAMA,EAAG,EAAG,GAiB3C,OAPFm0M,EAAAD,EAAAjnN,KAAA,KAAO2f,EAPS,CACf,EAAG,GAAI,EAAI,EAAG,EAAG,EAAI,EAAG,EAAG,EAAI,EAAG,EAAG,GAAK,EAAG,GAAI,GACjD,EAAG,EAAG,EAAI,EAAG,GAAI,EAAG,GAAI,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAC/C,EAAG,EAAG,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAC3C,EAAG,EAAG,EAAI,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAGpBsO,EAAQ61K,IAE7BrhM,KAAO,sBAEZykN,EAAK9vK,WAAa,CACjBnpB,OAAQA,EACR61K,OAAQA,GACPojB,CAEH,CAMC,OANA37M,EAAAA,EAAAA,GAAAmjC,EAAA,OAAA7nC,IAAA,WAAApG,MAED,SAAiB8M,GAEhB,OAAO,IAAImhC,EAAqBnhC,EAAK0gB,OAAQ1gB,EAAKu2L,OAEnD,KAACp1J,CAAA,CAlCuB,CAAS2qK,IAsC5B8N,GAAkB,SAAAC,IAAAn+M,EAAAA,EAAAA,GAAAk+M,EAAAC,GAAA,IAAAC,GAAAl+M,EAAAA,EAAAA,GAAAg+M,GAEvB,SAAAA,IAAsC,IAAAG,EAAzBr5L,EAAMzsB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGsiM,EAAMtiM,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAC8H,EAAAA,EAAAA,GAAA,KAAA69M,GAoBhC,OAPFG,EAAAD,EAAArnN,KAAA,KAXiB,CAChB,EAAG,EAAG,GAAM,EAAG,EAAG,EAAG,EAAG,EAAG,EAC3B,GAAK,EAAG,EAAI,EAAG,EAAG,EAAG,EAAG,GAAK,GAGd,CACf,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACxB,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACxB,EAAG,EAAG,EAAG,EAAG,EAAG,GAGUiuB,EAAQ61K,IAE7BrhM,KAAO,qBAEZ6kN,EAAKlwK,WAAa,CACjBnpB,OAAQA,EACR61K,OAAQA,GACPwjB,CAEH,CAMC,OANA/7M,EAAAA,EAAAA,GAAA47M,EAAA,OAAAtgN,IAAA,WAAApG,MAED,SAAiB8M,GAEhB,OAAO,IAAI45M,EAAoB55M,EAAK0gB,OAAQ1gB,EAAKu2L,OAElD,KAACqjB,CAAA,CA9BsB,CAAS9N,IAkC3BkO,GAAY,SAAAC,IAAAv+M,EAAAA,EAAAA,GAAAs+M,EAAAC,GAAA,IAAAC,GAAAt+M,EAAAA,EAAAA,GAAAo+M,GAEjB,SAAAA,IAAiI,IAAAG,EAApHC,EAAWnmN,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAKomN,EAAWpmN,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGqmN,EAAarmN,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGsmN,EAAWtmN,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGs2M,EAAUt2M,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGu2M,EAAWv2M,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAa,EAAVwT,KAAKyF,IAAMnR,EAAAA,EAAAA,GAAA,KAAAi+M,IAE7HG,EAAAD,EAAAznN,KAAA,OAEKyC,KAAO,eAEZilN,EAAKtwK,WAAa,CACjBuwK,YAAaA,EACbC,YAAaA,EACbC,cAAeA,EACfC,YAAaA,EACbhQ,WAAYA,EACZC,YAAaA,GAGd8P,EAAgB7yM,KAAKuC,IAAK,EAAGswM,GAmB7B,IAdA,IAAMlwL,EAAU,GACVhY,EAAW,GACXI,EAAU,GACVs2B,EAAM,GAIRpoB,EAAS05L,EACPI,GAAiBH,EAAcD,IAZrCG,EAAc9yM,KAAKuC,IAAK,EAAGuwM,IAarB5mM,EAAS,IAAIgc,GACb06F,EAAK,IAAI5jF,GAIL/gC,EAAI,EAAGA,GAAK60M,EAAa70M,IAAO,CAEzC,IAAM,IAAIzO,EAAI,EAAGA,GAAKqjN,EAAerjN,IAAO,CAI3C,IAAMwzM,EAAUF,EAAatzM,EAAIqjN,EAAgB9P,EAIjD72L,EAAOtR,EAAIqe,EAASjZ,KAAKgF,IAAKg+L,GAC9B92L,EAAOrR,EAAIoe,EAASjZ,KAAK+E,IAAKi+L,GAE9Br4L,EAASzc,KAAMge,EAAOtR,EAAGsR,EAAOrR,EAAGqR,EAAOpR,GAI1CiQ,EAAQ7c,KAAM,EAAG,EAAG,GAIpB00H,EAAGhoH,GAAMsR,EAAOtR,EAAIg4M,EAAc,GAAM,EACxChwF,EAAG/nH,GAAMqR,EAAOrR,EAAI+3M,EAAc,GAAM,EAExCvxK,EAAInzC,KAAM00H,EAAGhoH,EAAGgoH,EAAG/nH,EAEpB,CAIAoe,GAAU85L,CAEX,CAIA,IAAM,IAAI90M,EAAI,EAAGA,EAAI60M,EAAa70M,IAIjC,IAFA,IAAM+0M,EAAoB/0M,GAAM40M,EAAgB,GAEtCrjN,EAAI,EAAGA,EAAIqjN,EAAerjN,IAAO,CAE1C,IAAMwzM,EAAUxzM,EAAIwjN,EAEdjwM,EAAIigM,EACJhlM,EAAIglM,EAAU6P,EAAgB,EAC9B7vM,EAAIggM,EAAU6P,EAAgB,EAC9B5vM,EAAI+/L,EAAU,EAIpBrgL,EAAQz0B,KAAM6U,EAAG/E,EAAGiF,GACpB0f,EAAQz0B,KAAM8P,EAAGgF,EAAGC,EAErB,CAS+D,OAHhEyvM,EAAKxrH,SAAUvkE,GACf+vL,EAAKnxK,aAAc,WAAY,IAAIo9F,GAAwBh0H,EAAU,IACrE+nM,EAAKnxK,aAAc,SAAU,IAAIo9F,GAAwB5zH,EAAS,IAClE2nM,EAAKnxK,aAAc,KAAM,IAAIo9F,GAAwBt9F,EAAK,IAAMqxK,CAEjE,CAMC,OANAn8M,EAAAA,EAAAA,GAAAg8M,EAAA,OAAA1gN,IAAA,WAAApG,MAED,SAAiB8M,GAEhB,OAAO,IAAIg6M,EAAch6M,EAAKo6M,YAAap6M,EAAKq6M,YAAar6M,EAAKs6M,cAAet6M,EAAKu6M,YAAav6M,EAAKuqM,WAAYvqM,EAAKwqM,YAE1H,KAACwP,CAAA,CA3GgB,CAASjxK,IA+GrB2xK,GAAa,SAAAC,IAAAj/M,EAAAA,EAAAA,GAAAg/M,EAAAC,GAAA,IAAAC,GAAAh/M,EAAAA,EAAAA,GAAA8+M,GAElB,SAAAA,IAA2I,IAAAG,EAA9Hv8L,EAAMrqB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAI44B,GAAO,CAAE,IAAI4Z,GAAS,EAAG,IAAO,IAAIA,IAAW,IAAO,IAAO,IAAIA,GAAS,IAAO,MAAW8tK,EAAatgN,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAE8H,EAAAA,EAAAA,GAAA,KAAA2+M,IAEvIG,EAAAD,EAAAnoN,KAAA,OAEKyC,KAAO,gBAEZ2lN,EAAKhxK,WAAa,CACjBvrB,OAAQA,EACRi2L,cAAeA,GAKhB,IAAMnqL,EAAU,GACVhY,EAAW,GACXI,EAAU,GACVs2B,EAAM,GAIR8jG,EAAa,EACbc,EAAa,EAIjB,IAAiC,IAA5B12I,MAAM0sC,QAASplB,GAEnBiB,EAAUjB,QAIV,IAAM,IAAIrnB,EAAI,EAAGA,EAAIqnB,EAAO1oB,OAAQqB,IAEnCsoB,EAAUjB,EAAQrnB,IAElB4jN,EAAK5wE,SAAU2C,EAAYc,EAAYz2I,GAEvC21I,GAAcc,EACdA,EAAa,EAgBf,SAASnuH,EAAU5E,GAElB,IAAMmgM,EAAc1oM,EAASxc,OAAS,EAChC0T,EAASqR,EAAM26L,cAAef,GAEhCwG,EAAgBzxM,EAAOqR,MACrBqgM,EAAa1xM,EAAO6lM,OAIuB,IAA5CoE,GAAWgC,YAAawF,KAE5BA,EAAgBA,EAAcp0J,WAI/B,IAAM,IAAI1vD,EAAI,EAAGwS,EAAIuxM,EAAWplN,OAAQqB,EAAIwS,EAAGxS,IAAO,CAErD,IAAMgkN,EAAYD,EAAY/jN,IAEe,IAAxCs8M,GAAWgC,YAAa0F,KAE5BD,EAAY/jN,GAAMgkN,EAAUt0J,UAI9B,CAMA,IAJA,IAAMr0C,EAAQihM,GAAWmC,iBAAkBqF,EAAeC,GAIhD/jN,EAAI,EAAGwS,EAAIuxM,EAAWplN,OAAQqB,EAAIwS,EAAGxS,IAAO,CAErD,IAAMgkN,EAAYD,EAAY/jN,GAC9B8jN,EAAgBA,EAAcjoN,OAAQmoN,EAEvC,CAIA,IAAM,IAAIhkN,EAAI,EAAGwS,EAAIsxM,EAAcnlN,OAAQqB,EAAIwS,EAAGxS,IAAO,CAExD,IAAM0c,EAASonM,EAAe9jN,GAE9Bmb,EAASzc,KAAMge,EAAOtR,EAAGsR,EAAOrR,EAAG,GACnCkQ,EAAQ7c,KAAM,EAAG,EAAG,GACpBmzC,EAAInzC,KAAMge,EAAOtR,EAAGsR,EAAOrR,EAE5B,CAIA,IAAM,IAAIrL,EAAI,EAAGwS,EAAI6I,EAAM1c,OAAQqB,EAAIwS,EAAGxS,IAAO,CAEhD,IAAMqc,EAAOhB,EAAOrb,GAEduT,EAAI8I,EAAM,GAAMwnM,EAChBr1M,EAAI6N,EAAM,GAAMwnM,EAChBrwM,EAAI6I,EAAM,GAAMwnM,EAEtB1wL,EAAQz0B,KAAM6U,EAAG/E,EAAGgF,GACpBijI,GAAc,CAEf,CAED,CAAC,OA1EDmtE,EAAKlsH,SAAUvkE,GACfywL,EAAK7xK,aAAc,WAAY,IAAIo9F,GAAwBh0H,EAAU,IACrEyoM,EAAK7xK,aAAc,SAAU,IAAIo9F,GAAwB5zH,EAAS,IAClEqoM,EAAK7xK,aAAc,KAAM,IAAIo9F,GAAwBt9F,EAAK,IAuEzD+xK,CAEF,CA0BC,OA1BA78M,EAAAA,EAAAA,GAAA08M,EAAA,EAAAphN,IAAA,SAAApG,MAED,WAEC,IAAM8M,GAAIo/B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAq7K,EAAAloN,WAAA,eAAAC,KAAA,MAIV,OAsBF,SAAiB6rB,EAAQte,GAIxB,GAFAA,EAAKse,OAAS,GAETtnB,MAAM0sC,QAASplB,GAEnB,IAAM,IAAIrnB,EAAI,EAAGwS,EAAI6U,EAAO1oB,OAAQqB,EAAIwS,EAAGxS,IAAO,CAEjD,IAAM0jB,EAAQ2D,EAAQrnB,GAEtB+I,EAAKse,OAAO3oB,KAAMglB,EAAMtc,KAEzB,MAIA2B,EAAKse,OAAO3oB,KAAM2oB,EAAOjgB,MAI1B,OAAO2B,CAER,CA5CSoqH,CAFQ/2H,KAAKw2C,WAAWvrB,OAERte,EAExB,IAAC,EAAA1G,IAAA,WAAApG,MAED,SAAiB8M,EAAMse,GAItB,IAFA,IAAMk6L,EAAiB,GAEb9yM,EAAI,EAAGyrG,EAAKnxG,EAAKse,OAAO1oB,OAAQ8P,EAAIyrG,EAAIzrG,IAAO,CAExD,IAAMiV,EAAQ2D,EAAQte,EAAKse,OAAQ5Y,IAEnC8yM,EAAe7iN,KAAMglB,EAEtB,CAEA,OAAO,IAAI+/L,EAAelC,EAAgBx4M,EAAKu0M,cAEhD,KAACmG,CAAA,CAtJiB,CAAS3xK,IAgL3B,IAEKmyK,GAAc,SAAAC,IAAAz/M,EAAAA,EAAAA,GAAAw/M,EAAAC,GAAA,IAAAC,GAAAx/M,EAAAA,EAAAA,GAAAs/M,GAEnB,SAAAA,IAAiJ,IAAAG,EAApI36L,EAAMzsB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGu4I,EAAav4I,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAIw4I,EAAcx4I,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAIs1M,EAAQt1M,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGu1M,EAASv1M,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAa,EAAVwT,KAAKyF,GAAQq9L,EAAUt2M,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGu2M,EAAWv2M,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAGwT,KAAKyF,IAAEnR,EAAAA,EAAAA,GAAA,KAAAm/M,IAE7IG,EAAAD,EAAA3oN,KAAA,OAEKyC,KAAO,iBAEZmmN,EAAKxxK,WAAa,CACjBnpB,OAAQA,EACR8rH,cAAeA,EACfC,eAAgBA,EAChB88D,SAAUA,EACVC,UAAWA,EACXe,WAAYA,EACZC,YAAaA,GAGdh+D,EAAgB/kI,KAAKuC,IAAK,EAAGvC,KAAKi5B,MAAO8rG,IACzCC,EAAiBhlI,KAAKuC,IAAK,EAAGvC,KAAKi5B,MAAO+rG,IAmB1C,IAjBA,IAAM6uE,EAAW7zM,KAAKsC,IAAKwgM,EAAaC,EAAa/iM,KAAKyF,IAEtDjU,EAAQ,EACNsiN,EAAO,GAEP5nM,EAAS,IAAIgc,GACbtX,EAAS,IAAIsX,GAIbvF,EAAU,GACVhY,EAAW,GACXI,EAAU,GACVs2B,EAAM,GAIF16B,EAAK,EAAGA,GAAMq+H,EAAgBr+H,IAAQ,CAE/C,IAAMotM,EAAc,GAEdv3M,EAAImK,EAAKq+H,EAIXgvE,EAAU,EAEH,GAANrtM,GAAyB,GAAdm8L,EAEfkR,EAAU,GAAMjvE,EAELp+H,GAAMq+H,GAAkB6uE,GAAY7zM,KAAKyF,KAEpDuuM,GAAY,GAAMjvE,GAInB,IAAM,IAAIr+H,EAAK,EAAGA,GAAMq+H,EAAer+H,IAAQ,CAE9C,IAAMzE,EAAIyE,EAAKq+H,EAIf74H,EAAOtR,GAAMqe,EAASjZ,KAAKgF,IAAK88L,EAAW7/L,EAAI8/L,GAAc/hM,KAAK+E,IAAK+9L,EAAatmM,EAAIumM,GACxF72L,EAAOrR,EAAIoe,EAASjZ,KAAKgF,IAAK89L,EAAatmM,EAAIumM,GAC/C72L,EAAOpR,EAAIme,EAASjZ,KAAK+E,IAAK+8L,EAAW7/L,EAAI8/L,GAAc/hM,KAAK+E,IAAK+9L,EAAatmM,EAAIumM,GAEtFp4L,EAASzc,KAAMge,EAAOtR,EAAGsR,EAAOrR,EAAGqR,EAAOpR,GAI1C8V,EAAO/gB,KAAMqc,GAAShH,YACtB6F,EAAQ7c,KAAM0iB,EAAOhW,EAAGgW,EAAO/V,EAAG+V,EAAO9V,GAIzCumC,EAAInzC,KAAM+T,EAAI+xM,EAAS,EAAIx3M,GAE3Bu3M,EAAY7lN,KAAMsD,IAEnB,CAEAsiN,EAAK5lN,KAAM6lN,EAEZ,CAIA,IAAM,IAAIptM,EAAK,EAAGA,EAAKq+H,EAAgBr+H,IAEtC,IAAM,IAAID,EAAK,EAAGA,EAAKq+H,EAAer+H,IAAQ,CAE7C,IAAM3D,EAAI+wM,EAAMntM,GAAMD,EAAK,GACrB1I,EAAI81M,EAAMntM,GAAMD,GAChB1D,EAAI8wM,EAAMntM,EAAK,GAAKD,GACpBzD,EAAI6wM,EAAMntM,EAAK,GAAKD,EAAK,IAEnB,IAAPC,GAAYm8L,EAAa,IAAIngL,EAAQz0B,KAAM6U,EAAG/E,EAAGiF,IACjD0D,IAAOq+H,EAAiB,GAAK6uE,EAAW7zM,KAAKyF,KAAKkd,EAAQz0B,KAAM8P,EAAGgF,EAAGC,EAE5E,CAS+D,OAHhE2wM,EAAK1sH,SAAUvkE,GACfixL,EAAKryK,aAAc,WAAY,IAAIo9F,GAAwBh0H,EAAU,IACrEipM,EAAKryK,aAAc,SAAU,IAAIo9F,GAAwB5zH,EAAS,IAClE6oM,EAAKryK,aAAc,KAAM,IAAIo9F,GAAwBt9F,EAAK,IAAMuyK,CAEjE,CAMC,OANAr9M,EAAAA,EAAAA,GAAAk9M,EAAA,OAAA5hN,IAAA,WAAApG,MAED,SAAiB8M,GAEhB,OAAO,IAAIk7M,EAAgBl7M,EAAK0gB,OAAQ1gB,EAAKwsI,cAAexsI,EAAKysI,eAAgBzsI,EAAKupM,SAAUvpM,EAAKwpM,UAAWxpM,EAAKuqM,WAAYvqM,EAAKwqM,YAEvI,KAAC0Q,CAAA,CAtHkB,CAASnyK,IA0HvB2yK,GAAmB,SAAAC,IAAAjgN,EAAAA,EAAAA,GAAAggN,EAAAC,GAAA,IAAAC,GAAAhgN,EAAAA,EAAAA,GAAA8/M,GAExB,SAAAA,IAAsC,IAAAG,EAAzBn7L,EAAMzsB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGsiM,EAAMtiM,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAC8H,EAAAA,EAAAA,GAAA,KAAA2/M,GAiBhC,OAPFG,EAAAD,EAAAnpN,KAAA,KARiB,CAChB,EAAG,EAAG,GAAM,GAAK,EAAG,GAAM,EAAG,GAAK,EAAI,GAAK,GAAK,GAGjC,CACf,EAAG,EAAG,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAGTiuB,EAAQ61K,IAE7BrhM,KAAO,sBAEZ2mN,EAAKhyK,WAAa,CACjBnpB,OAAQA,EACR61K,OAAQA,GACPslB,CAEH,CAMC,OANA79M,EAAAA,EAAAA,GAAA09M,EAAA,OAAApiN,IAAA,WAAApG,MAED,SAAiB8M,GAEhB,OAAO,IAAI07M,EAAqB17M,EAAK0gB,OAAQ1gB,EAAKu2L,OAEnD,KAACmlB,CAAA,CA3BuB,CAAS5P,IA+B5BgQ,GAAa,SAAAC,IAAArgN,EAAAA,EAAAA,GAAAogN,EAAAC,GAAA,IAAAC,GAAApgN,EAAAA,EAAAA,GAAAkgN,GAElB,SAAAA,IAAkG,IAAAG,EAArFv7L,EAAMzsB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGioN,EAAIjoN,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAKi2M,EAAcj2M,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGkoN,EAAeloN,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGmoN,EAAGnoN,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAa,EAAVwT,KAAKyF,IAAMnR,EAAAA,EAAAA,GAAA,KAAA+/M,IAE9FG,EAAAD,EAAAvpN,KAAA,OAEKyC,KAAO,gBAEZ+mN,EAAKpyK,WAAa,CACjBnpB,OAAQA,EACRw7L,KAAMA,EACNhS,eAAgBA,EAChBiS,gBAAiBA,EACjBC,IAAKA,GAGNlS,EAAiBziM,KAAKi5B,MAAOwpK,GAC7BiS,EAAkB10M,KAAKi5B,MAAOy7K,GAiB9B,IAbA,IAAM/xL,EAAU,GACVhY,EAAW,GACXI,EAAU,GACVs2B,EAAM,GAINuqE,EAAS,IAAI1jF,GACbhc,EAAS,IAAIgc,GACbtX,EAAS,IAAIsX,GAITjqB,EAAI,EAAGA,GAAKwkM,EAAgBxkM,IAErC,IAAM,IAAIzO,EAAI,EAAGA,GAAKklN,EAAiBllN,IAAO,CAE7C,IAAMyS,EAAIzS,EAAIklN,EAAkBC,EAC1Bn4M,EAAIyB,EAAIwkM,EAAiBziM,KAAKyF,GAAK,EAIzCyG,EAAOtR,GAAMqe,EAASw7L,EAAOz0M,KAAKgF,IAAKxI,IAAQwD,KAAKgF,IAAK/C,GACzDiK,EAAOrR,GAAMoe,EAASw7L,EAAOz0M,KAAKgF,IAAKxI,IAAQwD,KAAK+E,IAAK9C,GACzDiK,EAAOpR,EAAI25M,EAAOz0M,KAAK+E,IAAKvI,GAE5BmO,EAASzc,KAAMge,EAAOtR,EAAGsR,EAAOrR,EAAGqR,EAAOpR,GAI1C8wG,EAAOhxG,EAAIqe,EAASjZ,KAAKgF,IAAK/C,GAC9B2pG,EAAO/wG,EAAIoe,EAASjZ,KAAK+E,IAAK9C,GAC9B2O,EAAOo2B,WAAY96B,EAAQ0/F,GAAS1mG,YAEpC6F,EAAQ7c,KAAM0iB,EAAOhW,EAAGgW,EAAO/V,EAAG+V,EAAO9V,GAIzCumC,EAAInzC,KAAMsB,EAAIklN,GACdrzK,EAAInzC,KAAM+P,EAAIwkM,EAEf,CAMD,IAAM,IAAIxkM,EAAI,EAAGA,GAAKwkM,EAAgBxkM,IAErC,IAAM,IAAIzO,EAAI,EAAGA,GAAKklN,EAAiBllN,IAAO,CAI7C,IAAMuT,GAAM2xM,EAAkB,GAAMz2M,EAAIzO,EAAI,EACtCwO,GAAM02M,EAAkB,IAAQz2M,EAAI,GAAMzO,EAAI,EAC9CwT,GAAM0xM,EAAkB,IAAQz2M,EAAI,GAAMzO,EAC1CyT,GAAMyxM,EAAkB,GAAMz2M,EAAIzO,EAIxCmzB,EAAQz0B,KAAM6U,EAAG/E,EAAGiF,GACpB0f,EAAQz0B,KAAM8P,EAAGgF,EAAGC,EAErB,CAS+D,OAHhEuxM,EAAKttH,SAAUvkE,GACf6xL,EAAKjzK,aAAc,WAAY,IAAIo9F,GAAwBh0H,EAAU,IACrE6pM,EAAKjzK,aAAc,SAAU,IAAIo9F,GAAwB5zH,EAAS,IAClEypM,EAAKjzK,aAAc,KAAM,IAAIo9F,GAAwBt9F,EAAK,IAAMmzK,CAEjE,CAMC,OANAj+M,EAAAA,EAAAA,GAAA89M,EAAA,OAAAxiN,IAAA,WAAApG,MAED,SAAiB8M,GAEhB,OAAO,IAAI87M,EAAe97M,EAAK0gB,OAAQ1gB,EAAKk8M,KAAMl8M,EAAKkqM,eAAgBlqM,EAAKm8M,gBAAiBn8M,EAAKo8M,IAEnG,KAACN,CAAA,CArGiB,CAAS/yK,IAyGtBszK,GAAiB,SAAAC,IAAA5gN,EAAAA,EAAAA,GAAA2gN,EAAAC,GAAA,IAAAC,GAAA3gN,EAAAA,EAAAA,GAAAygN,GAEtB,SAAAA,IAA8F,IAAAG,EAAjF97L,EAAMzsB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGioN,EAAIjoN,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAKkoN,EAAeloN,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAIi2M,EAAcj2M,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAG6R,EAAC7R,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGsS,EAACtS,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAC8H,EAAAA,EAAAA,GAAA,KAAAsgN,IAE1FG,EAAAD,EAAA9pN,KAAA,OAEKyC,KAAO,oBAEZsnN,EAAK3yK,WAAa,CACjBnpB,OAAQA,EACRw7L,KAAMA,EACNC,gBAAiBA,EACjBjS,eAAgBA,EAChBpkM,EAAGA,EACHS,EAAGA,GAGJ41M,EAAkB10M,KAAKi5B,MAAOy7K,GAC9BjS,EAAiBziM,KAAKi5B,MAAOwpK,GAuB7B,IAnBA,IAAM9/K,EAAU,GACVhY,EAAW,GACXI,EAAU,GACVs2B,EAAM,GAINn1B,EAAS,IAAIgc,GACbtX,EAAS,IAAIsX,GAEb8sL,EAAK,IAAI9sL,GACT+sL,EAAK,IAAI/sL,GAETvrB,EAAI,IAAIurB,GACRtrB,EAAI,IAAIsrB,GACRvW,EAAI,IAAIuW,GAIJ14B,EAAI,EAAGA,GAAKklN,IAAoBllN,EAAI,CAI7C,IAAMyS,EAAIzS,EAAIklN,EAAkBr2M,EAAI2B,KAAKyF,GAAK,EAK9CyvM,EAA0BjzM,EAAG5D,EAAGS,EAAGma,EAAQ+7L,GAC3CE,EAA0BjzM,EAAI,IAAM5D,EAAGS,EAAGma,EAAQg8L,GAIlDr4M,EAAEoqC,WAAYiuK,EAAID,GAClBrjM,EAAE64G,WAAYyqF,EAAID,GAClBr4M,EAAEi0C,aAAch0C,EAAG+U,GACnBA,EAAEi/B,aAAcj0C,EAAGC,GAInBD,EAAEuI,YACFyM,EAAEzM,YAEF,IAAM,IAAIjH,EAAI,EAAGA,GAAKwkM,IAAmBxkM,EAAI,CAK5C,IAAMzB,EAAIyB,EAAIwkM,EAAiBziM,KAAKyF,GAAK,EACnCi4G,GAAO+2F,EAAOz0M,KAAKgF,IAAKxI,GACxBmhH,EAAK82F,EAAOz0M,KAAK+E,IAAKvI,GAK5B0P,EAAOtR,EAAIo6M,EAAGp6M,GAAM8iH,EAAK/rG,EAAE/W,EAAI+iH,EAAKhhH,EAAE/B,GACtCsR,EAAOrR,EAAIm6M,EAAGn6M,GAAM6iH,EAAK/rG,EAAE9W,EAAI8iH,EAAKhhH,EAAE9B,GACtCqR,EAAOpR,EAAIk6M,EAAGl6M,GAAM4iH,EAAK/rG,EAAE7W,EAAI6iH,EAAKhhH,EAAE7B,GAEtC6P,EAASzc,KAAMge,EAAOtR,EAAGsR,EAAOrR,EAAGqR,EAAOpR,GAI1C8V,EAAOo2B,WAAY96B,EAAQ8oM,GAAK9vM,YAEhC6F,EAAQ7c,KAAM0iB,EAAOhW,EAAGgW,EAAO/V,EAAG+V,EAAO9V,GAIzCumC,EAAInzC,KAAMsB,EAAIklN,GACdrzK,EAAInzC,KAAM+P,EAAIwkM,EAEf,CAED,CAIA,IAAM,IAAIxkM,EAAI,EAAGA,GAAKy2M,EAAiBz2M,IAEtC,IAAM,IAAIzO,EAAI,EAAGA,GAAKizM,EAAgBjzM,IAAO,CAI5C,IAAMuT,GAAM0/L,EAAiB,IAAQxkM,EAAI,IAAQzO,EAAI,GAC/CwO,GAAMykM,EAAiB,GAAMxkM,GAAMzO,EAAI,GACvCwT,GAAMy/L,EAAiB,GAAMxkM,EAAIzO,EACjCyT,GAAMw/L,EAAiB,IAAQxkM,EAAI,GAAMzO,EAI/CmzB,EAAQz0B,KAAM6U,EAAG/E,EAAGiF,GACpB0f,EAAQz0B,KAAM8P,EAAGgF,EAAGC,EAErB,CAaD,SAASiyM,EAA0BjzM,EAAG5D,EAAGS,EAAGma,EAAQ5nB,GAEnD,IAAM8jN,EAAKn1M,KAAKgF,IAAK/C,GACfmzM,EAAKp1M,KAAK+E,IAAK9C,GACfozM,EAAUv2M,EAAIT,EAAI4D,EAClBqzM,EAAKt1M,KAAKgF,IAAKqwM,GAErBhkN,EAASuJ,EAAIqe,GAAW,EAAIq8L,GAAO,GAAMH,EACzC9jN,EAASwJ,EAAIoe,GAAW,EAAIq8L,GAAOF,EAAK,GACxC/jN,EAASyJ,EAAIme,EAASjZ,KAAK+E,IAAKswM,GAAY,EAE7C,CAAC,OAlBDN,EAAK7tH,SAAUvkE,GACfoyL,EAAKxzK,aAAc,WAAY,IAAIo9F,GAAwBh0H,EAAU,IACrEoqM,EAAKxzK,aAAc,SAAU,IAAIo9F,GAAwB5zH,EAAS,IAClEgqM,EAAKxzK,aAAc,KAAM,IAAIo9F,GAAwBt9F,EAAK,IAezD0zK,CAEF,CAMC,OANAx+M,EAAAA,EAAAA,GAAAq+M,EAAA,OAAA/iN,IAAA,WAAApG,MAED,SAAiB8M,GAEhB,OAAO,IAAIq8M,EAAmBr8M,EAAK0gB,OAAQ1gB,EAAKk8M,KAAMl8M,EAAKm8M,gBAAiBn8M,EAAKkqM,eAAgBlqM,EAAK8F,EAAG9F,EAAKuG,EAE/G,KAAC81M,CAAA,CApJqB,CAAStzK,IAwJ1Bi0K,GAAY,SAAAC,IAAAvhN,EAAAA,EAAAA,GAAAshN,EAAAC,GAAA,IAAAC,GAAAthN,EAAAA,EAAAA,GAAAohN,GAEjB,SAAAA,IAAsM,IAAAG,EAAzL95K,EAAIpvC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAIkyM,GAAuB,IAAIx2K,IAAW,GAAK,EAAG,GAAK,IAAIA,IAAW,EAAG,EAAG,GAAK,IAAIA,GAAS,EAAG,EAAG,IAAOwsL,EAAeloN,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAIysB,EAAMzsB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGi2M,EAAcj2M,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGktM,EAAMltM,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,IAAAA,UAAA,IAAQ8H,EAAAA,EAAAA,GAAA,KAAAihN,IAElMG,EAAAD,EAAAzqN,KAAA,OAEKyC,KAAO,eAEZioN,EAAKtzK,WAAa,CACjBxG,KAAMA,EACN84K,gBAAiBA,EACjBz7L,OAAQA,EACRwpL,eAAgBA,EAChB/I,OAAQA,GAGT,IAAMn8J,EAAS3B,EAAK+xK,oBAAqB+G,EAAiBhb,GAI1Dgc,EAAKnwM,SAAWg4B,EAAOh4B,SACvBmwM,EAAK3qM,QAAUwyB,EAAOxyB,QACtB2qM,EAAK/b,UAAYp8J,EAAOo8J,UAIxB,IAAMztL,EAAS,IAAIgc,GACbtX,EAAS,IAAIsX,GACb06F,EAAK,IAAI5jF,GACX24C,EAAI,IAAIzvD,GAINvd,EAAW,GACXI,EAAU,GACVs2B,EAAM,GACN1e,EAAU,GAyChB,SAASgzL,EAAiBnmN,GAIzBmoF,EAAI/7C,EAAKk9J,WAAYtpM,EAAIklN,EAAiB/8H,GAS1C,IALA,IAAMhmE,EAAI4rB,EAAOxyB,QAASvb,GACpBmN,EAAI4gC,EAAOo8J,UAAWnqM,GAIlByO,EAAI,EAAGA,GAAKwkM,EAAgBxkM,IAAO,CAE5C,IAAMzB,EAAIyB,EAAIwkM,EAAiBziM,KAAKyF,GAAK,EAEnCV,EAAM/E,KAAK+E,IAAKvI,GAChBwI,GAAQhF,KAAKgF,IAAKxI,GAIxBoU,EAAOhW,EAAMoK,EAAM2M,EAAE/W,EAAImK,EAAMpI,EAAE/B,EACjCgW,EAAO/V,EAAMmK,EAAM2M,EAAE9W,EAAIkK,EAAMpI,EAAE9B,EACjC+V,EAAO9V,EAAMkK,EAAM2M,EAAE7W,EAAIiK,EAAMpI,EAAE7B,EACjC8V,EAAO1L,YAEP6F,EAAQ7c,KAAM0iB,EAAOhW,EAAGgW,EAAO/V,EAAG+V,EAAO9V,GAIzCoR,EAAOtR,EAAI+8E,EAAE/8E,EAAIqe,EAASrI,EAAOhW,EACjCsR,EAAOrR,EAAI88E,EAAE98E,EAAIoe,EAASrI,EAAO/V,EACjCqR,EAAOpR,EAAI68E,EAAE78E,EAAIme,EAASrI,EAAO9V,EAEjC6P,EAASzc,KAAMge,EAAOtR,EAAGsR,EAAOrR,EAAGqR,EAAOpR,EAE3C,CAED,CAuCC,OAxGD,WAEC,IAAM,IAAItL,EAAI,EAAGA,EAAIklN,EAAiBllN,IAErCmmN,EAAiBnmN,GASlBmmN,GAA8B,IAAXjc,EAAqBgb,EAAkB,GA4E3D,WAEC,IAAM,IAAIllN,EAAI,EAAGA,GAAKklN,EAAiBllN,IAEtC,IAAM,IAAIyO,EAAI,EAAGA,GAAKwkM,EAAgBxkM,IAErC2kH,EAAGhoH,EAAIpL,EAAIklN,EACX9xF,EAAG/nH,EAAIoD,EAAIwkM,EAEXphK,EAAInzC,KAAM00H,EAAGhoH,EAAGgoH,EAAG/nH,EAMtB,CAtFC4qM,GAiDD,WAEC,IAAM,IAAIxnM,EAAI,EAAGA,GAAKy2M,EAAiBz2M,IAEtC,IAAM,IAAIzO,EAAI,EAAGA,GAAKizM,EAAgBjzM,IAAO,CAE5C,IAAMuT,GAAM0/L,EAAiB,IAAQxkM,EAAI,IAAQzO,EAAI,GAC/CwO,GAAMykM,EAAiB,GAAMxkM,GAAMzO,EAAI,GACvCwT,GAAMy/L,EAAiB,GAAMxkM,EAAIzO,EACjCyT,GAAMw/L,EAAiB,IAAQxkM,EAAI,GAAMzO,EAI/CmzB,EAAQz0B,KAAM6U,EAAG/E,EAAGiF,GACpB0f,EAAQz0B,KAAM8P,EAAGgF,EAAGC,EAErB,CAIF,CAjEC2yM,EAED,CAnCAC,GAIAH,EAAKxuH,SAAUvkE,GACf+yL,EAAKn0K,aAAc,WAAY,IAAIo9F,GAAwBh0H,EAAU,IACrE+qM,EAAKn0K,aAAc,SAAU,IAAIo9F,GAAwB5zH,EAAS,IAClE2qM,EAAKn0K,aAAc,KAAM,IAAIo9F,GAAwBt9F,EAAK,IA4GzDq0K,CAEF,CAwBC,OAxBAn/M,EAAAA,EAAAA,GAAAg/M,EAAA,EAAA1jN,IAAA,SAAApG,MAED,WAEC,IAAM8M,GAAIo/B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA29K,EAAAxqN,WAAA,eAAAC,KAAA,MAIV,OAFAuN,EAAKqjC,KAAOhwC,KAAKw2C,WAAWxG,KAAK+mF,SAE1BpqH,CAER,IAAC,EAAA1G,IAAA,WAAApG,MAED,SAAiB8M,GAIhB,OAAO,IAAIg9M,GACV,IAAInW,GAAQ7mM,EAAKqjC,KAAKnuC,OAAS8yM,SAAUhoM,EAAKqjC,MAC9CrjC,EAAKm8M,gBACLn8M,EAAK0gB,OACL1gB,EAAKkqM,eACLlqM,EAAKmhM,OAGP,KAAC6b,CAAA,CArLgB,CAASj0K,IAyLrBw0K,GAAiB,SAAAC,IAAA9hN,EAAAA,EAAAA,GAAA6hN,EAAAC,GAAA,IAAAC,GAAA7hN,EAAAA,EAAAA,GAAA2hN,GAEtB,SAAAA,IAA+B,IAAAG,EAAlBx8K,EAAQjtC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,KAUvB,IAV2B8H,EAAAA,EAAAA,GAAA,KAAAwhN,IAE3BG,EAAAD,EAAAhrN,KAAA,OAEKyC,KAAO,oBAEZwoN,EAAK7zK,WAAa,CACjB3I,SAAUA,GAGO,OAAbA,EAAoB,CAIxB,IAAM9uB,EAAW,GACXgB,EAAQ,IAAI8qC,IAIZvjD,EAAQ,IAAIg1B,GACZuiH,EAAM,IAAIviH,GAEhB,GAAwB,OAAnBuR,EAASjoC,MAAiB,CAI9B,IAAMH,EAAWooC,EAAS+6D,WAAWnjG,SAC/BsxB,EAAU8W,EAASjoC,MACrBmuI,EAASlmG,EAASkmG,OAEC,IAAlBA,EAAOxxI,SAEXwxI,EAAS,CAAE,CAAEzsI,MAAO,EAAG1E,MAAOm0B,EAAQn0B,MAAO2gG,cAAe,KAM7D,IAAM,IAAI7jC,EAAI,EAAG4qJ,EAAKv2E,EAAOxxI,OAAQm9D,EAAI4qJ,IAAO5qJ,EAO/C,IALA,IAAMw7C,EAAQ64B,EAAQr0E,GAEhB65E,EAAar+B,EAAM5zG,MAGf1D,EAAI21I,EAAYnjI,EAAMmjI,EAFbr+B,EAAMt4G,MAEkCgB,EAAIwS,EAAGxS,GAAK,EAEtE,IAAM,IAAIyO,EAAI,EAAGA,EAAI,EAAGA,IAAO,CAE9B,IAAM0+H,EAASh6G,EAAQ0kE,KAAM73F,EAAIyO,GAC3B2+H,EAASj6G,EAAQ0kE,KAAM73F,GAAMyO,EAAI,GAAM,GAE7C/K,EAAM8hG,oBAAqB3jG,EAAUsrI,GACrC8N,EAAIz1C,oBAAqB3jG,EAAUurI,IAEQ,IAAtCu5E,GAAcjjN,EAAOu3I,EAAK9+H,KAE9BhB,EAASzc,KAAMgF,EAAM0H,EAAG1H,EAAM2H,EAAG3H,EAAM4H,GACvC6P,EAASzc,KAAMu8I,EAAI7vI,EAAG6vI,EAAI5vI,EAAG4vI,EAAI3vI,GAInC,CAMH,MAMC,IAFA,IAAMzJ,EAAWooC,EAAS+6D,WAAWnjG,SAE3B7B,EAAI,EAAGwS,EAAM3Q,EAAS7C,MAAQ,EAAKgB,EAAIwS,EAAGxS,IAEnD,IAAM,IAAIyO,EAAI,EAAGA,EAAI,EAAGA,IAAO,CAK9B,IAAM0+H,EAAS,EAAIntI,EAAIyO,EACjB2+H,EAAS,EAAIptI,GAAQyO,EAAI,GAAM,EAErC/K,EAAM8hG,oBAAqB3jG,EAAUsrI,GACrC8N,EAAIz1C,oBAAqB3jG,EAAUurI,IAEQ,IAAtCu5E,GAAcjjN,EAAOu3I,EAAK9+H,KAE9BhB,EAASzc,KAAMgF,EAAM0H,EAAG1H,EAAM2H,EAAG3H,EAAM4H,GACvC6P,EAASzc,KAAMu8I,EAAI7vI,EAAG6vI,EAAI5vI,EAAG4vI,EAAI3vI,GAInC,CAQFm7M,EAAK10K,aAAc,WAAY,IAAIo9F,GAAwBh0H,EAAU,GAEtE,CAAC,OAAAsrM,CAEF,CAAC,OAAA1/M,EAAAA,EAAAA,GAAAu/M,EAAA,CA5GqB,CAASx0K,IAgHhC,SAAS60K,GAAcjjN,EAAOu3I,EAAK9+H,GAElC,IAAMyqM,EAAQ,GAAH/qN,OAAM6H,EAAM0H,EAAC,KAAAvP,OAAI6H,EAAM2H,EAAC,KAAAxP,OAAI6H,EAAM4H,EAAC,KAAAzP,OAAIo/I,EAAI7vI,EAAC,KAAAvP,OAAIo/I,EAAI5vI,EAAC,KAAAxP,OAAIo/I,EAAI3vI,GAClEu7M,EAAQ,GAAHhrN,OAAMo/I,EAAI7vI,EAAC,KAAAvP,OAAIo/I,EAAI5vI,EAAC,KAAAxP,OAAIo/I,EAAI3vI,EAAC,KAAAzP,OAAI6H,EAAM0H,EAAC,KAAAvP,OAAI6H,EAAM2H,EAAC,KAAAxP,OAAI6H,EAAM4H,GAExE,OAA4B,IAAvB6Q,EAAMy2C,IAAKg0J,KAA2C,IAAvBzqM,EAAMy2C,IAAKi0J,KAM9C1qM,EAAM+H,IAAK0iM,GACXzqM,EAAM+H,IAAK2iM,IACJ,EAIT,CAEA,IAAIC,GAA0BprN,OAAOqqE,OAAO,CAC3C84C,UAAW,KACXs2B,YAAaA,GACby9D,gBAAiBA,GACjBM,eAAgBA,GAChBuB,aAAcA,GACdhB,iBAAkBA,GAClB2C,qBAAsBA,GACtBQ,cAAeA,GACf+F,gBAAiBA,GACjBzyK,oBAAqBA,GACrBgoK,cAAeA,GACfyQ,mBAAoBA,GACpB1kE,cAAeA,GACf42D,mBAAoBA,GACpBkO,aAAcA,GACdU,cAAeA,GACfQ,eAAgBA,GAChBQ,oBAAqBA,GACrBI,cAAeA,GACfO,kBAAmBA,GACnBW,aAAcA,GACdO,kBAAmBA,KAGd34C,GAAc,SAAAo5C,IAAAtiN,EAAAA,EAAAA,GAAAkpK,EAAAo5C,GAAA,IAAAC,GAAAriN,EAAAA,EAAAA,GAAAgpK,GAEnB,SAAAA,EAAa/6H,GAAa,IAAAq0K,EAaI,OAbJniN,EAAAA,EAAAA,GAAA,KAAA6oK,IAEzBs5C,EAAAD,EAAAxrN,KAAA,OAEK04L,kBAAmB,EAExB+yB,EAAKhpN,KAAO,iBAEZgpN,EAAKhpH,MAAQ,IAAIC,GAAO,GACxB+oH,EAAKzxG,aAAc,EAEnByxG,EAAK16E,KAAM,EAEX06E,EAAKrzK,UAAWhB,GAAaq0K,CAE9B,CAYC,OAZAlgN,EAAAA,EAAAA,GAAA4mK,EAAA,EAAAtrK,IAAA,OAAApG,MAED,SAAM8G,GAQL,OANAolC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAulI,EAAApyK,WAAA,aAAAC,KAAA,KAAYuH,GAEZ3G,KAAK6hG,MAAM59F,KAAM0C,EAAOk7F,OAExB7hG,KAAKmwI,IAAMxpI,EAAOwpI,IAEXnwI,IAER,KAACuxK,CAAA,CA7BkB,CAASt5I,IAiCvB6yL,GAAiB,SAAA53K,IAAA7qC,EAAAA,EAAAA,GAAAyiN,EAAA53K,GAAA,IAAA63K,GAAAxiN,EAAAA,EAAAA,GAAAuiN,GAEtB,SAAAA,EAAat0K,GAAa,IAAAw0K,EAMO,OANPtiN,EAAAA,EAAAA,GAAA,KAAAoiN,IAEzBE,EAAAD,EAAA3rN,KAAA,KAAOo3C,IAEFu2H,qBAAsB,EAE3Bi+C,EAAKnpN,KAAO,oBAAoBmpN,CAEjC,CAAC,OAAArgN,EAAAA,EAAAA,GAAAmgN,EAAA,CAVqB,CAAS/8K,IAc1BwK,GAAoB,SAAA0yK,IAAA5iN,EAAAA,EAAAA,GAAAkwC,EAAA0yK,GAAA,IAAAC,GAAA3iN,EAAAA,EAAAA,GAAAgwC,GAEzB,SAAAA,EAAa/B,GAAa,IAAA20K,EAuDI,OAvDJziN,EAAAA,EAAAA,GAAA,KAAA6vC,IAEzB4yK,EAAAD,EAAA9rN,KAAA,OAEKsyK,wBAAyB,EAE9By5C,EAAK51K,QAAU,CAAE,SAAY,IAE7B41K,EAAKtpN,KAAO,uBAEZspN,EAAKtpH,MAAQ,IAAIC,GAAO,UACxBqpH,EAAKryG,UAAY,EACjBqyG,EAAKvyG,UAAY,EAEjBuyG,EAAKjrL,IAAM,KAEXirL,EAAK/8E,SAAW,KAChB+8E,EAAK98E,kBAAoB,EAEzB88E,EAAK78E,MAAQ,KACb68E,EAAKzxG,eAAiB,EAEtByxG,EAAKvxG,SAAW,IAAI9X,GAAO,GAC3BqpH,EAAK1nH,kBAAoB,EACzB0nH,EAAKn8E,YAAc,KAEnBm8E,EAAK58E,QAAU,KACf48E,EAAK38E,UAAY,EAEjB28E,EAAK18E,UAAY,KACjB08E,EAAKz8E,cAAgBvjB,GACrBggG,EAAK5yG,YAAc,IAAInlE,GAAS,EAAG,GAEnC+3K,EAAKx8E,gBAAkB,KACvBw8E,EAAKv8E,kBAAoB,EACzBu8E,EAAKt8E,iBAAmB,EAExBs8E,EAAKr8E,aAAe,KAEpBq8E,EAAKp8E,aAAe,KAEpBo8E,EAAKh9E,SAAW,KAEhBg9E,EAAK/7E,OAAS,KACd+7E,EAAK77E,gBAAkB,EAEvB67E,EAAKp7E,WAAY,EACjBo7E,EAAKn7E,mBAAqB,EAC1Bm7E,EAAKl7E,iBAAmB,QACxBk7E,EAAKj7E,kBAAoB,QAEzBi7E,EAAK7yG,aAAc,EAEnB6yG,EAAKh7E,KAAM,EAEXg7E,EAAK3zK,UAAWhB,GAAa20K,CAE9B,CAuDC,OAvDAxgN,EAAAA,EAAAA,GAAA4tC,EAAA,EAAAtyC,IAAA,OAAApG,MAED,SAAM8G,GAmDL,OAjDAolC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAuM,EAAAp5C,WAAA,aAAAC,KAAA,KAAYuH,GAEZ3G,KAAKu1C,QAAU,CAAE,SAAY,IAE7Bv1C,KAAK6hG,MAAM59F,KAAM0C,EAAOk7F,OACxB7hG,KAAK84G,UAAYnyG,EAAOmyG,UACxB94G,KAAK44G,UAAYjyG,EAAOiyG,UAExB54G,KAAKkgC,IAAMv5B,EAAOu5B,IAElBlgC,KAAKouI,SAAWznI,EAAOynI,SACvBpuI,KAAKquI,kBAAoB1nI,EAAO0nI,kBAEhCruI,KAAKsuI,MAAQ3nI,EAAO2nI,MACpBtuI,KAAK05G,eAAiB/yG,EAAO+yG,eAE7B15G,KAAK45G,SAAS31G,KAAM0C,EAAOizG,UAC3B55G,KAAKgvI,YAAcroI,EAAOqoI,YAC1BhvI,KAAKyjG,kBAAoB98F,EAAO88F,kBAEhCzjG,KAAKuuI,QAAU5nI,EAAO4nI,QACtBvuI,KAAKwuI,UAAY7nI,EAAO6nI,UAExBxuI,KAAKyuI,UAAY9nI,EAAO8nI,UACxBzuI,KAAK0uI,cAAgB/nI,EAAO+nI,cAC5B1uI,KAAKu4G,YAAYt0G,KAAM0C,EAAO4xG,aAE9Bv4G,KAAK2uI,gBAAkBhoI,EAAOgoI,gBAC9B3uI,KAAK4uI,kBAAoBjoI,EAAOioI,kBAChC5uI,KAAK6uI,iBAAmBloI,EAAOkoI,iBAE/B7uI,KAAK8uI,aAAenoI,EAAOmoI,aAE3B9uI,KAAK+uI,aAAepoI,EAAOooI,aAE3B/uI,KAAKmuI,SAAWxnI,EAAOwnI,SAEvBnuI,KAAKovI,OAASzoI,EAAOyoI,OACrBpvI,KAAKsvI,gBAAkB3oI,EAAO2oI,gBAE9BtvI,KAAK+vI,UAAYppI,EAAOopI,UACxB/vI,KAAKgwI,mBAAqBrpI,EAAOqpI,mBACjChwI,KAAKiwI,iBAAmBtpI,EAAOspI,iBAC/BjwI,KAAKkwI,kBAAoBvpI,EAAOupI,kBAEhClwI,KAAKs4G,YAAc3xG,EAAO2xG,YAE1Bt4G,KAAKmwI,IAAMxpI,EAAOwpI,IAEXnwI,IAER,KAACu4C,CAAA,CAlHwB,CAAStgB,IAsH7ByrE,GAAoB,SAAAntD,IAAAluC,EAAAA,EAAAA,GAAAq7F,EAAAntD,GAAA,IAAA60K,GAAA7iN,EAAAA,EAAAA,GAAAm7F,GAEzB,SAAAA,EAAaltD,GAAa,IAAA60K,EA+DI,OA/DJ3iN,EAAAA,EAAAA,GAAA,KAAAg7F,IAEzB2nH,EAAAD,EAAAhsN,KAAA,OAEK43L,wBAAyB,EAE9Bq0B,EAAK91K,QAAU,CAEd,SAAY,GACZ,SAAY,IAIb81K,EAAKxpN,KAAO,uBAEZwpN,EAAKx9E,aAAe,KACpBw9E,EAAKrnH,mBAAqB,EAC1BqnH,EAAKv9E,sBAAwB,KAC7Bu9E,EAAKlnH,qBAAuB,IAAI/wD,GAAS,EAAG,GAC5Ci4K,EAAKt9E,mBAAqB,KAE1Bs9E,EAAKxlH,IAAM,IAEXvmG,OAAOgF,gBAAcy5C,EAAAA,EAAAA,GAAAstK,GAAQ,eAAgB,CAC5C7mN,IAAK,WAEJ,OAASkpH,GAAO,KAAQ1tH,KAAK6lG,IAAM,IAAQ7lG,KAAK6lG,IAAM,GAAK,EAAG,EAE/D,EACAphG,IAAK,SAAW8qI,GAEfvvI,KAAK6lG,KAAQ,EAAI,GAAM0pC,IAAmB,EAAI,GAAMA,EAErD,IAGD87E,EAAKr9E,eAAiB,KACtBq9E,EAAK7mH,eAAiB,IACtB6mH,EAAK5mH,0BAA4B,CAAE,IAAK,KACxC4mH,EAAKp9E,wBAA0B,KAE/Bo9E,EAAKxmH,WAAa,IAAI/C,GAAO,GAC7BupH,EAAKhzD,cAAgB,KACrBgzD,EAAKvmH,eAAiB,EACtBumH,EAAK/yD,kBAAoB,KAEzB+yD,EAAK37E,gBAAkB,KAEvB27E,EAAK9lH,UAAY,EACjB8lH,EAAK17E,aAAe,KACpB07E,EAAK3lH,oBAAsB9yF,IAC3By4M,EAAKzlH,iBAAmB,IAAI9D,GAAO,EAAG,EAAG,GAEzCupH,EAAKvlH,kBAAoB,EACzBulH,EAAKn8E,qBAAuB,KAC5Bm8E,EAAKnlH,cAAgB,IAAIpE,GAAO,EAAG,EAAG,GACtCupH,EAAKl8E,iBAAmB,KAExBk8E,EAAKC,OAAS,EACdD,EAAKE,WAAa,EAClBF,EAAKG,aAAe,EACpBH,EAAKI,cAAgB,EAErBJ,EAAK7zK,UAAWhB,GAAa60K,CAE9B,CAyHC,OAzHA1gN,EAAAA,EAAAA,GAAA+4F,EAAA,EAAAz9F,IAAA,QAAAzB,IAED,WAEC,OAAOxE,KAAKsrN,MAEb,EAAC7mN,IAED,SAAW5E,GAELG,KAAKsrN,OAAS,IAAMzrN,EAAQ,GAEhCG,KAAKqoE,UAINroE,KAAKsrN,OAASzrN,CAEf,GAAC,CAAAoG,IAAA,YAAAzB,IAED,WAEC,OAAOxE,KAAKurN,UAEb,EAAC9mN,IAED,SAAe5E,GAETG,KAAKurN,WAAa,IAAM1rN,EAAQ,GAEpCG,KAAKqoE,UAINroE,KAAKurN,WAAa1rN,CAEnB,GAAC,CAAAoG,IAAA,cAAAzB,IAED,WAEC,OAAOxE,KAAKwrN,YAEb,EAAC/mN,IAED,SAAiB5E,GAEXG,KAAKwrN,aAAe,IAAM3rN,EAAQ,GAEtCG,KAAKqoE,UAINroE,KAAKwrN,aAAe3rN,CAErB,GAAC,CAAAoG,IAAA,eAAAzB,IAED,WAEC,OAAOxE,KAAKyrN,aAEb,EAAChnN,IAED,SAAkB5E,GAEZG,KAAKyrN,cAAgB,IAAM5rN,EAAQ,GAEvCG,KAAKqoE,UAINroE,KAAKyrN,cAAgB5rN,CAEtB,GAAC,CAAAoG,IAAA,OAAApG,MAED,SAAM8G,GA6CL,OA3CAolC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA03D,EAAAvkG,WAAA,aAAAC,KAAA,KAAYuH,GAEZ3G,KAAKu1C,QAAU,CAEd,SAAY,GACZ,SAAY,IAIbv1C,KAAK6jG,UAAYl9F,EAAOk9F,UACxB7jG,KAAK6tI,aAAelnI,EAAOknI,aAC3B7tI,KAAKgkG,mBAAqBr9F,EAAOq9F,mBACjChkG,KAAK8tI,sBAAwBnnI,EAAOmnI,sBACpC9tI,KAAK+tI,mBAAqBpnI,EAAOonI,mBACjC/tI,KAAKmkG,qBAAqBlgG,KAAM0C,EAAOw9F,sBAEvCnkG,KAAK6lG,IAAMl/F,EAAOk/F,IAElB7lG,KAAKqkG,YAAc19F,EAAO09F,YAC1BrkG,KAAKguI,eAAiBrnI,EAAOqnI,eAC7BhuI,KAAKwkG,eAAiB79F,EAAO69F,eAC7BxkG,KAAKykG,2BAAyBjmE,EAAAA,EAAAA,GAAQ73B,EAAO89F,2BAC7CzkG,KAAKiuI,wBAA0BtnI,EAAOsnI,wBAEtCjuI,KAAK+kG,MAAQp+F,EAAOo+F,MACpB/kG,KAAK6kG,WAAW5gG,KAAM0C,EAAOk+F,YAC7B7kG,KAAKq4J,cAAgB1xJ,EAAO0xJ,cAC5Br4J,KAAK8kG,eAAiBn+F,EAAOm+F,eAC7B9kG,KAAKs4J,kBAAoB3xJ,EAAO2xJ,kBAEhCt4J,KAAKqlG,aAAe1+F,EAAO0+F,aAC3BrlG,KAAK0vI,gBAAkB/oI,EAAO+oI,gBAE9B1vI,KAAKulG,UAAY5+F,EAAO4+F,UACxBvlG,KAAK2vI,aAAehpI,EAAOgpI,aAC3B3vI,KAAK0lG,oBAAsB/+F,EAAO++F,oBAClC1lG,KAAK4lG,iBAAiB3hG,KAAM0C,EAAOi/F,kBAEnC5lG,KAAK8lG,kBAAoBn/F,EAAOm/F,kBAChC9lG,KAAKkvI,qBAAuBvoI,EAAOuoI,qBACnClvI,KAAKkmG,cAAcjiG,KAAM0C,EAAOu/F,eAChClmG,KAAKmvI,iBAAmBxoI,EAAOwoI,iBAExBnvI,IAER,KAAC0jG,CAAA,CA5LwB,CAASnrD,IAgM7B44H,GAAiB,SAAAu6C,IAAArjN,EAAAA,EAAAA,GAAA8oK,EAAAu6C,GAAA,IAAAC,GAAApjN,EAAAA,EAAAA,GAAA4oK,GAEtB,SAAAA,EAAa36H,GAAa,IAAAo1K,EAqDI,OArDJljN,EAAAA,EAAAA,GAAA,KAAAyoK,IAEzBy6C,EAAAD,EAAAvsN,KAAA,OAEKy3L,qBAAsB,EAE3B+0B,EAAK/pN,KAAO,oBAEZ+pN,EAAK/pH,MAAQ,IAAIC,GAAO,UACxB8pH,EAAKj+E,SAAW,IAAI7rC,GAAO,SAC3B8pH,EAAKh+E,UAAY,GAEjBg+E,EAAK1rL,IAAM,KAEX0rL,EAAKx9E,SAAW,KAChBw9E,EAAKv9E,kBAAoB,EAEzBu9E,EAAKt9E,MAAQ,KACbs9E,EAAKlyG,eAAiB,EAEtBkyG,EAAKhyG,SAAW,IAAI9X,GAAO,GAC3B8pH,EAAKnoH,kBAAoB,EACzBmoH,EAAK58E,YAAc,KAEnB48E,EAAKr9E,QAAU,KACfq9E,EAAKp9E,UAAY,EAEjBo9E,EAAKn9E,UAAY,KACjBm9E,EAAKl9E,cAAgBvjB,GACrBygG,EAAKrzG,YAAc,IAAInlE,GAAS,EAAG,GAEnCw4K,EAAKj9E,gBAAkB,KACvBi9E,EAAKh9E,kBAAoB,EACzBg9E,EAAK/8E,iBAAmB,EAExB+8E,EAAK38E,YAAc,KAEnB28E,EAAKz9E,SAAW,KAEhBy9E,EAAKx8E,OAAS,KACdw8E,EAAKv8E,QAAU3oB,GACfklG,EAAKr8E,aAAe,EACpBq8E,EAAKp8E,gBAAkB,IAEvBo8E,EAAK77E,WAAY,EACjB67E,EAAK57E,mBAAqB,EAC1B47E,EAAK37E,iBAAmB,QACxB27E,EAAK17E,kBAAoB,QAEzB07E,EAAKtzG,aAAc,EAEnBszG,EAAKz7E,KAAM,EAEXy7E,EAAKp0K,UAAWhB,GAAao1K,CAE9B,CAqDC,OArDAjhN,EAAAA,EAAAA,GAAAwmK,EAAA,EAAAlrK,IAAA,OAAApG,MAED,SAAM8G,GAiDL,OA/CAolC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAmlI,EAAAhyK,WAAA,aAAAC,KAAA,KAAYuH,GAEZ3G,KAAK6hG,MAAM59F,KAAM0C,EAAOk7F,OACxB7hG,KAAK2tI,SAAS1pI,KAAM0C,EAAOgnI,UAC3B3tI,KAAK4tI,UAAYjnI,EAAOinI,UAExB5tI,KAAKkgC,IAAMv5B,EAAOu5B,IAElBlgC,KAAKouI,SAAWznI,EAAOynI,SACvBpuI,KAAKquI,kBAAoB1nI,EAAO0nI,kBAEhCruI,KAAKsuI,MAAQ3nI,EAAO2nI,MACpBtuI,KAAK05G,eAAiB/yG,EAAO+yG,eAE7B15G,KAAK45G,SAAS31G,KAAM0C,EAAOizG,UAC3B55G,KAAKgvI,YAAcroI,EAAOqoI,YAC1BhvI,KAAKyjG,kBAAoB98F,EAAO88F,kBAEhCzjG,KAAKuuI,QAAU5nI,EAAO4nI,QACtBvuI,KAAKwuI,UAAY7nI,EAAO6nI,UAExBxuI,KAAKyuI,UAAY9nI,EAAO8nI,UACxBzuI,KAAK0uI,cAAgB/nI,EAAO+nI,cAC5B1uI,KAAKu4G,YAAYt0G,KAAM0C,EAAO4xG,aAE9Bv4G,KAAK2uI,gBAAkBhoI,EAAOgoI,gBAC9B3uI,KAAK4uI,kBAAoBjoI,EAAOioI,kBAChC5uI,KAAK6uI,iBAAmBloI,EAAOkoI,iBAE/B7uI,KAAKivI,YAActoI,EAAOsoI,YAE1BjvI,KAAKmuI,SAAWxnI,EAAOwnI,SAEvBnuI,KAAKovI,OAASzoI,EAAOyoI,OACrBpvI,KAAKqvI,QAAU1oI,EAAO0oI,QACtBrvI,KAAKuvI,aAAe5oI,EAAO4oI,aAC3BvvI,KAAKwvI,gBAAkB7oI,EAAO6oI,gBAE9BxvI,KAAK+vI,UAAYppI,EAAOopI,UACxB/vI,KAAKgwI,mBAAqBrpI,EAAOqpI,mBACjChwI,KAAKiwI,iBAAmBtpI,EAAOspI,iBAC/BjwI,KAAKkwI,kBAAoBvpI,EAAOupI,kBAEhClwI,KAAKs4G,YAAc3xG,EAAO2xG,YAE1Bt4G,KAAKmwI,IAAMxpI,EAAOwpI,IAEXnwI,IAER,KAACmxK,CAAA,CA9GqB,CAASl5I,IAkH1Bm5I,GAAgB,SAAAy6C,IAAAxjN,EAAAA,EAAAA,GAAA+oK,EAAAy6C,GAAA,IAAAC,GAAAvjN,EAAAA,EAAAA,GAAA6oK,GAErB,SAAAA,EAAa56H,GAAa,IAAAu1K,EA6CI,OA7CJrjN,EAAAA,EAAAA,GAAA,KAAA0oK,IAEzB26C,EAAAD,EAAA1sN,KAAA,OAEKu3L,oBAAqB,EAE1Bo1B,EAAKx2K,QAAU,CAAE,KAAQ,IAEzBw2K,EAAKlqN,KAAO,mBAEZkqN,EAAKlqH,MAAQ,IAAIC,GAAO,UAExBiqH,EAAK7rL,IAAM,KACX6rL,EAAKt8E,YAAc,KAEnBs8E,EAAK39E,SAAW,KAChB29E,EAAK19E,kBAAoB,EAEzB09E,EAAKz9E,MAAQ,KACby9E,EAAKryG,eAAiB,EAEtBqyG,EAAKnyG,SAAW,IAAI9X,GAAO,GAC3BiqH,EAAKtoH,kBAAoB,EACzBsoH,EAAK/8E,YAAc,KAEnB+8E,EAAKx9E,QAAU,KACfw9E,EAAKv9E,UAAY,EAEjBu9E,EAAKt9E,UAAY,KACjBs9E,EAAKr9E,cAAgBvjB,GACrB4gG,EAAKxzG,YAAc,IAAInlE,GAAS,EAAG,GAEnC24K,EAAKp9E,gBAAkB,KACvBo9E,EAAKn9E,kBAAoB,EACzBm9E,EAAKl9E,iBAAmB,EAExBk9E,EAAK59E,SAAW,KAEhB49E,EAAKh8E,WAAY,EACjBg8E,EAAK/7E,mBAAqB,EAC1B+7E,EAAK97E,iBAAmB,QACxB87E,EAAK77E,kBAAoB,QAEzB67E,EAAK57E,KAAM,EAEX47E,EAAKv0K,UAAWhB,GAAau1K,CAE9B,CA2CC,OA3CAphN,EAAAA,EAAAA,GAAAymK,EAAA,EAAAnrK,IAAA,OAAApG,MAED,SAAM8G,GAuCL,OArCAolC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAolI,EAAAjyK,WAAA,aAAAC,KAAA,KAAYuH,GAEZ3G,KAAK6hG,MAAM59F,KAAM0C,EAAOk7F,OAExB7hG,KAAKkgC,IAAMv5B,EAAOu5B,IAClBlgC,KAAKyvI,YAAc9oI,EAAO8oI,YAE1BzvI,KAAKouI,SAAWznI,EAAOynI,SACvBpuI,KAAKquI,kBAAoB1nI,EAAO0nI,kBAEhCruI,KAAKsuI,MAAQ3nI,EAAO2nI,MACpBtuI,KAAK05G,eAAiB/yG,EAAO+yG,eAE7B15G,KAAK45G,SAAS31G,KAAM0C,EAAOizG,UAC3B55G,KAAKgvI,YAAcroI,EAAOqoI,YAC1BhvI,KAAKyjG,kBAAoB98F,EAAO88F,kBAEhCzjG,KAAKuuI,QAAU5nI,EAAO4nI,QACtBvuI,KAAKwuI,UAAY7nI,EAAO6nI,UAExBxuI,KAAKyuI,UAAY9nI,EAAO8nI,UACxBzuI,KAAK0uI,cAAgB/nI,EAAO+nI,cAC5B1uI,KAAKu4G,YAAYt0G,KAAM0C,EAAO4xG,aAE9Bv4G,KAAK2uI,gBAAkBhoI,EAAOgoI,gBAC9B3uI,KAAK4uI,kBAAoBjoI,EAAOioI,kBAChC5uI,KAAK6uI,iBAAmBloI,EAAOkoI,iBAE/B7uI,KAAKmuI,SAAWxnI,EAAOwnI,SAEvBnuI,KAAK+vI,UAAYppI,EAAOopI,UACxB/vI,KAAKgwI,mBAAqBrpI,EAAOqpI,mBACjChwI,KAAKiwI,iBAAmBtpI,EAAOspI,iBAC/BjwI,KAAKkwI,kBAAoBvpI,EAAOupI,kBAEhClwI,KAAKmwI,IAAMxpI,EAAOwpI,IAEXnwI,IAER,KAACoxK,CAAA,CA5FoB,CAASn5I,IAgGzBg5I,GAAkB,SAAA+6C,IAAA3jN,EAAAA,EAAAA,GAAA4oK,EAAA+6C,GAAA,IAAAC,GAAA1jN,EAAAA,EAAAA,GAAA0oK,GAEvB,SAAAA,EAAaz6H,GAAa,IAAA01K,EAwBI,OAxBJxjN,EAAAA,EAAAA,GAAA,KAAAuoK,IAEzBi7C,EAAAD,EAAA7sN,KAAA,OAEKi4L,sBAAuB,EAE5B60B,EAAKrqN,KAAO,qBAEZqqN,EAAK39E,QAAU,KACf29E,EAAK19E,UAAY,EAEjB09E,EAAKz9E,UAAY,KACjBy9E,EAAKx9E,cAAgBvjB,GACrB+gG,EAAK3zG,YAAc,IAAInlE,GAAS,EAAG,GAEnC84K,EAAKv9E,gBAAkB,KACvBu9E,EAAKt9E,kBAAoB,EACzBs9E,EAAKr9E,iBAAmB,EAExBq9E,EAAKn8E,WAAY,EACjBm8E,EAAKl8E,mBAAqB,EAE1Bk8E,EAAK5zG,aAAc,EAEnB4zG,EAAK10K,UAAWhB,GAAa01K,CAE9B,CAwBC,OAxBAvhN,EAAAA,EAAAA,GAAAsmK,EAAA,EAAAhrK,IAAA,OAAApG,MAED,SAAM8G,GAoBL,OAlBAolC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAilI,EAAA9xK,WAAA,aAAAC,KAAA,KAAYuH,GAEZ3G,KAAKuuI,QAAU5nI,EAAO4nI,QACtBvuI,KAAKwuI,UAAY7nI,EAAO6nI,UAExBxuI,KAAKyuI,UAAY9nI,EAAO8nI,UACxBzuI,KAAK0uI,cAAgB/nI,EAAO+nI,cAC5B1uI,KAAKu4G,YAAYt0G,KAAM0C,EAAO4xG,aAE9Bv4G,KAAK2uI,gBAAkBhoI,EAAOgoI,gBAC9B3uI,KAAK4uI,kBAAoBjoI,EAAOioI,kBAChC5uI,KAAK6uI,iBAAmBloI,EAAOkoI,iBAE/B7uI,KAAK+vI,UAAYppI,EAAOopI,UACxB/vI,KAAKgwI,mBAAqBrpI,EAAOqpI,mBAEjChwI,KAAKs4G,YAAc3xG,EAAO2xG,YAEnBt4G,IAER,KAACixK,CAAA,CApDsB,CAASh5I,IAwD3Bi5I,GAAmB,SAAAi7C,IAAA9jN,EAAAA,EAAAA,GAAA6oK,EAAAi7C,GAAA,IAAAC,GAAA7jN,EAAAA,EAAAA,GAAA2oK,GAExB,SAAAA,EAAa16H,GAAa,IAAA61K,EAmDI,OAnDJ3jN,EAAAA,EAAAA,GAAA,KAAAwoK,IAEzBm7C,EAAAD,EAAAhtN,KAAA,OAEKs3L,uBAAwB,EAE7B21B,EAAKxqN,KAAO,sBAEZwqN,EAAKxqH,MAAQ,IAAIC,GAAO,UAExBuqH,EAAKnsL,IAAM,KAEXmsL,EAAKj+E,SAAW,KAChBi+E,EAAKh+E,kBAAoB,EAEzBg+E,EAAK/9E,MAAQ,KACb+9E,EAAK3yG,eAAiB,EAEtB2yG,EAAKzyG,SAAW,IAAI9X,GAAO,GAC3BuqH,EAAK5oH,kBAAoB,EACzB4oH,EAAKr9E,YAAc,KAEnBq9E,EAAK99E,QAAU,KACf89E,EAAK79E,UAAY,EAEjB69E,EAAK59E,UAAY,KACjB49E,EAAK39E,cAAgBvjB,GACrBkhG,EAAK9zG,YAAc,IAAInlE,GAAS,EAAG,GAEnCi5K,EAAK19E,gBAAkB,KACvB09E,EAAKz9E,kBAAoB,EACzBy9E,EAAKx9E,iBAAmB,EAExBw9E,EAAKp9E,YAAc,KAEnBo9E,EAAKl+E,SAAW,KAEhBk+E,EAAKj9E,OAAS,KACdi9E,EAAKh9E,QAAU3oB,GACf2lG,EAAK98E,aAAe,EACpB88E,EAAK78E,gBAAkB,IAEvB68E,EAAKt8E,WAAY,EACjBs8E,EAAKr8E,mBAAqB,EAC1Bq8E,EAAKp8E,iBAAmB,QACxBo8E,EAAKn8E,kBAAoB,QAEzBm8E,EAAK/zG,aAAc,EAEnB+zG,EAAKl8E,KAAM,EAEXk8E,EAAK70K,UAAWhB,GAAa61K,CAE9B,CAmDC,OAnDA1hN,EAAAA,EAAAA,GAAAumK,EAAA,EAAAjrK,IAAA,OAAApG,MAED,SAAM8G,GA+CL,OA7CAolC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAklI,EAAA/xK,WAAA,aAAAC,KAAA,KAAYuH,GAEZ3G,KAAK6hG,MAAM59F,KAAM0C,EAAOk7F,OAExB7hG,KAAKkgC,IAAMv5B,EAAOu5B,IAElBlgC,KAAKouI,SAAWznI,EAAOynI,SACvBpuI,KAAKquI,kBAAoB1nI,EAAO0nI,kBAEhCruI,KAAKsuI,MAAQ3nI,EAAO2nI,MACpBtuI,KAAK05G,eAAiB/yG,EAAO+yG,eAE7B15G,KAAK45G,SAAS31G,KAAM0C,EAAOizG,UAC3B55G,KAAKgvI,YAAcroI,EAAOqoI,YAC1BhvI,KAAKyjG,kBAAoB98F,EAAO88F,kBAEhCzjG,KAAKuuI,QAAU5nI,EAAO4nI,QACtBvuI,KAAKwuI,UAAY7nI,EAAO6nI,UAExBxuI,KAAKyuI,UAAY9nI,EAAO8nI,UACxBzuI,KAAK0uI,cAAgB/nI,EAAO+nI,cAC5B1uI,KAAKu4G,YAAYt0G,KAAM0C,EAAO4xG,aAE9Bv4G,KAAK2uI,gBAAkBhoI,EAAOgoI,gBAC9B3uI,KAAK4uI,kBAAoBjoI,EAAOioI,kBAChC5uI,KAAK6uI,iBAAmBloI,EAAOkoI,iBAE/B7uI,KAAKivI,YAActoI,EAAOsoI,YAE1BjvI,KAAKmuI,SAAWxnI,EAAOwnI,SAEvBnuI,KAAKovI,OAASzoI,EAAOyoI,OACrBpvI,KAAKqvI,QAAU1oI,EAAO0oI,QACtBrvI,KAAKuvI,aAAe5oI,EAAO4oI,aAC3BvvI,KAAKwvI,gBAAkB7oI,EAAO6oI,gBAE9BxvI,KAAK+vI,UAAYppI,EAAOopI,UACxB/vI,KAAKgwI,mBAAqBrpI,EAAOqpI,mBACjChwI,KAAKiwI,iBAAmBtpI,EAAOspI,iBAC/BjwI,KAAKkwI,kBAAoBvpI,EAAOupI,kBAEhClwI,KAAKs4G,YAAc3xG,EAAO2xG,YAE1Bt4G,KAAKmwI,IAAMxpI,EAAOwpI,IAEXnwI,IAER,KAACkxK,CAAA,CA1GuB,CAASj5I,IA8G5Bo5I,GAAkB,SAAAi7C,IAAAjkN,EAAAA,EAAAA,GAAAgpK,EAAAi7C,GAAA,IAAAC,GAAAhkN,EAAAA,EAAAA,GAAA8oK,GAEvB,SAAAA,EAAa76H,GAAa,IAAAg2K,EAiCI,OAjCJ9jN,EAAAA,EAAAA,GAAA,KAAA2oK,IAEzBm7C,EAAAD,EAAAntN,KAAA,OAEK83L,sBAAuB,EAE5Bs1B,EAAKj3K,QAAU,CAAE,OAAU,IAE3Bi3K,EAAK3qN,KAAO,qBAEZ2qN,EAAK3qH,MAAQ,IAAIC,GAAO,UAExB0qH,EAAKt+E,OAAS,KAEds+E,EAAKtsL,IAAM,KAEXssL,EAAKj+E,QAAU,KACfi+E,EAAKh+E,UAAY,EAEjBg+E,EAAK/9E,UAAY,KACjB+9E,EAAK99E,cAAgBvjB,GACrBqhG,EAAKj0G,YAAc,IAAInlE,GAAS,EAAG,GAEnCo5K,EAAK79E,gBAAkB,KACvB69E,EAAK59E,kBAAoB,EACzB49E,EAAK39E,iBAAmB,EAExB29E,EAAKr+E,SAAW,KAEhBq+E,EAAKl0G,aAAc,EAEnBk0G,EAAKr8E,KAAM,EAEXq8E,EAAKh1K,UAAWhB,GAAag2K,CAE9B,CAkCC,OAlCA7hN,EAAAA,EAAAA,GAAA0mK,EAAA,EAAAprK,IAAA,OAAApG,MAGD,SAAM8G,GA6BL,OA3BAolC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAqlI,EAAAlyK,WAAA,aAAAC,KAAA,KAAYuH,GAEZ3G,KAAKu1C,QAAU,CAAE,OAAU,IAE3Bv1C,KAAK6hG,MAAM59F,KAAM0C,EAAOk7F,OAExB7hG,KAAKkuI,OAASvnI,EAAOunI,OAErBluI,KAAKkgC,IAAMv5B,EAAOu5B,IAElBlgC,KAAKuuI,QAAU5nI,EAAO4nI,QACtBvuI,KAAKwuI,UAAY7nI,EAAO6nI,UAExBxuI,KAAKyuI,UAAY9nI,EAAO8nI,UACxBzuI,KAAK0uI,cAAgB/nI,EAAO+nI,cAC5B1uI,KAAKu4G,YAAYt0G,KAAM0C,EAAO4xG,aAE9Bv4G,KAAK2uI,gBAAkBhoI,EAAOgoI,gBAC9B3uI,KAAK4uI,kBAAoBjoI,EAAOioI,kBAChC5uI,KAAK6uI,iBAAmBloI,EAAOkoI,iBAE/B7uI,KAAKmuI,SAAWxnI,EAAOwnI,SAEvBnuI,KAAKs4G,YAAc3xG,EAAO2xG,YAE1Bt4G,KAAKmwI,IAAMxpI,EAAOwpI,IAEXnwI,IAER,KAACqxK,CAAA,CAvEsB,CAASp5I,IA2E3Bq5I,GAAkB,SAAAm7C,IAAApkN,EAAAA,EAAAA,GAAAipK,EAAAm7C,GAAA,IAAAC,GAAAnkN,EAAAA,EAAAA,GAAA+oK,GAEvB,SAAAA,EAAa96H,GAAa,IAAAm2K,EAYI,OAZJjkN,EAAAA,EAAAA,GAAA,KAAA4oK,IAEzBq7C,EAAAD,EAAAttN,KAAA,OAEKo4L,sBAAuB,EAE5Bm1B,EAAK9qN,KAAO,qBAEZ8qN,EAAKhmM,MAAQ,EACbgmM,EAAK98E,SAAW,EAChB88E,EAAK78E,QAAU,EAEf68E,EAAKn1K,UAAWhB,GAAam2K,CAE9B,CAYC,OAZAhiN,EAAAA,EAAAA,GAAA2mK,EAAA,EAAArrK,IAAA,OAAApG,MAED,SAAM8G,GAQL,OANAolC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAslI,EAAAnyK,WAAA,aAAAC,KAAA,KAAYuH,GAEZ3G,KAAK2mB,MAAQhgB,EAAOggB,MACpB3mB,KAAK6vI,SAAWlpI,EAAOkpI,SACvB7vI,KAAK8vI,QAAUnpI,EAAOmpI,QAEf9vI,IAER,KAACsxK,CAAA,CA5BsB,CAASn5D,IAiCjC,SAASy0G,GAAYxtJ,EAAOlnD,EAAMuZ,GAEjC,OAAKo7L,GAAcztJ,GAIX,IAAIA,EAAMxL,YAAawL,EAAMr2B,SAAU7wB,OAAa/W,IAAPswB,EAAmBA,EAAK2tC,EAAM78D,SAI5E68D,EAAMz+D,MAAOuX,EAAMuZ,EAE3B,CAGA,SAASq7L,GAAc1tJ,EAAOv9D,EAAMkrN,GAEnC,OAAO3tJ,IACJ2tJ,GAAc3tJ,EAAMxL,cAAgB/xD,EAAcu9D,EAEd,kBAA3Bv9D,EAAKuzG,kBAET,IAAIvzG,EAAMu9D,GAIXz7D,MAAMxE,UAAUwB,MAAMvB,KAAMggE,EAEpC,CAEA,SAASytJ,GAAc7uL,GAEtB,OAAOqgE,YAAY2uH,OAAQhvL,MACtBA,aAAkB2rE,SAExB,CAGA,SAASsjH,GAAkBhvG,GAU1B,IAFA,IAAMj6G,EAAIi6G,EAAM17G,OACV0b,EAAS,IAAIta,MAAOK,GAChBJ,EAAI,EAAGA,IAAMI,IAAMJ,EAAIqa,EAAQra,GAAMA,EAI/C,OAFAqa,EAAOq5C,MAVP,SAAsB1zD,EAAGyO,GAExB,OAAO4rG,EAAOr6G,GAAMq6G,EAAO5rG,EAE5B,IAQO4L,CAER,CAGA,SAASivM,GAAa5lL,EAAQwgE,EAAQ5sF,GAKrC,IAHA,IAAMiyM,EAAU7lL,EAAO/kC,OACjB0b,EAAS,IAAIqpB,EAAOssB,YAAau5J,GAE7BvpN,EAAI,EAAGo4H,EAAY,EAAGA,IAAcmxF,IAAYvpN,EAIzD,IAFA,IAAMwpN,EAAYlyM,EAAOtX,GAAMkkG,EAErBz1F,EAAI,EAAGA,IAAMy1F,IAAWz1F,EAEjC4L,EAAQ+9G,KAAiB10F,EAAQ8lL,EAAY/6M,GAM/C,OAAO4L,CAER,CAGA,SAASovM,GAAaC,EAAUrvG,EAAO32E,EAAQimL,GAI9C,IAFA,IAAI3pN,EAAI,EAAGqC,EAAMqnN,EAAU,QAEXnsN,IAAR8E,QAAkD9E,IAA7B8E,EAAKsnN,IAEjCtnN,EAAMqnN,EAAU1pN,KAIjB,QAAazC,IAAR8E,EAAL,CAEA,IAAIpG,EAAQoG,EAAKsnN,GACjB,QAAepsN,IAAVtB,EAEL,GAAK8D,MAAM0sC,QAASxwC,GAEnB,QAIgBsB,KAFftB,EAAQoG,EAAKsnN,MAIZtvG,EAAM37G,KAAM2D,EAAIumB,MAChB8a,EAAOhlC,KAAKxD,MAAOwoC,EAAQznC,IAI5BoG,EAAMqnN,EAAU1pN,gBAECzC,IAAR8E,QAEJ,QAAuB9E,IAAlBtB,EAAM49B,QAIjB,QAIgBt8B,KAFftB,EAAQoG,EAAKsnN,MAIZtvG,EAAM37G,KAAM2D,EAAIumB,MAChB3sB,EAAM49B,QAAS6J,EAAQA,EAAO/kC,SAI/B0D,EAAMqnN,EAAU1pN,gBAECzC,IAAR8E,QAMV,QAIgB9E,KAFftB,EAAQoG,EAAKsnN,MAIZtvG,EAAM37G,KAAM2D,EAAIumB,MAChB8a,EAAOhlC,KAAMzC,IAIdoG,EAAMqnN,EAAU1pN,gBAECzC,IAAR8E,EA1DoB,CA8DhC,CAoMA,IAAIunN,GAA8BluN,OAAOqqE,OAAO,CAC/C84C,UAAW,KACXmqG,WAAYA,GACZE,aAAcA,GACdD,aAAcA,GACdI,iBAAkBA,GAClBC,YAAaA,GACbG,YAAaA,GACbI,QA1MD,SAAkBC,EAAYvtN,EAAMwtN,EAAYC,GAAqB,IAAXC,EAAGjtN,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAEzDktN,EAAOJ,EAAWttM,QAExB0tM,EAAK3tN,KAAOA,EAIZ,IAFA,IAAMg9G,EAAS,GAELv5G,EAAI,EAAGA,EAAIkqN,EAAK3wG,OAAO56G,SAAWqB,EAAI,CAQ/C,IANA,IAAMm6G,EAAQ+vG,EAAK3wG,OAAQv5G,GACrB+nG,EAAYoS,EAAMG,eAElBD,EAAQ,GACR32E,EAAS,GAELj1B,EAAI,EAAGA,EAAI0rG,EAAME,MAAM17G,SAAW8P,EAAI,CAE/C,IAAMmF,EAAQumG,EAAME,MAAO5rG,GAAMw7M,EAEjC,KAAKr2M,EAAQm2M,GAAcn2M,GAASo2M,GAApC,CAEA3vG,EAAM37G,KAAMy7G,EAAME,MAAO5rG,IAEzB,IAAM,IAAIK,EAAI,EAAGA,EAAIi5F,IAAcj5F,EAElC40B,EAAOhlC,KAAMy7G,EAAMz2E,OAAQj1B,EAAIs5F,EAAYj5F,GANW,CAUxD,CAEsB,IAAjBurG,EAAM17G,SAEXw7G,EAAME,MAAQ6uG,GAAc7uG,EAAOF,EAAME,MAAMrqD,aAC/CmqD,EAAMz2E,OAASwlL,GAAcxlL,EAAQy2E,EAAMz2E,OAAOssB,aAElDupD,EAAO76G,KAAMy7G,GAEd,CAEA+vG,EAAK3wG,OAASA,EAMd,IAFA,IAAI4wG,EAAen7M,IAEThP,EAAI,EAAGA,EAAIkqN,EAAK3wG,OAAO56G,SAAWqB,EAEtCmqN,EAAeD,EAAK3wG,OAAQv5G,GAAIq6G,MAAO,KAE3C8vG,EAAeD,EAAK3wG,OAAQv5G,GAAIq6G,MAAO,IAQzC,IAAM,IAAIr6G,EAAI,EAAGA,EAAIkqN,EAAK3wG,OAAO56G,SAAWqB,EAE3CkqN,EAAK3wG,OAAQv5G,GAAI+B,OAAS,EAAIooN,GAM/B,OAFAD,EAAKE,gBAEEF,CAER,EAsICG,iBApID,SAA2BC,GAAuE,IAA3DC,EAAcvtN,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGwtN,EAAaxtN,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAGstN,EAAYL,EAAGjtN,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAEvFitN,GAAO,IAAIA,EAAM,IAMtB,IAJA,IAAMQ,EAAYD,EAAcjxG,OAAO56G,OACjC+rN,EAAgBH,EAAiBN,EAEvCr1J,EAAA,WAGC,IAAM+1J,EAAiBH,EAAcjxG,OAAQv5G,GACvC4qN,EAAqBD,EAAeE,cAG1C,GAA4B,SAAvBD,GAAwD,WAAvBA,EAA+B,SAGrE,IAAME,EAAcR,EAAW/wG,OAAOlnD,MAAM,SAAW8nD,GAEtD,OAAOA,EAAM59G,OAASouN,EAAepuN,MACjC49G,EAAM0wG,gBAAkBD,CAE7B,IAEA,QAAqBrtN,IAAhButN,EAAyB,SAE9B,IAAIC,EAAkB,EAChBC,EAAqBL,EAAerwG,eAErCqwG,EAAevwG,kBAAkBG,4CAErCwwG,EAAkBC,EAAqB,GAIxC,IAAIC,EAAe,EACbC,EAAkBJ,EAAYxwG,eAE/BwwG,EAAY1wG,kBAAkBG,4CAElC0wG,EAAeC,EAAkB,GAIlC,IACIC,EADE1nD,EAAYknD,EAAetwG,MAAM17G,OAAS,EAIhD,GAAK+rN,GAAiBC,EAAetwG,MAAO,GAAM,CAGjD,IAAM+wG,EAAaL,EACbM,EAAWL,EAAqBD,EACtCI,EAAiBnC,GAAY2B,EAAejnL,OAAQ0nL,EAAYC,EAEjE,MAAO,GAAKX,GAAiBC,EAAetwG,MAAOopD,GAAc,CAGhE,IAAM2nD,EAAa3nD,EAAYunD,EAAqBD,EAC9CM,EAAWD,EAAaJ,EAAqBD,EACnDI,EAAiBnC,GAAY2B,EAAejnL,OAAQ0nL,EAAYC,EAEjE,KAAO,CAGN,IAAMC,EAAcX,EAAevwG,oBAC7BgxG,EAAaL,EACbM,EAAWL,EAAqBD,EACtCO,EAAYC,SAAUb,GACtBS,EAAiBnC,GAAYsC,EAAYxjH,aAAcsjH,EAAYC,EAEpE,CAG4B,eAAvBT,IAEkB,IAAIn1L,IAAamE,UAAWuxL,GAAiBz1M,YAAYkB,YACjEijB,QAASsxL,GAOxB,IADA,IAAMK,EAAWV,EAAYzwG,MAAM17G,OACzB8P,EAAI,EAAGA,EAAI+8M,IAAa/8M,EAAI,CAErC,IAAMg9M,EAAah9M,EAAIy8M,EAAkBD,EAEzC,GAA4B,eAAvBL,EAGJn1L,GAAWi2L,wBACVZ,EAAYpnL,OACZ+nL,EACAN,EACA,EACAL,EAAYpnL,OACZ+nL,QAQD,IAHA,IAAME,EAAWT,EAAiC,EAAfD,EAGzBn8M,EAAI,EAAGA,EAAI68M,IAAa78M,EAEjCg8M,EAAYpnL,OAAQ+nL,EAAa38M,IAAOq8M,EAAgBr8M,EAM3D,CAED,EA3GU9O,EAAI,EAAGA,EAAIyqN,IAAczqN,EAAC40D,IA+GpC,OAFA01J,EAAWsB,UAAYxkG,GAEhBkjG,CAER,IAmCM1hH,GAAW,WAEhB,SAAAA,EAAajB,EAAoBC,EAAcC,EAAYC,IAAehjG,EAAAA,EAAAA,GAAA,KAAA8jG,GAEzExsG,KAAKurG,mBAAqBA,EAC1BvrG,KAAKyvN,aAAe,EAEpBzvN,KAAK0rG,kBAAgCvqG,IAAjBuqG,EACnBA,EAAe,IAAIF,EAAa53C,YAAa63C,GAC9CzrG,KAAKwrG,aAAeA,EACpBxrG,KAAK2rG,UAAYF,EAEjBzrG,KAAK0vN,SAAW,KAChB1vN,KAAK2vN,iBAAmB,CAAC,CAE1B,CAwMC,OAxMAhlN,EAAAA,EAAAA,GAAA6hG,EAAA,EAAAvmG,IAAA,WAAApG,MAED,SAAUsS,GAET,IAAM65F,EAAKhsG,KAAKurG,mBACZK,EAAK5rG,KAAKyvN,aACb56M,EAAKm3F,EAAIJ,GACTC,EAAKG,EAAIJ,EAAK,GAEfgkH,EAAmB,CAElBC,EAAM,CAEL,IAAIjqK,EAEJkqK,EAAa,CAMZC,EAAc,KAAS59M,EAAI0C,GAAO,CAEjC,IAAM,IAAIm7M,EAAWpkH,EAAK,IAAO,CAEhC,QAAYzqG,IAAP0T,EAAmB,CAEvB,GAAK1C,EAAI05F,EAAK,MAAMkkH,EAMpB,OAFAnkH,EAAKI,EAAGzpG,OACRvC,KAAKyvN,aAAe7jH,EACb5rG,KAAKiwN,iBAAkBrkH,EAAK,EAEpC,CAEA,GAAKA,IAAOokH,EAAW,MAKvB,GAHAnkH,EAAKh3F,EAGA1C,GAFL0C,EAAKm3F,IAAOJ,IAKX,MAAMikH,CAIR,CAGAjqK,EAAQomD,EAAGzpG,OACX,MAAMutN,CAEP,CAIA,GAAS39M,GAAK05F,EAiDd,MAAM+jH,EA7CL,IAAMM,EAAWlkH,EAAI,GAEhB75F,EAAI+9M,IAERtkH,EAAK,EACLC,EAAKqkH,GAMN,IAAM,IAAIF,EAAWpkH,EAAK,IAAO,CAEhC,QAAYzqG,IAAP0qG,EAKJ,OADA7rG,KAAKyvN,aAAe,EACbzvN,KAAKiwN,iBAAkB,GAI/B,GAAKrkH,IAAOokH,EAAW,MAKvB,GAHAn7M,EAAKg3F,EAGA15F,IAFL05F,EAAKG,IAAOJ,EAAK,IAKhB,MAAMikH,CAIR,CAGAjqK,EAAQgmD,EACRA,EAAK,CASP,CAIA,KAAQA,EAAKhmD,GAAQ,CAEpB,IAAMuqK,EAAQvkH,EAAKhmD,IAAY,EAE1BzzC,EAAI65F,EAAImkH,GAEZvqK,EAAQuqK,EAIRvkH,EAAKukH,EAAM,CAIb,CAOA,GALAt7M,EAAKm3F,EAAIJ,QAKGzqG,KAJZ0qG,EAAKG,EAAIJ,EAAK,IAOb,OADA5rG,KAAKyvN,aAAe,EACbzvN,KAAKiwN,iBAAkB,GAI/B,QAAY9uN,IAAP0T,EAIJ,OAFA+2F,EAAKI,EAAGzpG,OACRvC,KAAKyvN,aAAe7jH,EACb5rG,KAAKiwN,iBAAkBrkH,EAAK,EAIrC,CAEA5rG,KAAKyvN,aAAe7jH,EAEpB5rG,KAAKowN,iBAAkBxkH,EAAIC,EAAIh3F,EAEhC,CAEA,OAAO7U,KAAKqwN,aAAczkH,EAAIC,EAAI15F,EAAG0C,EAEtC,GAAC,CAAA5O,IAAA,eAAApG,MAED,WAEC,OAAOG,KAAK0vN,UAAY1vN,KAAK2vN,gBAE9B,GAAC,CAAA1pN,IAAA,mBAAApG,MAED,SAAkB+F,GASjB,IALA,IAAMqY,EAASje,KAAK0rG,aACnBpkE,EAAStnC,KAAKwrG,aACd1D,EAAS9nG,KAAK2rG,UACd/kF,EAAShhB,EAAQkiG,EAERlkG,EAAI,EAAGA,IAAMkkG,IAAWlkG,EAEjCqa,EAAQra,GAAM0jC,EAAQ1gB,EAAShjB,GAIhC,OAAOqa,CAER,GAEA,CAAAhY,IAAA,eAAApG,MAEA,WAEC,MAAM,IAAI6C,MAAO,0BAGlB,GAAC,CAAAuD,IAAA,mBAAApG,MAED,WAEC,KAEA2sG,CAAA,CAvNe,GAmOX8jH,GAAgB,SAAAhlH,IAAAjjG,EAAAA,EAAAA,GAAAioN,EAAAhlH,GAAA,IAAAilH,GAAAhoN,EAAAA,EAAAA,GAAA+nN,GAErB,SAAAA,EAAa/kH,EAAoBC,EAAcC,EAAYC,GAAe,IAAA8kH,EAcvE,OAduE9nN,EAAAA,EAAAA,GAAA,KAAA4nN,IAEzEE,EAAAD,EAAAnxN,KAAA,KAAOmsG,EAAoBC,EAAcC,EAAYC,IAEhD+kH,aAAgB,EACrBD,EAAKE,aAAgB,EACrBF,EAAKG,aAAgB,EACrBH,EAAKI,aAAgB,EAErBJ,EAAKb,iBAAmB,CAEvBkB,YAAajmG,GACbkmG,UAAWlmG,IAEV4lG,CAEH,CAoHC,OApHA7lN,EAAAA,EAAAA,GAAA2lN,EAAA,EAAArqN,IAAA,mBAAApG,MAED,SAAkB+rG,EAAIC,EAAIh3F,GAEzB,IAAMm3F,EAAKhsG,KAAKurG,mBACZwlH,EAAQnlH,EAAK,EAChBolH,EAAQplH,EAAK,EAEbqlH,EAAQjlH,EAAI+kH,GACZG,EAAQllH,EAAIglH,GAEb,QAAe7vN,IAAV8vN,EAEJ,OAASjxN,KAAKmxN,eAAeN,aAE5B,KAAKhmG,GAGJkmG,EAAQnlH,EACRqlH,EAAQ,EAAIplH,EAAKh3F,EAEjB,MAED,KAAKi2G,GAIJmmG,EAAQplH,EAAKG,EADb+kH,EAAQ/kH,EAAGzpG,OAAS,GACOypG,EAAI+kH,EAAQ,GAEvC,MAED,QAGCA,EAAQnlH,EACRqlH,EAAQp8M,EAMX,QAAe1T,IAAV+vN,EAEJ,OAASlxN,KAAKmxN,eAAeL,WAE5B,KAAKjmG,GAGJmmG,EAAQplH,EACRslH,EAAQ,EAAIr8M,EAAKg3F,EAEjB,MAED,KAAKif,GAGJkmG,EAAQ,EACRE,EAAQr8M,EAAKm3F,EAAI,GAAMA,EAAI,GAE3B,MAED,QAGCglH,EAAQplH,EAAK,EACbslH,EAAQrlH,EAMX,IAAMulH,EAAuB,IAAZv8M,EAAKg3F,GACrB/D,EAAS9nG,KAAK2rG,UAEf3rG,KAAKywN,YAAcW,GAAWvlH,EAAKolH,GACnCjxN,KAAK2wN,YAAcS,GAAWF,EAAQr8M,GACtC7U,KAAK0wN,YAAcK,EAAQjpH,EAC3B9nG,KAAK4wN,YAAcI,EAAQlpH,CAE5B,GAAC,CAAA7hG,IAAA,eAAApG,MAED,SAAc+rG,EAAIC,EAAI15F,EAAG0C,GAuBxB,IArBA,IAAMoJ,EAASje,KAAK0rG,aACnBpkE,EAAStnC,KAAKwrG,aACd1D,EAAS9nG,KAAK2rG,UAEd+zG,EAAK9zG,EAAK9D,EAASupH,EAAK3R,EAAK53G,EAC7BwpH,EAAKtxN,KAAK0wN,YAAca,EAAKvxN,KAAK4wN,YAClCY,EAAKxxN,KAAKywN,YAAagB,EAAKzxN,KAAK2wN,YAEjCl+M,GAAMN,EAAI05F,IAASh3F,EAAKg3F,GACxBG,EAAKv5F,EAAIA,EACTw5F,EAAMD,EAAKv5F,EAINi/M,GAAOF,EAAKvlH,EAAM,EAAIulH,EAAKxlH,EAAKwlH,EAAK/+M,EACrC25F,GAAO,EAAIolH,GAAOvlH,IAAU,IAAM,EAAIulH,GAAOxlH,IAAS,GAAMwlH,GAAO/+M,EAAI,EACvEsJ,IAAS,EAAI01M,GAAOxlH,GAAQ,IAAMwlH,GAAOzlH,EAAK,GAAMv5F,EACpDk/M,EAAKF,EAAKxlH,EAAMwlH,EAAKzlH,EAIjBpoG,EAAI,EAAGA,IAAMkkG,IAAWlkG,EAEjCqa,EAAQra,GACN8tN,EAAKpqL,EAAQgqL,EAAK1tN,GAClBwoG,EAAK9kE,EAAQ+pL,EAAKztN,GAClBmY,EAAKurB,EAAQo4K,EAAK97M,GAClB+tN,EAAKrqL,EAAQiqL,EAAK3tN,GAIrB,OAAOqa,CAER,KAACqyM,CAAA,CAtIoB,CAAS9jH,IA0IzBolH,GAAiB,SAAAC,IAAAxpN,EAAAA,EAAAA,GAAAupN,EAAAC,GAAA,IAAAC,GAAAvpN,EAAAA,EAAAA,GAAAqpN,GAEtB,SAAAA,EAAarmH,EAAoBC,EAAcC,EAAYC,GAAe,OAAAhjG,EAAAA,EAAAA,GAAA,KAAAkpN,GAAAE,EAAA1yN,KAAA,KAElEmsG,EAAoBC,EAAcC,EAAYC,EAEtD,CAwBC,OAxBA/gG,EAAAA,EAAAA,GAAAinN,EAAA,EAAA3rN,IAAA,eAAApG,MAED,SAAc+rG,EAAIC,EAAI15F,EAAG0C,GAYxB,IAVA,IAAMoJ,EAASje,KAAK0rG,aACnBpkE,EAAStnC,KAAKwrG,aACd1D,EAAS9nG,KAAK2rG,UAEdO,EAAUN,EAAK9D,EACfqE,EAAUD,EAAUpE,EAEpBiqH,GAAY5/M,EAAI05F,IAASh3F,EAAKg3F,GAC9BmmH,EAAU,EAAID,EAELnuN,EAAI,EAAGA,IAAMkkG,IAAWlkG,EAEjCqa,EAAQra,GACN0jC,EAAQ6kE,EAAUvoG,GAAMouN,EACxB1qL,EAAQ4kE,EAAUtoG,GAAMmuN,EAI3B,OAAO9zM,CAER,KAAC2zM,CAAA,CA9BqB,CAASplH,IAwC1BylH,GAAmB,SAAAC,IAAA7pN,EAAAA,EAAAA,GAAA4pN,EAAAC,GAAA,IAAAC,GAAA5pN,EAAAA,EAAAA,GAAA0pN,GAExB,SAAAA,EAAa1mH,EAAoBC,EAAcC,EAAYC,GAAe,OAAAhjG,EAAAA,EAAAA,GAAA,KAAAupN,GAAAE,EAAA/yN,KAAA,KAElEmsG,EAAoBC,EAAcC,EAAYC,EAEtD,CAMC,OANA/gG,EAAAA,EAAAA,GAAAsnN,EAAA,EAAAhsN,IAAA,eAAApG,MAED,SAAc+rG,GAEb,OAAO5rG,KAAKiwN,iBAAkBrkH,EAAK,EAEpC,KAACqmH,CAAA,CAZuB,CAASzlH,IAgB5B4lH,GAAa,WAElB,SAAAA,EAAajyN,EAAM89G,EAAO32E,EAAQq2E,GAEjC,IAFiDj1G,EAAAA,EAAAA,GAAA,KAAA0pN,QAEnCjxN,IAAThB,EAAqB,MAAM,IAAIuC,MAAO,gDAC3C,QAAevB,IAAV88G,GAAwC,IAAjBA,EAAM17G,OAAe,MAAM,IAAIG,MAAO,oDAAsDvC,GAExHH,KAAKG,KAAOA,EAEZH,KAAKi+G,MAAQ6uG,GAAc7uG,EAAOj+G,KAAKqyN,gBACvCryN,KAAKsnC,OAASwlL,GAAcxlL,EAAQtnC,KAAKsyN,iBAEzCtyN,KAAKuyN,iBAAkB50G,GAAiB39G,KAAKwyN,qBAE9C,CAyCC,OAtCD7nN,EAAAA,EAAAA,GAAAynN,EAAA,EAAAnsN,IAAA,mCAAApG,MAwCA,SAAkCoe,GAEjC,OAAO,IAAIg0M,GAAqBjyN,KAAKi+G,MAAOj+G,KAAKsnC,OAAQtnC,KAAKk+G,eAAgBjgG,EAE/E,GAAC,CAAAhY,IAAA,iCAAApG,MAED,SAAgCoe,GAE/B,OAAO,IAAI2zM,GAAmB5xN,KAAKi+G,MAAOj+G,KAAKsnC,OAAQtnC,KAAKk+G,eAAgBjgG,EAE7E,GAAC,CAAAhY,IAAA,iCAAApG,MAED,SAAgCoe,GAE/B,OAAO,IAAIqyM,GAAkBtwN,KAAKi+G,MAAOj+G,KAAKsnC,OAAQtnC,KAAKk+G,eAAgBjgG,EAE5E,GAAC,CAAAhY,IAAA,mBAAApG,MAED,SAAkB89G,GAEjB,IAAI80G,EAEJ,OAAS90G,GAER,KAAK1N,GAEJwiH,EAAgBzyN,KAAK0yN,iCAErB,MAED,KAAK3iH,GAEJ0iH,EAAgBzyN,KAAK2yN,+BAErB,MAED,KAAKhoG,GAEJ8nG,EAAgBzyN,KAAK4yN,+BAMvB,QAAuBzxN,IAAlBsxN,EAA8B,CAElC,IAAMxtN,EAAU,iCACfjF,KAAKyuN,cAAgB,yBAA2BzuN,KAAKG,KAEtD,QAAgCgB,IAA3BnB,KAAKg+G,kBAAkC,CAG3C,GAAKL,IAAkB39G,KAAKwyN,qBAM3B,MAAM,IAAI9vN,MAAOuC,GAJjBjF,KAAKuyN,iBAAkBvyN,KAAKwyN,qBAQ9B,CAGA,OADA3vN,QAAQC,KAAM,uBAAwBmC,GAC/BjF,IAER,CAIA,OAFAA,KAAKg+G,kBAAoBy0G,EAElBzyN,IAER,GAAC,CAAAiG,IAAA,mBAAApG,MAED,WAEC,OAASG,KAAKg+G,mBAEb,KAAKh+G,KAAK0yN,iCAET,OAAOziH,GAER,KAAKjwG,KAAK2yN,+BAET,OAAO5iH,GAER,KAAK/vG,KAAK4yN,+BAET,OAAOjoG,GAIV,GAAC,CAAA1kH,IAAA,eAAApG,MAED,WAEC,OAAOG,KAAKsnC,OAAO/kC,OAASvC,KAAKi+G,MAAM17G,MAExC,GAEA,CAAA0D,IAAA,QAAApG,MACA,SAAOgzN,GAEN,GAAoB,IAAfA,EAIJ,IAFA,IAAM50G,EAAQj+G,KAAKi+G,MAETr6G,EAAI,EAAGI,EAAIi6G,EAAM17G,OAAQqB,IAAMI,IAAMJ,EAE9Cq6G,EAAOr6G,IAAOivN,EAMhB,OAAO7yN,IAER,GAEA,CAAAiG,IAAA,QAAApG,MACA,SAAOizN,GAEN,GAAmB,IAAdA,EAIJ,IAFA,IAAM70G,EAAQj+G,KAAKi+G,MAETr6G,EAAI,EAAGI,EAAIi6G,EAAM17G,OAAQqB,IAAMI,IAAMJ,EAE9Cq6G,EAAOr6G,IAAOkvN,EAMhB,OAAO9yN,IAER,GAGA,CAAAiG,IAAA,OAAApG,MACA,SAAM+5F,EAAWm5H,GAQhB,IANA,IAAM90G,EAAQj+G,KAAKi+G,MAClB+0G,EAAQ/0G,EAAM17G,OAEX2V,EAAO,EACVuZ,EAAKuhM,EAAQ,EAEN96M,IAAS86M,GAAS/0G,EAAO/lG,GAAS0hF,KAEtC1hF,EAIJ,MAAiB,IAATuZ,GAAcwsF,EAAOxsF,GAAOshM,KAEhCthM,EAMJ,KAFGA,EAEW,IAATvZ,GAAcuZ,IAAOuhM,EAAQ,CAG5B96M,GAAQuZ,IAGZvZ,GADAuZ,EAAKrd,KAAKuC,IAAK8a,EAAI,IACP,GAIb,IAAMq2E,EAAS9nG,KAAKk+G,eACpBl+G,KAAKi+G,MAAQ2uG,GAAY3uG,EAAO/lG,EAAMuZ,GACtCzxB,KAAKsnC,OAASslL,GAAY5sN,KAAKsnC,OAAQpvB,EAAO4vF,EAAQr2E,EAAKq2E,EAE5D,CAEA,OAAO9nG,IAER,GAEA,CAAAiG,IAAA,WAAApG,MACA,WAEC,IAAIoqC,GAAQ,EAEN0hE,EAAY3rG,KAAKk+G,eAClBvS,EAAYv3F,KAAKi5B,MAAOs+D,KAAgB,IAE5C9oG,QAAQkC,MAAO,oDAAqD/E,MACpEiqC,GAAQ,GAIT,IAAMg0E,EAAQj+G,KAAKi+G,MAClB32E,EAAStnC,KAAKsnC,OAEd0rL,EAAQ/0G,EAAM17G,OAEA,IAAVywN,IAEJnwN,QAAQkC,MAAO,uCAAwC/E,MACvDiqC,GAAQ,GAMT,IAFA,IAAIgpL,EAAW,KAELrvN,EAAI,EAAGA,IAAMovN,EAAOpvN,IAAO,CAEpC,IAAMsvN,EAAWj1G,EAAOr6G,GAExB,GAAyB,kBAAbsvN,GAAyBtzN,MAAOszN,GAAa,CAExDrwN,QAAQkC,MAAO,mDAAoD/E,KAAM4D,EAAGsvN,GAC5EjpL,GAAQ,EACR,KAED,CAEA,GAAkB,OAAbgpL,GAAqBA,EAAWC,EAAW,CAE/CrwN,QAAQkC,MAAO,0CAA2C/E,KAAM4D,EAAGsvN,EAAUD,GAC7EhpL,GAAQ,EACR,KAED,CAEAgpL,EAAWC,CAEZ,CAEA,QAAgB/xN,IAAXmmC,GAECulL,GAAcvlL,GAElB,IAAM,IAAI1jC,EAAI,EAAGI,EAAIsjC,EAAO/kC,OAAQqB,IAAMI,IAAMJ,EAAI,CAEnD,IAAM/D,EAAQynC,EAAQ1jC,GAEtB,GAAKhE,MAAOC,GAAU,CAErBgD,QAAQkC,MAAO,oDAAqD/E,KAAM4D,EAAG/D,GAC7EoqC,GAAQ,EACR,KAED,CAED,CAMF,OAAOA,CAER,GAGA,CAAAhkC,IAAA,WAAApG,MACA,WAaC,IAVA,IAAMo+G,EAAQ2uG,GAAY5sN,KAAKi+G,OAC9B32E,EAASslL,GAAY5sN,KAAKsnC,QAC1BwgE,EAAS9nG,KAAKk+G,eAEdi1G,EAAsBnzN,KAAKozN,qBAAuBzoG,GAElD08C,EAAYppD,EAAM17G,OAAS,EAExB8wN,EAAa,EAEPzvN,EAAI,EAAGA,EAAIyjK,IAAczjK,EAAI,CAEtC,IAAI0vN,GAAO,EAEL9mM,EAAOyxF,EAAOr6G,GAKpB,GAAK4oB,IAJYyxF,EAAOr6G,EAAI,KAIM,IAANA,GAAW4oB,IAASyxF,EAAO,IAEtD,GAAOk1G,EAwBNG,GAAO,OAhBP,IAJA,IAAM1sM,EAAShjB,EAAIkkG,EAClByrH,EAAU3sM,EAASkhF,EACnB0rH,EAAU5sM,EAASkhF,EAEVz1F,EAAI,EAAGA,IAAMy1F,IAAWz1F,EAAI,CAErC,IAAMxS,EAAQynC,EAAQ1gB,EAASvU,GAE/B,GAAKxS,IAAUynC,EAAQisL,EAAUlhN,IAChCxS,IAAUynC,EAAQksL,EAAUnhN,GAAM,CAElCihN,GAAO,EACP,KAED,CAED,CAYF,GAAKA,EAAO,CAEX,GAAK1vN,IAAMyvN,EAAa,CAEvBp1G,EAAOo1G,GAAep1G,EAAOr6G,GAK7B,IAHA,IAAM6vN,EAAa7vN,EAAIkkG,EACtB4rH,EAAcL,EAAavrH,EAElBz1F,EAAI,EAAGA,IAAMy1F,IAAWz1F,EAEjCi1B,EAAQosL,EAAcrhN,GAAMi1B,EAAQmsL,EAAaphN,EAInD,GAEGghN,CAEJ,CAED,CAIA,GAAKhsD,EAAY,EAAI,CAEpBppD,EAAOo1G,GAAep1G,EAAOopD,GAE7B,IAAM,IAAIosD,EAAapsD,EAAYv/D,EAAQ4rH,EAAcL,EAAavrH,EAAQz1F,EAAI,EAAGA,IAAMy1F,IAAWz1F,EAErGi1B,EAAQosL,EAAcrhN,GAAMi1B,EAAQmsL,EAAaphN,KAI/CghN,CAEJ,CAcA,OAZKA,IAAep1G,EAAM17G,QAEzBvC,KAAKi+G,MAAQ2uG,GAAY3uG,EAAO,EAAGo1G,GACnCrzN,KAAKsnC,OAASslL,GAAYtlL,EAAQ,EAAG+rL,EAAavrH,KAIlD9nG,KAAKi+G,MAAQA,EACbj+G,KAAKsnC,OAASA,GAIRtnC,IAER,GAAC,CAAAiG,IAAA,QAAApG,MAED,WAEC,IAAMo+G,EAAQ2uG,GAAY5sN,KAAKi+G,MAAO,GAChC32E,EAASslL,GAAY5sN,KAAKsnC,OAAQ,GAGlCy2E,EAAQ,IAAIX,EADSp9G,KAAK4zD,aACM5zD,KAAKG,KAAM89G,EAAO32E,GAKxD,OAFAy2E,EAAMC,kBAAoBh+G,KAAKg+G,kBAExBD,CAER,IAAC,EAAA93G,IAAA,SAAApG,MAxaD,SAAek+G,GAEd,IAEI7f,EAFEy1H,EAAY51G,EAAMnqD,YAKxB,GAAK+/J,EAAU58F,SAAW/2H,KAAK+2H,OAE9B74B,EAAOy1H,EAAU58F,OAAQhZ,OAEnB,CAGN7f,EAAO,CAEN,KAAQ6f,EAAM59G,KACd,MAAS2sN,GAAc/uG,EAAME,MAAOt6G,OACpC,OAAUmpN,GAAc/uG,EAAMz2E,OAAQ3jC,QAIvC,IAAMg6G,EAAgBI,EAAMq1G,mBAEvBz1G,IAAkBI,EAAMy0G,uBAE5Bt0H,EAAKyf,cAAgBA,EAIvB,CAIA,OAFAzf,EAAKr8F,KAAOk8G,EAAM0wG,cAEXvwH,CAER,KAACk0H,CAAA,CAvDiB,GA+bnBA,GAAcjzN,UAAUkzN,eAAiB5nN,aACzC2nN,GAAcjzN,UAAUmzN,gBAAkB7nN,aAC1C2nN,GAAcjzN,UAAUqzN,qBAAuBziH,GAE/C,IAGM6jH,GAAoB,SAAAC,IAAAxrN,EAAAA,EAAAA,GAAAurN,EAAAC,GAAA,IAAAC,GAAAvrN,EAAAA,EAAAA,GAAAqrN,GAAA,SAAAA,IAAA,OAAAlrN,EAAAA,EAAAA,GAAA,KAAAkrN,GAAAE,EAAAh1N,MAAA,KAAA8B,UAAA,QAAA+J,EAAAA,EAAAA,GAAAipN,EAAA,EAASxB,IAEnCwB,GAAqBz0N,UAAUsvN,cAAgB,OAC/CmF,GAAqBz0N,UAAUmzN,gBAAkB3uN,MACjDiwN,GAAqBz0N,UAAUqzN,qBAAuBviH,GACtD2jH,GAAqBz0N,UAAUwzN,oCAAiCxxN,EAChEyyN,GAAqBz0N,UAAUyzN,oCAAiCzxN,EAEhE,IAGM4yN,GAAkB,SAAAC,IAAA3rN,EAAAA,EAAAA,GAAA0rN,EAAAC,GAAA,IAAAC,GAAA1rN,EAAAA,EAAAA,GAAAwrN,GAAA,SAAAA,IAAA,OAAArrN,EAAAA,EAAAA,GAAA,KAAAqrN,GAAAE,EAAAn1N,MAAA,KAAA8B,UAAA,QAAA+J,EAAAA,EAAAA,GAAAopN,EAAA,EAAS3B,IAEjC2B,GAAmB50N,UAAUsvN,cAAgB,QAE7C,IAGMlxG,GAAmB,SAAA22G,IAAA7rN,EAAAA,EAAAA,GAAAk1G,EAAA22G,GAAA,IAAAC,GAAA5rN,EAAAA,EAAAA,GAAAg1G,GAAA,SAAAA,IAAA,OAAA70G,EAAAA,EAAAA,GAAA,KAAA60G,GAAA42G,EAAAr1N,MAAA,KAAA8B,UAAA,QAAA+J,EAAAA,EAAAA,GAAA4yG,EAAA,EAAS60G,IAElC70G,GAAoBp+G,UAAUsvN,cAAgB,SAE9C,IAIM2F,GAA2B,SAAAC,IAAAhsN,EAAAA,EAAAA,GAAA+rN,EAAAC,GAAA,IAAAC,GAAA/rN,EAAAA,EAAAA,GAAA6rN,GAEhC,SAAAA,EAAa7oH,EAAoBC,EAAcC,EAAYC,GAAe,OAAAhjG,EAAAA,EAAAA,GAAA,KAAA0rN,GAAAE,EAAAl1N,KAAA,KAElEmsG,EAAoBC,EAAcC,EAAYC,EAEtD,CAoBC,OApBA/gG,EAAAA,EAAAA,GAAAypN,EAAA,EAAAnuN,IAAA,eAAApG,MAED,SAAc+rG,EAAIC,EAAI15F,EAAG0C,GAUxB,IARA,IAAMoJ,EAASje,KAAK0rG,aACnBpkE,EAAStnC,KAAKwrG,aACd1D,EAAS9nG,KAAK2rG,UAEdnnC,GAAUryD,EAAI05F,IAASh3F,EAAKg3F,GAEzBjlF,EAASglF,EAAK9D,EAER+2C,EAAMj4H,EAASkhF,EAAQlhF,IAAWi4H,EAAKj4H,GAAU,EAE1DyS,GAAWk7L,UAAWt2M,EAAQ,EAAGqpB,EAAQ1gB,EAASkhF,EAAQxgE,EAAQ1gB,EAAQ49C,GAI3E,OAAOvmD,CAER,KAACm2M,CAAA,CA1B+B,CAAS5nH,IAiCpCgR,GAAuB,SAAAg3G,IAAAnsN,EAAAA,EAAAA,GAAAm1G,EAAAg3G,GAAA,IAAAC,GAAAlsN,EAAAA,EAAAA,GAAAi1G,GAAA,SAAAA,IAAA,OAAA90G,EAAAA,EAAAA,GAAA,KAAA80G,GAAAi3G,EAAA31N,MAAA,KAAA8B,UAAA,CAM3B,OAN2B+J,EAAAA,EAAAA,GAAA6yG,EAAA,EAAAv3G,IAAA,iCAAApG,MAE5B,SAAgCoe,GAE/B,OAAO,IAAIm2M,GAA6Bp0N,KAAKi+G,MAAOj+G,KAAKsnC,OAAQtnC,KAAKk+G,eAAgBjgG,EAEvF,KAACu/F,CAAA,CAN2B,CAAS40G,IAUtC50G,GAAwBr+G,UAAUsvN,cAAgB,aAElDjxG,GAAwBr+G,UAAUqzN,qBAAuBziH,GACzDyN,GAAwBr+G,UAAUyzN,oCAAiCzxN,EAEnE,IAGMuzN,GAAmB,SAAAC,IAAAtsN,EAAAA,EAAAA,GAAAqsN,EAAAC,GAAA,IAAAC,GAAArsN,EAAAA,EAAAA,GAAAmsN,GAAA,SAAAA,IAAA,OAAAhsN,EAAAA,EAAAA,GAAA,KAAAgsN,GAAAE,EAAA91N,MAAA,KAAA8B,UAAA,QAAA+J,EAAAA,EAAAA,GAAA+pN,EAAA,EAAStC,IAElCsC,GAAoBv1N,UAAUsvN,cAAgB,SAC9CiG,GAAoBv1N,UAAUmzN,gBAAkB3uN,MAChD+wN,GAAoBv1N,UAAUqzN,qBAAuBviH,GACrDykH,GAAoBv1N,UAAUwzN,oCAAiCxxN,EAC/DuzN,GAAoBv1N,UAAUyzN,oCAAiCzxN,EAE/D,IAGMs8G,GAAmB,SAAAo3G,IAAAxsN,EAAAA,EAAAA,GAAAo1G,EAAAo3G,GAAA,IAAAC,GAAAvsN,EAAAA,EAAAA,GAAAk1G,GAAA,SAAAA,IAAA,OAAA/0G,EAAAA,EAAAA,GAAA,KAAA+0G,GAAAq3G,EAAAh2N,MAAA,KAAA8B,UAAA,QAAA+J,EAAAA,EAAAA,GAAA8yG,EAAA,EAAS20G,IAElC30G,GAAoBt+G,UAAUsvN,cAAgB,SAAS,IAEjDrwG,GAAa,WAElB,SAAAA,EAAaj+G,GAAqE,IAA/D40N,EAAQn0N,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,IAAK,EAAGu8G,EAAMv8G,UAAA2B,OAAA,EAAA3B,UAAA,QAAAO,EAAEquN,EAAS5uN,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAGmqH,IAAwBriH,EAAAA,EAAAA,GAAA,KAAA01G,GAE9Ep+G,KAAKG,KAAOA,EACZH,KAAKm9G,OAASA,EACdn9G,KAAK+0N,SAAWA,EAChB/0N,KAAKwvN,UAAYA,EAEjBxvN,KAAKgL,KAAOuiH,KAGPvtH,KAAK+0N,SAAW,GAEpB/0N,KAAKguN,eAIP,CA6RC,OA7RArjN,EAAAA,EAAAA,GAAAyzG,EAAA,EAAAn4G,IAAA,gBAAApG,MA+RD,WAKC,IAHA,IACIk1N,EAAW,EAELnxN,EAAI,EAAGI,EAHFhE,KAAKm9G,OAGQ56G,OAAQqB,IAAMI,IAAMJ,EAAI,CAEnD,IAAMm6G,EAAQ/9G,KAAKm9G,OAAQv5G,GAE3BmxN,EAAW3gN,KAAKuC,IAAKo+M,EAAUh3G,EAAME,MAAOF,EAAME,MAAM17G,OAAS,GAElE,CAIA,OAFAvC,KAAK+0N,SAAWA,EAET/0N,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,WAEC,IAAM,IAAI+D,EAAI,EAAGA,EAAI5D,KAAKm9G,OAAO56G,OAAQqB,IAExC5D,KAAKm9G,OAAQv5G,GAAIo1E,KAAM,EAAGh5E,KAAK+0N,UAIhC,OAAO/0N,IAER,GAAC,CAAAiG,IAAA,WAAApG,MAED,WAIC,IAFA,IAAIoqC,GAAQ,EAEFrmC,EAAI,EAAGA,EAAI5D,KAAKm9G,OAAO56G,OAAQqB,IAExCqmC,EAAQA,GAASjqC,KAAKm9G,OAAQv5G,GAAIoxN,WAInC,OAAO/qL,CAER,GAAC,CAAAhkC,IAAA,WAAApG,MAED,WAEC,IAAM,IAAI+D,EAAI,EAAGA,EAAI5D,KAAKm9G,OAAO56G,OAAQqB,IAExC5D,KAAKm9G,OAAQv5G,GAAIqxN,WAIlB,OAAOj1N,IAER,GAAC,CAAAiG,IAAA,QAAApG,MAED,WAIC,IAFA,IAAMs9G,EAAS,GAELv5G,EAAI,EAAGA,EAAI5D,KAAKm9G,OAAO56G,OAAQqB,IAExCu5G,EAAO76G,KAAMtC,KAAKm9G,OAAQv5G,GAAIwc,SAI/B,OAAO,IAAIpgB,KAAK4zD,YAAa5zD,KAAKG,KAAMH,KAAK+0N,SAAU53G,EAAQn9G,KAAKwvN,UAErE,GAAC,CAAAvpN,IAAA,SAAApG,MAED,WAEC,OAAOG,KAAK4zD,YAAYmjE,OAAQ/2H,KAEjC,IAAC,EAAAiG,IAAA,QAAApG,MAvWD,SAAcq+F,GAMb,IAJA,IAAMif,EAAS,GACd+3G,EAAah3H,EAAKif,OAClBg4G,EAAY,GAAQj3H,EAAK2vH,KAAO,GAEvBjqN,EAAI,EAAGI,EAAIkxN,EAAW3yN,OAAQqB,IAAMI,IAAMJ,EAEnDu5G,EAAO76G,KAAM8yN,GAAoBF,EAAYtxN,IAAM+iB,MAAOwuM,IAI3D,IAAMrH,EAAO,IAAI9tN,KAAMk+F,EAAK/9F,KAAM+9F,EAAK62H,SAAU53G,EAAQjf,EAAKsxH,WAG9D,OAFA1B,EAAK9iN,KAAOkzF,EAAKlzF,KAEV8iN,CAER,GAAC,CAAA7nN,IAAA,SAAApG,MAED,SAAeiuN,GAed,IAbA,IAAM3wG,EAAS,GACdk4G,EAAavH,EAAK3wG,OAEbjf,EAAO,CAEZ,KAAQ4vH,EAAK3tN,KACb,SAAY2tN,EAAKiH,SACjB,OAAU53G,EACV,KAAQ2wG,EAAK9iN,KACb,UAAa8iN,EAAK0B,WAIT5rN,EAAI,EAAGI,EAAIqxN,EAAW9yN,OAAQqB,IAAMI,IAAMJ,EAEnDu5G,EAAO76G,KAAM8vN,GAAcr7F,OAAQs+F,EAAYzxN,KAIhD,OAAOs6F,CAER,GAAC,CAAAj4F,IAAA,gCAAApG,MAED,SAAsCM,EAAMm1N,EAAqBzH,EAAK0H,GAKrE,IAHA,IAAMC,EAAkBF,EAAoB/yN,OACtC46G,EAAS,GAELv5G,EAAI,EAAGA,EAAI4xN,EAAiB5xN,IAAO,CAE5C,IAAIq6G,EAAQ,GACR32E,EAAS,GAEb22E,EAAM37G,MACHsB,EAAI4xN,EAAkB,GAAMA,EAC9B5xN,GACEA,EAAI,GAAM4xN,GAEbluL,EAAOhlC,KAAM,EAAG,EAAG,GAEnB,IAAM4Y,EAAQ+xM,GAAkBhvG,GAChCA,EAAQivG,GAAajvG,EAAO,EAAG/iG,GAC/BosB,EAAS4lL,GAAa5lL,EAAQ,EAAGpsB,GAI1Bq6M,GAAyB,IAAft3G,EAAO,KAEvBA,EAAM37G,KAAMkzN,GACZluL,EAAOhlC,KAAMglC,EAAQ,KAItB61E,EAAO76G,KACN,IAAIi7G,GACH,0BAA4B+3G,EAAqB1xN,GAAIzD,KAAO,IAC5D89G,EAAO32E,GACN3gB,MAAO,EAAMknM,GAEjB,CAEA,OAAO,IAAI7tN,KAAMG,GAAQ,EAAGg9G,EAE7B,GAAC,CAAAl3G,IAAA,aAAApG,MAED,SAAmB41N,EAAmBt1N,GAErC,IAAIu1N,EAAYD,EAEhB,IAAO9xN,MAAM0sC,QAASolL,GAAsB,CAE3C,IAAM/1J,EAAI+1J,EACVC,EAAYh2J,EAAE7xB,UAAY6xB,EAAE7xB,SAASglE,YAAcnzC,EAAEmzC,UAEtD,CAEA,IAAM,IAAIjvG,EAAI,EAAGA,EAAI8xN,EAAUnzN,OAAQqB,IAEtC,GAAK8xN,EAAW9xN,GAAIzD,OAASA,EAE5B,OAAOu1N,EAAW9xN,GAMpB,OAAO,IAER,GAAC,CAAAqC,IAAA,sCAAApG,MAED,SAA4CugK,EAAcytD,EAAK0H,GAU9D,IARA,IAAMI,EAA0B,CAAC,EAI3BC,EAAU,qBAINhyN,EAAI,EAAG8sG,EAAK0vD,EAAa79J,OAAQqB,EAAI8sG,EAAI9sG,IAAO,CAEzD,IAAM28J,EAAcH,EAAcx8J,GAC5BiyN,EAAQt1D,EAAYpgK,KAAKwpC,MAAOisL,GAEtC,GAAKC,GAASA,EAAMtzN,OAAS,EAAI,CAEhC,IAAMpC,EAAO01N,EAAO,GAEhBC,EAAwBH,EAAyBx1N,GAE9C21N,IAENH,EAAyBx1N,GAAS21N,EAAwB,IAI3DA,EAAsBxzN,KAAMi+J,EAE7B,CAED,CAEA,IAAMw1D,EAAQ,GAEd,IAAM,IAAM51N,KAAQw1N,EAEnBI,EAAMzzN,KAAMtC,KAAKg2N,8BAA+B71N,EAAMw1N,EAAyBx1N,GAAQ0tN,EAAK0H,IAI7F,OAAOQ,CAER,GAEA,CAAA9vN,IAAA,iBAAApG,MACA,SAAuB2pI,EAAWttB,GAEjC,IAAOstB,EAGN,OADA3mI,QAAQkC,MAAO,yDACR,KAoCR,IAhCA,IAAMkxN,EAAmB,SAAWtC,EAAWuC,EAAWC,EAAeC,EAAcC,GAGtF,GAA8B,IAAzBF,EAAc5zN,OAAe,CAEjC,IAAM07G,EAAQ,GACR32E,EAAS,GAEf+lL,GAAa8I,EAAel4G,EAAO32E,EAAQ8uL,GAGrB,IAAjBn4G,EAAM17G,QAEV8zN,EAAW/zN,KAAM,IAAIqxN,EAAWuC,EAAWj4G,EAAO32E,GAIpD,CAED,EAEM61E,EAAS,GAETm5G,EAAW9sF,EAAUrpI,MAAQ,UAC7B0tN,EAAMrkF,EAAUqkF,KAAO,GACvB2B,EAAYhmF,EAAUgmF,UAGxBuF,EAAWvrF,EAAUjnI,SAAY,EAE/Bg0N,EAAkB/sF,EAAUgtF,WAAa,GAErCj/M,EAAI,EAAGA,EAAIg/M,EAAgBh0N,OAAQgV,IAAO,CAEnD,IAAM4+M,EAAgBI,EAAiBh/M,GAAIrR,KAG3C,GAAOiwN,GAA0C,IAAzBA,EAAc5zN,OAGtC,GAAK4zN,EAAe,GAAI/1D,aAAe,CAGtC,IAAMq2D,EAAmB,CAAC,EAEtB/jN,OAAC,EAEL,IAAMA,EAAI,EAAGA,EAAIyjN,EAAc5zN,OAAQmQ,IAEtC,GAAKyjN,EAAezjN,GAAI0tJ,aAEvB,IAAM,IAAIr+J,EAAI,EAAGA,EAAIo0N,EAAezjN,GAAI0tJ,aAAa79J,OAAQR,IAE5D00N,EAAkBN,EAAezjN,GAAI0tJ,aAAcr+J,KAAU,EAWhE,IAAM,IAAM20N,KAAmBD,EAAmB,CAKjD,IAHA,IAAMx4G,EAAQ,GACR32E,EAAS,GAELvlC,EAAI,EAAGA,IAAMo0N,EAAezjN,GAAI0tJ,aAAa79J,SAAWR,EAAI,CAErE,IAAM40N,EAAeR,EAAezjN,GAEpCurG,EAAM37G,KAAMq0N,EAAanqM,MACzB8a,EAAOhlC,KAAQq0N,EAAap2D,cAAgBm2D,EAAoB,EAAI,EAErE,CAEAv5G,EAAO76G,KAAM,IAAIi7G,GAAqB,yBAA2Bm5G,EAAkB,IAAKz4G,EAAO32E,GAEhG,CAEAytL,EAAW0B,EAAiBl0N,OAASsrN,CAEtC,KAAO,CAIN,IAAM+I,EAAW,UAAY16G,EAAO3kG,GAAIpX,KAAO,IAE/C81N,EACCx4G,GAAqBm5G,EAAW,YAChCT,EAAe,MAAOh5G,GAEvB84G,EACCz4G,GAAyBo5G,EAAW,cACpCT,EAAe,MAAOh5G,GAEvB84G,EACCx4G,GAAqBm5G,EAAW,SAChCT,EAAe,MAAOh5G,EAExB,CAED,CAEA,OAAuB,IAAlBA,EAAO56G,OAEJ,KAIK,IAAIvC,KAAMs2N,EAAUvB,EAAU53G,EAAQqyG,EAIpD,KAACpxG,CAAA,CA/SiB,GA0anB,SAASg3G,GAAoBl3H,GAE5B,QAAmB/8F,IAAd+8F,EAAKr8F,KAET,MAAM,IAAIa,MAAO,4DAIlB,IAAMixN,EAlDP,SAAuCkD,GAEtC,OAASA,EAASzlI,eAEjB,IAAK,SACL,IAAK,SACL,IAAK,QACL,IAAK,SACL,IAAK,UAEJ,OAAOmsB,GAER,IAAK,SACL,IAAK,UACL,IAAK,UACL,IAAK,UAEJ,OAAOE,GAER,IAAK,QAEJ,OAAOs2G,GAER,IAAK,aAEJ,OAAOv2G,GAER,IAAK,OACL,IAAK,UAEJ,OAAOo2G,GAER,IAAK,SAEJ,OAAOc,GAIT,MAAM,IAAIhyN,MAAO,8CAAgDm0N,EAElE,CAUmBC,CAA8B54H,EAAKr8F,MAErD,QAAoBV,IAAf+8F,EAAK+f,MAAsB,CAE/B,IAAMA,EAAQ,GAAI32E,EAAS,GAE3B+lL,GAAanvH,EAAKh4F,KAAM+3G,EAAO32E,EAAQ,SAEvC42D,EAAK+f,MAAQA,EACb/f,EAAK52D,OAASA,CAEf,CAGA,YAAyBnmC,IAApBwyN,EAAU31H,MAEP21H,EAAU31H,MAAOE,GAKjB,IAAIy1H,EAAWz1H,EAAK/9F,KAAM+9F,EAAK+f,MAAO/f,EAAK52D,OAAQ42D,EAAKyf,cAIjE,CAEA,IA6iHItxC,GA7iHE0qJ,GAAQ,CAEbn6K,SAAS,EAET9M,MAAO,CAAC,EAERhoB,IAAK,SAAW7hB,EAAK+wN,IAEE,IAAjBh3N,KAAK48C,UAIV58C,KAAK8vC,MAAO7pC,GAAQ+wN,EAErB,EAEAxyN,IAAK,SAAWyB,GAEf,IAAsB,IAAjBjG,KAAK48C,QAIV,OAAO58C,KAAK8vC,MAAO7pC,EAEpB,EAEA26B,OAAQ,SAAW36B,UAEXjG,KAAK8vC,MAAO7pC,EAEpB,EAEAi3C,MAAO,WAENl9C,KAAK8vC,MAAQ,CAAC,CAEf,GAIKmnL,IAActsN,EAAAA,EAAAA,IAEnB,SAAAssN,EAAarrL,EAAQC,EAAYC,IAAUpjC,EAAAA,EAAAA,GAAA,KAAAuuN,GAE1C,IAAMv3K,EAAQ1/C,KAEVk3N,GAAY,EACZC,EAAc,EACdC,EAAa,EACbC,OAAcl2N,EACZgwD,EAAW,GAKjBnxD,KAAK6pD,aAAU1oD,EACfnB,KAAK4rC,OAASA,EACd5rC,KAAK6rC,WAAaA,EAClB7rC,KAAK8rC,QAAUA,EAEf9rC,KAAKs9F,UAAY,SAAWv1F,GAE3BqvN,KAEmB,IAAdF,QAEmB/1N,IAAlBu+C,EAAMmK,SAEVnK,EAAMmK,QAAS9hD,EAAKovN,EAAaC,GAMnCF,GAAY,CAEb,EAEAl3N,KAAKy9F,QAAU,SAAW11F,GAEzBovN,SAE0Bh2N,IAArBu+C,EAAM7T,YAEV6T,EAAM7T,WAAY9jC,EAAKovN,EAAaC,GAIhCD,IAAgBC,IAEpBF,GAAY,OAEU/1N,IAAjBu+C,EAAM9T,QAEV8T,EAAM9T,SAMT,EAEA5rC,KAAKw9F,UAAY,SAAWz1F,QAEJ5G,IAAlBu+C,EAAM5T,SAEV4T,EAAM5T,QAAS/jC,EAIjB,EAEA/H,KAAK20G,WAAa,SAAW5sG,GAE5B,OAAKsvN,EAEGA,EAAatvN,GAIdA,CAER,EAEA/H,KAAKs3N,eAAiB,SAAWpsH,GAIhC,OAFAmsH,EAAcnsH,EAEPlrG,IAER,EAEAA,KAAKu3N,WAAa,SAAWC,EAAOlnL,GAInC,OAFA6gB,EAAS7uD,KAAMk1N,EAAOlnL,GAEftwC,IAER,EAEAA,KAAKy3N,cAAgB,SAAWD,GAE/B,IAAM5xN,EAAQurD,EAAS5pD,QAASiwN,GAQhC,OANiB,IAAZ5xN,GAEJurD,EAASr4C,OAAQlT,EAAO,GAIlB5F,IAER,EAEAA,KAAKgnG,WAAa,SAAWgwH,GAE5B,IAAM,IAAIpzN,EAAI,EAAGwS,EAAI+6C,EAAS5uD,OAAQqB,EAAIwS,EAAGxS,GAAK,EAAI,CAErD,IAAM4zN,EAAQrmK,EAAUvtD,GAClB0sC,EAAS6gB,EAAUvtD,EAAI,GAI7B,GAFK4zN,EAAME,SAASF,EAAMnwD,UAAY,GAEjCmwD,EAAMl8M,KAAM07M,GAEhB,OAAO1mL,CAIT,CAEA,OAAO,IAER,CAED,IAIKqnL,GAAsC,IAAIV,GAE1Cn3H,GAAM,WAEX,SAAAA,EAAaz3D,IAAU3/B,EAAAA,EAAAA,GAAA,KAAAo3F,GAEtB9/F,KAAKqoC,aAAwBlnC,IAAZknC,EAA0BA,EAAUsvL,GAErD33N,KAAK8+F,YAAc,YACnB9+F,KAAK+9F,iBAAkB,EACvB/9F,KAAKgwC,KAAO,GACZhwC,KAAKm9F,aAAe,GACpBn9F,KAAK69F,cAAgB,CAAC,CAEvB,CAmDC,OAnDAlzF,EAAAA,EAAAA,GAAAm1F,EAAA,EAAA75F,IAAA,OAAApG,MAED,WAAgD,GAAC,CAAAoG,IAAA,YAAApG,MAEjD,SAAWkI,EAAK8jC,GAEf,IAAM6T,EAAQ1/C,KAEd,OAAO,IAAII,SAAS,SAAWC,EAASC,GAEvCo/C,EAAM0d,KAAMr1D,EAAK1H,EAASwrC,EAAYvrC,EAEvC,GAED,GAAC,CAAA2F,IAAA,QAAApG,MAED,WAAqB,GAAC,CAAAoG,IAAA,iBAAApG,MAEtB,SAAgBi/F,GAGf,OADA9+F,KAAK8+F,YAAcA,EACZ9+F,IAER,GAAC,CAAAiG,IAAA,qBAAApG,MAED,SAAoBA,GAGnB,OADAG,KAAK+9F,gBAAkBl+F,EAChBG,IAER,GAAC,CAAAiG,IAAA,UAAApG,MAED,SAASmwC,GAGR,OADAhwC,KAAKgwC,KAAOA,EACLhwC,IAER,GAAC,CAAAiG,IAAA,kBAAApG,MAED,SAAiBs9F,GAGhB,OADAn9F,KAAKm9F,aAAeA,EACbn9F,IAER,GAAC,CAAAiG,IAAA,mBAAApG,MAED,SAAkBg+F,GAGjB,OADA79F,KAAK69F,cAAgBA,EACd79F,IAER,KAAC8/F,CAAA,CA/DU,GAmEN83H,GAAU,CAAC,EAEXC,GAAS,SAAAC,IAAAzvN,EAAAA,EAAAA,GAAAwvN,EAAAC,GAAA,IAAAC,GAAAxvN,EAAAA,EAAAA,GAAAsvN,GAEd,SAAAA,EAAa5yN,EAAS+oD,GAAW,IAAAgqK,EAGP,OAHOtvN,EAAAA,EAAAA,GAAA,KAAAmvN,IAEhCG,EAAAD,EAAA34N,KAAA,KAAO6F,IACF+oD,SAAWA,EAASgqK,CAE1B,CAAC,OAAArtN,EAAAA,EAAAA,GAAAktN,EAAA,CAPa,CAOb5zG,EAPsBvhH,QAWlBg7F,GAAU,SAAA7B,IAAAxzF,EAAAA,EAAAA,GAAAq1F,EAAA7B,GAAA,IAAAo8H,GAAA1vN,EAAAA,EAAAA,GAAAm1F,GAEf,SAAAA,EAAar1D,GAAU,OAAA3/B,EAAAA,EAAAA,GAAA,KAAAg1F,GAAAu6H,EAAA74N,KAAA,KAEfipC,EAER,CA6PC,OA7PA19B,EAAAA,EAAAA,GAAA+yF,EAAA,EAAAz3F,IAAA,OAAApG,MAED,SAAMkI,EAAK6jC,EAAQC,EAAYC,GAAU,IAAAosL,EAAA,UAE3B/2N,IAAR4G,IAAoBA,EAAM,SAEZ5G,IAAdnB,KAAKgwC,OAAqBjoC,EAAM/H,KAAKgwC,KAAOjoC,GAEjDA,EAAM/H,KAAKqoC,QAAQssE,WAAY5sG,GAE/B,IAAMsyG,EAAS08G,GAAMvyN,IAAKuD,GAE1B,QAAgB5G,IAAXk5G,EAYJ,OAVAr6G,KAAKqoC,QAAQi1D,UAAWv1F,GAExBqmD,YAAY,WAENxiB,GAASA,EAAQyuE,GAEtB69G,EAAK7vL,QAAQo1D,QAAS11F,EAEvB,GAAG,GAEIsyG,EAMR,QAAwBl5G,IAAnBy2N,GAAS7vN,GAAd,CAeA6vN,GAAS7vN,GAAQ,GAEjB6vN,GAAS7vN,GAAMzF,KAAM,CACpBspC,OAAQA,EACRC,WAAYA,EACZC,QAASA,IAIV,IAAMqsL,EAAM,IAAIC,QAASrwN,EAAK,CAC7BswN,QAAS,IAAIC,QAASt4N,KAAK69F,eAC3B06H,YAAav4N,KAAK+9F,gBAAkB,UAAY,gBAK3C+Y,EAAW92G,KAAK82G,SAChB0hH,EAAex4N,KAAKw4N,aAG1BC,MAAON,GACLjqK,MAAM,SAAAF,GAEN,GAAyB,MAApBA,EAASm6G,QAAsC,IAApBn6G,EAASm6G,OAAe,CAavD,GARyB,IAApBn6G,EAASm6G,QAEbtlK,QAAQC,KAAM,6CAMgB,qBAAnB41N,qBAAoDv3N,IAAlB6sD,EAASxmD,WAAkDrG,IAA5B6sD,EAASxmD,KAAKmxN,UAE1F,OAAO3qK,EAIR,IAAM4qK,EAAYhB,GAAS7vN,GACrB8wN,EAAS7qK,EAASxmD,KAAKmxN,YACvBG,EAAgB9qK,EAASqqK,QAAQ7zN,IAAK,kBACtCu0N,EAAQD,EAAgBnuL,SAAUmuL,GAAkB,EACpDE,EAA6B,IAAVD,EACrBE,EAAS,EAGPC,EAAS,IAAIR,eAAgB,CAClCpxN,MAAK,SAAE2pL,IAIN,SAASkoC,IAERN,EAAOO,OAAOlrK,MAAM,SAAAnjD,GAAuB,IAAnBiC,EAAIjC,EAAJiC,KAAMnN,EAAKkL,EAALlL,MAE7B,GAAKmN,EAEJikL,EAAWooC,YAEL,CAENJ,GAAUp5N,EAAMmQ,WAGhB,IADA,IAAM+I,EAAQ,IAAIugN,cAAe,WAAY,CAAEN,iBAAAA,EAAkBC,OAAAA,EAAQF,MAAAA,IAC/Dn1N,EAAI,EAAG8sG,EAAKkoH,EAAUr2N,OAAQqB,EAAI8sG,EAAI9sG,IAAO,CAEtD,IAAMolB,EAAW4vM,EAAWh1N,GACvBolB,EAAS6iB,YAAa7iB,EAAS6iB,WAAY9yB,EAEjD,CAEAk4K,EAAWsoC,QAAS15N,GACpBs5N,GAED,CAED,GAED,CA7BAA,EA+BD,IAID,OAAO,IAAIK,SAAUN,EAEtB,CAEC,MAAM,IAAIrB,GAAU,cAADp4N,OAAgBuuD,EAASjmD,IAAG,qBAAAtI,OAAoBuuD,EAASm6G,OAAM,MAAA1oK,OAAKuuD,EAASyrK,YAAczrK,EAIhH,IACCE,MAAM,SAAAF,GAEN,OAASwqK,GAER,IAAK,cAEJ,OAAOxqK,EAAS0rK,cAEjB,IAAK,OAEJ,OAAO1rK,EAAStmD,OAEjB,IAAK,WAEJ,OAAOsmD,EAAS2rK,OACdzrK,MAAM,SAAAyrK,GAGN,OADe,IAAIC,WACLC,gBAAiBF,EAAM7iH,EAEtC,IAEF,IAAK,OAEJ,OAAO9oD,EAASkwC,OAEjB,QAEC,QAAkB/8F,IAAb21G,EAEJ,OAAO9oD,EAAS2rK,OAKhB,IACM3lG,EADK,0BACKA,KAAMld,GAChBgjH,EAAQ9lG,GAAQA,EAAM,GAAMA,EAAM,GAAI5iC,mBAAgBjwF,EACtDwmG,EAAU,IAAIoyH,YAAaD,GACjC,OAAO9rK,EAAS0rK,cAAcxrK,MAAM,SAAA9mC,GAAE,OAAIugF,EAAQqyH,OAAQ5yM,EAAI,IAMlE,IACC8mC,MAAM,SAAAvhD,GAINoqN,GAAMjvM,IAAK/f,EAAK4E,GAEhB,IAAMisN,EAAYhB,GAAS7vN,UACpB6vN,GAAS7vN,GAEhB,IAAM,IAAInE,EAAI,EAAG8sG,EAAKkoH,EAAUr2N,OAAQqB,EAAI8sG,EAAI9sG,IAAO,CAEtD,IAAMolB,EAAW4vM,EAAWh1N,GACvBolB,EAAS4iB,QAAS5iB,EAAS4iB,OAAQj/B,EAEzC,CAED,IACC0hD,OAAO,SAAA7tD,GAIP,IAAMo4N,EAAYhB,GAAS7vN,GAE3B,QAAmB5G,IAAdy3N,EAIJ,MADAV,EAAK7vL,QAAQm1D,UAAWz1F,GAClBvH,SAIAo3N,GAAS7vN,GAEhB,IAAM,IAAInE,EAAI,EAAG8sG,EAAKkoH,EAAUr2N,OAAQqB,EAAI8sG,EAAI9sG,IAAO,CAEtD,IAAMolB,EAAW4vM,EAAWh1N,GACvBolB,EAAS8iB,SAAU9iB,EAAS8iB,QAAStrC,EAE3C,CAEA03N,EAAK7vL,QAAQm1D,UAAWz1F,EAEzB,IACCkyN,SAAS,WAET/B,EAAK7vL,QAAQo1D,QAAS11F,EAEvB,IAED/H,KAAKqoC,QAAQi1D,UAAWv1F,EAnMxB,MAVC6vN,GAAS7vN,GAAMzF,KAAM,CAEpBspC,OAAQA,EACRC,WAAYA,EACZC,QAASA,GA2MZ,GAAC,CAAA7lC,IAAA,kBAAApG,MAED,SAAiBA,GAGhB,OADAG,KAAKw4N,aAAe34N,EACbG,IAER,GAAC,CAAAiG,IAAA,cAAApG,MAED,SAAaA,GAGZ,OADAG,KAAK82G,SAAWj3G,EACTG,IAER,KAAC09F,CAAA,CAnQc,CAASoC,IAuQnBo6H,GAAe,SAAAC,IAAA9xN,EAAAA,EAAAA,GAAA6xN,EAAAC,GAAA,IAAAC,GAAA7xN,EAAAA,EAAAA,GAAA2xN,GAEpB,SAAAA,EAAa7xL,GAAU,OAAA3/B,EAAAA,EAAAA,GAAA,KAAAwxN,GAAAE,EAAAh7N,KAAA,KAEfipC,EAER,CAkDC,OAlDA19B,EAAAA,EAAAA,GAAAuvN,EAAA,EAAAj0N,IAAA,OAAApG,MAED,SAAMkI,EAAK6jC,EAAQC,EAAYC,GAE9B,IAAM4T,EAAQ1/C,KAERswC,EAAS,IAAIotD,GAAY19F,KAAKqoC,SACpCiI,EAAOI,QAAS1wC,KAAKgwC,MACrBM,EAAOstD,iBAAkB59F,KAAK69F,eAC9BvtD,EAAOwtD,mBAAoB99F,KAAK+9F,iBAChCztD,EAAO8sB,KAAMr1D,GAAK,SAAW4xN,GAE5B,IAEC/tL,EAAQ8T,EAAMs+C,MAAOI,KAAKJ,MAAO27H,IAElC,CAAE,MAAQ1sN,GAEJ6+B,EAEJA,EAAS7+B,GAITpK,QAAQkC,MAAOkI,GAIhByyC,EAAMrX,QAAQm1D,UAAWz1F,EAE1B,CAED,GAAG8jC,EAAYC,EAEhB,GAAC,CAAA7lC,IAAA,QAAApG,MAED,SAAOq+F,GAIN,IAFA,IAAM2U,EAAa,GAETjvG,EAAI,EAAGA,EAAIs6F,EAAK37F,OAAQqB,IAAO,CAExC,IAAMkqN,EAAO1vG,GAAcpgB,MAAOE,EAAMt6F,IAExCivG,EAAWvwG,KAAMwrN,EAElB,CAEA,OAAOj7G,CAER,KAACqnH,CAAA,CAxDmB,CAASp6H,IAkExBu6H,GAAuB,SAAAC,IAAAjyN,EAAAA,EAAAA,GAAAgyN,EAAAC,GAAA,IAAAC,GAAAhyN,EAAAA,EAAAA,GAAA8xN,GAE5B,SAAAA,EAAahyL,GAAU,OAAA3/B,EAAAA,EAAAA,GAAA,KAAA2xN,GAAAE,EAAAn7N,KAAA,KAEfipC,EAER,CA+GC,OA/GA19B,EAAAA,EAAAA,GAAA0vN,EAAA,EAAAp0N,IAAA,OAAApG,MAED,SAAMkI,EAAK6jC,EAAQC,EAAYC,GAE9B,IAAM4T,EAAQ1/C,KAER6mG,EAAS,GAET56D,EAAU,IAAIkgK,GAEd77J,EAAS,IAAIotD,GAAY19F,KAAKqoC,SACpCiI,EAAOI,QAAS1wC,KAAKgwC,MACrBM,EAAOqtD,gBAAiB,eACxBrtD,EAAOstD,iBAAkB59F,KAAK69F,eAC9BvtD,EAAOwtD,mBAAoBp+C,EAAMq+C,iBAEjC,IAAIk7H,EAAS,EAEb,SAAS/xH,EAAatjG,GAErB0sC,EAAO8sB,KAAMr1D,EAAKnE,IAAK,SAAWwD,GAEjC,IAAMozN,EAAW96K,EAAMs+C,MAAO52F,GAAQ,GAEtCy/F,EAAQjjG,GAAM,CACb4mC,MAAOgwL,EAAShwL,MAChBC,OAAQ+vL,EAAS/vL,OACjBJ,OAAQmwL,EAASnwL,OACjBgsF,QAASmkG,EAASnkG,SAKH,KAFhB4iG,GAAU,KAIqB,IAAzBuB,EAASC,cAAoBxuL,EAAQI,UAAYC,IAEtDL,EAAQkB,MAAQ05D,EAChB56D,EAAQ5B,OAASmwL,EAASnwL,OAC1B4B,EAAQ5L,aAAc,EAEjBuL,GAASA,EAAQK,GAIxB,GAAGJ,EAAYC,EAEhB,CAEA,GAAKnoC,MAAM0sC,QAAStoC,GAEnB,IAAM,IAAInE,EAAI,EAAG8sG,EAAK3oG,EAAIxF,OAAQqB,EAAI8sG,IAAO9sG,EAE5CsjG,EAAatjG,QAQd0sC,EAAO8sB,KAAMr1D,GAAK,SAAWX,GAE5B,IAAMozN,EAAW96K,EAAMs+C,MAAO52F,GAAQ,GAEtC,GAAKozN,EAASE,UAAY,CAIzB,IAFA,IAAMz7M,EAAQu7M,EAASnkG,QAAQ9zH,OAASi4N,EAASC,YAEvCvtN,EAAI,EAAGA,EAAI+R,EAAO/R,IAAO,CAElC25F,EAAQ35F,GAAM,CAAEmpH,QAAS,IAEzB,IAAM,IAAIzyH,EAAI,EAAGA,EAAI42N,EAASC,YAAa72N,IAE1CijG,EAAQ35F,GAAImpH,QAAQ/zH,KAAMk4N,EAASnkG,QAASnpH,EAAIstN,EAASC,YAAc72N,IACvEijG,EAAQ35F,GAAIm9B,OAASmwL,EAASnwL,OAC9Bw8D,EAAQ35F,GAAIs9B,MAAQgwL,EAAShwL,MAC7Bq8D,EAAQ35F,GAAIu9B,OAAS+vL,EAAS/vL,MAIhC,CAEAwB,EAAQkB,MAAQ05D,CAEjB,MAEC56D,EAAQkB,MAAM3C,MAAQgwL,EAAShwL,MAC/ByB,EAAQkB,MAAM1C,OAAS+vL,EAAS/vL,OAChCwB,EAAQoqF,QAAUmkG,EAASnkG,QAIE,IAAzBmkG,EAASC,cAEbxuL,EAAQI,UAAYC,IAIrBL,EAAQ5B,OAASmwL,EAASnwL,OAC1B4B,EAAQ5L,aAAc,EAEjBuL,GAASA,EAAQK,EAEvB,GAAGJ,EAAYC,GAIhB,OAAOG,CAER,KAACouL,CAAA,CArH2B,CAASv6H,IAyHhC66H,GAAW,SAAAC,IAAAvyN,EAAAA,EAAAA,GAAAsyN,EAAAC,GAAA,IAAAC,GAAAtyN,EAAAA,EAAAA,GAAAoyN,GAEhB,SAAAA,EAAatyL,GAAU,OAAA3/B,EAAAA,EAAAA,GAAA,KAAAiyN,GAAAE,EAAAz7N,KAAA,KAEfipC,EAER,CA2EC,OA3EA19B,EAAAA,EAAAA,GAAAgwN,EAAA,EAAA10N,IAAA,OAAApG,MAED,SAAMkI,EAAK6jC,EAAQC,EAAYC,QAEX3qC,IAAdnB,KAAKgwC,OAAqBjoC,EAAM/H,KAAKgwC,KAAOjoC,GAEjDA,EAAM/H,KAAKqoC,QAAQssE,WAAY5sG,GAE/B,IAAM23C,EAAQ1/C,KAERq6G,EAAS08G,GAAMvyN,IAAKuD,GAE1B,QAAgB5G,IAAXk5G,EAYJ,OAVA36D,EAAMrX,QAAQi1D,UAAWv1F,GAEzBqmD,YAAY,WAENxiB,GAASA,EAAQyuE,GAEtB36D,EAAMrX,QAAQo1D,QAAS11F,EAExB,GAAG,GAEIsyG,EAIR,IAAMltE,EAAQmlF,GAAiB,OAE/B,SAASwoG,IAERC,IAEAhE,GAAMjvM,IAAK/f,EAAK/H,MAEX4rC,GAASA,EAAQ5rC,MAEtB0/C,EAAMrX,QAAQo1D,QAAS11F,EAExB,CAEA,SAASizN,EAAcjiN,GAEtBgiN,IAEKjvL,GAAUA,EAAS/yB,GAExB2mC,EAAMrX,QAAQm1D,UAAWz1F,GACzB23C,EAAMrX,QAAQo1D,QAAS11F,EAExB,CAEA,SAASgzN,IAER5tL,EAAM9oC,oBAAqB,OAAQy2N,GAAa,GAChD3tL,EAAM9oC,oBAAqB,QAAS22N,GAAc,EAEnD,CAeA,OAbA7tL,EAAMjpC,iBAAkB,OAAQ42N,GAAa,GAC7C3tL,EAAMjpC,iBAAkB,QAAS82N,GAAc,GAEpB,UAAtBjzN,EAAIpH,MAAO,EAAG,SAEQQ,IAArBnB,KAAK8+F,cAA4B3xD,EAAM2xD,YAAc9+F,KAAK8+F,aAIhEp/C,EAAMrX,QAAQi1D,UAAWv1F,GAEzBolC,EAAMi6D,IAAMr/F,EAELolC,CAER,KAACwtL,CAAA,CAjFe,CAAS76H,IAqFpBvvD,GAAiB,SAAA0qL,IAAA5yN,EAAAA,EAAAA,GAAAkoC,EAAA0qL,GAAA,IAAAC,GAAA3yN,EAAAA,EAAAA,GAAAgoC,GAEtB,SAAAA,EAAalI,GAAU,OAAA3/B,EAAAA,EAAAA,GAAA,KAAA6nC,GAAA2qL,EAAA97N,KAAA,KAEfipC,EAER,CAwCC,OAxCA19B,EAAAA,EAAAA,GAAA4lC,EAAA,EAAAtqC,IAAA,OAAApG,MAED,SAAMs7N,EAAMvvL,EAAQC,EAAYC,GAE/B,IAAMG,EAAU,IAAI0xG,GAEdrtG,EAAS,IAAIqqL,GAAa36N,KAAKqoC,SACrCiI,EAAOgiE,eAAgBtyG,KAAK8+F,aAC5BxuD,EAAOI,QAAS1wC,KAAKgwC,MAErB,IAAIipL,EAAS,EAEb,SAAS/xH,EAAatjG,GAErB0sC,EAAO8sB,KAAM+9J,EAAMv3N,IAAK,SAAWupC,GAElClB,EAAQ46D,OAAQjjG,GAAMupC,EAIN,MAFhB8rL,IAIChtL,EAAQ5L,aAAc,EAEjBuL,GAASA,EAAQK,GAIxB,QAAG9qC,EAAW2qC,EAEf,CAEA,IAAM,IAAIloC,EAAI,EAAGA,EAAIu3N,EAAK54N,SAAWqB,EAEpCsjG,EAAatjG,GAId,OAAOqoC,CAER,KAACsE,CAAA,CA9CqB,CAASuvD,IAwD1BpzD,GAAiB,SAAA0uL,IAAA/yN,EAAAA,EAAAA,GAAAqkC,EAAA0uL,GAAA,IAAAC,GAAA9yN,EAAAA,EAAAA,GAAAmkC,GAEtB,SAAAA,EAAarE,GAAU,OAAA3/B,EAAAA,EAAAA,GAAA,KAAAgkC,GAAA2uL,EAAAj8N,KAAA,KAEfipC,EAER,CA2FC,OA3FA19B,EAAAA,EAAAA,GAAA+hC,EAAA,EAAAzmC,IAAA,OAAApG,MAED,SAAMkI,EAAK6jC,EAAQC,EAAYC,GAE9B,IAAM4T,EAAQ1/C,KAERisC,EAAU,IAAIm7J,GAEd92J,EAAS,IAAIotD,GAAY19F,KAAKqoC,SAiFpC,OAhFAiI,EAAOqtD,gBAAiB,eACxBrtD,EAAOstD,iBAAkB59F,KAAK69F,eAC9BvtD,EAAOI,QAAS1wC,KAAKgwC,MACrBM,EAAOwtD,mBAAoBp+C,EAAMq+C,iBACjCztD,EAAO8sB,KAAMr1D,GAAK,SAAWX,GAE5B,IAAM8kC,EAAUwT,EAAMs+C,MAAO52F,GAEtB8kC,SAEgB/qC,IAAlB+qC,EAAQiB,MAEZlB,EAAQkB,MAAQjB,EAAQiB,WAEIhsC,IAAjB+qC,EAAQv/B,OAEnBs/B,EAAQkB,MAAM3C,MAAQ0B,EAAQ1B,MAC9ByB,EAAQkB,MAAM1C,OAASyB,EAAQzB,OAC/BwB,EAAQkB,MAAMxgC,KAAOu/B,EAAQv/B,MAI9Bs/B,EAAQwqE,WAA0Bt1G,IAAlB+qC,EAAQuqE,MAAsBvqE,EAAQuqE,MAAQpI,GAC9DpiE,EAAQyqE,WAA0Bv1G,IAAlB+qC,EAAQwqE,MAAsBxqE,EAAQwqE,MAAQrI,GAE9DpiE,EAAQM,eAAkCprC,IAAtB+qC,EAAQK,UAA0BL,EAAQK,UAAYD,GAC1EL,EAAQI,eAAkClrC,IAAtB+qC,EAAQG,UAA0BH,EAAQG,UAAYC,GAE1EL,EAAQo6D,gBAAoCllG,IAAvB+qC,EAAQm6D,WAA2Bn6D,EAAQm6D,WAAa,OAEnDllG,IAArB+qC,EAAQE,WAEZH,EAAQG,SAAWF,EAAQE,eAILjrC,IAAlB+qC,EAAQO,QAEZR,EAAQQ,MAAQP,EAAQO,YAIDtrC,IAAnB+qC,EAAQ7B,SAEZ4B,EAAQ5B,OAAS6B,EAAQ7B,aAIJlpC,IAAjB+qC,EAAQrqC,OAEZoqC,EAAQpqC,KAAOqqC,EAAQrqC,WAICV,IAApB+qC,EAAQmqF,UAEZpqF,EAAQoqF,QAAUnqF,EAAQmqF,QAC1BpqF,EAAQI,UAAY8hE,IAIQ,IAAxBjiE,EAAQuuL,cAEZxuL,EAAQI,UAAYC,SAIYnrC,IAA5B+qC,EAAQM,kBAEZP,EAAQO,gBAAkBN,EAAQM,iBAInCP,EAAQ5L,aAAc,EAEjBuL,GAASA,EAAQK,EAASC,GAEhC,GAAGL,EAAYC,GAGRG,CAER,KAACS,CAAA,CAjGqB,CAASozD,IAqG1BsS,GAAa,SAAAkpH,IAAAjzN,EAAAA,EAAAA,GAAA+pG,EAAAkpH,GAAA,IAAAC,GAAAhzN,EAAAA,EAAAA,GAAA6pG,GAElB,SAAAA,EAAa/pE,GAAU,OAAA3/B,EAAAA,EAAAA,GAAA,KAAA0pG,GAAAmpH,EAAAn8N,KAAA,KAEfipC,EAER,CAyBC,OAzBA19B,EAAAA,EAAAA,GAAAynG,EAAA,EAAAnsG,IAAA,OAAApG,MAED,SAAMkI,EAAK6jC,EAAQC,EAAYC,GAE9B,IAAMG,EAAU,IAAIirE,GAEd5mE,EAAS,IAAIqqL,GAAa36N,KAAKqoC,SAiBrC,OAhBAiI,EAAOgiE,eAAgBtyG,KAAK8+F,aAC5BxuD,EAAOI,QAAS1wC,KAAKgwC,MAErBM,EAAO8sB,KAAMr1D,GAAK,SAAWolC,GAE5BlB,EAAQkB,MAAQA,EAChBlB,EAAQ5L,aAAc,OAENl/B,IAAXyqC,GAEJA,EAAQK,EAIV,GAAGJ,EAAYC,GAERG,CAER,KAACmmE,CAAA,CA/BiB,CAAStS,IAmCtB07H,GAAK,SAAAC,IAAApzN,EAAAA,EAAAA,GAAAmzN,EAAAC,GAAA,IAAAC,GAAAnzN,EAAAA,EAAAA,GAAAizN,GAEV,SAAAA,EAAa35H,GAAuB,IAAA85H,EAAhBl5H,EAAS7hG,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EASJ,OATK8H,EAAAA,EAAAA,GAAA,KAAA8yN,IAEhCG,EAAAD,EAAAt8N,KAAA,OAEKupI,SAAU,EAEfgzF,EAAK95N,KAAO,QAEZ85N,EAAK95H,MAAQ,IAAIC,GAAOD,GACxB85H,EAAKl5H,UAAYA,EAAUk5H,CAE5B,CAqCC,OArCAhxN,EAAAA,EAAAA,GAAA6wN,EAAA,EAAAv1N,IAAA,UAAApG,MAED,WAEC,GAEA,CAAAoG,IAAA,OAAApG,MAED,SAAM8G,EAAQ+iI,GAOb,OALA39F,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAwvL,EAAAr8N,WAAA,aAAAC,KAAA,KAAYuH,EAAQ+iI,GAEpB1pI,KAAK6hG,MAAM59F,KAAM0C,EAAOk7F,OACxB7hG,KAAKyiG,UAAY97F,EAAO87F,UAEjBziG,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQ+1H,GAEP,IAAMjpH,GAAIo/B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAwvL,EAAAr8N,WAAA,eAAAC,KAAA,KAAiBw2H,GAc3B,OAZAjpH,EAAKqxB,OAAO6jE,MAAQ7hG,KAAK6hG,MAAMyyB,SAC/B3nH,EAAKqxB,OAAOykE,UAAYziG,KAAKyiG,eAEHthG,IAArBnB,KAAK8tJ,cAA4BnhJ,EAAKqxB,OAAO8vH,YAAc9tJ,KAAK8tJ,YAAYx5B,eAE1DnzH,IAAlBnB,KAAK8wB,WAAyBnkB,EAAKqxB,OAAOlN,SAAW9wB,KAAK8wB,eAC3C3vB,IAAfnB,KAAKkZ,QAAsBvM,EAAKqxB,OAAO9kB,MAAQlZ,KAAKkZ,YACrC/X,IAAfnB,KAAKuiG,QAAsB51F,EAAKqxB,OAAOukE,MAAQviG,KAAKuiG,YAClCphG,IAAlBnB,KAAKsiG,WAAyB31F,EAAKqxB,OAAOskE,SAAWtiG,KAAKsiG,eAE1CnhG,IAAhBnB,KAAKivJ,SAAuBtiJ,EAAKqxB,OAAOixH,OAASjvJ,KAAKivJ,OAAOl4B,UAE3DpqH,CAER,KAAC6uN,CAAA,CAlDS,CAASh/L,IAsDdo/L,GAAe,SAAAC,IAAAxzN,EAAAA,EAAAA,GAAAuzN,EAAAC,GAAA,IAAAC,GAAAvzN,EAAAA,EAAAA,GAAAqzN,GAEpB,SAAAA,EAAa/tE,EAAUC,EAAarrD,GAAY,IAAAs5H,EAWH,OAXGrzN,EAAAA,EAAAA,GAAA,KAAAkzN,IAE/CG,EAAAD,EAAA18N,KAAA,KAAOyuJ,EAAUprD,IAEZu0E,mBAAoB,EAEzB+kD,EAAKl6N,KAAO,kBAEZk6N,EAAKt2N,SAASxB,KAAMu4B,GAASorG,WAC7Bm0F,EAAKt9L,eAELs9L,EAAKjuE,YAAc,IAAIhsD,GAAOgsD,GAAciuE,CAE7C,CAUC,OAVApxN,EAAAA,EAAAA,GAAAixN,EAAA,EAAA31N,IAAA,OAAApG,MAED,SAAM8G,EAAQ+iI,GAMb,OAJA39F,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA4vL,EAAAz8N,WAAA,aAAAC,KAAA,KAAYuH,EAAQ+iI,GAEpB1pI,KAAK8tJ,YAAY7pJ,KAAM0C,EAAOmnJ,aAEvB9tJ,IAER,KAAC47N,CAAA,CAzBmB,CAASJ,IA6BxBQ,GAAoC,IAAIz/L,GACxC0/L,GAAsC,IAAI3/L,GAC1C4/L,GAA8B,IAAI5/L,GAElC6/L,GAAW,WAEhB,SAAAA,EAAapqL,IAASrpC,EAAAA,EAAAA,GAAA,KAAAyzN,GAErBn8N,KAAK+xC,OAASA,EAEd/xC,KAAKy2K,KAAO,EACZz2K,KAAK02K,WAAa,EAClB12K,KAAKqtB,OAAS,EACdrtB,KAAK85K,YAAc,EAEnB95K,KAAK22K,QAAU,IAAIvjI,GAAS,IAAK,KAEjCpzC,KAAKkgC,IAAM,KACXlgC,KAAK+5K,QAAU,KACf/5K,KAAK6Q,OAAS,IAAI0rB,GAElBv8B,KAAK+8C,YAAa,EAClB/8C,KAAKqgC,aAAc,EAEnBrgC,KAAK84K,SAAW,IAAI15B,GACpBp/I,KAAKo8N,cAAgB,IAAIhpL,GAAS,EAAG,GAErCpzC,KAAKq8N,eAAiB,EAEtBr8N,KAAKs8N,WAAa,CAEjB,IAAIriL,GAAS,EAAG,EAAG,EAAG,GAIxB,CAqGC,OArGAtvC,EAAAA,EAAAA,GAAAwxN,EAAA,EAAAl2N,IAAA,mBAAApG,MAED,WAEC,OAAOG,KAAKq8N,cAEb,GAAC,CAAAp2N,IAAA,aAAApG,MAED,WAEC,OAAOG,KAAK84K,QAEb,GAAC,CAAA7yK,IAAA,iBAAApG,MAED,SAAgBwhG,GAEf,IAAMo5E,EAAez6K,KAAK+xC,OACpBwqL,EAAev8N,KAAK6Q,OAE1BorN,GAAsBlhL,sBAAuBsmD,EAAMrmD,aACnDy/H,EAAah1K,SAASxB,KAAMg4N,IAE5BC,GAAcnhL,sBAAuBsmD,EAAMtiG,OAAOi8C,aAClDy/H,EAAal/H,OAAQ2gL,IACrBzhD,EAAaj/H,oBAEbwgL,GAAoB1qG,iBAAkBmpD,EAAah/H,iBAAkBg/H,EAAa9+H,oBAClF37C,KAAK84K,SAASooB,wBAAyB86B,IAEvCO,EAAa93N,IACZ,GAAK,EAAK,EAAK,GACf,EAAK,GAAK,EAAK,GACf,EAAK,EAAK,GAAK,GACf,EAAK,EAAK,EAAK,GAGhB83N,EAAa7gL,SAAUsgL,GAExB,GAAC,CAAA/1N,IAAA,cAAApG,MAED,SAAa28N,GAEZ,OAAOx8N,KAAKs8N,WAAYE,EAEzB,GAAC,CAAAv2N,IAAA,kBAAApG,MAED,WAEC,OAAOG,KAAKo8N,aAEb,GAAC,CAAAn2N,IAAA,UAAApG,MAED,WAEMG,KAAKkgC,KAETlgC,KAAKkgC,IAAIyiB,UAIL3iD,KAAK+5K,SAET/5K,KAAK+5K,QAAQp3H,SAIf,GAAC,CAAA18C,IAAA,OAAApG,MAED,SAAM8G,GASL,OAPA3G,KAAK+xC,OAASprC,EAAOorC,OAAO3xB,QAE5BpgB,KAAKy2K,KAAO9vK,EAAO8vK,KACnBz2K,KAAKqtB,OAAS1mB,EAAO0mB,OAErBrtB,KAAK22K,QAAQ1yK,KAAM0C,EAAOgwK,SAEnB32K,IAER,GAAC,CAAAiG,IAAA,QAAApG,MAED,WAEC,OAAO,IAAIG,KAAK4zD,aAAc3vD,KAAMjE,KAErC,GAAC,CAAAiG,IAAA,SAAApG,MAED,WAEC,IAAMm+B,EAAS,CAAC,EAUhB,OARmB,IAAdh+B,KAAKy2K,OAAaz4I,EAAOy4I,KAAOz2K,KAAKy2K,MACjB,IAApBz2K,KAAK02K,aAAmB14I,EAAO04I,WAAa12K,KAAK02K,YACjC,IAAhB12K,KAAKqtB,SAAe2Q,EAAO3Q,OAASrtB,KAAKqtB,QACtB,MAAnBrtB,KAAK22K,QAAQ3nK,GAAgC,MAAnBhP,KAAK22K,QAAQ1nK,IAAY+uB,EAAO24I,QAAU32K,KAAK22K,QAAQl5I,WAEtFO,EAAO+T,OAAS/xC,KAAK+xC,OAAOglF,QAAQ,GAAQ/4F,cACrCA,EAAO+T,OAAOlhC,OAEdmtB,CAER,KAACm+L,CAAA,CApIe,GAwIXM,GAAe,SAAAC,IAAAr0N,EAAAA,EAAAA,GAAAo0N,EAAAC,GAAA,IAAAC,GAAAp0N,EAAAA,EAAAA,GAAAk0N,GAEpB,SAAAA,IAAc,IAAAG,EAME,OANFl0N,EAAAA,EAAAA,GAAA,KAAA+zN,IAEbG,EAAAD,EAAAv9N,KAAA,KAAO,IAAIq7C,GAAmB,GAAI,EAAG,GAAK,OAErCoiL,mBAAoB,EAEzBD,EAAK5gF,MAAQ,EAAE4gF,CAEhB,CA+BC,OA/BAjyN,EAAAA,EAAAA,GAAA8xN,EAAA,EAAAx2N,IAAA,iBAAApG,MAED,SAAgBwhG,GAEf,IAAMtvD,EAAS/xC,KAAK+xC,OAEdyT,EAAgB,EAAV8nE,GAAcjsB,EAAMnoF,MAAQlZ,KAAKg8I,MACvCvxF,EAASzqD,KAAK22K,QAAQnsI,MAAQxqC,KAAK22K,QAAQlsI,OAC3C8G,EAAM8vD,EAAMvwE,UAAYihB,EAAOR,IAEhCiU,IAAQzT,EAAOyT,KAAOiF,IAAW1Y,EAAO0Y,QAAUlZ,IAAQQ,EAAOR,MAErEQ,EAAOyT,IAAMA,EACbzT,EAAO0Y,OAASA,EAChB1Y,EAAOR,IAAMA,EACbQ,EAAOsO,2BAIRtU,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAywL,EAAAt9N,WAAA,uBAAAC,KAAA,KAAsBiiG,EAEvB,GAAC,CAAAp7F,IAAA,OAAApG,MAED,SAAM8G,GAML,OAJAolC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAywL,EAAAt9N,WAAA,aAAAC,KAAA,KAAYuH,GAEZ3G,KAAKg8I,MAAQr1I,EAAOq1I,MAEbh8I,IAER,KAACy8N,CAAA,CAzCmB,CAASN,IA6CxBj6H,GAAS,SAAA46H,IAAAz0N,EAAAA,EAAAA,GAAA65F,EAAA46H,GAAA,IAAAC,GAAAx0N,EAAAA,EAAAA,GAAA25F,GAEd,SAAAA,EAAaL,EAAOY,GAAwE,IAAAu6H,EAA7DlsM,EAAQlwB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGsY,EAAKtY,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAGwT,KAAKyF,GAAK,EAAGyoF,EAAQ1hG,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAG2hG,EAAK3hG,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAoBnD,OApBoD8H,EAAAA,EAAAA,GAAA,KAAAw5F,IAExF86H,EAAAD,EAAA39N,KAAA,KAAOyiG,EAAOY,IAETm0E,aAAc,EAEnBomD,EAAKn7N,KAAO,YAEZm7N,EAAKv3N,SAASxB,KAAMu4B,GAASorG,WAC7Bo1F,EAAKv+L,eAELu+L,EAAKj+N,OAAS,IAAIy9B,GAElBwgM,EAAKlsM,SAAWA,EAChBksM,EAAK9jN,MAAQA,EACb8jN,EAAK16H,SAAWA,EAChB06H,EAAKz6H,MAAQA,EAEby6H,EAAK98L,IAAM,KAEX88L,EAAK/tE,OAAS,IAAIwtE,GAAkBO,CAErC,CAsCC,OAtCAryN,EAAAA,EAAAA,GAAAu3F,EAAA,EAAAj8F,IAAA,QAAAzB,IAED,WAIC,OAAOxE,KAAKyiG,UAAYruF,KAAKyF,EAE9B,EAACpV,IAED,SAAWw4N,GAGVj9N,KAAKyiG,UAAYw6H,EAAQ7oN,KAAKyF,EAE/B,GAAC,CAAA5T,IAAA,UAAApG,MAED,WAECG,KAAKivJ,OAAOtsG,SAEb,GAAC,CAAA18C,IAAA,OAAApG,MAED,SAAM8G,EAAQ+iI,GAab,OAXA39F,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAk2D,EAAA/iG,WAAA,aAAAC,KAAA,KAAYuH,EAAQ+iI,GAEpB1pI,KAAK8wB,SAAWnqB,EAAOmqB,SACvB9wB,KAAKkZ,MAAQvS,EAAOuS,MACpBlZ,KAAKsiG,SAAW37F,EAAO27F,SACvBtiG,KAAKuiG,MAAQ57F,EAAO47F,MAEpBviG,KAAKjB,OAAS4H,EAAO5H,OAAOqhB,QAE5BpgB,KAAKivJ,OAAStoJ,EAAOsoJ,OAAO7uI,QAErBpgB,IAER,KAACkiG,CAAA,CA9Da,CAASs5H,IAkElB5/B,GAAkC,IAAIr/J,GACtC2gM,GAAoC,IAAI5gM,GACxC6gM,GAA4B,IAAI7gM,GAEhC8gM,GAAgB,SAAAC,IAAAh1N,EAAAA,EAAAA,GAAA+0N,EAAAC,GAAA,IAAAC,GAAA/0N,EAAAA,EAAAA,GAAA60N,GAErB,SAAAA,IAAc,IAAAG,EA8CX,OA9CW70N,EAAAA,EAAAA,GAAA,KAAA00N,IAEbG,EAAAD,EAAAl+N,KAAA,KAAO,IAAIq7C,GAAmB,GAAI,EAAG,GAAK,OAErCohI,oBAAqB,EAE1B0hD,EAAKnB,cAAgB,IAAIhpL,GAAS,EAAG,GAErCmqL,EAAKlB,eAAiB,EAEtBkB,EAAKjB,WAAa,CAejB,IAAIriL,GAAS,EAAG,EAAG,EAAG,GAEtB,IAAIA,GAAS,EAAG,EAAG,EAAG,GAEtB,IAAIA,GAAS,EAAG,EAAG,EAAG,GAEtB,IAAIA,GAAS,EAAG,EAAG,EAAG,GAEtB,IAAIA,GAAS,EAAG,EAAG,EAAG,GAEtB,IAAIA,GAAS,EAAG,EAAG,EAAG,IAGvBsjL,EAAKC,gBAAkB,CACtB,IAAIlhM,GAAS,EAAG,EAAG,GAAK,IAAIA,IAAW,EAAG,EAAG,GAAK,IAAIA,GAAS,EAAG,EAAG,GACrE,IAAIA,GAAS,EAAG,GAAK,GAAK,IAAIA,GAAS,EAAG,EAAG,GAAK,IAAIA,GAAS,GAAK,EAAG,IAGxEihM,EAAKE,SAAW,CACf,IAAInhM,GAAS,EAAG,EAAG,GAAK,IAAIA,GAAS,EAAG,EAAG,GAAK,IAAIA,GAAS,EAAG,EAAG,GACnE,IAAIA,GAAS,EAAG,EAAG,GAAK,IAAIA,GAAS,EAAG,EAAG,GAAK,IAAIA,GAAS,EAAG,GAAK,IACpEihM,CAEH,CA8BC,OA9BA5yN,EAAAA,EAAAA,GAAAyyN,EAAA,EAAAn3N,IAAA,iBAAApG,MAED,SAAgBwhG,GAA2B,IAApBm7H,EAAa57N,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAEhCmxC,EAAS/xC,KAAK+xC,OACdwqL,EAAev8N,KAAK6Q,OAEpB0gC,EAAM8vD,EAAMvwE,UAAYihB,EAAOR,IAEhCA,IAAQQ,EAAOR,MAEnBQ,EAAOR,IAAMA,EACbQ,EAAOsO,0BAIR68K,GAAoBniL,sBAAuBsmD,EAAMrmD,aACjDjJ,EAAOtsC,SAASxB,KAAMi5N,IAEtBC,GAAYl5N,KAAM8tC,EAAOtsC,UACzB03N,GAAYr1M,IAAK9nB,KAAKw9N,gBAAiBhB,IACvCzqL,EAAOuJ,GAAGr3C,KAAMjE,KAAKy9N,SAAUjB,IAC/BzqL,EAAOwJ,OAAQ4hL,IACfprL,EAAOyJ,oBAEP+gL,EAAajoF,iBAAmB4oF,GAAoBluN,GAAKkuN,GAAoBjuN,GAAKiuN,GAAoBhuN,GAEtG0sL,GAAkBtqE,iBAAkBv/E,EAAO0J,iBAAkB1J,EAAO4J,oBACpE37C,KAAK84K,SAASooB,wBAAyBtF,GAExC,KAACwhC,CAAA,CAhFoB,CAASjB,IAoFzBl6H,GAAU,SAAAy7H,IAAAr1N,EAAAA,EAAAA,GAAA45F,EAAAy7H,GAAA,IAAAC,GAAAp1N,EAAAA,EAAAA,GAAA05F,GAEf,SAAAA,EAAaJ,EAAOY,GAAqC,IAAAm7H,EAA1B9sM,EAAQlwB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAG2hG,EAAK3hG,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAWf,OAXgB8H,EAAAA,EAAAA,GAAA,KAAAu5F,IAErD27H,EAAAD,EAAAv+N,KAAA,KAAOyiG,EAAOY,IAETs0E,cAAe,EAEpB6mD,EAAK/7N,KAAO,aAEZ+7N,EAAK9sM,SAAWA,EAChB8sM,EAAKr7H,MAAQA,EAEbq7H,EAAK3uE,OAAS,IAAImuE,GAAmBQ,CAEtC,CAkCC,OAlCAjzN,EAAAA,EAAAA,GAAAs3F,EAAA,EAAAh8F,IAAA,QAAAzB,IAED,WAIC,OAAwB,EAAjBxE,KAAKyiG,UAAgBruF,KAAKyF,EAElC,EAACpV,IAED,SAAWw4N,GAGVj9N,KAAKyiG,UAAYw6H,GAAU,EAAI7oN,KAAKyF,GAErC,GAAC,CAAA5T,IAAA,UAAApG,MAED,WAECG,KAAKivJ,OAAOtsG,SAEb,GAAC,CAAA18C,IAAA,OAAApG,MAED,SAAM8G,EAAQ+iI,GASb,OAPA39F,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAi2D,EAAA9iG,WAAA,aAAAC,KAAA,KAAYuH,EAAQ+iI,GAEpB1pI,KAAK8wB,SAAWnqB,EAAOmqB,SACvB9wB,KAAKuiG,MAAQ57F,EAAO47F,MAEpBviG,KAAKivJ,OAAStoJ,EAAOsoJ,OAAO7uI,QAErBpgB,IAER,KAACiiG,CAAA,CAjDc,CAASu5H,IAqDnBqC,GAAsB,SAAAC,IAAAz1N,EAAAA,EAAAA,GAAAw1N,EAAAC,GAAA,IAAAC,GAAAx1N,EAAAA,EAAAA,GAAAs1N,GAE3B,SAAAA,IAAc,IAAAG,EAIwB,OAJxBt1N,EAAAA,EAAAA,GAAA,KAAAm1N,IAEbG,EAAAD,EAAA3+N,KAAA,KAAO,IAAIsmD,IAAsB,EAAG,EAAG,GAAK,EAAG,GAAK,OAE/Cu4K,0BAA2B,EAAKD,CAEtC,CAAC,OAAArzN,EAAAA,EAAAA,GAAAkzN,EAAA,CAR0B,CAAS1B,IAY/Bn6H,GAAgB,SAAAk8H,IAAA71N,EAAAA,EAAAA,GAAA25F,EAAAk8H,GAAA,IAAAC,GAAA51N,EAAAA,EAAAA,GAAAy5F,GAErB,SAAAA,EAAaH,EAAOY,GAAY,IAAA27H,EAaY,OAbZ11N,EAAAA,EAAAA,GAAA,KAAAs5F,IAE/Bo8H,EAAAD,EAAA/+N,KAAA,KAAOyiG,EAAOY,IAET8zE,oBAAqB,EAE1B6nD,EAAKv8N,KAAO,mBAEZu8N,EAAK34N,SAASxB,KAAMu4B,GAASorG,WAC7Bw2F,EAAK3/L,eAEL2/L,EAAKr/N,OAAS,IAAIy9B,GAElB4hM,EAAKnvE,OAAS,IAAI4uE,GAAyBO,CAE5C,CAiBC,OAjBAzzN,EAAAA,EAAAA,GAAAq3F,EAAA,EAAA/7F,IAAA,UAAApG,MAED,WAECG,KAAKivJ,OAAOtsG,SAEb,GAAC,CAAA18C,IAAA,OAAApG,MAED,SAAM8G,GAOL,OALAolC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAg2D,EAAA7iG,WAAA,aAAAC,KAAA,KAAYuH,GAEZ3G,KAAKjB,OAAS4H,EAAO5H,OAAOqhB,QAC5BpgB,KAAKivJ,OAAStoJ,EAAOsoJ,OAAO7uI,QAErBpgB,IAER,KAACgiG,CAAA,CAlCoB,CAASw5H,IAsCzB6C,GAAY,SAAAC,IAAAj2N,EAAAA,EAAAA,GAAAg2N,EAAAC,GAAA,IAAAC,GAAAh2N,EAAAA,EAAAA,GAAA81N,GAEjB,SAAAA,EAAax8H,EAAOY,GAAY,IAAA+7H,EAMJ,OANI91N,EAAAA,EAAAA,GAAA,KAAA21N,IAE/BG,EAAAD,EAAAn/N,KAAA,KAAOyiG,EAAOY,IAET2zE,gBAAiB,EAEtBooD,EAAK38N,KAAO,eAAe28N,CAE5B,CAAC,OAAA7zN,EAAAA,EAAAA,GAAA0zN,EAAA,CAVgB,CAAS7C,IAcrBiD,GAAa,SAAAC,IAAAr2N,EAAAA,EAAAA,GAAAo2N,EAAAC,GAAA,IAAAC,GAAAp2N,EAAAA,EAAAA,GAAAk2N,GAElB,SAAAA,EAAa58H,EAAOY,GAAqC,IAAAm8H,EAA1Bp0L,EAAK5pC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAI6pC,EAAM7pC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAS9B,OATgC8H,EAAAA,EAAAA,GAAA,KAAA+1N,IAErDG,EAAAD,EAAAv/N,KAAA,KAAOyiG,EAAOY,IAETq0E,iBAAkB,EAEvB8nD,EAAK/8N,KAAO,gBAEZ+8N,EAAKp0L,MAAQA,EACbo0L,EAAKn0L,OAASA,EAAOm0L,CAEtB,CAoCC,OApCAj0N,EAAAA,EAAAA,GAAA8zN,EAAA,EAAAx4N,IAAA,QAAAzB,IAED,WAGC,OAAOxE,KAAKyiG,UAAYziG,KAAKwqC,MAAQxqC,KAAKyqC,OAASr2B,KAAKyF,EAEzD,EAACpV,IAED,SAAWw4N,GAGVj9N,KAAKyiG,UAAYw6H,GAAUj9N,KAAKwqC,MAAQxqC,KAAKyqC,OAASr2B,KAAKyF,GAE5D,GAAC,CAAA5T,IAAA,OAAApG,MAED,SAAM8G,GAOL,OALAolC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAyyL,EAAAt/N,WAAA,aAAAC,KAAA,KAAYuH,GAEZ3G,KAAKwqC,MAAQ7jC,EAAO6jC,MACpBxqC,KAAKyqC,OAAS9jC,EAAO8jC,OAEdzqC,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQ+1H,GAEP,IAAMjpH,GAAIo/B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAyyL,EAAAt/N,WAAA,eAAAC,KAAA,KAAiBw2H,GAK3B,OAHAjpH,EAAKqxB,OAAOwM,MAAQxqC,KAAKwqC,MACzB79B,EAAKqxB,OAAOyM,OAASzqC,KAAKyqC,OAEnB99B,CAER,KAAC8xN,CAAA,CAjDiB,CAASjD,IA+DtBqD,GAAmB,WAExB,SAAAA,KAAcn2N,EAAAA,EAAAA,GAAA,KAAAm2N,GAEb7+N,KAAK8+N,uBAAwB,EAE7B9+N,KAAKs2K,aAAe,GAEpB,IAAM,IAAI1yK,EAAI,EAAGA,EAAI,EAAGA,IAEvB5D,KAAKs2K,aAAah0K,KAAM,IAAIg6B,GAI9B,CAoNC,OApNA3xB,EAAAA,EAAAA,GAAAk0N,EAAA,EAAA54N,IAAA,MAAApG,MAED,SAAKy2K,GAEJ,IAAM,IAAI1yK,EAAI,EAAGA,EAAI,EAAGA,IAEvB5D,KAAKs2K,aAAc1yK,GAAIK,KAAMqyK,EAAc1yK,IAI5C,OAAO5D,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,WAEC,IAAM,IAAI+D,EAAI,EAAGA,EAAI,EAAGA,IAEvB5D,KAAKs2K,aAAc1yK,GAAIa,IAAK,EAAG,EAAG,GAInC,OAAOzE,IAER,GAGA,CAAAiG,IAAA,QAAApG,MACA,SAAOmlB,EAAQjmB,GAId,IAAMiQ,EAAIgW,EAAOhW,EAAGC,EAAI+V,EAAO/V,EAAGC,EAAI8V,EAAO9V,EAEvC6vN,EAAQ/+N,KAAKs2K,aAiBnB,OAdAv3K,EAAOkF,KAAM86N,EAAO,IAAMzqL,eAAgB,SAG1Cv1C,EAAOo8C,gBAAiB4jL,EAAO,GAAK,QAAW9vN,GAC/ClQ,EAAOo8C,gBAAiB4jL,EAAO,GAAK,QAAW7vN,GAC/CnQ,EAAOo8C,gBAAiB4jL,EAAO,GAAK,QAAW/vN,GAG/CjQ,EAAOo8C,gBAAiB4jL,EAAO,GAAkB/vN,EAAIC,EAAjB,UACpClQ,EAAOo8C,gBAAiB4jL,EAAO,GAAkB9vN,EAAIC,EAAjB,UACpCnQ,EAAOo8C,gBAAiB4jL,EAAO,GAAK,SAAa,EAAM7vN,EAAIA,EAAI,IAC/DnQ,EAAOo8C,gBAAiB4jL,EAAO,GAAkB/vN,EAAIE,EAAjB,UACpCnQ,EAAOo8C,gBAAiB4jL,EAAO,GAAK,SAAa/vN,EAAIA,EAAIC,EAAIA,IAEtDlQ,CAER,GAIA,CAAAkH,IAAA,kBAAApG,MACA,SAAiBmlB,EAAQjmB,GAIxB,IAAMiQ,EAAIgW,EAAOhW,EAAGC,EAAI+V,EAAO/V,EAAGC,EAAI8V,EAAO9V,EAEvC6vN,EAAQ/+N,KAAKs2K,aAiBnB,OAdAv3K,EAAOkF,KAAM86N,EAAO,IAAMzqL,eAAgB,SAG1Cv1C,EAAOo8C,gBAAiB4jL,EAAO,GAAK,SAAiB9vN,GACrDlQ,EAAOo8C,gBAAiB4jL,EAAO,GAAK,SAAiB7vN,GACrDnQ,EAAOo8C,gBAAiB4jL,EAAO,GAAK,SAAiB/vN,GAGrDjQ,EAAOo8C,gBAAiB4jL,EAAO,GAAK,QAAiB/vN,EAAIC,GACzDlQ,EAAOo8C,gBAAiB4jL,EAAO,GAAK,QAAiB9vN,EAAIC,GACzDnQ,EAAOo8C,gBAAiB4jL,EAAO,GAAK,QAAW7vN,EAAIA,EAAI,SACvDnQ,EAAOo8C,gBAAiB4jL,EAAO,GAAK,QAAiB/vN,EAAIE,GACzDnQ,EAAOo8C,gBAAiB4jL,EAAO,GAAK,SAAa/vN,EAAIA,EAAIC,EAAIA,IAEtDlQ,CAER,GAAC,CAAAkH,IAAA,MAAApG,MAED,SAAKwyF,GAEJ,IAAM,IAAIzuF,EAAI,EAAGA,EAAI,EAAGA,IAEvB5D,KAAKs2K,aAAc1yK,GAAIkkB,IAAKuqE,EAAGikF,aAAc1yK,IAI9C,OAAO5D,IAER,GAAC,CAAAiG,IAAA,cAAApG,MAED,SAAawyF,EAAItlF,GAEhB,IAAM,IAAInJ,EAAI,EAAGA,EAAI,EAAGA,IAEvB5D,KAAKs2K,aAAc1yK,GAAIu3C,gBAAiBk3C,EAAGikF,aAAc1yK,GAAKmJ,GAI/D,OAAO/M,IAER,GAAC,CAAAiG,IAAA,QAAApG,MAED,SAAOkN,GAEN,IAAM,IAAInJ,EAAI,EAAGA,EAAI,EAAGA,IAEvB5D,KAAKs2K,aAAc1yK,GAAI0wC,eAAgBvnC,GAIxC,OAAO/M,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAMwyF,EAAI7tB,GAET,IAAM,IAAI5gE,EAAI,EAAGA,EAAI,EAAGA,IAEvB5D,KAAKs2K,aAAc1yK,GAAIgiB,KAAMysE,EAAGikF,aAAc1yK,GAAK4gE,GAIpD,OAAOxkE,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQwyF,GAEP,IAAM,IAAIzuF,EAAI,EAAGA,EAAI,EAAGA,IAEvB,IAAO5D,KAAKs2K,aAAc1yK,GAAIq8H,OAAQ5tC,EAAGikF,aAAc1yK,IAEtD,OAAO,EAMT,OAAO,CAER,GAAC,CAAAqC,IAAA,OAAApG,MAED,SAAMwyF,GAEL,OAAOryF,KAAKyE,IAAK4tF,EAAGikF,aAErB,GAAC,CAAArwK,IAAA,QAAApG,MAED,WAEC,OAAO,IAAIG,KAAK4zD,aAAc3vD,KAAMjE,KAErC,GAAC,CAAAiG,IAAA,YAAApG,MAED,SAAWu/D,GAIV,IAJ8B,IAAbx4C,EAAMhmB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAEpB01K,EAAet2K,KAAKs2K,aAEhB1yK,EAAI,EAAGA,EAAI,EAAGA,IAEvB0yK,EAAc1yK,GAAI45B,UAAW4hC,EAAOx4C,EAAe,EAAJhjB,GAIhD,OAAO5D,IAER,GAAC,CAAAiG,IAAA,UAAApG,MAED,WAIC,IAJiC,IAAzBu/D,EAAKx+D,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAIgmB,EAAMhmB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAEvB01K,EAAet2K,KAAKs2K,aAEhB1yK,EAAI,EAAGA,EAAI,EAAGA,IAEvB0yK,EAAc1yK,GAAI65B,QAAS2hC,EAAOx4C,EAAe,EAAJhjB,GAI9C,OAAOw7D,CAER,IAGA,EAAAn5D,IAAA,aAAApG,MACA,SAAmBmlB,EAAQg6M,GAI1B,IAAMhwN,EAAIgW,EAAOhW,EAAGC,EAAI+V,EAAO/V,EAAGC,EAAI8V,EAAO9V,EAG7C8vN,EAAS,GAAM,QAGfA,EAAS,GAAM,QAAW/vN,EAC1B+vN,EAAS,GAAM,QAAW9vN,EAC1B8vN,EAAS,GAAM,QAAWhwN,EAG1BgwN,EAAS,GAAM,SAAWhwN,EAAIC,EAC9B+vN,EAAS,GAAM,SAAW/vN,EAAIC,EAC9B8vN,EAAS,GAAM,SAAa,EAAI9vN,EAAIA,EAAI,GACxC8vN,EAAS,GAAM,SAAWhwN,EAAIE,EAC9B8vN,EAAS,GAAM,SAAahwN,EAAIA,EAAIC,EAAIA,EAEzC,KAAC4vN,CAAA,CAlOuB,GAsOnBI,GAAU,SAAAC,IAAA72N,EAAAA,EAAAA,GAAA42N,EAAAC,GAAA,IAAAC,GAAA52N,EAAAA,EAAAA,GAAA02N,GAEf,SAAAA,IAA6D,IAAAG,EAAhD/sI,EAAEzxF,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAIi+N,GAAuBp8H,EAAS7hG,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAM3C,OAN4C8H,EAAAA,EAAAA,GAAA,KAAAu2N,IAEzDG,EAAAD,EAAA//N,KAAA,UAAO+B,EAAWshG,IAEb4zE,cAAe,EAEpB+oD,EAAK/sI,GAAKA,EAAG+sI,CAEd,CA6BC,OA7BAz0N,EAAAA,EAAAA,GAAAs0N,EAAA,EAAAh5N,IAAA,OAAApG,MAED,SAAM8G,GAML,OAJAolC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAizL,EAAA9/N,WAAA,aAAAC,KAAA,KAAYuH,GAEZ3G,KAAKqyF,GAAGpuF,KAAM0C,EAAO0rF,IAEdryF,IAER,GAAC,CAAAiG,IAAA,WAAApG,MAED,SAAUq+F,GAKT,OAHAl+F,KAAKyiG,UAAYvE,EAAKuE,UACtBziG,KAAKqyF,GAAG70D,UAAW0gE,EAAK7L,IAEjBryF,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQ+1H,GAEP,IAAMjpH,GAAIo/B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAizL,EAAA9/N,WAAA,eAAAC,KAAA,KAAiBw2H,GAI3B,OAFAjpH,EAAKqxB,OAAOq0D,GAAKryF,KAAKqyF,GAAG50D,UAElB9wB,CAER,KAACsyN,CAAA,CAvCc,CAASzD,IA2CnB6D,GAAc,SAAAC,IAAAj3N,EAAAA,EAAAA,GAAAg3N,EAAAC,GAAA,IAAAC,GAAAh3N,EAAAA,EAAAA,GAAA82N,GAEnB,SAAAA,EAAah3L,GAAU,IAAAm3L,EAGH,OAHG92N,EAAAA,EAAAA,GAAA,KAAA22N,IAEtBG,EAAAD,EAAAngO,KAAA,KAAOipC,IACFq+D,SAAW,CAAC,EAAE84H,CAEpB,CA0TC,OA1TA70N,EAAAA,EAAAA,GAAA00N,EAAA,EAAAp5N,IAAA,OAAApG,MAED,SAAMkI,EAAK6jC,EAAQC,EAAYC,GAE9B,IAAM4T,EAAQ1/C,KAERswC,EAAS,IAAIotD,GAAYh+C,EAAMrX,SACrCiI,EAAOI,QAASgP,EAAM1P,MACtBM,EAAOstD,iBAAkBl+C,EAAMm+C,eAC/BvtD,EAAOwtD,mBAAoBp+C,EAAMq+C,iBACjCztD,EAAO8sB,KAAMr1D,GAAK,SAAW4xN,GAE5B,IAEC/tL,EAAQ8T,EAAMs+C,MAAOI,KAAKJ,MAAO27H,IAElC,CAAE,MAAQ1sN,GAEJ6+B,EAEJA,EAAS7+B,GAITpK,QAAQkC,MAAOkI,GAIhByyC,EAAMrX,QAAQm1D,UAAWz1F,EAE1B,CAED,GAAG8jC,EAAYC,EAEhB,GAAC,CAAA7lC,IAAA,QAAApG,MAED,SAAOq+F,GAEN,IAAMwI,EAAW1mG,KAAK0mG,SAEtB,SAAS+4H,EAAYt/N,GAQpB,YAN0BgB,IAArBulG,EAAUvmG,IAEd0C,QAAQC,KAAM,0CAA2C3C,GAInDumG,EAAUvmG,EAElB,CAEA,IAAM+c,EAAWmiN,EAAeK,uBAAwBxhI,EAAKr8F,MAyF7D,QAvFmBV,IAAd+8F,EAAKlzF,OAAqBkS,EAASlS,KAAOkzF,EAAKlzF,WACjC7J,IAAd+8F,EAAK/9F,OAAqB+c,EAAS/c,KAAO+9F,EAAK/9F,WAChCgB,IAAf+8F,EAAK2D,YAA0C1gG,IAAnB+b,EAAS2kF,OAAsB3kF,EAAS2kF,MAAM+xB,OAAQ11B,EAAK2D,YACpE1gG,IAAnB+8F,EAAK4a,YAA0B57F,EAAS47F,UAAY5a,EAAK4a,gBACtC33G,IAAnB+8F,EAAK0a,YAA0B17F,EAAS07F,UAAY1a,EAAK0a,gBAC1Cz3G,IAAf+8F,EAAK6G,QAAsB7nF,EAAS6nF,MAAQ7G,EAAK6G,YAC7B5jG,IAApB+8F,EAAK2G,aAA2B3nF,EAAS2nF,YAAa,IAAI/C,IAAQ8xB,OAAQ11B,EAAK2G,kBACvD1jG,IAAxB+8F,EAAK4G,iBAA+B5nF,EAAS4nF,eAAiB5G,EAAK4G,qBACjD3jG,IAAlB+8F,EAAK0b,eAAgDz4G,IAAtB+b,EAAS08F,UAAyB18F,EAAS08F,SAASga,OAAQ11B,EAAK0b,eAC9Ez4G,IAAlB+8F,EAAKyvC,eAAgDxsI,IAAtB+b,EAASywH,UAAyBzwH,EAASywH,SAAS/Z,OAAQ11B,EAAKyvC,eACrExsI,IAA3B+8F,EAAK4H,oBAAkC5oF,EAAS4oF,kBAAoB5H,EAAK4H,wBAClD3kG,IAAvB+8F,EAAKgI,oBAA0D/kG,IAA3B+b,EAASgpF,eAA8BhpF,EAASgpF,cAAc0tB,OAAQ11B,EAAKgI,oBAC5F/kG,IAAnB+8F,EAAK0vC,YAA0B1wH,EAAS0wH,UAAY1vC,EAAK0vC,gBACtCzsI,IAAnB+8F,EAAK2F,YAA0B3mF,EAAS2mF,UAAY3F,EAAK2F,gBAC7B1iG,IAA5B+8F,EAAK8F,qBAAmC9mF,EAAS8mF,mBAAqB9F,EAAK8F,yBACtD7iG,IAArB+8F,EAAKmG,cAA4BnnF,EAASmnF,YAAcnG,EAAKmG,kBACrCljG,IAAxB+8F,EAAKsG,iBAA+BtnF,EAASsnF,eAAiBtG,EAAKsG,qBAChCrjG,IAAnC+8F,EAAKuG,4BAA0CvnF,EAASunF,0BAA4BvG,EAAKuG,gCACnEtjG,IAAtB+8F,EAAKmH,eAA6BnoF,EAASmoF,aAAenH,EAAKmH,mBAC5ClkG,IAAnB+8F,EAAKqH,YAA0BroF,EAASqoF,UAAYrH,EAAKqH,gBAC5BpkG,IAA7B+8F,EAAKwH,sBAAoCxoF,EAASwoF,oBAAsBxH,EAAKwH,0BACnDvkG,IAA1B+8F,EAAK0H,uBAAgEzkG,IAA9B+b,EAAS0oF,kBAAiC1oF,EAAS0oF,iBAAiBguB,OAAQ11B,EAAK0H,uBAC3GzkG,IAAb+8F,EAAKiyC,MAAoBjzH,EAASizH,IAAMjyC,EAAKiyC,UACxBhvI,IAArB+8F,EAAKoa,cAA4Bp7F,EAASo7F,YAAcpa,EAAKoa,kBAC3Cn3G,IAAlB+8F,EAAKlqD,WAAyB92B,EAAS82B,SAAWkqD,EAAKlqD,eACtC7yC,IAAjB+8F,EAAKmxC,UAAwBnyH,EAASmyH,QAAUnxC,EAAKmxC,cACvCluI,IAAd+8F,EAAKjwD,OAAqB/wB,EAAS+wB,KAAOiwD,EAAKjwD,WAC3B9sC,IAApB+8F,EAAK6uC,aAA2B7vH,EAAS6vH,WAAa7uC,EAAK6uC,iBAC1C5rI,IAAjB+8F,EAAK+E,UAAwB/lF,EAAS+lF,QAAU/E,EAAK+E,cAChC9hG,IAArB+8F,EAAKkb,cAA4Bl8F,EAASk8F,YAAclb,EAAKkb,kBAC1Cj4G,IAAnB+8F,EAAKmb,YAA0Bn8F,EAASm8F,UAAYnb,EAAKmb,gBACtCl4G,IAAnB+8F,EAAK/pD,YAA0Bj3B,EAASi3B,UAAY+pD,EAAK/pD,gBACrChzC,IAApB+8F,EAAKhqD,aAA2Bh3B,EAASg3B,WAAagqD,EAAKhqD,iBACvC/yC,IAApB+8F,EAAK8uC,aAA2B9vH,EAAS8vH,WAAa9uC,EAAK8uC,iBAErC7rI,IAAtB+8F,EAAKyuC,eAA6BzvH,EAASyvH,aAAezuC,EAAKyuC,mBACrCxrI,IAA1B+8F,EAAKkuC,mBAAiClvH,EAASkvH,iBAAmBluC,EAAKkuC,uBAClDjrI,IAArB+8F,EAAKmuC,cAA4BnvH,EAASmvH,YAAcnuC,EAAKmuC,kBACzClrI,IAApB+8F,EAAKouC,aAA2BpvH,EAASovH,WAAapuC,EAAKouC,iBAClCnrI,IAAzB+8F,EAAKquC,kBAAgCrvH,EAASqvH,gBAAkBruC,EAAKquC,sBAChDprI,IAArB+8F,EAAKsuC,cAA4BtvH,EAASsvH,YAActuC,EAAKsuC,kBACvCrrI,IAAtB+8F,EAAKuuC,eAA6BvvH,EAASuvH,aAAevuC,EAAKuuC,mBACzCtrI,IAAtB+8F,EAAKwuC,eAA6BxvH,EAASwvH,aAAexuC,EAAKwuC,mBAE5CvrI,IAAnB+8F,EAAK6xC,YAA0B7yH,EAAS6yH,UAAY7xC,EAAK6xC,gBAC7B5uI,IAA5B+8F,EAAK8xC,qBAAmC9yH,EAAS8yH,mBAAqB9xC,EAAK8xC,yBACjD7uI,IAA1B+8F,EAAK+xC,mBAAiC/yH,EAAS+yH,iBAAmB/xC,EAAK+xC,uBAC5C9uI,IAA3B+8F,EAAKgyC,oBAAkChzH,EAASgzH,kBAAoBhyC,EAAKgyC,wBAEvD/uI,IAAlB+8F,EAAK7/D,WAAyBnhB,EAASmhB,SAAW6/D,EAAK7/D,UAEpC,IAAnB6/D,EAAK0xC,YAAkB1yH,EAAS0yH,UAAY1xC,EAAK0xC,gBAC/BzuI,IAAlB+8F,EAAK2xC,WAAyB3yH,EAAS2yH,SAAW3xC,EAAK2xC,eACtC1uI,IAAjB+8F,EAAK4xC,UAAwB5yH,EAAS4yH,QAAU5xC,EAAK4xC,cACtC3uI,IAAf+8F,EAAKv3E,QAAsBzJ,EAASyJ,MAAQu3E,EAAKv3E,YAE1BxlB,IAAvB+8F,EAAK+uC,gBAA8B/vH,EAAS+vH,cAAgB/uC,EAAK+uC,oBACpC9rI,IAA7B+8F,EAAKgvC,sBAAoChwH,EAASgwH,oBAAsBhvC,EAAKgvC,0BACjD/rI,IAA5B+8F,EAAKivC,qBAAmCjwH,EAASiwH,mBAAqBjvC,EAAKivC,yBAExDhsI,IAAnB+8F,EAAKkvC,YAA0BlwH,EAASkwH,UAAYlvC,EAAKkvC,gBAEhCjsI,IAAzB+8F,EAAKmvC,kBAAgCnwH,EAASmwH,gBAAkBnvC,EAAKmvC,sBACzClsI,IAA5B+8F,EAAKovC,qBAAmCpwH,EAASowH,mBAAqBpvC,EAAKovC,yBAE1DnsI,IAAjB+8F,EAAKzhD,UAAwBv/B,EAASu/B,QAAUyhD,EAAKzhD,cAEjCt7C,IAApB+8F,EAAK9pD,aAA2Bl3B,EAASk3B,WAAa8pD,EAAK9pD,iBAEzCjzC,IAAlB+8F,EAAK3/D,WAAyBrhB,EAASqhB,SAAW2/D,EAAK3/D,eAEjCp9B,IAAtB+8F,EAAKma,eAEyB,kBAAtBna,EAAKma,aAEhBn7F,EAASm7F,aAAiBna,EAAKma,aAAe,EAI9Cn7F,EAASm7F,aAAena,EAAKma,mBAQRl3G,IAAlB+8F,EAAKtwD,SAET,IAAM,IAAMztC,KAAQ+9F,EAAKtwD,SAAW,CAEnC,IAAMgpH,EAAU14D,EAAKtwD,SAAUztC,GAI/B,OAFA+c,EAAS0wB,SAAUztC,GAAS,CAAC,EAEpBy2J,EAAQ/0J,MAEhB,IAAK,IACJqb,EAAS0wB,SAAUztC,GAAON,MAAQ4/N,EAAY7oE,EAAQ/2J,OACtD,MAED,IAAK,IACJqd,EAAS0wB,SAAUztC,GAAON,OAAQ,IAAIiiG,IAAQ8xB,OAAQgjC,EAAQ/2J,OAC9D,MAED,IAAK,KACJqd,EAAS0wB,SAAUztC,GAAON,OAAQ,IAAIuzC,IAAU5V,UAAWo5H,EAAQ/2J,OACnE,MAED,IAAK,KACJqd,EAAS0wB,SAAUztC,GAAON,OAAQ,IAAIy8B,IAAUkB,UAAWo5H,EAAQ/2J,OACnE,MAED,IAAK,KACJqd,EAAS0wB,SAAUztC,GAAON,OAAQ,IAAIo6C,IAAUzc,UAAWo5H,EAAQ/2J,OACnE,MAED,IAAK,KACJqd,EAAS0wB,SAAUztC,GAAON,OAAQ,IAAI0wH,IAAU/yF,UAAWo5H,EAAQ/2J,OACnE,MAED,IAAK,KACJqd,EAAS0wB,SAAUztC,GAAON,OAAQ,IAAI08B,IAAUiB,UAAWo5H,EAAQ/2J,OACnE,MAED,QACCqd,EAAS0wB,SAAUztC,GAAON,MAAQ+2J,EAAQ/2J,MAI7C,CASD,QALsBsB,IAAjB+8F,EAAK3oD,UAAwBr4B,EAASq4B,QAAU2oD,EAAK3oD,cAC/Bp0C,IAAtB+8F,EAAKlwD,eAA6B9wB,EAAS8wB,aAAekwD,EAAKlwD,mBACvC7sC,IAAxB+8F,EAAK1wD,iBAA+BtwB,EAASswB,eAAiB0wD,EAAK1wD,qBAC9CrsC,IAArB+8F,EAAKs9C,cAA4Bt+H,EAASs+H,YAAct9C,EAAKs9C,kBAEzCr6I,IAApB+8F,EAAK9tD,WAET,IAAM,IAAMnqC,KAAOi4F,EAAK9tD,WAEvBlzB,EAASkzB,WAAYnqC,GAAQi4F,EAAK9tD,WAAYnqC,GAuBhD,QAfmB9E,IAAd+8F,EAAKn0F,OAAqBmT,EAASnT,KAAOm0F,EAAKn0F,WACtB5I,IAAzB+8F,EAAK8Z,kBAAgC96F,EAAS86F,gBAAkB9Z,EAAK8Z,sBAIxD72G,IAAb+8F,EAAKh+D,MAAoBhjB,EAASgjB,IAAMu/L,EAAYvhI,EAAKh+D,WACzC/+B,IAAhB+8F,EAAKgwC,SAAuBhxH,EAASgxH,OAASuxF,EAAYvhI,EAAKgwC,cAE7C/sI,IAAlB+8F,EAAKiwC,WAAyBjxH,EAASixH,SAAWsxF,EAAYvhI,EAAKiwC,gBAElDhtI,IAAjB+8F,EAAKqwC,UAAwBrxH,EAASqxH,QAAUkxF,EAAYvhI,EAAKqwC,eAC9CptI,IAAnB+8F,EAAKswC,YAA0BtxH,EAASsxH,UAAYtwC,EAAKswC,gBAEtCrtI,IAAnB+8F,EAAKuwC,YAA0BvxH,EAASuxH,UAAYgxF,EAAYvhI,EAAKuwC,iBAC9CttI,IAAvB+8F,EAAKwwC,gBAA8BxxH,EAASwxH,cAAgBxwC,EAAKwwC,oBAC5CvtI,IAArB+8F,EAAKqa,YAA4B,CAErC,IAAIA,EAAcra,EAAKqa,aAEe,IAAjC50G,MAAM0sC,QAASkoE,KAInBA,EAAc,CAAEA,EAAaA,IAI9Br7F,EAASq7F,aAAc,IAAInlE,IAAU5V,UAAW+6E,EAEjD,CA4CA,YA1C8Bp3G,IAAzB+8F,EAAKywC,kBAAgCzxH,EAASyxH,gBAAkB8wF,EAAYvhI,EAAKywC,uBACtDxtI,IAA3B+8F,EAAK0wC,oBAAkC1xH,EAAS0xH,kBAAoB1wC,EAAK0wC,wBAC/CztI,IAA1B+8F,EAAK2wC,mBAAiC3xH,EAAS2xH,iBAAmB3wC,EAAK2wC,uBAEjD1tI,IAAtB+8F,EAAK4wC,eAA6B5xH,EAAS4xH,aAAe2wF,EAAYvhI,EAAK4wC,oBACrD3tI,IAAtB+8F,EAAK6wC,eAA6B7xH,EAAS6xH,aAAe0wF,EAAYvhI,EAAK6wC,oBAEtD5tI,IAArB+8F,EAAK8wC,cAA4B9xH,EAAS8xH,YAAcywF,EAAYvhI,EAAK8wC,mBAC9C7tI,IAA3B+8F,EAAKuF,oBAAkCvmF,EAASumF,kBAAoBvF,EAAKuF,wBAEpDtiG,IAArB+8F,EAAK+wC,cAA4B/xH,EAAS+xH,YAAcwwF,EAAYvhI,EAAK+wC,mBAC3C9tI,IAA9B+8F,EAAKgxC,uBAAqChyH,EAASgyH,qBAAuBuwF,EAAYvhI,EAAKgxC,4BACjE/tI,IAA1B+8F,EAAKixC,mBAAiCjyH,EAASiyH,iBAAmBswF,EAAYvhI,EAAKixC,wBAEnEhuI,IAAhB+8F,EAAKkxC,SAAuBlyH,EAASkyH,OAASqwF,EAAYvhI,EAAKkxC,cACtCjuI,IAAzB+8F,EAAKoxC,kBAAgCpyH,EAASoyH,gBAAkBpxC,EAAKoxC,sBAE/CnuI,IAAtB+8F,EAAKqxC,eAA6BryH,EAASqyH,aAAerxC,EAAKqxC,mBACtCpuI,IAAzB+8F,EAAKsxC,kBAAgCtyH,EAASsyH,gBAAkBtxC,EAAKsxC,sBAEnDruI,IAAlB+8F,EAAKkwC,WAAyBlxH,EAASkxH,SAAWqxF,EAAYvhI,EAAKkwC,gBACxCjtI,IAA3B+8F,EAAKmwC,oBAAkCnxH,EAASmxH,kBAAoBnwC,EAAKmwC,wBAE1DltI,IAAf+8F,EAAKowC,QAAsBpxH,EAASoxH,MAAQmxF,EAAYvhI,EAAKowC,aACrCntI,IAAxB+8F,EAAKwb,iBAA+Bx8F,EAASw8F,eAAiBxb,EAAKwb,qBAE9Cv4G,IAArB+8F,EAAKuxC,cAA4BvyH,EAASuyH,YAAcgwF,EAAYvhI,EAAKuxC,mBAEnDtuI,IAAtB+8F,EAAK2vC,eAA6B3wH,EAAS2wH,aAAe4xF,EAAYvhI,EAAK2vC,oBAC5C1sI,IAA/B+8F,EAAK4vC,wBAAsC5wH,EAAS4wH,sBAAwB2xF,EAAYvhI,EAAK4vC,6BACjE3sI,IAA5B+8F,EAAK6vC,qBAAmC7wH,EAAS6wH,mBAAqB0xF,EAAYvhI,EAAK6vC,0BACzD5sI,IAA9B+8F,EAAKiG,uBAAqCjnF,EAASinF,sBAAuB,IAAI/wD,IAAU5V,UAAW0gE,EAAKiG,4BAEhFhjG,IAAxB+8F,EAAK8vC,iBAA+B9wH,EAAS8wH,eAAiByxF,EAAYvhI,EAAK8vC,sBAC9C7sI,IAAjC+8F,EAAK+vC,0BAAwC/wH,EAAS+wH,wBAA0BwxF,EAAYvhI,EAAK+vC,+BAExE9sI,IAAzB+8F,EAAKwxC,kBAAgCxyH,EAASwyH,gBAAkB+vF,EAAYvhI,EAAKwxC,uBAC3DvuI,IAAtB+8F,EAAKyxC,eAA6BzyH,EAASyyH,aAAe8vF,EAAYvhI,EAAKyxC,oBAEpDxuI,IAAvB+8F,EAAKm6D,gBAA8Bn7I,EAASm7I,cAAgBonE,EAAYvhI,EAAKm6D,qBAClDl3J,IAA3B+8F,EAAKo6D,oBAAkCp7I,EAASo7I,kBAAoBmnE,EAAYvhI,EAAKo6D,oBAEnFp7I,CAER,GAAC,CAAAjX,IAAA,cAAApG,MAED,SAAaA,GAGZ,OADAG,KAAK0mG,SAAW7mG,EACTG,IAER,IAAC,EAAAiG,IAAA,yBAAApG,MAED,SAA+BgC,GAuB9B,OAAO,GArBa,CACnB0vK,eAAAA,GACAC,eAAAA,GACAs5C,kBAAAA,GACA/8K,eAAAA,GACAgqE,eAAAA,GACArU,qBAAAA,GACAnrD,qBAAAA,GACA44H,kBAAAA,GACAC,iBAAAA,GACAH,mBAAAA,GACAC,oBAAAA,GACAH,kBAAAA,GACAC,qBAAAA,GACAluE,kBAAAA,GACAuuE,mBAAAA,GACAC,mBAAAA,GACAn5D,kBAAAA,GACAlgF,SAAAA,IAGuBp2B,EAEzB,KAACw9N,CAAA,CAjUkB,CAASv/H,IAqUvB1C,GAAW,oBAAAA,KAAA10F,EAAAA,EAAAA,GAAA,KAAA00F,EAAA,CAsEf,OAtEezyF,EAAAA,EAAAA,GAAAyyF,EAAA,OAAAn3F,IAAA,aAAApG,MAEhB,SAAmBu/D,GAElB,GAA4B,qBAAhB26J,YAEX,OAAO,IAAIA,aAAcC,OAAQ56J,GASlC,IAFA,IAAIryD,EAAI,GAEEnJ,EAAI,EAAG8sG,EAAKtxC,EAAM78D,OAAQqB,EAAI8sG,EAAI9sG,IAG3CmJ,GAAKpK,OAAOuE,aAAck4D,EAAOx7D,IAIlC,IAIC,OAAO+7N,mBAAoBC,OAAQ7yN,GAEpC,CAAE,MAAQE,GAET,OAAOF,CAER,CAED,GAAC,CAAA9G,IAAA,iBAAApG,MAED,SAAuBkI,GAEtB,IAAMnC,EAAQmC,EAAI83N,YAAa,KAE/B,OAAiB,IAAZj6N,EAAuB,KAErBmC,EAAIpH,MAAO,EAAGiF,EAAQ,EAE9B,GAAC,CAAAK,IAAA,aAAApG,MAED,SAAmBkI,EAAKioC,GAGvB,MAAoB,kBAARjoC,GAA4B,KAARA,EAAoB,IAG/C,gBAAgBuT,KAAM00B,IAAU,MAAM10B,KAAMvT,KAEhDioC,EAAOA,EAAKrC,QAAS,0BAA2B,OAK5C,mBAAmBryB,KAAMvT,IAGzB,gBAAgBuT,KAAMvT,IAGtB,aAAauT,KAAMvT,GANqBA,EAStCioC,EAAOjoC,EAEf,KAACq1F,CAAA,CAtEe,GA0EX0iI,GAAuB,SAAAC,IAAA13N,EAAAA,EAAAA,GAAAy3N,EAAAC,GAAA,IAAAC,GAAAz3N,EAAAA,EAAAA,GAAAu3N,GAE5B,SAAAA,IAAc,IAAAG,EAOiB,OAPjBv3N,EAAAA,EAAAA,GAAA,KAAAo3N,IAEbG,EAAAD,EAAA5gO,KAAA,OAEKq0J,2BAA4B,EAEjCwsE,EAAKp+N,KAAO,0BACZo+N,EAAKzgE,cAAgB5sJ,IAASqtN,CAE/B,CA4BC,OA5BAt1N,EAAAA,EAAAA,GAAAm1N,EAAA,EAAA75N,IAAA,OAAApG,MAED,SAAM8G,GAML,OAJAolC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA8zL,EAAA3gO,WAAA,aAAAC,KAAA,KAAYuH,GAEZ3G,KAAKw/J,cAAgB74J,EAAO64J,cAErBx/J,IAER,GAAC,CAAAiG,IAAA,QAAApG,MAED,WAEC,OAAO,IAAIG,KAAK4zD,aAAc3vD,KAAMjE,KAErC,GAAC,CAAAiG,IAAA,SAAApG,MAED,WAEC,IAAM8M,GAAIo/B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA8zL,EAAA3gO,WAAA,eAAAC,KAAA,KAAiBY,MAM3B,OAJA2M,EAAK6yJ,cAAgBx/J,KAAKw/J,cAE1B7yJ,EAAK8mJ,2BAA4B,EAE1B9mJ,CAER,KAACmzN,CAAA,CAvC2B,CAASpqL,IA2ChCwqL,GAAoB,SAAAC,IAAA93N,EAAAA,EAAAA,GAAA63N,EAAAC,GAAA,IAAAC,GAAA73N,EAAAA,EAAAA,GAAA23N,GAEzB,SAAAA,EAAa73L,GAAU,OAAA3/B,EAAAA,EAAAA,GAAA,KAAAw3N,GAAAE,EAAAhhO,KAAA,KAEfipC,EAER,CAyMC,OAzMA19B,EAAAA,EAAAA,GAAAu1N,EAAA,EAAAj6N,IAAA,OAAApG,MAED,SAAMkI,EAAK6jC,EAAQC,EAAYC,GAE9B,IAAM4T,EAAQ1/C,KAERswC,EAAS,IAAIotD,GAAYh+C,EAAMrX,SACrCiI,EAAOI,QAASgP,EAAM1P,MACtBM,EAAOstD,iBAAkBl+C,EAAMm+C,eAC/BvtD,EAAOwtD,mBAAoBp+C,EAAMq+C,iBACjCztD,EAAO8sB,KAAMr1D,GAAK,SAAW4xN,GAE5B,IAEC/tL,EAAQ8T,EAAMs+C,MAAOI,KAAKJ,MAAO27H,IAElC,CAAE,MAAQ1sN,GAEJ6+B,EAEJA,EAAS7+B,GAITpK,QAAQkC,MAAOkI,GAIhByyC,EAAMrX,QAAQm1D,UAAWz1F,EAE1B,CAED,GAAG8jC,EAAYC,EAEhB,GAAC,CAAA7lC,IAAA,QAAApG,MAED,SAAOq+F,GAEN,IAAMmiI,EAAuB,CAAC,EACxBC,EAAiB,CAAC,EAExB,SAASC,EAAsBriI,EAAMlzF,GAEpC,QAAsC7J,IAAjCk/N,EAAsBr1N,GAAuB,OAAOq1N,EAAsBr1N,GAE/E,IACMg5L,EADqB9lG,EAAK+lG,mBACcj5L,GAExC5D,EAYP,SAAyB82F,EAAMlzF,GAE9B,QAAgC7J,IAA3Bm/N,EAAgBt1N,GAAuB,OAAOs1N,EAAgBt1N,GAEnE,IAAM64L,EAAe3lG,EAAK2lG,aACpB61B,EAAc71B,EAAc74L,GAE5Boc,EAAK,IAAIymF,YAAa6rH,GAActyN,OAI1C,OAFAk5N,EAAgBt1N,GAASoc,EAElBA,CAER,CAzBgBo5M,CAAgBtiI,EAAM8lG,EAAkB58L,QAEjDg4D,EAAQizD,GAAe2xE,EAAkBniM,KAAMuF,GAC/CgtE,EAAK,IAAIohC,GAAmBp2C,EAAO4kI,EAAkBl8F,QAK3D,OAJA1zB,EAAGppE,KAAOg5L,EAAkBh5L,KAE5Bq1N,EAAsBr1N,GAASopE,EAExBA,CAER,CAiBA,IAAMvmC,EAAWqwD,EAAKu1D,0BAA4B,IAAIqsE,GAA4B,IAAIpqL,GAEhF9vC,EAAQs4F,EAAKvxF,KAAK/G,MAExB,QAAezE,IAAVyE,EAAsB,CAE1B,IAAM66N,EAAapuG,GAAezsH,EAAM/D,KAAM+D,EAAMw5D,OACpDvxB,EAASytD,SAAU,IAAI1lD,GAAiB6qL,EAAY,GAErD,CAEA,IAAM73H,EAAa1K,EAAKvxF,KAAKi8F,WAE7B,IAAM,IAAM3iG,KAAO2iG,EAAa,CAE/B,IAAMqC,EAAYrC,EAAY3iG,GAC1BivG,OAAe,EAEnB,GAAKjK,EAAUurC,6BAA+B,CAE7C,IAAMwtD,EAAoBu8B,EAAsBriI,EAAKvxF,KAAMs+F,EAAUt+F,MACrEuoG,EAAkB,IAAIO,GAA4BuuF,EAAmB/4F,EAAU8J,SAAU9J,EAAUrkF,OAAQqkF,EAAUF,WAEtH,KAAO,CAEN,IAAM01H,EAAapuG,GAAepnB,EAAUppG,KAAMopG,EAAU7rC,OAE5D81C,EAAkB,IADYjK,EAAU8oD,2BAA6B8zC,GAA2BjyJ,IACnD6qL,EAAYx1H,EAAU8J,SAAU9J,EAAUF,WAExF,MAEwB5pG,IAAnB8pG,EAAU9qG,OAAqB+0G,EAAgB/0G,KAAO8qG,EAAU9qG,WAC5CgB,IAApB8pG,EAAU4lC,OAAsB37B,EAAgBn1E,SAAUkrE,EAAU4lC,YAE1C1vI,IAA1B8pG,EAAU6lC,cAEd57B,EAAgB47B,YAAYlqH,OAASqkF,EAAU6lC,YAAYlqH,OAC3DsuF,EAAgB47B,YAAYluI,MAAQqoG,EAAU6lC,YAAYluI,OAI3DirC,EAAS8H,aAAc1vC,EAAKivG,EAE7B,CAEA,IAAM+F,EAAkB/c,EAAKvxF,KAAKsuG,gBAElC,GAAKA,EAEJ,IAAM,IAAMh1G,KAAOg1G,EAAkB,CAMpC,IAJA,IAAM67B,EAAiB77B,EAAiBh1G,GAElCm5D,EAAQ,GAEJx7D,EAAI,EAAG8sG,EAAKomC,EAAev0I,OAAQqB,EAAI8sG,EAAI9sG,IAAO,CAE3D,IAAMqnG,EAAY6rC,EAAgBlzI,GAC9BsxG,OAAe,EAEnB,GAAKjK,EAAUurC,6BAA+B,CAE7C,IAAMwtD,EAAoBu8B,EAAsBriI,EAAKvxF,KAAMs+F,EAAUt+F,MACrEuoG,EAAkB,IAAIO,GAA4BuuF,EAAmB/4F,EAAU8J,SAAU9J,EAAUrkF,OAAQqkF,EAAUF,WAEtH,KAAO,CAEN,IAAM01H,EAAapuG,GAAepnB,EAAUppG,KAAMopG,EAAU7rC,OAC5D81C,EAAkB,IAAIt/D,GAAiB6qL,EAAYx1H,EAAU8J,SAAU9J,EAAUF,WAElF,MAEwB5pG,IAAnB8pG,EAAU9qG,OAAqB+0G,EAAgB/0G,KAAO8qG,EAAU9qG,MACrEi/D,EAAM98D,KAAM4yG,EAEb,CAEArnE,EAASotE,gBAAiBh1G,GAAQm5D,CAEnC,CAI4B8+B,EAAKvxF,KAAKk0G,uBAItChzE,EAASgzE,sBAAuB,GAIjC,IAAMkzB,EAAS71C,EAAKvxF,KAAKonI,QAAU71C,EAAKvxF,KAAK+zN,WAAaxiI,EAAKvxF,KAAKg0N,QAEpE,QAAgBx/N,IAAX4yI,EAEJ,IAAM,IAAInwI,EAAI,EAAGI,EAAI+vI,EAAOxxI,OAAQqB,IAAMI,IAAMJ,EAAI,CAEnD,IAAMs3G,EAAQ64B,EAAQnwI,GAEtBiqC,EAAS+oG,SAAU17B,EAAM5zG,MAAO4zG,EAAMt4G,MAAOs4G,EAAM3X,cAEpD,CAID,IAAM0c,EAAiB/hB,EAAKvxF,KAAKszG,eAEjC,QAAwB9+G,IAAnB8+G,EAA+B,CAEnC,IAAMD,EAAS,IAAI1jF,QAEYn7B,IAA1B8+G,EAAeD,QAEnBA,EAAOxiF,UAAWyiF,EAAeD,QAIlCnyE,EAASoyE,eAAiB,IAAIH,GAAQE,EAAQC,EAAe5yF,OAE9D,CAKA,OAHK6wE,EAAK/9F,OAAO0tC,EAAS1tC,KAAO+9F,EAAK/9F,MACjC+9F,EAAK3/D,WAAWsP,EAAStP,SAAW2/D,EAAK3/D,UAEvCsP,CAER,KAACqyL,CAAA,CA/MwB,CAASpgI,IAmN7B8gI,GAAY,SAAAC,IAAAx4N,EAAAA,EAAAA,GAAAu4N,EAAAC,GAAA,IAAAC,GAAAv4N,EAAAA,EAAAA,GAAAq4N,GAEjB,SAAAA,EAAav4L,GAAU,OAAA3/B,EAAAA,EAAAA,GAAA,KAAAk4N,GAAAE,EAAA1hO,KAAA,KAEfipC,EAER,CAw9BC,OAx9BA19B,EAAAA,EAAAA,GAAAi2N,EAAA,EAAA36N,IAAA,OAAApG,MAED,SAAMkI,EAAK6jC,EAAQC,EAAYC,GAE9B,IAAM4T,EAAQ1/C,KAERgwC,EAAuB,KAAdhwC,KAAKgwC,KAAgBotD,GAAYC,eAAgBt1F,GAAQ/H,KAAKgwC,KAC7EhwC,KAAKm9F,aAAen9F,KAAKm9F,cAAgBntD,EAEzC,IAAMM,EAAS,IAAIotD,GAAY19F,KAAKqoC,SACpCiI,EAAOI,QAAS1wC,KAAKgwC,MACrBM,EAAOstD,iBAAkB59F,KAAK69F,eAC9BvtD,EAAOwtD,mBAAoB99F,KAAK+9F,iBAChCztD,EAAO8sB,KAAMr1D,GAAK,SAAW4xN,GAE5B,IAAIz7H,EAAO,KAEX,IAECA,EAAOE,KAAKJ,MAAO27H,EAEpB,CAAE,MAAQ50N,GAMT,YAJiB5D,IAAZ2qC,GAAwBA,EAAS/mC,QAEtClC,QAAQkC,MAAO,mCAAsCgD,EAAM,IAAKhD,EAAME,QAIvE,CAEA,IAAM4xH,EAAW34B,EAAK24B,cAEJ11H,IAAb01H,QAA4C11H,IAAlB01H,EAASh1H,MAAsD,aAAhCg1H,EAASh1H,KAAKuvF,cAO5E1xC,EAAMs+C,MAAOE,EAAMtyD,GALlB/oC,QAAQkC,MAAO,kCAAqCgD,EAOtD,GAAG8jC,EAAYC,EAEhB,GAAC,CAAA7lC,IAAA,YAAApG,MAAA,eAAAkhO,GAAA1uC,EAAAA,EAAAA,IAAAliE,EAAAA,EAAAA,KAAAC,MAED,SAAA4wG,EAAiBj5N,EAAK8jC,GAAU,IAAA6T,EAAA1P,EAAAM,EAAAqpL,EAAAz7H,EAAA24B,EAAA,OAAA1G,EAAAA,EAAAA,KAAAE,MAAA,SAAA4wG,GAAA,cAAAA,EAAAh5J,KAAAg5J,EAAA7zK,MAAA,OAUmB,OAR5C1N,EAAQ1/C,KAERgwC,EAAuB,KAAdhwC,KAAKgwC,KAAgBotD,GAAYC,eAAgBt1F,GAAQ/H,KAAKgwC,KAC7EhwC,KAAKm9F,aAAen9F,KAAKm9F,cAAgBntD,GAEnCM,EAAS,IAAIotD,GAAY19F,KAAKqoC,UAC7BqI,QAAS1wC,KAAKgwC,MACrBM,EAAOstD,iBAAkB59F,KAAK69F,eAC9BvtD,EAAOwtD,mBAAoB99F,KAAK+9F,iBAAkBkjI,EAAA7zK,KAAA,EAE/B9c,EAAO4wL,UAAWn5N,EAAK8jC,GAAY,OAIxB,GAJxB8tL,EAAIsH,EAAAttC,KAEJz1F,EAAOE,KAAKJ,MAAO27H,QAIPx4N,KAFZ01H,EAAW34B,EAAK24B,gBAE2B11H,IAAlB01H,EAASh1H,MAAsD,aAAhCg1H,EAASh1H,KAAKuvF,cAA4B,CAAA6vI,EAAA7zK,KAAA,eAEjG,IAAI1qD,MAAO,kCAAqCqF,GAAK,eAAAk5N,EAAA7zK,KAAA,GAI/C1N,EAAMyhL,WAAYjjI,GAAM,eAAA+iI,EAAAG,OAAA,SAAAH,EAAAttC,MAAA,yBAAAstC,EAAAzlK,OAAA,GAAAwlK,EAAA,UAErC,gBAAAK,EAAAC,GAAA,OAAAP,EAAAjiO,MAAA,KAAA8B,UAAA,EA5BA,IA4BA,CAAAqF,IAAA,QAAApG,MAED,SAAOq+F,EAAMtyD,GAEZ,IAAMinE,EAAa7yG,KAAKuhO,gBAAiBrjI,EAAK2U,YACxC5nF,EAASjrB,KAAKwhO,YAAatjI,EAAKjzE,QAChCyvF,EAAa16G,KAAKyhO,gBAAiBvjI,EAAKwc,WAAYzvF,GAEpD47E,EAAS7mG,KAAK0hO,YAAaxjI,EAAK2I,QAAQ,gBAE7B1lG,IAAXyqC,GAAuBA,EAAQ5N,EAErC,IAEM0oE,EAAW1mG,KAAK2hO,cAAezjI,EAAKwI,SAAUG,GAC9Cj2C,EAAY5wD,KAAK4hO,eAAgB1jI,EAAKttC,UAAW81C,GAEjD1oE,EAASh+B,KAAK6hO,YAAa3jI,EAAKlgE,OAAQ08E,EAAY9pD,EAAW81C,EAAUmM,GACzEo2B,EAAYjpI,KAAK8hO,eAAgB5jI,EAAK+qC,UAAWjrG,GAMvD,GAJAh+B,KAAK+hO,cAAe/jM,EAAQirG,QAIZ9nI,IAAXyqC,EAAuB,CAE3B,IAAIo2L,GAAY,EAEhB,IAAM,IAAMh3N,KAAQ67F,EAEnB,GAAKA,EAAQ77F,GAAO2B,gBAAgB2oH,iBAAmB,CAEtD0sG,GAAY,EACZ,KAED,EAIkB,IAAdA,GAAsBp2L,EAAQ5N,EAEpC,CAEA,OAAOA,CAER,GAAC,CAAA/3B,IAAA,aAAApG,MAAA,eAAAoiO,GAAA5vC,EAAAA,EAAAA,IAAAliE,EAAAA,EAAAA,KAAAC,MAED,SAAA8xG,EAAkBhkI,GAAI,IAAA2U,EAAA5nF,EAAAyvF,EAAA7T,EAAAH,EAAA91C,EAAA5yB,EAAAirG,EAAA,OAAA9Y,EAAAA,EAAAA,KAAAE,MAAA,SAAA8xG,GAAA,cAAAA,EAAAl6J,KAAAk6J,EAAA/0K,MAAA,OAI6C,OAF5DylD,EAAa7yG,KAAKuhO,gBAAiBrjI,EAAK2U,YACxC5nF,EAASjrB,KAAKwhO,YAAatjI,EAAKjzE,QAChCyvF,EAAa16G,KAAKyhO,gBAAiBvjI,EAAKwc,WAAYzvF,GAAQk3M,EAAA/0K,KAAA,EAE7CptD,KAAKoiO,iBAAkBlkI,EAAK2I,QAAQ,OAQjB,OARlCA,EAAMs7H,EAAAxuC,KAENjtF,EAAW1mG,KAAK2hO,cAAezjI,EAAKwI,SAAUG,GAC9Cj2C,EAAY5wD,KAAK4hO,eAAgB1jI,EAAKttC,UAAW81C,GAEjD1oE,EAASh+B,KAAK6hO,YAAa3jI,EAAKlgE,OAAQ08E,EAAY9pD,EAAW81C,EAAUmM,GACzEo2B,EAAYjpI,KAAK8hO,eAAgB5jI,EAAK+qC,UAAWjrG,GAEvDh+B,KAAK+hO,cAAe/jM,EAAQirG,GAAYk5F,EAAAf,OAAA,SAEjCpjM,GAAM,yBAAAmkM,EAAA3mK,OAAA,GAAA0mK,EAAA,UAEb,gBAAAG,GAAA,OAAAJ,EAAAnjO,MAAA,KAAA8B,UAAA,EApBA,IAoBA,CAAAqF,IAAA,cAAApG,MAED,SAAaq+F,GAEZ,IAAMjzE,EAAS,CAAC,EAEhB,QAAc9pB,IAAT+8F,EAEJ,IAAM,IAAIt6F,EAAI,EAAGwS,EAAI8nF,EAAK37F,OAAQqB,EAAIwS,EAAGxS,IAAO,CAE/C,IAAM0jB,GAAQ,IAAIkS,IAAQm7K,SAAUz2G,EAAMt6F,IAE1CqnB,EAAQ3D,EAAMtc,MAASsc,CAExB,CAID,OAAO2D,CAER,GAAC,CAAAhlB,IAAA,iBAAApG,MAED,SAAgBq+F,EAAMlgE,GAErB,IAAMirG,EAAY,CAAC,EACb/sB,EAAQ,CAAC,EAYf,GARAl+E,EAAO6yB,UAAU,SAAWa,GAEtBA,EAAM4hD,SAAS4I,EAAOxqD,EAAM1mD,MAAS0mD,EAE3C,SAIcvwD,IAAT+8F,EAEJ,IAAM,IAAIt6F,EAAI,EAAGwS,EAAI8nF,EAAK37F,OAAQqB,EAAIwS,EAAGxS,IAAO,CAE/C,IAAM86G,GAAW,IAAIpC,IAAWq4F,SAAUz2G,EAAMt6F,GAAKs4G,GAErD+sB,EAAWvqB,EAAS1zG,MAAS0zG,CAE9B,CAID,OAAOuqB,CAER,GAAC,CAAAhjI,IAAA,kBAAApG,MAED,SAAiBq+F,EAAMjzE,GAEtB,IAAMyvF,EAAa,CAAC,EAEpB,QAAcv5G,IAAT+8F,EAIJ,IAFA,IAAMokI,EAAuB,IAAIpC,GAEvBt8N,EAAI,EAAGwS,EAAI8nF,EAAK37F,OAAQqB,EAAIwS,EAAGxS,IAAO,CAE/C,IAAIiqC,OAAQ,EACNlhC,EAAOuxF,EAAMt6F,GAEnB,OAAS+I,EAAK9K,MAEb,IAAK,iBACL,IAAK,0BAEJgsC,EAAWy0L,EAAqBtkI,MAAOrxF,GACvC,MAED,QAEMA,EAAK9K,QAAQ6oN,GAEjB78K,EAAW68K,GAAY/9M,EAAK9K,MAAO8yM,SAAUhoM,EAAMse,GAInDpoB,QAAQC,KAAK,kDAADrD,OAAqDkN,EAAK9K,KAAI,MAM7EgsC,EAAS7iC,KAAO2B,EAAK3B,UAEF7J,IAAdwL,EAAKxM,OAAqB0tC,EAAS1tC,KAAOwM,EAAKxM,OACjB,IAA9B0tC,EAASimG,uBAA+C3yI,IAAlBwL,EAAK4xB,WAAyBsP,EAAStP,SAAW5xB,EAAK4xB,UAElGm8E,EAAY/tG,EAAK3B,MAAS6iC,CAE3B,CAID,OAAO6sE,CAER,GAAC,CAAAz0G,IAAA,iBAAApG,MAED,SAAgBq+F,EAAMwI,GAErB,IAAM9kE,EAAQ,CAAC,EACTgvB,EAAY,CAAC,EAEnB,QAAczvD,IAAT+8F,EAAqB,CAEzB,IAAM5tD,EAAS,IAAI+uL,GACnB/uL,EAAOiyL,YAAa77H,GAEpB,IAAM,IAAI9iG,EAAI,EAAGwS,EAAI8nF,EAAK37F,OAAQqB,EAAIwS,EAAGxS,IAAO,CAE/C,IAAM+I,EAAOuxF,EAAMt6F,QAESzC,IAAvBygC,EAAOj1B,EAAK3B,QAEhB42B,EAAOj1B,EAAK3B,MAASslC,EAAO0tD,MAAOrxF,IAIpCikD,EAAWjkD,EAAK3B,MAAS42B,EAAOj1B,EAAK3B,KAEtC,CAED,CAEA,OAAO4lD,CAER,GAAC,CAAA3qD,IAAA,kBAAApG,MAED,SAAiBq+F,GAEhB,IAAM2U,EAAa,CAAC,EAEpB,QAAc1xG,IAAT+8F,EAEJ,IAAM,IAAIt6F,EAAI,EAAGA,EAAIs6F,EAAK37F,OAAQqB,IAAO,CAExC,IAAM+I,EAAOuxF,EAAMt6F,GAEbkqN,EAAO1vG,GAAcpgB,MAAOrxF,GAElCkmG,EAAYi7G,EAAK9iN,MAAS8iN,CAE3B,CAID,OAAOj7G,CAER,GAAC,CAAA5sG,IAAA,cAAApG,MAED,SAAaq+F,EAAMtyD,GAElB,IAGI0E,EAHEoP,EAAQ1/C,KACR6mG,EAAS,CAAC,EAqBhB,SAAS27H,EAAkBr1L,GAE1B,GAAsB,kBAAVA,EAAqB,CAEhC,IAAMplC,EAAMolC,EAIZ,OAzBF,SAAoBplC,GAInB,OAFA23C,EAAMrX,QAAQi1D,UAAWv1F,GAElBuoC,EAAO8sB,KAAMr1D,GAAK,WAExB23C,EAAMrX,QAAQo1D,QAAS11F,EAExB,QAAG5G,GAAW,WAEbu+C,EAAMrX,QAAQm1D,UAAWz1F,GACzB23C,EAAMrX,QAAQo1D,QAAS11F,EAExB,GAED,CAUS06N,CAFM,4BAA4BnnN,KAAMvT,GAAQA,EAAM23C,EAAMy9C,aAAep1F,EAInF,CAEC,OAAKolC,EAAMxgC,KAEH,CACNA,KAAM0lH,GAAellF,EAAMtrC,KAAMsrC,EAAMxgC,MACvC69B,MAAO2C,EAAM3C,MACbC,OAAQ0C,EAAM1C,QAKR,IAMV,CAEA,QAActpC,IAAT+8F,GAAsBA,EAAK37F,OAAS,EAAI,CAE5C,IAAM8lC,EAAU,IAAI4uL,GAAgBrrL,IAEpC0E,EAAS,IAAIqqL,GAAatyL,IACnBiqE,eAAgBtyG,KAAK8+F,aAE5B,IAAM,IAAIl7F,EAAI,EAAG8sG,EAAKxS,EAAK37F,OAAQqB,EAAI8sG,EAAI9sG,IAAO,CAEjD,IAAMupC,EAAQ+wD,EAAMt6F,GACdmE,EAAMolC,EAAMplC,IAElB,GAAKpE,MAAM0sC,QAAStoC,GAAQ,CAM3B,IAFA,IAAM26N,EAAa,GAETrwN,EAAI,EAAGyrG,EAAK/1G,EAAIxF,OAAQ8P,EAAIyrG,EAAIzrG,IAAO,CAEhD,IAEMswN,EAAoBH,EAFPz6N,EAAKsK,IAIG,OAAtBswN,IAECA,aAA6BrtG,iBAEjCotG,EAAWpgO,KAAMqgO,GAMjBD,EAAWpgO,KAAM,IAAI8kM,GAAau7B,EAAkBh2N,KAAMg2N,EAAkBn4L,MAAOm4L,EAAkBl4L,SAMxG,CAEAo8D,EAAQ15D,EAAMniC,MAAS,IAAI0qH,GAAQgtG,EAEpC,KAAO,CAIN,IAAMC,EAAoBH,EAAkBr1L,EAAMplC,KAClD8+F,EAAQ15D,EAAMniC,MAAS,IAAI0qH,GAAQitG,EAGpC,CAED,CAED,CAEA,OAAO97H,CAER,GAAC,CAAA5gG,IAAA,mBAAApG,MAAA,eAAA+iO,GAAAvwC,EAAAA,EAAAA,IAAAliE,EAAAA,EAAAA,KAAAC,MAED,SAAAyyG,EAAwB3kI,GAAI,IAAAx+C,EAAAmnD,EAAAv2D,EAOZkyL,EAAgBM,EAAAl/N,EAAA8sG,EAAAvjE,EAAAplC,EAAA26N,EAAArwN,EAAAyrG,EAAAilH,EAAAJ,EAAAK,EAAA,OAAA7yG,EAAAA,EAAAA,KAAAE,MAAC,SAAD4yG,GAAA,cAAAA,EAAAh7J,KAAAg7J,EAAA71K,MAAA,OAJd,GAIc01K,EAAA,WA4B9B,OA5B8BA,GAAAzwC,EAAAA,EAAAA,IAAAliE,EAAAA,EAAAA,KAAAC,MAA/B,SAAA8yG,EAAiC/1L,GAAK,IAAAg2L,EAAAnzL,EAAA,OAAAmgF,EAAAA,EAAAA,KAAAE,MAAA,SAAA+yG,GAAA,cAAAA,EAAAn7J,KAAAm7J,EAAAh2K,MAAA,UAEf,kBAAVjgB,EAAkB,CAAAi2L,EAAAh2K,KAAA,QAIwD,OAA/Epd,EAAO,4BAA4B10B,KAFnCvT,EAAMolC,GAE2CplC,EAAM23C,EAAMy9C,aAAep1F,EAAGq7N,EAAAh2K,KAAA,EAExE9c,EAAO4wL,UAAWlxL,GAAM,cAAAozL,EAAAhC,OAAA,SAAAgC,EAAAzvC,MAAA,WAIhCxmJ,EAAMxgC,KAAI,CAAAy2N,EAAAh2K,KAAA,gBAAAg2K,EAAAhC,OAAA,SAEP,CACNz0N,KAAM0lH,GAAellF,EAAMtrC,KAAMsrC,EAAMxgC,MACvC69B,MAAO2C,EAAM3C,MACbC,OAAQ0C,EAAM1C,SACd,eAAA24L,EAAAhC,OAAA,SAIM,MAAI,yBAAAgC,EAAA5nK,OAAA,GAAA0nK,EAAA,KAMbJ,EAAAhkO,MAAA,KAAA8B,UAAA,EA5Bc4hO,EAAgB,SAAAa,GAAA,OAAAP,EAAAhkO,MAAC,KAAD8B,UAAA,EALzB8+C,EAAQ1/C,KACR6mG,EAAS,CAAC,SAkCF1lG,IAAT+8F,GAAsBA,EAAK37F,OAAS,GAAC,CAAA0gO,EAAA71K,KAAA,UAEzC9c,EAAS,IAAIqqL,GAAa36N,KAAKqoC,UACxBiqE,eAAgBtyG,KAAK8+F,aAElBl7F,EAAI,EAAG8sG,EAAKxS,EAAK37F,OAAM,YAAEqB,EAAI8sG,GAAE,CAAAuyH,EAAA71K,KAAA,SAGnB,GADfjgB,EAAQ+wD,EAAMt6F,GACdmE,EAAMolC,EAAMplC,KAEbpE,MAAM0sC,QAAStoC,GAAK,CAAAk7N,EAAA71K,KAAA,SAIlBs1K,EAAa,GAETrwN,EAAI,EAAGyrG,EAAK/1G,EAAIxF,OAAM,aAAE8P,EAAIyrG,GAAE,CAAAmlH,EAAA71K,KAAA,SAEZ,OAArB21K,EAAah7N,EAAKsK,GAAG4wN,EAAA71K,KAAA,GAEKo1K,EAAkBO,GAAY,QAEnC,QAFrBJ,EAAiBM,EAAAtvC,QAIjBgvC,aAA6BrtG,iBAEjCotG,EAAWpgO,KAAMqgO,GAMjBD,EAAWpgO,KAAM,IAAI8kM,GAAau7B,EAAkBh2N,KAAMg2N,EAAkBn4L,MAAOm4L,EAAkBl4L,UAItG,QApBwCp4B,IAAI4wN,EAAA71K,KAAA,iBAwB9Cy5C,EAAQ15D,EAAMniC,MAAS,IAAI0qH,GAAQgtG,GAAaO,EAAA71K,KAAA,wBAAA61K,EAAA71K,KAAA,GAMhBo1K,EAAkBr1L,EAAMplC,KAAK,QAAvD46N,EAAiBM,EAAAtvC,KACvB9sF,EAAQ15D,EAAMniC,MAAS,IAAI0qH,GAAQitG,GAAoB,QA1Cd/+N,IAAIq/N,EAAA71K,KAAA,uBAAA61K,EAAA7B,OAAA,SAkDzCv6H,GAAM,yBAAAo8H,EAAAznK,OAAA,GAAAqnK,EAAA,UAEb,gBAAAS,GAAA,OAAAV,EAAA9jO,MAAA,KAAA8B,UAAA,EAhGA,IAgGA,CAAAqF,IAAA,gBAAApG,MAED,SAAeq+F,EAAM2I,GAEpB,SAAS08H,EAAe1jO,EAAOgC,GAE9B,MAAsB,kBAAVhC,EAA4BA,GAExCgD,QAAQC,KAAM,uEAAwEjD,GAE/EgC,EAAMhC,GAEd,CAEA,IAAM6mG,EAAW,CAAC,EAElB,QAAcvlG,IAAT+8F,EAEJ,IAAM,IAAIt6F,EAAI,EAAGwS,EAAI8nF,EAAK37F,OAAQqB,EAAIwS,EAAGxS,IAAO,CAE/C,IAAM+I,EAAOuxF,EAAMt6F,QAECzC,IAAfwL,EAAKwgC,OAETtqC,QAAQC,KAAM,+CAAgD6J,EAAK3B,WAItC7J,IAAzB0lG,EAAQl6F,EAAKwgC,QAEjBtqC,QAAQC,KAAM,sCAAuC6J,EAAKwgC,OAI3D,IAAMxmC,EAASkgG,EAAQl6F,EAAKwgC,OACtBA,EAAQxmC,EAAOgG,KAEjBs/B,OAAO,EAENtoC,MAAM0sC,QAASlD,IAEnBlB,EAAU,IAAI0xG,GAEQ,IAAjBxwG,EAAM5qC,SAAe0pC,EAAQ5L,aAAc,KAM/C4L,EAFIkB,GAASA,EAAMxgC,KAET,IAAIy6L,GAIJ,IAAIlwF,GAIV/pE,IAAQlB,EAAQ5L,aAAc,IAIpC4L,EAAQtlC,OAASA,EAEjBslC,EAAQjhC,KAAO2B,EAAK3B,UAED7J,IAAdwL,EAAKxM,OAAqB8rC,EAAQ9rC,KAAOwM,EAAKxM,WAE7BgB,IAAjBwL,EAAKgkC,UAAwB1E,EAAQ0E,QAAU4yL,EAAe52N,EAAKgkC,QAAS6yL,UAE5DriO,IAAhBwL,EAAKia,QAAuBqlB,EAAQrlB,OAAO4W,UAAW7wB,EAAKia,aAC3CzlB,IAAhBwL,EAAK6wD,QAAuBvxB,EAAQuxB,OAAOhgC,UAAW7wB,EAAK6wD,aAC3Cr8D,IAAhBwL,EAAKqzG,QAAuB/zE,EAAQ+zE,OAAOxiF,UAAW7wB,EAAKqzG,aACzC7+G,IAAlBwL,EAAK0xB,WAAyB4N,EAAQ5N,SAAW1xB,EAAK0xB,eAExCl9B,IAAdwL,EAAK0jH,OAETpkF,EAAQwqE,MAAQ8sH,EAAe52N,EAAK0jH,KAAM,GAAKozG,IAC/Cx3L,EAAQyqE,MAAQ6sH,EAAe52N,EAAK0jH,KAAM,GAAKozG,UAI3BtiO,IAAhBwL,EAAK09B,SAAuB4B,EAAQ5B,OAAS19B,EAAK09B,aACpClpC,IAAdwL,EAAK9K,OAAqBoqC,EAAQpqC,KAAO8K,EAAK9K,WAC5BV,IAAlBwL,EAAKy/B,WAAyBH,EAAQG,SAAWz/B,EAAKy/B,eAEnCjrC,IAAnBwL,EAAK0/B,YAA0BJ,EAAQI,UAAYk3L,EAAe52N,EAAK0/B,UAAWq3L,UAC/DviO,IAAnBwL,EAAK4/B,YAA0BN,EAAQM,UAAYg3L,EAAe52N,EAAK4/B,UAAWm3L,UAC9DviO,IAApBwL,EAAK05F,aAA2Bp6D,EAAQo6D,WAAa15F,EAAK05F,iBAE3CllG,IAAfwL,EAAK8/B,QAAsBR,EAAQQ,MAAQ9/B,EAAK8/B,YAEtBtrC,IAA1BwL,EAAK4pH,mBAAiCtqF,EAAQsqF,iBAAmB5pH,EAAK4pH,uBAC7Cp1H,IAAzBwL,EAAK6pH,kBAAgCvqF,EAAQuqF,gBAAkB7pH,EAAK6pH,sBAElDr1H,IAAlBwL,EAAK4xB,WAAyB0N,EAAQ1N,SAAW5xB,EAAK4xB,UAE3DmoE,EAAU/5F,EAAK3B,MAASihC,CAEzB,CAID,OAAOy6D,CAER,GAAC,CAAAzgG,IAAA,cAAApG,MAED,SAAa8M,EAAM+tG,EAAY9pD,EAAW81C,EAAUmM,GAEnD,IAAI70E,EA8DA6P,EAAU3wB,EA5Dd,SAASymN,EAAaxjO,GAQrB,YAN4BgB,IAAvBu5G,EAAYv6G,IAEhB0C,QAAQC,KAAM,yCAA0C3C,GAIlDu6G,EAAYv6G,EAEpB,CAEA,SAASyjO,EAAazjO,GAErB,QAAcgB,IAAThB,EAAL,CAEA,GAAKwD,MAAM0sC,QAASlwC,GAAS,CAI5B,IAFA,IAAMi/D,EAAQ,GAEJx7D,EAAI,EAAGwS,EAAIjW,EAAKoC,OAAQqB,EAAIwS,EAAGxS,IAAO,CAE/C,IAAMoH,EAAO7K,EAAMyD,QAEQzC,IAAtByvD,EAAW5lD,IAEfnI,QAAQC,KAAM,yCAA0CkI,GAIzDo0D,EAAM98D,KAAMsuD,EAAW5lD,GAExB,CAEA,OAAOo0D,CAER,CAQA,YAN2Bj+D,IAAtByvD,EAAWzwD,IAEf0C,QAAQC,KAAM,yCAA0C3C,GAIlDywD,EAAWzwD,EA9BwB,CAgC3C,CAEA,SAASs/N,EAAYz0N,GAQpB,YAN0B7J,IAArBulG,EAAU17F,IAEdnI,QAAQC,KAAM,wCAAyCkI,GAIjD07F,EAAU17F,EAElB,CAIA,OAAS2B,EAAK9K,MAEb,IAAK,QAEJm8B,EAAS,IAAIiU,QAEY9wC,IAApBwL,EAAK2iC,aAEJ3vC,OAAOkkO,UAAWl3N,EAAK2iC,YAE3BtR,EAAOsR,WAAa,IAAIwyD,GAAOn1F,EAAK2iC,YAIpCtR,EAAOsR,WAAamwL,EAAY9yN,EAAK2iC,kBAMbnuC,IAArBwL,EAAKgjC,cAET3R,EAAO2R,YAAc8vL,EAAY9yN,EAAKgjC,mBAIrBxuC,IAAbwL,EAAKwjI,MAEc,QAAlBxjI,EAAKwjI,IAAItuI,KAEbm8B,EAAOmyG,IAAM,IAAIqzD,GAAK72L,EAAKwjI,IAAItuC,MAAOl1F,EAAKwjI,IAAI9+F,KAAM1kC,EAAKwjI,IAAI5+F,KAEjC,YAAlB5kC,EAAKwjI,IAAItuI,OAEpBm8B,EAAOmyG,IAAM,IAAIozD,GAAS52L,EAAKwjI,IAAItuC,MAAOl1F,EAAKwjI,IAAImmD,WAMrD,MAED,IAAK,oBAEJt4J,EAAS,IAAIyc,GAAmB9tC,EAAK64C,IAAK74C,EAAK89C,OAAQ99C,EAAK0kC,KAAM1kC,EAAK4kC,UAEnDpwC,IAAfwL,EAAKqvI,QAAsBh+G,EAAOg+G,MAAQrvI,EAAKqvI,YACjC76I,IAAdwL,EAAKqyC,OAAqBhhB,EAAOghB,KAAOryC,EAAKqyC,WAC1B79C,IAAnBwL,EAAKsvI,YAA0Bj+G,EAAOi+G,UAAYtvI,EAAKsvI,gBACnC96I,IAApBwL,EAAKuvI,aAA2Bl+G,EAAOk+G,WAAavvI,EAAKuvI,iBAC3C/6I,IAAdwL,EAAKytC,OAAqBpc,EAAOoc,KAAO96C,OAAO4rD,OAAQ,CAAC,EAAGv+C,EAAKytC,OAErE,MAED,IAAK,qBAEJpc,EAAS,IAAI0nB,GAAoB/4C,EAAKk5C,KAAMl5C,EAAKi5C,MAAOj5C,EAAKo5C,IAAKp5C,EAAKq5C,OAAQr5C,EAAK0kC,KAAM1kC,EAAK4kC,UAE5EpwC,IAAdwL,EAAKqyC,OAAqBhhB,EAAOghB,KAAOryC,EAAKqyC,WAC/B79C,IAAdwL,EAAKytC,OAAqBpc,EAAOoc,KAAO96C,OAAO4rD,OAAQ,CAAC,EAAGv+C,EAAKytC,OAErE,MAED,IAAK,eAEJpc,EAAS,IAAIqgM,GAAc1xN,EAAKk1F,MAAOl1F,EAAK81F,WAE5C,MAED,IAAK,mBAEJzkE,EAAS,IAAIgkE,GAAkBr1F,EAAKk1F,MAAOl1F,EAAK81F,WAEhD,MAED,IAAK,aAEJzkE,EAAS,IAAIikE,GAAYt1F,EAAKk1F,MAAOl1F,EAAK81F,UAAW91F,EAAKmkB,SAAUnkB,EAAK41F,OAEzE,MAED,IAAK,gBAEJvkE,EAAS,IAAIygM,GAAe9xN,EAAKk1F,MAAOl1F,EAAK81F,UAAW91F,EAAK69B,MAAO79B,EAAK89B,QAEzE,MAED,IAAK,YAEJzM,EAAS,IAAIkkE,GAAWv1F,EAAKk1F,MAAOl1F,EAAK81F,UAAW91F,EAAKmkB,SAAUnkB,EAAKuM,MAAOvM,EAAK21F,SAAU31F,EAAK41F,OAEnG,MAED,IAAK,kBAEJvkE,EAAS,IAAI49L,GAAiBjvN,EAAKk1F,MAAOl1F,EAAKmhJ,YAAanhJ,EAAK81F,WAEjE,MAED,IAAK,aAEJzkE,GAAS,IAAIihM,IAAatqB,SAAUhoM,GAEpC,MAED,IAAK,cAEJkhC,EAAW81L,EAAah3N,EAAKkhC,UAC5B3wB,EAAW0mN,EAAaj3N,EAAKuQ,UAE9B8gB,EAAS,IAAI28E,GAAa9sE,EAAU3wB,QAEb/b,IAAlBwL,EAAK28H,WAAyBtrG,EAAOsrG,SAAW38H,EAAK28H,eACjCnoI,IAApBwL,EAAK48H,YAA2BvrG,EAAOurG,WAAW/rG,UAAW7wB,EAAK48H,iBAChDpoI,IAAlBwL,EAAK+xG,WAAyB1gF,EAAO0gF,SAAW/xG,EAAK+xG,UAE1D,MAED,IAAK,OAEJ7wE,EAAW81L,EAAah3N,EAAKkhC,UAC7B3wB,EAAW0mN,EAAaj3N,EAAKuQ,UAE7B8gB,EAAS,IAAImQ,GAAMN,EAAU3wB,GAE7B,MAED,IAAK,gBAEJ2wB,EAAW81L,EAAah3N,EAAKkhC,UAC7B3wB,EAAW0mN,EAAaj3N,EAAKuQ,UAC7B,IAAMta,EAAQ+J,EAAK/J,MACbk9B,EAAiBnzB,EAAKmzB,eACtBupG,EAAgB18H,EAAK08H,eAE3BrrG,EAAS,IAAI6B,GAAegO,EAAU3wB,EAAUta,IACzCk9B,eAAiB,IAAI+nK,GAA0B,IAAIp9L,aAAcq1B,EAAes/B,OAAS,SACzEj+D,IAAlBkoI,IAA8BrrG,EAAOqrG,cAAgB,IAAIw+D,GAA0B,IAAIp9L,aAAc4+H,EAAcjqE,OAASiqE,EAAct0B,WAE/I,MAED,IAAK,MAEJ/2E,EAAS,IAAI4nK,GAEb,MAED,IAAK,OAEJ5nK,EAAS,IAAI88E,GAAM6oH,EAAah3N,EAAKkhC,UAAY+1L,EAAaj3N,EAAKuQ,WAEnE,MAED,IAAK,WAEJ8gB,EAAS,IAAI+8E,GAAU4oH,EAAah3N,EAAKkhC,UAAY+1L,EAAaj3N,EAAKuQ,WAEvE,MAED,IAAK,eAEJ8gB,EAAS,IAAI68E,GAAc8oH,EAAah3N,EAAKkhC,UAAY+1L,EAAaj3N,EAAKuQ,WAE3E,MAED,IAAK,aACL,IAAK,SAEJ8gB,EAAS,IAAIg9E,GAAQ2oH,EAAah3N,EAAKkhC,UAAY+1L,EAAaj3N,EAAKuQ,WAErE,MAED,IAAK,SAEJ8gB,EAAS,IAAIinK,GAAQ2+B,EAAaj3N,EAAKuQ,WAEvC,MAED,IAAK,QAEJ8gB,EAAS,IAAIm9E,GAEb,MAED,IAAK,OAEJn9E,EAAS,IAAI8gF,GAEb,MAED,QAEC9gF,EAAS,IAAIxB,GA2Cf,GAvCAwB,EAAOhzB,KAAO2B,EAAK3B,UAEA7J,IAAdwL,EAAKxM,OAAqB69B,EAAO79B,KAAOwM,EAAKxM,WAE7BgB,IAAhBwL,EAAKkE,QAETmtB,EAAOntB,OAAO2sB,UAAW7wB,EAAKkE,aAEC1P,IAA1BwL,EAAK82B,mBAAiCzF,EAAOyF,iBAAmB92B,EAAK82B,kBACrEzF,EAAOyF,kBAAmBzF,EAAOntB,OAAO23H,UAAWxqG,EAAOv4B,SAAUu4B,EAAO9nB,WAAY8nB,EAAOrX,cAI5ExlB,IAAlBwL,EAAKlH,UAAyBu4B,EAAOv4B,SAAS+3B,UAAW7wB,EAAKlH,eAC5CtE,IAAlBwL,EAAK0xB,UAAyBL,EAAOK,SAASb,UAAW7wB,EAAK0xB,eAC1Cl9B,IAApBwL,EAAKuJ,YAA2B8nB,EAAO9nB,WAAWsnB,UAAW7wB,EAAKuJ,iBACnD/U,IAAfwL,EAAKga,OAAsBqX,EAAOrX,MAAM6W,UAAW7wB,EAAKga,aAIrCxlB,IAApBwL,EAAKy7H,aAA2BpqG,EAAOoqG,WAAaz7H,EAAKy7H,iBAClCjnI,IAAvBwL,EAAK07H,gBAA8BrqG,EAAOqqG,cAAgB17H,EAAK07H,eAE/D17H,EAAKsiJ,cAEiB9tJ,IAArBwL,EAAKsiJ,OAAOwnB,OAAqBz4I,EAAOixH,OAAOwnB,KAAO9pK,EAAKsiJ,OAAOwnB,WACvCt1K,IAA3BwL,EAAKsiJ,OAAOynB,aAA2B14I,EAAOixH,OAAOynB,WAAa/pK,EAAKsiJ,OAAOynB,iBACvDv1K,IAAvBwL,EAAKsiJ,OAAO5hI,SAAuB2Q,EAAOixH,OAAO5hI,OAAS1gB,EAAKsiJ,OAAO5hI,aAC9ClsB,IAAxBwL,EAAKsiJ,OAAO0nB,SAAwB34I,EAAOixH,OAAO0nB,QAAQn5I,UAAW7wB,EAAKsiJ,OAAO0nB,cAC1Dx1K,IAAvBwL,EAAKsiJ,OAAOl9G,SAAuB/T,EAAOixH,OAAOl9G,OAAS/xC,KAAK6hO,YAAal1N,EAAKsiJ,OAAOl9G,eAIxE5wC,IAAjBwL,EAAK8vC,UAAwBze,EAAOye,QAAU9vC,EAAK8vC,cAC5Bt7C,IAAvBwL,EAAKmpC,gBAA8B9X,EAAO8X,cAAgBnpC,EAAKmpC,oBAC1C30C,IAArBwL,EAAK27H,cAA4BtqG,EAAOsqG,YAAc37H,EAAK27H,kBACzCnnI,IAAlBwL,EAAK4xB,WAAyBP,EAAOO,SAAW5xB,EAAK4xB,eACrCp9B,IAAhBwL,EAAKg6H,SAAuB3oG,EAAO2oG,OAAOxyE,KAAOxnD,EAAKg6H,aAEpCxlI,IAAlBwL,EAAKo3B,SAIT,IAFA,IAAMA,EAAWp3B,EAAKo3B,SAEZngC,EAAI,EAAGA,EAAImgC,EAASxhC,OAAQqB,IAErCo6B,EAAOlW,IAAK9nB,KAAK6hO,YAAa99L,EAAUngC,GAAK82G,EAAY9pD,EAAW81C,EAAUmM,IAMhF,QAAyB1xG,IAApBwL,EAAKkmG,WAIT,IAFA,IAAMixH,EAAmBn3N,EAAKkmG,WAEpBjvG,EAAI,EAAGA,EAAIkgO,EAAiBvhO,OAAQqB,IAAO,CAEpD,IAAMoH,EAAO84N,EAAkBlgO,GAE/Bo6B,EAAO60E,WAAWvwG,KAAMuwG,EAAY7nG,GAErC,CAID,GAAmB,QAAd2B,EAAK9K,KAAiB,MAEDV,IAApBwL,EAAKowC,aAA2B/e,EAAO+e,WAAapwC,EAAKowC,YAI9D,IAFA,IAAM8pI,EAASl6K,EAAKk6K,OAEVzwK,EAAI,EAAGA,EAAIywK,EAAOtkL,OAAQ6T,IAAO,CAE1C,IAAM4rL,EAAQnb,EAAQzwK,GAChBs7C,EAAQ1zB,EAAO4qG,oBAAqB,OAAQo5D,EAAMhkK,aAEzC78B,IAAVuwD,GAEJ1zB,EAAOioK,SAAUv0I,EAAOswI,EAAMlxK,SAIhC,CAED,CAEA,OAAOkN,CAER,GAAC,CAAA/3B,IAAA,gBAAApG,MAED,SAAem+B,EAAQirG,GAEmB,IAApC3pI,OAAO4G,KAAM+iI,GAAY1mI,QAE9By7B,EAAO6yB,UAAU,SAAWa,GAE3B,IAA6B,IAAxBA,EAAM8hD,oBAA6CryG,IAAnBuwD,EAAMgtD,SAAyB,CAEnE,IAAMA,EAAWuqB,EAAWv3E,EAAMgtD,eAEhBv9G,IAAbu9G,EAEJ77G,QAAQC,KAAM,mDAAoD4uD,EAAMgtD,UAIxEhtD,EAAMruD,KAAMq7G,EAAUhtD,EAAM63E,WAI9B,CAED,GAED,KAACq3F,CAAA,CA99BgB,CAAS9gI,IAk+BrB0jI,GAAkB,CACvBr8G,UAAWA,GACXv2E,sBAAuBA,GACvBw2E,sBAAuBA,GACvBv2E,iCAAkCA,GAClCw2E,iCAAkCA,GAClCC,wBAAyBA,IAGpBm8G,GAAmB,CACxBl1H,eAAgBA,GAChBF,oBAAqBA,GACrBC,uBAAwBA,IAGnBo1H,GAAiB,CACtB31H,cAAeA,GACfC,2BAA4BA,GAC5BE,0BAA2BA,GAC3B5hE,aAAcA,GACd2hE,0BAA2BA,GAC3BE,yBAA0BA,IAGrBkE,GAAiB,SAAA0xH,IAAA17N,EAAAA,EAAAA,GAAAgqG,EAAA0xH,GAAA,IAAAC,GAAAz7N,EAAAA,EAAAA,GAAA8pG,GAEtB,SAAAA,EAAahqE,GAAU,IAAA47L,EAkBsB,OAlBtBv7N,EAAAA,EAAAA,GAAA,KAAA2pG,IAEtB4xH,EAAAD,EAAA5kO,KAAA,KAAOipC,IAEF2uE,qBAAsB,EAEO,qBAAtB7E,mBAEXtvG,QAAQC,KAAM,+DAIO,qBAAV21N,OAEX51N,QAAQC,KAAM,mDAIfmhO,EAAKj8N,QAAU,CAAEuuH,iBAAkB,QAAS0tG,CAE7C,CAqEC,OArEAt5N,EAAAA,EAAAA,GAAA0nG,EAAA,EAAApsG,IAAA,aAAApG,MAED,SAAYmI,GAIX,OAFAhI,KAAKgI,QAAUA,EAERhI,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAMkI,EAAK6jC,EAAQC,EAAYC,QAEjB3qC,IAAR4G,IAAoBA,EAAM,SAEZ5G,IAAdnB,KAAKgwC,OAAqBjoC,EAAM/H,KAAKgwC,KAAOjoC,GAEjDA,EAAM/H,KAAKqoC,QAAQssE,WAAY5sG,GAE/B,IAAM23C,EAAQ1/C,KAERq6G,EAAS08G,GAAMvyN,IAAKuD,GAE1B,QAAgB5G,IAAXk5G,EAYJ,OAVA36D,EAAMrX,QAAQi1D,UAAWv1F,GAEzBqmD,YAAY,WAENxiB,GAASA,EAAQyuE,GAEtB36D,EAAMrX,QAAQo1D,QAAS11F,EAExB,GAAG,GAEIsyG,EAIR,IAAM6pH,EAAe,CAAC,EACtBA,EAAa3L,YAAqC,cAArBv4N,KAAK8+F,YAAgC,cAAgB,UAClFolI,EAAa7L,QAAUr4N,KAAK69F,cAE5B46H,MAAO1wN,EAAKm8N,GAAeh2K,MAAM,SAAWiP,GAE3C,OAAOA,EAAIz1D,MAEZ,IAAIwmD,MAAM,SAAWxmD,GAEpB,OAAOyqG,kBAAmBzqG,EAAMpI,OAAO4rD,OAAQxL,EAAM13C,QAAS,CAAEm8N,qBAAsB,SAEvF,IAAIj2K,MAAM,SAAW+oD,GAEpB8/G,GAAMjvM,IAAK/f,EAAKkvG,GAEXrrE,GAASA,EAAQqrE,GAEtBv3D,EAAMrX,QAAQo1D,QAAS11F,EAExB,IAAIsmD,OAAO,SAAWphD,GAEhB6+B,GAAUA,EAAS7+B,GAExByyC,EAAMrX,QAAQm1D,UAAWz1F,GACzB23C,EAAMrX,QAAQo1D,QAAS11F,EAExB,IAEA23C,EAAMrX,QAAQi1D,UAAWv1F,EAE1B,KAACsqG,CAAA,CA3FqB,CAASvS,IAiG1BskI,GAAe,CAEpBnvG,WAAY,WAQX,YANkB9zH,IAAbkrE,KAEJA,GAAW,IAAMtgB,OAAOq4K,cAAgBr4K,OAAOs4K,qBAIzCh4J,EAER,EAEA40E,WAAY,SAAWphJ,GAEtBwsE,GAAWxsE,CAEZ,GAIKykO,GAAW,SAAAC,IAAAl8N,EAAAA,EAAAA,GAAAi8N,EAAAC,GAAA,IAAAC,GAAAj8N,EAAAA,EAAAA,GAAA+7N,GAEhB,SAAAA,EAAaj8L,GAAU,OAAA3/B,EAAAA,EAAAA,GAAA,KAAA47N,GAAAE,EAAAplO,KAAA,KAEfipC,EAER,CA4CC,OA5CA19B,EAAAA,EAAAA,GAAA25N,EAAA,EAAAr+N,IAAA,OAAApG,MAED,SAAMkI,EAAK6jC,EAAQC,EAAYC,GAE9B,IAAM4T,EAAQ1/C,KAERswC,EAAS,IAAIotD,GAAY19F,KAAKqoC,SACpCiI,EAAOqtD,gBAAiB,eACxBrtD,EAAOI,QAAS1wC,KAAKgwC,MACrBM,EAAOstD,iBAAkB59F,KAAK69F,eAC9BvtD,EAAOwtD,mBAAoB99F,KAAK+9F,iBAChCztD,EAAO8sB,KAAMr1D,GAAK,SAAWX,GAE5B,IAIC,IAAMq9N,EAAar9N,EAAOzG,MAAO,GAEjByjO,GAAanvG,aACrByvG,gBAAiBD,GAAY,SAAWE,GAE/C/4L,EAAQ+4L,EAET,GAED,CAAE,MAAQ13N,GAEJ6+B,EAEJA,EAAS7+B,GAITpK,QAAQkC,MAAOkI,GAIhByyC,EAAMrX,QAAQm1D,UAAWz1F,EAE1B,CAED,GAAG8jC,EAAYC,EAEhB,KAACw4L,CAAA,CAlDe,CAASxkI,IAsDpB8kI,GAAoB,SAAAC,IAAAx8N,EAAAA,EAAAA,GAAAu8N,EAAAC,GAAA,IAAAC,GAAAv8N,EAAAA,EAAAA,GAAAq8N,GAEzB,SAAAA,EAAa/2E,EAAUC,GAA6B,IAAAi3E,EAAhBtiI,EAAS7hG,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAC8H,EAAAA,EAAAA,GAAA,KAAAk8N,IAEhDG,EAAAD,EAAA1lO,KAAA,UAAO+B,EAAWshG,IAEbuiI,wBAAyB,EAE9B,IAAMrwG,GAAS,IAAI7yB,IAAQr9F,IAAKopJ,GAC1Bj5B,GAAS,IAAI9yB,IAAQr9F,IAAKqpJ,GAE1Bm3E,EAAM,IAAI3oM,GAASq4F,EAAO3hH,EAAG2hH,EAAOr9G,EAAGq9G,EAAOviH,GAC9C0gC,EAAS,IAAIxW,GAASs4F,EAAO5hH,EAAG4hH,EAAOt9G,EAAGs9G,EAAOxiH,GAGjDs9L,EAAKt7L,KAAKC,KAAMD,KAAKyF,IACrB+B,EAAK8zL,EAAKt7L,KAAKC,KAAM,KAG8C,OADzE0wN,EAAK1yI,GAAGikF,aAAc,GAAIryK,KAAMghO,GAAMn9M,IAAKgrB,GAASwB,eAAgBo7J,GACpEq1B,EAAK1yI,GAAGikF,aAAc,GAAIryK,KAAMghO,GAAMlkL,IAAKjO,GAASwB,eAAgB14B,GAAKmpN,CAE1E,CAAC,OAAAp6N,EAAAA,EAAAA,GAAAi6N,EAAA,CArBwB,CAAS3F,IAyB7BiG,GAAiB,SAAAC,IAAA98N,EAAAA,EAAAA,GAAA68N,EAAAC,GAAA,IAAAC,GAAA78N,EAAAA,EAAAA,GAAA28N,GAEtB,SAAAA,EAAarjI,GAAuB,IAAAwjI,EAAhB5iI,EAAS7hG,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAC8H,EAAAA,EAAAA,GAAA,KAAAw8N,IAEhCG,EAAAD,EAAAhmO,KAAA,UAAO+B,EAAWshG,IAEb6iI,qBAAsB,EAE3B,IAAM3wG,GAAS,IAAI7yB,IAAQr9F,IAAKo9F,GAGyE,OAAzGwjI,EAAKhzI,GAAGikF,aAAc,GAAI7xK,IAAKkwH,EAAO3hH,EAAG2hH,EAAOr9G,EAAGq9G,EAAOviH,GAAIkiC,eAAgB,EAAIlgC,KAAKC,KAAMD,KAAKyF,KAAOwrN,CAE1G,CAAC,OAAA16N,EAAAA,EAAAA,GAAAu6N,EAAA,CAbqB,CAASjG,IAiB1BsG,GAA0B,IAAIhpM,GAC9BipM,GAAyB,IAAIjpM,GAC7BkpM,GAAkC,IAAIlpM,GAEtCmpM,GAAY,WAEjB,SAAAA,KAAch9N,EAAAA,EAAAA,GAAA,KAAAg9N,GAEb1lO,KAAK6B,KAAO,eAEZ7B,KAAKyqD,OAAS,EAEdzqD,KAAK2lO,OAAS,KAEd3lO,KAAK0wL,QAAU,IAAIj2I,GACnBz6C,KAAK0wL,QAAQ/pD,OAAOksC,OAAQ,GAC5B7yK,KAAK0wL,QAAQjtJ,kBAAmB,EAEhCzjC,KAAK2wL,QAAU,IAAIl2I,GACnBz6C,KAAK2wL,QAAQhqD,OAAOksC,OAAQ,GAC5B7yK,KAAK2wL,QAAQltJ,kBAAmB,EAEhCzjC,KAAKkkH,OAAS,CACb83B,MAAO,KACPx2F,IAAK,KACLiF,OAAQ,KACRpZ,KAAM,KACNE,IAAK,KACLyN,KAAM,KACN2mL,OAAQ,KAGV,CA2DC,OA3DAh7N,EAAAA,EAAAA,GAAA+6N,EAAA,EAAAz/N,IAAA,SAAApG,MAED,SAAQkyC,GAEP,IAAMnQ,EAAQ5hC,KAAKkkH,OAMnB,GAJoBtiF,EAAMo6G,QAAUjqG,EAAOiqG,OAASp6G,EAAM4jB,MAAQzT,EAAOyT,KACxE5jB,EAAM6oB,SAAW1Y,EAAO0Y,OAASzqD,KAAKyqD,QAAU7oB,EAAMyP,OAASU,EAAOV,MACtEzP,EAAM2P,MAAQQ,EAAOR,KAAO3P,EAAMod,OAASjN,EAAOiN,MAAQpd,EAAM+jM,SAAW3lO,KAAK2lO,OAE9D,CAElB/jM,EAAMo6G,MAAQjqG,EAAOiqG,MACrBp6G,EAAM4jB,IAAMzT,EAAOyT,IACnB5jB,EAAM6oB,OAAS1Y,EAAO0Y,OAASzqD,KAAKyqD,OACpC7oB,EAAMyP,KAAOU,EAAOV,KACpBzP,EAAM2P,IAAMQ,EAAOR,IACnB3P,EAAMod,KAAOjN,EAAOiN,KACpBpd,EAAM+jM,OAAS3lO,KAAK2lO,OAKpBF,GAAkBxhO,KAAM8tC,EAAO0J,kBAC/B,IAGImqL,EAAMC,EAHJC,EAAalkM,EAAM+jM,OAAS,EAC5BI,EAAqBD,EAAalkM,EAAMyP,KAAOzP,EAAMo6G,MACrDgqF,EAASpkM,EAAMyP,KAAOj9B,KAAKmxC,IAAK8nE,GAAUzrF,EAAM4jB,IAAM,IAAU5jB,EAAMod,KAK5EwmL,GAAS/0N,SAAU,KAASq1N,EAC5BP,GAAU90N,SAAU,IAAOq1N,EAI3BF,GAASI,EAAOpkM,EAAM6oB,OAASs7K,EAC/BF,EAAOG,EAAOpkM,EAAM6oB,OAASs7K,EAE7BN,GAAkBh1N,SAAU,GAAM,EAAImxB,EAAMyP,MAASw0L,EAAOD,GAC5DH,GAAkBh1N,SAAU,IAAQo1N,EAAOD,IAAWC,EAAOD,GAE7D5lO,KAAK0wL,QAAQj1I,iBAAiBx3C,KAAMwhO,IAIpCG,GAASI,EAAOpkM,EAAM6oB,OAASs7K,EAC/BF,EAAOG,EAAOpkM,EAAM6oB,OAASs7K,EAE7BN,GAAkBh1N,SAAU,GAAM,EAAImxB,EAAMyP,MAASw0L,EAAOD,GAC5DH,GAAkBh1N,SAAU,IAAQo1N,EAAOD,IAAWC,EAAOD,GAE7D5lO,KAAK2wL,QAAQl1I,iBAAiBx3C,KAAMwhO,GAErC,CAEAzlO,KAAK0wL,QAAQ11I,YAAY/2C,KAAM8tC,EAAOiJ,aAAcU,SAAU8pL,IAC9DxlO,KAAK2wL,QAAQ31I,YAAY/2C,KAAM8tC,EAAOiJ,aAAcU,SAAU6pL,GAE/D,KAACG,CAAA,CAvFgB,GA2FZO,GAAK,WAEV,SAAAA,IAAgC,IAAnBC,IAAStlO,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,KAAAA,UAAA,IAAO8H,EAAAA,EAAAA,GAAA,KAAAu9N,GAE5BjmO,KAAKkmO,UAAYA,EAEjBlmO,KAAK45F,UAAY,EACjB55F,KAAK28D,QAAU,EACf38D,KAAKy7D,YAAc,EAEnBz7D,KAAKy9D,SAAU,CAEhB,CAmDC,OAnDA9yD,EAAAA,EAAAA,GAAAs7N,EAAA,EAAAhgO,IAAA,QAAApG,MAED,WAECG,KAAK45F,UAAYrhE,KAEjBv4B,KAAK28D,QAAU38D,KAAK45F,UACpB55F,KAAKy7D,YAAc,EACnBz7D,KAAKy9D,SAAU,CAEhB,GAAC,CAAAx3D,IAAA,OAAApG,MAED,WAECG,KAAKmmO,iBACLnmO,KAAKy9D,SAAU,EACfz9D,KAAKkmO,WAAY,CAElB,GAAC,CAAAjgO,IAAA,iBAAApG,MAED,WAGC,OADAG,KAAK08D,WACE18D,KAAKy7D,WAEb,GAAC,CAAAx1D,IAAA,WAAApG,MAED,WAEC,IAAI+hE,EAAO,EAEX,GAAK5hE,KAAKkmO,YAAelmO,KAAKy9D,QAG7B,OADAz9D,KAAKsH,QACE,EAIR,GAAKtH,KAAKy9D,QAAU,CAEnB,IAAM2oK,EAAU7tM,KAEhBqpC,GAASwkK,EAAUpmO,KAAK28D,SAAY,IACpC38D,KAAK28D,QAAUypK,EAEfpmO,KAAKy7D,aAAemG,CAErB,CAEA,OAAOA,CAER,KAACqkK,CAAA,CA/DS,GAmEX,SAAS1tM,KAER,OAAgC,qBAAhBD,YAA8BG,KAAOH,aAAcC,KAEpE,CAEA,IAAM8tM,GAA4B,IAAI/pM,GAChCgqM,GAA8B,IAAIjtM,GAClCktM,GAAyB,IAAIjqM,GAC7BkqM,GAA+B,IAAIlqM,GAEnCmqM,GAAa,SAAAC,IAAAr+N,EAAAA,EAAAA,GAAAo+N,EAAAC,GAAA,IAAAC,GAAAp+N,EAAAA,EAAAA,GAAAk+N,GAElB,SAAAA,IAAc,IAAAG,EAiBa,OAjBbl+N,EAAAA,EAAAA,GAAA,KAAA+9N,IAEbG,EAAAD,EAAAvnO,KAAA,OAEKyC,KAAO,gBAEZ+kO,EAAK1hO,QAAUk/N,GAAanvG,aAE5B2xG,EAAKC,KAAOD,EAAK1hO,QAAQ4hO,aACzBF,EAAKC,KAAK7+L,QAAS4+L,EAAK1hO,QAAQ6hO,aAEhCH,EAAKpxK,OAAS,KAEdoxK,EAAKI,UAAY,EAIjBJ,EAAKK,OAAS,IAAIhB,GAAQW,CAE3B,CAoGC,OApGAj8N,EAAAA,EAAAA,GAAA87N,EAAA,EAAAxgO,IAAA,WAAApG,MAED,WAEC,OAAOG,KAAK6mO,IAEb,GAAC,CAAA5gO,IAAA,eAAApG,MAED,WAWC,OATqB,OAAhBG,KAAKw1D,SAETx1D,KAAK6mO,KAAKhgK,WAAY7mE,KAAKw1D,QAC3Bx1D,KAAKw1D,OAAOqR,WAAY7mE,KAAKkF,QAAQ6hO,aACrC/mO,KAAK6mO,KAAK7+L,QAAShoC,KAAKkF,QAAQ6hO,aAChC/mO,KAAKw1D,OAAS,MAIRx1D,IAER,GAAC,CAAAiG,IAAA,YAAApG,MAED,WAEC,OAAOG,KAAKw1D,MAEb,GAAC,CAAAvvD,IAAA,YAAApG,MAED,SAAWA,GAiBV,OAfqB,OAAhBG,KAAKw1D,QAETx1D,KAAK6mO,KAAKhgK,WAAY7mE,KAAKw1D,QAC3Bx1D,KAAKw1D,OAAOqR,WAAY7mE,KAAKkF,QAAQ6hO,cAIrC/mO,KAAK6mO,KAAKhgK,WAAY7mE,KAAKkF,QAAQ6hO,aAIpC/mO,KAAKw1D,OAAS31D,EACdG,KAAK6mO,KAAK7+L,QAAShoC,KAAKw1D,QACxBx1D,KAAKw1D,OAAOxtB,QAAShoC,KAAKkF,QAAQ6hO,aAE3B/mO,IAER,GAAC,CAAAiG,IAAA,kBAAApG,MAED,WAEC,OAAOG,KAAK6mO,KAAKA,KAAKhnO,KAEvB,GAAC,CAAAoG,IAAA,kBAAApG,MAED,SAAiBA,GAIhB,OAFAG,KAAK6mO,KAAKA,KAAKK,gBAAiBrnO,EAAOG,KAAKkF,QAAQiiO,YAAa,KAE1DnnO,IAER,GAAC,CAAAiG,IAAA,oBAAApG,MAED,SAAmBoqB,IAElB8hB,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAy6L,EAAAtnO,WAAA,0BAAAC,KAAA,KAAyB6qB,GAEzB,IAAMzoB,EAAWxB,KAAKkF,QAAQ1D,SACxB85C,EAAKt7C,KAAKs7C,GAQhB,GANAt7C,KAAKgnO,UAAYhnO,KAAKinO,OAAOvqK,WAE7B18D,KAAKg7C,YAAYwtF,UAAW69F,GAAaC,GAAeC,IAExDC,GAAe/hO,IAAK,EAAG,GAAK,GAAIu8C,gBAAiBslL,IAE5C9kO,EAAS4lO,UAAY,CAIzB,IAAMrU,EAAU/yN,KAAKkF,QAAQiiO,YAAcnnO,KAAKgnO,UAEhDxlO,EAAS4lO,UAAUC,wBAAyBhB,GAAYr3N,EAAG+jN,GAC3DvxN,EAAS8lO,UAAUD,wBAAyBhB,GAAYp3N,EAAG8jN,GAC3DvxN,EAAS+lO,UAAUF,wBAAyBhB,GAAYn3N,EAAG6jN,GAC3DvxN,EAASgmO,SAASH,wBAAyBb,GAAex3N,EAAG+jN,GAC7DvxN,EAASimO,SAASJ,wBAAyBb,GAAev3N,EAAG8jN,GAC7DvxN,EAASkmO,SAASL,wBAAyBb,GAAet3N,EAAG6jN,GAC7DvxN,EAASmmO,IAAIN,wBAAyB/rL,EAAGtsC,EAAG+jN,GAC5CvxN,EAASomO,IAAIP,wBAAyB/rL,EAAGrsC,EAAG8jN,GAC5CvxN,EAASqmO,IAAIR,wBAAyB/rL,EAAGpsC,EAAG6jN,EAE7C,MAECvxN,EAASsmO,YAAazB,GAAYr3N,EAAGq3N,GAAYp3N,EAAGo3N,GAAYn3N,GAChE1N,EAASumO,eAAgBvB,GAAex3N,EAAGw3N,GAAev3N,EAAGu3N,GAAet3N,EAAGosC,EAAGtsC,EAAGssC,EAAGrsC,EAAGqsC,EAAGpsC,EAIhG,KAACu3N,CAAA,CAzHiB,CAASjqM,IA6HtBwrM,GAAK,SAAAC,IAAA5/N,EAAAA,EAAAA,GAAA2/N,EAAAC,GAAA,IAAAC,GAAA3/N,EAAAA,EAAAA,GAAAy/N,GAEV,SAAAA,EAAaxmO,GAAW,IAAA2mO,EA+BL,OA/BKz/N,EAAAA,EAAAA,GAAA,KAAAs/N,IAEvBG,EAAAD,EAAA9oO,KAAA,OAEKyC,KAAO,QAEZsmO,EAAK3mO,SAAWA,EAChB2mO,EAAKjjO,QAAU1D,EAAS0D,QAExBijO,EAAKtB,KAAOsB,EAAKjjO,QAAQ4hO,aACzBqB,EAAKtB,KAAK7+L,QAASxmC,EAAS4mO,YAE5BD,EAAKE,UAAW,EAEhBF,EAAK/gO,OAAS,KACd+gO,EAAKG,OAAS,EACdH,EAAK5iM,MAAO,EACZ4iM,EAAKI,UAAY,EACjBJ,EAAKK,QAAU,EACfL,EAAKvhN,OAAS,EACduhN,EAAKpT,cAAW5zN,EAChBgnO,EAAKM,aAAe,EACpBN,EAAKO,WAAY,EACjBP,EAAKQ,oBAAqB,EAC1BR,EAAKxhO,OAAS,KACdwhO,EAAKS,WAAa,QAElBT,EAAKU,WAAa,EAClBV,EAAKW,UAAY,EACjBX,EAAKY,YAAa,EAElBZ,EAAKa,QAAU,GAAGb,CAEnB,CA6VC,OA7VAx9N,EAAAA,EAAAA,GAAAq9N,EAAA,EAAA/hO,IAAA,YAAApG,MAED,WAEC,OAAOG,KAAK6mO,IAEb,GAAC,CAAA5gO,IAAA,gBAAApG,MAED,SAAeopO,GAOd,OALAjpO,KAAK2oO,oBAAqB,EAC1B3oO,KAAK4oO,WAAa,YAClB5oO,KAAK2G,OAASsiO,EACdjpO,KAAKgoC,UAEEhoC,IAER,GAAC,CAAAiG,IAAA,wBAAApG,MAED,SAAuBqpO,GAOtB,OALAlpO,KAAK2oO,oBAAqB,EAC1B3oO,KAAK4oO,WAAa,YAClB5oO,KAAK2G,OAAS3G,KAAKkF,QAAQikO,yBAA0BD,GACrDlpO,KAAKgoC,UAEEhoC,IAER,GAAC,CAAAiG,IAAA,uBAAApG,MAED,SAAsBupO,GAOrB,OALAppO,KAAK2oO,oBAAqB,EAC1B3oO,KAAK4oO,WAAa,kBAClB5oO,KAAK2G,OAAS3G,KAAKkF,QAAQmkO,wBAAyBD,GACpDppO,KAAKgoC,UAEEhoC,IAER,GAAC,CAAAiG,IAAA,YAAApG,MAED,SAAW8kO,GAOV,OALA3kO,KAAKoH,OAASu9N,EACd3kO,KAAK4oO,WAAa,SAEb5oO,KAAKqoO,UAAWroO,KAAKspO,OAEnBtpO,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,WAAkB,IAAZg7F,EAAKj6F,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAEb,IAAwB,IAAnBZ,KAAK0oO,UAAV,CAOA,IAAiC,IAA5B1oO,KAAK2oO,mBAAV,CAOA3oO,KAAK6oO,WAAa7oO,KAAKkF,QAAQiiO,YAActsI,EAE7C,IAAMl0F,EAAS3G,KAAKkF,QAAQqkO,qBAe5B,OAdA5iO,EAAOS,OAASpH,KAAKoH,OACrBT,EAAO4+B,KAAOvlC,KAAKulC,KACnB5+B,EAAO4hO,UAAYvoO,KAAKuoO,UACxB5hO,EAAO6hO,QAAUxoO,KAAKwoO,QACtB7hO,EAAO6iO,QAAUxpO,KAAKypO,QAAQpmO,KAAMrD,MACpC2G,EAAOW,MAAOtH,KAAK6oO,WAAY7oO,KAAK8oO,UAAY9oO,KAAK4mB,OAAQ5mB,KAAK+0N,UAElE/0N,KAAK0oO,WAAY,EAEjB1oO,KAAK2G,OAASA,EAEd3G,KAAK0pO,UAAW1pO,KAAKsoO,QACrBtoO,KAAK2pO,gBAAiB3pO,KAAKyoO,cAEpBzoO,KAAKgoC,SAnBZ,CAHCnlC,QAAQC,KAAM,mDAJf,MAHCD,QAAQC,KAAM,yCA+BhB,GAAC,CAAAmD,IAAA,QAAApG,MAED,WAEC,IAAiC,IAA5BG,KAAK2oO,mBA4BV,OArBwB,IAAnB3oO,KAAK0oO,YAIT1oO,KAAK8oO,WAAa10N,KAAKuC,IAAK3W,KAAKkF,QAAQiiO,YAAcnnO,KAAK6oO,WAAY,GAAM7oO,KAAKyoO,cAEhE,IAAdzoO,KAAKulC,OAITvlC,KAAK8oO,UAAY9oO,KAAK8oO,WAAc9oO,KAAK+0N,UAAY/0N,KAAKoH,OAAO2tN,WAIlE/0N,KAAK2G,OAAO60D,OACZx7D,KAAK2G,OAAO6iO,QAAU,KAEtBxpO,KAAK0oO,WAAY,GAIX1oO,KA1BN6C,QAAQC,KAAM,mDA4BhB,GAAC,CAAAmD,IAAA,OAAApG,MAED,WAEC,IAAiC,IAA5BG,KAAK2oO,mBAaV,OANA3oO,KAAK8oO,UAAY,EAEjB9oO,KAAK2G,OAAO60D,OACZx7D,KAAK2G,OAAO6iO,QAAU,KACtBxpO,KAAK0oO,WAAY,EAEV1oO,KAXN6C,QAAQC,KAAM,mDAahB,GAAC,CAAAmD,IAAA,UAAApG,MAED,WAEC,GAAKG,KAAKgpO,QAAQzmO,OAAS,EAAI,CAE9BvC,KAAK2G,OAAOqhC,QAAShoC,KAAKgpO,QAAS,IAEnC,IAAM,IAAIplO,EAAI,EAAGwS,EAAIpW,KAAKgpO,QAAQzmO,OAAQqB,EAAIwS,EAAGxS,IAEhD5D,KAAKgpO,QAASplO,EAAI,GAAIokC,QAAShoC,KAAKgpO,QAASplO,IAI9C5D,KAAKgpO,QAAShpO,KAAKgpO,QAAQzmO,OAAS,GAAIylC,QAAShoC,KAAK4pO,YAEvD,MAEC5pO,KAAK2G,OAAOqhC,QAAShoC,KAAK4pO,aAM3B,OAFA5pO,KAAK+oO,YAAa,EAEX/oO,IAER,GAAC,CAAAiG,IAAA,aAAApG,MAED,WAEC,GAAKG,KAAKgpO,QAAQzmO,OAAS,EAAI,CAE9BvC,KAAK2G,OAAOkgE,WAAY7mE,KAAKgpO,QAAS,IAEtC,IAAM,IAAIplO,EAAI,EAAGwS,EAAIpW,KAAKgpO,QAAQzmO,OAAQqB,EAAIwS,EAAGxS,IAEhD5D,KAAKgpO,QAASplO,EAAI,GAAIijE,WAAY7mE,KAAKgpO,QAASplO,IAIjD5D,KAAKgpO,QAAShpO,KAAKgpO,QAAQzmO,OAAS,GAAIskE,WAAY7mE,KAAK4pO,YAE1D,MAEC5pO,KAAK2G,OAAOkgE,WAAY7mE,KAAK4pO,aAM9B,OAFA5pO,KAAK+oO,YAAa,EAEX/oO,IAER,GAAC,CAAAiG,IAAA,aAAApG,MAED,WAEC,OAAOG,KAAKgpO,OAEb,GAAC,CAAA/iO,IAAA,aAAApG,MAED,SAAYA,GAgBX,OAdOA,IAAQA,EAAQ,KAEE,IAApBG,KAAK+oO,YAET/oO,KAAK6mE,aACL7mE,KAAKgpO,QAAUnpO,EAAMc,QACrBX,KAAKgoC,WAILhoC,KAAKgpO,QAAUnpO,EAAMc,QAIfX,IAER,GAAC,CAAAiG,IAAA,YAAApG,MAED,SAAWA,GAIV,GAFAG,KAAKsoO,OAASzoO,OAEcsB,IAAvBnB,KAAK2G,OAAO2hO,OAQjB,OANwB,IAAnBtoO,KAAK0oO,WAET1oO,KAAK2G,OAAO2hO,OAAOpB,gBAAiBlnO,KAAKsoO,OAAQtoO,KAAKkF,QAAQiiO,YAAa,KAIrEnnO,IAER,GAAC,CAAAiG,IAAA,YAAApG,MAED,WAEC,OAAOG,KAAKsoO,MAEb,GAAC,CAAAriO,IAAA,YAAApG,MAED,WAEC,OAAOG,KAAK6pO,aAAc,EAE3B,GAAC,CAAA5jO,IAAA,YAAApG,MAED,SAAW21D,GAEV,OAAOx1D,KAAK8pO,WAAYt0K,EAAS,CAAEA,GAAW,GAE/C,GAAC,CAAAvvD,IAAA,kBAAApG,MAED,SAAiBA,GAEhB,IAAiC,IAA5BG,KAAK2oO,mBAeV,OARA3oO,KAAKyoO,aAAe5oO,GAEI,IAAnBG,KAAK0oO,WAET1oO,KAAK2G,OAAO8hO,aAAavB,gBAAiBlnO,KAAKyoO,aAAczoO,KAAKkF,QAAQiiO,YAAa,KAIjFnnO,KAbN6C,QAAQC,KAAM,mDAehB,GAAC,CAAAmD,IAAA,kBAAApG,MAED,WAEC,OAAOG,KAAKyoO,YAEb,GAAC,CAAAxiO,IAAA,UAAApG,MAED,WAECG,KAAK0oO,WAAY,CAElB,GAAC,CAAAziO,IAAA,UAAApG,MAED,WAEC,OAAiC,IAA5BG,KAAK2oO,oBAET9lO,QAAQC,KAAM,qDACP,GAID9C,KAAKulC,IAEb,GAAC,CAAAt/B,IAAA,UAAApG,MAED,SAASA,GAER,IAAiC,IAA5BG,KAAK2oO,mBAeV,OARA3oO,KAAKulC,KAAO1lC,GAEY,IAAnBG,KAAK0oO,YAET1oO,KAAK2G,OAAO4+B,KAAOvlC,KAAKulC,MAIlBvlC,KAbN6C,QAAQC,KAAM,mDAehB,GAAC,CAAAmD,IAAA,eAAApG,MAED,SAAcA,GAIb,OAFAG,KAAKuoO,UAAY1oO,EAEVG,IAER,GAAC,CAAAiG,IAAA,aAAApG,MAED,SAAYA,GAIX,OAFAG,KAAKwoO,QAAU3oO,EAERG,IAER,GAAC,CAAAiG,IAAA,YAAApG,MAED,WAEC,OAAOG,KAAK6mO,KAAKA,KAAKhnO,KAEvB,GAAC,CAAAoG,IAAA,YAAApG,MAED,SAAWA,GAIV,OAFAG,KAAK6mO,KAAKA,KAAKK,gBAAiBrnO,EAAOG,KAAKkF,QAAQiiO,YAAa,KAE1DnnO,IAER,KAACgoO,CAAA,CAhYS,CAASxrM,IAoYdutM,GAA0B,IAAIztM,GAC9B0tM,GAA4B,IAAI3wM,GAChCqZ,GAAuB,IAAIpW,GAC3BpP,GAA6B,IAAIoP,GAEjC2tM,GAAe,SAAAC,IAAA7hO,EAAAA,EAAAA,GAAA4hO,EAAAC,GAAA,IAAAC,GAAA5hO,EAAAA,EAAAA,GAAA0hO,GAEpB,SAAAA,EAAazoO,GAAW,IAAA4oO,EAMU,OANV1hO,EAAAA,EAAAA,GAAA,KAAAuhO,IAEvBG,EAAAD,EAAA/qO,KAAA,KAAOoC,IAEF6oO,OAASD,EAAKllO,QAAQolO,eAC3BF,EAAKC,OAAOE,aAAe,OAC3BH,EAAKC,OAAOriM,QAASoiM,EAAKvD,MAAOuD,CAElC,CAkHC,OAlHAz/N,EAAAA,EAAAA,GAAAs/N,EAAA,EAAAhkO,IAAA,aAAApG,MAED,YAECksC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAi+L,EAAA9qO,WAAA,mBAAAC,KAAA,MAEAY,KAAKqqO,OAAOxjK,WAAY7mE,KAAK6mO,KAE9B,GAAC,CAAA5gO,IAAA,YAAApG,MAED,WAEC,OAAOG,KAAKqqO,MAEb,GAAC,CAAApkO,IAAA,iBAAApG,MAED,WAEC,OAAOG,KAAKqqO,OAAOG,WAEpB,GAAC,CAAAvkO,IAAA,iBAAApG,MAED,SAAgBA,GAIf,OAFAG,KAAKqqO,OAAOG,YAAc3qO,EAEnBG,IAER,GAAC,CAAAiG,IAAA,mBAAApG,MAED,WAEC,OAAOG,KAAKqqO,OAAOI,aAEpB,GAAC,CAAAxkO,IAAA,mBAAApG,MAED,SAAkBA,GAIjB,OAFAG,KAAKqqO,OAAOI,cAAgB5qO,EAErBG,IAER,GAAC,CAAAiG,IAAA,mBAAApG,MAED,WAEC,OAAOG,KAAKqqO,OAAOK,aAEpB,GAAC,CAAAzkO,IAAA,mBAAApG,MAED,SAAkBA,GAIjB,OAFAG,KAAKqqO,OAAOK,cAAgB7qO,EAErBG,IAER,GAAC,CAAAiG,IAAA,iBAAApG,MAED,WAEC,OAAOG,KAAKqqO,OAAOvoL,WAEpB,GAAC,CAAA77C,IAAA,iBAAApG,MAED,SAAgBA,GAIf,OAFAG,KAAKqqO,OAAOvoL,YAAcjiD,EAEnBG,IAER,GAAC,CAAAiG,IAAA,qBAAApG,MAED,SAAoB8qO,EAAgBC,EAAgBC,GAMnD,OAJA7qO,KAAKqqO,OAAOM,eAAiBA,EAC7B3qO,KAAKqqO,OAAOO,eAAiBA,EAC7B5qO,KAAKqqO,OAAOQ,cAAgBA,EAErB7qO,IAER,GAAC,CAAAiG,IAAA,oBAAApG,MAED,SAAmBoqB,GAIlB,IAFA8hB,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAi+L,EAAA9qO,WAAA,0BAAAC,KAAA,KAAyB6qB,IAEQ,IAA5BjqB,KAAK2oO,qBAAkD,IAAnB3oO,KAAK0oO,UAA9C,CAEA1oO,KAAKg7C,YAAYwtF,UAAWuhG,GAAWC,GAAat3L,IAEpDxlB,GAAazoB,IAAK,EAAG,EAAG,GAAIu8C,gBAAiBgpL,IAE7C,IAAMK,EAASrqO,KAAKqqO,OAEpB,GAAKA,EAAOjD,UAAY,CAIvB,IAAMrU,EAAU/yN,KAAKkF,QAAQiiO,YAAcnnO,KAAKwB,SAASwlO,UAEzDqD,EAAOjD,UAAUC,wBAAyB0C,GAAU/6N,EAAG+jN,GACvDsX,EAAO/C,UAAUD,wBAAyB0C,GAAU96N,EAAG8jN,GACvDsX,EAAO9C,UAAUF,wBAAyB0C,GAAU76N,EAAG6jN,GACvDsX,EAAOS,aAAazD,wBAAyBn6M,GAAale,EAAG+jN,GAC7DsX,EAAOU,aAAa1D,wBAAyBn6M,GAAaje,EAAG8jN,GAC7DsX,EAAOW,aAAa3D,wBAAyBn6M,GAAahe,EAAG6jN,EAE9D,MAECsX,EAAOvC,YAAaiC,GAAU/6N,EAAG+6N,GAAU96N,EAAG86N,GAAU76N,GACxDm7N,EAAOtC,eAAgB76M,GAAale,EAAGke,GAAaje,EAAGie,GAAahe,EAxBK,CA4B3E,KAAC+6N,CAAA,CA5HmB,CAASjC,IAgIxBiD,GAAa,WAElB,SAAAA,EAAaC,GAAwB,IAAjBC,EAAOvqO,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,MAAI8H,EAAAA,EAAAA,GAAA,KAAAuiO,GAEjCjrO,KAAKorO,SAAWF,EAAMhmO,QAAQmmO,iBAC9BrrO,KAAKorO,SAASD,QAAUA,EAExBnrO,KAAK2M,KAAO,IAAI3F,WAAYhH,KAAKorO,SAASE,mBAE1CJ,EAAMtB,YAAY5hM,QAAShoC,KAAKorO,SAEjC,CAwBC,OAxBAzgO,EAAAA,EAAAA,GAAAsgO,EAAA,EAAAhlO,IAAA,mBAAApG,MAGD,WAIC,OAFAG,KAAKorO,SAASG,qBAAsBvrO,KAAK2M,MAElC3M,KAAK2M,IAEb,GAAC,CAAA1G,IAAA,sBAAApG,MAED,WAKC,IAHA,IAAIA,EAAQ,EACN8M,EAAO3M,KAAKwrO,mBAER5nO,EAAI,EAAGA,EAAI+I,EAAKpK,OAAQqB,IAEjC/D,GAAS8M,EAAM/I,GAIhB,OAAO/D,EAAQ8M,EAAKpK,MAErB,KAAC0oO,CAAA,CAnCiB,GAuCbQ,GAAa,WAElB,SAAAA,EAAaC,EAAS7U,EAAUlrH,GAK/B,IAAIggI,EACHC,EACAC,EAkBD,QAzB2CnjO,EAAAA,EAAAA,GAAA,KAAA+iO,GAE3CzrO,KAAK0rO,QAAUA,EACf1rO,KAAK2rG,UAAYA,EAsBRkrH,GAER,IAAK,aACJ8U,EAAc3rO,KAAK8rO,OACnBF,EAAsB5rO,KAAK+rO,eAC3BF,EAAc7rO,KAAKgsO,+BAEnBhsO,KAAKoH,OAAS,IAAIgrH,aAA0B,EAAZzmB,GAChC3rG,KAAKisO,WAAa,EAClB,MAED,IAAK,SACL,IAAK,OACJN,EAAc3rO,KAAKksO,QAInBN,EAAsB5rO,KAAKksO,QAE3BL,EAAc7rO,KAAKmsO,0BAEnBnsO,KAAKoH,OAAS,IAAIzD,MAAmB,EAAZgoG,GACzB,MAED,QACCggI,EAAc3rO,KAAKosO,MACnBR,EAAsB5rO,KAAKqsO,cAC3BR,EAAc7rO,KAAKssO,4BAEnBtsO,KAAKoH,OAAS,IAAIgrH,aAA0B,EAAZzmB,GAIlC3rG,KAAKusO,iBAAmBZ,EACxB3rO,KAAKwsO,yBAA2BZ,EAChC5rO,KAAKysO,aAAeZ,EACpB7rO,KAAK0sO,WAAa,EAClB1sO,KAAK2sO,UAAY,EAEjB3sO,KAAK4sO,iBAAmB,EACxB5sO,KAAK6sO,yBAA2B,EAEhC7sO,KAAK8sO,SAAW,EAChB9sO,KAAK+sO,eAAiB,CAEvB,CA8OC,OA5ODpiO,EAAAA,EAAAA,GAAA8gO,EAAA,EAAAxlO,IAAA,aAAApG,MACA,SAAYmtO,EAAWrvE,GAKtB,IAAMv2J,EAASpH,KAAKoH,OACnB0gG,EAAS9nG,KAAK2rG,UACd/kF,EAASomN,EAAYllI,EAASA,EAE3BmlI,EAAgBjtO,KAAK4sO,iBAEzB,GAAuB,IAAlBK,EAAsB,CAI1B,IAAM,IAAIrpO,EAAI,EAAGA,IAAMkkG,IAAWlkG,EAEjCwD,EAAQwf,EAAShjB,GAAMwD,EAAQxD,GAIhCqpO,EAAgBtvE,CAEjB,KAAO,CAKN,IAAMuvE,EAAMvvE,GADZsvE,GAAiBtvE,GAEjB39J,KAAKusO,iBAAkBnlO,EAAQwf,EAAQ,EAAGsmN,EAAKplI,EAEhD,CAEA9nG,KAAK4sO,iBAAmBK,CAEzB,GAEA,CAAAhnO,IAAA,qBAAApG,MACA,SAAoB89J,GAEnB,IAAMv2J,EAASpH,KAAKoH,OACnB0gG,EAAS9nG,KAAK2rG,UACd/kF,EAASkhF,EAAS9nG,KAAK2sO,UAEe,IAAlC3sO,KAAK6sO,0BAIT7sO,KAAKysO,eAMNzsO,KAAKwsO,yBAA0BplO,EAAQwf,EAAQ,EAAG+2I,EAAQ71D,GAC1D9nG,KAAK6sO,0BAA4BlvE,CAElC,GAEA,CAAA13J,IAAA,QAAApG,MACA,SAAOmtO,GAEN,IAAMllI,EAAS9nG,KAAK2rG,UACnBvkG,EAASpH,KAAKoH,OACdwf,EAASomN,EAAYllI,EAASA,EAE9B61D,EAAS39J,KAAK4sO,iBACdO,EAAiBntO,KAAK6sO,yBAEtBnB,EAAU1rO,KAAK0rO,QAKhB,GAHA1rO,KAAK4sO,iBAAmB,EACxB5sO,KAAK6sO,yBAA2B,EAE3BlvE,EAAS,EAAI,CAIjB,IAAMyvE,EAAsBtlI,EAAS9nG,KAAK0sO,WAE1C1sO,KAAKusO,iBACJnlO,EAAQwf,EAAQwmN,EAAqB,EAAIzvE,EAAQ71D,EAEnD,CAEKqlI,EAAiB,GAIrBntO,KAAKwsO,yBAA0BplO,EAAQwf,EAAQ5mB,KAAK2sO,UAAY7kI,EAAQ,EAAGA,GAI5E,IAAM,IAAIlkG,EAAIkkG,EAAQ76F,EAAI66F,EAASA,EAAQlkG,IAAMqJ,IAAMrJ,EAEtD,GAAKwD,EAAQxD,KAAQwD,EAAQxD,EAAIkkG,GAAW,CAI3C4jI,EAAQ5qE,SAAU15J,EAAQwf,GAC1B,KAED,CAIF,GAEA,CAAA3gB,IAAA,oBAAApG,MACA,WAEC,IAAM6rO,EAAU1rO,KAAK0rO,QAEftkO,EAASpH,KAAKoH,OACnB0gG,EAAS9nG,KAAK2rG,UAEdyhI,EAAsBtlI,EAAS9nG,KAAK0sO,WAErChB,EAAQ2B,SAAUjmO,EAAQgmO,GAG1B,IAAM,IAAIxpO,EAAIkkG,EAAQ76F,EAAImgO,EAAqBxpO,IAAMqJ,IAAMrJ,EAE1DwD,EAAQxD,GAAMwD,EAAQgmO,EAAwBxpO,EAAIkkG,GAKnD9nG,KAAKysO,eAELzsO,KAAK4sO,iBAAmB,EACxB5sO,KAAK6sO,yBAA2B,CAEjC,GAEA,CAAA5mO,IAAA,uBAAApG,MACA,WAEC,IAAMutO,EAAuC,EAAjBptO,KAAK2rG,UACjC3rG,KAAK0rO,QAAQ5qE,SAAU9gK,KAAKoH,OAAQgmO,EAErC,GAAC,CAAAnnO,IAAA,8BAAApG,MAED,WAKC,IAHA,IAAMmvN,EAAahvN,KAAK2sO,UAAY3sO,KAAK2rG,UACnCsjH,EAAWD,EAAahvN,KAAK2rG,UAEzB/nG,EAAIorN,EAAYprN,EAAIqrN,EAAUrrN,IAEvC5D,KAAKoH,OAAQxD,GAAM,CAIrB,GAAC,CAAAqC,IAAA,iCAAApG,MAED,WAECG,KAAKssO,8BACLtsO,KAAKoH,OAAQpH,KAAK2sO,UAAY3sO,KAAK2rG,UAAY,GAAM,CAEtD,GAAC,CAAA1lG,IAAA,4BAAApG,MAED,WAKC,IAHA,IAAMmvN,EAAahvN,KAAK0sO,WAAa1sO,KAAK2rG,UACpC2hI,EAActtO,KAAK2sO,UAAY3sO,KAAK2rG,UAEhC/nG,EAAI,EAAGA,EAAI5D,KAAK2rG,UAAW/nG,IAEpC5D,KAAKoH,OAAQkmO,EAAc1pO,GAAM5D,KAAKoH,OAAQ4nN,EAAaprN,EAI7D,GAGA,CAAAqC,IAAA,UAAApG,MAEA,SAASuH,EAAQ40H,EAAWoxF,EAAWj7M,EAAG21F,GAEzC,GAAK31F,GAAK,GAET,IAAM,IAAIvO,EAAI,EAAGA,IAAMkkG,IAAWlkG,EAEjCwD,EAAQ40H,EAAYp4H,GAAMwD,EAAQgmN,EAAYxpN,EAMjD,GAAC,CAAAqC,IAAA,SAAApG,MAED,SAAQuH,EAAQ40H,EAAWoxF,EAAWj7M,GAErCknB,GAAWk7L,UAAWntN,EAAQ40H,EAAW50H,EAAQ40H,EAAW50H,EAAQgmN,EAAWj7M,EAEhF,GAAC,CAAAlM,IAAA,iBAAApG,MAED,SAAgBuH,EAAQ40H,EAAWoxF,EAAWj7M,EAAG21F,GAEhD,IAAMylI,EAAavtO,KAAKisO,WAAankI,EAGrCzuE,GAAWi2L,wBAAyBloN,EAAQmmO,EAAYnmO,EAAQ40H,EAAW50H,EAAQgmN,GAGnF/zL,GAAWk7L,UAAWntN,EAAQ40H,EAAW50H,EAAQ40H,EAAW50H,EAAQmmO,EAAYp7N,EAEjF,GAAC,CAAAlM,IAAA,QAAApG,MAED,SAAOuH,EAAQ40H,EAAWoxF,EAAWj7M,EAAG21F,GAIvC,IAFA,IAAM/6F,EAAI,EAAIoF,EAEJvO,EAAI,EAAGA,IAAMkkG,IAAWlkG,EAAI,CAErC,IAAMyO,EAAI2pH,EAAYp4H,EAEtBwD,EAAQiL,GAAMjL,EAAQiL,GAAMtF,EAAI3F,EAAQgmN,EAAYxpN,GAAMuO,CAE3D,CAED,GAAC,CAAAlM,IAAA,gBAAApG,MAED,SAAeuH,EAAQ40H,EAAWoxF,EAAWj7M,EAAG21F,GAE/C,IAAM,IAAIlkG,EAAI,EAAGA,IAAMkkG,IAAWlkG,EAAI,CAErC,IAAMyO,EAAI2pH,EAAYp4H,EAEtBwD,EAAQiL,GAAMjL,EAAQiL,GAAMjL,EAAQgmN,EAAYxpN,GAAMuO,CAEvD,CAED,KAACs5N,CAAA,CAtTiB,GA2Tb+B,GAAqB,gBACrBC,GAAc,IAAIC,OAAQ,IAAMF,GAAqB,IAAK,KAK1DG,GAAY,KAAOH,GAAqB,IACxCI,GAAiB,KAAOJ,GAAmB7/L,QAAS,MAAO,IAAO,IAiBlEkgM,GAAW,IAAIH,OAClB,IAdgC,kBAAkB/mO,OAAOgnC,QAAS,KAAMggM,IAG7C,WAAWhnO,OAAOgnC,QAAS,OAAQigM,IAIjC,4BAA4BjnO,OAAOgnC,QAAS,KAAMggM,IAIhD,uBAAuBhnO,OAAOgnC,QAAS,KAAMggM,IAQ5E,KAGGG,GAAwB,CAAE,WAAY,YAAa,QAAS,OAE5DC,GAAS,WAEd,SAAAA,EAAaC,EAAah+L,EAAMi+L,IAAqBvlO,EAAAA,EAAAA,GAAA,KAAAqlO,GAEpD,IAAMG,EAAaD,GAAsBj0H,GAAgBm0H,eAAgBn+L,GAEzEhwC,KAAKouO,aAAeJ,EACpBhuO,KAAKquO,UAAYL,EAAYM,WAAYt+L,EAAMk+L,EAEhD,CAgDC,OAhDAvjO,EAAAA,EAAAA,GAAAojO,EAAA,EAAA9nO,IAAA,WAAApG,MAED,SAAUu/D,EAAOx4C,GAEhB5mB,KAAKqD,OAEL,IAAMkrO,EAAkBvuO,KAAKouO,aAAaI,gBACzC9C,EAAU1rO,KAAKquO,UAAWE,QAGVptO,IAAZuqO,GAAwBA,EAAQ2B,SAAUjuK,EAAOx4C,EAEvD,GAAC,CAAA3gB,IAAA,WAAApG,MAED,SAAUu/D,EAAOx4C,GAIhB,IAFA,IAAM6nN,EAAWzuO,KAAKquO,UAEZzqO,EAAI5D,KAAKouO,aAAaI,gBAAiBxqO,EAAIyqO,EAASlsO,OAAQqB,IAAMI,IAAMJ,EAEjF6qO,EAAU7qO,GAAIk9J,SAAU1hG,EAAOx4C,EAIjC,GAAC,CAAA3gB,IAAA,OAAApG,MAED,WAIC,IAFA,IAAM4uO,EAAWzuO,KAAKquO,UAEZzqO,EAAI5D,KAAKouO,aAAaI,gBAAiBxqO,EAAIyqO,EAASlsO,OAAQqB,IAAMI,IAAMJ,EAEjF6qO,EAAU7qO,GAAIP,MAIhB,GAAC,CAAA4C,IAAA,SAAApG,MAED,WAIC,IAFA,IAAM4uO,EAAWzuO,KAAKquO,UAEZzqO,EAAI5D,KAAKouO,aAAaI,gBAAiBxqO,EAAIyqO,EAASlsO,OAAQqB,IAAMI,IAAMJ,EAEjF6qO,EAAU7qO,GAAI8qO,QAIhB,KAACX,CAAA,CAzDa,GAkET/zH,GAAe,WAEpB,SAAAA,EAAa20H,EAAU3+L,EAAMk+L,IAAaxlO,EAAAA,EAAAA,GAAA,KAAAsxG,GAEzCh6G,KAAKgwC,KAAOA,EACZhwC,KAAKkuO,WAAaA,GAAcl0H,EAAgBm0H,eAAgBn+L,GAEhEhwC,KAAK0qE,KAAOsvC,EAAgB40H,SAAUD,EAAU3uO,KAAKkuO,WAAWvvH,WAAcgwH,EAE9E3uO,KAAK2uO,SAAWA,EAGhB3uO,KAAKqtO,SAAWrtO,KAAK6uO,kBACrB7uO,KAAK8gK,SAAW9gK,KAAK8uO,iBAEtB,CAwIC,OAxIAnkO,EAAAA,EAAAA,GAAAqvG,EAAA,EAAA/zG,IAAA,wBAAApG,MA2ID,WAAyB,GAAC,CAAAoG,IAAA,wBAAApG,MAC1B,WAAyB,GAEzB,CAAAoG,IAAA,mBAAApG,MAEA,SAAkBuH,EAAQwf,GAEzBxf,EAAQwf,GAAW5mB,KAAK+uO,aAAc/uO,KAAKo2N,aAE5C,GAAC,CAAAnwN,IAAA,kBAAApG,MAED,SAAiBuH,EAAQwf,GAIxB,IAFA,IAAMjgB,EAAS3G,KAAKgvO,iBAEVprO,EAAI,EAAGI,EAAI2C,EAAOpE,OAAQqB,IAAMI,IAAMJ,EAE/CwD,EAAQwf,KAAcjgB,EAAQ/C,EAIhC,GAAC,CAAAqC,IAAA,yBAAApG,MAED,SAAwBuH,EAAQwf,GAE/Bxf,EAAQwf,GAAW5mB,KAAKgvO,iBAAkBhvO,KAAKivO,cAEhD,GAAC,CAAAhpO,IAAA,oBAAApG,MAED,SAAmBuH,EAAQwf,GAE1B5mB,KAAKgvO,iBAAiBvxM,QAASr2B,EAAQwf,EAExC,GAEA,CAAA3gB,IAAA,mBAAApG,MAEA,SAAkBuH,EAAQwf,GAEzB5mB,KAAK+uO,aAAc/uO,KAAKo2N,cAAiBhvN,EAAQwf,EAElD,GAAC,CAAA3gB,IAAA,kCAAApG,MAED,SAAiCuH,EAAQwf,GAExC5mB,KAAK+uO,aAAc/uO,KAAKo2N,cAAiBhvN,EAAQwf,GACjD5mB,KAAK+uO,aAAa1uM,aAAc,CAEjC,GAAC,CAAAp6B,IAAA,6CAAApG,MAED,SAA4CuH,EAAQwf,GAEnD5mB,KAAK+uO,aAAc/uO,KAAKo2N,cAAiBhvN,EAAQwf,GACjD5mB,KAAK+uO,aAAa9mG,wBAAyB,CAE5C,GAEA,CAAAhiI,IAAA,kBAAApG,MAEA,SAAiBuH,EAAQwf,GAIxB,IAFA,IAAMsoN,EAAOlvO,KAAKgvO,iBAERprO,EAAI,EAAGI,EAAIkrO,EAAK3sO,OAAQqB,IAAMI,IAAMJ,EAE7CsrO,EAAMtrO,GAAMwD,EAAQwf,IAItB,GAAC,CAAA3gB,IAAA,iCAAApG,MAED,SAAgCuH,EAAQwf,GAIvC,IAFA,IAAMsoN,EAAOlvO,KAAKgvO,iBAERprO,EAAI,EAAGI,EAAIkrO,EAAK3sO,OAAQqB,IAAMI,IAAMJ,EAE7CsrO,EAAMtrO,GAAMwD,EAAQwf,KAIrB5mB,KAAK+uO,aAAa1uM,aAAc,CAEjC,GAAC,CAAAp6B,IAAA,4CAAApG,MAED,SAA2CuH,EAAQwf,GAIlD,IAFA,IAAMsoN,EAAOlvO,KAAKgvO,iBAERprO,EAAI,EAAGI,EAAIkrO,EAAK3sO,OAAQqB,IAAMI,IAAMJ,EAE7CsrO,EAAMtrO,GAAMwD,EAAQwf,KAIrB5mB,KAAK+uO,aAAa9mG,wBAAyB,CAE5C,GAEA,CAAAhiI,IAAA,yBAAApG,MAEA,SAAwBuH,EAAQwf,GAE/B5mB,KAAKgvO,iBAAkBhvO,KAAKivO,eAAkB7nO,EAAQwf,EAEvD,GAAC,CAAA3gB,IAAA,wCAAApG,MAED,SAAuCuH,EAAQwf,GAE9C5mB,KAAKgvO,iBAAkBhvO,KAAKivO,eAAkB7nO,EAAQwf,GACtD5mB,KAAK+uO,aAAa1uM,aAAc,CAEjC,GAAC,CAAAp6B,IAAA,mDAAApG,MAED,SAAkDuH,EAAQwf,GAEzD5mB,KAAKgvO,iBAAkBhvO,KAAKivO,eAAkB7nO,EAAQwf,GACtD5mB,KAAK+uO,aAAa9mG,wBAAyB,CAE5C,GAEA,CAAAhiI,IAAA,sBAAApG,MAEA,SAAqBuH,EAAQwf,GAE5B5mB,KAAKgvO,iBAAiBxxM,UAAWp2B,EAAQwf,EAE1C,GAAC,CAAA3gB,IAAA,qCAAApG,MAED,SAAoCuH,EAAQwf,GAE3C5mB,KAAKgvO,iBAAiBxxM,UAAWp2B,EAAQwf,GACzC5mB,KAAK+uO,aAAa1uM,aAAc,CAEjC,GAAC,CAAAp6B,IAAA,gDAAApG,MAED,SAA+CuH,EAAQwf,GAEtD5mB,KAAKgvO,iBAAiBxxM,UAAWp2B,EAAQwf,GACzC5mB,KAAK+uO,aAAa9mG,wBAAyB,CAE5C,GAAC,CAAAhiI,IAAA,oBAAApG,MAED,SAAmBsvO,EAAavoN,GAE/B5mB,KAAKqD,OACLrD,KAAKqtO,SAAU8B,EAAavoN,EAE7B,GAAC,CAAA3gB,IAAA,oBAAApG,MAED,SAAmBopC,EAAariB,GAE/B5mB,KAAKqD,OACLrD,KAAK8gK,SAAU73H,EAAariB,EAE7B,GAEA,CAAA3gB,IAAA,OAAApG,MACA,WAEC,IAAIkvO,EAAe/uO,KAAK0qE,KAClBwjK,EAAaluO,KAAKkuO,WAElBkB,EAAalB,EAAWkB,WACxBhZ,EAAe8X,EAAW9X,aAC5B6Y,EAAgBf,EAAWe,cAe/B,GAbOF,IAENA,EAAe/0H,EAAgB40H,SAAU5uO,KAAK2uO,SAAUT,EAAWvvH,WAAc3+G,KAAK2uO,SAEtF3uO,KAAK0qE,KAAOqkK,GAKb/uO,KAAKqtO,SAAWrtO,KAAKqvO,sBACrBrvO,KAAK8gK,SAAW9gK,KAAKsvO,sBAGdP,EAAP,CAOA,GAAKK,EAAa,CAEjB,IAAIG,EAAcrB,EAAWqB,YAG7B,OAASH,GAER,IAAK,YAEJ,IAAOL,EAAa7xN,SAGnB,YADAra,QAAQkC,MAAO,oFAAqF/E,MAKrG,IAAO+uO,EAAa7xN,SAAS0zC,UAG5B,YADA/tD,QAAQkC,MAAO,8GAA+G/E,MAK/H+uO,EAAeA,EAAa7xN,SAAS0zC,UAErC,MAED,IAAK,QAEJ,IAAOm+K,EAAarwH,SAGnB,YADA77G,QAAQkC,MAAO,iFAAkF/E,MAQlG+uO,EAAeA,EAAarwH,SAASxC,MAGrC,IAAM,IAAIt4G,EAAI,EAAGA,EAAImrO,EAAaxsO,OAAQqB,IAEzC,GAAKmrO,EAAcnrO,GAAIzD,OAASovO,EAAc,CAE7CA,EAAc3rO,EACd,KAED,CAID,MAED,IAAK,MAEJ,GAAK,QAASmrO,EAAe,CAE5BA,EAAeA,EAAa7uM,IAC5B,KAED,CAEA,IAAO6uM,EAAa7xN,SAGnB,YADAra,QAAQkC,MAAO,oFAAqF/E,MAKrG,IAAO+uO,EAAa7xN,SAASgjB,IAG5B,YADAr9B,QAAQkC,MAAO,4FAA6F/E,MAK7G+uO,EAAeA,EAAa7xN,SAASgjB,IACrC,MAED,QAEC,QAAoC/+B,IAA/B4tO,EAAcK,GAGlB,YADAvsO,QAAQkC,MAAO,uEAAwE/E,MAKxF+uO,EAAeA,EAAcK,GAK/B,QAAqBjuO,IAAhBouO,EAA4B,CAEhC,QAAqCpuO,IAAhC4tO,EAAcQ,GAGlB,YADA1sO,QAAQkC,MAAO,wFAAyF/E,KAAM+uO,GAK/GA,EAAeA,EAAcQ,EAE9B,CAED,CAGA,IAAMC,EAAeT,EAAc3Y,GAEnC,QAAsBj1N,IAAjBquO,EAAL,CAWA,IAAIC,EAAazvO,KAAK0vO,WAAWC,KAEjC3vO,KAAK+uO,aAAeA,OAEc5tO,IAA7B4tO,EAAa1uM,YAEjBovM,EAAazvO,KAAK0vO,WAAWE,iBAEsBzuO,IAAxC4tO,EAAa9mG,yBAExBwnG,EAAazvO,KAAK0vO,WAAWG,wBAK9B,IAAIC,EAAc9vO,KAAK+vO,YAAYC,OAEnC,QAAuB7uO,IAAlB8tO,EAA8B,CAIlC,GAAsB,0BAAjB7Y,EAA2C,CAK/C,IAAO2Y,EAAalhM,SAGnB,YADAhrC,QAAQkC,MAAO,sGAAuG/E,MAKvH,IAAO+uO,EAAalhM,SAASotE,gBAG5B,YADAp4G,QAAQkC,MAAO,sHAAuH/E,WAK1EmB,IAAxD4tO,EAAal+H,sBAAuBo+H,KAExCA,EAAgBF,EAAal+H,sBAAuBo+H,GAItD,CAEAa,EAAc9vO,KAAK+vO,YAAYE,aAE/BjwO,KAAKgvO,iBAAmBQ,EACxBxvO,KAAKivO,cAAgBA,CAEtB,WAAuC9tO,IAA3BquO,EAAahyM,gBAAoDr8B,IAAzBquO,EAAa/xM,SAIhEqyM,EAAc9vO,KAAK+vO,YAAYG,eAE/BlwO,KAAKgvO,iBAAmBQ,GAEb7rO,MAAM0sC,QAASm/L,IAE1BM,EAAc9vO,KAAK+vO,YAAYI,YAE/BnwO,KAAKgvO,iBAAmBQ,GAIxBxvO,KAAKo2N,aAAeA,EAKrBp2N,KAAKqtO,SAAWrtO,KAAKowO,oBAAqBN,GAC1C9vO,KAAK8gK,SAAW9gK,KAAKqwO,iCAAkCP,GAAeL,EA9EtE,KARA,CAEC,IAAM9wH,EAAWuvH,EAAWvvH,SAE5B97G,QAAQkC,MAAO,+DAAiE45G,EAC/E,IAAMy3G,EAAe,wBAA0B2Y,EAGjD,CA3HA,MAHClsO,QAAQkC,MAAO,2DAA6D/E,KAAKgwC,KAAO,wBA8M1F,GAAC,CAAA/pC,IAAA,SAAApG,MAED,WAECG,KAAK0qE,KAAO,KAIZ1qE,KAAKqtO,SAAWrtO,KAAK6uO,kBACrB7uO,KAAK8gK,SAAW9gK,KAAK8uO,iBAEtB,IAAC,EAAA7oO,IAAA,SAAApG,MAvhBD,SAAe+vD,EAAM5f,EAAMk+L,GAE1B,OAASt+K,GAAQA,EAAK0gL,uBAMd,IAAIt2H,EAAgB+zH,UAAWn+K,EAAM5f,EAAMk+L,GAJ3C,IAAIl0H,EAAiBpqD,EAAM5f,EAAMk+L,EAQ1C,GAEA,CAAAjoO,IAAA,mBAAApG,MAOA,SAAyBM,GAExB,OAAOA,EAAKwtC,QAAS,MAAO,KAAMA,QAAS8/L,GAAa,GAEzD,GAAC,CAAAxnO,IAAA,iBAAApG,MAED,SAAuBq2N,GAEtB,IAAMqa,EAAU1C,GAAS75G,KAAMkiG,GAE/B,GAAiB,OAAZqa,EAEJ,MAAM,IAAI7tO,MAAO,4CAA8CwzN,GAIhE,IAAM74J,EAAU,CAEfshD,SAAU4xH,EAAS,GACnBnB,WAAYmB,EAAS,GACrBhB,YAAagB,EAAS,GACtBna,aAAcma,EAAS,GACvBtB,cAAesB,EAAS,IAGnBC,EAAUnzK,EAAQshD,UAAYthD,EAAQshD,SAASkhH,YAAa,KAElE,QAAiB1+N,IAAZqvO,IAAuC,IAAdA,EAAkB,CAE/C,IAAMpB,EAAa/xK,EAAQshD,SAASl3G,UAAW+oO,EAAU,IAMF,IAAlD1C,GAAsBvmO,QAAS6nO,KAEnC/xK,EAAQshD,SAAWthD,EAAQshD,SAASl3G,UAAW,EAAG+oO,GAClDnzK,EAAQ+xK,WAAaA,EAIvB,CAEA,GAA8B,OAAzB/xK,EAAQ+4J,cAAyD,IAAhC/4J,EAAQ+4J,aAAa7zN,OAE1D,MAAM,IAAIG,MAAO,+DAAiEwzN,GAInF,OAAO74J,CAER,GAAC,CAAAp3D,IAAA,WAAApG,MAED,SAAiB+vD,EAAM+uD,GAEtB,QAAkBx9G,IAAbw9G,GAAuC,KAAbA,GAAgC,MAAbA,IAAmC,IAAfA,GAAoBA,IAAa/uD,EAAKzvD,MAAQw+G,IAAa/uD,EAAK5kD,KAErI,OAAO4kD,EAKR,GAAKA,EAAK8uD,SAAW,CAEpB,IAAMipF,EAAO/3I,EAAK8uD,SAAS+xH,cAAe9xH,GAE1C,QAAcx9G,IAATwmM,EAEJ,OAAOA,CAIT,CAGA,GAAK/3I,EAAK7rB,SAAW,CAEpB,IAsBM2sM,EAtBoB,SAApBC,EAA+B5sM,GAEpC,IAAM,IAAIngC,EAAI,EAAGA,EAAImgC,EAASxhC,OAAQqB,IAAO,CAE5C,IAAMgtO,EAAY7sM,EAAUngC,GAE5B,GAAKgtO,EAAUzwO,OAASw+G,GAAYiyH,EAAU5lO,OAAS2zG,EAEtD,OAAOiyH,EAIR,IAAM3yN,EAAS0yN,EAAmBC,EAAU7sM,UAE5C,GAAK9lB,EAAS,OAAOA,CAEtB,CAEA,OAAO,IAER,CAEoB0yN,CAAmB/gL,EAAK7rB,UAE5C,GAAK2sM,EAEJ,OAAOA,CAIT,CAEA,OAAO,IAER,KAAC12H,CAAA,CAvJmB,GA6iBrBA,GAAgB+zH,UAAYA,GAE5B/zH,GAAgB76G,UAAU4wO,YAAc,CACvCC,OAAQ,EACRG,YAAa,EACbF,aAAc,EACdC,eAAgB,GAGjBl2H,GAAgB76G,UAAUuwO,WAAa,CACtCC,KAAM,EACNC,YAAa,EACbC,uBAAwB,GAGzB71H,GAAgB76G,UAAUixO,oBAAsB,CAE/Cp2H,GAAgB76G,UAAU0xO,iBAC1B72H,GAAgB76G,UAAU2xO,gBAC1B92H,GAAgB76G,UAAU4xO,uBAC1B/2H,GAAgB76G,UAAU6xO,mBAI3Bh3H,GAAgB76G,UAAUkxO,iCAAmC,CAE5D,CAECr2H,GAAgB76G,UAAU8xO,iBAC1Bj3H,GAAgB76G,UAAU+xO,gCAC1Bl3H,GAAgB76G,UAAUgyO,4CAExB,CAIFn3H,GAAgB76G,UAAUiyO,gBAC1Bp3H,GAAgB76G,UAAUkyO,+BAC1Br3H,GAAgB76G,UAAUmyO,2CAExB,CAGFt3H,GAAgB76G,UAAUoyO,uBAC1Bv3H,GAAgB76G,UAAUqyO,sCAC1Bx3H,GAAgB76G,UAAUsyO,kDAExB,CAGFz3H,GAAgB76G,UAAUuyO,oBAC1B13H,GAAgB76G,UAAUwyO,mCAC1B33H,GAAgB76G,UAAUyyO,gDAM5B,IA6BMC,GAAoB,WAEzB,SAAAA,KAAcnpO,EAAAA,EAAAA,GAAA,KAAAmpO,GAEb7xO,KAAKswO,wBAAyB,EAE9BtwO,KAAKgL,KAAOuiH,KAGZvtH,KAAK44K,SAAWj1K,MAAMxE,UAAUwB,MAAMvB,KAAMwB,WAE5CZ,KAAKwuO,gBAAkB,EAGvB,IAAMz3M,EAAU,CAAC,EACjB/2B,KAAK8xO,eAAiB/6M,EAEtB,IAAM,IAAInzB,EAAI,EAAGI,EAAIpD,UAAU2B,OAAQqB,IAAMI,IAAMJ,EAElDmzB,EAASn2B,UAAWgD,GAAIoH,MAASpH,EAIlC5D,KAAK+xO,OAAS,GACd/xO,KAAKgyO,aAAe,GACpBhyO,KAAKquO,UAAY,GACjBruO,KAAKiyO,uBAAyB,CAAC,EAE/B,IAAMvyL,EAAQ1/C,KAEdA,KAAKkyO,MAAQ,CAEZ7hL,QAAS,CACR,SAAI0oK,GAEH,OAAOr5K,EAAMk5H,SAASr2K,MAEvB,EACA,SAAI4vO,GAEH,OAAOnyO,KAAK+4N,MAAQr5K,EAAM8uL,eAE3B,GAED,qBAAI4D,GAEH,OAAO1yL,EAAM2uL,UAAU9rO,MAExB,EAIF,CA0SC,OA1SAoI,EAAAA,EAAAA,GAAAknO,EAAA,EAAA5rO,IAAA,MAAApG,MAED,WAaC,IAXA,IAAMwwD,EAAUrwD,KAAK44K,SACpBy5D,EAAgBryO,KAAK8xO,eACrBQ,EAAQtyO,KAAK+xO,OACbQ,EAAcvyO,KAAKgyO,aACnBvD,EAAWzuO,KAAKquO,UAChBmE,EAAY/D,EAASlsO,OAElBkwO,OAActxO,EACjBuxO,EAAWriL,EAAQ9tD,OACnBowO,EAAiB3yO,KAAKwuO,gBAEb5qO,EAAI,EAAGI,EAAIpD,UAAU2B,OAAQqB,IAAMI,IAAMJ,EAAI,CAEtD,IAAMo6B,EAASp9B,UAAWgD,GACzBoH,EAAOgzB,EAAOhzB,KACXpF,EAAQysO,EAAernO,GAE3B,QAAe7J,IAAVyE,EAAsB,CAI1BA,EAAQ8sO,IACRL,EAAernO,GAASpF,EACxByqD,EAAQ/tD,KAAM07B,GAId,IAAM,IAAI3rB,EAAI,EAAGtQ,EAAIywO,EAAWngO,IAAMtQ,IAAMsQ,EAE3Co8N,EAAUp8N,GAAI/P,KAAM,IAAI03G,GAAiBh8E,EAAQs0M,EAAOjgO,GAAKkgO,EAAalgO,IAI5E,MAAO,GAAKzM,EAAQ+sO,EAAiB,CAEpCF,EAAcpiL,EAASzqD,GAIvB,IAAMgtO,IAAsBD,EAC3BE,EAAmBxiL,EAASuiL,GAE7BP,EAAeQ,EAAiB7nO,MAASpF,EACzCyqD,EAASzqD,GAAUitO,EAEnBR,EAAernO,GAAS4nO,EACxBviL,EAASuiL,GAAqB50M,EAI9B,IAAM,IAAI3rB,EAAI,EAAGtQ,EAAIywO,EAAWngO,IAAMtQ,IAAMsQ,EAAI,CAE/C,IAAMygO,EAAkBrE,EAAUp8N,GACjC0gO,EAAaD,EAAiBF,GAE3BlH,EAAUoH,EAAiBltO,GAE/BktO,EAAiBltO,GAAUmtO,OAEV5xO,IAAZuqO,IAMJA,EAAU,IAAI1xH,GAAiBh8E,EAAQs0M,EAAOjgO,GAAKkgO,EAAalgO,KAIjEygO,EAAiBF,GAAqBlH,CAEvC,CAED,MAAYr7K,EAASzqD,KAAY6sO,GAEhC5vO,QAAQkC,MAAO,qJAKjB,CAEA/E,KAAKwuO,gBAAkBmE,CAExB,GAAC,CAAA1sO,IAAA,SAAApG,MAED,WASC,IAPA,IAAMwwD,EAAUrwD,KAAK44K,SACpBy5D,EAAgBryO,KAAK8xO,eACrBrD,EAAWzuO,KAAKquO,UAChBmE,EAAY/D,EAASlsO,OAElBowO,EAAiB3yO,KAAKwuO,gBAEhB5qO,EAAI,EAAGI,EAAIpD,UAAU2B,OAAQqB,IAAMI,IAAMJ,EAAI,CAEtD,IAAMo6B,EAASp9B,UAAWgD,GACzBoH,EAAOgzB,EAAOhzB,KACdpF,EAAQysO,EAAernO,GAExB,QAAe7J,IAAVyE,GAAuBA,GAAS+sO,EAAiB,CAIrD,IAAMK,EAAkBL,IACvBM,EAAoB5iL,EAAS2iL,GAE9BX,EAAeY,EAAkBjoO,MAASpF,EAC1CyqD,EAASzqD,GAAUqtO,EAEnBZ,EAAernO,GAASgoO,EACxB3iL,EAAS2iL,GAAoBh1M,EAI7B,IAAM,IAAI3rB,EAAI,EAAGtQ,EAAIywO,EAAWngO,IAAMtQ,IAAMsQ,EAAI,CAE/C,IAAMygO,EAAkBrE,EAAUp8N,GACjC6gO,EAAcJ,EAAiBE,GAC/BtH,EAAUoH,EAAiBltO,GAE5BktO,EAAiBltO,GAAUstO,EAC3BJ,EAAiBE,GAAoBtH,CAEtC,CAED,CAED,CAEA1rO,KAAKwuO,gBAAkBmE,CAExB,GAEA,CAAA1sO,IAAA,UAAApG,MACA,WAUC,IARA,IAAMwwD,EAAUrwD,KAAK44K,SACpBy5D,EAAgBryO,KAAK8xO,eACrBrD,EAAWzuO,KAAKquO,UAChBmE,EAAY/D,EAASlsO,OAElBowO,EAAiB3yO,KAAKwuO,gBACzBkE,EAAWriL,EAAQ9tD,OAEVqB,EAAI,EAAGI,EAAIpD,UAAU2B,OAAQqB,IAAMI,IAAMJ,EAAI,CAEtD,IACCoH,EADcpK,UAAWgD,GACXoH,KACdpF,EAAQysO,EAAernO,GAExB,QAAe7J,IAAVyE,EAIJ,UAFOysO,EAAernO,GAEjBpF,EAAQ+sO,EAAiB,CAI7B,IAAMC,IAAsBD,EAC3BE,EAAmBxiL,EAASuiL,GAC5BvrE,IAAeqrE,EACfS,EAAa9iL,EAASg3G,GAGvBgrE,EAAeQ,EAAiB7nO,MAASpF,EACzCyqD,EAASzqD,GAAUitO,EAGnBR,EAAec,EAAWnoO,MAAS4nO,EACnCviL,EAASuiL,GAAqBO,EAC9B9iL,EAAQxqD,MAIR,IAAM,IAAIwM,EAAI,EAAGtQ,EAAIywO,EAAWngO,IAAMtQ,IAAMsQ,EAAI,CAE/C,IAAMygO,EAAkBrE,EAAUp8N,GACjC0gO,EAAaD,EAAiBF,GAC9BthL,EAAOwhL,EAAiBzrE,GAEzByrE,EAAiBltO,GAAUmtO,EAC3BD,EAAiBF,GAAqBthL,EACtCwhL,EAAgBjtO,KAEjB,CAED,KAAO,CAIN,IAAMwhK,IAAeqrE,EACpBS,EAAa9iL,EAASg3G,GAElBA,EAAY,IAEhBgrE,EAAec,EAAWnoO,MAASpF,GAIpCyqD,EAASzqD,GAAUutO,EACnB9iL,EAAQxqD,MAIR,IAAM,IAAIwM,EAAI,EAAGtQ,EAAIywO,EAAWngO,IAAMtQ,IAAMsQ,EAAI,CAE/C,IAAMygO,EAAkBrE,EAAUp8N,GAElCygO,EAAiBltO,GAAUktO,EAAiBzrE,GAC5CyrE,EAAgBjtO,KAEjB,CAED,CAIF,CAEA7F,KAAKwuO,gBAAkBmE,CAExB,GAEA,CAAA1sO,IAAA,aAAApG,MAEA,SAAYmwC,EAAMk+L,GAKjB,IAAMkF,EAAgBpzO,KAAKiyO,uBACvBrsO,EAAQwtO,EAAepjM,GACrBy+L,EAAWzuO,KAAKquO,UAEtB,QAAeltO,IAAVyE,EAAsB,OAAO6oO,EAAU7oO,GAE5C,IAAM0sO,EAAQtyO,KAAK+xO,OAClBQ,EAAcvyO,KAAKgyO,aACnB3hL,EAAUrwD,KAAK44K,SACf85D,EAAWriL,EAAQ9tD,OACnBowO,EAAiB3yO,KAAKwuO,gBACtBsE,EAAkB,IAAInvO,MAAO+uO,GAE9B9sO,EAAQ6oO,EAASlsO,OAEjB6wO,EAAepjM,GAASpqC,EAExB0sO,EAAMhwO,KAAM0tC,GACZuiM,EAAYjwO,KAAM4rO,GAClBO,EAASnsO,KAAMwwO,GAEf,IAAM,IAAIlvO,EAAI+uO,EAAgB3uO,EAAIqsD,EAAQ9tD,OAAQqB,IAAMI,IAAMJ,EAAI,CAEjE,IAAMo6B,EAASqyB,EAASzsD,GACxBkvO,EAAiBlvO,GAAM,IAAIo2G,GAAiBh8E,EAAQgS,EAAMk+L,EAE3D,CAEA,OAAO4E,CAER,GAAC,CAAA7sO,IAAA,eAAApG,MAED,SAAcmwC,GAKb,IAAMojM,EAAgBpzO,KAAKiyO,uBAC1BrsO,EAAQwtO,EAAepjM,GAExB,QAAe7uC,IAAVyE,EAAsB,CAE1B,IAAM0sO,EAAQtyO,KAAK+xO,OAClBQ,EAAcvyO,KAAKgyO,aACnBvD,EAAWzuO,KAAKquO,UAChBgF,EAAoB5E,EAASlsO,OAAS,EACtC+wO,EAAe7E,EAAU4E,GAG1BD,EAFoBpjM,EAAMqjM,IAEUztO,EAEpC6oO,EAAU7oO,GAAU0tO,EACpB7E,EAAS5oO,MAET0sO,EAAa3sO,GAAU2sO,EAAac,GACpCd,EAAY1sO,MAEZysO,EAAO1sO,GAAU0sO,EAAOe,GACxBf,EAAMzsO,KAEP,CAED,KAACgsO,CAAA,CA9VwB,GAkWpB0B,GAAe,WAEpB,SAAAA,EAAaC,EAAO1lB,GAAqD,IAA/C2lB,EAAS7yO,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,KAAM4uN,EAAS5uN,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAGktN,EAAK0B,WAAS9mN,EAAAA,EAAAA,GAAA,KAAA6qO,GAErEvzO,KAAK0zO,OAASF,EACdxzO,KAAK2zO,MAAQ7lB,EACb9tN,KAAK4zO,WAAaH,EAClBzzO,KAAKwvN,UAAYA,EAWjB,IATA,IAAMryG,EAAS2wG,EAAK3wG,OACnB02H,EAAU12H,EAAO56G,OACjBuxO,EAAe,IAAInwO,MAAOkwO,GAErBE,EAAsB,CAC3BljB,YAAajmG,GACbkmG,UAAWlmG,IAGFhnH,EAAI,EAAGA,IAAMiwO,IAAYjwO,EAAI,CAEtC,IAAMsrN,EAAc/xG,EAAQv5G,GAAIo6G,kBAAmB,MACnD81H,EAAclwO,GAAMsrN,EACpBA,EAAYQ,SAAWqkB,CAExB,CAEA/zO,KAAKg0O,qBAAuBD,EAE5B/zO,KAAKi0O,cAAgBH,EAGrB9zO,KAAKk0O,kBAAoB,IAAIvwO,MAAOkwO,GAEpC7zO,KAAKm0O,YAAc,KACnBn0O,KAAKo0O,kBAAoB,KAEzBp0O,KAAKq0O,sBAAwB,KAC7Br0O,KAAKs0O,mBAAqB,KAE1Bt0O,KAAKulC,KAAOklF,GACZzqH,KAAKu0O,YAAe,EAIpBv0O,KAAKw0O,WAAa,KAIlBx0O,KAAKwsB,KAAO,EAEZxsB,KAAK8yN,UAAY,EACjB9yN,KAAKy0O,oBAAsB,EAE3Bz0O,KAAK29J,OAAS,EACd39J,KAAK00O,iBAAmB,EAExB10O,KAAK20O,YAAc/hO,IAEnB5S,KAAK40O,QAAS,EACd50O,KAAK48C,SAAU,EAEf58C,KAAK60O,mBAAoB,EAEzB70O,KAAK80O,kBAAmB,EACxB90O,KAAK+0O,gBAAiB,CAEvB,CAinBC,OA/mBDpqO,EAAAA,EAAAA,GAAA4oO,EAAA,EAAAttO,IAAA,OAAApG,MAEA,WAIC,OAFAG,KAAK0zO,OAAOsB,gBAAiBh1O,MAEtBA,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,WAIC,OAFAG,KAAK0zO,OAAOuB,kBAAmBj1O,MAExBA,KAAKoyB,OAEb,GAAC,CAAAnsB,IAAA,QAAApG,MAED,WASC,OAPAG,KAAK40O,QAAS,EACd50O,KAAK48C,SAAU,EAEf58C,KAAKwsB,KAAO,EACZxsB,KAAKu0O,YAAe,EACpBv0O,KAAKw0O,WAAa,KAEXx0O,KAAKk1O,aAAaC,aAE1B,GAAC,CAAAlvO,IAAA,YAAApG,MAED,WAEC,OAAOG,KAAK48C,UAAa58C,KAAK40O,QAA6B,IAAnB50O,KAAK8yN,WACxB,OAApB9yN,KAAKw0O,YAAuBx0O,KAAK0zO,OAAO0B,gBAAiBp1O,KAE3D,GAEA,CAAAiG,IAAA,cAAApG,MACA,WAEC,OAAOG,KAAK0zO,OAAO0B,gBAAiBp1O,KAErC,GAAC,CAAAiG,IAAA,UAAApG,MAED,SAAS2sB,GAIR,OAFAxsB,KAAKw0O,WAAahoN,EAEXxsB,IAER,GAAC,CAAAiG,IAAA,UAAApG,MAED,SAAS+xB,EAAM+iN,GAKd,OAHA30O,KAAKulC,KAAO3T,EACZ5xB,KAAK20O,YAAcA,EAEZ30O,IAER,GAMA,CAAAiG,IAAA,qBAAApG,MACA,SAAoB89J,GAOnB,OALA39J,KAAK29J,OAASA,EAGd39J,KAAK00O,iBAAmB10O,KAAK48C,QAAU+gH,EAAS,EAEzC39J,KAAKk1O,YAEb,GAEA,CAAAjvO,IAAA,qBAAApG,MACA,WAEC,OAAOG,KAAK00O,gBAEb,GAAC,CAAAzuO,IAAA,SAAApG,MAED,SAAQk1N,GAEP,OAAO/0N,KAAKq1O,gBAAiBtgB,EAAU,EAAG,EAE3C,GAAC,CAAA9uN,IAAA,UAAApG,MAED,SAASk1N,GAER,OAAO/0N,KAAKq1O,gBAAiBtgB,EAAU,EAAG,EAE3C,GAAC,CAAA9uN,IAAA,gBAAApG,MAED,SAAey1O,EAAevgB,EAAUwgB,GAKvC,GAHAD,EAAcE,QAASzgB,GACvB/0N,KAAKy1O,OAAQ1gB,GAERwgB,EAAO,CAEX,IAAMG,EAAiB11O,KAAK2zO,MAAM5e,SACjC4gB,EAAkBL,EAAc3B,MAAM5e,SAEtC6gB,EAAgBD,EAAkBD,EAClCG,EAAgBH,EAAiBC,EAElCL,EAAcC,KAAM,EAAKK,EAAe7gB,GACxC/0N,KAAKu1O,KAAMM,EAAe,EAAK9gB,EAEhC,CAEA,OAAO/0N,IAER,GAAC,CAAAiG,IAAA,cAAApG,MAED,SAAai2O,EAAc/gB,EAAUwgB,GAEpC,OAAOO,EAAaC,cAAe/1O,KAAM+0N,EAAUwgB,EAEpD,GAAC,CAAAtvO,IAAA,aAAApG,MAED,WAEC,IAAMm2O,EAAoBh2O,KAAKs0O,mBAS/B,OAP2B,OAAtB0B,IAEJh2O,KAAKs0O,mBAAqB,KAC1Bt0O,KAAK0zO,OAAOuC,4BAA6BD,IAInCh2O,IAER,GAMA,CAAAiG,IAAA,wBAAApG,MACA,SAAuBizN,GAKtB,OAHA9yN,KAAK8yN,UAAYA,EACjB9yN,KAAKy0O,oBAAsBz0O,KAAK40O,OAAS,EAAI9hB,EAEtC9yN,KAAKm1O,aAEb,GAEA,CAAAlvO,IAAA,wBAAApG,MACA,WAEC,OAAOG,KAAKy0O,mBAEb,GAAC,CAAAxuO,IAAA,cAAApG,MAED,SAAak1N,GAIZ,OAFA/0N,KAAK8yN,UAAY9yN,KAAK2zO,MAAM5e,SAAWA,EAEhC/0N,KAAKm1O,aAEb,GAAC,CAAAlvO,IAAA,WAAApG,MAED,SAAUunF,GAKT,OAHApnF,KAAKwsB,KAAO46D,EAAO56D,KACnBxsB,KAAK8yN,UAAY1rI,EAAO0rI,UAEjB9yN,KAAKm1O,aAEb,GAAC,CAAAlvO,IAAA,OAAApG,MAED,SAAMk1N,GAEL,OAAO/0N,KAAKu1O,KAAMv1O,KAAKy0O,oBAAqB,EAAG1f,EAEhD,GAAC,CAAA9uN,IAAA,OAAApG,MAED,SAAMq2O,EAAgBC,EAAcphB,GAEnC,IAAMye,EAAQxzO,KAAK0zO,OAClBn7M,EAAMi7M,EAAMhnN,KACZsmM,EAAY9yN,KAAK8yN,UAEd5D,EAAclvN,KAAKq0O,sBAEF,OAAhBnlB,IAEJA,EAAcskB,EAAM4C,0BACpBp2O,KAAKq0O,sBAAwBnlB,GAI9B,IAAMjxG,EAAQixG,EAAY3jH,mBACzBjkE,EAAS4nL,EAAY1jH,aAQtB,OANAyS,EAAO,GAAM1lF,EACb0lF,EAAO,GAAM1lF,EAAMw8L,EAEnBztL,EAAQ,GAAM4uM,EAAiBpjB,EAC/BxrL,EAAQ,GAAM6uM,EAAerjB,EAEtB9yN,IAER,GAAC,CAAAiG,IAAA,cAAApG,MAED,WAEC,IAAMw2O,EAAuBr2O,KAAKq0O,sBASlC,OAP8B,OAAzBgC,IAEJr2O,KAAKq0O,sBAAwB,KAC7Br0O,KAAK0zO,OAAOuC,4BAA6BI,IAInCr2O,IAER,GAEA,CAAAiG,IAAA,WAAApG,MAEA,WAEC,OAAOG,KAAK0zO,MAEb,GAAC,CAAAztO,IAAA,UAAApG,MAED,WAEC,OAAOG,KAAK2zO,KAEb,GAAC,CAAA1tO,IAAA,UAAApG,MAED,WAEC,OAAOG,KAAK4zO,YAAc5zO,KAAK0zO,OAAO4C,KAEvC,GAEA,CAAArwO,IAAA,UAAApG,MAEA,SAAS2sB,EAAM+pN,EAAWC,EAAexJ,GAIxC,GAAOhtO,KAAK48C,QAAZ,CASA,IAAMg9C,EAAY55F,KAAKw0O,WAEvB,GAAmB,OAAd56I,EAAqB,CAIzB,IAAM68I,GAAgBjqN,EAAOotE,GAAc48I,EACtCC,EAAc,GAAuB,IAAlBD,EAEvBD,EAAY,GAKZv2O,KAAKw0O,WAAa,KAClB+B,EAAYC,EAAgBC,EAI9B,CAIAF,GAAav2O,KAAK02O,iBAAkBlqN,GACpC,IAAMmqN,EAAW32O,KAAK42O,YAAaL,GAK7B54E,EAAS39J,KAAK62O,cAAerqN,GAEnC,GAAKmxI,EAAS,EAAI,CAEjB,IAAMm2E,EAAe9zO,KAAKi0O,cACpB6C,EAAiB92O,KAAKk0O,kBAE5B,GAASl0O,KAAKwvN,YAERxkG,GAEJ,IAAM,IAAI34G,EAAI,EAAGtQ,EAAI+xO,EAAavxO,OAAQ8P,IAAMtQ,IAAMsQ,EAErDyhO,EAAczhO,GAAI88M,SAAUwnB,GAC5BG,EAAgBzkO,GAAI0kO,mBAAoBp5E,QASzC,IAAM,IAAItrJ,EAAI,EAAGtQ,EAAI+xO,EAAavxO,OAAQ8P,IAAMtQ,IAAMsQ,EAErDyhO,EAAczhO,GAAI88M,SAAUwnB,GAC5BG,EAAgBzkO,GAAI2kO,WAAYhK,EAAWrvE,EAM/C,CA/DA,MAHC39J,KAAK62O,cAAerqN,EAoEtB,GAAC,CAAAvmB,IAAA,gBAAApG,MAED,SAAe2sB,GAEd,IAAImxI,EAAS,EAEb,GAAK39J,KAAK48C,QAAU,CAEnB+gH,EAAS39J,KAAK29J,OACd,IAAMuxD,EAAclvN,KAAKs0O,mBAEzB,GAAqB,OAAhBplB,EAAuB,CAE3B,IAAM+nB,EAAmB/nB,EAAYC,SAAU3iM,GAAQ,GAEvDmxI,GAAUs5E,EAELzqN,EAAO0iM,EAAY3jH,mBAAoB,KAE3CvrG,KAAKk1O,aAEqB,IAArB+B,IAGJj3O,KAAK48C,SAAU,GAMlB,CAED,CAGA,OADA58C,KAAK00O,iBAAmB/2E,EACjBA,CAER,GAAC,CAAA13J,IAAA,mBAAApG,MAED,SAAkB2sB,GAEjB,IAAIsmM,EAAY,EAEhB,IAAO9yN,KAAK40O,OAAS,CAEpB9hB,EAAY9yN,KAAK8yN,UAEjB,IAAM5D,EAAclvN,KAAKq0O,sBAEzB,GAAqB,OAAhBnlB,EAIJ4D,GAFyB5D,EAAYC,SAAU3iM,GAAQ,GAIlDA,EAAO0iM,EAAY3jH,mBAAoB,KAE3CvrG,KAAKm1O,cAEc,IAAdriB,EAGJ9yN,KAAK40O,QAAS,EAKd50O,KAAK8yN,UAAYA,EAQrB,CAGA,OADA9yN,KAAKy0O,oBAAsB3hB,EACpBA,CAER,GAAC,CAAA7sN,IAAA,cAAApG,MAED,SAAa02O,GAEZ,IAAMxhB,EAAW/0N,KAAK2zO,MAAM5e,SACtBxvL,EAAOvlC,KAAKulC,KAEd/Y,EAAOxsB,KAAKwsB,KAAO+pN,EACnBW,EAAYl3O,KAAKu0O,WAEf4C,EAAa5xM,IAASmlF,GAE5B,GAAmB,IAAd6rH,EAEJ,OAAqB,IAAhBW,EAA2B1qN,EAEvB2qN,GAAkC,KAAR,EAAZD,GAA0BniB,EAAWvoM,EAAOA,EAIpE,GAAK+Y,IAASilF,GAAW,EAEH,IAAhB0sH,IAIJl3O,KAAKu0O,WAAa,EAClBv0O,KAAKo3O,aAAa,GAAM,GAAM,IAI/BC,EAAa,CAEZ,GAAK7qN,GAAQuoM,EAEZvoM,EAAOuoM,MAED,MAAKvoM,EAAO,GAIZ,CAENxsB,KAAKwsB,KAAOA,EAEZ,MAAM6qN,CAEP,CARC7qN,EAAO,CAQR,CAEKxsB,KAAK60O,kBAAoB70O,KAAK40O,QAAS,EACvC50O,KAAK48C,SAAU,EAEpB58C,KAAKwsB,KAAOA,EAEZxsB,KAAK0zO,OAAOpnN,cAAe,CAC1BzqB,KAAM,WAAYulF,OAAQpnF,KAC1BiY,UAAWs+N,EAAY,GAAM,EAAI,GAGnC,CAED,KAAO,CAwBN,IAtBqB,IAAhBW,IAICX,GAAa,GAEjBW,EAAY,EAEZl3O,KAAKo3O,aAAa,EAA2B,IAArBp3O,KAAK20O,YAAmBwC,IAQhDn3O,KAAKo3O,YAAkC,IAArBp3O,KAAK20O,aAAmB,EAAMwC,IAM7C3qN,GAAQuoM,GAAYvoM,EAAO,EAAI,CAInC,IAAM8qN,EAAYljO,KAAKi5B,MAAO7gB,EAAOuoM,GACrCvoM,GAAQuoM,EAAWuiB,EAEnBJ,GAAa9iO,KAAKgB,IAAKkiO,GAEvB,IAAMn4J,EAAUn/E,KAAK20O,YAAcuC,EAEnC,GAAK/3J,GAAW,EAIVn/E,KAAK60O,kBAAoB70O,KAAK40O,QAAS,EACvC50O,KAAK48C,SAAU,EAEpBpwB,EAAO+pN,EAAY,EAAIxhB,EAAW,EAElC/0N,KAAKwsB,KAAOA,EAEZxsB,KAAK0zO,OAAOpnN,cAAe,CAC1BzqB,KAAM,WAAYulF,OAAQpnF,KAC1BiY,UAAWs+N,EAAY,EAAI,GAAM,QAG5B,CAIN,GAAiB,IAAZp3J,EAAgB,CAIpB,IAAMo4J,EAAUhB,EAAY,EAC5Bv2O,KAAKo3O,YAAaG,GAAWA,EAASJ,EAEvC,MAECn3O,KAAKo3O,aAAa,GAAO,EAAOD,GAIjCn3O,KAAKu0O,WAAa2C,EAElBl3O,KAAKwsB,KAAOA,EAEZxsB,KAAK0zO,OAAOpnN,cAAe,CAC1BzqB,KAAM,OAAQulF,OAAQpnF,KAAMs3O,UAAWA,GAGzC,CAED,MAECt3O,KAAKwsB,KAAOA,EAIb,GAAK2qN,GAAkC,KAAR,EAAZD,GAIlB,OAAOniB,EAAWvoM,CAIpB,CAEA,OAAOA,CAER,GAAC,CAAAvmB,IAAA,cAAApG,MAED,SAAa03O,EAASC,EAAOL,GAE5B,IAAMznB,EAAW1vN,KAAKg0O,qBAEjBmD,GAEJznB,EAASmB,YAAchmG,GACvB6kG,EAASoB,UAAYjmG,KAQpB6kG,EAASmB,YAFL0mB,EAEmBv3O,KAAK80O,iBAAmBjqH,GAAkBD,GAI1CE,GAMvB4kG,EAASoB,UAFL0mB,EAEiBx3O,KAAK+0O,eAAiBlqH,GAAkBD,GAItCE,GAM1B,GAAC,CAAA7kH,IAAA,kBAAApG,MAED,SAAiBk1N,EAAU0iB,EAAWC,GAErC,IAAMlE,EAAQxzO,KAAK0zO,OAAQn7M,EAAMi7M,EAAMhnN,KACnC0iM,EAAclvN,KAAKs0O,mBAEF,OAAhBplB,IAEJA,EAAcskB,EAAM4C,0BACpBp2O,KAAKs0O,mBAAqBplB,GAI3B,IAAMjxG,EAAQixG,EAAY3jH,mBACzBjkE,EAAS4nL,EAAY1jH,aAOtB,OALAyS,EAAO,GAAM1lF,EACb+O,EAAQ,GAAMmwM,EACdx5H,EAAO,GAAM1lF,EAAMw8L,EACnBztL,EAAQ,GAAMowM,EAEP13O,IAER,KAACuzO,CAAA,CAnrBmB,GAurBfoE,GAAmC,IAAIltO,aAAc,GAGrDmtO,GAAc,SAAAC,IAAAxvO,EAAAA,EAAAA,GAAAuvO,EAAAC,GAAA,IAAAC,GAAAvvO,EAAAA,EAAAA,GAAAqvO,GAEnB,SAAAA,EAAahoL,GAAO,IAAAmoL,EAQE,OARFrvO,EAAAA,EAAAA,GAAA,KAAAkvO,IAEnBG,EAAAD,EAAA14O,KAAA,OAEKk3O,MAAQ1mL,EACbmoL,EAAKC,qBACLD,EAAKE,WAAa,EAClBF,EAAKvrN,KAAO,EACZurN,EAAKjlB,UAAY,EAAIilB,CAEtB,CAquBC,OAruBAptO,EAAAA,EAAAA,GAAAitO,EAAA,EAAA3xO,IAAA,cAAApG,MAED,SAAaunF,EAAQ8wJ,GAEpB,IAAMtoL,EAAOw3B,EAAOwsJ,YAAc5zO,KAAKs2O,MACtCn5H,EAAS/1B,EAAOusJ,MAAMx2H,OACtB02H,EAAU12H,EAAO56G,OACjBksO,EAAWrnJ,EAAO8sJ,kBAClBJ,EAAe1sJ,EAAO6sJ,cACtBkE,EAAWvoL,EAAK5kD,KAChBotO,EAAiBp4O,KAAKq4O,uBAEnBC,EAAiBF,EAAgBD,QAEbh3O,IAAnBm3O,IAEJA,EAAiB,CAAC,EAClBF,EAAgBD,GAAaG,GAI9B,IAAM,IAAI10O,EAAI,EAAGA,IAAMiwO,IAAYjwO,EAAI,CAEtC,IAAMm6G,EAAQZ,EAAQv5G,GACrBsyN,EAAYn4G,EAAM59G,KAEfurO,EAAU4M,EAAgBpiB,GAE9B,QAAiB/0N,IAAZuqO,IAEDA,EAAQqB,eACX0B,EAAU7qO,GAAM8nO,MAEV,CAIN,QAAiBvqO,KAFjBuqO,EAAU+C,EAAU7qO,IAES,CAIC,OAAxB8nO,EAAQyI,gBAETzI,EAAQqB,eACX/sO,KAAKu4O,oBAAqB7M,EAASyM,EAAUjiB,IAI9C,QAED,CAEA,IAAMlmL,EAAOkoM,GAAmBA,EAC/BhE,kBAAmBtwO,GAAI8nO,QAAQwC,cAEhCxC,EAAU,IAAID,GACbzxH,GAAgB93G,OAAQ0tD,EAAMsmK,EAAWlmL,GACzC+tE,EAAM0wG,cAAe1wG,EAAMG,iBAEjB6uH,eACX/sO,KAAKu4O,oBAAqB7M,EAASyM,EAAUjiB,GAE7CuY,EAAU7qO,GAAM8nO,CAEjB,CAEAoI,EAAclwO,GAAI8nG,aAAeggI,EAAQtkO,MAE1C,CAED,GAAC,CAAAnB,IAAA,kBAAApG,MAED,SAAiBunF,GAEhB,IAAOpnF,KAAKo1O,gBAAiBhuJ,GAAW,CAEvC,GAA4B,OAAvBA,EAAO+sJ,YAAuB,CAKlC,IAAMgE,GAAa/wJ,EAAOwsJ,YAAc5zO,KAAKs2O,OAAQtrO,KACpDwtO,EAAWpxJ,EAAOusJ,MAAM3oO,KACxBytO,EAAiBz4O,KAAK04O,eAAgBF,GAEvCx4O,KAAK24O,YAAavxJ,EACjBqxJ,GAAkBA,EAAeG,aAAc,IAEhD54O,KAAK64O,mBAAoBzxJ,EAAQoxJ,EAAUL,EAE5C,CAKA,IAHA,IAAM1J,EAAWrnJ,EAAO8sJ,kBAGdtwO,EAAI,EAAGI,EAAIyqO,EAASlsO,OAAQqB,IAAMI,IAAMJ,EAAI,CAErD,IAAM8nO,EAAU+C,EAAU7qO,GAEG,IAAxB8nO,EAAQoB,aAEZ9sO,KAAK84O,aAAcpN,GACnBA,EAAQqN,oBAIV,CAEA/4O,KAAKg5O,YAAa5xJ,EAEnB,CAED,GAAC,CAAAnhF,IAAA,oBAAApG,MAED,SAAmBunF,GAElB,GAAKpnF,KAAKo1O,gBAAiBhuJ,GAAW,CAKrC,IAHA,IAAMqnJ,EAAWrnJ,EAAO8sJ,kBAGdtwO,EAAI,EAAGI,EAAIyqO,EAASlsO,OAAQqB,IAAMI,IAAMJ,EAAI,CAErD,IAAM8nO,EAAU+C,EAAU7qO,GAEG,MAArB8nO,EAAQoB,WAEfpB,EAAQuN,uBACRj5O,KAAKk5O,iBAAkBxN,GAIzB,CAEA1rO,KAAKm5O,gBAAiB/xJ,EAEvB,CAED,GAEA,CAAAnhF,IAAA,qBAAApG,MAEA,WAECG,KAAKo5O,SAAW,GAChBp5O,KAAKq5O,gBAAkB,EAEvBr5O,KAAK04O,eAAiB,CAAC,EAQvB14O,KAAKquO,UAAY,GACjBruO,KAAKs5O,iBAAmB,EAExBt5O,KAAKq4O,uBAAyB,CAAC,EAG/Br4O,KAAKu5O,qBAAuB,GAC5Bv5O,KAAKw5O,4BAA8B,EAEnC,IAAM95L,EAAQ1/C,KAEdA,KAAKkyO,MAAQ,CAEZuH,QAAS,CACR,SAAI1gB,GAEH,OAAOr5K,EAAM05L,SAAS72O,MAEvB,EACA,SAAI4vO,GAEH,OAAOzyL,EAAM25L,eAEd,GAED5K,SAAU,CACT,SAAI1V,GAEH,OAAOr5K,EAAM2uL,UAAU9rO,MAExB,EACA,SAAI4vO,GAEH,OAAOzyL,EAAM45L,gBAEd,GAEDI,oBAAqB,CACpB,SAAI3gB,GAEH,OAAOr5K,EAAM65L,qBAAqBh3O,MAEnC,EACA,SAAI4vO,GAEH,OAAOzyL,EAAM85L,2BAEd,GAKH,GAEA,CAAAvzO,IAAA,kBAAApG,MAEA,SAAiBunF,GAEhB,IAAMxhF,EAAQwhF,EAAO+sJ,YACrB,OAAiB,OAAVvuO,GAAkBA,EAAQ5F,KAAKq5O,eAEvC,GAAC,CAAApzO,IAAA,qBAAApG,MAED,SAAoBunF,EAAQoxJ,EAAUL,GAErC,IAAMsB,EAAUz5O,KAAKo5O,SACpBO,EAAgB35O,KAAK04O,eAElBD,EAAiBkB,EAAenB,GAEpC,QAAwBr3O,IAAnBs3O,EAEJA,EAAiB,CAEhBG,aAAc,CAAExxJ,GAChBwyJ,aAAc,CAAC,GAIhBxyJ,EAAOgtJ,kBAAoB,EAE3BuF,EAAenB,GAAaC,MAEtB,CAEN,IAAMG,EAAeH,EAAeG,aAEpCxxJ,EAAOgtJ,kBAAoBwE,EAAar2O,OACxCq2O,EAAat2O,KAAM8kF,EAEpB,CAEAA,EAAO+sJ,YAAcsF,EAAQl3O,OAC7Bk3O,EAAQn3O,KAAM8kF,GAEdqxJ,EAAemB,aAAczB,GAAa/wJ,CAE3C,GAAC,CAAAnhF,IAAA,wBAAApG,MAED,SAAuBunF,GAEtB,IAAMqyJ,EAAUz5O,KAAKo5O,SACpBS,EAAqBJ,EAASA,EAAQl3O,OAAS,GAC/Cu3O,EAAa1yJ,EAAO+sJ,YAErB0F,EAAmB1F,YAAc2F,EACjCL,EAASK,GAAeD,EACxBJ,EAAQ5zO,MAERuhF,EAAO+sJ,YAAc,KAGrB,IAAMqE,EAAWpxJ,EAAOusJ,MAAM3oO,KAC7B2uO,EAAgB35O,KAAK04O,eACrBD,EAAiBkB,EAAenB,GAChCuB,EAAsBtB,EAAeG,aAErCoB,EACCD,EAAqBA,EAAoBx3O,OAAS,GAEnD03O,EAAmB7yJ,EAAOgtJ,kBAE3B4F,EAAgB5F,kBAAoB6F,EACpCF,EAAqBE,GAAqBD,EAC1CD,EAAoBl0O,MAEpBuhF,EAAOgtJ,kBAAoB,YAGNqE,EAAemB,cACtBxyJ,EAAOwsJ,YAAc5zO,KAAKs2O,OAAQtrO,MAIZ,IAA/B+uO,EAAoBx3O,eAEjBo3O,EAAenB,GAIvBx4O,KAAKk6O,iCAAkC9yJ,EAExC,GAAC,CAAAnhF,IAAA,mCAAApG,MAED,SAAkCunF,GAIjC,IAFA,IAAMqnJ,EAAWrnJ,EAAO8sJ,kBAEdtwO,EAAI,EAAGI,EAAIyqO,EAASlsO,OAAQqB,IAAMI,IAAMJ,EAAI,CAErD,IAAM8nO,EAAU+C,EAAU7qO,GAES,MAA3B8nO,EAAQqB,gBAEf/sO,KAAKm6O,uBAAwBzO,EAI/B,CAED,GAAC,CAAAzlO,IAAA,cAAApG,MAED,SAAaunF,GAQZ,IAAMqyJ,EAAUz5O,KAAKo5O,SACpBgB,EAAYhzJ,EAAO+sJ,YAEnBkG,EAAkBr6O,KAAKq5O,kBAEvBiB,EAAsBb,EAASY,GAEhCjzJ,EAAO+sJ,YAAckG,EACrBZ,EAASY,GAAoBjzJ,EAE7BkzJ,EAAoBnG,YAAciG,EAClCX,EAASW,GAAcE,CAExB,GAAC,CAAAr0O,IAAA,kBAAApG,MAED,SAAiBunF,GAQhB,IAAMqyJ,EAAUz5O,KAAKo5O,SACpBgB,EAAYhzJ,EAAO+sJ,YAEnBoG,IAAwBv6O,KAAKq5O,gBAE7BmB,EAAmBf,EAASc,GAE7BnzJ,EAAO+sJ,YAAcoG,EACrBd,EAASc,GAAuBnzJ,EAEhCozJ,EAAiBrG,YAAciG,EAC/BX,EAASW,GAAcI,CAExB,GAEA,CAAAv0O,IAAA,sBAAApG,MAEA,SAAqB6rO,EAASyM,EAAUjiB,GAEvC,IAAMkiB,EAAiBp4O,KAAKq4O,uBAC3B5J,EAAWzuO,KAAKquO,UAEboM,EAAgBrC,EAAgBD,QAEbh3O,IAAlBs5O,IAEJA,EAAgB,CAAC,EACjBrC,EAAgBD,GAAasC,GAI9BA,EAAevkB,GAAcwV,EAE7BA,EAAQyI,YAAc1F,EAASlsO,OAC/BksO,EAASnsO,KAAMopO,EAEhB,GAAC,CAAAzlO,IAAA,yBAAApG,MAED,SAAwB6rO,GAEvB,IAAM+C,EAAWzuO,KAAKquO,UACrBqM,EAAchP,EAAQA,QACtByM,EAAWuC,EAAY/L,SAAS3jO,KAChCkrN,EAAYwkB,EAAY1qM,KACxBooM,EAAiBp4O,KAAKq4O,uBACtBoC,EAAgBrC,EAAgBD,GAEhCwC,EAAsBlM,EAAUA,EAASlsO,OAAS,GAClDu3O,EAAapO,EAAQyI,YAEtBwG,EAAoBxG,YAAc2F,EAClCrL,EAAUqL,GAAea,EACzBlM,EAAS5oO,aAEF40O,EAAevkB,GAEuB,IAAxC52N,OAAO4G,KAAMu0O,GAAgBl4O,eAE1B61O,EAAgBD,EAIzB,GAAC,CAAAlyO,IAAA,eAAApG,MAED,SAAc6rO,GAEb,IAAM+C,EAAWzuO,KAAKquO,UACrB+L,EAAY1O,EAAQyI,YAEpBkG,EAAkBr6O,KAAKs5O,mBAEvBsB,EAAuBnM,EAAU4L,GAElC3O,EAAQyI,YAAckG,EACtB5L,EAAU4L,GAAoB3O,EAE9BkP,EAAqBzG,YAAciG,EACnC3L,EAAU2L,GAAcQ,CAEzB,GAAC,CAAA30O,IAAA,mBAAApG,MAED,SAAkB6rO,GAEjB,IAAM+C,EAAWzuO,KAAKquO,UACrB+L,EAAY1O,EAAQyI,YAEpBoG,IAAwBv6O,KAAKs5O,iBAE7BuB,EAAoBpM,EAAU8L,GAE/B7O,EAAQyI,YAAcoG,EACtB9L,EAAU8L,GAAuB7O,EAEjCmP,EAAkB1G,YAAciG,EAChC3L,EAAU2L,GAAcS,CAEzB,GAGA,CAAA50O,IAAA,0BAAApG,MAEA,WAEC,IAAMi0O,EAAe9zO,KAAKu5O,qBACzBc,EAAkBr6O,KAAKw5O,8BAEpBtqB,EAAc4kB,EAAcuG,GAahC,YAXqBl5O,IAAhB+tN,KAEJA,EAAc,IAAI0C,GACjB,IAAInnN,aAAc,GAAK,IAAIA,aAAc,GACzC,EAAGktO,KAEQmD,aAAeT,EAC3BvG,EAAcuG,GAAoBnrB,GAI5BA,CAER,GAAC,CAAAjpN,IAAA,8BAAApG,MAED,SAA6BqvN,GAE5B,IAAM4kB,EAAe9zO,KAAKu5O,qBACzBa,EAAYlrB,EAAY4rB,aAExBP,IAAwBv6O,KAAKw5O,4BAE7BuB,EAAwBjH,EAAcyG,GAEvCrrB,EAAY4rB,aAAeP,EAC3BzG,EAAcyG,GAAuBrrB,EAErC6rB,EAAsBD,aAAeV,EACrCtG,EAAcsG,GAAcW,CAE7B,GAIA,CAAA90O,IAAA,aAAApG,MACA,SAAYiuN,EAAMktB,EAAcxrB,GAE/B,IAAM5/J,EAAOorL,GAAgBh7O,KAAKs2O,MACjC6B,EAAWvoL,EAAK5kD,KAEbiwO,EAA6B,kBAATntB,EAAoB1vG,GAAc88H,WAAYtrL,EAAMk+J,GAASA,EAE/E0qB,EAA0B,OAAfyC,EAAsBA,EAAWjwO,KAAO8iN,EAEnD2qB,EAAiBz4O,KAAK04O,eAAgBF,GACxCN,EAAkB,KAgBtB,QAdmB/2O,IAAdquN,IAIHA,EAFmB,OAAfyrB,EAEQA,EAAWzrB,UAIXzkG,SAMU5pH,IAAnBs3O,EAA+B,CAEnC,IAAM0C,EAAiB1C,EAAemB,aAAczB,GAEpD,QAAwBh3O,IAAnBg6O,GAAgCA,EAAe3rB,YAAcA,EAEjE,OAAO2rB,EAMRjD,EAAkBO,EAAeG,aAAc,GAG3B,OAAfqC,IACJA,EAAa/C,EAAgBvE,MAE/B,CAGA,GAAoB,OAAfsH,EAAsB,OAAO,KAGlC,IAAMG,EAAY,IAAI7H,GAAiBvzO,KAAMi7O,EAAYD,EAAcxrB,GAOvE,OALAxvN,KAAK24O,YAAayC,EAAWlD,GAG7Bl4O,KAAK64O,mBAAoBuC,EAAW5C,EAAUL,GAEvCiD,CAER,GAEA,CAAAn1O,IAAA,iBAAApG,MACA,SAAgBiuN,EAAMktB,GAErB,IAAMprL,EAAOorL,GAAgBh7O,KAAKs2O,MACjC6B,EAAWvoL,EAAK5kD,KAEhBiwO,EAA6B,kBAATntB,EACnB1vG,GAAc88H,WAAYtrL,EAAMk+J,GAASA,EAE1C0qB,EAAWyC,EAAaA,EAAWjwO,KAAO8iN,EAE1C2qB,EAAiBz4O,KAAK04O,eAAgBF,GAEvC,YAAwBr3O,IAAnBs3O,GAEGA,EAAemB,aAAczB,IAI9B,IAER,GAEA,CAAAlyO,IAAA,gBAAApG,MACA,WAKC,IAHA,IAAM45O,EAAUz5O,KAAKo5O,SAGXx1O,EAFE5D,KAAKq5O,gBAEQ,EAAGz1O,GAAK,IAAMA,EAEtC61O,EAAS71O,GAAI43D,OAId,OAAOx7D,IAER,GAEA,CAAAiG,IAAA,SAAApG,MACA,SAAQ02O,GAEPA,GAAav2O,KAAK8yN,UAYlB,IAVA,IAAM2mB,EAAUz5O,KAAKo5O,SACpBiC,EAAWr7O,KAAKq5O,gBAEhB7sN,EAAOxsB,KAAKwsB,MAAQ+pN,EACpBC,EAAgBpiO,KAAK0nC,KAAMy6L,GAE3BvJ,EAAYhtO,KAAKi4O,YAAc,EAItBr0O,EAAI,EAAGA,IAAMy3O,IAAaz3O,EAAI,CAExB61O,EAAS71O,GAEjB03O,QAAS9uN,EAAM+pN,EAAWC,EAAexJ,EAEjD,CAOA,IAHA,IAAMyB,EAAWzuO,KAAKquO,UACrBmE,EAAYxyO,KAAKs5O,iBAER11O,EAAI,EAAGA,IAAM4uO,IAAc5uO,EAEpC6qO,EAAU7qO,GAAI9E,MAAOkuO,GAItB,OAAOhtO,IAER,GAEA,CAAAiG,IAAA,UAAApG,MACA,SAAS07O,GAERv7O,KAAKwsB,KAAO,EACZ,IAAM,IAAI5oB,EAAI,EAAGA,EAAI5D,KAAKo5O,SAAS72O,OAAQqB,IAE1C5D,KAAKo5O,SAAUx1O,GAAI4oB,KAAO,EAI3B,OAAOxsB,KAAKqyC,OAAQkpM,EAErB,GAEA,CAAAt1O,IAAA,UAAApG,MACA,WAEC,OAAOG,KAAKs2O,KAEb,GAEA,CAAArwO,IAAA,cAAApG,MACA,SAAaiuN,GAEZ,IAAM2rB,EAAUz5O,KAAKo5O,SACpBZ,EAAW1qB,EAAK9iN,KAChB2uO,EAAgB35O,KAAK04O,eACrBD,EAAiBkB,EAAenB,GAEjC,QAAwBr3O,IAAnBs3O,EAA+B,CAQnC,IAFA,IAAM+C,EAAkB/C,EAAeG,aAE7Bh1O,EAAI,EAAGI,EAAIw3O,EAAgBj5O,OAAQqB,IAAMI,IAAMJ,EAAI,CAE5D,IAAMwjF,EAASo0J,EAAiB53O,GAEhC5D,KAAKi1O,kBAAmB7tJ,GAExB,IAAM0yJ,EAAa1yJ,EAAO+sJ,YACzB0F,EAAqBJ,EAASA,EAAQl3O,OAAS,GAEhD6kF,EAAO+sJ,YAAc,KACrB/sJ,EAAOgtJ,kBAAoB,KAE3ByF,EAAmB1F,YAAc2F,EACjCL,EAASK,GAAeD,EACxBJ,EAAQ5zO,MAER7F,KAAKk6O,iCAAkC9yJ,EAExC,QAEOuyJ,EAAenB,EAEvB,CAED,GAEA,CAAAvyO,IAAA,cAAApG,MACA,SAAa+vD,GAEZ,IAAMuoL,EAAWvoL,EAAK5kD,KACrB2uO,EAAgB35O,KAAK04O,eAEtB,IAAM,IAAMF,KAAYmB,EAAgB,CAEvC,IACCvyJ,EADoBuyJ,EAAenB,GAAWoB,aACvBzB,QAERh3O,IAAXimF,IAEJpnF,KAAKi1O,kBAAmB7tJ,GACxBpnF,KAAKy7O,sBAAuBr0J,GAI9B,CAEA,IACCqzJ,EADsBz6O,KAAKq4O,uBACKF,GAEjC,QAAuBh3O,IAAlBs5O,EAEJ,IAAM,IAAMvkB,KAAaukB,EAAgB,CAExC,IAAM/O,EAAU+O,EAAevkB,GAC/BwV,EAAQuN,uBACRj5O,KAAKm6O,uBAAwBzO,EAE9B,CAIF,GAEA,CAAAzlO,IAAA,gBAAApG,MACA,SAAeiuN,EAAMktB,GAEpB,IAAM5zJ,EAASpnF,KAAKm7O,eAAgBrtB,EAAMktB,GAE1B,OAAX5zJ,IAEJpnF,KAAKi1O,kBAAmB7tJ,GACxBpnF,KAAKy7O,sBAAuBr0J,GAI9B,KAACwwJ,CAAA,CAjvBkB,CAASpuL,IAqvBvBlW,GAAO,WAEZ,SAAAA,EAAazzC,IAAQ6I,EAAAA,EAAAA,GAAA,KAAA4qC,GAEpBtzC,KAAKH,MAAQA,CAEd,CAMC,OANA8K,EAAAA,EAAAA,GAAA2oC,EAAA,EAAArtC,IAAA,QAAApG,MAED,WAEC,OAAO,IAAIyzC,OAA8BnyC,IAArBnB,KAAKH,MAAMugB,MAAsBpgB,KAAKH,MAAQG,KAAKH,MAAMugB,QAE9E,KAACkzB,CAAA,CAZW,GAgBTnjC,GAAK,EAEHurO,GAAa,SAAAC,IAAAtzO,EAAAA,EAAAA,GAAAqzO,EAAAC,GAAA,IAAAC,GAAArzO,EAAAA,EAAAA,GAAAmzO,GAElB,SAAAA,IAAc,IAAAG,EAWM,OAXNnzO,EAAAA,EAAAA,GAAA,KAAAgzO,IAEbG,EAAAD,EAAAx8O,KAAA,OAEK08O,iBAAkB,EAEvBx8O,OAAOgF,gBAAcy5C,EAAAA,EAAAA,GAAA89L,GAAQ,KAAM,CAAEh8O,MAAOsQ,OAE5C0rO,EAAK17O,KAAO,GAEZ07O,EAAKhrG,MAAQrkB,GACbqvH,EAAKjuM,SAAW,GAAGiuM,CAEpB,CAmEC,OAnEAlxO,EAAAA,EAAAA,GAAA+wO,EAAA,EAAAz1O,IAAA,MAAApG,MAED,SAAK+2J,GAIJ,OAFA52J,KAAK4tC,SAAStrC,KAAMs0J,GAEb52J,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQ+2J,GAEP,IAAMhxJ,EAAQ5F,KAAK4tC,SAASrmC,QAASqvJ,GAIrC,OAFiB,IAAZhxJ,GAAgB5F,KAAK4tC,SAAS90B,OAAQlT,EAAO,GAE3C5F,IAER,GAAC,CAAAiG,IAAA,UAAApG,MAED,SAASM,GAIR,OAFAH,KAAKG,KAAOA,EAELH,IAER,GAAC,CAAAiG,IAAA,WAAApG,MAED,SAAUA,GAIT,OAFAG,KAAK6wI,MAAQhxI,EAENG,IAER,GAAC,CAAAiG,IAAA,UAAApG,MAED,WAIC,OAFAG,KAAKssB,cAAe,CAAEzqB,KAAM,YAErB7B,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAM8G,GAEL3G,KAAKG,KAAOwG,EAAOxG,KACnBH,KAAK6wI,MAAQlqI,EAAOkqI,MAEpB,IAAMkrG,EAAiBp1O,EAAOinC,SAE9B5tC,KAAK4tC,SAASrrC,OAAS,EAEvB,IAAM,IAAIqB,EAAI,EAAGwS,EAAI2lO,EAAex5O,OAAQqB,EAAIwS,EAAGxS,IAElD5D,KAAK4tC,SAAStrC,KAAMy5O,EAAgBn4O,GAAIwc,SAIzC,OAAOpgB,IAER,GAAC,CAAAiG,IAAA,QAAApG,MAED,WAEC,OAAO,IAAIG,KAAK4zD,aAAc3vD,KAAMjE,KAErC,KAAC07O,CAAA,CAlFiB,CAASlyL,IAsFtBwyL,GAA0B,SAAAC,IAAA5zO,EAAAA,EAAAA,GAAA2zO,EAAAC,GAAA,IAAAC,GAAA3zO,EAAAA,EAAAA,GAAAyzO,GAE/B,SAAAA,EAAa58K,EAAO0oC,GAA+B,IAAAq0I,EAAvBjqF,EAAgBtxJ,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAML,OANM8H,EAAAA,EAAAA,GAAA,KAAAszO,IAE/CG,EAAAD,EAAA98O,KAAA,KAAOggE,EAAO0oC,IAET8rD,8BAA+B,EAEpCuoF,EAAKjqF,iBAAmBA,EAAiBiqF,CAE1C,CA+BC,OA/BAxxO,EAAAA,EAAAA,GAAAqxO,EAAA,EAAA/1O,IAAA,OAAApG,MAED,SAAM8G,GAML,OAJAolC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAgwM,EAAA78O,WAAA,aAAAC,KAAA,KAAYuH,GAEZ3G,KAAKkyJ,iBAAmBvrJ,EAAOurJ,iBAExBlyJ,IAER,GAAC,CAAAiG,IAAA,QAAApG,MAED,SAAO8M,GAEN,IAAMynE,GAAEroC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAgwM,EAAA78O,WAAA,cAAAC,KAAA,KAAgBuN,GAIxB,OAFAynE,EAAG89E,iBAAmBlyJ,KAAKkyJ,iBAEpB99E,CAER,GAAC,CAAAnuE,IAAA,SAAApG,MAED,SAAQ8M,GAEP,IAAMuxF,GAAInyD,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAgwM,EAAA78O,WAAA,eAAAC,KAAA,KAAiBuN,GAK3B,OAHAuxF,EAAK01D,8BAA+B,EACpC11D,EAAKg0D,iBAAmBlyJ,KAAKkyJ,iBAEtBh0D,CAER,KAAC89I,CAAA,CAzC8B,CAASxmI,IA6CnC4mI,GAAiB,WAEtB,SAAAA,EAAah1O,EAAQvF,EAAMkzG,EAAUhhF,EAAanxB,IAAQ8F,EAAAA,EAAAA,GAAA,KAAA0zO,GAEzDp8O,KAAK00I,qBAAsB,EAE3B10I,KAAKoH,OAASA,EACdpH,KAAK6B,KAAOA,EACZ7B,KAAK+0G,SAAWA,EAChB/0G,KAAK+zB,YAAcA,EACnB/zB,KAAK4C,MAAQA,EAEb5C,KAAKqoE,QAAU,CAEhB,CAuCC,OAvCA19D,EAAAA,EAAAA,GAAAyxO,EAAA,EAAAn2O,IAAA,cAAAxB,IAED,SAAiB5E,IAED,IAAVA,GAAiBG,KAAKqoE,SAE5B,GAAC,CAAApiE,IAAA,YAAApG,MAED,SAAWuH,GAIV,OAFApH,KAAKoH,OAASA,EAEPpH,IAER,GAAC,CAAAiG,IAAA,UAAApG,MAED,SAASgC,EAAMkyB,GAKd,OAHA/zB,KAAK6B,KAAOA,EACZ7B,KAAK+zB,YAAcA,EAEZ/zB,IAER,GAAC,CAAAiG,IAAA,cAAApG,MAED,SAAak1G,GAIZ,OAFA/0G,KAAK+0G,SAAWA,EAET/0G,IAER,GAAC,CAAAiG,IAAA,WAAApG,MAED,SAAU+C,GAIT,OAFA5C,KAAK4C,MAAQA,EAEN5C,IAER,KAACo8O,CAAA,CArDqB,GAyDjBC,GAAS,WAEd,SAAAA,EAAa56G,EAAQxpH,GAAsC,IAA3Bo5B,EAAIzwC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAG2wC,EAAG3wC,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAGgS,KAAQlK,EAAAA,EAAAA,GAAA,KAAA2zO,GAEvDr8O,KAAKgY,IAAM,IAAI6hB,GAAK4nG,EAAQxpH,GAG5BjY,KAAKqxC,KAAOA,EACZrxC,KAAKuxC,IAAMA,EACXvxC,KAAK+xC,OAAS,KACd/xC,KAAK2mI,OAAS,IAAID,GAElB1mI,KAAKwmE,OAAS,CACbr4B,KAAM,CAAC,EACP2sE,KAAM,CAAE0uF,UAAW,GACnB5D,IAAK,CAAC,EACN5qF,OAAQ,CAAEwuF,UAAW,GACrBvE,OAAQ,CAAC,EAGX,CAsDC,OAtDAt6L,EAAAA,EAAAA,GAAA0xO,EAAA,EAAAp2O,IAAA,MAAApG,MAED,SAAK4hI,EAAQxpH,GAIZjY,KAAKgY,IAAIvT,IAAKg9H,EAAQxpH,EAEvB,GAAC,CAAAhS,IAAA,gBAAApG,MAED,SAAey8O,EAAQvqM,GAEjBA,EAAOsT,qBAEXrlD,KAAKgY,IAAIypH,OAAO1mF,sBAAuBhJ,EAAOiJ,aAC9Ch7C,KAAKgY,IAAIC,UAAUxT,IAAK63O,EAAOttO,EAAGstO,EAAOrtO,EAAG,IAAMypD,UAAW3mB,GAASgP,IAAK/gD,KAAKgY,IAAIypH,QAASnoH,YAC7FtZ,KAAK+xC,OAASA,GAEHA,EAAO4T,sBAElB3lD,KAAKgY,IAAIypH,OAAOh9H,IAAK63O,EAAOttO,EAAGstO,EAAOrtO,GAAK8iC,EAAOV,KAAOU,EAAOR,MAAUQ,EAAOV,KAAOU,EAAOR,MAAQmnB,UAAW3mB,GAClH/xC,KAAKgY,IAAIC,UAAUxT,IAAK,EAAG,GAAK,GAAI6+H,mBAAoBvxF,EAAOiJ,aAC/Dh7C,KAAK+xC,OAASA,GAIdlvC,QAAQkC,MAAO,6CAA+CgtC,EAAOlwC,KAIvE,GAAC,CAAAoE,IAAA,kBAAApG,MAED,SAAiBm+B,GAA4C,IAAlBo6G,EAAUx3I,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAMvD,OAJAy2D,GAAiBr5B,EAAQh+B,KAAMo4I,IAFEx3I,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,KAAAA,UAAA,IAIjCw3I,EAAW9gF,KAAMilL,IAEVnkG,CAER,GAAC,CAAAnyI,IAAA,mBAAApG,MAED,SAAkBwwD,GAEjB,IAF8D,IAApCq5E,IAAS9oI,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,KAAAA,UAAA,GAASw3I,EAAUx3I,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAE/CgD,EAAI,EAAGwS,EAAIi6C,EAAQ9tD,OAAQqB,EAAIwS,EAAGxS,IAE3CyzD,GAAiBhH,EAASzsD,GAAK5D,KAAMo4I,EAAY1O,GAMlD,OAFA0O,EAAW9gF,KAAMilL,IAEVnkG,CAER,KAACikG,CAAA,CA1Ea,GA8Ef,SAASE,GAASplO,EAAG/E,GAEpB,OAAO+E,EAAE2Z,SAAW1e,EAAE0e,QAEvB,CAEA,SAASumC,GAAiBr5B,EAAQg5B,EAAWohF,EAAY1O,GAQxD,GANK1rG,EAAO2oG,OAAOrrH,KAAM07C,EAAU2vE,SAElC3oG,EAAOu2B,QAASyC,EAAWohF,IAIT,IAAd1O,EAIJ,IAFA,IAAM3lG,EAAW/F,EAAO+F,SAEdngC,EAAI,EAAGwS,EAAI2tB,EAASxhC,OAAQqB,EAAIwS,EAAGxS,IAE5CyzD,GAAiBtzB,EAAUngC,GAAKozD,EAAWohF,GAAY,EAM1D,CAEA,IAOM30F,GAAS,WAEd,SAAAA,IAA8C,IAAjCp2B,EAAMzsB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGu+C,EAAGv+C,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGy+C,EAAKz+C,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAMzC,OAN0C8H,EAAAA,EAAAA,GAAA,KAAA+6C,GAE1CzjD,KAAKqtB,OAASA,EACdrtB,KAAKm/C,IAAMA,EACXn/C,KAAKq/C,MAAQA,EAENr/C,IAER,CA8DC,OA9DA2K,EAAAA,EAAAA,GAAA84C,EAAA,EAAAx9C,IAAA,MAAApG,MAED,SAAKwtB,EAAQ8xB,EAAKE,GAMjB,OAJAr/C,KAAKqtB,OAASA,EACdrtB,KAAKm/C,IAAMA,EACXn/C,KAAKq/C,MAAQA,EAENr/C,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAM28O,GAML,OAJAx8O,KAAKqtB,OAASmvN,EAAMnvN,OACpBrtB,KAAKm/C,IAAMq9L,EAAMr9L,IACjBn/C,KAAKq/C,MAAQm9L,EAAMn9L,MAEZr/C,IAER,GAEA,CAAAiG,IAAA,WAAApG,MACA,WAEC,IAAMsiD,EAAM,KAGZ,OAFAniD,KAAKm/C,IAAM/qC,KAAKuC,IAAKwrC,EAAK/tC,KAAKsC,IAAKtC,KAAKyF,GAAKsoC,EAAKniD,KAAKm/C,MAEjDn/C,IAER,GAAC,CAAAiG,IAAA,iBAAApG,MAED,SAAgB+Q,GAEf,OAAO5Q,KAAKy8O,uBAAwB7rO,EAAE5B,EAAG4B,EAAE3B,EAAG2B,EAAE1B,EAEjD,GAAC,CAAAjJ,IAAA,yBAAApG,MAED,SAAwBmP,EAAGC,EAAGC,GAgB7B,OAdAlP,KAAKqtB,OAASjZ,KAAKC,KAAMrF,EAAIA,EAAIC,EAAIA,EAAIC,EAAIA,GAExB,IAAhBlP,KAAKqtB,QAETrtB,KAAKq/C,MAAQ,EACbr/C,KAAKm/C,IAAM,IAIXn/C,KAAKq/C,MAAQjrC,KAAKmH,MAAOvM,EAAGE,GAC5BlP,KAAKm/C,IAAM/qC,KAAKmF,KAAMm0G,GAAOz+G,EAAIjP,KAAKqtB,QAAU,EAAG,KAI7CrtB,IAER,GAAC,CAAAiG,IAAA,QAAApG,MAED,WAEC,OAAO,IAAIG,KAAK4zD,aAAc3vD,KAAMjE,KAErC,KAACyjD,CAAA,CAxEa,GAgFTi5L,GAAW,WAEhB,SAAAA,IAA4C,IAA/BrvN,EAAMzsB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGy+C,EAAKz+C,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGqO,EAACrO,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAMvC,OANwC8H,EAAAA,EAAAA,GAAA,KAAAg0O,GAExC18O,KAAKqtB,OAASA,EACdrtB,KAAKq/C,MAAQA,EACbr/C,KAAKiP,EAAIA,EAEFjP,IAER,CA0CC,OA1CA2K,EAAAA,EAAAA,GAAA+xO,EAAA,EAAAz2O,IAAA,MAAApG,MAED,SAAKwtB,EAAQgyB,EAAOpwC,GAMnB,OAJAjP,KAAKqtB,OAASA,EACdrtB,KAAKq/C,MAAQA,EACbr/C,KAAKiP,EAAIA,EAEFjP,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAM28O,GAML,OAJAx8O,KAAKqtB,OAASmvN,EAAMnvN,OACpBrtB,KAAKq/C,MAAQm9L,EAAMn9L,MACnBr/C,KAAKiP,EAAIutO,EAAMvtO,EAERjP,IAER,GAAC,CAAAiG,IAAA,iBAAApG,MAED,SAAgB+Q,GAEf,OAAO5Q,KAAKy8O,uBAAwB7rO,EAAE5B,EAAG4B,EAAE3B,EAAG2B,EAAE1B,EAEjD,GAAC,CAAAjJ,IAAA,yBAAApG,MAED,SAAwBmP,EAAGC,EAAGC,GAM7B,OAJAlP,KAAKqtB,OAASjZ,KAAKC,KAAMrF,EAAIA,EAAIE,EAAIA,GACrClP,KAAKq/C,MAAQjrC,KAAKmH,MAAOvM,EAAGE,GAC5BlP,KAAKiP,EAAIA,EAEFjP,IAER,GAAC,CAAAiG,IAAA,QAAApG,MAED,WAEC,OAAO,IAAIG,KAAK4zD,aAAc3vD,KAAMjE,KAErC,KAAC08O,CAAA,CApDe,GAwDXC,GAA0B,IAAIvpM,GAE9BwpM,GAAI,WAET,SAAAA,IAAwG,IAA3FlmO,EAAG9V,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAIwyC,GAAWxgC,IAAYA,KAAY+D,EAAG/V,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAIwyC,IAAWxgC,KAAYA,MAAUlK,EAAAA,EAAAA,GAAA,KAAAk0O,GAEpG58O,KAAK68O,QAAS,EAEd78O,KAAK0W,IAAMA,EACX1W,KAAK2W,IAAMA,CAEZ,CAyLC,OAzLAhM,EAAAA,EAAAA,GAAAiyO,EAAA,EAAA32O,IAAA,MAAApG,MAED,SAAK6W,EAAKC,GAKT,OAHA3W,KAAK0W,IAAIzS,KAAMyS,GACf1W,KAAK2W,IAAI1S,KAAM0S,GAER3W,IAER,GAAC,CAAAiG,IAAA,gBAAApG,MAED,SAAeoW,GAEdjW,KAAKq+H,YAEL,IAAM,IAAIz6H,EAAI,EAAG8sG,EAAKz6F,EAAO1T,OAAQqB,EAAI8sG,EAAI9sG,IAE5C5D,KAAKs+H,cAAeroH,EAAQrS,IAI7B,OAAO5D,IAER,GAAC,CAAAiG,IAAA,uBAAApG,MAED,SAAsBmgH,EAAQj2G,GAE7B,IAAMw0H,EAAWo+G,GAAU14O,KAAM8F,GAAOuqC,eAAgB,IAIxD,OAHAt0C,KAAK0W,IAAIzS,KAAM+7G,GAASj/D,IAAKw9E,GAC7Bv+H,KAAK2W,IAAI1S,KAAM+7G,GAASl4F,IAAKy2G,GAEtBv+H,IAER,GAAC,CAAAiG,IAAA,QAAApG,MAED,WAEC,OAAO,IAAIG,KAAK4zD,aAAc3vD,KAAMjE,KAErC,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAM0zB,GAKL,OAHAvzB,KAAK0W,IAAIzS,KAAMsvB,EAAI7c,KACnB1W,KAAK2W,IAAI1S,KAAMsvB,EAAI5c,KAEZ3W,IAER,GAAC,CAAAiG,IAAA,YAAApG,MAED,WAKC,OAHAG,KAAK0W,IAAI1H,EAAIhP,KAAK0W,IAAIzH,EAAM2D,IAC5B5S,KAAK2W,IAAI3H,EAAIhP,KAAK2W,IAAI1H,GAAM2D,IAErB5S,IAER,GAAC,CAAAiG,IAAA,UAAApG,MAED,WAIC,OAASG,KAAK2W,IAAI3H,EAAIhP,KAAK0W,IAAI1H,GAAShP,KAAK2W,IAAI1H,EAAIjP,KAAK0W,IAAIzH,CAE/D,GAAC,CAAAhJ,IAAA,YAAApG,MAED,SAAWd,GAEV,OAAOiB,KAAK2+H,UAAY5/H,EAAO0F,IAAK,EAAG,GAAM1F,EAAO6/H,WAAY5+H,KAAK0W,IAAK1W,KAAK2W,KAAM29B,eAAgB,GAEtG,GAAC,CAAAruC,IAAA,UAAApG,MAED,SAASd,GAER,OAAOiB,KAAK2+H,UAAY5/H,EAAO0F,IAAK,EAAG,GAAM1F,EAAOq8C,WAAYp7C,KAAK2W,IAAK3W,KAAK0W,IAEhF,GAAC,CAAAzQ,IAAA,gBAAApG,MAED,SAAeklB,GAKd,OAHA/kB,KAAK0W,IAAIA,IAAKqO,GACd/kB,KAAK2W,IAAIA,IAAKoO,GAEP/kB,IAER,GAAC,CAAAiG,IAAA,iBAAApG,MAED,SAAgB6Q,GAKf,OAHA1Q,KAAK0W,IAAIqqC,IAAKrwC,GACd1Q,KAAK2W,IAAImR,IAAKpX,GAEP1Q,IAER,GAAC,CAAAiG,IAAA,iBAAApG,MAED,SAAgB+U,GAKf,OAHA5U,KAAK0W,IAAImoH,WAAajqH,GACtB5U,KAAK2W,IAAIkoH,UAAWjqH,GAEb5U,IAER,GAAC,CAAAiG,IAAA,gBAAApG,MAED,SAAeklB,GAEd,QAAOA,EAAM/V,EAAIhP,KAAK0W,IAAI1H,GAAK+V,EAAM/V,EAAIhP,KAAK2W,IAAI3H,GACjD+V,EAAM9V,EAAIjP,KAAK0W,IAAIzH,GAAK8V,EAAM9V,EAAIjP,KAAK2W,IAAI1H,EAE7C,GAAC,CAAAhJ,IAAA,cAAApG,MAED,SAAa0zB,GAEZ,OAAOvzB,KAAK0W,IAAI1H,GAAKukB,EAAI7c,IAAI1H,GAAKukB,EAAI5c,IAAI3H,GAAKhP,KAAK2W,IAAI3H,GACvDhP,KAAK0W,IAAIzH,GAAKskB,EAAI7c,IAAIzH,GAAKskB,EAAI5c,IAAI1H,GAAKjP,KAAK2W,IAAI1H,CAEnD,GAAC,CAAAhJ,IAAA,eAAApG,MAED,SAAcklB,EAAOhmB,GAKpB,OAAOA,EAAO0F,KACXsgB,EAAM/V,EAAIhP,KAAK0W,IAAI1H,IAAQhP,KAAK2W,IAAI3H,EAAIhP,KAAK0W,IAAI1H,IACjD+V,EAAM9V,EAAIjP,KAAK0W,IAAIzH,IAAQjP,KAAK2W,IAAI1H,EAAIjP,KAAK0W,IAAIzH,GAGrD,GAAC,CAAAhJ,IAAA,gBAAApG,MAED,SAAe0zB,GAId,QAAOA,EAAI5c,IAAI3H,EAAIhP,KAAK0W,IAAI1H,GAAKukB,EAAI7c,IAAI1H,EAAIhP,KAAK2W,IAAI3H,GACrDukB,EAAI5c,IAAI1H,EAAIjP,KAAK0W,IAAIzH,GAAKskB,EAAI7c,IAAIzH,EAAIjP,KAAK2W,IAAI1H,EAEjD,GAAC,CAAAhJ,IAAA,aAAApG,MAED,SAAYklB,EAAOhmB,GAElB,OAAOA,EAAOkF,KAAM8gB,GAAQ2oG,MAAO1tH,KAAK0W,IAAK1W,KAAK2W,IAEnD,GAAC,CAAA1Q,IAAA,kBAAApG,MAED,SAAiBklB,GAGhB,OADqB43N,GAAU14O,KAAM8gB,GAAQ2oG,MAAO1tH,KAAK0W,IAAK1W,KAAK2W,KAC/CoqC,IAAKh8B,GAAQxiB,QAElC,GAAC,CAAA0D,IAAA,YAAApG,MAED,SAAW0zB,GAKV,OAHAvzB,KAAK0W,IAAIC,IAAK4c,EAAI7c,KAClB1W,KAAK2W,IAAID,IAAK6c,EAAI5c,KAEX3W,IAER,GAAC,CAAAiG,IAAA,QAAApG,MAED,SAAO0zB,GAKN,OAHAvzB,KAAK0W,IAAIA,IAAK6c,EAAI7c,KAClB1W,KAAK2W,IAAIA,IAAK4c,EAAI5c,KAEX3W,IAER,GAAC,CAAAiG,IAAA,YAAApG,MAED,SAAW+mB,GAKV,OAHA5mB,KAAK0W,IAAIoR,IAAKlB,GACd5mB,KAAK2W,IAAImR,IAAKlB,GAEP5mB,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQ0zB,GAEP,OAAOA,EAAI7c,IAAIupH,OAAQjgI,KAAK0W,MAAS6c,EAAI5c,IAAIspH,OAAQjgI,KAAK2W,IAE3D,KAACimO,CAAA,CAlMQ,GAsMJE,GAAwB,IAAIxgN,GAC5BygN,GAA0B,IAAIzgN,GAE9B0gN,GAAK,WAEV,SAAAA,IAA0D,IAA7C11O,EAAK1G,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAI07B,GAAWuiH,EAAGj+I,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAI07B,IAAS5zB,EAAAA,EAAAA,GAAA,KAAAs0O,GAEtDh9O,KAAKsH,MAAQA,EACbtH,KAAK6+I,IAAMA,CAEZ,CAiGC,OAjGAl0I,EAAAA,EAAAA,GAAAqyO,EAAA,EAAA/2O,IAAA,MAAApG,MAED,SAAKyH,EAAOu3I,GAKX,OAHA7+I,KAAKsH,MAAMrD,KAAMqD,GACjBtH,KAAK6+I,IAAI56I,KAAM46I,GAER7+I,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAM6pC,GAKL,OAHA1pC,KAAKsH,MAAMrD,KAAMylC,EAAKpiC,OACtBtH,KAAK6+I,IAAI56I,KAAMylC,EAAKm1G,KAEb7+I,IAER,GAAC,CAAAiG,IAAA,YAAApG,MAED,SAAWd,GAEV,OAAOA,EAAO6/H,WAAY5+H,KAAKsH,MAAOtH,KAAK6+I,KAAMvqG,eAAgB,GAElE,GAAC,CAAAruC,IAAA,QAAApG,MAED,SAAOd,GAEN,OAAOA,EAAOq8C,WAAYp7C,KAAK6+I,IAAK7+I,KAAKsH,MAE1C,GAAC,CAAArB,IAAA,aAAApG,MAED,WAEC,OAAOG,KAAKsH,MAAM46C,kBAAmBliD,KAAK6+I,IAE3C,GAAC,CAAA54I,IAAA,WAAApG,MAED,WAEC,OAAOG,KAAKsH,MAAM8rB,WAAYpzB,KAAK6+I,IAEpC,GAAC,CAAA54I,IAAA,KAAApG,MAED,SAAIsS,EAAGpT,GAEN,OAAOiB,KAAKg1B,MAAOj2B,GAASu1C,eAAgBniC,GAAI2V,IAAK9nB,KAAKsH,MAE3D,GAAC,CAAArB,IAAA,+BAAApG,MAED,SAA8BklB,EAAOk4N,GAEpCH,GAAQ1hM,WAAYr2B,EAAO/kB,KAAKsH,OAChCy1O,GAAU3hM,WAAYp7C,KAAK6+I,IAAK7+I,KAAKsH,OAErC,IAAM41O,EAAYH,GAAUvoO,IAAKuoO,IAG7B5qO,EAFoB4qO,GAAUvoO,IAAKsoO,IAEbI,EAQ1B,OANKD,IAEJ9qO,EAAIu7G,GAAOv7G,EAAG,EAAG,IAIXA,CAER,GAAC,CAAAlM,IAAA,sBAAApG,MAED,SAAqBklB,EAAOk4N,EAAal+O,GAExC,IAAMoT,EAAInS,KAAKm9O,6BAA8Bp4N,EAAOk4N,GAEpD,OAAOj9O,KAAKg1B,MAAOj2B,GAASu1C,eAAgBniC,GAAI2V,IAAK9nB,KAAKsH,MAE3D,GAAC,CAAArB,IAAA,eAAApG,MAED,SAAcgR,GAKb,OAHA7Q,KAAKsH,MAAM4zC,aAAcrqC,GACzB7Q,KAAK6+I,IAAI3jG,aAAcrqC,GAEhB7Q,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQ6pC,GAEP,OAAOA,EAAKpiC,MAAM24H,OAAQjgI,KAAKsH,QAAWoiC,EAAKm1G,IAAI5e,OAAQjgI,KAAK6+I,IAEjE,GAAC,CAAA54I,IAAA,QAAApG,MAED,WAEC,OAAO,IAAIG,KAAK4zD,aAAc3vD,KAAMjE,KAErC,KAACg9O,CAAA,CAxGS,GA4GLI,GAA0B,IAAI9gN,GAE9B+gN,GAAe,SAAAC,IAAAj1O,EAAAA,EAAAA,GAAAg1O,EAAAC,GAAA,IAAAC,GAAAh1O,EAAAA,EAAAA,GAAA80O,GAEpB,SAAAA,EAAah8I,EAAOQ,GAAQ,IAAA27I,GAAA90O,EAAAA,EAAAA,GAAA,KAAA20O,IAE3BG,EAAAD,EAAAn+O,KAAA,OAEKiiG,MAAQA,EACbm8I,EAAKn8I,MAAM7lD,oBAEXgiM,EAAK3sO,OAASwwF,EAAMrmD,YACpBwiM,EAAK/5M,kBAAmB,EAExB+5M,EAAK37I,MAAQA,EAYb,IAVA,IAAMh0D,EAAW,IAAI6H,GAEflrC,EAAY,CACjB,EAAG,EAAG,EAAI,EAAG,EAAG,EAChB,EAAG,EAAG,EAAI,EAAG,EAAG,EAChB,EAAG,EAAG,GAAK,EAAG,EAAG,EACjB,EAAG,EAAG,EAAI,EAAG,EAAG,EAChB,EAAG,EAAG,EAAI,GAAK,EAAG,GAGT5G,EAAI,EAAGyO,EAAI,EAAWzO,EAAJ,GAAWA,IAAMyO,IAAO,CAEnD,IAAMk6F,EAAO3oG,EAFc,GAEJwQ,KAAKyF,GAAK,EAC3BumH,EAAO/tH,EAHc,GAGJ+B,KAAKyF,GAAK,EAEjCrP,EAAUlI,KACT8R,KAAKgF,IAAKmzF,GAAMn4F,KAAK+E,IAAKozF,GAAM,EAChCn4F,KAAKgF,IAAKgnH,GAAMhsH,KAAK+E,IAAKinH,GAAM,EAGlC,CAEAvyF,EAAS8H,aAAc,WAAY,IAAIo9F,GAAwBvoI,EAAW,IAE1E,IAAM0S,EAAW,IAAIi7F,GAAmB,CAAEg4B,KAAK,EAAO/7F,YAAY,IAKpD,OAHdopM,EAAKC,KAAO,IAAI5iI,GAAchtE,EAAU3wB,GACxCsgO,EAAK11N,IAAK01N,EAAKC,MAEfD,EAAKnrM,SAASmrM,CAEf,CAgCC,OAhCA7yO,EAAAA,EAAAA,GAAA0yO,EAAA,EAAAp3O,IAAA,UAAApG,MAED,WAECG,KAAKy9O,KAAK5vM,SAAS8U,UACnB3iD,KAAKy9O,KAAKvgO,SAASylC,SAEpB,GAAC,CAAA18C,IAAA,SAAApG,MAED,WAECG,KAAKqhG,MAAM7lD,oBAEX,IAAMkiM,EAAa19O,KAAKqhG,MAAMvwE,SAAW9wB,KAAKqhG,MAAMvwE,SAAW,IACzD6sN,EAAYD,EAAatpO,KAAKmxC,IAAKvlD,KAAKqhG,MAAMnoF,OAEpDlZ,KAAKy9O,KAAK92N,MAAMliB,IAAKk5O,EAAWA,EAAWD,GAE3CN,GAAUriM,sBAAuB/6C,KAAKqhG,MAAMtiG,OAAOi8C,aAEnDh7C,KAAKy9O,KAAKliM,OAAQ6hM,SAEEj8O,IAAfnB,KAAK6hG,MAET7hG,KAAKy9O,KAAKvgO,SAAS2kF,MAAMp9F,IAAKzE,KAAK6hG,OAInC7hG,KAAKy9O,KAAKvgO,SAAS2kF,MAAM59F,KAAMjE,KAAKqhG,MAAMQ,MAI5C,KAACw7I,CAAA,CA7EmB,CAAS7gN,IAiFxBohN,GAA0B,IAAIthN,GAC9BuhN,GAA4B,IAAIthN,GAChCuhN,GAAgC,IAAIvhN,GAGpCwhN,GAAc,SAAAC,IAAA31O,EAAAA,EAAAA,GAAA01O,EAAAC,GAAA,IAAAC,GAAA11O,EAAAA,EAAAA,GAAAw1O,GAEnB,SAAAA,EAAa//M,GAAS,IAAAkgN,GAAAx1O,EAAAA,EAAAA,GAAA,KAAAq1O,GAYrB,IAVA,IAAM7hI,EAAQiiI,GAAangN,GAErB6P,EAAW,IAAI6H,GAEf32B,EAAW,GACXq/N,EAAS,GAETzpH,EAAS,IAAI7yB,GAAO,EAAG,EAAG,GAC1B8yB,EAAS,IAAI9yB,GAAO,EAAG,EAAG,GAEtBl+F,EAAI,EAAGA,EAAIs4G,EAAM35G,OAAQqB,IAAO,CAEzC,IAAM+jM,EAAOzrF,EAAOt4G,GAEf+jM,EAAK9sJ,QAAU8sJ,EAAK9sJ,OAAOy4D,SAE/Bv0F,EAASzc,KAAM,EAAG,EAAG,GACrByc,EAASzc,KAAM,EAAG,EAAG,GACrB87O,EAAO97O,KAAMqyH,EAAO3hH,EAAG2hH,EAAOr9G,EAAGq9G,EAAOviH,GACxCgsO,EAAO97O,KAAMsyH,EAAO5hH,EAAG4hH,EAAOt9G,EAAGs9G,EAAOxiH,GAI1C,CAEAy7B,EAAS8H,aAAc,WAAY,IAAIo9F,GAAwBh0H,EAAU,IACzE8uB,EAAS8H,aAAc,QAAS,IAAIo9F,GAAwBqrG,EAAQ,IAEpE,IAAMlhO,EAAW,IAAIi7F,GAAmB,CAAEE,cAAc,EAAMlkE,WAAW,EAAOD,YAAY,EAAOE,YAAY,EAAOglE,aAAa,IAYrG,OAV9B8kI,EAAAD,EAAA7+O,KAAA,KAAOyuC,EAAU3wB,IAEZmhO,kBAAmB,EAExBH,EAAKr8O,KAAO,iBAEZq8O,EAAKtuL,KAAO5xB,EACZkgN,EAAKhiI,MAAQA,EAEbgiI,EAAKrtO,OAASmtB,EAAOgd,YACrBkjM,EAAKz6M,kBAAmB,EAAMy6M,CAE/B,CA0CC,OA1CAvzO,EAAAA,EAAAA,GAAAozO,EAAA,EAAA93O,IAAA,oBAAApG,MAED,SAAmBoqB,GAElB,IAAMiyF,EAAQl8G,KAAKk8G,MAEbruE,EAAW7tC,KAAK6tC,SAChBpoC,EAAWooC,EAASwtD,aAAc,YAExCyiJ,GAAgB75O,KAAMjE,KAAK4vD,KAAK5U,aAAc2F,SAE9C,IAAM,IAAI/8C,EAAI,EAAGyO,EAAI,EAAGzO,EAAIs4G,EAAM35G,OAAQqB,IAAO,CAEhD,IAAM+jM,EAAOzrF,EAAOt4G,GAEf+jM,EAAK9sJ,QAAU8sJ,EAAK9sJ,OAAOy4D,SAE/BuqI,GAAYvsH,iBAAkBwsH,GAAiBn2C,EAAK3sJ,aACpD4iM,GAAU7iM,sBAAuB8iM,IACjCp4O,EAASyrI,OAAQ7+H,EAAGurO,GAAU5uO,EAAG4uO,GAAU3uO,EAAG2uO,GAAU1uO,GAExD2uO,GAAYvsH,iBAAkBwsH,GAAiBn2C,EAAK9sJ,OAAOG,aAC3D4iM,GAAU7iM,sBAAuB8iM,IACjCp4O,EAASyrI,OAAQ7+H,EAAI,EAAGurO,GAAU5uO,EAAG4uO,GAAU3uO,EAAG2uO,GAAU1uO,GAE5DmD,GAAK,EAIP,CAEAw7B,EAASwtD,aAAc,YAAah7D,aAAc,GAElD0L,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA+xM,EAAA5+O,WAAA,0BAAAC,KAAA,KAAyB6qB,EAE1B,GAAC,CAAAhkB,IAAA,UAAApG,MAED,WAECG,KAAK6tC,SAAS8U,UACd3iD,KAAKkd,SAASylC,SAEf,KAACo7L,CAAA,CAxFkB,CAASljI,IA6F7B,SAASsjI,GAAangN,GAErB,IAAMsgN,EAAW,IAEM,IAAlBtgN,EAAOs1E,QAEXgrI,EAASh8O,KAAM07B,GAIhB,IAAM,IAAIp6B,EAAI,EAAGA,EAAIo6B,EAAO+F,SAASxhC,OAAQqB,IAE5C06O,EAASh8O,KAAKxD,MAAOw/O,EAAUH,GAAangN,EAAO+F,SAAUngC,KAI9D,OAAO06O,CAER,CAAC,IAEKC,GAAgB,SAAAC,IAAAn2O,EAAAA,EAAAA,GAAAk2O,EAAAC,GAAA,IAAAC,GAAAl2O,EAAAA,EAAAA,GAAAg2O,GAErB,SAAAA,EAAal9I,EAAOq9I,EAAY78I,GAAQ,IAAA88I,GAAAj2O,EAAAA,EAAAA,GAAA,KAAA61O,GAEvC,IAAM1wM,EAAW,IAAIg6K,GAAgB62B,EAAY,EAAG,GAC9CxhO,EAAW,IAAI4lF,GAAmB,CAAEitC,WAAW,EAAMI,KAAK,EAAO/7F,YAAY,IAiBnF,OAfAuqM,EAAAF,EAAAr/O,KAAA,KAAOyuC,EAAU3wB,IAEZmkF,MAAQA,EACbs9I,EAAKt9I,MAAM7lD,oBAEXmjM,EAAK98I,MAAQA,EAEb88I,EAAK98O,KAAO,mBAEZ88O,EAAK9tO,OAAS8tO,EAAKt9I,MAAMrmD,YACzB2jM,EAAKl7M,kBAAmB,EAExBk7M,EAAKtsM,SAGLssM,CAuBD,CAoCC,OApCAh0O,EAAAA,EAAAA,GAAA4zO,EAAA,EAAAt4O,IAAA,UAAApG,MAED,WAECG,KAAK6tC,SAAS8U,UACd3iD,KAAKkd,SAASylC,SAEf,GAAC,CAAA18C,IAAA,SAAApG,MAED,gBAEqBsB,IAAfnB,KAAK6hG,MAET7hG,KAAKkd,SAAS2kF,MAAMp9F,IAAKzE,KAAK6hG,OAI9B7hG,KAAKkd,SAAS2kF,MAAM59F,KAAMjE,KAAKqhG,MAAMQ,MAmBvC,KAAC08I,CAAA,CAjFoB,CAASpwM,IAqFzBywM,GAA0B,IAAItiN,GAC9BuiN,GAAwB,IAAI/8I,GAC5Bg9I,GAAwB,IAAIh9I,GAE5Bi9I,GAAqB,SAAAC,IAAA32O,EAAAA,EAAAA,GAAA02O,EAAAC,GAAA,IAAAC,GAAA12O,EAAAA,EAAAA,GAAAw2O,GAE1B,SAAAA,EAAa19I,EAAOt3F,EAAM83F,GAAQ,IAAAq9I,GAAAx2O,EAAAA,EAAAA,GAAA,KAAAq2O,IAEjCG,EAAAD,EAAA7/O,KAAA,OAEKiiG,MAAQA,EACb69I,EAAK79I,MAAM7lD,oBAEX0jM,EAAKruO,OAASwwF,EAAMrmD,YACpBkkM,EAAKz7M,kBAAmB,EAExBy7M,EAAKr9I,MAAQA,EAEb,IAAMh0D,EAAW,IAAI04K,GAAoBx8M,GACzC8jC,EAASsxM,QAAmB,GAAV/qO,KAAKyF,IAEvBqlO,EAAKhiO,SAAW,IAAI4lF,GAAmB,CAAEitC,WAAW,EAAMI,KAAK,EAAO/7F,YAAY,SAC9DjzC,IAAf+9O,EAAKr9I,QAAsBq9I,EAAKhiO,SAASm7F,cAAe,GAE7D,IAAM5yG,EAAWooC,EAASwtD,aAAc,YAClC+iJ,EAAS,IAAI3zO,aAA+B,EAAjBhF,EAAS7C,OAM5B,OAJdirC,EAAS8H,aAAc,QAAS,IAAIC,GAAiBwoM,EAAQ,IAE7Dc,EAAKp3N,IAAK,IAAIqmB,GAAMN,EAAUqxM,EAAKhiO,WAEnCgiO,EAAK7sM,SAAS6sM,CAEf,CAsCC,OAtCAv0O,EAAAA,EAAAA,GAAAo0O,EAAA,EAAA94O,IAAA,UAAApG,MAED,WAECG,KAAK+jC,SAAU,GAAI8J,SAAS8U,UAC5B3iD,KAAK+jC,SAAU,GAAI7mB,SAASylC,SAE7B,GAAC,CAAA18C,IAAA,SAAApG,MAED,WAEC,IAAMm2B,EAAOh2B,KAAK+jC,SAAU,GAE5B,QAAoB5iC,IAAfnB,KAAK6hG,MAET7hG,KAAKkd,SAAS2kF,MAAMp9F,IAAKzE,KAAK6hG,WAExB,CAEN,IAAMu8I,EAASpoN,EAAK6X,SAASwtD,aAAc,SAE3CwjJ,GAAQ56O,KAAMjE,KAAKqhG,MAAMQ,OACzBi9I,GAAQ76O,KAAMjE,KAAKqhG,MAAMysD,aAEzB,IAAM,IAAIlqJ,EAAI,EAAGwS,EAAIgoO,EAAOx7O,MAAOgB,EAAIwS,EAAGxS,IAAO,CAEhD,IAAMi+F,EAAUj+F,EAAMwS,EAAI,EAAQyoO,GAAUC,GAE5CV,EAAOltG,OAAQttI,EAAGi+F,EAAM7uF,EAAG6uF,EAAMvqF,EAAGuqF,EAAMzvF,EAE3C,CAEAgsO,EAAO/9M,aAAc,CAEtB,CAEArK,EAAKulB,OAAQqjM,GAAU7jM,sBAAuB/6C,KAAKqhG,MAAMrmD,aAAczlC,SAExE,KAACwpO,CAAA,CAnEyB,CAASviN,IAuE9B4iN,GAAU,SAAAC,IAAAh3O,EAAAA,EAAAA,GAAA+2O,EAAAC,GAAA,IAAAC,GAAA/2O,EAAAA,EAAAA,GAAA62O,GAEf,SAAAA,IAA+E,IAAAG,EAAlEx1O,EAAInJ,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAIqsM,EAASrsM,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAI+zH,EAAM/zH,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,QAAUg0H,EAAMh0H,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,SAAQ8H,EAAAA,EAAAA,GAAA,KAAA02O,GAE3EzqH,EAAS,IAAI7yB,GAAO6yB,GACpBC,EAAS,IAAI9yB,GAAO8yB,GAQpB,IANA,IAAM5U,EAASitF,EAAY,EACrBxnK,EAAO17B,EAAOkjM,EACd1uE,EAAWx0H,EAAO,EAElBgV,EAAW,GAAIq/N,EAAS,GAEpBx6O,EAAI,EAAGyO,EAAI,EAAGK,GAAM6rH,EAAU36H,GAAKqpM,EAAWrpM,IAAM8O,GAAK+yB,EAAO,CAEzE1mB,EAASzc,MAAQi8H,EAAU,EAAG7rH,EAAG6rH,EAAU,EAAG7rH,GAC9CqM,EAASzc,KAAMoQ,EAAG,GAAK6rH,EAAU7rH,EAAG,EAAG6rH,GAEvC,IAAM18B,EAAQj+F,IAAMo8G,EAAS2U,EAASC,EAEtC/yB,EAAMpkE,QAAS2gN,EAAQ/rO,GAAKA,GAAK,EACjCwvF,EAAMpkE,QAAS2gN,EAAQ/rO,GAAKA,GAAK,EACjCwvF,EAAMpkE,QAAS2gN,EAAQ/rO,GAAKA,GAAK,EACjCwvF,EAAMpkE,QAAS2gN,EAAQ/rO,GAAKA,GAAK,CAElC,CAEA,IAAMw7B,EAAW,IAAI6H,GACrB7H,EAAS8H,aAAc,WAAY,IAAIo9F,GAAwBh0H,EAAU,IACzE8uB,EAAS8H,aAAc,QAAS,IAAIo9F,GAAwBqrG,EAAQ,IAEpE,IAAMlhO,EAAW,IAAIi7F,GAAmB,CAAEE,cAAc,EAAMjkE,YAAY,IAIjD,OAFzBmrM,EAAAD,EAAAlgP,KAAA,KAAOyuC,EAAU3wB,IAEZrb,KAAO,aAAa09O,CAE1B,CAOC,OAPA50O,EAAAA,EAAAA,GAAAy0O,EAAA,EAAAn5O,IAAA,UAAApG,MAED,WAECG,KAAK6tC,SAAS8U,UACd3iD,KAAKkd,SAASylC,SAEf,KAACy8L,CAAA,CA5Cc,CAASvkI,IAgDnB2kI,GAAe,SAAAC,IAAAp3O,EAAAA,EAAAA,GAAAm3O,EAAAC,GAAA,IAAAC,GAAAn3O,EAAAA,EAAAA,GAAAi3O,GAEpB,SAAAA,IAA0G,IAAAG,EAA7FtyN,EAAMzsB,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAIg/O,EAAOh/O,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAIi/O,EAAKj/O,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGqsM,EAASrsM,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAI+zH,EAAM/zH,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,QAAUg0H,EAAMh0H,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,SAAQ8H,EAAAA,EAAAA,GAAA,KAAA82O,GAEtG7qH,EAAS,IAAI7yB,GAAO6yB,GACpBC,EAAS,IAAI9yB,GAAO8yB,GAEpB,IAAM71G,EAAW,GACXq/N,EAAS,GAIf,GAAKwB,EAAU,EAEd,IAAM,IAAIh8O,EAAI,EAAGA,EAAIg8O,EAASh8O,IAAO,CAEpC,IAAMgN,EAAMhN,EAAIg8O,GAAwB,EAAVxrO,KAAKyF,IAE7B7K,EAAIoF,KAAK+E,IAAKvI,GAAMyc,EACpBne,EAAIkF,KAAKgF,IAAKxI,GAAMyc,EAE1BtO,EAASzc,KAAM,EAAG,EAAG,GACrByc,EAASzc,KAAM0M,EAAG,EAAGE,GAErB,IAAM2yF,EAAc,EAAJj+F,EAAU+wH,EAASC,EAEnCwpH,EAAO97O,KAAMu/F,EAAM7uF,EAAG6uF,EAAMvqF,EAAGuqF,EAAMzvF,GACrCgsO,EAAO97O,KAAMu/F,EAAM7uF,EAAG6uF,EAAMvqF,EAAGuqF,EAAMzvF,EAEtC,CAMD,IAAM,IAAIxO,EAAI,EAAGA,EAAIi8O,EAAOj8O,IAM3B,IAJA,IAAMi+F,EAAc,EAAJj+F,EAAU+wH,EAASC,EAE7B5hH,EAAIqa,EAAWA,EAASwyN,EAAQj8O,EAE5ByO,EAAI,EAAGA,EAAI46L,EAAW56L,IAAO,CAItC,IAAIzB,EAAMyB,EAAI46L,GAA0B,EAAV74L,KAAKyF,IAE/B7K,EAAIoF,KAAK+E,IAAKvI,GAAMoC,EACpB9D,EAAIkF,KAAKgF,IAAKxI,GAAMoC,EAExB+L,EAASzc,KAAM0M,EAAG,EAAGE,GACrBkvO,EAAO97O,KAAMu/F,EAAM7uF,EAAG6uF,EAAMvqF,EAAGuqF,EAAMzvF,GAIrCxB,GAAQyB,EAAI,GAAM46L,GAA0B,EAAV74L,KAAKyF,IAEvC7K,EAAIoF,KAAK+E,IAAKvI,GAAMoC,EACpB9D,EAAIkF,KAAKgF,IAAKxI,GAAMoC,EAEpB+L,EAASzc,KAAM0M,EAAG,EAAGE,GACrBkvO,EAAO97O,KAAMu/F,EAAM7uF,EAAG6uF,EAAMvqF,EAAGuqF,EAAMzvF,EAEtC,CAID,IAAMy7B,EAAW,IAAI6H,GACrB7H,EAAS8H,aAAc,WAAY,IAAIo9F,GAAwBh0H,EAAU,IACzE8uB,EAAS8H,aAAc,QAAS,IAAIo9F,GAAwBqrG,EAAQ,IAEpE,IAAMlhO,EAAW,IAAIi7F,GAAmB,CAAEE,cAAc,EAAMjkE,YAAY,IAI5C,OAF9BurM,EAAAD,EAAAtgP,KAAA,KAAOyuC,EAAU3wB,IAEZrb,KAAO,kBAAkB89O,CAE/B,CAOC,OAPAh1O,EAAAA,EAAAA,GAAA60O,EAAA,EAAAv5O,IAAA,UAAApG,MAED,WAECG,KAAK6tC,SAAS8U,UACd3iD,KAAKkd,SAASylC,SAEf,KAAC68L,CAAA,CApFmB,CAAS3kI,IAwFxBilI,GAAoB,IAAIxjN,GACxByjN,GAAoB,IAAIzjN,GACxB0jN,GAAoB,IAAI1jN,GAExB2jN,GAAsB,SAAAC,IAAA73O,EAAAA,EAAAA,GAAA43O,EAAAC,GAAA,IAAAC,GAAA53O,EAAAA,EAAAA,GAAA03O,GAE3B,SAAAA,EAAa5+I,EAAOt3F,EAAM83F,GAAQ,IAAAu+I,GAAA13O,EAAAA,EAAAA,GAAA,KAAAu3O,IAEjCG,EAAAD,EAAA/gP,KAAA,OAEKiiG,MAAQA,EACb++I,EAAK/+I,MAAM7lD,oBAEX4kM,EAAKvvO,OAASwwF,EAAMrmD,YACpBolM,EAAK38M,kBAAmB,EAExB28M,EAAKv+I,MAAQA,OAEC1gG,IAAT4I,IAAqBA,EAAO,GAEjC,IAAI8jC,EAAW,IAAI6H,GACnB7H,EAAS8H,aAAc,WAAY,IAAIo9F,GAAwB,EAC5DhpI,EAAMA,EAAM,EACdA,EAAMA,EAAM,EACZA,GAAQA,EAAM,GACZA,GAAQA,EAAM,GACdA,EAAMA,EAAM,GACZ,IAEH,IAAMmT,EAAW,IAAIi7F,GAAmB,CAAEg4B,KAAK,EAAO/7F,YAAY,IAWpD,OATdgsM,EAAKC,WAAa,IAAIvlI,GAAMjtE,EAAU3wB,GACtCkjO,EAAKt4N,IAAKs4N,EAAKC,aAEfxyM,EAAW,IAAI6H,IACNC,aAAc,WAAY,IAAIo9F,GAAwB,CAAE,EAAG,EAAG,EAAG,EAAG,EAAG,GAAK,IAErFqtG,EAAKE,WAAa,IAAIxlI,GAAMjtE,EAAU3wB,GACtCkjO,EAAKt4N,IAAKs4N,EAAKE,YAEfF,EAAK/tM,SAAS+tM,CAEf,CAkCC,OAlCAz1O,EAAAA,EAAAA,GAAAs1O,EAAA,EAAAh6O,IAAA,UAAApG,MAED,WAECG,KAAKqgP,WAAWxyM,SAAS8U,UACzB3iD,KAAKqgP,WAAWnjO,SAASylC,UACzB3iD,KAAKsgP,WAAWzyM,SAAS8U,UACzB3iD,KAAKsgP,WAAWpjO,SAASylC,SAE1B,GAAC,CAAA18C,IAAA,SAAApG,MAED,WAECigP,GAAI/kM,sBAAuB/6C,KAAKqhG,MAAMrmD,aACtC+kM,GAAIhlM,sBAAuB/6C,KAAKqhG,MAAMtiG,OAAOi8C,aAC7CglM,GAAI5kM,WAAY2kM,GAAKD,IAErB9/O,KAAKqgP,WAAW9kM,OAAQwkM,SAEJ5+O,IAAfnB,KAAK6hG,OAET7hG,KAAKqgP,WAAWnjO,SAAS2kF,MAAMp9F,IAAKzE,KAAK6hG,OACzC7hG,KAAKsgP,WAAWpjO,SAAS2kF,MAAMp9F,IAAKzE,KAAK6hG,SAIzC7hG,KAAKqgP,WAAWnjO,SAAS2kF,MAAM59F,KAAMjE,KAAKqhG,MAAMQ,OAChD7hG,KAAKsgP,WAAWpjO,SAAS2kF,MAAM59F,KAAMjE,KAAKqhG,MAAMQ,QAIjD7hG,KAAKsgP,WAAW/kM,OAAQwkM,IACxB//O,KAAKsgP,WAAW35N,MAAMzX,EAAI8wO,GAAIz9O,QAE/B,KAAC09O,CAAA,CAxE0B,CAASzjN,IA4E/B+jN,GAAwB,IAAIjkN,GAC5BkkN,GAAwB,IAAIlrM,GAS5BmrM,GAAY,SAAAC,IAAAr4O,EAAAA,EAAAA,GAAAo4O,EAAAC,GAAA,IAAAC,GAAAp4O,EAAAA,EAAAA,GAAAk4O,GAEjB,SAAAA,EAAa1uM,GAAS,IAAA6uM,GAAAl4O,EAAAA,EAAAA,GAAA,KAAA+3O,GAErB,IAAM5yM,EAAW,IAAI6H,GACfx4B,EAAW,IAAIi7F,GAAmB,CAAEtW,MAAO,SAAUwW,cAAc,EAAMjkE,YAAY,IAErFr1B,EAAW,GACXq/N,EAAS,GAETyC,EAAW,CAAC,EAiDlB,SAASC,EAAS3pO,EAAG/E,GAEpB2uO,EAAU5pO,GACV4pO,EAAU3uO,EAEX,CAEA,SAAS2uO,EAAU5wO,GAElB4O,EAASzc,KAAM,EAAG,EAAG,GACrB87O,EAAO97O,KAAM,EAAG,EAAG,QAEKnB,IAAnB0/O,EAAU1wO,KAEd0wO,EAAU1wO,GAAO,IAIlB0wO,EAAU1wO,GAAK7N,KAAQyc,EAASxc,OAAS,EAAM,EAEhD,CAjEAu+O,EAAS,KAAM,MACfA,EAAS,KAAM,MACfA,EAAS,KAAM,MACfA,EAAS,KAAM,MAIfA,EAAS,KAAM,MACfA,EAAS,KAAM,MACfA,EAAS,KAAM,MACfA,EAAS,KAAM,MAIfA,EAAS,KAAM,MACfA,EAAS,KAAM,MACfA,EAAS,KAAM,MACfA,EAAS,KAAM,MAIfA,EAAS,IAAK,MACdA,EAAS,IAAK,MACdA,EAAS,IAAK,MACdA,EAAS,IAAK,MAIdA,EAAS,KAAM,MACfA,EAAS,KAAM,MACfA,EAAS,KAAM,MAIfA,EAAS,IAAK,KACdA,EAAS,IAAK,KAIdA,EAAS,MAAO,OAChBA,EAAS,MAAO,OAEhBA,EAAS,MAAO,OAChBA,EAAS,MAAO,OAwBhBjzM,EAAS8H,aAAc,WAAY,IAAIo9F,GAAwBh0H,EAAU,IACzE8uB,EAAS8H,aAAc,QAAS,IAAIo9F,GAAwBqrG,EAAQ,KAEpEwC,EAAAD,EAAAvhP,KAAA,KAAOyuC,EAAU3wB,IAEZrb,KAAO,eAEZ++O,EAAK7uM,OAASA,EACT6uM,EAAK7uM,OAAOsO,wBAAyBugM,EAAK7uM,OAAOsO,yBAEtDugM,EAAK/vO,OAASkhC,EAAOiJ,YACrB4lM,EAAKn9M,kBAAmB,EAExBm9M,EAAKC,SAAWA,EAEhBD,EAAKvuM,SAIL,IAAM2uM,EAAe,IAAIl/I,GAAO,UAC1Bm/I,EAAY,IAAIn/I,GAAO,UACvBo/I,EAAU,IAAIp/I,GAAO,OACrBq/I,EAAc,IAAIr/I,GAAO,UACzBs/I,EAAa,IAAIt/I,GAAO,SAE8C,OAA5E8+I,EAAKS,UAAWL,EAAcC,EAAWC,EAASC,EAAaC,GAAaR,CAE7E,CAqHC,OArHAj2O,EAAAA,EAAAA,GAAA81O,EAAA,EAAAx6O,IAAA,YAAApG,MAED,SAAW2/I,EAASi+F,EAAMniM,EAAIv8C,EAAQsW,GAErC,IAEMisO,EAFWthP,KAAK6tC,SAEUwtD,aAAc,SAI9CimJ,EAAepwG,OAAQ,EAAGsO,EAAQxsI,EAAGwsI,EAAQloI,EAAGkoI,EAAQptI,GAAKkvO,EAAepwG,OAAQ,EAAGsO,EAAQxsI,EAAGwsI,EAAQloI,EAAGkoI,EAAQptI,GACrHkvO,EAAepwG,OAAQ,EAAGsO,EAAQxsI,EAAGwsI,EAAQloI,EAAGkoI,EAAQptI,GAAKkvO,EAAepwG,OAAQ,EAAGsO,EAAQxsI,EAAGwsI,EAAQloI,EAAGkoI,EAAQptI,GACrHkvO,EAAepwG,OAAQ,EAAGsO,EAAQxsI,EAAGwsI,EAAQloI,EAAGkoI,EAAQptI,GAAKkvO,EAAepwG,OAAQ,EAAGsO,EAAQxsI,EAAGwsI,EAAQloI,EAAGkoI,EAAQptI,GACrHkvO,EAAepwG,OAAQ,EAAGsO,EAAQxsI,EAAGwsI,EAAQloI,EAAGkoI,EAAQptI,GAAKkvO,EAAepwG,OAAQ,EAAGsO,EAAQxsI,EAAGwsI,EAAQloI,EAAGkoI,EAAQptI,GAIrHkvO,EAAepwG,OAAQ,EAAGsO,EAAQxsI,EAAGwsI,EAAQloI,EAAGkoI,EAAQptI,GAAKkvO,EAAepwG,OAAQ,EAAGsO,EAAQxsI,EAAGwsI,EAAQloI,EAAGkoI,EAAQptI,GACrHkvO,EAAepwG,OAAQ,GAAIsO,EAAQxsI,EAAGwsI,EAAQloI,EAAGkoI,EAAQptI,GAAKkvO,EAAepwG,OAAQ,GAAIsO,EAAQxsI,EAAGwsI,EAAQloI,EAAGkoI,EAAQptI,GACvHkvO,EAAepwG,OAAQ,GAAIsO,EAAQxsI,EAAGwsI,EAAQloI,EAAGkoI,EAAQptI,GAAKkvO,EAAepwG,OAAQ,GAAIsO,EAAQxsI,EAAGwsI,EAAQloI,EAAGkoI,EAAQptI,GACvHkvO,EAAepwG,OAAQ,GAAIsO,EAAQxsI,EAAGwsI,EAAQloI,EAAGkoI,EAAQptI,GAAKkvO,EAAepwG,OAAQ,GAAIsO,EAAQxsI,EAAGwsI,EAAQloI,EAAGkoI,EAAQptI,GAIvHkvO,EAAepwG,OAAQ,GAAIsO,EAAQxsI,EAAGwsI,EAAQloI,EAAGkoI,EAAQptI,GAAKkvO,EAAepwG,OAAQ,GAAIsO,EAAQxsI,EAAGwsI,EAAQloI,EAAGkoI,EAAQptI,GACvHkvO,EAAepwG,OAAQ,GAAIsO,EAAQxsI,EAAGwsI,EAAQloI,EAAGkoI,EAAQptI,GAAKkvO,EAAepwG,OAAQ,GAAIsO,EAAQxsI,EAAGwsI,EAAQloI,EAAGkoI,EAAQptI,GACvHkvO,EAAepwG,OAAQ,GAAIsO,EAAQxsI,EAAGwsI,EAAQloI,EAAGkoI,EAAQptI,GAAKkvO,EAAepwG,OAAQ,GAAIsO,EAAQxsI,EAAGwsI,EAAQloI,EAAGkoI,EAAQptI,GACvHkvO,EAAepwG,OAAQ,GAAIsO,EAAQxsI,EAAGwsI,EAAQloI,EAAGkoI,EAAQptI,GAAKkvO,EAAepwG,OAAQ,GAAIsO,EAAQxsI,EAAGwsI,EAAQloI,EAAGkoI,EAAQptI,GAIvHkvO,EAAepwG,OAAQ,GAAIusG,EAAKzqO,EAAGyqO,EAAKnmO,EAAGmmO,EAAKrrO,GAAKkvO,EAAepwG,OAAQ,GAAIusG,EAAKzqO,EAAGyqO,EAAKnmO,EAAGmmO,EAAKrrO,GACrGkvO,EAAepwG,OAAQ,GAAIusG,EAAKzqO,EAAGyqO,EAAKnmO,EAAGmmO,EAAKrrO,GAAKkvO,EAAepwG,OAAQ,GAAIusG,EAAKzqO,EAAGyqO,EAAKnmO,EAAGmmO,EAAKrrO,GACrGkvO,EAAepwG,OAAQ,GAAIusG,EAAKzqO,EAAGyqO,EAAKnmO,EAAGmmO,EAAKrrO,GAAKkvO,EAAepwG,OAAQ,GAAIusG,EAAKzqO,EAAGyqO,EAAKnmO,EAAGmmO,EAAKrrO,GACrGkvO,EAAepwG,OAAQ,GAAIusG,EAAKzqO,EAAGyqO,EAAKnmO,EAAGmmO,EAAKrrO,GAAKkvO,EAAepwG,OAAQ,GAAIusG,EAAKzqO,EAAGyqO,EAAKnmO,EAAGmmO,EAAKrrO,GAIrGkvO,EAAepwG,OAAQ,GAAI51F,EAAGtoC,EAAGsoC,EAAGhkC,EAAGgkC,EAAGlpC,GAAKkvO,EAAepwG,OAAQ,GAAI51F,EAAGtoC,EAAGsoC,EAAGhkC,EAAGgkC,EAAGlpC,GACzFkvO,EAAepwG,OAAQ,GAAI51F,EAAGtoC,EAAGsoC,EAAGhkC,EAAGgkC,EAAGlpC,GAAKkvO,EAAepwG,OAAQ,GAAI51F,EAAGtoC,EAAGsoC,EAAGhkC,EAAGgkC,EAAGlpC,GACzFkvO,EAAepwG,OAAQ,GAAI51F,EAAGtoC,EAAGsoC,EAAGhkC,EAAGgkC,EAAGlpC,GAAKkvO,EAAepwG,OAAQ,GAAI51F,EAAGtoC,EAAGsoC,EAAGhkC,EAAGgkC,EAAGlpC,GAIzFkvO,EAAepwG,OAAQ,GAAInyI,EAAOiU,EAAGjU,EAAOuY,EAAGvY,EAAOqT,GAAKkvO,EAAepwG,OAAQ,GAAInyI,EAAOiU,EAAGjU,EAAOuY,EAAGvY,EAAOqT,GACjHkvO,EAAepwG,OAAQ,GAAI77H,EAAMrC,EAAGqC,EAAMiC,EAAGjC,EAAMjD,GAAKkvO,EAAepwG,OAAQ,GAAI77H,EAAMrC,EAAGqC,EAAMiC,EAAGjC,EAAMjD,GAI3GkvO,EAAepwG,OAAQ,GAAI77H,EAAMrC,EAAGqC,EAAMiC,EAAGjC,EAAMjD,GAAKkvO,EAAepwG,OAAQ,GAAI77H,EAAMrC,EAAGqC,EAAMiC,EAAGjC,EAAMjD,GAC3GkvO,EAAepwG,OAAQ,GAAI77H,EAAMrC,EAAGqC,EAAMiC,EAAGjC,EAAMjD,GAAKkvO,EAAepwG,OAAQ,GAAI77H,EAAMrC,EAAGqC,EAAMiC,EAAGjC,EAAMjD,GAE3GkvO,EAAepwG,OAAQ,GAAI77H,EAAMrC,EAAGqC,EAAMiC,EAAGjC,EAAMjD,GAAKkvO,EAAepwG,OAAQ,GAAI77H,EAAMrC,EAAGqC,EAAMiC,EAAGjC,EAAMjD,GAC3GkvO,EAAepwG,OAAQ,GAAI77H,EAAMrC,EAAGqC,EAAMiC,EAAGjC,EAAMjD,GAAKkvO,EAAepwG,OAAQ,GAAI77H,EAAMrC,EAAGqC,EAAMiC,EAAGjC,EAAMjD,GAE3GkvO,EAAejhN,aAAc,CAE9B,GAAC,CAAAp6B,IAAA,SAAApG,MAED,WAEC,IAAMguC,EAAW7tC,KAAK6tC,SAChBgzM,EAAW7gP,KAAK6gP,SAOtBL,GAAQpjH,wBAAwBn5H,KAAMjE,KAAK+xC,OAAOqrF,yBAIlDmkH,GAAU,IAAKV,EAAUhzM,EAAU2yM,GAAS,EAAG,GAAK,GACpDe,GAAU,IAAKV,EAAUhzM,EAAU2yM,GAAS,EAAG,EAAG,GAIlDe,GAAU,KAAMV,EAAUhzM,EAAU2yM,IAd1B,GAAO,GAcwC,GACzDe,GAAU,KAAMV,EAAUhzM,EAAU2yM,GAf1B,GAAO,GAesC,GACvDe,GAAU,KAAMV,EAAUhzM,EAAU2yM,IAhB1B,EAAO,GAgBsC,GACvDe,GAAU,KAAMV,EAAUhzM,EAAU2yM,GAjB1B,EAAO,GAiBoC,GAIrDe,GAAU,KAAMV,EAAUhzM,EAAU2yM,IArB1B,GAAO,EAqBsC,GACvDe,GAAU,KAAMV,EAAUhzM,EAAU2yM,GAtB1B,GAAO,EAsBoC,GACrDe,GAAU,KAAMV,EAAUhzM,EAAU2yM,IAvB1B,EAAO,EAuBoC,GACrDe,GAAU,KAAMV,EAAUhzM,EAAU2yM,GAxB1B,EAAO,EAwBkC,GAInDe,GAAU,KAAMV,EAAUhzM,EAAU2yM,GAAS/9O,GAAS8U,KAAW,GACjEgqO,GAAU,KAAMV,EAAUhzM,EAAU2yM,IAAS,GAAWjpO,KAAW,GACnEgqO,GAAU,KAAMV,EAAUhzM,EAAU2yM,GAAS,EAAGjpO,GAAS,GAIzDgqO,GAAU,MAAOV,EAAUhzM,EAAU2yM,IAlC3B,EAkCyC,EAAG,GACtDe,GAAU,MAAOV,EAAUhzM,EAAU2yM,GAnC3B,EAmCuC,EAAG,GACpDe,GAAU,MAAOV,EAAUhzM,EAAU2yM,GAAS,GApC7B,EAoCqC,GACtDe,GAAU,MAAOV,EAAUhzM,EAAU2yM,GAAS,EArC7B,EAqCmC,GAEpDe,GAAU,MAAOV,EAAUhzM,EAAU2yM,IAvC3B,EAuCyC,GAAK,GACxDe,GAAU,MAAOV,EAAUhzM,EAAU2yM,GAxC3B,EAwCuC,GAAK,GACtDe,GAAU,MAAOV,EAAUhzM,EAAU2yM,GAAS,GAzC7B,GAyCuC,GACxDe,GAAU,MAAOV,EAAUhzM,EAAU2yM,GAAS,EA1C7B,GA0CqC,GAEtD3yM,EAASwtD,aAAc,YAAah7D,aAAc,CAEnD,GAAC,CAAAp6B,IAAA,UAAApG,MAED,WAECG,KAAK6tC,SAAS8U,UACd3iD,KAAKkd,SAASylC,SAEf,KAAC89L,CAAA,CAjOgB,CAAS5lI,IAsO3B,SAAS0mI,GAAUx8N,EAAO87N,EAAUhzM,EAAUkE,EAAQ/iC,EAAGC,EAAGC,GAE3DqxO,GAAQ97O,IAAKuK,EAAGC,EAAGC,GAAIwpD,UAAW3mB,GAElC,IAAM97B,EAAS4qO,EAAU97N,GAEzB,QAAgB5jB,IAAX8U,EAIJ,IAFA,IAAMxQ,EAAWooC,EAASwtD,aAAc,YAE9Bz3F,EAAI,EAAGwS,EAAIH,EAAO1T,OAAQqB,EAAIwS,EAAGxS,IAE1C6B,EAASyrI,OAAQj7H,EAAQrS,GAAK28O,GAAQvxO,EAAGuxO,GAAQtxO,EAAGsxO,GAAQrxO,EAM/D,CAEA,IAkNIsyO,GAAeC,GAlNbC,GAAqB,IAAIjiI,GAEzBkiI,GAAS,SAAAC,IAAAv5O,EAAAA,EAAAA,GAAAs5O,EAAAC,GAAA,IAAAC,GAAAt5O,EAAAA,EAAAA,GAAAo5O,GAEd,SAAAA,EAAa3jN,GAA2B,IAAA8jN,EAAnBjgJ,EAAKjhG,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,UAAQ8H,EAAAA,EAAAA,GAAA,KAAAi5O,GAEpC,IAAM5qN,EAAU,IAAI5vB,YAAa,CAAE,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAClGqD,EAAY,IAAIC,aAAc,IAE9BojC,EAAW,IAAI6H,GAWP,OAVd7H,EAASytD,SAAU,IAAI1lD,GAAiB7e,EAAS,IACjD8W,EAAS8H,aAAc,WAAY,IAAIC,GAAiBprC,EAAW,KAEnEs3O,EAAAD,EAAAziP,KAAA,KAAOyuC,EAAU,IAAIsqE,GAAmB,CAAEtW,MAAOA,EAAOztD,YAAY,MAE/DpW,OAASA,EACd8jN,EAAKjgP,KAAO,YAEZigP,EAAKr+M,kBAAmB,EAExBq+M,EAAKzvM,SAASyvM,CAEf,CA+EC,OA/EAn3O,EAAAA,EAAAA,GAAAg3O,EAAA,EAAA17O,IAAA,SAAApG,MAED,SAAQm+B,GAcP,QAZgB78B,IAAX68B,GAEJn7B,QAAQC,KAAM,4DAIM3B,IAAhBnB,KAAKg+B,QAET0jN,GAAKK,cAAe/hP,KAAKg+B,SAIrB0jN,GAAK/iH,UAAV,CAEA,IAAMjoH,EAAMgrO,GAAKhrO,IACXC,EAAM+qO,GAAK/qO,IAkBXlR,EAAWzF,KAAK6tC,SAAS+6D,WAAWnjG,SACpC25D,EAAQ35D,EAAS25D,MAEvBA,EAAO,GAAMzoD,EAAI3H,EAAGowD,EAAO,GAAMzoD,EAAI1H,EAAGmwD,EAAO,GAAMzoD,EAAIzH,EACzDkwD,EAAO,GAAM1oD,EAAI1H,EAAGowD,EAAO,GAAMzoD,EAAI1H,EAAGmwD,EAAO,GAAMzoD,EAAIzH,EACzDkwD,EAAO,GAAM1oD,EAAI1H,EAAGowD,EAAO,GAAM1oD,EAAIzH,EAAGmwD,EAAO,GAAMzoD,EAAIzH,EACzDkwD,EAAO,GAAMzoD,EAAI3H,EAAGowD,EAAO,IAAO1oD,EAAIzH,EAAGmwD,EAAO,IAAOzoD,EAAIzH,EAC3DkwD,EAAO,IAAOzoD,EAAI3H,EAAGowD,EAAO,IAAOzoD,EAAI1H,EAAGmwD,EAAO,IAAO1oD,EAAIxH,EAC5DkwD,EAAO,IAAO1oD,EAAI1H,EAAGowD,EAAO,IAAOzoD,EAAI1H,EAAGmwD,EAAO,IAAO1oD,EAAIxH,EAC5DkwD,EAAO,IAAO1oD,EAAI1H,EAAGowD,EAAO,IAAO1oD,EAAIzH,EAAGmwD,EAAO,IAAO1oD,EAAIxH,EAC5DkwD,EAAO,IAAOzoD,EAAI3H,EAAGowD,EAAO,IAAO1oD,EAAIzH,EAAGmwD,EAAO,IAAO1oD,EAAIxH,EAE5DzJ,EAAS46B,aAAc,EAEvBrgC,KAAK6tC,SAASqmG,uBAnCc,CAqC7B,GAAC,CAAAjuI,IAAA,gBAAApG,MAED,SAAem+B,GAKd,OAHAh+B,KAAKg+B,OAASA,EACdh+B,KAAKqyC,SAEEryC,IAER,GAAC,CAAAiG,IAAA,OAAApG,MAED,SAAM8G,EAAQ+iI,GAMb,OAJA39F,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA21M,EAAAxiP,WAAA,aAAAC,KAAA,KAAYuH,EAAQ+iI,GAEpB1pI,KAAKg+B,OAASr3B,EAAOq3B,OAEdh+B,IAER,GAAC,CAAAiG,IAAA,UAAApG,MAED,WAECG,KAAK6tC,SAAS8U,UACd3iD,KAAKkd,SAASylC,SAEf,KAACg/L,CAAA,CAnGa,CAAS9mI,IAuGlBmnI,GAAU,SAAAC,IAAA55O,EAAAA,EAAAA,GAAA25O,EAAAC,GAAA,IAAAC,GAAA35O,EAAAA,EAAAA,GAAAy5O,GAEf,SAAAA,EAAazuN,GAAwB,IAAA4uN,EAAnBtgJ,EAAKjhG,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,UAAQ8H,EAAAA,EAAAA,GAAA,KAAAs5O,GAEjC,IAAMjrN,EAAU,IAAI5vB,YAAa,CAAE,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAIlG0mC,EAAW,IAAI6H,GAYiB,OAVtC7H,EAASytD,SAAU,IAAI1lD,GAAiB7e,EAAS,IAEjD8W,EAAS8H,aAAc,WAAY,IAAIo9F,GANrB,CAAE,EAAG,EAAG,GAAK,EAAG,EAAG,GAAK,GAAK,EAAG,EAAG,GAAK,EAAG,EAAG,EAAG,GAAK,GAAK,EAAG,GAAK,GAAK,GAAK,GAAK,EAAG,GAAK,GAAK,GAMvC,KAE1EovG,EAAAD,EAAA9iP,KAAA,KAAOyuC,EAAU,IAAIsqE,GAAmB,CAAEtW,MAAOA,EAAOztD,YAAY,MAE/D7gB,IAAMA,EAEX4uN,EAAKtgP,KAAO,aAEZsgP,EAAKt0M,SAASqmG,wBAAwBiuG,CAEvC,CAuBC,OAvBAx3O,EAAAA,EAAAA,GAAAq3O,EAAA,EAAA/7O,IAAA,oBAAApG,MAED,SAAmBoqB,GAElB,IAAMsJ,EAAMvzB,KAAKuzB,IAEZA,EAAIorG,YAETprG,EAAIwsF,UAAW//G,KAAKyF,UAEpB8tB,EAAIwsG,QAAS//H,KAAK2mB,OAElB3mB,KAAK2mB,MAAM2tB,eAAgB,KAE3BvI,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAg2M,EAAA7iP,WAAA,0BAAAC,KAAA,KAAyB6qB,GAE1B,GAAC,CAAAhkB,IAAA,UAAApG,MAED,WAECG,KAAK6tC,SAAS8U,UACd3iD,KAAKkd,SAASylC,SAEf,KAACq/L,CAAA,CA7Cc,CAASnnI,IAiDnBunI,GAAW,SAAAC,IAAAh6O,EAAAA,EAAAA,GAAA+5O,EAAAC,GAAA,IAAAC,GAAA/5O,EAAAA,EAAAA,GAAA65O,GAEhB,SAAAA,EAAajjH,GAAkC,IAAAojH,EAA3Bx4O,EAAInJ,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGkzH,EAAGlzH,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,UAAQ8H,EAAAA,EAAAA,GAAA,KAAA05O,GAE3C,IAAMvgJ,EAAQiyB,EAIRjmF,EAAW,IAAI6H,GACrB7H,EAAS8H,aAAc,WAAY,IAAIo9F,GAHrB,CAAE,GAAK,EAAG,GAAK,EAAG,EAAG,GAAK,GAAK,EAAG,EAAG,EAAG,EAAG,GAAK,EAAG,EAAG,GAAK,GAAK,EAAG,EAAG,GAAK,EAAG,EAAG,EAAG,EAAG,GAG/B,IAC1EllG,EAASqmG,yBAETquG,EAAAD,EAAAljP,KAAA,KAAOyuC,EAAU,IAAIsqE,GAAmB,CAAEtW,MAAOA,EAAOztD,YAAY,MAE/DvyC,KAAO,cAEZ0gP,EAAKpjH,MAAQA,EAEbojH,EAAKx4O,KAAOA,EAEZ,IAEM0sI,EAAY,IAAI/gG,GAI8H,OAHpJ+gG,EAAU9gG,aAAc,WAAY,IAAIo9F,GAHrB,CAAE,EAAG,EAAG,GAAK,EAAG,EAAG,GAAK,GAAK,EAAG,EAAG,EAAG,EAAG,GAAK,GAAK,EAAG,EAAG,GAAK,EAAG,GAGR,IAC5E0D,EAAUvC,wBAEVquG,EAAKz6N,IAAK,IAAIqmB,GAAMsoG,EAAW,IAAI3zC,GAAmB,CAAEjB,MAAOA,EAAOoB,QAAS,GAAKmW,aAAa,EAAMllE,YAAY,EAAOE,YAAY,MAAcmuM,CAErJ,CAuBC,OAvBA53O,EAAAA,EAAAA,GAAAy3O,EAAA,EAAAn8O,IAAA,oBAAApG,MAED,SAAmBoqB,GAElBjqB,KAAKyF,SAAShB,IAAK,EAAG,EAAG,GAEzBzE,KAAK2mB,MAAMliB,IAAK,GAAMzE,KAAK+J,KAAM,GAAM/J,KAAK+J,KAAM,GAElD/J,KAAKu7C,OAAQv7C,KAAKm/H,MAAMn6G,QAExBhlB,KAAK20L,YAAc30L,KAAKm/H,MAAMtjF,WAE9B9P,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAo2M,EAAAjjP,WAAA,0BAAAC,KAAA,KAAyB6qB,EAE1B,GAAC,CAAAhkB,IAAA,UAAApG,MAED,WAECG,KAAK6tC,SAAS8U,UACd3iD,KAAKkd,SAASylC,UACd3iD,KAAK+jC,SAAU,GAAI8J,SAAS8U,UAC5B3iD,KAAK+jC,SAAU,GAAI7mB,SAASylC,SAE7B,KAACy/L,CAAA,CAnDe,CAAStnI,IAuDpB0nI,GAAsB,IAAIlmN,GAG1BmmN,GAAW,SAAAC,IAAAr6O,EAAAA,EAAAA,GAAAo6O,EAAAC,GAAA,IAAAC,GAAAp6O,EAAAA,EAAAA,GAAAk6O,GAIhB,SAAAA,IAAoK,IAAAG,EAAvJ/lH,EAAGj8H,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAI07B,GAAS,EAAG,EAAG,GAAKmlG,EAAM7gI,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,IAAI07B,GAAS,EAAG,EAAG,GAAK/5B,EAAM3B,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,EAAGihG,EAAKjhG,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,SAAUiiP,EAAUjiP,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAY,GAAT2B,EAAcugP,EAASliP,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAgB,GAAbiiP,EA2BhG,OA3BgHn6O,EAAAA,EAAAA,GAAA,KAAA+5O,IAEhKG,EAAAD,EAAAvjP,KAAA,OAEKyC,KAAO,mBAEWV,IAAlBqgP,MAEJA,GAAgB,IAAI9rM,IACNC,aAAc,WAAY,IAAIo9F,GAAwB,CAAE,EAAG,EAAG,EAAG,EAAG,EAAG,GAAK,KAE1F0uG,GAAgB,IAAIpqC,GAAkB,EAAG,GAAK,EAAG,EAAG,IACtC7iE,UAAW,GAAK,GAAK,IAIpCouG,EAAKn9O,SAASxB,KAAMw9H,GAEpBmhH,EAAKl5M,KAAO,IAAIoxE,GAAM0mI,GAAe,IAAIrpI,GAAmB,CAAEtW,MAAOA,EAAOztD,YAAY,KACxFwuM,EAAKl5M,KAAKjG,kBAAmB,EAC7Bm/M,EAAK96N,IAAK86N,EAAKl5M,MAEfk5M,EAAKnF,KAAO,IAAItvM,GAAMszM,GAAe,IAAI3+I,GAAmB,CAAEjB,MAAOA,EAAOztD,YAAY,KACxFwuM,EAAKnF,KAAKh6M,kBAAmB,EAC7Bm/M,EAAK96N,IAAK86N,EAAKnF,MAEfmF,EAAKG,aAAclmH,GACnB+lH,EAAKI,UAAWzgP,EAAQsgP,EAAYC,GAAYF,CAEjD,CA8DC,OA9DAj4O,EAAAA,EAAAA,GAAA83O,EAAA,EAAAx8O,IAAA,eAAApG,MAED,SAAcg9H,GAIb,GAAKA,EAAI5tH,EAAI,OAEZjP,KAAKkW,WAAWzR,IAAK,EAAG,EAAG,EAAG,QAExB,GAAKo4H,EAAI5tH,GAAM,OAErBjP,KAAKkW,WAAWzR,IAAK,EAAG,EAAG,EAAG,OAExB,CAEN+9O,GAAM/9O,IAAKo4H,EAAI3tH,EAAG,GAAK2tH,EAAI7tH,GAAIsK,YAE/B,IAAM+1G,EAAUj7G,KAAKmF,KAAMsjH,EAAI5tH,GAE/BjP,KAAKkW,WAAW0D,iBAAkB4oO,GAAOnzH,EAE1C,CAED,GAAC,CAAAppH,IAAA,YAAApG,MAED,SAAW0C,GAAkE,IAA1DsgP,EAAUjiP,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAY,GAAT2B,EAAcugP,EAASliP,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAgB,GAAbiiP,EAEzD7iP,KAAK0pC,KAAK/iB,MAAMliB,IAAK,EAAG2P,KAAKuC,IAAK,KAAQpU,EAASsgP,GAAc,GACjE7iP,KAAK0pC,KAAKjL,eAEVz+B,KAAKy9O,KAAK92N,MAAMliB,IAAKq+O,EAAWD,EAAYC,GAC5C9iP,KAAKy9O,KAAKh4O,SAASwJ,EAAI1M,EACvBvC,KAAKy9O,KAAKh/M,cAEX,GAAC,CAAAx4B,IAAA,WAAApG,MAED,SAAUgiG,GAET7hG,KAAK0pC,KAAKxsB,SAAS2kF,MAAMp9F,IAAKo9F,GAC9B7hG,KAAKy9O,KAAKvgO,SAAS2kF,MAAMp9F,IAAKo9F,EAE/B,GAAC,CAAA57F,IAAA,OAAApG,MAED,SAAM8G,GAOL,OALAolC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAy2M,EAAAtjP,WAAA,aAAAC,KAAA,KAAYuH,GAAQ,GAEpB3G,KAAK0pC,KAAKzlC,KAAM0C,EAAO+iC,MACvB1pC,KAAKy9O,KAAKx5O,KAAM0C,EAAO82O,MAEhBz9O,IAER,GAAC,CAAAiG,IAAA,UAAApG,MAED,WAECG,KAAK0pC,KAAKmE,SAAS8U,UACnB3iD,KAAK0pC,KAAKxsB,SAASylC,UACnB3iD,KAAKy9O,KAAK5vM,SAAS8U,UACnB3iD,KAAKy9O,KAAKvgO,SAASylC,SAEpB,KAAC8/L,CAAA,CA/Fe,CAASjmN,IAmGpBymN,GAAU,SAAAC,IAAA76O,EAAAA,EAAAA,GAAA46O,EAAAC,GAAA,IAAAC,GAAA56O,EAAAA,EAAAA,GAAA06O,GAEf,SAAAA,IAAwB,IAAAG,EAAXr5O,EAAInJ,UAAA2B,OAAA,QAAApB,IAAAP,UAAA,GAAAA,UAAA,GAAG,GAAC8H,EAAAA,EAAAA,GAAA,KAAAu6O,GAEpB,IAAMlkO,EAAW,CAChB,EAAG,EAAG,EAAGhV,EAAM,EAAG,EAClB,EAAG,EAAG,EAAG,EAAGA,EAAM,EAClB,EAAG,EAAG,EAAG,EAAG,EAAGA,GASV8jC,EAAW,IAAI6H,GACrB7H,EAAS8H,aAAc,WAAY,IAAIo9F,GAAwBh0H,EAAU,IACzE8uB,EAAS8H,aAAc,QAAS,IAAIo9F,GARrB,CACd,EAAG,EAAG,EAAG,EAAG,GAAK,EACjB,EAAG,EAAG,EAAG,GAAK,EAAG,EACjB,EAAG,EAAG,EAAG,EAAG,GAAK,GAKkD,IAEpE,IAAM71H,EAAW,IAAIi7F,GAAmB,CAAEE,cAAc,EAAMjkE,YAAY,IAIjD,OAFzBgvM,EAAAD,EAAA/jP,KAAA,KAAOyuC,EAAU3wB,IAEZrb,KAAO,aAAauhP,CAE1B,CA8BC,OA9BAz4O,EAAAA,EAAAA,GAAAs4O,EAAA,EAAAh9O,IAAA,YAAApG,MAED,SAAWwjP,EAAYC,EAAYC,GAElC,IAAM1hJ,EAAQ,IAAIC,GACZ1iC,EAAQp/D,KAAK6tC,SAAS+6D,WAAW/G,MAAMziC,MAgB7C,OAdAyiC,EAAMp9F,IAAK4+O,GACXxhJ,EAAMpkE,QAAS2hC,EAAO,GACtByiC,EAAMpkE,QAAS2hC,EAAO,GAEtByiC,EAAMp9F,IAAK6+O,GACXzhJ,EAAMpkE,QAAS2hC,EAAO,GACtByiC,EAAMpkE,QAAS2hC,EAAO,GAEtByiC,EAAMp9F,IAAK8+O,GACX1hJ,EAAMpkE,QAAS2hC,EAAO,IACtByiC,EAAMpkE,QAAS2hC,EAAO,IAEtBp/D,KAAK6tC,SAAS+6D,WAAW/G,MAAMxhE,aAAc,EAEtCrgC,IAER,GAAC,CAAAiG,IAAA,UAAApG,MAED,WAECG,KAAK6tC,SAAS8U,UACd3iD,KAAKkd,SAASylC,SAEf,KAACsgM,CAAA,CAxDc,CAASpoI,IA4DnB2oI,GAAS,WAEd,SAAAA,KAAc96O,EAAAA,EAAAA,GAAA,KAAA86O,GAEbxjP,KAAK6B,KAAO,YAEZ7B,KAAK6hG,MAAQ,IAAIC,GAEjB9hG,KAAKyjP,SAAW,GAChBzjP,KAAK0jP,YAAc,IAEpB,CA6QC,OA7QA/4O,EAAAA,EAAAA,GAAA64O,EAAA,EAAAv9O,IAAA,SAAApG,MAED,SAAQmP,EAAGC,GAMV,OAJAjP,KAAK0jP,YAAc,IAAI9uC,GACvB50M,KAAKyjP,SAASnhP,KAAMtC,KAAK0jP,aACzB1jP,KAAK0jP,YAAYzuC,OAAQjmM,EAAGC,GAErBjP,IAER,GAAC,CAAAiG,IAAA,SAAApG,MAED,SAAQmP,EAAGC,GAIV,OAFAjP,KAAK0jP,YAAYxuC,OAAQlmM,EAAGC,GAErBjP,IAER,GAAC,CAAAiG,IAAA,mBAAApG,MAED,SAAkBs1M,EAAMC,EAAM7G,EAAIC,GAIjC,OAFAxuM,KAAK0jP,YAAYC,iBAAkBxuC,EAAMC,EAAM7G,EAAIC,GAE5CxuM,IAER,GAAC,CAAAiG,IAAA,gBAAApG,MAED,SAAew1M,EAAOC,EAAOC,EAAOC,EAAOjH,EAAIC,GAI9C,OAFAxuM,KAAK0jP,YAAYE,cAAevuC,EAAOC,EAAOC,EAAOC,EAAOjH,EAAIC,GAEzDxuM,IAER,GAAC,CAAAiG,IAAA,aAAApG,MAED,SAAY40M,GAIX,OAFAz0M,KAAK0jP,YAAYG,WAAYpvC,GAEtBz0M,IAER,GAAC,CAAAiG,IAAA,WAAApG,MAED,SAAUikP,GAqBT,SAASC,EAAsBphC,EAAMqhC,GASpC,IAPA,IAAMC,EAAUD,EAAUzhP,OAMtB+8M,GAAS,EACH7sM,EAAIwxO,EAAU,EAAG/wO,EAAI,EAAGA,EAAI+wO,EAASxxO,EAAIS,IAAO,CAEzD,IAAIgxO,EAAYF,EAAWvxO,GACvB0xO,EAAaH,EAAW9wO,GAExBkxO,EAASD,EAAWn1O,EAAIk1O,EAAUl1O,EAClCq1O,EAASF,EAAWl1O,EAAIi1O,EAAUj1O,EAEtC,GAAKmF,KAAKgB,IAAKivO,GAAW1kP,OAAO86H,QAAU,CAU1C,GAPK4pH,EAAS,IAEbH,EAAYF,EAAW9wO,GAAKkxO,GAAWA,EACvCD,EAAaH,EAAWvxO,GAAK4xO,GAAWA,GAIlC1hC,EAAK1zM,EAAIi1O,EAAUj1O,GAAS0zM,EAAK1zM,EAAIk1O,EAAWl1O,EAAQ,SAE/D,GAAK0zM,EAAK1zM,IAAMi1O,EAAUj1O,GAEzB,GAAK0zM,EAAK3zM,IAAMk1O,EAAUl1O,EAAK,OAAO,MAGhC,CAEN,IAAMs1O,EAAWD,GAAW1hC,EAAK3zM,EAAIk1O,EAAUl1O,GAAMo1O,GAAWzhC,EAAK1zM,EAAIi1O,EAAUj1O,GACnF,GAAkB,IAAbq1O,EAAoB,OAAO,EAChC,GAAKA,EAAW,EAAQ,SACxBhlC,GAAWA,CAEZ,CAED,KAAO,CAGN,GAAKqD,EAAK1zM,IAAMi1O,EAAUj1O,EAAM,SAEhC,GAASk1O,EAAWn1O,GAAK2zM,EAAK3zM,GAAS2zM,EAAK3zM,GAAKk1O,EAAUl1O,GACrDk1O,EAAUl1O,GAAK2zM,EAAK3zM,GAAS2zM,EAAK3zM,GAAKm1O,EAAWn1O,EAAS,OAAO,CAGzE,CAED,CAEA,OAAOswM,CAER,CAEA,IAKIilC,EAAOC,EAASC,EALdviC,EAAchC,GAAWgC,YAEzBuhC,EAAWzjP,KAAKyjP,SACtB,GAAyB,IAApBA,EAASlhP,OAAe,MAAO,GAGpC,IAAM0oB,EAAS,GAEf,GAAyB,IAApBw4N,EAASlhP,OAMb,OAJAiiP,EAAUf,EAAU,IACpBgB,EAAW,IAAIjrN,IACNq6K,OAAS2wC,EAAQ3wC,OAC1B5oL,EAAO3oB,KAAMmiP,GACNx5N,EAIR,IAAIy5N,GAAexiC,EAAauhC,EAAU,GAAI/uC,aAC9CgwC,EAAaZ,GAAUY,EAAaA,EAIpC,IAIIC,EAiGAC,EArGEC,EAAmB,GACnBC,EAAY,GACdC,EAAgB,GAChBC,EAAU,EAGdF,EAAWE,QAAY7jP,EACvB4jP,EAAeC,GAAY,GAE3B,IAAM,IAAIphP,EAAI,EAAGwS,EAAIqtO,EAASlhP,OAAQqB,EAAIwS,EAAGxS,IAI5C2gP,EAAQriC,EADRyiC,GADAH,EAAUf,EAAU7/O,IACA8wM,cAEpB6vC,EAAQT,GAAUS,EAAQA,KAIhBG,GAAkBI,EAAWE,IAAcA,IAEpDF,EAAWE,GAAY,CAAEj4O,EAAG,IAAIysB,GAAS/mB,EAAGkyO,GAC5CG,EAAWE,GAAUj4O,EAAE8mM,OAAS2wC,EAAQ3wC,OAEnC6wC,GAAaM,IAClBD,EAAeC,GAAY,IAM3BD,EAAeC,GAAU1iP,KAAM,CAAEiV,EAAGitO,EAAS/xO,EAAGkyO,EAAW,KAS7D,IAAOG,EAAW,GAAM,OA7IxB,SAA0BG,GAIzB,IAFA,IAAMh6N,EAAS,GAELrnB,EAAI,EAAGwS,EAAI6uO,EAAW1iP,OAAQqB,EAAIwS,EAAGxS,IAAO,CAErD,IAAM4gP,EAAUS,EAAYrhP,GAEtB6gP,EAAW,IAAIjrN,GACrBirN,EAAS5wC,OAAS2wC,EAAQ3wC,OAE1B5oL,EAAO3oB,KAAMmiP,EAEd,CAEA,OAAOx5N,CAER,CA4H+Bi6N,CAAiBzB,GAGhD,GAAKqB,EAAUviP,OAAS,EAAI,CAK3B,IAHA,IAAI4iP,GAAY,EACZC,EAAW,EAELC,EAAO,EAAGC,EAAOR,EAAUviP,OAAQ8iP,EAAOC,EAAMD,IAEzDR,EAAkBQ,GAAS,GAI5B,IAAM,IAAIA,EAAO,EAAGC,EAAOR,EAAUviP,OAAQ8iP,EAAOC,EAAMD,IAIzD,IAFA,IAAME,EAAMR,EAAeM,GAEjBG,EAAO,EAAGA,EAAOD,EAAIhjP,OAAQijP,IAAU,CAKhD,IAHA,IAAMC,EAAKF,EAAKC,GACZE,GAAkB,EAEZC,EAAQ,EAAGA,EAAQb,EAAUviP,OAAQojP,IAEzC5B,EAAsB0B,EAAGhzO,EAAGqyO,EAAWa,GAAQlzO,KAE9C4yO,IAASM,GAAQP,IAEjBM,GAEJA,GAAkB,EAClBb,EAAkBc,GAAQrjP,KAAMmjP,IAIhCN,GAAY,GAQVO,GAEJb,EAAkBQ,GAAO/iP,KAAMmjP,EAIjC,CAIIL,EAAW,IAAmB,IAAdD,IAEpBJ,EAAgBF,EAIlB,CAIA,IAAM,IAAIjhP,EAAI,EAAG8sG,EAAKo0I,EAAUviP,OAAQqB,EAAI8sG,EAAI9sG,IAAO,CAEtD6gP,EAAWK,EAAWlhP,GAAImJ,EAC1Bke,EAAO3oB,KAAMmiP,GAGb,IAAM,IAAIpyO,EAAI,EAAGyrG,GAFjB8mI,EAAWG,EAAenhP,IAEKrB,OAAQ8P,EAAIyrG,EAAIzrG,IAE9CoyO,EAAS3oC,MAAMx5M,KAAMsiP,EAAUvyO,GAAIkF,EAIrC,CAIA,OAAO0T,CAER,KAACu4N,CAAA,CAxRa,GA8RToC,GAAwBC,KAE9B,SAASA,KAWR,IAPA,IAAMz+O,EAAS,IAAIi3F,YAAa,GAC1BynJ,EAAY,IAAIr7O,aAAcrD,GAC9B2+O,EAAa,IAAIl4I,YAAazmG,GAE9B4+O,EAAY,IAAIn4I,YAAa,KAC7Bo4I,EAAa,IAAIp4I,YAAa,KAE1BjqG,EAAI,EAAGA,EAAI,MAAQA,EAAI,CAEhC,IAAMqJ,EAAIrJ,EAAI,IAITqJ,GAAM,IAEV+4O,EAAWpiP,GAAM,EACjBoiP,EAAe,IAAJpiP,GAAc,MACzBqiP,EAAYriP,GAAM,GAClBqiP,EAAgB,IAAJriP,GAAc,IAIfqJ,GAAM,IAEjB+4O,EAAWpiP,GAAM,OAAcqJ,EAAI,GACnC+4O,EAAe,IAAJpiP,GAAgB,OAAcqJ,EAAI,GAAS,MACtDg5O,EAAYriP,IAAQqJ,EAAI,EACxBg5O,EAAgB,IAAJriP,IAAgBqJ,EAAI,GAIrBA,GAAK,IAEhB+4O,EAAWpiP,GAAQqJ,EAAI,IAAQ,GAC/B+4O,EAAe,IAAJpiP,GAAkBqJ,EAAI,IAAQ,GAAO,MAChDg5O,EAAYriP,GAAM,GAClBqiP,EAAgB,IAAJriP,GAAc,IAIfqJ,EAAI,KAEf+4O,EAAWpiP,GAAM,MACjBoiP,EAAe,IAAJpiP,GAAc,MACzBqiP,EAAYriP,GAAM,GAClBqiP,EAAgB,IAAJriP,GAAc,KAM1BoiP,EAAWpiP,GAAM,MACjBoiP,EAAe,IAAJpiP,GAAc,MACzBqiP,EAAYriP,GAAM,GAClBqiP,EAAgB,IAAJriP,GAAc,GAI5B,CAQA,IAJA,IAAMsiP,EAAgB,IAAIr4I,YAAa,MACjCs4I,EAAgB,IAAIt4I,YAAa,IACjCu4I,EAAc,IAAIv4I,YAAa,IAE3BjqG,EAAI,EAAGA,EAAI,OAASA,EAAI,CAMjC,IAJA,IAAI7B,EAAI6B,GAAK,GACTqJ,EAAI,EAGuB,KAAjB,QAAJlL,IAETA,IAAM,EACNkL,GAAK,QAINlL,IAAK,QACLkL,GAAK,UAELi5O,EAAetiP,GAAM7B,EAAIkL,CAE1B,CAEA,IAAM,IAAIrJ,EAAI,KAAMA,EAAI,OAASA,EAEhCsiP,EAAetiP,GAAM,WAAiBA,EAAI,MAAU,IAIrD,IAAM,IAAIA,EAAI,EAAGA,EAAI,KAAOA,EAE3BuiP,EAAeviP,GAAMA,GAAK,GAI3BuiP,EAAe,IAAO,WACtBA,EAAe,IAAO,WAEtB,IAAM,IAAIviP,EAAI,GAAIA,EAAI,KAAOA,EAE5BuiP,EAAeviP,GAAM,YAAiBA,EAAI,IAAQ,IAInDuiP,EAAe,IAAO,WAEtB,IAAM,IAAIviP,EAAI,EAAGA,EAAI,KAAOA,EAEhB,KAANA,IAEJwiP,EAAaxiP,GAAM,MAMrB,MAAO,CACNkiP,UAAWA,EACXC,WAAYA,EACZC,UAAWA,EACXC,WAAYA,EACZC,cAAeA,EACfC,cAAeA,EACfC,YAAaA,EAGf,CA2BA,IAAI98M,GAAyBhqC,OAAOqqE,OAAO,CAC1C84C,UAAW,KACXl5E,YAzBD,SAAsBxhB,GAEhB3T,KAAKgB,IAAK2S,GAAQ,OAAQllB,QAAQC,KAAM,sDAE7CilB,EAAM2lG,GAAO3lG,GAAO,MAAO,OAE3B69N,GAAQE,UAAW,GAAM/9N,EACzB,IAAM7a,EAAI04O,GAAQG,WAAY,GACxB94O,EAAMC,GAAK,GAAO,IACxB,OAAO04O,GAAQI,UAAW/4O,KAAc,QAAJC,IAAoB04O,GAAQK,WAAYh5O,GAE7E,EAeCo5O,cAXD,SAAwBt+N,GAEvB,IAAMhmB,EAAIgmB,GAAO,GAEjB,OADA69N,GAAQG,WAAY,GAAMH,GAAQM,cAAeN,GAAQQ,YAAarkP,IAAc,KAANgmB,IAAkB69N,GAAQO,cAAepkP,GAChH6jP,GAAQE,UAAW,EAE3B,IAUA,SAASQ,KAERzjP,QAAQkC,MAAO,gDAEhB,CAEA,IAEMwhP,GAA4B,SAAAC,IAAAn+O,EAAAA,EAAAA,GAAAk+O,EAAAC,GAAA,IAAAC,GAAAl+O,EAAAA,EAAAA,GAAAg+O,GAEjC,SAAAA,EAAa/7M,EAAOC,EAAQziC,GAAU,IAAA0+O,EAIpB,OAJoBh+O,EAAAA,EAAAA,GAAA,KAAA69O,GAErC1jP,QAAQkC,MAAO,yJACf2hP,EAAAD,EAAArnP,KAAA,KAAOorC,EAAOC,EAAQziC,IACjBqwH,QAAU,EAAEquH,CAElB,CAAC,OAAA/7O,EAAAA,EAAAA,GAAA47O,EAAA,CARgC,CAASvxM,IAcrC2xM,GAAkB,SAAAC,IAAAv+O,EAAAA,EAAAA,GAAAs+O,EAAAC,GAAA,IAAAC,GAAAt+O,EAAAA,EAAAA,GAAAo+O,GAEvB,SAAAA,EAAah6O,EAAM69B,EAAOC,EAAQ5lB,GAEgD,OAFxCnc,EAAAA,EAAAA,GAAA,KAAAi+O,GAEzC9jP,QAAQC,KAAM,kEAAmE+jP,EAAAznP,KAAA,KAC1EuN,EAAM69B,EAAOC,EAAQ5lB,EAE7B,CAAC,OAAAla,EAAAA,EAAAA,GAAAg8O,EAAA,CAPsB,CAASruH,IAa3BwuH,GAAa,SAAAC,IAAA1+O,EAAAA,EAAAA,GAAAy+O,EAAAC,GAAA,IAAAC,GAAAz+O,EAAAA,EAAAA,GAAAu+O,GAElB,SAAAA,EAAan6O,EAAM69B,EAAOC,EAAQ5lB,GAEwC,OAFhCnc,EAAAA,EAAAA,GAAA,KAAAo+O,GAEzCjkP,QAAQC,KAAM,0DAA2DkkP,EAAA5nP,KAAA,KAClEuN,EAAM69B,EAAOC,EAAQ5lB,EAE7B,CAAC,OAAAla,EAAAA,EAAAA,GAAAm8O,EAAA,CAPiB,CAASjuH,IAatBouH,GAAiB,SAAAC,IAAA7+O,EAAAA,EAAAA,GAAA4+O,EAAAC,GAAA,IAAAC,GAAA5+O,EAAAA,EAAAA,GAAA0+O,GAEtB,SAAAA,EAAaz8M,EAAOC,EAAQ5lB,EAAOs0H,EAAeC,EAAgBC,GAEgB,OAFA3wI,EAAAA,EAAAA,GAAA,KAAAu+O,GAEjFpkP,QAAQC,KAAM,kEAAmEqkP,EAAA/nP,KAAA,KAC1EorC,EAAOC,EAAQ5lB,EAAOs0H,EAAeC,EAAgBC,EAG7D,CAAC,OAAA1uI,EAAAA,EAAAA,GAAAs8O,EAAA,CARqB,CAASluG,IAc1BquG,GAAqB,SAAAC,IAAAh/O,EAAAA,EAAAA,GAAA++O,EAAAC,GAAA,IAAAC,GAAA/+O,EAAAA,EAAAA,GAAA6+O,GAE1B,SAAAA,EAAa/5N,EAAQ9qB,EAAQq0M,EAAaC,GAEgD,OAF/BnuM,EAAAA,EAAAA,GAAA,KAAA0+O,GAE1DvkP,QAAQC,KAAM,0EAA2EwkP,EAAAloP,KAAA,KAClFiuB,EAAQ9qB,EAAQq0M,EAAaC,EAErC,CAAC,OAAAlsM,EAAAA,EAAAA,GAAAy8O,EAAA,CAPyB,CAAS5wC,IAa9B+wC,GAAoB,SAAAC,IAAAn/O,EAAAA,EAAAA,GAAAk/O,EAAAC,GAAA,IAAAC,GAAAl/O,EAAAA,EAAAA,GAAAg/O,GAEzB,SAAAA,EAAal6N,EAAQwgL,EAAUqJ,EAAYC,GAE6C,OAF/BzuM,EAAAA,EAAAA,GAAA,KAAA6+O,GAExD1kP,QAAQC,KAAM,wEAAyE2kP,EAAAroP,KAAA,KAChFiuB,EAAQwgL,EAAUqJ,EAAYC,EAEtC,CAAC,OAAAxsM,EAAAA,EAAAA,GAAA48O,EAAA,CAPwB,CAASzwC,IAa7B4wC,GAAkB,SAAAC,IAAAt/O,EAAAA,EAAAA,GAAAq/O,EAAAC,GAAA,IAAAC,GAAAr/O,EAAAA,EAAAA,GAAAm/O,GAEvB,SAAAA,EAAar6N,EAAQod,EAAQosK,EAAgBz9D,EAAgBu+D,EAAWT,EAAYC,GAEA,OAFczuM,EAAAA,EAAAA,GAAA,KAAAg/O,GAEjG7kP,QAAQC,KAAM,oEAAqE8kP,EAAAxoP,KAAA,KAC5EiuB,EAAQod,EAAQosK,EAAgBz9D,EAAgBu+D,EAAWT,EAAYC,EAE/E,CAAC,OAAAxsM,EAAAA,EAAAA,GAAA+8O,EAAA,CAPsB,CAASrvC,IAa3BwvC,GAAsB,SAAAC,IAAAz/O,EAAAA,EAAAA,GAAAw/O,EAAAC,GAAA,IAAAC,GAAAx/O,EAAAA,EAAAA,GAAAs/O,GAE3B,SAAAA,EAAapwC,EAAWC,EAAcjtK,EAAQosK,EAAgBz9D,EAAgBu+D,EAAWT,EAAYC,GAET,OAFuBzuM,EAAAA,EAAAA,GAAA,KAAAm/O,GAElHhlP,QAAQC,KAAM,4EAA6EilP,EAAA3oP,KAAA,KACpFq4M,EAAWC,EAAcjtK,EAAQosK,EAAgBz9D,EAAgBu+D,EAAWT,EAAYC,EAEhG,CAAC,OAAAxsM,EAAAA,EAAAA,GAAAk9O,EAAA,CAP0B,CAASxwC,IAa/B2wC,GAA0B,SAAAC,IAAA5/O,EAAAA,EAAAA,GAAA2/O,EAAAC,GAAA,IAAAC,GAAA3/O,EAAAA,EAAAA,GAAAy/O,GAE/B,SAAAA,EAAa36N,EAAQ61K,GAE+E,OAFtEx6L,EAAAA,EAAAA,GAAA,KAAAs/O,GAE7BnlP,QAAQC,KAAM,oFAAqFolP,EAAA9oP,KAAA,KAC5FiuB,EAAQ61K,EAEhB,CAAC,OAAAv4L,EAAAA,EAAAA,GAAAq9O,EAAA,CAP8B,CAAShuC,IAanCmuC,GAAqB,SAAAC,IAAA//O,EAAAA,EAAAA,GAAA8/O,EAAAC,GAAA,IAAAC,GAAA9/O,EAAAA,EAAAA,GAAA4/O,GAE1B,SAAAA,EAAal9N,EAAQjjB,GAEqE,OAF3DU,EAAAA,EAAAA,GAAA,KAAAy/O,GAE9BtlP,QAAQC,KAAM,0EAA2EulP,EAAAjpP,KAAA,KAClF6rB,EAAQjjB,EAEhB,CAAC,OAAA2C,EAAAA,EAAAA,GAAAw9O,EAAA,CAPyB,CAAS5nC,IAa9B+nC,GAAyB,SAAAC,IAAAlgP,EAAAA,EAAAA,GAAAigP,EAAAC,GAAA,IAAAC,GAAAjgP,EAAAA,EAAAA,GAAA+/O,GAE9B,SAAAA,EAAaj7N,EAAQ61K,GAE6E,OAFpEx6L,EAAAA,EAAAA,GAAA,KAAA4/O,GAE7BzlP,QAAQC,KAAM,kFAAmF0lP,EAAAppP,KAAA,KAC1FiuB,EAAQ61K,EAEhB,CAAC,OAAAv4L,EAAAA,EAAAA,GAAA29O,EAAA,CAP6B,CAASx6M,IAalC26M,GAAmB,SAAAC,IAAArgP,EAAAA,EAAAA,GAAAogP,EAAAC,GAAA,IAAAC,GAAApgP,EAAAA,EAAAA,GAAAkgP,GAExB,SAAAA,EAAaxyO,EAAQ43L,EAAUqI,EAAUC,GAE6C,OAFjCztM,EAAAA,EAAAA,GAAA,KAAA+/O,GAEpD5lP,QAAQC,KAAM,sEAAuE6lP,EAAAvpP,KAAA,KAC9E6W,EAAQ43L,EAAUqI,EAAUC,EAEpC,CAAC,OAAAxrM,EAAAA,EAAAA,GAAA89O,EAAA,CAPuB,CAAS3yC,IAa5B8yC,GAAwB,SAAAC,IAAAxgP,EAAAA,EAAAA,GAAAugP,EAAAC,GAAA,IAAAC,GAAAvgP,EAAAA,EAAAA,GAAAqgP,GAE7B,SAAAA,EAAav7N,EAAQ61K,GAE2E,OAFlEx6L,EAAAA,EAAAA,GAAA,KAAAkgP,GAE7B/lP,QAAQC,KAAM,gFAAiFgmP,EAAA1pP,KAAA,KACxFiuB,EAAQ61K,EAEhB,CAAC,OAAAv4L,EAAAA,EAAAA,GAAAi+O,EAAA,CAP4B,CAASriC,IAajCwiC,GAAmB,SAAAC,IAAA3gP,EAAAA,EAAAA,GAAA0gP,EAAAC,GAAA,IAAAC,GAAA1gP,EAAAA,EAAAA,GAAAwgP,GAExB,SAAAA,EAAav+M,EAAOC,EAAQ0uG,EAAeC,GAE2C,OAF1B1wI,EAAAA,EAAAA,GAAA,KAAAqgP,GAE3DlmP,QAAQC,KAAM,sEAAuEmmP,EAAA7pP,KAAA,KAC9EorC,EAAOC,EAAQ0uG,EAAeC,EAEtC,CAAC,OAAAzuI,EAAAA,EAAAA,GAAAo+O,EAAA,CAPuB,CAASlnG,IAa5BqnG,GAAwB,SAAAC,IAAA9gP,EAAAA,EAAAA,GAAA6gP,EAAAC,GAAA,IAAAC,GAAA7gP,EAAAA,EAAAA,GAAA2gP,GAE7B,SAAAA,EAAanqO,EAAUgY,EAAS1J,EAAQ61K,GAEwD,OAF/Cx6L,EAAAA,EAAAA,GAAA,KAAAwgP,GAEhDrmP,QAAQC,KAAM,gFAAiFsmP,EAAAhqP,KAAA,KACxF2f,EAAUgY,EAAS1J,EAAQ61K,EAEnC,CAAC,OAAAv4L,EAAAA,EAAAA,GAAAu+O,EAAA,CAP4B,CAASzwC,IAajC4wC,GAAkB,SAAAC,IAAAjhP,EAAAA,EAAAA,GAAAghP,EAAAC,GAAA,IAAAC,GAAAhhP,EAAAA,EAAAA,GAAA8gP,GAEvB,SAAAA,EAAatiC,EAAaC,EAAaC,EAAeC,EAAahQ,EAAYC,GAEK,OAFSzuM,EAAAA,EAAAA,GAAA,KAAA2gP,GAE5FxmP,QAAQC,KAAM,oEAAqEymP,EAAAnqP,KAAA,KAC5E2nN,EAAaC,EAAaC,EAAeC,EAAahQ,EAAYC,EAE1E,CAAC,OAAAxsM,EAAAA,EAAAA,GAAA0+O,EAAA,CAPsB,CAAS1iC,IAa3B6iC,GAAmB,SAAAC,IAAAphP,EAAAA,EAAAA,GAAAmhP,EAAAC,GAAA,IAAAC,GAAAnhP,EAAAA,EAAAA,GAAAihP,GAExB,SAAAA,EAAav+N,EAAQi2L,GAEiE,OAFjDx4M,EAAAA,EAAAA,GAAA,KAAA8gP,GAEpC3mP,QAAQC,KAAM,sEAAuE4mP,EAAAtqP,KAAA,KAC9E6rB,EAAQi2L,EAEhB,CAAC,OAAAv2M,EAAAA,EAAAA,GAAA6+O,EAAA,CAPuB,CAASniC,IAa5BsiC,GAAoB,SAAAC,IAAAvhP,EAAAA,EAAAA,GAAAshP,EAAAC,GAAA,IAAAC,GAAAthP,EAAAA,EAAAA,GAAAohP,GAEzB,SAAAA,EAAat8N,EAAQ8rH,EAAeC,EAAgB88D,EAAUC,EAAWe,EAAYC,GAEG,OAFWzuM,EAAAA,EAAAA,GAAA,KAAAihP,GAElG9mP,QAAQC,KAAM,wEAAyE+mP,EAAAzqP,KAAA,KAChFiuB,EAAQ8rH,EAAeC,EAAgB88D,EAAUC,EAAWe,EAAYC,EAEhF,CAAC,OAAAxsM,EAAAA,EAAAA,GAAAg/O,EAAA,CAPwB,CAAS9hC,IAa7BiiC,GAAyB,SAAAC,IAAA1hP,EAAAA,EAAAA,GAAAyhP,EAAAC,GAAA,IAAAC,GAAAzhP,EAAAA,EAAAA,GAAAuhP,GAE9B,SAAAA,EAAaz8N,EAAQ61K,GAE6E,OAFpEx6L,EAAAA,EAAAA,GAAA,KAAAohP,GAE7BjnP,QAAQC,KAAM,kFAAmFknP,EAAA5qP,KAAA,KAC1FiuB,EAAQ61K,EAEhB,CAAC,OAAAv4L,EAAAA,EAAAA,GAAAm/O,EAAA,CAP6B,CAASzhC,IAalC4hC,GAAmB,SAAAC,IAAA7hP,EAAAA,EAAAA,GAAA4hP,EAAAC,GAAA,IAAAC,GAAA5hP,EAAAA,EAAAA,GAAA0hP,GAExB,SAAAA,EAAa58N,EAAQw7L,EAAMhS,EAAgBiS,EAAiBC,GAE0B,OAFpBrgN,EAAAA,EAAAA,GAAA,KAAAuhP,GAEjEpnP,QAAQC,KAAM,sEAAuEqnP,EAAA/qP,KAAA,KAC9EiuB,EAAQw7L,EAAMhS,EAAgBiS,EAAiBC,EAEvD,CAAC,OAAAp+M,EAAAA,EAAAA,GAAAs/O,EAAA,CAPuB,CAASxhC,IAa5B2hC,GAAuB,SAAAC,IAAAhiP,EAAAA,EAAAA,GAAA+hP,EAAAC,GAAA,IAAAC,GAAA/hP,EAAAA,EAAAA,GAAA6hP,GAE5B,SAAAA,EAAa/8N,EAAQw7L,EAAMC,EAAiBjS,EAAgBpkM,EAAGS,GAE+B,OAF3BxK,EAAAA,EAAAA,GAAA,KAAA0hP,GAElEvnP,QAAQC,KAAM,8EAA+EwnP,EAAAlrP,KAAA,KACtFiuB,EAAQw7L,EAAMC,EAAiBjS,EAAgBpkM,EAAGS,EAE1D,CAAC,OAAAvI,EAAAA,EAAAA,GAAAy/O,EAAA,CAP2B,CAASphC,IAahCuhC,GAAkB,SAAAC,IAAAniP,EAAAA,EAAAA,GAAAkiP,EAAAC,GAAA,IAAAC,GAAAliP,EAAAA,EAAAA,GAAAgiP,GAEvB,SAAAA,EAAav6M,EAAM84K,EAAiBz7L,EAAQwpL,EAAgB/I,GAEwB,OAFfplM,EAAAA,EAAAA,GAAA,KAAA6hP,GAEpE1nP,QAAQC,KAAM,oEAAqE2nP,EAAArrP,KAAA,KAC5E4wC,EAAM84K,EAAiBz7L,EAAQwpL,EAAgB/I,EAEvD,CAAC,OAAAnjM,EAAAA,EAAAA,GAAA4/O,EAAA,CAPsB,CAAS5gC,IAWE,qBAAvB3mB,oBAEXA,mBAAmB12K,cAAe,IAAI22K,YAAa,WAAY,CAAEC,OAAQ,CACxEwnD,SAAUh9M,MAKW,qBAAXqe,SAENA,OAAO4+L,UAEX9nP,QAAQC,KAAM,2DAIdipD,OAAO4+L,UAAYj9M","sources":["../node_modules/@react-three/cannon/dist/index.js","../node_modules/three-stdlib/loaders/RGBELoader.js","../node_modules/three-stdlib/objects/GroundProjectedEnv.js","../node_modules/@react-three/drei/helpers/environment-assets.js","../node_modules/@react-three/drei/core/Environment.js","../node_modules/@react-three/drei/materials/ConvolutionMaterial.js","../node_modules/@react-three/drei/materials/BlurPass.js","../node_modules/@react-three/drei/materials/MeshReflectorMaterial.js","../node_modules/@react-three/drei/core/MeshReflectorMaterial.js","../node_modules/three-stdlib/controls/OrbitControls.js","../node_modules/@react-three/drei/core/OrbitControls.js","../node_modules/@react-three/drei/core/PerspectiveCamera.js","../node_modules/zustand/esm/index.js","../node_modules/suspend-react/dist/index.js","../node_modules/@react-three/fiber/dist/index-21f75f82.esm.js","../node_modules/@babel/runtime/helpers/esm/toArray.js","../node_modules/react-use-measure/dist/web.js","../node_modules/its-fine/src/index.tsx","../node_modules/@react-three/fiber/dist/react-three-fiber.esm.js","../node_modules/debounce/index.js","../node_modules/react-merge-refs/src/index.tsx","../node_modules/react-reconciler/cjs/react-reconciler-constants.production.min.js","../node_modules/react-reconciler/cjs/react-reconciler.production.min.js","../node_modules/react-reconciler/constants.js","../node_modules/react-reconciler/index.js","../node_modules/scheduler/cjs/scheduler.production.min.js","../node_modules/scheduler/index.js","../node_modules/three-stdlib/utils/BufferGeometryUtils.js","../node_modules/three-stdlib/loaders/GLTFLoader.js","../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/@babel/runtime/helpers/esm/construct.js","../node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","../node_modules/@babel/runtime/helpers/esm/createSuper.js","../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/extends.js","../node_modules/@babel/runtime/helpers/esm/get.js","../node_modules/@babel/runtime/helpers/esm/superPropBase.js","../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/inherits.js","../node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","../node_modules/@babel/runtime/helpers/esm/toPrimitive.js","../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","../node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","../node_modules/three/build/three.module.js"],"sourcesContent":["import { useFrame, useThree } from '@react-three/fiber';\nimport { MeshBasicMaterial, SphereGeometry, BoxGeometry, PlaneGeometry, Mesh, CylinderGeometry, BufferGeometry, Float32BufferAttribute, Quaternion as Quaternion$2, Vector3, Matrix4, Scene, InstancedMesh, Object3D, Euler, MathUtils, DynamicDrawUsage } from 'three';\nimport { createContext, useContext, useState, useRef, useMemo, useEffect, useLayoutEffect, useCallback } from 'react';\nimport { jsxs, jsx } from 'react/jsx-runtime';\n\nvar events = {exports: {}};\n\nvar R = typeof Reflect === 'object' ? Reflect : null;\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  };\n\nvar ReflectOwnKeys;\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys;\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n};\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nevents.exports = EventEmitter;\nevents.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    }\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n\nvar EventEmitter$1 = events.exports;\n\nfunction decodeBase64(base64, enableUnicode) {\n    var binaryString = atob(base64);\n    if (enableUnicode) {\n        var binaryView = new Uint8Array(binaryString.length);\n        for (var i = 0, n = binaryString.length; i < n; ++i) {\n            binaryView[i] = binaryString.charCodeAt(i);\n        }\n        return String.fromCharCode.apply(null, new Uint16Array(binaryView.buffer));\n    }\n    return binaryString;\n}\n\nfunction createURL(base64, sourcemapArg, enableUnicodeArg) {\n    var sourcemap = sourcemapArg === undefined ? null : sourcemapArg;\n    var enableUnicode = enableUnicodeArg === undefined ? false : enableUnicodeArg;\n    var source = decodeBase64(base64, enableUnicode);\n    var start = source.indexOf('\\n', 10) + 1;\n    var body = source.substring(start) + (sourcemap ? '\\/\\/# sourceMappingURL=' + sourcemap : '');\n    var blob = new Blob([body], { type: 'application/javascript' });\n    return URL.createObjectURL(blob);\n}\n\nfunction createBase64WorkerFactory(base64, sourcemapArg, enableUnicodeArg) {\n    var url;\n    return function WorkerFactory(options) {\n        url = url || createURL(base64, sourcemapArg, enableUnicodeArg);\n        return new Worker(url, options);\n    };\n}\n\nvar WorkerFactory = createBase64WorkerFactory('Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLyoqCiAgICogUmVjb3JkcyB3aGF0IG9iamVjdHMgYXJlIGNvbGxpZGluZyB3aXRoIGVhY2ggb3RoZXIKICAgKi8KCiAgLyoqCiAgICogQSAzeDMgbWF0cml4LgogICAqIEF1dGhvcmVkIGJ5IHtAbGluayBodHRwOi8vZ2l0aHViLmNvbS9zY2h0ZXBwZS8gc2NodGVwcGV9CiAgICovCiAgY2xhc3MgTWF0MyB7CiAgICAvKioKICAgICAqIEEgdmVjdG9yIG9mIGxlbmd0aCA5LCBjb250YWluaW5nIGFsbCBtYXRyaXggZWxlbWVudHMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEBwYXJhbSBlbGVtZW50cyBBIHZlY3RvciBvZiBsZW5ndGggOSwgY29udGFpbmluZyBhbGwgbWF0cml4IGVsZW1lbnRzLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihlbGVtZW50cykgewogICAgICBpZiAoZWxlbWVudHMgPT09IHZvaWQgMCkgewogICAgICAgIGVsZW1lbnRzID0gWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdOwogICAgICB9CgogICAgICB0aGlzLmVsZW1lbnRzID0gZWxlbWVudHM7CiAgICB9CiAgICAvKioKICAgICAqIFNldHMgdGhlIG1hdHJpeCB0byBpZGVudGl0eQogICAgICogQHRvZG8gU2hvdWxkIHBlcmhhcHMgYmUgcmVuYW1lZCB0byBgc2V0SWRlbnRpdHkoKWAgdG8gYmUgbW9yZSBjbGVhci4KICAgICAqIEB0b2RvIENyZWF0ZSBhbm90aGVyIGZ1bmN0aW9uIHRoYXQgaW1tZWRpYXRlbHkgY3JlYXRlcyBhbiBpZGVudGl0eSBtYXRyaXggZWcuIGBleWUoKWAKICAgICAqLwoKCiAgICBpZGVudGl0eSgpIHsKICAgICAgY29uc3QgZSA9IHRoaXMuZWxlbWVudHM7CiAgICAgIGVbMF0gPSAxOwogICAgICBlWzFdID0gMDsKICAgICAgZVsyXSA9IDA7CiAgICAgIGVbM10gPSAwOwogICAgICBlWzRdID0gMTsKICAgICAgZVs1XSA9IDA7CiAgICAgIGVbNl0gPSAwOwogICAgICBlWzddID0gMDsKICAgICAgZVs4XSA9IDE7CiAgICB9CiAgICAvKioKICAgICAqIFNldCBhbGwgZWxlbWVudHMgdG8gemVybwogICAgICovCgoKICAgIHNldFplcm8oKSB7CiAgICAgIGNvbnN0IGUgPSB0aGlzLmVsZW1lbnRzOwogICAgICBlWzBdID0gMDsKICAgICAgZVsxXSA9IDA7CiAgICAgIGVbMl0gPSAwOwogICAgICBlWzNdID0gMDsKICAgICAgZVs0XSA9IDA7CiAgICAgIGVbNV0gPSAwOwogICAgICBlWzZdID0gMDsKICAgICAgZVs3XSA9IDA7CiAgICAgIGVbOF0gPSAwOwogICAgfQogICAgLyoqCiAgICAgKiBTZXRzIHRoZSBtYXRyaXggZGlhZ29uYWwgZWxlbWVudHMgZnJvbSBhIFZlYzMKICAgICAqLwoKCiAgICBzZXRUcmFjZSh2ZWN0b3IpIHsKICAgICAgY29uc3QgZSA9IHRoaXMuZWxlbWVudHM7CiAgICAgIGVbMF0gPSB2ZWN0b3IueDsKICAgICAgZVs0XSA9IHZlY3Rvci55OwogICAgICBlWzhdID0gdmVjdG9yLno7CiAgICB9CiAgICAvKioKICAgICAqIEdldHMgdGhlIG1hdHJpeCBkaWFnb25hbCBlbGVtZW50cwogICAgICovCgoKICAgIGdldFRyYWNlKHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50czsKICAgICAgdGFyZ2V0LnggPSBlWzBdOwogICAgICB0YXJnZXQueSA9IGVbNF07CiAgICAgIHRhcmdldC56ID0gZVs4XTsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogTWF0cml4LVZlY3RvciBtdWx0aXBsaWNhdGlvbgogICAgICogQHBhcmFtIHYgVGhlIHZlY3RvciB0byBtdWx0aXBseSB3aXRoCiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLCB0YXJnZXQgdG8gc2F2ZSB0aGUgcmVzdWx0IGluLgogICAgICovCgoKICAgIHZtdWx0KHYsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50czsKICAgICAgY29uc3QgeCA9IHYueDsKICAgICAgY29uc3QgeSA9IHYueTsKICAgICAgY29uc3QgeiA9IHYuejsKICAgICAgdGFyZ2V0LnggPSBlWzBdICogeCArIGVbMV0gKiB5ICsgZVsyXSAqIHo7CiAgICAgIHRhcmdldC55ID0gZVszXSAqIHggKyBlWzRdICogeSArIGVbNV0gKiB6OwogICAgICB0YXJnZXQueiA9IGVbNl0gKiB4ICsgZVs3XSAqIHkgKyBlWzhdICogejsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogTWF0cml4LXNjYWxhciBtdWx0aXBsaWNhdGlvbgogICAgICovCgoKICAgIHNtdWx0KHMpIHsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy5lbGVtZW50c1tpXSAqPSBzOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIE1hdHJpeCBtdWx0aXBsaWNhdGlvbgogICAgICogQHBhcmFtIG1hdHJpeCBNYXRyaXggdG8gbXVsdGlwbHkgd2l0aCBmcm9tIGxlZnQgc2lkZS4KICAgICAqLwoKCiAgICBtbXVsdChtYXRyaXgsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgTWF0MygpOwogICAgICB9CgogICAgICBjb25zdCBBID0gdGhpcy5lbGVtZW50czsKICAgICAgY29uc3QgQiA9IG1hdHJpeC5lbGVtZW50czsKICAgICAgY29uc3QgVCA9IHRhcmdldC5lbGVtZW50czsKICAgICAgY29uc3QgYTExID0gQVswXSwKICAgICAgICAgICAgYTEyID0gQVsxXSwKICAgICAgICAgICAgYTEzID0gQVsyXSwKICAgICAgICAgICAgYTIxID0gQVszXSwKICAgICAgICAgICAgYTIyID0gQVs0XSwKICAgICAgICAgICAgYTIzID0gQVs1XSwKICAgICAgICAgICAgYTMxID0gQVs2XSwKICAgICAgICAgICAgYTMyID0gQVs3XSwKICAgICAgICAgICAgYTMzID0gQVs4XTsKICAgICAgY29uc3QgYjExID0gQlswXSwKICAgICAgICAgICAgYjEyID0gQlsxXSwKICAgICAgICAgICAgYjEzID0gQlsyXSwKICAgICAgICAgICAgYjIxID0gQlszXSwKICAgICAgICAgICAgYjIyID0gQls0XSwKICAgICAgICAgICAgYjIzID0gQls1XSwKICAgICAgICAgICAgYjMxID0gQls2XSwKICAgICAgICAgICAgYjMyID0gQls3XSwKICAgICAgICAgICAgYjMzID0gQls4XTsKICAgICAgVFswXSA9IGExMSAqIGIxMSArIGExMiAqIGIyMSArIGExMyAqIGIzMTsKICAgICAgVFsxXSA9IGExMSAqIGIxMiArIGExMiAqIGIyMiArIGExMyAqIGIzMjsKICAgICAgVFsyXSA9IGExMSAqIGIxMyArIGExMiAqIGIyMyArIGExMyAqIGIzMzsKICAgICAgVFszXSA9IGEyMSAqIGIxMSArIGEyMiAqIGIyMSArIGEyMyAqIGIzMTsKICAgICAgVFs0XSA9IGEyMSAqIGIxMiArIGEyMiAqIGIyMiArIGEyMyAqIGIzMjsKICAgICAgVFs1XSA9IGEyMSAqIGIxMyArIGEyMiAqIGIyMyArIGEyMyAqIGIzMzsKICAgICAgVFs2XSA9IGEzMSAqIGIxMSArIGEzMiAqIGIyMSArIGEzMyAqIGIzMTsKICAgICAgVFs3XSA9IGEzMSAqIGIxMiArIGEzMiAqIGIyMiArIGEzMyAqIGIzMjsKICAgICAgVFs4XSA9IGEzMSAqIGIxMyArIGEzMiAqIGIyMyArIGEzMyAqIGIzMzsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogU2NhbGUgZWFjaCBjb2x1bW4gb2YgdGhlIG1hdHJpeAogICAgICovCgoKICAgIHNjYWxlKHZlY3RvciwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBNYXQzKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGUgPSB0aGlzLmVsZW1lbnRzOwogICAgICBjb25zdCB0ID0gdGFyZ2V0LmVsZW1lbnRzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDM7IGkrKykgewogICAgICAgIHRbMyAqIGkgKyAwXSA9IHZlY3Rvci54ICogZVszICogaSArIDBdOwogICAgICAgIHRbMyAqIGkgKyAxXSA9IHZlY3Rvci55ICogZVszICogaSArIDFdOwogICAgICAgIHRbMyAqIGkgKyAyXSA9IHZlY3Rvci56ICogZVszICogaSArIDJdOwogICAgICB9CgogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBTb2x2ZSBBeD1iCiAgICAgKiBAcGFyYW0gYiBUaGUgcmlnaHQgaGFuZCBzaWRlCiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLiBUYXJnZXQgdmVjdG9yIHRvIHNhdmUgaW4uCiAgICAgKiBAcmV0dXJuIFRoZSBzb2x1dGlvbiB4CiAgICAgKiBAdG9kbyBzaG91bGQgcmV1c2UgYXJyYXlzCiAgICAgKi8KCgogICAgc29sdmUoYiwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIC8vIENvbnN0cnVjdCBlcXVhdGlvbnMKICAgICAgY29uc3QgbnIgPSAzOyAvLyBudW0gcm93cwoKICAgICAgY29uc3QgbmMgPSA0OyAvLyBudW0gY29scwoKICAgICAgY29uc3QgZXFucyA9IFtdOwogICAgICBsZXQgaTsKICAgICAgbGV0IGo7CgogICAgICBmb3IgKGkgPSAwOyBpIDwgbnIgKiBuYzsgaSsrKSB7CiAgICAgICAgZXFucy5wdXNoKDApOwogICAgICB9CgogICAgICBmb3IgKGkgPSAwOyBpIDwgMzsgaSsrKSB7CiAgICAgICAgZm9yIChqID0gMDsgaiA8IDM7IGorKykgewogICAgICAgICAgZXFuc1tpICsgbmMgKiBqXSA9IHRoaXMuZWxlbWVudHNbaSArIDMgKiBqXTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGVxbnNbMyArIDQgKiAwXSA9IGIueDsKICAgICAgZXFuc1szICsgNCAqIDFdID0gYi55OwogICAgICBlcW5zWzMgKyA0ICogMl0gPSBiLno7IC8vIENvbXB1dGUgcmlnaHQgdXBwZXIgdHJpYW5ndWxhciB2ZXJzaW9uIG9mIHRoZSBtYXRyaXggLSBHYXVzcyBlbGltaW5hdGlvbgoKICAgICAgbGV0IG4gPSAzOwogICAgICBjb25zdCBrID0gbjsKICAgICAgbGV0IG5wOwogICAgICBjb25zdCBrcCA9IDQ7IC8vIG51bSByb3dzCgogICAgICBsZXQgcDsKCiAgICAgIGRvIHsKICAgICAgICBpID0gayAtIG47CgogICAgICAgIGlmIChlcW5zW2kgKyBuYyAqIGldID09PSAwKSB7CiAgICAgICAgICAvLyB0aGUgcGl2b3QgaXMgbnVsbCwgc3dhcCBsaW5lcwogICAgICAgICAgZm9yIChqID0gaSArIDE7IGogPCBrOyBqKyspIHsKICAgICAgICAgICAgaWYgKGVxbnNbaSArIG5jICogal0gIT09IDApIHsKICAgICAgICAgICAgICBucCA9IGtwOwoKICAgICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICAvLyBkbyBsaWduZSggaSApID0gbGlnbmUoIGkgKSArIGxpZ25lKCBrICkKICAgICAgICAgICAgICAgIHAgPSBrcCAtIG5wOwogICAgICAgICAgICAgICAgZXFuc1twICsgbmMgKiBpXSArPSBlcW5zW3AgKyBuYyAqIGpdOwogICAgICAgICAgICAgIH0gd2hpbGUgKC0tbnApOwoKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGVxbnNbaSArIG5jICogaV0gIT09IDApIHsKICAgICAgICAgIGZvciAoaiA9IGkgKyAxOyBqIDwgazsgaisrKSB7CiAgICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBlcW5zW2kgKyBuYyAqIGpdIC8gZXFuc1tpICsgbmMgKiBpXTsKICAgICAgICAgICAgbnAgPSBrcDsKCiAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAvLyBkbyBsaWduZSggayApID0gbGlnbmUoIGsgKSAtIG11bHRpcGxpZXIgKiBsaWduZSggaSApCiAgICAgICAgICAgICAgcCA9IGtwIC0gbnA7CiAgICAgICAgICAgICAgZXFuc1twICsgbmMgKiBqXSA9IHAgPD0gaSA/IDAgOiBlcW5zW3AgKyBuYyAqIGpdIC0gZXFuc1twICsgbmMgKiBpXSAqIG11bHRpcGxpZXI7CiAgICAgICAgICAgIH0gd2hpbGUgKC0tbnApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSB3aGlsZSAoLS1uKTsgLy8gR2V0IHRoZSBzb2x1dGlvbgoKCiAgICAgIHRhcmdldC56ID0gZXFuc1syICogbmMgKyAzXSAvIGVxbnNbMiAqIG5jICsgMl07CiAgICAgIHRhcmdldC55ID0gKGVxbnNbMSAqIG5jICsgM10gLSBlcW5zWzEgKiBuYyArIDJdICogdGFyZ2V0LnopIC8gZXFuc1sxICogbmMgKyAxXTsKICAgICAgdGFyZ2V0LnggPSAoZXFuc1swICogbmMgKyAzXSAtIGVxbnNbMCAqIG5jICsgMl0gKiB0YXJnZXQueiAtIGVxbnNbMCAqIG5jICsgMV0gKiB0YXJnZXQueSkgLyBlcW5zWzAgKiBuYyArIDBdOwoKICAgICAgaWYgKGlzTmFOKHRhcmdldC54KSB8fCBpc05hTih0YXJnZXQueSkgfHwgaXNOYU4odGFyZ2V0LnopIHx8IHRhcmdldC54ID09PSBJbmZpbml0eSB8fCB0YXJnZXQueSA9PT0gSW5maW5pdHkgfHwgdGFyZ2V0LnogPT09IEluZmluaXR5KSB7CiAgICAgICAgdGhyb3cgYENvdWxkIG5vdCBzb2x2ZSBlcXVhdGlvbiEgR290IHg9WyR7dGFyZ2V0LnRvU3RyaW5nKCl9XSwgYj1bJHtiLnRvU3RyaW5nKCl9XSwgQT1bJHt0aGlzLnRvU3RyaW5nKCl9XWA7CiAgICAgIH0KCiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBlbGVtZW50IGluIHRoZSBtYXRyaXggYnkgaW5kZXguIEluZGV4IHN0YXJ0cyBhdCAwLCBub3QgMSEhIQogICAgICogQHBhcmFtIHZhbHVlIElmIHByb3ZpZGVkLCB0aGUgbWF0cml4IGVsZW1lbnQgd2lsbCBiZSBzZXQgdG8gdGhpcyB2YWx1ZS4KICAgICAqLwoKCiAgICBlKHJvdywgY29sdW1uLCB2YWx1ZSkgewogICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRzW2NvbHVtbiArIDMgKiByb3ddOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIFNldCB2YWx1ZQogICAgICAgIHRoaXMuZWxlbWVudHNbY29sdW1uICsgMyAqIHJvd10gPSB2YWx1ZTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb3B5IGFub3RoZXIgbWF0cml4IGludG8gdGhpcyBtYXRyaXggb2JqZWN0LgogICAgICovCgoKICAgIGNvcHkobWF0cml4KSB7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF0cml4LmVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy5lbGVtZW50c1tpXSA9IG1hdHJpeC5lbGVtZW50c1tpXTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIG1hdHJpeC4KICAgICAqLwoKCiAgICB0b1N0cmluZygpIHsKICAgICAgbGV0IHIgPSAnJzsKICAgICAgY29uc3Qgc2VwID0gJywnOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA5OyBpKyspIHsKICAgICAgICByICs9IHRoaXMuZWxlbWVudHNbaV0gKyBzZXA7CiAgICAgIH0KCiAgICAgIHJldHVybiByOwogICAgfQogICAgLyoqCiAgICAgKiByZXZlcnNlIHRoZSBtYXRyaXgKICAgICAqIEBwYXJhbSB0YXJnZXQgVGFyZ2V0IG1hdHJpeCB0byBzYXZlIGluLgogICAgICogQHJldHVybiBUaGUgc29sdXRpb24geAogICAgICovCgoKICAgIHJldmVyc2UodGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBNYXQzKCk7CiAgICAgIH0KCiAgICAgIC8vIENvbnN0cnVjdCBlcXVhdGlvbnMKICAgICAgY29uc3QgbnIgPSAzOyAvLyBudW0gcm93cwoKICAgICAgY29uc3QgbmMgPSA2OyAvLyBudW0gY29scwoKICAgICAgY29uc3QgZXFucyA9IHJldmVyc2VfZXFuczsKICAgICAgbGV0IGk7CiAgICAgIGxldCBqOwoKICAgICAgZm9yIChpID0gMDsgaSA8IDM7IGkrKykgewogICAgICAgIGZvciAoaiA9IDA7IGogPCAzOyBqKyspIHsKICAgICAgICAgIGVxbnNbaSArIG5jICogal0gPSB0aGlzLmVsZW1lbnRzW2kgKyAzICogal07CiAgICAgICAgfQogICAgICB9CgogICAgICBlcW5zWzMgKyA2ICogMF0gPSAxOwogICAgICBlcW5zWzMgKyA2ICogMV0gPSAwOwogICAgICBlcW5zWzMgKyA2ICogMl0gPSAwOwogICAgICBlcW5zWzQgKyA2ICogMF0gPSAwOwogICAgICBlcW5zWzQgKyA2ICogMV0gPSAxOwogICAgICBlcW5zWzQgKyA2ICogMl0gPSAwOwogICAgICBlcW5zWzUgKyA2ICogMF0gPSAwOwogICAgICBlcW5zWzUgKyA2ICogMV0gPSAwOwogICAgICBlcW5zWzUgKyA2ICogMl0gPSAxOyAvLyBDb21wdXRlIHJpZ2h0IHVwcGVyIHRyaWFuZ3VsYXIgdmVyc2lvbiBvZiB0aGUgbWF0cml4IC0gR2F1c3MgZWxpbWluYXRpb24KCiAgICAgIGxldCBuID0gMzsKICAgICAgY29uc3QgayA9IG47CiAgICAgIGxldCBucDsKICAgICAgY29uc3Qga3AgPSBuYzsgLy8gbnVtIHJvd3MKCiAgICAgIGxldCBwOwoKICAgICAgZG8gewogICAgICAgIGkgPSBrIC0gbjsKCiAgICAgICAgaWYgKGVxbnNbaSArIG5jICogaV0gPT09IDApIHsKICAgICAgICAgIC8vIHRoZSBwaXZvdCBpcyBudWxsLCBzd2FwIGxpbmVzCiAgICAgICAgICBmb3IgKGogPSBpICsgMTsgaiA8IGs7IGorKykgewogICAgICAgICAgICBpZiAoZXFuc1tpICsgbmMgKiBqXSAhPT0gMCkgewogICAgICAgICAgICAgIG5wID0ga3A7CgogICAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgIC8vIGRvIGxpbmUoIGkgKSA9IGxpbmUoIGkgKSArIGxpbmUoIGsgKQogICAgICAgICAgICAgICAgcCA9IGtwIC0gbnA7CiAgICAgICAgICAgICAgICBlcW5zW3AgKyBuYyAqIGldICs9IGVxbnNbcCArIG5jICogal07CiAgICAgICAgICAgICAgfSB3aGlsZSAoLS1ucCk7CgogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoZXFuc1tpICsgbmMgKiBpXSAhPT0gMCkgewogICAgICAgICAgZm9yIChqID0gaSArIDE7IGogPCBrOyBqKyspIHsKICAgICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGVxbnNbaSArIG5jICogal0gLyBlcW5zW2kgKyBuYyAqIGldOwogICAgICAgICAgICBucCA9IGtwOwoKICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgIC8vIGRvIGxpbmUoIGsgKSA9IGxpbmUoIGsgKSAtIG11bHRpcGxpZXIgKiBsaW5lKCBpICkKICAgICAgICAgICAgICBwID0ga3AgLSBucDsKICAgICAgICAgICAgICBlcW5zW3AgKyBuYyAqIGpdID0gcCA8PSBpID8gMCA6IGVxbnNbcCArIG5jICogal0gLSBlcW5zW3AgKyBuYyAqIGldICogbXVsdGlwbGllcjsKICAgICAgICAgICAgfSB3aGlsZSAoLS1ucCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IHdoaWxlICgtLW4pOyAvLyBlbGltaW5hdGUgdGhlIHVwcGVyIGxlZnQgdHJpYW5nbGUgb2YgdGhlIG1hdHJpeAoKCiAgICAgIGkgPSAyOwoKICAgICAgZG8gewogICAgICAgIGogPSBpIC0gMTsKCiAgICAgICAgZG8gewogICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGVxbnNbaSArIG5jICogal0gLyBlcW5zW2kgKyBuYyAqIGldOwogICAgICAgICAgbnAgPSBuYzsKCiAgICAgICAgICBkbyB7CiAgICAgICAgICAgIHAgPSBuYyAtIG5wOwogICAgICAgICAgICBlcW5zW3AgKyBuYyAqIGpdID0gZXFuc1twICsgbmMgKiBqXSAtIGVxbnNbcCArIG5jICogaV0gKiBtdWx0aXBsaWVyOwogICAgICAgICAgfSB3aGlsZSAoLS1ucCk7CiAgICAgICAgfSB3aGlsZSAoai0tKTsKICAgICAgfSB3aGlsZSAoLS1pKTsgLy8gb3BlcmF0aW9ucyBvbiB0aGUgZGlhZ29uYWwKCgogICAgICBpID0gMjsKCiAgICAgIGRvIHsKICAgICAgICBjb25zdCBtdWx0aXBsaWVyID0gMSAvIGVxbnNbaSArIG5jICogaV07CiAgICAgICAgbnAgPSBuYzsKCiAgICAgICAgZG8gewogICAgICAgICAgcCA9IG5jIC0gbnA7CiAgICAgICAgICBlcW5zW3AgKyBuYyAqIGldID0gZXFuc1twICsgbmMgKiBpXSAqIG11bHRpcGxpZXI7CiAgICAgICAgfSB3aGlsZSAoLS1ucCk7CiAgICAgIH0gd2hpbGUgKGktLSk7CgogICAgICBpID0gMjsKCiAgICAgIGRvIHsKICAgICAgICBqID0gMjsKCiAgICAgICAgZG8gewogICAgICAgICAgcCA9IGVxbnNbbnIgKyBqICsgbmMgKiBpXTsKCiAgICAgICAgICBpZiAoaXNOYU4ocCkgfHwgcCA9PT0gSW5maW5pdHkpIHsKICAgICAgICAgICAgdGhyb3cgYENvdWxkIG5vdCByZXZlcnNlISBBPVske3RoaXMudG9TdHJpbmcoKX1dYDsKICAgICAgICAgIH0KCiAgICAgICAgICB0YXJnZXQuZShpLCBqLCBwKTsKICAgICAgICB9IHdoaWxlIChqLS0pOwogICAgICB9IHdoaWxlIChpLS0pOwoKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSBtYXRyaXggZnJvbSBhIHF1YXRlcmlvbgogICAgICovCgoKICAgIHNldFJvdGF0aW9uRnJvbVF1YXRlcm5pb24ocSkgewogICAgICBjb25zdCB4ID0gcS54OwogICAgICBjb25zdCB5ID0gcS55OwogICAgICBjb25zdCB6ID0gcS56OwogICAgICBjb25zdCB3ID0gcS53OwogICAgICBjb25zdCB4MiA9IHggKyB4OwogICAgICBjb25zdCB5MiA9IHkgKyB5OwogICAgICBjb25zdCB6MiA9IHogKyB6OwogICAgICBjb25zdCB4eCA9IHggKiB4MjsKICAgICAgY29uc3QgeHkgPSB4ICogeTI7CiAgICAgIGNvbnN0IHh6ID0geCAqIHoyOwogICAgICBjb25zdCB5eSA9IHkgKiB5MjsKICAgICAgY29uc3QgeXogPSB5ICogejI7CiAgICAgIGNvbnN0IHp6ID0geiAqIHoyOwogICAgICBjb25zdCB3eCA9IHcgKiB4MjsKICAgICAgY29uc3Qgd3kgPSB3ICogeTI7CiAgICAgIGNvbnN0IHd6ID0gdyAqIHoyOwogICAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50czsKICAgICAgZVszICogMCArIDBdID0gMSAtICh5eSArIHp6KTsKICAgICAgZVszICogMCArIDFdID0geHkgLSB3ejsKICAgICAgZVszICogMCArIDJdID0geHogKyB3eTsKICAgICAgZVszICogMSArIDBdID0geHkgKyB3ejsKICAgICAgZVszICogMSArIDFdID0gMSAtICh4eCArIHp6KTsKICAgICAgZVszICogMSArIDJdID0geXogLSB3eDsKICAgICAgZVszICogMiArIDBdID0geHogLSB3eTsKICAgICAgZVszICogMiArIDFdID0geXogKyB3eDsKICAgICAgZVszICogMiArIDJdID0gMSAtICh4eCArIHl5KTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIFRyYW5zcG9zZSB0aGUgbWF0cml4CiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLiBXaGVyZSB0byBzdG9yZSB0aGUgcmVzdWx0LgogICAgICogQHJldHVybiBUaGUgdGFyZ2V0IE1hdDMsIG9yIGEgbmV3IE1hdDMgaWYgdGFyZ2V0IHdhcyBvbWl0dGVkLgogICAgICovCgoKICAgIHRyYW5zcG9zZSh0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IE1hdDMoKTsKICAgICAgfQoKICAgICAgY29uc3QgTSA9IHRoaXMuZWxlbWVudHM7CiAgICAgIGNvbnN0IFQgPSB0YXJnZXQuZWxlbWVudHM7CiAgICAgIGxldCB0bXA7IC8vU2V0IGRpYWdvbmFscwoKICAgICAgVFswXSA9IE1bMF07CiAgICAgIFRbNF0gPSBNWzRdOwogICAgICBUWzhdID0gTVs4XTsKICAgICAgdG1wID0gTVsxXTsKICAgICAgVFsxXSA9IE1bM107CiAgICAgIFRbM10gPSB0bXA7CiAgICAgIHRtcCA9IE1bMl07CiAgICAgIFRbMl0gPSBNWzZdOwogICAgICBUWzZdID0gdG1wOwogICAgICB0bXAgPSBNWzVdOwogICAgICBUWzVdID0gTVs3XTsKICAgICAgVFs3XSA9IHRtcDsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KCiAgfQogIGNvbnN0IHJldmVyc2VfZXFucyA9IFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXTsKCiAgLyoqCiAgICogMy1kaW1lbnNpb25hbCB2ZWN0b3IKICAgKiBAZXhhbXBsZQogICAqICAgICBjb25zdCB2ID0gbmV3IFZlYzMoMSwgMiwgMykKICAgKiAgICAgY29uc29sZS5sb2coJ3g9JyArIHYueCkgLy8geD0xCiAgICovCgogIGNsYXNzIFZlYzMgewogICAgY29uc3RydWN0b3IoeCwgeSwgeikgewogICAgICBpZiAoeCA9PT0gdm9pZCAwKSB7CiAgICAgICAgeCA9IDAuMDsKICAgICAgfQoKICAgICAgaWYgKHkgPT09IHZvaWQgMCkgewogICAgICAgIHkgPSAwLjA7CiAgICAgIH0KCiAgICAgIGlmICh6ID09PSB2b2lkIDApIHsKICAgICAgICB6ID0gMC4wOwogICAgICB9CgogICAgICB0aGlzLnggPSB4OwogICAgICB0aGlzLnkgPSB5OwogICAgICB0aGlzLnogPSB6OwogICAgfQogICAgLyoqCiAgICAgKiBWZWN0b3IgY3Jvc3MgcHJvZHVjdAogICAgICogQHBhcmFtIHRhcmdldCBPcHRpb25hbCB0YXJnZXQgdG8gc2F2ZSBpbi4KICAgICAqLwoKCiAgICBjcm9zcyh2ZWN0b3IsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCB2eCA9IHZlY3Rvci54OwogICAgICBjb25zdCB2eSA9IHZlY3Rvci55OwogICAgICBjb25zdCB2eiA9IHZlY3Rvci56OwogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICB0YXJnZXQueCA9IHkgKiB2eiAtIHogKiB2eTsKICAgICAgdGFyZ2V0LnkgPSB6ICogdnggLSB4ICogdno7CiAgICAgIHRhcmdldC56ID0geCAqIHZ5IC0geSAqIHZ4OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIHZlY3RvcnMnIDMgZWxlbWVudHMKICAgICAqLwoKCiAgICBzZXQoeCwgeSwgeikgewogICAgICB0aGlzLnggPSB4OwogICAgICB0aGlzLnkgPSB5OwogICAgICB0aGlzLnogPSB6OwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogU2V0IGFsbCBjb21wb25lbnRzIG9mIHRoZSB2ZWN0b3IgdG8gemVyby4KICAgICAqLwoKCiAgICBzZXRaZXJvKCkgewogICAgICB0aGlzLnggPSB0aGlzLnkgPSB0aGlzLnogPSAwOwogICAgfQogICAgLyoqCiAgICAgKiBWZWN0b3IgYWRkaXRpb24KICAgICAqLwoKCiAgICB2YWRkKHZlY3RvciwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQpIHsKICAgICAgICB0YXJnZXQueCA9IHZlY3Rvci54ICsgdGhpcy54OwogICAgICAgIHRhcmdldC55ID0gdmVjdG9yLnkgKyB0aGlzLnk7CiAgICAgICAgdGFyZ2V0LnogPSB2ZWN0b3IueiArIHRoaXMuejsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbmV3IFZlYzModGhpcy54ICsgdmVjdG9yLngsIHRoaXMueSArIHZlY3Rvci55LCB0aGlzLnogKyB2ZWN0b3Iueik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVmVjdG9yIHN1YnRyYWN0aW9uCiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsIHRhcmdldCB0byBzYXZlIGluLgogICAgICovCgoKICAgIHZzdWIodmVjdG9yLCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCkgewogICAgICAgIHRhcmdldC54ID0gdGhpcy54IC0gdmVjdG9yLng7CiAgICAgICAgdGFyZ2V0LnkgPSB0aGlzLnkgLSB2ZWN0b3IueTsKICAgICAgICB0YXJnZXQueiA9IHRoaXMueiAtIHZlY3Rvci56OwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBuZXcgVmVjMyh0aGlzLnggLSB2ZWN0b3IueCwgdGhpcy55IC0gdmVjdG9yLnksIHRoaXMueiAtIHZlY3Rvci56KTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGNyb3NzIHByb2R1Y3QgbWF0cml4IGFfY3Jvc3MgZnJvbSBhIHZlY3Rvciwgc3VjaCB0aGF0IGEgeCBiID0gYV9jcm9zcyAqIGIgPSBjCiAgICAgKgogICAgICogU2VlIHtAbGluayBodHRwczovL3d3dzguY3MudW11LnNlL2t1cnNlci9UREJEMjQvVlQwNi9sZWN0dXJlcy9MZWN0dXJlNi5wZGYgVW1lw6UgVW5pdmVyc2l0eSBMZWN0dXJlfQogICAgICovCgoKICAgIGNyb3NzbWF0KCkgewogICAgICByZXR1cm4gbmV3IE1hdDMoWzAsIC10aGlzLnosIHRoaXMueSwgdGhpcy56LCAwLCAtdGhpcy54LCAtdGhpcy55LCB0aGlzLngsIDBdKTsKICAgIH0KICAgIC8qKgogICAgICogTm9ybWFsaXplIHRoZSB2ZWN0b3IuIE5vdGUgdGhhdCB0aGlzIGNoYW5nZXMgdGhlIHZhbHVlcyBpbiB0aGUgdmVjdG9yLgogICAgICAqIEByZXR1cm4gUmV0dXJucyB0aGUgbm9ybSBvZiB0aGUgdmVjdG9yCiAgICAgKi8KCgogICAgbm9ybWFsaXplKCkgewogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICBjb25zdCBuID0gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkgKyB6ICogeik7CgogICAgICBpZiAobiA+IDAuMCkgewogICAgICAgIGNvbnN0IGludk4gPSAxIC8gbjsKICAgICAgICB0aGlzLnggKj0gaW52TjsKICAgICAgICB0aGlzLnkgKj0gaW52TjsKICAgICAgICB0aGlzLnogKj0gaW52TjsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBNYWtlIHNvbWV0aGluZyB1cAogICAgICAgIHRoaXMueCA9IDA7CiAgICAgICAgdGhpcy55ID0gMDsKICAgICAgICB0aGlzLnogPSAwOwogICAgICB9CgogICAgICByZXR1cm4gbjsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSB2ZXJzaW9uIG9mIHRoaXMgdmVjdG9yIHRoYXQgaXMgb2YgbGVuZ3RoIDEuCiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsIHRhcmdldCB0byBzYXZlIGluCiAgICAgKiBAcmV0dXJuIFJldHVybnMgdGhlIHVuaXQgdmVjdG9yCiAgICAgKi8KCgogICAgdW5pdCh0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgY29uc3QgeCA9IHRoaXMueDsKICAgICAgY29uc3QgeSA9IHRoaXMueTsKICAgICAgY29uc3QgeiA9IHRoaXMuejsKICAgICAgbGV0IG5pbnYgPSBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6KTsKCiAgICAgIGlmIChuaW52ID4gMC4wKSB7CiAgICAgICAgbmludiA9IDEuMCAvIG5pbnY7CiAgICAgICAgdGFyZ2V0LnggPSB4ICogbmludjsKICAgICAgICB0YXJnZXQueSA9IHkgKiBuaW52OwogICAgICAgIHRhcmdldC56ID0geiAqIG5pbnY7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGFyZ2V0LnggPSAxOwogICAgICAgIHRhcmdldC55ID0gMDsKICAgICAgICB0YXJnZXQueiA9IDA7CiAgICAgIH0KCiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgbGVuZ3RoIG9mIHRoZSB2ZWN0b3IKICAgICAqLwoKCiAgICBsZW5ndGgoKSB7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIHJldHVybiBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6KTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBzcXVhcmVkIGxlbmd0aCBvZiB0aGUgdmVjdG9yLgogICAgICovCgoKICAgIGxlbmd0aFNxdWFyZWQoKSB7CiAgICAgIHJldHVybiB0aGlzLmRvdCh0aGlzKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGRpc3RhbmNlIGZyb20gdGhpcyBwb2ludCB0byBhbm90aGVyIHBvaW50CiAgICAgKi8KCgogICAgZGlzdGFuY2VUbyhwKSB7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIGNvbnN0IHB4ID0gcC54OwogICAgICBjb25zdCBweSA9IHAueTsKICAgICAgY29uc3QgcHogPSBwLno7CiAgICAgIHJldHVybiBNYXRoLnNxcnQoKHB4IC0geCkgKiAocHggLSB4KSArIChweSAtIHkpICogKHB5IC0geSkgKyAocHogLSB6KSAqIChweiAtIHopKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHNxdWFyZWQgZGlzdGFuY2UgZnJvbSB0aGlzIHBvaW50IHRvIGFub3RoZXIgcG9pbnQKICAgICAqLwoKCiAgICBkaXN0YW5jZVNxdWFyZWQocCkgewogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICBjb25zdCBweCA9IHAueDsKICAgICAgY29uc3QgcHkgPSBwLnk7CiAgICAgIGNvbnN0IHB6ID0gcC56OwogICAgICByZXR1cm4gKHB4IC0geCkgKiAocHggLSB4KSArIChweSAtIHkpICogKHB5IC0geSkgKyAocHogLSB6KSAqIChweiAtIHopOwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSBhbGwgdGhlIGNvbXBvbmVudHMgb2YgdGhlIHZlY3RvciB3aXRoIGEgc2NhbGFyLgogICAgICogQHBhcmFtIHRhcmdldCBUaGUgdmVjdG9yIHRvIHNhdmUgdGhlIHJlc3VsdCBpbi4KICAgICAqLwoKCiAgICBzY2FsZShzY2FsYXIsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICB0YXJnZXQueCA9IHNjYWxhciAqIHg7CiAgICAgIHRhcmdldC55ID0gc2NhbGFyICogeTsKICAgICAgdGFyZ2V0LnogPSBzY2FsYXIgKiB6OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSB0aGUgdmVjdG9yIHdpdGggYW4gb3RoZXIgdmVjdG9yLCBjb21wb25lbnQtd2lzZS4KICAgICAqIEBwYXJhbSB0YXJnZXQgVGhlIHZlY3RvciB0byBzYXZlIHRoZSByZXN1bHQgaW4uCiAgICAgKi8KCgogICAgdm11bCh2ZWN0b3IsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0YXJnZXQueCA9IHZlY3Rvci54ICogdGhpcy54OwogICAgICB0YXJnZXQueSA9IHZlY3Rvci55ICogdGhpcy55OwogICAgICB0YXJnZXQueiA9IHZlY3Rvci56ICogdGhpcy56OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBTY2FsZSBhIHZlY3RvciBhbmQgYWRkIGl0IHRvIHRoaXMgdmVjdG9yLiBTYXZlIHRoZSByZXN1bHQgaW4gInRhcmdldCIuICh0YXJnZXQgPSB0aGlzICsgdmVjdG9yICogc2NhbGFyKQogICAgICogQHBhcmFtIHRhcmdldCBUaGUgdmVjdG9yIHRvIHNhdmUgdGhlIHJlc3VsdCBpbi4KICAgICAqLwoKCiAgICBhZGRTY2FsZWRWZWN0b3Ioc2NhbGFyLCB2ZWN0b3IsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0YXJnZXQueCA9IHRoaXMueCArIHNjYWxhciAqIHZlY3Rvci54OwogICAgICB0YXJnZXQueSA9IHRoaXMueSArIHNjYWxhciAqIHZlY3Rvci55OwogICAgICB0YXJnZXQueiA9IHRoaXMueiArIHNjYWxhciAqIHZlY3Rvci56OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBDYWxjdWxhdGUgZG90IHByb2R1Y3QKICAgICAqIEBwYXJhbSB2ZWN0b3IKICAgICAqLwoKCiAgICBkb3QodmVjdG9yKSB7CiAgICAgIHJldHVybiB0aGlzLnggKiB2ZWN0b3IueCArIHRoaXMueSAqIHZlY3Rvci55ICsgdGhpcy56ICogdmVjdG9yLno7CiAgICB9CgogICAgaXNaZXJvKCkgewogICAgICByZXR1cm4gdGhpcy54ID09PSAwICYmIHRoaXMueSA9PT0gMCAmJiB0aGlzLnogPT09IDA7CiAgICB9CiAgICAvKioKICAgICAqIE1ha2UgdGhlIHZlY3RvciBwb2ludCBpbiB0aGUgb3Bwb3NpdGUgZGlyZWN0aW9uLgogICAgICogQHBhcmFtIHRhcmdldCBPcHRpb25hbCB0YXJnZXQgdG8gc2F2ZSBpbgogICAgICovCgoKICAgIG5lZ2F0ZSh0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnggPSAtdGhpcy54OwogICAgICB0YXJnZXQueSA9IC10aGlzLnk7CiAgICAgIHRhcmdldC56ID0gLXRoaXMuejsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0d28gYXJ0aWZpY2lhbCB0YW5nZW50cyB0byB0aGUgdmVjdG9yCiAgICAgKiBAcGFyYW0gdDEgVmVjdG9yIG9iamVjdCB0byBzYXZlIHRoZSBmaXJzdCB0YW5nZW50IGluCiAgICAgKiBAcGFyYW0gdDIgVmVjdG9yIG9iamVjdCB0byBzYXZlIHRoZSBzZWNvbmQgdGFuZ2VudCBpbgogICAgICovCgoKICAgIHRhbmdlbnRzKHQxLCB0MikgewogICAgICBjb25zdCBub3JtID0gdGhpcy5sZW5ndGgoKTsKCiAgICAgIGlmIChub3JtID4gMC4wKSB7CiAgICAgICAgY29uc3QgbiA9IFZlYzNfdGFuZ2VudHNfbjsKICAgICAgICBjb25zdCBpbm9ybSA9IDEgLyBub3JtOwogICAgICAgIG4uc2V0KHRoaXMueCAqIGlub3JtLCB0aGlzLnkgKiBpbm9ybSwgdGhpcy56ICogaW5vcm0pOwogICAgICAgIGNvbnN0IHJhbmRWZWMgPSBWZWMzX3RhbmdlbnRzX3JhbmRWZWM7CgogICAgICAgIGlmIChNYXRoLmFicyhuLngpIDwgMC45KSB7CiAgICAgICAgICByYW5kVmVjLnNldCgxLCAwLCAwKTsKICAgICAgICAgIG4uY3Jvc3MocmFuZFZlYywgdDEpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByYW5kVmVjLnNldCgwLCAxLCAwKTsKICAgICAgICAgIG4uY3Jvc3MocmFuZFZlYywgdDEpOwogICAgICAgIH0KCiAgICAgICAgbi5jcm9zcyh0MSwgdDIpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIFRoZSBub3JtYWwgbGVuZ3RoIGlzIHplcm8sIG1ha2Ugc29tZXRoaW5nIHVwCiAgICAgICAgdDEuc2V0KDEsIDAsIDApOwogICAgICAgIHQyLnNldCgwLCAxLCAwKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0cyB0byBhIG1vcmUgcmVhZGFibGUgZm9ybWF0CiAgICAgKi8KCgogICAgdG9TdHJpbmcoKSB7CiAgICAgIHJldHVybiBgJHt0aGlzLnh9LCR7dGhpcy55fSwke3RoaXMuen1gOwogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0cyB0byBhbiBhcnJheQogICAgICovCgoKICAgIHRvQXJyYXkoKSB7CiAgICAgIHJldHVybiBbdGhpcy54LCB0aGlzLnksIHRoaXMuel07CiAgICB9CiAgICAvKioKICAgICAqIENvcGllcyB2YWx1ZSBvZiBzb3VyY2UgdG8gdGhpcyB2ZWN0b3IuCiAgICAgKi8KCgogICAgY29weSh2ZWN0b3IpIHsKICAgICAgdGhpcy54ID0gdmVjdG9yLng7CiAgICAgIHRoaXMueSA9IHZlY3Rvci55OwogICAgICB0aGlzLnogPSB2ZWN0b3IuejsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIERvIGEgbGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiB0d28gdmVjdG9ycwogICAgICogQHBhcmFtIHQgQSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxLiAwIHdpbGwgbWFrZSB0aGlzIGZ1bmN0aW9uIHJldHVybiB1LCBhbmQgMSB3aWxsIG1ha2UgaXQgcmV0dXJuIHYuIE51bWJlcnMgaW4gYmV0d2VlbiB3aWxsIGdlbmVyYXRlIGEgdmVjdG9yIGluIGJldHdlZW4gdGhlbS4KICAgICAqLwoKCiAgICBsZXJwKHZlY3RvciwgdCwgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIHRhcmdldC54ID0geCArICh2ZWN0b3IueCAtIHgpICogdDsKICAgICAgdGFyZ2V0LnkgPSB5ICsgKHZlY3Rvci55IC0geSkgKiB0OwogICAgICB0YXJnZXQueiA9IHogKyAodmVjdG9yLnogLSB6KSAqIHQ7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIGEgdmVjdG9yIGVxdWFscyBpcyBhbG1vc3QgZXF1YWwgdG8gYW5vdGhlciBvbmUuCiAgICAgKi8KCgogICAgYWxtb3N0RXF1YWxzKHZlY3RvciwgcHJlY2lzaW9uKSB7CiAgICAgIGlmIChwcmVjaXNpb24gPT09IHZvaWQgMCkgewogICAgICAgIHByZWNpc2lvbiA9IDFlLTY7CiAgICAgIH0KCiAgICAgIGlmIChNYXRoLmFicyh0aGlzLnggLSB2ZWN0b3IueCkgPiBwcmVjaXNpb24gfHwgTWF0aC5hYnModGhpcy55IC0gdmVjdG9yLnkpID4gcHJlY2lzaW9uIHx8IE1hdGguYWJzKHRoaXMueiAtIHZlY3Rvci56KSA+IHByZWNpc2lvbikgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIGEgdmVjdG9yIGlzIGFsbW9zdCB6ZXJvCiAgICAgKi8KCgogICAgYWxtb3N0WmVybyhwcmVjaXNpb24pIHsKICAgICAgaWYgKHByZWNpc2lvbiA9PT0gdm9pZCAwKSB7CiAgICAgICAgcHJlY2lzaW9uID0gMWUtNjsKICAgICAgfQoKICAgICAgaWYgKE1hdGguYWJzKHRoaXMueCkgPiBwcmVjaXNpb24gfHwgTWF0aC5hYnModGhpcy55KSA+IHByZWNpc2lvbiB8fCBNYXRoLmFicyh0aGlzLnopID4gcHJlY2lzaW9uKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgdGhlIHZlY3RvciBpcyBhbnRpLXBhcmFsbGVsIHRvIGFub3RoZXIgdmVjdG9yLgogICAgICogQHBhcmFtIHByZWNpc2lvbiBTZXQgdG8gemVybyBmb3IgZXhhY3QgY29tcGFyaXNvbnMKICAgICAqLwoKCiAgICBpc0FudGlwYXJhbGxlbFRvKHZlY3RvciwgcHJlY2lzaW9uKSB7CiAgICAgIHRoaXMubmVnYXRlKGFudGlwX25lZyk7CiAgICAgIHJldHVybiBhbnRpcF9uZWcuYWxtb3N0RXF1YWxzKHZlY3RvciwgcHJlY2lzaW9uKTsKICAgIH0KICAgIC8qKgogICAgICogQ2xvbmUgdGhlIHZlY3RvcgogICAgICovCgoKICAgIGNsb25lKCkgewogICAgICByZXR1cm4gbmV3IFZlYzModGhpcy54LCB0aGlzLnksIHRoaXMueik7CiAgICB9CgogIH0KICBWZWMzLlpFUk8gPSBuZXcgVmVjMygwLCAwLCAwKTsKICBWZWMzLlVOSVRfWCA9IG5ldyBWZWMzKDEsIDAsIDApOwogIFZlYzMuVU5JVF9ZID0gbmV3IFZlYzMoMCwgMSwgMCk7CiAgVmVjMy5VTklUX1ogPSBuZXcgVmVjMygwLCAwLCAxKTsKICBjb25zdCBWZWMzX3RhbmdlbnRzX24gPSBuZXcgVmVjMygpOwogIGNvbnN0IFZlYzNfdGFuZ2VudHNfcmFuZFZlYyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYW50aXBfbmVnID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogQXhpcyBhbGlnbmVkIGJvdW5kaW5nIGJveCBjbGFzcy4KICAgKi8KICBjbGFzcyBBQUJCIHsKICAgIC8qKgogICAgICogVGhlIGxvd2VyIGJvdW5kIG9mIHRoZSBib3VuZGluZyBib3gKICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIHVwcGVyIGJvdW5kIG9mIHRoZSBib3VuZGluZyBib3gKICAgICAqLwogICAgY29uc3RydWN0b3Iob3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICB0aGlzLmxvd2VyQm91bmQgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnVwcGVyQm91bmQgPSBuZXcgVmVjMygpOwoKICAgICAgaWYgKG9wdGlvbnMubG93ZXJCb3VuZCkgewogICAgICAgIHRoaXMubG93ZXJCb3VuZC5jb3B5KG9wdGlvbnMubG93ZXJCb3VuZCk7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLnVwcGVyQm91bmQpIHsKICAgICAgICB0aGlzLnVwcGVyQm91bmQuY29weShvcHRpb25zLnVwcGVyQm91bmQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgQUFCQiBib3VuZHMgZnJvbSBhIHNldCBvZiBwb2ludHMuCiAgICAgKiBAcGFyYW0gcG9pbnRzIEFuIGFycmF5IG9mIFZlYzMncy4KICAgICAqIEByZXR1cm4gVGhlIHNlbGYgb2JqZWN0CiAgICAgKi8KCgogICAgc2V0RnJvbVBvaW50cyhwb2ludHMsIHBvc2l0aW9uLCBxdWF0ZXJuaW9uLCBza2luU2l6ZSkgewogICAgICBjb25zdCBsID0gdGhpcy5sb3dlckJvdW5kOwogICAgICBjb25zdCB1ID0gdGhpcy51cHBlckJvdW5kOwogICAgICBjb25zdCBxID0gcXVhdGVybmlvbjsgLy8gU2V0IHRvIHRoZSBmaXJzdCBwb2ludAoKICAgICAgbC5jb3B5KHBvaW50c1swXSk7CgogICAgICBpZiAocSkgewogICAgICAgIHEudm11bHQobCwgbCk7CiAgICAgIH0KCiAgICAgIHUuY29weShsKTsKCiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgbGV0IHAgPSBwb2ludHNbaV07CgogICAgICAgIGlmIChxKSB7CiAgICAgICAgICBxLnZtdWx0KHAsIHRtcCQxKTsKICAgICAgICAgIHAgPSB0bXAkMTsKICAgICAgICB9CgogICAgICAgIGlmIChwLnggPiB1LngpIHsKICAgICAgICAgIHUueCA9IHAueDsKICAgICAgICB9CgogICAgICAgIGlmIChwLnggPCBsLngpIHsKICAgICAgICAgIGwueCA9IHAueDsKICAgICAgICB9CgogICAgICAgIGlmIChwLnkgPiB1LnkpIHsKICAgICAgICAgIHUueSA9IHAueTsKICAgICAgICB9CgogICAgICAgIGlmIChwLnkgPCBsLnkpIHsKICAgICAgICAgIGwueSA9IHAueTsKICAgICAgICB9CgogICAgICAgIGlmIChwLnogPiB1LnopIHsKICAgICAgICAgIHUueiA9IHAuejsKICAgICAgICB9CgogICAgICAgIGlmIChwLnogPCBsLnopIHsKICAgICAgICAgIGwueiA9IHAuejsKICAgICAgICB9CiAgICAgIH0gLy8gQWRkIG9mZnNldAoKCiAgICAgIGlmIChwb3NpdGlvbikgewogICAgICAgIHBvc2l0aW9uLnZhZGQobCwgbCk7CiAgICAgICAgcG9zaXRpb24udmFkZCh1LCB1KTsKICAgICAgfQoKICAgICAgaWYgKHNraW5TaXplKSB7CiAgICAgICAgbC54IC09IHNraW5TaXplOwogICAgICAgIGwueSAtPSBza2luU2l6ZTsKICAgICAgICBsLnogLT0gc2tpblNpemU7CiAgICAgICAgdS54ICs9IHNraW5TaXplOwogICAgICAgIHUueSArPSBza2luU2l6ZTsKICAgICAgICB1LnogKz0gc2tpblNpemU7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBDb3B5IGJvdW5kcyBmcm9tIGFuIEFBQkIgdG8gdGhpcyBBQUJCCiAgICAgKiBAcGFyYW0gYWFiYiBTb3VyY2UgdG8gY29weSBmcm9tCiAgICAgKiBAcmV0dXJuIFRoZSB0aGlzIG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eQogICAgICovCgoKICAgIGNvcHkoYWFiYikgewogICAgICB0aGlzLmxvd2VyQm91bmQuY29weShhYWJiLmxvd2VyQm91bmQpOwogICAgICB0aGlzLnVwcGVyQm91bmQuY29weShhYWJiLnVwcGVyQm91bmQpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogQ2xvbmUgYW4gQUFCQgogICAgICovCgoKICAgIGNsb25lKCkgewogICAgICByZXR1cm4gbmV3IEFBQkIoKS5jb3B5KHRoaXMpOwogICAgfQogICAgLyoqCiAgICAgKiBFeHRlbmQgdGhpcyBBQUJCIHNvIHRoYXQgaXQgY292ZXJzIHRoZSBnaXZlbiBBQUJCIHRvby4KICAgICAqLwoKCiAgICBleHRlbmQoYWFiYikgewogICAgICB0aGlzLmxvd2VyQm91bmQueCA9IE1hdGgubWluKHRoaXMubG93ZXJCb3VuZC54LCBhYWJiLmxvd2VyQm91bmQueCk7CiAgICAgIHRoaXMudXBwZXJCb3VuZC54ID0gTWF0aC5tYXgodGhpcy51cHBlckJvdW5kLngsIGFhYmIudXBwZXJCb3VuZC54KTsKICAgICAgdGhpcy5sb3dlckJvdW5kLnkgPSBNYXRoLm1pbih0aGlzLmxvd2VyQm91bmQueSwgYWFiYi5sb3dlckJvdW5kLnkpOwogICAgICB0aGlzLnVwcGVyQm91bmQueSA9IE1hdGgubWF4KHRoaXMudXBwZXJCb3VuZC55LCBhYWJiLnVwcGVyQm91bmQueSk7CiAgICAgIHRoaXMubG93ZXJCb3VuZC56ID0gTWF0aC5taW4odGhpcy5sb3dlckJvdW5kLnosIGFhYmIubG93ZXJCb3VuZC56KTsKICAgICAgdGhpcy51cHBlckJvdW5kLnogPSBNYXRoLm1heCh0aGlzLnVwcGVyQm91bmQueiwgYWFiYi51cHBlckJvdW5kLnopOwogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIEFBQkIgb3ZlcmxhcHMgdGhpcyBBQUJCLgogICAgICovCgoKICAgIG92ZXJsYXBzKGFhYmIpIHsKICAgICAgY29uc3QgbDEgPSB0aGlzLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUxID0gdGhpcy51cHBlckJvdW5kOwogICAgICBjb25zdCBsMiA9IGFhYmIubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdTIgPSBhYWJiLnVwcGVyQm91bmQ7IC8vICAgICAgbDIgICAgICAgIHUyCiAgICAgIC8vICAgICAgfC0tLS0tLS0tLXwKICAgICAgLy8gfC0tLS0tLS0tfAogICAgICAvLyBsMSAgICAgICB1MQoKICAgICAgY29uc3Qgb3ZlcmxhcHNYID0gbDIueCA8PSB1MS54ICYmIHUxLnggPD0gdTIueCB8fCBsMS54IDw9IHUyLnggJiYgdTIueCA8PSB1MS54OwogICAgICBjb25zdCBvdmVybGFwc1kgPSBsMi55IDw9IHUxLnkgJiYgdTEueSA8PSB1Mi55IHx8IGwxLnkgPD0gdTIueSAmJiB1Mi55IDw9IHUxLnk7CiAgICAgIGNvbnN0IG92ZXJsYXBzWiA9IGwyLnogPD0gdTEueiAmJiB1MS56IDw9IHUyLnogfHwgbDEueiA8PSB1Mi56ICYmIHUyLnogPD0gdTEuejsKICAgICAgcmV0dXJuIG92ZXJsYXBzWCAmJiBvdmVybGFwc1kgJiYgb3ZlcmxhcHNaOwogICAgfSAvLyBNb3N0bHkgZm9yIGRlYnVnZ2luZwoKCiAgICB2b2x1bWUoKSB7CiAgICAgIGNvbnN0IGwgPSB0aGlzLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSB0aGlzLnVwcGVyQm91bmQ7CiAgICAgIHJldHVybiAodS54IC0gbC54KSAqICh1LnkgLSBsLnkpICogKHUueiAtIGwueik7CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gQUFCQiBpcyBmdWxseSBjb250YWluZWQgaW4gdGhpcyBBQUJCLgogICAgICovCgoKICAgIGNvbnRhaW5zKGFhYmIpIHsKICAgICAgY29uc3QgbDEgPSB0aGlzLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUxID0gdGhpcy51cHBlckJvdW5kOwogICAgICBjb25zdCBsMiA9IGFhYmIubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdTIgPSBhYWJiLnVwcGVyQm91bmQ7IC8vICAgICAgbDIgICAgICAgIHUyCiAgICAgIC8vICAgICAgfC0tLS0tLS0tLXwKICAgICAgLy8gfC0tLS0tLS0tLS0tLS0tLXwKICAgICAgLy8gbDEgICAgICAgICAgICAgIHUxCgogICAgICByZXR1cm4gbDEueCA8PSBsMi54ICYmIHUxLnggPj0gdTIueCAmJiBsMS55IDw9IGwyLnkgJiYgdTEueSA+PSB1Mi55ICYmIGwxLnogPD0gbDIueiAmJiB1MS56ID49IHUyLno7CiAgICB9CgogICAgZ2V0Q29ybmVycyhhLCBiLCBjLCBkLCBlLCBmLCBnLCBoKSB7CiAgICAgIGNvbnN0IGwgPSB0aGlzLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSB0aGlzLnVwcGVyQm91bmQ7CiAgICAgIGEuY29weShsKTsKICAgICAgYi5zZXQodS54LCBsLnksIGwueik7CiAgICAgIGMuc2V0KHUueCwgdS55LCBsLnopOwogICAgICBkLnNldChsLngsIHUueSwgdS56KTsKICAgICAgZS5zZXQodS54LCBsLnksIHUueik7CiAgICAgIGYuc2V0KGwueCwgdS55LCBsLnopOwogICAgICBnLnNldChsLngsIGwueSwgdS56KTsKICAgICAgaC5jb3B5KHUpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHJlcHJlc2VudGF0aW9uIG9mIGFuIEFBQkIgaW4gYW5vdGhlciBmcmFtZS4KICAgICAqIEByZXR1cm4gVGhlICJ0YXJnZXQiIEFBQkIgb2JqZWN0LgogICAgICovCgoKICAgIHRvTG9jYWxGcmFtZShmcmFtZSwgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IGNvcm5lcnMgPSB0cmFuc2Zvcm1JbnRvRnJhbWVfY29ybmVyczsKICAgICAgY29uc3QgYSA9IGNvcm5lcnNbMF07CiAgICAgIGNvbnN0IGIgPSBjb3JuZXJzWzFdOwogICAgICBjb25zdCBjID0gY29ybmVyc1syXTsKICAgICAgY29uc3QgZCA9IGNvcm5lcnNbM107CiAgICAgIGNvbnN0IGUgPSBjb3JuZXJzWzRdOwogICAgICBjb25zdCBmID0gY29ybmVyc1s1XTsKICAgICAgY29uc3QgZyA9IGNvcm5lcnNbNl07CiAgICAgIGNvbnN0IGggPSBjb3JuZXJzWzddOyAvLyBHZXQgY29ybmVycyBpbiBjdXJyZW50IGZyYW1lCgogICAgICB0aGlzLmdldENvcm5lcnMoYSwgYiwgYywgZCwgZSwgZiwgZywgaCk7IC8vIFRyYW5zZm9ybSB0aGVtIHRvIG5ldyBsb2NhbCBmcmFtZQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDg7IGkrKykgewogICAgICAgIGNvbnN0IGNvcm5lciA9IGNvcm5lcnNbaV07CiAgICAgICAgZnJhbWUucG9pbnRUb0xvY2FsKGNvcm5lciwgY29ybmVyKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRhcmdldC5zZXRGcm9tUG9pbnRzKGNvcm5lcnMpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHJlcHJlc2VudGF0aW9uIG9mIGFuIEFBQkIgaW4gdGhlIGdsb2JhbCBmcmFtZS4KICAgICAqIEByZXR1cm4gVGhlICJ0YXJnZXQiIEFBQkIgb2JqZWN0LgogICAgICovCgoKICAgIHRvV29ybGRGcmFtZShmcmFtZSwgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IGNvcm5lcnMgPSB0cmFuc2Zvcm1JbnRvRnJhbWVfY29ybmVyczsKICAgICAgY29uc3QgYSA9IGNvcm5lcnNbMF07CiAgICAgIGNvbnN0IGIgPSBjb3JuZXJzWzFdOwogICAgICBjb25zdCBjID0gY29ybmVyc1syXTsKICAgICAgY29uc3QgZCA9IGNvcm5lcnNbM107CiAgICAgIGNvbnN0IGUgPSBjb3JuZXJzWzRdOwogICAgICBjb25zdCBmID0gY29ybmVyc1s1XTsKICAgICAgY29uc3QgZyA9IGNvcm5lcnNbNl07CiAgICAgIGNvbnN0IGggPSBjb3JuZXJzWzddOyAvLyBHZXQgY29ybmVycyBpbiBjdXJyZW50IGZyYW1lCgogICAgICB0aGlzLmdldENvcm5lcnMoYSwgYiwgYywgZCwgZSwgZiwgZywgaCk7IC8vIFRyYW5zZm9ybSB0aGVtIHRvIG5ldyBsb2NhbCBmcmFtZQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDg7IGkrKykgewogICAgICAgIGNvbnN0IGNvcm5lciA9IGNvcm5lcnNbaV07CiAgICAgICAgZnJhbWUucG9pbnRUb1dvcmxkKGNvcm5lciwgY29ybmVyKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRhcmdldC5zZXRGcm9tUG9pbnRzKGNvcm5lcnMpOwogICAgfQogICAgLyoqCiAgICAgKiBDaGVjayBpZiB0aGUgQUFCQiBpcyBoaXQgYnkgYSByYXkuCiAgICAgKi8KCgogICAgb3ZlcmxhcHNSYXkocmF5KSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBkaXJlY3Rpb24sCiAgICAgICAgZnJvbQogICAgICB9ID0gcmF5OyAvLyBjb25zdCB0ID0gMAogICAgICAvLyByYXkuZGlyZWN0aW9uIGlzIHVuaXQgZGlyZWN0aW9uIHZlY3RvciBvZiByYXkKCiAgICAgIGNvbnN0IGRpckZyYWNYID0gMSAvIGRpcmVjdGlvbi54OwogICAgICBjb25zdCBkaXJGcmFjWSA9IDEgLyBkaXJlY3Rpb24ueTsKICAgICAgY29uc3QgZGlyRnJhY1ogPSAxIC8gZGlyZWN0aW9uLno7IC8vIHRoaXMubG93ZXJCb3VuZCBpcyB0aGUgY29ybmVyIG9mIEFBQkIgd2l0aCBtaW5pbWFsIGNvb3JkaW5hdGVzIC0gbGVmdCBib3R0b20sIHJ0IGlzIG1heGltYWwgY29ybmVyCgogICAgICBjb25zdCB0MSA9ICh0aGlzLmxvd2VyQm91bmQueCAtIGZyb20ueCkgKiBkaXJGcmFjWDsKICAgICAgY29uc3QgdDIgPSAodGhpcy51cHBlckJvdW5kLnggLSBmcm9tLngpICogZGlyRnJhY1g7CiAgICAgIGNvbnN0IHQzID0gKHRoaXMubG93ZXJCb3VuZC55IC0gZnJvbS55KSAqIGRpckZyYWNZOwogICAgICBjb25zdCB0NCA9ICh0aGlzLnVwcGVyQm91bmQueSAtIGZyb20ueSkgKiBkaXJGcmFjWTsKICAgICAgY29uc3QgdDUgPSAodGhpcy5sb3dlckJvdW5kLnogLSBmcm9tLnopICogZGlyRnJhY1o7CiAgICAgIGNvbnN0IHQ2ID0gKHRoaXMudXBwZXJCb3VuZC56IC0gZnJvbS56KSAqIGRpckZyYWNaOyAvLyBjb25zdCB0bWluID0gTWF0aC5tYXgoTWF0aC5tYXgoTWF0aC5taW4odDEsIHQyKSwgTWF0aC5taW4odDMsIHQ0KSkpOwogICAgICAvLyBjb25zdCB0bWF4ID0gTWF0aC5taW4oTWF0aC5taW4oTWF0aC5tYXgodDEsIHQyKSwgTWF0aC5tYXgodDMsIHQ0KSkpOwoKICAgICAgY29uc3QgdG1pbiA9IE1hdGgubWF4KE1hdGgubWF4KE1hdGgubWluKHQxLCB0MiksIE1hdGgubWluKHQzLCB0NCkpLCBNYXRoLm1pbih0NSwgdDYpKTsKICAgICAgY29uc3QgdG1heCA9IE1hdGgubWluKE1hdGgubWluKE1hdGgubWF4KHQxLCB0MiksIE1hdGgubWF4KHQzLCB0NCkpLCBNYXRoLm1heCh0NSwgdDYpKTsgLy8gaWYgdG1heCA8IDAsIHJheSAobGluZSkgaXMgaW50ZXJzZWN0aW5nIEFBQkIsIGJ1dCB3aG9sZSBBQUJCIGlzIGJlaGluZyB1cwoKICAgICAgaWYgKHRtYXggPCAwKSB7CiAgICAgICAgLy90ID0gdG1heDsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0gLy8gaWYgdG1pbiA+IHRtYXgsIHJheSBkb2Vzbid0IGludGVyc2VjdCBBQUJCCgoKICAgICAgaWYgKHRtaW4gPiB0bWF4KSB7CiAgICAgICAgLy90ID0gdG1heDsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICB9CiAgY29uc3QgdG1wJDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRyYW5zZm9ybUludG9GcmFtZV9jb3JuZXJzID0gW25ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCldOwoKICAvKioKICAgKiBDb2xsaXNpb24gIm1hdHJpeCIuCiAgICogSXQncyBhY3R1YWxseSBhIHRyaWFuZ3VsYXItc2hhcGVkIGFycmF5IG9mIHdoZXRoZXIgdHdvIGJvZGllcyBhcmUgdG91Y2hpbmcgdGhpcyBzdGVwLCBmb3IgcmVmZXJlbmNlIG5leHQgc3RlcAogICAqLwogIGNsYXNzIEFycmF5Q29sbGlzaW9uTWF0cml4IHsKICAgIC8qKgogICAgICogVGhlIG1hdHJpeCBzdG9yYWdlLgogICAgICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5tYXRyaXggPSBbXTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGFuIGVsZW1lbnQKICAgICAqLwoKCiAgICBnZXQoYmksIGJqKSB7CiAgICAgIGxldCB7CiAgICAgICAgaW5kZXg6IGkKICAgICAgfSA9IGJpOwogICAgICBsZXQgewogICAgICAgIGluZGV4OiBqCiAgICAgIH0gPSBiajsKCiAgICAgIGlmIChqID4gaSkgewogICAgICAgIGNvbnN0IHRlbXAgPSBqOwogICAgICAgIGogPSBpOwogICAgICAgIGkgPSB0ZW1wOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5tYXRyaXhbKGkgKiAoaSArIDEpID4+IDEpICsgaiAtIDFdOwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgYW4gZWxlbWVudAogICAgICovCgoKICAgIHNldChiaSwgYmosIHZhbHVlKSB7CiAgICAgIGxldCB7CiAgICAgICAgaW5kZXg6IGkKICAgICAgfSA9IGJpOwogICAgICBsZXQgewogICAgICAgIGluZGV4OiBqCiAgICAgIH0gPSBiajsKCiAgICAgIGlmIChqID4gaSkgewogICAgICAgIGNvbnN0IHRlbXAgPSBqOwogICAgICAgIGogPSBpOwogICAgICAgIGkgPSB0ZW1wOwogICAgICB9CgogICAgICB0aGlzLm1hdHJpeFsoaSAqIChpICsgMSkgPj4gMSkgKyBqIC0gMV0gPSB2YWx1ZSA/IDEgOiAwOwogICAgfQogICAgLyoqCiAgICAgKiBTZXRzIGFsbCBlbGVtZW50cyB0byB6ZXJvCiAgICAgKi8KCgogICAgcmVzZXQoKSB7CiAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gdGhpcy5tYXRyaXgubGVuZ3RoOyBpICE9PSBsOyBpKyspIHsKICAgICAgICB0aGlzLm1hdHJpeFtpXSA9IDA7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogU2V0cyB0aGUgbWF4IG51bWJlciBvZiBvYmplY3RzCiAgICAgKi8KCgogICAgc2V0TnVtT2JqZWN0cyhuKSB7CiAgICAgIHRoaXMubWF0cml4Lmxlbmd0aCA9IG4gKiAobiAtIDEpID4+IDE7CiAgICB9CgogIH0KCiAgLyoqCiAgICogQmFzZSBjbGFzcyBmb3Igb2JqZWN0cyB0aGF0IGRpc3BhdGNoZXMgZXZlbnRzLgogICAqLwogIGNsYXNzIEV2ZW50VGFyZ2V0IHsKICAgIC8qKgogICAgICogQWRkIGFuIGV2ZW50IGxpc3RlbmVyCiAgICAgKiBAcmV0dXJuIFRoZSBzZWxmIG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eS4KICAgICAqLwogICAgYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikgewogICAgICBpZiAodGhpcy5fbGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHsKICAgICAgICB0aGlzLl9saXN0ZW5lcnMgPSB7fTsKICAgICAgfQoKICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzOwoKICAgICAgaWYgKGxpc3RlbmVyc1t0eXBlXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgbGlzdGVuZXJzW3R5cGVdID0gW107CiAgICAgIH0KCiAgICAgIGlmICghbGlzdGVuZXJzW3R5cGVdLmluY2x1ZGVzKGxpc3RlbmVyKSkgewogICAgICAgIGxpc3RlbmVyc1t0eXBlXS5wdXNoKGxpc3RlbmVyKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIGFuIGV2ZW50IGxpc3RlbmVyIGlzIGFkZGVkCiAgICAgKi8KCgogICAgaGFzRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikgewogICAgICBpZiAodGhpcy5fbGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVyczsKCiAgICAgIGlmIChsaXN0ZW5lcnNbdHlwZV0gIT09IHVuZGVmaW5lZCAmJiBsaXN0ZW5lcnNbdHlwZV0uaW5jbHVkZXMobGlzdGVuZXIpKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgYW55IGV2ZW50IGxpc3RlbmVyIG9mIHRoZSBnaXZlbiB0eXBlIGlzIGFkZGVkCiAgICAgKi8KCgogICAgaGFzQW55RXZlbnRMaXN0ZW5lcih0eXBlKSB7CiAgICAgIGlmICh0aGlzLl9saXN0ZW5lcnMgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzOwogICAgICByZXR1cm4gbGlzdGVuZXJzW3R5cGVdICE9PSB1bmRlZmluZWQ7CiAgICB9CiAgICAvKioKICAgICAqIFJlbW92ZSBhbiBldmVudCBsaXN0ZW5lcgogICAgICogQHJldHVybiBUaGUgc2VsZiBvYmplY3QsIGZvciBjaGFpbmFiaWxpdHkuCiAgICAgKi8KCgogICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikgewogICAgICBpZiAodGhpcy5fbGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzOwoKICAgICAgaWYgKGxpc3RlbmVyc1t0eXBlXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIGNvbnN0IGluZGV4ID0gbGlzdGVuZXJzW3R5cGVdLmluZGV4T2YobGlzdGVuZXIpOwoKICAgICAgaWYgKGluZGV4ICE9PSAtMSkgewogICAgICAgIGxpc3RlbmVyc1t0eXBlXS5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogRW1pdCBhbiBldmVudC4KICAgICAqIEByZXR1cm4gVGhlIHNlbGYgb2JqZWN0LCBmb3IgY2hhaW5hYmlsaXR5LgogICAgICovCgoKICAgIGRpc3BhdGNoRXZlbnQoZXZlbnQpIHsKICAgICAgaWYgKHRoaXMuX2xpc3RlbmVycyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVyczsKICAgICAgY29uc3QgbGlzdGVuZXJBcnJheSA9IGxpc3RlbmVyc1tldmVudC50eXBlXTsKCiAgICAgIGlmIChsaXN0ZW5lckFycmF5ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBldmVudC50YXJnZXQgPSB0aGlzOwoKICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGxpc3RlbmVyQXJyYXkubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgICBsaXN0ZW5lckFycmF5W2ldLmNhbGwodGhpcywgZXZlbnQpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogIH0KCiAgLyoqCiAgICogQSBRdWF0ZXJuaW9uIGRlc2NyaWJlcyBhIHJvdGF0aW9uIGluIDNEIHNwYWNlLiBUaGUgUXVhdGVybmlvbiBpcyBtYXRoZW1hdGljYWxseSBkZWZpbmVkIGFzIFEgPSB4KmkgKyB5KmogKyB6KmsgKyB3LCB3aGVyZSAoaSxqLGspIGFyZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9ycy4gKHgseSx6KSBjYW4gYmUgc2VlbiBhcyBhIHZlY3RvciByZWxhdGVkIHRvIHRoZSBheGlzIG9mIHJvdGF0aW9uLCB3aGlsZSB0aGUgcmVhbCBtdWx0aXBsaWVyLCB3LCBpcyByZWxhdGVkIHRvIHRoZSBhbW91bnQgb2Ygcm90YXRpb24uCiAgICogQHBhcmFtIHggTXVsdGlwbGllciBvZiB0aGUgaW1hZ2luYXJ5IGJhc2lzIHZlY3RvciBpLgogICAqIEBwYXJhbSB5IE11bHRpcGxpZXIgb2YgdGhlIGltYWdpbmFyeSBiYXNpcyB2ZWN0b3Igai4KICAgKiBAcGFyYW0geiBNdWx0aXBsaWVyIG9mIHRoZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9yIGsuCiAgICogQHBhcmFtIHcgTXVsdGlwbGllciBvZiB0aGUgcmVhbCBwYXJ0LgogICAqIEBzZWUgaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9RdWF0ZXJuaW9uCiAgICovCgogIGNsYXNzIFF1YXRlcm5pb24gewogICAgY29uc3RydWN0b3IoeCwgeSwgeiwgdykgewogICAgICBpZiAoeCA9PT0gdm9pZCAwKSB7CiAgICAgICAgeCA9IDA7CiAgICAgIH0KCiAgICAgIGlmICh5ID09PSB2b2lkIDApIHsKICAgICAgICB5ID0gMDsKICAgICAgfQoKICAgICAgaWYgKHogPT09IHZvaWQgMCkgewogICAgICAgIHogPSAwOwogICAgICB9CgogICAgICBpZiAodyA9PT0gdm9pZCAwKSB7CiAgICAgICAgdyA9IDE7CiAgICAgIH0KCiAgICAgIHRoaXMueCA9IHg7CiAgICAgIHRoaXMueSA9IHk7CiAgICAgIHRoaXMueiA9IHo7CiAgICAgIHRoaXMudyA9IHc7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgdmFsdWUgb2YgdGhlIHF1YXRlcm5pb24uCiAgICAgKi8KCgogICAgc2V0KHgsIHksIHosIHcpIHsKICAgICAgdGhpcy54ID0geDsKICAgICAgdGhpcy55ID0geTsKICAgICAgdGhpcy56ID0gejsKICAgICAgdGhpcy53ID0gdzsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnQgdG8gYSByZWFkYWJsZSBmb3JtYXQKICAgICAqIEByZXR1cm4gIngseSx6LHciCiAgICAgKi8KCgogICAgdG9TdHJpbmcoKSB7CiAgICAgIHJldHVybiBgJHt0aGlzLnh9LCR7dGhpcy55fSwke3RoaXMuen0sJHt0aGlzLnd9YDsKICAgIH0KICAgIC8qKgogICAgICogQ29udmVydCB0byBhbiBBcnJheQogICAgICogQHJldHVybiBbeCwgeSwgeiwgd10KICAgICAqLwoKCiAgICB0b0FycmF5KCkgewogICAgICByZXR1cm4gW3RoaXMueCwgdGhpcy55LCB0aGlzLnosIHRoaXMud107CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgcXVhdGVybmlvbiBjb21wb25lbnRzIGdpdmVuIGFuIGF4aXMgYW5kIGFuIGFuZ2xlIGluIHJhZGlhbnMuCiAgICAgKi8KCgogICAgc2V0RnJvbUF4aXNBbmdsZSh2ZWN0b3IsIGFuZ2xlKSB7CiAgICAgIGNvbnN0IHMgPSBNYXRoLnNpbihhbmdsZSAqIDAuNSk7CiAgICAgIHRoaXMueCA9IHZlY3Rvci54ICogczsKICAgICAgdGhpcy55ID0gdmVjdG9yLnkgKiBzOwogICAgICB0aGlzLnogPSB2ZWN0b3IueiAqIHM7CiAgICAgIHRoaXMudyA9IE1hdGguY29zKGFuZ2xlICogMC41KTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnRzIHRoZSBxdWF0ZXJuaW9uIHRvIFsgYXhpcywgYW5nbGUgXSByZXByZXNlbnRhdGlvbi4KICAgICAqIEBwYXJhbSB0YXJnZXRBeGlzIEEgdmVjdG9yIG9iamVjdCB0byByZXVzZSBmb3Igc3RvcmluZyB0aGUgYXhpcy4KICAgICAqIEByZXR1cm4gQW4gYXJyYXksIGZpcnN0IGVsZW1lbnQgaXMgdGhlIGF4aXMgYW5kIHRoZSBzZWNvbmQgaXMgdGhlIGFuZ2xlIGluIHJhZGlhbnMuCiAgICAgKi8KCgogICAgdG9BeGlzQW5nbGUodGFyZ2V0QXhpcykgewogICAgICBpZiAodGFyZ2V0QXhpcyA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0QXhpcyA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHRoaXMubm9ybWFsaXplKCk7IC8vIGlmIHc+MSBhY29zIGFuZCBzcXJ0IHdpbGwgcHJvZHVjZSBlcnJvcnMsIHRoaXMgY2FudCBoYXBwZW4gaWYgcXVhdGVybmlvbiBpcyBub3JtYWxpc2VkCgogICAgICBjb25zdCBhbmdsZSA9IDIgKiBNYXRoLmFjb3ModGhpcy53KTsKICAgICAgY29uc3QgcyA9IE1hdGguc3FydCgxIC0gdGhpcy53ICogdGhpcy53KTsgLy8gYXNzdW1pbmcgcXVhdGVybmlvbiBub3JtYWxpc2VkIHRoZW4gdyBpcyBsZXNzIHRoYW4gMSwgc28gdGVybSBhbHdheXMgcG9zaXRpdmUuCgogICAgICBpZiAocyA8IDAuMDAxKSB7CiAgICAgICAgLy8gdGVzdCB0byBhdm9pZCBkaXZpZGUgYnkgemVybywgcyBpcyBhbHdheXMgcG9zaXRpdmUgZHVlIHRvIHNxcnQKICAgICAgICAvLyBpZiBzIGNsb3NlIHRvIHplcm8gdGhlbiBkaXJlY3Rpb24gb2YgYXhpcyBub3QgaW1wb3J0YW50CiAgICAgICAgdGFyZ2V0QXhpcy54ID0gdGhpcy54OyAvLyBpZiBpdCBpcyBpbXBvcnRhbnQgdGhhdCBheGlzIGlzIG5vcm1hbGlzZWQgdGhlbiByZXBsYWNlIHdpdGggeD0xOyB5PXo9MDsKCiAgICAgICAgdGFyZ2V0QXhpcy55ID0gdGhpcy55OwogICAgICAgIHRhcmdldEF4aXMueiA9IHRoaXMuejsKICAgICAgfSBlbHNlIHsKICAgICAgICB0YXJnZXRBeGlzLnggPSB0aGlzLnggLyBzOyAvLyBub3JtYWxpc2UgYXhpcwoKICAgICAgICB0YXJnZXRBeGlzLnkgPSB0aGlzLnkgLyBzOwogICAgICAgIHRhcmdldEF4aXMueiA9IHRoaXMueiAvIHM7CiAgICAgIH0KCiAgICAgIHJldHVybiBbdGFyZ2V0QXhpcywgYW5nbGVdOwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIHF1YXRlcm5pb24gdmFsdWUgZ2l2ZW4gdHdvIHZlY3RvcnMuIFRoZSByZXN1bHRpbmcgcm90YXRpb24gd2lsbCBiZSB0aGUgbmVlZGVkIHJvdGF0aW9uIHRvIHJvdGF0ZSB1IHRvIHYuCiAgICAgKi8KCgogICAgc2V0RnJvbVZlY3RvcnModSwgdikgewogICAgICBpZiAodS5pc0FudGlwYXJhbGxlbFRvKHYpKSB7CiAgICAgICAgY29uc3QgdDEgPSBzZnZfdDE7CiAgICAgICAgY29uc3QgdDIgPSBzZnZfdDI7CiAgICAgICAgdS50YW5nZW50cyh0MSwgdDIpOwogICAgICAgIHRoaXMuc2V0RnJvbUF4aXNBbmdsZSh0MSwgTWF0aC5QSSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgYSA9IHUuY3Jvc3Modik7CiAgICAgICAgdGhpcy54ID0gYS54OwogICAgICAgIHRoaXMueSA9IGEueTsKICAgICAgICB0aGlzLnogPSBhLno7CiAgICAgICAgdGhpcy53ID0gTWF0aC5zcXJ0KHUubGVuZ3RoKCkgKiogMiAqIHYubGVuZ3RoKCkgKiogMikgKyB1LmRvdCh2KTsKICAgICAgICB0aGlzLm5vcm1hbGl6ZSgpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogTXVsdGlwbHkgdGhlIHF1YXRlcm5pb24gd2l0aCBhbiBvdGhlciBxdWF0ZXJuaW9uLgogICAgICovCgoKICAgIG11bHQocXVhdCwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGF4ID0gdGhpcy54OwogICAgICBjb25zdCBheSA9IHRoaXMueTsKICAgICAgY29uc3QgYXogPSB0aGlzLno7CiAgICAgIGNvbnN0IGF3ID0gdGhpcy53OwogICAgICBjb25zdCBieCA9IHF1YXQueDsKICAgICAgY29uc3QgYnkgPSBxdWF0Lnk7CiAgICAgIGNvbnN0IGJ6ID0gcXVhdC56OwogICAgICBjb25zdCBidyA9IHF1YXQudzsKICAgICAgdGFyZ2V0LnggPSBheCAqIGJ3ICsgYXcgKiBieCArIGF5ICogYnogLSBheiAqIGJ5OwogICAgICB0YXJnZXQueSA9IGF5ICogYncgKyBhdyAqIGJ5ICsgYXogKiBieCAtIGF4ICogYno7CiAgICAgIHRhcmdldC56ID0gYXogKiBidyArIGF3ICogYnogKyBheCAqIGJ5IC0gYXkgKiBieDsKICAgICAgdGFyZ2V0LncgPSBhdyAqIGJ3IC0gYXggKiBieCAtIGF5ICogYnkgLSBheiAqIGJ6OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGludmVyc2UgcXVhdGVybmlvbiByb3RhdGlvbi4KICAgICAqLwoKCiAgICBpbnZlcnNlKHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgUXVhdGVybmlvbigpOwogICAgICB9CgogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICBjb25zdCB3ID0gdGhpcy53OwogICAgICB0aGlzLmNvbmp1Z2F0ZSh0YXJnZXQpOwogICAgICBjb25zdCBpbm9ybTIgPSAxIC8gKHggKiB4ICsgeSAqIHkgKyB6ICogeiArIHcgKiB3KTsKICAgICAgdGFyZ2V0LnggKj0gaW5vcm0yOwogICAgICB0YXJnZXQueSAqPSBpbm9ybTI7CiAgICAgIHRhcmdldC56ICo9IGlub3JtMjsKICAgICAgdGFyZ2V0LncgKj0gaW5vcm0yOwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHF1YXRlcm5pb24gY29uanVnYXRlCiAgICAgKi8KCgogICAgY29uanVnYXRlKHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgUXVhdGVybmlvbigpOwogICAgICB9CgogICAgICB0YXJnZXQueCA9IC10aGlzLng7CiAgICAgIHRhcmdldC55ID0gLXRoaXMueTsKICAgICAgdGFyZ2V0LnogPSAtdGhpcy56OwogICAgICB0YXJnZXQudyA9IHRoaXMudzsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogTm9ybWFsaXplIHRoZSBxdWF0ZXJuaW9uLiBOb3RlIHRoYXQgdGhpcyBjaGFuZ2VzIHRoZSB2YWx1ZXMgb2YgdGhlIHF1YXRlcm5pb24uCiAgICAgKi8KCgogICAgbm9ybWFsaXplKCkgewogICAgICBsZXQgbCA9IE1hdGguc3FydCh0aGlzLnggKiB0aGlzLnggKyB0aGlzLnkgKiB0aGlzLnkgKyB0aGlzLnogKiB0aGlzLnogKyB0aGlzLncgKiB0aGlzLncpOwoKICAgICAgaWYgKGwgPT09IDApIHsKICAgICAgICB0aGlzLnggPSAwOwogICAgICAgIHRoaXMueSA9IDA7CiAgICAgICAgdGhpcy56ID0gMDsKICAgICAgICB0aGlzLncgPSAwOwogICAgICB9IGVsc2UgewogICAgICAgIGwgPSAxIC8gbDsKICAgICAgICB0aGlzLnggKj0gbDsKICAgICAgICB0aGlzLnkgKj0gbDsKICAgICAgICB0aGlzLnogKj0gbDsKICAgICAgICB0aGlzLncgKj0gbDsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIEFwcHJveGltYXRpb24gb2YgcXVhdGVybmlvbiBub3JtYWxpemF0aW9uLiBXb3JrcyBiZXN0IHdoZW4gcXVhdCBpcyBhbHJlYWR5IGFsbW9zdC1ub3JtYWxpemVkLgogICAgICogQGF1dGhvciB1bnBoYXNlZCwgaHR0cHM6Ly9naXRodWIuY29tL3VucGhhc2VkCiAgICAgKi8KCgogICAgbm9ybWFsaXplRmFzdCgpIHsKICAgICAgY29uc3QgZiA9ICgzLjAgLSAodGhpcy54ICogdGhpcy54ICsgdGhpcy55ICogdGhpcy55ICsgdGhpcy56ICogdGhpcy56ICsgdGhpcy53ICogdGhpcy53KSkgLyAyLjA7CgogICAgICBpZiAoZiA9PT0gMCkgewogICAgICAgIHRoaXMueCA9IDA7CiAgICAgICAgdGhpcy55ID0gMDsKICAgICAgICB0aGlzLnogPSAwOwogICAgICAgIHRoaXMudyA9IDA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy54ICo9IGY7CiAgICAgICAgdGhpcy55ICo9IGY7CiAgICAgICAgdGhpcy56ICo9IGY7CiAgICAgICAgdGhpcy53ICo9IGY7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSB0aGUgcXVhdGVybmlvbiBieSBhIHZlY3RvcgogICAgICovCgoKICAgIHZtdWx0KHYsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCB4ID0gdi54OwogICAgICBjb25zdCB5ID0gdi55OwogICAgICBjb25zdCB6ID0gdi56OwogICAgICBjb25zdCBxeCA9IHRoaXMueDsKICAgICAgY29uc3QgcXkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHF6ID0gdGhpcy56OwogICAgICBjb25zdCBxdyA9IHRoaXMudzsgLy8gcSp2CgogICAgICBjb25zdCBpeCA9IHF3ICogeCArIHF5ICogeiAtIHF6ICogeTsKICAgICAgY29uc3QgaXkgPSBxdyAqIHkgKyBxeiAqIHggLSBxeCAqIHo7CiAgICAgIGNvbnN0IGl6ID0gcXcgKiB6ICsgcXggKiB5IC0gcXkgKiB4OwogICAgICBjb25zdCBpdyA9IC1xeCAqIHggLSBxeSAqIHkgLSBxeiAqIHo7CiAgICAgIHRhcmdldC54ID0gaXggKiBxdyArIGl3ICogLXF4ICsgaXkgKiAtcXogLSBpeiAqIC1xeTsKICAgICAgdGFyZ2V0LnkgPSBpeSAqIHF3ICsgaXcgKiAtcXkgKyBpeiAqIC1xeCAtIGl4ICogLXF6OwogICAgICB0YXJnZXQueiA9IGl6ICogcXcgKyBpdyAqIC1xeiArIGl4ICogLXF5IC0gaXkgKiAtcXg7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIENvcGllcyB2YWx1ZSBvZiBzb3VyY2UgdG8gdGhpcyBxdWF0ZXJuaW9uLgogICAgICogQHJldHVybiB0aGlzCiAgICAgKi8KCgogICAgY29weShxdWF0KSB7CiAgICAgIHRoaXMueCA9IHF1YXQueDsKICAgICAgdGhpcy55ID0gcXVhdC55OwogICAgICB0aGlzLnogPSBxdWF0Lno7CiAgICAgIHRoaXMudyA9IHF1YXQudzsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnQgdGhlIHF1YXRlcm5pb24gdG8gZXVsZXIgYW5nbGUgcmVwcmVzZW50YXRpb24uIE9yZGVyOiBZWlgsIGFzIHRoaXMgcGFnZSBkZXNjcmliZXM6IGh0dHBzOi8vd3d3LmV1Y2xpZGVhbnNwYWNlLmNvbS9tYXRocy9zdGFuZGFyZHMvaW5kZXguaHRtCiAgICAgKiBAcGFyYW0gb3JkZXIgVGhyZWUtY2hhcmFjdGVyIHN0cmluZywgZGVmYXVsdHMgdG8gIllaWCIKICAgICAqLwoKCiAgICB0b0V1bGVyKHRhcmdldCwgb3JkZXIpIHsKICAgICAgaWYgKG9yZGVyID09PSB2b2lkIDApIHsKICAgICAgICBvcmRlciA9ICdZWlgnOwogICAgICB9CgogICAgICBsZXQgaGVhZGluZzsKICAgICAgbGV0IGF0dGl0dWRlOwogICAgICBsZXQgYmFuazsKICAgICAgY29uc3QgeCA9IHRoaXMueDsKICAgICAgY29uc3QgeSA9IHRoaXMueTsKICAgICAgY29uc3QgeiA9IHRoaXMuejsKICAgICAgY29uc3QgdyA9IHRoaXMudzsKCiAgICAgIHN3aXRjaCAob3JkZXIpIHsKICAgICAgICBjYXNlICdZWlgnOgogICAgICAgICAgY29uc3QgdGVzdCA9IHggKiB5ICsgeiAqIHc7CgogICAgICAgICAgaWYgKHRlc3QgPiAwLjQ5OSkgewogICAgICAgICAgICAvLyBzaW5ndWxhcml0eSBhdCBub3J0aCBwb2xlCiAgICAgICAgICAgIGhlYWRpbmcgPSAyICogTWF0aC5hdGFuMih4LCB3KTsKICAgICAgICAgICAgYXR0aXR1ZGUgPSBNYXRoLlBJIC8gMjsKICAgICAgICAgICAgYmFuayA9IDA7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHRlc3QgPCAtMC40OTkpIHsKICAgICAgICAgICAgLy8gc2luZ3VsYXJpdHkgYXQgc291dGggcG9sZQogICAgICAgICAgICBoZWFkaW5nID0gLTIgKiBNYXRoLmF0YW4yKHgsIHcpOwogICAgICAgICAgICBhdHRpdHVkZSA9IC1NYXRoLlBJIC8gMjsKICAgICAgICAgICAgYmFuayA9IDA7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGhlYWRpbmcgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBjb25zdCBzcXggPSB4ICogeDsKICAgICAgICAgICAgY29uc3Qgc3F5ID0geSAqIHk7CiAgICAgICAgICAgIGNvbnN0IHNxeiA9IHogKiB6OwogICAgICAgICAgICBoZWFkaW5nID0gTWF0aC5hdGFuMigyICogeSAqIHcgLSAyICogeCAqIHosIDEgLSAyICogc3F5IC0gMiAqIHNxeik7IC8vIEhlYWRpbmcKCiAgICAgICAgICAgIGF0dGl0dWRlID0gTWF0aC5hc2luKDIgKiB0ZXN0KTsgLy8gYXR0aXR1ZGUKCiAgICAgICAgICAgIGJhbmsgPSBNYXRoLmF0YW4yKDIgKiB4ICogdyAtIDIgKiB5ICogeiwgMSAtIDIgKiBzcXggLSAyICogc3F6KTsgLy8gYmFuawogICAgICAgICAgfQoKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFdWxlciBvcmRlciAke29yZGVyfSBub3Qgc3VwcG9ydGVkIHlldC5gKTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnkgPSBoZWFkaW5nOwogICAgICB0YXJnZXQueiA9IGF0dGl0dWRlOwogICAgICB0YXJnZXQueCA9IGJhbms7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgcXVhdGVybmlvbiBjb21wb25lbnRzIGdpdmVuIEV1bGVyIGFuZ2xlIHJlcHJlc2VudGF0aW9uLgogICAgICoKICAgICAqIEBwYXJhbSBvcmRlciBUaGUgb3JkZXIgdG8gYXBwbHkgYW5nbGVzOiAnWFlaJyBvciAnWVhaJyBvciBhbnkgb3RoZXIgY29tYmluYXRpb24uCiAgICAgKgogICAgICogU2VlIHtAbGluayBodHRwczovL3d3dy5tYXRod29ya3MuY29tL21hdGxhYmNlbnRyYWwvZmlsZWV4Y2hhbmdlLzIwNjk2LWZ1bmN0aW9uLXRvLWNvbnZlcnQtYmV0d2Vlbi1kY20tZXVsZXItYW5nbGVzLXF1YXRlcm5pb25zLWFuZC1ldWxlci12ZWN0b3JzIE1hdGhXb3Jrc30gcmVmZXJlbmNlCiAgICAgKi8KCgogICAgc2V0RnJvbUV1bGVyKHgsIHksIHosIG9yZGVyKSB7CiAgICAgIGlmIChvcmRlciA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3JkZXIgPSAnWFlaJzsKICAgICAgfQoKICAgICAgY29uc3QgYzEgPSBNYXRoLmNvcyh4IC8gMik7CiAgICAgIGNvbnN0IGMyID0gTWF0aC5jb3MoeSAvIDIpOwogICAgICBjb25zdCBjMyA9IE1hdGguY29zKHogLyAyKTsKICAgICAgY29uc3QgczEgPSBNYXRoLnNpbih4IC8gMik7CiAgICAgIGNvbnN0IHMyID0gTWF0aC5zaW4oeSAvIDIpOwogICAgICBjb25zdCBzMyA9IE1hdGguc2luKHogLyAyKTsKCiAgICAgIGlmIChvcmRlciA9PT0gJ1hZWicpIHsKICAgICAgICB0aGlzLnggPSBzMSAqIGMyICogYzMgKyBjMSAqIHMyICogczM7CiAgICAgICAgdGhpcy55ID0gYzEgKiBzMiAqIGMzIC0gczEgKiBjMiAqIHMzOwogICAgICAgIHRoaXMueiA9IGMxICogYzIgKiBzMyArIHMxICogczIgKiBjMzsKICAgICAgICB0aGlzLncgPSBjMSAqIGMyICogYzMgLSBzMSAqIHMyICogczM7CiAgICAgIH0gZWxzZSBpZiAob3JkZXIgPT09ICdZWFonKSB7CiAgICAgICAgdGhpcy54ID0gczEgKiBjMiAqIGMzICsgYzEgKiBzMiAqIHMzOwogICAgICAgIHRoaXMueSA9IGMxICogczIgKiBjMyAtIHMxICogYzIgKiBzMzsKICAgICAgICB0aGlzLnogPSBjMSAqIGMyICogczMgLSBzMSAqIHMyICogYzM7CiAgICAgICAgdGhpcy53ID0gYzEgKiBjMiAqIGMzICsgczEgKiBzMiAqIHMzOwogICAgICB9IGVsc2UgaWYgKG9yZGVyID09PSAnWlhZJykgewogICAgICAgIHRoaXMueCA9IHMxICogYzIgKiBjMyAtIGMxICogczIgKiBzMzsKICAgICAgICB0aGlzLnkgPSBjMSAqIHMyICogYzMgKyBzMSAqIGMyICogczM7CiAgICAgICAgdGhpcy56ID0gYzEgKiBjMiAqIHMzICsgczEgKiBzMiAqIGMzOwogICAgICAgIHRoaXMudyA9IGMxICogYzIgKiBjMyAtIHMxICogczIgKiBzMzsKICAgICAgfSBlbHNlIGlmIChvcmRlciA9PT0gJ1pZWCcpIHsKICAgICAgICB0aGlzLnggPSBzMSAqIGMyICogYzMgLSBjMSAqIHMyICogczM7CiAgICAgICAgdGhpcy55ID0gYzEgKiBzMiAqIGMzICsgczEgKiBjMiAqIHMzOwogICAgICAgIHRoaXMueiA9IGMxICogYzIgKiBzMyAtIHMxICogczIgKiBjMzsKICAgICAgICB0aGlzLncgPSBjMSAqIGMyICogYzMgKyBzMSAqIHMyICogczM7CiAgICAgIH0gZWxzZSBpZiAob3JkZXIgPT09ICdZWlgnKSB7CiAgICAgICAgdGhpcy54ID0gczEgKiBjMiAqIGMzICsgYzEgKiBzMiAqIHMzOwogICAgICAgIHRoaXMueSA9IGMxICogczIgKiBjMyArIHMxICogYzIgKiBzMzsKICAgICAgICB0aGlzLnogPSBjMSAqIGMyICogczMgLSBzMSAqIHMyICogYzM7CiAgICAgICAgdGhpcy53ID0gYzEgKiBjMiAqIGMzIC0gczEgKiBzMiAqIHMzOwogICAgICB9IGVsc2UgaWYgKG9yZGVyID09PSAnWFpZJykgewogICAgICAgIHRoaXMueCA9IHMxICogYzIgKiBjMyAtIGMxICogczIgKiBzMzsKICAgICAgICB0aGlzLnkgPSBjMSAqIHMyICogYzMgLSBzMSAqIGMyICogczM7CiAgICAgICAgdGhpcy56ID0gYzEgKiBjMiAqIHMzICsgczEgKiBzMiAqIGMzOwogICAgICAgIHRoaXMudyA9IGMxICogYzIgKiBjMyArIHMxICogczIgKiBzMzsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgY2xvbmUoKSB7CiAgICAgIHJldHVybiBuZXcgUXVhdGVybmlvbih0aGlzLngsIHRoaXMueSwgdGhpcy56LCB0aGlzLncpOwogICAgfQogICAgLyoqCiAgICAgKiBQZXJmb3JtcyBhIHNwaGVyaWNhbCBsaW5lYXIgaW50ZXJwb2xhdGlvbiBiZXR3ZWVuIHR3byBxdWF0CiAgICAgKgogICAgICogQHBhcmFtIHRvUXVhdCBzZWNvbmQgb3BlcmFuZAogICAgICogQHBhcmFtIHQgaW50ZXJwb2xhdGlvbiBhbW91bnQgYmV0d2VlbiB0aGUgc2VsZiBxdWF0ZXJuaW9uIGFuZCB0b1F1YXQKICAgICAqIEBwYXJhbSB0YXJnZXQgQSBxdWF0ZXJuaW9uIHRvIHN0b3JlIHRoZSByZXN1bHQgaW4uIElmIG5vdCBwcm92aWRlZCwgYSBuZXcgb25lIHdpbGwgYmUgY3JlYXRlZC4KICAgICAqIEByZXR1cm5zIHtRdWF0ZXJuaW9ufSBUaGUgInRhcmdldCIgb2JqZWN0CiAgICAgKi8KCgogICAgc2xlcnAodG9RdWF0LCB0LCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFF1YXRlcm5pb24oKTsKICAgICAgfQoKICAgICAgY29uc3QgYXggPSB0aGlzLng7CiAgICAgIGNvbnN0IGF5ID0gdGhpcy55OwogICAgICBjb25zdCBheiA9IHRoaXMuejsKICAgICAgY29uc3QgYXcgPSB0aGlzLnc7CiAgICAgIGxldCBieCA9IHRvUXVhdC54OwogICAgICBsZXQgYnkgPSB0b1F1YXQueTsKICAgICAgbGV0IGJ6ID0gdG9RdWF0Lno7CiAgICAgIGxldCBidyA9IHRvUXVhdC53OwogICAgICBsZXQgb21lZ2E7CiAgICAgIGxldCBjb3NvbTsKICAgICAgbGV0IHNpbm9tOwogICAgICBsZXQgc2NhbGUwOwogICAgICBsZXQgc2NhbGUxOyAvLyBjYWxjIGNvc2luZQoKICAgICAgY29zb20gPSBheCAqIGJ4ICsgYXkgKiBieSArIGF6ICogYnogKyBhdyAqIGJ3OyAvLyBhZGp1c3Qgc2lnbnMgKGlmIG5lY2Vzc2FyeSkKCiAgICAgIGlmIChjb3NvbSA8IDAuMCkgewogICAgICAgIGNvc29tID0gLWNvc29tOwogICAgICAgIGJ4ID0gLWJ4OwogICAgICAgIGJ5ID0gLWJ5OwogICAgICAgIGJ6ID0gLWJ6OwogICAgICAgIGJ3ID0gLWJ3OwogICAgICB9IC8vIGNhbGN1bGF0ZSBjb2VmZmljaWVudHMKCgogICAgICBpZiAoMS4wIC0gY29zb20gPiAwLjAwMDAwMSkgewogICAgICAgIC8vIHN0YW5kYXJkIGNhc2UgKHNsZXJwKQogICAgICAgIG9tZWdhID0gTWF0aC5hY29zKGNvc29tKTsKICAgICAgICBzaW5vbSA9IE1hdGguc2luKG9tZWdhKTsKICAgICAgICBzY2FsZTAgPSBNYXRoLnNpbigoMS4wIC0gdCkgKiBvbWVnYSkgLyBzaW5vbTsKICAgICAgICBzY2FsZTEgPSBNYXRoLnNpbih0ICogb21lZ2EpIC8gc2lub207CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gImZyb20iIGFuZCAidG8iIHF1YXRlcm5pb25zIGFyZSB2ZXJ5IGNsb3NlCiAgICAgICAgLy8gIC4uLiBzbyB3ZSBjYW4gZG8gYSBsaW5lYXIgaW50ZXJwb2xhdGlvbgogICAgICAgIHNjYWxlMCA9IDEuMCAtIHQ7CiAgICAgICAgc2NhbGUxID0gdDsKICAgICAgfSAvLyBjYWxjdWxhdGUgZmluYWwgdmFsdWVzCgoKICAgICAgdGFyZ2V0LnggPSBzY2FsZTAgKiBheCArIHNjYWxlMSAqIGJ4OwogICAgICB0YXJnZXQueSA9IHNjYWxlMCAqIGF5ICsgc2NhbGUxICogYnk7CiAgICAgIHRhcmdldC56ID0gc2NhbGUwICogYXogKyBzY2FsZTEgKiBiejsKICAgICAgdGFyZ2V0LncgPSBzY2FsZTAgKiBhdyArIHNjYWxlMSAqIGJ3OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBSb3RhdGUgYW4gYWJzb2x1dGUgb3JpZW50YXRpb24gcXVhdGVybmlvbiBnaXZlbiBhbiBhbmd1bGFyIHZlbG9jaXR5IGFuZCBhIHRpbWUgc3RlcC4KICAgICAqLwoKCiAgICBpbnRlZ3JhdGUoYW5ndWxhclZlbG9jaXR5LCBkdCwgYW5ndWxhckZhY3RvciwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGF4ID0gYW5ndWxhclZlbG9jaXR5LnggKiBhbmd1bGFyRmFjdG9yLngsCiAgICAgICAgICAgIGF5ID0gYW5ndWxhclZlbG9jaXR5LnkgKiBhbmd1bGFyRmFjdG9yLnksCiAgICAgICAgICAgIGF6ID0gYW5ndWxhclZlbG9jaXR5LnogKiBhbmd1bGFyRmFjdG9yLnosCiAgICAgICAgICAgIGJ4ID0gdGhpcy54LAogICAgICAgICAgICBieSA9IHRoaXMueSwKICAgICAgICAgICAgYnogPSB0aGlzLnosCiAgICAgICAgICAgIGJ3ID0gdGhpcy53OwogICAgICBjb25zdCBoYWxmX2R0ID0gZHQgKiAwLjU7CiAgICAgIHRhcmdldC54ICs9IGhhbGZfZHQgKiAoYXggKiBidyArIGF5ICogYnogLSBheiAqIGJ5KTsKICAgICAgdGFyZ2V0LnkgKz0gaGFsZl9kdCAqIChheSAqIGJ3ICsgYXogKiBieCAtIGF4ICogYnopOwogICAgICB0YXJnZXQueiArPSBoYWxmX2R0ICogKGF6ICogYncgKyBheCAqIGJ5IC0gYXkgKiBieCk7CiAgICAgIHRhcmdldC53ICs9IGhhbGZfZHQgKiAoLWF4ICogYnggLSBheSAqIGJ5IC0gYXogKiBieik7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CgogIH0KICBjb25zdCBzZnZfdDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNmdl90MiA9IG5ldyBWZWMzKCk7CgogIC8qKgogICAqIFRoZSBhdmFpbGFibGUgc2hhcGUgdHlwZXMuCiAgICovCiAgY29uc3QgU0hBUEVfVFlQRVMgPSB7CiAgICAvKiogU1BIRVJFICovCiAgICBTUEhFUkU6IDEsCgogICAgLyoqIFBMQU5FICovCiAgICBQTEFORTogMiwKCiAgICAvKiogQk9YICovCiAgICBCT1g6IDQsCgogICAgLyoqIENPTVBPVU5EICovCiAgICBDT01QT1VORDogOCwKCiAgICAvKiogQ09OVkVYUE9MWUhFRFJPTiAqLwogICAgQ09OVkVYUE9MWUhFRFJPTjogMTYsCgogICAgLyoqIEhFSUdIVEZJRUxEICovCiAgICBIRUlHSFRGSUVMRDogMzIsCgogICAgLyoqIFBBUlRJQ0xFICovCiAgICBQQVJUSUNMRTogNjQsCgogICAgLyoqIENZTElOREVSICovCiAgICBDWUxJTkRFUjogMTI4LAoKICAgIC8qKiBUUklNRVNIICovCiAgICBUUklNRVNIOiAyNTYKICB9OwogIC8qKgogICAqIFNoYXBlVHlwZQogICAqLwoKICAvKioKICAgKiBCYXNlIGNsYXNzIGZvciBzaGFwZXMKICAgKi8KICBjbGFzcyBTaGFwZSB7CiAgICAvKioKICAgICAqIElkZW50aWZpZXIgb2YgdGhlIFNoYXBlLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgdHlwZSBvZiB0aGlzIHNoYXBlLiBNdXN0IGJlIHNldCB0byBhbiBpbnQgPiAwIGJ5IHN1YmNsYXNzZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBsb2NhbCBib3VuZGluZyBzcGhlcmUgcmFkaXVzIG9mIHRoaXMgc2hhcGUuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8gcHJvZHVjZSBjb250YWN0IGZvcmNlcyB3aGVuIGluIGNvbnRhY3Qgd2l0aCBvdGhlciBib2RpZXMuIE5vdGUgdGhhdCBjb250YWN0cyB3aWxsIGJlIGdlbmVyYXRlZCwgYnV0IHRoZXkgd2lsbCBiZSBkaXNhYmxlZC4KICAgICAqIEBkZWZhdWx0IHRydWUKICAgICAqLwoKICAgIC8qKgogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBAZGVmYXVsdCAtMQogICAgICovCgogICAgLyoqCiAgICAgKiBPcHRpb25hbCBtYXRlcmlhbCBvZiB0aGUgc2hhcGUgdGhhdCByZWd1bGF0ZXMgY29udGFjdCBwcm9wZXJ0aWVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgYm9keSB0byB3aGljaCB0aGUgc2hhcGUgaXMgYWRkZWQgdG8uCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFsbCB0aGUgU2hhcGUgdHlwZXMuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgdGhpcy5pZCA9IFNoYXBlLmlkQ291bnRlcisrOwogICAgICB0aGlzLnR5cGUgPSBvcHRpb25zLnR5cGUgfHwgMDsKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IDA7CiAgICAgIHRoaXMuY29sbGlzaW9uUmVzcG9uc2UgPSBvcHRpb25zLmNvbGxpc2lvblJlc3BvbnNlID8gb3B0aW9ucy5jb2xsaXNpb25SZXNwb25zZSA6IHRydWU7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwIDogMTsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJNYXNrICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlck1hc2sgOiAtMTsKICAgICAgdGhpcy5tYXRlcmlhbCA9IG9wdGlvbnMubWF0ZXJpYWwgPyBvcHRpb25zLm1hdGVyaWFsIDogbnVsbDsKICAgICAgdGhpcy5ib2R5ID0gbnVsbDsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZXMgdGhlIGJvdW5kaW5nIHNwaGVyZSByYWRpdXMuCiAgICAgKiBUaGUgcmVzdWx0IGlzIHN0b3JlZCBpbiB0aGUgcHJvcGVydHkgYC5ib3VuZGluZ1NwaGVyZVJhZGl1c2AKICAgICAqLwoKCiAgICB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIHsKICAgICAgdGhyb3cgYGNvbXB1dGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIG5vdCBpbXBsZW1lbnRlZCBmb3Igc2hhcGUgdHlwZSAke3RoaXMudHlwZX1gOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHZvbHVtZSBvZiB0aGlzIHNoYXBlCiAgICAgKi8KCgogICAgdm9sdW1lKCkgewogICAgICB0aHJvdyBgdm9sdW1lKCkgbm90IGltcGxlbWVudGVkIGZvciBzaGFwZSB0eXBlICR7dGhpcy50eXBlfWA7CiAgICB9CiAgICAvKioKICAgICAqIENhbGN1bGF0ZXMgdGhlIGluZXJ0aWEgaW4gdGhlIGxvY2FsIGZyYW1lIGZvciB0aGlzIHNoYXBlLgogICAgICogQHNlZSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xpc3Rfb2ZfbW9tZW50c19vZl9pbmVydGlhCiAgICAgKi8KCgogICAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkgewogICAgICB0aHJvdyBgY2FsY3VsYXRlTG9jYWxJbmVydGlhKCkgbm90IGltcGxlbWVudGVkIGZvciBzaGFwZSB0eXBlICR7dGhpcy50eXBlfWA7CiAgICB9CiAgICAvKioKICAgICAqIEB0b2RvIHVzZSBhYnN0cmFjdCBmb3IgdGhlc2Uga2luZCBvZiBtZXRob2RzCiAgICAgKi8KCgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgdGhyb3cgYGNhbGN1bGF0ZVdvcmxkQUFCQigpIG5vdCBpbXBsZW1lbnRlZCBmb3Igc2hhcGUgdHlwZSAke3RoaXMudHlwZX1gOwogICAgfQoKICB9CiAgU2hhcGUuaWRDb3VudGVyID0gMDsKICBTaGFwZS50eXBlcyA9IFNIQVBFX1RZUEVTOwoKICAvKioKICAgKiBUcmFuc2Zvcm1hdGlvbiB1dGlsaXRpZXMuCiAgICovCiAgY2xhc3MgVHJhbnNmb3JtIHsKICAgIC8qKgogICAgICogcG9zaXRpb24KICAgICAqLwoKICAgIC8qKgogICAgICogcXVhdGVybmlvbgogICAgICovCiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIHRoaXMucG9zaXRpb24gPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnF1YXRlcm5pb24gPSBuZXcgUXVhdGVybmlvbigpOwoKICAgICAgaWYgKG9wdGlvbnMucG9zaXRpb24pIHsKICAgICAgICB0aGlzLnBvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLnF1YXRlcm5pb24pIHsKICAgICAgICB0aGlzLnF1YXRlcm5pb24uY29weShvcHRpb25zLnF1YXRlcm5pb24pOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhIGdsb2JhbCBwb2ludCBpbiBsb2NhbCB0cmFuc2Zvcm0gY29vcmRpbmF0ZXMuCiAgICAgKi8KCgogICAgcG9pbnRUb0xvY2FsKHdvcmxkUG9pbnQsIHJlc3VsdCkgewogICAgICByZXR1cm4gVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHRoaXMucG9zaXRpb24sIHRoaXMucXVhdGVybmlvbiwgd29ybGRQb2ludCwgcmVzdWx0KTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGEgbG9jYWwgcG9pbnQgaW4gZ2xvYmFsIHRyYW5zZm9ybSBjb29yZGluYXRlcy4KICAgICAqLwoKCiAgICBwb2ludFRvV29ybGQobG9jYWxQb2ludCwgcmVzdWx0KSB7CiAgICAgIHJldHVybiBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUodGhpcy5wb3NpdGlvbiwgdGhpcy5xdWF0ZXJuaW9uLCBsb2NhbFBvaW50LCByZXN1bHQpOwogICAgfQogICAgLyoqCiAgICAgKiB2ZWN0b3JUb1dvcmxkRnJhbWUKICAgICAqLwoKCiAgICB2ZWN0b3JUb1dvcmxkRnJhbWUobG9jYWxWZWN0b3IsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0aGlzLnF1YXRlcm5pb24udm11bHQobG9jYWxWZWN0b3IsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIHBvaW50VG9Mb2NhbEZyYW1lCiAgICAgKi8KCgogICAgc3RhdGljIHBvaW50VG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0ZXJuaW9uLCB3b3JsZFBvaW50LCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVzdWx0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgd29ybGRQb2ludC52c3ViKHBvc2l0aW9uLCByZXN1bHQpOwogICAgICBxdWF0ZXJuaW9uLmNvbmp1Z2F0ZSh0bXBRdWF0JDEpOwogICAgICB0bXBRdWF0JDEudm11bHQocmVzdWx0LCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBwb2ludFRvV29ybGRGcmFtZQogICAgICovCgoKICAgIHN0YXRpYyBwb2ludFRvV29ybGRGcmFtZShwb3NpdGlvbiwgcXVhdGVybmlvbiwgbG9jYWxQb2ludCwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgewogICAgICAgIHJlc3VsdCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHF1YXRlcm5pb24udm11bHQobG9jYWxQb2ludCwgcmVzdWx0KTsKICAgICAgcmVzdWx0LnZhZGQocG9zaXRpb24sIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIHZlY3RvclRvV29ybGRGcmFtZQogICAgICovCgoKICAgIHN0YXRpYyB2ZWN0b3JUb1dvcmxkRnJhbWUocXVhdGVybmlvbiwgbG9jYWxWZWN0b3IsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBxdWF0ZXJuaW9uLnZtdWx0KGxvY2FsVmVjdG9yLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiB2ZWN0b3JUb0xvY2FsRnJhbWUKICAgICAqLwoKCiAgICBzdGF0aWMgdmVjdG9yVG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0ZXJuaW9uLCB3b3JsZFZlY3RvciwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgewogICAgICAgIHJlc3VsdCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHF1YXRlcm5pb24udyAqPSAtMTsKICAgICAgcXVhdGVybmlvbi52bXVsdCh3b3JsZFZlY3RvciwgcmVzdWx0KTsKICAgICAgcXVhdGVybmlvbi53ICo9IC0xOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICB9CiAgY29uc3QgdG1wUXVhdCQxID0gbmV3IFF1YXRlcm5pb24oKTsKCiAgLyoqCiAgICogQSBzZXQgb2YgcG9seWdvbnMgZGVzY3JpYmluZyBhIGNvbnZleCBzaGFwZS4KICAgKgogICAqIFRoZSBzaGFwZSBNVVNUIGJlIGNvbnZleCBmb3IgdGhlIGNvZGUgdG8gd29yayBwcm9wZXJseS4gTm8gcG9seWdvbnMgbWF5IGJlIGNvcGxhbmFyIChjb250YWluZWQKICAgKiBpbiB0aGUgc2FtZSAzRCBwbGFuZSksIGluc3RlYWQgdGhlc2Ugc2hvdWxkIGJlIG1lcmdlZCBpbnRvIG9uZSBwb2x5Z29uLgogICAqCiAgICogQGF1dGhvciBxaWFvIC8gaHR0cHM6Ly9naXRodWIuY29tL3FpYW8gKG9yaWdpbmFsIGF1dGhvciwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9xaWFvL3RocmVlLmpzL2NvbW1pdC84NTAyNmYwYzc2OWU0MDAwMTQ4YTY3ZDQ1YTllOWI5YzUxMDg4MzZmKQogICAqIEBhdXRob3Igc2NodGVwcGUgLyBodHRwczovL2dpdGh1Yi5jb20vc2NodGVwcGUKICAgKiBAc2VlIGh0dHBzOi8vd3d3LmFsdGRldmJsb2dhZGF5LmNvbS8yMDExLzA1LzEzL2NvbnRhY3QtZ2VuZXJhdGlvbi1iZXR3ZWVuLTNkLWNvbnZleC1tZXNoZXMvCiAgICoKICAgKiBAdG9kbyBNb3ZlIHRoZSBjbGlwcGluZyBmdW5jdGlvbnMgdG8gQ29udGFjdEdlbmVyYXRvcj8KICAgKiBAdG9kbyBBdXRvbWF0aWNhbGx5IG1lcmdlIGNvcGxhbmFyIHBvbHlnb25zIGluIGNvbnN0cnVjdG9yLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IGNvbnZleFNoYXBlID0gbmV3IENBTk5PTi5Db252ZXhQb2x5aGVkcm9uKHsgdmVydGljZXMsIGZhY2VzIH0pCiAgICogICAgIGNvbnN0IGNvbnZleEJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogY29udmV4U2hhcGUgfSkKICAgKiAgICAgd29ybGQuYWRkQm9keShjb252ZXhCb2R5KQogICAqLwogIGNsYXNzIENvbnZleFBvbHloZWRyb24gZXh0ZW5kcyBTaGFwZSB7CiAgICAvKiogdmVydGljZXMgKi8KCiAgICAvKioKICAgICAqIEFycmF5IG9mIGludGVnZXIgYXJyYXlzLCBpbmRpY2F0aW5nIHdoaWNoIHZlcnRpY2VzIGVhY2ggZmFjZSBjb25zaXN0cyBvZgogICAgICovCgogICAgLyoqIGZhY2VOb3JtYWxzICovCgogICAgLyoqIHdvcmxkVmVydGljZXMgKi8KCiAgICAvKiogd29ybGRWZXJ0aWNlc05lZWRzVXBkYXRlICovCgogICAgLyoqIHdvcmxkRmFjZU5vcm1hbHMgKi8KCiAgICAvKiogd29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlICovCgogICAgLyoqCiAgICAgKiBJZiBnaXZlbiwgdGhlc2UgbG9jYWxseSBkZWZpbmVkLCBub3JtYWxpemVkIGF4ZXMgYXJlIHRoZSBvbmx5IG9uZXMgYmVpbmcgY2hlY2tlZCB3aGVuIGRvaW5nIHNlcGFyYXRpbmcgYXhpcyBjaGVjay4KICAgICAqLwoKICAgIC8qKiB1bmlxdWVFZGdlcyAqLwoKICAgIC8qKgogICAgICogQHBhcmFtIHZlcnRpY2VzIEFuIGFycmF5IG9mIFZlYzMncwogICAgICogQHBhcmFtIGZhY2VzIEFycmF5IG9mIGludGVnZXIgYXJyYXlzLCBkZXNjcmliaW5nIHdoaWNoIHZlcnRpY2VzIHRoYXQgaXMgaW5jbHVkZWQgaW4gZWFjaCBmYWNlLgogICAgICovCiAgICBjb25zdHJ1Y3Rvcihwcm9wcykgewogICAgICBpZiAocHJvcHMgPT09IHZvaWQgMCkgewogICAgICAgIHByb3BzID0ge307CiAgICAgIH0KCiAgICAgIGNvbnN0IHsKICAgICAgICB2ZXJ0aWNlcyA9IFtdLAogICAgICAgIGZhY2VzID0gW10sCiAgICAgICAgbm9ybWFscyA9IFtdLAogICAgICAgIGF4ZXMsCiAgICAgICAgYm91bmRpbmdTcGhlcmVSYWRpdXMKICAgICAgfSA9IHByb3BzOwogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTgogICAgICB9KTsKICAgICAgdGhpcy52ZXJ0aWNlcyA9IHZlcnRpY2VzOwogICAgICB0aGlzLmZhY2VzID0gZmFjZXM7CiAgICAgIHRoaXMuZmFjZU5vcm1hbHMgPSBub3JtYWxzOwoKICAgICAgaWYgKHRoaXMuZmFjZU5vcm1hbHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy5jb21wdXRlTm9ybWFscygpOwogICAgICB9CgogICAgICBpZiAoIWJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSBib3VuZGluZ1NwaGVyZVJhZGl1czsKICAgICAgfQoKICAgICAgdGhpcy53b3JsZFZlcnRpY2VzID0gW107IC8vIFdvcmxkIHRyYW5zZm9ybWVkIHZlcnNpb24gb2YgLnZlcnRpY2VzCgogICAgICB0aGlzLndvcmxkVmVydGljZXNOZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgIHRoaXMud29ybGRGYWNlTm9ybWFscyA9IFtdOyAvLyBXb3JsZCB0cmFuc2Zvcm1lZCB2ZXJzaW9uIG9mIC5mYWNlTm9ybWFscwoKICAgICAgdGhpcy53b3JsZEZhY2VOb3JtYWxzTmVlZHNVcGRhdGUgPSB0cnVlOwogICAgICB0aGlzLnVuaXF1ZUF4ZXMgPSBheGVzID8gYXhlcy5zbGljZSgpIDogbnVsbDsKICAgICAgdGhpcy51bmlxdWVFZGdlcyA9IFtdOwogICAgICB0aGlzLmNvbXB1dGVFZGdlcygpOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyB1bmlxdWVFZGdlcwogICAgICovCgoKICAgIGNvbXB1dGVFZGdlcygpIHsKICAgICAgY29uc3QgZmFjZXMgPSB0aGlzLmZhY2VzOwogICAgICBjb25zdCB2ZXJ0aWNlcyA9IHRoaXMudmVydGljZXM7CiAgICAgIGNvbnN0IGVkZ2VzID0gdGhpcy51bmlxdWVFZGdlczsKICAgICAgZWRnZXMubGVuZ3RoID0gMDsKICAgICAgY29uc3QgZWRnZSA9IG5ldyBWZWMzKCk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gZmFjZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBmYWNlID0gZmFjZXNbaV07CiAgICAgICAgY29uc3QgbnVtVmVydGljZXMgPSBmYWNlLmxlbmd0aDsKCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IG51bVZlcnRpY2VzOyBqKyspIHsKICAgICAgICAgIGNvbnN0IGsgPSAoaiArIDEpICUgbnVtVmVydGljZXM7CiAgICAgICAgICB2ZXJ0aWNlc1tmYWNlW2pdXS52c3ViKHZlcnRpY2VzW2ZhY2Vba11dLCBlZGdlKTsKICAgICAgICAgIGVkZ2Uubm9ybWFsaXplKCk7CiAgICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTsKCiAgICAgICAgICBmb3IgKGxldCBwID0gMDsgcCAhPT0gZWRnZXMubGVuZ3RoOyBwKyspIHsKICAgICAgICAgICAgaWYgKGVkZ2VzW3BdLmFsbW9zdEVxdWFscyhlZGdlKSB8fCBlZGdlc1twXS5hbG1vc3RFcXVhbHMoZWRnZSkpIHsKICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoIWZvdW5kKSB7CiAgICAgICAgICAgIGVkZ2VzLnB1c2goZWRnZS5jbG9uZSgpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0aGUgbm9ybWFscyBvZiB0aGUgZmFjZXMuCiAgICAgKiBXaWxsIHJldXNlIGV4aXN0aW5nIFZlYzMgb2JqZWN0cyBpbiB0aGUgYGZhY2VOb3JtYWxzYCBhcnJheSBpZiB0aGV5IGV4aXN0LgogICAgICovCgoKICAgIGNvbXB1dGVOb3JtYWxzKCkgewogICAgICB0aGlzLmZhY2VOb3JtYWxzLmxlbmd0aCA9IHRoaXMuZmFjZXMubGVuZ3RoOyAvLyBHZW5lcmF0ZSBub3JtYWxzCgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmFjZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAvLyBDaGVjayBzbyBhbGwgdmVydGljZXMgZXhpc3RzIGZvciB0aGlzIGZhY2UKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuZmFjZXNbaV0ubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGlmICghdGhpcy52ZXJ0aWNlc1t0aGlzLmZhY2VzW2ldW2pdXSkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFZlcnRleCAke3RoaXMuZmFjZXNbaV1bal19IG5vdCBmb3VuZCFgKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGNvbnN0IG4gPSB0aGlzLmZhY2VOb3JtYWxzW2ldIHx8IG5ldyBWZWMzKCk7CiAgICAgICAgdGhpcy5nZXRGYWNlTm9ybWFsKGksIG4pOwogICAgICAgIG4ubmVnYXRlKG4pOwogICAgICAgIHRoaXMuZmFjZU5vcm1hbHNbaV0gPSBuOwogICAgICAgIGNvbnN0IHZlcnRleCA9IHRoaXMudmVydGljZXNbdGhpcy5mYWNlc1tpXVswXV07CgogICAgICAgIGlmIChuLmRvdCh2ZXJ0ZXgpIDwgMCkgewogICAgICAgICAgY29uc29sZS5lcnJvcihgLmZhY2VOb3JtYWxzWyR7aX1dID0gVmVjMygke24udG9TdHJpbmcoKX0pIGxvb2tzIGxpa2UgaXQgcG9pbnRzIGludG8gdGhlIHNoYXBlPyBUaGUgdmVydGljZXMgZm9sbG93LiBNYWtlIHN1cmUgdGhleSBhcmUgb3JkZXJlZCBDQ1cgYXJvdW5kIHRoZSBub3JtYWwsIHVzaW5nIHRoZSByaWdodCBoYW5kIHJ1bGUuYCk7CgogICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmZhY2VzW2ldLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgIGNvbnNvbGUud2FybihgLnZlcnRpY2VzWyR7dGhpcy5mYWNlc1tpXVtqXX1dID0gVmVjMygke3RoaXMudmVydGljZXNbdGhpcy5mYWNlc1tpXVtqXV0udG9TdHJpbmcoKX0pYCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGUgdGhlIG5vcm1hbCBvZiBhIGZhY2UgZnJvbSBpdHMgdmVydGljZXMKICAgICAqLwoKCiAgICBnZXRGYWNlTm9ybWFsKGksIHRhcmdldCkgewogICAgICBjb25zdCBmID0gdGhpcy5mYWNlc1tpXTsKICAgICAgY29uc3QgdmEgPSB0aGlzLnZlcnRpY2VzW2ZbMF1dOwogICAgICBjb25zdCB2YiA9IHRoaXMudmVydGljZXNbZlsxXV07CiAgICAgIGNvbnN0IHZjID0gdGhpcy52ZXJ0aWNlc1tmWzJdXTsKICAgICAgQ29udmV4UG9seWhlZHJvbi5jb21wdXRlTm9ybWFsKHZhLCB2YiwgdmMsIHRhcmdldCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBmYWNlIG5vcm1hbCBnaXZlbiAzIHZlcnRpY2VzCiAgICAgKi8KCgogICAgc3RhdGljIGNvbXB1dGVOb3JtYWwodmEsIHZiLCB2YywgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IGNiID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgYWIgPSBuZXcgVmVjMygpOwogICAgICB2Yi52c3ViKHZhLCBhYik7CiAgICAgIHZjLnZzdWIodmIsIGNiKTsKICAgICAgY2IuY3Jvc3MoYWIsIHRhcmdldCk7CgogICAgICBpZiAoIXRhcmdldC5pc1plcm8oKSkgewogICAgICAgIHRhcmdldC5ub3JtYWxpemUoKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBAcGFyYW0gbWluRGlzdCBDbGFtcCBkaXN0YW5jZQogICAgICogQHBhcmFtIHJlc3VsdCBUaGUgYW4gYXJyYXkgb2YgY29udGFjdCBwb2ludCBvYmplY3RzLCBzZWUgY2xpcEZhY2VBZ2FpbnN0SHVsbAogICAgICovCgoKICAgIGNsaXBBZ2FpbnN0SHVsbChwb3NBLCBxdWF0QSwgaHVsbEIsIHBvc0IsIHF1YXRCLCBzZXBhcmF0aW5nTm9ybWFsLCBtaW5EaXN0LCBtYXhEaXN0LCByZXN1bHQpIHsKICAgICAgY29uc3QgV29ybGROb3JtYWwgPSBuZXcgVmVjMygpOwogICAgICBsZXQgY2xvc2VzdEZhY2VCID0gLTE7CiAgICAgIGxldCBkbWF4ID0gLU51bWJlci5NQVhfVkFMVUU7CgogICAgICBmb3IgKGxldCBmYWNlID0gMDsgZmFjZSA8IGh1bGxCLmZhY2VzLmxlbmd0aDsgZmFjZSsrKSB7CiAgICAgICAgV29ybGROb3JtYWwuY29weShodWxsQi5mYWNlTm9ybWFsc1tmYWNlXSk7CiAgICAgICAgcXVhdEIudm11bHQoV29ybGROb3JtYWwsIFdvcmxkTm9ybWFsKTsKICAgICAgICBjb25zdCBkID0gV29ybGROb3JtYWwuZG90KHNlcGFyYXRpbmdOb3JtYWwpOwoKICAgICAgICBpZiAoZCA+IGRtYXgpIHsKICAgICAgICAgIGRtYXggPSBkOwogICAgICAgICAgY2xvc2VzdEZhY2VCID0gZmFjZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGNvbnN0IHdvcmxkVmVydHNCMSA9IFtdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBodWxsQi5mYWNlc1tjbG9zZXN0RmFjZUJdLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgYiA9IGh1bGxCLnZlcnRpY2VzW2h1bGxCLmZhY2VzW2Nsb3Nlc3RGYWNlQl1baV1dOwogICAgICAgIGNvbnN0IHdvcmxkYiA9IG5ldyBWZWMzKCk7CiAgICAgICAgd29ybGRiLmNvcHkoYik7CiAgICAgICAgcXVhdEIudm11bHQod29ybGRiLCB3b3JsZGIpOwogICAgICAgIHBvc0IudmFkZCh3b3JsZGIsIHdvcmxkYik7CiAgICAgICAgd29ybGRWZXJ0c0IxLnB1c2god29ybGRiKTsKICAgICAgfQoKICAgICAgaWYgKGNsb3Nlc3RGYWNlQiA+PSAwKSB7CiAgICAgICAgdGhpcy5jbGlwRmFjZUFnYWluc3RIdWxsKHNlcGFyYXRpbmdOb3JtYWwsIHBvc0EsIHF1YXRBLCB3b3JsZFZlcnRzQjEsIG1pbkRpc3QsIG1heERpc3QsIHJlc3VsdCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogRmluZCB0aGUgc2VwYXJhdGluZyBheGlzIGJldHdlZW4gdGhpcyBodWxsIGFuZCBhbm90aGVyCiAgICAgKiBAcGFyYW0gdGFyZ2V0IFRoZSB0YXJnZXQgdmVjdG9yIHRvIHNhdmUgdGhlIGF4aXMgaW4KICAgICAqIEByZXR1cm4gUmV0dXJucyBmYWxzZSBpZiBhIHNlcGFyYXRpb24gaXMgZm91bmQsIGVsc2UgdHJ1ZQogICAgICovCgoKICAgIGZpbmRTZXBhcmF0aW5nQXhpcyhodWxsQiwgcG9zQSwgcXVhdEEsIHBvc0IsIHF1YXRCLCB0YXJnZXQsIGZhY2VMaXN0QSwgZmFjZUxpc3RCKSB7CiAgICAgIGNvbnN0IGZhY2VBTm9ybWFsV1MzID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgV29ybGRub3JtYWwxID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgZGVsdGFDID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3Qgd29ybGRFZGdlMCA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHdvcmxkRWRnZTEgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBDcm9zcyA9IG5ldyBWZWMzKCk7CiAgICAgIGxldCBkbWluID0gTnVtYmVyLk1BWF9WQUxVRTsKICAgICAgY29uc3QgaHVsbEEgPSB0aGlzOwoKICAgICAgaWYgKCFodWxsQS51bmlxdWVBeGVzKSB7CiAgICAgICAgY29uc3QgbnVtRmFjZXNBID0gZmFjZUxpc3RBID8gZmFjZUxpc3RBLmxlbmd0aCA6IGh1bGxBLmZhY2VzLmxlbmd0aDsgLy8gVGVzdCBmYWNlIG5vcm1hbHMgZnJvbSBodWxsQQoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUZhY2VzQTsgaSsrKSB7CiAgICAgICAgICBjb25zdCBmaSA9IGZhY2VMaXN0QSA/IGZhY2VMaXN0QVtpXSA6IGk7IC8vIEdldCB3b3JsZCBmYWNlIG5vcm1hbAoKICAgICAgICAgIGZhY2VBTm9ybWFsV1MzLmNvcHkoaHVsbEEuZmFjZU5vcm1hbHNbZmldKTsKICAgICAgICAgIHF1YXRBLnZtdWx0KGZhY2VBTm9ybWFsV1MzLCBmYWNlQU5vcm1hbFdTMyk7CiAgICAgICAgICBjb25zdCBkID0gaHVsbEEudGVzdFNlcEF4aXMoZmFjZUFOb3JtYWxXUzMsIGh1bGxCLCBwb3NBLCBxdWF0QSwgcG9zQiwgcXVhdEIpOwoKICAgICAgICAgIGlmIChkID09PSBmYWxzZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGQgPCBkbWluKSB7CiAgICAgICAgICAgIGRtaW4gPSBkOwogICAgICAgICAgICB0YXJnZXQuY29weShmYWNlQU5vcm1hbFdTMyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIFRlc3QgdW5pcXVlIGF4ZXMKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gaHVsbEEudW5pcXVlQXhlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgLy8gR2V0IHdvcmxkIGF4aXMKICAgICAgICAgIHF1YXRBLnZtdWx0KGh1bGxBLnVuaXF1ZUF4ZXNbaV0sIGZhY2VBTm9ybWFsV1MzKTsKICAgICAgICAgIGNvbnN0IGQgPSBodWxsQS50ZXN0U2VwQXhpcyhmYWNlQU5vcm1hbFdTMywgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0Qik7CgogICAgICAgICAgaWYgKGQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZCA8IGRtaW4pIHsKICAgICAgICAgICAgZG1pbiA9IGQ7CiAgICAgICAgICAgIHRhcmdldC5jb3B5KGZhY2VBTm9ybWFsV1MzKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICghaHVsbEIudW5pcXVlQXhlcykgewogICAgICAgIC8vIFRlc3QgZmFjZSBub3JtYWxzIGZyb20gaHVsbEIKICAgICAgICBjb25zdCBudW1GYWNlc0IgPSBmYWNlTGlzdEIgPyBmYWNlTGlzdEIubGVuZ3RoIDogaHVsbEIuZmFjZXMubGVuZ3RoOwoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUZhY2VzQjsgaSsrKSB7CiAgICAgICAgICBjb25zdCBmaSA9IGZhY2VMaXN0QiA/IGZhY2VMaXN0QltpXSA6IGk7CiAgICAgICAgICBXb3JsZG5vcm1hbDEuY29weShodWxsQi5mYWNlTm9ybWFsc1tmaV0pOwogICAgICAgICAgcXVhdEIudm11bHQoV29ybGRub3JtYWwxLCBXb3JsZG5vcm1hbDEpOwogICAgICAgICAgY29uc3QgZCA9IGh1bGxBLnRlc3RTZXBBeGlzKFdvcmxkbm9ybWFsMSwgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0Qik7CgogICAgICAgICAgaWYgKGQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZCA8IGRtaW4pIHsKICAgICAgICAgICAgZG1pbiA9IGQ7CiAgICAgICAgICAgIHRhcmdldC5jb3B5KFdvcmxkbm9ybWFsMSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIFRlc3QgdW5pcXVlIGF4ZXMgaW4gQgogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBodWxsQi51bmlxdWVBeGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBxdWF0Qi52bXVsdChodWxsQi51bmlxdWVBeGVzW2ldLCBXb3JsZG5vcm1hbDEpOwogICAgICAgICAgY29uc3QgZCA9IGh1bGxBLnRlc3RTZXBBeGlzKFdvcmxkbm9ybWFsMSwgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0Qik7CgogICAgICAgICAgaWYgKGQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZCA8IGRtaW4pIHsKICAgICAgICAgICAgZG1pbiA9IGQ7CiAgICAgICAgICAgIHRhcmdldC5jb3B5KFdvcmxkbm9ybWFsMSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIFRlc3QgZWRnZXMKCgogICAgICBmb3IgKGxldCBlMCA9IDA7IGUwICE9PSBodWxsQS51bmlxdWVFZGdlcy5sZW5ndGg7IGUwKyspIHsKICAgICAgICAvLyBHZXQgd29ybGQgZWRnZQogICAgICAgIHF1YXRBLnZtdWx0KGh1bGxBLnVuaXF1ZUVkZ2VzW2UwXSwgd29ybGRFZGdlMCk7CgogICAgICAgIGZvciAobGV0IGUxID0gMDsgZTEgIT09IGh1bGxCLnVuaXF1ZUVkZ2VzLmxlbmd0aDsgZTErKykgewogICAgICAgICAgLy8gR2V0IHdvcmxkIGVkZ2UgMgogICAgICAgICAgcXVhdEIudm11bHQoaHVsbEIudW5pcXVlRWRnZXNbZTFdLCB3b3JsZEVkZ2UxKTsKICAgICAgICAgIHdvcmxkRWRnZTAuY3Jvc3Mod29ybGRFZGdlMSwgQ3Jvc3MpOwoKICAgICAgICAgIGlmICghQ3Jvc3MuYWxtb3N0WmVybygpKSB7CiAgICAgICAgICAgIENyb3NzLm5vcm1hbGl6ZSgpOwogICAgICAgICAgICBjb25zdCBkaXN0ID0gaHVsbEEudGVzdFNlcEF4aXMoQ3Jvc3MsIGh1bGxCLCBwb3NBLCBxdWF0QSwgcG9zQiwgcXVhdEIpOwoKICAgICAgICAgICAgaWYgKGRpc3QgPT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoZGlzdCA8IGRtaW4pIHsKICAgICAgICAgICAgICBkbWluID0gZGlzdDsKICAgICAgICAgICAgICB0YXJnZXQuY29weShDcm9zcyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHBvc0IudnN1Yihwb3NBLCBkZWx0YUMpOwoKICAgICAgaWYgKGRlbHRhQy5kb3QodGFyZ2V0KSA+IDAuMCkgewogICAgICAgIHRhcmdldC5uZWdhdGUodGFyZ2V0KTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIFRlc3Qgc2VwYXJhdGluZyBheGlzIGFnYWluc3QgdHdvIGh1bGxzLiBCb3RoIGh1bGxzIGFyZSBwcm9qZWN0ZWQgb250byB0aGUgYXhpcyBhbmQgdGhlIG92ZXJsYXAgc2l6ZSBpcyByZXR1cm5lZCBpZiB0aGVyZSBpcyBvbmUuCiAgICAgKiBAcmV0dXJuIFRoZSBvdmVybGFwIGRlcHRoLCBvciBGQUxTRSBpZiBubyBwZW5ldHJhdGlvbi4KICAgICAqLwoKCiAgICB0ZXN0U2VwQXhpcyhheGlzLCBodWxsQiwgcG9zQSwgcXVhdEEsIHBvc0IsIHF1YXRCKSB7CiAgICAgIGNvbnN0IGh1bGxBID0gdGhpczsKICAgICAgQ29udmV4UG9seWhlZHJvbi5wcm9qZWN0KGh1bGxBLCBheGlzLCBwb3NBLCBxdWF0QSwgbWF4bWluQSk7CiAgICAgIENvbnZleFBvbHloZWRyb24ucHJvamVjdChodWxsQiwgYXhpcywgcG9zQiwgcXVhdEIsIG1heG1pbkIpOwogICAgICBjb25zdCBtYXhBID0gbWF4bWluQVswXTsKICAgICAgY29uc3QgbWluQSA9IG1heG1pbkFbMV07CiAgICAgIGNvbnN0IG1heEIgPSBtYXhtaW5CWzBdOwogICAgICBjb25zdCBtaW5CID0gbWF4bWluQlsxXTsKCiAgICAgIGlmIChtYXhBIDwgbWluQiB8fCBtYXhCIDwgbWluQSkgewogICAgICAgIHJldHVybiBmYWxzZTsgLy8gU2VwYXJhdGVkCiAgICAgIH0KCiAgICAgIGNvbnN0IGQwID0gbWF4QSAtIG1pbkI7CiAgICAgIGNvbnN0IGQxID0gbWF4QiAtIG1pbkE7CiAgICAgIGNvbnN0IGRlcHRoID0gZDAgPCBkMSA/IGQwIDogZDE7CiAgICAgIHJldHVybiBkZXB0aDsKICAgIH0KICAgIC8qKgogICAgICogY2FsY3VsYXRlTG9jYWxJbmVydGlhCiAgICAgKi8KCgogICAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkgewogICAgICAvLyBBcHByb3hpbWF0ZSB3aXRoIGJveCBpbmVydGlhCiAgICAgIC8vIEV4YWN0IGluZXJ0aWEgY2FsY3VsYXRpb24gaXMgb3ZlcmtpbGwsIGJ1dCBzZWUgaHR0cDovL2dlb21ldHJpY3Rvb2xzLmNvbS9Eb2N1bWVudGF0aW9uL1BvbHloZWRyYWxNYXNzUHJvcGVydGllcy5wZGYgZm9yIHRoZSBjb3JyZWN0IHdheSB0byBkbyBpdAogICAgICBjb25zdCBhYWJibWF4ID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgYWFiYm1pbiA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuY29tcHV0ZUxvY2FsQUFCQihhYWJibWluLCBhYWJibWF4KTsKICAgICAgY29uc3QgeCA9IGFhYmJtYXgueCAtIGFhYmJtaW4ueDsKICAgICAgY29uc3QgeSA9IGFhYmJtYXgueSAtIGFhYmJtaW4ueTsKICAgICAgY29uc3QgeiA9IGFhYmJtYXgueiAtIGFhYmJtaW4uejsKICAgICAgdGFyZ2V0LnggPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogeSAqIDIgKiB5ICsgMiAqIHogKiAyICogeik7CiAgICAgIHRhcmdldC55ID0gMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIHggKiAyICogeCArIDIgKiB6ICogMiAqIHopOwogICAgICB0YXJnZXQueiA9IDEuMCAvIDEyLjAgKiBtYXNzICogKDIgKiB5ICogMiAqIHkgKyAyICogeCAqIDIgKiB4KTsKICAgIH0KICAgIC8qKgogICAgICogQHBhcmFtIGZhY2VfaSBJbmRleCBvZiB0aGUgZmFjZQogICAgICovCgoKICAgIGdldFBsYW5lQ29uc3RhbnRPZkZhY2UoZmFjZV9pKSB7CiAgICAgIGNvbnN0IGYgPSB0aGlzLmZhY2VzW2ZhY2VfaV07CiAgICAgIGNvbnN0IG4gPSB0aGlzLmZhY2VOb3JtYWxzW2ZhY2VfaV07CiAgICAgIGNvbnN0IHYgPSB0aGlzLnZlcnRpY2VzW2ZbMF1dOwogICAgICBjb25zdCBjID0gLW4uZG90KHYpOwogICAgICByZXR1cm4gYzsKICAgIH0KICAgIC8qKgogICAgICogQ2xpcCBhIGZhY2UgYWdhaW5zdCBhIGh1bGwuCiAgICAgKiBAcGFyYW0gd29ybGRWZXJ0c0IxIEFuIGFycmF5IG9mIFZlYzMgd2l0aCB2ZXJ0aWNlcyBpbiB0aGUgd29ybGQgZnJhbWUuCiAgICAgKiBAcGFyYW0gbWluRGlzdCBEaXN0YW5jZSBjbGFtcGluZwogICAgICogQHBhcmFtIEFycmF5IHJlc3VsdCBBcnJheSB0byBzdG9yZSByZXN1bHRpbmcgY29udGFjdCBwb2ludHMgaW4uIFdpbGwgYmUgb2JqZWN0cyB3aXRoIHByb3BlcnRpZXM6IHBvaW50LCBkZXB0aCwgbm9ybWFsLiBUaGVzZSBhcmUgcmVwcmVzZW50ZWQgaW4gd29ybGQgY29vcmRpbmF0ZXMuCiAgICAgKi8KCgogICAgY2xpcEZhY2VBZ2FpbnN0SHVsbChzZXBhcmF0aW5nTm9ybWFsLCBwb3NBLCBxdWF0QSwgd29ybGRWZXJ0c0IxLCBtaW5EaXN0LCBtYXhEaXN0LCByZXN1bHQpIHsKICAgICAgY29uc3QgZmFjZUFOb3JtYWxXUyA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGVkZ2UwID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgV29ybGRFZGdlMCA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHdvcmxkUGxhbmVBbm9ybWFsMSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHBsYW5lTm9ybWFsV1MxID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3Qgd29ybGRBMSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGxvY2FsUGxhbmVOb3JtYWwgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBwbGFuZU5vcm1hbFdTID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgaHVsbEEgPSB0aGlzOwogICAgICBjb25zdCB3b3JsZFZlcnRzQjIgPSBbXTsKICAgICAgY29uc3QgcFZ0eEluID0gd29ybGRWZXJ0c0IxOwogICAgICBjb25zdCBwVnR4T3V0ID0gd29ybGRWZXJ0c0IyOwogICAgICBsZXQgY2xvc2VzdEZhY2VBID0gLTE7CiAgICAgIGxldCBkbWluID0gTnVtYmVyLk1BWF9WQUxVRTsgLy8gRmluZCB0aGUgZmFjZSB3aXRoIG5vcm1hbCBjbG9zZXN0IHRvIHRoZSBzZXBhcmF0aW5nIGF4aXMKCiAgICAgIGZvciAobGV0IGZhY2UgPSAwOyBmYWNlIDwgaHVsbEEuZmFjZXMubGVuZ3RoOyBmYWNlKyspIHsKICAgICAgICBmYWNlQU5vcm1hbFdTLmNvcHkoaHVsbEEuZmFjZU5vcm1hbHNbZmFjZV0pOwogICAgICAgIHF1YXRBLnZtdWx0KGZhY2VBTm9ybWFsV1MsIGZhY2VBTm9ybWFsV1MpOwogICAgICAgIGNvbnN0IGQgPSBmYWNlQU5vcm1hbFdTLmRvdChzZXBhcmF0aW5nTm9ybWFsKTsKCiAgICAgICAgaWYgKGQgPCBkbWluKSB7CiAgICAgICAgICBkbWluID0gZDsKICAgICAgICAgIGNsb3Nlc3RGYWNlQSA9IGZhY2U7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoY2xvc2VzdEZhY2VBIDwgMCkgewogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBHZXQgdGhlIGZhY2UgYW5kIGNvbnN0cnVjdCBjb25uZWN0ZWQgZmFjZXMKCgogICAgICBjb25zdCBwb2x5QSA9IGh1bGxBLmZhY2VzW2Nsb3Nlc3RGYWNlQV07CiAgICAgIHBvbHlBLmNvbm5lY3RlZEZhY2VzID0gW107CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGh1bGxBLmZhY2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBodWxsQS5mYWNlc1tpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgaWYgKAogICAgICAgICAgLyogU2hhcmluZyBhIHZlcnRleCovCiAgICAgICAgICBwb2x5QS5pbmRleE9mKGh1bGxBLmZhY2VzW2ldW2pdKSAhPT0gLTEgJiYKICAgICAgICAgIC8qIE5vdCB0aGUgb25lIHdlIGFyZSBsb29raW5nIGZvciBjb25uZWN0aW9ucyBmcm9tICovCiAgICAgICAgICBpICE9PSBjbG9zZXN0RmFjZUEgJiYKICAgICAgICAgIC8qIE5vdCBhbHJlYWR5IGFkZGVkICovCiAgICAgICAgICBwb2x5QS5jb25uZWN0ZWRGYWNlcy5pbmRleE9mKGkpID09PSAtMSkgewogICAgICAgICAgICBwb2x5QS5jb25uZWN0ZWRGYWNlcy5wdXNoKGkpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSAvLyBDbGlwIHRoZSBwb2x5Z29uIHRvIHRoZSBiYWNrIG9mIHRoZSBwbGFuZXMgb2YgYWxsIGZhY2VzIG9mIGh1bGwgQSwKICAgICAgLy8gdGhhdCBhcmUgYWRqYWNlbnQgdG8gdGhlIHdpdG5lc3MgZmFjZQoKCiAgICAgIGNvbnN0IG51bVZlcnRpY2VzQSA9IHBvbHlBLmxlbmd0aDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtVmVydGljZXNBOyBpKyspIHsKICAgICAgICBjb25zdCBhID0gaHVsbEEudmVydGljZXNbcG9seUFbaV1dOwogICAgICAgIGNvbnN0IGIgPSBodWxsQS52ZXJ0aWNlc1twb2x5QVsoaSArIDEpICUgbnVtVmVydGljZXNBXV07CiAgICAgICAgYS52c3ViKGIsIGVkZ2UwKTsKICAgICAgICBXb3JsZEVkZ2UwLmNvcHkoZWRnZTApOwogICAgICAgIHF1YXRBLnZtdWx0KFdvcmxkRWRnZTAsIFdvcmxkRWRnZTApOwogICAgICAgIHBvc0EudmFkZChXb3JsZEVkZ2UwLCBXb3JsZEVkZ2UwKTsKICAgICAgICB3b3JsZFBsYW5lQW5vcm1hbDEuY29weSh0aGlzLmZhY2VOb3JtYWxzW2Nsb3Nlc3RGYWNlQV0pOwogICAgICAgIHF1YXRBLnZtdWx0KHdvcmxkUGxhbmVBbm9ybWFsMSwgd29ybGRQbGFuZUFub3JtYWwxKTsKICAgICAgICBwb3NBLnZhZGQod29ybGRQbGFuZUFub3JtYWwxLCB3b3JsZFBsYW5lQW5vcm1hbDEpOwogICAgICAgIFdvcmxkRWRnZTAuY3Jvc3Mod29ybGRQbGFuZUFub3JtYWwxLCBwbGFuZU5vcm1hbFdTMSk7CiAgICAgICAgcGxhbmVOb3JtYWxXUzEubmVnYXRlKHBsYW5lTm9ybWFsV1MxKTsKICAgICAgICB3b3JsZEExLmNvcHkoYSk7CiAgICAgICAgcXVhdEEudm11bHQod29ybGRBMSwgd29ybGRBMSk7CiAgICAgICAgcG9zQS52YWRkKHdvcmxkQTEsIHdvcmxkQTEpOwogICAgICAgIGNvbnN0IG90aGVyRmFjZSA9IHBvbHlBLmNvbm5lY3RlZEZhY2VzW2ldOwogICAgICAgIGxvY2FsUGxhbmVOb3JtYWwuY29weSh0aGlzLmZhY2VOb3JtYWxzW290aGVyRmFjZV0pOwogICAgICAgIGNvbnN0IGxvY2FsUGxhbmVFcSA9IHRoaXMuZ2V0UGxhbmVDb25zdGFudE9mRmFjZShvdGhlckZhY2UpOwogICAgICAgIHBsYW5lTm9ybWFsV1MuY29weShsb2NhbFBsYW5lTm9ybWFsKTsKICAgICAgICBxdWF0QS52bXVsdChwbGFuZU5vcm1hbFdTLCBwbGFuZU5vcm1hbFdTKTsKICAgICAgICBjb25zdCBwbGFuZUVxV1MgPSBsb2NhbFBsYW5lRXEgLSBwbGFuZU5vcm1hbFdTLmRvdChwb3NBKTsgLy8gQ2xpcCBmYWNlIGFnYWluc3Qgb3VyIGNvbnN0cnVjdGVkIHBsYW5lCgogICAgICAgIHRoaXMuY2xpcEZhY2VBZ2FpbnN0UGxhbmUocFZ0eEluLCBwVnR4T3V0LCBwbGFuZU5vcm1hbFdTLCBwbGFuZUVxV1MpOyAvLyBUaHJvdyBhd2F5IGFsbCBjbGlwcGVkIHBvaW50cywgYnV0IHNhdmUgdGhlIHJlbWFpbmluZyB1bnRpbCBuZXh0IGNsaXAKCiAgICAgICAgd2hpbGUgKHBWdHhJbi5sZW5ndGgpIHsKICAgICAgICAgIHBWdHhJbi5zaGlmdCgpOwogICAgICAgIH0KCiAgICAgICAgd2hpbGUgKHBWdHhPdXQubGVuZ3RoKSB7CiAgICAgICAgICBwVnR4SW4ucHVzaChwVnR4T3V0LnNoaWZ0KCkpOwogICAgICAgIH0KICAgICAgfSAvLyBvbmx5IGtlZXAgY29udGFjdCBwb2ludHMgdGhhdCBhcmUgYmVoaW5kIHRoZSB3aXRuZXNzIGZhY2UKCgogICAgICBsb2NhbFBsYW5lTm9ybWFsLmNvcHkodGhpcy5mYWNlTm9ybWFsc1tjbG9zZXN0RmFjZUFdKTsKICAgICAgY29uc3QgbG9jYWxQbGFuZUVxID0gdGhpcy5nZXRQbGFuZUNvbnN0YW50T2ZGYWNlKGNsb3Nlc3RGYWNlQSk7CiAgICAgIHBsYW5lTm9ybWFsV1MuY29weShsb2NhbFBsYW5lTm9ybWFsKTsKICAgICAgcXVhdEEudm11bHQocGxhbmVOb3JtYWxXUywgcGxhbmVOb3JtYWxXUyk7CiAgICAgIGNvbnN0IHBsYW5lRXFXUyA9IGxvY2FsUGxhbmVFcSAtIHBsYW5lTm9ybWFsV1MuZG90KHBvc0EpOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwVnR4SW4ubGVuZ3RoOyBpKyspIHsKICAgICAgICBsZXQgZGVwdGggPSBwbGFuZU5vcm1hbFdTLmRvdChwVnR4SW5baV0pICsgcGxhbmVFcVdTOyAvLyA/Pz8KCiAgICAgICAgaWYgKGRlcHRoIDw9IG1pbkRpc3QpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGBjbGFtcGVkOiBkZXB0aD0ke2RlcHRofSB0byBtaW5EaXN0PSR7bWluRGlzdH1gKTsKICAgICAgICAgIGRlcHRoID0gbWluRGlzdDsKICAgICAgICB9CgogICAgICAgIGlmIChkZXB0aCA8PSBtYXhEaXN0KSB7CiAgICAgICAgICBjb25zdCBwb2ludCA9IHBWdHhJbltpXTsKCiAgICAgICAgICBpZiAoZGVwdGggPD0gMWUtNikgewogICAgICAgICAgICBjb25zdCBwID0gewogICAgICAgICAgICAgIHBvaW50LAogICAgICAgICAgICAgIG5vcm1hbDogcGxhbmVOb3JtYWxXUywKICAgICAgICAgICAgICBkZXB0aAogICAgICAgICAgICB9OwogICAgICAgICAgICByZXN1bHQucHVzaChwKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2xpcCBhIGZhY2UgaW4gYSBodWxsIGFnYWluc3QgdGhlIGJhY2sgb2YgYSBwbGFuZS4KICAgICAqIEBwYXJhbSBwbGFuZUNvbnN0YW50IFRoZSBjb25zdGFudCBpbiB0aGUgbWF0aGVtYXRpY2FsIHBsYW5lIGVxdWF0aW9uCiAgICAgKi8KCgogICAgY2xpcEZhY2VBZ2FpbnN0UGxhbmUoaW5WZXJ0aWNlcywgb3V0VmVydGljZXMsIHBsYW5lTm9ybWFsLCBwbGFuZUNvbnN0YW50KSB7CiAgICAgIGxldCBuX2RvdF9maXJzdDsKICAgICAgbGV0IG5fZG90X2xhc3Q7CiAgICAgIGNvbnN0IG51bVZlcnRzID0gaW5WZXJ0aWNlcy5sZW5ndGg7CgogICAgICBpZiAobnVtVmVydHMgPCAyKSB7CiAgICAgICAgcmV0dXJuIG91dFZlcnRpY2VzOwogICAgICB9CgogICAgICBsZXQgZmlyc3RWZXJ0ZXggPSBpblZlcnRpY2VzW2luVmVydGljZXMubGVuZ3RoIC0gMV07CiAgICAgIGxldCBsYXN0VmVydGV4ID0gaW5WZXJ0aWNlc1swXTsKICAgICAgbl9kb3RfZmlyc3QgPSBwbGFuZU5vcm1hbC5kb3QoZmlyc3RWZXJ0ZXgpICsgcGxhbmVDb25zdGFudDsKCiAgICAgIGZvciAobGV0IHZpID0gMDsgdmkgPCBudW1WZXJ0czsgdmkrKykgewogICAgICAgIGxhc3RWZXJ0ZXggPSBpblZlcnRpY2VzW3ZpXTsKICAgICAgICBuX2RvdF9sYXN0ID0gcGxhbmVOb3JtYWwuZG90KGxhc3RWZXJ0ZXgpICsgcGxhbmVDb25zdGFudDsKCiAgICAgICAgaWYgKG5fZG90X2ZpcnN0IDwgMCkgewogICAgICAgICAgaWYgKG5fZG90X2xhc3QgPCAwKSB7CiAgICAgICAgICAgIC8vIFN0YXJ0IDwgMCwgZW5kIDwgMCwgc28gb3V0cHV0IGxhc3RWZXJ0ZXgKICAgICAgICAgICAgY29uc3QgbmV3diA9IG5ldyBWZWMzKCk7CiAgICAgICAgICAgIG5ld3YuY29weShsYXN0VmVydGV4KTsKICAgICAgICAgICAgb3V0VmVydGljZXMucHVzaChuZXd2KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIFN0YXJ0IDwgMCwgZW5kID49IDAsIHNvIG91dHB1dCBpbnRlcnNlY3Rpb24KICAgICAgICAgICAgY29uc3QgbmV3diA9IG5ldyBWZWMzKCk7CiAgICAgICAgICAgIGZpcnN0VmVydGV4LmxlcnAobGFzdFZlcnRleCwgbl9kb3RfZmlyc3QgLyAobl9kb3RfZmlyc3QgLSBuX2RvdF9sYXN0KSwgbmV3dik7CiAgICAgICAgICAgIG91dFZlcnRpY2VzLnB1c2gobmV3dik7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChuX2RvdF9sYXN0IDwgMCkgewogICAgICAgICAgICAvLyBTdGFydCA+PSAwLCBlbmQgPCAwIHNvIG91dHB1dCBpbnRlcnNlY3Rpb24gYW5kIGVuZAogICAgICAgICAgICBjb25zdCBuZXd2ID0gbmV3IFZlYzMoKTsKICAgICAgICAgICAgZmlyc3RWZXJ0ZXgubGVycChsYXN0VmVydGV4LCBuX2RvdF9maXJzdCAvIChuX2RvdF9maXJzdCAtIG5fZG90X2xhc3QpLCBuZXd2KTsKICAgICAgICAgICAgb3V0VmVydGljZXMucHVzaChuZXd2KTsKICAgICAgICAgICAgb3V0VmVydGljZXMucHVzaChsYXN0VmVydGV4KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZpcnN0VmVydGV4ID0gbGFzdFZlcnRleDsKICAgICAgICBuX2RvdF9maXJzdCA9IG5fZG90X2xhc3Q7CiAgICAgIH0KCiAgICAgIHJldHVybiBvdXRWZXJ0aWNlczsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyBgLndvcmxkVmVydGljZXNgIGFuZCBzZXRzIGAud29ybGRWZXJ0aWNlc05lZWRzVXBkYXRlYCB0byBmYWxzZS4KICAgICAqLwoKCiAgICBjb21wdXRlV29ybGRWZXJ0aWNlcyhwb3NpdGlvbiwgcXVhdCkgewogICAgICB3aGlsZSAodGhpcy53b3JsZFZlcnRpY2VzLmxlbmd0aCA8IHRoaXMudmVydGljZXMubGVuZ3RoKSB7CiAgICAgICAgdGhpcy53b3JsZFZlcnRpY2VzLnB1c2gobmV3IFZlYzMoKSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsKICAgICAgY29uc3Qgd29ybGRWZXJ0cyA9IHRoaXMud29ybGRWZXJ0aWNlczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSB0aGlzLnZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgcXVhdC52bXVsdCh2ZXJ0c1tpXSwgd29ybGRWZXJ0c1tpXSk7CiAgICAgICAgcG9zaXRpb24udmFkZCh3b3JsZFZlcnRzW2ldLCB3b3JsZFZlcnRzW2ldKTsKICAgICAgfQoKICAgICAgdGhpcy53b3JsZFZlcnRpY2VzTmVlZHNVcGRhdGUgPSBmYWxzZTsKICAgIH0KCiAgICBjb21wdXRlTG9jYWxBQUJCKGFhYmJtaW4sIGFhYmJtYXgpIHsKICAgICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBhYWJibWluLnNldChOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFKTsKICAgICAgYWFiYm1heC5zZXQoLU51bWJlci5NQVhfVkFMVUUsIC1OdW1iZXIuTUFYX1ZBTFVFLCAtTnVtYmVyLk1BWF9WQUxVRSk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudmVydGljZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCB2ID0gdmVydGljZXNbaV07CgogICAgICAgIGlmICh2LnggPCBhYWJibWluLngpIHsKICAgICAgICAgIGFhYmJtaW4ueCA9IHYueDsKICAgICAgICB9IGVsc2UgaWYgKHYueCA+IGFhYmJtYXgueCkgewogICAgICAgICAgYWFiYm1heC54ID0gdi54OwogICAgICAgIH0KCiAgICAgICAgaWYgKHYueSA8IGFhYmJtaW4ueSkgewogICAgICAgICAgYWFiYm1pbi55ID0gdi55OwogICAgICAgIH0gZWxzZSBpZiAodi55ID4gYWFiYm1heC55KSB7CiAgICAgICAgICBhYWJibWF4LnkgPSB2Lnk7CiAgICAgICAgfQoKICAgICAgICBpZiAodi56IDwgYWFiYm1pbi56KSB7CiAgICAgICAgICBhYWJibWluLnogPSB2Lno7CiAgICAgICAgfSBlbHNlIGlmICh2LnogPiBhYWJibWF4LnopIHsKICAgICAgICAgIGFhYmJtYXgueiA9IHYuejsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyBgd29ybGRWZXJ0aWNlc2AgYW5kIHNldHMgYHdvcmxkVmVydGljZXNOZWVkc1VwZGF0ZWAgdG8gZmFsc2UuCiAgICAgKi8KCgogICAgY29tcHV0ZVdvcmxkRmFjZU5vcm1hbHMocXVhdCkgewogICAgICBjb25zdCBOID0gdGhpcy5mYWNlTm9ybWFscy5sZW5ndGg7CgogICAgICB3aGlsZSAodGhpcy53b3JsZEZhY2VOb3JtYWxzLmxlbmd0aCA8IE4pIHsKICAgICAgICB0aGlzLndvcmxkRmFjZU5vcm1hbHMucHVzaChuZXcgVmVjMygpKTsKICAgICAgfQoKICAgICAgY29uc3Qgbm9ybWFscyA9IHRoaXMuZmFjZU5vcm1hbHM7CiAgICAgIGNvbnN0IHdvcmxkTm9ybWFscyA9IHRoaXMud29ybGRGYWNlTm9ybWFsczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBxdWF0LnZtdWx0KG5vcm1hbHNbaV0sIHdvcmxkTm9ybWFsc1tpXSk7CiAgICAgIH0KCiAgICAgIHRoaXMud29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzCiAgICAgKi8KCgogICAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7CiAgICAgIC8vIEFzc3VtZSBwb2ludHMgYXJlIGRpc3RyaWJ1dGVkIHdpdGggbG9jYWwgKDAsMCwwKSBhcyBjZW50ZXIKICAgICAgbGV0IG1heDIgPSAwOwogICAgICBjb25zdCB2ZXJ0cyA9IHRoaXMudmVydGljZXM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gdmVydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBub3JtMiA9IHZlcnRzW2ldLmxlbmd0aFNxdWFyZWQoKTsKCiAgICAgICAgaWYgKG5vcm0yID4gbWF4MikgewogICAgICAgICAgbWF4MiA9IG5vcm0yOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IE1hdGguc3FydChtYXgyKTsKICAgIH0KICAgIC8qKgogICAgICogY2FsY3VsYXRlV29ybGRBQUJCCiAgICAgKi8KCgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgY29uc3QgdmVydHMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBsZXQgbWlueDsKICAgICAgbGV0IG1pbnk7CiAgICAgIGxldCBtaW56OwogICAgICBsZXQgbWF4eDsKICAgICAgbGV0IG1heHk7CiAgICAgIGxldCBtYXh6OwogICAgICBsZXQgdGVtcFdvcmxkVmVydGV4ID0gbmV3IFZlYzMoKTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0ZW1wV29ybGRWZXJ0ZXguY29weSh2ZXJ0c1tpXSk7CiAgICAgICAgcXVhdC52bXVsdCh0ZW1wV29ybGRWZXJ0ZXgsIHRlbXBXb3JsZFZlcnRleCk7CiAgICAgICAgcG9zLnZhZGQodGVtcFdvcmxkVmVydGV4LCB0ZW1wV29ybGRWZXJ0ZXgpOwogICAgICAgIGNvbnN0IHYgPSB0ZW1wV29ybGRWZXJ0ZXg7CgogICAgICAgIGlmIChtaW54ID09PSB1bmRlZmluZWQgfHwgdi54IDwgbWlueCkgewogICAgICAgICAgbWlueCA9IHYueDsKICAgICAgICB9CgogICAgICAgIGlmIChtYXh4ID09PSB1bmRlZmluZWQgfHwgdi54ID4gbWF4eCkgewogICAgICAgICAgbWF4eCA9IHYueDsKICAgICAgICB9CgogICAgICAgIGlmIChtaW55ID09PSB1bmRlZmluZWQgfHwgdi55IDwgbWlueSkgewogICAgICAgICAgbWlueSA9IHYueTsKICAgICAgICB9CgogICAgICAgIGlmIChtYXh5ID09PSB1bmRlZmluZWQgfHwgdi55ID4gbWF4eSkgewogICAgICAgICAgbWF4eSA9IHYueTsKICAgICAgICB9CgogICAgICAgIGlmIChtaW56ID09PSB1bmRlZmluZWQgfHwgdi56IDwgbWlueikgewogICAgICAgICAgbWlueiA9IHYuejsKICAgICAgICB9CgogICAgICAgIGlmIChtYXh6ID09PSB1bmRlZmluZWQgfHwgdi56ID4gbWF4eikgewogICAgICAgICAgbWF4eiA9IHYuejsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIG1pbi5zZXQobWlueCwgbWlueSwgbWlueik7CiAgICAgIG1heC5zZXQobWF4eCwgbWF4eSwgbWF4eik7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhcHByb3hpbWF0ZSBjb252ZXggdm9sdW1lCiAgICAgKi8KCgogICAgdm9sdW1lKCkgewogICAgICByZXR1cm4gNC4wICogTWF0aC5QSSAqIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgLyAzLjA7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBhdmVyYWdlIG9mIGFsbCB0aGUgdmVydGljZXMgcG9zaXRpb25zCiAgICAgKi8KCgogICAgZ2V0QXZlcmFnZVBvaW50TG9jYWwodGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0YXJnZXQudmFkZCh2ZXJ0c1tpXSwgdGFyZ2V0KTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnNjYWxlKDEgLyB2ZXJ0cy5sZW5ndGgsIHRhcmdldCk7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIFRyYW5zZm9ybSBhbGwgbG9jYWwgcG9pbnRzLiBXaWxsIGNoYW5nZSB0aGUgLnZlcnRpY2VzCiAgICAgKi8KCgogICAgdHJhbnNmb3JtQWxsUG9pbnRzKG9mZnNldCwgcXVhdCkgewogICAgICBjb25zdCBuID0gdGhpcy52ZXJ0aWNlcy5sZW5ndGg7CiAgICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsgLy8gQXBwbHkgcm90YXRpb24KCiAgICAgIGlmIChxdWF0KSB7CiAgICAgICAgLy8gUm90YXRlIHZlcnRpY2VzCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHsKICAgICAgICAgIGNvbnN0IHYgPSB2ZXJ0c1tpXTsKICAgICAgICAgIHF1YXQudm11bHQodiwgdik7CiAgICAgICAgfSAvLyBSb3RhdGUgZmFjZSBub3JtYWxzCgoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmFjZU5vcm1hbHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGNvbnN0IHYgPSB0aGlzLmZhY2VOb3JtYWxzW2ldOwogICAgICAgICAgcXVhdC52bXVsdCh2LCB2KTsKICAgICAgICB9CiAgICAgICAgLyoKICAgICAgICAgICAgICAvLyBSb3RhdGUgZWRnZXMKICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTx0aGlzLnVuaXF1ZUVkZ2VzLmxlbmd0aDsgaSsrKXsKICAgICAgICAgICAgICAgICAgY29uc3QgdiA9IHRoaXMudW5pcXVlRWRnZXNbaV07CiAgICAgICAgICAgICAgICAgIHF1YXQudm11bHQodix2KTsKICAgICAgICAgICAgICB9Ki8KCiAgICAgIH0gLy8gQXBwbHkgb2Zmc2V0CgoKICAgICAgaWYgKG9mZnNldCkgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICBjb25zdCB2ID0gdmVydHNbaV07CiAgICAgICAgICB2LnZhZGQob2Zmc2V0LCB2KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2hlY2tzIHdoZXRoZXIgcCBpcyBpbnNpZGUgdGhlIHBvbHloZWRyYS4gTXVzdCBiZSBpbiBsb2NhbCBjb29yZHMuCiAgICAgKiBUaGUgcG9pbnQgbGllcyBvdXRzaWRlIG9mIHRoZSBjb252ZXggaHVsbCBvZiB0aGUgb3RoZXIgcG9pbnRzIGlmIGFuZCBvbmx5IGlmIHRoZSBkaXJlY3Rpb24KICAgICAqIG9mIGFsbCB0aGUgdmVjdG9ycyBmcm9tIGl0IHRvIHRob3NlIG90aGVyIHBvaW50cyBhcmUgb24gbGVzcyB0aGFuIG9uZSBoYWxmIG9mIGEgc3BoZXJlIGFyb3VuZCBpdC4KICAgICAqIEBwYXJhbSBwIEEgcG9pbnQgZ2l2ZW4gaW4gbG9jYWwgY29vcmRpbmF0ZXMKICAgICAqLwoKCiAgICBwb2ludElzSW5zaWRlKHApIHsKICAgICAgY29uc3QgdmVydHMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBjb25zdCBmYWNlcyA9IHRoaXMuZmFjZXM7CiAgICAgIGNvbnN0IG5vcm1hbHMgPSB0aGlzLmZhY2VOb3JtYWxzOwogICAgICBjb25zdCBwb2ludEluc2lkZSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuZ2V0QXZlcmFnZVBvaW50TG9jYWwocG9pbnRJbnNpZGUpOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmZhY2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgbGV0IG4gPSBub3JtYWxzW2ldOwogICAgICAgIGNvbnN0IHYgPSB2ZXJ0c1tmYWNlc1tpXVswXV07IC8vIFdlIG9ubHkgbmVlZCBvbmUgcG9pbnQgaW4gdGhlIGZhY2UKICAgICAgICAvLyBUaGlzIGRvdCBwcm9kdWN0IGRldGVybWluZXMgd2hpY2ggc2lkZSBvZiB0aGUgZWRnZSB0aGUgcG9pbnQgaXMKCiAgICAgICAgY29uc3QgdlRvUCA9IG5ldyBWZWMzKCk7CiAgICAgICAgcC52c3ViKHYsIHZUb1ApOwogICAgICAgIGNvbnN0IHIxID0gbi5kb3QodlRvUCk7CiAgICAgICAgY29uc3QgdlRvUG9pbnRJbnNpZGUgPSBuZXcgVmVjMygpOwogICAgICAgIHBvaW50SW5zaWRlLnZzdWIodiwgdlRvUG9pbnRJbnNpZGUpOwogICAgICAgIGNvbnN0IHIyID0gbi5kb3QodlRvUG9pbnRJbnNpZGUpOwoKICAgICAgICBpZiAocjEgPCAwICYmIHIyID4gMCB8fCByMSA+IDAgJiYgcjIgPCAwKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7IC8vIEVuY291bnRlcmVkIHNvbWUgb3RoZXIgc2lnbi4gRXhpdC4KICAgICAgICB9CiAgICAgIH0gLy8gSWYgd2UgZ290IGhlcmUsIGFsbCBkb3QgcHJvZHVjdHMgd2VyZSBvZiB0aGUgc2FtZSBzaWduLgoKCiAgICAgIHJldHVybiAtMTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IG1heCBhbmQgbWluIGRvdCBwcm9kdWN0IG9mIGEgY29udmV4IGh1bGwgYXQgcG9zaXRpb24gKHBvcyxxdWF0KSBwcm9qZWN0ZWQgb250byBhbiBheGlzLgogICAgICogUmVzdWx0cyBhcmUgc2F2ZWQgaW4gdGhlIGFycmF5IG1heG1pbi4KICAgICAqIEBwYXJhbSByZXN1bHQgcmVzdWx0WzBdIGFuZCByZXN1bHRbMV0gd2lsbCBiZSBzZXQgdG8gbWF4aW11bSBhbmQgbWluaW11bSwgcmVzcGVjdGl2ZWx5LgogICAgICovCgoKICAgIHN0YXRpYyBwcm9qZWN0KHNoYXBlLCBheGlzLCBwb3MsIHF1YXQsIHJlc3VsdCkgewogICAgICBjb25zdCBuID0gc2hhcGUudmVydGljZXMubGVuZ3RoOwogICAgICBjb25zdCBsb2NhbEF4aXMgPSBwcm9qZWN0X2xvY2FsQXhpczsKICAgICAgbGV0IG1heCA9IDA7CiAgICAgIGxldCBtaW4gPSAwOwogICAgICBjb25zdCBsb2NhbE9yaWdpbiA9IHByb2plY3RfbG9jYWxPcmlnaW47CiAgICAgIGNvbnN0IHZzID0gc2hhcGUudmVydGljZXM7CiAgICAgIGxvY2FsT3JpZ2luLnNldFplcm8oKTsgLy8gVHJhbnNmb3JtIHRoZSBheGlzIHRvIGxvY2FsCgogICAgICBUcmFuc2Zvcm0udmVjdG9yVG9Mb2NhbEZyYW1lKHBvcywgcXVhdCwgYXhpcywgbG9jYWxBeGlzKTsKICAgICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHBvcywgcXVhdCwgbG9jYWxPcmlnaW4sIGxvY2FsT3JpZ2luKTsKICAgICAgY29uc3QgYWRkID0gbG9jYWxPcmlnaW4uZG90KGxvY2FsQXhpcyk7CiAgICAgIG1pbiA9IG1heCA9IHZzWzBdLmRvdChsb2NhbEF4aXMpOwoKICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBuOyBpKyspIHsKICAgICAgICBjb25zdCB2YWwgPSB2c1tpXS5kb3QobG9jYWxBeGlzKTsKCiAgICAgICAgaWYgKHZhbCA+IG1heCkgewogICAgICAgICAgbWF4ID0gdmFsOwogICAgICAgIH0KCiAgICAgICAgaWYgKHZhbCA8IG1pbikgewogICAgICAgICAgbWluID0gdmFsOwogICAgICAgIH0KICAgICAgfQoKICAgICAgbWluIC09IGFkZDsKICAgICAgbWF4IC09IGFkZDsKCiAgICAgIGlmIChtaW4gPiBtYXgpIHsKICAgICAgICAvLyBJbmNvbnNpc3RlbnQgLSBzd2FwCiAgICAgICAgY29uc3QgdGVtcCA9IG1pbjsKICAgICAgICBtaW4gPSBtYXg7CiAgICAgICAgbWF4ID0gdGVtcDsKICAgICAgfSAvLyBPdXRwdXQKCgogICAgICByZXN1bHRbMF0gPSBtYXg7CiAgICAgIHJlc3VsdFsxXSA9IG1pbjsKICAgIH0KCiAgfQogIGNvbnN0IG1heG1pbkEgPSBbXTsKICBjb25zdCBtYXhtaW5CID0gW107CiAgbmV3IFZlYzMoKTsKICBjb25zdCBwcm9qZWN0X2xvY2FsQXhpcyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcHJvamVjdF9sb2NhbE9yaWdpbiA9IG5ldyBWZWMzKCk7CgogIC8qKgogICAqIEEgM2QgYm94IHNoYXBlLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IHNpemUgPSAxCiAgICogICAgIGNvbnN0IGhhbGZFeHRlbnRzID0gbmV3IENBTk5PTi5WZWMzKHNpemUsIHNpemUsIHNpemUpCiAgICogICAgIGNvbnN0IGJveFNoYXBlID0gbmV3IENBTk5PTi5Cb3goaGFsZkV4dGVudHMpCiAgICogICAgIGNvbnN0IGJveEJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogYm94U2hhcGUgfSkKICAgKiAgICAgd29ybGQuYWRkQm9keShib3hCb2R5KQogICAqLwogIGNsYXNzIEJveCBleHRlbmRzIFNoYXBlIHsKICAgIC8qKgogICAgICogVGhlIGhhbGYgZXh0ZW50cyBvZiB0aGUgYm94LgogICAgICovCgogICAgLyoqCiAgICAgKiBVc2VkIGJ5IHRoZSBjb250YWN0IGdlbmVyYXRvciB0byBtYWtlIGNvbnRhY3RzIHdpdGggb3RoZXIgY29udmV4IHBvbHloZWRyYSBmb3IgZXhhbXBsZS4KICAgICAqLwogICAgY29uc3RydWN0b3IoaGFsZkV4dGVudHMpIHsKICAgICAgc3VwZXIoewogICAgICAgIHR5cGU6IFNoYXBlLnR5cGVzLkJPWAogICAgICB9KTsKICAgICAgdGhpcy5oYWxmRXh0ZW50cyA9IGhhbGZFeHRlbnRzOwogICAgICB0aGlzLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiA9IG51bGw7CiAgICAgIHRoaXMudXBkYXRlQ29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uKCk7CiAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyB0aGUgbG9jYWwgY29udmV4IHBvbHloZWRyb24gcmVwcmVzZW50YXRpb24gdXNlZCBmb3Igc29tZSBjb2xsaXNpb25zLgogICAgICovCgoKICAgIHVwZGF0ZUNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbigpIHsKICAgICAgY29uc3Qgc3ggPSB0aGlzLmhhbGZFeHRlbnRzLng7CiAgICAgIGNvbnN0IHN5ID0gdGhpcy5oYWxmRXh0ZW50cy55OwogICAgICBjb25zdCBzeiA9IHRoaXMuaGFsZkV4dGVudHMuejsKICAgICAgY29uc3QgViA9IFZlYzM7CiAgICAgIGNvbnN0IHZlcnRpY2VzID0gW25ldyBWKC1zeCwgLXN5LCAtc3opLCBuZXcgVihzeCwgLXN5LCAtc3opLCBuZXcgVihzeCwgc3ksIC1zeiksIG5ldyBWKC1zeCwgc3ksIC1zeiksIG5ldyBWKC1zeCwgLXN5LCBzeiksIG5ldyBWKHN4LCAtc3ksIHN6KSwgbmV3IFYoc3gsIHN5LCBzeiksIG5ldyBWKC1zeCwgc3ksIHN6KV07CiAgICAgIGNvbnN0IGZhY2VzID0gW1szLCAyLCAxLCAwXSwgLy8gLXoKICAgICAgWzQsIDUsIDYsIDddLCAvLyAregogICAgICBbNSwgNCwgMCwgMV0sIC8vIC15CiAgICAgIFsyLCAzLCA3LCA2XSwgLy8gK3kKICAgICAgWzAsIDQsIDcsIDNdLCAvLyAteAogICAgICBbMSwgMiwgNiwgNV0gLy8gK3gKICAgICAgXTsKICAgICAgY29uc3QgYXhlcyA9IFtuZXcgVigwLCAwLCAxKSwgbmV3IFYoMCwgMSwgMCksIG5ldyBWKDEsIDAsIDApXTsKICAgICAgY29uc3QgaCA9IG5ldyBDb252ZXhQb2x5aGVkcm9uKHsKICAgICAgICB2ZXJ0aWNlcywKICAgICAgICBmYWNlcywKICAgICAgICBheGVzCiAgICAgIH0pOwogICAgICB0aGlzLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiA9IGg7CiAgICAgIGgubWF0ZXJpYWwgPSB0aGlzLm1hdGVyaWFsOwogICAgfQogICAgLyoqCiAgICAgKiBDYWxjdWxhdGUgdGhlIGluZXJ0aWEgb2YgdGhlIGJveC4KICAgICAqLwoKCiAgICBjYWxjdWxhdGVMb2NhbEluZXJ0aWEobWFzcywgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIEJveC5jYWxjdWxhdGVJbmVydGlhKHRoaXMuaGFsZkV4dGVudHMsIG1hc3MsIHRhcmdldCk7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CgogICAgc3RhdGljIGNhbGN1bGF0ZUluZXJ0aWEoaGFsZkV4dGVudHMsIG1hc3MsIHRhcmdldCkgewogICAgICBjb25zdCBlID0gaGFsZkV4dGVudHM7CiAgICAgIHRhcmdldC54ID0gMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIGUueSAqIDIgKiBlLnkgKyAyICogZS56ICogMiAqIGUueik7CiAgICAgIHRhcmdldC55ID0gMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIGUueCAqIDIgKiBlLnggKyAyICogZS56ICogMiAqIGUueik7CiAgICAgIHRhcmdldC56ID0gMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIGUueSAqIDIgKiBlLnkgKyAyICogZS54ICogMiAqIGUueCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgYm94IDYgc2lkZSBub3JtYWxzCiAgICAgKiBAcGFyYW0gc2l4VGFyZ2V0VmVjdG9ycyBBbiBhcnJheSBvZiA2IHZlY3RvcnMsIHRvIHN0b3JlIHRoZSByZXN1bHRpbmcgc2lkZSBub3JtYWxzIGluLgogICAgICogQHBhcmFtIHF1YXQgT3JpZW50YXRpb24gdG8gYXBwbHkgdG8gdGhlIG5vcm1hbCB2ZWN0b3JzLiBJZiBub3QgcHJvdmlkZWQsIHRoZSB2ZWN0b3JzIHdpbGwgYmUgaW4gcmVzcGVjdCB0byB0aGUgbG9jYWwgZnJhbWUuCiAgICAgKi8KCgogICAgZ2V0U2lkZU5vcm1hbHMoc2l4VGFyZ2V0VmVjdG9ycywgcXVhdCkgewogICAgICBjb25zdCBzaWRlcyA9IHNpeFRhcmdldFZlY3RvcnM7CiAgICAgIGNvbnN0IGV4ID0gdGhpcy5oYWxmRXh0ZW50czsKICAgICAgc2lkZXNbMF0uc2V0KGV4LngsIDAsIDApOwogICAgICBzaWRlc1sxXS5zZXQoMCwgZXgueSwgMCk7CiAgICAgIHNpZGVzWzJdLnNldCgwLCAwLCBleC56KTsKICAgICAgc2lkZXNbM10uc2V0KC1leC54LCAwLCAwKTsKICAgICAgc2lkZXNbNF0uc2V0KDAsIC1leC55LCAwKTsKICAgICAgc2lkZXNbNV0uc2V0KDAsIDAsIC1leC56KTsKCiAgICAgIGlmIChxdWF0ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gc2lkZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHF1YXQudm11bHQoc2lkZXNbaV0sIHNpZGVzW2ldKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBzaWRlczsKICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgdm9sdW1lIG9mIHRoZSBib3guCiAgICAgKi8KCgogICAgdm9sdW1lKCkgewogICAgICByZXR1cm4gOC4wICogdGhpcy5oYWxmRXh0ZW50cy54ICogdGhpcy5oYWxmRXh0ZW50cy55ICogdGhpcy5oYWxmRXh0ZW50cy56OwogICAgfQogICAgLyoqCiAgICAgKiB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cwogICAgICovCgoKICAgIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgewogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gdGhpcy5oYWxmRXh0ZW50cy5sZW5ndGgoKTsKICAgIH0KICAgIC8qKgogICAgICogZm9yRWFjaFdvcmxkQ29ybmVyCiAgICAgKi8KCgogICAgZm9yRWFjaFdvcmxkQ29ybmVyKHBvcywgcXVhdCwgY2FsbGJhY2spIHsKICAgICAgY29uc3QgZSA9IHRoaXMuaGFsZkV4dGVudHM7CiAgICAgIGNvbnN0IGNvcm5lcnMgPSBbW2UueCwgZS55LCBlLnpdLCBbLWUueCwgZS55LCBlLnpdLCBbLWUueCwgLWUueSwgZS56XSwgWy1lLngsIC1lLnksIC1lLnpdLCBbZS54LCAtZS55LCAtZS56XSwgW2UueCwgZS55LCAtZS56XSwgWy1lLngsIGUueSwgLWUuel0sIFtlLngsIC1lLnksIGUuel1dOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3JuZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgd29ybGRDb3JuZXJUZW1wUG9zLnNldChjb3JuZXJzW2ldWzBdLCBjb3JuZXJzW2ldWzFdLCBjb3JuZXJzW2ldWzJdKTsKICAgICAgICBxdWF0LnZtdWx0KHdvcmxkQ29ybmVyVGVtcFBvcywgd29ybGRDb3JuZXJUZW1wUG9zKTsKICAgICAgICBwb3MudmFkZCh3b3JsZENvcm5lclRlbXBQb3MsIHdvcmxkQ29ybmVyVGVtcFBvcyk7CiAgICAgICAgY2FsbGJhY2sod29ybGRDb3JuZXJUZW1wUG9zLngsIHdvcmxkQ29ybmVyVGVtcFBvcy55LCB3b3JsZENvcm5lclRlbXBQb3Mueik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogY2FsY3VsYXRlV29ybGRBQUJCCiAgICAgKi8KCgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgY29uc3QgZSA9IHRoaXMuaGFsZkV4dGVudHM7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbMF0uc2V0KGUueCwgZS55LCBlLnopOwogICAgICB3b3JsZENvcm5lcnNUZW1wWzFdLnNldCgtZS54LCBlLnksIGUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbMl0uc2V0KC1lLngsIC1lLnksIGUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbM10uc2V0KC1lLngsIC1lLnksIC1lLnopOwogICAgICB3b3JsZENvcm5lcnNUZW1wWzRdLnNldChlLngsIC1lLnksIC1lLnopOwogICAgICB3b3JsZENvcm5lcnNUZW1wWzVdLnNldChlLngsIGUueSwgLWUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbNl0uc2V0KC1lLngsIGUueSwgLWUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbN10uc2V0KGUueCwgLWUueSwgZS56KTsKICAgICAgY29uc3Qgd2MgPSB3b3JsZENvcm5lcnNUZW1wWzBdOwogICAgICBxdWF0LnZtdWx0KHdjLCB3Yyk7CiAgICAgIHBvcy52YWRkKHdjLCB3Yyk7CiAgICAgIG1heC5jb3B5KHdjKTsKICAgICAgbWluLmNvcHkod2MpOwoKICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCA4OyBpKyspIHsKICAgICAgICBjb25zdCB3YyA9IHdvcmxkQ29ybmVyc1RlbXBbaV07CiAgICAgICAgcXVhdC52bXVsdCh3Yywgd2MpOwogICAgICAgIHBvcy52YWRkKHdjLCB3Yyk7CiAgICAgICAgY29uc3QgeCA9IHdjLng7CiAgICAgICAgY29uc3QgeSA9IHdjLnk7CiAgICAgICAgY29uc3QgeiA9IHdjLno7CgogICAgICAgIGlmICh4ID4gbWF4LngpIHsKICAgICAgICAgIG1heC54ID0geDsKICAgICAgICB9CgogICAgICAgIGlmICh5ID4gbWF4LnkpIHsKICAgICAgICAgIG1heC55ID0geTsKICAgICAgICB9CgogICAgICAgIGlmICh6ID4gbWF4LnopIHsKICAgICAgICAgIG1heC56ID0gejsKICAgICAgICB9CgogICAgICAgIGlmICh4IDwgbWluLngpIHsKICAgICAgICAgIG1pbi54ID0geDsKICAgICAgICB9CgogICAgICAgIGlmICh5IDwgbWluLnkpIHsKICAgICAgICAgIG1pbi55ID0geTsKICAgICAgICB9CgogICAgICAgIGlmICh6IDwgbWluLnopIHsKICAgICAgICAgIG1pbi56ID0gejsKICAgICAgICB9CiAgICAgIH0gLy8gR2V0IGVhY2ggYXhpcyBtYXgKICAgICAgLy8gbWluLnNldChJbmZpbml0eSxJbmZpbml0eSxJbmZpbml0eSk7CiAgICAgIC8vIG1heC5zZXQoLUluZmluaXR5LC1JbmZpbml0eSwtSW5maW5pdHkpOwogICAgICAvLyB0aGlzLmZvckVhY2hXb3JsZENvcm5lcihwb3MscXVhdCxmdW5jdGlvbih4LHkseil7CiAgICAgIC8vICAgICBpZih4ID4gbWF4LngpewogICAgICAvLyAgICAgICAgIG1heC54ID0geDsKICAgICAgLy8gICAgIH0KICAgICAgLy8gICAgIGlmKHkgPiBtYXgueSl7CiAgICAgIC8vICAgICAgICAgbWF4LnkgPSB5OwogICAgICAvLyAgICAgfQogICAgICAvLyAgICAgaWYoeiA+IG1heC56KXsKICAgICAgLy8gICAgICAgICBtYXgueiA9IHo7CiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgICBpZih4IDwgbWluLngpewogICAgICAvLyAgICAgICAgIG1pbi54ID0geDsKICAgICAgLy8gICAgIH0KICAgICAgLy8gICAgIGlmKHkgPCBtaW4ueSl7CiAgICAgIC8vICAgICAgICAgbWluLnkgPSB5OwogICAgICAvLyAgICAgfQogICAgICAvLyAgICAgaWYoeiA8IG1pbi56KXsKICAgICAgLy8gICAgICAgICBtaW4ueiA9IHo7CiAgICAgIC8vICAgICB9CiAgICAgIC8vIH0pOwoKICAgIH0KCiAgfQogIGNvbnN0IHdvcmxkQ29ybmVyVGVtcFBvcyA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgd29ybGRDb3JuZXJzVGVtcCA9IFtuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpXTsKCiAgLyoqCiAgICogQk9EWV9UWVBFUwogICAqLwogIGNvbnN0IEJPRFlfVFlQRVMgPSB7CiAgICAvKiogRFlOQU1JQyAqLwogICAgRFlOQU1JQzogMSwKCiAgICAvKiogU1RBVElDICovCiAgICBTVEFUSUM6IDIsCgogICAgLyoqIEtJTkVNQVRJQyAqLwogICAgS0lORU1BVElDOiA0CiAgfTsKICAvKioKICAgKiBCb2R5VHlwZQogICAqLwoKICAvKioKICAgKiBCT0RZX1NMRUVQX1NUQVRFUwogICAqLwogIGNvbnN0IEJPRFlfU0xFRVBfU1RBVEVTID0gewogICAgLyoqIEFXQUtFICovCiAgICBBV0FLRTogMCwKCiAgICAvKiogU0xFRVBZICovCiAgICBTTEVFUFk6IDEsCgogICAgLyoqIFNMRUVQSU5HICovCiAgICBTTEVFUElORzogMgogIH07CiAgLyoqCiAgICogQm9keVNsZWVwU3RhdGUKICAgKi8KCiAgLyoqCiAgICogQmFzZSBjbGFzcyBmb3IgYWxsIGJvZHkgdHlwZXMuCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3Qgc2hhcGUgPSBuZXcgQ0FOTk9OLlNwaGVyZSgxKQogICAqICAgICBjb25zdCBib2R5ID0gbmV3IENBTk5PTi5Cb2R5KHsKICAgKiAgICAgICBtYXNzOiAxLAogICAqICAgICAgIHNoYXBlLAogICAqICAgICB9KQogICAqICAgICB3b3JsZC5hZGRCb2R5KGJvZHkpCiAgICovCiAgY2xhc3MgQm9keSBleHRlbmRzIEV2ZW50VGFyZ2V0IHsKICAgIC8qKgogICAgICogRGlzcGF0Y2hlZCBhZnRlciB0d28gYm9kaWVzIGNvbGxpZGUuIFRoaXMgZXZlbnQgaXMgZGlzcGF0Y2hlZCBvbiBlYWNoCiAgICAgKiBvZiB0aGUgdHdvIGJvZGllcyBpbnZvbHZlZCBpbiB0aGUgY29sbGlzaW9uLgogICAgICogQGV2ZW50IGNvbGxpZGUKICAgICAqIEBwYXJhbSBib2R5IFRoZSBib2R5IHRoYXQgd2FzIGludm9sdmVkIGluIHRoZSBjb2xsaXNpb24uCiAgICAgKiBAcGFyYW0gY29udGFjdCBUaGUgZGV0YWlscyBvZiB0aGUgY29sbGlzaW9uLgogICAgICovCgogICAgLyoqCiAgICAgKiBBIGR5bmFtaWMgYm9keSBpcyBmdWxseSBzaW11bGF0ZWQuIENhbiBiZSBtb3ZlZCBtYW51YWxseSBieSB0aGUgdXNlciwgYnV0IG5vcm1hbGx5IHRoZXkgbW92ZSBhY2NvcmRpbmcgdG8gZm9yY2VzLiBBIGR5bmFtaWMgYm9keSBjYW4gY29sbGlkZSB3aXRoIGFsbCBib2R5IHR5cGVzLiBBIGR5bmFtaWMgYm9keSBhbHdheXMgaGFzIGZpbml0ZSwgbm9uLXplcm8gbWFzcy4KICAgICAqLwoKICAgIC8qKgogICAgICogQSBzdGF0aWMgYm9keSBkb2VzIG5vdCBtb3ZlIGR1cmluZyBzaW11bGF0aW9uIGFuZCBiZWhhdmVzIGFzIGlmIGl0IGhhcyBpbmZpbml0ZSBtYXNzLiBTdGF0aWMgYm9kaWVzIGNhbiBiZSBtb3ZlZCBtYW51YWxseSBieSBzZXR0aW5nIHRoZSBwb3NpdGlvbiBvZiB0aGUgYm9keS4gVGhlIHZlbG9jaXR5IG9mIGEgc3RhdGljIGJvZHkgaXMgYWx3YXlzIHplcm8uIFN0YXRpYyBib2RpZXMgZG8gbm90IGNvbGxpZGUgd2l0aCBvdGhlciBzdGF0aWMgb3Iga2luZW1hdGljIGJvZGllcy4KICAgICAqLwoKICAgIC8qKgogICAgICogQSBraW5lbWF0aWMgYm9keSBtb3ZlcyB1bmRlciBzaW11bGF0aW9uIGFjY29yZGluZyB0byBpdHMgdmVsb2NpdHkuIFRoZXkgZG8gbm90IHJlc3BvbmQgdG8gZm9yY2VzLiBUaGV5IGNhbiBiZSBtb3ZlZCBtYW51YWxseSwgYnV0IG5vcm1hbGx5IGEga2luZW1hdGljIGJvZHkgaXMgbW92ZWQgYnkgc2V0dGluZyBpdHMgdmVsb2NpdHkuIEEga2luZW1hdGljIGJvZHkgYmVoYXZlcyBhcyBpZiBpdCBoYXMgaW5maW5pdGUgbWFzcy4gS2luZW1hdGljIGJvZGllcyBkbyBub3QgY29sbGlkZSB3aXRoIG90aGVyIHN0YXRpYyBvciBraW5lbWF0aWMgYm9kaWVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBBV0FLRQogICAgICovCgogICAgLyoqCiAgICAgKiBTTEVFUFkKICAgICAqLwoKICAgIC8qKgogICAgICogU0xFRVBJTkcKICAgICAqLwoKICAgIC8qKgogICAgICogRGlzcGF0Y2hlZCBhZnRlciBhIHNsZWVwaW5nIGJvZHkgaGFzIHdva2VuIHVwLgogICAgICogQGV2ZW50IHdha2V1cAogICAgICovCgogICAgLyoqCiAgICAgKiBEaXNwYXRjaGVkIGFmdGVyIGEgYm9keSBoYXMgZ29uZSBpbiB0byB0aGUgc2xlZXB5IHN0YXRlLgogICAgICogQGV2ZW50IHNsZWVweQogICAgICovCgogICAgLyoqCiAgICAgKiBEaXNwYXRjaGVkIGFmdGVyIGEgYm9keSBoYXMgZmFsbGVuIGFzbGVlcC4KICAgICAqIEBldmVudCBzbGVlcAogICAgICovCiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuaWQgPSBCb2R5LmlkQ291bnRlcisrOwogICAgICB0aGlzLmluZGV4ID0gLTE7CiAgICAgIHRoaXMud29ybGQgPSBudWxsOwogICAgICB0aGlzLnZsYW1iZGEgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmNvbGxpc2lvbkZpbHRlckdyb3VwID0gdHlwZW9mIG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPT09ICdudW1iZXInID8gb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJHcm91cCA6IDE7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyTWFzayA9IHR5cGVvZiBvcHRpb25zLmNvbGxpc2lvbkZpbHRlck1hc2sgPT09ICdudW1iZXInID8gb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJNYXNrIDogLTE7CiAgICAgIHRoaXMuY29sbGlzaW9uUmVzcG9uc2UgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25SZXNwb25zZSA9PT0gJ2Jvb2xlYW4nID8gb3B0aW9ucy5jb2xsaXNpb25SZXNwb25zZSA6IHRydWU7CiAgICAgIHRoaXMucG9zaXRpb24gPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnByZXZpb3VzUG9zaXRpb24gPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmludGVycG9sYXRlZFBvc2l0aW9uID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5pbml0UG9zaXRpb24gPSBuZXcgVmVjMygpOwoKICAgICAgaWYgKG9wdGlvbnMucG9zaXRpb24pIHsKICAgICAgICB0aGlzLnBvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7CiAgICAgICAgdGhpcy5wcmV2aW91c1Bvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7CiAgICAgICAgdGhpcy5pbnRlcnBvbGF0ZWRQb3NpdGlvbi5jb3B5KG9wdGlvbnMucG9zaXRpb24pOwogICAgICAgIHRoaXMuaW5pdFBvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7CiAgICAgIH0KCiAgICAgIHRoaXMudmVsb2NpdHkgPSBuZXcgVmVjMygpOwoKICAgICAgaWYgKG9wdGlvbnMudmVsb2NpdHkpIHsKICAgICAgICB0aGlzLnZlbG9jaXR5LmNvcHkob3B0aW9ucy52ZWxvY2l0eSk7CiAgICAgIH0KCiAgICAgIHRoaXMuaW5pdFZlbG9jaXR5ID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5mb3JjZSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IG1hc3MgPSB0eXBlb2Ygb3B0aW9ucy5tYXNzID09PSAnbnVtYmVyJyA/IG9wdGlvbnMubWFzcyA6IDA7CiAgICAgIHRoaXMubWFzcyA9IG1hc3M7CiAgICAgIHRoaXMuaW52TWFzcyA9IG1hc3MgPiAwID8gMS4wIC8gbWFzcyA6IDA7CiAgICAgIHRoaXMubWF0ZXJpYWwgPSBvcHRpb25zLm1hdGVyaWFsIHx8IG51bGw7CiAgICAgIHRoaXMubGluZWFyRGFtcGluZyA9IHR5cGVvZiBvcHRpb25zLmxpbmVhckRhbXBpbmcgPT09ICdudW1iZXInID8gb3B0aW9ucy5saW5lYXJEYW1waW5nIDogMC4wMTsKICAgICAgdGhpcy50eXBlID0gbWFzcyA8PSAwLjAgPyBCb2R5LlNUQVRJQyA6IEJvZHkuRFlOQU1JQzsKCiAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy50eXBlID09PSB0eXBlb2YgQm9keS5TVEFUSUMpIHsKICAgICAgICB0aGlzLnR5cGUgPSBvcHRpb25zLnR5cGU7CiAgICAgIH0KCiAgICAgIHRoaXMuYWxsb3dTbGVlcCA9IHR5cGVvZiBvcHRpb25zLmFsbG93U2xlZXAgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5hbGxvd1NsZWVwIDogdHJ1ZTsKICAgICAgdGhpcy5zbGVlcFN0YXRlID0gQm9keS5BV0FLRTsKICAgICAgdGhpcy5zbGVlcFNwZWVkTGltaXQgPSB0eXBlb2Ygb3B0aW9ucy5zbGVlcFNwZWVkTGltaXQgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5zbGVlcFNwZWVkTGltaXQgOiAwLjE7CiAgICAgIHRoaXMuc2xlZXBUaW1lTGltaXQgPSB0eXBlb2Ygb3B0aW9ucy5zbGVlcFRpbWVMaW1pdCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLnNsZWVwVGltZUxpbWl0IDogMTsKICAgICAgdGhpcy50aW1lTGFzdFNsZWVweSA9IDA7CiAgICAgIHRoaXMud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSA9IGZhbHNlOwogICAgICB0aGlzLnRvcnF1ZSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMucXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIHRoaXMuaW5pdFF1YXRlcm5pb24gPSBuZXcgUXVhdGVybmlvbigpOwogICAgICB0aGlzLnByZXZpb3VzUXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIHRoaXMuaW50ZXJwb2xhdGVkUXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7CgogICAgICBpZiAob3B0aW9ucy5xdWF0ZXJuaW9uKSB7CiAgICAgICAgdGhpcy5xdWF0ZXJuaW9uLmNvcHkob3B0aW9ucy5xdWF0ZXJuaW9uKTsKICAgICAgICB0aGlzLmluaXRRdWF0ZXJuaW9uLmNvcHkob3B0aW9ucy5xdWF0ZXJuaW9uKTsKICAgICAgICB0aGlzLnByZXZpb3VzUXVhdGVybmlvbi5jb3B5KG9wdGlvbnMucXVhdGVybmlvbik7CiAgICAgICAgdGhpcy5pbnRlcnBvbGF0ZWRRdWF0ZXJuaW9uLmNvcHkob3B0aW9ucy5xdWF0ZXJuaW9uKTsKICAgICAgfQoKICAgICAgdGhpcy5hbmd1bGFyVmVsb2NpdHkgPSBuZXcgVmVjMygpOwoKICAgICAgaWYgKG9wdGlvbnMuYW5ndWxhclZlbG9jaXR5KSB7CiAgICAgICAgdGhpcy5hbmd1bGFyVmVsb2NpdHkuY29weShvcHRpb25zLmFuZ3VsYXJWZWxvY2l0eSk7CiAgICAgIH0KCiAgICAgIHRoaXMuaW5pdEFuZ3VsYXJWZWxvY2l0eSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuc2hhcGVzID0gW107CiAgICAgIHRoaXMuc2hhcGVPZmZzZXRzID0gW107CiAgICAgIHRoaXMuc2hhcGVPcmllbnRhdGlvbnMgPSBbXTsKICAgICAgdGhpcy5pbmVydGlhID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5pbnZJbmVydGlhID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5pbnZJbmVydGlhV29ybGQgPSBuZXcgTWF0MygpOwogICAgICB0aGlzLmludk1hc3NTb2x2ZSA9IDA7CiAgICAgIHRoaXMuaW52SW5lcnRpYVNvbHZlID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5pbnZJbmVydGlhV29ybGRTb2x2ZSA9IG5ldyBNYXQzKCk7CiAgICAgIHRoaXMuZml4ZWRSb3RhdGlvbiA9IHR5cGVvZiBvcHRpb25zLmZpeGVkUm90YXRpb24gIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5maXhlZFJvdGF0aW9uIDogZmFsc2U7CiAgICAgIHRoaXMuYW5ndWxhckRhbXBpbmcgPSB0eXBlb2Ygb3B0aW9ucy5hbmd1bGFyRGFtcGluZyAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmFuZ3VsYXJEYW1waW5nIDogMC4wMTsKICAgICAgdGhpcy5saW5lYXJGYWN0b3IgPSBuZXcgVmVjMygxLCAxLCAxKTsKCiAgICAgIGlmIChvcHRpb25zLmxpbmVhckZhY3RvcikgewogICAgICAgIHRoaXMubGluZWFyRmFjdG9yLmNvcHkob3B0aW9ucy5saW5lYXJGYWN0b3IpOwogICAgICB9CgogICAgICB0aGlzLmFuZ3VsYXJGYWN0b3IgPSBuZXcgVmVjMygxLCAxLCAxKTsKCiAgICAgIGlmIChvcHRpb25zLmFuZ3VsYXJGYWN0b3IpIHsKICAgICAgICB0aGlzLmFuZ3VsYXJGYWN0b3IuY29weShvcHRpb25zLmFuZ3VsYXJGYWN0b3IpOwogICAgICB9CgogICAgICB0aGlzLmFhYmIgPSBuZXcgQUFCQigpOwogICAgICB0aGlzLmFhYmJOZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgIHRoaXMuYm91bmRpbmdSYWRpdXMgPSAwOwogICAgICB0aGlzLndsYW1iZGEgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmlzVHJpZ2dlciA9IEJvb2xlYW4ob3B0aW9ucy5pc1RyaWdnZXIpOwoKICAgICAgaWYgKG9wdGlvbnMuc2hhcGUpIHsKICAgICAgICB0aGlzLmFkZFNoYXBlKG9wdGlvbnMuc2hhcGUpOwogICAgICB9CgogICAgICB0aGlzLnVwZGF0ZU1hc3NQcm9wZXJ0aWVzKCk7CiAgICB9CiAgICAvKioKICAgICAqIFdha2UgdGhlIGJvZHkgdXAuCiAgICAgKi8KCgogICAgd2FrZVVwKCkgewogICAgICBjb25zdCBwcmV2U3RhdGUgPSB0aGlzLnNsZWVwU3RhdGU7CiAgICAgIHRoaXMuc2xlZXBTdGF0ZSA9IEJvZHkuQVdBS0U7CiAgICAgIHRoaXMud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSA9IGZhbHNlOwoKICAgICAgaWYgKHByZXZTdGF0ZSA9PT0gQm9keS5TTEVFUElORykgewogICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChCb2R5Lndha2V1cEV2ZW50KTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBGb3JjZSBib2R5IHNsZWVwCiAgICAgKi8KCgogICAgc2xlZXAoKSB7CiAgICAgIHRoaXMuc2xlZXBTdGF0ZSA9IEJvZHkuU0xFRVBJTkc7CiAgICAgIHRoaXMudmVsb2NpdHkuc2V0KDAsIDAsIDApOwogICAgICB0aGlzLmFuZ3VsYXJWZWxvY2l0eS5zZXQoMCwgMCwgMCk7CiAgICAgIHRoaXMud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSA9IGZhbHNlOwogICAgfQogICAgLyoqCiAgICAgKiBDYWxsZWQgZXZlcnkgdGltZXN0ZXAgdG8gdXBkYXRlIGludGVybmFsIHNsZWVwIHRpbWVyIGFuZCBjaGFuZ2Ugc2xlZXAgc3RhdGUgaWYgbmVlZGVkLgogICAgICogQHBhcmFtIHRpbWUgVGhlIHdvcmxkIHRpbWUgaW4gc2Vjb25kcwogICAgICovCgoKICAgIHNsZWVwVGljayh0aW1lKSB7CiAgICAgIGlmICh0aGlzLmFsbG93U2xlZXApIHsKICAgICAgICBjb25zdCBzbGVlcFN0YXRlID0gdGhpcy5zbGVlcFN0YXRlOwogICAgICAgIGNvbnN0IHNwZWVkU3F1YXJlZCA9IHRoaXMudmVsb2NpdHkubGVuZ3RoU3F1YXJlZCgpICsgdGhpcy5hbmd1bGFyVmVsb2NpdHkubGVuZ3RoU3F1YXJlZCgpOwogICAgICAgIGNvbnN0IHNwZWVkTGltaXRTcXVhcmVkID0gdGhpcy5zbGVlcFNwZWVkTGltaXQgKiogMjsKCiAgICAgICAgaWYgKHNsZWVwU3RhdGUgPT09IEJvZHkuQVdBS0UgJiYgc3BlZWRTcXVhcmVkIDwgc3BlZWRMaW1pdFNxdWFyZWQpIHsKICAgICAgICAgIHRoaXMuc2xlZXBTdGF0ZSA9IEJvZHkuU0xFRVBZOyAvLyBTbGVlcHkKCiAgICAgICAgICB0aGlzLnRpbWVMYXN0U2xlZXB5ID0gdGltZTsKICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChCb2R5LnNsZWVweUV2ZW50KTsKICAgICAgICB9IGVsc2UgaWYgKHNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBZICYmIHNwZWVkU3F1YXJlZCA+IHNwZWVkTGltaXRTcXVhcmVkKSB7CiAgICAgICAgICB0aGlzLndha2VVcCgpOyAvLyBXYWtlIHVwCiAgICAgICAgfSBlbHNlIGlmIChzbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQWSAmJiB0aW1lIC0gdGhpcy50aW1lTGFzdFNsZWVweSA+IHRoaXMuc2xlZXBUaW1lTGltaXQpIHsKICAgICAgICAgIHRoaXMuc2xlZXAoKTsgLy8gU2xlZXBpbmcKCiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoQm9keS5zbGVlcEV2ZW50KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogSWYgdGhlIGJvZHkgaXMgc2xlZXBpbmcsIGl0IHNob3VsZCBiZSBpbW1vdmFibGUgLyBoYXZlIGluZmluaXRlIG1hc3MgZHVyaW5nIHNvbHZlLiBXZSBzb2x2ZSBpdCBieSBoYXZpbmcgYSBzZXBhcmF0ZSAic29sdmUgbWFzcyIuCiAgICAgKi8KCgogICAgdXBkYXRlU29sdmVNYXNzUHJvcGVydGllcygpIHsKICAgICAgaWYgKHRoaXMuc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUElORyB8fCB0aGlzLnR5cGUgPT09IEJvZHkuS0lORU1BVElDKSB7CiAgICAgICAgdGhpcy5pbnZNYXNzU29sdmUgPSAwOwogICAgICAgIHRoaXMuaW52SW5lcnRpYVNvbHZlLnNldFplcm8oKTsKICAgICAgICB0aGlzLmludkluZXJ0aWFXb3JsZFNvbHZlLnNldFplcm8oKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmludk1hc3NTb2x2ZSA9IHRoaXMuaW52TWFzczsKICAgICAgICB0aGlzLmludkluZXJ0aWFTb2x2ZS5jb3B5KHRoaXMuaW52SW5lcnRpYSk7CiAgICAgICAgdGhpcy5pbnZJbmVydGlhV29ybGRTb2x2ZS5jb3B5KHRoaXMuaW52SW5lcnRpYVdvcmxkKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0IGEgd29ybGQgcG9pbnQgdG8gbG9jYWwgYm9keSBmcmFtZS4KICAgICAqLwoKCiAgICBwb2ludFRvTG9jYWxGcmFtZSh3b3JsZFBvaW50LCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVzdWx0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgd29ybGRQb2ludC52c3ViKHRoaXMucG9zaXRpb24sIHJlc3VsdCk7CiAgICAgIHRoaXMucXVhdGVybmlvbi5jb25qdWdhdGUoKS52bXVsdChyZXN1bHQsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnQgYSB3b3JsZCB2ZWN0b3IgdG8gbG9jYWwgYm9keSBmcmFtZS4KICAgICAqLwoKCiAgICB2ZWN0b3JUb0xvY2FsRnJhbWUod29ybGRWZWN0b3IsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0aGlzLnF1YXRlcm5pb24uY29uanVnYXRlKCkudm11bHQod29ybGRWZWN0b3IsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnQgYSBsb2NhbCBib2R5IHBvaW50IHRvIHdvcmxkIGZyYW1lLgogICAgICovCgoKICAgIHBvaW50VG9Xb3JsZEZyYW1lKGxvY2FsUG9pbnQsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0aGlzLnF1YXRlcm5pb24udm11bHQobG9jYWxQb2ludCwgcmVzdWx0KTsKICAgICAgcmVzdWx0LnZhZGQodGhpcy5wb3NpdGlvbiwgcmVzdWx0KTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICAgIC8qKgogICAgICogQ29udmVydCBhIGxvY2FsIGJvZHkgcG9pbnQgdG8gd29ybGQgZnJhbWUuCiAgICAgKi8KCgogICAgdmVjdG9yVG9Xb3JsZEZyYW1lKGxvY2FsVmVjdG9yLCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVzdWx0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgdGhpcy5xdWF0ZXJuaW9uLnZtdWx0KGxvY2FsVmVjdG9yLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgYSBzaGFwZSB0byB0aGUgYm9keSB3aXRoIGEgbG9jYWwgb2Zmc2V0IGFuZCBvcmllbnRhdGlvbi4KICAgICAqIEByZXR1cm4gVGhlIGJvZHkgb2JqZWN0LCBmb3IgY2hhaW5hYmlsaXR5LgogICAgICovCgoKICAgIGFkZFNoYXBlKHNoYXBlLCBfb2Zmc2V0LCBfb3JpZW50YXRpb24pIHsKICAgICAgY29uc3Qgb2Zmc2V0ID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3Qgb3JpZW50YXRpb24gPSBuZXcgUXVhdGVybmlvbigpOwoKICAgICAgaWYgKF9vZmZzZXQpIHsKICAgICAgICBvZmZzZXQuY29weShfb2Zmc2V0KTsKICAgICAgfQoKICAgICAgaWYgKF9vcmllbnRhdGlvbikgewogICAgICAgIG9yaWVudGF0aW9uLmNvcHkoX29yaWVudGF0aW9uKTsKICAgICAgfQoKICAgICAgdGhpcy5zaGFwZXMucHVzaChzaGFwZSk7CiAgICAgIHRoaXMuc2hhcGVPZmZzZXRzLnB1c2gob2Zmc2V0KTsKICAgICAgdGhpcy5zaGFwZU9yaWVudGF0aW9ucy5wdXNoKG9yaWVudGF0aW9uKTsKICAgICAgdGhpcy51cGRhdGVNYXNzUHJvcGVydGllcygpOwogICAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nUmFkaXVzKCk7CiAgICAgIHRoaXMuYWFiYk5lZWRzVXBkYXRlID0gdHJ1ZTsKICAgICAgc2hhcGUuYm9keSA9IHRoaXM7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBSZW1vdmUgYSBzaGFwZSBmcm9tIHRoZSBib2R5LgogICAgICogQHJldHVybiBUaGUgYm9keSBvYmplY3QsIGZvciBjaGFpbmFiaWxpdHkuCiAgICAgKi8KCgogICAgcmVtb3ZlU2hhcGUoc2hhcGUpIHsKICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnNoYXBlcy5pbmRleE9mKHNoYXBlKTsKCiAgICAgIGlmIChpbmRleCA9PT0gLTEpIHsKICAgICAgICBjb25zb2xlLndhcm4oJ1NoYXBlIGRvZXMgbm90IGJlbG9uZyB0byB0aGUgYm9keScpOwogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9CgogICAgICB0aGlzLnNoYXBlcy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB0aGlzLnNoYXBlT2Zmc2V0cy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB0aGlzLnNoYXBlT3JpZW50YXRpb25zLnNwbGljZShpbmRleCwgMSk7CiAgICAgIHRoaXMudXBkYXRlTWFzc1Byb3BlcnRpZXMoKTsKICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1JhZGl1cygpOwogICAgICB0aGlzLmFhYmJOZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgIHNoYXBlLmJvZHkgPSBudWxsOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlIHRoZSBib3VuZGluZyByYWRpdXMgb2YgdGhlIGJvZHkuIFNob3VsZCBiZSBkb25lIGlmIGFueSBvZiB0aGUgc2hhcGVzIGFyZSBjaGFuZ2VkLgogICAgICovCgoKICAgIHVwZGF0ZUJvdW5kaW5nUmFkaXVzKCkgewogICAgICBjb25zdCBzaGFwZXMgPSB0aGlzLnNoYXBlczsKICAgICAgY29uc3Qgc2hhcGVPZmZzZXRzID0gdGhpcy5zaGFwZU9mZnNldHM7CiAgICAgIGNvbnN0IE4gPSBzaGFwZXMubGVuZ3RoOwogICAgICBsZXQgcmFkaXVzID0gMDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBzaGFwZSA9IHNoYXBlc1tpXTsKICAgICAgICBzaGFwZS51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgICAgIGNvbnN0IG9mZnNldCA9IHNoYXBlT2Zmc2V0c1tpXS5sZW5ndGgoKTsKICAgICAgICBjb25zdCByID0gc2hhcGUuYm91bmRpbmdTcGhlcmVSYWRpdXM7CgogICAgICAgIGlmIChvZmZzZXQgKyByID4gcmFkaXVzKSB7CiAgICAgICAgICByYWRpdXMgPSBvZmZzZXQgKyByOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5ib3VuZGluZ1JhZGl1cyA9IHJhZGl1czsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyB0aGUgLmFhYmIKICAgICAqLwoKCiAgICB1cGRhdGVBQUJCKCkgewogICAgICBjb25zdCBzaGFwZXMgPSB0aGlzLnNoYXBlczsKICAgICAgY29uc3Qgc2hhcGVPZmZzZXRzID0gdGhpcy5zaGFwZU9mZnNldHM7CiAgICAgIGNvbnN0IHNoYXBlT3JpZW50YXRpb25zID0gdGhpcy5zaGFwZU9yaWVudGF0aW9uczsKICAgICAgY29uc3QgTiA9IHNoYXBlcy5sZW5ndGg7CiAgICAgIGNvbnN0IG9mZnNldCA9IHRtcFZlYzsKICAgICAgY29uc3Qgb3JpZW50YXRpb24gPSB0bXBRdWF0OwogICAgICBjb25zdCBib2R5UXVhdCA9IHRoaXMucXVhdGVybmlvbjsKICAgICAgY29uc3QgYWFiYiA9IHRoaXMuYWFiYjsKICAgICAgY29uc3Qgc2hhcGVBQUJCID0gdXBkYXRlQUFCQl9zaGFwZUFBQkI7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3Qgc2hhcGUgPSBzaGFwZXNbaV07IC8vIEdldCBzaGFwZSB3b3JsZCBwb3NpdGlvbgoKICAgICAgICBib2R5UXVhdC52bXVsdChzaGFwZU9mZnNldHNbaV0sIG9mZnNldCk7CiAgICAgICAgb2Zmc2V0LnZhZGQodGhpcy5wb3NpdGlvbiwgb2Zmc2V0KTsgLy8gR2V0IHNoYXBlIHdvcmxkIHF1YXRlcm5pb24KCiAgICAgICAgYm9keVF1YXQubXVsdChzaGFwZU9yaWVudGF0aW9uc1tpXSwgb3JpZW50YXRpb24pOyAvLyBHZXQgc2hhcGUgQUFCQgoKICAgICAgICBzaGFwZS5jYWxjdWxhdGVXb3JsZEFBQkIob2Zmc2V0LCBvcmllbnRhdGlvbiwgc2hhcGVBQUJCLmxvd2VyQm91bmQsIHNoYXBlQUFCQi51cHBlckJvdW5kKTsKCiAgICAgICAgaWYgKGkgPT09IDApIHsKICAgICAgICAgIGFhYmIuY29weShzaGFwZUFBQkIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhYWJiLmV4dGVuZChzaGFwZUFBQkIpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5hYWJiTmVlZHNVcGRhdGUgPSBmYWxzZTsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlIGAuaW5lcnRpYVdvcmxkYCBhbmQgYC5pbnZJbmVydGlhV29ybGRgCiAgICAgKi8KCgogICAgdXBkYXRlSW5lcnRpYVdvcmxkKGZvcmNlKSB7CiAgICAgIGNvbnN0IEkgPSB0aGlzLmludkluZXJ0aWE7CgogICAgICBpZiAoSS54ID09PSBJLnkgJiYgSS55ID09PSBJLnogJiYgIWZvcmNlKSA7IGVsc2UgewogICAgICAgIGNvbnN0IG0xID0gdWl3X20xOwogICAgICAgIGNvbnN0IG0yID0gdWl3X20yOwogICAgICAgIG0xLnNldFJvdGF0aW9uRnJvbVF1YXRlcm5pb24odGhpcy5xdWF0ZXJuaW9uKTsKICAgICAgICBtMS50cmFuc3Bvc2UobTIpOwogICAgICAgIG0xLnNjYWxlKEksIG0xKTsKICAgICAgICBtMS5tbXVsdChtMiwgdGhpcy5pbnZJbmVydGlhV29ybGQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEFwcGx5IGZvcmNlIHRvIGEgcG9pbnQgb2YgdGhlIGJvZHkuIFRoaXMgY291bGQgZm9yIGV4YW1wbGUgYmUgYSBwb2ludCBvbiB0aGUgQm9keSBzdXJmYWNlLgogICAgICogQXBwbHlpbmcgZm9yY2UgdGhpcyB3YXkgd2lsbCBhZGQgdG8gQm9keS5mb3JjZSBhbmQgQm9keS50b3JxdWUuCiAgICAgKiBAcGFyYW0gZm9yY2UgVGhlIGFtb3VudCBvZiBmb3JjZSB0byBhZGQuCiAgICAgKiBAcGFyYW0gcmVsYXRpdmVQb2ludCBBIHBvaW50IHJlbGF0aXZlIHRvIHRoZSBjZW50ZXIgb2YgbWFzcyB0byBhcHBseSB0aGUgZm9yY2Ugb24uCiAgICAgKi8KCgogICAgYXBwbHlGb3JjZShmb3JjZSwgcmVsYXRpdmVQb2ludCkgewogICAgICBpZiAocmVsYXRpdmVQb2ludCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVsYXRpdmVQb2ludCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIC8vIE5lZWRlZD8KICAgICAgaWYgKHRoaXMudHlwZSAhPT0gQm9keS5EWU5BTUlDKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HKSB7CiAgICAgICAgdGhpcy53YWtlVXAoKTsKICAgICAgfSAvLyBDb21wdXRlIHByb2R1Y2VkIHJvdGF0aW9uYWwgZm9yY2UKCgogICAgICBjb25zdCByb3RGb3JjZSA9IEJvZHlfYXBwbHlGb3JjZV9yb3RGb3JjZTsKICAgICAgcmVsYXRpdmVQb2ludC5jcm9zcyhmb3JjZSwgcm90Rm9yY2UpOyAvLyBBZGQgbGluZWFyIGZvcmNlCgogICAgICB0aGlzLmZvcmNlLnZhZGQoZm9yY2UsIHRoaXMuZm9yY2UpOyAvLyBBZGQgcm90YXRpb25hbCBmb3JjZQoKICAgICAgdGhpcy50b3JxdWUudmFkZChyb3RGb3JjZSwgdGhpcy50b3JxdWUpOwogICAgfQogICAgLyoqCiAgICAgKiBBcHBseSBmb3JjZSB0byBhIGxvY2FsIHBvaW50IGluIHRoZSBib2R5LgogICAgICogQHBhcmFtIGZvcmNlIFRoZSBmb3JjZSB2ZWN0b3IgdG8gYXBwbHksIGRlZmluZWQgbG9jYWxseSBpbiB0aGUgYm9keSBmcmFtZS4KICAgICAqIEBwYXJhbSBsb2NhbFBvaW50IEEgbG9jYWwgcG9pbnQgaW4gdGhlIGJvZHkgdG8gYXBwbHkgdGhlIGZvcmNlIG9uLgogICAgICovCgoKICAgIGFwcGx5TG9jYWxGb3JjZShsb2NhbEZvcmNlLCBsb2NhbFBvaW50KSB7CiAgICAgIGlmIChsb2NhbFBvaW50ID09PSB2b2lkIDApIHsKICAgICAgICBsb2NhbFBvaW50ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMudHlwZSAhPT0gQm9keS5EWU5BTUlDKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCB3b3JsZEZvcmNlID0gQm9keV9hcHBseUxvY2FsRm9yY2Vfd29ybGRGb3JjZTsKICAgICAgY29uc3QgcmVsYXRpdmVQb2ludFdvcmxkID0gQm9keV9hcHBseUxvY2FsRm9yY2VfcmVsYXRpdmVQb2ludFdvcmxkOyAvLyBUcmFuc2Zvcm0gdGhlIGZvcmNlIHZlY3RvciB0byB3b3JsZCBzcGFjZQoKICAgICAgdGhpcy52ZWN0b3JUb1dvcmxkRnJhbWUobG9jYWxGb3JjZSwgd29ybGRGb3JjZSk7CiAgICAgIHRoaXMudmVjdG9yVG9Xb3JsZEZyYW1lKGxvY2FsUG9pbnQsIHJlbGF0aXZlUG9pbnRXb3JsZCk7CiAgICAgIHRoaXMuYXBwbHlGb3JjZSh3b3JsZEZvcmNlLCByZWxhdGl2ZVBvaW50V29ybGQpOwogICAgfQogICAgLyoqCiAgICAgKiBBcHBseSB0b3JxdWUgdG8gdGhlIGJvZHkuCiAgICAgKiBAcGFyYW0gdG9ycXVlIFRoZSBhbW91bnQgb2YgdG9ycXVlIHRvIGFkZC4KICAgICAqLwoKCiAgICBhcHBseVRvcnF1ZSh0b3JxdWUpIHsKICAgICAgaWYgKHRoaXMudHlwZSAhPT0gQm9keS5EWU5BTUlDKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HKSB7CiAgICAgICAgdGhpcy53YWtlVXAoKTsKICAgICAgfSAvLyBBZGQgcm90YXRpb25hbCBmb3JjZQoKCiAgICAgIHRoaXMudG9ycXVlLnZhZGQodG9ycXVlLCB0aGlzLnRvcnF1ZSk7CiAgICB9CiAgICAvKioKICAgICAqIEFwcGx5IGltcHVsc2UgdG8gYSBwb2ludCBvZiB0aGUgYm9keS4gVGhpcyBjb3VsZCBmb3IgZXhhbXBsZSBiZSBhIHBvaW50IG9uIHRoZSBCb2R5IHN1cmZhY2UuCiAgICAgKiBBbiBpbXB1bHNlIGlzIGEgZm9yY2UgYWRkZWQgdG8gYSBib2R5IGR1cmluZyBhIHNob3J0IHBlcmlvZCBvZiB0aW1lIChpbXB1bHNlID0gZm9yY2UgKiB0aW1lKS4KICAgICAqIEltcHVsc2VzIHdpbGwgYmUgYWRkZWQgdG8gQm9keS52ZWxvY2l0eSBhbmQgQm9keS5hbmd1bGFyVmVsb2NpdHkuCiAgICAgKiBAcGFyYW0gaW1wdWxzZSBUaGUgYW1vdW50IG9mIGltcHVsc2UgdG8gYWRkLgogICAgICogQHBhcmFtIHJlbGF0aXZlUG9pbnQgQSBwb2ludCByZWxhdGl2ZSB0byB0aGUgY2VudGVyIG9mIG1hc3MgdG8gYXBwbHkgdGhlIGZvcmNlIG9uLgogICAgICovCgoKICAgIGFwcGx5SW1wdWxzZShpbXB1bHNlLCByZWxhdGl2ZVBvaW50KSB7CiAgICAgIGlmIChyZWxhdGl2ZVBvaW50ID09PSB2b2lkIDApIHsKICAgICAgICByZWxhdGl2ZVBvaW50ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMudHlwZSAhPT0gQm9keS5EWU5BTUlDKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HKSB7CiAgICAgICAgdGhpcy53YWtlVXAoKTsKICAgICAgfSAvLyBDb21wdXRlIHBvaW50IHBvc2l0aW9uIHJlbGF0aXZlIHRvIHRoZSBib2R5IGNlbnRlcgoKCiAgICAgIGNvbnN0IHIgPSByZWxhdGl2ZVBvaW50OyAvLyBDb21wdXRlIHByb2R1Y2VkIGNlbnRyYWwgaW1wdWxzZSB2ZWxvY2l0eQoKICAgICAgY29uc3QgdmVsbyA9IEJvZHlfYXBwbHlJbXB1bHNlX3ZlbG87CiAgICAgIHZlbG8uY29weShpbXB1bHNlKTsKICAgICAgdmVsby5zY2FsZSh0aGlzLmludk1hc3MsIHZlbG8pOyAvLyBBZGQgbGluZWFyIGltcHVsc2UKCiAgICAgIHRoaXMudmVsb2NpdHkudmFkZCh2ZWxvLCB0aGlzLnZlbG9jaXR5KTsgLy8gQ29tcHV0ZSBwcm9kdWNlZCByb3RhdGlvbmFsIGltcHVsc2UgdmVsb2NpdHkKCiAgICAgIGNvbnN0IHJvdFZlbG8gPSBCb2R5X2FwcGx5SW1wdWxzZV9yb3RWZWxvOwogICAgICByLmNyb3NzKGltcHVsc2UsIHJvdFZlbG8pOwogICAgICAvKgogICAgICAgcm90VmVsby54ICo9IHRoaXMuaW52SW5lcnRpYS54OwogICAgICAgcm90VmVsby55ICo9IHRoaXMuaW52SW5lcnRpYS55OwogICAgICAgcm90VmVsby56ICo9IHRoaXMuaW52SW5lcnRpYS56OwogICAgICAgKi8KCiAgICAgIHRoaXMuaW52SW5lcnRpYVdvcmxkLnZtdWx0KHJvdFZlbG8sIHJvdFZlbG8pOyAvLyBBZGQgcm90YXRpb25hbCBJbXB1bHNlCgogICAgICB0aGlzLmFuZ3VsYXJWZWxvY2l0eS52YWRkKHJvdFZlbG8sIHRoaXMuYW5ndWxhclZlbG9jaXR5KTsKICAgIH0KICAgIC8qKgogICAgICogQXBwbHkgbG9jYWxseS1kZWZpbmVkIGltcHVsc2UgdG8gYSBsb2NhbCBwb2ludCBpbiB0aGUgYm9keS4KICAgICAqIEBwYXJhbSBmb3JjZSBUaGUgZm9yY2UgdmVjdG9yIHRvIGFwcGx5LCBkZWZpbmVkIGxvY2FsbHkgaW4gdGhlIGJvZHkgZnJhbWUuCiAgICAgKiBAcGFyYW0gbG9jYWxQb2ludCBBIGxvY2FsIHBvaW50IGluIHRoZSBib2R5IHRvIGFwcGx5IHRoZSBmb3JjZSBvbi4KICAgICAqLwoKCiAgICBhcHBseUxvY2FsSW1wdWxzZShsb2NhbEltcHVsc2UsIGxvY2FsUG9pbnQpIHsKICAgICAgaWYgKGxvY2FsUG9pbnQgPT09IHZvaWQgMCkgewogICAgICAgIGxvY2FsUG9pbnQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBpZiAodGhpcy50eXBlICE9PSBCb2R5LkRZTkFNSUMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IHdvcmxkSW1wdWxzZSA9IEJvZHlfYXBwbHlMb2NhbEltcHVsc2Vfd29ybGRJbXB1bHNlOwogICAgICBjb25zdCByZWxhdGl2ZVBvaW50V29ybGQgPSBCb2R5X2FwcGx5TG9jYWxJbXB1bHNlX3JlbGF0aXZlUG9pbnQ7IC8vIFRyYW5zZm9ybSB0aGUgZm9yY2UgdmVjdG9yIHRvIHdvcmxkIHNwYWNlCgogICAgICB0aGlzLnZlY3RvclRvV29ybGRGcmFtZShsb2NhbEltcHVsc2UsIHdvcmxkSW1wdWxzZSk7CiAgICAgIHRoaXMudmVjdG9yVG9Xb3JsZEZyYW1lKGxvY2FsUG9pbnQsIHJlbGF0aXZlUG9pbnRXb3JsZCk7CiAgICAgIHRoaXMuYXBwbHlJbXB1bHNlKHdvcmxkSW1wdWxzZSwgcmVsYXRpdmVQb2ludFdvcmxkKTsKICAgIH0KICAgIC8qKgogICAgICogU2hvdWxkIGJlIGNhbGxlZCB3aGVuZXZlciB5b3UgY2hhbmdlIHRoZSBib2R5IHNoYXBlIG9yIG1hc3MuCiAgICAgKi8KCgogICAgdXBkYXRlTWFzc1Byb3BlcnRpZXMoKSB7CiAgICAgIGNvbnN0IGhhbGZFeHRlbnRzID0gQm9keV91cGRhdGVNYXNzUHJvcGVydGllc19oYWxmRXh0ZW50czsKICAgICAgdGhpcy5pbnZNYXNzID0gdGhpcy5tYXNzID4gMCA/IDEuMCAvIHRoaXMubWFzcyA6IDA7CiAgICAgIGNvbnN0IEkgPSB0aGlzLmluZXJ0aWE7CiAgICAgIGNvbnN0IGZpeGVkID0gdGhpcy5maXhlZFJvdGF0aW9uOyAvLyBBcHByb3hpbWF0ZSB3aXRoIEFBQkIgYm94CgogICAgICB0aGlzLnVwZGF0ZUFBQkIoKTsKICAgICAgaGFsZkV4dGVudHMuc2V0KCh0aGlzLmFhYmIudXBwZXJCb3VuZC54IC0gdGhpcy5hYWJiLmxvd2VyQm91bmQueCkgLyAyLCAodGhpcy5hYWJiLnVwcGVyQm91bmQueSAtIHRoaXMuYWFiYi5sb3dlckJvdW5kLnkpIC8gMiwgKHRoaXMuYWFiYi51cHBlckJvdW5kLnogLSB0aGlzLmFhYmIubG93ZXJCb3VuZC56KSAvIDIpOwogICAgICBCb3guY2FsY3VsYXRlSW5lcnRpYShoYWxmRXh0ZW50cywgdGhpcy5tYXNzLCBJKTsKICAgICAgdGhpcy5pbnZJbmVydGlhLnNldChJLnggPiAwICYmICFmaXhlZCA/IDEuMCAvIEkueCA6IDAsIEkueSA+IDAgJiYgIWZpeGVkID8gMS4wIC8gSS55IDogMCwgSS56ID4gMCAmJiAhZml4ZWQgPyAxLjAgLyBJLnogOiAwKTsKICAgICAgdGhpcy51cGRhdGVJbmVydGlhV29ybGQodHJ1ZSk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB3b3JsZCB2ZWxvY2l0eSBvZiBhIHBvaW50IGluIHRoZSBib2R5LgogICAgICogQHBhcmFtIHdvcmxkUG9pbnQKICAgICAqIEBwYXJhbSByZXN1bHQKICAgICAqIEByZXR1cm4gVGhlIHJlc3VsdCB2ZWN0b3IuCiAgICAgKi8KCgogICAgZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQod29ybGRQb2ludCwgcmVzdWx0KSB7CiAgICAgIGNvbnN0IHIgPSBuZXcgVmVjMygpOwogICAgICB3b3JsZFBvaW50LnZzdWIodGhpcy5wb3NpdGlvbiwgcik7CiAgICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5LmNyb3NzKHIsIHJlc3VsdCk7CiAgICAgIHRoaXMudmVsb2NpdHkudmFkZChyZXN1bHQsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIE1vdmUgdGhlIGJvZHkgZm9yd2FyZCBpbiB0aW1lLgogICAgICogQHBhcmFtIGR0IFRpbWUgc3RlcAogICAgICogQHBhcmFtIHF1YXROb3JtYWxpemUgU2V0IHRvIHRydWUgdG8gbm9ybWFsaXplIHRoZSBib2R5IHF1YXRlcm5pb24KICAgICAqIEBwYXJhbSBxdWF0Tm9ybWFsaXplRmFzdCBJZiB0aGUgcXVhdGVybmlvbiBzaG91bGQgYmUgbm9ybWFsaXplZCB1c2luZyAiZmFzdCIgcXVhdGVybmlvbiBub3JtYWxpemF0aW9uCiAgICAgKi8KCgogICAgaW50ZWdyYXRlKGR0LCBxdWF0Tm9ybWFsaXplLCBxdWF0Tm9ybWFsaXplRmFzdCkgewogICAgICAvLyBTYXZlIHByZXZpb3VzIHBvc2l0aW9uCiAgICAgIHRoaXMucHJldmlvdXNQb3NpdGlvbi5jb3B5KHRoaXMucG9zaXRpb24pOwogICAgICB0aGlzLnByZXZpb3VzUXVhdGVybmlvbi5jb3B5KHRoaXMucXVhdGVybmlvbik7CgogICAgICBpZiAoISh0aGlzLnR5cGUgPT09IEJvZHkuRFlOQU1JQyB8fCB0aGlzLnR5cGUgPT09IEJvZHkuS0lORU1BVElDKSB8fCB0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHsKICAgICAgICAvLyBPbmx5IGZvciBkeW5hbWljCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCB2ZWxvID0gdGhpcy52ZWxvY2l0eTsKICAgICAgY29uc3QgYW5ndWxhclZlbG8gPSB0aGlzLmFuZ3VsYXJWZWxvY2l0eTsKICAgICAgY29uc3QgcG9zID0gdGhpcy5wb3NpdGlvbjsKICAgICAgY29uc3QgZm9yY2UgPSB0aGlzLmZvcmNlOwogICAgICBjb25zdCB0b3JxdWUgPSB0aGlzLnRvcnF1ZTsKICAgICAgY29uc3QgcXVhdCA9IHRoaXMucXVhdGVybmlvbjsKICAgICAgY29uc3QgaW52TWFzcyA9IHRoaXMuaW52TWFzczsKICAgICAgY29uc3QgaW52SW5lcnRpYSA9IHRoaXMuaW52SW5lcnRpYVdvcmxkOwogICAgICBjb25zdCBsaW5lYXJGYWN0b3IgPSB0aGlzLmxpbmVhckZhY3RvcjsKICAgICAgY29uc3QgaU1kdCA9IGludk1hc3MgKiBkdDsKICAgICAgdmVsby54ICs9IGZvcmNlLnggKiBpTWR0ICogbGluZWFyRmFjdG9yLng7CiAgICAgIHZlbG8ueSArPSBmb3JjZS55ICogaU1kdCAqIGxpbmVhckZhY3Rvci55OwogICAgICB2ZWxvLnogKz0gZm9yY2UueiAqIGlNZHQgKiBsaW5lYXJGYWN0b3IuejsKICAgICAgY29uc3QgZSA9IGludkluZXJ0aWEuZWxlbWVudHM7CiAgICAgIGNvbnN0IGFuZ3VsYXJGYWN0b3IgPSB0aGlzLmFuZ3VsYXJGYWN0b3I7CiAgICAgIGNvbnN0IHR4ID0gdG9ycXVlLnggKiBhbmd1bGFyRmFjdG9yLng7CiAgICAgIGNvbnN0IHR5ID0gdG9ycXVlLnkgKiBhbmd1bGFyRmFjdG9yLnk7CiAgICAgIGNvbnN0IHR6ID0gdG9ycXVlLnogKiBhbmd1bGFyRmFjdG9yLno7CiAgICAgIGFuZ3VsYXJWZWxvLnggKz0gZHQgKiAoZVswXSAqIHR4ICsgZVsxXSAqIHR5ICsgZVsyXSAqIHR6KTsKICAgICAgYW5ndWxhclZlbG8ueSArPSBkdCAqIChlWzNdICogdHggKyBlWzRdICogdHkgKyBlWzVdICogdHopOwogICAgICBhbmd1bGFyVmVsby56ICs9IGR0ICogKGVbNl0gKiB0eCArIGVbN10gKiB0eSArIGVbOF0gKiB0eik7IC8vIFVzZSBuZXcgdmVsb2NpdHkgIC0gbGVhcCBmcm9nCgogICAgICBwb3MueCArPSB2ZWxvLnggKiBkdDsKICAgICAgcG9zLnkgKz0gdmVsby55ICogZHQ7CiAgICAgIHBvcy56ICs9IHZlbG8ueiAqIGR0OwogICAgICBxdWF0LmludGVncmF0ZSh0aGlzLmFuZ3VsYXJWZWxvY2l0eSwgZHQsIHRoaXMuYW5ndWxhckZhY3RvciwgcXVhdCk7CgogICAgICBpZiAocXVhdE5vcm1hbGl6ZSkgewogICAgICAgIGlmIChxdWF0Tm9ybWFsaXplRmFzdCkgewogICAgICAgICAgcXVhdC5ub3JtYWxpemVGYXN0KCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHF1YXQubm9ybWFsaXplKCk7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmFhYmJOZWVkc1VwZGF0ZSA9IHRydWU7IC8vIFVwZGF0ZSB3b3JsZCBpbmVydGlhCgogICAgICB0aGlzLnVwZGF0ZUluZXJ0aWFXb3JsZCgpOwogICAgfQoKICB9CiAgQm9keS5pZENvdW50ZXIgPSAwOwogIEJvZHkuQ09MTElERV9FVkVOVF9OQU1FID0gJ2NvbGxpZGUnOwogIEJvZHkuRFlOQU1JQyA9IEJPRFlfVFlQRVMuRFlOQU1JQzsKICBCb2R5LlNUQVRJQyA9IEJPRFlfVFlQRVMuU1RBVElDOwogIEJvZHkuS0lORU1BVElDID0gQk9EWV9UWVBFUy5LSU5FTUFUSUM7CiAgQm9keS5BV0FLRSA9IEJPRFlfU0xFRVBfU1RBVEVTLkFXQUtFOwogIEJvZHkuU0xFRVBZID0gQk9EWV9TTEVFUF9TVEFURVMuU0xFRVBZOwogIEJvZHkuU0xFRVBJTkcgPSBCT0RZX1NMRUVQX1NUQVRFUy5TTEVFUElORzsKICBCb2R5Lndha2V1cEV2ZW50ID0gewogICAgdHlwZTogJ3dha2V1cCcKICB9OwogIEJvZHkuc2xlZXB5RXZlbnQgPSB7CiAgICB0eXBlOiAnc2xlZXB5JwogIH07CiAgQm9keS5zbGVlcEV2ZW50ID0gewogICAgdHlwZTogJ3NsZWVwJwogIH07CiAgY29uc3QgdG1wVmVjID0gbmV3IFZlYzMoKTsKICBjb25zdCB0bXBRdWF0ID0gbmV3IFF1YXRlcm5pb24oKTsKICBjb25zdCB1cGRhdGVBQUJCX3NoYXBlQUFCQiA9IG5ldyBBQUJCKCk7CiAgY29uc3QgdWl3X20xID0gbmV3IE1hdDMoKTsKICBjb25zdCB1aXdfbTIgPSBuZXcgTWF0MygpOwogIG5ldyBNYXQzKCk7CiAgY29uc3QgQm9keV9hcHBseUZvcmNlX3JvdEZvcmNlID0gbmV3IFZlYzMoKTsKICBjb25zdCBCb2R5X2FwcGx5TG9jYWxGb3JjZV93b3JsZEZvcmNlID0gbmV3IFZlYzMoKTsKICBjb25zdCBCb2R5X2FwcGx5TG9jYWxGb3JjZV9yZWxhdGl2ZVBvaW50V29ybGQgPSBuZXcgVmVjMygpOwogIGNvbnN0IEJvZHlfYXBwbHlJbXB1bHNlX3ZlbG8gPSBuZXcgVmVjMygpOwogIGNvbnN0IEJvZHlfYXBwbHlJbXB1bHNlX3JvdFZlbG8gPSBuZXcgVmVjMygpOwogIGNvbnN0IEJvZHlfYXBwbHlMb2NhbEltcHVsc2Vfd29ybGRJbXB1bHNlID0gbmV3IFZlYzMoKTsKICBjb25zdCBCb2R5X2FwcGx5TG9jYWxJbXB1bHNlX3JlbGF0aXZlUG9pbnQgPSBuZXcgVmVjMygpOwogIGNvbnN0IEJvZHlfdXBkYXRlTWFzc1Byb3BlcnRpZXNfaGFsZkV4dGVudHMgPSBuZXcgVmVjMygpOwoKICAvKioKICAgKiBCYXNlIGNsYXNzIGZvciBicm9hZHBoYXNlIGltcGxlbWVudGF0aW9ucwogICAqIEBhdXRob3Igc2NodGVwcGUKICAgKi8KICBjbGFzcyBCcm9hZHBoYXNlIHsKICAgIC8qKgogICAgICogVGhlIHdvcmxkIHRvIHNlYXJjaCBmb3IgY29sbGlzaW9ucyBpbi4KICAgICAqLwoKICAgIC8qKgogICAgICogSWYgc2V0IHRvIHRydWUsIHRoZSBicm9hZHBoYXNlIHVzZXMgYm91bmRpbmcgYm94ZXMgZm9yIGludGVyc2VjdGlvbiB0ZXN0cywgZWxzZSBpdCB1c2VzIGJvdW5kaW5nIHNwaGVyZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNldCB0byB0cnVlIGlmIHRoZSBvYmplY3RzIGluIHRoZSB3b3JsZCBtb3ZlZC4KICAgICAqLwogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHRoaXMud29ybGQgPSBudWxsOwogICAgICB0aGlzLnVzZUJvdW5kaW5nQm94ZXMgPSBmYWxzZTsKICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgY29sbGlzaW9uIHBhaXJzIGZyb20gdGhlIHdvcmxkCiAgICAgKiBAcGFyYW0gd29ybGQgVGhlIHdvcmxkIHRvIHNlYXJjaCBpbgogICAgICogQHBhcmFtIHAxIEVtcHR5IGFycmF5IHRvIGJlIGZpbGxlZCB3aXRoIGJvZHkgb2JqZWN0cwogICAgICogQHBhcmFtIHAyIEVtcHR5IGFycmF5IHRvIGJlIGZpbGxlZCB3aXRoIGJvZHkgb2JqZWN0cwogICAgICovCgoKICAgIGNvbGxpc2lvblBhaXJzKHdvcmxkLCBwMSwgcDIpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb2xsaXNpb25QYWlycyBub3QgaW1wbGVtZW50ZWQgZm9yIHRoaXMgQnJvYWRQaGFzZSBjbGFzcyEnKTsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgYSBib2R5IHBhaXIgbmVlZHMgdG8gYmUgaW50ZXJzZWN0aW9uIHRlc3RlZCBhdCBhbGwuCiAgICAgKi8KCgogICAgbmVlZEJyb2FkcGhhc2VDb2xsaXNpb24oYm9keUEsIGJvZHlCKSB7CiAgICAgIC8vIENoZWNrIGNvbGxpc2lvbiBmaWx0ZXIgbWFza3MKICAgICAgaWYgKChib2R5QS5jb2xsaXNpb25GaWx0ZXJHcm91cCAmIGJvZHlCLmNvbGxpc2lvbkZpbHRlck1hc2spID09PSAwIHx8IChib2R5Qi5jb2xsaXNpb25GaWx0ZXJHcm91cCAmIGJvZHlBLmNvbGxpc2lvbkZpbHRlck1hc2spID09PSAwKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9IC8vIENoZWNrIHR5cGVzCgoKICAgICAgaWYgKCgoYm9keUEudHlwZSAmIEJvZHkuU1RBVElDKSAhPT0gMCB8fCBib2R5QS5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HKSAmJiAoKGJvZHlCLnR5cGUgJiBCb2R5LlNUQVRJQykgIT09IDAgfHwgYm9keUIuc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUElORykpIHsKICAgICAgICAvLyBCb3RoIGJvZGllcyBhcmUgc3RhdGljIG9yIHNsZWVwaW5nLiBTa2lwLgogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIHRoZSBib3VuZGluZyB2b2x1bWVzIG9mIHR3byBib2RpZXMgaW50ZXJzZWN0LgogICAgICovCgoKICAgIGludGVyc2VjdGlvblRlc3QoYm9keUEsIGJvZHlCLCBwYWlyczEsIHBhaXJzMikgewogICAgICBpZiAodGhpcy51c2VCb3VuZGluZ0JveGVzKSB7CiAgICAgICAgdGhpcy5kb0JvdW5kaW5nQm94QnJvYWRwaGFzZShib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmRvQm91bmRpbmdTcGhlcmVCcm9hZHBoYXNlKGJvZHlBLCBib2R5QiwgcGFpcnMxLCBwYWlyczIpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIHRoZSBib3VuZGluZyBzcGhlcmVzIG9mIHR3byBib2RpZXMgYXJlIGludGVyc2VjdGluZy4KICAgICAqIEBwYXJhbSBwYWlyczEgYm9keUEgaXMgYXBwZW5kZWQgdG8gdGhpcyBhcnJheSBpZiBpbnRlcnNlY3Rpb24KICAgICAqIEBwYXJhbSBwYWlyczIgYm9keUIgaXMgYXBwZW5kZWQgdG8gdGhpcyBhcnJheSBpZiBpbnRlcnNlY3Rpb24KICAgICAqLwoKCiAgICBkb0JvdW5kaW5nU3BoZXJlQnJvYWRwaGFzZShib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKSB7CiAgICAgIGNvbnN0IHIgPSBCcm9hZHBoYXNlX2NvbGxpc2lvblBhaXJzX3I7CiAgICAgIGJvZHlCLnBvc2l0aW9uLnZzdWIoYm9keUEucG9zaXRpb24sIHIpOwogICAgICBjb25zdCBib3VuZGluZ1JhZGl1c1N1bTIgPSAoYm9keUEuYm91bmRpbmdSYWRpdXMgKyBib2R5Qi5ib3VuZGluZ1JhZGl1cykgKiogMjsKICAgICAgY29uc3Qgbm9ybTIgPSByLmxlbmd0aFNxdWFyZWQoKTsKCiAgICAgIGlmIChub3JtMiA8IGJvdW5kaW5nUmFkaXVzU3VtMikgewogICAgICAgIHBhaXJzMS5wdXNoKGJvZHlBKTsKICAgICAgICBwYWlyczIucHVzaChib2R5Qik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgdGhlIGJvdW5kaW5nIGJveGVzIG9mIHR3byBib2RpZXMgYXJlIGludGVyc2VjdGluZy4KICAgICAqLwoKCiAgICBkb0JvdW5kaW5nQm94QnJvYWRwaGFzZShib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKSB7CiAgICAgIGlmIChib2R5QS5hYWJiTmVlZHNVcGRhdGUpIHsKICAgICAgICBib2R5QS51cGRhdGVBQUJCKCk7CiAgICAgIH0KCiAgICAgIGlmIChib2R5Qi5hYWJiTmVlZHNVcGRhdGUpIHsKICAgICAgICBib2R5Qi51cGRhdGVBQUJCKCk7CiAgICAgIH0gLy8gQ2hlY2sgQUFCQiAvIEFBQkIKCgogICAgICBpZiAoYm9keUEuYWFiYi5vdmVybGFwcyhib2R5Qi5hYWJiKSkgewogICAgICAgIHBhaXJzMS5wdXNoKGJvZHlBKTsKICAgICAgICBwYWlyczIucHVzaChib2R5Qik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmVtb3ZlcyBkdXBsaWNhdGUgcGFpcnMgZnJvbSB0aGUgcGFpciBhcnJheXMuCiAgICAgKi8KCgogICAgbWFrZVBhaXJzVW5pcXVlKHBhaXJzMSwgcGFpcnMyKSB7CiAgICAgIGNvbnN0IHQgPSBCcm9hZHBoYXNlX21ha2VQYWlyc1VuaXF1ZV90ZW1wOwogICAgICBjb25zdCBwMSA9IEJyb2FkcGhhc2VfbWFrZVBhaXJzVW5pcXVlX3AxOwogICAgICBjb25zdCBwMiA9IEJyb2FkcGhhc2VfbWFrZVBhaXJzVW5pcXVlX3AyOwogICAgICBjb25zdCBOID0gcGFpcnMxLmxlbmd0aDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBwMVtpXSA9IHBhaXJzMVtpXTsKICAgICAgICBwMltpXSA9IHBhaXJzMltpXTsKICAgICAgfQoKICAgICAgcGFpcnMxLmxlbmd0aCA9IDA7CiAgICAgIHBhaXJzMi5sZW5ndGggPSAwOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGlkMSA9IHAxW2ldLmlkOwogICAgICAgIGNvbnN0IGlkMiA9IHAyW2ldLmlkOwogICAgICAgIGNvbnN0IGtleSA9IGlkMSA8IGlkMiA/IGAke2lkMX0sJHtpZDJ9YCA6IGAke2lkMn0sJHtpZDF9YDsKICAgICAgICB0W2tleV0gPSBpOwogICAgICAgIHQua2V5cy5wdXNoKGtleSk7CiAgICAgIH0KCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSB0LmtleXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBrZXkgPSB0LmtleXMucG9wKCk7CiAgICAgICAgY29uc3QgcGFpckluZGV4ID0gdFtrZXldOwogICAgICAgIHBhaXJzMS5wdXNoKHAxW3BhaXJJbmRleF0pOwogICAgICAgIHBhaXJzMi5wdXNoKHAyW3BhaXJJbmRleF0pOwogICAgICAgIGRlbGV0ZSB0W2tleV07CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVG8gYmUgaW1wbGVtZW50ZWQgYnkgc3ViY2Fzc2VzCiAgICAgKi8KCgogICAgc2V0V29ybGQod29ybGQpIHt9CiAgICAvKioKICAgICAqIENoZWNrIGlmIHRoZSBib3VuZGluZyBzcGhlcmVzIG9mIHR3byBib2RpZXMgb3ZlcmxhcC4KICAgICAqLwoKCiAgICBzdGF0aWMgYm91bmRpbmdTcGhlcmVDaGVjayhib2R5QSwgYm9keUIpIHsKICAgICAgY29uc3QgZGlzdCA9IG5ldyBWZWMzKCk7IC8vIGJzY19kaXN0OwoKICAgICAgYm9keUEucG9zaXRpb24udnN1Yihib2R5Qi5wb3NpdGlvbiwgZGlzdCk7CiAgICAgIGNvbnN0IHNhID0gYm9keUEuc2hhcGVzWzBdOwogICAgICBjb25zdCBzYiA9IGJvZHlCLnNoYXBlc1swXTsKICAgICAgcmV0dXJuIE1hdGgucG93KHNhLmJvdW5kaW5nU3BoZXJlUmFkaXVzICsgc2IuYm91bmRpbmdTcGhlcmVSYWRpdXMsIDIpID4gZGlzdC5sZW5ndGhTcXVhcmVkKCk7CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgYWxsIHRoZSBib2RpZXMgd2l0aGluIHRoZSBBQUJCLgogICAgICovCgoKICAgIGFhYmJRdWVyeSh3b3JsZCwgYWFiYiwgcmVzdWx0KSB7CiAgICAgIGNvbnNvbGUud2FybignLmFhYmJRdWVyeSBpcyBub3QgaW1wbGVtZW50ZWQgaW4gdGhpcyBCcm9hZHBoYXNlIHN1YmNsYXNzLicpOwogICAgICByZXR1cm4gW107CiAgICB9CgogIH0gLy8gVGVtcCBvYmplY3RzCgogIGNvbnN0IEJyb2FkcGhhc2VfY29sbGlzaW9uUGFpcnNfciA9IG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBuZXcgUXVhdGVybmlvbigpOwogIG5ldyBWZWMzKCk7CiAgY29uc3QgQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfdGVtcCA9IHsKICAgIGtleXM6IFtdCiAgfTsKICBjb25zdCBCcm9hZHBoYXNlX21ha2VQYWlyc1VuaXF1ZV9wMSA9IFtdOwogIGNvbnN0IEJyb2FkcGhhc2VfbWFrZVBhaXJzVW5pcXVlX3AyID0gW107CiAgbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CgogIC8qKgogICAqIE5haXZlIGJyb2FkcGhhc2UgaW1wbGVtZW50YXRpb24sIHVzZWQgaW4gbGFjayBvZiBiZXR0ZXIgb25lcy4KICAgKgogICAqIFRoZSBuYWl2ZSBicm9hZHBoYXNlIGxvb2tzIGF0IGFsbCBwb3NzaWJsZSBwYWlycyB3aXRob3V0IHJlc3RyaWN0aW9uLCB0aGVyZWZvcmUgaXQgaGFzIGNvbXBsZXhpdHkgTl4yIF8od2hpY2ggaXMgYmFkKV8KICAgKi8KICBjbGFzcyBOYWl2ZUJyb2FkcGhhc2UgZXh0ZW5kcyBCcm9hZHBoYXNlIHsKICAgIC8qKgogICAgICogQHRvZG8gUmVtb3ZlIHVzZWxlc3MgY29uc3RydWN0b3IKICAgICAqLwogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHN1cGVyKCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbGwgdGhlIGNvbGxpc2lvbiBwYWlycyBpbiB0aGUgcGh5c2ljcyB3b3JsZAogICAgICovCgoKICAgIGNvbGxpc2lvblBhaXJzKHdvcmxkLCBwYWlyczEsIHBhaXJzMikgewogICAgICBjb25zdCBib2RpZXMgPSB3b3JsZC5ib2RpZXM7CiAgICAgIGNvbnN0IG4gPSBib2RpZXMubGVuZ3RoOwogICAgICBsZXQgYmk7CiAgICAgIGxldCBiajsgLy8gTmFpdmUgTl4yIGZ0dyEKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBuOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gaTsgaisrKSB7CiAgICAgICAgICBiaSA9IGJvZGllc1tpXTsKICAgICAgICAgIGJqID0gYm9kaWVzW2pdOwoKICAgICAgICAgIGlmICghdGhpcy5uZWVkQnJvYWRwaGFzZUNvbGxpc2lvbihiaSwgYmopKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMuaW50ZXJzZWN0aW9uVGVzdChiaSwgYmosIHBhaXJzMSwgcGFpcnMyKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyBhbGwgdGhlIGJvZGllcyB3aXRoaW4gYW4gQUFCQi4KICAgICAqIEBwYXJhbSByZXN1bHQgQW4gYXJyYXkgdG8gc3RvcmUgcmVzdWx0aW5nIGJvZGllcyBpbi4KICAgICAqLwoKCiAgICBhYWJiUXVlcnkod29ybGQsIGFhYmIsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBbXTsKICAgICAgfQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3b3JsZC5ib2RpZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBiID0gd29ybGQuYm9kaWVzW2ldOwoKICAgICAgICBpZiAoYi5hYWJiTmVlZHNVcGRhdGUpIHsKICAgICAgICAgIGIudXBkYXRlQUFCQigpOwogICAgICAgIH0gLy8gVWdseSBoYWNrIHVudGlsIEJvZHkgZ2V0cyBhYWJiCgoKICAgICAgICBpZiAoYi5hYWJiLm92ZXJsYXBzKGFhYmIpKSB7CiAgICAgICAgICByZXN1bHQucHVzaChiKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CgogIH0KCiAgLyoqCiAgICogU3RvcmFnZSBmb3IgUmF5IGNhc3RpbmcgZGF0YQogICAqLwogIGNsYXNzIFJheWNhc3RSZXN1bHQgewogICAgLyoqCiAgICAgKiByYXlGcm9tV29ybGQKICAgICAqLwoKICAgIC8qKgogICAgICogcmF5VG9Xb3JsZAogICAgICovCgogICAgLyoqCiAgICAgKiBoaXROb3JtYWxXb3JsZAogICAgICovCgogICAgLyoqCiAgICAgKiBoaXRQb2ludFdvcmxkCiAgICAgKi8KCiAgICAvKioKICAgICAqIGhhc0hpdAogICAgICovCgogICAgLyoqCiAgICAgKiBzaGFwZQogICAgICovCgogICAgLyoqCiAgICAgKiBib2R5CiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBpbmRleCBvZiB0aGUgaGl0IHRyaWFuZ2xlLCBpZiB0aGUgaGl0IHNoYXBlIHdhcyBhIHRyaW1lc2gKICAgICAqLwoKICAgIC8qKgogICAgICogRGlzdGFuY2UgdG8gdGhlIGhpdC4gV2lsbCBiZSBzZXQgdG8gLTEgaWYgdGhlcmUgd2FzIG5vIGhpdAogICAgICovCgogICAgLyoqCiAgICAgKiBJZiB0aGUgcmF5IHNob3VsZCBzdG9wIHRyYXZlcnNpbmcgdGhlIGJvZGllcwogICAgICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5yYXlGcm9tV29ybGQgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnJheVRvV29ybGQgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmhpdE5vcm1hbFdvcmxkID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5oaXRQb2ludFdvcmxkID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5oYXNIaXQgPSBmYWxzZTsKICAgICAgdGhpcy5zaGFwZSA9IG51bGw7CiAgICAgIHRoaXMuYm9keSA9IG51bGw7CiAgICAgIHRoaXMuaGl0RmFjZUluZGV4ID0gLTE7CiAgICAgIHRoaXMuZGlzdGFuY2UgPSAtMTsKICAgICAgdGhpcy5zaG91bGRTdG9wID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIFJlc2V0IGFsbCByZXN1bHQgZGF0YS4KICAgICAqLwoKCiAgICByZXNldCgpIHsKICAgICAgdGhpcy5yYXlGcm9tV29ybGQuc2V0WmVybygpOwogICAgICB0aGlzLnJheVRvV29ybGQuc2V0WmVybygpOwogICAgICB0aGlzLmhpdE5vcm1hbFdvcmxkLnNldFplcm8oKTsKICAgICAgdGhpcy5oaXRQb2ludFdvcmxkLnNldFplcm8oKTsKICAgICAgdGhpcy5oYXNIaXQgPSBmYWxzZTsKICAgICAgdGhpcy5zaGFwZSA9IG51bGw7CiAgICAgIHRoaXMuYm9keSA9IG51bGw7CiAgICAgIHRoaXMuaGl0RmFjZUluZGV4ID0gLTE7CiAgICAgIHRoaXMuZGlzdGFuY2UgPSAtMTsKICAgICAgdGhpcy5zaG91bGRTdG9wID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIGFib3J0CiAgICAgKi8KCgogICAgYWJvcnQoKSB7CiAgICAgIHRoaXMuc2hvdWxkU3RvcCA9IHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIFNldCByZXN1bHQgZGF0YS4KICAgICAqLwoKCiAgICBzZXQocmF5RnJvbVdvcmxkLCByYXlUb1dvcmxkLCBoaXROb3JtYWxXb3JsZCwgaGl0UG9pbnRXb3JsZCwgc2hhcGUsIGJvZHksIGRpc3RhbmNlKSB7CiAgICAgIHRoaXMucmF5RnJvbVdvcmxkLmNvcHkocmF5RnJvbVdvcmxkKTsKICAgICAgdGhpcy5yYXlUb1dvcmxkLmNvcHkocmF5VG9Xb3JsZCk7CiAgICAgIHRoaXMuaGl0Tm9ybWFsV29ybGQuY29weShoaXROb3JtYWxXb3JsZCk7CiAgICAgIHRoaXMuaGl0UG9pbnRXb3JsZC5jb3B5KGhpdFBvaW50V29ybGQpOwogICAgICB0aGlzLnNoYXBlID0gc2hhcGU7CiAgICAgIHRoaXMuYm9keSA9IGJvZHk7CiAgICAgIHRoaXMuZGlzdGFuY2UgPSBkaXN0YW5jZTsKICAgIH0KCiAgfQoKICBsZXQgX1NoYXBlJHR5cGVzJFNQSEVSRSwgX1NoYXBlJHR5cGVzJFBMQU5FLCBfU2hhcGUkdHlwZXMkQk9YLCBfU2hhcGUkdHlwZXMkQ1lMSU5ERVIsIF9TaGFwZSR0eXBlcyRDT05WRVhQTywgX1NoYXBlJHR5cGVzJEhFSUdIVEZJLCBfU2hhcGUkdHlwZXMkVFJJTUVTSDsKCiAgLyoqCiAgICogUkFZX01PREVTCiAgICovCiAgY29uc3QgUkFZX01PREVTID0gewogICAgLyoqIENMT1NFU1QgKi8KICAgIENMT1NFU1Q6IDEsCgogICAgLyoqIEFOWSAqLwogICAgQU5ZOiAyLAoKICAgIC8qKiBBTEwgKi8KICAgIEFMTDogNAogIH07CiAgLyoqCiAgICogUmF5TW9kZQogICAqLwoKICBfU2hhcGUkdHlwZXMkU1BIRVJFID0gU2hhcGUudHlwZXMuU1BIRVJFOwogIF9TaGFwZSR0eXBlcyRQTEFORSA9IFNoYXBlLnR5cGVzLlBMQU5FOwogIF9TaGFwZSR0eXBlcyRCT1ggPSBTaGFwZS50eXBlcy5CT1g7CiAgX1NoYXBlJHR5cGVzJENZTElOREVSID0gU2hhcGUudHlwZXMuQ1lMSU5ERVI7CiAgX1NoYXBlJHR5cGVzJENPTlZFWFBPID0gU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTjsKICBfU2hhcGUkdHlwZXMkSEVJR0hURkkgPSBTaGFwZS50eXBlcy5IRUlHSFRGSUVMRDsKICBfU2hhcGUkdHlwZXMkVFJJTUVTSCA9IFNoYXBlLnR5cGVzLlRSSU1FU0g7CgogIC8qKgogICAqIEEgbGluZSBpbiAzRCBzcGFjZSB0aGF0IGludGVyc2VjdHMgYm9kaWVzIGFuZCByZXR1cm4gcG9pbnRzLgogICAqLwogIGNsYXNzIFJheSB7CiAgICAvKioKICAgICAqIGZyb20KICAgICAqLwoKICAgIC8qKgogICAgICogdG8KICAgICAqLwoKICAgIC8qKgogICAgICogZGlyZWN0aW9uCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBwcmVjaXNpb24gb2YgdGhlIHJheS4gVXNlZCB3aGVuIGNoZWNraW5nIHBhcmFsbGVsaXR5IGV0Yy4KICAgICAqIEBkZWZhdWx0IDAuMDAwMQogICAgICovCgogICAgLyoqCiAgICAgKiBTZXQgdG8gYGZhbHNlYCBpZiB5b3UgZG9uJ3Qgd2FudCB0aGUgUmF5IHRvIHRha2UgYGNvbGxpc2lvblJlc3BvbnNlYCBmbGFncyBpbnRvIGFjY291bnQgb24gYm9kaWVzIGFuZCBzaGFwZXMuCiAgICAgKiBAZGVmYXVsdCB0cnVlCiAgICAgKi8KCiAgICAvKioKICAgICAqIElmIHNldCB0byBgdHJ1ZWAsIHRoZSByYXkgc2tpcHMgYW55IGhpdHMgd2l0aCBub3JtYWwuZG90KHJheURpcmVjdGlvbikgPCAwLgogICAgICogQGRlZmF1bHQgZmFsc2UKICAgICAqLwoKICAgIC8qKgogICAgICogY29sbGlzaW9uRmlsdGVyTWFzawogICAgICogQGRlZmF1bHQgLTEKICAgICAqLwoKICAgIC8qKgogICAgICogY29sbGlzaW9uRmlsdGVyR3JvdXAKICAgICAqIEBkZWZhdWx0IC0xCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBpbnRlcnNlY3Rpb24gbW9kZS4gU2hvdWxkIGJlIFJheS5BTlksIFJheS5BTEwgb3IgUmF5LkNMT1NFU1QuCiAgICAgKiBAZGVmYXVsdCBSQVkuQU5ZCiAgICAgKi8KCiAgICAvKioKICAgICAqIEN1cnJlbnQgcmVzdWx0IG9iamVjdC4KICAgICAqLwoKICAgIC8qKgogICAgICogV2lsbCBiZSBzZXQgdG8gYHRydWVgIGR1cmluZyBpbnRlcnNlY3RXb3JsZCgpIGlmIHRoZSByYXkgaGl0IGFueXRoaW5nLgogICAgICovCgogICAgLyoqCiAgICAgKiBVc2VyLXByb3ZpZGVkIHJlc3VsdCBjYWxsYmFjay4gV2lsbCBiZSB1c2VkIGlmIG1vZGUgaXMgUmF5LkFMTC4KICAgICAqLwoKICAgIC8qKgogICAgICogQ0xPU0VTVAogICAgICovCgogICAgLyoqCiAgICAgKiBBTlkKICAgICAqLwoKICAgIC8qKgogICAgICogQUxMCiAgICAgKi8KICAgIGdldCBbX1NoYXBlJHR5cGVzJFNQSEVSRV0oKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RTcGhlcmU7CiAgICB9CgogICAgZ2V0IFtfU2hhcGUkdHlwZXMkUExBTkVdKCkgewogICAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0UGxhbmU7CiAgICB9CgogICAgZ2V0IFtfU2hhcGUkdHlwZXMkQk9YXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdEJveDsKICAgIH0KCiAgICBnZXQgW19TaGFwZSR0eXBlcyRDWUxJTkRFUl0oKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RDb252ZXg7CiAgICB9CgogICAgZ2V0IFtfU2hhcGUkdHlwZXMkQ09OVkVYUE9dKCkgewogICAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0Q29udmV4OwogICAgfQoKICAgIGdldCBbX1NoYXBlJHR5cGVzJEhFSUdIVEZJXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdEhlaWdodGZpZWxkOwogICAgfQoKICAgIGdldCBbX1NoYXBlJHR5cGVzJFRSSU1FU0hdKCkgewogICAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0VHJpbWVzaDsKICAgIH0KCiAgICBjb25zdHJ1Y3Rvcihmcm9tLCB0bykgewogICAgICBpZiAoZnJvbSA9PT0gdm9pZCAwKSB7CiAgICAgICAgZnJvbSA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIGlmICh0byA9PT0gdm9pZCAwKSB7CiAgICAgICAgdG8gPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0aGlzLmZyb20gPSBmcm9tLmNsb25lKCk7CiAgICAgIHRoaXMudG8gPSB0by5jbG9uZSgpOwogICAgICB0aGlzLmRpcmVjdGlvbiA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMucHJlY2lzaW9uID0gMC4wMDAxOwogICAgICB0aGlzLmNoZWNrQ29sbGlzaW9uUmVzcG9uc2UgPSB0cnVlOwogICAgICB0aGlzLnNraXBCYWNrZmFjZXMgPSBmYWxzZTsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gLTE7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSAtMTsKICAgICAgdGhpcy5tb2RlID0gUmF5LkFOWTsKICAgICAgdGhpcy5yZXN1bHQgPSBuZXcgUmF5Y2FzdFJlc3VsdCgpOwogICAgICB0aGlzLmhhc0hpdCA9IGZhbHNlOwoKICAgICAgdGhpcy5jYWxsYmFjayA9IHJlc3VsdCA9PiB7fTsKICAgIH0KICAgIC8qKgogICAgICogRG8gaXRlcnNlY3Rpb24gYWdhaW5zdCBhbGwgYm9kaWVzIGluIHRoZSBnaXZlbiBXb3JsZC4KICAgICAqIEByZXR1cm4gVHJ1ZSBpZiB0aGUgcmF5IGhpdCBhbnl0aGluZywgb3RoZXJ3aXNlIGZhbHNlLgogICAgICovCgoKICAgIGludGVyc2VjdFdvcmxkKHdvcmxkLCBvcHRpb25zKSB7CiAgICAgIHRoaXMubW9kZSA9IG9wdGlvbnMubW9kZSB8fCBSYXkuQU5ZOwogICAgICB0aGlzLnJlc3VsdCA9IG9wdGlvbnMucmVzdWx0IHx8IG5ldyBSYXljYXN0UmVzdWx0KCk7CiAgICAgIHRoaXMuc2tpcEJhY2tmYWNlcyA9ICEhb3B0aW9ucy5za2lwQmFja2ZhY2VzOwogICAgICB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2sgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJNYXNrICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyTWFzayA6IC0xOwogICAgICB0aGlzLmNvbGxpc2lvbkZpbHRlckdyb3VwID0gdHlwZW9mIG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyR3JvdXAgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJHcm91cCA6IC0xOwogICAgICB0aGlzLmNoZWNrQ29sbGlzaW9uUmVzcG9uc2UgPSB0eXBlb2Ygb3B0aW9ucy5jaGVja0NvbGxpc2lvblJlc3BvbnNlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuY2hlY2tDb2xsaXNpb25SZXNwb25zZSA6IHRydWU7CgogICAgICBpZiAob3B0aW9ucy5mcm9tKSB7CiAgICAgICAgdGhpcy5mcm9tLmNvcHkob3B0aW9ucy5mcm9tKTsKICAgICAgfQoKICAgICAgaWYgKG9wdGlvbnMudG8pIHsKICAgICAgICB0aGlzLnRvLmNvcHkob3B0aW9ucy50byk7CiAgICAgIH0KCiAgICAgIHRoaXMuY2FsbGJhY2sgPSBvcHRpb25zLmNhbGxiYWNrIHx8ICgoKSA9PiB7fSk7CgogICAgICB0aGlzLmhhc0hpdCA9IGZhbHNlOwogICAgICB0aGlzLnJlc3VsdC5yZXNldCgpOwogICAgICB0aGlzLnVwZGF0ZURpcmVjdGlvbigpOwogICAgICB0aGlzLmdldEFBQkIodG1wQUFCQiQxKTsKICAgICAgdG1wQXJyYXkubGVuZ3RoID0gMDsKICAgICAgd29ybGQuYnJvYWRwaGFzZS5hYWJiUXVlcnkod29ybGQsIHRtcEFBQkIkMSwgdG1wQXJyYXkpOwogICAgICB0aGlzLmludGVyc2VjdEJvZGllcyh0bXBBcnJheSk7CiAgICAgIHJldHVybiB0aGlzLmhhc0hpdDsKICAgIH0KICAgIC8qKgogICAgICogU2hvb3QgYSByYXkgYXQgYSBib2R5LCBnZXQgYmFjayBpbmZvcm1hdGlvbiBhYm91dCB0aGUgaGl0LgogICAgICogQGRlcHJlY2F0ZWQgQHBhcmFtIHJlc3VsdCBzZXQgdGhlIHJlc3VsdCBwcm9wZXJ0eSBvZiB0aGUgUmF5IGluc3RlYWQuCiAgICAgKi8KCgogICAgaW50ZXJzZWN0Qm9keShib2R5LCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCkgewogICAgICAgIHRoaXMucmVzdWx0ID0gcmVzdWx0OwogICAgICAgIHRoaXMudXBkYXRlRGlyZWN0aW9uKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGNoZWNrQ29sbGlzaW9uUmVzcG9uc2UgPSB0aGlzLmNoZWNrQ29sbGlzaW9uUmVzcG9uc2U7CgogICAgICBpZiAoY2hlY2tDb2xsaXNpb25SZXNwb25zZSAmJiAhYm9keS5jb2xsaXNpb25SZXNwb25zZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKCh0aGlzLmNvbGxpc2lvbkZpbHRlckdyb3VwICYgYm9keS5jb2xsaXNpb25GaWx0ZXJNYXNrKSA9PT0gMCB8fCAoYm9keS5jb2xsaXNpb25GaWx0ZXJHcm91cCAmIHRoaXMuY29sbGlzaW9uRmlsdGVyTWFzaykgPT09IDApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IHhpID0gaW50ZXJzZWN0Qm9keV94aTsKICAgICAgY29uc3QgcWkgPSBpbnRlcnNlY3RCb2R5X3FpOwoKICAgICAgZm9yIChsZXQgaSA9IDAsIE4gPSBib2R5LnNoYXBlcy5sZW5ndGg7IGkgPCBOOyBpKyspIHsKICAgICAgICBjb25zdCBzaGFwZSA9IGJvZHkuc2hhcGVzW2ldOwoKICAgICAgICBpZiAoY2hlY2tDb2xsaXNpb25SZXNwb25zZSAmJiAhc2hhcGUuY29sbGlzaW9uUmVzcG9uc2UpIHsKICAgICAgICAgIGNvbnRpbnVlOyAvLyBTa2lwCiAgICAgICAgfQoKICAgICAgICBib2R5LnF1YXRlcm5pb24ubXVsdChib2R5LnNoYXBlT3JpZW50YXRpb25zW2ldLCBxaSk7CiAgICAgICAgYm9keS5xdWF0ZXJuaW9uLnZtdWx0KGJvZHkuc2hhcGVPZmZzZXRzW2ldLCB4aSk7CiAgICAgICAgeGkudmFkZChib2R5LnBvc2l0aW9uLCB4aSk7CiAgICAgICAgdGhpcy5pbnRlcnNlY3RTaGFwZShzaGFwZSwgcWksIHhpLCBib2R5KTsKCiAgICAgICAgaWYgKHRoaXMucmVzdWx0LnNob3VsZFN0b3ApIHsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBTaG9vdCBhIHJheSBhdCBhbiBhcnJheSBib2RpZXMsIGdldCBiYWNrIGluZm9ybWF0aW9uIGFib3V0IHRoZSBoaXQuCiAgICAgKiBAcGFyYW0gYm9kaWVzIEFuIGFycmF5IG9mIEJvZHkgb2JqZWN0cy4KICAgICAqIEBkZXByZWNhdGVkIEBwYXJhbSByZXN1bHQgc2V0IHRoZSByZXN1bHQgcHJvcGVydHkgb2YgdGhlIFJheSBpbnN0ZWFkLgogICAgICoKICAgICAqLwoKCiAgICBpbnRlcnNlY3RCb2RpZXMoYm9kaWVzLCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCkgewogICAgICAgIHRoaXMucmVzdWx0ID0gcmVzdWx0OwogICAgICAgIHRoaXMudXBkYXRlRGlyZWN0aW9uKCk7CiAgICAgIH0KCiAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gYm9kaWVzLmxlbmd0aDsgIXRoaXMucmVzdWx0LnNob3VsZFN0b3AgJiYgaSA8IGw7IGkrKykgewogICAgICAgIHRoaXMuaW50ZXJzZWN0Qm9keShib2RpZXNbaV0pOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZXMgdGhlIGRpcmVjdGlvbiB2ZWN0b3IuCiAgICAgKi8KCgogICAgdXBkYXRlRGlyZWN0aW9uKCkgewogICAgICB0aGlzLnRvLnZzdWIodGhpcy5mcm9tLCB0aGlzLmRpcmVjdGlvbik7CiAgICAgIHRoaXMuZGlyZWN0aW9uLm5vcm1hbGl6ZSgpOwogICAgfQoKICAgIGludGVyc2VjdFNoYXBlKHNoYXBlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSkgewogICAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tOyAvLyBDaGVja2luZyBib3VuZGluZ1NwaGVyZQoKICAgICAgY29uc3QgZGlzdGFuY2UgPSBkaXN0YW5jZUZyb21JbnRlcnNlY3Rpb24oZnJvbSwgdGhpcy5kaXJlY3Rpb24sIHBvc2l0aW9uKTsKCiAgICAgIGlmIChkaXN0YW5jZSA+IHNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCBpbnRlcnNlY3RNZXRob2QgPSB0aGlzW3NoYXBlLnR5cGVdOwoKICAgICAgaWYgKGludGVyc2VjdE1ldGhvZCkgewogICAgICAgIGludGVyc2VjdE1ldGhvZC5jYWxsKHRoaXMsIHNoYXBlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgc2hhcGUpOwogICAgICB9CiAgICB9CgogICAgX2ludGVyc2VjdEJveChib3gsIHF1YXQsIHBvc2l0aW9uLCBib2R5LCByZXBvcnRlZFNoYXBlKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RDb252ZXgoYm94LmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUpOwogICAgfQoKICAgIF9pbnRlcnNlY3RQbGFuZShzaGFwZSwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUpIHsKICAgICAgY29uc3QgZnJvbSA9IHRoaXMuZnJvbTsKICAgICAgY29uc3QgdG8gPSB0aGlzLnRvOwogICAgICBjb25zdCBkaXJlY3Rpb24gPSB0aGlzLmRpcmVjdGlvbjsgLy8gR2V0IHBsYW5lIG5vcm1hbAoKICAgICAgY29uc3Qgd29ybGROb3JtYWwgPSBuZXcgVmVjMygwLCAwLCAxKTsKICAgICAgcXVhdC52bXVsdCh3b3JsZE5vcm1hbCwgd29ybGROb3JtYWwpOwogICAgICBjb25zdCBsZW4gPSBuZXcgVmVjMygpOwogICAgICBmcm9tLnZzdWIocG9zaXRpb24sIGxlbik7CiAgICAgIGNvbnN0IHBsYW5lVG9Gcm9tID0gbGVuLmRvdCh3b3JsZE5vcm1hbCk7CiAgICAgIHRvLnZzdWIocG9zaXRpb24sIGxlbik7CiAgICAgIGNvbnN0IHBsYW5lVG9UbyA9IGxlbi5kb3Qod29ybGROb3JtYWwpOwoKICAgICAgaWYgKHBsYW5lVG9Gcm9tICogcGxhbmVUb1RvID4gMCkgewogICAgICAgIC8vICJmcm9tIiBhbmQgInRvIiBhcmUgb24gdGhlIHNhbWUgc2lkZSBvZiB0aGUgcGxhbmUuLi4gYmFpbCBvdXQKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChmcm9tLmRpc3RhbmNlVG8odG8pIDwgcGxhbmVUb0Zyb20pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IG5fZG90X2RpciA9IHdvcmxkTm9ybWFsLmRvdChkaXJlY3Rpb24pOwoKICAgICAgaWYgKE1hdGguYWJzKG5fZG90X2RpcikgPCB0aGlzLnByZWNpc2lvbikgewogICAgICAgIC8vIE5vIGludGVyc2VjdGlvbgogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc3QgcGxhbmVQb2ludFRvRnJvbSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGRpcl9zY2FsZWRfd2l0aF90ID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgaGl0UG9pbnRXb3JsZCA9IG5ldyBWZWMzKCk7CiAgICAgIGZyb20udnN1Yihwb3NpdGlvbiwgcGxhbmVQb2ludFRvRnJvbSk7CiAgICAgIGNvbnN0IHQgPSAtd29ybGROb3JtYWwuZG90KHBsYW5lUG9pbnRUb0Zyb20pIC8gbl9kb3RfZGlyOwogICAgICBkaXJlY3Rpb24uc2NhbGUodCwgZGlyX3NjYWxlZF93aXRoX3QpOwogICAgICBmcm9tLnZhZGQoZGlyX3NjYWxlZF93aXRoX3QsIGhpdFBvaW50V29ybGQpOwogICAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbih3b3JsZE5vcm1hbCwgaGl0UG9pbnRXb3JsZCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgLTEpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHdvcmxkIEFBQkIgb2YgdGhlIHJheS4KICAgICAqLwoKCiAgICBnZXRBQUJCKGFhYmIpIHsKICAgICAgY29uc3QgewogICAgICAgIGxvd2VyQm91bmQsCiAgICAgICAgdXBwZXJCb3VuZAogICAgICB9ID0gYWFiYjsKICAgICAgY29uc3QgdG8gPSB0aGlzLnRvOwogICAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tOwogICAgICBsb3dlckJvdW5kLnggPSBNYXRoLm1pbih0by54LCBmcm9tLngpOwogICAgICBsb3dlckJvdW5kLnkgPSBNYXRoLm1pbih0by55LCBmcm9tLnkpOwogICAgICBsb3dlckJvdW5kLnogPSBNYXRoLm1pbih0by56LCBmcm9tLnopOwogICAgICB1cHBlckJvdW5kLnggPSBNYXRoLm1heCh0by54LCBmcm9tLngpOwogICAgICB1cHBlckJvdW5kLnkgPSBNYXRoLm1heCh0by55LCBmcm9tLnkpOwogICAgICB1cHBlckJvdW5kLnogPSBNYXRoLm1heCh0by56LCBmcm9tLnopOwogICAgfQoKICAgIF9pbnRlcnNlY3RIZWlnaHRmaWVsZChzaGFwZSwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUpIHsKICAgICAgc2hhcGUuZGF0YTsKICAgICAgc2hhcGUuZWxlbWVudFNpemU7IC8vIENvbnZlcnQgdGhlIHJheSB0byBsb2NhbCBoZWlnaHRmaWVsZCBjb29yZGluYXRlcwoKICAgICAgY29uc3QgbG9jYWxSYXkgPSBpbnRlcnNlY3RIZWlnaHRmaWVsZF9sb2NhbFJheTsgLy9uZXcgUmF5KHRoaXMuZnJvbSwgdGhpcy50byk7CgogICAgICBsb2NhbFJheS5mcm9tLmNvcHkodGhpcy5mcm9tKTsKICAgICAgbG9jYWxSYXkudG8uY29weSh0aGlzLnRvKTsKICAgICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0LCBsb2NhbFJheS5mcm9tLCBsb2NhbFJheS5mcm9tKTsKICAgICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0LCBsb2NhbFJheS50bywgbG9jYWxSYXkudG8pOwogICAgICBsb2NhbFJheS51cGRhdGVEaXJlY3Rpb24oKTsgLy8gR2V0IHRoZSBpbmRleCBvZiB0aGUgZGF0YSBwb2ludHMgdG8gdGVzdCBhZ2FpbnN0CgogICAgICBjb25zdCBpbmRleCA9IGludGVyc2VjdEhlaWdodGZpZWxkX2luZGV4OwogICAgICBsZXQgaU1pblg7CiAgICAgIGxldCBpTWluWTsKICAgICAgbGV0IGlNYXhYOwogICAgICBsZXQgaU1heFk7IC8vIFNldCB0byBtYXgKCiAgICAgIGlNaW5YID0gaU1pblkgPSAwOwogICAgICBpTWF4WCA9IGlNYXhZID0gc2hhcGUuZGF0YS5sZW5ndGggLSAxOwogICAgICBjb25zdCBhYWJiID0gbmV3IEFBQkIoKTsKICAgICAgbG9jYWxSYXkuZ2V0QUFCQihhYWJiKTsKICAgICAgc2hhcGUuZ2V0SW5kZXhPZlBvc2l0aW9uKGFhYmIubG93ZXJCb3VuZC54LCBhYWJiLmxvd2VyQm91bmQueSwgaW5kZXgsIHRydWUpOwogICAgICBpTWluWCA9IE1hdGgubWF4KGlNaW5YLCBpbmRleFswXSk7CiAgICAgIGlNaW5ZID0gTWF0aC5tYXgoaU1pblksIGluZGV4WzFdKTsKICAgICAgc2hhcGUuZ2V0SW5kZXhPZlBvc2l0aW9uKGFhYmIudXBwZXJCb3VuZC54LCBhYWJiLnVwcGVyQm91bmQueSwgaW5kZXgsIHRydWUpOwogICAgICBpTWF4WCA9IE1hdGgubWluKGlNYXhYLCBpbmRleFswXSArIDEpOwogICAgICBpTWF4WSA9IE1hdGgubWluKGlNYXhZLCBpbmRleFsxXSArIDEpOwoKICAgICAgZm9yIChsZXQgaSA9IGlNaW5YOyBpIDwgaU1heFg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSBpTWluWTsgaiA8IGlNYXhZOyBqKyspIHsKICAgICAgICAgIGlmICh0aGlzLnJlc3VsdC5zaG91bGRTdG9wKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBzaGFwZS5nZXRBYWJiQXRJbmRleChpLCBqLCBhYWJiKTsKCiAgICAgICAgICBpZiAoIWFhYmIub3ZlcmxhcHNSYXkobG9jYWxSYXkpKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfSAvLyBMb3dlciB0cmlhbmdsZQoKCiAgICAgICAgICBzaGFwZS5nZXRDb252ZXhUcmlhbmdsZVBpbGxhcihpLCBqLCBmYWxzZSk7CiAgICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUocG9zaXRpb24sIHF1YXQsIHNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpOwoKICAgICAgICAgIHRoaXMuX2ludGVyc2VjdENvbnZleChzaGFwZS5waWxsYXJDb252ZXgsIHF1YXQsIHdvcmxkUGlsbGFyT2Zmc2V0LCBib2R5LCByZXBvcnRlZFNoYXBlLCBpbnRlcnNlY3RDb252ZXhPcHRpb25zKTsKCiAgICAgICAgICBpZiAodGhpcy5yZXN1bHQuc2hvdWxkU3RvcCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9IC8vIFVwcGVyIHRyaWFuZ2xlCgoKICAgICAgICAgIHNoYXBlLmdldENvbnZleFRyaWFuZ2xlUGlsbGFyKGksIGosIHRydWUpOwogICAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHBvc2l0aW9uLCBxdWF0LCBzaGFwZS5waWxsYXJPZmZzZXQsIHdvcmxkUGlsbGFyT2Zmc2V0KTsKCiAgICAgICAgICB0aGlzLl9pbnRlcnNlY3RDb252ZXgoc2hhcGUucGlsbGFyQ29udmV4LCBxdWF0LCB3b3JsZFBpbGxhck9mZnNldCwgYm9keSwgcmVwb3J0ZWRTaGFwZSwgaW50ZXJzZWN0Q29udmV4T3B0aW9ucyk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgX2ludGVyc2VjdFNwaGVyZShzcGhlcmUsIHF1YXQsIHBvc2l0aW9uLCBib2R5LCByZXBvcnRlZFNoYXBlKSB7CiAgICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207CiAgICAgIGNvbnN0IHRvID0gdGhpcy50bzsKICAgICAgY29uc3QgciA9IHNwaGVyZS5yYWRpdXM7CiAgICAgIGNvbnN0IGEgPSAodG8ueCAtIGZyb20ueCkgKiogMiArICh0by55IC0gZnJvbS55KSAqKiAyICsgKHRvLnogLSBmcm9tLnopICoqIDI7CiAgICAgIGNvbnN0IGIgPSAyICogKCh0by54IC0gZnJvbS54KSAqIChmcm9tLnggLSBwb3NpdGlvbi54KSArICh0by55IC0gZnJvbS55KSAqIChmcm9tLnkgLSBwb3NpdGlvbi55KSArICh0by56IC0gZnJvbS56KSAqIChmcm9tLnogLSBwb3NpdGlvbi56KSk7CiAgICAgIGNvbnN0IGMgPSAoZnJvbS54IC0gcG9zaXRpb24ueCkgKiogMiArIChmcm9tLnkgLSBwb3NpdGlvbi55KSAqKiAyICsgKGZyb20ueiAtIHBvc2l0aW9uLnopICoqIDIgLSByICoqIDI7CiAgICAgIGNvbnN0IGRlbHRhID0gYiAqKiAyIC0gNCAqIGEgKiBjOwogICAgICBjb25zdCBpbnRlcnNlY3Rpb25Qb2ludCA9IFJheV9pbnRlcnNlY3RTcGhlcmVfaW50ZXJzZWN0aW9uUG9pbnQ7CiAgICAgIGNvbnN0IG5vcm1hbCA9IFJheV9pbnRlcnNlY3RTcGhlcmVfbm9ybWFsOwoKICAgICAgaWYgKGRlbHRhIDwgMCkgewogICAgICAgIC8vIE5vIGludGVyc2VjdGlvbgogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIGlmIChkZWx0YSA9PT0gMCkgewogICAgICAgIC8vIHNpbmdsZSBpbnRlcnNlY3Rpb24gcG9pbnQKICAgICAgICBmcm9tLmxlcnAodG8sIGRlbHRhLCBpbnRlcnNlY3Rpb25Qb2ludCk7CiAgICAgICAgaW50ZXJzZWN0aW9uUG9pbnQudnN1Yihwb3NpdGlvbiwgbm9ybWFsKTsKICAgICAgICBub3JtYWwubm9ybWFsaXplKCk7CiAgICAgICAgdGhpcy5yZXBvcnRJbnRlcnNlY3Rpb24obm9ybWFsLCBpbnRlcnNlY3Rpb25Qb2ludCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgLTEpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IGQxID0gKC1iIC0gTWF0aC5zcXJ0KGRlbHRhKSkgLyAoMiAqIGEpOwogICAgICAgIGNvbnN0IGQyID0gKC1iICsgTWF0aC5zcXJ0KGRlbHRhKSkgLyAoMiAqIGEpOwoKICAgICAgICBpZiAoZDEgPj0gMCAmJiBkMSA8PSAxKSB7CiAgICAgICAgICBmcm9tLmxlcnAodG8sIGQxLCBpbnRlcnNlY3Rpb25Qb2ludCk7CiAgICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludC52c3ViKHBvc2l0aW9uLCBub3JtYWwpOwogICAgICAgICAgbm9ybWFsLm5vcm1hbGl6ZSgpOwogICAgICAgICAgdGhpcy5yZXBvcnRJbnRlcnNlY3Rpb24obm9ybWFsLCBpbnRlcnNlY3Rpb25Qb2ludCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgLTEpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMucmVzdWx0LnNob3VsZFN0b3ApIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmIChkMiA+PSAwICYmIGQyIDw9IDEpIHsKICAgICAgICAgIGZyb20ubGVycCh0bywgZDIsIGludGVyc2VjdGlvblBvaW50KTsKICAgICAgICAgIGludGVyc2VjdGlvblBvaW50LnZzdWIocG9zaXRpb24sIG5vcm1hbCk7CiAgICAgICAgICBub3JtYWwubm9ybWFsaXplKCk7CiAgICAgICAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbihub3JtYWwsIGludGVyc2VjdGlvblBvaW50LCByZXBvcnRlZFNoYXBlLCBib2R5LCAtMSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgX2ludGVyc2VjdENvbnZleChzaGFwZSwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUsIG9wdGlvbnMpIHsKICAgICAgY29uc3Qgbm9ybWFsID0gaW50ZXJzZWN0Q29udmV4X25vcm1hbDsKICAgICAgY29uc3QgdmVjdG9yID0gaW50ZXJzZWN0Q29udmV4X3ZlY3RvcjsKICAgICAgY29uc3QgZmFjZUxpc3QgPSBvcHRpb25zICYmIG9wdGlvbnMuZmFjZUxpc3QgfHwgbnVsbDsgLy8gQ2hlY2tpbmcgZmFjZXMKCiAgICAgIGNvbnN0IGZhY2VzID0gc2hhcGUuZmFjZXM7CiAgICAgIGNvbnN0IHZlcnRpY2VzID0gc2hhcGUudmVydGljZXM7CiAgICAgIGNvbnN0IG5vcm1hbHMgPSBzaGFwZS5mYWNlTm9ybWFsczsKICAgICAgY29uc3QgZGlyZWN0aW9uID0gdGhpcy5kaXJlY3Rpb247CiAgICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207CiAgICAgIGNvbnN0IHRvID0gdGhpcy50bzsKICAgICAgY29uc3QgZnJvbVRvRGlzdGFuY2UgPSBmcm9tLmRpc3RhbmNlVG8odG8pOwogICAgICBjb25zdCBOZmFjZXMgPSBmYWNlTGlzdCA/IGZhY2VMaXN0Lmxlbmd0aCA6IGZhY2VzLmxlbmd0aDsKICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5yZXN1bHQ7CgogICAgICBmb3IgKGxldCBqID0gMDsgIXJlc3VsdC5zaG91bGRTdG9wICYmIGogPCBOZmFjZXM7IGorKykgewogICAgICAgIGNvbnN0IGZpID0gZmFjZUxpc3QgPyBmYWNlTGlzdFtqXSA6IGo7CiAgICAgICAgY29uc3QgZmFjZSA9IGZhY2VzW2ZpXTsKICAgICAgICBjb25zdCBmYWNlTm9ybWFsID0gbm9ybWFsc1tmaV07CiAgICAgICAgY29uc3QgcSA9IHF1YXQ7CiAgICAgICAgY29uc3QgeCA9IHBvc2l0aW9uOyAvLyBkZXRlcm1pbmUgaWYgcmF5IGludGVyc2VjdHMgdGhlIHBsYW5lIG9mIHRoZSBmYWNlCiAgICAgICAgLy8gbm90ZTogdGhpcyB3b3JrcyByZWdhcmRsZXNzIG9mIHRoZSBkaXJlY3Rpb24gb2YgdGhlIGZhY2Ugbm9ybWFsCiAgICAgICAgLy8gR2V0IHBsYW5lIHBvaW50IGluIHdvcmxkIGNvb3JkaW5hdGVzLi4uCgogICAgICAgIHZlY3Rvci5jb3B5KHZlcnRpY2VzW2ZhY2VbMF1dKTsKICAgICAgICBxLnZtdWx0KHZlY3RvciwgdmVjdG9yKTsKICAgICAgICB2ZWN0b3IudmFkZCh4LCB2ZWN0b3IpOyAvLyAuLi5idXQgbWFrZSBpdCByZWxhdGl2ZSB0byB0aGUgcmF5IGZyb20uIFdlJ2xsIGZpeCB0aGlzIGxhdGVyLgoKICAgICAgICB2ZWN0b3IudnN1Yihmcm9tLCB2ZWN0b3IpOyAvLyBHZXQgcGxhbmUgbm9ybWFsCgogICAgICAgIHEudm11bHQoZmFjZU5vcm1hbCwgbm9ybWFsKTsgLy8gSWYgdGhpcyBkb3QgcHJvZHVjdCBpcyBuZWdhdGl2ZSwgd2UgaGF2ZSBzb21ldGhpbmcgaW50ZXJlc3RpbmcKCiAgICAgICAgY29uc3QgZG90ID0gZGlyZWN0aW9uLmRvdChub3JtYWwpOyAvLyBCYWlsIG91dCBpZiByYXkgYW5kIHBsYW5lIGFyZSBwYXJhbGxlbAoKICAgICAgICBpZiAoTWF0aC5hYnMoZG90KSA8IHRoaXMucHJlY2lzaW9uKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9IC8vIGNhbGMgZGlzdGFuY2UgdG8gcGxhbmUKCgogICAgICAgIGNvbnN0IHNjYWxhciA9IG5vcm1hbC5kb3QodmVjdG9yKSAvIGRvdDsgLy8gaWYgbmVnYXRpdmUgZGlzdGFuY2UsIHRoZW4gcGxhbmUgaXMgYmVoaW5kIHJheQoKICAgICAgICBpZiAoc2NhbGFyIDwgMCkgewogICAgICAgICAgY29udGludWU7CiAgICAgICAgfSAvLyBpZiAoZG90IDwgMCkgewogICAgICAgIC8vIEludGVyc2VjdGlvbiBwb2ludCBpcyBmcm9tICsgZGlyZWN0aW9uICogc2NhbGFyCgoKICAgICAgICBkaXJlY3Rpb24uc2NhbGUoc2NhbGFyLCBpbnRlcnNlY3RQb2ludCk7CiAgICAgICAgaW50ZXJzZWN0UG9pbnQudmFkZChmcm9tLCBpbnRlcnNlY3RQb2ludCk7IC8vIGEgaXMgdGhlIHBvaW50IHdlIGNvbXBhcmUgcG9pbnRzIGIgYW5kIGMgd2l0aC4KCiAgICAgICAgYS5jb3B5KHZlcnRpY2VzW2ZhY2VbMF1dKTsKICAgICAgICBxLnZtdWx0KGEsIGEpOwogICAgICAgIHgudmFkZChhLCBhKTsKCiAgICAgICAgZm9yIChsZXQgaSA9IDE7ICFyZXN1bHQuc2hvdWxkU3RvcCAmJiBpIDwgZmFjZS5sZW5ndGggLSAxOyBpKyspIHsKICAgICAgICAgIC8vIFRyYW5zZm9ybSAzIHZlcnRpY2VzIHRvIHdvcmxkIGNvb3JkcwogICAgICAgICAgYi5jb3B5KHZlcnRpY2VzW2ZhY2VbaV1dKTsKICAgICAgICAgIGMuY29weSh2ZXJ0aWNlc1tmYWNlW2kgKyAxXV0pOwogICAgICAgICAgcS52bXVsdChiLCBiKTsKICAgICAgICAgIHEudm11bHQoYywgYyk7CiAgICAgICAgICB4LnZhZGQoYiwgYik7CiAgICAgICAgICB4LnZhZGQoYywgYyk7CiAgICAgICAgICBjb25zdCBkaXN0YW5jZSA9IGludGVyc2VjdFBvaW50LmRpc3RhbmNlVG8oZnJvbSk7CgogICAgICAgICAgaWYgKCEoUmF5LnBvaW50SW5UcmlhbmdsZShpbnRlcnNlY3RQb2ludCwgYSwgYiwgYykgfHwgUmF5LnBvaW50SW5UcmlhbmdsZShpbnRlcnNlY3RQb2ludCwgYiwgYSwgYykpIHx8IGRpc3RhbmNlID4gZnJvbVRvRGlzdGFuY2UpIHsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5yZXBvcnRJbnRlcnNlY3Rpb24obm9ybWFsLCBpbnRlcnNlY3RQb2ludCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgZmkpOwogICAgICAgIH0gLy8gfQoKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBAdG9kbyBPcHRpbWl6ZSBieSB0cmFuc2Zvcm1pbmcgdGhlIHdvcmxkIHRvIGxvY2FsIHNwYWNlIGZpcnN0LgogICAgICogQHRvZG8gVXNlIE9jdHJlZSBsb29rdXAKICAgICAqLwoKCiAgICBfaW50ZXJzZWN0VHJpbWVzaChtZXNoLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSwgb3B0aW9ucykgewogICAgICBjb25zdCBub3JtYWwgPSBpbnRlcnNlY3RUcmltZXNoX25vcm1hbDsKICAgICAgY29uc3QgdHJpYW5nbGVzID0gaW50ZXJzZWN0VHJpbWVzaF90cmlhbmdsZXM7CiAgICAgIGNvbnN0IHRyZWVUcmFuc2Zvcm0gPSBpbnRlcnNlY3RUcmltZXNoX3RyZWVUcmFuc2Zvcm07CiAgICAgIGNvbnN0IHZlY3RvciA9IGludGVyc2VjdENvbnZleF92ZWN0b3I7CiAgICAgIGNvbnN0IGxvY2FsRGlyZWN0aW9uID0gaW50ZXJzZWN0VHJpbWVzaF9sb2NhbERpcmVjdGlvbjsKICAgICAgY29uc3QgbG9jYWxGcm9tID0gaW50ZXJzZWN0VHJpbWVzaF9sb2NhbEZyb207CiAgICAgIGNvbnN0IGxvY2FsVG8gPSBpbnRlcnNlY3RUcmltZXNoX2xvY2FsVG87CiAgICAgIGNvbnN0IHdvcmxkSW50ZXJzZWN0UG9pbnQgPSBpbnRlcnNlY3RUcmltZXNoX3dvcmxkSW50ZXJzZWN0UG9pbnQ7CiAgICAgIGNvbnN0IHdvcmxkTm9ybWFsID0gaW50ZXJzZWN0VHJpbWVzaF93b3JsZE5vcm1hbDsgLy8gQ2hlY2tpbmcgZmFjZXMKCiAgICAgIGNvbnN0IGluZGljZXMgPSBtZXNoLmluZGljZXM7CiAgICAgIG1lc2gudmVydGljZXM7IC8vIGNvbnN0IG5vcm1hbHMgPSBtZXNoLmZhY2VOb3JtYWxzCgogICAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tOwogICAgICBjb25zdCB0byA9IHRoaXMudG87CiAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IHRoaXMuZGlyZWN0aW9uOwogICAgICB0cmVlVHJhbnNmb3JtLnBvc2l0aW9uLmNvcHkocG9zaXRpb24pOwogICAgICB0cmVlVHJhbnNmb3JtLnF1YXRlcm5pb24uY29weShxdWF0KTsgLy8gVHJhbnNmb3JtIHJheSB0byBsb2NhbCBzcGFjZSEKCiAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb0xvY2FsRnJhbWUocG9zaXRpb24sIHF1YXQsIGRpcmVjdGlvbiwgbG9jYWxEaXJlY3Rpb24pOwogICAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUocG9zaXRpb24sIHF1YXQsIGZyb20sIGxvY2FsRnJvbSk7CiAgICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShwb3NpdGlvbiwgcXVhdCwgdG8sIGxvY2FsVG8pOwogICAgICBsb2NhbFRvLnggKj0gbWVzaC5zY2FsZS54OwogICAgICBsb2NhbFRvLnkgKj0gbWVzaC5zY2FsZS55OwogICAgICBsb2NhbFRvLnogKj0gbWVzaC5zY2FsZS56OwogICAgICBsb2NhbEZyb20ueCAqPSBtZXNoLnNjYWxlLng7CiAgICAgIGxvY2FsRnJvbS55ICo9IG1lc2guc2NhbGUueTsKICAgICAgbG9jYWxGcm9tLnogKj0gbWVzaC5zY2FsZS56OwogICAgICBsb2NhbFRvLnZzdWIobG9jYWxGcm9tLCBsb2NhbERpcmVjdGlvbik7CiAgICAgIGxvY2FsRGlyZWN0aW9uLm5vcm1hbGl6ZSgpOwogICAgICBjb25zdCBmcm9tVG9EaXN0YW5jZVNxdWFyZWQgPSBsb2NhbEZyb20uZGlzdGFuY2VTcXVhcmVkKGxvY2FsVG8pOwogICAgICBtZXNoLnRyZWUucmF5UXVlcnkodGhpcywgdHJlZVRyYW5zZm9ybSwgdHJpYW5nbGVzKTsKCiAgICAgIGZvciAobGV0IGkgPSAwLCBOID0gdHJpYW5nbGVzLmxlbmd0aDsgIXRoaXMucmVzdWx0LnNob3VsZFN0b3AgJiYgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgdHJpYW5nbGVzSW5kZXggPSB0cmlhbmdsZXNbaV07CiAgICAgICAgbWVzaC5nZXROb3JtYWwodHJpYW5nbGVzSW5kZXgsIG5vcm1hbCk7IC8vIGRldGVybWluZSBpZiByYXkgaW50ZXJzZWN0cyB0aGUgcGxhbmUgb2YgdGhlIGZhY2UKICAgICAgICAvLyBub3RlOiB0aGlzIHdvcmtzIHJlZ2FyZGxlc3Mgb2YgdGhlIGRpcmVjdGlvbiBvZiB0aGUgZmFjZSBub3JtYWwKICAgICAgICAvLyBHZXQgcGxhbmUgcG9pbnQgaW4gd29ybGQgY29vcmRpbmF0ZXMuLi4KCiAgICAgICAgbWVzaC5nZXRWZXJ0ZXgoaW5kaWNlc1t0cmlhbmdsZXNJbmRleCAqIDNdLCBhKTsgLy8gLi4uYnV0IG1ha2UgaXQgcmVsYXRpdmUgdG8gdGhlIHJheSBmcm9tLiBXZSdsbCBmaXggdGhpcyBsYXRlci4KCiAgICAgICAgYS52c3ViKGxvY2FsRnJvbSwgdmVjdG9yKTsgLy8gSWYgdGhpcyBkb3QgcHJvZHVjdCBpcyBuZWdhdGl2ZSwgd2UgaGF2ZSBzb21ldGhpbmcgaW50ZXJlc3RpbmcKCiAgICAgICAgY29uc3QgZG90ID0gbG9jYWxEaXJlY3Rpb24uZG90KG5vcm1hbCk7IC8vIEJhaWwgb3V0IGlmIHJheSBhbmQgcGxhbmUgYXJlIHBhcmFsbGVsCiAgICAgICAgLy8gaWYgKE1hdGguYWJzKCBkb3QgKSA8IHRoaXMucHJlY2lzaW9uKXsKICAgICAgICAvLyAgICAgY29udGludWU7CiAgICAgICAgLy8gfQogICAgICAgIC8vIGNhbGMgZGlzdGFuY2UgdG8gcGxhbmUKCiAgICAgICAgY29uc3Qgc2NhbGFyID0gbm9ybWFsLmRvdCh2ZWN0b3IpIC8gZG90OyAvLyBpZiBuZWdhdGl2ZSBkaXN0YW5jZSwgdGhlbiBwbGFuZSBpcyBiZWhpbmQgcmF5CgogICAgICAgIGlmIChzY2FsYXIgPCAwKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9IC8vIEludGVyc2VjdGlvbiBwb2ludCBpcyBmcm9tICsgZGlyZWN0aW9uICogc2NhbGFyCgoKICAgICAgICBsb2NhbERpcmVjdGlvbi5zY2FsZShzY2FsYXIsIGludGVyc2VjdFBvaW50KTsKICAgICAgICBpbnRlcnNlY3RQb2ludC52YWRkKGxvY2FsRnJvbSwgaW50ZXJzZWN0UG9pbnQpOyAvLyBHZXQgdHJpYW5nbGUgdmVydGljZXMKCiAgICAgICAgbWVzaC5nZXRWZXJ0ZXgoaW5kaWNlc1t0cmlhbmdsZXNJbmRleCAqIDMgKyAxXSwgYik7CiAgICAgICAgbWVzaC5nZXRWZXJ0ZXgoaW5kaWNlc1t0cmlhbmdsZXNJbmRleCAqIDMgKyAyXSwgYyk7CiAgICAgICAgY29uc3Qgc3F1YXJlZERpc3RhbmNlID0gaW50ZXJzZWN0UG9pbnQuZGlzdGFuY2VTcXVhcmVkKGxvY2FsRnJvbSk7CgogICAgICAgIGlmICghKFJheS5wb2ludEluVHJpYW5nbGUoaW50ZXJzZWN0UG9pbnQsIGIsIGEsIGMpIHx8IFJheS5wb2ludEluVHJpYW5nbGUoaW50ZXJzZWN0UG9pbnQsIGEsIGIsIGMpKSB8fCBzcXVhcmVkRGlzdGFuY2UgPiBmcm9tVG9EaXN0YW5jZVNxdWFyZWQpIHsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0gLy8gdHJhbnNmb3JtIGludGVyc2VjdHBvaW50IGFuZCBub3JtYWwgdG8gd29ybGQKCgogICAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb1dvcmxkRnJhbWUocXVhdCwgbm9ybWFsLCB3b3JsZE5vcm1hbCk7CiAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHBvc2l0aW9uLCBxdWF0LCBpbnRlcnNlY3RQb2ludCwgd29ybGRJbnRlcnNlY3RQb2ludCk7CiAgICAgICAgdGhpcy5yZXBvcnRJbnRlcnNlY3Rpb24od29ybGROb3JtYWwsIHdvcmxkSW50ZXJzZWN0UG9pbnQsIHJlcG9ydGVkU2hhcGUsIGJvZHksIHRyaWFuZ2xlc0luZGV4KTsKICAgICAgfQoKICAgICAgdHJpYW5nbGVzLmxlbmd0aCA9IDA7CiAgICB9CiAgICAvKioKICAgICAqIEByZXR1cm4gVHJ1ZSBpZiB0aGUgaW50ZXJzZWN0aW9ucyBzaG91bGQgY29udGludWUKICAgICAqLwoKCiAgICByZXBvcnRJbnRlcnNlY3Rpb24obm9ybWFsLCBoaXRQb2ludFdvcmxkLCBzaGFwZSwgYm9keSwgaGl0RmFjZUluZGV4KSB7CiAgICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207CiAgICAgIGNvbnN0IHRvID0gdGhpcy50bzsKICAgICAgY29uc3QgZGlzdGFuY2UgPSBmcm9tLmRpc3RhbmNlVG8oaGl0UG9pbnRXb3JsZCk7CiAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMucmVzdWx0OyAvLyBTa2lwIGJhY2sgZmFjZXM/CgogICAgICBpZiAodGhpcy5za2lwQmFja2ZhY2VzICYmIG5vcm1hbC5kb3QodGhpcy5kaXJlY3Rpb24pID4gMCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgcmVzdWx0LmhpdEZhY2VJbmRleCA9IHR5cGVvZiBoaXRGYWNlSW5kZXggIT09ICd1bmRlZmluZWQnID8gaGl0RmFjZUluZGV4IDogLTE7CgogICAgICBzd2l0Y2ggKHRoaXMubW9kZSkgewogICAgICAgIGNhc2UgUmF5LkFMTDoKICAgICAgICAgIHRoaXMuaGFzSGl0ID0gdHJ1ZTsKICAgICAgICAgIHJlc3VsdC5zZXQoZnJvbSwgdG8sIG5vcm1hbCwgaGl0UG9pbnRXb3JsZCwgc2hhcGUsIGJvZHksIGRpc3RhbmNlKTsKICAgICAgICAgIHJlc3VsdC5oYXNIaXQgPSB0cnVlOwogICAgICAgICAgdGhpcy5jYWxsYmFjayhyZXN1bHQpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgUmF5LkNMT1NFU1Q6CiAgICAgICAgICAvLyBTdG9yZSBpZiBjbG9zZXIgdGhhbiBjdXJyZW50IGNsb3Nlc3QKICAgICAgICAgIGlmIChkaXN0YW5jZSA8IHJlc3VsdC5kaXN0YW5jZSB8fCAhcmVzdWx0Lmhhc0hpdCkgewogICAgICAgICAgICB0aGlzLmhhc0hpdCA9IHRydWU7CiAgICAgICAgICAgIHJlc3VsdC5oYXNIaXQgPSB0cnVlOwogICAgICAgICAgICByZXN1bHQuc2V0KGZyb20sIHRvLCBub3JtYWwsIGhpdFBvaW50V29ybGQsIHNoYXBlLCBib2R5LCBkaXN0YW5jZSk7CiAgICAgICAgICB9CgogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgUmF5LkFOWToKICAgICAgICAgIC8vIFJlcG9ydCBhbmQgc3RvcC4KICAgICAgICAgIHRoaXMuaGFzSGl0ID0gdHJ1ZTsKICAgICAgICAgIHJlc3VsdC5oYXNIaXQgPSB0cnVlOwogICAgICAgICAgcmVzdWx0LnNldChmcm9tLCB0bywgbm9ybWFsLCBoaXRQb2ludFdvcmxkLCBzaGFwZSwgYm9keSwgZGlzdGFuY2UpOwogICAgICAgICAgcmVzdWx0LnNob3VsZFN0b3AgPSB0cnVlOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQXMgcGVyICJCYXJ5Y2VudHJpYyBUZWNobmlxdWUiIGFzIG5hbWVkCiAgICAgKiB7QGxpbmsgaHR0cHM6Ly93d3cuYmxhY2twYXduLmNvbS90ZXh0cy9wb2ludGlucG9seS9kZWZhdWx0Lmh0bWwgaGVyZX0gYnV0IHdpdGhvdXQgdGhlIGRpdmlzaW9uCiAgICAgKi8KCgogICAgc3RhdGljIHBvaW50SW5UcmlhbmdsZShwLCBhLCBiLCBjKSB7CiAgICAgIGMudnN1YihhLCB2MCk7CiAgICAgIGIudnN1YihhLCB2MSk7CiAgICAgIHAudnN1YihhLCB2Mik7CiAgICAgIGNvbnN0IGRvdDAwID0gdjAuZG90KHYwKTsKICAgICAgY29uc3QgZG90MDEgPSB2MC5kb3QodjEpOwogICAgICBjb25zdCBkb3QwMiA9IHYwLmRvdCh2Mik7CiAgICAgIGNvbnN0IGRvdDExID0gdjEuZG90KHYxKTsKICAgICAgY29uc3QgZG90MTIgPSB2MS5kb3QodjIpOwogICAgICBsZXQgdTsKICAgICAgbGV0IHY7CiAgICAgIHJldHVybiAodSA9IGRvdDExICogZG90MDIgLSBkb3QwMSAqIGRvdDEyKSA+PSAwICYmICh2ID0gZG90MDAgKiBkb3QxMiAtIGRvdDAxICogZG90MDIpID49IDAgJiYgdSArIHYgPCBkb3QwMCAqIGRvdDExIC0gZG90MDEgKiBkb3QwMTsKICAgIH0KCiAgfQogIFJheS5DTE9TRVNUID0gUkFZX01PREVTLkNMT1NFU1Q7CiAgUmF5LkFOWSA9IFJBWV9NT0RFUy5BTlk7CiAgUmF5LkFMTCA9IFJBWV9NT0RFUy5BTEw7CiAgY29uc3QgdG1wQUFCQiQxID0gbmV3IEFBQkIoKTsKICBjb25zdCB0bXBBcnJheSA9IFtdOwogIGNvbnN0IHYxID0gbmV3IFZlYzMoKTsKICBjb25zdCB2MiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0Qm9keV94aSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0Qm9keV9xaSA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgY29uc3QgaW50ZXJzZWN0UG9pbnQgPSBuZXcgVmVjMygpOwogIGNvbnN0IGEgPSBuZXcgVmVjMygpOwogIGNvbnN0IGIgPSBuZXcgVmVjMygpOwogIGNvbnN0IGMgPSBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFJheWNhc3RSZXN1bHQoKTsKICBjb25zdCBpbnRlcnNlY3RDb252ZXhPcHRpb25zID0gewogICAgZmFjZUxpc3Q6IFswXQogIH07CiAgY29uc3Qgd29ybGRQaWxsYXJPZmZzZXQgPSBuZXcgVmVjMygpOwogIGNvbnN0IGludGVyc2VjdEhlaWdodGZpZWxkX2xvY2FsUmF5ID0gbmV3IFJheSgpOwogIGNvbnN0IGludGVyc2VjdEhlaWdodGZpZWxkX2luZGV4ID0gW107CiAgY29uc3QgUmF5X2ludGVyc2VjdFNwaGVyZV9pbnRlcnNlY3Rpb25Qb2ludCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgUmF5X2ludGVyc2VjdFNwaGVyZV9ub3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IGludGVyc2VjdENvbnZleF9ub3JtYWwgPSBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RDb252ZXhfdmVjdG9yID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RUcmltZXNoX25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF9sb2NhbERpcmVjdGlvbiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF9sb2NhbEZyb20gPSBuZXcgVmVjMygpOwogIGNvbnN0IGludGVyc2VjdFRyaW1lc2hfbG9jYWxUbyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF93b3JsZE5vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF93b3JsZEludGVyc2VjdFBvaW50ID0gbmV3IFZlYzMoKTsKICBuZXcgQUFCQigpOwogIGNvbnN0IGludGVyc2VjdFRyaW1lc2hfdHJpYW5nbGVzID0gW107CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF90cmVlVHJhbnNmb3JtID0gbmV3IFRyYW5zZm9ybSgpOwogIGNvbnN0IHYwID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3QgPSBuZXcgVmVjMygpOwoKICBmdW5jdGlvbiBkaXN0YW5jZUZyb21JbnRlcnNlY3Rpb24oZnJvbSwgZGlyZWN0aW9uLCBwb3NpdGlvbikgewogICAgLy8gdjAgaXMgdmVjdG9yIGZyb20gZnJvbSB0byBwb3NpdGlvbgogICAgcG9zaXRpb24udnN1Yihmcm9tLCB2MCk7CiAgICBjb25zdCBkb3QgPSB2MC5kb3QoZGlyZWN0aW9uKTsgLy8gaW50ZXJzZWN0ID0gZGlyZWN0aW9uKmRvdCArIGZyb20KCiAgICBkaXJlY3Rpb24uc2NhbGUoZG90LCBpbnRlcnNlY3QpOwogICAgaW50ZXJzZWN0LnZhZGQoZnJvbSwgaW50ZXJzZWN0KTsKICAgIGNvbnN0IGRpc3RhbmNlID0gcG9zaXRpb24uZGlzdGFuY2VUbyhpbnRlcnNlY3QpOwogICAgcmV0dXJuIGRpc3RhbmNlOwogIH0KCiAgLyoqCiAgICogU3dlZXAgYW5kIHBydW5lIGJyb2FkcGhhc2UgYWxvbmcgb25lIGF4aXMuCiAgICovCiAgY2xhc3MgU0FQQnJvYWRwaGFzZSBleHRlbmRzIEJyb2FkcGhhc2UgewogICAgLyoqCiAgICAgKiBMaXN0IG9mIGJvZGllcyBjdXJyZW50bHkgaW4gdGhlIGJyb2FkcGhhc2UuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSB3b3JsZCB0byBzZWFyY2ggaW4uCiAgICAgKi8KCiAgICAvKioKICAgICAqIEF4aXMgdG8gc29ydCB0aGUgYm9kaWVzIGFsb25nLgogICAgICogU2V0IHRvIDAgZm9yIHggYXhpcywgYW5kIDEgZm9yIHkgYXhpcy4KICAgICAqIEZvciBiZXN0IHBlcmZvcm1hbmNlLCBwaWNrIHRoZSBheGlzIHdoZXJlIGJvZGllcyBhcmUgbW9zdCBkaXN0cmlidXRlZC4KICAgICAqLwoKICAgIC8qKgogICAgICogQ2hlY2sgaWYgdGhlIGJvdW5kcyBvZiB0d28gYm9kaWVzIG92ZXJsYXAsIGFsb25nIHRoZSBnaXZlbiBTQVAgYXhpcy4KICAgICAqLwogICAgc3RhdGljIGNoZWNrQm91bmRzKGJpLCBiaiwgYXhpc0luZGV4KSB7CiAgICAgIGxldCBiaVBvczsKICAgICAgbGV0IGJqUG9zOwoKICAgICAgaWYgKGF4aXNJbmRleCA9PT0gMCkgewogICAgICAgIGJpUG9zID0gYmkucG9zaXRpb24ueDsKICAgICAgICBialBvcyA9IGJqLnBvc2l0aW9uLng7CiAgICAgIH0gZWxzZSBpZiAoYXhpc0luZGV4ID09PSAxKSB7CiAgICAgICAgYmlQb3MgPSBiaS5wb3NpdGlvbi55OwogICAgICAgIGJqUG9zID0gYmoucG9zaXRpb24ueTsKICAgICAgfSBlbHNlIGlmIChheGlzSW5kZXggPT09IDIpIHsKICAgICAgICBiaVBvcyA9IGJpLnBvc2l0aW9uLno7CiAgICAgICAgYmpQb3MgPSBiai5wb3NpdGlvbi56OwogICAgICB9CgogICAgICBjb25zdCByaSA9IGJpLmJvdW5kaW5nUmFkaXVzLAogICAgICAgICAgICByaiA9IGJqLmJvdW5kaW5nUmFkaXVzLAogICAgICAgICAgICBib3VuZEEyID0gYmlQb3MgKyByaSwKICAgICAgICAgICAgYm91bmRCMSA9IGJqUG9zIC0gcmo7CiAgICAgIHJldHVybiBib3VuZEIxIDwgYm91bmRBMjsKICAgIH0gLy8gTm90ZTogdGhlc2UgYXJlIGlkZW50aWNhbCwgc2F2ZSBmb3IgeC95L3ogbG93ZXJib3VuZAoKICAgIC8qKgogICAgICogaW5zZXJ0aW9uU29ydFgKICAgICAqLwoKCiAgICBzdGF0aWMgaW5zZXJ0aW9uU29ydFgoYSkgewogICAgICBmb3IgKGxldCBpID0gMSwgbCA9IGEubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgY29uc3QgdiA9IGFbaV07CiAgICAgICAgbGV0IGo7CgogICAgICAgIGZvciAoaiA9IGkgLSAxOyBqID49IDA7IGotLSkgewogICAgICAgICAgaWYgKGFbal0uYWFiYi5sb3dlckJvdW5kLnggPD0gdi5hYWJiLmxvd2VyQm91bmQueCkgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBhW2ogKyAxXSA9IGFbal07CiAgICAgICAgfQoKICAgICAgICBhW2ogKyAxXSA9IHY7CiAgICAgIH0KCiAgICAgIHJldHVybiBhOwogICAgfQogICAgLyoqCiAgICAgKiBpbnNlcnRpb25Tb3J0WQogICAgICovCgoKICAgIHN0YXRpYyBpbnNlcnRpb25Tb3J0WShhKSB7CiAgICAgIGZvciAobGV0IGkgPSAxLCBsID0gYS5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICBjb25zdCB2ID0gYVtpXTsKICAgICAgICBsZXQgajsKCiAgICAgICAgZm9yIChqID0gaSAtIDE7IGogPj0gMDsgai0tKSB7CiAgICAgICAgICBpZiAoYVtqXS5hYWJiLmxvd2VyQm91bmQueSA8PSB2LmFhYmIubG93ZXJCb3VuZC55KSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIGFbaiArIDFdID0gYVtqXTsKICAgICAgICB9CgogICAgICAgIGFbaiArIDFdID0gdjsKICAgICAgfQoKICAgICAgcmV0dXJuIGE7CiAgICB9CiAgICAvKioKICAgICAqIGluc2VydGlvblNvcnRaCiAgICAgKi8KCgogICAgc3RhdGljIGluc2VydGlvblNvcnRaKGEpIHsKICAgICAgZm9yIChsZXQgaSA9IDEsIGwgPSBhLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgIGNvbnN0IHYgPSBhW2ldOwogICAgICAgIGxldCBqOwoKICAgICAgICBmb3IgKGogPSBpIC0gMTsgaiA+PSAwOyBqLS0pIHsKICAgICAgICAgIGlmIChhW2pdLmFhYmIubG93ZXJCb3VuZC56IDw9IHYuYWFiYi5sb3dlckJvdW5kLnopIHsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgYVtqICsgMV0gPSBhW2pdOwogICAgICAgIH0KCiAgICAgICAgYVtqICsgMV0gPSB2OwogICAgICB9CgogICAgICByZXR1cm4gYTsKICAgIH0KCiAgICBjb25zdHJ1Y3Rvcih3b3JsZCkgewogICAgICBzdXBlcigpOwogICAgICB0aGlzLmF4aXNMaXN0ID0gW107CiAgICAgIHRoaXMud29ybGQgPSBudWxsOwogICAgICB0aGlzLmF4aXNJbmRleCA9IDA7CiAgICAgIGNvbnN0IGF4aXNMaXN0ID0gdGhpcy5heGlzTGlzdDsKCiAgICAgIHRoaXMuX2FkZEJvZHlIYW5kbGVyID0gZXZlbnQgPT4gewogICAgICAgIGF4aXNMaXN0LnB1c2goZXZlbnQuYm9keSk7CiAgICAgIH07CgogICAgICB0aGlzLl9yZW1vdmVCb2R5SGFuZGxlciA9IGV2ZW50ID0+IHsKICAgICAgICBjb25zdCBpZHggPSBheGlzTGlzdC5pbmRleE9mKGV2ZW50LmJvZHkpOwoKICAgICAgICBpZiAoaWR4ICE9PSAtMSkgewogICAgICAgICAgYXhpc0xpc3Quc3BsaWNlKGlkeCwgMSk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgaWYgKHdvcmxkKSB7CiAgICAgICAgdGhpcy5zZXRXb3JsZCh3b3JsZCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2hhbmdlIHRoZSB3b3JsZAogICAgICovCgoKICAgIHNldFdvcmxkKHdvcmxkKSB7CiAgICAgIC8vIENsZWFyIHRoZSBvbGQgYXhpcyBhcnJheQogICAgICB0aGlzLmF4aXNMaXN0Lmxlbmd0aCA9IDA7IC8vIEFkZCBhbGwgYm9kaWVzIGZyb20gdGhlIG5ldyB3b3JsZAoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3b3JsZC5ib2RpZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLmF4aXNMaXN0LnB1c2god29ybGQuYm9kaWVzW2ldKTsKICAgICAgfSAvLyBSZW1vdmUgb2xkIGhhbmRsZXJzLCBpZiBhbnkKCgogICAgICB3b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdhZGRCb2R5JywgdGhpcy5fYWRkQm9keUhhbmRsZXIpOwogICAgICB3b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdyZW1vdmVCb2R5JywgdGhpcy5fcmVtb3ZlQm9keUhhbmRsZXIpOyAvLyBBZGQgaGFuZGxlcnMgdG8gdXBkYXRlIHRoZSBsaXN0IG9mIGJvZGllcy4KCiAgICAgIHdvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ2FkZEJvZHknLCB0aGlzLl9hZGRCb2R5SGFuZGxlcik7CiAgICAgIHdvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3JlbW92ZUJvZHknLCB0aGlzLl9yZW1vdmVCb2R5SGFuZGxlcik7CiAgICAgIHRoaXMud29ybGQgPSB3b3JsZDsKICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIENvbGxlY3QgYWxsIGNvbGxpc2lvbiBwYWlycwogICAgICovCgoKICAgIGNvbGxpc2lvblBhaXJzKHdvcmxkLCBwMSwgcDIpIHsKICAgICAgY29uc3QgYm9kaWVzID0gdGhpcy5heGlzTGlzdDsKICAgICAgY29uc3QgTiA9IGJvZGllcy5sZW5ndGg7CiAgICAgIGNvbnN0IGF4aXNJbmRleCA9IHRoaXMuYXhpc0luZGV4OwogICAgICBsZXQgaTsKICAgICAgbGV0IGo7CgogICAgICBpZiAodGhpcy5kaXJ0eSkgewogICAgICAgIHRoaXMuc29ydExpc3QoKTsKICAgICAgICB0aGlzLmRpcnR5ID0gZmFsc2U7CiAgICAgIH0gLy8gTG9vayB0aHJvdWdoIHRoZSBsaXN0CgoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgYmkgPSBib2RpZXNbaV07CgogICAgICAgIGZvciAoaiA9IGkgKyAxOyBqIDwgTjsgaisrKSB7CiAgICAgICAgICBjb25zdCBiaiA9IGJvZGllc1tqXTsKCiAgICAgICAgICBpZiAoIXRoaXMubmVlZEJyb2FkcGhhc2VDb2xsaXNpb24oYmksIGJqKSkgewogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoIVNBUEJyb2FkcGhhc2UuY2hlY2tCb3VuZHMoYmksIGJqLCBheGlzSW5kZXgpKSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMuaW50ZXJzZWN0aW9uVGVzdChiaSwgYmosIHAxLCBwMik7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgc29ydExpc3QoKSB7CiAgICAgIGNvbnN0IGF4aXNMaXN0ID0gdGhpcy5heGlzTGlzdDsKICAgICAgY29uc3QgYXhpc0luZGV4ID0gdGhpcy5heGlzSW5kZXg7CiAgICAgIGNvbnN0IE4gPSBheGlzTGlzdC5sZW5ndGg7IC8vIFVwZGF0ZSBBQUJCcwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGJpID0gYXhpc0xpc3RbaV07CgogICAgICAgIGlmIChiaS5hYWJiTmVlZHNVcGRhdGUpIHsKICAgICAgICAgIGJpLnVwZGF0ZUFBQkIoKTsKICAgICAgICB9CiAgICAgIH0gLy8gU29ydCB0aGUgbGlzdAoKCiAgICAgIGlmIChheGlzSW5kZXggPT09IDApIHsKICAgICAgICBTQVBCcm9hZHBoYXNlLmluc2VydGlvblNvcnRYKGF4aXNMaXN0KTsKICAgICAgfSBlbHNlIGlmIChheGlzSW5kZXggPT09IDEpIHsKICAgICAgICBTQVBCcm9hZHBoYXNlLmluc2VydGlvblNvcnRZKGF4aXNMaXN0KTsKICAgICAgfSBlbHNlIGlmIChheGlzSW5kZXggPT09IDIpIHsKICAgICAgICBTQVBCcm9hZHBoYXNlLmluc2VydGlvblNvcnRaKGF4aXNMaXN0KTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyB0aGUgdmFyaWFuY2Ugb2YgdGhlIGJvZHkgcG9zaXRpb25zIGFuZCBlc3RpbWF0ZXMgdGhlIGJlc3QgYXhpcyB0byB1c2UuCiAgICAgKiBXaWxsIGF1dG9tYXRpY2FsbHkgc2V0IHByb3BlcnR5IGBheGlzSW5kZXhgLgogICAgICovCgoKICAgIGF1dG9EZXRlY3RBeGlzKCkgewogICAgICBsZXQgc3VtWCA9IDA7CiAgICAgIGxldCBzdW1YMiA9IDA7CiAgICAgIGxldCBzdW1ZID0gMDsKICAgICAgbGV0IHN1bVkyID0gMDsKICAgICAgbGV0IHN1bVogPSAwOwogICAgICBsZXQgc3VtWjIgPSAwOwogICAgICBjb25zdCBib2RpZXMgPSB0aGlzLmF4aXNMaXN0OwogICAgICBjb25zdCBOID0gYm9kaWVzLmxlbmd0aDsKICAgICAgY29uc3QgaW52TiA9IDEgLyBOOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGIgPSBib2RpZXNbaV07CiAgICAgICAgY29uc3QgY2VudGVyWCA9IGIucG9zaXRpb24ueDsKICAgICAgICBzdW1YICs9IGNlbnRlclg7CiAgICAgICAgc3VtWDIgKz0gY2VudGVyWCAqIGNlbnRlclg7CiAgICAgICAgY29uc3QgY2VudGVyWSA9IGIucG9zaXRpb24ueTsKICAgICAgICBzdW1ZICs9IGNlbnRlclk7CiAgICAgICAgc3VtWTIgKz0gY2VudGVyWSAqIGNlbnRlclk7CiAgICAgICAgY29uc3QgY2VudGVyWiA9IGIucG9zaXRpb24uejsKICAgICAgICBzdW1aICs9IGNlbnRlclo7CiAgICAgICAgc3VtWjIgKz0gY2VudGVyWiAqIGNlbnRlclo7CiAgICAgIH0KCiAgICAgIGNvbnN0IHZhcmlhbmNlWCA9IHN1bVgyIC0gc3VtWCAqIHN1bVggKiBpbnZOOwogICAgICBjb25zdCB2YXJpYW5jZVkgPSBzdW1ZMiAtIHN1bVkgKiBzdW1ZICogaW52TjsKICAgICAgY29uc3QgdmFyaWFuY2VaID0gc3VtWjIgLSBzdW1aICogc3VtWiAqIGludk47CgogICAgICBpZiAodmFyaWFuY2VYID4gdmFyaWFuY2VZKSB7CiAgICAgICAgaWYgKHZhcmlhbmNlWCA+IHZhcmlhbmNlWikgewogICAgICAgICAgdGhpcy5heGlzSW5kZXggPSAwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmF4aXNJbmRleCA9IDI7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHZhcmlhbmNlWSA+IHZhcmlhbmNlWikgewogICAgICAgIHRoaXMuYXhpc0luZGV4ID0gMTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmF4aXNJbmRleCA9IDI7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyBhbGwgdGhlIGJvZGllcyB3aXRoaW4gYW4gQUFCQi4KICAgICAqIEBwYXJhbSByZXN1bHQgQW4gYXJyYXkgdG8gc3RvcmUgcmVzdWx0aW5nIGJvZGllcyBpbi4KICAgICAqLwoKCiAgICBhYWJiUXVlcnkod29ybGQsIGFhYmIsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBbXTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuZGlydHkpIHsKICAgICAgICB0aGlzLnNvcnRMaXN0KCk7CiAgICAgICAgdGhpcy5kaXJ0eSA9IGZhbHNlOwogICAgICB9CgogICAgICBjb25zdCBheGlzSW5kZXggPSB0aGlzLmF4aXNJbmRleDsKICAgICAgbGV0IGF4aXMgPSAneCc7CgogICAgICBpZiAoYXhpc0luZGV4ID09PSAxKSB7CiAgICAgICAgYXhpcyA9ICd5JzsKICAgICAgfQoKICAgICAgaWYgKGF4aXNJbmRleCA9PT0gMikgewogICAgICAgIGF4aXMgPSAneic7CiAgICAgIH0KCiAgICAgIGNvbnN0IGF4aXNMaXN0ID0gdGhpcy5heGlzTGlzdDsKICAgICAgYWFiYi5sb3dlckJvdW5kW2F4aXNdOwogICAgICBhYWJiLnVwcGVyQm91bmRbYXhpc107CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF4aXNMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgYiA9IGF4aXNMaXN0W2ldOwoKICAgICAgICBpZiAoYi5hYWJiTmVlZHNVcGRhdGUpIHsKICAgICAgICAgIGIudXBkYXRlQUFCQigpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGIuYWFiYi5vdmVybGFwcyhhYWJiKSkgewogICAgICAgICAgcmVzdWx0LnB1c2goYik7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICB9CgogIGNsYXNzIFV0aWxzIHsKICAgIC8qKgogICAgICogRXh0ZW5kIGFuIG9wdGlvbnMgb2JqZWN0IHdpdGggZGVmYXVsdCB2YWx1ZXMuCiAgICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgb3B0aW9ucyBvYmplY3QuIE1heSBiZSBmYWxzeTogaW4gdGhpcyBjYXNlLCBhIG5ldyBvYmplY3QgaXMgY3JlYXRlZCBhbmQgcmV0dXJuZWQuCiAgICAgKiBAcGFyYW0gZGVmYXVsdHMgQW4gb2JqZWN0IGNvbnRhaW5pbmcgZGVmYXVsdCB2YWx1ZXMuCiAgICAgKiBAcmV0dXJuIFRoZSBtb2RpZmllZCBvcHRpb25zIG9iamVjdC4KICAgICAqLwogICAgc3RhdGljIGRlZmF1bHRzKG9wdGlvbnMsIGRlZmF1bHRzKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIGZvciAobGV0IGtleSBpbiBkZWZhdWx0cykgewogICAgICAgIGlmICghKGtleSBpbiBvcHRpb25zKSkgewogICAgICAgICAgb3B0aW9uc1trZXldID0gZGVmYXVsdHNba2V5XTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBvcHRpb25zOwogICAgfQoKICB9CgogIC8qKgogICAqIENvbnN0cmFpbnQgYmFzZSBjbGFzcwogICAqLwogIGNsYXNzIENvbnN0cmFpbnQgewogICAgLyoqCiAgICAgKiBFcXVhdGlvbnMgdG8gYmUgc29sdmVkIGluIHRoaXMgY29uc3RyYWludC4KICAgICAqLwoKICAgIC8qKgogICAgICogQm9keSBBLgogICAgICovCgogICAgLyoqCiAgICAgKiBCb2R5IEIuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNldCB0byBmYWxzZSBpZiB5b3UgZG9uJ3Qgd2FudCB0aGUgYm9kaWVzIHRvIGNvbGxpZGUgd2hlbiB0aGV5IGFyZSBjb25uZWN0ZWQuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBvcHRpb25zID0gVXRpbHMuZGVmYXVsdHMob3B0aW9ucywgewogICAgICAgIGNvbGxpZGVDb25uZWN0ZWQ6IHRydWUsCiAgICAgICAgd2FrZVVwQm9kaWVzOiB0cnVlCiAgICAgIH0pOwogICAgICB0aGlzLmVxdWF0aW9ucyA9IFtdOwogICAgICB0aGlzLmJvZHlBID0gYm9keUE7CiAgICAgIHRoaXMuYm9keUIgPSBib2R5QjsKICAgICAgdGhpcy5pZCA9IENvbnN0cmFpbnQuaWRDb3VudGVyKys7CiAgICAgIHRoaXMuY29sbGlkZUNvbm5lY3RlZCA9IG9wdGlvbnMuY29sbGlkZUNvbm5lY3RlZDsKCiAgICAgIGlmIChvcHRpb25zLndha2VVcEJvZGllcykgewogICAgICAgIGlmIChib2R5QSkgewogICAgICAgICAgYm9keUEud2FrZVVwKCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoYm9keUIpIHsKICAgICAgICAgIGJvZHlCLndha2VVcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGUgYWxsIHRoZSBlcXVhdGlvbnMgd2l0aCBkYXRhLgogICAgICovCgoKICAgIHVwZGF0ZSgpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdtZXRob2QgdXBkYXRlKCkgbm90IGltcGxtZW1lbnRlZCBpbiB0aGlzIENvbnN0cmFpbnQgc3ViY2xhc3MhJyk7CiAgICB9CiAgICAvKioKICAgICAqIEVuYWJsZXMgYWxsIGVxdWF0aW9ucyBpbiB0aGUgY29uc3RyYWludC4KICAgICAqLwoKCiAgICBlbmFibGUoKSB7CiAgICAgIGNvbnN0IGVxcyA9IHRoaXMuZXF1YXRpb25zOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlcXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBlcXNbaV0uZW5hYmxlZCA9IHRydWU7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogRGlzYWJsZXMgYWxsIGVxdWF0aW9ucyBpbiB0aGUgY29uc3RyYWludC4KICAgICAqLwoKCiAgICBkaXNhYmxlKCkgewogICAgICBjb25zdCBlcXMgPSB0aGlzLmVxdWF0aW9uczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZXFzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZXFzW2ldLmVuYWJsZWQgPSBmYWxzZTsKICAgICAgfQogICAgfQoKICB9CiAgQ29uc3RyYWludC5pZENvdW50ZXIgPSAwOwoKICAvKioKICAgKiBBbiBlbGVtZW50IGNvbnRhaW5pbmcgNiBlbnRyaWVzLCAzIHNwYXRpYWwgYW5kIDMgcm90YXRpb25hbCBkZWdyZWVzIG9mIGZyZWVkb20uCiAgICovCgogIGNsYXNzIEphY29iaWFuRWxlbWVudCB7CiAgICAvKioKICAgICAqIHNwYXRpYWwKICAgICAqLwoKICAgIC8qKgogICAgICogcm90YXRpb25hbAogICAgICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5zcGF0aWFsID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5yb3RhdGlvbmFsID0gbmV3IFZlYzMoKTsKICAgIH0KICAgIC8qKgogICAgICogTXVsdGlwbHkgd2l0aCBvdGhlciBKYWNvYmlhbkVsZW1lbnQKICAgICAqLwoKCiAgICBtdWx0aXBseUVsZW1lbnQoZWxlbWVudCkgewogICAgICByZXR1cm4gZWxlbWVudC5zcGF0aWFsLmRvdCh0aGlzLnNwYXRpYWwpICsgZWxlbWVudC5yb3RhdGlvbmFsLmRvdCh0aGlzLnJvdGF0aW9uYWwpOwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSB3aXRoIHR3byB2ZWN0b3JzCiAgICAgKi8KCgogICAgbXVsdGlwbHlWZWN0b3JzKHNwYXRpYWwsIHJvdGF0aW9uYWwpIHsKICAgICAgcmV0dXJuIHNwYXRpYWwuZG90KHRoaXMuc3BhdGlhbCkgKyByb3RhdGlvbmFsLmRvdCh0aGlzLnJvdGF0aW9uYWwpOwogICAgfQoKICB9CgogIC8qKgogICAqIEVxdWF0aW9uIGJhc2UgY2xhc3MuCiAgICoKICAgKiBgYWAsIGBiYCBhbmQgYGVwc2AgYXJlIHtAbGluayBodHRwczovL3d3dzguY3MudW11LnNlL2t1cnNlci81RFYwNTgvVlQxNS9sZWN0dXJlcy9TUE9PS2xhYm5vdGVzLnBkZiBTUE9PS30gcGFyYW1ldGVycyB0aGF0IGRlZmF1bHQgdG8gYDAuMGAuIFNlZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL3NjaHRlcHBlL2Nhbm5vbi5qcy9pc3N1ZXMvMjM4I2lzc3VlY29tbWVudC0xNDcxNzIzMjcgdGhpcyBleGNoYW5nZX0gZm9yIG1vcmUgZGV0YWlscyBvbiBDYW5ub24ncyBwaHlzaWNzIGltcGxlbWVudGF0aW9uLgogICAqLwogIGNsYXNzIEVxdWF0aW9uIHsKICAgIC8qKgogICAgICogTWluaW11bSAocmVhZDogbmVnYXRpdmUgbWF4KSBmb3JjZSB0byBiZSBhcHBsaWVkIGJ5IHRoZSBjb25zdHJhaW50LgogICAgICovCgogICAgLyoqCiAgICAgKiBNYXhpbXVtIChyZWFkOiBwb3NpdGl2ZSBtYXgpIGZvcmNlIHRvIGJlIGFwcGxpZWQgYnkgdGhlIGNvbnN0cmFpbnQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNQT09LIHBhcmFtZXRlcgogICAgICovCgogICAgLyoqCiAgICAgKiBTUE9PSyBwYXJhbWV0ZXIKICAgICAqLwoKICAgIC8qKgogICAgICogU1BPT0sgcGFyYW1ldGVyCiAgICAgKi8KCiAgICAvKioKICAgICAqIEEgbnVtYmVyLCBwcm9wb3J0aW9uYWwgdG8gdGhlIGZvcmNlIGFkZGVkIHRvIHRoZSBib2RpZXMuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJpLCBiaiwgbWluRm9yY2UsIG1heEZvcmNlKSB7CiAgICAgIGlmIChtaW5Gb3JjZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgbWluRm9yY2UgPSAtMWU2OwogICAgICB9CgogICAgICBpZiAobWF4Rm9yY2UgPT09IHZvaWQgMCkgewogICAgICAgIG1heEZvcmNlID0gMWU2OwogICAgICB9CgogICAgICB0aGlzLmlkID0gRXF1YXRpb24uaWRDb3VudGVyKys7CiAgICAgIHRoaXMubWluRm9yY2UgPSBtaW5Gb3JjZTsKICAgICAgdGhpcy5tYXhGb3JjZSA9IG1heEZvcmNlOwogICAgICB0aGlzLmJpID0gYmk7CiAgICAgIHRoaXMuYmogPSBiajsKICAgICAgdGhpcy5hID0gMC4wOyAvLyBTUE9PSyBwYXJhbWV0ZXIKCiAgICAgIHRoaXMuYiA9IDAuMDsgLy8gU1BPT0sgcGFyYW1ldGVyCgogICAgICB0aGlzLmVwcyA9IDAuMDsgLy8gU1BPT0sgcGFyYW1ldGVyCgogICAgICB0aGlzLmphY29iaWFuRWxlbWVudEEgPSBuZXcgSmFjb2JpYW5FbGVtZW50KCk7CiAgICAgIHRoaXMuamFjb2JpYW5FbGVtZW50QiA9IG5ldyBKYWNvYmlhbkVsZW1lbnQoKTsKICAgICAgdGhpcy5lbmFibGVkID0gdHJ1ZTsKICAgICAgdGhpcy5tdWx0aXBsaWVyID0gMDsKICAgICAgdGhpcy5zZXRTcG9va1BhcmFtcygxZTcsIDQsIDEgLyA2MCk7IC8vIFNldCB0eXBpY2FsIHNwb29rIHBhcmFtcwogICAgfQogICAgLyoqCiAgICAgKiBSZWNhbGN1bGF0ZXMgYSwgYiwgYW5kIGVwcy4KICAgICAqCiAgICAgKiBUaGUgRXF1YXRpb24gY29uc3RydWN0b3Igc2V0cyB0eXBpY2FsIFNQT09LIHBhcmFtZXRlcnMgYXMgc3VjaDoKICAgICAqICogYHN0aWZmbmVzc2AgPSAxZTcKICAgICAqICogYHJlbGF4YXRpb25gID0gNAogICAgICogKiBgdGltZVN0ZXBgPSAxIC8gNjAsIF9ub3RlIHRoZSBoYXJkY29kZWQgcmVmcmVzaCByYXRlLl8KICAgICAqLwoKCiAgICBzZXRTcG9va1BhcmFtcyhzdGlmZm5lc3MsIHJlbGF4YXRpb24sIHRpbWVTdGVwKSB7CiAgICAgIGNvbnN0IGQgPSByZWxheGF0aW9uOwogICAgICBjb25zdCBrID0gc3RpZmZuZXNzOwogICAgICBjb25zdCBoID0gdGltZVN0ZXA7CiAgICAgIHRoaXMuYSA9IDQuMCAvIChoICogKDEgKyA0ICogZCkpOwogICAgICB0aGlzLmIgPSA0LjAgKiBkIC8gKDEgKyA0ICogZCk7CiAgICAgIHRoaXMuZXBzID0gNC4wIC8gKGggKiBoICogayAqICgxICsgNCAqIGQpKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZXMgdGhlIHJpZ2h0IGhhbmQgc2lkZSBvZiB0aGUgU1BPT0sgZXF1YXRpb24KICAgICAqLwoKCiAgICBjb21wdXRlQihhLCBiLCBoKSB7CiAgICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKTsKICAgICAgY29uc3QgR3EgPSB0aGlzLmNvbXB1dGVHcSgpOwogICAgICBjb25zdCBHaU1mID0gdGhpcy5jb21wdXRlR2lNZigpOwogICAgICByZXR1cm4gLUdxICogYSAtIEdXICogYiAtIEdpTWYgKiBoOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyBHKnEsIHdoZXJlIHEgYXJlIHRoZSBnZW5lcmFsaXplZCBib2R5IGNvb3JkaW5hdGVzCiAgICAgKi8KCgogICAgY29tcHV0ZUdxKCkgewogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIGNvbnN0IGJpID0gdGhpcy5iaTsKICAgICAgY29uc3QgYmogPSB0aGlzLmJqOwogICAgICBjb25zdCB4aSA9IGJpLnBvc2l0aW9uOwogICAgICBjb25zdCB4aiA9IGJqLnBvc2l0aW9uOwogICAgICByZXR1cm4gR0Euc3BhdGlhbC5kb3QoeGkpICsgR0Iuc3BhdGlhbC5kb3QoeGopOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyBHKlcsIHdoZXJlIFcgYXJlIHRoZSBib2R5IHZlbG9jaXRpZXMKICAgICAqLwoKCiAgICBjb21wdXRlR1coKSB7CiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsKICAgICAgY29uc3QgYmkgPSB0aGlzLmJpOwogICAgICBjb25zdCBiaiA9IHRoaXMuYmo7CiAgICAgIGNvbnN0IHZpID0gYmkudmVsb2NpdHk7CiAgICAgIGNvbnN0IHZqID0gYmoudmVsb2NpdHk7CiAgICAgIGNvbnN0IHdpID0gYmkuYW5ndWxhclZlbG9jaXR5OwogICAgICBjb25zdCB3aiA9IGJqLmFuZ3VsYXJWZWxvY2l0eTsKICAgICAgcmV0dXJuIEdBLm11bHRpcGx5VmVjdG9ycyh2aSwgd2kpICsgR0IubXVsdGlwbHlWZWN0b3JzKHZqLCB3aik7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGVzIEcqV2xhbWJkYSwgd2hlcmUgVyBhcmUgdGhlIGJvZHkgdmVsb2NpdGllcwogICAgICovCgoKICAgIGNvbXB1dGVHV2xhbWJkYSgpIHsKICAgICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7CiAgICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCOwogICAgICBjb25zdCBiaSA9IHRoaXMuYmk7CiAgICAgIGNvbnN0IGJqID0gdGhpcy5iajsKICAgICAgY29uc3QgdmkgPSBiaS52bGFtYmRhOwogICAgICBjb25zdCB2aiA9IGJqLnZsYW1iZGE7CiAgICAgIGNvbnN0IHdpID0gYmkud2xhbWJkYTsKICAgICAgY29uc3Qgd2ogPSBiai53bGFtYmRhOwogICAgICByZXR1cm4gR0EubXVsdGlwbHlWZWN0b3JzKHZpLCB3aSkgKyBHQi5tdWx0aXBseVZlY3RvcnModmosIHdqKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZXMgRyppbnYoTSkqZiwgd2hlcmUgTSBpcyB0aGUgbWFzcyBtYXRyaXggd2l0aCBkaWFnb25hbCBibG9ja3MgZm9yIGVhY2ggYm9keSwgYW5kIGYgYXJlIHRoZSBmb3JjZXMgb24gdGhlIGJvZGllcy4KICAgICAqLwoKCiAgICBjb21wdXRlR2lNZigpIHsKICAgICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7CiAgICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCOwogICAgICBjb25zdCBiaSA9IHRoaXMuYmk7CiAgICAgIGNvbnN0IGJqID0gdGhpcy5iajsKICAgICAgY29uc3QgZmkgPSBiaS5mb3JjZTsKICAgICAgY29uc3QgdGkgPSBiaS50b3JxdWU7CiAgICAgIGNvbnN0IGZqID0gYmouZm9yY2U7CiAgICAgIGNvbnN0IHRqID0gYmoudG9ycXVlOwogICAgICBjb25zdCBpbnZNYXNzaSA9IGJpLmludk1hc3NTb2x2ZTsKICAgICAgY29uc3QgaW52TWFzc2ogPSBiai5pbnZNYXNzU29sdmU7CiAgICAgIGZpLnNjYWxlKGludk1hc3NpLCBpTWZpKTsKICAgICAgZmouc2NhbGUoaW52TWFzc2osIGlNZmopOwogICAgICBiaS5pbnZJbmVydGlhV29ybGRTb2x2ZS52bXVsdCh0aSwgaW52SWlfdm11bHRfdGF1aSk7CiAgICAgIGJqLmludkluZXJ0aWFXb3JsZFNvbHZlLnZtdWx0KHRqLCBpbnZJal92bXVsdF90YXVqKTsKICAgICAgcmV0dXJuIEdBLm11bHRpcGx5VmVjdG9ycyhpTWZpLCBpbnZJaV92bXVsdF90YXVpKSArIEdCLm11bHRpcGx5VmVjdG9ycyhpTWZqLCBpbnZJal92bXVsdF90YXVqKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZXMgRyppbnYoTSkqRycKICAgICAqLwoKCiAgICBjb21wdXRlR2lNR3QoKSB7CiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsKICAgICAgY29uc3QgYmkgPSB0aGlzLmJpOwogICAgICBjb25zdCBiaiA9IHRoaXMuYmo7CiAgICAgIGNvbnN0IGludk1hc3NpID0gYmkuaW52TWFzc1NvbHZlOwogICAgICBjb25zdCBpbnZNYXNzaiA9IGJqLmludk1hc3NTb2x2ZTsKICAgICAgY29uc3QgaW52SWkgPSBiaS5pbnZJbmVydGlhV29ybGRTb2x2ZTsKICAgICAgY29uc3QgaW52SWogPSBiai5pbnZJbmVydGlhV29ybGRTb2x2ZTsKICAgICAgbGV0IHJlc3VsdCA9IGludk1hc3NpICsgaW52TWFzc2o7CiAgICAgIGludklpLnZtdWx0KEdBLnJvdGF0aW9uYWwsIHRtcCk7CiAgICAgIHJlc3VsdCArPSB0bXAuZG90KEdBLnJvdGF0aW9uYWwpOwogICAgICBpbnZJai52bXVsdChHQi5yb3RhdGlvbmFsLCB0bXApOwogICAgICByZXN1bHQgKz0gdG1wLmRvdChHQi5yb3RhdGlvbmFsKTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICAgIC8qKgogICAgICogQWRkIGNvbnN0cmFpbnQgdmVsb2NpdHkgdG8gdGhlIGJvZGllcy4KICAgICAqLwoKCiAgICBhZGRUb1dsYW1iZGEoZGVsdGFsYW1iZGEpIHsKICAgICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7CiAgICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCOwogICAgICBjb25zdCBiaSA9IHRoaXMuYmk7CiAgICAgIGNvbnN0IGJqID0gdGhpcy5iajsKICAgICAgY29uc3QgdGVtcCA9IGFkZFRvV2xhbWJkYV90ZW1wOyAvLyBBZGQgdG8gbGluZWFyIHZlbG9jaXR5CiAgICAgIC8vIHZfbGFtYmRhICs9IGludihNKSAqIGRlbHRhX2xhbWJhICogRwoKICAgICAgYmkudmxhbWJkYS5hZGRTY2FsZWRWZWN0b3IoYmkuaW52TWFzc1NvbHZlICogZGVsdGFsYW1iZGEsIEdBLnNwYXRpYWwsIGJpLnZsYW1iZGEpOwogICAgICBiai52bGFtYmRhLmFkZFNjYWxlZFZlY3Rvcihiai5pbnZNYXNzU29sdmUgKiBkZWx0YWxhbWJkYSwgR0Iuc3BhdGlhbCwgYmoudmxhbWJkYSk7IC8vIEFkZCB0byBhbmd1bGFyIHZlbG9jaXR5CgogICAgICBiaS5pbnZJbmVydGlhV29ybGRTb2x2ZS52bXVsdChHQS5yb3RhdGlvbmFsLCB0ZW1wKTsKICAgICAgYmkud2xhbWJkYS5hZGRTY2FsZWRWZWN0b3IoZGVsdGFsYW1iZGEsIHRlbXAsIGJpLndsYW1iZGEpOwogICAgICBiai5pbnZJbmVydGlhV29ybGRTb2x2ZS52bXVsdChHQi5yb3RhdGlvbmFsLCB0ZW1wKTsKICAgICAgYmoud2xhbWJkYS5hZGRTY2FsZWRWZWN0b3IoZGVsdGFsYW1iZGEsIHRlbXAsIGJqLndsYW1iZGEpOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlIHRoZSBkZW5vbWluYXRvciBwYXJ0IG9mIHRoZSBTUE9PSyBlcXVhdGlvbjogQyA9IEcqaW52KE0pKkcnICsgZXBzCiAgICAgKi8KCgogICAgY29tcHV0ZUMoKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbXB1dGVHaU1HdCgpICsgdGhpcy5lcHM7CiAgICB9CgogIH0KICBFcXVhdGlvbi5pZENvdW50ZXIgPSAwOwogIGNvbnN0IGlNZmkgPSBuZXcgVmVjMygpOwogIGNvbnN0IGlNZmogPSBuZXcgVmVjMygpOwogIGNvbnN0IGludklpX3ZtdWx0X3RhdWkgPSBuZXcgVmVjMygpOwogIGNvbnN0IGludklqX3ZtdWx0X3RhdWogPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYWRkVG9XbGFtYmRhX3RlbXAgPSBuZXcgVmVjMygpOwoKICAvKioKICAgKiBDb250YWN0L25vbi1wZW5ldHJhdGlvbiBjb25zdHJhaW50IGVxdWF0aW9uCiAgICovCiAgY2xhc3MgQ29udGFjdEVxdWF0aW9uIGV4dGVuZHMgRXF1YXRpb24gewogICAgLyoqCiAgICAgKiAiYm91bmNpbmVzcyI6IHUxID0gLWUqdTAKICAgICAqLwoKICAgIC8qKgogICAgICogV29ybGQtb3JpZW50ZWQgdmVjdG9yIHRoYXQgZ29lcyBmcm9tIHRoZSBjZW50ZXIgb2YgYmkgdG8gdGhlIGNvbnRhY3QgcG9pbnQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdvcmxkLW9yaWVudGVkIHZlY3RvciB0aGF0IHN0YXJ0cyBpbiBib2R5IGogcG9zaXRpb24gYW5kIGdvZXMgdG8gdGhlIGNvbnRhY3QgcG9pbnQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIENvbnRhY3Qgbm9ybWFsLCBwb2ludGluZyBvdXQgb2YgYm9keSBpLgogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG1heEZvcmNlKSB7CiAgICAgIGlmIChtYXhGb3JjZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgbWF4Rm9yY2UgPSAxZTY7CiAgICAgIH0KCiAgICAgIHN1cGVyKGJvZHlBLCBib2R5QiwgMCwgbWF4Rm9yY2UpOwogICAgICB0aGlzLnJlc3RpdHV0aW9uID0gMC4wOwogICAgICB0aGlzLnJpID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5yaiA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMubmkgPSBuZXcgVmVjMygpOwogICAgfQoKICAgIGNvbXB1dGVCKGgpIHsKICAgICAgY29uc3QgYSA9IHRoaXMuYTsKICAgICAgY29uc3QgYiA9IHRoaXMuYjsKICAgICAgY29uc3QgYmkgPSB0aGlzLmJpOwogICAgICBjb25zdCBiaiA9IHRoaXMuYmo7CiAgICAgIGNvbnN0IHJpID0gdGhpcy5yaTsKICAgICAgY29uc3QgcmogPSB0aGlzLnJqOwogICAgICBjb25zdCByaXhuID0gQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxOwogICAgICBjb25zdCByanhuID0gQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyOwogICAgICBjb25zdCB2aSA9IGJpLnZlbG9jaXR5OwogICAgICBjb25zdCB3aSA9IGJpLmFuZ3VsYXJWZWxvY2l0eTsKICAgICAgYmkuZm9yY2U7CiAgICAgIGJpLnRvcnF1ZTsKICAgICAgY29uc3QgdmogPSBiai52ZWxvY2l0eTsKICAgICAgY29uc3Qgd2ogPSBiai5hbmd1bGFyVmVsb2NpdHk7CiAgICAgIGJqLmZvcmNlOwogICAgICBiai50b3JxdWU7CiAgICAgIGNvbnN0IHBlbmV0cmF0aW9uVmVjID0gQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAzOwogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIGNvbnN0IG4gPSB0aGlzLm5pOyAvLyBDYWx1Y2xhdGUgY3Jvc3MgcHJvZHVjdHMKCiAgICAgIHJpLmNyb3NzKG4sIHJpeG4pOwogICAgICByai5jcm9zcyhuLCByanhuKTsgLy8gZyA9IHhqK3JqIC0oeGkrcmkpCiAgICAgIC8vIEcgPSBbIC1uaSAgLXJpeG4gIG5pICByanhuIF0KCiAgICAgIG4ubmVnYXRlKEdBLnNwYXRpYWwpOwogICAgICByaXhuLm5lZ2F0ZShHQS5yb3RhdGlvbmFsKTsKICAgICAgR0Iuc3BhdGlhbC5jb3B5KG4pOwogICAgICBHQi5yb3RhdGlvbmFsLmNvcHkocmp4bik7IC8vIENhbGN1bGF0ZSB0aGUgcGVuZXRyYXRpb24gdmVjdG9yCgogICAgICBwZW5ldHJhdGlvblZlYy5jb3B5KGJqLnBvc2l0aW9uKTsKICAgICAgcGVuZXRyYXRpb25WZWMudmFkZChyaiwgcGVuZXRyYXRpb25WZWMpOwogICAgICBwZW5ldHJhdGlvblZlYy52c3ViKGJpLnBvc2l0aW9uLCBwZW5ldHJhdGlvblZlYyk7CiAgICAgIHBlbmV0cmF0aW9uVmVjLnZzdWIocmksIHBlbmV0cmF0aW9uVmVjKTsKICAgICAgY29uc3QgZyA9IG4uZG90KHBlbmV0cmF0aW9uVmVjKTsgLy8gQ29tcHV0ZSBpdGVyYXRpb24KCiAgICAgIGNvbnN0IGVQbHVzT25lID0gdGhpcy5yZXN0aXR1dGlvbiArIDE7CiAgICAgIGNvbnN0IEdXID0gZVBsdXNPbmUgKiB2ai5kb3QobikgLSBlUGx1c09uZSAqIHZpLmRvdChuKSArIHdqLmRvdChyanhuKSAtIHdpLmRvdChyaXhuKTsKICAgICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTsKICAgICAgY29uc3QgQiA9IC1nICogYSAtIEdXICogYiAtIGggKiBHaU1mOwogICAgICByZXR1cm4gQjsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBjdXJyZW50IHJlbGF0aXZlIHZlbG9jaXR5IGluIHRoZSBjb250YWN0IHBvaW50LgogICAgICovCgoKICAgIGdldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWwoKSB7CiAgICAgIGNvbnN0IHZpID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfdmk7CiAgICAgIGNvbnN0IHZqID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfdmo7CiAgICAgIGNvbnN0IHhpID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfeGk7CiAgICAgIGNvbnN0IHhqID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfeGo7CiAgICAgIGNvbnN0IHJlbFZlbCA9IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3JlbFZlbDsKICAgICAgdGhpcy5iaS5wb3NpdGlvbi52YWRkKHRoaXMucmksIHhpKTsKICAgICAgdGhpcy5iai5wb3NpdGlvbi52YWRkKHRoaXMucmosIHhqKTsKICAgICAgdGhpcy5iaS5nZXRWZWxvY2l0eUF0V29ybGRQb2ludCh4aSwgdmkpOwogICAgICB0aGlzLmJqLmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHhqLCB2aik7CiAgICAgIHZpLnZzdWIodmosIHJlbFZlbCk7CiAgICAgIHJldHVybiB0aGlzLm5pLmRvdChyZWxWZWwpOwogICAgfQoKICB9CiAgY29uc3QgQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxID0gbmV3IFZlYzMoKTsgLy8gVGVtcCB2ZWN0b3JzCgogIGNvbnN0IENvbnRhY3RFcXVhdGlvbl9jb21wdXRlQl90ZW1wMiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAzID0gbmV3IFZlYzMoKTsKICBjb25zdCBDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF92aSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfdmogPSBuZXcgVmVjMygpOwogIGNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3hpID0gbmV3IFZlYzMoKTsKICBjb25zdCBDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF94aiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfcmVsVmVsID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogQ29ubmVjdHMgdHdvIGJvZGllcyBhdCBnaXZlbiBvZmZzZXQgcG9pbnRzLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IGJvZHlBID0gbmV3IEJvZHkoeyBtYXNzOiAxIH0pCiAgICogICAgIGNvbnN0IGJvZHlCID0gbmV3IEJvZHkoeyBtYXNzOiAxIH0pCiAgICogICAgIGJvZHlBLnBvc2l0aW9uLnNldCgtMSwgMCwgMCkKICAgKiAgICAgYm9keUIucG9zaXRpb24uc2V0KDEsIDAsIDApCiAgICogICAgIGJvZHlBLmFkZFNoYXBlKHNoYXBlQSkKICAgKiAgICAgYm9keUIuYWRkU2hhcGUoc2hhcGVCKQogICAqICAgICB3b3JsZC5hZGRCb2R5KGJvZHlBKQogICAqICAgICB3b3JsZC5hZGRCb2R5KGJvZHlCKQogICAqICAgICBjb25zdCBsb2NhbFBpdm90QSA9IG5ldyBWZWMzKDEsIDAsIDApCiAgICogICAgIGNvbnN0IGxvY2FsUGl2b3RCID0gbmV3IFZlYzMoLTEsIDAsIDApCiAgICogICAgIGNvbnN0IGNvbnN0cmFpbnQgPSBuZXcgUG9pbnRUb1BvaW50Q29uc3RyYWludChib2R5QSwgbG9jYWxQaXZvdEEsIGJvZHlCLCBsb2NhbFBpdm90QikKICAgKiAgICAgd29ybGQuYWRkQ29uc3RyYWludChjb25zdHJhaW50KQogICAqLwogIGNsYXNzIFBvaW50VG9Qb2ludENvbnN0cmFpbnQgZXh0ZW5kcyBDb25zdHJhaW50IHsKICAgIC8qKgogICAgICogUGl2b3QsIGRlZmluZWQgbG9jYWxseSBpbiBib2R5QS4KICAgICAqLwoKICAgIC8qKgogICAgICogUGl2b3QsIGRlZmluZWQgbG9jYWxseSBpbiBib2R5Qi4KICAgICAqLwoKICAgIC8qKgogICAgICogQHBhcmFtIHBpdm90QSBUaGUgcG9pbnQgcmVsYXRpdmUgdG8gdGhlIGNlbnRlciBvZiBtYXNzIG9mIGJvZHlBIHdoaWNoIGJvZHlBIGlzIGNvbnN0cmFpbmVkIHRvLgogICAgICogQHBhcmFtIGJvZHlCIEJvZHkgdGhhdCB3aWxsIGJlIGNvbnN0cmFpbmVkIGluIGEgc2ltaWxhciB3YXkgdG8gdGhlIHNhbWUgcG9pbnQgYXMgYm9keUEuIFdlIHdpbGwgdGhlcmVmb3JlIGdldCBhIGxpbmsgYmV0d2VlbiBib2R5QSBhbmQgYm9keUIuIElmIG5vdCBzcGVjaWZpZWQsIGJvZHlBIHdpbGwgYmUgY29uc3RyYWluZWQgdG8gYSBzdGF0aWMgcG9pbnQuCiAgICAgKiBAcGFyYW0gcGl2b3RCIFRoZSBwb2ludCByZWxhdGl2ZSB0byB0aGUgY2VudGVyIG9mIG1hc3Mgb2YgYm9keUIgd2hpY2ggYm9keUIgaXMgY29uc3RyYWluZWQgdG8uCiAgICAgKiBAcGFyYW0gbWF4Rm9yY2UgVGhlIG1heGltdW0gZm9yY2UgdGhhdCBzaG91bGQgYmUgYXBwbGllZCB0byBjb25zdHJhaW4gdGhlIGJvZGllcy4KICAgICAqLwogICAgY29uc3RydWN0b3IoYm9keUEsIHBpdm90QSwgYm9keUIsIHBpdm90QiwgbWF4Rm9yY2UpIHsKICAgICAgaWYgKHBpdm90QSA9PT0gdm9pZCAwKSB7CiAgICAgICAgcGl2b3RBID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgaWYgKHBpdm90QiA9PT0gdm9pZCAwKSB7CiAgICAgICAgcGl2b3RCID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgaWYgKG1heEZvcmNlID09PSB2b2lkIDApIHsKICAgICAgICBtYXhGb3JjZSA9IDFlNjsKICAgICAgfQoKICAgICAgc3VwZXIoYm9keUEsIGJvZHlCKTsKICAgICAgdGhpcy5waXZvdEEgPSBwaXZvdEEuY2xvbmUoKTsKICAgICAgdGhpcy5waXZvdEIgPSBwaXZvdEIuY2xvbmUoKTsKICAgICAgY29uc3QgeCA9IHRoaXMuZXF1YXRpb25YID0gbmV3IENvbnRhY3RFcXVhdGlvbihib2R5QSwgYm9keUIpOwogICAgICBjb25zdCB5ID0gdGhpcy5lcXVhdGlvblkgPSBuZXcgQ29udGFjdEVxdWF0aW9uKGJvZHlBLCBib2R5Qik7CiAgICAgIGNvbnN0IHogPSB0aGlzLmVxdWF0aW9uWiA9IG5ldyBDb250YWN0RXF1YXRpb24oYm9keUEsIGJvZHlCKTsgLy8gRXF1YXRpb25zIHRvIGJlIGZlZCB0byB0aGUgc29sdmVyCgogICAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKHgsIHksIHopOyAvLyBNYWtlIHRoZSBlcXVhdGlvbnMgYmlkaXJlY3Rpb25hbAoKICAgICAgeC5taW5Gb3JjZSA9IHkubWluRm9yY2UgPSB6Lm1pbkZvcmNlID0gLW1heEZvcmNlOwogICAgICB4Lm1heEZvcmNlID0geS5tYXhGb3JjZSA9IHoubWF4Rm9yY2UgPSBtYXhGb3JjZTsKICAgICAgeC5uaS5zZXQoMSwgMCwgMCk7CiAgICAgIHkubmkuc2V0KDAsIDEsIDApOwogICAgICB6Lm5pLnNldCgwLCAwLCAxKTsKICAgIH0KCiAgICB1cGRhdGUoKSB7CiAgICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTsKICAgICAgY29uc3QgYm9keUIgPSB0aGlzLmJvZHlCOwogICAgICBjb25zdCB4ID0gdGhpcy5lcXVhdGlvblg7CiAgICAgIGNvbnN0IHkgPSB0aGlzLmVxdWF0aW9uWTsKICAgICAgY29uc3QgeiA9IHRoaXMuZXF1YXRpb25aOyAvLyBSb3RhdGUgdGhlIHBpdm90cyB0byB3b3JsZCBzcGFjZQoKICAgICAgYm9keUEucXVhdGVybmlvbi52bXVsdCh0aGlzLnBpdm90QSwgeC5yaSk7CiAgICAgIGJvZHlCLnF1YXRlcm5pb24udm11bHQodGhpcy5waXZvdEIsIHgucmopOwogICAgICB5LnJpLmNvcHkoeC5yaSk7CiAgICAgIHkucmouY29weSh4LnJqKTsKICAgICAgei5yaS5jb3B5KHgucmkpOwogICAgICB6LnJqLmNvcHkoeC5yaik7CiAgICB9CgogIH0KCiAgLyoqCiAgICogQ29uZSBlcXVhdGlvbi4gV29ya3MgdG8ga2VlcCB0aGUgZ2l2ZW4gYm9keSB3b3JsZCB2ZWN0b3JzIGFsaWduZWQsIG9yIHRpbHRlZCB3aXRoaW4gYSBnaXZlbiBhbmdsZSBmcm9tIGVhY2ggb3RoZXIuCiAgICovCiAgY2xhc3MgQ29uZUVxdWF0aW9uIGV4dGVuZHMgRXF1YXRpb24gewogICAgLyoqCiAgICAgKiBMb2NhbCBheGlzIGluIEEKICAgICAqLwoKICAgIC8qKgogICAgICogTG9jYWwgYXhpcyBpbiBCCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSAiY29uZSBhbmdsZSIgdG8ga2VlcAogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgY29uc3QgbWF4Rm9yY2UgPSB0eXBlb2Ygb3B0aW9ucy5tYXhGb3JjZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm1heEZvcmNlIDogMWU2OwogICAgICBzdXBlcihib2R5QSwgYm9keUIsIC1tYXhGb3JjZSwgbWF4Rm9yY2UpOwogICAgICB0aGlzLmF4aXNBID0gb3B0aW9ucy5heGlzQSA/IG9wdGlvbnMuYXhpc0EuY2xvbmUoKSA6IG5ldyBWZWMzKDEsIDAsIDApOwogICAgICB0aGlzLmF4aXNCID0gb3B0aW9ucy5heGlzQiA/IG9wdGlvbnMuYXhpc0IuY2xvbmUoKSA6IG5ldyBWZWMzKDAsIDEsIDApOwogICAgICB0aGlzLmFuZ2xlID0gdHlwZW9mIG9wdGlvbnMuYW5nbGUgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5hbmdsZSA6IDA7CiAgICB9CgogICAgY29tcHV0ZUIoaCkgewogICAgICBjb25zdCBhID0gdGhpcy5hOwogICAgICBjb25zdCBiID0gdGhpcy5iOwogICAgICBjb25zdCBuaSA9IHRoaXMuYXhpc0E7CiAgICAgIGNvbnN0IG5qID0gdGhpcy5heGlzQjsKICAgICAgY29uc3Qgbml4bmogPSB0bXBWZWMxJDI7CiAgICAgIGNvbnN0IG5qeG5pID0gdG1wVmVjMiQyOwogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7IC8vIENhbHVjbGF0ZSBjcm9zcyBwcm9kdWN0cwoKICAgICAgbmkuY3Jvc3MobmosIG5peG5qKTsKICAgICAgbmouY3Jvc3MobmksIG5qeG5pKTsgLy8gVGhlIGFuZ2xlIGJldHdlZW4gdHdvIHZlY3RvciBpczoKICAgICAgLy8gY29zKHRoZXRhKSA9IGEgKiBiIC8gKGxlbmd0aChhKSAqIGxlbmd0aChiKSA9IHsgbGVuKGEpID0gbGVuKGIpID0gMSB9ID0gYSAqIGIKICAgICAgLy8gZyA9IGEgKiBiCiAgICAgIC8vIGdkb3QgPSAoYiB4IGEpICogd2kgKyAoYSB4IGIpICogd2oKICAgICAgLy8gRyA9IFswIGJ4YSAwIGF4Yl0KICAgICAgLy8gVyA9IFt2aSB3aSB2aiB3al0KCiAgICAgIEdBLnJvdGF0aW9uYWwuY29weShuanhuaSk7CiAgICAgIEdCLnJvdGF0aW9uYWwuY29weShuaXhuaik7CiAgICAgIGNvbnN0IGcgPSBNYXRoLmNvcyh0aGlzLmFuZ2xlKSAtIG5pLmRvdChuaik7CiAgICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKTsKICAgICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTsKICAgICAgY29uc3QgQiA9IC1nICogYSAtIEdXICogYiAtIGggKiBHaU1mOwogICAgICByZXR1cm4gQjsKICAgIH0KCiAgfQogIGNvbnN0IHRtcFZlYzEkMiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdG1wVmVjMiQyID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogUm90YXRpb25hbCBjb25zdHJhaW50LiBXb3JrcyB0byBrZWVwIHRoZSBsb2NhbCB2ZWN0b3JzIG9ydGhvZ29uYWwgdG8gZWFjaCBvdGhlciBpbiB3b3JsZCBzcGFjZS4KICAgKi8KICBjbGFzcyBSb3RhdGlvbmFsRXF1YXRpb24gZXh0ZW5kcyBFcXVhdGlvbiB7CiAgICAvKioKICAgICAqIFdvcmxkIG9yaWVudGVkIHJvdGF0aW9uYWwgYXhpcy4KICAgICAqLwoKICAgIC8qKgogICAgICogV29ybGQgb3JpZW50ZWQgcm90YXRpb25hbCBheGlzLgogICAgICovCgogICAgLyoqCiAgICAgKiBtYXhBbmdsZQogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgY29uc3QgbWF4Rm9yY2UgPSB0eXBlb2Ygb3B0aW9ucy5tYXhGb3JjZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm1heEZvcmNlIDogMWU2OwogICAgICBzdXBlcihib2R5QSwgYm9keUIsIC1tYXhGb3JjZSwgbWF4Rm9yY2UpOwogICAgICB0aGlzLmF4aXNBID0gb3B0aW9ucy5heGlzQSA/IG9wdGlvbnMuYXhpc0EuY2xvbmUoKSA6IG5ldyBWZWMzKDEsIDAsIDApOwogICAgICB0aGlzLmF4aXNCID0gb3B0aW9ucy5heGlzQiA/IG9wdGlvbnMuYXhpc0IuY2xvbmUoKSA6IG5ldyBWZWMzKDAsIDEsIDApOwogICAgICB0aGlzLm1heEFuZ2xlID0gTWF0aC5QSSAvIDI7CiAgICB9CgogICAgY29tcHV0ZUIoaCkgewogICAgICBjb25zdCBhID0gdGhpcy5hOwogICAgICBjb25zdCBiID0gdGhpcy5iOwogICAgICBjb25zdCBuaSA9IHRoaXMuYXhpc0E7CiAgICAgIGNvbnN0IG5qID0gdGhpcy5heGlzQjsKICAgICAgY29uc3Qgbml4bmogPSB0bXBWZWMxJDE7CiAgICAgIGNvbnN0IG5qeG5pID0gdG1wVmVjMiQxOwogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7IC8vIENhbHVjbGF0ZSBjcm9zcyBwcm9kdWN0cwoKICAgICAgbmkuY3Jvc3MobmosIG5peG5qKTsKICAgICAgbmouY3Jvc3MobmksIG5qeG5pKTsgLy8gZyA9IG5pICogbmoKICAgICAgLy8gZ2RvdCA9IChuaiB4IG5pKSAqIHdpICsgKG5pIHggbmopICogd2oKICAgICAgLy8gRyA9IFswIG5qeG5pIDAgbml4bmpdCiAgICAgIC8vIFcgPSBbdmkgd2kgdmogd2pdCgogICAgICBHQS5yb3RhdGlvbmFsLmNvcHkobmp4bmkpOwogICAgICBHQi5yb3RhdGlvbmFsLmNvcHkobml4bmopOwogICAgICBjb25zdCBnID0gTWF0aC5jb3ModGhpcy5tYXhBbmdsZSkgLSBuaS5kb3QobmopOwogICAgICBjb25zdCBHVyA9IHRoaXMuY29tcHV0ZUdXKCk7CiAgICAgIGNvbnN0IEdpTWYgPSB0aGlzLmNvbXB1dGVHaU1mKCk7CiAgICAgIGNvbnN0IEIgPSAtZyAqIGEgLSBHVyAqIGIgLSBoICogR2lNZjsKICAgICAgcmV0dXJuIEI7CiAgICB9CgogIH0KICBjb25zdCB0bXBWZWMxJDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFZlYzIkMSA9IG5ldyBWZWMzKCk7CgogIC8qKgogICAqIEEgQ29uZSBUd2lzdCBjb25zdHJhaW50LCB1c2VmdWwgZm9yIHJhZ2RvbGxzLgogICAqLwogIGNsYXNzIENvbmVUd2lzdENvbnN0cmFpbnQgZXh0ZW5kcyBQb2ludFRvUG9pbnRDb25zdHJhaW50IHsKICAgIC8qKgogICAgICogVGhlIGF4aXMgZGlyZWN0aW9uIGZvciB0aGUgY29uc3RyYWludCBvZiB0aGUgYm9keSBBLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgYXhpcyBkaXJlY3Rpb24gZm9yIHRoZSBjb25zdHJhaW50IG9mIHRoZSBib2R5IEIuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBhcGVydHVyZSBhbmdsZSBvZiB0aGUgY29uZS4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIHR3aXN0IGFuZ2xlIG9mIHRoZSBqb2ludC4KICAgICAqLwogICAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIGNvbnN0IG1heEZvcmNlID0gdHlwZW9mIG9wdGlvbnMubWF4Rm9yY2UgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5tYXhGb3JjZSA6IDFlNjsgLy8gU2V0IHBpdm90IHBvaW50IGluIGJldHdlZW4KCiAgICAgIGNvbnN0IHBpdm90QSA9IG9wdGlvbnMucGl2b3RBID8gb3B0aW9ucy5waXZvdEEuY2xvbmUoKSA6IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHBpdm90QiA9IG9wdGlvbnMucGl2b3RCID8gb3B0aW9ucy5waXZvdEIuY2xvbmUoKSA6IG5ldyBWZWMzKCk7CiAgICAgIHN1cGVyKGJvZHlBLCBwaXZvdEEsIGJvZHlCLCBwaXZvdEIsIG1heEZvcmNlKTsKICAgICAgdGhpcy5heGlzQSA9IG9wdGlvbnMuYXhpc0EgPyBvcHRpb25zLmF4aXNBLmNsb25lKCkgOiBuZXcgVmVjMygpOwogICAgICB0aGlzLmF4aXNCID0gb3B0aW9ucy5heGlzQiA/IG9wdGlvbnMuYXhpc0IuY2xvbmUoKSA6IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuY29sbGlkZUNvbm5lY3RlZCA9ICEhb3B0aW9ucy5jb2xsaWRlQ29ubmVjdGVkOwogICAgICB0aGlzLmFuZ2xlID0gdHlwZW9mIG9wdGlvbnMuYW5nbGUgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5hbmdsZSA6IDA7CiAgICAgIGNvbnN0IGMgPSB0aGlzLmNvbmVFcXVhdGlvbiA9IG5ldyBDb25lRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTsKICAgICAgY29uc3QgdCA9IHRoaXMudHdpc3RFcXVhdGlvbiA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTsKICAgICAgdGhpcy50d2lzdEFuZ2xlID0gdHlwZW9mIG9wdGlvbnMudHdpc3RBbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLnR3aXN0QW5nbGUgOiAwOyAvLyBNYWtlIHRoZSBjb25lIGVxdWF0aW9uIHB1c2ggdGhlIGJvZGllcyB0b3dhcmQgdGhlIGNvbmUgYXhpcywgbm90IG91dHdhcmQKCiAgICAgIGMubWF4Rm9yY2UgPSAwOwogICAgICBjLm1pbkZvcmNlID0gLW1heEZvcmNlOyAvLyBNYWtlIHRoZSB0d2lzdCBlcXVhdGlvbiBhZGQgdG9ycXVlIHRvd2FyZCB0aGUgaW5pdGlhbCBwb3NpdGlvbgoKICAgICAgdC5tYXhGb3JjZSA9IDA7CiAgICAgIHQubWluRm9yY2UgPSAtbWF4Rm9yY2U7CiAgICAgIHRoaXMuZXF1YXRpb25zLnB1c2goYywgdCk7CiAgICB9CgogICAgdXBkYXRlKCkgewogICAgICBjb25zdCBib2R5QSA9IHRoaXMuYm9keUE7CiAgICAgIGNvbnN0IGJvZHlCID0gdGhpcy5ib2R5QjsKICAgICAgY29uc3QgY29uZSA9IHRoaXMuY29uZUVxdWF0aW9uOwogICAgICBjb25zdCB0d2lzdCA9IHRoaXMudHdpc3RFcXVhdGlvbjsKICAgICAgc3VwZXIudXBkYXRlKCk7IC8vIFVwZGF0ZSB0aGUgYXhlcyB0byB0aGUgY29uZSBjb25zdHJhaW50CgogICAgICBib2R5QS52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy5heGlzQSwgY29uZS5heGlzQSk7CiAgICAgIGJvZHlCLnZlY3RvclRvV29ybGRGcmFtZSh0aGlzLmF4aXNCLCBjb25lLmF4aXNCKTsgLy8gVXBkYXRlIHRoZSB3b3JsZCBheGVzIGluIHRoZSB0d2lzdCBjb25zdHJhaW50CgogICAgICB0aGlzLmF4aXNBLnRhbmdlbnRzKHR3aXN0LmF4aXNBLCB0d2lzdC5heGlzQSk7CiAgICAgIGJvZHlBLnZlY3RvclRvV29ybGRGcmFtZSh0d2lzdC5heGlzQSwgdHdpc3QuYXhpc0EpOwogICAgICB0aGlzLmF4aXNCLnRhbmdlbnRzKHR3aXN0LmF4aXNCLCB0d2lzdC5heGlzQik7CiAgICAgIGJvZHlCLnZlY3RvclRvV29ybGRGcmFtZSh0d2lzdC5heGlzQiwgdHdpc3QuYXhpc0IpOwogICAgICBjb25lLmFuZ2xlID0gdGhpcy5hbmdsZTsKICAgICAgdHdpc3QubWF4QW5nbGUgPSB0aGlzLnR3aXN0QW5nbGU7CiAgICB9CgogIH0KICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CgogIC8qKgogICAqIENvbnN0cmFpbnMgdHdvIGJvZGllcyB0byBiZSBhdCBhIGNvbnN0YW50IGRpc3RhbmNlIGZyb20gZWFjaCBvdGhlcnMgY2VudGVyIG9mIG1hc3MuCiAgICovCiAgY2xhc3MgRGlzdGFuY2VDb25zdHJhaW50IGV4dGVuZHMgQ29uc3RyYWludCB7CiAgICAvKioKICAgICAqIFRoZSBkaXN0YW5jZSB0byBrZWVwLiBJZiB1bmRlZmluZWQsIGl0IHdpbGwgYmUgc2V0IHRvIHRoZSBjdXJyZW50IGRpc3RhbmNlIGJldHdlZW4gYm9keUEgYW5kIGJvZHlCCiAgICAgKi8KCiAgICAvKioKICAgICAqIEBwYXJhbSBkaXN0YW5jZSBUaGUgZGlzdGFuY2UgdG8ga2VlcC4gSWYgdW5kZWZpbmVkLCBpdCB3aWxsIGJlIHNldCB0byB0aGUgY3VycmVudCBkaXN0YW5jZSBiZXR3ZWVuIGJvZHlBIGFuZCBib2R5Qi4KICAgICAqIEBwYXJhbSBtYXhGb3JjZSBUaGUgbWF4aW11bSBmb3JjZSB0aGF0IHNob3VsZCBiZSBhcHBsaWVkIHRvIGNvbnN0cmFpbiB0aGUgYm9kaWVzLgogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIGRpc3RhbmNlLCBtYXhGb3JjZSkgewogICAgICBpZiAobWF4Rm9yY2UgPT09IHZvaWQgMCkgewogICAgICAgIG1heEZvcmNlID0gMWU2OwogICAgICB9CgogICAgICBzdXBlcihib2R5QSwgYm9keUIpOwoKICAgICAgaWYgKHR5cGVvZiBkaXN0YW5jZSA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICBkaXN0YW5jZSA9IGJvZHlBLnBvc2l0aW9uLmRpc3RhbmNlVG8oYm9keUIucG9zaXRpb24pOwogICAgICB9CgogICAgICB0aGlzLmRpc3RhbmNlID0gZGlzdGFuY2U7CiAgICAgIGNvbnN0IGVxID0gdGhpcy5kaXN0YW5jZUVxdWF0aW9uID0gbmV3IENvbnRhY3RFcXVhdGlvbihib2R5QSwgYm9keUIpOwogICAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKGVxKTsgLy8gTWFrZSBpdCBiaWRpcmVjdGlvbmFsCgogICAgICBlcS5taW5Gb3JjZSA9IC1tYXhGb3JjZTsKICAgICAgZXEubWF4Rm9yY2UgPSBtYXhGb3JjZTsKICAgIH0KICAgIC8qKgogICAgICogdXBkYXRlCiAgICAgKi8KCgogICAgdXBkYXRlKCkgewogICAgICBjb25zdCBib2R5QSA9IHRoaXMuYm9keUE7CiAgICAgIGNvbnN0IGJvZHlCID0gdGhpcy5ib2R5QjsKICAgICAgY29uc3QgZXEgPSB0aGlzLmRpc3RhbmNlRXF1YXRpb247CiAgICAgIGNvbnN0IGhhbGZEaXN0ID0gdGhpcy5kaXN0YW5jZSAqIDAuNTsKICAgICAgY29uc3Qgbm9ybWFsID0gZXEubmk7CiAgICAgIGJvZHlCLnBvc2l0aW9uLnZzdWIoYm9keUEucG9zaXRpb24sIG5vcm1hbCk7CiAgICAgIG5vcm1hbC5ub3JtYWxpemUoKTsKICAgICAgbm9ybWFsLnNjYWxlKGhhbGZEaXN0LCBlcS5yaSk7CiAgICAgIG5vcm1hbC5zY2FsZSgtaGFsZkRpc3QsIGVxLnJqKTsKICAgIH0KCiAgfQoKICAvKioKICAgKiBMb2NrIGNvbnN0cmFpbnQuIFdpbGwgcmVtb3ZlIGFsbCBkZWdyZWVzIG9mIGZyZWVkb20gYmV0d2VlbiB0aGUgYm9kaWVzLgogICAqLwogIGNsYXNzIExvY2tDb25zdHJhaW50IGV4dGVuZHMgUG9pbnRUb1BvaW50Q29uc3RyYWludCB7CiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgY29uc3QgbWF4Rm9yY2UgPSB0eXBlb2Ygb3B0aW9ucy5tYXhGb3JjZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm1heEZvcmNlIDogMWU2OyAvLyBTZXQgcGl2b3QgcG9pbnQgaW4gYmV0d2VlbgoKICAgICAgY29uc3QgcGl2b3RBID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgcGl2b3RCID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgaGFsZldheSA9IG5ldyBWZWMzKCk7CiAgICAgIGJvZHlBLnBvc2l0aW9uLnZhZGQoYm9keUIucG9zaXRpb24sIGhhbGZXYXkpOwogICAgICBoYWxmV2F5LnNjYWxlKDAuNSwgaGFsZldheSk7CiAgICAgIGJvZHlCLnBvaW50VG9Mb2NhbEZyYW1lKGhhbGZXYXksIHBpdm90Qik7CiAgICAgIGJvZHlBLnBvaW50VG9Mb2NhbEZyYW1lKGhhbGZXYXksIHBpdm90QSk7IC8vIFRoZSBwb2ludC10by1wb2ludCBjb25zdHJhaW50IHdpbGwga2VlcCBhIHBvaW50IHNoYXJlZCBiZXR3ZWVuIHRoZSBib2RpZXMKCiAgICAgIHN1cGVyKGJvZHlBLCBwaXZvdEEsIGJvZHlCLCBwaXZvdEIsIG1heEZvcmNlKTsgLy8gU3RvcmUgaW5pdGlhbCByb3RhdGlvbiBvZiB0aGUgYm9kaWVzIGFzIHVuaXQgdmVjdG9ycyBpbiB0aGUgbG9jYWwgYm9keSBzcGFjZXMKCiAgICAgIHRoaXMueEEgPSBib2R5QS52ZWN0b3JUb0xvY2FsRnJhbWUoVmVjMy5VTklUX1gpOwogICAgICB0aGlzLnhCID0gYm9keUIudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9YKTsKICAgICAgdGhpcy55QSA9IGJvZHlBLnZlY3RvclRvTG9jYWxGcmFtZShWZWMzLlVOSVRfWSk7CiAgICAgIHRoaXMueUIgPSBib2R5Qi52ZWN0b3JUb0xvY2FsRnJhbWUoVmVjMy5VTklUX1kpOwogICAgICB0aGlzLnpBID0gYm9keUEudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9aKTsKICAgICAgdGhpcy56QiA9IGJvZHlCLnZlY3RvclRvTG9jYWxGcmFtZShWZWMzLlVOSVRfWik7IC8vIC4uLmFuZCB0aGUgZm9sbG93aW5nIHJvdGF0aW9uYWwgZXF1YXRpb25zIHdpbGwga2VlcCBhbGwgcm90YXRpb25hbCBET0YncyBpbiBwbGFjZQoKICAgICAgY29uc3QgcjEgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjEgPSBuZXcgUm90YXRpb25hbEVxdWF0aW9uKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyk7CiAgICAgIGNvbnN0IHIyID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24yID0gbmV3IFJvdGF0aW9uYWxFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpOwogICAgICBjb25zdCByMyA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMyA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTsKICAgICAgdGhpcy5lcXVhdGlvbnMucHVzaChyMSwgcjIsIHIzKTsKICAgIH0KICAgIC8qKgogICAgICogdXBkYXRlCiAgICAgKi8KCgogICAgdXBkYXRlKCkgewogICAgICBjb25zdCBib2R5QSA9IHRoaXMuYm9keUE7CiAgICAgIGNvbnN0IGJvZHlCID0gdGhpcy5ib2R5QjsKICAgICAgdGhpcy5tb3RvckVxdWF0aW9uOwogICAgICBjb25zdCByMSA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMTsKICAgICAgY29uc3QgcjIgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjI7CiAgICAgIGNvbnN0IHIzID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24zOwogICAgICBzdXBlci51cGRhdGUoKTsgLy8gVGhlc2UgdmVjdG9yIHBhaXJzIG11c3QgYmUgb3J0aG9nb25hbAoKICAgICAgYm9keUEudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMueEEsIHIxLmF4aXNBKTsKICAgICAgYm9keUIudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMueUIsIHIxLmF4aXNCKTsKICAgICAgYm9keUEudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMueUEsIHIyLmF4aXNBKTsKICAgICAgYm9keUIudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMuekIsIHIyLmF4aXNCKTsKICAgICAgYm9keUEudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMuekEsIHIzLmF4aXNBKTsKICAgICAgYm9keUIudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMueEIsIHIzLmF4aXNCKTsKICAgIH0KCiAgfQogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogUm90YXRpb25hbCBtb3RvciBjb25zdHJhaW50LiBUcmllcyB0byBrZWVwIHRoZSByZWxhdGl2ZSBhbmd1bGFyIHZlbG9jaXR5IG9mIHRoZSBib2RpZXMgdG8gYSBnaXZlbiB2YWx1ZS4KICAgKi8KICBjbGFzcyBSb3RhdGlvbmFsTW90b3JFcXVhdGlvbiBleHRlbmRzIEVxdWF0aW9uIHsKICAgIC8qKgogICAgICogV29ybGQgb3JpZW50ZWQgcm90YXRpb25hbCBheGlzLgogICAgICovCgogICAgLyoqCiAgICAgKiBXb3JsZCBvcmllbnRlZCByb3RhdGlvbmFsIGF4aXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIE1vdG9yIHZlbG9jaXR5LgogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG1heEZvcmNlKSB7CiAgICAgIGlmIChtYXhGb3JjZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgbWF4Rm9yY2UgPSAxZTY7CiAgICAgIH0KCiAgICAgIHN1cGVyKGJvZHlBLCBib2R5QiwgLW1heEZvcmNlLCBtYXhGb3JjZSk7CiAgICAgIHRoaXMuYXhpc0EgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmF4aXNCID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy50YXJnZXRWZWxvY2l0eSA9IDA7CiAgICB9CgogICAgY29tcHV0ZUIoaCkgewogICAgICB0aGlzLmE7CiAgICAgIGNvbnN0IGIgPSB0aGlzLmI7CiAgICAgIHRoaXMuYmk7CiAgICAgIHRoaXMuYmo7CiAgICAgIGNvbnN0IGF4aXNBID0gdGhpcy5heGlzQTsKICAgICAgY29uc3QgYXhpc0IgPSB0aGlzLmF4aXNCOwogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7IC8vIGcgPSAwCiAgICAgIC8vIGdkb3QgPSBheGlzQSAqIHdpIC0gYXhpc0IgKiB3agogICAgICAvLyBnZG90ID0gRyAqIFcgPSBHICogW3ZpIHdpIHZqIHdqXQogICAgICAvLyA9PgogICAgICAvLyBHID0gWzAgYXhpc0EgMCAtYXhpc0JdCgogICAgICBHQS5yb3RhdGlvbmFsLmNvcHkoYXhpc0EpOwogICAgICBheGlzQi5uZWdhdGUoR0Iucm90YXRpb25hbCk7CiAgICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKSAtIHRoaXMudGFyZ2V0VmVsb2NpdHk7CiAgICAgIGNvbnN0IEdpTWYgPSB0aGlzLmNvbXB1dGVHaU1mKCk7CiAgICAgIGNvbnN0IEIgPSAtR1cgKiBiIC0gaCAqIEdpTWY7CiAgICAgIHJldHVybiBCOwogICAgfQoKICB9CgogIC8qKgogICAqIEhpbmdlIGNvbnN0cmFpbnQuIFRoaW5rIG9mIGl0IGFzIGEgZG9vciBoaW5nZS4gSXQgdHJpZXMgdG8ga2VlcCB0aGUgZG9vciBpbiB0aGUgY29ycmVjdCBwbGFjZSBhbmQgd2l0aCB0aGUgY29ycmVjdCBvcmllbnRhdGlvbi4KICAgKi8KICBjbGFzcyBIaW5nZUNvbnN0cmFpbnQgZXh0ZW5kcyBQb2ludFRvUG9pbnRDb25zdHJhaW50IHsKICAgIC8qKgogICAgICogUm90YXRpb24gYXhpcywgZGVmaW5lZCBsb2NhbGx5IGluIGJvZHlBLgogICAgICovCgogICAgLyoqCiAgICAgKiBSb3RhdGlvbiBheGlzLCBkZWZpbmVkIGxvY2FsbHkgaW4gYm9keUIuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBjb25zdCBtYXhGb3JjZSA9IHR5cGVvZiBvcHRpb25zLm1heEZvcmNlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubWF4Rm9yY2UgOiAxZTY7CiAgICAgIGNvbnN0IHBpdm90QSA9IG9wdGlvbnMucGl2b3RBID8gb3B0aW9ucy5waXZvdEEuY2xvbmUoKSA6IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHBpdm90QiA9IG9wdGlvbnMucGl2b3RCID8gb3B0aW9ucy5waXZvdEIuY2xvbmUoKSA6IG5ldyBWZWMzKCk7CiAgICAgIHN1cGVyKGJvZHlBLCBwaXZvdEEsIGJvZHlCLCBwaXZvdEIsIG1heEZvcmNlKTsKICAgICAgY29uc3QgYXhpc0EgPSB0aGlzLmF4aXNBID0gb3B0aW9ucy5heGlzQSA/IG9wdGlvbnMuYXhpc0EuY2xvbmUoKSA6IG5ldyBWZWMzKDEsIDAsIDApOwogICAgICBheGlzQS5ub3JtYWxpemUoKTsKICAgICAgY29uc3QgYXhpc0IgPSB0aGlzLmF4aXNCID0gb3B0aW9ucy5heGlzQiA/IG9wdGlvbnMuYXhpc0IuY2xvbmUoKSA6IG5ldyBWZWMzKDEsIDAsIDApOwogICAgICBheGlzQi5ub3JtYWxpemUoKTsKICAgICAgdGhpcy5jb2xsaWRlQ29ubmVjdGVkID0gISFvcHRpb25zLmNvbGxpZGVDb25uZWN0ZWQ7CiAgICAgIGNvbnN0IHJvdGF0aW9uYWwxID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24xID0gbmV3IFJvdGF0aW9uYWxFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpOwogICAgICBjb25zdCByb3RhdGlvbmFsMiA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMiA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTsKICAgICAgY29uc3QgbW90b3IgPSB0aGlzLm1vdG9yRXF1YXRpb24gPSBuZXcgUm90YXRpb25hbE1vdG9yRXF1YXRpb24oYm9keUEsIGJvZHlCLCBtYXhGb3JjZSk7CiAgICAgIG1vdG9yLmVuYWJsZWQgPSBmYWxzZTsgLy8gTm90IGVuYWJsZWQgYnkgZGVmYXVsdAogICAgICAvLyBFcXVhdGlvbnMgdG8gYmUgZmVkIHRvIHRoZSBzb2x2ZXIKCiAgICAgIHRoaXMuZXF1YXRpb25zLnB1c2gocm90YXRpb25hbDEsIHJvdGF0aW9uYWwyLCBtb3Rvcik7CiAgICB9CiAgICAvKioKICAgICAqIGVuYWJsZU1vdG9yCiAgICAgKi8KCgogICAgZW5hYmxlTW90b3IoKSB7CiAgICAgIHRoaXMubW90b3JFcXVhdGlvbi5lbmFibGVkID0gdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogZGlzYWJsZU1vdG9yCiAgICAgKi8KCgogICAgZGlzYWJsZU1vdG9yKCkgewogICAgICB0aGlzLm1vdG9yRXF1YXRpb24uZW5hYmxlZCA9IGZhbHNlOwogICAgfQogICAgLyoqCiAgICAgKiBzZXRNb3RvclNwZWVkCiAgICAgKi8KCgogICAgc2V0TW90b3JTcGVlZChzcGVlZCkgewogICAgICB0aGlzLm1vdG9yRXF1YXRpb24udGFyZ2V0VmVsb2NpdHkgPSBzcGVlZDsKICAgIH0KICAgIC8qKgogICAgICogc2V0TW90b3JNYXhGb3JjZQogICAgICovCgoKICAgIHNldE1vdG9yTWF4Rm9yY2UobWF4Rm9yY2UpIHsKICAgICAgdGhpcy5tb3RvckVxdWF0aW9uLm1heEZvcmNlID0gbWF4Rm9yY2U7CiAgICAgIHRoaXMubW90b3JFcXVhdGlvbi5taW5Gb3JjZSA9IC1tYXhGb3JjZTsKICAgIH0KICAgIC8qKgogICAgICogdXBkYXRlCiAgICAgKi8KCgogICAgdXBkYXRlKCkgewogICAgICBjb25zdCBib2R5QSA9IHRoaXMuYm9keUE7CiAgICAgIGNvbnN0IGJvZHlCID0gdGhpcy5ib2R5QjsKICAgICAgY29uc3QgbW90b3IgPSB0aGlzLm1vdG9yRXF1YXRpb247CiAgICAgIGNvbnN0IHIxID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24xOwogICAgICBjb25zdCByMiA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMjsKICAgICAgY29uc3Qgd29ybGRBeGlzQSA9IEhpbmdlQ29uc3RyYWludF91cGRhdGVfdG1wVmVjMTsKICAgICAgY29uc3Qgd29ybGRBeGlzQiA9IEhpbmdlQ29uc3RyYWludF91cGRhdGVfdG1wVmVjMjsKICAgICAgY29uc3QgYXhpc0EgPSB0aGlzLmF4aXNBOwogICAgICBjb25zdCBheGlzQiA9IHRoaXMuYXhpc0I7CiAgICAgIHN1cGVyLnVwZGF0ZSgpOyAvLyBHZXQgd29ybGQgYXhlcwoKICAgICAgYm9keUEucXVhdGVybmlvbi52bXVsdChheGlzQSwgd29ybGRBeGlzQSk7CiAgICAgIGJvZHlCLnF1YXRlcm5pb24udm11bHQoYXhpc0IsIHdvcmxkQXhpc0IpOwogICAgICB3b3JsZEF4aXNBLnRhbmdlbnRzKHIxLmF4aXNBLCByMi5heGlzQSk7CiAgICAgIHIxLmF4aXNCLmNvcHkod29ybGRBeGlzQik7CiAgICAgIHIyLmF4aXNCLmNvcHkod29ybGRBeGlzQik7CgogICAgICBpZiAodGhpcy5tb3RvckVxdWF0aW9uLmVuYWJsZWQpIHsKICAgICAgICBib2R5QS5xdWF0ZXJuaW9uLnZtdWx0KHRoaXMuYXhpc0EsIG1vdG9yLmF4aXNBKTsKICAgICAgICBib2R5Qi5xdWF0ZXJuaW9uLnZtdWx0KHRoaXMuYXhpc0IsIG1vdG9yLmF4aXNCKTsKICAgICAgfQogICAgfQoKICB9CiAgY29uc3QgSGluZ2VDb25zdHJhaW50X3VwZGF0ZV90bXBWZWMxID0gbmV3IFZlYzMoKTsKICBjb25zdCBIaW5nZUNvbnN0cmFpbnRfdXBkYXRlX3RtcFZlYzIgPSBuZXcgVmVjMygpOwoKICAvKioKICAgKiBDb25zdHJhaW5zIHRoZSBzbGlwcGluZyBpbiBhIGNvbnRhY3QgYWxvbmcgYSB0YW5nZW50CiAgICovCiAgY2xhc3MgRnJpY3Rpb25FcXVhdGlvbiBleHRlbmRzIEVxdWF0aW9uIHsKICAgIC8vIFRhbmdlbnQKCiAgICAvKioKICAgICAqIEBwYXJhbSBzbGlwRm9yY2Ugc2hvdWxkIGJlICstRl9mcmljdGlvbiA9ICstbXUgKiBGX25vcm1hbCA9ICstbXUgKiBtICogZwogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIHNsaXBGb3JjZSkgewogICAgICBzdXBlcihib2R5QSwgYm9keUIsIC1zbGlwRm9yY2UsIHNsaXBGb3JjZSk7CiAgICAgIHRoaXMucmkgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnJqID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy50ID0gbmV3IFZlYzMoKTsKICAgIH0KCiAgICBjb21wdXRlQihoKSB7CiAgICAgIHRoaXMuYTsKICAgICAgY29uc3QgYiA9IHRoaXMuYjsKICAgICAgdGhpcy5iaTsKICAgICAgdGhpcy5iajsKICAgICAgY29uc3QgcmkgPSB0aGlzLnJpOwogICAgICBjb25zdCByaiA9IHRoaXMucmo7CiAgICAgIGNvbnN0IHJpeHQgPSBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxOwogICAgICBjb25zdCByanh0ID0gRnJpY3Rpb25FcXVhdGlvbl9jb21wdXRlQl90ZW1wMjsKICAgICAgY29uc3QgdCA9IHRoaXMudDsgLy8gQ2FsdWNsYXRlIGNyb3NzIHByb2R1Y3RzCgogICAgICByaS5jcm9zcyh0LCByaXh0KTsKICAgICAgcmouY3Jvc3ModCwgcmp4dCk7IC8vIEcgPSBbLXQgLXJpeHQgdCByanh0XQogICAgICAvLyBBbmQgcmVtZW1iZXIsIHRoaXMgaXMgYSBwdXJlIHZlbG9jaXR5IGNvbnN0cmFpbnQsIGcgaXMgYWx3YXlzIHplcm8hCgogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIHQubmVnYXRlKEdBLnNwYXRpYWwpOwogICAgICByaXh0Lm5lZ2F0ZShHQS5yb3RhdGlvbmFsKTsKICAgICAgR0Iuc3BhdGlhbC5jb3B5KHQpOwogICAgICBHQi5yb3RhdGlvbmFsLmNvcHkocmp4dCk7CiAgICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKTsKICAgICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTsKICAgICAgY29uc3QgQiA9IC1HVyAqIGIgLSBoICogR2lNZjsKICAgICAgcmV0dXJuIEI7CiAgICB9CgogIH0KICBjb25zdCBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxID0gbmV3IFZlYzMoKTsKICBjb25zdCBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogRGVmaW5lcyB3aGF0IGhhcHBlbnMgd2hlbiB0d28gbWF0ZXJpYWxzIG1lZXQuCiAgICogQHRvZG8gUmVmYWN0b3IgbWF0ZXJpYWxzIHRvIG1hdGVyaWFsQSBhbmQgbWF0ZXJpYWxCCiAgICovCiAgY2xhc3MgQ29udGFjdE1hdGVyaWFsIHsKICAgIC8qKgogICAgICogSWRlbnRpZmllciBvZiB0aGlzIG1hdGVyaWFsLgogICAgICovCgogICAgLyoqCiAgICAgKiBQYXJ0aWNpcGF0aW5nIG1hdGVyaWFscy4KICAgICAqLwoKICAgIC8qKgogICAgICogRnJpY3Rpb24gY29lZmZpY2llbnQuCiAgICAgKiBAZGVmYXVsdCAwLjMKICAgICAqLwoKICAgIC8qKgogICAgICogUmVzdGl0dXRpb24gY29lZmZpY2llbnQuCiAgICAgKiBAZGVmYXVsdCAwLjMKICAgICAqLwoKICAgIC8qKgogICAgICogU3RpZmZuZXNzIG9mIHRoZSBwcm9kdWNlZCBjb250YWN0IGVxdWF0aW9ucy4KICAgICAqIEBkZWZhdWx0IDFlNwogICAgICovCgogICAgLyoqCiAgICAgKiBSZWxheGF0aW9uIHRpbWUgb2YgdGhlIHByb2R1Y2VkIGNvbnRhY3QgZXF1YXRpb25zLgogICAgICogQGRlZmF1bHQgMwogICAgICovCgogICAgLyoqCiAgICAgKiBTdGlmZm5lc3Mgb2YgdGhlIHByb2R1Y2VkIGZyaWN0aW9uIGVxdWF0aW9ucy4KICAgICAqIEBkZWZhdWx0IDFlNwogICAgICovCgogICAgLyoqCiAgICAgKiBSZWxheGF0aW9uIHRpbWUgb2YgdGhlIHByb2R1Y2VkIGZyaWN0aW9uIGVxdWF0aW9ucwogICAgICogQGRlZmF1bHQgMwogICAgICovCiAgICBjb25zdHJ1Y3RvcihtMSwgbTIsIG9wdGlvbnMpIHsKICAgICAgb3B0aW9ucyA9IFV0aWxzLmRlZmF1bHRzKG9wdGlvbnMsIHsKICAgICAgICBmcmljdGlvbjogMC4zLAogICAgICAgIHJlc3RpdHV0aW9uOiAwLjMsCiAgICAgICAgY29udGFjdEVxdWF0aW9uU3RpZmZuZXNzOiAxZTcsCiAgICAgICAgY29udGFjdEVxdWF0aW9uUmVsYXhhdGlvbjogMywKICAgICAgICBmcmljdGlvbkVxdWF0aW9uU3RpZmZuZXNzOiAxZTcsCiAgICAgICAgZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb246IDMKICAgICAgfSk7CiAgICAgIHRoaXMuaWQgPSBDb250YWN0TWF0ZXJpYWwuaWRDb3VudGVyKys7CiAgICAgIHRoaXMubWF0ZXJpYWxzID0gW20xLCBtMl07CiAgICAgIHRoaXMuZnJpY3Rpb24gPSBvcHRpb25zLmZyaWN0aW9uOwogICAgICB0aGlzLnJlc3RpdHV0aW9uID0gb3B0aW9ucy5yZXN0aXR1dGlvbjsKICAgICAgdGhpcy5jb250YWN0RXF1YXRpb25TdGlmZm5lc3MgPSBvcHRpb25zLmNvbnRhY3RFcXVhdGlvblN0aWZmbmVzczsKICAgICAgdGhpcy5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uID0gb3B0aW9ucy5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uOwogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3MgPSBvcHRpb25zLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3M7CiAgICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb24gPSBvcHRpb25zLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uOwogICAgfQoKICB9CiAgQ29udGFjdE1hdGVyaWFsLmlkQ291bnRlciA9IDA7CgogIC8qKgogICAqIERlZmluZXMgYSBwaHlzaWNzIG1hdGVyaWFsLgogICAqLwogIGNsYXNzIE1hdGVyaWFsIHsKICAgIC8qKgogICAgICogTWF0ZXJpYWwgbmFtZS4KICAgICAqIElmIG9wdGlvbnMgaXMgYSBzdHJpbmcsIG5hbWUgd2lsbCBiZSBzZXQgdG8gdGhhdCBzdHJpbmcuCiAgICAgKiBAdG9kbyBEZXByZWNhdGUgdGhpcwogICAgICovCgogICAgLyoqIE1hdGVyaWFsIGlkLiAqLwoKICAgIC8qKgogICAgICogRnJpY3Rpb24gZm9yIHRoaXMgbWF0ZXJpYWwuCiAgICAgKiBJZiBub24tbmVnYXRpdmUsIGl0IHdpbGwgYmUgdXNlZCBpbnN0ZWFkIG9mIHRoZSBmcmljdGlvbiBnaXZlbiBieSBDb250YWN0TWF0ZXJpYWxzLiBJZiB0aGVyZSdzIG5vIG1hdGNoaW5nIENvbnRhY3RNYXRlcmlhbCwgdGhlIHZhbHVlIGZyb20gYGRlZmF1bHRDb250YWN0TWF0ZXJpYWxgIGluIHRoZSBXb3JsZCB3aWxsIGJlIHVzZWQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFJlc3RpdHV0aW9uIGZvciB0aGlzIG1hdGVyaWFsLgogICAgICogSWYgbm9uLW5lZ2F0aXZlLCBpdCB3aWxsIGJlIHVzZWQgaW5zdGVhZCBvZiB0aGUgcmVzdGl0dXRpb24gZ2l2ZW4gYnkgQ29udGFjdE1hdGVyaWFscy4gSWYgdGhlcmUncyBubyBtYXRjaGluZyBDb250YWN0TWF0ZXJpYWwsIHRoZSB2YWx1ZSBmcm9tIGBkZWZhdWx0Q29udGFjdE1hdGVyaWFsYCBpbiB0aGUgV29ybGQgd2lsbCBiZSB1c2VkLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIGxldCBuYW1lID0gJyc7IC8vIEJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IGZpeAoKICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJykgewogICAgICAgIC8vY29uc29sZS53YXJuKGBQYXNzaW5nIGEgc3RyaW5nIHRvIE1hdGVyaWFsT3B0aW9ucyBpcyBkZXByZWNhdGVkLCBhbmQgaGFzIG5vIGVmZmVjdGApCiAgICAgICAgbmFtZSA9IG9wdGlvbnM7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICB0aGlzLm5hbWUgPSBuYW1lOwogICAgICB0aGlzLmlkID0gTWF0ZXJpYWwuaWRDb3VudGVyKys7CiAgICAgIHRoaXMuZnJpY3Rpb24gPSB0eXBlb2Ygb3B0aW9ucy5mcmljdGlvbiAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmZyaWN0aW9uIDogLTE7CiAgICAgIHRoaXMucmVzdGl0dXRpb24gPSB0eXBlb2Ygb3B0aW9ucy5yZXN0aXR1dGlvbiAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLnJlc3RpdHV0aW9uIDogLTE7CiAgICB9CgogIH0KICBNYXRlcmlhbC5pZENvdW50ZXIgPSAwOwoKICAvKioKICAgKiBBIHNwcmluZywgY29ubmVjdGluZyB0d28gYm9kaWVzLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IHNwcmluZyA9IG5ldyBTcHJpbmcoYm94Qm9keSwgc3BoZXJlQm9keSwgewogICAqICAgICAgIHJlc3RMZW5ndGg6IDAsCiAgICogICAgICAgc3RpZmZuZXNzOiA1MCwKICAgKiAgICAgICBkYW1waW5nOiAxLAogICAqICAgICB9KQogICAqCiAgICogICAgIC8vIENvbXB1dGUgdGhlIGZvcmNlIGFmdGVyIGVhY2ggc3RlcAogICAqICAgICB3b3JsZC5hZGRFdmVudExpc3RlbmVyKCdwb3N0U3RlcCcsIChldmVudCkgPT4gewogICAqICAgICAgIHNwcmluZy5hcHBseUZvcmNlKCkKICAgKiAgICAgfSkKICAgKi8KICBjbGFzcyBTcHJpbmcgewogICAgLyoqCiAgICAgKiBSZXN0IGxlbmd0aCBvZiB0aGUgc3ByaW5nLiBBIG51bWJlciA+IDAuCiAgICAgKiBAZGVmYXVsdCAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIFN0aWZmbmVzcyBvZiB0aGUgc3ByaW5nLiBBIG51bWJlciA+PSAwLgogICAgICogQGRlZmF1bHQgMTAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIERhbXBpbmcgb2YgdGhlIHNwcmluZy4gQSBudW1iZXIgPj0gMC4KICAgICAqIEBkZWZhdWx0IDEKICAgICAqLwoKICAgIC8qKgogICAgICogRmlyc3QgY29ubmVjdGVkIGJvZHkuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNlY29uZCBjb25uZWN0ZWQgYm9keS4KICAgICAqLwoKICAgIC8qKgogICAgICogQW5jaG9yIGZvciBib2R5QSBpbiBsb2NhbCBib2R5QSBjb29yZGluYXRlcy4KICAgICAqIFdoZXJlIHRvIGhvb2sgdGhlIHNwcmluZyB0byBib2R5IEEsIGluIGxvY2FsIGJvZHkgY29vcmRpbmF0ZXMuCiAgICAgKiBAZGVmYXVsdCBuZXcgVmVjMygpCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFuY2hvciBmb3IgYm9keUIgaW4gbG9jYWwgYm9keUIgY29vcmRpbmF0ZXMuCiAgICAgKiBXaGVyZSB0byBob29rIHRoZSBzcHJpbmcgdG8gYm9keSBCLCBpbiBsb2NhbCBib2R5IGNvb3JkaW5hdGVzLgogICAgICogQGRlZmF1bHQgbmV3IFZlYzMoKQogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgdGhpcy5yZXN0TGVuZ3RoID0gdHlwZW9mIG9wdGlvbnMucmVzdExlbmd0aCA9PT0gJ251bWJlcicgPyBvcHRpb25zLnJlc3RMZW5ndGggOiAxOwogICAgICB0aGlzLnN0aWZmbmVzcyA9IG9wdGlvbnMuc3RpZmZuZXNzIHx8IDEwMDsKICAgICAgdGhpcy5kYW1waW5nID0gb3B0aW9ucy5kYW1waW5nIHx8IDE7CiAgICAgIHRoaXMuYm9keUEgPSBib2R5QTsKICAgICAgdGhpcy5ib2R5QiA9IGJvZHlCOwogICAgICB0aGlzLmxvY2FsQW5jaG9yQSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMubG9jYWxBbmNob3JCID0gbmV3IFZlYzMoKTsKCiAgICAgIGlmIChvcHRpb25zLmxvY2FsQW5jaG9yQSkgewogICAgICAgIHRoaXMubG9jYWxBbmNob3JBLmNvcHkob3B0aW9ucy5sb2NhbEFuY2hvckEpOwogICAgICB9CgogICAgICBpZiAob3B0aW9ucy5sb2NhbEFuY2hvckIpIHsKICAgICAgICB0aGlzLmxvY2FsQW5jaG9yQi5jb3B5KG9wdGlvbnMubG9jYWxBbmNob3JCKTsKICAgICAgfQoKICAgICAgaWYgKG9wdGlvbnMud29ybGRBbmNob3JBKSB7CiAgICAgICAgdGhpcy5zZXRXb3JsZEFuY2hvckEob3B0aW9ucy53b3JsZEFuY2hvckEpOwogICAgICB9CgogICAgICBpZiAob3B0aW9ucy53b3JsZEFuY2hvckIpIHsKICAgICAgICB0aGlzLnNldFdvcmxkQW5jaG9yQihvcHRpb25zLndvcmxkQW5jaG9yQik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSBhbmNob3IgcG9pbnQgb24gYm9keSBBLCB1c2luZyB3b3JsZCBjb29yZGluYXRlcy4KICAgICAqLwoKCiAgICBzZXRXb3JsZEFuY2hvckEod29ybGRBbmNob3JBKSB7CiAgICAgIHRoaXMuYm9keUEucG9pbnRUb0xvY2FsRnJhbWUod29ybGRBbmNob3JBLCB0aGlzLmxvY2FsQW5jaG9yQSk7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgYW5jaG9yIHBvaW50IG9uIGJvZHkgQiwgdXNpbmcgd29ybGQgY29vcmRpbmF0ZXMuCiAgICAgKi8KCgogICAgc2V0V29ybGRBbmNob3JCKHdvcmxkQW5jaG9yQikgewogICAgICB0aGlzLmJvZHlCLnBvaW50VG9Mb2NhbEZyYW1lKHdvcmxkQW5jaG9yQiwgdGhpcy5sb2NhbEFuY2hvckIpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGFuY2hvciBwb2ludCBvbiBib2R5IEEsIGluIHdvcmxkIGNvb3JkaW5hdGVzLgogICAgICogQHBhcmFtIHJlc3VsdCBUaGUgdmVjdG9yIHRvIHN0b3JlIHRoZSByZXN1bHQgaW4uCiAgICAgKi8KCgogICAgZ2V0V29ybGRBbmNob3JBKHJlc3VsdCkgewogICAgICB0aGlzLmJvZHlBLnBvaW50VG9Xb3JsZEZyYW1lKHRoaXMubG9jYWxBbmNob3JBLCByZXN1bHQpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGFuY2hvciBwb2ludCBvbiBib2R5IEIsIGluIHdvcmxkIGNvb3JkaW5hdGVzLgogICAgICogQHBhcmFtIHJlc3VsdCBUaGUgdmVjdG9yIHRvIHN0b3JlIHRoZSByZXN1bHQgaW4uCiAgICAgKi8KCgogICAgZ2V0V29ybGRBbmNob3JCKHJlc3VsdCkgewogICAgICB0aGlzLmJvZHlCLnBvaW50VG9Xb3JsZEZyYW1lKHRoaXMubG9jYWxBbmNob3JCLCByZXN1bHQpOwogICAgfQogICAgLyoqCiAgICAgKiBBcHBseSB0aGUgc3ByaW5nIGZvcmNlIHRvIHRoZSBjb25uZWN0ZWQgYm9kaWVzLgogICAgICovCgoKICAgIGFwcGx5Rm9yY2UoKSB7CiAgICAgIGNvbnN0IGsgPSB0aGlzLnN0aWZmbmVzczsKICAgICAgY29uc3QgZCA9IHRoaXMuZGFtcGluZzsKICAgICAgY29uc3QgbCA9IHRoaXMucmVzdExlbmd0aDsKICAgICAgY29uc3QgYm9keUEgPSB0aGlzLmJvZHlBOwogICAgICBjb25zdCBib2R5QiA9IHRoaXMuYm9keUI7CiAgICAgIGNvbnN0IHIgPSBhcHBseUZvcmNlX3I7CiAgICAgIGNvbnN0IHJfdW5pdCA9IGFwcGx5Rm9yY2Vfcl91bml0OwogICAgICBjb25zdCB1ID0gYXBwbHlGb3JjZV91OwogICAgICBjb25zdCBmID0gYXBwbHlGb3JjZV9mOwogICAgICBjb25zdCB0bXAgPSBhcHBseUZvcmNlX3RtcDsKICAgICAgY29uc3Qgd29ybGRBbmNob3JBID0gYXBwbHlGb3JjZV93b3JsZEFuY2hvckE7CiAgICAgIGNvbnN0IHdvcmxkQW5jaG9yQiA9IGFwcGx5Rm9yY2Vfd29ybGRBbmNob3JCOwogICAgICBjb25zdCByaSA9IGFwcGx5Rm9yY2Vfcmk7CiAgICAgIGNvbnN0IHJqID0gYXBwbHlGb3JjZV9yajsKICAgICAgY29uc3QgcmlfeF9mID0gYXBwbHlGb3JjZV9yaV94X2Y7CiAgICAgIGNvbnN0IHJqX3hfZiA9IGFwcGx5Rm9yY2VfcmpfeF9mOyAvLyBHZXQgd29ybGQgYW5jaG9ycwoKICAgICAgdGhpcy5nZXRXb3JsZEFuY2hvckEod29ybGRBbmNob3JBKTsKICAgICAgdGhpcy5nZXRXb3JsZEFuY2hvckIod29ybGRBbmNob3JCKTsgLy8gR2V0IG9mZnNldCBwb2ludHMKCiAgICAgIHdvcmxkQW5jaG9yQS52c3ViKGJvZHlBLnBvc2l0aW9uLCByaSk7CiAgICAgIHdvcmxkQW5jaG9yQi52c3ViKGJvZHlCLnBvc2l0aW9uLCByaik7IC8vIENvbXB1dGUgZGlzdGFuY2UgdmVjdG9yIGJldHdlZW4gd29ybGQgYW5jaG9yIHBvaW50cwoKICAgICAgd29ybGRBbmNob3JCLnZzdWIod29ybGRBbmNob3JBLCByKTsKICAgICAgY29uc3QgcmxlbiA9IHIubGVuZ3RoKCk7CiAgICAgIHJfdW5pdC5jb3B5KHIpOwogICAgICByX3VuaXQubm9ybWFsaXplKCk7IC8vIENvbXB1dGUgcmVsYXRpdmUgdmVsb2NpdHkgb2YgdGhlIGFuY2hvciBwb2ludHMsIHUKCiAgICAgIGJvZHlCLnZlbG9jaXR5LnZzdWIoYm9keUEudmVsb2NpdHksIHUpOyAvLyBBZGQgcm90YXRpb25hbCB2ZWxvY2l0eQoKICAgICAgYm9keUIuYW5ndWxhclZlbG9jaXR5LmNyb3NzKHJqLCB0bXApOwogICAgICB1LnZhZGQodG1wLCB1KTsKICAgICAgYm9keUEuYW5ndWxhclZlbG9jaXR5LmNyb3NzKHJpLCB0bXApOwogICAgICB1LnZzdWIodG1wLCB1KTsgLy8gRiA9IC0gayAqICggeCAtIEwgKSAtIEQgKiAoIHUgKQoKICAgICAgcl91bml0LnNjYWxlKC1rICogKHJsZW4gLSBsKSAtIGQgKiB1LmRvdChyX3VuaXQpLCBmKTsgLy8gQWRkIGZvcmNlcyB0byBib2RpZXMKCiAgICAgIGJvZHlBLmZvcmNlLnZzdWIoZiwgYm9keUEuZm9yY2UpOwogICAgICBib2R5Qi5mb3JjZS52YWRkKGYsIGJvZHlCLmZvcmNlKTsgLy8gQW5ndWxhciBmb3JjZQoKICAgICAgcmkuY3Jvc3MoZiwgcmlfeF9mKTsKICAgICAgcmouY3Jvc3MoZiwgcmpfeF9mKTsKICAgICAgYm9keUEudG9ycXVlLnZzdWIocmlfeF9mLCBib2R5QS50b3JxdWUpOwogICAgICBib2R5Qi50b3JxdWUudmFkZChyal94X2YsIGJvZHlCLnRvcnF1ZSk7CiAgICB9CgogIH0KICBjb25zdCBhcHBseUZvcmNlX3IgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2Vfcl91bml0ID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3UgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2VfZiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXBwbHlGb3JjZV93b3JsZEFuY2hvckEgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2Vfd29ybGRBbmNob3JCID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3JpID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3JqID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3JpX3hfZiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXBwbHlGb3JjZV9yal94X2YgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2VfdG1wID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogV2hlZWxJbmZvCiAgICovCiAgY2xhc3MgV2hlZWxJbmZvIHsKICAgIC8qKgogICAgICogTWF4IHRyYXZlbCBkaXN0YW5jZSBvZiB0aGUgc3VzcGVuc2lvbiwgaW4gbWV0ZXJzLgogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBTcGVlZCB0byBhcHBseSB0byB0aGUgd2hlZWwgcm90YXRpb24gd2hlbiB0aGUgd2hlZWwgaXMgc2xpZGluZy4KICAgICAqIEBkZWZhdWx0IC0wLjEKICAgICAqLwoKICAgIC8qKgogICAgICogSWYgdGhlIGN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQgc2hvdWxkIGJlIHVzZWQuCiAgICAgKiBAZGVmYXVsdCBmYWxzZQogICAgICovCgogICAgLyoqCiAgICAgKiBzbGlkaW5nCiAgICAgKi8KCiAgICAvKioKICAgICAqIENvbm5lY3Rpb24gcG9pbnQsIGRlZmluZWQgbG9jYWxseSBpbiB0aGUgY2hhc3NpcyBib2R5IGZyYW1lLgogICAgICovCgogICAgLyoqCiAgICAgKiBjaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQKICAgICAqLwoKICAgIC8qKgogICAgICogZGlyZWN0aW9uTG9jYWwKICAgICAqLwoKICAgIC8qKgogICAgICogZGlyZWN0aW9uV29ybGQKICAgICAqLwoKICAgIC8qKgogICAgICogYXhsZUxvY2FsCiAgICAgKi8KCiAgICAvKioKICAgICAqIGF4bGVXb3JsZAogICAgICovCgogICAgLyoqCiAgICAgKiBzdXNwZW5zaW9uUmVzdExlbmd0aAogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBzdXNwZW5zaW9uTWF4TGVuZ3RoCiAgICAgKiBAZGVmYXVsdCAyCiAgICAgKi8KCiAgICAvKioKICAgICAqIHJhZGl1cwogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBzdXNwZW5zaW9uU3RpZmZuZXNzCiAgICAgKiBAZGVmYXVsdCAxMDAKICAgICAqLwoKICAgIC8qKgogICAgICogZGFtcGluZ0NvbXByZXNzaW9uCiAgICAgKiBAZGVmYXVsdCAxMAogICAgICovCgogICAgLyoqCiAgICAgKiBkYW1waW5nUmVsYXhhdGlvbgogICAgICogQGRlZmF1bHQgMTAKICAgICAqLwoKICAgIC8qKgogICAgICogZnJpY3Rpb25TbGlwCiAgICAgKiBAZGVmYXVsdCAxMC41CiAgICAgKi8KCiAgICAvKiogZm9yd2FyZEFjY2VsZXJhdGlvbiAqLwoKICAgIC8qKiBzaWRlQWNjZWxlcmF0aW9uICovCgogICAgLyoqCiAgICAgKiBzdGVlcmluZwogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiBSb3RhdGlvbiB2YWx1ZSwgaW4gcmFkaWFucy4KICAgICAqIEBkZWZhdWx0IDAKICAgICAqLwoKICAgIC8qKgogICAgICogZGVsdGFSb3RhdGlvbgogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiByb2xsSW5mbHVlbmNlCiAgICAgKiBAZGVmYXVsdCAwLjAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIG1heFN1c3BlbnNpb25Gb3JjZQogICAgICovCgogICAgLyoqCiAgICAgKiBlbmdpbmVGb3JjZQogICAgICovCgogICAgLyoqCiAgICAgKiBicmFrZQogICAgICovCgogICAgLyoqCiAgICAgKiBpc0Zyb250V2hlZWwKICAgICAqIEBkZWZhdWx0IHRydWUKICAgICAqLwoKICAgIC8qKgogICAgICogY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uCiAgICAgKiBAZGVmYXVsdCAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIHN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5CiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIHN1c3BlbnNpb25Gb3JjZQogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiBzbGlwSW5mbwogICAgICovCgogICAgLyoqCiAgICAgKiBza2lkSW5mbwogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiBzdXNwZW5zaW9uTGVuZ3RoCiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIHNpZGVJbXB1bHNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIGZvcndhcmRJbXB1bHNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSByZXN1bHQgZnJvbSByYXljYXN0aW5nLgogICAgICovCgogICAgLyoqCiAgICAgKiBXaGVlbCB3b3JsZCB0cmFuc2Zvcm0uCiAgICAgKi8KCiAgICAvKioKICAgICAqIGlzSW5Db250YWN0CiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgb3B0aW9ucyA9IFV0aWxzLmRlZmF1bHRzKG9wdGlvbnMsIHsKICAgICAgICBjaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWw6IG5ldyBWZWMzKCksCiAgICAgICAgY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkOiBuZXcgVmVjMygpLAogICAgICAgIGRpcmVjdGlvbkxvY2FsOiBuZXcgVmVjMygpLAogICAgICAgIGRpcmVjdGlvbldvcmxkOiBuZXcgVmVjMygpLAogICAgICAgIGF4bGVMb2NhbDogbmV3IFZlYzMoKSwKICAgICAgICBheGxlV29ybGQ6IG5ldyBWZWMzKCksCiAgICAgICAgc3VzcGVuc2lvblJlc3RMZW5ndGg6IDEsCiAgICAgICAgc3VzcGVuc2lvbk1heExlbmd0aDogMiwKICAgICAgICByYWRpdXM6IDEsCiAgICAgICAgc3VzcGVuc2lvblN0aWZmbmVzczogMTAwLAogICAgICAgIGRhbXBpbmdDb21wcmVzc2lvbjogMTAsCiAgICAgICAgZGFtcGluZ1JlbGF4YXRpb246IDEwLAogICAgICAgIGZyaWN0aW9uU2xpcDogMTAuNSwKICAgICAgICBmb3J3YXJkQWNjZWxlcmF0aW9uOiAxLAogICAgICAgIHNpZGVBY2NlbGVyYXRpb246IDEsCiAgICAgICAgc3RlZXJpbmc6IDAsCiAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgZGVsdGFSb3RhdGlvbjogMCwKICAgICAgICByb2xsSW5mbHVlbmNlOiAwLjAxLAogICAgICAgIG1heFN1c3BlbnNpb25Gb3JjZTogTnVtYmVyLk1BWF9WQUxVRSwKICAgICAgICBpc0Zyb250V2hlZWw6IHRydWUsCiAgICAgICAgY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uOiAxLAogICAgICAgIHN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5OiAwLAogICAgICAgIHN1c3BlbnNpb25Gb3JjZTogMCwKICAgICAgICBzbGlwSW5mbzogMCwKICAgICAgICBza2lkSW5mbzogMCwKICAgICAgICBzdXNwZW5zaW9uTGVuZ3RoOiAwLAogICAgICAgIG1heFN1c3BlbnNpb25UcmF2ZWw6IDEsCiAgICAgICAgdXNlQ3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZDogZmFsc2UsCiAgICAgICAgY3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZDogLTAuMQogICAgICB9KTsKICAgICAgdGhpcy5tYXhTdXNwZW5zaW9uVHJhdmVsID0gb3B0aW9ucy5tYXhTdXNwZW5zaW9uVHJhdmVsOwogICAgICB0aGlzLmN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQgPSBvcHRpb25zLmN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQ7CiAgICAgIHRoaXMudXNlQ3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZCA9IG9wdGlvbnMudXNlQ3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZDsKICAgICAgdGhpcy5zbGlkaW5nID0gZmFsc2U7CiAgICAgIHRoaXMuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludExvY2FsID0gb3B0aW9ucy5jaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWwuY2xvbmUoKTsKICAgICAgdGhpcy5jaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQgPSBvcHRpb25zLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZC5jbG9uZSgpOwogICAgICB0aGlzLmRpcmVjdGlvbkxvY2FsID0gb3B0aW9ucy5kaXJlY3Rpb25Mb2NhbC5jbG9uZSgpOwogICAgICB0aGlzLmRpcmVjdGlvbldvcmxkID0gb3B0aW9ucy5kaXJlY3Rpb25Xb3JsZC5jbG9uZSgpOwogICAgICB0aGlzLmF4bGVMb2NhbCA9IG9wdGlvbnMuYXhsZUxvY2FsLmNsb25lKCk7CiAgICAgIHRoaXMuYXhsZVdvcmxkID0gb3B0aW9ucy5heGxlV29ybGQuY2xvbmUoKTsKICAgICAgdGhpcy5zdXNwZW5zaW9uUmVzdExlbmd0aCA9IG9wdGlvbnMuc3VzcGVuc2lvblJlc3RMZW5ndGg7CiAgICAgIHRoaXMuc3VzcGVuc2lvbk1heExlbmd0aCA9IG9wdGlvbnMuc3VzcGVuc2lvbk1heExlbmd0aDsKICAgICAgdGhpcy5yYWRpdXMgPSBvcHRpb25zLnJhZGl1czsKICAgICAgdGhpcy5zdXNwZW5zaW9uU3RpZmZuZXNzID0gb3B0aW9ucy5zdXNwZW5zaW9uU3RpZmZuZXNzOwogICAgICB0aGlzLmRhbXBpbmdDb21wcmVzc2lvbiA9IG9wdGlvbnMuZGFtcGluZ0NvbXByZXNzaW9uOwogICAgICB0aGlzLmRhbXBpbmdSZWxheGF0aW9uID0gb3B0aW9ucy5kYW1waW5nUmVsYXhhdGlvbjsKICAgICAgdGhpcy5mcmljdGlvblNsaXAgPSBvcHRpb25zLmZyaWN0aW9uU2xpcDsKICAgICAgdGhpcy5mb3J3YXJkQWNjZWxlcmF0aW9uID0gb3B0aW9ucy5mb3J3YXJkQWNjZWxlcmF0aW9uOwogICAgICB0aGlzLnNpZGVBY2NlbGVyYXRpb24gPSBvcHRpb25zLnNpZGVBY2NlbGVyYXRpb247CiAgICAgIHRoaXMuc3RlZXJpbmcgPSAwOwogICAgICB0aGlzLnJvdGF0aW9uID0gMDsKICAgICAgdGhpcy5kZWx0YVJvdGF0aW9uID0gMDsKICAgICAgdGhpcy5yb2xsSW5mbHVlbmNlID0gb3B0aW9ucy5yb2xsSW5mbHVlbmNlOwogICAgICB0aGlzLm1heFN1c3BlbnNpb25Gb3JjZSA9IG9wdGlvbnMubWF4U3VzcGVuc2lvbkZvcmNlOwogICAgICB0aGlzLmVuZ2luZUZvcmNlID0gMDsKICAgICAgdGhpcy5icmFrZSA9IDA7CiAgICAgIHRoaXMuaXNGcm9udFdoZWVsID0gb3B0aW9ucy5pc0Zyb250V2hlZWw7CiAgICAgIHRoaXMuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gMTsKICAgICAgdGhpcy5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IDA7CiAgICAgIHRoaXMuc3VzcGVuc2lvbkZvcmNlID0gMDsKICAgICAgdGhpcy5zbGlwSW5mbyA9IDA7CiAgICAgIHRoaXMuc2tpZEluZm8gPSAwOwogICAgICB0aGlzLnN1c3BlbnNpb25MZW5ndGggPSAwOwogICAgICB0aGlzLnNpZGVJbXB1bHNlID0gMDsKICAgICAgdGhpcy5mb3J3YXJkSW1wdWxzZSA9IDA7CiAgICAgIHRoaXMucmF5Y2FzdFJlc3VsdCA9IG5ldyBSYXljYXN0UmVzdWx0KCk7CiAgICAgIHRoaXMud29ybGRUcmFuc2Zvcm0gPSBuZXcgVHJhbnNmb3JtKCk7CiAgICAgIHRoaXMuaXNJbkNvbnRhY3QgPSBmYWxzZTsKICAgIH0KCiAgICB1cGRhdGVXaGVlbChjaGFzc2lzKSB7CiAgICAgIGNvbnN0IHJheWNhc3RSZXN1bHQgPSB0aGlzLnJheWNhc3RSZXN1bHQ7CgogICAgICBpZiAodGhpcy5pc0luQ29udGFjdCkgewogICAgICAgIGNvbnN0IHByb2plY3QgPSByYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLmRvdChyYXljYXN0UmVzdWx0LmRpcmVjdGlvbldvcmxkKTsKICAgICAgICByYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQudnN1YihjaGFzc2lzLnBvc2l0aW9uLCByZWxwb3MpOwogICAgICAgIGNoYXNzaXMuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQocmVscG9zLCBjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCk7CiAgICAgICAgY29uc3QgcHJvalZlbCA9IHJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQuZG90KGNoYXNzaXNfdmVsb2NpdHlfYXRfY29udGFjdFBvaW50KTsKCiAgICAgICAgaWYgKHByb2plY3QgPj0gLTAuMSkgewogICAgICAgICAgdGhpcy5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IDAuMDsKICAgICAgICAgIHRoaXMuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gMS4wIC8gMC4xOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zdCBpbnYgPSAtMSAvIHByb2plY3Q7CiAgICAgICAgICB0aGlzLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gcHJvalZlbCAqIGludjsKICAgICAgICAgIHRoaXMuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gaW52OwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBOb3QgaW4gY29udGFjdCA6IHBvc2l0aW9uIHdoZWVsIGluIGEgbmljZSAocmVzdCBsZW5ndGgpIHBvc2l0aW9uCiAgICAgICAgcmF5Y2FzdFJlc3VsdC5zdXNwZW5zaW9uTGVuZ3RoID0gdGhpcy5zdXNwZW5zaW9uUmVzdExlbmd0aDsKICAgICAgICB0aGlzLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gMC4wOwogICAgICAgIHJheWNhc3RSZXN1bHQuZGlyZWN0aW9uV29ybGQuc2NhbGUoLTEsIHJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQpOwogICAgICAgIHRoaXMuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gMS4wOwogICAgICB9CiAgICB9CgogIH0KICBjb25zdCBjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcmVscG9zID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogVmVoaWNsZSBoZWxwZXIgY2xhc3MgdGhhdCBjYXN0cyByYXlzIGZyb20gdGhlIHdoZWVsIHBvc2l0aW9ucyB0b3dhcmRzIHRoZSBncm91bmQgYW5kIGFwcGxpZXMgZm9yY2VzLgogICAqLwogIGNsYXNzIFJheWNhc3RWZWhpY2xlIHsKICAgIC8qKiBUaGUgY2FyIGNoYXNzaXMgYm9keS4gKi8KCiAgICAvKiogVGhlIHdoZWVscy4gKi8KCiAgICAvKiogV2lsbCBiZSBzZXQgdG8gdHJ1ZSBpZiB0aGUgY2FyIGlzIHNsaWRpbmcuICovCgogICAgLyoqIEluZGV4IG9mIHRoZSByaWdodCBheGlzLiB4PTAsIHk9MSwgej0yICovCgogICAgLyoqIEluZGV4IG9mIHRoZSBmb3J3YXJkIGF4aXMuIHg9MCwgeT0xLCB6PTIgKi8KCiAgICAvKiogSW5kZXggb2YgdGhlIHVwIGF4aXMuIHg9MCwgeT0xLCB6PTIgKi8KCiAgICAvKiogVGhlIGNvbnN0cmFpbnRzLiAqLwoKICAgIC8qKiBPcHRpb25hbCBwcmUtc3RlcCBjYWxsYmFjay4gKi8KCiAgICAvKiogTnVtYmVyIG9mIHdoZWVscyBvbiB0aGUgZ3JvdW5kLiAqLwogICAgY29uc3RydWN0b3Iob3B0aW9ucykgewogICAgICB0aGlzLmNoYXNzaXNCb2R5ID0gb3B0aW9ucy5jaGFzc2lzQm9keTsKICAgICAgdGhpcy53aGVlbEluZm9zID0gW107CiAgICAgIHRoaXMuc2xpZGluZyA9IGZhbHNlOwogICAgICB0aGlzLndvcmxkID0gbnVsbDsKICAgICAgdGhpcy5pbmRleFJpZ2h0QXhpcyA9IHR5cGVvZiBvcHRpb25zLmluZGV4UmlnaHRBeGlzICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuaW5kZXhSaWdodEF4aXMgOiAyOwogICAgICB0aGlzLmluZGV4Rm9yd2FyZEF4aXMgPSB0eXBlb2Ygb3B0aW9ucy5pbmRleEZvcndhcmRBeGlzICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuaW5kZXhGb3J3YXJkQXhpcyA6IDA7CiAgICAgIHRoaXMuaW5kZXhVcEF4aXMgPSB0eXBlb2Ygb3B0aW9ucy5pbmRleFVwQXhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmluZGV4VXBBeGlzIDogMTsKICAgICAgdGhpcy5jb25zdHJhaW50cyA9IFtdOwoKICAgICAgdGhpcy5wcmVTdGVwQ2FsbGJhY2sgPSAoKSA9PiB7fTsKCiAgICAgIHRoaXMuY3VycmVudFZlaGljbGVTcGVlZEttSG91ciA9IDA7CiAgICAgIHRoaXMubnVtV2hlZWxzT25Hcm91bmQgPSAwOwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgYSB3aGVlbC4gRm9yIGluZm9ybWF0aW9uIGFib3V0IHRoZSBvcHRpb25zLCBzZWUgYFdoZWVsSW5mb2AuCiAgICAgKi8KCgogICAgYWRkV2hlZWwob3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBjb25zdCBpbmZvID0gbmV3IFdoZWVsSW5mbyhvcHRpb25zKTsKICAgICAgY29uc3QgaW5kZXggPSB0aGlzLndoZWVsSW5mb3MubGVuZ3RoOwogICAgICB0aGlzLndoZWVsSW5mb3MucHVzaChpbmZvKTsKICAgICAgcmV0dXJuIGluZGV4OwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIHN0ZWVyaW5nIHZhbHVlIG9mIGEgd2hlZWwuCiAgICAgKi8KCgogICAgc2V0U3RlZXJpbmdWYWx1ZSh2YWx1ZSwgd2hlZWxJbmRleCkgewogICAgICBjb25zdCB3aGVlbCA9IHRoaXMud2hlZWxJbmZvc1t3aGVlbEluZGV4XTsKICAgICAgd2hlZWwuc3RlZXJpbmcgPSB2YWx1ZTsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSB3aGVlbCBmb3JjZSB0byBhcHBseSBvbiBvbmUgb2YgdGhlIHdoZWVscyBlYWNoIHRpbWUgc3RlcAogICAgICovCgoKICAgIGFwcGx5RW5naW5lRm9yY2UodmFsdWUsIHdoZWVsSW5kZXgpIHsKICAgICAgdGhpcy53aGVlbEluZm9zW3doZWVsSW5kZXhdLmVuZ2luZUZvcmNlID0gdmFsdWU7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgYnJha2luZyBmb3JjZSBvZiBhIHdoZWVsCiAgICAgKi8KCgogICAgc2V0QnJha2UoYnJha2UsIHdoZWVsSW5kZXgpIHsKICAgICAgdGhpcy53aGVlbEluZm9zW3doZWVsSW5kZXhdLmJyYWtlID0gYnJha2U7CiAgICB9CiAgICAvKioKICAgICAqIEFkZCB0aGUgdmVoaWNsZSBpbmNsdWRpbmcgaXRzIGNvbnN0cmFpbnRzIHRvIHRoZSB3b3JsZC4KICAgICAqLwoKCiAgICBhZGRUb1dvcmxkKHdvcmxkKSB7CiAgICAgIHdvcmxkLmFkZEJvZHkodGhpcy5jaGFzc2lzQm9keSk7CiAgICAgIGNvbnN0IHRoYXQgPSB0aGlzOwoKICAgICAgdGhpcy5wcmVTdGVwQ2FsbGJhY2sgPSAoKSA9PiB7CiAgICAgICAgdGhhdC51cGRhdGVWZWhpY2xlKHdvcmxkLmR0KTsKICAgICAgfTsKCiAgICAgIHdvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCB0aGlzLnByZVN0ZXBDYWxsYmFjayk7CiAgICAgIHRoaXMud29ybGQgPSB3b3JsZDsKICAgIH0KICAgIC8qKgogICAgICogR2V0IG9uZSBvZiB0aGUgd2hlZWwgYXhsZXMsIHdvcmxkLW9yaWVudGVkLgogICAgICovCgoKICAgIGdldFZlaGljbGVBeGlzV29ybGQoYXhpc0luZGV4LCByZXN1bHQpIHsKICAgICAgcmVzdWx0LnNldChheGlzSW5kZXggPT09IDAgPyAxIDogMCwgYXhpc0luZGV4ID09PSAxID8gMSA6IDAsIGF4aXNJbmRleCA9PT0gMiA/IDEgOiAwKTsKICAgICAgdGhpcy5jaGFzc2lzQm9keS52ZWN0b3JUb1dvcmxkRnJhbWUocmVzdWx0LCByZXN1bHQpOwogICAgfQoKICAgIHVwZGF0ZVZlaGljbGUodGltZVN0ZXApIHsKICAgICAgY29uc3Qgd2hlZWxJbmZvcyA9IHRoaXMud2hlZWxJbmZvczsKICAgICAgY29uc3QgbnVtV2hlZWxzID0gd2hlZWxJbmZvcy5sZW5ndGg7CiAgICAgIGNvbnN0IGNoYXNzaXNCb2R5ID0gdGhpcy5jaGFzc2lzQm9keTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICB0aGlzLnVwZGF0ZVdoZWVsVHJhbnNmb3JtKGkpOwogICAgICB9CgogICAgICB0aGlzLmN1cnJlbnRWZWhpY2xlU3BlZWRLbUhvdXIgPSAzLjYgKiBjaGFzc2lzQm9keS52ZWxvY2l0eS5sZW5ndGgoKTsKICAgICAgY29uc3QgZm9yd2FyZFdvcmxkID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5nZXRWZWhpY2xlQXhpc1dvcmxkKHRoaXMuaW5kZXhGb3J3YXJkQXhpcywgZm9yd2FyZFdvcmxkKTsKCiAgICAgIGlmIChmb3J3YXJkV29ybGQuZG90KGNoYXNzaXNCb2R5LnZlbG9jaXR5KSA8IDApIHsKICAgICAgICB0aGlzLmN1cnJlbnRWZWhpY2xlU3BlZWRLbUhvdXIgKj0gLTE7CiAgICAgIH0gLy8gc2ltdWxhdGUgc3VzcGVuc2lvbgoKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICB0aGlzLmNhc3RSYXkod2hlZWxJbmZvc1tpXSk7CiAgICAgIH0KCiAgICAgIHRoaXMudXBkYXRlU3VzcGVuc2lvbih0aW1lU3RlcCk7CiAgICAgIGNvbnN0IGltcHVsc2UgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCByZWxwb3MgPSBuZXcgVmVjMygpOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykgewogICAgICAgIC8vYXBwbHkgc3VzcGVuc2lvbiBmb3JjZQogICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTsKICAgICAgICBsZXQgc3VzcGVuc2lvbkZvcmNlID0gd2hlZWwuc3VzcGVuc2lvbkZvcmNlOwoKICAgICAgICBpZiAoc3VzcGVuc2lvbkZvcmNlID4gd2hlZWwubWF4U3VzcGVuc2lvbkZvcmNlKSB7CiAgICAgICAgICBzdXNwZW5zaW9uRm9yY2UgPSB3aGVlbC5tYXhTdXNwZW5zaW9uRm9yY2U7CiAgICAgICAgfQoKICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLnNjYWxlKHN1c3BlbnNpb25Gb3JjZSAqIHRpbWVTdGVwLCBpbXB1bHNlKTsKICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQudnN1YihjaGFzc2lzQm9keS5wb3NpdGlvbiwgcmVscG9zKTsKICAgICAgICBjaGFzc2lzQm9keS5hcHBseUltcHVsc2UoaW1wdWxzZSwgcmVscG9zKTsKICAgICAgfQoKICAgICAgdGhpcy51cGRhdGVGcmljdGlvbih0aW1lU3RlcCk7CiAgICAgIGNvbnN0IGhpdE5vcm1hbFdvcmxkU2NhbGVkV2l0aFByb2ogPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBmd2QgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCB2ZWwgPSBuZXcgVmVjMygpOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykgewogICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTsgLy9jb25zdCByZWxwb3MgPSBuZXcgVmVjMygpOwogICAgICAgIC8vd2hlZWwuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkLnZzdWIoY2hhc3Npc0JvZHkucG9zaXRpb24sIHJlbHBvcyk7CgogICAgICAgIGNoYXNzaXNCb2R5LmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHdoZWVsLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZCwgdmVsKTsgLy8gSGFjayB0byBnZXQgdGhlIHJvdGF0aW9uIGluIHRoZSBjb3JyZWN0IGRpcmVjdGlvbgoKICAgICAgICBsZXQgbSA9IDE7CgogICAgICAgIHN3aXRjaCAodGhpcy5pbmRleFVwQXhpcykgewogICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBtID0gLTE7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgICAgaWYgKHdoZWVsLmlzSW5Db250YWN0KSB7CiAgICAgICAgICB0aGlzLmdldFZlaGljbGVBeGlzV29ybGQodGhpcy5pbmRleEZvcndhcmRBeGlzLCBmd2QpOwogICAgICAgICAgY29uc3QgcHJvaiA9IGZ3ZC5kb3Qod2hlZWwucmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZCk7CiAgICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLnNjYWxlKHByb2osIGhpdE5vcm1hbFdvcmxkU2NhbGVkV2l0aFByb2opOwogICAgICAgICAgZndkLnZzdWIoaGl0Tm9ybWFsV29ybGRTY2FsZWRXaXRoUHJvaiwgZndkKTsKICAgICAgICAgIGNvbnN0IHByb2oyID0gZndkLmRvdCh2ZWwpOwogICAgICAgICAgd2hlZWwuZGVsdGFSb3RhdGlvbiA9IG0gKiBwcm9qMiAqIHRpbWVTdGVwIC8gd2hlZWwucmFkaXVzOwogICAgICAgIH0KCiAgICAgICAgaWYgKCh3aGVlbC5zbGlkaW5nIHx8ICF3aGVlbC5pc0luQ29udGFjdCkgJiYgd2hlZWwuZW5naW5lRm9yY2UgIT09IDAgJiYgd2hlZWwudXNlQ3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZCkgewogICAgICAgICAgLy8gQXBwbHkgY3VzdG9tIHJvdGF0aW9uIHdoZW4gYWNjZWxlcmF0aW5nIGFuZCBzbGlkaW5nCiAgICAgICAgICB3aGVlbC5kZWx0YVJvdGF0aW9uID0gKHdoZWVsLmVuZ2luZUZvcmNlID4gMCA/IDEgOiAtMSkgKiB3aGVlbC5jdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkICogdGltZVN0ZXA7CiAgICAgICAgfSAvLyBMb2NrIHdoZWVscwoKCiAgICAgICAgaWYgKE1hdGguYWJzKHdoZWVsLmJyYWtlKSA+IE1hdGguYWJzKHdoZWVsLmVuZ2luZUZvcmNlKSkgewogICAgICAgICAgd2hlZWwuZGVsdGFSb3RhdGlvbiA9IDA7CiAgICAgICAgfQoKICAgICAgICB3aGVlbC5yb3RhdGlvbiArPSB3aGVlbC5kZWx0YVJvdGF0aW9uOyAvLyBVc2UgdGhlIG9sZCB2YWx1ZQoKICAgICAgICB3aGVlbC5kZWx0YVJvdGF0aW9uICo9IDAuOTk7IC8vIGRhbXBpbmcgb2Ygcm90YXRpb24gd2hlbiBub3QgaW4gY29udGFjdAogICAgICB9CiAgICB9CgogICAgdXBkYXRlU3VzcGVuc2lvbihkZWx0YVRpbWUpIHsKICAgICAgY29uc3QgY2hhc3Npc0JvZHkgPSB0aGlzLmNoYXNzaXNCb2R5OwogICAgICBjb25zdCBjaGFzc2lzTWFzcyA9IGNoYXNzaXNCb2R5Lm1hc3M7CiAgICAgIGNvbnN0IHdoZWVsSW5mb3MgPSB0aGlzLndoZWVsSW5mb3M7CiAgICAgIGNvbnN0IG51bVdoZWVscyA9IHdoZWVsSW5mb3MubGVuZ3RoOwoKICAgICAgZm9yIChsZXQgd19pdCA9IDA7IHdfaXQgPCBudW1XaGVlbHM7IHdfaXQrKykgewogICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1t3X2l0XTsKCiAgICAgICAgaWYgKHdoZWVsLmlzSW5Db250YWN0KSB7CiAgICAgICAgICBsZXQgZm9yY2U7IC8vIFNwcmluZwoKICAgICAgICAgIGNvbnN0IHN1c3BfbGVuZ3RoID0gd2hlZWwuc3VzcGVuc2lvblJlc3RMZW5ndGg7CiAgICAgICAgICBjb25zdCBjdXJyZW50X2xlbmd0aCA9IHdoZWVsLnN1c3BlbnNpb25MZW5ndGg7CiAgICAgICAgICBjb25zdCBsZW5ndGhfZGlmZiA9IHN1c3BfbGVuZ3RoIC0gY3VycmVudF9sZW5ndGg7CiAgICAgICAgICBmb3JjZSA9IHdoZWVsLnN1c3BlbnNpb25TdGlmZm5lc3MgKiBsZW5ndGhfZGlmZiAqIHdoZWVsLmNsaXBwZWRJbnZDb250YWN0RG90U3VzcGVuc2lvbjsgLy8gRGFtcGVyCgogICAgICAgICAgY29uc3QgcHJvamVjdGVkX3JlbF92ZWwgPSB3aGVlbC5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eTsKICAgICAgICAgIGxldCBzdXNwX2RhbXBpbmc7CgogICAgICAgICAgaWYgKHByb2plY3RlZF9yZWxfdmVsIDwgMCkgewogICAgICAgICAgICBzdXNwX2RhbXBpbmcgPSB3aGVlbC5kYW1waW5nQ29tcHJlc3Npb247CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzdXNwX2RhbXBpbmcgPSB3aGVlbC5kYW1waW5nUmVsYXhhdGlvbjsKICAgICAgICAgIH0KCiAgICAgICAgICBmb3JjZSAtPSBzdXNwX2RhbXBpbmcgKiBwcm9qZWN0ZWRfcmVsX3ZlbDsKICAgICAgICAgIHdoZWVsLnN1c3BlbnNpb25Gb3JjZSA9IGZvcmNlICogY2hhc3Npc01hc3M7CgogICAgICAgICAgaWYgKHdoZWVsLnN1c3BlbnNpb25Gb3JjZSA8IDApIHsKICAgICAgICAgICAgd2hlZWwuc3VzcGVuc2lvbkZvcmNlID0gMDsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgd2hlZWwuc3VzcGVuc2lvbkZvcmNlID0gMDsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmVtb3ZlIHRoZSB2ZWhpY2xlIGluY2x1ZGluZyBpdHMgY29uc3RyYWludHMgZnJvbSB0aGUgd29ybGQuCiAgICAgKi8KCgogICAgcmVtb3ZlRnJvbVdvcmxkKHdvcmxkKSB7CiAgICAgIHRoaXMuY29uc3RyYWludHM7CiAgICAgIHdvcmxkLnJlbW92ZUJvZHkodGhpcy5jaGFzc2lzQm9keSk7CiAgICAgIHdvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCB0aGlzLnByZVN0ZXBDYWxsYmFjayk7CiAgICAgIHRoaXMud29ybGQgPSBudWxsOwogICAgfQoKICAgIGNhc3RSYXkod2hlZWwpIHsKICAgICAgY29uc3QgcmF5dmVjdG9yID0gY2FzdFJheV9yYXl2ZWN0b3I7CiAgICAgIGNvbnN0IHRhcmdldCA9IGNhc3RSYXlfdGFyZ2V0OwogICAgICB0aGlzLnVwZGF0ZVdoZWVsVHJhbnNmb3JtV29ybGQod2hlZWwpOwogICAgICBjb25zdCBjaGFzc2lzQm9keSA9IHRoaXMuY2hhc3Npc0JvZHk7CiAgICAgIGxldCBkZXB0aCA9IC0xOwogICAgICBjb25zdCByYXlsZW4gPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aCArIHdoZWVsLnJhZGl1czsKICAgICAgd2hlZWwuZGlyZWN0aW9uV29ybGQuc2NhbGUocmF5bGVuLCByYXl2ZWN0b3IpOwogICAgICBjb25zdCBzb3VyY2UgPSB3aGVlbC5jaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQ7CiAgICAgIHNvdXJjZS52YWRkKHJheXZlY3RvciwgdGFyZ2V0KTsKICAgICAgY29uc3QgcmF5Y2FzdFJlc3VsdCA9IHdoZWVsLnJheWNhc3RSZXN1bHQ7CiAgICAgIHJheWNhc3RSZXN1bHQucmVzZXQoKTsgLy8gVHVybiBvZmYgcmF5IGNvbGxpc2lvbiB3aXRoIHRoZSBjaGFzc2lzIHRlbXBvcmFyaWx5CgogICAgICBjb25zdCBvbGRTdGF0ZSA9IGNoYXNzaXNCb2R5LmNvbGxpc2lvblJlc3BvbnNlOwogICAgICBjaGFzc2lzQm9keS5jb2xsaXNpb25SZXNwb25zZSA9IGZhbHNlOyAvLyBDYXN0IHJheSBhZ2FpbnN0IHdvcmxkCgogICAgICB0aGlzLndvcmxkLnJheVRlc3Qoc291cmNlLCB0YXJnZXQsIHJheWNhc3RSZXN1bHQpOwogICAgICBjaGFzc2lzQm9keS5jb2xsaXNpb25SZXNwb25zZSA9IG9sZFN0YXRlOwogICAgICBjb25zdCBvYmplY3QgPSByYXljYXN0UmVzdWx0LmJvZHk7CiAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuZ3JvdW5kT2JqZWN0ID0gMDsKCiAgICAgIGlmIChvYmplY3QpIHsKICAgICAgICBkZXB0aCA9IHJheWNhc3RSZXN1bHQuZGlzdGFuY2U7CiAgICAgICAgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZCA9IHJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQ7CiAgICAgICAgd2hlZWwuaXNJbkNvbnRhY3QgPSB0cnVlOwogICAgICAgIGNvbnN0IGhpdERpc3RhbmNlID0gcmF5Y2FzdFJlc3VsdC5kaXN0YW5jZTsKICAgICAgICB3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoID0gaGl0RGlzdGFuY2UgLSB3aGVlbC5yYWRpdXM7IC8vIGNsYW1wIG9uIG1heCBzdXNwZW5zaW9uIHRyYXZlbAoKICAgICAgICBjb25zdCBtaW5TdXNwZW5zaW9uTGVuZ3RoID0gd2hlZWwuc3VzcGVuc2lvblJlc3RMZW5ndGggLSB3aGVlbC5tYXhTdXNwZW5zaW9uVHJhdmVsOwogICAgICAgIGNvbnN0IG1heFN1c3BlbnNpb25MZW5ndGggPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aCArIHdoZWVsLm1heFN1c3BlbnNpb25UcmF2ZWw7CgogICAgICAgIGlmICh3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoIDwgbWluU3VzcGVuc2lvbkxlbmd0aCkgewogICAgICAgICAgd2hlZWwuc3VzcGVuc2lvbkxlbmd0aCA9IG1pblN1c3BlbnNpb25MZW5ndGg7CiAgICAgICAgfQoKICAgICAgICBpZiAod2hlZWwuc3VzcGVuc2lvbkxlbmd0aCA+IG1heFN1c3BlbnNpb25MZW5ndGgpIHsKICAgICAgICAgIHdoZWVsLnN1c3BlbnNpb25MZW5ndGggPSBtYXhTdXNwZW5zaW9uTGVuZ3RoOwogICAgICAgICAgd2hlZWwucmF5Y2FzdFJlc3VsdC5yZXNldCgpOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgZGVub21pbmF0b3IgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLmRvdCh3aGVlbC5kaXJlY3Rpb25Xb3JsZCk7CiAgICAgICAgY29uc3QgY2hhc3Npc192ZWxvY2l0eV9hdF9jb250YWN0UG9pbnQgPSBuZXcgVmVjMygpOwogICAgICAgIGNoYXNzaXNCb2R5LmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCwgY2hhc3Npc192ZWxvY2l0eV9hdF9jb250YWN0UG9pbnQpOwogICAgICAgIGNvbnN0IHByb2pWZWwgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLmRvdChjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCk7CgogICAgICAgIGlmIChkZW5vbWluYXRvciA+PSAtMC4xKSB7CiAgICAgICAgICB3aGVlbC5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IDA7CiAgICAgICAgICB3aGVlbC5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxIC8gMC4xOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zdCBpbnYgPSAtMSAvIGRlbm9taW5hdG9yOwogICAgICAgICAgd2hlZWwuc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkgPSBwcm9qVmVsICogaW52OwogICAgICAgICAgd2hlZWwuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gaW52OwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvL3B1dCB3aGVlbCBpbmZvIGFzIGluIHJlc3QgcG9zaXRpb24KICAgICAgICB3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoID0gd2hlZWwuc3VzcGVuc2lvblJlc3RMZW5ndGggKyAwICogd2hlZWwubWF4U3VzcGVuc2lvblRyYXZlbDsKICAgICAgICB3aGVlbC5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IDAuMDsKICAgICAgICB3aGVlbC5kaXJlY3Rpb25Xb3JsZC5zY2FsZSgtMSwgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZCk7CiAgICAgICAgd2hlZWwuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gMS4wOwogICAgICB9CgogICAgICByZXR1cm4gZGVwdGg7CiAgICB9CgogICAgdXBkYXRlV2hlZWxUcmFuc2Zvcm1Xb3JsZCh3aGVlbCkgewogICAgICB3aGVlbC5pc0luQ29udGFjdCA9IGZhbHNlOwogICAgICBjb25zdCBjaGFzc2lzQm9keSA9IHRoaXMuY2hhc3Npc0JvZHk7CiAgICAgIGNoYXNzaXNCb2R5LnBvaW50VG9Xb3JsZEZyYW1lKHdoZWVsLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbCwgd2hlZWwuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkKTsKICAgICAgY2hhc3Npc0JvZHkudmVjdG9yVG9Xb3JsZEZyYW1lKHdoZWVsLmRpcmVjdGlvbkxvY2FsLCB3aGVlbC5kaXJlY3Rpb25Xb3JsZCk7CiAgICAgIGNoYXNzaXNCb2R5LnZlY3RvclRvV29ybGRGcmFtZSh3aGVlbC5heGxlTG9jYWwsIHdoZWVsLmF4bGVXb3JsZCk7CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSBvbmUgb2YgdGhlIHdoZWVsIHRyYW5zZm9ybS4KICAgICAqIE5vdGUgd2hlbiByZW5kZXJpbmcgd2hlZWxzOiBkdXJpbmcgZWFjaCBzdGVwLCB3aGVlbCB0cmFuc2Zvcm1zIGFyZSB1cGRhdGVkIEJFRk9SRSB0aGUgY2hhc3NpczsgaWUuIHRoZWlyIHBvc2l0aW9uIGJlY29tZXMgaW52YWxpZCBhZnRlciB0aGUgc3RlcC4gVGh1cyB3aGVuIHlvdSByZW5kZXIgd2hlZWxzLCB5b3UgbXVzdCB1cGRhdGUgd2hlZWwgdHJhbnNmb3JtcyBiZWZvcmUgcmVuZGVyaW5nIHRoZW0uIFNlZSByYXljYXN0VmVoaWNsZSBkZW1vIGZvciBhbiBleGFtcGxlLgogICAgICogQHBhcmFtIHdoZWVsSW5kZXggVGhlIHdoZWVsIGluZGV4IHRvIHVwZGF0ZS4KICAgICAqLwoKCiAgICB1cGRhdGVXaGVlbFRyYW5zZm9ybSh3aGVlbEluZGV4KSB7CiAgICAgIGNvbnN0IHVwID0gdG1wVmVjNDsKICAgICAgY29uc3QgcmlnaHQgPSB0bXBWZWM1OwogICAgICBjb25zdCBmd2QgPSB0bXBWZWM2OwogICAgICBjb25zdCB3aGVlbCA9IHRoaXMud2hlZWxJbmZvc1t3aGVlbEluZGV4XTsKICAgICAgdGhpcy51cGRhdGVXaGVlbFRyYW5zZm9ybVdvcmxkKHdoZWVsKTsKICAgICAgd2hlZWwuZGlyZWN0aW9uTG9jYWwuc2NhbGUoLTEsIHVwKTsKICAgICAgcmlnaHQuY29weSh3aGVlbC5heGxlTG9jYWwpOwogICAgICB1cC5jcm9zcyhyaWdodCwgZndkKTsKICAgICAgZndkLm5vcm1hbGl6ZSgpOwogICAgICByaWdodC5ub3JtYWxpemUoKTsgLy8gUm90YXRlIGFyb3VuZCBzdGVlcmluZyBvdmVyIHRoZSB3aGVlbEF4bGUKCiAgICAgIGNvbnN0IHN0ZWVyaW5nID0gd2hlZWwuc3RlZXJpbmc7CiAgICAgIGNvbnN0IHN0ZWVyaW5nT3JuID0gbmV3IFF1YXRlcm5pb24oKTsKICAgICAgc3RlZXJpbmdPcm4uc2V0RnJvbUF4aXNBbmdsZSh1cCwgc3RlZXJpbmcpOwogICAgICBjb25zdCByb3RhdGluZ09ybiA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIHJvdGF0aW5nT3JuLnNldEZyb21BeGlzQW5nbGUocmlnaHQsIHdoZWVsLnJvdGF0aW9uKTsgLy8gV29ybGQgcm90YXRpb24gb2YgdGhlIHdoZWVsCgogICAgICBjb25zdCBxID0gd2hlZWwud29ybGRUcmFuc2Zvcm0ucXVhdGVybmlvbjsKICAgICAgdGhpcy5jaGFzc2lzQm9keS5xdWF0ZXJuaW9uLm11bHQoc3RlZXJpbmdPcm4sIHEpOwogICAgICBxLm11bHQocm90YXRpbmdPcm4sIHEpOwogICAgICBxLm5vcm1hbGl6ZSgpOyAvLyB3b3JsZCBwb3NpdGlvbiBvZiB0aGUgd2hlZWwKCiAgICAgIGNvbnN0IHAgPSB3aGVlbC53b3JsZFRyYW5zZm9ybS5wb3NpdGlvbjsKICAgICAgcC5jb3B5KHdoZWVsLmRpcmVjdGlvbldvcmxkKTsKICAgICAgcC5zY2FsZSh3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoLCBwKTsKICAgICAgcC52YWRkKHdoZWVsLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZCwgcCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgd29ybGQgdHJhbnNmb3JtIG9mIG9uZSBvZiB0aGUgd2hlZWxzCiAgICAgKi8KCgogICAgZ2V0V2hlZWxUcmFuc2Zvcm1Xb3JsZCh3aGVlbEluZGV4KSB7CiAgICAgIHJldHVybiB0aGlzLndoZWVsSW5mb3Nbd2hlZWxJbmRleF0ud29ybGRUcmFuc2Zvcm07CiAgICB9CgogICAgdXBkYXRlRnJpY3Rpb24odGltZVN0ZXApIHsKICAgICAgY29uc3Qgc3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qID0gdXBkYXRlRnJpY3Rpb25fc3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qOyAvL2NhbGN1bGF0ZSB0aGUgaW1wdWxzZSwgc28gdGhhdCB0aGUgd2hlZWxzIGRvbid0IG1vdmUgc2lkZXdhcmRzCgogICAgICBjb25zdCB3aGVlbEluZm9zID0gdGhpcy53aGVlbEluZm9zOwogICAgICBjb25zdCBudW1XaGVlbHMgPSB3aGVlbEluZm9zLmxlbmd0aDsKICAgICAgY29uc3QgY2hhc3Npc0JvZHkgPSB0aGlzLmNoYXNzaXNCb2R5OwogICAgICBjb25zdCBmb3J3YXJkV1MgPSB1cGRhdGVGcmljdGlvbl9mb3J3YXJkV1M7CiAgICAgIGNvbnN0IGF4bGUgPSB1cGRhdGVGcmljdGlvbl9heGxlOwogICAgICB0aGlzLm51bVdoZWVsc09uR3JvdW5kID0gMDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICBjb25zdCB3aGVlbCA9IHdoZWVsSW5mb3NbaV07CiAgICAgICAgY29uc3QgZ3JvdW5kT2JqZWN0ID0gd2hlZWwucmF5Y2FzdFJlc3VsdC5ib2R5OwoKICAgICAgICBpZiAoZ3JvdW5kT2JqZWN0KSB7CiAgICAgICAgICB0aGlzLm51bVdoZWVsc09uR3JvdW5kKys7CiAgICAgICAgfQoKICAgICAgICB3aGVlbC5zaWRlSW1wdWxzZSA9IDA7CiAgICAgICAgd2hlZWwuZm9yd2FyZEltcHVsc2UgPSAwOwoKICAgICAgICBpZiAoIWZvcndhcmRXU1tpXSkgewogICAgICAgICAgZm9yd2FyZFdTW2ldID0gbmV3IFZlYzMoKTsKICAgICAgICB9CgogICAgICAgIGlmICghYXhsZVtpXSkgewogICAgICAgICAgYXhsZVtpXSA9IG5ldyBWZWMzKCk7CiAgICAgICAgfQogICAgICB9CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7CiAgICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldOwogICAgICAgIGNvbnN0IGdyb3VuZE9iamVjdCA9IHdoZWVsLnJheWNhc3RSZXN1bHQuYm9keTsKCiAgICAgICAgaWYgKGdyb3VuZE9iamVjdCkgewogICAgICAgICAgY29uc3QgYXhsZWkgPSBheGxlW2ldOwogICAgICAgICAgY29uc3Qgd2hlZWxUcmFucyA9IHRoaXMuZ2V0V2hlZWxUcmFuc2Zvcm1Xb3JsZChpKTsgLy8gR2V0IHdvcmxkIGF4bGUKCiAgICAgICAgICB3aGVlbFRyYW5zLnZlY3RvclRvV29ybGRGcmFtZShkaXJlY3Rpb25zW3RoaXMuaW5kZXhSaWdodEF4aXNdLCBheGxlaSk7CiAgICAgICAgICBjb25zdCBzdXJmTm9ybWFsV1MgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkOwogICAgICAgICAgY29uc3QgcHJvaiA9IGF4bGVpLmRvdChzdXJmTm9ybWFsV1MpOwogICAgICAgICAgc3VyZk5vcm1hbFdTLnNjYWxlKHByb2osIHN1cmZOb3JtYWxXU19zY2FsZWRfcHJvaik7CiAgICAgICAgICBheGxlaS52c3ViKHN1cmZOb3JtYWxXU19zY2FsZWRfcHJvaiwgYXhsZWkpOwogICAgICAgICAgYXhsZWkubm9ybWFsaXplKCk7CiAgICAgICAgICBzdXJmTm9ybWFsV1MuY3Jvc3MoYXhsZWksIGZvcndhcmRXU1tpXSk7CiAgICAgICAgICBmb3J3YXJkV1NbaV0ubm9ybWFsaXplKCk7CiAgICAgICAgICB3aGVlbC5zaWRlSW1wdWxzZSA9IHJlc29sdmVTaW5nbGVCaWxhdGVyYWwoY2hhc3Npc0JvZHksIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCwgZ3JvdW5kT2JqZWN0LCB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQsIGF4bGVpKTsKICAgICAgICAgIHdoZWVsLnNpZGVJbXB1bHNlICo9IHNpZGVGcmljdGlvblN0aWZmbmVzczI7CiAgICAgICAgfQogICAgICB9CgogICAgICBjb25zdCBzaWRlRmFjdG9yID0gMTsKICAgICAgY29uc3QgZndkRmFjdG9yID0gMC41OwogICAgICB0aGlzLnNsaWRpbmcgPSBmYWxzZTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICBjb25zdCB3aGVlbCA9IHdoZWVsSW5mb3NbaV07CiAgICAgICAgY29uc3QgZ3JvdW5kT2JqZWN0ID0gd2hlZWwucmF5Y2FzdFJlc3VsdC5ib2R5OwogICAgICAgIGxldCByb2xsaW5nRnJpY3Rpb24gPSAwOwogICAgICAgIHdoZWVsLnNsaXBJbmZvID0gMTsKCiAgICAgICAgaWYgKGdyb3VuZE9iamVjdCkgewogICAgICAgICAgY29uc3QgZGVmYXVsdFJvbGxpbmdGcmljdGlvbkltcHVsc2UgPSAwOwogICAgICAgICAgY29uc3QgbWF4SW1wdWxzZSA9IHdoZWVsLmJyYWtlID8gd2hlZWwuYnJha2UgOiBkZWZhdWx0Um9sbGluZ0ZyaWN0aW9uSW1wdWxzZTsgLy8gYnRXaGVlbENvbnRhY3RQb2ludCBjb250YWN0UHQoY2hhc3Npc0JvZHksZ3JvdW5kT2JqZWN0LHdoZWVsSW5mcmF5Y2FzdEluZm8uaGl0UG9pbnRXb3JsZCxmb3J3YXJkV1Nbd2hlZWxdLG1heEltcHVsc2UpOwogICAgICAgICAgLy8gcm9sbGluZ0ZyaWN0aW9uID0gY2FsY1JvbGxpbmdGcmljdGlvbihjb250YWN0UHQpOwoKICAgICAgICAgIHJvbGxpbmdGcmljdGlvbiA9IGNhbGNSb2xsaW5nRnJpY3Rpb24oY2hhc3Npc0JvZHksIGdyb3VuZE9iamVjdCwgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkLCBmb3J3YXJkV1NbaV0sIG1heEltcHVsc2UpOwogICAgICAgICAgcm9sbGluZ0ZyaWN0aW9uICs9IHdoZWVsLmVuZ2luZUZvcmNlICogdGltZVN0ZXA7IC8vIHJvbGxpbmdGcmljdGlvbiA9IDA7CgogICAgICAgICAgY29uc3QgZmFjdG9yID0gbWF4SW1wdWxzZSAvIHJvbGxpbmdGcmljdGlvbjsKICAgICAgICAgIHdoZWVsLnNsaXBJbmZvICo9IGZhY3RvcjsKICAgICAgICB9IC8vc3dpdGNoIGJldHdlZW4gYWN0aXZlIHJvbGxpbmcgKHRocm90dGxlKSwgYnJha2luZyBhbmQgbm9uLWFjdGl2ZSByb2xsaW5nIGZyaWN0aW9uIChudGhyb3R0bGUvYnJlYWspCgoKICAgICAgICB3aGVlbC5mb3J3YXJkSW1wdWxzZSA9IDA7CiAgICAgICAgd2hlZWwuc2tpZEluZm8gPSAxOwoKICAgICAgICBpZiAoZ3JvdW5kT2JqZWN0KSB7CiAgICAgICAgICB3aGVlbC5za2lkSW5mbyA9IDE7CiAgICAgICAgICBjb25zdCBtYXhpbXAgPSB3aGVlbC5zdXNwZW5zaW9uRm9yY2UgKiB0aW1lU3RlcCAqIHdoZWVsLmZyaWN0aW9uU2xpcDsKICAgICAgICAgIGNvbnN0IG1heGltcFNpZGUgPSBtYXhpbXA7CiAgICAgICAgICBjb25zdCBtYXhpbXBTcXVhcmVkID0gbWF4aW1wICogbWF4aW1wU2lkZTsKICAgICAgICAgIHdoZWVsLmZvcndhcmRJbXB1bHNlID0gcm9sbGluZ0ZyaWN0aW9uOyAvL3doZWVsSW5mby5lbmdpbmVGb3JjZSogdGltZVN0ZXA7CgogICAgICAgICAgY29uc3QgeCA9IHdoZWVsLmZvcndhcmRJbXB1bHNlICogZndkRmFjdG9yIC8gd2hlZWwuZm9yd2FyZEFjY2VsZXJhdGlvbjsKICAgICAgICAgIGNvbnN0IHkgPSB3aGVlbC5zaWRlSW1wdWxzZSAqIHNpZGVGYWN0b3IgLyB3aGVlbC5zaWRlQWNjZWxlcmF0aW9uOwogICAgICAgICAgY29uc3QgaW1wdWxzZVNxdWFyZWQgPSB4ICogeCArIHkgKiB5OwogICAgICAgICAgd2hlZWwuc2xpZGluZyA9IGZhbHNlOwoKICAgICAgICAgIGlmIChpbXB1bHNlU3F1YXJlZCA+IG1heGltcFNxdWFyZWQpIHsKICAgICAgICAgICAgdGhpcy5zbGlkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgd2hlZWwuc2xpZGluZyA9IHRydWU7CiAgICAgICAgICAgIGNvbnN0IGZhY3RvciA9IG1heGltcCAvIE1hdGguc3FydChpbXB1bHNlU3F1YXJlZCk7CiAgICAgICAgICAgIHdoZWVsLnNraWRJbmZvICo9IGZhY3RvcjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNsaWRpbmcpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7CiAgICAgICAgICBjb25zdCB3aGVlbCA9IHdoZWVsSW5mb3NbaV07CgogICAgICAgICAgaWYgKHdoZWVsLnNpZGVJbXB1bHNlICE9PSAwKSB7CiAgICAgICAgICAgIGlmICh3aGVlbC5za2lkSW5mbyA8IDEpIHsKICAgICAgICAgICAgICB3aGVlbC5mb3J3YXJkSW1wdWxzZSAqPSB3aGVlbC5za2lkSW5mbzsKICAgICAgICAgICAgICB3aGVlbC5zaWRlSW1wdWxzZSAqPSB3aGVlbC5za2lkSW5mbzsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSAvLyBhcHBseSB0aGUgaW1wdWxzZXMKCgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7CiAgICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldOwogICAgICAgIGNvbnN0IHJlbF9wb3MgPSBuZXcgVmVjMygpOwogICAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZC52c3ViKGNoYXNzaXNCb2R5LnBvc2l0aW9uLCByZWxfcG9zKTsgLy8gY2Fubm9ucyBhcHBseWltcHVsc2UgaXMgdXNpbmcgd29ybGQgY29vcmQgZm9yIHRoZSBwb3NpdGlvbgogICAgICAgIC8vcmVsX3Bvcy5jb3B5KHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCk7CgogICAgICAgIGlmICh3aGVlbC5mb3J3YXJkSW1wdWxzZSAhPT0gMCkgewogICAgICAgICAgY29uc3QgaW1wdWxzZSA9IG5ldyBWZWMzKCk7CiAgICAgICAgICBmb3J3YXJkV1NbaV0uc2NhbGUod2hlZWwuZm9yd2FyZEltcHVsc2UsIGltcHVsc2UpOwogICAgICAgICAgY2hhc3Npc0JvZHkuYXBwbHlJbXB1bHNlKGltcHVsc2UsIHJlbF9wb3MpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHdoZWVsLnNpZGVJbXB1bHNlICE9PSAwKSB7CiAgICAgICAgICBjb25zdCBncm91bmRPYmplY3QgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmJvZHk7CiAgICAgICAgICBjb25zdCByZWxfcG9zMiA9IG5ldyBWZWMzKCk7CiAgICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQudnN1Yihncm91bmRPYmplY3QucG9zaXRpb24sIHJlbF9wb3MyKTsgLy9yZWxfcG9zMi5jb3B5KHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCk7CgogICAgICAgICAgY29uc3Qgc2lkZUltcCA9IG5ldyBWZWMzKCk7CiAgICAgICAgICBheGxlW2ldLnNjYWxlKHdoZWVsLnNpZGVJbXB1bHNlLCBzaWRlSW1wKTsgLy8gU2NhbGUgdGhlIHJlbGF0aXZlIHBvc2l0aW9uIGluIHRoZSB1cCBkaXJlY3Rpb24gd2l0aCByb2xsSW5mbHVlbmNlLgogICAgICAgICAgLy8gSWYgcm9sbEluZmx1ZW5jZSBpcyAxLCB0aGUgaW1wdWxzZSB3aWxsIGJlIGFwcGxpZWQgb24gdGhlIGhpdFBvaW50IChlYXN5IHRvIHJvbGwgb3ZlciksIGlmIGl0IGlzIHplcm8gaXQgd2lsbCBiZSBhcHBsaWVkIGluIHRoZSBzYW1lIHBsYW5lIGFzIHRoZSBjZW50ZXIgb2YgbWFzcyAobm90IGVhc3kgdG8gcm9sbCBvdmVyKS4KCiAgICAgICAgICBjaGFzc2lzQm9keS52ZWN0b3JUb0xvY2FsRnJhbWUocmVsX3BvcywgcmVsX3Bvcyk7CiAgICAgICAgICByZWxfcG9zWyd4eXonW3RoaXMuaW5kZXhVcEF4aXNdXSAqPSB3aGVlbC5yb2xsSW5mbHVlbmNlOwogICAgICAgICAgY2hhc3Npc0JvZHkudmVjdG9yVG9Xb3JsZEZyYW1lKHJlbF9wb3MsIHJlbF9wb3MpOwogICAgICAgICAgY2hhc3Npc0JvZHkuYXBwbHlJbXB1bHNlKHNpZGVJbXAsIHJlbF9wb3MpOyAvL2FwcGx5IGZyaWN0aW9uIGltcHVsc2Ugb24gdGhlIGdyb3VuZAoKICAgICAgICAgIHNpZGVJbXAuc2NhbGUoLTEsIHNpZGVJbXApOwogICAgICAgICAgZ3JvdW5kT2JqZWN0LmFwcGx5SW1wdWxzZShzaWRlSW1wLCByZWxfcG9zMik7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogIH0KICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBjb25zdCB0bXBWZWM0ID0gbmV3IFZlYzMoKTsKICBjb25zdCB0bXBWZWM1ID0gbmV3IFZlYzMoKTsKICBjb25zdCB0bXBWZWM2ID0gbmV3IFZlYzMoKTsKICBuZXcgUmF5KCk7CiAgbmV3IFZlYzMoKTsKICBjb25zdCBjYXN0UmF5X3JheXZlY3RvciA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY2FzdFJheV90YXJnZXQgPSBuZXcgVmVjMygpOwogIGNvbnN0IGRpcmVjdGlvbnMgPSBbbmV3IFZlYzMoMSwgMCwgMCksIG5ldyBWZWMzKDAsIDEsIDApLCBuZXcgVmVjMygwLCAwLCAxKV07CiAgY29uc3QgdXBkYXRlRnJpY3Rpb25fc3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qID0gbmV3IFZlYzMoKTsKICBjb25zdCB1cGRhdGVGcmljdGlvbl9heGxlID0gW107CiAgY29uc3QgdXBkYXRlRnJpY3Rpb25fZm9yd2FyZFdTID0gW107CiAgY29uc3Qgc2lkZUZyaWN0aW9uU3RpZmZuZXNzMiA9IDE7CiAgY29uc3QgY2FsY1JvbGxpbmdGcmljdGlvbl92ZWwxID0gbmV3IFZlYzMoKTsKICBjb25zdCBjYWxjUm9sbGluZ0ZyaWN0aW9uX3ZlbDIgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNhbGNSb2xsaW5nRnJpY3Rpb25fdmVsID0gbmV3IFZlYzMoKTsKCiAgZnVuY3Rpb24gY2FsY1JvbGxpbmdGcmljdGlvbihib2R5MCwgYm9keTEsIGZyaWN0aW9uUG9zV29ybGQsIGZyaWN0aW9uRGlyZWN0aW9uV29ybGQsIG1heEltcHVsc2UpIHsKICAgIGxldCBqMSA9IDA7CiAgICBjb25zdCBjb250YWN0UG9zV29ybGQgPSBmcmljdGlvblBvc1dvcmxkOyAvLyBjb25zdCByZWxfcG9zMSA9IG5ldyBWZWMzKCk7CiAgICAvLyBjb25zdCByZWxfcG9zMiA9IG5ldyBWZWMzKCk7CgogICAgY29uc3QgdmVsMSA9IGNhbGNSb2xsaW5nRnJpY3Rpb25fdmVsMTsKICAgIGNvbnN0IHZlbDIgPSBjYWxjUm9sbGluZ0ZyaWN0aW9uX3ZlbDI7CiAgICBjb25zdCB2ZWwgPSBjYWxjUm9sbGluZ0ZyaWN0aW9uX3ZlbDsgLy8gY29udGFjdFBvc1dvcmxkLnZzdWIoYm9keTAucG9zaXRpb24sIHJlbF9wb3MxKTsKICAgIC8vIGNvbnRhY3RQb3NXb3JsZC52c3ViKGJvZHkxLnBvc2l0aW9uLCByZWxfcG9zMik7CgogICAgYm9keTAuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQoY29udGFjdFBvc1dvcmxkLCB2ZWwxKTsKICAgIGJvZHkxLmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KGNvbnRhY3RQb3NXb3JsZCwgdmVsMik7CiAgICB2ZWwxLnZzdWIodmVsMiwgdmVsKTsKICAgIGNvbnN0IHZyZWwgPSBmcmljdGlvbkRpcmVjdGlvbldvcmxkLmRvdCh2ZWwpOwogICAgY29uc3QgZGVub20wID0gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcihib2R5MCwgZnJpY3Rpb25Qb3NXb3JsZCwgZnJpY3Rpb25EaXJlY3Rpb25Xb3JsZCk7CiAgICBjb25zdCBkZW5vbTEgPSBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yKGJvZHkxLCBmcmljdGlvblBvc1dvcmxkLCBmcmljdGlvbkRpcmVjdGlvbldvcmxkKTsKICAgIGNvbnN0IHJlbGF4YXRpb24gPSAxOwogICAgY29uc3QgamFjRGlhZ0FCSW52ID0gcmVsYXhhdGlvbiAvIChkZW5vbTAgKyBkZW5vbTEpOyAvLyBjYWxjdWxhdGUgaiB0aGF0IG1vdmVzIHVzIHRvIHplcm8gcmVsYXRpdmUgdmVsb2NpdHkKCiAgICBqMSA9IC12cmVsICogamFjRGlhZ0FCSW52OwoKICAgIGlmIChtYXhJbXB1bHNlIDwgajEpIHsKICAgICAgajEgPSBtYXhJbXB1bHNlOwogICAgfQoKICAgIGlmIChqMSA8IC1tYXhJbXB1bHNlKSB7CiAgICAgIGoxID0gLW1heEltcHVsc2U7CiAgICB9CgogICAgcmV0dXJuIGoxOwogIH0KCiAgY29uc3QgY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9yMCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9jMCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl92ZWMgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfbSA9IG5ldyBWZWMzKCk7CgogIGZ1bmN0aW9uIGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3IoYm9keSwgcG9zLCBub3JtYWwpIHsKICAgIGNvbnN0IHIwID0gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9yMDsKICAgIGNvbnN0IGMwID0gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9jMDsKICAgIGNvbnN0IHZlYyA9IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfdmVjOwogICAgY29uc3QgbSA9IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfbTsKICAgIHBvcy52c3ViKGJvZHkucG9zaXRpb24sIHIwKTsKICAgIHIwLmNyb3NzKG5vcm1hbCwgYzApOwogICAgYm9keS5pbnZJbmVydGlhV29ybGQudm11bHQoYzAsIG0pOwogICAgbS5jcm9zcyhyMCwgdmVjKTsKICAgIHJldHVybiBib2R5Lmludk1hc3MgKyBub3JtYWwuZG90KHZlYyk7CiAgfQoKICBjb25zdCByZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHJlc29sdmVTaW5nbGVCaWxhdGVyYWxfdmVsMiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbF92ZWwgPSBuZXcgVmVjMygpOyAvLyBiaWxhdGVyYWwgY29uc3RyYWludCBiZXR3ZWVuIHR3byBkeW5hbWljIG9iamVjdHMKCiAgZnVuY3Rpb24gcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbChib2R5MSwgcG9zMSwgYm9keTIsIHBvczIsIG5vcm1hbCkgewogICAgY29uc3Qgbm9ybWFsTGVuU3FyID0gbm9ybWFsLmxlbmd0aFNxdWFyZWQoKTsKCiAgICBpZiAobm9ybWFsTGVuU3FyID4gMS4xKSB7CiAgICAgIHJldHVybiAwOyAvLyBubyBpbXB1bHNlCiAgICB9IC8vIGNvbnN0IHJlbF9wb3MxID0gbmV3IFZlYzMoKTsKICAgIC8vIGNvbnN0IHJlbF9wb3MyID0gbmV3IFZlYzMoKTsKICAgIC8vIHBvczEudnN1Yihib2R5MS5wb3NpdGlvbiwgcmVsX3BvczEpOwogICAgLy8gcG9zMi52c3ViKGJvZHkyLnBvc2l0aW9uLCByZWxfcG9zMik7CgoKICAgIGNvbnN0IHZlbDEgPSByZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbDE7CiAgICBjb25zdCB2ZWwyID0gcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbF92ZWwyOwogICAgY29uc3QgdmVsID0gcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbF92ZWw7CiAgICBib2R5MS5nZXRWZWxvY2l0eUF0V29ybGRQb2ludChwb3MxLCB2ZWwxKTsKICAgIGJvZHkyLmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHBvczIsIHZlbDIpOwogICAgdmVsMS52c3ViKHZlbDIsIHZlbCk7CiAgICBjb25zdCByZWxfdmVsID0gbm9ybWFsLmRvdCh2ZWwpOwogICAgY29uc3QgY29udGFjdERhbXBpbmcgPSAwLjI7CiAgICBjb25zdCBtYXNzVGVybSA9IDEgLyAoYm9keTEuaW52TWFzcyArIGJvZHkyLmludk1hc3MpOwogICAgY29uc3QgaW1wdWxzZSA9IC1jb250YWN0RGFtcGluZyAqIHJlbF92ZWwgKiBtYXNzVGVybTsKICAgIHJldHVybiBpbXB1bHNlOwogIH0KCiAgLyoqCiAgICogU3BoZXJpY2FsIHNoYXBlCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3QgcmFkaXVzID0gMQogICAqICAgICBjb25zdCBzcGhlcmVTaGFwZSA9IG5ldyBDQU5OT04uU3BoZXJlKHJhZGl1cykKICAgKiAgICAgY29uc3Qgc3BoZXJlQm9keSA9IG5ldyBDQU5OT04uQm9keSh7IG1hc3M6IDEsIHNoYXBlOiBzcGhlcmVTaGFwZSB9KQogICAqICAgICB3b3JsZC5hZGRCb2R5KHNwaGVyZUJvZHkpCiAgICovCiAgY2xhc3MgU3BoZXJlIGV4dGVuZHMgU2hhcGUgewogICAgLyoqCiAgICAgKiBUaGUgcmFkaXVzIG9mIHRoZSBzcGhlcmUuCiAgICAgKi8KCiAgICAvKioKICAgICAqCiAgICAgKiBAcGFyYW0gcmFkaXVzIFRoZSByYWRpdXMgb2YgdGhlIHNwaGVyZSwgYSBub24tbmVnYXRpdmUgbnVtYmVyLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihyYWRpdXMpIHsKICAgICAgc3VwZXIoewogICAgICAgIHR5cGU6IFNoYXBlLnR5cGVzLlNQSEVSRQogICAgICB9KTsKICAgICAgdGhpcy5yYWRpdXMgPSByYWRpdXMgIT09IHVuZGVmaW5lZCA/IHJhZGl1cyA6IDEuMDsKCiAgICAgIGlmICh0aGlzLnJhZGl1cyA8IDApIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBzcGhlcmUgcmFkaXVzIGNhbm5vdCBiZSBuZWdhdGl2ZS4nKTsKICAgICAgfQoKICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgfQogICAgLyoqIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYSAqLwoKCiAgICBjYWxjdWxhdGVMb2NhbEluZXJ0aWEobWFzcywgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IEkgPSAyLjAgKiBtYXNzICogdGhpcy5yYWRpdXMgKiB0aGlzLnJhZGl1cyAvIDUuMDsKICAgICAgdGFyZ2V0LnggPSBJOwogICAgICB0YXJnZXQueSA9IEk7CiAgICAgIHRhcmdldC56ID0gSTsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKiB2b2x1bWUgKi8KCgogICAgdm9sdW1lKCkgewogICAgICByZXR1cm4gNC4wICogTWF0aC5QSSAqIE1hdGgucG93KHRoaXMucmFkaXVzLCAzKSAvIDMuMDsKICAgIH0KCiAgICB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIHsKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IHRoaXMucmFkaXVzOwogICAgfQoKICAgIGNhbGN1bGF0ZVdvcmxkQUFCQihwb3MsIHF1YXQsIG1pbiwgbWF4KSB7CiAgICAgIGNvbnN0IHIgPSB0aGlzLnJhZGl1czsKICAgICAgY29uc3QgYXhlcyA9IFsneCcsICd5JywgJ3onXTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXhlcy5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGF4ID0gYXhlc1tpXTsKICAgICAgICBtaW5bYXhdID0gcG9zW2F4XSAtIHI7CiAgICAgICAgbWF4W2F4XSA9IHBvc1theF0gKyByOwogICAgICB9CiAgICB9CgogIH0KICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsgLy8gVGVtcCB2ZWN0b3JzIGZvciBjYWxjdWxhdGlvbgoKICBuZXcgVmVjMygpOyAvLyBSZWxhdGl2ZSB2ZWxvY2l0eQoKICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CgogIC8qKgogICAqIEN5bGluZGVyIGNsYXNzLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IHJhZGl1c1RvcCA9IDAuNQogICAqICAgICBjb25zdCByYWRpdXNCb3R0b20gPSAwLjUKICAgKiAgICAgY29uc3QgaGVpZ2h0ID0gMgogICAqICAgICBjb25zdCBudW1TZWdtZW50cyA9IDEyCiAgICogICAgIGNvbnN0IGN5bGluZGVyU2hhcGUgPSBuZXcgQ0FOTk9OLkN5bGluZGVyKHJhZGl1c1RvcCwgcmFkaXVzQm90dG9tLCBoZWlnaHQsIG51bVNlZ21lbnRzKQogICAqICAgICBjb25zdCBjeWxpbmRlckJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogY3lsaW5kZXJTaGFwZSB9KQogICAqICAgICB3b3JsZC5hZGRCb2R5KGN5bGluZGVyQm9keSkKICAgKi8KCiAgY2xhc3MgQ3lsaW5kZXIgZXh0ZW5kcyBDb252ZXhQb2x5aGVkcm9uIHsKICAgIC8qKiBUaGUgcmFkaXVzIG9mIHRoZSB0b3Agb2YgdGhlIEN5bGluZGVyLiAqLwoKICAgIC8qKiBUaGUgcmFkaXVzIG9mIHRoZSBib3R0b20gb2YgdGhlIEN5bGluZGVyLiAqLwoKICAgIC8qKiBUaGUgaGVpZ2h0IG9mIHRoZSBDeWxpbmRlci4gKi8KCiAgICAvKiogVGhlIG51bWJlciBvZiBzZWdtZW50cyB0byBidWlsZCB0aGUgY3lsaW5kZXIgb3V0IG9mLiAqLwoKICAgIC8qKgogICAgICogQHBhcmFtIHJhZGl1c1RvcCBUaGUgcmFkaXVzIG9mIHRoZSB0b3Agb2YgdGhlIEN5bGluZGVyLgogICAgICogQHBhcmFtIHJhZGl1c0JvdHRvbSBUaGUgcmFkaXVzIG9mIHRoZSBib3R0b20gb2YgdGhlIEN5bGluZGVyLgogICAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSBDeWxpbmRlci4KICAgICAqIEBwYXJhbSBudW1TZWdtZW50cyBUaGUgbnVtYmVyIG9mIHNlZ21lbnRzIHRvIGJ1aWxkIHRoZSBjeWxpbmRlciBvdXQgb2YuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKHJhZGl1c1RvcCwgcmFkaXVzQm90dG9tLCBoZWlnaHQsIG51bVNlZ21lbnRzKSB7CiAgICAgIGlmIChyYWRpdXNUb3AgPT09IHZvaWQgMCkgewogICAgICAgIHJhZGl1c1RvcCA9IDE7CiAgICAgIH0KCiAgICAgIGlmIChyYWRpdXNCb3R0b20gPT09IHZvaWQgMCkgewogICAgICAgIHJhZGl1c0JvdHRvbSA9IDE7CiAgICAgIH0KCiAgICAgIGlmIChoZWlnaHQgPT09IHZvaWQgMCkgewogICAgICAgIGhlaWdodCA9IDE7CiAgICAgIH0KCiAgICAgIGlmIChudW1TZWdtZW50cyA9PT0gdm9pZCAwKSB7CiAgICAgICAgbnVtU2VnbWVudHMgPSA4OwogICAgICB9CgogICAgICBpZiAocmFkaXVzVG9wIDwgMCkgewogICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIGN5bGluZGVyIHJhZGl1c1RvcCBjYW5ub3QgYmUgbmVnYXRpdmUuJyk7CiAgICAgIH0KCiAgICAgIGlmIChyYWRpdXNCb3R0b20gPCAwKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgY3lsaW5kZXIgcmFkaXVzQm90dG9tIGNhbm5vdCBiZSBuZWdhdGl2ZS4nKTsKICAgICAgfQoKICAgICAgY29uc3QgTiA9IG51bVNlZ21lbnRzOwogICAgICBjb25zdCB2ZXJ0aWNlcyA9IFtdOwogICAgICBjb25zdCBheGVzID0gW107CiAgICAgIGNvbnN0IGZhY2VzID0gW107CiAgICAgIGNvbnN0IGJvdHRvbWZhY2UgPSBbXTsKICAgICAgY29uc3QgdG9wZmFjZSA9IFtdOwogICAgICBjb25zdCBjb3MgPSBNYXRoLmNvczsKICAgICAgY29uc3Qgc2luID0gTWF0aC5zaW47IC8vIEZpcnN0IGJvdHRvbSBwb2ludAoKICAgICAgdmVydGljZXMucHVzaChuZXcgVmVjMygtcmFkaXVzQm90dG9tICogc2luKDApLCAtaGVpZ2h0ICogMC41LCByYWRpdXNCb3R0b20gKiBjb3MoMCkpKTsKICAgICAgYm90dG9tZmFjZS5wdXNoKDApOyAvLyBGaXJzdCB0b3AgcG9pbnQKCiAgICAgIHZlcnRpY2VzLnB1c2gobmV3IFZlYzMoLXJhZGl1c1RvcCAqIHNpbigwKSwgaGVpZ2h0ICogMC41LCByYWRpdXNUb3AgKiBjb3MoMCkpKTsKICAgICAgdG9wZmFjZS5wdXNoKDEpOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBOOyBpKyspIHsKICAgICAgICBjb25zdCB0aGV0YSA9IDIgKiBNYXRoLlBJIC8gTiAqIChpICsgMSk7CiAgICAgICAgY29uc3QgdGhldGFOID0gMiAqIE1hdGguUEkgLyBOICogKGkgKyAwLjUpOwoKICAgICAgICBpZiAoaSA8IE4gLSAxKSB7CiAgICAgICAgICAvLyBCb3R0b20KICAgICAgICAgIHZlcnRpY2VzLnB1c2gobmV3IFZlYzMoLXJhZGl1c0JvdHRvbSAqIHNpbih0aGV0YSksIC1oZWlnaHQgKiAwLjUsIHJhZGl1c0JvdHRvbSAqIGNvcyh0aGV0YSkpKTsKICAgICAgICAgIGJvdHRvbWZhY2UucHVzaCgyICogaSArIDIpOyAvLyBUb3AKCiAgICAgICAgICB2ZXJ0aWNlcy5wdXNoKG5ldyBWZWMzKC1yYWRpdXNUb3AgKiBzaW4odGhldGEpLCBoZWlnaHQgKiAwLjUsIHJhZGl1c1RvcCAqIGNvcyh0aGV0YSkpKTsKICAgICAgICAgIHRvcGZhY2UucHVzaCgyICogaSArIDMpOyAvLyBGYWNlCgogICAgICAgICAgZmFjZXMucHVzaChbMiAqIGksIDIgKiBpICsgMSwgMiAqIGkgKyAzLCAyICogaSArIDJdKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZmFjZXMucHVzaChbMiAqIGksIDIgKiBpICsgMSwgMSwgMF0pOyAvLyBDb25uZWN0CiAgICAgICAgfSAvLyBBeGlzOiB3ZSBjYW4gY3V0IG9mZiBoYWxmIG9mIHRoZW0gaWYgd2UgaGF2ZSBldmVuIG51bWJlciBvZiBzZWdtZW50cwoKCiAgICAgICAgaWYgKE4gJSAyID09PSAxIHx8IGkgPCBOIC8gMikgewogICAgICAgICAgYXhlcy5wdXNoKG5ldyBWZWMzKC1zaW4odGhldGFOKSwgMCwgY29zKHRoZXRhTikpKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZhY2VzLnB1c2goYm90dG9tZmFjZSk7CiAgICAgIGF4ZXMucHVzaChuZXcgVmVjMygwLCAxLCAwKSk7IC8vIFJlb3JkZXIgdG9wIGZhY2UKCiAgICAgIGNvbnN0IHRlbXAgPSBbXTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG9wZmFjZS5sZW5ndGg7IGkrKykgewogICAgICAgIHRlbXAucHVzaCh0b3BmYWNlW3RvcGZhY2UubGVuZ3RoIC0gaSAtIDFdKTsKICAgICAgfQoKICAgICAgZmFjZXMucHVzaCh0ZW1wKTsKICAgICAgc3VwZXIoewogICAgICAgIHZlcnRpY2VzLAogICAgICAgIGZhY2VzLAogICAgICAgIGF4ZXMKICAgICAgfSk7CiAgICAgIHRoaXMudHlwZSA9IFNoYXBlLnR5cGVzLkNZTElOREVSOwogICAgICB0aGlzLnJhZGl1c1RvcCA9IHJhZGl1c1RvcDsKICAgICAgdGhpcy5yYWRpdXNCb3R0b20gPSByYWRpdXNCb3R0b207CiAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwogICAgICB0aGlzLm51bVNlZ21lbnRzID0gbnVtU2VnbWVudHM7CiAgICB9CgogIH0KCiAgLyoqCiAgICogUGFydGljbGUgc2hhcGUuCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3QgcGFydGljbGVTaGFwZSA9IG5ldyBDQU5OT04uUGFydGljbGUoKQogICAqICAgICBjb25zdCBwYXJ0aWNsZUJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogcGFydGljbGVTaGFwZSB9KQogICAqICAgICB3b3JsZC5hZGRCb2R5KHBhcnRpY2xlQm9keSkKICAgKi8KICBjbGFzcyBQYXJ0aWNsZSBleHRlbmRzIFNoYXBlIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuUEFSVElDTEUKICAgICAgfSk7CiAgICB9CiAgICAvKioKICAgICAqIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYQogICAgICovCgoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnNldCgwLCAwLCAwKTsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KCiAgICB2b2x1bWUoKSB7CiAgICAgIHJldHVybiAwOwogICAgfQoKICAgIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgewogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gMDsKICAgIH0KCiAgICBjYWxjdWxhdGVXb3JsZEFBQkIocG9zLCBxdWF0LCBtaW4sIG1heCkgewogICAgICAvLyBHZXQgZWFjaCBheGlzIG1heAogICAgICBtaW4uY29weShwb3MpOwogICAgICBtYXguY29weShwb3MpOwogICAgfQoKICB9CgogIC8qKgogICAqIEEgcGxhbmUsIGZhY2luZyBpbiB0aGUgWiBkaXJlY3Rpb24uIFRoZSBwbGFuZSBoYXMgaXRzIHN1cmZhY2UgYXQgej0wIGFuZCBldmVyeXRoaW5nIGJlbG93IHo9MCBpcyBhc3N1bWVkIHRvIGJlIHNvbGlkIHBsYW5lLiBUbyBtYWtlIHRoZSBwbGFuZSBmYWNlIGluIHNvbWUgb3RoZXIgZGlyZWN0aW9uIHRoYW4geiwgeW91IG11c3QgcHV0IGl0IGluc2lkZSBhIEJvZHkgYW5kIHJvdGF0ZSB0aGF0IGJvZHkuIFNlZSB0aGUgZGVtb3MuCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3QgcGxhbmVTaGFwZSA9IG5ldyBDQU5OT04uUGxhbmUoKQogICAqICAgICBjb25zdCBwbGFuZUJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAwLCBzaGFwZTogIHBsYW5lU2hhcGUgfSkKICAgKiAgICAgcGxhbmVCb2R5LnF1YXRlcm5pb24uc2V0RnJvbUV1bGVyKC1NYXRoLlBJIC8gMiwgMCwgMCkgLy8gbWFrZSBpdCBmYWNlIHVwCiAgICogICAgIHdvcmxkLmFkZEJvZHkocGxhbmVCb2R5KQogICAqLwogIGNsYXNzIFBsYW5lIGV4dGVuZHMgU2hhcGUgewogICAgLyoqIHdvcmxkTm9ybWFsICovCgogICAgLyoqIHdvcmxkTm9ybWFsTmVlZHNVcGRhdGUgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuUExBTkUKICAgICAgfSk7IC8vIFdvcmxkIG9yaWVudGVkIG5vcm1hbAoKICAgICAgdGhpcy53b3JsZE5vcm1hbCA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMud29ybGROb3JtYWxOZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSBOdW1iZXIuTUFYX1ZBTFVFOwogICAgfQogICAgLyoqIGNvbXB1dGVXb3JsZE5vcm1hbCAqLwoKCiAgICBjb21wdXRlV29ybGROb3JtYWwocXVhdCkgewogICAgICBjb25zdCBuID0gdGhpcy53b3JsZE5vcm1hbDsKICAgICAgbi5zZXQoMCwgMCwgMSk7CiAgICAgIHF1YXQudm11bHQobiwgbik7CiAgICAgIHRoaXMud29ybGROb3JtYWxOZWVkc1VwZGF0ZSA9IGZhbHNlOwogICAgfQoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KCiAgICB2b2x1bWUoKSB7CiAgICAgIHJldHVybiAoLy8gVGhlIHBsYW5lIGlzIGluZmluaXRlLi4uCiAgICAgICAgTnVtYmVyLk1BWF9WQUxVRQogICAgICApOwogICAgfQoKICAgIGNhbGN1bGF0ZVdvcmxkQUFCQihwb3MsIHF1YXQsIG1pbiwgbWF4KSB7CiAgICAgIC8vIFRoZSBwbGFuZSBBQUJCIGlzIGluZmluaXRlLCBleGNlcHQgaWYgdGhlIG5vcm1hbCBpcyBwb2ludGluZyBhbG9uZyBhbnkgYXhpcwogICAgICB0ZW1wTm9ybWFsLnNldCgwLCAwLCAxKTsgLy8gRGVmYXVsdCBwbGFuZSBub3JtYWwgaXMgegoKICAgICAgcXVhdC52bXVsdCh0ZW1wTm9ybWFsLCB0ZW1wTm9ybWFsKTsKICAgICAgY29uc3QgbWF4VmFsID0gTnVtYmVyLk1BWF9WQUxVRTsKICAgICAgbWluLnNldCgtbWF4VmFsLCAtbWF4VmFsLCAtbWF4VmFsKTsKICAgICAgbWF4LnNldChtYXhWYWwsIG1heFZhbCwgbWF4VmFsKTsKCiAgICAgIGlmICh0ZW1wTm9ybWFsLnggPT09IDEpIHsKICAgICAgICBtYXgueCA9IHBvcy54OwogICAgICB9IGVsc2UgaWYgKHRlbXBOb3JtYWwueCA9PT0gLTEpIHsKICAgICAgICBtaW4ueCA9IHBvcy54OwogICAgICB9CgogICAgICBpZiAodGVtcE5vcm1hbC55ID09PSAxKSB7CiAgICAgICAgbWF4LnkgPSBwb3MueTsKICAgICAgfSBlbHNlIGlmICh0ZW1wTm9ybWFsLnkgPT09IC0xKSB7CiAgICAgICAgbWluLnkgPSBwb3MueTsKICAgICAgfQoKICAgICAgaWYgKHRlbXBOb3JtYWwueiA9PT0gMSkgewogICAgICAgIG1heC56ID0gcG9zLno7CiAgICAgIH0gZWxzZSBpZiAodGVtcE5vcm1hbC56ID09PSAtMSkgewogICAgICAgIG1pbi56ID0gcG9zLno7CiAgICAgIH0KICAgIH0KCiAgICB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIHsKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IE51bWJlci5NQVhfVkFMVUU7CiAgICB9CgogIH0KICBjb25zdCB0ZW1wTm9ybWFsID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogSGVpZ2h0ZmllbGQgc2hhcGUgY2xhc3MuIEhlaWdodCBkYXRhIGlzIGdpdmVuIGFzIGFuIGFycmF5LiBUaGVzZSBkYXRhIHBvaW50cyBhcmUgc3ByZWFkIG91dCBldmVubHkgd2l0aCBhIGdpdmVuIGRpc3RhbmNlLgogICAqIEB0b2RvIFNob3VsZCBiZSBwb3NzaWJsZSB0byB1c2UgYWxvbmcgYWxsIGF4ZXMsIG5vdCBqdXN0IHkKICAgKiBAdG9kbyBzaG91bGQgYmUgcG9zc2libGUgdG8gc2NhbGUgYWxvbmcgYWxsIGF4ZXMKICAgKiBAdG9kbyBSZWZhY3RvciBlbGVtZW50U2l6ZSB0byBlbGVtZW50U2l6ZVggYW5kIGVsZW1lbnRTaXplWQogICAqCiAgICogQGV4YW1wbGUKICAgKiAgICAgLy8gR2VuZXJhdGUgc29tZSBoZWlnaHQgZGF0YSAoeS12YWx1ZXMpLgogICAqICAgICBjb25zdCBkYXRhID0gW10KICAgKiAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDAwOyBpKyspIHsKICAgKiAgICAgICAgIGNvbnN0IHkgPSAwLjUgKiBNYXRoLmNvcygwLjIgKiBpKQogICAqICAgICAgICAgZGF0YS5wdXNoKHkpCiAgICogICAgIH0KICAgKgogICAqICAgICAvLyBDcmVhdGUgdGhlIGhlaWdodGZpZWxkIHNoYXBlCiAgICogICAgIGNvbnN0IGhlaWdodGZpZWxkU2hhcGUgPSBuZXcgQ0FOTk9OLkhlaWdodGZpZWxkKGRhdGEsIHsKICAgKiAgICAgICAgIGVsZW1lbnRTaXplOiAxIC8vIERpc3RhbmNlIGJldHdlZW4gdGhlIGRhdGEgcG9pbnRzIGluIFggYW5kIFkgZGlyZWN0aW9ucwogICAqICAgICB9KQogICAqICAgICBjb25zdCBoZWlnaHRmaWVsZEJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBzaGFwZTogaGVpZ2h0ZmllbGRTaGFwZSB9KQogICAqICAgICB3b3JsZC5hZGRCb2R5KGhlaWdodGZpZWxkQm9keSkKICAgKi8KICBjbGFzcyBIZWlnaHRmaWVsZCBleHRlbmRzIFNoYXBlIHsKICAgIC8qKgogICAgICogQW4gYXJyYXkgb2YgbnVtYmVycywgb3IgaGVpZ2h0IHZhbHVlcywgdGhhdCBhcmUgc3ByZWFkIG91dCBhbG9uZyB0aGUgeCBheGlzLgogICAgICovCgogICAgLyoqCiAgICAgKiBNYXggdmFsdWUgb2YgdGhlIGRhdGEgcG9pbnRzIGluIHRoZSBkYXRhIGFycmF5LgogICAgICovCgogICAgLyoqCiAgICAgKiBNaW5pbXVtIHZhbHVlIG9mIHRoZSBkYXRhIHBvaW50cyBpbiB0aGUgZGF0YSBhcnJheS4KICAgICAqLwoKICAgIC8qKgogICAgICogV29ybGQgc3BhY2luZyBiZXR3ZWVuIHRoZSBkYXRhIHBvaW50cyBpbiBYIGFuZCBZIGRpcmVjdGlvbi4KICAgICAqIEB0b2RvIGVsZW1lbnRTaXplWCBhbmQgWQogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBAZGVmYXVsdCB0cnVlCiAgICAgKi8KCiAgICAvKioKICAgICAqIEBwYXJhbSBkYXRhIEFuIGFycmF5IG9mIG51bWJlcnMsIG9yIGhlaWdodCB2YWx1ZXMsIHRoYXQgYXJlIHNwcmVhZCBvdXQgYWxvbmcgdGhlIHggYXhpcy4KICAgICAqLwogICAgY29uc3RydWN0b3IoZGF0YSwgb3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBvcHRpb25zID0gVXRpbHMuZGVmYXVsdHMob3B0aW9ucywgewogICAgICAgIG1heFZhbHVlOiBudWxsLAogICAgICAgIG1pblZhbHVlOiBudWxsLAogICAgICAgIGVsZW1lbnRTaXplOiAxCiAgICAgIH0pOwogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuSEVJR0hURklFTEQKICAgICAgfSk7CiAgICAgIHRoaXMuZGF0YSA9IGRhdGE7CiAgICAgIHRoaXMubWF4VmFsdWUgPSBvcHRpb25zLm1heFZhbHVlOwogICAgICB0aGlzLm1pblZhbHVlID0gb3B0aW9ucy5taW5WYWx1ZTsKICAgICAgdGhpcy5lbGVtZW50U2l6ZSA9IG9wdGlvbnMuZWxlbWVudFNpemU7CgogICAgICBpZiAob3B0aW9ucy5taW5WYWx1ZSA9PT0gbnVsbCkgewogICAgICAgIHRoaXMudXBkYXRlTWluVmFsdWUoKTsKICAgICAgfQoKICAgICAgaWYgKG9wdGlvbnMubWF4VmFsdWUgPT09IG51bGwpIHsKICAgICAgICB0aGlzLnVwZGF0ZU1heFZhbHVlKCk7CiAgICAgIH0KCiAgICAgIHRoaXMuY2FjaGVFbmFibGVkID0gdHJ1ZTsKICAgICAgdGhpcy5waWxsYXJDb252ZXggPSBuZXcgQ29udmV4UG9seWhlZHJvbigpOwogICAgICB0aGlzLnBpbGxhck9mZnNldCA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTsgLy8gImlfal9pc1VwcGVyIiA9PiB7IGNvbnZleDogLi4uLCBvZmZzZXQ6IC4uLiB9CiAgICAgIC8vIGZvciBleGFtcGxlOgogICAgICAvLyBfY2FjaGVkUGlsbGFyc1siMF8yXzEiXQoKICAgICAgdGhpcy5fY2FjaGVkUGlsbGFycyA9IHt9OwogICAgfQogICAgLyoqCiAgICAgKiBDYWxsIHdoZW5ldmVyIHlvdSBjaGFuZ2UgdGhlIGRhdGEgYXJyYXkuCiAgICAgKi8KCgogICAgdXBkYXRlKCkgewogICAgICB0aGlzLl9jYWNoZWRQaWxsYXJzID0ge307CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSB0aGUgYG1pblZhbHVlYCBwcm9wZXJ0eQogICAgICovCgoKICAgIHVwZGF0ZU1pblZhbHVlKCkgewogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBsZXQgbWluVmFsdWUgPSBkYXRhWzBdWzBdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gZGF0YVtpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgY29uc3QgdiA9IGRhdGFbaV1bal07CgogICAgICAgICAgaWYgKHYgPCBtaW5WYWx1ZSkgewogICAgICAgICAgICBtaW5WYWx1ZSA9IHY7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLm1pblZhbHVlID0gbWluVmFsdWU7CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSB0aGUgYG1heFZhbHVlYCBwcm9wZXJ0eQogICAgICovCgoKICAgIHVwZGF0ZU1heFZhbHVlKCkgewogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBsZXQgbWF4VmFsdWUgPSBkYXRhWzBdWzBdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gZGF0YVtpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgY29uc3QgdiA9IGRhdGFbaV1bal07CgogICAgICAgICAgaWYgKHYgPiBtYXhWYWx1ZSkgewogICAgICAgICAgICBtYXhWYWx1ZSA9IHY7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLm1heFZhbHVlID0gbWF4VmFsdWU7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgaGVpZ2h0IHZhbHVlIGF0IGFuIGluZGV4LiBEb24ndCBmb3JnZXQgdG8gdXBkYXRlIG1heFZhbHVlIGFuZCBtaW5WYWx1ZSBhZnRlciB5b3UncmUgZG9uZS4KICAgICAqLwoKCiAgICBzZXRIZWlnaHRWYWx1ZUF0SW5kZXgoeGksIHlpLCB2YWx1ZSkgewogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBkYXRhW3hpXVt5aV0gPSB2YWx1ZTsgLy8gSW52YWxpZGF0ZSBjYWNoZQoKICAgICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZmFsc2UpOwoKICAgICAgaWYgKHhpID4gMCkgewogICAgICAgIHRoaXMuY2xlYXJDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSAtIDEsIHlpLCB0cnVlKTsKICAgICAgICB0aGlzLmNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGkgLSAxLCB5aSwgZmFsc2UpOwogICAgICB9CgogICAgICBpZiAoeWkgPiAwKSB7CiAgICAgICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSAtIDEsIHRydWUpOwogICAgICAgIHRoaXMuY2xlYXJDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWkgLSAxLCBmYWxzZSk7CiAgICAgIH0KCiAgICAgIGlmICh5aSA+IDAgJiYgeGkgPiAwKSB7CiAgICAgICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpIC0gMSwgeWkgLSAxLCB0cnVlKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBHZXQgbWF4L21pbiBpbiBhIHJlY3RhbmdsZSBpbiB0aGUgbWF0cml4IGRhdGEKICAgICAqIEBwYXJhbSByZXN1bHQgQW4gYXJyYXkgdG8gc3RvcmUgdGhlIHJlc3VsdHMgaW4uCiAgICAgKiBAcmV0dXJuIFRoZSByZXN1bHQgYXJyYXksIGlmIGl0IHdhcyBwYXNzZWQgaW4uIE1pbmltdW0gd2lsbCBiZSBhdCBwb3NpdGlvbiAwIGFuZCBtYXggYXQgMS4KICAgICAqLwoKCiAgICBnZXRSZWN0TWluTWF4KGlNaW5YLCBpTWluWSwgaU1heFgsIGlNYXhZLCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVzdWx0ID0gW107CiAgICAgIH0KCiAgICAgIC8vIEdldCBtYXggYW5kIG1pbiBvZiB0aGUgZGF0YQogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOyAvLyBTZXQgZmlyc3QgdmFsdWUKCiAgICAgIGxldCBtYXggPSB0aGlzLm1pblZhbHVlOwoKICAgICAgZm9yIChsZXQgaSA9IGlNaW5YOyBpIDw9IGlNYXhYOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gaU1pblk7IGogPD0gaU1heFk7IGorKykgewogICAgICAgICAgY29uc3QgaGVpZ2h0ID0gZGF0YVtpXVtqXTsKCiAgICAgICAgICBpZiAoaGVpZ2h0ID4gbWF4KSB7CiAgICAgICAgICAgIG1heCA9IGhlaWdodDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJlc3VsdFswXSA9IHRoaXMubWluVmFsdWU7CiAgICAgIHJlc3VsdFsxXSA9IG1heDsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBpbmRleCBvZiBhIGxvY2FsIHBvc2l0aW9uIG9uIHRoZSBoZWlnaHRmaWVsZC4gVGhlIGluZGV4ZXMgaW5kaWNhdGUgdGhlIHJlY3RhbmdsZXMsIHNvIGlmIHlvdXIgdGVycmFpbiBpcyBtYWRlIG9mIE4geCBOIGhlaWdodCBkYXRhIHBvaW50cywgeW91IHdpbGwgaGF2ZSByZWN0YW5nbGUgaW5kZXhlcyByYW5naW5nIGZyb20gMCB0byBOLTEuCiAgICAgKiBAcGFyYW0gcmVzdWx0IFR3by1lbGVtZW50IGFycmF5CiAgICAgKiBAcGFyYW0gY2xhbXAgSWYgdGhlIHBvc2l0aW9uIHNob3VsZCBiZSBjbGFtcGVkIHRvIHRoZSBoZWlnaHRmaWVsZCBlZGdlLgogICAgICovCgoKICAgIGdldEluZGV4T2ZQb3NpdGlvbih4LCB5LCByZXN1bHQsIGNsYW1wKSB7CiAgICAgIC8vIEdldCB0aGUgaW5kZXggb2YgdGhlIGRhdGEgcG9pbnRzIHRvIHRlc3QgYWdhaW5zdAogICAgICBjb25zdCB3ID0gdGhpcy5lbGVtZW50U2l6ZTsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgbGV0IHhpID0gTWF0aC5mbG9vcih4IC8gdyk7CiAgICAgIGxldCB5aSA9IE1hdGguZmxvb3IoeSAvIHcpOwogICAgICByZXN1bHRbMF0gPSB4aTsKICAgICAgcmVzdWx0WzFdID0geWk7CgogICAgICBpZiAoY2xhbXApIHsKICAgICAgICAvLyBDbGFtcCBpbmRleCB0byBlZGdlcwogICAgICAgIGlmICh4aSA8IDApIHsKICAgICAgICAgIHhpID0gMDsKICAgICAgICB9CgogICAgICAgIGlmICh5aSA8IDApIHsKICAgICAgICAgIHlpID0gMDsKICAgICAgICB9CgogICAgICAgIGlmICh4aSA+PSBkYXRhLmxlbmd0aCAtIDEpIHsKICAgICAgICAgIHhpID0gZGF0YS5sZW5ndGggLSAxOwogICAgICAgIH0KCiAgICAgICAgaWYgKHlpID49IGRhdGFbMF0ubGVuZ3RoIC0gMSkgewogICAgICAgICAgeWkgPSBkYXRhWzBdLmxlbmd0aCAtIDE7CiAgICAgICAgfQogICAgICB9IC8vIEJhaWwgb3V0IGlmIHdlIGFyZSBvdXQgb2YgdGhlIHRlcnJhaW4KCgogICAgICBpZiAoeGkgPCAwIHx8IHlpIDwgMCB8fCB4aSA+PSBkYXRhLmxlbmd0aCAtIDEgfHwgeWkgPj0gZGF0YVswXS5sZW5ndGggLSAxKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBnZXRUcmlhbmdsZUF0KHgsIHksIGVkZ2VDbGFtcCwgYSwgYiwgYykgewogICAgICBjb25zdCBpZHggPSBnZXRIZWlnaHRBdF9pZHg7CiAgICAgIHRoaXMuZ2V0SW5kZXhPZlBvc2l0aW9uKHgsIHksIGlkeCwgZWRnZUNsYW1wKTsKICAgICAgbGV0IHhpID0gaWR4WzBdOwogICAgICBsZXQgeWkgPSBpZHhbMV07CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7CgogICAgICBpZiAoZWRnZUNsYW1wKSB7CiAgICAgICAgeGkgPSBNYXRoLm1pbihkYXRhLmxlbmd0aCAtIDIsIE1hdGgubWF4KDAsIHhpKSk7CiAgICAgICAgeWkgPSBNYXRoLm1pbihkYXRhWzBdLmxlbmd0aCAtIDIsIE1hdGgubWF4KDAsIHlpKSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGVsZW1lbnRTaXplID0gdGhpcy5lbGVtZW50U2l6ZTsKICAgICAgY29uc3QgbG93ZXJEaXN0MiA9ICh4IC8gZWxlbWVudFNpemUgLSB4aSkgKiogMiArICh5IC8gZWxlbWVudFNpemUgLSB5aSkgKiogMjsKICAgICAgY29uc3QgdXBwZXJEaXN0MiA9ICh4IC8gZWxlbWVudFNpemUgLSAoeGkgKyAxKSkgKiogMiArICh5IC8gZWxlbWVudFNpemUgLSAoeWkgKyAxKSkgKiogMjsKICAgICAgY29uc3QgdXBwZXIgPSBsb3dlckRpc3QyID4gdXBwZXJEaXN0MjsKICAgICAgdGhpcy5nZXRUcmlhbmdsZSh4aSwgeWksIHVwcGVyLCBhLCBiLCBjKTsKICAgICAgcmV0dXJuIHVwcGVyOwogICAgfQoKICAgIGdldE5vcm1hbEF0KHgsIHksIGVkZ2VDbGFtcCwgcmVzdWx0KSB7CiAgICAgIGNvbnN0IGEgPSBnZXROb3JtYWxBdF9hOwogICAgICBjb25zdCBiID0gZ2V0Tm9ybWFsQXRfYjsKICAgICAgY29uc3QgYyA9IGdldE5vcm1hbEF0X2M7CiAgICAgIGNvbnN0IGUwID0gZ2V0Tm9ybWFsQXRfZTA7CiAgICAgIGNvbnN0IGUxID0gZ2V0Tm9ybWFsQXRfZTE7CiAgICAgIHRoaXMuZ2V0VHJpYW5nbGVBdCh4LCB5LCBlZGdlQ2xhbXAsIGEsIGIsIGMpOwogICAgICBiLnZzdWIoYSwgZTApOwogICAgICBjLnZzdWIoYSwgZTEpOwogICAgICBlMC5jcm9zcyhlMSwgcmVzdWx0KTsKICAgICAgcmVzdWx0Lm5vcm1hbGl6ZSgpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYW4gQUFCQiBvZiBhIHNxdWFyZSBpbiB0aGUgaGVpZ2h0ZmllbGQKICAgICAqIEBwYXJhbSB4aQogICAgICogQHBhcmFtIHlpCiAgICAgKiBAcGFyYW0gcmVzdWx0CiAgICAgKi8KCgogICAgZ2V0QWFiYkF0SW5kZXgoeGksIHlpLCBfcmVmKSB7CiAgICAgIGxldCB7CiAgICAgICAgbG93ZXJCb3VuZCwKICAgICAgICB1cHBlckJvdW5kCiAgICAgIH0gPSBfcmVmOwogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBjb25zdCBlbGVtZW50U2l6ZSA9IHRoaXMuZWxlbWVudFNpemU7CiAgICAgIGxvd2VyQm91bmQuc2V0KHhpICogZWxlbWVudFNpemUsIHlpICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpXSk7CiAgICAgIHVwcGVyQm91bmQuc2V0KCh4aSArIDEpICogZWxlbWVudFNpemUsICh5aSArIDEpICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aSArIDFdKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBoZWlnaHQgaW4gdGhlIGhlaWdodGZpZWxkIGF0IGEgZ2l2ZW4gcG9zaXRpb24KICAgICAqLwoKCiAgICBnZXRIZWlnaHRBdCh4LCB5LCBlZGdlQ2xhbXApIHsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgY29uc3QgYSA9IGdldEhlaWdodEF0X2E7CiAgICAgIGNvbnN0IGIgPSBnZXRIZWlnaHRBdF9iOwogICAgICBjb25zdCBjID0gZ2V0SGVpZ2h0QXRfYzsKICAgICAgY29uc3QgaWR4ID0gZ2V0SGVpZ2h0QXRfaWR4OwogICAgICB0aGlzLmdldEluZGV4T2ZQb3NpdGlvbih4LCB5LCBpZHgsIGVkZ2VDbGFtcCk7CiAgICAgIGxldCB4aSA9IGlkeFswXTsKICAgICAgbGV0IHlpID0gaWR4WzFdOwoKICAgICAgaWYgKGVkZ2VDbGFtcCkgewogICAgICAgIHhpID0gTWF0aC5taW4oZGF0YS5sZW5ndGggLSAyLCBNYXRoLm1heCgwLCB4aSkpOwogICAgICAgIHlpID0gTWF0aC5taW4oZGF0YVswXS5sZW5ndGggLSAyLCBNYXRoLm1heCgwLCB5aSkpOwogICAgICB9CgogICAgICBjb25zdCB1cHBlciA9IHRoaXMuZ2V0VHJpYW5nbGVBdCh4LCB5LCBlZGdlQ2xhbXAsIGEsIGIsIGMpOwogICAgICBiYXJ5Y2VudHJpY1dlaWdodHMoeCwgeSwgYS54LCBhLnksIGIueCwgYi55LCBjLngsIGMueSwgZ2V0SGVpZ2h0QXRfd2VpZ2h0cyk7CiAgICAgIGNvbnN0IHcgPSBnZXRIZWlnaHRBdF93ZWlnaHRzOwoKICAgICAgaWYgKHVwcGVyKSB7CiAgICAgICAgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzCiAgICAgICAgcmV0dXJuIGRhdGFbeGkgKyAxXVt5aSArIDFdICogdy54ICsgZGF0YVt4aV1beWkgKyAxXSAqIHcueSArIGRhdGFbeGkgKyAxXVt5aV0gKiB3Lno7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzCiAgICAgICAgcmV0dXJuIGRhdGFbeGldW3lpXSAqIHcueCArIGRhdGFbeGkgKyAxXVt5aV0gKiB3LnkgKyBkYXRhW3hpXVt5aSArIDFdICogdy56OwogICAgICB9CiAgICB9CgogICAgZ2V0Q2FjaGVDb252ZXhUcmlhbmdsZVBpbGxhcktleSh4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpIHsKICAgICAgcmV0dXJuIGAke3hpfV8ke3lpfV8ke2dldFVwcGVyVHJpYW5nbGUgPyAxIDogMH1gOwogICAgfQoKICAgIGdldENhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSkgewogICAgICByZXR1cm4gdGhpcy5fY2FjaGVkUGlsbGFyc1t0aGlzLmdldENhY2hlQ29udmV4VHJpYW5nbGVQaWxsYXJLZXkoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlKV07CiAgICB9CgogICAgc2V0Q2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlLCBjb252ZXgsIG9mZnNldCkgewogICAgICB0aGlzLl9jYWNoZWRQaWxsYXJzW3RoaXMuZ2V0Q2FjaGVDb252ZXhUcmlhbmdsZVBpbGxhcktleSh4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpXSA9IHsKICAgICAgICBjb252ZXgsCiAgICAgICAgb2Zmc2V0CiAgICAgIH07CiAgICB9CgogICAgY2xlYXJDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpIHsKICAgICAgZGVsZXRlIHRoaXMuX2NhY2hlZFBpbGxhcnNbdGhpcy5nZXRDYWNoZUNvbnZleFRyaWFuZ2xlUGlsbGFyS2V5KHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSldOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYSB0cmlhbmdsZSBmcm9tIHRoZSBoZWlnaHRmaWVsZAogICAgICovCgoKICAgIGdldFRyaWFuZ2xlKHhpLCB5aSwgdXBwZXIsIGEsIGIsIGMpIHsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgY29uc3QgZWxlbWVudFNpemUgPSB0aGlzLmVsZW1lbnRTaXplOwoKICAgICAgaWYgKHVwcGVyKSB7CiAgICAgICAgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzCiAgICAgICAgYS5zZXQoKHhpICsgMSkgKiBlbGVtZW50U2l6ZSwgKHlpICsgMSkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpICsgMV0pOwogICAgICAgIGIuc2V0KHhpICogZWxlbWVudFNpemUsICh5aSArIDEpICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpICsgMV0pOwogICAgICAgIGMuc2V0KCh4aSArIDEpICogZWxlbWVudFNpemUsIHlpICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aV0pOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIFRvcCB0cmlhbmdsZSB2ZXJ0cwogICAgICAgIGEuc2V0KHhpICogZWxlbWVudFNpemUsIHlpICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpXSk7CiAgICAgICAgYi5zZXQoKHhpICsgMSkgKiBlbGVtZW50U2l6ZSwgeWkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpXSk7CiAgICAgICAgYy5zZXQoeGkgKiBlbGVtZW50U2l6ZSwgKHlpICsgMSkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aV1beWkgKyAxXSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogR2V0IGEgdHJpYW5nbGUgaW4gdGhlIHRlcnJhaW4gaW4gdGhlIGZvcm0gb2YgYSB0cmlhbmd1bGFyIGNvbnZleCBzaGFwZS4KICAgICAqLwoKCiAgICBnZXRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpIHsKICAgICAgbGV0IHJlc3VsdCA9IHRoaXMucGlsbGFyQ29udmV4OwogICAgICBsZXQgb2Zmc2V0UmVzdWx0ID0gdGhpcy5waWxsYXJPZmZzZXQ7CgogICAgICBpZiAodGhpcy5jYWNoZUVuYWJsZWQpIHsKICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5nZXRDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpOwoKICAgICAgICBpZiAoZGF0YSkgewogICAgICAgICAgdGhpcy5waWxsYXJDb252ZXggPSBkYXRhLmNvbnZleDsKICAgICAgICAgIHRoaXMucGlsbGFyT2Zmc2V0ID0gZGF0YS5vZmZzZXQ7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICByZXN1bHQgPSBuZXcgQ29udmV4UG9seWhlZHJvbigpOwogICAgICAgIG9mZnNldFJlc3VsdCA9IG5ldyBWZWMzKCk7CiAgICAgICAgdGhpcy5waWxsYXJDb252ZXggPSByZXN1bHQ7CiAgICAgICAgdGhpcy5waWxsYXJPZmZzZXQgPSBvZmZzZXRSZXN1bHQ7CiAgICAgIH0KCiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7CiAgICAgIGNvbnN0IGVsZW1lbnRTaXplID0gdGhpcy5lbGVtZW50U2l6ZTsKICAgICAgY29uc3QgZmFjZXMgPSByZXN1bHQuZmFjZXM7IC8vIFJldXNlIHZlcnRzIGlmIHBvc3NpYmxlCgogICAgICByZXN1bHQudmVydGljZXMubGVuZ3RoID0gNjsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNjsgaSsrKSB7CiAgICAgICAgaWYgKCFyZXN1bHQudmVydGljZXNbaV0pIHsKICAgICAgICAgIHJlc3VsdC52ZXJ0aWNlc1tpXSA9IG5ldyBWZWMzKCk7CiAgICAgICAgfQogICAgICB9IC8vIFJldXNlIGZhY2VzIGlmIHBvc3NpYmxlCgoKICAgICAgZmFjZXMubGVuZ3RoID0gNTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSB7CiAgICAgICAgaWYgKCFmYWNlc1tpXSkgewogICAgICAgICAgZmFjZXNbaV0gPSBbXTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGNvbnN0IHZlcnRzID0gcmVzdWx0LnZlcnRpY2VzOwogICAgICBjb25zdCBoID0gKE1hdGgubWluKGRhdGFbeGldW3lpXSwgZGF0YVt4aSArIDFdW3lpXSwgZGF0YVt4aV1beWkgKyAxXSwgZGF0YVt4aSArIDFdW3lpICsgMV0pIC0gdGhpcy5taW5WYWx1ZSkgLyAyICsgdGhpcy5taW5WYWx1ZTsKCiAgICAgIGlmICghZ2V0VXBwZXJUcmlhbmdsZSkgewogICAgICAgIC8vIENlbnRlciBvZiB0aGUgdHJpYW5nbGUgcGlsbGFyIC0gYWxsIHBvbHlnb25zIGFyZSBnaXZlbiByZWxhdGl2ZSB0byB0aGlzIG9uZQogICAgICAgIG9mZnNldFJlc3VsdC5zZXQoKHhpICsgMC4yNSkgKiBlbGVtZW50U2l6ZSwgLy8gc29ydCBvZiBjZW50ZXIgb2YgYSB0cmlhbmdsZQogICAgICAgICh5aSArIDAuMjUpICogZWxlbWVudFNpemUsIGggLy8gdmVydGljYWwgY2VudGVyCiAgICAgICAgKTsgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzCgogICAgICAgIHZlcnRzWzBdLnNldCgtMC4yNSAqIGVsZW1lbnRTaXplLCAtMC4yNSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpXVt5aV0gLSBoKTsKICAgICAgICB2ZXJ0c1sxXS5zZXQoMC43NSAqIGVsZW1lbnRTaXplLCAtMC4yNSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpICsgMV1beWldIC0gaCk7CiAgICAgICAgdmVydHNbMl0uc2V0KC0wLjI1ICogZWxlbWVudFNpemUsIDAuNzUgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aV1beWkgKyAxXSAtIGgpOyAvLyBib3R0b20gdHJpYW5nbGUgdmVydHMKCiAgICAgICAgdmVydHNbM10uc2V0KC0wLjI1ICogZWxlbWVudFNpemUsIC0wLjI1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpOwogICAgICAgIHZlcnRzWzRdLnNldCgwLjc1ICogZWxlbWVudFNpemUsIC0wLjI1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpOwogICAgICAgIHZlcnRzWzVdLnNldCgtMC4yNSAqIGVsZW1lbnRTaXplLCAwLjc1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpOyAvLyB0b3AgdHJpYW5nbGUKCiAgICAgICAgZmFjZXNbMF1bMF0gPSAwOwogICAgICAgIGZhY2VzWzBdWzFdID0gMTsKICAgICAgICBmYWNlc1swXVsyXSA9IDI7IC8vIGJvdHRvbSB0cmlhbmdsZQoKICAgICAgICBmYWNlc1sxXVswXSA9IDU7CiAgICAgICAgZmFjZXNbMV1bMV0gPSA0OwogICAgICAgIGZhY2VzWzFdWzJdID0gMzsgLy8gLXggZmFjaW5nIHF1YWQKCiAgICAgICAgZmFjZXNbMl1bMF0gPSAwOwogICAgICAgIGZhY2VzWzJdWzFdID0gMjsKICAgICAgICBmYWNlc1syXVsyXSA9IDU7CiAgICAgICAgZmFjZXNbMl1bM10gPSAzOyAvLyAteSBmYWNpbmcgcXVhZAoKICAgICAgICBmYWNlc1szXVswXSA9IDE7CiAgICAgICAgZmFjZXNbM11bMV0gPSAwOwogICAgICAgIGZhY2VzWzNdWzJdID0gMzsKICAgICAgICBmYWNlc1szXVszXSA9IDQ7IC8vICt4eSBmYWNpbmcgcXVhZAoKICAgICAgICBmYWNlc1s0XVswXSA9IDQ7CiAgICAgICAgZmFjZXNbNF1bMV0gPSA1OwogICAgICAgIGZhY2VzWzRdWzJdID0gMjsKICAgICAgICBmYWNlc1s0XVszXSA9IDE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gQ2VudGVyIG9mIHRoZSB0cmlhbmdsZSBwaWxsYXIgLSBhbGwgcG9seWdvbnMgYXJlIGdpdmVuIHJlbGF0aXZlIHRvIHRoaXMgb25lCiAgICAgICAgb2Zmc2V0UmVzdWx0LnNldCgoeGkgKyAwLjc1KSAqIGVsZW1lbnRTaXplLCAvLyBzb3J0IG9mIGNlbnRlciBvZiBhIHRyaWFuZ2xlCiAgICAgICAgKHlpICsgMC43NSkgKiBlbGVtZW50U2l6ZSwgaCAvLyB2ZXJ0aWNhbCBjZW50ZXIKICAgICAgICApOyAvLyBUb3AgdHJpYW5nbGUgdmVydHMKCiAgICAgICAgdmVydHNbMF0uc2V0KDAuMjUgKiBlbGVtZW50U2l6ZSwgMC4yNSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpICsgMV1beWkgKyAxXSAtIGgpOwogICAgICAgIHZlcnRzWzFdLnNldCgtMC43NSAqIGVsZW1lbnRTaXplLCAwLjI1ICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpICsgMV0gLSBoKTsKICAgICAgICB2ZXJ0c1syXS5zZXQoMC4yNSAqIGVsZW1lbnRTaXplLCAtMC43NSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpICsgMV1beWldIC0gaCk7IC8vIGJvdHRvbSB0cmlhbmdsZSB2ZXJ0cwoKICAgICAgICB2ZXJ0c1szXS5zZXQoMC4yNSAqIGVsZW1lbnRTaXplLCAwLjI1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpOwogICAgICAgIHZlcnRzWzRdLnNldCgtMC43NSAqIGVsZW1lbnRTaXplLCAwLjI1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpOwogICAgICAgIHZlcnRzWzVdLnNldCgwLjI1ICogZWxlbWVudFNpemUsIC0wLjc1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpOyAvLyBUb3AgdHJpYW5nbGUKCiAgICAgICAgZmFjZXNbMF1bMF0gPSAwOwogICAgICAgIGZhY2VzWzBdWzFdID0gMTsKICAgICAgICBmYWNlc1swXVsyXSA9IDI7IC8vIGJvdHRvbSB0cmlhbmdsZQoKICAgICAgICBmYWNlc1sxXVswXSA9IDU7CiAgICAgICAgZmFjZXNbMV1bMV0gPSA0OwogICAgICAgIGZhY2VzWzFdWzJdID0gMzsgLy8gK3ggZmFjaW5nIHF1YWQKCiAgICAgICAgZmFjZXNbMl1bMF0gPSAyOwogICAgICAgIGZhY2VzWzJdWzFdID0gNTsKICAgICAgICBmYWNlc1syXVsyXSA9IDM7CiAgICAgICAgZmFjZXNbMl1bM10gPSAwOyAvLyAreSBmYWNpbmcgcXVhZAoKICAgICAgICBmYWNlc1szXVswXSA9IDM7CiAgICAgICAgZmFjZXNbM11bMV0gPSA0OwogICAgICAgIGZhY2VzWzNdWzJdID0gMTsKICAgICAgICBmYWNlc1szXVszXSA9IDA7IC8vIC14eSBmYWNpbmcgcXVhZAoKICAgICAgICBmYWNlc1s0XVswXSA9IDE7CiAgICAgICAgZmFjZXNbNF1bMV0gPSA0OwogICAgICAgIGZhY2VzWzRdWzJdID0gNTsKICAgICAgICBmYWNlc1s0XVszXSA9IDI7CiAgICAgIH0KCiAgICAgIHJlc3VsdC5jb21wdXRlTm9ybWFscygpOwogICAgICByZXN1bHQuY29tcHV0ZUVkZ2VzKCk7CiAgICAgIHJlc3VsdC51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgICB0aGlzLnNldENhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSwgcmVzdWx0LCBvZmZzZXRSZXN1bHQpOwogICAgfQoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnNldCgwLCAwLCAwKTsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KCiAgICB2b2x1bWUoKSB7CiAgICAgIHJldHVybiAoLy8gVGhlIHRlcnJhaW4gaXMgaW5maW5pdGUKICAgICAgICBOdW1iZXIuTUFYX1ZBTFVFCiAgICAgICk7CiAgICB9CgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgLyoqIEBUT0RPIGRvIGl0IHByb3Blcmx5ICovCiAgICAgIG1pbi5zZXQoLU51bWJlci5NQVhfVkFMVUUsIC1OdW1iZXIuTUFYX1ZBTFVFLCAtTnVtYmVyLk1BWF9WQUxVRSk7CiAgICAgIG1heC5zZXQoTnVtYmVyLk1BWF9WQUxVRSwgTnVtYmVyLk1BWF9WQUxVRSwgTnVtYmVyLk1BWF9WQUxVRSk7CiAgICB9CgogICAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7CiAgICAgIC8vIFVzZSB0aGUgYm91bmRpbmcgYm94IG9mIHRoZSBtaW4vbWF4IHZhbHVlcwogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBjb25zdCBzID0gdGhpcy5lbGVtZW50U2l6ZTsKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IG5ldyBWZWMzKGRhdGEubGVuZ3RoICogcywgZGF0YVswXS5sZW5ndGggKiBzLCBNYXRoLm1heChNYXRoLmFicyh0aGlzLm1heFZhbHVlKSwgTWF0aC5hYnModGhpcy5taW5WYWx1ZSkpKS5sZW5ndGgoKTsKICAgIH0KICAgIC8qKgogICAgICogU2V0cyB0aGUgaGVpZ2h0IHZhbHVlcyBmcm9tIGFuIGltYWdlLiBDdXJyZW50bHkgb25seSBzdXBwb3J0ZWQgaW4gYnJvd3Nlci4KICAgICAqLwoKCiAgICBzZXRIZWlnaHRzRnJvbUltYWdlKGltYWdlLCBzY2FsZSkgewogICAgICBjb25zdCB7CiAgICAgICAgeCwKICAgICAgICB6LAogICAgICAgIHkKICAgICAgfSA9IHNjYWxlOwogICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsKICAgICAgY2FudmFzLndpZHRoID0gaW1hZ2Uud2lkdGg7CiAgICAgIGNhbnZhcy5oZWlnaHQgPSBpbWFnZS5oZWlnaHQ7CiAgICAgIGNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgICAgY29udGV4dC5kcmF3SW1hZ2UoaW1hZ2UsIDAsIDApOwogICAgICBjb25zdCBpbWFnZURhdGEgPSBjb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCBpbWFnZS53aWR0aCwgaW1hZ2UuaGVpZ2h0KTsKICAgICAgY29uc3QgbWF0cml4ID0gdGhpcy5kYXRhOwogICAgICBtYXRyaXgubGVuZ3RoID0gMDsKICAgICAgdGhpcy5lbGVtZW50U2l6ZSA9IE1hdGguYWJzKHgpIC8gaW1hZ2VEYXRhLndpZHRoOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbWFnZURhdGEuaGVpZ2h0OyBpKyspIHsKICAgICAgICBjb25zdCByb3cgPSBbXTsKCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBpbWFnZURhdGEud2lkdGg7IGorKykgewogICAgICAgICAgY29uc3QgYSA9IGltYWdlRGF0YS5kYXRhWyhpICogaW1hZ2VEYXRhLmhlaWdodCArIGopICogNF07CiAgICAgICAgICBjb25zdCBiID0gaW1hZ2VEYXRhLmRhdGFbKGkgKiBpbWFnZURhdGEuaGVpZ2h0ICsgaikgKiA0ICsgMV07CiAgICAgICAgICBjb25zdCBjID0gaW1hZ2VEYXRhLmRhdGFbKGkgKiBpbWFnZURhdGEuaGVpZ2h0ICsgaikgKiA0ICsgMl07CiAgICAgICAgICBjb25zdCBoZWlnaHQgPSAoYSArIGIgKyBjKSAvIDQgLyAyNTUgKiB6OwoKICAgICAgICAgIGlmICh4IDwgMCkgewogICAgICAgICAgICByb3cucHVzaChoZWlnaHQpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcm93LnVuc2hpZnQoaGVpZ2h0KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICh5IDwgMCkgewogICAgICAgICAgbWF0cml4LnVuc2hpZnQocm93KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbWF0cml4LnB1c2gocm93KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMudXBkYXRlTWF4VmFsdWUoKTsKICAgICAgdGhpcy51cGRhdGVNaW5WYWx1ZSgpOwogICAgICB0aGlzLnVwZGF0ZSgpOwogICAgfQoKICB9CiAgY29uc3QgZ2V0SGVpZ2h0QXRfaWR4ID0gW107CiAgY29uc3QgZ2V0SGVpZ2h0QXRfd2VpZ2h0cyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0SGVpZ2h0QXRfYSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0SGVpZ2h0QXRfYiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0SGVpZ2h0QXRfYyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0Tm9ybWFsQXRfYSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0Tm9ybWFsQXRfYiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0Tm9ybWFsQXRfYyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0Tm9ybWFsQXRfZTAgPSBuZXcgVmVjMygpOwogIGNvbnN0IGdldE5vcm1hbEF0X2UxID0gbmV3IFZlYzMoKTsgLy8gZnJvbSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9CYXJ5Y2VudHJpY19jb29yZGluYXRlX3N5c3RlbQoKICBmdW5jdGlvbiBiYXJ5Y2VudHJpY1dlaWdodHMoeCwgeSwgYXgsIGF5LCBieCwgYnksIGN4LCBjeSwgcmVzdWx0KSB7CiAgICByZXN1bHQueCA9ICgoYnkgLSBjeSkgKiAoeCAtIGN4KSArIChjeCAtIGJ4KSAqICh5IC0gY3kpKSAvICgoYnkgLSBjeSkgKiAoYXggLSBjeCkgKyAoY3ggLSBieCkgKiAoYXkgLSBjeSkpOwogICAgcmVzdWx0LnkgPSAoKGN5IC0gYXkpICogKHggLSBjeCkgKyAoYXggLSBjeCkgKiAoeSAtIGN5KSkgLyAoKGJ5IC0gY3kpICogKGF4IC0gY3gpICsgKGN4IC0gYngpICogKGF5IC0gY3kpKTsKICAgIHJlc3VsdC56ID0gMSAtIHJlc3VsdC54IC0gcmVzdWx0Lnk7CiAgfQoKICAvKioKICAgKiBPY3RyZWVOb2RlCiAgICovCiAgY2xhc3MgT2N0cmVlTm9kZSB7CiAgICAvKiogVGhlIHJvb3Qgbm9kZSAqLwoKICAgIC8qKiBCb3VuZGFyeSBvZiB0aGlzIG5vZGUgKi8KCiAgICAvKiogQ29udGFpbmVkIGRhdGEgYXQgdGhlIGN1cnJlbnQgbm9kZSBsZXZlbCAqLwoKICAgIC8qKiBDaGlsZHJlbiB0byB0aGlzIG5vZGUgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgdGhpcy5yb290ID0gb3B0aW9ucy5yb290IHx8IG51bGw7CiAgICAgIHRoaXMuYWFiYiA9IG9wdGlvbnMuYWFiYiA/IG9wdGlvbnMuYWFiYi5jbG9uZSgpIDogbmV3IEFBQkIoKTsKICAgICAgdGhpcy5kYXRhID0gW107CiAgICAgIHRoaXMuY2hpbGRyZW4gPSBbXTsKICAgIH0KICAgIC8qKgogICAgICogcmVzZXQKICAgICAqLwoKCiAgICByZXNldCgpIHsKICAgICAgdGhpcy5jaGlsZHJlbi5sZW5ndGggPSB0aGlzLmRhdGEubGVuZ3RoID0gMDsKICAgIH0KICAgIC8qKgogICAgICogSW5zZXJ0IGRhdGEgaW50byB0aGlzIG5vZGUKICAgICAqIEByZXR1cm4gVHJ1ZSBpZiBzdWNjZXNzZnVsLCBvdGhlcndpc2UgZmFsc2UKICAgICAqLwoKCiAgICBpbnNlcnQoYWFiYiwgZWxlbWVudERhdGEsIGxldmVsKSB7CiAgICAgIGlmIChsZXZlbCA9PT0gdm9pZCAwKSB7CiAgICAgICAgbGV2ZWwgPSAwOwogICAgICB9CgogICAgICBjb25zdCBub2RlRGF0YSA9IHRoaXMuZGF0YTsgLy8gSWdub3JlIG9iamVjdHMgdGhhdCBkbyBub3QgYmVsb25nIGluIHRoaXMgbm9kZQoKICAgICAgaWYgKCF0aGlzLmFhYmIuY29udGFpbnMoYWFiYikpIHsKICAgICAgICByZXR1cm4gZmFsc2U7IC8vIG9iamVjdCBjYW5ub3QgYmUgYWRkZWQKICAgICAgfQoKICAgICAgY29uc3QgY2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuOwogICAgICBjb25zdCBtYXhEZXB0aCA9IHRoaXMubWF4RGVwdGggfHwgdGhpcy5yb290Lm1heERlcHRoOwoKICAgICAgaWYgKGxldmVsIDwgbWF4RGVwdGgpIHsKICAgICAgICAvLyBTdWJkaXZpZGUgaWYgdGhlcmUgYXJlIG5vIGNoaWxkcmVuIHlldAogICAgICAgIGxldCBzdWJkaXZpZGVkID0gZmFsc2U7CgogICAgICAgIGlmICghY2hpbGRyZW4ubGVuZ3RoKSB7CiAgICAgICAgICB0aGlzLnN1YmRpdmlkZSgpOwogICAgICAgICAgc3ViZGl2aWRlZCA9IHRydWU7CiAgICAgICAgfSAvLyBhZGQgdG8gd2hpY2hldmVyIG5vZGUgd2lsbCBhY2NlcHQgaXQKCgogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSA4OyBpKyspIHsKICAgICAgICAgIGlmIChjaGlsZHJlbltpXS5pbnNlcnQoYWFiYiwgZWxlbWVudERhdGEsIGxldmVsICsgMSkpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoc3ViZGl2aWRlZCkgewogICAgICAgICAgLy8gTm8gY2hpbGRyZW4gYWNjZXB0ZWQhIE1pZ2h0IGFzIHdlbGwganVzdCByZW1vdmUgZW0gc2luY2UgdGhleSBjb250YWluIG5vbmUKICAgICAgICAgIGNoaWxkcmVuLmxlbmd0aCA9IDA7CiAgICAgICAgfQogICAgICB9IC8vIFRvbyBkZWVwLCBvciBjaGlsZHJlbiBkaWRudCB3YW50IGl0LiBhZGQgaXQgaW4gY3VycmVudCBub2RlCgoKICAgICAgbm9kZURhdGEucHVzaChlbGVtZW50RGF0YSk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBDcmVhdGUgOCBlcXVhbGx5IHNpemVkIGNoaWxkcmVuIG5vZGVzIGFuZCBwdXQgdGhlbSBpbiB0aGUgYGNoaWxkcmVuYCBhcnJheS4KICAgICAqLwoKCiAgICBzdWJkaXZpZGUoKSB7CiAgICAgIGNvbnN0IGFhYmIgPSB0aGlzLmFhYmI7CiAgICAgIGNvbnN0IGwgPSBhYWJiLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSBhYWJiLnVwcGVyQm91bmQ7CiAgICAgIGNvbnN0IGNoaWxkcmVuID0gdGhpcy5jaGlsZHJlbjsKICAgICAgY2hpbGRyZW4ucHVzaChuZXcgT2N0cmVlTm9kZSh7CiAgICAgICAgYWFiYjogbmV3IEFBQkIoewogICAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMCwgMCwgMCkKICAgICAgICB9KQogICAgICB9KSwgbmV3IE9jdHJlZU5vZGUoewogICAgICAgIGFhYmI6IG5ldyBBQUJCKHsKICAgICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDEsIDAsIDApCiAgICAgICAgfSkKICAgICAgfSksIG5ldyBPY3RyZWVOb2RlKHsKICAgICAgICBhYWJiOiBuZXcgQUFCQih7CiAgICAgICAgICBsb3dlckJvdW5kOiBuZXcgVmVjMygxLCAxLCAwKQogICAgICAgIH0pCiAgICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7CiAgICAgICAgYWFiYjogbmV3IEFBQkIoewogICAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMSwgMSwgMSkKICAgICAgICB9KQogICAgICB9KSwgbmV3IE9jdHJlZU5vZGUoewogICAgICAgIGFhYmI6IG5ldyBBQUJCKHsKICAgICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDAsIDEsIDEpCiAgICAgICAgfSkKICAgICAgfSksIG5ldyBPY3RyZWVOb2RlKHsKICAgICAgICBhYWJiOiBuZXcgQUFCQih7CiAgICAgICAgICBsb3dlckJvdW5kOiBuZXcgVmVjMygwLCAwLCAxKQogICAgICAgIH0pCiAgICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7CiAgICAgICAgYWFiYjogbmV3IEFBQkIoewogICAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMSwgMCwgMSkKICAgICAgICB9KQogICAgICB9KSwgbmV3IE9jdHJlZU5vZGUoewogICAgICAgIGFhYmI6IG5ldyBBQUJCKHsKICAgICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDAsIDEsIDApCiAgICAgICAgfSkKICAgICAgfSkpOwogICAgICB1LnZzdWIobCwgaGFsZkRpYWdvbmFsKTsKICAgICAgaGFsZkRpYWdvbmFsLnNjYWxlKDAuNSwgaGFsZkRpYWdvbmFsKTsKICAgICAgY29uc3Qgcm9vdCA9IHRoaXMucm9vdCB8fCB0aGlzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDg7IGkrKykgewogICAgICAgIGNvbnN0IGNoaWxkID0gY2hpbGRyZW5baV07IC8vIFNldCBjdXJyZW50IG5vZGUgYXMgcm9vdAoKICAgICAgICBjaGlsZC5yb290ID0gcm9vdDsgLy8gQ29tcHV0ZSBib3VuZHMKCiAgICAgICAgY29uc3QgbG93ZXJCb3VuZCA9IGNoaWxkLmFhYmIubG93ZXJCb3VuZDsKICAgICAgICBsb3dlckJvdW5kLnggKj0gaGFsZkRpYWdvbmFsLng7CiAgICAgICAgbG93ZXJCb3VuZC55ICo9IGhhbGZEaWFnb25hbC55OwogICAgICAgIGxvd2VyQm91bmQueiAqPSBoYWxmRGlhZ29uYWwuejsKICAgICAgICBsb3dlckJvdW5kLnZhZGQobCwgbG93ZXJCb3VuZCk7IC8vIFVwcGVyIGJvdW5kIGlzIGFsd2F5cyBsb3dlciBib3VuZCArIGhhbGZEaWFnb25hbAoKICAgICAgICBsb3dlckJvdW5kLnZhZGQoaGFsZkRpYWdvbmFsLCBjaGlsZC5hYWJiLnVwcGVyQm91bmQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbGwgZGF0YSwgcG90ZW50aWFsbHkgd2l0aGluIGFuIEFBQkIKICAgICAqIEByZXR1cm4gVGhlICJyZXN1bHQiIG9iamVjdAogICAgICovCgoKICAgIGFhYmJRdWVyeShhYWJiLCByZXN1bHQpIHsKICAgICAgdGhpcy5kYXRhOyAvLyBhYm9ydCBpZiB0aGUgcmFuZ2UgZG9lcyBub3QgaW50ZXJzZWN0IHRoaXMgbm9kZQogICAgICAvLyBpZiAoIXRoaXMuYWFiYi5vdmVybGFwcyhhYWJiKSl7CiAgICAgIC8vICAgICByZXR1cm4gcmVzdWx0OwogICAgICAvLyB9CiAgICAgIC8vIEFkZCBvYmplY3RzIGF0IHRoaXMgbGV2ZWwKICAgICAgLy8gQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkocmVzdWx0LCBub2RlRGF0YSk7CiAgICAgIC8vIEFkZCBjaGlsZCBkYXRhCiAgICAgIC8vIEB0b2RvIHVud3JhcCByZWN1cnNpb24gaW50byBhIHF1ZXVlIC8gbG9vcCwgdGhhdCdzIGZhc3RlciBpbiBKUwoKICAgICAgdGhpcy5jaGlsZHJlbjsgLy8gZm9yIChsZXQgaSA9IDAsIE4gPSB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgIC8vICAgICBjaGlsZHJlbltpXS5hYWJiUXVlcnkoYWFiYiwgcmVzdWx0KTsKICAgICAgLy8gfQoKICAgICAgY29uc3QgcXVldWUgPSBbdGhpc107CgogICAgICB3aGlsZSAocXVldWUubGVuZ3RoKSB7CiAgICAgICAgY29uc3Qgbm9kZSA9IHF1ZXVlLnBvcCgpOwoKICAgICAgICBpZiAobm9kZS5hYWJiLm92ZXJsYXBzKGFhYmIpKSB7CiAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShyZXN1bHQsIG5vZGUuZGF0YSk7CiAgICAgICAgfQoKICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShxdWV1ZSwgbm9kZS5jaGlsZHJlbik7CiAgICAgIH0KCiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbGwgZGF0YSwgcG90ZW50aWFsbHkgaW50ZXJzZWN0ZWQgYnkgYSByYXkuCiAgICAgKiBAcmV0dXJuIFRoZSAicmVzdWx0IiBvYmplY3QKICAgICAqLwoKCiAgICByYXlRdWVyeShyYXksIHRyZWVUcmFuc2Zvcm0sIHJlc3VsdCkgewogICAgICAvLyBVc2UgYWFiYiBxdWVyeSBmb3Igbm93LgoKICAgICAgLyoqIEB0b2RvIGltcGxlbWVudCByZWFsIHJheSBxdWVyeSB3aGljaCBuZWVkcyBsZXNzIGxvb2t1cHMgKi8KICAgICAgcmF5LmdldEFBQkIodG1wQUFCQik7CiAgICAgIHRtcEFBQkIudG9Mb2NhbEZyYW1lKHRyZWVUcmFuc2Zvcm0sIHRtcEFBQkIpOwogICAgICB0aGlzLmFhYmJRdWVyeSh0bXBBQUJCLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiByZW1vdmVFbXB0eU5vZGVzCiAgICAgKi8KCgogICAgcmVtb3ZlRW1wdHlOb2RlcygpIHsKICAgICAgZm9yIChsZXQgaSA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICB0aGlzLmNoaWxkcmVuW2ldLnJlbW92ZUVtcHR5Tm9kZXMoKTsKCiAgICAgICAgaWYgKCF0aGlzLmNoaWxkcmVuW2ldLmNoaWxkcmVuLmxlbmd0aCAmJiAhdGhpcy5jaGlsZHJlbltpXS5kYXRhLmxlbmd0aCkgewogICAgICAgICAgdGhpcy5jaGlsZHJlbi5zcGxpY2UoaSwgMSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogIH0KICAvKioKICAgKiBPY3RyZWUKICAgKi8KCgogIGNsYXNzIE9jdHJlZSBleHRlbmRzIE9jdHJlZU5vZGUgewogICAgLyoqCiAgICAgKiBNYXhpbXVtIHN1YmRpdmlzaW9uIGRlcHRoCiAgICAgKiBAZGVmYXVsdCA4CiAgICAgKi8KCiAgICAvKioKICAgICAqIEBwYXJhbSBhYWJiIFRoZSB0b3RhbCBBQUJCIG9mIHRoZSB0cmVlCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGFhYmIsIG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgc3VwZXIoewogICAgICAgIHJvb3Q6IG51bGwsCiAgICAgICAgYWFiYgogICAgICB9KTsKICAgICAgdGhpcy5tYXhEZXB0aCA9IHR5cGVvZiBvcHRpb25zLm1heERlcHRoICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubWF4RGVwdGggOiA4OwogICAgfQoKICB9CiAgY29uc3QgaGFsZkRpYWdvbmFsID0gbmV3IFZlYzMoKTsKICBjb25zdCB0bXBBQUJCID0gbmV3IEFBQkIoKTsKCiAgLyoqCiAgICogVHJpbWVzaC4KICAgKiBAZXhhbXBsZQogICAqICAgICAvLyBIb3cgdG8gbWFrZSBhIG1lc2ggd2l0aCBhIHNpbmdsZSB0cmlhbmdsZQogICAqICAgICBjb25zdCB2ZXJ0aWNlcyA9IFsKICAgKiAgICAgICAgIDAsIDAsIDAsIC8vIHZlcnRleCAwCiAgICogICAgICAgICAxLCAwLCAwLCAvLyB2ZXJ0ZXggMQogICAqICAgICAgICAgMCwgMSwgMCAgLy8gdmVydGV4IDIKICAgKiAgICAgXQogICAqICAgICBjb25zdCBpbmRpY2VzID0gWwogICAqICAgICAgICAgMCwgMSwgMiAgLy8gdHJpYW5nbGUgMAogICAqICAgICBdCiAgICogICAgIGNvbnN0IHRyaW1lc2hTaGFwZSA9IG5ldyBDQU5OT04uVHJpbWVzaCh2ZXJ0aWNlcywgaW5kaWNlcykKICAgKi8KICBjbGFzcyBUcmltZXNoIGV4dGVuZHMgU2hhcGUgewogICAgLyoqCiAgICAgKiB2ZXJ0aWNlcwogICAgICovCgogICAgLyoqCiAgICAgKiBBcnJheSBvZiBpbnRlZ2VycywgaW5kaWNhdGluZyB3aGljaCB2ZXJ0aWNlcyBlYWNoIHRyaWFuZ2xlIGNvbnNpc3RzIG9mLiBUaGUgbGVuZ3RoIG9mIHRoaXMgYXJyYXkgaXMgdGh1cyAzIHRpbWVzIHRoZSBudW1iZXIgb2YgdHJpYW5nbGVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgbm9ybWFscyBkYXRhLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgbG9jYWwgQUFCQiBvZiB0aGUgbWVzaC4KICAgICAqLwoKICAgIC8qKgogICAgICogUmVmZXJlbmNlcyB0byB2ZXJ0ZXggcGFpcnMsIG1ha2luZyB1cCBhbGwgdW5pcXVlIGVkZ2VzIGluIHRoZSB0cmltZXNoLgogICAgICovCgogICAgLyoqCiAgICAgKiBMb2NhbCBzY2FsaW5nIG9mIHRoZSBtZXNoLiBVc2UgLnNldFNjYWxlKCkgdG8gc2V0IGl0LgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgaW5kZXhlZCB0cmlhbmdsZXMuIFVzZSAudXBkYXRlVHJlZSgpIHRvIHVwZGF0ZSBpdC4KICAgICAqLwogICAgY29uc3RydWN0b3IodmVydGljZXMsIGluZGljZXMpIHsKICAgICAgc3VwZXIoewogICAgICAgIHR5cGU6IFNoYXBlLnR5cGVzLlRSSU1FU0gKICAgICAgfSk7CiAgICAgIHRoaXMudmVydGljZXMgPSBuZXcgRmxvYXQzMkFycmF5KHZlcnRpY2VzKTsKICAgICAgdGhpcy5pbmRpY2VzID0gbmV3IEludDE2QXJyYXkoaW5kaWNlcyk7CiAgICAgIHRoaXMubm9ybWFscyA9IG5ldyBGbG9hdDMyQXJyYXkoaW5kaWNlcy5sZW5ndGgpOwogICAgICB0aGlzLmFhYmIgPSBuZXcgQUFCQigpOwogICAgICB0aGlzLmVkZ2VzID0gbnVsbDsKICAgICAgdGhpcy5zY2FsZSA9IG5ldyBWZWMzKDEsIDEsIDEpOwogICAgICB0aGlzLnRyZWUgPSBuZXcgT2N0cmVlKCk7CiAgICAgIHRoaXMudXBkYXRlRWRnZXMoKTsKICAgICAgdGhpcy51cGRhdGVOb3JtYWxzKCk7CiAgICAgIHRoaXMudXBkYXRlQUFCQigpOwogICAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCk7CiAgICAgIHRoaXMudXBkYXRlVHJlZSgpOwogICAgfQogICAgLyoqCiAgICAgKiB1cGRhdGVUcmVlCiAgICAgKi8KCgogICAgdXBkYXRlVHJlZSgpIHsKICAgICAgY29uc3QgdHJlZSA9IHRoaXMudHJlZTsKICAgICAgdHJlZS5yZXNldCgpOwogICAgICB0cmVlLmFhYmIuY29weSh0aGlzLmFhYmIpOwogICAgICBjb25zdCBzY2FsZSA9IHRoaXMuc2NhbGU7IC8vIFRoZSBsb2NhbCBtZXNoIEFBQkIgaXMgc2NhbGVkLCBidXQgdGhlIG9jdHJlZSBBQUJCIHNob3VsZCBiZSB1bnNjYWxlZAoKICAgICAgdHJlZS5hYWJiLmxvd2VyQm91bmQueCAqPSAxIC8gc2NhbGUueDsKICAgICAgdHJlZS5hYWJiLmxvd2VyQm91bmQueSAqPSAxIC8gc2NhbGUueTsKICAgICAgdHJlZS5hYWJiLmxvd2VyQm91bmQueiAqPSAxIC8gc2NhbGUuejsKICAgICAgdHJlZS5hYWJiLnVwcGVyQm91bmQueCAqPSAxIC8gc2NhbGUueDsKICAgICAgdHJlZS5hYWJiLnVwcGVyQm91bmQueSAqPSAxIC8gc2NhbGUueTsKICAgICAgdHJlZS5hYWJiLnVwcGVyQm91bmQueiAqPSAxIC8gc2NhbGUuejsgLy8gSW5zZXJ0IGFsbCB0cmlhbmdsZXMKCiAgICAgIGNvbnN0IHRyaWFuZ2xlQUFCQiA9IG5ldyBBQUJCKCk7CiAgICAgIGNvbnN0IGEgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBiID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgYyA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHBvaW50cyA9IFthLCBiLCBjXTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5pbmRpY2VzLmxlbmd0aCAvIDM7IGkrKykgewogICAgICAgIC8vdGhpcy5nZXRUcmlhbmdsZVZlcnRpY2VzKGksIGEsIGIsIGMpOwogICAgICAgIC8vIEdldCB1bnNjYWxlZCB0cmlhbmdsZSB2ZXJ0cwogICAgICAgIGNvbnN0IGkzID0gaSAqIDM7CgogICAgICAgIHRoaXMuX2dldFVuc2NhbGVkVmVydGV4KHRoaXMuaW5kaWNlc1tpM10sIGEpOwoKICAgICAgICB0aGlzLl9nZXRVbnNjYWxlZFZlcnRleCh0aGlzLmluZGljZXNbaTMgKyAxXSwgYik7CgogICAgICAgIHRoaXMuX2dldFVuc2NhbGVkVmVydGV4KHRoaXMuaW5kaWNlc1tpMyArIDJdLCBjKTsKCiAgICAgICAgdHJpYW5nbGVBQUJCLnNldEZyb21Qb2ludHMocG9pbnRzKTsKICAgICAgICB0cmVlLmluc2VydCh0cmlhbmdsZUFBQkIsIGkpOwogICAgICB9CgogICAgICB0cmVlLnJlbW92ZUVtcHR5Tm9kZXMoKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRyaWFuZ2xlcyBpbiBhIGxvY2FsIEFBQkIgZnJvbSB0aGUgdHJpbWVzaC4KICAgICAqIEBwYXJhbSByZXN1bHQgQW4gYXJyYXkgb2YgaW50ZWdlcnMsIHJlZmVyZW5jaW5nIHRoZSBxdWVyaWVkIHRyaWFuZ2xlcy4KICAgICAqLwoKCiAgICBnZXRUcmlhbmdsZXNJbkFBQkIoYWFiYiwgcmVzdWx0KSB7CiAgICAgIHVuc2NhbGVkQUFCQi5jb3B5KGFhYmIpOyAvLyBTY2FsZSBpdCB0byBsb2NhbAoKICAgICAgY29uc3Qgc2NhbGUgPSB0aGlzLnNjYWxlOwogICAgICBjb25zdCBpc3ggPSBzY2FsZS54OwogICAgICBjb25zdCBpc3kgPSBzY2FsZS55OwogICAgICBjb25zdCBpc3ogPSBzY2FsZS56OwogICAgICBjb25zdCBsID0gdW5zY2FsZWRBQUJCLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSB1bnNjYWxlZEFBQkIudXBwZXJCb3VuZDsKICAgICAgbC54IC89IGlzeDsKICAgICAgbC55IC89IGlzeTsKICAgICAgbC56IC89IGlzejsKICAgICAgdS54IC89IGlzeDsKICAgICAgdS55IC89IGlzeTsKICAgICAgdS56IC89IGlzejsKICAgICAgcmV0dXJuIHRoaXMudHJlZS5hYWJiUXVlcnkodW5zY2FsZWRBQUJCLCByZXN1bHQpOwogICAgfQogICAgLyoqCiAgICAgKiBzZXRTY2FsZQogICAgICovCgoKICAgIHNldFNjYWxlKHNjYWxlKSB7CiAgICAgIGNvbnN0IHdhc1VuaWZvcm0gPSB0aGlzLnNjYWxlLnggPT09IHRoaXMuc2NhbGUueSAmJiB0aGlzLnNjYWxlLnkgPT09IHRoaXMuc2NhbGUuejsKICAgICAgY29uc3QgaXNVbmlmb3JtID0gc2NhbGUueCA9PT0gc2NhbGUueSAmJiBzY2FsZS55ID09PSBzY2FsZS56OwoKICAgICAgaWYgKCEod2FzVW5pZm9ybSAmJiBpc1VuaWZvcm0pKSB7CiAgICAgICAgLy8gTm9uLXVuaWZvcm0gc2NhbGluZy4gTmVlZCB0byB1cGRhdGUgbm9ybWFscy4KICAgICAgICB0aGlzLnVwZGF0ZU5vcm1hbHMoKTsKICAgICAgfQoKICAgICAgdGhpcy5zY2FsZS5jb3B5KHNjYWxlKTsKICAgICAgdGhpcy51cGRhdGVBQUJCKCk7CiAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0aGUgbm9ybWFscyBvZiB0aGUgZmFjZXMuIFdpbGwgc2F2ZSBpbiB0aGUgYC5ub3JtYWxzYCBhcnJheS4KICAgICAqLwoKCiAgICB1cGRhdGVOb3JtYWxzKCkgewogICAgICBjb25zdCBuID0gY29tcHV0ZU5vcm1hbHNfbjsgLy8gR2VuZXJhdGUgbm9ybWFscwoKICAgICAgY29uc3Qgbm9ybWFscyA9IHRoaXMubm9ybWFsczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5pbmRpY2VzLmxlbmd0aCAvIDM7IGkrKykgewogICAgICAgIGNvbnN0IGkzID0gaSAqIDM7CiAgICAgICAgY29uc3QgYSA9IHRoaXMuaW5kaWNlc1tpM107CiAgICAgICAgY29uc3QgYiA9IHRoaXMuaW5kaWNlc1tpMyArIDFdOwogICAgICAgIGNvbnN0IGMgPSB0aGlzLmluZGljZXNbaTMgKyAyXTsKICAgICAgICB0aGlzLmdldFZlcnRleChhLCB2YSk7CiAgICAgICAgdGhpcy5nZXRWZXJ0ZXgoYiwgdmIpOwogICAgICAgIHRoaXMuZ2V0VmVydGV4KGMsIHZjKTsKICAgICAgICBUcmltZXNoLmNvbXB1dGVOb3JtYWwodmIsIHZhLCB2Yywgbik7CiAgICAgICAgbm9ybWFsc1tpM10gPSBuLng7CiAgICAgICAgbm9ybWFsc1tpMyArIDFdID0gbi55OwogICAgICAgIG5vcm1hbHNbaTMgKyAyXSA9IG4uejsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGUgdGhlIGAuZWRnZXNgIHByb3BlcnR5CiAgICAgKi8KCgogICAgdXBkYXRlRWRnZXMoKSB7CiAgICAgIGNvbnN0IGVkZ2VzID0ge307CgogICAgICBjb25zdCBhZGQgPSAoYSwgYikgPT4gewogICAgICAgIGNvbnN0IGtleSA9IGEgPCBiID8gYCR7YX1fJHtifWAgOiBgJHtifV8ke2F9YDsKICAgICAgICBlZGdlc1trZXldID0gdHJ1ZTsKICAgICAgfTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5pbmRpY2VzLmxlbmd0aCAvIDM7IGkrKykgewogICAgICAgIGNvbnN0IGkzID0gaSAqIDM7CiAgICAgICAgY29uc3QgYSA9IHRoaXMuaW5kaWNlc1tpM107CiAgICAgICAgY29uc3QgYiA9IHRoaXMuaW5kaWNlc1tpMyArIDFdOwogICAgICAgIGNvbnN0IGMgPSB0aGlzLmluZGljZXNbaTMgKyAyXTsKICAgICAgICBhZGQoYSwgYik7CiAgICAgICAgYWRkKGIsIGMpOwogICAgICAgIGFkZChjLCBhKTsKICAgICAgfQoKICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGVkZ2VzKTsKICAgICAgdGhpcy5lZGdlcyA9IG5ldyBJbnQxNkFycmF5KGtleXMubGVuZ3RoICogMik7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBpbmRpY2VzID0ga2V5c1tpXS5zcGxpdCgnXycpOwogICAgICAgIHRoaXMuZWRnZXNbMiAqIGldID0gcGFyc2VJbnQoaW5kaWNlc1swXSwgMTApOwogICAgICAgIHRoaXMuZWRnZXNbMiAqIGkgKyAxXSA9IHBhcnNlSW50KGluZGljZXNbMV0sIDEwKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYW4gZWRnZSB2ZXJ0ZXgKICAgICAqIEBwYXJhbSBmaXJzdE9yU2Vjb25kIDAgb3IgMSwgZGVwZW5kaW5nIG9uIHdoaWNoIG9uZSBvZiB0aGUgdmVydGljZXMgeW91IG5lZWQuCiAgICAgKiBAcGFyYW0gdmVydGV4U3RvcmUgV2hlcmUgdG8gc3RvcmUgdGhlIHJlc3VsdAogICAgICovCgoKICAgIGdldEVkZ2VWZXJ0ZXgoZWRnZUluZGV4LCBmaXJzdE9yU2Vjb25kLCB2ZXJ0ZXhTdG9yZSkgewogICAgICBjb25zdCB2ZXJ0ZXhJbmRleCA9IHRoaXMuZWRnZXNbZWRnZUluZGV4ICogMiArIChmaXJzdE9yU2Vjb25kID8gMSA6IDApXTsKICAgICAgdGhpcy5nZXRWZXJ0ZXgodmVydGV4SW5kZXgsIHZlcnRleFN0b3JlKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGEgdmVjdG9yIGFsb25nIGFuIGVkZ2UuCiAgICAgKi8KCgogICAgZ2V0RWRnZVZlY3RvcihlZGdlSW5kZXgsIHZlY3RvclN0b3JlKSB7CiAgICAgIGNvbnN0IHZhID0gZ2V0RWRnZVZlY3Rvcl92YTsKICAgICAgY29uc3QgdmIgPSBnZXRFZGdlVmVjdG9yX3ZiOwogICAgICB0aGlzLmdldEVkZ2VWZXJ0ZXgoZWRnZUluZGV4LCAwLCB2YSk7CiAgICAgIHRoaXMuZ2V0RWRnZVZlcnRleChlZGdlSW5kZXgsIDEsIHZiKTsKICAgICAgdmIudnN1Yih2YSwgdmVjdG9yU3RvcmUpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgZmFjZSBub3JtYWwgZ2l2ZW4gMyB2ZXJ0aWNlcwogICAgICovCgoKICAgIHN0YXRpYyBjb21wdXRlTm9ybWFsKHZhLCB2YiwgdmMsIHRhcmdldCkgewogICAgICB2Yi52c3ViKHZhLCBhYik7CiAgICAgIHZjLnZzdWIodmIsIGNiKTsKICAgICAgY2IuY3Jvc3MoYWIsIHRhcmdldCk7CgogICAgICBpZiAoIXRhcmdldC5pc1plcm8oKSkgewogICAgICAgIHRhcmdldC5ub3JtYWxpemUoKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdmVydGV4IGkuCiAgICAgKiBAcmV0dXJuIFRoZSAib3V0IiB2ZWN0b3Igb2JqZWN0CiAgICAgKi8KCgogICAgZ2V0VmVydGV4KGksIG91dCkgewogICAgICBjb25zdCBzY2FsZSA9IHRoaXMuc2NhbGU7CgogICAgICB0aGlzLl9nZXRVbnNjYWxlZFZlcnRleChpLCBvdXQpOwoKICAgICAgb3V0LnggKj0gc2NhbGUueDsKICAgICAgb3V0LnkgKj0gc2NhbGUueTsKICAgICAgb3V0LnogKj0gc2NhbGUuejsKICAgICAgcmV0dXJuIG91dDsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHJhdyB2ZXJ0ZXggaQogICAgICogQHJldHVybiBUaGUgIm91dCIgdmVjdG9yIG9iamVjdAogICAgICovCgoKICAgIF9nZXRVbnNjYWxlZFZlcnRleChpLCBvdXQpIHsKICAgICAgY29uc3QgaTMgPSBpICogMzsKICAgICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzOwogICAgICByZXR1cm4gb3V0LnNldCh2ZXJ0aWNlc1tpM10sIHZlcnRpY2VzW2kzICsgMV0sIHZlcnRpY2VzW2kzICsgMl0pOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYSB2ZXJ0ZXggZnJvbSB0aGUgdHJpbWVzaCx0cmFuc2Zvcm1lZCBieSB0aGUgZ2l2ZW4gcG9zaXRpb24gYW5kIHF1YXRlcm5pb24uCiAgICAgKiBAcmV0dXJuIFRoZSAib3V0IiB2ZWN0b3Igb2JqZWN0CiAgICAgKi8KCgogICAgZ2V0V29ybGRWZXJ0ZXgoaSwgcG9zLCBxdWF0LCBvdXQpIHsKICAgICAgdGhpcy5nZXRWZXJ0ZXgoaSwgb3V0KTsKICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHBvcywgcXVhdCwgb3V0LCBvdXQpOwogICAgICByZXR1cm4gb3V0OwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHRocmVlIHZlcnRpY2VzIGZvciB0cmlhbmdsZSBpLgogICAgICovCgoKICAgIGdldFRyaWFuZ2xlVmVydGljZXMoaSwgYSwgYiwgYykgewogICAgICBjb25zdCBpMyA9IGkgKiAzOwogICAgICB0aGlzLmdldFZlcnRleCh0aGlzLmluZGljZXNbaTNdLCBhKTsKICAgICAgdGhpcy5nZXRWZXJ0ZXgodGhpcy5pbmRpY2VzW2kzICsgMV0sIGIpOwogICAgICB0aGlzLmdldFZlcnRleCh0aGlzLmluZGljZXNbaTMgKyAyXSwgYyk7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGUgdGhlIG5vcm1hbCBvZiB0cmlhbmdsZSBpLgogICAgICogQHJldHVybiBUaGUgInRhcmdldCIgdmVjdG9yIG9iamVjdAogICAgICovCgoKICAgIGdldE5vcm1hbChpLCB0YXJnZXQpIHsKICAgICAgY29uc3QgaTMgPSBpICogMzsKICAgICAgcmV0dXJuIHRhcmdldC5zZXQodGhpcy5ub3JtYWxzW2kzXSwgdGhpcy5ub3JtYWxzW2kzICsgMV0sIHRoaXMubm9ybWFsc1tpMyArIDJdKTsKICAgIH0KICAgIC8qKgogICAgICogQHJldHVybiBUaGUgInRhcmdldCIgdmVjdG9yIG9iamVjdAogICAgICovCgoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHsKICAgICAgLy8gQXBwcm94aW1hdGUgd2l0aCBib3ggaW5lcnRpYQogICAgICAvLyBFeGFjdCBpbmVydGlhIGNhbGN1bGF0aW9uIGlzIG92ZXJraWxsLCBidXQgc2VlIGh0dHA6Ly9nZW9tZXRyaWN0b29scy5jb20vRG9jdW1lbnRhdGlvbi9Qb2x5aGVkcmFsTWFzc1Byb3BlcnRpZXMucGRmIGZvciB0aGUgY29ycmVjdCB3YXkgdG8gZG8gaXQKICAgICAgdGhpcy5jb21wdXRlTG9jYWxBQUJCKGNsaV9hYWJiKTsKICAgICAgY29uc3QgeCA9IGNsaV9hYWJiLnVwcGVyQm91bmQueCAtIGNsaV9hYWJiLmxvd2VyQm91bmQueDsKICAgICAgY29uc3QgeSA9IGNsaV9hYWJiLnVwcGVyQm91bmQueSAtIGNsaV9hYWJiLmxvd2VyQm91bmQueTsKICAgICAgY29uc3QgeiA9IGNsaV9hYWJiLnVwcGVyQm91bmQueiAtIGNsaV9hYWJiLmxvd2VyQm91bmQuejsKICAgICAgcmV0dXJuIHRhcmdldC5zZXQoMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIHkgKiAyICogeSArIDIgKiB6ICogMiAqIHopLCAxLjAgLyAxMi4wICogbWFzcyAqICgyICogeCAqIDIgKiB4ICsgMiAqIHogKiAyICogeiksIDEuMCAvIDEyLjAgKiBtYXNzICogKDIgKiB5ICogMiAqIHkgKyAyICogeCAqIDIgKiB4KSk7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGUgdGhlIGxvY2FsIEFBQkIgZm9yIHRoZSB0cmltZXNoCiAgICAgKi8KCgogICAgY29tcHV0ZUxvY2FsQUFCQihhYWJiKSB7CiAgICAgIGNvbnN0IGwgPSBhYWJiLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSBhYWJiLnVwcGVyQm91bmQ7CiAgICAgIGNvbnN0IG4gPSB0aGlzLnZlcnRpY2VzLmxlbmd0aDsKICAgICAgdGhpcy52ZXJ0aWNlczsKICAgICAgY29uc3QgdiA9IGNvbXB1dGVMb2NhbEFBQkJfd29ybGRWZXJ0OwogICAgICB0aGlzLmdldFZlcnRleCgwLCB2KTsKICAgICAgbC5jb3B5KHYpOwogICAgICB1LmNvcHkodik7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gbjsgaSsrKSB7CiAgICAgICAgdGhpcy5nZXRWZXJ0ZXgoaSwgdik7CgogICAgICAgIGlmICh2LnggPCBsLngpIHsKICAgICAgICAgIGwueCA9IHYueDsKICAgICAgICB9IGVsc2UgaWYgKHYueCA+IHUueCkgewogICAgICAgICAgdS54ID0gdi54OwogICAgICAgIH0KCiAgICAgICAgaWYgKHYueSA8IGwueSkgewogICAgICAgICAgbC55ID0gdi55OwogICAgICAgIH0gZWxzZSBpZiAodi55ID4gdS55KSB7CiAgICAgICAgICB1LnkgPSB2Lnk7CiAgICAgICAgfQoKICAgICAgICBpZiAodi56IDwgbC56KSB7CiAgICAgICAgICBsLnogPSB2Lno7CiAgICAgICAgfSBlbHNlIGlmICh2LnogPiB1LnopIHsKICAgICAgICAgIHUueiA9IHYuejsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlIHRoZSBgLmFhYmJgIHByb3BlcnR5CiAgICAgKi8KCgogICAgdXBkYXRlQUFCQigpIHsKICAgICAgdGhpcy5jb21wdXRlTG9jYWxBQUJCKHRoaXMuYWFiYik7CiAgICB9CiAgICAvKioKICAgICAqIFdpbGwgdXBkYXRlIHRoZSBgLmJvdW5kaW5nU3BoZXJlUmFkaXVzYCBwcm9wZXJ0eQogICAgICovCgoKICAgIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgewogICAgICAvLyBBc3N1bWUgcG9pbnRzIGFyZSBkaXN0cmlidXRlZCB3aXRoIGxvY2FsICgwLDAsMCkgYXMgY2VudGVyCiAgICAgIGxldCBtYXgyID0gMDsKICAgICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBjb25zdCB2ID0gbmV3IFZlYzMoKTsKCiAgICAgIGZvciAobGV0IGkgPSAwLCBOID0gdmVydGljZXMubGVuZ3RoIC8gMzsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgdGhpcy5nZXRWZXJ0ZXgoaSwgdik7CiAgICAgICAgY29uc3Qgbm9ybTIgPSB2Lmxlbmd0aFNxdWFyZWQoKTsKCiAgICAgICAgaWYgKG5vcm0yID4gbWF4MikgewogICAgICAgICAgbWF4MiA9IG5vcm0yOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IE1hdGguc3FydChtYXgyKTsKICAgIH0KICAgIC8qKgogICAgICogY2FsY3VsYXRlV29ybGRBQUJCCiAgICAgKi8KCgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgLyoKICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLnZlcnRpY2VzLmxlbmd0aCAvIDMsCiAgICAgICAgICAgICAgdmVydHMgPSB0aGlzLnZlcnRpY2VzOwogICAgICAgICAgY29uc3QgbWlueCxtaW55LG1pbnosbWF4eCxtYXh5LG1heHo7CiAgICAgICAgICAgY29uc3QgdiA9IHRlbXBXb3JsZFZlcnRleDsKICAgICAgICAgIGZvcihsZXQgaT0wOyBpPG47IGkrKyl7CiAgICAgICAgICAgICAgdGhpcy5nZXRWZXJ0ZXgoaSwgdik7CiAgICAgICAgICAgICAgcXVhdC52bXVsdCh2LCB2KTsKICAgICAgICAgICAgICBwb3MudmFkZCh2LCB2KTsKICAgICAgICAgICAgICBpZiAodi54IDwgbWlueCB8fCBtaW54PT09dW5kZWZpbmVkKXsKICAgICAgICAgICAgICAgICAgbWlueCA9IHYueDsKICAgICAgICAgICAgICB9IGVsc2UgaWYodi54ID4gbWF4eCB8fCBtYXh4PT09dW5kZWZpbmVkKXsKICAgICAgICAgICAgICAgICAgbWF4eCA9IHYueDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgIGlmICh2LnkgPCBtaW55IHx8IG1pbnk9PT11bmRlZmluZWQpewogICAgICAgICAgICAgICAgICBtaW55ID0gdi55OwogICAgICAgICAgICAgIH0gZWxzZSBpZih2LnkgPiBtYXh5IHx8IG1heHk9PT11bmRlZmluZWQpewogICAgICAgICAgICAgICAgICBtYXh5ID0gdi55OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgaWYgKHYueiA8IG1pbnogfHwgbWluej09PXVuZGVmaW5lZCl7CiAgICAgICAgICAgICAgICAgIG1pbnogPSB2Lno7CiAgICAgICAgICAgICAgfSBlbHNlIGlmKHYueiA+IG1heHogfHwgbWF4ej09PXVuZGVmaW5lZCl7CiAgICAgICAgICAgICAgICAgIG1heHogPSB2Lno7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgbWluLnNldChtaW54LG1pbnksbWlueik7CiAgICAgICAgICBtYXguc2V0KG1heHgsbWF4eSxtYXh6KTsKICAgICAgICAgICovCiAgICAgIC8vIEZhc3RlciBhcHByb3hpbWF0aW9uIHVzaW5nIGxvY2FsIEFBQkIKICAgICAgY29uc3QgZnJhbWUgPSBjYWxjdWxhdGVXb3JsZEFBQkJfZnJhbWU7CiAgICAgIGNvbnN0IHJlc3VsdCA9IGNhbGN1bGF0ZVdvcmxkQUFCQl9hYWJiOwogICAgICBmcmFtZS5wb3NpdGlvbiA9IHBvczsKICAgICAgZnJhbWUucXVhdGVybmlvbiA9IHF1YXQ7CiAgICAgIHRoaXMuYWFiYi50b1dvcmxkRnJhbWUoZnJhbWUsIHJlc3VsdCk7CiAgICAgIG1pbi5jb3B5KHJlc3VsdC5sb3dlckJvdW5kKTsKICAgICAgbWF4LmNvcHkocmVzdWx0LnVwcGVyQm91bmQpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYXBwcm94aW1hdGUgdm9sdW1lCiAgICAgKi8KCgogICAgdm9sdW1lKCkgewogICAgICByZXR1cm4gNC4wICogTWF0aC5QSSAqIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgLyAzLjA7CiAgICB9CiAgICAvKioKICAgICAqIENyZWF0ZSBhIFRyaW1lc2ggaW5zdGFuY2UsIHNoYXBlZCBhcyBhIHRvcnVzLgogICAgICovCgoKICAgIHN0YXRpYyBjcmVhdGVUb3J1cyhyYWRpdXMsIHR1YmUsIHJhZGlhbFNlZ21lbnRzLCB0dWJ1bGFyU2VnbWVudHMsIGFyYykgewogICAgICBpZiAocmFkaXVzID09PSB2b2lkIDApIHsKICAgICAgICByYWRpdXMgPSAxOwogICAgICB9CgogICAgICBpZiAodHViZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgdHViZSA9IDAuNTsKICAgICAgfQoKICAgICAgaWYgKHJhZGlhbFNlZ21lbnRzID09PSB2b2lkIDApIHsKICAgICAgICByYWRpYWxTZWdtZW50cyA9IDg7CiAgICAgIH0KCiAgICAgIGlmICh0dWJ1bGFyU2VnbWVudHMgPT09IHZvaWQgMCkgewogICAgICAgIHR1YnVsYXJTZWdtZW50cyA9IDY7CiAgICAgIH0KCiAgICAgIGlmIChhcmMgPT09IHZvaWQgMCkgewogICAgICAgIGFyYyA9IE1hdGguUEkgKiAyOwogICAgICB9CgogICAgICBjb25zdCB2ZXJ0aWNlcyA9IFtdOwogICAgICBjb25zdCBpbmRpY2VzID0gW107CgogICAgICBmb3IgKGxldCBqID0gMDsgaiA8PSByYWRpYWxTZWdtZW50czsgaisrKSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gdHVidWxhclNlZ21lbnRzOyBpKyspIHsKICAgICAgICAgIGNvbnN0IHUgPSBpIC8gdHVidWxhclNlZ21lbnRzICogYXJjOwogICAgICAgICAgY29uc3QgdiA9IGogLyByYWRpYWxTZWdtZW50cyAqIE1hdGguUEkgKiAyOwogICAgICAgICAgY29uc3QgeCA9IChyYWRpdXMgKyB0dWJlICogTWF0aC5jb3ModikpICogTWF0aC5jb3ModSk7CiAgICAgICAgICBjb25zdCB5ID0gKHJhZGl1cyArIHR1YmUgKiBNYXRoLmNvcyh2KSkgKiBNYXRoLnNpbih1KTsKICAgICAgICAgIGNvbnN0IHogPSB0dWJlICogTWF0aC5zaW4odik7CiAgICAgICAgICB2ZXJ0aWNlcy5wdXNoKHgsIHksIHopOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZm9yIChsZXQgaiA9IDE7IGogPD0gcmFkaWFsU2VnbWVudHM7IGorKykgewogICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IHR1YnVsYXJTZWdtZW50czsgaSsrKSB7CiAgICAgICAgICBjb25zdCBhID0gKHR1YnVsYXJTZWdtZW50cyArIDEpICogaiArIGkgLSAxOwogICAgICAgICAgY29uc3QgYiA9ICh0dWJ1bGFyU2VnbWVudHMgKyAxKSAqIChqIC0gMSkgKyBpIC0gMTsKICAgICAgICAgIGNvbnN0IGMgPSAodHVidWxhclNlZ21lbnRzICsgMSkgKiAoaiAtIDEpICsgaTsKICAgICAgICAgIGNvbnN0IGQgPSAodHVidWxhclNlZ21lbnRzICsgMSkgKiBqICsgaTsKICAgICAgICAgIGluZGljZXMucHVzaChhLCBiLCBkKTsKICAgICAgICAgIGluZGljZXMucHVzaChiLCBjLCBkKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBuZXcgVHJpbWVzaCh2ZXJ0aWNlcywgaW5kaWNlcyk7CiAgICB9CgogIH0KICBjb25zdCBjb21wdXRlTm9ybWFsc19uID0gbmV3IFZlYzMoKTsKICBjb25zdCB1bnNjYWxlZEFBQkIgPSBuZXcgQUFCQigpOwogIGNvbnN0IGdldEVkZ2VWZWN0b3JfdmEgPSBuZXcgVmVjMygpOwogIGNvbnN0IGdldEVkZ2VWZWN0b3JfdmIgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNiID0gbmV3IFZlYzMoKTsKICBjb25zdCBhYiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdmEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHZiID0gbmV3IFZlYzMoKTsKICBjb25zdCB2YyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY2xpX2FhYmIgPSBuZXcgQUFCQigpOwogIGNvbnN0IGNvbXB1dGVMb2NhbEFBQkJfd29ybGRWZXJ0ID0gbmV3IFZlYzMoKTsKICBjb25zdCBjYWxjdWxhdGVXb3JsZEFBQkJfZnJhbWUgPSBuZXcgVHJhbnNmb3JtKCk7CiAgY29uc3QgY2FsY3VsYXRlV29ybGRBQUJCX2FhYmIgPSBuZXcgQUFCQigpOwoKICAvKioKICAgKiBDb25zdHJhaW50IGVxdWF0aW9uIHNvbHZlciBiYXNlIGNsYXNzLgogICAqLwogIGNsYXNzIFNvbHZlciB7CiAgICAvKioKICAgICAqIEFsbCBlcXVhdGlvbnMgdG8gYmUgc29sdmVkCiAgICAgKi8KCiAgICAvKioKICAgICAqIEB0b2RvIHJlbW92ZSB1c2VsZXNzIGNvbnN0cnVjdG9yCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLmVxdWF0aW9ucyA9IFtdOwogICAgfQogICAgLyoqCiAgICAgKiBTaG91bGQgYmUgaW1wbGVtZW50ZWQgaW4gc3ViY2xhc3NlcyEKICAgICAqIEB0b2RvIHVzZSBhYnN0cmFjdAogICAgICogQHJldHVybiBudW1iZXIgb2YgaXRlcmF0aW9ucyBwZXJmb3JtZWQKICAgICAqLwoKCiAgICBzb2x2ZShkdCwgd29ybGQpIHsKICAgICAgcmV0dXJuICgvLyBTaG91bGQgcmV0dXJuIHRoZSBudW1iZXIgb2YgaXRlcmF0aW9ucyBkb25lIQogICAgICAgIDAKICAgICAgKTsKICAgIH0KICAgIC8qKgogICAgICogQWRkIGFuIGVxdWF0aW9uCiAgICAgKi8KCgogICAgYWRkRXF1YXRpb24oZXEpIHsKICAgICAgaWYgKGVxLmVuYWJsZWQgJiYgIWVxLmJpLmlzVHJpZ2dlciAmJiAhZXEuYmouaXNUcmlnZ2VyKSB7CiAgICAgICAgdGhpcy5lcXVhdGlvbnMucHVzaChlcSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmVtb3ZlIGFuIGVxdWF0aW9uCiAgICAgKi8KCgogICAgcmVtb3ZlRXF1YXRpb24oZXEpIHsKICAgICAgY29uc3QgZXFzID0gdGhpcy5lcXVhdGlvbnM7CiAgICAgIGNvbnN0IGkgPSBlcXMuaW5kZXhPZihlcSk7CgogICAgICBpZiAoaSAhPT0gLTEpIHsKICAgICAgICBlcXMuc3BsaWNlKGksIDEpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEFkZCBhbGwgZXF1YXRpb25zCiAgICAgKi8KCgogICAgcmVtb3ZlQWxsRXF1YXRpb25zKCkgewogICAgICB0aGlzLmVxdWF0aW9ucy5sZW5ndGggPSAwOwogICAgfQoKICB9CgogIC8qKgogICAqIENvbnN0cmFpbnQgZXF1YXRpb24gR2F1c3MtU2VpZGVsIHNvbHZlci4KICAgKiBAdG9kbyBUaGUgc3Bvb2sgcGFyYW1ldGVycyBzaG91bGQgYmUgc3BlY2lmaWVkIGZvciBlYWNoIGNvbnN0cmFpbnQsIG5vdCBnbG9iYWxseS4KICAgKiBAc2VlIGh0dHBzOi8vd3d3OC5jcy51bXUuc2Uva3Vyc2VyLzVEVjA1OC9WVDA5L2xlY3R1cmVzL3Nwb29rbm90ZXMucGRmCiAgICovCiAgY2xhc3MgR1NTb2x2ZXIgZXh0ZW5kcyBTb2x2ZXIgewogICAgLyoqCiAgICAgKiBUaGUgbnVtYmVyIG9mIHNvbHZlciBpdGVyYXRpb25zIGRldGVybWluZXMgcXVhbGl0eSBvZiB0aGUgY29uc3RyYWludHMgaW4gdGhlIHdvcmxkLgogICAgICogVGhlIG1vcmUgaXRlcmF0aW9ucywgdGhlIG1vcmUgY29ycmVjdCBzaW11bGF0aW9uLiBNb3JlIGl0ZXJhdGlvbnMgbmVlZCBtb3JlIGNvbXB1dGF0aW9ucyB0aG91Z2guIElmIHlvdSBoYXZlIGEgbGFyZ2UgZ3Jhdml0eSBmb3JjZSBpbiB5b3VyIHdvcmxkLCB5b3Ugd2lsbCBuZWVkIG1vcmUgaXRlcmF0aW9ucy4KICAgICAqLwoKICAgIC8qKgogICAgICogV2hlbiB0b2xlcmFuY2UgaXMgcmVhY2hlZCwgdGhlIHN5c3RlbSBpcyBhc3N1bWVkIHRvIGJlIGNvbnZlcmdlZC4KICAgICAqLwoKICAgIC8qKgogICAgICogQHRvZG8gcmVtb3ZlIHVzZWxlc3MgY29uc3RydWN0b3IKICAgICAqLwogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuaXRlcmF0aW9ucyA9IDEwOwogICAgICB0aGlzLnRvbGVyYW5jZSA9IDFlLTc7CiAgICB9CiAgICAvKioKICAgICAqIFNvbHZlCiAgICAgKiBAcmV0dXJuIG51bWJlciBvZiBpdGVyYXRpb25zIHBlcmZvcm1lZAogICAgICovCgoKICAgIHNvbHZlKGR0LCB3b3JsZCkgewogICAgICBsZXQgaXRlciA9IDA7CiAgICAgIGNvbnN0IG1heEl0ZXIgPSB0aGlzLml0ZXJhdGlvbnM7CiAgICAgIGNvbnN0IHRvbFNxdWFyZWQgPSB0aGlzLnRvbGVyYW5jZSAqIHRoaXMudG9sZXJhbmNlOwogICAgICBjb25zdCBlcXVhdGlvbnMgPSB0aGlzLmVxdWF0aW9uczsKICAgICAgY29uc3QgTmVxID0gZXF1YXRpb25zLmxlbmd0aDsKICAgICAgY29uc3QgYm9kaWVzID0gd29ybGQuYm9kaWVzOwogICAgICBjb25zdCBOYm9kaWVzID0gYm9kaWVzLmxlbmd0aDsKICAgICAgY29uc3QgaCA9IGR0OwogICAgICBsZXQgQjsKICAgICAgbGV0IGludkM7CiAgICAgIGxldCBkZWx0YWxhbWJkYTsKICAgICAgbGV0IGRlbHRhbGFtYmRhVG90OwogICAgICBsZXQgR1dsYW1iZGE7CiAgICAgIGxldCBsYW1iZGFqOyAvLyBVcGRhdGUgc29sdmUgbWFzcwoKICAgICAgaWYgKE5lcSAhPT0gMCkgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOYm9kaWVzOyBpKyspIHsKICAgICAgICAgIGJvZGllc1tpXS51cGRhdGVTb2x2ZU1hc3NQcm9wZXJ0aWVzKCk7CiAgICAgICAgfQogICAgICB9IC8vIFRoaW5ncyB0aGF0IGRvIG5vdCBjaGFuZ2UgZHVyaW5nIGl0ZXJhdGlvbiBjYW4gYmUgY29tcHV0ZWQgb25jZQoKCiAgICAgIGNvbnN0IGludkNzID0gR1NTb2x2ZXJfc29sdmVfaW52Q3M7CiAgICAgIGNvbnN0IEJzID0gR1NTb2x2ZXJfc29sdmVfQnM7CiAgICAgIGNvbnN0IGxhbWJkYSA9IEdTU29sdmVyX3NvbHZlX2xhbWJkYTsKICAgICAgaW52Q3MubGVuZ3RoID0gTmVxOwogICAgICBCcy5sZW5ndGggPSBOZXE7CiAgICAgIGxhbWJkYS5sZW5ndGggPSBOZXE7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmVxOyBpKyspIHsKICAgICAgICBjb25zdCBjID0gZXF1YXRpb25zW2ldOwogICAgICAgIGxhbWJkYVtpXSA9IDAuMDsKICAgICAgICBCc1tpXSA9IGMuY29tcHV0ZUIoaCk7CiAgICAgICAgaW52Q3NbaV0gPSAxLjAgLyBjLmNvbXB1dGVDKCk7CiAgICAgIH0KCiAgICAgIGlmIChOZXEgIT09IDApIHsKICAgICAgICAvLyBSZXNldCB2bGFtYmRhCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5ib2RpZXM7IGkrKykgewogICAgICAgICAgY29uc3QgYiA9IGJvZGllc1tpXTsKICAgICAgICAgIGNvbnN0IHZsYW1iZGEgPSBiLnZsYW1iZGE7CiAgICAgICAgICBjb25zdCB3bGFtYmRhID0gYi53bGFtYmRhOwogICAgICAgICAgdmxhbWJkYS5zZXQoMCwgMCwgMCk7CiAgICAgICAgICB3bGFtYmRhLnNldCgwLCAwLCAwKTsKICAgICAgICB9IC8vIEl0ZXJhdGUgb3ZlciBlcXVhdGlvbnMKCgogICAgICAgIGZvciAoaXRlciA9IDA7IGl0ZXIgIT09IG1heEl0ZXI7IGl0ZXIrKykgewogICAgICAgICAgLy8gQWNjdW11bGF0ZSB0aGUgdG90YWwgZXJyb3IgZm9yIGVhY2ggaXRlcmF0aW9uLgogICAgICAgICAgZGVsdGFsYW1iZGFUb3QgPSAwLjA7CgogICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IE5lcTsgaisrKSB7CiAgICAgICAgICAgIGNvbnN0IGMgPSBlcXVhdGlvbnNbal07IC8vIENvbXB1dGUgaXRlcmF0aW9uCgogICAgICAgICAgICBCID0gQnNbal07CiAgICAgICAgICAgIGludkMgPSBpbnZDc1tqXTsKICAgICAgICAgICAgbGFtYmRhaiA9IGxhbWJkYVtqXTsKICAgICAgICAgICAgR1dsYW1iZGEgPSBjLmNvbXB1dGVHV2xhbWJkYSgpOwogICAgICAgICAgICBkZWx0YWxhbWJkYSA9IGludkMgKiAoQiAtIEdXbGFtYmRhIC0gYy5lcHMgKiBsYW1iZGFqKTsgLy8gQ2xhbXAgaWYgd2UgYXJlIG5vdCB3aXRoaW4gdGhlIG1pbi9tYXggaW50ZXJ2YWwKCiAgICAgICAgICAgIGlmIChsYW1iZGFqICsgZGVsdGFsYW1iZGEgPCBjLm1pbkZvcmNlKSB7CiAgICAgICAgICAgICAgZGVsdGFsYW1iZGEgPSBjLm1pbkZvcmNlIC0gbGFtYmRhajsKICAgICAgICAgICAgfSBlbHNlIGlmIChsYW1iZGFqICsgZGVsdGFsYW1iZGEgPiBjLm1heEZvcmNlKSB7CiAgICAgICAgICAgICAgZGVsdGFsYW1iZGEgPSBjLm1heEZvcmNlIC0gbGFtYmRhajsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGFtYmRhW2pdICs9IGRlbHRhbGFtYmRhOwogICAgICAgICAgICBkZWx0YWxhbWJkYVRvdCArPSBkZWx0YWxhbWJkYSA+IDAuMCA/IGRlbHRhbGFtYmRhIDogLWRlbHRhbGFtYmRhOyAvLyBhYnMoZGVsdGFsYW1iZGEpCgogICAgICAgICAgICBjLmFkZFRvV2xhbWJkYShkZWx0YWxhbWJkYSk7CiAgICAgICAgICB9IC8vIElmIHRoZSB0b3RhbCBlcnJvciBpcyBzbWFsbCBlbm91Z2ggLSBzdG9wIGl0ZXJhdGUKCgogICAgICAgICAgaWYgKGRlbHRhbGFtYmRhVG90ICogZGVsdGFsYW1iZGFUb3QgPCB0b2xTcXVhcmVkKSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0gLy8gQWRkIHJlc3VsdCB0byB2ZWxvY2l0eQoKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5ib2RpZXM7IGkrKykgewogICAgICAgICAgY29uc3QgYiA9IGJvZGllc1tpXTsKICAgICAgICAgIGNvbnN0IHYgPSBiLnZlbG9jaXR5OwogICAgICAgICAgY29uc3QgdyA9IGIuYW5ndWxhclZlbG9jaXR5OwogICAgICAgICAgYi52bGFtYmRhLnZtdWwoYi5saW5lYXJGYWN0b3IsIGIudmxhbWJkYSk7CiAgICAgICAgICB2LnZhZGQoYi52bGFtYmRhLCB2KTsKICAgICAgICAgIGIud2xhbWJkYS52bXVsKGIuYW5ndWxhckZhY3RvciwgYi53bGFtYmRhKTsKICAgICAgICAgIHcudmFkZChiLndsYW1iZGEsIHcpOwogICAgICAgIH0gLy8gU2V0IHRoZSBgLm11bHRpcGxpZXJgIHByb3BlcnR5IG9mIGVhY2ggZXF1YXRpb24KCgogICAgICAgIGxldCBsID0gZXF1YXRpb25zLmxlbmd0aDsKICAgICAgICBjb25zdCBpbnZEdCA9IDEgLyBoOwoKICAgICAgICB3aGlsZSAobC0tKSB7CiAgICAgICAgICBlcXVhdGlvbnNbbF0ubXVsdGlwbGllciA9IGxhbWJkYVtsXSAqIGludkR0OwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIGl0ZXI7CiAgICB9CgogIH0gLy8gSnVzdCB0ZW1wb3JhcnkgbnVtYmVyIGhvbGRlcnMgdGhhdCB3ZSB3YW50IHRvIHJldXNlIGVhY2ggaXRlcmF0aW9uLgoKICBjb25zdCBHU1NvbHZlcl9zb2x2ZV9sYW1iZGEgPSBbXTsKICBjb25zdCBHU1NvbHZlcl9zb2x2ZV9pbnZDcyA9IFtdOwogIGNvbnN0IEdTU29sdmVyX3NvbHZlX0JzID0gW107CgogIC8qKgogICAqIFNwbGl0cyB0aGUgZXF1YXRpb25zIGludG8gaXNsYW5kcyBhbmQgc29sdmVzIHRoZW0gaW5kZXBlbmRlbnRseS4gQ2FuIGltcHJvdmUgcGVyZm9ybWFuY2UuCiAgICovCiAgY2xhc3MgU3BsaXRTb2x2ZXIgZXh0ZW5kcyBTb2x2ZXIgewogICAgLyoqCiAgICAgKiBUaGUgbnVtYmVyIG9mIHNvbHZlciBpdGVyYXRpb25zIGRldGVybWluZXMgcXVhbGl0eSBvZiB0aGUgY29uc3RyYWludHMgaW4gdGhlIHdvcmxkLiBUaGUgbW9yZSBpdGVyYXRpb25zLCB0aGUgbW9yZSBjb3JyZWN0IHNpbXVsYXRpb24uIE1vcmUgaXRlcmF0aW9ucyBuZWVkIG1vcmUgY29tcHV0YXRpb25zIHRob3VnaC4gSWYgeW91IGhhdmUgYSBsYXJnZSBncmF2aXR5IGZvcmNlIGluIHlvdXIgd29ybGQsIHlvdSB3aWxsIG5lZWQgbW9yZSBpdGVyYXRpb25zLgogICAgICovCgogICAgLyoqCiAgICAgKiBXaGVuIHRvbGVyYW5jZSBpcyByZWFjaGVkLCB0aGUgc3lzdGVtIGlzIGFzc3VtZWQgdG8gYmUgY29udmVyZ2VkLgogICAgICovCgogICAgLyoqIHN1YnNvbHZlciAqLwogICAgY29uc3RydWN0b3Ioc3Vic29sdmVyKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuaXRlcmF0aW9ucyA9IDEwOwogICAgICB0aGlzLnRvbGVyYW5jZSA9IDFlLTc7CiAgICAgIHRoaXMuc3Vic29sdmVyID0gc3Vic29sdmVyOwogICAgICB0aGlzLm5vZGVzID0gW107CiAgICAgIHRoaXMubm9kZVBvb2wgPSBbXTsgLy8gQ3JlYXRlIG5lZWRlZCBub2RlcywgcmV1c2UgaWYgcG9zc2libGUKCiAgICAgIHdoaWxlICh0aGlzLm5vZGVQb29sLmxlbmd0aCA8IDEyOCkgewogICAgICAgIHRoaXMubm9kZVBvb2wucHVzaCh0aGlzLmNyZWF0ZU5vZGUoKSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogY3JlYXRlTm9kZQogICAgICovCgoKICAgIGNyZWF0ZU5vZGUoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgYm9keTogbnVsbCwKICAgICAgICBjaGlsZHJlbjogW10sCiAgICAgICAgZXFzOiBbXSwKICAgICAgICB2aXNpdGVkOiBmYWxzZQogICAgICB9OwogICAgfQogICAgLyoqCiAgICAgKiBTb2x2ZSB0aGUgc3Vic3lzdGVtcwogICAgICogQHJldHVybiBudW1iZXIgb2YgaXRlcmF0aW9ucyBwZXJmb3JtZWQKICAgICAqLwoKCiAgICBzb2x2ZShkdCwgd29ybGQpIHsKICAgICAgY29uc3Qgbm9kZXMgPSBTcGxpdFNvbHZlcl9zb2x2ZV9ub2RlczsKICAgICAgY29uc3Qgbm9kZVBvb2wgPSB0aGlzLm5vZGVQb29sOwogICAgICBjb25zdCBib2RpZXMgPSB3b3JsZC5ib2RpZXM7CiAgICAgIGNvbnN0IGVxdWF0aW9ucyA9IHRoaXMuZXF1YXRpb25zOwogICAgICBjb25zdCBOZXEgPSBlcXVhdGlvbnMubGVuZ3RoOwogICAgICBjb25zdCBOYm9kaWVzID0gYm9kaWVzLmxlbmd0aDsKICAgICAgY29uc3Qgc3Vic29sdmVyID0gdGhpcy5zdWJzb2x2ZXI7IC8vIENyZWF0ZSBuZWVkZWQgbm9kZXMsIHJldXNlIGlmIHBvc3NpYmxlCgogICAgICB3aGlsZSAobm9kZVBvb2wubGVuZ3RoIDwgTmJvZGllcykgewogICAgICAgIG5vZGVQb29sLnB1c2godGhpcy5jcmVhdGVOb2RlKCkpOwogICAgICB9CgogICAgICBub2Rlcy5sZW5ndGggPSBOYm9kaWVzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBOYm9kaWVzOyBpKyspIHsKICAgICAgICBub2Rlc1tpXSA9IG5vZGVQb29sW2ldOwogICAgICB9IC8vIFJlc2V0IG5vZGUgdmFsdWVzCgoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5ib2RpZXM7IGkrKykgewogICAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXTsKICAgICAgICBub2RlLmJvZHkgPSBib2RpZXNbaV07CiAgICAgICAgbm9kZS5jaGlsZHJlbi5sZW5ndGggPSAwOwogICAgICAgIG5vZGUuZXFzLmxlbmd0aCA9IDA7CiAgICAgICAgbm9kZS52aXNpdGVkID0gZmFsc2U7CiAgICAgIH0KCiAgICAgIGZvciAobGV0IGsgPSAwOyBrICE9PSBOZXE7IGsrKykgewogICAgICAgIGNvbnN0IGVxID0gZXF1YXRpb25zW2tdOwogICAgICAgIGNvbnN0IGkgPSBib2RpZXMuaW5kZXhPZihlcS5iaSk7CiAgICAgICAgY29uc3QgaiA9IGJvZGllcy5pbmRleE9mKGVxLmJqKTsKICAgICAgICBjb25zdCBuaSA9IG5vZGVzW2ldOwogICAgICAgIGNvbnN0IG5qID0gbm9kZXNbal07CiAgICAgICAgbmkuY2hpbGRyZW4ucHVzaChuaik7CiAgICAgICAgbmkuZXFzLnB1c2goZXEpOwogICAgICAgIG5qLmNoaWxkcmVuLnB1c2gobmkpOwogICAgICAgIG5qLmVxcy5wdXNoKGVxKTsKICAgICAgfQoKICAgICAgbGV0IGNoaWxkOwogICAgICBsZXQgbiA9IDA7CiAgICAgIGxldCBlcXMgPSBTcGxpdFNvbHZlcl9zb2x2ZV9lcXM7CiAgICAgIHN1YnNvbHZlci50b2xlcmFuY2UgPSB0aGlzLnRvbGVyYW5jZTsKICAgICAgc3Vic29sdmVyLml0ZXJhdGlvbnMgPSB0aGlzLml0ZXJhdGlvbnM7CiAgICAgIGNvbnN0IGR1bW15V29ybGQgPSBTcGxpdFNvbHZlcl9zb2x2ZV9kdW1teVdvcmxkOwoKICAgICAgd2hpbGUgKGNoaWxkID0gZ2V0VW52aXNpdGVkTm9kZShub2RlcykpIHsKICAgICAgICBlcXMubGVuZ3RoID0gMDsKICAgICAgICBkdW1teVdvcmxkLmJvZGllcy5sZW5ndGggPSAwOwogICAgICAgIGJmcyhjaGlsZCwgdmlzaXRGdW5jLCBkdW1teVdvcmxkLmJvZGllcywgZXFzKTsKICAgICAgICBjb25zdCBOZXFzID0gZXFzLmxlbmd0aDsKICAgICAgICBlcXMgPSBlcXMuc29ydChzb3J0QnlJZCk7CgogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOZXFzOyBpKyspIHsKICAgICAgICAgIHN1YnNvbHZlci5hZGRFcXVhdGlvbihlcXNbaV0pOwogICAgICAgIH0KCiAgICAgICAgc3Vic29sdmVyLnNvbHZlKGR0LCBkdW1teVdvcmxkKTsKICAgICAgICBzdWJzb2x2ZXIucmVtb3ZlQWxsRXF1YXRpb25zKCk7CiAgICAgICAgbisrOwogICAgICB9CgogICAgICByZXR1cm4gbjsKICAgIH0KCiAgfSAvLyBSZXR1cm5zIHRoZSBudW1iZXIgb2Ygc3Vic3lzdGVtcwoKICBjb25zdCBTcGxpdFNvbHZlcl9zb2x2ZV9ub2RlcyA9IFtdOyAvLyBBbGwgYWxsb2NhdGVkIG5vZGUgb2JqZWN0cwoKICBjb25zdCBTcGxpdFNvbHZlcl9zb2x2ZV9lcXMgPSBbXTsgLy8gVGVtcCBhcnJheQoKICBjb25zdCBTcGxpdFNvbHZlcl9zb2x2ZV9kdW1teVdvcmxkID0gewogICAgYm9kaWVzOiBbXQogIH07IC8vIFRlbXAgb2JqZWN0CgogIGNvbnN0IFNUQVRJQyA9IEJvZHkuU1RBVElDOwoKICBmdW5jdGlvbiBnZXRVbnZpc2l0ZWROb2RlKG5vZGVzKSB7CiAgICBjb25zdCBObm9kZXMgPSBub2Rlcy5sZW5ndGg7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5ub2RlczsgaSsrKSB7CiAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXTsKCiAgICAgIGlmICghbm9kZS52aXNpdGVkICYmICEobm9kZS5ib2R5LnR5cGUgJiBTVEFUSUMpKSB7CiAgICAgICAgcmV0dXJuIG5vZGU7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBjb25zdCBxdWV1ZSA9IFtdOwoKICBmdW5jdGlvbiBiZnMocm9vdCwgdmlzaXRGdW5jLCBiZHMsIGVxcykgewogICAgcXVldWUucHVzaChyb290KTsKICAgIHJvb3QudmlzaXRlZCA9IHRydWU7CiAgICB2aXNpdEZ1bmMocm9vdCwgYmRzLCBlcXMpOwoKICAgIHdoaWxlIChxdWV1ZS5sZW5ndGgpIHsKICAgICAgY29uc3Qgbm9kZSA9IHF1ZXVlLnBvcCgpOyAvLyBMb29wIG92ZXIgdW52aXNpdGVkIGNoaWxkIG5vZGVzCgogICAgICBsZXQgY2hpbGQ7CgogICAgICB3aGlsZSAoY2hpbGQgPSBnZXRVbnZpc2l0ZWROb2RlKG5vZGUuY2hpbGRyZW4pKSB7CiAgICAgICAgY2hpbGQudmlzaXRlZCA9IHRydWU7CiAgICAgICAgdmlzaXRGdW5jKGNoaWxkLCBiZHMsIGVxcyk7CiAgICAgICAgcXVldWUucHVzaChjaGlsZCk7CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIHZpc2l0RnVuYyhub2RlLCBiZHMsIGVxcykgewogICAgYmRzLnB1c2gobm9kZS5ib2R5KTsKICAgIGNvbnN0IE5lcXMgPSBub2RlLmVxcy5sZW5ndGg7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5lcXM7IGkrKykgewogICAgICBjb25zdCBlcSA9IG5vZGUuZXFzW2ldOwoKICAgICAgaWYgKCFlcXMuaW5jbHVkZXMoZXEpKSB7CiAgICAgICAgZXFzLnB1c2goZXEpOwogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiBzb3J0QnlJZChhLCBiKSB7CiAgICByZXR1cm4gYi5pZCAtIGEuaWQ7CiAgfQoKICAvKioKICAgKiBGb3IgcG9vbGluZyBvYmplY3RzIHRoYXQgY2FuIGJlIHJldXNlZC4KICAgKi8KICBjbGFzcyBQb29sIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLm9iamVjdHMgPSBbXTsKICAgICAgdGhpcy50eXBlID0gT2JqZWN0OwogICAgfQoKICAgIC8qKgogICAgICogUmVsZWFzZSBhbiBvYmplY3QgYWZ0ZXIgdXNlCiAgICAgKi8KICAgIHJlbGVhc2UoKSB7CiAgICAgIGNvbnN0IE5hcmdzID0gYXJndW1lbnRzLmxlbmd0aDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOYXJnczsgaSsrKSB7CiAgICAgICAgdGhpcy5vYmplY3RzLnB1c2goaSA8IDAgfHwgYXJndW1lbnRzLmxlbmd0aCA8PSBpID8gdW5kZWZpbmVkIDogYXJndW1lbnRzW2ldKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBvYmplY3QKICAgICAqLwoKCiAgICBnZXQoKSB7CiAgICAgIGlmICh0aGlzLm9iamVjdHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0T2JqZWN0KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRoaXMub2JqZWN0cy5wb3AoKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3QgYW4gb2JqZWN0LiBTaG91bGQgYmUgaW1wbGVtZW50ZWQgaW4gZWFjaCBzdWJjbGFzcy4KICAgICAqLwoKCiAgICBjb25zdHJ1Y3RPYmplY3QoKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignY29uc3RydWN0T2JqZWN0KCkgbm90IGltcGxlbWVudGVkIGluIHRoaXMgUG9vbCBzdWJjbGFzcyB5ZXQhJyk7CiAgICB9CiAgICAvKioKICAgICAqIEByZXR1cm4gU2VsZiwgZm9yIGNoYWluaW5nCiAgICAgKi8KCgogICAgcmVzaXplKHNpemUpIHsKICAgICAgY29uc3Qgb2JqZWN0cyA9IHRoaXMub2JqZWN0czsKCiAgICAgIHdoaWxlIChvYmplY3RzLmxlbmd0aCA+IHNpemUpIHsKICAgICAgICBvYmplY3RzLnBvcCgpOwogICAgICB9CgogICAgICB3aGlsZSAob2JqZWN0cy5sZW5ndGggPCBzaXplKSB7CiAgICAgICAgb2JqZWN0cy5wdXNoKHRoaXMuY29uc3RydWN0T2JqZWN0KCkpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgfQoKICAvKioKICAgKiBWZWMzUG9vbAogICAqLwoKICBjbGFzcyBWZWMzUG9vbCBleHRlbmRzIFBvb2wgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7CiAgICAgIHRoaXMudHlwZSA9IFZlYzM7CiAgICB9CgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3QgYSB2ZWN0b3IKICAgICAqLwogICAgY29uc3RydWN0T2JqZWN0KCkgewogICAgICByZXR1cm4gbmV3IFZlYzMoKTsKICAgIH0KCiAgfQoKICAvLyBOYW1pbmcgcnVsZTogYmFzZWQgb2YgdGhlIG9yZGVyIGluIFNIQVBFX1RZUEVTLAogIC8vIHRoZSBmaXJzdCBwYXJ0IG9mIHRoZSBtZXRob2QgaXMgZm9ybWVkIGJ5IHRoZQogIC8vIHNoYXBlIHR5cGUgdGhhdCBjb21lcyBiZWZvcmUsIGluIHRoZSBzZWNvbmQgcGFydAogIC8vIHRoZXJlIGlzIHRoZSBzaGFwZSB0eXBlIHRoYXQgY29tZXMgYWZ0ZXIgaW4gdGhlIFNIQVBFX1RZUEVTIGxpc3QKICBjb25zdCBDT0xMSVNJT05fVFlQRVMgPSB7CiAgICBzcGhlcmVTcGhlcmU6IFNoYXBlLnR5cGVzLlNQSEVSRSwKICAgIHNwaGVyZVBsYW5lOiBTaGFwZS50eXBlcy5TUEhFUkUgfCBTaGFwZS50eXBlcy5QTEFORSwKICAgIGJveEJveDogU2hhcGUudHlwZXMuQk9YIHwgU2hhcGUudHlwZXMuQk9YLAogICAgc3BoZXJlQm94OiBTaGFwZS50eXBlcy5TUEhFUkUgfCBTaGFwZS50eXBlcy5CT1gsCiAgICBwbGFuZUJveDogU2hhcGUudHlwZXMuUExBTkUgfCBTaGFwZS50eXBlcy5CT1gsCiAgICBjb252ZXhDb252ZXg6IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sCiAgICBzcGhlcmVDb252ZXg6IFNoYXBlLnR5cGVzLlNQSEVSRSB8IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sCiAgICBwbGFuZUNvbnZleDogU2hhcGUudHlwZXMuUExBTkUgfCBTaGFwZS50eXBlcy5DT05WRVhQT0xZSEVEUk9OLAogICAgYm94Q29udmV4OiBTaGFwZS50eXBlcy5CT1ggfCBTaGFwZS50eXBlcy5DT05WRVhQT0xZSEVEUk9OLAogICAgc3BoZXJlSGVpZ2h0ZmllbGQ6IFNoYXBlLnR5cGVzLlNQSEVSRSB8IFNoYXBlLnR5cGVzLkhFSUdIVEZJRUxELAogICAgYm94SGVpZ2h0ZmllbGQ6IFNoYXBlLnR5cGVzLkJPWCB8IFNoYXBlLnR5cGVzLkhFSUdIVEZJRUxELAogICAgY29udmV4SGVpZ2h0ZmllbGQ6IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04gfCBTaGFwZS50eXBlcy5IRUlHSFRGSUVMRCwKICAgIHNwaGVyZVBhcnRpY2xlOiBTaGFwZS50eXBlcy5QQVJUSUNMRSB8IFNoYXBlLnR5cGVzLlNQSEVSRSwKICAgIHBsYW5lUGFydGljbGU6IFNoYXBlLnR5cGVzLlBMQU5FIHwgU2hhcGUudHlwZXMuUEFSVElDTEUsCiAgICBib3hQYXJ0aWNsZTogU2hhcGUudHlwZXMuQk9YIHwgU2hhcGUudHlwZXMuUEFSVElDTEUsCiAgICBjb252ZXhQYXJ0aWNsZTogU2hhcGUudHlwZXMuUEFSVElDTEUgfCBTaGFwZS50eXBlcy5DT05WRVhQT0xZSEVEUk9OLAogICAgY3lsaW5kZXJDeWxpbmRlcjogU2hhcGUudHlwZXMuQ1lMSU5ERVIsCiAgICBzcGhlcmVDeWxpbmRlcjogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuQ1lMSU5ERVIsCiAgICBwbGFuZUN5bGluZGVyOiBTaGFwZS50eXBlcy5QTEFORSB8IFNoYXBlLnR5cGVzLkNZTElOREVSLAogICAgYm94Q3lsaW5kZXI6IFNoYXBlLnR5cGVzLkJPWCB8IFNoYXBlLnR5cGVzLkNZTElOREVSLAogICAgY29udmV4Q3lsaW5kZXI6IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04gfCBTaGFwZS50eXBlcy5DWUxJTkRFUiwKICAgIGhlaWdodGZpZWxkQ3lsaW5kZXI6IFNoYXBlLnR5cGVzLkhFSUdIVEZJRUxEIHwgU2hhcGUudHlwZXMuQ1lMSU5ERVIsCiAgICBwYXJ0aWNsZUN5bGluZGVyOiBTaGFwZS50eXBlcy5QQVJUSUNMRSB8IFNoYXBlLnR5cGVzLkNZTElOREVSLAogICAgc3BoZXJlVHJpbWVzaDogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuVFJJTUVTSCwKICAgIHBsYW5lVHJpbWVzaDogU2hhcGUudHlwZXMuUExBTkUgfCBTaGFwZS50eXBlcy5UUklNRVNICiAgfTsKCiAgLyoqCiAgICogSGVscGVyIGNsYXNzIGZvciB0aGUgV29ybGQuIEdlbmVyYXRlcyBDb250YWN0RXF1YXRpb25zLgogICAqIEB0b2RvIFNwaGVyZS1Db252ZXhQb2x5aGVkcm9uIGNvbnRhY3RzCiAgICogQHRvZG8gQ29udGFjdCByZWR1Y3Rpb24KICAgKiBAdG9kbyBzaG91bGQgbW92ZSBtZXRob2RzIHRvIHByb3RvdHlwZQogICAqLwogIGNsYXNzIE5hcnJvd3BoYXNlIHsKICAgIC8qKgogICAgICogSW50ZXJuYWwgc3RvcmFnZSBvZiBwb29sZWQgY29udGFjdCBwb2ludHMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFBvb2xlZCB2ZWN0b3JzLgogICAgICovCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5zcGhlcmVTcGhlcmVdKCkgewogICAgICByZXR1cm4gdGhpcy5zcGhlcmVTcGhlcmU7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuc3BoZXJlUGxhbmVdKCkgewogICAgICByZXR1cm4gdGhpcy5zcGhlcmVQbGFuZTsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5ib3hCb3hdKCkgewogICAgICByZXR1cm4gdGhpcy5ib3hCb3g7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuc3BoZXJlQm94XSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlQm94OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnBsYW5lQm94XSgpIHsKICAgICAgcmV0dXJuIHRoaXMucGxhbmVCb3g7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuY29udmV4Q29udmV4XSgpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4Q29udmV4OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnNwaGVyZUNvbnZleF0oKSB7CiAgICAgIHJldHVybiB0aGlzLnNwaGVyZUNvbnZleDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5wbGFuZUNvbnZleF0oKSB7CiAgICAgIHJldHVybiB0aGlzLnBsYW5lQ29udmV4OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLmJveENvbnZleF0oKSB7CiAgICAgIHJldHVybiB0aGlzLmJveENvbnZleDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5zcGhlcmVIZWlnaHRmaWVsZF0oKSB7CiAgICAgIHJldHVybiB0aGlzLnNwaGVyZUhlaWdodGZpZWxkOwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLmJveEhlaWdodGZpZWxkXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuYm94SGVpZ2h0ZmllbGQ7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuY29udmV4SGVpZ2h0ZmllbGRdKCkgewogICAgICByZXR1cm4gdGhpcy5jb252ZXhIZWlnaHRmaWVsZDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5zcGhlcmVQYXJ0aWNsZV0oKSB7CiAgICAgIHJldHVybiB0aGlzLnNwaGVyZVBhcnRpY2xlOwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnBsYW5lUGFydGljbGVdKCkgewogICAgICByZXR1cm4gdGhpcy5wbGFuZVBhcnRpY2xlOwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLmJveFBhcnRpY2xlXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuYm94UGFydGljbGU7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuY29udmV4UGFydGljbGVdKCkgewogICAgICByZXR1cm4gdGhpcy5jb252ZXhQYXJ0aWNsZTsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5jeWxpbmRlckN5bGluZGVyXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4Q29udmV4OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnNwaGVyZUN5bGluZGVyXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlQ29udmV4OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnBsYW5lQ3lsaW5kZXJdKCkgewogICAgICByZXR1cm4gdGhpcy5wbGFuZUNvbnZleDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5ib3hDeWxpbmRlcl0oKSB7CiAgICAgIHJldHVybiB0aGlzLmJveENvbnZleDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5jb252ZXhDeWxpbmRlcl0oKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbnZleENvbnZleDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5oZWlnaHRmaWVsZEN5bGluZGVyXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuaGVpZ2h0ZmllbGRDeWxpbmRlcjsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5wYXJ0aWNsZUN5bGluZGVyXSgpIHsKICAgICAgcmV0dXJuIHRoaXMucGFydGljbGVDeWxpbmRlcjsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5zcGhlcmVUcmltZXNoXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlVHJpbWVzaDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5wbGFuZVRyaW1lc2hdKCkgewogICAgICByZXR1cm4gdGhpcy5wbGFuZVRyaW1lc2g7CiAgICB9IC8vIGdldCBbQ09MTElTSU9OX1RZUEVTLmNvbnZleFRyaW1lc2hdKCkgewogICAgLy8gICByZXR1cm4gdGhpcy5jb252ZXhUcmltZXNoCiAgICAvLyB9CgoKICAgIGNvbnN0cnVjdG9yKHdvcmxkKSB7CiAgICAgIHRoaXMuY29udGFjdFBvaW50UG9vbCA9IFtdOwogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25Qb29sID0gW107CiAgICAgIHRoaXMucmVzdWx0ID0gW107CiAgICAgIHRoaXMuZnJpY3Rpb25SZXN1bHQgPSBbXTsKICAgICAgdGhpcy52M3Bvb2wgPSBuZXcgVmVjM1Bvb2woKTsKICAgICAgdGhpcy53b3JsZCA9IHdvcmxkOwogICAgICB0aGlzLmN1cnJlbnRDb250YWN0TWF0ZXJpYWwgPSB3b3JsZC5kZWZhdWx0Q29udGFjdE1hdGVyaWFsOwogICAgICB0aGlzLmVuYWJsZUZyaWN0aW9uUmVkdWN0aW9uID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIE1ha2UgYSBjb250YWN0IG9iamVjdCwgYnkgdXNpbmcgdGhlIGludGVybmFsIHBvb2wgb3IgY3JlYXRpbmcgYSBuZXcgb25lLgogICAgICovCgoKICAgIGNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgb3ZlcnJpZGVTaGFwZUEsIG92ZXJyaWRlU2hhcGVCKSB7CiAgICAgIGxldCBjOwoKICAgICAgaWYgKHRoaXMuY29udGFjdFBvaW50UG9vbC5sZW5ndGgpIHsKICAgICAgICBjID0gdGhpcy5jb250YWN0UG9pbnRQb29sLnBvcCgpOwogICAgICAgIGMuYmkgPSBiaTsKICAgICAgICBjLmJqID0gYmo7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYyA9IG5ldyBDb250YWN0RXF1YXRpb24oYmksIGJqKTsKICAgICAgfQoKICAgICAgYy5lbmFibGVkID0gYmkuY29sbGlzaW9uUmVzcG9uc2UgJiYgYmouY29sbGlzaW9uUmVzcG9uc2UgJiYgc2kuY29sbGlzaW9uUmVzcG9uc2UgJiYgc2ouY29sbGlzaW9uUmVzcG9uc2U7CiAgICAgIGNvbnN0IGNtID0gdGhpcy5jdXJyZW50Q29udGFjdE1hdGVyaWFsOwogICAgICBjLnJlc3RpdHV0aW9uID0gY20ucmVzdGl0dXRpb247CiAgICAgIGMuc2V0U3Bvb2tQYXJhbXMoY20uY29udGFjdEVxdWF0aW9uU3RpZmZuZXNzLCBjbS5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uLCB0aGlzLndvcmxkLmR0KTsKICAgICAgY29uc3QgbWF0QSA9IHNpLm1hdGVyaWFsIHx8IGJpLm1hdGVyaWFsOwogICAgICBjb25zdCBtYXRCID0gc2oubWF0ZXJpYWwgfHwgYmoubWF0ZXJpYWw7CgogICAgICBpZiAobWF0QSAmJiBtYXRCICYmIG1hdEEucmVzdGl0dXRpb24gPj0gMCAmJiBtYXRCLnJlc3RpdHV0aW9uID49IDApIHsKICAgICAgICBjLnJlc3RpdHV0aW9uID0gbWF0QS5yZXN0aXR1dGlvbiAqIG1hdEIucmVzdGl0dXRpb247CiAgICAgIH0KCiAgICAgIGMuc2kgPSBvdmVycmlkZVNoYXBlQSB8fCBzaTsKICAgICAgYy5zaiA9IG92ZXJyaWRlU2hhcGVCIHx8IHNqOwogICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBjcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KGNvbnRhY3RFcXVhdGlvbiwgb3V0QXJyYXkpIHsKICAgICAgY29uc3QgYm9keUEgPSBjb250YWN0RXF1YXRpb24uYmk7CiAgICAgIGNvbnN0IGJvZHlCID0gY29udGFjdEVxdWF0aW9uLmJqOwogICAgICBjb25zdCBzaGFwZUEgPSBjb250YWN0RXF1YXRpb24uc2k7CiAgICAgIGNvbnN0IHNoYXBlQiA9IGNvbnRhY3RFcXVhdGlvbi5zajsKICAgICAgY29uc3Qgd29ybGQgPSB0aGlzLndvcmxkOwogICAgICBjb25zdCBjbSA9IHRoaXMuY3VycmVudENvbnRhY3RNYXRlcmlhbDsgLy8gSWYgZnJpY3Rpb24gb3IgcmVzdGl0dXRpb24gd2VyZSBzcGVjaWZpZWQgaW4gdGhlIG1hdGVyaWFsLCB1c2UgdGhlbQoKICAgICAgbGV0IGZyaWN0aW9uID0gY20uZnJpY3Rpb247CiAgICAgIGNvbnN0IG1hdEEgPSBzaGFwZUEubWF0ZXJpYWwgfHwgYm9keUEubWF0ZXJpYWw7CiAgICAgIGNvbnN0IG1hdEIgPSBzaGFwZUIubWF0ZXJpYWwgfHwgYm9keUIubWF0ZXJpYWw7CgogICAgICBpZiAobWF0QSAmJiBtYXRCICYmIG1hdEEuZnJpY3Rpb24gPj0gMCAmJiBtYXRCLmZyaWN0aW9uID49IDApIHsKICAgICAgICBmcmljdGlvbiA9IG1hdEEuZnJpY3Rpb24gKiBtYXRCLmZyaWN0aW9uOwogICAgICB9CgogICAgICBpZiAoZnJpY3Rpb24gPiAwKSB7CiAgICAgICAgLy8gQ3JlYXRlIDIgdGFuZ2VudCBlcXVhdGlvbnMKICAgICAgICAvLyBVc2VycyBtYXkgcHJvdmlkZSBhIGZvcmNlIGRpZmZlcmVudCBmcm9tIGdsb2JhbCBncmF2aXR5IHRvIHVzZSB3aGVuIGNvbXB1dGluZyBjb250YWN0IGZyaWN0aW9uLgogICAgICAgIGNvbnN0IG11ZyA9IGZyaWN0aW9uICogKHdvcmxkLmZyaWN0aW9uR3Jhdml0eSB8fCB3b3JsZC5ncmF2aXR5KS5sZW5ndGgoKTsKICAgICAgICBsZXQgcmVkdWNlZE1hc3MgPSBib2R5QS5pbnZNYXNzICsgYm9keUIuaW52TWFzczsKCiAgICAgICAgaWYgKHJlZHVjZWRNYXNzID4gMCkgewogICAgICAgICAgcmVkdWNlZE1hc3MgPSAxIC8gcmVkdWNlZE1hc3M7CiAgICAgICAgfQoKICAgICAgICBjb25zdCBwb29sID0gdGhpcy5mcmljdGlvbkVxdWF0aW9uUG9vbDsKICAgICAgICBjb25zdCBjMSA9IHBvb2wubGVuZ3RoID8gcG9vbC5wb3AoKSA6IG5ldyBGcmljdGlvbkVxdWF0aW9uKGJvZHlBLCBib2R5QiwgbXVnICogcmVkdWNlZE1hc3MpOwogICAgICAgIGNvbnN0IGMyID0gcG9vbC5sZW5ndGggPyBwb29sLnBvcCgpIDogbmV3IEZyaWN0aW9uRXF1YXRpb24oYm9keUEsIGJvZHlCLCBtdWcgKiByZWR1Y2VkTWFzcyk7CiAgICAgICAgYzEuYmkgPSBjMi5iaSA9IGJvZHlBOwogICAgICAgIGMxLmJqID0gYzIuYmogPSBib2R5QjsKICAgICAgICBjMS5taW5Gb3JjZSA9IGMyLm1pbkZvcmNlID0gLW11ZyAqIHJlZHVjZWRNYXNzOwogICAgICAgIGMxLm1heEZvcmNlID0gYzIubWF4Rm9yY2UgPSBtdWcgKiByZWR1Y2VkTWFzczsgLy8gQ29weSBvdmVyIHRoZSByZWxhdGl2ZSB2ZWN0b3JzCgogICAgICAgIGMxLnJpLmNvcHkoY29udGFjdEVxdWF0aW9uLnJpKTsKICAgICAgICBjMS5yai5jb3B5KGNvbnRhY3RFcXVhdGlvbi5yaik7CiAgICAgICAgYzIucmkuY29weShjb250YWN0RXF1YXRpb24ucmkpOwogICAgICAgIGMyLnJqLmNvcHkoY29udGFjdEVxdWF0aW9uLnJqKTsgLy8gQ29uc3RydWN0IHRhbmdlbnRzCgogICAgICAgIGNvbnRhY3RFcXVhdGlvbi5uaS50YW5nZW50cyhjMS50LCBjMi50KTsgLy8gU2V0IHNwb29rIHBhcmFtcwoKICAgICAgICBjMS5zZXRTcG9va1BhcmFtcyhjbS5mcmljdGlvbkVxdWF0aW9uU3RpZmZuZXNzLCBjbS5mcmljdGlvbkVxdWF0aW9uUmVsYXhhdGlvbiwgd29ybGQuZHQpOwogICAgICAgIGMyLnNldFNwb29rUGFyYW1zKGNtLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3MsIGNtLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uLCB3b3JsZC5kdCk7CiAgICAgICAgYzEuZW5hYmxlZCA9IGMyLmVuYWJsZWQgPSBjb250YWN0RXF1YXRpb24uZW5hYmxlZDsKICAgICAgICBvdXRBcnJheS5wdXNoKGMxLCBjMik7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIC8qKgogICAgICogVGFrZSB0aGUgYXZlcmFnZSBOIGxhdGVzdCBjb250YWN0IHBvaW50IG9uIHRoZSBwbGFuZS4KICAgICAqLwoKCiAgICBjcmVhdGVGcmljdGlvbkZyb21BdmVyYWdlKG51bUNvbnRhY3RzKSB7CiAgICAgIC8vIFRoZSBsYXN0IGNvbnRhY3RFcXVhdGlvbgogICAgICBsZXQgYyA9IHRoaXMucmVzdWx0W3RoaXMucmVzdWx0Lmxlbmd0aCAtIDFdOyAvLyBDcmVhdGUgdGhlIHJlc3VsdDogdHdvICJhdmVyYWdlIiBmcmljdGlvbiBlcXVhdGlvbnMKCiAgICAgIGlmICghdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KGMsIHRoaXMuZnJpY3Rpb25SZXN1bHQpIHx8IG51bUNvbnRhY3RzID09PSAxKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCBmMSA9IHRoaXMuZnJpY3Rpb25SZXN1bHRbdGhpcy5mcmljdGlvblJlc3VsdC5sZW5ndGggLSAyXTsKICAgICAgY29uc3QgZjIgPSB0aGlzLmZyaWN0aW9uUmVzdWx0W3RoaXMuZnJpY3Rpb25SZXN1bHQubGVuZ3RoIC0gMV07CiAgICAgIGF2ZXJhZ2VOb3JtYWwuc2V0WmVybygpOwogICAgICBhdmVyYWdlQ29udGFjdFBvaW50QS5zZXRaZXJvKCk7CiAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRCLnNldFplcm8oKTsKICAgICAgY29uc3QgYm9keUEgPSBjLmJpOwogICAgICBjLmJqOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IG51bUNvbnRhY3RzOyBpKyspIHsKICAgICAgICBjID0gdGhpcy5yZXN1bHRbdGhpcy5yZXN1bHQubGVuZ3RoIC0gMSAtIGldOwoKICAgICAgICBpZiAoYy5iaSAhPT0gYm9keUEpIHsKICAgICAgICAgIGF2ZXJhZ2VOb3JtYWwudmFkZChjLm5pLCBhdmVyYWdlTm9ybWFsKTsKICAgICAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRBLnZhZGQoYy5yaSwgYXZlcmFnZUNvbnRhY3RQb2ludEEpOwogICAgICAgICAgYXZlcmFnZUNvbnRhY3RQb2ludEIudmFkZChjLnJqLCBhdmVyYWdlQ29udGFjdFBvaW50Qik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGF2ZXJhZ2VOb3JtYWwudnN1YihjLm5pLCBhdmVyYWdlTm9ybWFsKTsKICAgICAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRBLnZhZGQoYy5yaiwgYXZlcmFnZUNvbnRhY3RQb2ludEEpOwogICAgICAgICAgYXZlcmFnZUNvbnRhY3RQb2ludEIudmFkZChjLnJpLCBhdmVyYWdlQ29udGFjdFBvaW50Qik7CiAgICAgICAgfQogICAgICB9CgogICAgICBjb25zdCBpbnZOdW1Db250YWN0cyA9IDEgLyBudW1Db250YWN0czsKICAgICAgYXZlcmFnZUNvbnRhY3RQb2ludEEuc2NhbGUoaW52TnVtQ29udGFjdHMsIGYxLnJpKTsKICAgICAgYXZlcmFnZUNvbnRhY3RQb2ludEIuc2NhbGUoaW52TnVtQ29udGFjdHMsIGYxLnJqKTsKICAgICAgZjIucmkuY29weShmMS5yaSk7IC8vIFNob3VsZCBiZSB0aGUgc2FtZQoKICAgICAgZjIucmouY29weShmMS5yaik7CiAgICAgIGF2ZXJhZ2VOb3JtYWwubm9ybWFsaXplKCk7CiAgICAgIGF2ZXJhZ2VOb3JtYWwudGFuZ2VudHMoZjEudCwgZjIudCk7IC8vIHJldHVybiBlcTsKICAgIH0KICAgIC8qKgogICAgICogR2VuZXJhdGUgYWxsIGNvbnRhY3RzIGJldHdlZW4gYSBsaXN0IG9mIGJvZHkgcGFpcnMKICAgICAqIEBwYXJhbSBwMSBBcnJheSBvZiBib2R5IGluZGljZXMKICAgICAqIEBwYXJhbSBwMiBBcnJheSBvZiBib2R5IGluZGljZXMKICAgICAqIEBwYXJhbSByZXN1bHQgQXJyYXkgdG8gc3RvcmUgZ2VuZXJhdGVkIGNvbnRhY3RzCiAgICAgKiBAcGFyYW0gb2xkY29udGFjdHMgT3B0aW9uYWwuIEFycmF5IG9mIHJldXNhYmxlIGNvbnRhY3Qgb2JqZWN0cwogICAgICovCgoKICAgIGdldENvbnRhY3RzKHAxLCBwMiwgd29ybGQsIHJlc3VsdCwgb2xkY29udGFjdHMsIGZyaWN0aW9uUmVzdWx0LCBmcmljdGlvblBvb2wpIHsKICAgICAgLy8gU2F2ZSBvbGQgY29udGFjdCBvYmplY3RzCiAgICAgIHRoaXMuY29udGFjdFBvaW50UG9vbCA9IG9sZGNvbnRhY3RzOwogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25Qb29sID0gZnJpY3Rpb25Qb29sOwogICAgICB0aGlzLnJlc3VsdCA9IHJlc3VsdDsKICAgICAgdGhpcy5mcmljdGlvblJlc3VsdCA9IGZyaWN0aW9uUmVzdWx0OwogICAgICBjb25zdCBxaSA9IHRtcFF1YXQxOwogICAgICBjb25zdCBxaiA9IHRtcFF1YXQyOwogICAgICBjb25zdCB4aSA9IHRtcFZlYzE7CiAgICAgIGNvbnN0IHhqID0gdG1wVmVjMjsKCiAgICAgIGZvciAobGV0IGsgPSAwLCBOID0gcDEubGVuZ3RoOyBrICE9PSBOOyBrKyspIHsKICAgICAgICAvLyBHZXQgY3VycmVudCBjb2xsaXNpb24gYm9kaWVzCiAgICAgICAgY29uc3QgYmkgPSBwMVtrXTsKICAgICAgICBjb25zdCBiaiA9IHAyW2tdOyAvLyBHZXQgY29udGFjdCBtYXRlcmlhbAoKICAgICAgICBsZXQgYm9keUNvbnRhY3RNYXRlcmlhbCA9IG51bGw7CgogICAgICAgIGlmIChiaS5tYXRlcmlhbCAmJiBiai5tYXRlcmlhbCkgewogICAgICAgICAgYm9keUNvbnRhY3RNYXRlcmlhbCA9IHdvcmxkLmdldENvbnRhY3RNYXRlcmlhbChiaS5tYXRlcmlhbCwgYmoubWF0ZXJpYWwpIHx8IG51bGw7CiAgICAgICAgfQoKICAgICAgICBjb25zdCBqdXN0VGVzdCA9IGJpLnR5cGUgJiBCb2R5LktJTkVNQVRJQyAmJiBiai50eXBlICYgQm9keS5TVEFUSUMgfHwgYmkudHlwZSAmIEJvZHkuU1RBVElDICYmIGJqLnR5cGUgJiBCb2R5LktJTkVNQVRJQyB8fCBiaS50eXBlICYgQm9keS5LSU5FTUFUSUMgJiYgYmoudHlwZSAmIEJvZHkuS0lORU1BVElDOwoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJpLnNoYXBlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgYmkucXVhdGVybmlvbi5tdWx0KGJpLnNoYXBlT3JpZW50YXRpb25zW2ldLCBxaSk7CiAgICAgICAgICBiaS5xdWF0ZXJuaW9uLnZtdWx0KGJpLnNoYXBlT2Zmc2V0c1tpXSwgeGkpOwogICAgICAgICAgeGkudmFkZChiaS5wb3NpdGlvbiwgeGkpOwogICAgICAgICAgY29uc3Qgc2kgPSBiaS5zaGFwZXNbaV07CgogICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBiai5zaGFwZXMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgLy8gQ29tcHV0ZSB3b3JsZCB0cmFuc2Zvcm0gb2Ygc2hhcGVzCiAgICAgICAgICAgIGJqLnF1YXRlcm5pb24ubXVsdChiai5zaGFwZU9yaWVudGF0aW9uc1tqXSwgcWopOwogICAgICAgICAgICBiai5xdWF0ZXJuaW9uLnZtdWx0KGJqLnNoYXBlT2Zmc2V0c1tqXSwgeGopOwogICAgICAgICAgICB4ai52YWRkKGJqLnBvc2l0aW9uLCB4aik7CiAgICAgICAgICAgIGNvbnN0IHNqID0gYmouc2hhcGVzW2pdOwoKICAgICAgICAgICAgaWYgKCEoc2kuY29sbGlzaW9uRmlsdGVyTWFzayAmIHNqLmNvbGxpc2lvbkZpbHRlckdyb3VwICYmIHNqLmNvbGxpc2lvbkZpbHRlck1hc2sgJiBzaS5jb2xsaXNpb25GaWx0ZXJHcm91cCkpIHsKICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHhpLmRpc3RhbmNlVG8oeGopID4gc2kuYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBzai5ib3VuZGluZ1NwaGVyZVJhZGl1cykgewogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9IC8vIEdldCBjb2xsaXNpb24gbWF0ZXJpYWwKCgogICAgICAgICAgICBsZXQgc2hhcGVDb250YWN0TWF0ZXJpYWwgPSBudWxsOwoKICAgICAgICAgICAgaWYgKHNpLm1hdGVyaWFsICYmIHNqLm1hdGVyaWFsKSB7CiAgICAgICAgICAgICAgc2hhcGVDb250YWN0TWF0ZXJpYWwgPSB3b3JsZC5nZXRDb250YWN0TWF0ZXJpYWwoc2kubWF0ZXJpYWwsIHNqLm1hdGVyaWFsKSB8fCBudWxsOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0aGlzLmN1cnJlbnRDb250YWN0TWF0ZXJpYWwgPSBzaGFwZUNvbnRhY3RNYXRlcmlhbCB8fCBib2R5Q29udGFjdE1hdGVyaWFsIHx8IHdvcmxkLmRlZmF1bHRDb250YWN0TWF0ZXJpYWw7IC8vIEdldCBjb250YWN0cwoKICAgICAgICAgICAgY29uc3QgcmVzb2x2ZXJJbmRleCA9IHNpLnR5cGUgfCBzai50eXBlOwogICAgICAgICAgICBjb25zdCByZXNvbHZlciA9IHRoaXNbcmVzb2x2ZXJJbmRleF07CgogICAgICAgICAgICBpZiAocmVzb2x2ZXIpIHsKICAgICAgICAgICAgICBsZXQgcmV0dmFsID0gZmFsc2U7IC8vIFRPIERPOiBpbnZlc3RpZ2F0ZSB3aHkgc3BoZXJlUGFydGljbGUgYW5kIGNvbnZleFBhcnRpY2xlCiAgICAgICAgICAgICAgLy8gcmVzb2x2ZXJzIGV4cGVjdCBzaSBhbmQgc2ogc2hhcGVzIHRvIGJlIGluIHJldmVyc2Ugb3JkZXIKICAgICAgICAgICAgICAvLyAoaS5lLiBsYXJnZXIgaW50ZWdlciB2YWx1ZSB0eXBlIGZpcnN0IGluc3RlYWQgb2Ygc21hbGxlciBmaXJzdCkKCiAgICAgICAgICAgICAgaWYgKHNpLnR5cGUgPCBzai50eXBlKSB7CiAgICAgICAgICAgICAgICByZXR2YWwgPSByZXNvbHZlci5jYWxsKHRoaXMsIHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHZhbCA9IHJlc29sdmVyLmNhbGwodGhpcywgc2osIHNpLCB4aiwgeGksIHFqLCBxaSwgYmosIGJpLCBzaSwgc2osIGp1c3RUZXN0KTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmIChyZXR2YWwgJiYganVzdFRlc3QpIHsKICAgICAgICAgICAgICAgIC8vIFJlZ2lzdGVyIG92ZXJsYXAKICAgICAgICAgICAgICAgIHdvcmxkLnNoYXBlT3ZlcmxhcEtlZXBlci5zZXQoc2kuaWQsIHNqLmlkKTsKICAgICAgICAgICAgICAgIHdvcmxkLmJvZHlPdmVybGFwS2VlcGVyLnNldChiaS5pZCwgYmouaWQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHNwaGVyZVNwaGVyZShzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICByZXR1cm4geGkuZGlzdGFuY2VTcXVhcmVkKHhqKSA8IChzaS5yYWRpdXMgKyBzai5yYWRpdXMpICoqIDI7CiAgICAgIH0gLy8gV2Ugd2lsbCBoYXZlIG9ubHkgb25lIGNvbnRhY3QgaW4gdGhpcyBjYXNlCgoKICAgICAgY29uc3QgY29udGFjdEVxID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsgLy8gQ29udGFjdCBub3JtYWwKCiAgICAgIHhqLnZzdWIoeGksIGNvbnRhY3RFcS5uaSk7CiAgICAgIGNvbnRhY3RFcS5uaS5ub3JtYWxpemUoKTsgLy8gQ29udGFjdCBwb2ludCBsb2NhdGlvbnMKCiAgICAgIGNvbnRhY3RFcS5yaS5jb3B5KGNvbnRhY3RFcS5uaSk7CiAgICAgIGNvbnRhY3RFcS5yai5jb3B5KGNvbnRhY3RFcS5uaSk7CiAgICAgIGNvbnRhY3RFcS5yaS5zY2FsZShzaS5yYWRpdXMsIGNvbnRhY3RFcS5yaSk7CiAgICAgIGNvbnRhY3RFcS5yai5zY2FsZSgtc2oucmFkaXVzLCBjb250YWN0RXEucmopOwogICAgICBjb250YWN0RXEucmkudmFkZCh4aSwgY29udGFjdEVxLnJpKTsKICAgICAgY29udGFjdEVxLnJpLnZzdWIoYmkucG9zaXRpb24sIGNvbnRhY3RFcS5yaSk7CiAgICAgIGNvbnRhY3RFcS5yai52YWRkKHhqLCBjb250YWN0RXEucmopOwogICAgICBjb250YWN0RXEucmoudnN1Yihiai5wb3NpdGlvbiwgY29udGFjdEVxLnJqKTsKICAgICAgdGhpcy5yZXN1bHQucHVzaChjb250YWN0RXEpOwogICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QoY29udGFjdEVxLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgIH0KCiAgICBzcGhlcmVQbGFuZShzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICAvLyBXZSB3aWxsIGhhdmUgb25lIGNvbnRhY3QgaW4gdGhpcyBjYXNlCiAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOyAvLyBDb250YWN0IG5vcm1hbAoKICAgICAgci5uaS5zZXQoMCwgMCwgMSk7CiAgICAgIHFqLnZtdWx0KHIubmksIHIubmkpOwogICAgICByLm5pLm5lZ2F0ZShyLm5pKTsgLy8gYm9keSBpIGlzIHRoZSBzcGhlcmUsIGZsaXAgbm9ybWFsCgogICAgICByLm5pLm5vcm1hbGl6ZSgpOyAvLyBOZWVkZWQ/CiAgICAgIC8vIFZlY3RvciBmcm9tIHNwaGVyZSBjZW50ZXIgdG8gY29udGFjdCBwb2ludAoKICAgICAgci5uaS5zY2FsZShzaS5yYWRpdXMsIHIucmkpOyAvLyBQcm9qZWN0IGRvd24gc3BoZXJlIG9uIHBsYW5lCgogICAgICB4aS52c3ViKHhqLCBwb2ludF9vbl9wbGFuZV90b19zcGhlcmUpOwogICAgICByLm5pLnNjYWxlKHIubmkuZG90KHBvaW50X29uX3BsYW5lX3RvX3NwaGVyZSksIHBsYW5lX3RvX3NwaGVyZV9vcnRobyk7CiAgICAgIHBvaW50X29uX3BsYW5lX3RvX3NwaGVyZS52c3ViKHBsYW5lX3RvX3NwaGVyZV9vcnRobywgci5yaik7IC8vIFRoZSBzcGhlcmUgcG9zaXRpb24gcHJvamVjdGVkIHRvIHBsYW5lCgogICAgICBpZiAoLXBvaW50X29uX3BsYW5lX3RvX3NwaGVyZS5kb3Qoci5uaSkgPD0gc2kucmFkaXVzKSB7CiAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IC8vIE1ha2UgaXQgcmVsYXRpdmUgdG8gdGhlIGJvZHkKCgogICAgICAgIGNvbnN0IHJpID0gci5yaTsKICAgICAgICBjb25zdCByaiA9IHIucmo7CiAgICAgICAgcmkudmFkZCh4aSwgcmkpOwogICAgICAgIHJpLnZzdWIoYmkucG9zaXRpb24sIHJpKTsKICAgICAgICByai52YWRkKHhqLCByaik7CiAgICAgICAgcmoudnN1Yihiai5wb3NpdGlvbiwgcmopOwogICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICB9CiAgICB9CgogICAgYm94Qm94KHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNpLm1hdGVyaWFsOwogICAgICBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24ubWF0ZXJpYWwgPSBzai5tYXRlcmlhbDsKICAgICAgc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLmNvbGxpc2lvblJlc3BvbnNlID0gc2kuY29sbGlzaW9uUmVzcG9uc2U7CiAgICAgIHNqLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5jb2xsaXNpb25SZXNwb25zZSA9IHNqLmNvbGxpc2lvblJlc3BvbnNlOwogICAgICByZXR1cm4gdGhpcy5jb252ZXhDb252ZXgoc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24sIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHNpLCBzaiwganVzdFRlc3QpOwogICAgfQoKICAgIHNwaGVyZUJveChzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICBjb25zdCB2M3Bvb2wgPSB0aGlzLnYzcG9vbDsgLy8gd2UgcmVmZXIgdG8gdGhlIGJveCBhcyBib2R5IGoKCiAgICAgIGNvbnN0IHNpZGVzID0gc3BoZXJlQm94X3NpZGVzOwogICAgICB4aS52c3ViKHhqLCBib3hfdG9fc3BoZXJlKTsKICAgICAgc2ouZ2V0U2lkZU5vcm1hbHMoc2lkZXMsIHFqKTsKICAgICAgY29uc3QgUiA9IHNpLnJhZGl1czsKCiAgICAgIGxldCBmb3VuZCA9IGZhbHNlOyAvLyBTdG9yZSB0aGUgcmVzdWx0aW5nIHNpZGUgcGVuZXRyYXRpb24gaW5mbwoKICAgICAgY29uc3Qgc2lkZV9ucyA9IHNwaGVyZUJveF9zaWRlX25zOwogICAgICBjb25zdCBzaWRlX25zMSA9IHNwaGVyZUJveF9zaWRlX25zMTsKICAgICAgY29uc3Qgc2lkZV9uczIgPSBzcGhlcmVCb3hfc2lkZV9uczI7CiAgICAgIGxldCBzaWRlX2ggPSBudWxsOwogICAgICBsZXQgc2lkZV9wZW5ldHJhdGlvbnMgPSAwOwogICAgICBsZXQgc2lkZV9kb3QxID0gMDsKICAgICAgbGV0IHNpZGVfZG90MiA9IDA7CiAgICAgIGxldCBzaWRlX2Rpc3RhbmNlID0gbnVsbDsKCiAgICAgIGZvciAobGV0IGlkeCA9IDAsIG5zaWRlcyA9IHNpZGVzLmxlbmd0aDsgaWR4ICE9PSBuc2lkZXMgJiYgZm91bmQgPT09IGZhbHNlOyBpZHgrKykgewogICAgICAgIC8vIEdldCB0aGUgcGxhbmUgc2lkZSBub3JtYWwgKG5zKQogICAgICAgIGNvbnN0IG5zID0gc3BoZXJlQm94X25zOwogICAgICAgIG5zLmNvcHkoc2lkZXNbaWR4XSk7CiAgICAgICAgY29uc3QgaCA9IG5zLmxlbmd0aCgpOwogICAgICAgIG5zLm5vcm1hbGl6ZSgpOyAvLyBUaGUgbm9ybWFsL2Rpc3RhbmNlIGRvdCBwcm9kdWN0IHRlbGxzIHdoaWNoIHNpZGUgb2YgdGhlIHBsYW5lIHdlIGFyZQoKICAgICAgICBjb25zdCBkb3QgPSBib3hfdG9fc3BoZXJlLmRvdChucyk7CgogICAgICAgIGlmIChkb3QgPCBoICsgUiAmJiBkb3QgPiAwKSB7CiAgICAgICAgICAvLyBJbnRlcnNlY3RzIHBsYW5lLiBOb3cgY2hlY2sgdGhlIG90aGVyIHR3byBkaW1lbnNpb25zCiAgICAgICAgICBjb25zdCBuczEgPSBzcGhlcmVCb3hfbnMxOwogICAgICAgICAgY29uc3QgbnMyID0gc3BoZXJlQm94X25zMjsKICAgICAgICAgIG5zMS5jb3B5KHNpZGVzWyhpZHggKyAxKSAlIDNdKTsKICAgICAgICAgIG5zMi5jb3B5KHNpZGVzWyhpZHggKyAyKSAlIDNdKTsKICAgICAgICAgIGNvbnN0IGgxID0gbnMxLmxlbmd0aCgpOwogICAgICAgICAgY29uc3QgaDIgPSBuczIubGVuZ3RoKCk7CiAgICAgICAgICBuczEubm9ybWFsaXplKCk7CiAgICAgICAgICBuczIubm9ybWFsaXplKCk7CiAgICAgICAgICBjb25zdCBkb3QxID0gYm94X3RvX3NwaGVyZS5kb3QobnMxKTsKICAgICAgICAgIGNvbnN0IGRvdDIgPSBib3hfdG9fc3BoZXJlLmRvdChuczIpOwoKICAgICAgICAgIGlmIChkb3QxIDwgaDEgJiYgZG90MSA+IC1oMSAmJiBkb3QyIDwgaDIgJiYgZG90MiA+IC1oMikgewogICAgICAgICAgICBjb25zdCBkaXN0ID0gTWF0aC5hYnMoZG90IC0gaCAtIFIpOwoKICAgICAgICAgICAgaWYgKHNpZGVfZGlzdGFuY2UgPT09IG51bGwgfHwgZGlzdCA8IHNpZGVfZGlzdGFuY2UpIHsKICAgICAgICAgICAgICBzaWRlX2Rpc3RhbmNlID0gZGlzdDsKICAgICAgICAgICAgICBzaWRlX2RvdDEgPSBkb3QxOwogICAgICAgICAgICAgIHNpZGVfZG90MiA9IGRvdDI7CiAgICAgICAgICAgICAgc2lkZV9oID0gaDsKICAgICAgICAgICAgICBzaWRlX25zLmNvcHkobnMpOwogICAgICAgICAgICAgIHNpZGVfbnMxLmNvcHkobnMxKTsKICAgICAgICAgICAgICBzaWRlX25zMi5jb3B5KG5zMik7CiAgICAgICAgICAgICAgc2lkZV9wZW5ldHJhdGlvbnMrKzsKCiAgICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChzaWRlX3BlbmV0cmF0aW9ucykgewogICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICBzaWRlX25zLnNjYWxlKC1SLCByLnJpKTsgLy8gU3BoZXJlIHIKCiAgICAgICAgci5uaS5jb3B5KHNpZGVfbnMpOwogICAgICAgIHIubmkubmVnYXRlKHIubmkpOyAvLyBOb3JtYWwgc2hvdWxkIGJlIG91dCBvZiBzcGhlcmUKCiAgICAgICAgc2lkZV9ucy5zY2FsZShzaWRlX2gsIHNpZGVfbnMpOwogICAgICAgIHNpZGVfbnMxLnNjYWxlKHNpZGVfZG90MSwgc2lkZV9uczEpOwogICAgICAgIHNpZGVfbnMudmFkZChzaWRlX25zMSwgc2lkZV9ucyk7CiAgICAgICAgc2lkZV9uczIuc2NhbGUoc2lkZV9kb3QyLCBzaWRlX25zMik7CiAgICAgICAgc2lkZV9ucy52YWRkKHNpZGVfbnMyLCByLnJqKTsgLy8gTWFrZSByZWxhdGl2ZSB0byBib2RpZXMKCiAgICAgICAgci5yaS52YWRkKHhpLCByLnJpKTsKICAgICAgICByLnJpLnZzdWIoYmkucG9zaXRpb24sIHIucmkpOwogICAgICAgIHIucmoudmFkZCh4aiwgci5yaik7CiAgICAgICAgci5yai52c3ViKGJqLnBvc2l0aW9uLCByLnJqKTsKICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgfSAvLyBDaGVjayBjb3JuZXJzCgoKICAgICAgbGV0IHJqID0gdjNwb29sLmdldCgpOwogICAgICBjb25zdCBzcGhlcmVfdG9fY29ybmVyID0gc3BoZXJlQm94X3NwaGVyZV90b19jb3JuZXI7CgogICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gMiAmJiAhZm91bmQ7IGorKykgewogICAgICAgIGZvciAobGV0IGsgPSAwOyBrICE9PSAyICYmICFmb3VuZDsgaysrKSB7CiAgICAgICAgICBmb3IgKGxldCBsID0gMDsgbCAhPT0gMiAmJiAhZm91bmQ7IGwrKykgewogICAgICAgICAgICByai5zZXQoMCwgMCwgMCk7CgogICAgICAgICAgICBpZiAoaikgewogICAgICAgICAgICAgIHJqLnZhZGQoc2lkZXNbMF0sIHJqKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByai52c3ViKHNpZGVzWzBdLCByaik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChrKSB7CiAgICAgICAgICAgICAgcmoudmFkZChzaWRlc1sxXSwgcmopOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJqLnZzdWIoc2lkZXNbMV0sIHJqKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGwpIHsKICAgICAgICAgICAgICByai52YWRkKHNpZGVzWzJdLCByaik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmoudnN1YihzaWRlc1syXSwgcmopOwogICAgICAgICAgICB9IC8vIFdvcmxkIHBvc2l0aW9uIG9mIGNvcm5lcgoKCiAgICAgICAgICAgIHhqLnZhZGQocmosIHNwaGVyZV90b19jb3JuZXIpOwogICAgICAgICAgICBzcGhlcmVfdG9fY29ybmVyLnZzdWIoeGksIHNwaGVyZV90b19jb3JuZXIpOwoKICAgICAgICAgICAgaWYgKHNwaGVyZV90b19jb3JuZXIubGVuZ3RoU3F1YXJlZCgpIDwgUiAqIFIpIHsKICAgICAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgICAgICAgIHIucmkuY29weShzcGhlcmVfdG9fY29ybmVyKTsKICAgICAgICAgICAgICByLnJpLm5vcm1hbGl6ZSgpOwogICAgICAgICAgICAgIHIubmkuY29weShyLnJpKTsKICAgICAgICAgICAgICByLnJpLnNjYWxlKFIsIHIucmkpOwogICAgICAgICAgICAgIHIucmouY29weShyaik7IC8vIE1ha2UgcmVsYXRpdmUgdG8gYm9kaWVzCgogICAgICAgICAgICAgIHIucmkudmFkZCh4aSwgci5yaSk7CiAgICAgICAgICAgICAgci5yaS52c3ViKGJpLnBvc2l0aW9uLCByLnJpKTsKICAgICAgICAgICAgICByLnJqLnZhZGQoeGosIHIucmopOwogICAgICAgICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7CiAgICAgICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHYzcG9vbC5yZWxlYXNlKHJqKTsKICAgICAgcmogPSBudWxsOyAvLyBDaGVjayBlZGdlcwoKICAgICAgY29uc3QgZWRnZVRhbmdlbnQgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgIGNvbnN0IGVkZ2VDZW50ZXIgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgIGNvbnN0IHIgPSB2M3Bvb2wuZ2V0KCk7IC8vIHIgPSBlZGdlIGNlbnRlciB0byBzcGhlcmUgY2VudGVyCgogICAgICBjb25zdCBvcnRob2dvbmFsID0gdjNwb29sLmdldCgpOwogICAgICBjb25zdCBkaXN0ID0gdjNwb29sLmdldCgpOwogICAgICBjb25zdCBOc2lkZXMgPSBzaWRlcy5sZW5ndGg7CgogICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gTnNpZGVzICYmICFmb3VuZDsgaisrKSB7CiAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgIT09IE5zaWRlcyAmJiAhZm91bmQ7IGsrKykgewogICAgICAgICAgaWYgKGogJSAzICE9PSBrICUgMykgewogICAgICAgICAgICAvLyBHZXQgZWRnZSB0YW5nZW50CiAgICAgICAgICAgIHNpZGVzW2tdLmNyb3NzKHNpZGVzW2pdLCBlZGdlVGFuZ2VudCk7CiAgICAgICAgICAgIGVkZ2VUYW5nZW50Lm5vcm1hbGl6ZSgpOwogICAgICAgICAgICBzaWRlc1tqXS52YWRkKHNpZGVzW2tdLCBlZGdlQ2VudGVyKTsKICAgICAgICAgICAgci5jb3B5KHhpKTsKICAgICAgICAgICAgci52c3ViKGVkZ2VDZW50ZXIsIHIpOwogICAgICAgICAgICByLnZzdWIoeGosIHIpOwogICAgICAgICAgICBjb25zdCBvcnRob25vcm0gPSByLmRvdChlZGdlVGFuZ2VudCk7IC8vIGRpc3RhbmNlIGZyb20gZWRnZSBjZW50ZXIgdG8gc3BoZXJlIGNlbnRlciBpbiB0aGUgdGFuZ2VudCBkaXJlY3Rpb24KCiAgICAgICAgICAgIGVkZ2VUYW5nZW50LnNjYWxlKG9ydGhvbm9ybSwgb3J0aG9nb25hbCk7IC8vIFZlY3RvciBmcm9tIGVkZ2UgY2VudGVyIHRvIHNwaGVyZSBjZW50ZXIgaW4gdGhlIHRhbmdlbnQgZGlyZWN0aW9uCiAgICAgICAgICAgIC8vIEZpbmQgdGhlIHRoaXJkIHNpZGUgb3J0aG9nb25hbCB0byB0aGlzIG9uZQoKICAgICAgICAgICAgbGV0IGwgPSAwOwoKICAgICAgICAgICAgd2hpbGUgKGwgPT09IGogJSAzIHx8IGwgPT09IGsgJSAzKSB7CiAgICAgICAgICAgICAgbCsrOwogICAgICAgICAgICB9IC8vIHZlYyBmcm9tIGVkZ2UgY2VudGVyIHRvIHNwaGVyZSBwcm9qZWN0ZWQgdG8gdGhlIHBsYW5lIG9ydGhvZ29uYWwgdG8gdGhlIGVkZ2UgdGFuZ2VudAoKCiAgICAgICAgICAgIGRpc3QuY29weSh4aSk7CiAgICAgICAgICAgIGRpc3QudnN1YihvcnRob2dvbmFsLCBkaXN0KTsKICAgICAgICAgICAgZGlzdC52c3ViKGVkZ2VDZW50ZXIsIGRpc3QpOwogICAgICAgICAgICBkaXN0LnZzdWIoeGosIGRpc3QpOyAvLyBEaXN0YW5jZXMgaW4gdGFuZ2VudCBkaXJlY3Rpb24gYW5kIGRpc3RhbmNlIGluIHRoZSBwbGFuZSBvcnRob2dvbmFsIHRvIGl0CgogICAgICAgICAgICBjb25zdCB0ZGlzdCA9IE1hdGguYWJzKG9ydGhvbm9ybSk7CiAgICAgICAgICAgIGNvbnN0IG5kaXN0ID0gZGlzdC5sZW5ndGgoKTsKCiAgICAgICAgICAgIGlmICh0ZGlzdCA8IHNpZGVzW2xdLmxlbmd0aCgpICYmIG5kaXN0IDwgUikgewogICAgICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgICAgICAgY29uc3QgcmVzID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICAgICAgICBlZGdlQ2VudGVyLnZhZGQob3J0aG9nb25hbCwgcmVzLnJqKTsgLy8gYm94IHJqCgogICAgICAgICAgICAgIHJlcy5yai5jb3B5KHJlcy5yaik7CiAgICAgICAgICAgICAgZGlzdC5uZWdhdGUocmVzLm5pKTsKICAgICAgICAgICAgICByZXMubmkubm9ybWFsaXplKCk7CiAgICAgICAgICAgICAgcmVzLnJpLmNvcHkocmVzLnJqKTsKICAgICAgICAgICAgICByZXMucmkudmFkZCh4aiwgcmVzLnJpKTsKICAgICAgICAgICAgICByZXMucmkudnN1Yih4aSwgcmVzLnJpKTsKICAgICAgICAgICAgICByZXMucmkubm9ybWFsaXplKCk7CiAgICAgICAgICAgICAgcmVzLnJpLnNjYWxlKFIsIHJlcy5yaSk7IC8vIE1ha2UgcmVsYXRpdmUgdG8gYm9kaWVzCgogICAgICAgICAgICAgIHJlcy5yaS52YWRkKHhpLCByZXMucmkpOwogICAgICAgICAgICAgIHJlcy5yaS52c3ViKGJpLnBvc2l0aW9uLCByZXMucmkpOwogICAgICAgICAgICAgIHJlcy5yai52YWRkKHhqLCByZXMucmopOwogICAgICAgICAgICAgIHJlcy5yai52c3ViKGJqLnBvc2l0aW9uLCByZXMucmopOwogICAgICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocmVzKTsKICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QocmVzLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdjNwb29sLnJlbGVhc2UoZWRnZVRhbmdlbnQsIGVkZ2VDZW50ZXIsIHIsIG9ydGhvZ29uYWwsIGRpc3QpOwogICAgfQoKICAgIHBsYW5lQm94KHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIHNqLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNqLm1hdGVyaWFsOwogICAgICBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzai5jb2xsaXNpb25SZXNwb25zZTsKICAgICAgc2ouY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLmlkID0gc2ouaWQ7CiAgICAgIHJldHVybiB0aGlzLnBsYW5lQ29udmV4KHNpLCBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24sIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHNpLCBzaiwganVzdFRlc3QpOwogICAgfQoKICAgIGNvbnZleENvbnZleChzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCwgZmFjZUxpc3RBLCBmYWNlTGlzdEIpIHsKICAgICAgY29uc3Qgc2VwQXhpcyA9IGNvbnZleENvbnZleF9zZXBBeGlzOwoKICAgICAgaWYgKHhpLmRpc3RhbmNlVG8oeGopID4gc2kuYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBzai5ib3VuZGluZ1NwaGVyZVJhZGl1cykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHNpLmZpbmRTZXBhcmF0aW5nQXhpcyhzaiwgeGksIHFpLCB4aiwgcWosIHNlcEF4aXMsIGZhY2VMaXN0QSwgZmFjZUxpc3RCKSkgewogICAgICAgIGNvbnN0IHJlcyA9IFtdOwogICAgICAgIGNvbnN0IHEgPSBjb252ZXhDb252ZXhfcTsKICAgICAgICBzaS5jbGlwQWdhaW5zdEh1bGwoeGksIHFpLCBzaiwgeGosIHFqLCBzZXBBeGlzLCAtMTAwLCAxMDAsIHJlcyk7CiAgICAgICAgbGV0IG51bUNvbnRhY3RzID0gMDsKCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IHJlcy5sZW5ndGg7IGorKykgewogICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgICAgY29uc3QgcmkgPSByLnJpOwogICAgICAgICAgY29uc3QgcmogPSByLnJqOwogICAgICAgICAgc2VwQXhpcy5uZWdhdGUoci5uaSk7CiAgICAgICAgICByZXNbal0ubm9ybWFsLm5lZ2F0ZShxKTsKICAgICAgICAgIHEuc2NhbGUocmVzW2pdLmRlcHRoLCBxKTsKICAgICAgICAgIHJlc1tqXS5wb2ludC52YWRkKHEsIHJpKTsKICAgICAgICAgIHJqLmNvcHkocmVzW2pdLnBvaW50KTsgLy8gQ29udGFjdCBwb2ludHMgYXJlIGluIHdvcmxkIGNvb3JkaW5hdGVzLiBUcmFuc2Zvcm0gYmFjayB0byByZWxhdGl2ZQoKICAgICAgICAgIHJpLnZzdWIoeGksIHJpKTsKICAgICAgICAgIHJqLnZzdWIoeGosIHJqKTsgLy8gTWFrZSByZWxhdGl2ZSB0byBib2RpZXMKCiAgICAgICAgICByaS52YWRkKHhpLCByaSk7CiAgICAgICAgICByaS52c3ViKGJpLnBvc2l0aW9uLCByaSk7CiAgICAgICAgICByai52YWRkKHhqLCByaik7CiAgICAgICAgICByai52c3ViKGJqLnBvc2l0aW9uLCByaik7CiAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgbnVtQ29udGFjdHMrKzsKCiAgICAgICAgICBpZiAoIXRoaXMuZW5hYmxlRnJpY3Rpb25SZWR1Y3Rpb24pIHsKICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMuZW5hYmxlRnJpY3Rpb25SZWR1Y3Rpb24gJiYgbnVtQ29udGFjdHMpIHsKICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25Gcm9tQXZlcmFnZShudW1Db250YWN0cyk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgc3BoZXJlQ29udmV4KHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIGNvbnN0IHYzcG9vbCA9IHRoaXMudjNwb29sOwogICAgICB4aS52c3ViKHhqLCBjb252ZXhfdG9fc3BoZXJlKTsKICAgICAgY29uc3Qgbm9ybWFscyA9IHNqLmZhY2VOb3JtYWxzOwogICAgICBjb25zdCBmYWNlcyA9IHNqLmZhY2VzOwogICAgICBjb25zdCB2ZXJ0cyA9IHNqLnZlcnRpY2VzOwogICAgICBjb25zdCBSID0gc2kucmFkaXVzOwogICAgICAvLyAgICAgcmV0dXJuOwogICAgICAvLyB9CgogICAgICBsZXQgZm91bmQgPSBmYWxzZTsgLy8gQ2hlY2sgY29ybmVycwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IHZlcnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgdiA9IHZlcnRzW2ldOyAvLyBXb3JsZCBwb3NpdGlvbiBvZiBjb3JuZXIKCiAgICAgICAgY29uc3Qgd29ybGRDb3JuZXIgPSBzcGhlcmVDb252ZXhfd29ybGRDb3JuZXI7CiAgICAgICAgcWoudm11bHQodiwgd29ybGRDb3JuZXIpOwogICAgICAgIHhqLnZhZGQod29ybGRDb3JuZXIsIHdvcmxkQ29ybmVyKTsKICAgICAgICBjb25zdCBzcGhlcmVfdG9fY29ybmVyID0gc3BoZXJlQ29udmV4X3NwaGVyZVRvQ29ybmVyOwogICAgICAgIHdvcmxkQ29ybmVyLnZzdWIoeGksIHNwaGVyZV90b19jb3JuZXIpOwoKICAgICAgICBpZiAoc3BoZXJlX3RvX2Nvcm5lci5sZW5ndGhTcXVhcmVkKCkgPCBSICogUikgewogICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgICAgci5yaS5jb3B5KHNwaGVyZV90b19jb3JuZXIpOwogICAgICAgICAgci5yaS5ub3JtYWxpemUoKTsKICAgICAgICAgIHIubmkuY29weShyLnJpKTsKICAgICAgICAgIHIucmkuc2NhbGUoUiwgci5yaSk7CiAgICAgICAgICB3b3JsZENvcm5lci52c3ViKHhqLCByLnJqKTsgLy8gU2hvdWxkIGJlIHJlbGF0aXZlIHRvIHRoZSBib2R5LgoKICAgICAgICAgIHIucmkudmFkZCh4aSwgci5yaSk7CiAgICAgICAgICByLnJpLnZzdWIoYmkucG9zaXRpb24sIHIucmkpOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuCgogICAgICAgICAgci5yai52YWRkKHhqLCByLnJqKTsKICAgICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7CiAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfSAvLyBDaGVjayBzaWRlIChwbGFuZSkgaW50ZXJzZWN0aW9ucwoKCiAgICAgIGZvciAobGV0IGkgPSAwLCBuZmFjZXMgPSBmYWNlcy5sZW5ndGg7IGkgIT09IG5mYWNlcyAmJiBmb3VuZCA9PT0gZmFsc2U7IGkrKykgewogICAgICAgIGNvbnN0IG5vcm1hbCA9IG5vcm1hbHNbaV07CiAgICAgICAgY29uc3QgZmFjZSA9IGZhY2VzW2ldOyAvLyBHZXQgd29ybGQtdHJhbnNmb3JtZWQgbm9ybWFsIG9mIHRoZSBmYWNlCgogICAgICAgIGNvbnN0IHdvcmxkTm9ybWFsID0gc3BoZXJlQ29udmV4X3dvcmxkTm9ybWFsOwogICAgICAgIHFqLnZtdWx0KG5vcm1hbCwgd29ybGROb3JtYWwpOyAvLyBHZXQgYSB3b3JsZCB2ZXJ0ZXggZnJvbSB0aGUgZmFjZQoKICAgICAgICBjb25zdCB3b3JsZFBvaW50ID0gc3BoZXJlQ29udmV4X3dvcmxkUG9pbnQ7CiAgICAgICAgcWoudm11bHQodmVydHNbZmFjZVswXV0sIHdvcmxkUG9pbnQpOwogICAgICAgIHdvcmxkUG9pbnQudmFkZCh4aiwgd29ybGRQb2ludCk7IC8vIEdldCBhIHBvaW50IG9uIHRoZSBzcGhlcmUsIGNsb3Nlc3QgdG8gdGhlIGZhY2Ugbm9ybWFsCgogICAgICAgIGNvbnN0IHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZSA9IHNwaGVyZUNvbnZleF93b3JsZFNwaGVyZVBvaW50Q2xvc2VzdFRvUGxhbmU7CiAgICAgICAgd29ybGROb3JtYWwuc2NhbGUoLVIsIHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZSk7CiAgICAgICAgeGkudmFkZCh3b3JsZFNwaGVyZVBvaW50Q2xvc2VzdFRvUGxhbmUsIHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZSk7IC8vIFZlY3RvciBmcm9tIGEgZmFjZSBwb2ludCB0byB0aGUgY2xvc2VzdCBwb2ludCBvbiB0aGUgc3BoZXJlCgogICAgICAgIGNvbnN0IHBlbmV0cmF0aW9uVmVjID0gc3BoZXJlQ29udmV4X3BlbmV0cmF0aW9uVmVjOwogICAgICAgIHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZS52c3ViKHdvcmxkUG9pbnQsIHBlbmV0cmF0aW9uVmVjKTsgLy8gVGhlIHBlbmV0cmF0aW9uLiBOZWdhdGl2ZSB2YWx1ZSBtZWFucyBvdmVybGFwLgoKICAgICAgICBjb25zdCBwZW5ldHJhdGlvbiA9IHBlbmV0cmF0aW9uVmVjLmRvdCh3b3JsZE5vcm1hbCk7CiAgICAgICAgY29uc3Qgd29ybGRQb2ludFRvU3BoZXJlID0gc3BoZXJlQ29udmV4X3NwaGVyZVRvV29ybGRQb2ludDsKICAgICAgICB4aS52c3ViKHdvcmxkUG9pbnQsIHdvcmxkUG9pbnRUb1NwaGVyZSk7CgogICAgICAgIGlmIChwZW5ldHJhdGlvbiA8IDAgJiYgd29ybGRQb2ludFRvU3BoZXJlLmRvdCh3b3JsZE5vcm1hbCkgPiAwKSB7CiAgICAgICAgICAvLyBJbnRlcnNlY3RzIHBsYW5lLiBOb3cgY2hlY2sgaWYgdGhlIHNwaGVyZSBpcyBpbnNpZGUgdGhlIGZhY2UgcG9seWdvbgogICAgICAgICAgY29uc3QgZmFjZVZlcnRzID0gW107IC8vIEZhY2UgdmVydGljZXMsIGluIHdvcmxkIGNvb3JkcwoKICAgICAgICAgIGZvciAobGV0IGogPSAwLCBOdmVydHMgPSBmYWNlLmxlbmd0aDsgaiAhPT0gTnZlcnRzOyBqKyspIHsKICAgICAgICAgICAgY29uc3Qgd29ybGRWZXJ0ZXggPSB2M3Bvb2wuZ2V0KCk7CiAgICAgICAgICAgIHFqLnZtdWx0KHZlcnRzW2ZhY2Vbal1dLCB3b3JsZFZlcnRleCk7CiAgICAgICAgICAgIHhqLnZhZGQod29ybGRWZXJ0ZXgsIHdvcmxkVmVydGV4KTsKICAgICAgICAgICAgZmFjZVZlcnRzLnB1c2god29ybGRWZXJ0ZXgpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChwb2ludEluUG9seWdvbihmYWNlVmVydHMsIHdvcmxkTm9ybWFsLCB4aSkpIHsKICAgICAgICAgICAgLy8gSXMgdGhlIHNwaGVyZSBjZW50ZXIgaW4gdGhlIGZhY2UgcG9seWdvbj8KICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7CiAgICAgICAgICAgIHdvcmxkTm9ybWFsLnNjYWxlKC1SLCByLnJpKTsgLy8gQ29udGFjdCBvZmZzZXQsIGZyb20gc3BoZXJlIGNlbnRlciB0byBjb250YWN0CgogICAgICAgICAgICB3b3JsZE5vcm1hbC5uZWdhdGUoci5uaSk7IC8vIE5vcm1hbCBwb2ludGluZyBvdXQgb2Ygc3BoZXJlCgogICAgICAgICAgICBjb25zdCBwZW5ldHJhdGlvblZlYzIgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgICAgICAgIHdvcmxkTm9ybWFsLnNjYWxlKC1wZW5ldHJhdGlvbiwgcGVuZXRyYXRpb25WZWMyKTsKICAgICAgICAgICAgY29uc3QgcGVuZXRyYXRpb25TcGhlcmVQb2ludCA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgd29ybGROb3JtYWwuc2NhbGUoLVIsIHBlbmV0cmF0aW9uU3BoZXJlUG9pbnQpOyAvL3hpLnZzdWIoeGopLnZhZGQocGVuZXRyYXRpb25TcGhlcmVQb2ludCkudmFkZChwZW5ldHJhdGlvblZlYzIgLCByLnJqKTsKCiAgICAgICAgICAgIHhpLnZzdWIoeGosIHIucmopOwogICAgICAgICAgICByLnJqLnZhZGQocGVuZXRyYXRpb25TcGhlcmVQb2ludCwgci5yaik7CiAgICAgICAgICAgIHIucmoudmFkZChwZW5ldHJhdGlvblZlYzIsIHIucmopOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuCgogICAgICAgICAgICByLnJqLnZhZGQoeGosIHIucmopOwogICAgICAgICAgICByLnJqLnZzdWIoYmoucG9zaXRpb24sIHIucmopOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuCgogICAgICAgICAgICByLnJpLnZhZGQoeGksIHIucmkpOwogICAgICAgICAgICByLnJpLnZzdWIoYmkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgICB2M3Bvb2wucmVsZWFzZShwZW5ldHJhdGlvblZlYzIpOwogICAgICAgICAgICB2M3Bvb2wucmVsZWFzZShwZW5ldHJhdGlvblNwaGVyZVBvaW50KTsKICAgICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOyAvLyBSZWxlYXNlIHdvcmxkIHZlcnRpY2VzCgogICAgICAgICAgICBmb3IgKGxldCBqID0gMCwgTmZhY2V2ZXJ0cyA9IGZhY2VWZXJ0cy5sZW5ndGg7IGogIT09IE5mYWNldmVydHM7IGorKykgewogICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKGZhY2VWZXJ0c1tqXSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybjsgLy8gV2Ugb25seSBleHBlY3QgKm9uZSogZmFjZSBjb250YWN0CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBFZGdlPwogICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gZmFjZS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgIC8vIEdldCB0d28gd29ybGQgdHJhbnNmb3JtZWQgdmVydGljZXMKICAgICAgICAgICAgICBjb25zdCB2MSA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgICBjb25zdCB2MiA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgICBxai52bXVsdCh2ZXJ0c1tmYWNlWyhqICsgMSkgJSBmYWNlLmxlbmd0aF1dLCB2MSk7CiAgICAgICAgICAgICAgcWoudm11bHQodmVydHNbZmFjZVsoaiArIDIpICUgZmFjZS5sZW5ndGhdXSwgdjIpOwogICAgICAgICAgICAgIHhqLnZhZGQodjEsIHYxKTsKICAgICAgICAgICAgICB4ai52YWRkKHYyLCB2Mik7IC8vIENvbnN0cnVjdCBlZGdlIHZlY3RvcgoKICAgICAgICAgICAgICBjb25zdCBlZGdlID0gc3BoZXJlQ29udmV4X2VkZ2U7CiAgICAgICAgICAgICAgdjIudnN1Yih2MSwgZWRnZSk7IC8vIENvbnN0cnVjdCB0aGUgc2FtZSB2ZWN0b3IsIGJ1dCBub3JtYWxpemVkCgogICAgICAgICAgICAgIGNvbnN0IGVkZ2VVbml0ID0gc3BoZXJlQ29udmV4X2VkZ2VVbml0OwogICAgICAgICAgICAgIGVkZ2UudW5pdChlZGdlVW5pdCk7IC8vIHAgaXMgeGkgcHJvamVjdGVkIG9udG8gdGhlIGVkZ2UKCiAgICAgICAgICAgICAgY29uc3QgcCA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgICBjb25zdCB2MV90b194aSA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgICB4aS52c3ViKHYxLCB2MV90b194aSk7CiAgICAgICAgICAgICAgY29uc3QgZG90ID0gdjFfdG9feGkuZG90KGVkZ2VVbml0KTsKICAgICAgICAgICAgICBlZGdlVW5pdC5zY2FsZShkb3QsIHApOwogICAgICAgICAgICAgIHAudmFkZCh2MSwgcCk7IC8vIENvbXB1dGUgYSB2ZWN0b3IgZnJvbSBwIHRvIHRoZSBjZW50ZXIgb2YgdGhlIHNwaGVyZQoKICAgICAgICAgICAgICBjb25zdCB4aV90b19wID0gdjNwb29sLmdldCgpOwogICAgICAgICAgICAgIHAudnN1Yih4aSwgeGlfdG9fcCk7IC8vIENvbGxpc2lvbiBpZiB0aGUgZWRnZS1zcGhlcmUgZGlzdGFuY2UgaXMgbGVzcyB0aGFuIHRoZSByYWRpdXMKICAgICAgICAgICAgICAvLyBBTkQgaWYgcCBpcyBpbiBiZXR3ZWVuIHYxIGFuZCB2MgoKICAgICAgICAgICAgICBpZiAoZG90ID4gMCAmJiBkb3QgKiBkb3QgPCBlZGdlLmxlbmd0aFNxdWFyZWQoKSAmJiB4aV90b19wLmxlbmd0aFNxdWFyZWQoKSA8IFIgKiBSKSB7CiAgICAgICAgICAgICAgICAvLyBDb2xsaXNpb24gaWYgdGhlIGVkZ2Utc3BoZXJlIGRpc3RhbmNlIGlzIGxlc3MgdGhhbiB0aGUgcmFkaXVzCiAgICAgICAgICAgICAgICAvLyBFZGdlIGNvbnRhY3QhCiAgICAgICAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7CiAgICAgICAgICAgICAgICBwLnZzdWIoeGosIHIucmopOwogICAgICAgICAgICAgICAgcC52c3ViKHhpLCByLm5pKTsKICAgICAgICAgICAgICAgIHIubmkubm9ybWFsaXplKCk7CiAgICAgICAgICAgICAgICByLm5pLnNjYWxlKFIsIHIucmkpOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuCgogICAgICAgICAgICAgICAgci5yai52YWRkKHhqLCByLnJqKTsKICAgICAgICAgICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7IC8vIFNob3VsZCBiZSByZWxhdGl2ZSB0byB0aGUgYm9keS4KCiAgICAgICAgICAgICAgICByLnJpLnZhZGQoeGksIHIucmkpOwogICAgICAgICAgICAgICAgci5yaS52c3ViKGJpLnBvc2l0aW9uLCByLnJpKTsKICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7IC8vIFJlbGVhc2Ugd29ybGQgdmVydGljZXMKCiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMCwgTmZhY2V2ZXJ0cyA9IGZhY2VWZXJ0cy5sZW5ndGg7IGogIT09IE5mYWNldmVydHM7IGorKykgewogICAgICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZShmYWNlVmVydHNbal0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYxKTsKICAgICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYyKTsKICAgICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHApOwogICAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UoeGlfdG9fcCk7CiAgICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZSh2MV90b194aSk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZSh2MSk7CiAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UodjIpOwogICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHApOwogICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHhpX3RvX3ApOwogICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYxX3RvX3hpKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSAvLyBSZWxlYXNlIHdvcmxkIHZlcnRpY2VzCgoKICAgICAgICAgIGZvciAobGV0IGogPSAwLCBOZmFjZXZlcnRzID0gZmFjZVZlcnRzLmxlbmd0aDsgaiAhPT0gTmZhY2V2ZXJ0czsgaisrKSB7CiAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKGZhY2VWZXJ0c1tqXSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgcGxhbmVDb252ZXgocGxhbmVTaGFwZSwgY29udmV4U2hhcGUsIHBsYW5lUG9zaXRpb24sIGNvbnZleFBvc2l0aW9uLCBwbGFuZVF1YXQsIGNvbnZleFF1YXQsIHBsYW5lQm9keSwgY29udmV4Qm9keSwgc2ksIHNqLCBqdXN0VGVzdCkgewogICAgICAvLyBTaW1wbHkgcmV0dXJuIHRoZSBwb2ludHMgYmVoaW5kIHRoZSBwbGFuZS4KICAgICAgY29uc3Qgd29ybGRWZXJ0ZXggPSBwbGFuZUNvbnZleF92OwogICAgICBjb25zdCB3b3JsZE5vcm1hbCA9IHBsYW5lQ29udmV4X25vcm1hbDsKICAgICAgd29ybGROb3JtYWwuc2V0KDAsIDAsIDEpOwogICAgICBwbGFuZVF1YXQudm11bHQod29ybGROb3JtYWwsIHdvcmxkTm9ybWFsKTsgLy8gVHVybiBub3JtYWwgYWNjb3JkaW5nIHRvIHBsYW5lIG9yaWVudGF0aW9uCgogICAgICBsZXQgbnVtQ29udGFjdHMgPSAwOwogICAgICBjb25zdCByZWxwb3MgPSBwbGFuZUNvbnZleF9yZWxwb3M7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gY29udmV4U2hhcGUudmVydGljZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAvLyBHZXQgd29ybGQgY29udmV4IHZlcnRleAogICAgICAgIHdvcmxkVmVydGV4LmNvcHkoY29udmV4U2hhcGUudmVydGljZXNbaV0pOwogICAgICAgIGNvbnZleFF1YXQudm11bHQod29ybGRWZXJ0ZXgsIHdvcmxkVmVydGV4KTsKICAgICAgICBjb252ZXhQb3NpdGlvbi52YWRkKHdvcmxkVmVydGV4LCB3b3JsZFZlcnRleCk7CiAgICAgICAgd29ybGRWZXJ0ZXgudnN1YihwbGFuZVBvc2l0aW9uLCByZWxwb3MpOwogICAgICAgIGNvbnN0IGRvdCA9IHdvcmxkTm9ybWFsLmRvdChyZWxwb3MpOwoKICAgICAgICBpZiAoZG90IDw9IDAuMCkgewogICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihwbGFuZUJvZHksIGNvbnZleEJvZHksIHBsYW5lU2hhcGUsIGNvbnZleFNoYXBlLCBzaSwgc2opOyAvLyBHZXQgdmVydGV4IHBvc2l0aW9uIHByb2plY3RlZCBvbiBwbGFuZQoKICAgICAgICAgIGNvbnN0IHByb2plY3RlZCA9IHBsYW5lQ29udmV4X3Byb2plY3RlZDsKICAgICAgICAgIHdvcmxkTm9ybWFsLnNjYWxlKHdvcmxkTm9ybWFsLmRvdChyZWxwb3MpLCBwcm9qZWN0ZWQpOwogICAgICAgICAgd29ybGRWZXJ0ZXgudnN1Yihwcm9qZWN0ZWQsIHByb2plY3RlZCk7CiAgICAgICAgICBwcm9qZWN0ZWQudnN1YihwbGFuZVBvc2l0aW9uLCByLnJpKTsgLy8gRnJvbSBwbGFuZSB0byB2ZXJ0ZXggcHJvamVjdGVkIG9uIHBsYW5lCgogICAgICAgICAgci5uaS5jb3B5KHdvcmxkTm9ybWFsKTsgLy8gQ29udGFjdCBub3JtYWwgaXMgdGhlIHBsYW5lIG5vcm1hbCBvdXQgZnJvbSBwbGFuZQogICAgICAgICAgLy8gcmogaXMgbm93IGp1c3QgdGhlIHZlY3RvciBmcm9tIHRoZSBjb252ZXggY2VudGVyIHRvIHRoZSB2ZXJ0ZXgKCiAgICAgICAgICB3b3JsZFZlcnRleC52c3ViKGNvbnZleFBvc2l0aW9uLCByLnJqKTsgLy8gTWFrZSBpdCByZWxhdGl2ZSB0byB0aGUgYm9keQoKICAgICAgICAgIHIucmkudmFkZChwbGFuZVBvc2l0aW9uLCByLnJpKTsKICAgICAgICAgIHIucmkudnN1YihwbGFuZUJvZHkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgci5yai52YWRkKGNvbnZleFBvc2l0aW9uLCByLnJqKTsKICAgICAgICAgIHIucmoudnN1Yihjb252ZXhCb2R5LnBvc2l0aW9uLCByLnJqKTsKICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICBudW1Db250YWN0cysrOwoKICAgICAgICAgIGlmICghdGhpcy5lbmFibGVGcmljdGlvblJlZHVjdGlvbikgewogICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAodGhpcy5lbmFibGVGcmljdGlvblJlZHVjdGlvbiAmJiBudW1Db250YWN0cykgewogICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25Gcm9tQXZlcmFnZShudW1Db250YWN0cyk7CiAgICAgIH0KICAgIH0KCiAgICBib3hDb252ZXgoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLm1hdGVyaWFsID0gc2kubWF0ZXJpYWw7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5jb2xsaXNpb25SZXNwb25zZSA9IHNpLmNvbGxpc2lvblJlc3BvbnNlOwogICAgICByZXR1cm4gdGhpcy5jb252ZXhDb252ZXgoc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgc3BoZXJlSGVpZ2h0ZmllbGQoc3BoZXJlU2hhcGUsIGhmU2hhcGUsIHNwaGVyZVBvcywgaGZQb3MsIHNwaGVyZVF1YXQsIGhmUXVhdCwgc3BoZXJlQm9keSwgaGZCb2R5LCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgY29uc3QgZGF0YSA9IGhmU2hhcGUuZGF0YTsKICAgICAgY29uc3QgcmFkaXVzID0gc3BoZXJlU2hhcGUucmFkaXVzOwogICAgICBjb25zdCB3ID0gaGZTaGFwZS5lbGVtZW50U2l6ZTsKICAgICAgY29uc3Qgd29ybGRQaWxsYXJPZmZzZXQgPSBzcGhlcmVIZWlnaHRmaWVsZF90bXAyOyAvLyBHZXQgc3BoZXJlIHBvc2l0aW9uIHRvIGhlaWdodGZpZWxkIGxvY2FsIQoKICAgICAgY29uc3QgbG9jYWxTcGhlcmVQb3MgPSBzcGhlcmVIZWlnaHRmaWVsZF90bXAxOwogICAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUoaGZQb3MsIGhmUXVhdCwgc3BoZXJlUG9zLCBsb2NhbFNwaGVyZVBvcyk7IC8vIEdldCB0aGUgaW5kZXggb2YgdGhlIGRhdGEgcG9pbnRzIHRvIHRlc3QgYWdhaW5zdAoKICAgICAgbGV0IGlNaW5YID0gTWF0aC5mbG9vcigobG9jYWxTcGhlcmVQb3MueCAtIHJhZGl1cykgLyB3KSAtIDE7CiAgICAgIGxldCBpTWF4WCA9IE1hdGguY2VpbCgobG9jYWxTcGhlcmVQb3MueCArIHJhZGl1cykgLyB3KSArIDE7CiAgICAgIGxldCBpTWluWSA9IE1hdGguZmxvb3IoKGxvY2FsU3BoZXJlUG9zLnkgLSByYWRpdXMpIC8gdykgLSAxOwogICAgICBsZXQgaU1heFkgPSBNYXRoLmNlaWwoKGxvY2FsU3BoZXJlUG9zLnkgKyByYWRpdXMpIC8gdykgKyAxOyAvLyBCYWlsIG91dCBpZiB3ZSBhcmUgb3V0IG9mIHRoZSB0ZXJyYWluCgogICAgICBpZiAoaU1heFggPCAwIHx8IGlNYXhZIDwgMCB8fCBpTWluWCA+IGRhdGEubGVuZ3RoIHx8IGlNaW5ZID4gZGF0YVswXS5sZW5ndGgpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8gQ2xhbXAgaW5kZXggdG8gZWRnZXMKCgogICAgICBpZiAoaU1pblggPCAwKSB7CiAgICAgICAgaU1pblggPSAwOwogICAgICB9CgogICAgICBpZiAoaU1heFggPCAwKSB7CiAgICAgICAgaU1heFggPSAwOwogICAgICB9CgogICAgICBpZiAoaU1pblkgPCAwKSB7CiAgICAgICAgaU1pblkgPSAwOwogICAgICB9CgogICAgICBpZiAoaU1heFkgPCAwKSB7CiAgICAgICAgaU1heFkgPSAwOwogICAgICB9CgogICAgICBpZiAoaU1pblggPj0gZGF0YS5sZW5ndGgpIHsKICAgICAgICBpTWluWCA9IGRhdGEubGVuZ3RoIC0gMTsKICAgICAgfQoKICAgICAgaWYgKGlNYXhYID49IGRhdGEubGVuZ3RoKSB7CiAgICAgICAgaU1heFggPSBkYXRhLmxlbmd0aCAtIDE7CiAgICAgIH0KCiAgICAgIGlmIChpTWF4WSA+PSBkYXRhWzBdLmxlbmd0aCkgewogICAgICAgIGlNYXhZID0gZGF0YVswXS5sZW5ndGggLSAxOwogICAgICB9CgogICAgICBpZiAoaU1pblkgPj0gZGF0YVswXS5sZW5ndGgpIHsKICAgICAgICBpTWluWSA9IGRhdGFbMF0ubGVuZ3RoIC0gMTsKICAgICAgfQoKICAgICAgY29uc3QgbWluTWF4ID0gW107CiAgICAgIGhmU2hhcGUuZ2V0UmVjdE1pbk1heChpTWluWCwgaU1pblksIGlNYXhYLCBpTWF4WSwgbWluTWF4KTsKICAgICAgY29uc3QgbWluID0gbWluTWF4WzBdOwogICAgICBjb25zdCBtYXggPSBtaW5NYXhbMV07IC8vIEJhaWwgb3V0IGlmIHdlIGNhbid0IHRvdWNoIHRoZSBib3VuZGluZyBoZWlnaHQgYm94CgogICAgICBpZiAobG9jYWxTcGhlcmVQb3MueiAtIHJhZGl1cyA+IG1heCB8fCBsb2NhbFNwaGVyZVBvcy56ICsgcmFkaXVzIDwgbWluKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnJlc3VsdDsKCiAgICAgIGZvciAobGV0IGkgPSBpTWluWDsgaSA8IGlNYXhYOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gaU1pblk7IGogPCBpTWF4WTsgaisrKSB7CiAgICAgICAgICBjb25zdCBudW1Db250YWN0c0JlZm9yZSA9IHJlc3VsdC5sZW5ndGg7CiAgICAgICAgICBsZXQgaW50ZXJzZWN0aW5nID0gZmFsc2U7IC8vIExvd2VyIHRyaWFuZ2xlCgogICAgICAgICAgaGZTaGFwZS5nZXRDb252ZXhUcmlhbmdsZVBpbGxhcihpLCBqLCBmYWxzZSk7CiAgICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUoaGZQb3MsIGhmUXVhdCwgaGZTaGFwZS5waWxsYXJPZmZzZXQsIHdvcmxkUGlsbGFyT2Zmc2V0KTsKCiAgICAgICAgICBpZiAoc3BoZXJlUG9zLmRpc3RhbmNlVG8od29ybGRQaWxsYXJPZmZzZXQpIDwgaGZTaGFwZS5waWxsYXJDb252ZXguYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBzcGhlcmVTaGFwZS5ib3VuZGluZ1NwaGVyZVJhZGl1cykgewogICAgICAgICAgICBpbnRlcnNlY3RpbmcgPSB0aGlzLnNwaGVyZUNvbnZleChzcGhlcmVTaGFwZSwgaGZTaGFwZS5waWxsYXJDb252ZXgsIHNwaGVyZVBvcywgd29ybGRQaWxsYXJPZmZzZXQsIHNwaGVyZVF1YXQsIGhmUXVhdCwgc3BoZXJlQm9keSwgaGZCb2R5LCBzcGhlcmVTaGFwZSwgaGZTaGFwZSwganVzdFRlc3QpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChqdXN0VGVzdCAmJiBpbnRlcnNlY3RpbmcpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9IC8vIFVwcGVyIHRyaWFuZ2xlCgoKICAgICAgICAgIGhmU2hhcGUuZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoaSwgaiwgdHJ1ZSk7CiAgICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUoaGZQb3MsIGhmUXVhdCwgaGZTaGFwZS5waWxsYXJPZmZzZXQsIHdvcmxkUGlsbGFyT2Zmc2V0KTsKCiAgICAgICAgICBpZiAoc3BoZXJlUG9zLmRpc3RhbmNlVG8od29ybGRQaWxsYXJPZmZzZXQpIDwgaGZTaGFwZS5waWxsYXJDb252ZXguYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBzcGhlcmVTaGFwZS5ib3VuZGluZ1NwaGVyZVJhZGl1cykgewogICAgICAgICAgICBpbnRlcnNlY3RpbmcgPSB0aGlzLnNwaGVyZUNvbnZleChzcGhlcmVTaGFwZSwgaGZTaGFwZS5waWxsYXJDb252ZXgsIHNwaGVyZVBvcywgd29ybGRQaWxsYXJPZmZzZXQsIHNwaGVyZVF1YXQsIGhmUXVhdCwgc3BoZXJlQm9keSwgaGZCb2R5LCBzcGhlcmVTaGFwZSwgaGZTaGFwZSwganVzdFRlc3QpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChqdXN0VGVzdCAmJiBpbnRlcnNlY3RpbmcpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgY29uc3QgbnVtQ29udGFjdHMgPSByZXN1bHQubGVuZ3RoIC0gbnVtQ29udGFjdHNCZWZvcmU7CgogICAgICAgICAgaWYgKG51bUNvbnRhY3RzID4gMikgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICAvKgogICAgICAgICAgICAvLyBTa2lwIGFsbCBidXQgMQogICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IG51bUNvbnRhY3RzIC0gMTsgaysrKSB7CiAgICAgICAgICAgICAgICByZXN1bHQucG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICovCgogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGJveEhlaWdodGZpZWxkKHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNpLm1hdGVyaWFsOwogICAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzaS5jb2xsaXNpb25SZXNwb25zZTsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4SGVpZ2h0ZmllbGQoc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgY29udmV4SGVpZ2h0ZmllbGQoY29udmV4U2hhcGUsIGhmU2hhcGUsIGNvbnZleFBvcywgaGZQb3MsIGNvbnZleFF1YXQsIGhmUXVhdCwgY29udmV4Qm9keSwgaGZCb2R5LCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgY29uc3QgZGF0YSA9IGhmU2hhcGUuZGF0YTsKICAgICAgY29uc3QgdyA9IGhmU2hhcGUuZWxlbWVudFNpemU7CiAgICAgIGNvbnN0IHJhZGl1cyA9IGNvbnZleFNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzOwogICAgICBjb25zdCB3b3JsZFBpbGxhck9mZnNldCA9IGNvbnZleEhlaWdodGZpZWxkX3RtcDI7CiAgICAgIGNvbnN0IGZhY2VMaXN0ID0gY29udmV4SGVpZ2h0ZmllbGRfZmFjZUxpc3Q7IC8vIEdldCBzcGhlcmUgcG9zaXRpb24gdG8gaGVpZ2h0ZmllbGQgbG9jYWwhCgogICAgICBjb25zdCBsb2NhbENvbnZleFBvcyA9IGNvbnZleEhlaWdodGZpZWxkX3RtcDE7CiAgICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShoZlBvcywgaGZRdWF0LCBjb252ZXhQb3MsIGxvY2FsQ29udmV4UG9zKTsgLy8gR2V0IHRoZSBpbmRleCBvZiB0aGUgZGF0YSBwb2ludHMgdG8gdGVzdCBhZ2FpbnN0CgogICAgICBsZXQgaU1pblggPSBNYXRoLmZsb29yKChsb2NhbENvbnZleFBvcy54IC0gcmFkaXVzKSAvIHcpIC0gMTsKICAgICAgbGV0IGlNYXhYID0gTWF0aC5jZWlsKChsb2NhbENvbnZleFBvcy54ICsgcmFkaXVzKSAvIHcpICsgMTsKICAgICAgbGV0IGlNaW5ZID0gTWF0aC5mbG9vcigobG9jYWxDb252ZXhQb3MueSAtIHJhZGl1cykgLyB3KSAtIDE7CiAgICAgIGxldCBpTWF4WSA9IE1hdGguY2VpbCgobG9jYWxDb252ZXhQb3MueSArIHJhZGl1cykgLyB3KSArIDE7IC8vIEJhaWwgb3V0IGlmIHdlIGFyZSBvdXQgb2YgdGhlIHRlcnJhaW4KCiAgICAgIGlmIChpTWF4WCA8IDAgfHwgaU1heFkgPCAwIHx8IGlNaW5YID4gZGF0YS5sZW5ndGggfHwgaU1pblkgPiBkYXRhWzBdLmxlbmd0aCkgewogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBDbGFtcCBpbmRleCB0byBlZGdlcwoKCiAgICAgIGlmIChpTWluWCA8IDApIHsKICAgICAgICBpTWluWCA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWF4WCA8IDApIHsKICAgICAgICBpTWF4WCA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWluWSA8IDApIHsKICAgICAgICBpTWluWSA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWF4WSA8IDApIHsKICAgICAgICBpTWF4WSA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWluWCA+PSBkYXRhLmxlbmd0aCkgewogICAgICAgIGlNaW5YID0gZGF0YS5sZW5ndGggLSAxOwogICAgICB9CgogICAgICBpZiAoaU1heFggPj0gZGF0YS5sZW5ndGgpIHsKICAgICAgICBpTWF4WCA9IGRhdGEubGVuZ3RoIC0gMTsKICAgICAgfQoKICAgICAgaWYgKGlNYXhZID49IGRhdGFbMF0ubGVuZ3RoKSB7CiAgICAgICAgaU1heFkgPSBkYXRhWzBdLmxlbmd0aCAtIDE7CiAgICAgIH0KCiAgICAgIGlmIChpTWluWSA+PSBkYXRhWzBdLmxlbmd0aCkgewogICAgICAgIGlNaW5ZID0gZGF0YVswXS5sZW5ndGggLSAxOwogICAgICB9CgogICAgICBjb25zdCBtaW5NYXggPSBbXTsKICAgICAgaGZTaGFwZS5nZXRSZWN0TWluTWF4KGlNaW5YLCBpTWluWSwgaU1heFgsIGlNYXhZLCBtaW5NYXgpOwogICAgICBjb25zdCBtaW4gPSBtaW5NYXhbMF07CiAgICAgIGNvbnN0IG1heCA9IG1pbk1heFsxXTsgLy8gQmFpbCBvdXQgaWYgd2UncmUgY2FudCB0b3VjaCB0aGUgYm91bmRpbmcgaGVpZ2h0IGJveAoKICAgICAgaWYgKGxvY2FsQ29udmV4UG9zLnogLSByYWRpdXMgPiBtYXggfHwgbG9jYWxDb252ZXhQb3MueiArIHJhZGl1cyA8IG1pbikgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgZm9yIChsZXQgaSA9IGlNaW5YOyBpIDwgaU1heFg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSBpTWluWTsgaiA8IGlNYXhZOyBqKyspIHsKICAgICAgICAgIGxldCBpbnRlcnNlY3RpbmcgPSBmYWxzZTsgLy8gTG93ZXIgdHJpYW5nbGUKCiAgICAgICAgICBoZlNoYXBlLmdldENvbnZleFRyaWFuZ2xlUGlsbGFyKGksIGosIGZhbHNlKTsKICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShoZlBvcywgaGZRdWF0LCBoZlNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpOwoKICAgICAgICAgIGlmIChjb252ZXhQb3MuZGlzdGFuY2VUbyh3b3JsZFBpbGxhck9mZnNldCkgPCBoZlNoYXBlLnBpbGxhckNvbnZleC5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIGNvbnZleFNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgICAgIGludGVyc2VjdGluZyA9IHRoaXMuY29udmV4Q29udmV4KGNvbnZleFNoYXBlLCBoZlNoYXBlLnBpbGxhckNvbnZleCwgY29udmV4UG9zLCB3b3JsZFBpbGxhck9mZnNldCwgY29udmV4UXVhdCwgaGZRdWF0LCBjb252ZXhCb2R5LCBoZkJvZHksIG51bGwsIG51bGwsIGp1c3RUZXN0LCBmYWNlTGlzdCwgbnVsbCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGp1c3RUZXN0ICYmIGludGVyc2VjdGluZykgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0gLy8gVXBwZXIgdHJpYW5nbGUKCgogICAgICAgICAgaGZTaGFwZS5nZXRDb252ZXhUcmlhbmdsZVBpbGxhcihpLCBqLCB0cnVlKTsKICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShoZlBvcywgaGZRdWF0LCBoZlNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpOwoKICAgICAgICAgIGlmIChjb252ZXhQb3MuZGlzdGFuY2VUbyh3b3JsZFBpbGxhck9mZnNldCkgPCBoZlNoYXBlLnBpbGxhckNvbnZleC5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIGNvbnZleFNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgICAgIGludGVyc2VjdGluZyA9IHRoaXMuY29udmV4Q29udmV4KGNvbnZleFNoYXBlLCBoZlNoYXBlLnBpbGxhckNvbnZleCwgY29udmV4UG9zLCB3b3JsZFBpbGxhck9mZnNldCwgY29udmV4UXVhdCwgaGZRdWF0LCBjb252ZXhCb2R5LCBoZkJvZHksIG51bGwsIG51bGwsIGp1c3RUZXN0LCBmYWNlTGlzdCwgbnVsbCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGp1c3RUZXN0ICYmIGludGVyc2VjdGluZykgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBzcGhlcmVQYXJ0aWNsZShzaiwgc2ksIHhqLCB4aSwgcWosIHFpLCBiaiwgYmksIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICAvLyBUaGUgbm9ybWFsIGlzIHRoZSB1bml0IHZlY3RvciBmcm9tIHNwaGVyZSBjZW50ZXIgdG8gcGFydGljbGUgY2VudGVyCiAgICAgIGNvbnN0IG5vcm1hbCA9IHBhcnRpY2xlU3BoZXJlX25vcm1hbDsKICAgICAgbm9ybWFsLnNldCgwLCAwLCAxKTsKICAgICAgeGkudnN1Yih4aiwgbm9ybWFsKTsKICAgICAgY29uc3QgbGVuZ3RoU3F1YXJlZCA9IG5vcm1hbC5sZW5ndGhTcXVhcmVkKCk7CgogICAgICBpZiAobGVuZ3RoU3F1YXJlZCA8PSBzai5yYWRpdXMgKiBzai5yYWRpdXMpIHsKICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7CiAgICAgICAgbm9ybWFsLm5vcm1hbGl6ZSgpOwogICAgICAgIHIucmouY29weShub3JtYWwpOwogICAgICAgIHIucmouc2NhbGUoc2oucmFkaXVzLCByLnJqKTsKICAgICAgICByLm5pLmNvcHkobm9ybWFsKTsgLy8gQ29udGFjdCBub3JtYWwKCiAgICAgICAgci5uaS5uZWdhdGUoci5uaSk7CiAgICAgICAgci5yaS5zZXQoMCwgMCwgMCk7IC8vIENlbnRlciBvZiBwYXJ0aWNsZQoKICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgfQogICAgfQoKICAgIHBsYW5lUGFydGljbGUoc2osIHNpLCB4aiwgeGksIHFqLCBxaSwgYmosIGJpLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgY29uc3Qgbm9ybWFsID0gcGFydGljbGVQbGFuZV9ub3JtYWw7CiAgICAgIG5vcm1hbC5zZXQoMCwgMCwgMSk7CiAgICAgIGJqLnF1YXRlcm5pb24udm11bHQobm9ybWFsLCBub3JtYWwpOyAvLyBUdXJuIG5vcm1hbCBhY2NvcmRpbmcgdG8gcGxhbmUgb3JpZW50YXRpb24KCiAgICAgIGNvbnN0IHJlbHBvcyA9IHBhcnRpY2xlUGxhbmVfcmVscG9zOwogICAgICB4aS52c3ViKGJqLnBvc2l0aW9uLCByZWxwb3MpOwogICAgICBjb25zdCBkb3QgPSBub3JtYWwuZG90KHJlbHBvcyk7CgogICAgICBpZiAoZG90IDw9IDAuMCkgewogICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICByLm5pLmNvcHkobm9ybWFsKTsgLy8gQ29udGFjdCBub3JtYWwgaXMgdGhlIHBsYW5lIG5vcm1hbAoKICAgICAgICByLm5pLm5lZ2F0ZShyLm5pKTsKICAgICAgICByLnJpLnNldCgwLCAwLCAwKTsgLy8gQ2VudGVyIG9mIHBhcnRpY2xlCiAgICAgICAgLy8gR2V0IHBhcnRpY2xlIHBvc2l0aW9uIHByb2plY3RlZCBvbiBwbGFuZQoKICAgICAgICBjb25zdCBwcm9qZWN0ZWQgPSBwYXJ0aWNsZVBsYW5lX3Byb2plY3RlZDsKICAgICAgICBub3JtYWwuc2NhbGUobm9ybWFsLmRvdCh4aSksIHByb2plY3RlZCk7CiAgICAgICAgeGkudnN1Yihwcm9qZWN0ZWQsIHByb2plY3RlZCk7IC8vcHJvamVjdGVkLnZhZGQoYmoucG9zaXRpb24scHJvamVjdGVkKTsKICAgICAgICAvLyByaiBpcyBub3cgdGhlIHByb2plY3RlZCB3b3JsZCBwb3NpdGlvbiBtaW51cyBwbGFuZSBwb3NpdGlvbgoKICAgICAgICByLnJqLmNvcHkocHJvamVjdGVkKTsKICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgfQogICAgfQoKICAgIGJveFBhcnRpY2xlKHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNpLm1hdGVyaWFsOwogICAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzaS5jb2xsaXNpb25SZXNwb25zZTsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4UGFydGljbGUoc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgY29udmV4UGFydGljbGUoc2osIHNpLCB4aiwgeGksIHFqLCBxaSwgYmosIGJpLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgbGV0IHBlbmV0cmF0ZWRGYWNlSW5kZXggPSAtMTsKICAgICAgY29uc3QgcGVuZXRyYXRlZEZhY2VOb3JtYWwgPSBjb252ZXhQYXJ0aWNsZV9wZW5ldHJhdGVkRmFjZU5vcm1hbDsKICAgICAgY29uc3Qgd29ybGRQZW5ldHJhdGlvblZlYyA9IGNvbnZleFBhcnRpY2xlX3dvcmxkUGVuZXRyYXRpb25WZWM7CiAgICAgIGxldCBtaW5QZW5ldHJhdGlvbiA9IG51bGw7CgogICAgICBjb25zdCBsb2NhbCA9IGNvbnZleFBhcnRpY2xlX2xvY2FsOwogICAgICBsb2NhbC5jb3B5KHhpKTsKICAgICAgbG9jYWwudnN1Yih4aiwgbG9jYWwpOyAvLyBDb252ZXJ0IHBvc2l0aW9uIHRvIHJlbGF0aXZlIHRoZSBjb252ZXggb3JpZ2luCgogICAgICBxai5jb25qdWdhdGUoY3FqKTsKICAgICAgY3FqLnZtdWx0KGxvY2FsLCBsb2NhbCk7CgogICAgICBpZiAoc2oucG9pbnRJc0luc2lkZShsb2NhbCkpIHsKICAgICAgICBpZiAoc2oud29ybGRWZXJ0aWNlc05lZWRzVXBkYXRlKSB7CiAgICAgICAgICBzai5jb21wdXRlV29ybGRWZXJ0aWNlcyh4aiwgcWopOwogICAgICAgIH0KCiAgICAgICAgaWYgKHNqLndvcmxkRmFjZU5vcm1hbHNOZWVkc1VwZGF0ZSkgewogICAgICAgICAgc2ouY29tcHV0ZVdvcmxkRmFjZU5vcm1hbHMocWopOwogICAgICAgIH0gLy8gRm9yIGVhY2ggd29ybGQgcG9seWdvbiBpbiB0aGUgcG9seWhlZHJhCgoKICAgICAgICBmb3IgKGxldCBpID0gMCwgbmZhY2VzID0gc2ouZmFjZXMubGVuZ3RoOyBpICE9PSBuZmFjZXM7IGkrKykgewogICAgICAgICAgLy8gQ29uc3RydWN0IHdvcmxkIGZhY2UgdmVydGljZXMKICAgICAgICAgIGNvbnN0IHZlcnRzID0gW3NqLndvcmxkVmVydGljZXNbc2ouZmFjZXNbaV1bMF1dXTsKICAgICAgICAgIGNvbnN0IG5vcm1hbCA9IHNqLndvcmxkRmFjZU5vcm1hbHNbaV07IC8vIENoZWNrIGhvdyBtdWNoIHRoZSBwYXJ0aWNsZSBwZW5ldHJhdGVzIHRoZSBwb2x5Z29uIHBsYW5lLgoKICAgICAgICAgIHhpLnZzdWIodmVydHNbMF0sIGNvbnZleFBhcnRpY2xlX3ZlcnRleFRvUGFydGljbGUpOwogICAgICAgICAgY29uc3QgcGVuZXRyYXRpb24gPSAtbm9ybWFsLmRvdChjb252ZXhQYXJ0aWNsZV92ZXJ0ZXhUb1BhcnRpY2xlKTsKCiAgICAgICAgICBpZiAobWluUGVuZXRyYXRpb24gPT09IG51bGwgfHwgTWF0aC5hYnMocGVuZXRyYXRpb24pIDwgTWF0aC5hYnMobWluUGVuZXRyYXRpb24pKSB7CiAgICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBtaW5QZW5ldHJhdGlvbiA9IHBlbmV0cmF0aW9uOwogICAgICAgICAgICBwZW5ldHJhdGVkRmFjZUluZGV4ID0gaTsKICAgICAgICAgICAgcGVuZXRyYXRlZEZhY2VOb3JtYWwuY29weShub3JtYWwpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHBlbmV0cmF0ZWRGYWNlSW5kZXggIT09IC0xKSB7CiAgICAgICAgICAvLyBTZXR1cCBjb250YWN0CiAgICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICAgIHBlbmV0cmF0ZWRGYWNlTm9ybWFsLnNjYWxlKG1pblBlbmV0cmF0aW9uLCB3b3JsZFBlbmV0cmF0aW9uVmVjKTsgLy8gcmogaXMgdGhlIHBhcnRpY2xlIHBvc2l0aW9uIHByb2plY3RlZCB0byB0aGUgZmFjZQoKICAgICAgICAgIHdvcmxkUGVuZXRyYXRpb25WZWMudmFkZCh4aSwgd29ybGRQZW5ldHJhdGlvblZlYyk7CiAgICAgICAgICB3b3JsZFBlbmV0cmF0aW9uVmVjLnZzdWIoeGosIHdvcmxkUGVuZXRyYXRpb25WZWMpOwogICAgICAgICAgci5yai5jb3B5KHdvcmxkUGVuZXRyYXRpb25WZWMpOyAvL2NvbnN0IHByb2plY3RlZFRvRmFjZSA9IHhpLnZzdWIoeGopLnZhZGQod29ybGRQZW5ldHJhdGlvblZlYyk7CiAgICAgICAgICAvL3Byb2plY3RlZFRvRmFjZS5jb3B5KHIucmopOwogICAgICAgICAgLy9xai52bXVsdChyLnJqLHIucmopOwoKICAgICAgICAgIHBlbmV0cmF0ZWRGYWNlTm9ybWFsLm5lZ2F0ZShyLm5pKTsgLy8gQ29udGFjdCBub3JtYWwKCiAgICAgICAgICByLnJpLnNldCgwLCAwLCAwKTsgLy8gQ2VudGVyIG9mIHBhcnRpY2xlCgogICAgICAgICAgY29uc3QgcmkgPSByLnJpOwogICAgICAgICAgY29uc3QgcmogPSByLnJqOyAvLyBNYWtlIHJlbGF0aXZlIHRvIGJvZGllcwoKICAgICAgICAgIHJpLnZhZGQoeGksIHJpKTsKICAgICAgICAgIHJpLnZzdWIoYmkucG9zaXRpb24sIHJpKTsKICAgICAgICAgIHJqLnZhZGQoeGosIHJqKTsKICAgICAgICAgIHJqLnZzdWIoYmoucG9zaXRpb24sIHJqKTsKICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUud2FybignUG9pbnQgZm91bmQgaW5zaWRlIGNvbnZleCwgYnV0IGRpZCBub3QgZmluZCBwZW5ldHJhdGluZyBmYWNlIScpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGhlaWdodGZpZWxkQ3lsaW5kZXIoaGZTaGFwZSwgY29udmV4U2hhcGUsIGhmUG9zLCBjb252ZXhQb3MsIGhmUXVhdCwgY29udmV4UXVhdCwgaGZCb2R5LCBjb252ZXhCb2R5LCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4SGVpZ2h0ZmllbGQoY29udmV4U2hhcGUsIGhmU2hhcGUsIGNvbnZleFBvcywgaGZQb3MsIGNvbnZleFF1YXQsIGhmUXVhdCwgY29udmV4Qm9keSwgaGZCb2R5LCByc2ksIHJzaiwganVzdFRlc3QpOwogICAgfQoKICAgIHBhcnRpY2xlQ3lsaW5kZXIoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4UGFydGljbGUoc2osIHNpLCB4aiwgeGksIHFqLCBxaSwgYmosIGJpLCByc2ksIHJzaiwganVzdFRlc3QpOwogICAgfQoKICAgIHNwaGVyZVRyaW1lc2goc3BoZXJlU2hhcGUsIHRyaW1lc2hTaGFwZSwgc3BoZXJlUG9zLCB0cmltZXNoUG9zLCBzcGhlcmVRdWF0LCB0cmltZXNoUXVhdCwgc3BoZXJlQm9keSwgdHJpbWVzaEJvZHksIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICBjb25zdCBlZGdlVmVydGV4QSA9IHNwaGVyZVRyaW1lc2hfZWRnZVZlcnRleEE7CiAgICAgIGNvbnN0IGVkZ2VWZXJ0ZXhCID0gc3BoZXJlVHJpbWVzaF9lZGdlVmVydGV4QjsKICAgICAgY29uc3QgZWRnZVZlY3RvciA9IHNwaGVyZVRyaW1lc2hfZWRnZVZlY3RvcjsKICAgICAgY29uc3QgZWRnZVZlY3RvclVuaXQgPSBzcGhlcmVUcmltZXNoX2VkZ2VWZWN0b3JVbml0OwogICAgICBjb25zdCBsb2NhbFNwaGVyZVBvcyA9IHNwaGVyZVRyaW1lc2hfbG9jYWxTcGhlcmVQb3M7CiAgICAgIGNvbnN0IHRtcCA9IHNwaGVyZVRyaW1lc2hfdG1wOwogICAgICBjb25zdCBsb2NhbFNwaGVyZUFBQkIgPSBzcGhlcmVUcmltZXNoX2xvY2FsU3BoZXJlQUFCQjsKICAgICAgY29uc3QgdjIgPSBzcGhlcmVUcmltZXNoX3YyOwogICAgICBjb25zdCByZWxwb3MgPSBzcGhlcmVUcmltZXNoX3JlbHBvczsKICAgICAgY29uc3QgdHJpYW5nbGVzID0gc3BoZXJlVHJpbWVzaF90cmlhbmdsZXM7IC8vIENvbnZlcnQgc3BoZXJlIHBvc2l0aW9uIHRvIGxvY2FsIGluIHRoZSB0cmltZXNoCgogICAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUodHJpbWVzaFBvcywgdHJpbWVzaFF1YXQsIHNwaGVyZVBvcywgbG9jYWxTcGhlcmVQb3MpOyAvLyBHZXQgdGhlIGFhYmIgb2YgdGhlIHNwaGVyZSBsb2NhbGx5IGluIHRoZSB0cmltZXNoCgogICAgICBjb25zdCBzcGhlcmVSYWRpdXMgPSBzcGhlcmVTaGFwZS5yYWRpdXM7CiAgICAgIGxvY2FsU3BoZXJlQUFCQi5sb3dlckJvdW5kLnNldChsb2NhbFNwaGVyZVBvcy54IC0gc3BoZXJlUmFkaXVzLCBsb2NhbFNwaGVyZVBvcy55IC0gc3BoZXJlUmFkaXVzLCBsb2NhbFNwaGVyZVBvcy56IC0gc3BoZXJlUmFkaXVzKTsKICAgICAgbG9jYWxTcGhlcmVBQUJCLnVwcGVyQm91bmQuc2V0KGxvY2FsU3BoZXJlUG9zLnggKyBzcGhlcmVSYWRpdXMsIGxvY2FsU3BoZXJlUG9zLnkgKyBzcGhlcmVSYWRpdXMsIGxvY2FsU3BoZXJlUG9zLnogKyBzcGhlcmVSYWRpdXMpOwogICAgICB0cmltZXNoU2hhcGUuZ2V0VHJpYW5nbGVzSW5BQUJCKGxvY2FsU3BoZXJlQUFCQiwgdHJpYW5nbGVzKTsgLy9mb3IgKGxldCBpID0gMDsgaSA8IHRyaW1lc2hTaGFwZS5pbmRpY2VzLmxlbmd0aCAvIDM7IGkrKykgdHJpYW5nbGVzLnB1c2goaSk7IC8vIEFsbAogICAgICAvLyBWZXJ0aWNlcwoKICAgICAgY29uc3QgdiA9IHNwaGVyZVRyaW1lc2hfdjsKICAgICAgY29uc3QgcmFkaXVzU3F1YXJlZCA9IHNwaGVyZVNoYXBlLnJhZGl1cyAqIHNwaGVyZVNoYXBlLnJhZGl1czsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHJpYW5nbGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAzOyBqKyspIHsKICAgICAgICAgIHRyaW1lc2hTaGFwZS5nZXRWZXJ0ZXgodHJpbWVzaFNoYXBlLmluZGljZXNbdHJpYW5nbGVzW2ldICogMyArIGpdLCB2KTsgLy8gQ2hlY2sgdmVydGV4IG92ZXJsYXAgaW4gc3BoZXJlCgogICAgICAgICAgdi52c3ViKGxvY2FsU3BoZXJlUG9zLCByZWxwb3MpOwoKICAgICAgICAgIGlmIChyZWxwb3MubGVuZ3RoU3F1YXJlZCgpIDw9IHJhZGl1c1NxdWFyZWQpIHsKICAgICAgICAgICAgLy8gU2FmZSB1cAogICAgICAgICAgICB2Mi5jb3B5KHYpOwogICAgICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUodHJpbWVzaFBvcywgdHJpbWVzaFF1YXQsIHYyLCB2KTsKICAgICAgICAgICAgdi52c3ViKHNwaGVyZVBvcywgcmVscG9zKTsKCiAgICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBsZXQgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKHNwaGVyZUJvZHksIHRyaW1lc2hCb2R5LCBzcGhlcmVTaGFwZSwgdHJpbWVzaFNoYXBlLCByc2ksIHJzaik7CiAgICAgICAgICAgIHIubmkuY29weShyZWxwb3MpOwogICAgICAgICAgICByLm5pLm5vcm1hbGl6ZSgpOyAvLyByaSBpcyB0aGUgdmVjdG9yIGZyb20gc3BoZXJlIGNlbnRlciB0byB0aGUgc3BoZXJlIHN1cmZhY2UKCiAgICAgICAgICAgIHIucmkuY29weShyLm5pKTsKICAgICAgICAgICAgci5yaS5zY2FsZShzcGhlcmVTaGFwZS5yYWRpdXMsIHIucmkpOwogICAgICAgICAgICByLnJpLnZhZGQoc3BoZXJlUG9zLCByLnJpKTsKICAgICAgICAgICAgci5yaS52c3ViKHNwaGVyZUJvZHkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgICByLnJqLmNvcHkodik7CiAgICAgICAgICAgIHIucmoudnN1Yih0cmltZXNoQm9keS5wb3NpdGlvbiwgci5yaik7IC8vIFN0b3JlIHJlc3VsdAoKICAgICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSAvLyBDaGVjayBhbGwgZWRnZXMKCgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyaWFuZ2xlcy5sZW5ndGg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMzsgaisrKSB7CiAgICAgICAgICB0cmltZXNoU2hhcGUuZ2V0VmVydGV4KHRyaW1lc2hTaGFwZS5pbmRpY2VzW3RyaWFuZ2xlc1tpXSAqIDMgKyBqXSwgZWRnZVZlcnRleEEpOwogICAgICAgICAgdHJpbWVzaFNoYXBlLmdldFZlcnRleCh0cmltZXNoU2hhcGUuaW5kaWNlc1t0cmlhbmdsZXNbaV0gKiAzICsgKGogKyAxKSAlIDNdLCBlZGdlVmVydGV4Qik7CiAgICAgICAgICBlZGdlVmVydGV4Qi52c3ViKGVkZ2VWZXJ0ZXhBLCBlZGdlVmVjdG9yKTsgLy8gUHJvamVjdCBzcGhlcmUgcG9zaXRpb24gdG8gdGhlIGVkZ2UKCiAgICAgICAgICBsb2NhbFNwaGVyZVBvcy52c3ViKGVkZ2VWZXJ0ZXhCLCB0bXApOwogICAgICAgICAgY29uc3QgcG9zaXRpb25BbG9uZ0VkZ2VCID0gdG1wLmRvdChlZGdlVmVjdG9yKTsKICAgICAgICAgIGxvY2FsU3BoZXJlUG9zLnZzdWIoZWRnZVZlcnRleEEsIHRtcCk7CiAgICAgICAgICBsZXQgcG9zaXRpb25BbG9uZ0VkZ2VBID0gdG1wLmRvdChlZGdlVmVjdG9yKTsKCiAgICAgICAgICBpZiAocG9zaXRpb25BbG9uZ0VkZ2VBID4gMCAmJiBwb3NpdGlvbkFsb25nRWRnZUIgPCAwKSB7CiAgICAgICAgICAgIC8vIE5vdyBjaGVjayB0aGUgb3J0aG9nb25hbCBkaXN0YW5jZSBmcm9tIGVkZ2UgdG8gc3BoZXJlIGNlbnRlcgogICAgICAgICAgICBsb2NhbFNwaGVyZVBvcy52c3ViKGVkZ2VWZXJ0ZXhBLCB0bXApOwogICAgICAgICAgICBlZGdlVmVjdG9yVW5pdC5jb3B5KGVkZ2VWZWN0b3IpOwogICAgICAgICAgICBlZGdlVmVjdG9yVW5pdC5ub3JtYWxpemUoKTsKICAgICAgICAgICAgcG9zaXRpb25BbG9uZ0VkZ2VBID0gdG1wLmRvdChlZGdlVmVjdG9yVW5pdCk7CiAgICAgICAgICAgIGVkZ2VWZWN0b3JVbml0LnNjYWxlKHBvc2l0aW9uQWxvbmdFZGdlQSwgdG1wKTsKICAgICAgICAgICAgdG1wLnZhZGQoZWRnZVZlcnRleEEsIHRtcCk7IC8vIHRtcCBpcyBub3cgdGhlIHNwaGVyZSBjZW50ZXIgcG9zaXRpb24gcHJvamVjdGVkIHRvIHRoZSBlZGdlLCBkZWZpbmVkIGxvY2FsbHkgaW4gdGhlIHRyaW1lc2ggZnJhbWUKCiAgICAgICAgICAgIGNvbnN0IGRpc3QgPSB0bXAuZGlzdGFuY2VUbyhsb2NhbFNwaGVyZVBvcyk7CgogICAgICAgICAgICBpZiAoZGlzdCA8IHNwaGVyZVNoYXBlLnJhZGl1cykgewogICAgICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oc3BoZXJlQm9keSwgdHJpbWVzaEJvZHksIHNwaGVyZVNoYXBlLCB0cmltZXNoU2hhcGUsIHJzaSwgcnNqKTsKICAgICAgICAgICAgICB0bXAudnN1Yihsb2NhbFNwaGVyZVBvcywgci5uaSk7CiAgICAgICAgICAgICAgci5uaS5ub3JtYWxpemUoKTsKICAgICAgICAgICAgICByLm5pLnNjYWxlKHNwaGVyZVNoYXBlLnJhZGl1cywgci5yaSk7CiAgICAgICAgICAgICAgci5yaS52YWRkKHNwaGVyZVBvcywgci5yaSk7CiAgICAgICAgICAgICAgci5yaS52c3ViKHNwaGVyZUJvZHkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZSh0cmltZXNoUG9zLCB0cmltZXNoUXVhdCwgdG1wLCB0bXApOwogICAgICAgICAgICAgIHRtcC52c3ViKHRyaW1lc2hCb2R5LnBvc2l0aW9uLCByLnJqKTsKICAgICAgICAgICAgICBUcmFuc2Zvcm0udmVjdG9yVG9Xb3JsZEZyYW1lKHRyaW1lc2hRdWF0LCByLm5pLCByLm5pKTsKICAgICAgICAgICAgICBUcmFuc2Zvcm0udmVjdG9yVG9Xb3JsZEZyYW1lKHRyaW1lc2hRdWF0LCByLnJpLCByLnJpKTsKICAgICAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSAvLyBUcmlhbmdsZSBmYWNlcwoKCiAgICAgIGNvbnN0IHZhID0gc3BoZXJlVHJpbWVzaF92YTsKICAgICAgY29uc3QgdmIgPSBzcGhlcmVUcmltZXNoX3ZiOwogICAgICBjb25zdCB2YyA9IHNwaGVyZVRyaW1lc2hfdmM7CiAgICAgIGNvbnN0IG5vcm1hbCA9IHNwaGVyZVRyaW1lc2hfbm9ybWFsOwoKICAgICAgZm9yIChsZXQgaSA9IDAsIE4gPSB0cmlhbmdsZXMubGVuZ3RoOyBpICE9PSBOOyBpKyspIHsKICAgICAgICB0cmltZXNoU2hhcGUuZ2V0VHJpYW5nbGVWZXJ0aWNlcyh0cmlhbmdsZXNbaV0sIHZhLCB2YiwgdmMpOwogICAgICAgIHRyaW1lc2hTaGFwZS5nZXROb3JtYWwodHJpYW5nbGVzW2ldLCBub3JtYWwpOwogICAgICAgIGxvY2FsU3BoZXJlUG9zLnZzdWIodmEsIHRtcCk7CiAgICAgICAgbGV0IGRpc3QgPSB0bXAuZG90KG5vcm1hbCk7CiAgICAgICAgbm9ybWFsLnNjYWxlKGRpc3QsIHRtcCk7CiAgICAgICAgbG9jYWxTcGhlcmVQb3MudnN1Yih0bXAsIHRtcCk7IC8vIHRtcCBpcyBub3cgdGhlIHNwaGVyZSBwb3NpdGlvbiBwcm9qZWN0ZWQgdG8gdGhlIHRyaWFuZ2xlIHBsYW5lCgogICAgICAgIGRpc3QgPSB0bXAuZGlzdGFuY2VUbyhsb2NhbFNwaGVyZVBvcyk7CgogICAgICAgIGlmIChSYXkucG9pbnRJblRyaWFuZ2xlKHRtcCwgdmEsIHZiLCB2YykgJiYgZGlzdCA8IHNwaGVyZVNoYXBlLnJhZGl1cykgewogICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGxldCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oc3BoZXJlQm9keSwgdHJpbWVzaEJvZHksIHNwaGVyZVNoYXBlLCB0cmltZXNoU2hhcGUsIHJzaSwgcnNqKTsKICAgICAgICAgIHRtcC52c3ViKGxvY2FsU3BoZXJlUG9zLCByLm5pKTsKICAgICAgICAgIHIubmkubm9ybWFsaXplKCk7CiAgICAgICAgICByLm5pLnNjYWxlKHNwaGVyZVNoYXBlLnJhZGl1cywgci5yaSk7CiAgICAgICAgICByLnJpLnZhZGQoc3BoZXJlUG9zLCByLnJpKTsKICAgICAgICAgIHIucmkudnN1YihzcGhlcmVCb2R5LnBvc2l0aW9uLCByLnJpKTsKICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZSh0cmltZXNoUG9zLCB0cmltZXNoUXVhdCwgdG1wLCB0bXApOwogICAgICAgICAgdG1wLnZzdWIodHJpbWVzaEJvZHkucG9zaXRpb24sIHIucmopOwogICAgICAgICAgVHJhbnNmb3JtLnZlY3RvclRvV29ybGRGcmFtZSh0cmltZXNoUXVhdCwgci5uaSwgci5uaSk7CiAgICAgICAgICBUcmFuc2Zvcm0udmVjdG9yVG9Xb3JsZEZyYW1lKHRyaW1lc2hRdWF0LCByLnJpLCByLnJpKTsKICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgfQogICAgICB9CgogICAgICB0cmlhbmdsZXMubGVuZ3RoID0gMDsKICAgIH0KCiAgICBwbGFuZVRyaW1lc2gocGxhbmVTaGFwZSwgdHJpbWVzaFNoYXBlLCBwbGFuZVBvcywgdHJpbWVzaFBvcywgcGxhbmVRdWF0LCB0cmltZXNoUXVhdCwgcGxhbmVCb2R5LCB0cmltZXNoQm9keSwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIC8vIE1ha2UgY29udGFjdHMhCiAgICAgIGNvbnN0IHYgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBub3JtYWwgPSBwbGFuZVRyaW1lc2hfbm9ybWFsOwogICAgICBub3JtYWwuc2V0KDAsIDAsIDEpOwogICAgICBwbGFuZVF1YXQudm11bHQobm9ybWFsLCBub3JtYWwpOyAvLyBUdXJuIG5vcm1hbCBhY2NvcmRpbmcgdG8gcGxhbmUKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHJpbWVzaFNoYXBlLnZlcnRpY2VzLmxlbmd0aCAvIDM7IGkrKykgewogICAgICAgIC8vIEdldCB3b3JsZCB2ZXJ0ZXggZnJvbSB0cmltZXNoCiAgICAgICAgdHJpbWVzaFNoYXBlLmdldFZlcnRleChpLCB2KTsgLy8gU2FmZSB1cAoKICAgICAgICBjb25zdCB2MiA9IG5ldyBWZWMzKCk7CiAgICAgICAgdjIuY29weSh2KTsKICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUodHJpbWVzaFBvcywgdHJpbWVzaFF1YXQsIHYyLCB2KTsgLy8gQ2hlY2sgcGxhbmUgc2lkZQoKICAgICAgICBjb25zdCByZWxwb3MgPSBwbGFuZVRyaW1lc2hfcmVscG9zOwogICAgICAgIHYudnN1YihwbGFuZVBvcywgcmVscG9zKTsKICAgICAgICBjb25zdCBkb3QgPSBub3JtYWwuZG90KHJlbHBvcyk7CgogICAgICAgIGlmIChkb3QgPD0gMC4wKSB7CiAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKHBsYW5lQm9keSwgdHJpbWVzaEJvZHksIHBsYW5lU2hhcGUsIHRyaW1lc2hTaGFwZSwgcnNpLCByc2opOwogICAgICAgICAgci5uaS5jb3B5KG5vcm1hbCk7IC8vIENvbnRhY3Qgbm9ybWFsIGlzIHRoZSBwbGFuZSBub3JtYWwKICAgICAgICAgIC8vIEdldCB2ZXJ0ZXggcG9zaXRpb24gcHJvamVjdGVkIG9uIHBsYW5lCgogICAgICAgICAgY29uc3QgcHJvamVjdGVkID0gcGxhbmVUcmltZXNoX3Byb2plY3RlZDsKICAgICAgICAgIG5vcm1hbC5zY2FsZShyZWxwb3MuZG90KG5vcm1hbCksIHByb2plY3RlZCk7CiAgICAgICAgICB2LnZzdWIocHJvamVjdGVkLCBwcm9qZWN0ZWQpOyAvLyByaSBpcyB0aGUgcHJvamVjdGVkIHdvcmxkIHBvc2l0aW9uIG1pbnVzIHBsYW5lIHBvc2l0aW9uCgogICAgICAgICAgci5yaS5jb3B5KHByb2plY3RlZCk7CiAgICAgICAgICByLnJpLnZzdWIocGxhbmVCb2R5LnBvc2l0aW9uLCByLnJpKTsKICAgICAgICAgIHIucmouY29weSh2KTsKICAgICAgICAgIHIucmoudnN1Yih0cmltZXNoQm9keS5wb3NpdGlvbiwgci5yaik7IC8vIFN0b3JlIHJlc3VsdAoKICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgfQogICAgICB9CiAgICB9IC8vIGNvbnZleFRyaW1lc2goCiAgICAvLyAgIHNpOiBDb252ZXhQb2x5aGVkcm9uLCBzajogVHJpbWVzaCwgeGk6IFZlYzMsIHhqOiBWZWMzLCBxaTogUXVhdGVybmlvbiwgcWo6IFF1YXRlcm5pb24sCiAgICAvLyAgIGJpOiBCb2R5LCBiajogQm9keSwgcnNpPzogU2hhcGUgfCBudWxsLCByc2o/OiBTaGFwZSB8IG51bGwsCiAgICAvLyAgIGZhY2VMaXN0QT86IG51bWJlcltdIHwgbnVsbCwgZmFjZUxpc3RCPzogbnVtYmVyW10gfCBudWxsLAogICAgLy8gKSB7CiAgICAvLyAgIGNvbnN0IHNlcEF4aXMgPSBjb252ZXhDb252ZXhfc2VwQXhpczsKICAgIC8vICAgaWYoeGkuZGlzdGFuY2VUbyh4aikgPiBzaS5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIHNqLmJvdW5kaW5nU3BoZXJlUmFkaXVzKXsKICAgIC8vICAgICAgIHJldHVybjsKICAgIC8vICAgfQogICAgLy8gICAvLyBDb25zdHJ1Y3QgYSB0ZW1wIGh1bGwgZm9yIGVhY2ggdHJpYW5nbGUKICAgIC8vICAgY29uc3QgaHVsbEIgPSBuZXcgQ29udmV4UG9seWhlZHJvbigpOwogICAgLy8gICBodWxsQi5mYWNlcyA9IFtbMCwxLDJdXTsKICAgIC8vICAgY29uc3QgdmEgPSBuZXcgVmVjMygpOwogICAgLy8gICBjb25zdCB2YiA9IG5ldyBWZWMzKCk7CiAgICAvLyAgIGNvbnN0IHZjID0gbmV3IFZlYzMoKTsKICAgIC8vICAgaHVsbEIudmVydGljZXMgPSBbCiAgICAvLyAgICAgICB2YSwKICAgIC8vICAgICAgIHZiLAogICAgLy8gICAgICAgdmMKICAgIC8vICAgXTsKICAgIC8vICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzai5pbmRpY2VzLmxlbmd0aCAvIDM7IGkrKykgewogICAgLy8gICAgICAgY29uc3QgdHJpYW5nbGVOb3JtYWwgPSBuZXcgVmVjMygpOwogICAgLy8gICAgICAgc2ouZ2V0Tm9ybWFsKGksIHRyaWFuZ2xlTm9ybWFsKTsKICAgIC8vICAgICAgIGh1bGxCLmZhY2VOb3JtYWxzID0gW3RyaWFuZ2xlTm9ybWFsXTsKICAgIC8vICAgICAgIHNqLmdldFRyaWFuZ2xlVmVydGljZXMoaSwgdmEsIHZiLCB2Yyk7CiAgICAvLyAgICAgICBsZXQgZCA9IHNpLnRlc3RTZXBBeGlzKHRyaWFuZ2xlTm9ybWFsLCBodWxsQiwgeGksIHFpLCB4aiwgcWopOwogICAgLy8gICAgICAgaWYoIWQpewogICAgLy8gICAgICAgICAgIHRyaWFuZ2xlTm9ybWFsLnNjYWxlKC0xLCB0cmlhbmdsZU5vcm1hbCk7CiAgICAvLyAgICAgICAgICAgZCA9IHNpLnRlc3RTZXBBeGlzKHRyaWFuZ2xlTm9ybWFsLCBodWxsQiwgeGksIHFpLCB4aiwgcWopOwogICAgLy8gICAgICAgICAgIGlmKCFkKXsKICAgIC8vICAgICAgICAgICAgICAgY29udGludWU7CiAgICAvLyAgICAgICAgICAgfQogICAgLy8gICAgICAgfQogICAgLy8gICAgICAgY29uc3QgcmVzOiBDb252ZXhQb2x5aGVkcm9uQ29udGFjdFBvaW50W10gPSBbXTsKICAgIC8vICAgICAgIGNvbnN0IHEgPSBjb252ZXhDb252ZXhfcTsKICAgIC8vICAgICAgIHNpLmNsaXBBZ2FpbnN0SHVsbCh4aSxxaSxodWxsQix4aixxaix0cmlhbmdsZU5vcm1hbCwtMTAwLDEwMCxyZXMpOwogICAgLy8gICAgICAgZm9yKGxldCBqID0gMDsgaiAhPT0gcmVzLmxlbmd0aDsgaisrKXsKICAgIC8vICAgICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksYmosc2ksc2oscnNpLHJzaiksCiAgICAvLyAgICAgICAgICAgICAgIHJpID0gci5yaSwKICAgIC8vICAgICAgICAgICAgICAgcmogPSByLnJqOwogICAgLy8gICAgICAgICAgIHIubmkuY29weSh0cmlhbmdsZU5vcm1hbCk7CiAgICAvLyAgICAgICAgICAgci5uaS5uZWdhdGUoci5uaSk7CiAgICAvLyAgICAgICAgICAgcmVzW2pdLm5vcm1hbC5uZWdhdGUocSk7CiAgICAvLyAgICAgICAgICAgcS5tdWx0KHJlc1tqXS5kZXB0aCwgcSk7CiAgICAvLyAgICAgICAgICAgcmVzW2pdLnBvaW50LnZhZGQocSwgcmkpOwogICAgLy8gICAgICAgICAgIHJqLmNvcHkocmVzW2pdLnBvaW50KTsKICAgIC8vICAgICAgICAgICAvLyBDb250YWN0IHBvaW50cyBhcmUgaW4gd29ybGQgY29vcmRpbmF0ZXMuIFRyYW5zZm9ybSBiYWNrIHRvIHJlbGF0aXZlCiAgICAvLyAgICAgICAgICAgcmkudnN1Yih4aSxyaSk7CiAgICAvLyAgICAgICAgICAgcmoudnN1Yih4aixyaik7CiAgICAvLyAgICAgICAgICAgLy8gTWFrZSByZWxhdGl2ZSB0byBib2RpZXMKICAgIC8vICAgICAgICAgICByaS52YWRkKHhpLCByaSk7CiAgICAvLyAgICAgICAgICAgcmkudnN1YihiaS5wb3NpdGlvbiwgcmkpOwogICAgLy8gICAgICAgICAgIHJqLnZhZGQoeGosIHJqKTsKICAgIC8vICAgICAgICAgICByai52c3ViKGJqLnBvc2l0aW9uLCByaik7CiAgICAvLyAgICAgICAgICAgcmVzdWx0LnB1c2gocik7CiAgICAvLyAgICAgICB9CiAgICAvLyAgIH0KICAgIC8vIH0KCgogIH0KICBjb25zdCBhdmVyYWdlTm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBhdmVyYWdlQ29udGFjdFBvaW50QSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXZlcmFnZUNvbnRhY3RQb2ludEIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFZlYzEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFZlYzIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFF1YXQxID0gbmV3IFF1YXRlcm5pb24oKTsKICBjb25zdCB0bXBRdWF0MiA9IG5ldyBRdWF0ZXJuaW9uKCk7CgogIGNvbnN0IHBsYW5lVHJpbWVzaF9ub3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBsYW5lVHJpbWVzaF9yZWxwb3MgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBsYW5lVHJpbWVzaF9wcm9qZWN0ZWQgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfbm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX3JlbHBvcyA9IG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX3YgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdjIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfZWRnZVZlcnRleEEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfZWRnZVZlcnRleEIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfZWRnZVZlY3RvciA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF9lZGdlVmVjdG9yVW5pdCA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF9sb2NhbFNwaGVyZVBvcyA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF90bXAgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdmEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdmIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdmMgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfbG9jYWxTcGhlcmVBQUJCID0gbmV3IEFBQkIoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX3RyaWFuZ2xlcyA9IFtdOwogIGNvbnN0IHBvaW50X29uX3BsYW5lX3RvX3NwaGVyZSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGxhbmVfdG9fc3BoZXJlX29ydGhvID0gbmV3IFZlYzMoKTsgLy8gU2VlIGh0dHA6Ly9idWxsZXRwaHlzaWNzLmNvbS9CdWxsZXQvQnVsbGV0RnVsbC9TcGhlcmVUcmlhbmdsZURldGVjdG9yXzhjcHBfc291cmNlLmh0bWwKCiAgY29uc3QgcG9pbnRJblBvbHlnb25fZWRnZSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcG9pbnRJblBvbHlnb25fZWRnZV94X25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcG9pbnRJblBvbHlnb25fdnRwID0gbmV3IFZlYzMoKTsKCiAgZnVuY3Rpb24gcG9pbnRJblBvbHlnb24odmVydHMsIG5vcm1hbCwgcCkgewogICAgbGV0IHBvc2l0aXZlUmVzdWx0ID0gbnVsbDsKICAgIGNvbnN0IE4gPSB2ZXJ0cy5sZW5ndGg7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICBjb25zdCB2ID0gdmVydHNbaV07IC8vIEdldCBlZGdlIHRvIHRoZSBuZXh0IHZlcnRleAoKICAgICAgY29uc3QgZWRnZSA9IHBvaW50SW5Qb2x5Z29uX2VkZ2U7CiAgICAgIHZlcnRzWyhpICsgMSkgJSBOXS52c3ViKHYsIGVkZ2UpOyAvLyBHZXQgY3Jvc3MgcHJvZHVjdCBiZXR3ZWVuIHBvbHlnb24gbm9ybWFsIGFuZCB0aGUgZWRnZQoKICAgICAgY29uc3QgZWRnZV94X25vcm1hbCA9IHBvaW50SW5Qb2x5Z29uX2VkZ2VfeF9ub3JtYWw7IC8vY29uc3QgZWRnZV94X25vcm1hbCA9IG5ldyBWZWMzKCk7CgogICAgICBlZGdlLmNyb3NzKG5vcm1hbCwgZWRnZV94X25vcm1hbCk7IC8vIEdldCB2ZWN0b3IgYmV0d2VlbiBwb2ludCBhbmQgY3VycmVudCB2ZXJ0ZXgKCiAgICAgIGNvbnN0IHZlcnRleF90b19wID0gcG9pbnRJblBvbHlnb25fdnRwOwogICAgICBwLnZzdWIodiwgdmVydGV4X3RvX3ApOyAvLyBUaGlzIGRvdCBwcm9kdWN0IGRldGVybWluZXMgd2hpY2ggc2lkZSBvZiB0aGUgZWRnZSB0aGUgcG9pbnQgaXMKCiAgICAgIGNvbnN0IHIgPSBlZGdlX3hfbm9ybWFsLmRvdCh2ZXJ0ZXhfdG9fcCk7IC8vIElmIGFsbCBzdWNoIGRvdCBwcm9kdWN0cyBoYXZlIHNhbWUgc2lnbiwgd2UgYXJlIGluc2lkZSB0aGUgcG9seWdvbi4KCiAgICAgIGlmIChwb3NpdGl2ZVJlc3VsdCA9PT0gbnVsbCB8fCByID4gMCAmJiBwb3NpdGl2ZVJlc3VsdCA9PT0gdHJ1ZSB8fCByIDw9IDAgJiYgcG9zaXRpdmVSZXN1bHQgPT09IGZhbHNlKSB7CiAgICAgICAgaWYgKHBvc2l0aXZlUmVzdWx0ID09PSBudWxsKSB7CiAgICAgICAgICBwb3NpdGl2ZVJlc3VsdCA9IHIgPiAwOwogICAgICAgIH0KCiAgICAgICAgY29udGludWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBFbmNvdW50ZXJlZCBzb21lIG90aGVyIHNpZ24uIEV4aXQuCiAgICAgIH0KICAgIH0gLy8gSWYgd2UgZ290IGhlcmUsIGFsbCBkb3QgcHJvZHVjdHMgd2VyZSBvZiB0aGUgc2FtZSBzaWduLgoKCiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGNvbnN0IGJveF90b19zcGhlcmUgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUJveF9ucyA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQm94X25zMSA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQm94X25zMiA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQm94X3NpZGVzID0gW25ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCldOwogIGNvbnN0IHNwaGVyZUJveF9zcGhlcmVfdG9fY29ybmVyID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVCb3hfc2lkZV9ucyA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQm94X3NpZGVfbnMxID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVCb3hfc2lkZV9uczIgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleF90b19zcGhlcmUgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF9lZGdlID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfZWRnZVVuaXQgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF9zcGhlcmVUb0Nvcm5lciA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQ29udmV4X3dvcmxkQ29ybmVyID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfd29ybGROb3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF93b3JsZFBvaW50ID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfd29ybGRTcGhlcmVQb2ludENsb3Nlc3RUb1BsYW5lID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfcGVuZXRyYXRpb25WZWMgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF9zcGhlcmVUb1dvcmxkUG9pbnQgPSBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBjb25zdCBwbGFuZUNvbnZleF92ID0gbmV3IFZlYzMoKTsKICBjb25zdCBwbGFuZUNvbnZleF9ub3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBsYW5lQ29udmV4X3JlbHBvcyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGxhbmVDb252ZXhfcHJvamVjdGVkID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhDb252ZXhfc2VwQXhpcyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY29udmV4Q29udmV4X3EgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBhcnRpY2xlUGxhbmVfbm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBwYXJ0aWNsZVBsYW5lX3JlbHBvcyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGFydGljbGVQbGFuZV9wcm9qZWN0ZWQgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBhcnRpY2xlU3BoZXJlX25vcm1hbCA9IG5ldyBWZWMzKCk7IC8vIFdJUAoKICBjb25zdCBjcWogPSBuZXcgUXVhdGVybmlvbigpOwogIGNvbnN0IGNvbnZleFBhcnRpY2xlX2xvY2FsID0gbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleFBhcnRpY2xlX3BlbmV0cmF0ZWRGYWNlTm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhQYXJ0aWNsZV92ZXJ0ZXhUb1BhcnRpY2xlID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhQYXJ0aWNsZV93b3JsZFBlbmV0cmF0aW9uVmVjID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhIZWlnaHRmaWVsZF90bXAxID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhIZWlnaHRmaWVsZF90bXAyID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhIZWlnaHRmaWVsZF9mYWNlTGlzdCA9IFswXTsKICBjb25zdCBzcGhlcmVIZWlnaHRmaWVsZF90bXAxID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVIZWlnaHRmaWVsZF90bXAyID0gbmV3IFZlYzMoKTsKCiAgY2xhc3MgT3ZlcmxhcEtlZXBlciB7CiAgICAvKioKICAgICAqIEB0b2RvIFJlbW92ZSB1c2VsZXNzIGNvbnN0cnVjdG9yCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLmN1cnJlbnQgPSBbXTsKICAgICAgdGhpcy5wcmV2aW91cyA9IFtdOwogICAgfQogICAgLyoqCiAgICAgKiBnZXRLZXkKICAgICAqLwoKCiAgICBnZXRLZXkoaSwgaikgewogICAgICBpZiAoaiA8IGkpIHsKICAgICAgICBjb25zdCB0ZW1wID0gajsKICAgICAgICBqID0gaTsKICAgICAgICBpID0gdGVtcDsKICAgICAgfQoKICAgICAgcmV0dXJuIGkgPDwgMTYgfCBqOwogICAgfQogICAgLyoqCiAgICAgKiBzZXQKICAgICAqLwoKCiAgICBzZXQoaSwgaikgewogICAgICAvLyBJbnNlcnRpb24gc29ydC4gVGhpcyB3YXkgdGhlIGRpZmYgd2lsbCBoYXZlIGxpbmVhciBjb21wbGV4aXR5LgogICAgICBjb25zdCBrZXkgPSB0aGlzLmdldEtleShpLCBqKTsKICAgICAgY29uc3QgY3VycmVudCA9IHRoaXMuY3VycmVudDsKICAgICAgbGV0IGluZGV4ID0gMDsKCiAgICAgIHdoaWxlIChrZXkgPiBjdXJyZW50W2luZGV4XSkgewogICAgICAgIGluZGV4Kys7CiAgICAgIH0KCiAgICAgIGlmIChrZXkgPT09IGN1cnJlbnRbaW5kZXhdKSB7CiAgICAgICAgcmV0dXJuOyAvLyBQYWlyIHdhcyBhbHJlYWR5IGFkZGVkCiAgICAgIH0KCiAgICAgIGZvciAobGV0IGogPSBjdXJyZW50Lmxlbmd0aCAtIDE7IGogPj0gaW5kZXg7IGotLSkgewogICAgICAgIGN1cnJlbnRbaiArIDFdID0gY3VycmVudFtqXTsKICAgICAgfQoKICAgICAgY3VycmVudFtpbmRleF0gPSBrZXk7CiAgICB9CiAgICAvKioKICAgICAqIHRpY2sKICAgICAqLwoKCiAgICB0aWNrKCkgewogICAgICBjb25zdCB0bXAgPSB0aGlzLmN1cnJlbnQ7CiAgICAgIHRoaXMuY3VycmVudCA9IHRoaXMucHJldmlvdXM7CiAgICAgIHRoaXMucHJldmlvdXMgPSB0bXA7CiAgICAgIHRoaXMuY3VycmVudC5sZW5ndGggPSAwOwogICAgfQogICAgLyoqCiAgICAgKiBnZXREaWZmCiAgICAgKi8KCgogICAgZ2V0RGlmZihhZGRpdGlvbnMsIHJlbW92YWxzKSB7CiAgICAgIGNvbnN0IGEgPSB0aGlzLmN1cnJlbnQ7CiAgICAgIGNvbnN0IGIgPSB0aGlzLnByZXZpb3VzOwogICAgICBjb25zdCBhbCA9IGEubGVuZ3RoOwogICAgICBjb25zdCBibCA9IGIubGVuZ3RoOwogICAgICBsZXQgaiA9IDA7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsOyBpKyspIHsKICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTsKICAgICAgICBjb25zdCBrZXlBID0gYVtpXTsKCiAgICAgICAgd2hpbGUgKGtleUEgPiBiW2pdKSB7CiAgICAgICAgICBqKys7CiAgICAgICAgfQoKICAgICAgICBmb3VuZCA9IGtleUEgPT09IGJbal07CgogICAgICAgIGlmICghZm91bmQpIHsKICAgICAgICAgIHVucGFja0FuZFB1c2goYWRkaXRpb25zLCBrZXlBKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGogPSAwOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBibDsgaSsrKSB7CiAgICAgICAgbGV0IGZvdW5kID0gZmFsc2U7CiAgICAgICAgY29uc3Qga2V5QiA9IGJbaV07CgogICAgICAgIHdoaWxlIChrZXlCID4gYVtqXSkgewogICAgICAgICAgaisrOwogICAgICAgIH0KCiAgICAgICAgZm91bmQgPSBhW2pdID09PSBrZXlCOwoKICAgICAgICBpZiAoIWZvdW5kKSB7CiAgICAgICAgICB1bnBhY2tBbmRQdXNoKHJlbW92YWxzLCBrZXlCKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgfQoKICBmdW5jdGlvbiB1bnBhY2tBbmRQdXNoKGFycmF5LCBrZXkpIHsKICAgIGFycmF5LnB1c2goKGtleSAmIDB4ZmZmZjAwMDApID4+IDE2LCBrZXkgJiAweDAwMDBmZmZmKTsKICB9CgogIGNvbnN0IGdldEtleSA9IChpLCBqKSA9PiBpIDwgaiA/IGAke2l9LSR7an1gIDogYCR7an0tJHtpfWA7CiAgLyoqCiAgICogVHVwbGVEaWN0aW9uYXJ5CiAgICovCgoKICBjbGFzcyBUdXBsZURpY3Rpb25hcnkgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHRoaXMuZGF0YSA9IHsKICAgICAgICBrZXlzOiBbXQogICAgICB9OwogICAgfQoKICAgIC8qKiBnZXQgKi8KICAgIGdldChpLCBqKSB7CiAgICAgIGNvbnN0IGtleSA9IGdldEtleShpLCBqKTsKICAgICAgcmV0dXJuIHRoaXMuZGF0YVtrZXldOwogICAgfQogICAgLyoqIHNldCAqLwoKCiAgICBzZXQoaSwgaiwgdmFsdWUpIHsKICAgICAgY29uc3Qga2V5ID0gZ2V0S2V5KGksIGopOyAvLyBDaGVjayBpZiBrZXkgYWxyZWFkeSBleGlzdHMKCiAgICAgIGlmICghdGhpcy5nZXQoaSwgaikpIHsKICAgICAgICB0aGlzLmRhdGEua2V5cy5wdXNoKGtleSk7CiAgICAgIH0KCiAgICAgIHRoaXMuZGF0YVtrZXldID0gdmFsdWU7CiAgICB9CiAgICAvKiogZGVsZXRlICovCgoKICAgIGRlbGV0ZShpLCBqKSB7CiAgICAgIGNvbnN0IGtleSA9IGdldEtleShpLCBqKTsKICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmRhdGEua2V5cy5pbmRleE9mKGtleSk7CgogICAgICBpZiAoaW5kZXggIT09IC0xKSB7CiAgICAgICAgdGhpcy5kYXRhLmtleXMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgfQoKICAgICAgZGVsZXRlIHRoaXMuZGF0YVtrZXldOwogICAgfQogICAgLyoqIHJlc2V0ICovCgoKICAgIHJlc2V0KCkgewogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBjb25zdCBrZXlzID0gZGF0YS5rZXlzOwoKICAgICAgd2hpbGUgKGtleXMubGVuZ3RoID4gMCkgewogICAgICAgIGNvbnN0IGtleSA9IGtleXMucG9wKCk7CiAgICAgICAgZGVsZXRlIGRhdGFba2V5XTsKICAgICAgfQogICAgfQoKICB9CgogIC8qKgogICAqIFRoZSBwaHlzaWNzIHdvcmxkCiAgICovCiAgY2xhc3MgV29ybGQgZXh0ZW5kcyBFdmVudFRhcmdldCB7CiAgICAvKioKICAgICAqIEN1cnJlbnRseSAvIGxhc3QgdXNlZCB0aW1lc3RlcC4gSXMgc2V0IHRvIC0xIGlmIG5vdCBhdmFpbGFibGUuIFRoaXMgdmFsdWUgaXMgdXBkYXRlZCBiZWZvcmUgZWFjaCBpbnRlcm5hbCBzdGVwLCB3aGljaCBtZWFucyB0aGF0IGl0IGlzICJmcmVzaCIgaW5zaWRlIGV2ZW50IGNhbGxiYWNrcy4KICAgICAqLwoKICAgIC8qKgogICAgICogTWFrZXMgYm9kaWVzIGdvIHRvIHNsZWVwIHdoZW4gdGhleSd2ZSBiZWVuIGluYWN0aXZlLgogICAgICogQGRlZmF1bHQgZmFsc2UKICAgICAqLwoKICAgIC8qKgogICAgICogQWxsIHRoZSBjdXJyZW50IGNvbnRhY3RzIChpbnN0YW5jZXMgb2YgQ29udGFjdEVxdWF0aW9uKSBpbiB0aGUgd29ybGQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEhvdyBvZnRlbiB0byBub3JtYWxpemUgcXVhdGVybmlvbnMuIFNldCB0byAwIGZvciBldmVyeSBzdGVwLCAxIGZvciBldmVyeSBzZWNvbmQgZXRjLi4gQSBsYXJnZXIgdmFsdWUgaW5jcmVhc2VzIHBlcmZvcm1hbmNlLiBJZiBib2RpZXMgdGVuZCB0byBleHBsb2RlLCBzZXQgdG8gYSBzbWFsbGVyIHZhbHVlICh6ZXJvIHRvIGJlIHN1cmUgbm90aGluZyBjYW4gZ28gd3JvbmcpLgogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiBTZXQgdG8gdHJ1ZSB0byB1c2UgZmFzdCBxdWF0ZXJuaW9uIG5vcm1hbGl6YXRpb24uIEl0IGlzIG9mdGVuIGVub3VnaCBhY2N1cmF0ZSB0byB1c2UuCiAgICAgKiBJZiBib2RpZXMgdGVuZCB0byBleHBsb2RlLCBzZXQgdG8gZmFsc2UuCiAgICAgKiBAZGVmYXVsdCBmYWxzZQogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgd2FsbC1jbG9jayB0aW1lIHNpbmNlIHNpbXVsYXRpb24gc3RhcnQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIE51bWJlciBvZiB0aW1lc3RlcHMgdGFrZW4gc2luY2Ugc3RhcnQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIERlZmF1bHQgYW5kIGxhc3QgdGltZXN0ZXAgc2l6ZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBncmF2aXR5IG9mIHRoZSB3b3JsZC4KICAgICAqLwoKICAgIC8qKgogICAgICogR3Jhdml0eSB0byB1c2Ugd2hlbiBhcHByb3hpbWF0aW5nIHRoZSBmcmljdGlvbiBtYXggZm9yY2UgKG11Km1hc3MqZ3Jhdml0eSkuCiAgICAgKiBJZiB1bmRlZmluZWQsIGdsb2JhbCBncmF2aXR5IHdpbGwgYmUgdXNlZC4KICAgICAqIFVzZSB0byBlbmFibGUgZnJpY3Rpb24gaW4gYSBXb3JsZCB3aXRoIGEgbnVsbCBncmF2aXR5IHZlY3RvciAobm8gZ3Jhdml0eSkuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBicm9hZHBoYXNlIGFsZ29yaXRobSB0byB1c2UuCiAgICAgKiBAZGVmYXVsdCBOYWl2ZUJyb2FkcGhhc2UKICAgICAqLwoKICAgIC8qKgogICAgICogQWxsIGJvZGllcyBpbiB0aGlzIHdvcmxkCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRydWUgaWYgYW55IGJvZGllcyBhcmUgbm90IHNsZWVwaW5nLCBmYWxzZSBpZiBldmVyeSBib2R5IGlzIHNsZWVwaW5nLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgc29sdmVyIGFsZ29yaXRobSB0byB1c2UuCiAgICAgKiBAZGVmYXVsdCBHU1NvbHZlcgogICAgICovCgogICAgLyoqCiAgICAgKiBjb2xsaXNpb25NYXRyaXgKICAgICAqLwoKICAgIC8qKgogICAgICogQ29sbGlzaW9uTWF0cml4IGZyb20gdGhlIHByZXZpb3VzIHN0ZXAuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFsbCBhZGRlZCBjb250YWN0bWF0ZXJpYWxzLgogICAgICovCgogICAgLyoqCiAgICAgKiBVc2VkIHRvIGxvb2sgdXAgYSBDb250YWN0TWF0ZXJpYWwgZ2l2ZW4gdHdvIGluc3RhbmNlcyBvZiBNYXRlcmlhbC4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIGRlZmF1bHQgbWF0ZXJpYWwgb2YgdGhlIGJvZGllcy4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhpcyBjb250YWN0IG1hdGVyaWFsIGlzIHVzZWQgaWYgbm8gc3VpdGFibGUgY29udGFjdG1hdGVyaWFsIGlzIGZvdW5kIGZvciBhIGNvbnRhY3QuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRpbWUgYWNjdW11bGF0b3IgZm9yIGludGVycG9sYXRpb24uCiAgICAgKiBAc2VlIGh0dHBzOi8vZ2FmZmVyb25nYW1lcy5jb20vZ2FtZS1waHlzaWNzL2ZpeC15b3VyLXRpbWVzdGVwLwogICAgICovCgogICAgLyoqCiAgICAgKiBEaXNwYXRjaGVkIGFmdGVyIGEgYm9keSBoYXMgYmVlbiBhZGRlZCB0byB0aGUgd29ybGQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIERpc3BhdGNoZWQgYWZ0ZXIgYSBib2R5IGhhcyBiZWVuIHJlbW92ZWQgZnJvbSB0aGUgd29ybGQuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgc3VwZXIoKTsKICAgICAgdGhpcy5kdCA9IC0xOwogICAgICB0aGlzLmFsbG93U2xlZXAgPSAhIW9wdGlvbnMuYWxsb3dTbGVlcDsKICAgICAgdGhpcy5jb250YWN0cyA9IFtdOwogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25zID0gW107CiAgICAgIHRoaXMucXVhdE5vcm1hbGl6ZVNraXAgPSBvcHRpb25zLnF1YXROb3JtYWxpemVTa2lwICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnF1YXROb3JtYWxpemVTa2lwIDogMDsKICAgICAgdGhpcy5xdWF0Tm9ybWFsaXplRmFzdCA9IG9wdGlvbnMucXVhdE5vcm1hbGl6ZUZhc3QgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucXVhdE5vcm1hbGl6ZUZhc3QgOiBmYWxzZTsKICAgICAgdGhpcy50aW1lID0gMC4wOwogICAgICB0aGlzLnN0ZXBudW1iZXIgPSAwOwogICAgICB0aGlzLmRlZmF1bHRfZHQgPSAxIC8gNjA7CiAgICAgIHRoaXMubmV4dElkID0gMDsKICAgICAgdGhpcy5ncmF2aXR5ID0gbmV3IFZlYzMoKTsKCiAgICAgIGlmIChvcHRpb25zLmdyYXZpdHkpIHsKICAgICAgICB0aGlzLmdyYXZpdHkuY29weShvcHRpb25zLmdyYXZpdHkpOwogICAgICB9CgogICAgICBpZiAob3B0aW9ucy5mcmljdGlvbkdyYXZpdHkpIHsKICAgICAgICB0aGlzLmZyaWN0aW9uR3Jhdml0eSA9IG5ldyBWZWMzKCk7CiAgICAgICAgdGhpcy5mcmljdGlvbkdyYXZpdHkuY29weShvcHRpb25zLmZyaWN0aW9uR3Jhdml0eSk7CiAgICAgIH0KCiAgICAgIHRoaXMuYnJvYWRwaGFzZSA9IG9wdGlvbnMuYnJvYWRwaGFzZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5icm9hZHBoYXNlIDogbmV3IE5haXZlQnJvYWRwaGFzZSgpOwogICAgICB0aGlzLmJvZGllcyA9IFtdOwogICAgICB0aGlzLmhhc0FjdGl2ZUJvZGllcyA9IGZhbHNlOwogICAgICB0aGlzLnNvbHZlciA9IG9wdGlvbnMuc29sdmVyICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnNvbHZlciA6IG5ldyBHU1NvbHZlcigpOwogICAgICB0aGlzLmNvbnN0cmFpbnRzID0gW107CiAgICAgIHRoaXMubmFycm93cGhhc2UgPSBuZXcgTmFycm93cGhhc2UodGhpcyk7CiAgICAgIHRoaXMuY29sbGlzaW9uTWF0cml4ID0gbmV3IEFycmF5Q29sbGlzaW9uTWF0cml4KCk7CiAgICAgIHRoaXMuY29sbGlzaW9uTWF0cml4UHJldmlvdXMgPSBuZXcgQXJyYXlDb2xsaXNpb25NYXRyaXgoKTsKICAgICAgdGhpcy5ib2R5T3ZlcmxhcEtlZXBlciA9IG5ldyBPdmVybGFwS2VlcGVyKCk7CiAgICAgIHRoaXMuc2hhcGVPdmVybGFwS2VlcGVyID0gbmV3IE92ZXJsYXBLZWVwZXIoKTsKICAgICAgdGhpcy5jb250YWN0bWF0ZXJpYWxzID0gW107CiAgICAgIHRoaXMuY29udGFjdE1hdGVyaWFsVGFibGUgPSBuZXcgVHVwbGVEaWN0aW9uYXJ5KCk7CiAgICAgIHRoaXMuZGVmYXVsdE1hdGVyaWFsID0gbmV3IE1hdGVyaWFsKCdkZWZhdWx0Jyk7CiAgICAgIHRoaXMuZGVmYXVsdENvbnRhY3RNYXRlcmlhbCA9IG5ldyBDb250YWN0TWF0ZXJpYWwodGhpcy5kZWZhdWx0TWF0ZXJpYWwsIHRoaXMuZGVmYXVsdE1hdGVyaWFsLCB7CiAgICAgICAgZnJpY3Rpb246IDAuMywKICAgICAgICByZXN0aXR1dGlvbjogMC4wCiAgICAgIH0pOwogICAgICB0aGlzLmRvUHJvZmlsaW5nID0gZmFsc2U7CiAgICAgIHRoaXMucHJvZmlsZSA9IHsKICAgICAgICBzb2x2ZTogMCwKICAgICAgICBtYWtlQ29udGFjdENvbnN0cmFpbnRzOiAwLAogICAgICAgIGJyb2FkcGhhc2U6IDAsCiAgICAgICAgaW50ZWdyYXRlOiAwLAogICAgICAgIG5hcnJvd3BoYXNlOiAwCiAgICAgIH07CiAgICAgIHRoaXMuYWNjdW11bGF0b3IgPSAwOwogICAgICB0aGlzLnN1YnN5c3RlbXMgPSBbXTsKICAgICAgdGhpcy5hZGRCb2R5RXZlbnQgPSB7CiAgICAgICAgdHlwZTogJ2FkZEJvZHknLAogICAgICAgIGJvZHk6IG51bGwKICAgICAgfTsKICAgICAgdGhpcy5yZW1vdmVCb2R5RXZlbnQgPSB7CiAgICAgICAgdHlwZTogJ3JlbW92ZUJvZHknLAogICAgICAgIGJvZHk6IG51bGwKICAgICAgfTsKICAgICAgdGhpcy5pZFRvQm9keU1hcCA9IHt9OwogICAgICB0aGlzLmJyb2FkcGhhc2Uuc2V0V29ybGQodGhpcyk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgY29udGFjdCBtYXRlcmlhbCBiZXR3ZWVuIG1hdGVyaWFscyBtMSBhbmQgbTIKICAgICAqIEByZXR1cm4gVGhlIGNvbnRhY3QgbWF0ZXJpYWwgaWYgaXQgd2FzIGZvdW5kLgogICAgICovCgoKICAgIGdldENvbnRhY3RNYXRlcmlhbChtMSwgbTIpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udGFjdE1hdGVyaWFsVGFibGUuZ2V0KG0xLmlkLCBtMi5pZCk7CiAgICB9CiAgICAvKioKICAgICAqIFN0b3JlIG9sZCBjb2xsaXNpb24gc3RhdGUgaW5mbwogICAgICovCgoKICAgIGNvbGxpc2lvbk1hdHJpeFRpY2soKSB7CiAgICAgIGNvbnN0IHRlbXAgPSB0aGlzLmNvbGxpc2lvbk1hdHJpeFByZXZpb3VzOwogICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeFByZXZpb3VzID0gdGhpcy5jb2xsaXNpb25NYXRyaXg7CiAgICAgIHRoaXMuY29sbGlzaW9uTWF0cml4ID0gdGVtcDsKICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXgucmVzZXQoKTsKICAgICAgdGhpcy5ib2R5T3ZlcmxhcEtlZXBlci50aWNrKCk7CiAgICAgIHRoaXMuc2hhcGVPdmVybGFwS2VlcGVyLnRpY2soKTsKICAgIH0KICAgIC8qKgogICAgICogQWRkIGEgY29uc3RyYWludCB0byB0aGUgc2ltdWxhdGlvbi4KICAgICAqLwoKCiAgICBhZGRDb25zdHJhaW50KGMpIHsKICAgICAgdGhpcy5jb25zdHJhaW50cy5wdXNoKGMpOwogICAgfQogICAgLyoqCiAgICAgKiBSZW1vdmVzIGEgY29uc3RyYWludAogICAgICovCgoKICAgIHJlbW92ZUNvbnN0cmFpbnQoYykgewogICAgICBjb25zdCBpZHggPSB0aGlzLmNvbnN0cmFpbnRzLmluZGV4T2YoYyk7CgogICAgICBpZiAoaWR4ICE9PSAtMSkgewogICAgICAgIHRoaXMuY29uc3RyYWludHMuc3BsaWNlKGlkeCwgMSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmF5Y2FzdCB0ZXN0CiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgLnJheWNhc3RBbGwsIC5yYXljYXN0Q2xvc2VzdCBvciAucmF5Y2FzdEFueSBpbnN0ZWFkLgogICAgICovCgoKICAgIHJheVRlc3QoZnJvbSwgdG8sIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUmF5Y2FzdFJlc3VsdCkgewogICAgICAgIC8vIERvIHJheWNhc3RDbG9zZXN0CiAgICAgICAgdGhpcy5yYXljYXN0Q2xvc2VzdChmcm9tLCB0bywgewogICAgICAgICAgc2tpcEJhY2tmYWNlczogdHJ1ZQogICAgICAgIH0sIHJlc3VsdCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gRG8gcmF5Y2FzdEFsbAogICAgICAgIHRoaXMucmF5Y2FzdEFsbChmcm9tLCB0bywgewogICAgICAgICAgc2tpcEJhY2tmYWNlczogdHJ1ZQogICAgICAgIH0sIHJlc3VsdCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmF5IGNhc3QgYWdhaW5zdCBhbGwgYm9kaWVzLiBUaGUgcHJvdmlkZWQgY2FsbGJhY2sgd2lsbCBiZSBleGVjdXRlZCBmb3IgZWFjaCBoaXQgd2l0aCBhIFJheWNhc3RSZXN1bHQgYXMgc2luZ2xlIGFyZ3VtZW50LgogICAgICogQHJldHVybiBUcnVlIGlmIGFueSBib2R5IHdhcyBoaXQuCiAgICAgKi8KCgogICAgcmF5Y2FzdEFsbChmcm9tLCB0bywgb3B0aW9ucywgY2FsbGJhY2spIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgb3B0aW9ucy5tb2RlID0gUmF5LkFMTDsKICAgICAgb3B0aW9ucy5mcm9tID0gZnJvbTsKICAgICAgb3B0aW9ucy50byA9IHRvOwogICAgICBvcHRpb25zLmNhbGxiYWNrID0gY2FsbGJhY2s7CiAgICAgIHJldHVybiB0bXBSYXkuaW50ZXJzZWN0V29ybGQodGhpcywgb3B0aW9ucyk7CiAgICB9CiAgICAvKioKICAgICAqIFJheSBjYXN0LCBhbmQgc3RvcCBhdCB0aGUgZmlyc3QgcmVzdWx0LiBOb3RlIHRoYXQgdGhlIG9yZGVyIGlzIHJhbmRvbSAtIGJ1dCB0aGUgbWV0aG9kIGlzIGZhc3QuCiAgICAgKiBAcmV0dXJuIFRydWUgaWYgYW55IGJvZHkgd2FzIGhpdC4KICAgICAqLwoKCiAgICByYXljYXN0QW55KGZyb20sIHRvLCBvcHRpb25zLCByZXN1bHQpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgb3B0aW9ucy5tb2RlID0gUmF5LkFOWTsKICAgICAgb3B0aW9ucy5mcm9tID0gZnJvbTsKICAgICAgb3B0aW9ucy50byA9IHRvOwogICAgICBvcHRpb25zLnJlc3VsdCA9IHJlc3VsdDsKICAgICAgcmV0dXJuIHRtcFJheS5pbnRlcnNlY3RXb3JsZCh0aGlzLCBvcHRpb25zKTsKICAgIH0KICAgIC8qKgogICAgICogUmF5IGNhc3QsIGFuZCByZXR1cm4gaW5mb3JtYXRpb24gb2YgdGhlIGNsb3Nlc3QgaGl0LgogICAgICogQHJldHVybiBUcnVlIGlmIGFueSBib2R5IHdhcyBoaXQuCiAgICAgKi8KCgogICAgcmF5Y2FzdENsb3Nlc3QoZnJvbSwgdG8sIG9wdGlvbnMsIHJlc3VsdCkgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBvcHRpb25zLm1vZGUgPSBSYXkuQ0xPU0VTVDsKICAgICAgb3B0aW9ucy5mcm9tID0gZnJvbTsKICAgICAgb3B0aW9ucy50byA9IHRvOwogICAgICBvcHRpb25zLnJlc3VsdCA9IHJlc3VsdDsKICAgICAgcmV0dXJuIHRtcFJheS5pbnRlcnNlY3RXb3JsZCh0aGlzLCBvcHRpb25zKTsKICAgIH0KICAgIC8qKgogICAgICogQWRkIGEgcmlnaWQgYm9keSB0byB0aGUgc2ltdWxhdGlvbi4KICAgICAqIEB0b2RvIElmIHRoZSBzaW11bGF0aW9uIGhhcyBub3QgeWV0IHN0YXJ0ZWQsIHdoeSByZWNyZXRlIGFuZCBjb3B5IGFycmF5cyBmb3IgZWFjaCBib2R5PyBBY2N1bXVsYXRlIGluIGR5bmFtaWMgYXJyYXlzIGluIHRoaXMgY2FzZS4KICAgICAqIEB0b2RvIEFkZGluZyBhbiBhcnJheSBvZiBib2RpZXMgc2hvdWxkIGJlIHBvc3NpYmxlLiBUaGlzIHdvdWxkIHNhdmUgc29tZSBsb29wcyB0b28KICAgICAqLwoKCiAgICBhZGRCb2R5KGJvZHkpIHsKICAgICAgaWYgKHRoaXMuYm9kaWVzLmluY2x1ZGVzKGJvZHkpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBib2R5LmluZGV4ID0gdGhpcy5ib2RpZXMubGVuZ3RoOwogICAgICB0aGlzLmJvZGllcy5wdXNoKGJvZHkpOwogICAgICBib2R5LndvcmxkID0gdGhpczsKICAgICAgYm9keS5pbml0UG9zaXRpb24uY29weShib2R5LnBvc2l0aW9uKTsKICAgICAgYm9keS5pbml0VmVsb2NpdHkuY29weShib2R5LnZlbG9jaXR5KTsKICAgICAgYm9keS50aW1lTGFzdFNsZWVweSA9IHRoaXMudGltZTsKCiAgICAgIGlmIChib2R5IGluc3RhbmNlb2YgQm9keSkgewogICAgICAgIGJvZHkuaW5pdEFuZ3VsYXJWZWxvY2l0eS5jb3B5KGJvZHkuYW5ndWxhclZlbG9jaXR5KTsKICAgICAgICBib2R5LmluaXRRdWF0ZXJuaW9uLmNvcHkoYm9keS5xdWF0ZXJuaW9uKTsKICAgICAgfQoKICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXguc2V0TnVtT2JqZWN0cyh0aGlzLmJvZGllcy5sZW5ndGgpOwogICAgICB0aGlzLmFkZEJvZHlFdmVudC5ib2R5ID0gYm9keTsKICAgICAgdGhpcy5pZFRvQm9keU1hcFtib2R5LmlkXSA9IGJvZHk7CiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCh0aGlzLmFkZEJvZHlFdmVudCk7CiAgICB9CiAgICAvKioKICAgICAqIFJlbW92ZSBhIHJpZ2lkIGJvZHkgZnJvbSB0aGUgc2ltdWxhdGlvbi4KICAgICAqLwoKCiAgICByZW1vdmVCb2R5KGJvZHkpIHsKICAgICAgYm9keS53b3JsZCA9IG51bGw7CiAgICAgIGNvbnN0IG4gPSB0aGlzLmJvZGllcy5sZW5ndGggLSAxOwogICAgICBjb25zdCBib2RpZXMgPSB0aGlzLmJvZGllczsKICAgICAgY29uc3QgaWR4ID0gYm9kaWVzLmluZGV4T2YoYm9keSk7CgogICAgICBpZiAoaWR4ICE9PSAtMSkgewogICAgICAgIGJvZGllcy5zcGxpY2UoaWR4LCAxKTsgLy8gVG9kbzogc2hvdWxkIHVzZSBhIGdhcmJhZ2UgZnJlZSBtZXRob2QKICAgICAgICAvLyBSZWNvbXB1dGUgaW5kZXgKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGJvZGllcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgYm9kaWVzW2ldLmluZGV4ID0gaTsKICAgICAgICB9CgogICAgICAgIHRoaXMuY29sbGlzaW9uTWF0cml4LnNldE51bU9iamVjdHMobik7CiAgICAgICAgdGhpcy5yZW1vdmVCb2R5RXZlbnQuYm9keSA9IGJvZHk7CiAgICAgICAgZGVsZXRlIHRoaXMuaWRUb0JvZHlNYXBbYm9keS5pZF07CiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KHRoaXMucmVtb3ZlQm9keUV2ZW50KTsKICAgICAgfQogICAgfQoKICAgIGdldEJvZHlCeUlkKGlkKSB7CiAgICAgIHJldHVybiB0aGlzLmlkVG9Cb2R5TWFwW2lkXTsKICAgIH0KICAgIC8qKgogICAgICogQHRvZG8gTWFrZSBhIGZhc3RlciBtYXAKICAgICAqLwoKCiAgICBnZXRTaGFwZUJ5SWQoaWQpIHsKICAgICAgY29uc3QgYm9kaWVzID0gdGhpcy5ib2RpZXM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJvZGllcy5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IHNoYXBlcyA9IGJvZGllc1tpXS5zaGFwZXM7CgogICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgc2hhcGVzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICBjb25zdCBzaGFwZSA9IHNoYXBlc1tqXTsKCiAgICAgICAgICBpZiAoc2hhcGUuaWQgPT09IGlkKSB7CiAgICAgICAgICAgIHJldHVybiBzaGFwZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgLyoqCiAgICAgKiBBZGRzIGEgY29udGFjdCBtYXRlcmlhbCB0byB0aGUgV29ybGQKICAgICAqLwoKCiAgICBhZGRDb250YWN0TWF0ZXJpYWwoY21hdCkgewogICAgICAvLyBBZGQgY29udGFjdCBtYXRlcmlhbAogICAgICB0aGlzLmNvbnRhY3RtYXRlcmlhbHMucHVzaChjbWF0KTsgLy8gQWRkIGN1cnJlbnQgY29udGFjdCBtYXRlcmlhbCB0byB0aGUgbWF0ZXJpYWwgdGFibGUKCiAgICAgIHRoaXMuY29udGFjdE1hdGVyaWFsVGFibGUuc2V0KGNtYXQubWF0ZXJpYWxzWzBdLmlkLCBjbWF0Lm1hdGVyaWFsc1sxXS5pZCwgY21hdCk7CiAgICB9CiAgICAvKioKICAgICAqIFJlbW92ZXMgYSBjb250YWN0IG1hdGVyaWFsIGZyb20gdGhlIFdvcmxkLgogICAgICovCgoKICAgIHJlbW92ZUNvbnRhY3RNYXRlcmlhbChjbWF0KSB7CiAgICAgIGNvbnN0IGlkeCA9IHRoaXMuY29udGFjdG1hdGVyaWFscy5pbmRleE9mKGNtYXQpOwoKICAgICAgaWYgKGlkeCA9PT0gLTEpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuY29udGFjdG1hdGVyaWFscy5zcGxpY2UoaWR4LCAxKTsKICAgICAgdGhpcy5jb250YWN0TWF0ZXJpYWxUYWJsZS5kZWxldGUoY21hdC5tYXRlcmlhbHNbMF0uaWQsIGNtYXQubWF0ZXJpYWxzWzFdLmlkKTsKICAgIH0KICAgIC8qKgogICAgICogU3RlcCB0aGUgc2ltdWxhdGlvbiBmb3J3YXJkIGtlZXBpbmcgdHJhY2sgb2YgbGFzdCBjYWxsZWQgdGltZQogICAgICogdG8gYmUgYWJsZSB0byBzdGVwIHRoZSB3b3JsZCBhdCBhIGZpeGVkIHJhdGUsIGluZGVwZW5kZW50bHkgb2YgZnJhbWVyYXRlLgogICAgICoKICAgICAqIEBwYXJhbSBkdCBUaGUgZml4ZWQgdGltZSBzdGVwIHNpemUgdG8gdXNlIChkZWZhdWx0OiAxIC8gNjApLgogICAgICogQHBhcmFtIG1heFN1YlN0ZXBzIE1heGltdW0gbnVtYmVyIG9mIGZpeGVkIHN0ZXBzIHRvIHRha2UgcGVyIGZ1bmN0aW9uIGNhbGwgKGRlZmF1bHQ6IDEwKS4KICAgICAqIEBzZWUgaHR0cHM6Ly9nYWZmZXJvbmdhbWVzLmNvbS9wb3N0L2ZpeF95b3VyX3RpbWVzdGVwLwogICAgICogQGV4YW1wbGUKICAgICAqICAgICAvLyBSdW4gdGhlIHNpbXVsYXRpb24gaW5kZXBlbmRlbnRseSBvZiBmcmFtZXJhdGUgZXZlcnkgMSAvIDYwIG1zCiAgICAgKiAgICAgd29ybGQuZml4ZWRTdGVwKCkKICAgICAqLwoKCiAgICBmaXhlZFN0ZXAoZHQsIG1heFN1YlN0ZXBzKSB7CiAgICAgIGlmIChkdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgZHQgPSAxIC8gNjA7CiAgICAgIH0KCiAgICAgIGlmIChtYXhTdWJTdGVwcyA9PT0gdm9pZCAwKSB7CiAgICAgICAgbWF4U3ViU3RlcHMgPSAxMDsKICAgICAgfQoKICAgICAgY29uc3QgdGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC8gMTAwMDsgLy8gc2Vjb25kcwoKICAgICAgaWYgKCF0aGlzLmxhc3RDYWxsVGltZSkgewogICAgICAgIHRoaXMuc3RlcChkdCwgdW5kZWZpbmVkLCBtYXhTdWJTdGVwcyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgdGltZVNpbmNlTGFzdENhbGxlZCA9IHRpbWUgLSB0aGlzLmxhc3RDYWxsVGltZTsKICAgICAgICB0aGlzLnN0ZXAoZHQsIHRpbWVTaW5jZUxhc3RDYWxsZWQsIG1heFN1YlN0ZXBzKTsKICAgICAgfQoKICAgICAgdGhpcy5sYXN0Q2FsbFRpbWUgPSB0aW1lOwogICAgfQogICAgLyoqCiAgICAgKiBTdGVwIHRoZSBwaHlzaWNzIHdvcmxkIGZvcndhcmQgaW4gdGltZS4KICAgICAqCiAgICAgKiBUaGVyZSBhcmUgdHdvIG1vZGVzLiBUaGUgc2ltcGxlIG1vZGUgaXMgZml4ZWQgdGltZXN0ZXBwaW5nIHdpdGhvdXQgaW50ZXJwb2xhdGlvbi4gSW4gdGhpcyBjYXNlIHlvdSBvbmx5IHVzZSB0aGUgZmlyc3QgYXJndW1lbnQuIFRoZSBzZWNvbmQgY2FzZSB1c2VzIGludGVycG9sYXRpb24uIEluIHRoYXQgeW91IGFsc28gcHJvdmlkZSB0aGUgdGltZSBzaW5jZSB0aGUgZnVuY3Rpb24gd2FzIGxhc3QgdXNlZCwgYXMgd2VsbCBhcyB0aGUgbWF4aW11bSBmaXhlZCB0aW1lc3RlcHMgdG8gdGFrZS4KICAgICAqCiAgICAgKiBAcGFyYW0gZHQgVGhlIGZpeGVkIHRpbWUgc3RlcCBzaXplIHRvIHVzZS4KICAgICAqIEBwYXJhbSB0aW1lU2luY2VMYXN0Q2FsbGVkIFRoZSB0aW1lIGVsYXBzZWQgc2luY2UgdGhlIGZ1bmN0aW9uIHdhcyBsYXN0IGNhbGxlZC4KICAgICAqIEBwYXJhbSBtYXhTdWJTdGVwcyBNYXhpbXVtIG51bWJlciBvZiBmaXhlZCBzdGVwcyB0byB0YWtlIHBlciBmdW5jdGlvbiBjYWxsIChkZWZhdWx0OiAxMCkuCiAgICAgKiBAc2VlIGh0dHBzOi8vd2ViLmFyY2hpdmUub3JnL3dlYi8yMDE4MDQyNjE1NDUzMS9odHRwOi8vYnVsbGV0cGh5c2ljcy5vcmcvbWVkaWF3aWtpLTEuNS44L2luZGV4LnBocC9TdGVwcGluZ19UaGVfV29ybGQjV2hhdF9kb190aGVfcGFyYW1ldGVyc190b19idER5bmFtaWNzV29ybGQ6OnN0ZXBTaW11bGF0aW9uX21lYW4uM0YKICAgICAqIEBleGFtcGxlCiAgICAgKiAgICAgLy8gZml4ZWQgdGltZXN0ZXBwaW5nIHdpdGhvdXQgaW50ZXJwb2xhdGlvbgogICAgICogICAgIHdvcmxkLnN0ZXAoMSAvIDYwKQogICAgICovCgoKICAgIHN0ZXAoZHQsIHRpbWVTaW5jZUxhc3RDYWxsZWQsIG1heFN1YlN0ZXBzKSB7CiAgICAgIGlmIChtYXhTdWJTdGVwcyA9PT0gdm9pZCAwKSB7CiAgICAgICAgbWF4U3ViU3RlcHMgPSAxMDsKICAgICAgfQoKICAgICAgaWYgKHRpbWVTaW5jZUxhc3RDYWxsZWQgPT09IHVuZGVmaW5lZCkgewogICAgICAgIC8vIEZpeGVkLCBzaW1wbGUgc3RlcHBpbmcKICAgICAgICB0aGlzLmludGVybmFsU3RlcChkdCk7IC8vIEluY3JlbWVudCB0aW1lCgogICAgICAgIHRoaXMudGltZSArPSBkdDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmFjY3VtdWxhdG9yICs9IHRpbWVTaW5jZUxhc3RDYWxsZWQ7CiAgICAgICAgY29uc3QgdDAgPSBwZXJmb3JtYW5jZS5ub3coKTsKICAgICAgICBsZXQgc3Vic3RlcHMgPSAwOwoKICAgICAgICB3aGlsZSAodGhpcy5hY2N1bXVsYXRvciA+PSBkdCAmJiBzdWJzdGVwcyA8IG1heFN1YlN0ZXBzKSB7CiAgICAgICAgICAvLyBEbyBmaXhlZCBzdGVwcyB0byBjYXRjaCB1cAogICAgICAgICAgdGhpcy5pbnRlcm5hbFN0ZXAoZHQpOwogICAgICAgICAgdGhpcy5hY2N1bXVsYXRvciAtPSBkdDsKICAgICAgICAgIHN1YnN0ZXBzKys7CgogICAgICAgICAgaWYgKHBlcmZvcm1hbmNlLm5vdygpIC0gdDAgPiBkdCAqIDEwMDApIHsKICAgICAgICAgICAgLy8gVGhlIGZyYW1lcmF0ZSBpcyBub3QgaW50ZXJhY3RpdmUgYW55bW9yZS4KICAgICAgICAgICAgLy8gV2UgYXJlIGJlbG93IHRoZSB0YXJnZXQgZnJhbWVyYXRlLgogICAgICAgICAgICAvLyBCZXR0ZXIgYmFpbCBvdXQuCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0gLy8gUmVtb3ZlIHRoZSBleGNlc3MgYWNjdW11bGF0b3IsIHNpbmNlIHdlIG1heSBub3QKICAgICAgICAvLyBoYXZlIGhhZCBlbm91Z2ggc3Vic3RlcHMgYXZhaWxhYmxlIHRvIGNhdGNoIHVwCgoKICAgICAgICB0aGlzLmFjY3VtdWxhdG9yID0gdGhpcy5hY2N1bXVsYXRvciAlIGR0OwogICAgICAgIGNvbnN0IHQgPSB0aGlzLmFjY3VtdWxhdG9yIC8gZHQ7CgogICAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSB0aGlzLmJvZGllcy5sZW5ndGg7IGorKykgewogICAgICAgICAgY29uc3QgYiA9IHRoaXMuYm9kaWVzW2pdOwogICAgICAgICAgYi5wcmV2aW91c1Bvc2l0aW9uLmxlcnAoYi5wb3NpdGlvbiwgdCwgYi5pbnRlcnBvbGF0ZWRQb3NpdGlvbik7CiAgICAgICAgICBiLnByZXZpb3VzUXVhdGVybmlvbi5zbGVycChiLnF1YXRlcm5pb24sIHQsIGIuaW50ZXJwb2xhdGVkUXVhdGVybmlvbik7CiAgICAgICAgICBiLnByZXZpb3VzUXVhdGVybmlvbi5ub3JtYWxpemUoKTsKICAgICAgICB9CgogICAgICAgIHRoaXMudGltZSArPSB0aW1lU2luY2VMYXN0Q2FsbGVkOwogICAgICB9CiAgICB9CgogICAgaW50ZXJuYWxTdGVwKGR0KSB7CiAgICAgIHRoaXMuZHQgPSBkdDsKICAgICAgY29uc3QgY29udGFjdHMgPSB0aGlzLmNvbnRhY3RzOwogICAgICBjb25zdCBwMSA9IFdvcmxkX3N0ZXBfcDE7CiAgICAgIGNvbnN0IHAyID0gV29ybGRfc3RlcF9wMjsKICAgICAgY29uc3QgTiA9IHRoaXMuYm9kaWVzLmxlbmd0aDsKICAgICAgY29uc3QgYm9kaWVzID0gdGhpcy5ib2RpZXM7CiAgICAgIGNvbnN0IHNvbHZlciA9IHRoaXMuc29sdmVyOwogICAgICBjb25zdCBncmF2aXR5ID0gdGhpcy5ncmF2aXR5OwogICAgICBjb25zdCBkb1Byb2ZpbGluZyA9IHRoaXMuZG9Qcm9maWxpbmc7CiAgICAgIGNvbnN0IHByb2ZpbGUgPSB0aGlzLnByb2ZpbGU7CiAgICAgIGNvbnN0IERZTkFNSUMgPSBCb2R5LkRZTkFNSUM7CiAgICAgIGxldCBwcm9maWxpbmdTdGFydCA9IC1JbmZpbml0eTsKICAgICAgY29uc3QgY29uc3RyYWludHMgPSB0aGlzLmNvbnN0cmFpbnRzOwogICAgICBjb25zdCBmcmljdGlvbkVxdWF0aW9uUG9vbCA9IFdvcmxkX3N0ZXBfZnJpY3Rpb25FcXVhdGlvblBvb2w7CiAgICAgIGdyYXZpdHkubGVuZ3RoKCk7CiAgICAgIGNvbnN0IGd4ID0gZ3Jhdml0eS54OwogICAgICBjb25zdCBneSA9IGdyYXZpdHkueTsKICAgICAgY29uc3QgZ3ogPSBncmF2aXR5Lno7CiAgICAgIGxldCBpID0gMDsKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGluZ1N0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7CiAgICAgIH0gLy8gQWRkIGdyYXZpdHkgdG8gYWxsIG9iamVjdHMKCgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTsKCiAgICAgICAgaWYgKGJpLnR5cGUgPT09IERZTkFNSUMpIHsKICAgICAgICAgIC8vIE9ubHkgZm9yIGR5bmFtaWMgYm9kaWVzCiAgICAgICAgICBjb25zdCBmID0gYmkuZm9yY2U7CiAgICAgICAgICBjb25zdCBtID0gYmkubWFzczsKICAgICAgICAgIGYueCArPSBtICogZ3g7CiAgICAgICAgICBmLnkgKz0gbSAqIGd5OwogICAgICAgICAgZi56ICs9IG0gKiBnejsKICAgICAgICB9CiAgICAgIH0gLy8gVXBkYXRlIHN1YnN5c3RlbXMKCgogICAgICBmb3IgKGxldCBpID0gMCwgTnN1YnN5c3RlbXMgPSB0aGlzLnN1YnN5c3RlbXMubGVuZ3RoOyBpICE9PSBOc3Vic3lzdGVtczsgaSsrKSB7CiAgICAgICAgdGhpcy5zdWJzeXN0ZW1zW2ldLnVwZGF0ZSgpOwogICAgICB9IC8vIENvbGxpc2lvbiBkZXRlY3Rpb24KCgogICAgICBpZiAoZG9Qcm9maWxpbmcpIHsKICAgICAgICBwcm9maWxpbmdTdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgICB9CgogICAgICBwMS5sZW5ndGggPSAwOyAvLyBDbGVhbiB1cCBwYWlyIGFycmF5cyBmcm9tIGxhc3Qgc3RlcAoKICAgICAgcDIubGVuZ3RoID0gMDsKICAgICAgdGhpcy5icm9hZHBoYXNlLmNvbGxpc2lvblBhaXJzKHRoaXMsIHAxLCBwMik7CgogICAgICBpZiAoZG9Qcm9maWxpbmcpIHsKICAgICAgICBwcm9maWxlLmJyb2FkcGhhc2UgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHByb2ZpbGluZ1N0YXJ0OwogICAgICB9IC8vIFJlbW92ZSBjb25zdHJhaW5lZCBwYWlycyB3aXRoIGNvbGxpZGVDb25uZWN0ZWQgPT0gZmFsc2UKCgogICAgICBsZXQgTmNvbnN0cmFpbnRzID0gY29uc3RyYWludHMubGVuZ3RoOwoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTmNvbnN0cmFpbnRzOyBpKyspIHsKICAgICAgICBjb25zdCBjID0gY29uc3RyYWludHNbaV07CgogICAgICAgIGlmICghYy5jb2xsaWRlQ29ubmVjdGVkKSB7CiAgICAgICAgICBmb3IgKGxldCBqID0gcDEubGVuZ3RoIC0gMTsgaiA+PSAwOyBqIC09IDEpIHsKICAgICAgICAgICAgaWYgKGMuYm9keUEgPT09IHAxW2pdICYmIGMuYm9keUIgPT09IHAyW2pdIHx8IGMuYm9keUIgPT09IHAxW2pdICYmIGMuYm9keUEgPT09IHAyW2pdKSB7CiAgICAgICAgICAgICAgcDEuc3BsaWNlKGosIDEpOwogICAgICAgICAgICAgIHAyLnNwbGljZShqLCAxKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXhUaWNrKCk7IC8vIEdlbmVyYXRlIGNvbnRhY3RzCgogICAgICBpZiAoZG9Qcm9maWxpbmcpIHsKICAgICAgICBwcm9maWxpbmdTdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgICB9CgogICAgICBjb25zdCBvbGRjb250YWN0cyA9IFdvcmxkX3N0ZXBfb2xkQ29udGFjdHM7CiAgICAgIGNvbnN0IE5vbGRDb250YWN0cyA9IGNvbnRhY3RzLmxlbmd0aDsKCiAgICAgIGZvciAoaSA9IDA7IGkgIT09IE5vbGRDb250YWN0czsgaSsrKSB7CiAgICAgICAgb2xkY29udGFjdHMucHVzaChjb250YWN0c1tpXSk7CiAgICAgIH0KCiAgICAgIGNvbnRhY3RzLmxlbmd0aCA9IDA7IC8vIFRyYW5zZmVyIEZyaWN0aW9uRXF1YXRpb24gZnJvbSBjdXJyZW50IGxpc3QgdG8gdGhlIHBvb2wgZm9yIHJldXNlCgogICAgICBjb25zdCBOb2xkRnJpY3Rpb25FcXVhdGlvbnMgPSB0aGlzLmZyaWN0aW9uRXF1YXRpb25zLmxlbmd0aDsKCiAgICAgIGZvciAoaSA9IDA7IGkgIT09IE5vbGRGcmljdGlvbkVxdWF0aW9uczsgaSsrKSB7CiAgICAgICAgZnJpY3Rpb25FcXVhdGlvblBvb2wucHVzaCh0aGlzLmZyaWN0aW9uRXF1YXRpb25zW2ldKTsKICAgICAgfQoKICAgICAgdGhpcy5mcmljdGlvbkVxdWF0aW9ucy5sZW5ndGggPSAwOwogICAgICB0aGlzLm5hcnJvd3BoYXNlLmdldENvbnRhY3RzKHAxLCBwMiwgdGhpcywgY29udGFjdHMsIG9sZGNvbnRhY3RzLCAvLyBUbyBiZSByZXVzZWQKICAgICAgdGhpcy5mcmljdGlvbkVxdWF0aW9ucywgZnJpY3Rpb25FcXVhdGlvblBvb2wpOwoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsZS5uYXJyb3dwaGFzZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gcHJvZmlsaW5nU3RhcnQ7CiAgICAgIH0gLy8gTG9vcCBvdmVyIGFsbCBjb2xsaXNpb25zCgoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsaW5nU3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTsKICAgICAgfSAvLyBBZGQgYWxsIGZyaWN0aW9uIGVxcwoKCiAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmZyaWN0aW9uRXF1YXRpb25zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgc29sdmVyLmFkZEVxdWF0aW9uKHRoaXMuZnJpY3Rpb25FcXVhdGlvbnNbaV0pOwogICAgICB9CgogICAgICBjb25zdCBuY29udGFjdHMgPSBjb250YWN0cy5sZW5ndGg7CgogICAgICBmb3IgKGxldCBrID0gMDsgayAhPT0gbmNvbnRhY3RzOyBrKyspIHsKICAgICAgICAvLyBDdXJyZW50IGNvbnRhY3QKICAgICAgICBjb25zdCBjID0gY29udGFjdHNba107IC8vIEdldCBjdXJyZW50IGNvbGxpc2lvbiBpbmRlY2VzCgogICAgICAgIGNvbnN0IGJpID0gYy5iaTsKICAgICAgICBjb25zdCBiaiA9IGMuYmo7CiAgICAgICAgY29uc3Qgc2kgPSBjLnNpOwogICAgICAgIGNvbnN0IHNqID0gYy5zajsgLy8gR2V0IGNvbGxpc2lvbiBwcm9wZXJ0aWVzCgogICAgICAgIGxldCBjbTsKCiAgICAgICAgaWYgKGJpLm1hdGVyaWFsICYmIGJqLm1hdGVyaWFsKSB7CiAgICAgICAgICBjbSA9IHRoaXMuZ2V0Q29udGFjdE1hdGVyaWFsKGJpLm1hdGVyaWFsLCBiai5tYXRlcmlhbCkgfHwgdGhpcy5kZWZhdWx0Q29udGFjdE1hdGVyaWFsOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjbSA9IHRoaXMuZGVmYXVsdENvbnRhY3RNYXRlcmlhbDsKICAgICAgICB9IC8vIGMuZW5hYmxlZCA9IGJpLmNvbGxpc2lvblJlc3BvbnNlICYmIGJqLmNvbGxpc2lvblJlc3BvbnNlICYmIHNpLmNvbGxpc2lvblJlc3BvbnNlICYmIHNqLmNvbGxpc2lvblJlc3BvbnNlOwoKCiAgICAgICAgY20uZnJpY3Rpb247IC8vIGMucmVzdGl0dXRpb24gPSBjbS5yZXN0aXR1dGlvbjsKICAgICAgICAvLyBJZiBmcmljdGlvbiBvciByZXN0aXR1dGlvbiB3ZXJlIHNwZWNpZmllZCBpbiB0aGUgbWF0ZXJpYWwsIHVzZSB0aGVtCgogICAgICAgIGlmIChiaS5tYXRlcmlhbCAmJiBiai5tYXRlcmlhbCkgewogICAgICAgICAgaWYgKGJpLm1hdGVyaWFsLmZyaWN0aW9uID49IDAgJiYgYmoubWF0ZXJpYWwuZnJpY3Rpb24gPj0gMCkgewogICAgICAgICAgICBiaS5tYXRlcmlhbC5mcmljdGlvbiAqIGJqLm1hdGVyaWFsLmZyaWN0aW9uOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChiaS5tYXRlcmlhbC5yZXN0aXR1dGlvbiA+PSAwICYmIGJqLm1hdGVyaWFsLnJlc3RpdHV0aW9uID49IDApIHsKICAgICAgICAgICAgYy5yZXN0aXR1dGlvbiA9IGJpLm1hdGVyaWFsLnJlc3RpdHV0aW9uICogYmoubWF0ZXJpYWwucmVzdGl0dXRpb247CiAgICAgICAgICB9CiAgICAgICAgfSAvLyBjLnNldFNwb29rUGFyYW1zKAogICAgICAgIC8vICAgICAgICAgICBjbS5jb250YWN0RXF1YXRpb25TdGlmZm5lc3MsCiAgICAgICAgLy8gICAgICAgICAgIGNtLmNvbnRhY3RFcXVhdGlvblJlbGF4YXRpb24sCiAgICAgICAgLy8gICAgICAgICAgIGR0CiAgICAgICAgLy8gICAgICAgKTsKCgogICAgICAgIHNvbHZlci5hZGRFcXVhdGlvbihjKTsgLy8gLy8gQWRkIGZyaWN0aW9uIGNvbnN0cmFpbnQgZXF1YXRpb24KICAgICAgICAvLyBpZihtdSA+IDApewogICAgICAgIC8vIAkvLyBDcmVhdGUgMiB0YW5nZW50IGVxdWF0aW9ucwogICAgICAgIC8vIAljb25zdCBtdWcgPSBtdSAqIGdub3JtOwogICAgICAgIC8vIAljb25zdCByZWR1Y2VkTWFzcyA9IChiaS5pbnZNYXNzICsgYmouaW52TWFzcyk7CiAgICAgICAgLy8gCWlmKHJlZHVjZWRNYXNzID4gMCl7CiAgICAgICAgLy8gCQlyZWR1Y2VkTWFzcyA9IDEvcmVkdWNlZE1hc3M7CiAgICAgICAgLy8gCX0KICAgICAgICAvLyAJY29uc3QgcG9vbCA9IGZyaWN0aW9uRXF1YXRpb25Qb29sOwogICAgICAgIC8vIAljb25zdCBjMSA9IHBvb2wubGVuZ3RoID8gcG9vbC5wb3AoKSA6IG5ldyBGcmljdGlvbkVxdWF0aW9uKGJpLGJqLG11ZypyZWR1Y2VkTWFzcyk7CiAgICAgICAgLy8gCWNvbnN0IGMyID0gcG9vbC5sZW5ndGggPyBwb29sLnBvcCgpIDogbmV3IEZyaWN0aW9uRXF1YXRpb24oYmksYmosbXVnKnJlZHVjZWRNYXNzKTsKICAgICAgICAvLyAJdGhpcy5mcmljdGlvbkVxdWF0aW9ucy5wdXNoKGMxLCBjMik7CiAgICAgICAgLy8gCWMxLmJpID0gYzIuYmkgPSBiaTsKICAgICAgICAvLyAJYzEuYmogPSBjMi5iaiA9IGJqOwogICAgICAgIC8vIAljMS5taW5Gb3JjZSA9IGMyLm1pbkZvcmNlID0gLW11ZypyZWR1Y2VkTWFzczsKICAgICAgICAvLyAJYzEubWF4Rm9yY2UgPSBjMi5tYXhGb3JjZSA9IG11ZypyZWR1Y2VkTWFzczsKICAgICAgICAvLyAJLy8gQ29weSBvdmVyIHRoZSByZWxhdGl2ZSB2ZWN0b3JzCiAgICAgICAgLy8gCWMxLnJpLmNvcHkoYy5yaSk7CiAgICAgICAgLy8gCWMxLnJqLmNvcHkoYy5yaik7CiAgICAgICAgLy8gCWMyLnJpLmNvcHkoYy5yaSk7CiAgICAgICAgLy8gCWMyLnJqLmNvcHkoYy5yaik7CiAgICAgICAgLy8gCS8vIENvbnN0cnVjdCB0YW5nZW50cwogICAgICAgIC8vIAljLm5pLnRhbmdlbnRzKGMxLnQsIGMyLnQpOwogICAgICAgIC8vICAgICAgICAgICAvLyBTZXQgc3Bvb2sgcGFyYW1zCiAgICAgICAgLy8gICAgICAgICAgIGMxLnNldFNwb29rUGFyYW1zKGNtLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3MsIGNtLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uLCBkdCk7CiAgICAgICAgLy8gICAgICAgICAgIGMyLnNldFNwb29rUGFyYW1zKGNtLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3MsIGNtLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uLCBkdCk7CiAgICAgICAgLy8gICAgICAgICAgIGMxLmVuYWJsZWQgPSBjMi5lbmFibGVkID0gYy5lbmFibGVkOwogICAgICAgIC8vIAkvLyBBZGQgZXF1YXRpb25zIHRvIHNvbHZlcgogICAgICAgIC8vIAlzb2x2ZXIuYWRkRXF1YXRpb24oYzEpOwogICAgICAgIC8vIAlzb2x2ZXIuYWRkRXF1YXRpb24oYzIpOwogICAgICAgIC8vIH0KCiAgICAgICAgaWYgKGJpLmFsbG93U2xlZXAgJiYgYmkudHlwZSA9PT0gQm9keS5EWU5BTUlDICYmIGJpLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcgJiYgYmouc2xlZXBTdGF0ZSA9PT0gQm9keS5BV0FLRSAmJiBiai50eXBlICE9PSBCb2R5LlNUQVRJQykgewogICAgICAgICAgY29uc3Qgc3BlZWRTcXVhcmVkQiA9IGJqLnZlbG9jaXR5Lmxlbmd0aFNxdWFyZWQoKSArIGJqLmFuZ3VsYXJWZWxvY2l0eS5sZW5ndGhTcXVhcmVkKCk7CiAgICAgICAgICBjb25zdCBzcGVlZExpbWl0U3F1YXJlZEIgPSBiai5zbGVlcFNwZWVkTGltaXQgKiogMjsKCiAgICAgICAgICBpZiAoc3BlZWRTcXVhcmVkQiA+PSBzcGVlZExpbWl0U3F1YXJlZEIgKiAyKSB7CiAgICAgICAgICAgIGJpLndha2VVcEFmdGVyTmFycm93cGhhc2UgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGJqLmFsbG93U2xlZXAgJiYgYmoudHlwZSA9PT0gQm9keS5EWU5BTUlDICYmIGJqLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcgJiYgYmkuc2xlZXBTdGF0ZSA9PT0gQm9keS5BV0FLRSAmJiBiaS50eXBlICE9PSBCb2R5LlNUQVRJQykgewogICAgICAgICAgY29uc3Qgc3BlZWRTcXVhcmVkQSA9IGJpLnZlbG9jaXR5Lmxlbmd0aFNxdWFyZWQoKSArIGJpLmFuZ3VsYXJWZWxvY2l0eS5sZW5ndGhTcXVhcmVkKCk7CiAgICAgICAgICBjb25zdCBzcGVlZExpbWl0U3F1YXJlZEEgPSBiaS5zbGVlcFNwZWVkTGltaXQgKiogMjsKCiAgICAgICAgICBpZiAoc3BlZWRTcXVhcmVkQSA+PSBzcGVlZExpbWl0U3F1YXJlZEEgKiAyKSB7CiAgICAgICAgICAgIGJqLndha2VVcEFmdGVyTmFycm93cGhhc2UgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0gLy8gTm93IHdlIGtub3cgdGhhdCBpIGFuZCBqIGFyZSBpbiBjb250YWN0LiBTZXQgY29sbGlzaW9uIG1hdHJpeCBzdGF0ZQoKCiAgICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXguc2V0KGJpLCBiaiwgdHJ1ZSk7CgogICAgICAgIGlmICghdGhpcy5jb2xsaXNpb25NYXRyaXhQcmV2aW91cy5nZXQoYmksIGJqKSkgewogICAgICAgICAgLy8gRmlyc3QgY29udGFjdCEKICAgICAgICAgIC8vIFdlIHJldXNlIHRoZSBjb2xsaWRlRXZlbnQgb2JqZWN0LCBvdGhlcndpc2Ugd2Ugd2lsbCBlbmQgdXAgY3JlYXRpbmcgbmV3IG9iamVjdHMgZm9yIGVhY2ggbmV3IGNvbnRhY3QsIGV2ZW4gaWYgdGhlcmUncyBubyBldmVudCBsaXN0ZW5lciBhdHRhY2hlZC4KICAgICAgICAgIFdvcmxkX3N0ZXBfY29sbGlkZUV2ZW50LmJvZHkgPSBiajsKICAgICAgICAgIFdvcmxkX3N0ZXBfY29sbGlkZUV2ZW50LmNvbnRhY3QgPSBjOwogICAgICAgICAgYmkuZGlzcGF0Y2hFdmVudChXb3JsZF9zdGVwX2NvbGxpZGVFdmVudCk7CiAgICAgICAgICBXb3JsZF9zdGVwX2NvbGxpZGVFdmVudC5ib2R5ID0gYmk7CiAgICAgICAgICBiai5kaXNwYXRjaEV2ZW50KFdvcmxkX3N0ZXBfY29sbGlkZUV2ZW50KTsKICAgICAgICB9CgogICAgICAgIHRoaXMuYm9keU92ZXJsYXBLZWVwZXIuc2V0KGJpLmlkLCBiai5pZCk7CiAgICAgICAgdGhpcy5zaGFwZU92ZXJsYXBLZWVwZXIuc2V0KHNpLmlkLCBzai5pZCk7CiAgICAgIH0KCiAgICAgIHRoaXMuZW1pdENvbnRhY3RFdmVudHMoKTsKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGUubWFrZUNvbnRhY3RDb25zdHJhaW50cyA9IHBlcmZvcm1hbmNlLm5vdygpIC0gcHJvZmlsaW5nU3RhcnQ7CiAgICAgICAgcHJvZmlsaW5nU3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTsKICAgICAgfSAvLyBXYWtlIHVwIGJvZGllcwoKCiAgICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGJpID0gYm9kaWVzW2ldOwoKICAgICAgICBpZiAoYmkud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSkgewogICAgICAgICAgYmkud2FrZVVwKCk7CiAgICAgICAgICBiaS53YWtlVXBBZnRlck5hcnJvd3BoYXNlID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9IC8vIEFkZCB1c2VyLWFkZGVkIGNvbnN0cmFpbnRzCgoKICAgICAgTmNvbnN0cmFpbnRzID0gY29uc3RyYWludHMubGVuZ3RoOwoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTmNvbnN0cmFpbnRzOyBpKyspIHsKICAgICAgICBjb25zdCBjID0gY29uc3RyYWludHNbaV07CiAgICAgICAgYy51cGRhdGUoKTsKCiAgICAgICAgZm9yIChsZXQgaiA9IDAsIE5lcSA9IGMuZXF1YXRpb25zLmxlbmd0aDsgaiAhPT0gTmVxOyBqKyspIHsKICAgICAgICAgIGNvbnN0IGVxID0gYy5lcXVhdGlvbnNbal07CiAgICAgICAgICBzb2x2ZXIuYWRkRXF1YXRpb24oZXEpOwogICAgICAgIH0KICAgICAgfSAvLyBTb2x2ZSB0aGUgY29uc3RyYWluZWQgc3lzdGVtCgoKICAgICAgc29sdmVyLnNvbHZlKGR0LCB0aGlzKTsKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGUuc29sdmUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHByb2ZpbGluZ1N0YXJ0OwogICAgICB9IC8vIFJlbW92ZSBhbGwgY29udGFjdHMgZnJvbSBzb2x2ZXIKCgogICAgICBzb2x2ZXIucmVtb3ZlQWxsRXF1YXRpb25zKCk7IC8vIEFwcGx5IGRhbXBpbmcsIHNlZSBodHRwOi8vY29kZS5nb29nbGUuY29tL3AvYnVsbGV0L2lzc3Vlcy9kZXRhaWw/aWQ9NzQgZm9yIGRldGFpbHMKCiAgICAgIGNvbnN0IHBvdyA9IE1hdGgucG93OwoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgYmkgPSBib2RpZXNbaV07CgogICAgICAgIGlmIChiaS50eXBlICYgRFlOQU1JQykgewogICAgICAgICAgLy8gT25seSBmb3IgZHluYW1pYyBib2RpZXMKICAgICAgICAgIGNvbnN0IGxkID0gcG93KDEuMCAtIGJpLmxpbmVhckRhbXBpbmcsIGR0KTsKICAgICAgICAgIGNvbnN0IHYgPSBiaS52ZWxvY2l0eTsKICAgICAgICAgIHYuc2NhbGUobGQsIHYpOwogICAgICAgICAgY29uc3QgYXYgPSBiaS5hbmd1bGFyVmVsb2NpdHk7CgogICAgICAgICAgaWYgKGF2KSB7CiAgICAgICAgICAgIGNvbnN0IGFkID0gcG93KDEuMCAtIGJpLmFuZ3VsYXJEYW1waW5nLCBkdCk7CiAgICAgICAgICAgIGF2LnNjYWxlKGFkLCBhdik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoV29ybGRfc3RlcF9wcmVTdGVwRXZlbnQpOyAvLyBMZWFwIGZyb2cKICAgICAgLy8gdm5ldyA9IHYgKyBoKmYvbQogICAgICAvLyB4bmV3ID0geCArIGgqdm5ldwoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsaW5nU3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTsKICAgICAgfQoKICAgICAgY29uc3Qgc3RlcG51bWJlciA9IHRoaXMuc3RlcG51bWJlcjsKICAgICAgY29uc3QgcXVhdE5vcm1hbGl6ZSA9IHN0ZXBudW1iZXIgJSAodGhpcy5xdWF0Tm9ybWFsaXplU2tpcCArIDEpID09PSAwOwogICAgICBjb25zdCBxdWF0Tm9ybWFsaXplRmFzdCA9IHRoaXMucXVhdE5vcm1hbGl6ZUZhc3Q7CgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBib2RpZXNbaV0uaW50ZWdyYXRlKGR0LCBxdWF0Tm9ybWFsaXplLCBxdWF0Tm9ybWFsaXplRmFzdCk7CiAgICAgIH0KCiAgICAgIHRoaXMuY2xlYXJGb3JjZXMoKTsKICAgICAgdGhpcy5icm9hZHBoYXNlLmRpcnR5ID0gdHJ1ZTsKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGUuaW50ZWdyYXRlID0gcGVyZm9ybWFuY2Uubm93KCkgLSBwcm9maWxpbmdTdGFydDsKICAgICAgfSAvLyBVcGRhdGUgc3RlcCBudW1iZXIKCgogICAgICB0aGlzLnN0ZXBudW1iZXIgKz0gMTsKICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KFdvcmxkX3N0ZXBfcG9zdFN0ZXBFdmVudCk7IC8vIFNsZWVwaW5nIHVwZGF0ZQoKICAgICAgbGV0IGhhc0FjdGl2ZUJvZGllcyA9IHRydWU7CgogICAgICBpZiAodGhpcy5hbGxvd1NsZWVwKSB7CiAgICAgICAgaGFzQWN0aXZlQm9kaWVzID0gZmFsc2U7CgogICAgICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgICAgY29uc3QgYmkgPSBib2RpZXNbaV07CiAgICAgICAgICBiaS5zbGVlcFRpY2sodGhpcy50aW1lKTsKCiAgICAgICAgICBpZiAoYmkuc2xlZXBTdGF0ZSAhPT0gQm9keS5TTEVFUElORykgewogICAgICAgICAgICBoYXNBY3RpdmVCb2RpZXMgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5oYXNBY3RpdmVCb2RpZXMgPSBoYXNBY3RpdmVCb2RpZXM7CiAgICB9CgogICAgZW1pdENvbnRhY3RFdmVudHMoKSB7CiAgICAgIGNvbnN0IGhhc0JlZ2luQ29udGFjdCA9IHRoaXMuaGFzQW55RXZlbnRMaXN0ZW5lcignYmVnaW5Db250YWN0Jyk7CiAgICAgIGNvbnN0IGhhc0VuZENvbnRhY3QgPSB0aGlzLmhhc0FueUV2ZW50TGlzdGVuZXIoJ2VuZENvbnRhY3QnKTsKCiAgICAgIGlmIChoYXNCZWdpbkNvbnRhY3QgfHwgaGFzRW5kQ29udGFjdCkgewogICAgICAgIHRoaXMuYm9keU92ZXJsYXBLZWVwZXIuZ2V0RGlmZihhZGRpdGlvbnMsIHJlbW92YWxzKTsKICAgICAgfQoKICAgICAgaWYgKGhhc0JlZ2luQ29udGFjdCkgewogICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gYWRkaXRpb25zLmxlbmd0aDsgaSA8IGw7IGkgKz0gMikgewogICAgICAgICAgYmVnaW5Db250YWN0RXZlbnQuYm9keUEgPSB0aGlzLmdldEJvZHlCeUlkKGFkZGl0aW9uc1tpXSk7CiAgICAgICAgICBiZWdpbkNvbnRhY3RFdmVudC5ib2R5QiA9IHRoaXMuZ2V0Qm9keUJ5SWQoYWRkaXRpb25zW2kgKyAxXSk7CiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoYmVnaW5Db250YWN0RXZlbnQpOwogICAgICAgIH0KCiAgICAgICAgYmVnaW5Db250YWN0RXZlbnQuYm9keUEgPSBiZWdpbkNvbnRhY3RFdmVudC5ib2R5QiA9IG51bGw7CiAgICAgIH0KCiAgICAgIGlmIChoYXNFbmRDb250YWN0KSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSByZW1vdmFscy5sZW5ndGg7IGkgPCBsOyBpICs9IDIpIHsKICAgICAgICAgIGVuZENvbnRhY3RFdmVudC5ib2R5QSA9IHRoaXMuZ2V0Qm9keUJ5SWQocmVtb3ZhbHNbaV0pOwogICAgICAgICAgZW5kQ29udGFjdEV2ZW50LmJvZHlCID0gdGhpcy5nZXRCb2R5QnlJZChyZW1vdmFsc1tpICsgMV0pOwogICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGVuZENvbnRhY3RFdmVudCk7CiAgICAgICAgfQoKICAgICAgICBlbmRDb250YWN0RXZlbnQuYm9keUEgPSBlbmRDb250YWN0RXZlbnQuYm9keUIgPSBudWxsOwogICAgICB9CgogICAgICBhZGRpdGlvbnMubGVuZ3RoID0gcmVtb3ZhbHMubGVuZ3RoID0gMDsKICAgICAgY29uc3QgaGFzQmVnaW5TaGFwZUNvbnRhY3QgPSB0aGlzLmhhc0FueUV2ZW50TGlzdGVuZXIoJ2JlZ2luU2hhcGVDb250YWN0Jyk7CiAgICAgIGNvbnN0IGhhc0VuZFNoYXBlQ29udGFjdCA9IHRoaXMuaGFzQW55RXZlbnRMaXN0ZW5lcignZW5kU2hhcGVDb250YWN0Jyk7CgogICAgICBpZiAoaGFzQmVnaW5TaGFwZUNvbnRhY3QgfHwgaGFzRW5kU2hhcGVDb250YWN0KSB7CiAgICAgICAgdGhpcy5zaGFwZU92ZXJsYXBLZWVwZXIuZ2V0RGlmZihhZGRpdGlvbnMsIHJlbW92YWxzKTsKICAgICAgfQoKICAgICAgaWYgKGhhc0JlZ2luU2hhcGVDb250YWN0KSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSBhZGRpdGlvbnMubGVuZ3RoOyBpIDwgbDsgaSArPSAyKSB7CiAgICAgICAgICBjb25zdCBzaGFwZUEgPSB0aGlzLmdldFNoYXBlQnlJZChhZGRpdGlvbnNbaV0pOwogICAgICAgICAgY29uc3Qgc2hhcGVCID0gdGhpcy5nZXRTaGFwZUJ5SWQoYWRkaXRpb25zW2kgKyAxXSk7CiAgICAgICAgICBiZWdpblNoYXBlQ29udGFjdEV2ZW50LnNoYXBlQSA9IHNoYXBlQTsKICAgICAgICAgIGJlZ2luU2hhcGVDb250YWN0RXZlbnQuc2hhcGVCID0gc2hhcGVCOwogICAgICAgICAgaWYgKHNoYXBlQSkgYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5ib2R5QSA9IHNoYXBlQS5ib2R5OwogICAgICAgICAgaWYgKHNoYXBlQikgYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5ib2R5QiA9IHNoYXBlQi5ib2R5OwogICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGJlZ2luU2hhcGVDb250YWN0RXZlbnQpOwogICAgICAgIH0KCiAgICAgICAgYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5ib2R5QSA9IGJlZ2luU2hhcGVDb250YWN0RXZlbnQuYm9keUIgPSBiZWdpblNoYXBlQ29udGFjdEV2ZW50LnNoYXBlQSA9IGJlZ2luU2hhcGVDb250YWN0RXZlbnQuc2hhcGVCID0gbnVsbDsKICAgICAgfQoKICAgICAgaWYgKGhhc0VuZFNoYXBlQ29udGFjdCkgewogICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gcmVtb3ZhbHMubGVuZ3RoOyBpIDwgbDsgaSArPSAyKSB7CiAgICAgICAgICBjb25zdCBzaGFwZUEgPSB0aGlzLmdldFNoYXBlQnlJZChyZW1vdmFsc1tpXSk7CiAgICAgICAgICBjb25zdCBzaGFwZUIgPSB0aGlzLmdldFNoYXBlQnlJZChyZW1vdmFsc1tpICsgMV0pOwogICAgICAgICAgZW5kU2hhcGVDb250YWN0RXZlbnQuc2hhcGVBID0gc2hhcGVBOwogICAgICAgICAgZW5kU2hhcGVDb250YWN0RXZlbnQuc2hhcGVCID0gc2hhcGVCOwogICAgICAgICAgaWYgKHNoYXBlQSkgZW5kU2hhcGVDb250YWN0RXZlbnQuYm9keUEgPSBzaGFwZUEuYm9keTsKICAgICAgICAgIGlmIChzaGFwZUIpIGVuZFNoYXBlQ29udGFjdEV2ZW50LmJvZHlCID0gc2hhcGVCLmJvZHk7CiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZW5kU2hhcGVDb250YWN0RXZlbnQpOwogICAgICAgIH0KCiAgICAgICAgZW5kU2hhcGVDb250YWN0RXZlbnQuYm9keUEgPSBlbmRTaGFwZUNvbnRhY3RFdmVudC5ib2R5QiA9IGVuZFNoYXBlQ29udGFjdEV2ZW50LnNoYXBlQSA9IGVuZFNoYXBlQ29udGFjdEV2ZW50LnNoYXBlQiA9IG51bGw7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogU2V0cyBhbGwgYm9keSBmb3JjZXMgaW4gdGhlIHdvcmxkIHRvIHplcm8uCiAgICAgKi8KCgogICAgY2xlYXJGb3JjZXMoKSB7CiAgICAgIGNvbnN0IGJvZGllcyA9IHRoaXMuYm9kaWVzOwogICAgICBjb25zdCBOID0gYm9kaWVzLmxlbmd0aDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBiID0gYm9kaWVzW2ldOwogICAgICAgIGIuZm9yY2U7CiAgICAgICAgYi50b3JxdWU7CiAgICAgICAgYi5mb3JjZS5zZXQoMCwgMCwgMCk7CiAgICAgICAgYi50b3JxdWUuc2V0KDAsIDAsIDApOwogICAgICB9CiAgICB9CgogIH0gLy8gVGVtcCBzdHVmZgoKICBuZXcgQUFCQigpOwogIGNvbnN0IHRtcFJheSA9IG5ldyBSYXkoKTsgLy8gcGVyZm9ybWFuY2Uubm93KCkgZmFsbGJhY2sgb24gRGF0ZS5ub3coKQoKICBjb25zdCBwZXJmb3JtYW5jZSA9IGdsb2JhbFRoaXMucGVyZm9ybWFuY2UgfHwge307CgogIGlmICghcGVyZm9ybWFuY2Uubm93KSB7CiAgICBsZXQgbm93T2Zmc2V0ID0gRGF0ZS5ub3coKTsKCiAgICBpZiAocGVyZm9ybWFuY2UudGltaW5nICYmIHBlcmZvcm1hbmNlLnRpbWluZy5uYXZpZ2F0aW9uU3RhcnQpIHsKICAgICAgbm93T2Zmc2V0ID0gcGVyZm9ybWFuY2UudGltaW5nLm5hdmlnYXRpb25TdGFydDsKICAgIH0KCiAgICBwZXJmb3JtYW5jZS5ub3cgPSAoKSA9PiBEYXRlLm5vdygpIC0gbm93T2Zmc2V0OwogIH0KCiAgbmV3IFZlYzMoKTsgLy8gRGlzcGF0Y2hlZCBhZnRlciB0aGUgd29ybGQgaGFzIHN0ZXBwZWQgZm9yd2FyZCBpbiB0aW1lLgogIC8vIFJldXNhYmxlIGV2ZW50IG9iamVjdHMgdG8gc2F2ZSBtZW1vcnkuCgogIGNvbnN0IFdvcmxkX3N0ZXBfcG9zdFN0ZXBFdmVudCA9IHsKICAgIHR5cGU6ICdwb3N0U3RlcCcKICB9OyAvLyBEaXNwYXRjaGVkIGJlZm9yZSB0aGUgd29ybGQgc3RlcHMgZm9yd2FyZCBpbiB0aW1lLgoKICBjb25zdCBXb3JsZF9zdGVwX3ByZVN0ZXBFdmVudCA9IHsKICAgIHR5cGU6ICdwcmVTdGVwJwogIH07CiAgY29uc3QgV29ybGRfc3RlcF9jb2xsaWRlRXZlbnQgPSB7CiAgICB0eXBlOiBCb2R5LkNPTExJREVfRVZFTlRfTkFNRSwKICAgIGJvZHk6IG51bGwsCiAgICBjb250YWN0OiBudWxsCiAgfTsgLy8gUG9vbHMgZm9yIHVudXNlZCBvYmplY3RzCgogIGNvbnN0IFdvcmxkX3N0ZXBfb2xkQ29udGFjdHMgPSBbXTsKICBjb25zdCBXb3JsZF9zdGVwX2ZyaWN0aW9uRXF1YXRpb25Qb29sID0gW107IC8vIFJldXNhYmxlIGFycmF5cyBmb3IgY29sbGlzaW9uIHBhaXJzCgogIGNvbnN0IFdvcmxkX3N0ZXBfcDEgPSBbXTsKICBjb25zdCBXb3JsZF9zdGVwX3AyID0gW107IC8vIFN0dWZmIGZvciBlbWl0Q29udGFjdEV2ZW50cwoKICBjb25zdCBhZGRpdGlvbnMgPSBbXTsKICBjb25zdCByZW1vdmFscyA9IFtdOwogIGNvbnN0IGJlZ2luQ29udGFjdEV2ZW50ID0gewogICAgdHlwZTogJ2JlZ2luQ29udGFjdCcsCiAgICBib2R5QTogbnVsbCwKICAgIGJvZHlCOiBudWxsCiAgfTsKICBjb25zdCBlbmRDb250YWN0RXZlbnQgPSB7CiAgICB0eXBlOiAnZW5kQ29udGFjdCcsCiAgICBib2R5QTogbnVsbCwKICAgIGJvZHlCOiBudWxsCiAgfTsKICBjb25zdCBiZWdpblNoYXBlQ29udGFjdEV2ZW50ID0gewogICAgdHlwZTogJ2JlZ2luU2hhcGVDb250YWN0JywKICAgIGJvZHlBOiBudWxsLAogICAgYm9keUI6IG51bGwsCiAgICBzaGFwZUE6IG51bGwsCiAgICBzaGFwZUI6IG51bGwKICB9OwogIGNvbnN0IGVuZFNoYXBlQ29udGFjdEV2ZW50ID0gewogICAgdHlwZTogJ2VuZFNoYXBlQ29udGFjdCcsCiAgICBib2R5QTogbnVsbCwKICAgIGJvZHlCOiBudWxsLAogICAgc2hhcGVBOiBudWxsLAogICAgc2hhcGVCOiBudWxsCiAgfTsKCiAgY29uc3QgYWRkQ29udGFjdE1hdGVyaWFsID0gKHdvcmxkLCBjcmVhdGVNYXRlcmlhbCwgX3JlZiwgdXVpZCkgPT4gewogICAgbGV0IFttYXRlcmlhbEEsIG1hdGVyaWFsQiwgb3B0aW9uc10gPSBfcmVmOwogICAgY29uc3QgbWF0QSA9IGNyZWF0ZU1hdGVyaWFsKG1hdGVyaWFsQSk7CiAgICBjb25zdCBtYXRCID0gY3JlYXRlTWF0ZXJpYWwobWF0ZXJpYWxCKTsKICAgIGNvbnN0IGNvbnRhY3RNYXRlcmlhbCA9IG5ldyBDb250YWN0TWF0ZXJpYWwobWF0QSwgbWF0Qiwgb3B0aW9ucyk7CiAgICBjb250YWN0TWF0ZXJpYWwudXVpZCA9IHV1aWQ7CiAgICB3b3JsZC5hZGRDb250YWN0TWF0ZXJpYWwoY29udGFjdE1hdGVyaWFsKTsKICB9OwogIGNvbnN0IHJlbW92ZUNvbnRhY3RNYXRlcmlhbCA9ICh3b3JsZCwgY21VVUlEKSA9PiB7CiAgICBjb25zdCBpbmRleCA9IHdvcmxkLmNvbnRhY3RtYXRlcmlhbHMuZmluZEluZGV4KF9yZWYyID0+IHsKICAgICAgbGV0IHsKICAgICAgICB1dWlkCiAgICAgIH0gPSBfcmVmMjsKICAgICAgcmV0dXJuIHV1aWQgPT09IGNtVVVJRDsKICAgIH0pOwogICAgY29uc3QgW3sKICAgICAgaWQ6IGkKICAgIH0sIHsKICAgICAgaWQ6IGoKICAgIH1dID0gd29ybGQuY29udGFjdG1hdGVyaWFsc1tpbmRleF0ubWF0ZXJpYWxzOwogICAgd29ybGQuY29udGFjdG1hdGVyaWFscy5zcGxpY2UoaW5kZXgsIDEpOwogICAgZGVsZXRlIHdvcmxkLmNvbnRhY3RNYXRlcmlhbFRhYmxlLmRhdGFbaSA8IGogPyBgJHtpfS0ke2p9YCA6IGAke2p9LSR7aX1gXTsKICB9OwoKICBsZXQgbWF0ZXJpYWxJZCA9IDA7CiAgY29uc3QgY3JlYXRlTWF0ZXJpYWxGYWN0b3J5ID0gbWF0ZXJpYWxzID0+IGZ1bmN0aW9uIChuYW1lT3JPcHRpb25zKSB7CiAgICBpZiAobmFtZU9yT3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgIG5hbWVPck9wdGlvbnMgPSB7fTsKICAgIH0KCiAgICBjb25zdCBtYXRlcmlhbE9wdGlvbnMgPSB0eXBlb2YgbmFtZU9yT3B0aW9ucyA9PT0gJ3N0cmluZycgPyB7CiAgICAgIG5hbWU6IG5hbWVPck9wdGlvbnMKICAgIH0gOiB7CiAgICAgIG5hbWU6IFN5bWJvbC5mb3IoYE1hdGVyaWFsJHttYXRlcmlhbElkKyt9YCksCiAgICAgIC4uLm5hbWVPck9wdGlvbnMKICAgIH07CiAgICBjb25zdCB7CiAgICAgIG5hbWUKICAgIH0gPSBtYXRlcmlhbE9wdGlvbnM7CiAgICBtYXRlcmlhbHNbbmFtZV0gPSBtYXRlcmlhbHNbbmFtZV0gfHwgbmV3IE1hdGVyaWFsKG1hdGVyaWFsT3B0aW9ucyk7CiAgICByZXR1cm4gbWF0ZXJpYWxzW25hbWVdOwogIH07CgogIC8qKgogICAqIEB0eXBlZGVmIHsgaW1wb3J0KCdjYW5ub24tZXMnKS5NYXRlcmlhbE9wdGlvbnMgfSBNYXRlcmlhbE9wdGlvbnMKICAgKi8KCiAgY29uc3QgbWFrZVZlYzMgPSBfcmVmID0+IHsKICAgIGxldCBbeCwgeSwgel0gPSBfcmVmOwogICAgcmV0dXJuIG5ldyBWZWMzKHgsIHksIHopOwogIH07CgogIGNvbnN0IHByZXBhcmVTcGhlcmUgPSBhcmdzID0+IEFycmF5LmlzQXJyYXkoYXJncykgPyBhcmdzIDogW2FyZ3NdOwoKICBjb25zdCBwcmVwYXJlQ29udmV4UG9seWhlZHJvbiA9IF9yZWYyID0+IHsKICAgIGxldCBbdiwgZmFjZXMsIG4sIGEsIGJvdW5kaW5nU3BoZXJlUmFkaXVzXSA9IF9yZWYyOwogICAgcmV0dXJuIFt7CiAgICAgIGF4ZXM6IGEgPyBhLm1hcChtYWtlVmVjMykgOiB1bmRlZmluZWQsCiAgICAgIGJvdW5kaW5nU3BoZXJlUmFkaXVzLAogICAgICBmYWNlcywKICAgICAgbm9ybWFsczogbiA/IG4ubWFwKG1ha2VWZWMzKSA6IHVuZGVmaW5lZCwKICAgICAgdmVydGljZXM6IHYgPyB2Lm1hcChtYWtlVmVjMykgOiB1bmRlZmluZWQKICAgIH1dOwogIH07CgogIGZ1bmN0aW9uIGNyZWF0ZVNoYXBlKHR5cGUsIGFyZ3MpIHsKICAgIHN3aXRjaCAodHlwZSkgewogICAgICBjYXNlICdCb3gnOgogICAgICAgIHJldHVybiBuZXcgQm94KG5ldyBWZWMzKC4uLmFyZ3MubWFwKHYgPT4gdiAvIDIpKSk7CiAgICAgIC8vIGV4dGVudHMgPT4gaGFsZkV4dGVudHMKCiAgICAgIGNhc2UgJ0NvbnZleFBvbHloZWRyb24nOgogICAgICAgIHJldHVybiBuZXcgQ29udmV4UG9seWhlZHJvbiguLi5wcmVwYXJlQ29udmV4UG9seWhlZHJvbihhcmdzKSk7CgogICAgICBjYXNlICdDeWxpbmRlcic6CiAgICAgICAgcmV0dXJuIG5ldyBDeWxpbmRlciguLi5hcmdzKTsKICAgICAgLy8gWyByYWRpdXNUb3AsIHJhZGl1c0JvdHRvbSwgaGVpZ2h0LCBudW1TZWdtZW50cyBdID0gYXJncwoKICAgICAgY2FzZSAnSGVpZ2h0ZmllbGQnOgogICAgICAgIHJldHVybiBuZXcgSGVpZ2h0ZmllbGQoLi4uYXJncyk7CiAgICAgIC8vIFsgQXJyYXkgZGF0YSwgb3B0aW9uczoge21pblZhbHVlLCBtYXhWYWx1ZSwgZWxlbWVudFNpemV9ICBdID0gYXJncwoKICAgICAgY2FzZSAnUGFydGljbGUnOgogICAgICAgIHJldHVybiBuZXcgUGFydGljbGUoKTsKICAgICAgLy8gbm8gYXJncwoKICAgICAgY2FzZSAnUGxhbmUnOgogICAgICAgIHJldHVybiBuZXcgUGxhbmUoKTsKICAgICAgLy8gbm8gYXJncywgaW5maW5pdGUgeCBhbmQgeQoKICAgICAgY2FzZSAnU3BoZXJlJzoKICAgICAgICByZXR1cm4gbmV3IFNwaGVyZSguLi5wcmVwYXJlU3BoZXJlKGFyZ3MpKTsKICAgICAgLy8gcmFkaXVzID0gYXJncwoKICAgICAgY2FzZSAnVHJpbWVzaCc6CiAgICAgICAgcmV0dXJuIG5ldyBUcmltZXNoKC4uLmFyZ3MpOwogICAgICAvLyBbdmVydGljZXMsIGluZGljZXNdID0gYXJncwogICAgfQogIH0KICAvKioKICAgKiBAZnVuY3Rpb24KICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucwogICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLnV1aWQKICAgKiBAcGFyYW0ge0JvZHlQcm9wc30gb3B0aW9ucy5wcm9wcwogICAqIEBwYXJhbSB7Qm9keVNoYXBlVHlwZX0gb3B0aW9ucy50eXBlCiAgICogQHBhcmFtIHsobWF0ZXJpYWxPcHRpb25zOiBNYXRlcmlhbE9wdGlvbnMpID0+IE1hdGVyaWFsID19IG9wdGlvbnMuY3JlYXRlTWF0ZXJpYWwKICAgKiBAcmV0dXJucyB7Qm9keX0KICAgKi8KCgogIGNvbnN0IHByb3BzVG9Cb2R5ID0gb3B0aW9ucyA9PiB7CiAgICBjb25zdCB7CiAgICAgIHV1aWQsCiAgICAgIHByb3BzLAogICAgICB0eXBlLAogICAgICBjcmVhdGVNYXRlcmlhbCA9IG1hdGVyaWFsT3B0aW9ucyA9PiBuZXcgTWF0ZXJpYWwobWF0ZXJpYWxPcHRpb25zKQogICAgfSA9IG9wdGlvbnM7CiAgICBjb25zdCB7CiAgICAgIGFuZ3VsYXJGYWN0b3IgPSBbMSwgMSwgMV0sCiAgICAgIGFuZ3VsYXJWZWxvY2l0eSA9IFswLCAwLCAwXSwKICAgICAgYXJncyA9IFtdLAogICAgICBjb2xsaXNpb25SZXNwb25zZSwKICAgICAgbGluZWFyRmFjdG9yID0gWzEsIDEsIDFdLAogICAgICBtYXNzLAogICAgICBtYXRlcmlhbCwKICAgICAgb25Db2xsaWRlLAogICAgICBwb3NpdGlvbiA9IFswLCAwLCAwXSwKICAgICAgcm90YXRpb24gPSBbMCwgMCwgMF0sCiAgICAgIHNoYXBlcywKICAgICAgdHlwZTogYm9keVR5cGUsCiAgICAgIHZlbG9jaXR5ID0gWzAsIDAsIDBdLAogICAgICAuLi5leHRyYQogICAgfSA9IHByb3BzOwogICAgY29uc3QgYm9keSA9IG5ldyBCb2R5KHsgLi4uZXh0cmEsCiAgICAgIG1hc3M6IGJvZHlUeXBlID09PSAnU3RhdGljJyA/IDAgOiBtYXNzLAogICAgICBtYXRlcmlhbDogbWF0ZXJpYWwgPyBjcmVhdGVNYXRlcmlhbChtYXRlcmlhbCkgOiB1bmRlZmluZWQsCiAgICAgIHR5cGU6IGJvZHlUeXBlID8gQm9keVtib2R5VHlwZS50b1VwcGVyQ2FzZSgpXSA6IHVuZGVmaW5lZAogICAgfSk7CiAgICBib2R5LnV1aWQgPSB1dWlkOwoKICAgIGlmIChjb2xsaXNpb25SZXNwb25zZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIGJvZHkuY29sbGlzaW9uUmVzcG9uc2UgPSBjb2xsaXNpb25SZXNwb25zZTsKICAgIH0KCiAgICBpZiAodHlwZSA9PT0gJ0NvbXBvdW5kJykgewogICAgICBzaGFwZXMuZm9yRWFjaChfcmVmMyA9PiB7CiAgICAgICAgbGV0IHsKICAgICAgICAgIHR5cGUsCiAgICAgICAgICBhcmdzLAogICAgICAgICAgcG9zaXRpb24sCiAgICAgICAgICByb3RhdGlvbiwKICAgICAgICAgIG1hdGVyaWFsLAogICAgICAgICAgLi4uZXh0cmEKICAgICAgICB9ID0gX3JlZjM7CiAgICAgICAgY29uc3Qgc2hhcGVCb2R5ID0gYm9keS5hZGRTaGFwZShjcmVhdGVTaGFwZSh0eXBlLCBhcmdzKSwgcG9zaXRpb24gPyBuZXcgVmVjMyguLi5wb3NpdGlvbikgOiB1bmRlZmluZWQsIHJvdGF0aW9uID8gbmV3IFF1YXRlcm5pb24oKS5zZXRGcm9tRXVsZXIoLi4ucm90YXRpb24pIDogdW5kZWZpbmVkKTsKICAgICAgICBpZiAobWF0ZXJpYWwpIHNoYXBlQm9keS5tYXRlcmlhbCA9IGNyZWF0ZU1hdGVyaWFsKG1hdGVyaWFsKTsKICAgICAgICBPYmplY3QuYXNzaWduKHNoYXBlQm9keSwgZXh0cmEpOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIGJvZHkuYWRkU2hhcGUoY3JlYXRlU2hhcGUodHlwZSwgYXJncykpOwogICAgfQoKICAgIGJvZHkucG9zaXRpb24uc2V0KHBvc2l0aW9uWzBdLCBwb3NpdGlvblsxXSwgcG9zaXRpb25bMl0pOwogICAgYm9keS5xdWF0ZXJuaW9uLnNldEZyb21FdWxlcihyb3RhdGlvblswXSwgcm90YXRpb25bMV0sIHJvdGF0aW9uWzJdKTsKICAgIGJvZHkudmVsb2NpdHkuc2V0KHZlbG9jaXR5WzBdLCB2ZWxvY2l0eVsxXSwgdmVsb2NpdHlbMl0pOwogICAgYm9keS5hbmd1bGFyVmVsb2NpdHkuc2V0KGFuZ3VsYXJWZWxvY2l0eVswXSwgYW5ndWxhclZlbG9jaXR5WzFdLCBhbmd1bGFyVmVsb2NpdHlbMl0pOwogICAgYm9keS5saW5lYXJGYWN0b3Iuc2V0KGxpbmVhckZhY3RvclswXSwgbGluZWFyRmFjdG9yWzFdLCBsaW5lYXJGYWN0b3JbMl0pOwogICAgYm9keS5hbmd1bGFyRmFjdG9yLnNldChhbmd1bGFyRmFjdG9yWzBdLCBhbmd1bGFyRmFjdG9yWzFdLCBhbmd1bGFyRmFjdG9yWzJdKTsKICAgIHJldHVybiBib2R5OwogIH07CgogIGNvbnN0IGFkZEJvZGllcyA9IChzdGF0ZSwgY3JlYXRlTWF0ZXJpYWwsIF9yZWYpID0+IHsKICAgIGxldCB7CiAgICAgIHByb3BzLAogICAgICB0eXBlLAogICAgICB1dWlkCiAgICB9ID0gX3JlZjsKCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHV1aWQubGVuZ3RoOyBpKyspIHsKICAgICAgY29uc3QgYm9keSA9IHByb3BzVG9Cb2R5KHsKICAgICAgICBjcmVhdGVNYXRlcmlhbCwKICAgICAgICBwcm9wczogcHJvcHNbaV0sCiAgICAgICAgdHlwZSwKICAgICAgICB1dWlkOiB1dWlkW2ldCiAgICAgIH0pOwogICAgICBzdGF0ZS53b3JsZC5hZGRCb2R5KGJvZHkpOwogICAgICBpZiAocHJvcHNbaV0ub25Db2xsaWRlKSBib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbGxpZGUnLCBfcmVmMiA9PiB7CiAgICAgICAgbGV0IHsKICAgICAgICAgIHR5cGUsCiAgICAgICAgICBib2R5LAogICAgICAgICAgdGFyZ2V0LAogICAgICAgICAgY29udGFjdAogICAgICAgIH0gPSBfcmVmMjsKICAgICAgICBpZiAoIWJvZHkudXVpZCB8fCAhdGFyZ2V0LnV1aWQpIHJldHVybjsKICAgICAgICBjb25zdCB7CiAgICAgICAgICBuaSwKICAgICAgICAgIHJpLAogICAgICAgICAgcmosCiAgICAgICAgICBiaSwKICAgICAgICAgIGJqLAogICAgICAgICAgaWQKICAgICAgICB9ID0gY29udGFjdDsKICAgICAgICBjb25zdCBjb250YWN0UG9pbnQgPSBiaS5wb3NpdGlvbi52YWRkKHJpKTsKICAgICAgICBjb25zdCBjb250YWN0Tm9ybWFsID0gYmkgPT09IGJvZHkgPyBuaSA6IG5pLnNjYWxlKC0xKTsKICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgICAgIGJvZHk6IGJvZHkudXVpZCwKICAgICAgICAgIGNvbGxpc2lvbkZpbHRlcnM6IHsKICAgICAgICAgICAgYm9keUZpbHRlckdyb3VwOiBib2R5LmNvbGxpc2lvbkZpbHRlckdyb3VwLAogICAgICAgICAgICBib2R5RmlsdGVyTWFzazogYm9keS5jb2xsaXNpb25GaWx0ZXJNYXNrLAogICAgICAgICAgICB0YXJnZXRGaWx0ZXJHcm91cDogdGFyZ2V0LmNvbGxpc2lvbkZpbHRlckdyb3VwLAogICAgICAgICAgICB0YXJnZXRGaWx0ZXJNYXNrOiB0YXJnZXQuY29sbGlzaW9uRmlsdGVyTWFzawogICAgICAgICAgfSwKICAgICAgICAgIGNvbnRhY3Q6IHsKICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUT0RPOiB1c2UgaWQgaW5zdGVhZCBvZiB1dWlkCiAgICAgICAgICAgIGJpOiBiaS51dWlkLAogICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRPRE86IHVzZSBpZCBpbnN0ZWFkIG9mIHV1aWQKICAgICAgICAgICAgYmo6IGJqLnV1aWQsCiAgICAgICAgICAgIC8vIE5vcm1hbCBvZiB0aGUgY29udGFjdCwgcmVsYXRpdmUgdG8gdGhlIGNvbGxpZGluZyBib2R5CiAgICAgICAgICAgIGNvbnRhY3ROb3JtYWw6IGNvbnRhY3ROb3JtYWwudG9BcnJheSgpLAogICAgICAgICAgICAvLyBXb3JsZCBwb3NpdGlvbiBvZiB0aGUgY29udGFjdAogICAgICAgICAgICBjb250YWN0UG9pbnQ6IGNvbnRhY3RQb2ludC50b0FycmF5KCksCiAgICAgICAgICAgIGlkLAogICAgICAgICAgICBpbXBhY3RWZWxvY2l0eTogY29udGFjdC5nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsKCksCiAgICAgICAgICAgIG5pOiBuaS50b0FycmF5KCksCiAgICAgICAgICAgIHJpOiByaS50b0FycmF5KCksCiAgICAgICAgICAgIHJqOiByai50b0FycmF5KCkKICAgICAgICAgIH0sCiAgICAgICAgICBvcDogJ2V2ZW50JywKICAgICAgICAgIHRhcmdldDogdGFyZ2V0LnV1aWQsCiAgICAgICAgICB0eXBlCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH07CgogIGNvbnN0IHRyaXBsZXRUb1ZlYzMgPSB0ID0+IHQgPyBuZXcgVmVjMyguLi50KSA6IHVuZGVmaW5lZDsKCiAgY29uc3QgYWRkQ29uc3RyYWludCA9IChzdGF0ZSwgX3JlZikgPT4gewogICAgbGV0IHsKICAgICAgcHJvcHM6IFtib2R5QSwgYm9keUIsIHsKICAgICAgICBhbmdsZSwKICAgICAgICBheGlzQSwKICAgICAgICBheGlzQiwKICAgICAgICBjb2xsaWRlQ29ubmVjdGVkLAogICAgICAgIGRpc3RhbmNlLAogICAgICAgIG1heEZvcmNlLAogICAgICAgIG1heE11bHRpcGxpZXIsCiAgICAgICAgcGl2b3RBLAogICAgICAgIHBpdm90QiwKICAgICAgICB0d2lzdEFuZ2xlLAogICAgICAgIHdha2VVcEJvZGllcwogICAgICB9XSwKICAgICAgdHlwZSwKICAgICAgdXVpZAogICAgfSA9IF9yZWY7CiAgICBsZXQgY29uc3RyYWludDsKCiAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgY2FzZSAnUG9pbnRUb1BvaW50JzoKICAgICAgICBjb25zdHJhaW50ID0gbmV3IFBvaW50VG9Qb2ludENvbnN0cmFpbnQoc3RhdGUuYm9kaWVzW2JvZHlBXSwgdHJpcGxldFRvVmVjMyhwaXZvdEEpLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCB0cmlwbGV0VG9WZWMzKHBpdm90QiksIG1heEZvcmNlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ0NvbmVUd2lzdCc6CiAgICAgICAgY29uc3RyYWludCA9IG5ldyBDb25lVHdpc3RDb25zdHJhaW50KHN0YXRlLmJvZGllc1tib2R5QV0sIHN0YXRlLmJvZGllc1tib2R5Ql0sIHsKICAgICAgICAgIGFuZ2xlLAogICAgICAgICAgYXhpc0E6IHRyaXBsZXRUb1ZlYzMoYXhpc0EpLAogICAgICAgICAgYXhpc0I6IHRyaXBsZXRUb1ZlYzMoYXhpc0IpLAogICAgICAgICAgY29sbGlkZUNvbm5lY3RlZCwKICAgICAgICAgIG1heEZvcmNlLAogICAgICAgICAgcGl2b3RBOiB0cmlwbGV0VG9WZWMzKHBpdm90QSksCiAgICAgICAgICBwaXZvdEI6IHRyaXBsZXRUb1ZlYzMocGl2b3RCKSwKICAgICAgICAgIHR3aXN0QW5nbGUKICAgICAgICB9KTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ0hpbmdlJzoKICAgICAgICBjb25zdHJhaW50ID0gbmV3IEhpbmdlQ29uc3RyYWludChzdGF0ZS5ib2RpZXNbYm9keUFdLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCB7CiAgICAgICAgICBheGlzQTogdHJpcGxldFRvVmVjMyhheGlzQSksCiAgICAgICAgICBheGlzQjogdHJpcGxldFRvVmVjMyhheGlzQiksCiAgICAgICAgICBjb2xsaWRlQ29ubmVjdGVkLAogICAgICAgICAgbWF4Rm9yY2UsCiAgICAgICAgICBwaXZvdEE6IHRyaXBsZXRUb1ZlYzMocGl2b3RBKSwKICAgICAgICAgIHBpdm90QjogdHJpcGxldFRvVmVjMyhwaXZvdEIpCiAgICAgICAgfSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdEaXN0YW5jZSc6CiAgICAgICAgY29uc3RyYWludCA9IG5ldyBEaXN0YW5jZUNvbnN0cmFpbnQoc3RhdGUuYm9kaWVzW2JvZHlBXSwgc3RhdGUuYm9kaWVzW2JvZHlCXSwgZGlzdGFuY2UsIG1heEZvcmNlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ0xvY2snOgogICAgICAgIGNvbnN0cmFpbnQgPSBuZXcgTG9ja0NvbnN0cmFpbnQoc3RhdGUuYm9kaWVzW2JvZHlBXSwgc3RhdGUuYm9kaWVzW2JvZHlCXSwgewogICAgICAgICAgbWF4Rm9yY2UKICAgICAgICB9KTsKICAgICAgICBicmVhazsKCiAgICAgIGRlZmF1bHQ6CiAgICAgICAgY29uc3RyYWludCA9IG5ldyBDb25zdHJhaW50KHN0YXRlLmJvZGllc1tib2R5QV0sIHN0YXRlLmJvZGllc1tib2R5Ql0sIHsKICAgICAgICAgIGNvbGxpZGVDb25uZWN0ZWQsCiAgICAgICAgICB3YWtlVXBCb2RpZXMKICAgICAgICB9KTsKICAgICAgICBicmVhazsKICAgIH0KCiAgICBjb25zdHJhaW50LnV1aWQgPSB1dWlkOwogICAgc3RhdGUud29ybGQuYWRkQ29uc3RyYWludChjb25zdHJhaW50KTsKCiAgICBpZiAobWF4TXVsdGlwbGllciAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIGNvbnN0IHBvc3RTdGVwQ29uc3RyYWludCA9ICgpID0+IHsKICAgICAgICAvLyBUaGUgbXVsdGlwbGllciBpcyBwcm9wb3J0aW9uYWwgdG8gaG93IG11Y2ggZm9yY2UgaXMgYWRkZWQgdG8gdGhlIGJvZGllcyBieSB0aGUgY29uc3RyYWludC4KICAgICAgICAvLyBJZiB0aGlzIGV4Y2VlZHMgYSBsaW1pdCB0aGUgY29uc3RyYWludCBpcyBkaXNhYmxlZC4KICAgICAgICBjb25zdCBtdWx0aXBsaWVyID0gTWF0aC5hYnMoY29uc3RyYWludC5lcXVhdGlvbnNbMF0ubXVsdGlwbGllcik7CgogICAgICAgIGlmIChtdWx0aXBsaWVyID4gbWF4TXVsdGlwbGllcikgewogICAgICAgICAgY29uc3RyYWludC5kaXNhYmxlKCk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgc3RhdGUuY29uc3RyYWludHNbdXVpZF0gPSBwb3N0U3RlcENvbnN0cmFpbnQ7CiAgICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgc3RhdGUuY29uc3RyYWludHNbdXVpZF0pOwogICAgfQogIH07CgogIGZ1bmN0aW9uIHRvVXBwZXJjYXNlKHN0cikgewogICAgcmV0dXJuIHN0ci50b1VwcGVyQ2FzZSgpOwogIH0KCiAgY29uc3QgYWRkUmF5ID0gKHN0YXRlLCBfcmVmKSA9PiB7CiAgICBsZXQgewogICAgICBwcm9wczogewogICAgICAgIGZyb20sCiAgICAgICAgbW9kZSwKICAgICAgICB0bywKICAgICAgICAuLi5yYXlPcHRpb25zCiAgICAgIH0sCiAgICAgIHV1aWQKICAgIH0gPSBfcmVmOwogICAgY29uc3QgcmF5ID0gbmV3IFJheSh0cmlwbGV0VG9WZWMzKGZyb20pLCB0cmlwbGV0VG9WZWMzKHRvKSk7CiAgICBjb25zdCBvcHRpb25zID0gewogICAgICBtb2RlOiBSQVlfTU9ERVNbdG9VcHBlcmNhc2UobW9kZSldLAogICAgICByZXN1bHQ6IG5ldyBSYXljYXN0UmVzdWx0KCksCiAgICAgIC4uLnJheU9wdGlvbnMKICAgIH07CgogICAgc3RhdGUucmF5c1t1dWlkXSA9ICgpID0+IHsKICAgICAgcmF5LmludGVyc2VjdFdvcmxkKHN0YXRlLndvcmxkLCBvcHRpb25zKTsKICAgICAgaWYgKCFvcHRpb25zLnJlc3VsdCB8fCAhb3B0aW9ucy5yZXN1bHQuYm9keSkgcmV0dXJuOwogICAgICBjb25zdCB7CiAgICAgICAgYm9keSwKICAgICAgICBzaGFwZSwKICAgICAgICByYXlGcm9tV29ybGQsCiAgICAgICAgcmF5VG9Xb3JsZCwKICAgICAgICBoaXROb3JtYWxXb3JsZCwKICAgICAgICBoaXRQb2ludFdvcmxkLAogICAgICAgIC4uLnJlc3QKICAgICAgfSA9IG9wdGlvbnMucmVzdWx0OwogICAgICBjb25zdCBib2R5VVVJRCA9IGJvZHkudXVpZDsKICAgICAgaWYgKCFib2R5VVVJRCkgcmV0dXJuOwogICAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgICBib2R5OiBib2R5VVVJRCwKICAgICAgICBoaXROb3JtYWxXb3JsZDogaGl0Tm9ybWFsV29ybGQudG9BcnJheSgpLAogICAgICAgIGhpdFBvaW50V29ybGQ6IGhpdFBvaW50V29ybGQudG9BcnJheSgpLAogICAgICAgIG9wOiAnZXZlbnQnLAogICAgICAgIHJheTogewogICAgICAgICAgY29sbGlzaW9uRmlsdGVyR3JvdXA6IHJheS5jb2xsaXNpb25GaWx0ZXJHcm91cCwKICAgICAgICAgIGNvbGxpc2lvbkZpbHRlck1hc2s6IHJheS5jb2xsaXNpb25GaWx0ZXJNYXNrLAogICAgICAgICAgZGlyZWN0aW9uOiByYXkuZGlyZWN0aW9uLnRvQXJyYXkoKSwKICAgICAgICAgIGZyb20sCiAgICAgICAgICB0bywKICAgICAgICAgIHV1aWQKICAgICAgICB9LAogICAgICAgIHJheUZyb21Xb3JsZDogcmF5RnJvbVdvcmxkLnRvQXJyYXkoKSwKICAgICAgICByYXlUb1dvcmxkOiByYXlUb1dvcmxkLnRvQXJyYXkoKSwKICAgICAgICBzaGFwZTogc2hhcGUgPyB7IC4uLnNoYXBlLAogICAgICAgICAgYm9keTogYm9keVVVSUQKICAgICAgICB9IDogbnVsbCwKICAgICAgICB0eXBlOiAncmF5aGl0JywKICAgICAgICAuLi5yZXN0CiAgICAgIH0pOwogICAgfTsKCiAgICBzdGF0ZS53b3JsZC5hZGRFdmVudExpc3RlbmVyKCdwcmVTdGVwJywgc3RhdGUucmF5c1t1dWlkXSk7CiAgfTsKCiAgY29uc3QgYWRkUmF5Y2FzdFZlaGljbGUgPSAoc3RhdGUsIGRhdGEpID0+IHsKICAgIGNvbnN0IFtjaGFzc2lzQm9keSwgd2hlZWxzLCB3aGVlbEluZm9zLCBpbmRleEZvcndhcmRBeGlzLCBpbmRleFJpZ2h0QXhpcywgaW5kZXhVcEF4aXNdID0gZGF0YS5wcm9wczsKICAgIGNvbnN0IHZlaGljbGUgPSBuZXcgUmF5Y2FzdFZlaGljbGUoewogICAgICBjaGFzc2lzQm9keTogc3RhdGUuYm9kaWVzW2NoYXNzaXNCb2R5XSwKICAgICAgaW5kZXhGb3J3YXJkQXhpcywKICAgICAgaW5kZXhSaWdodEF4aXMsCiAgICAgIGluZGV4VXBBeGlzCiAgICB9KTsKICAgIHZlaGljbGUud29ybGQgPSBzdGF0ZS53b3JsZDsKCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdoZWVsSW5mb3MubGVuZ3RoOyBpKyspIHsKICAgICAgY29uc3QgewogICAgICAgIGF4bGVMb2NhbCwKICAgICAgICBjaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWwsCiAgICAgICAgZGlyZWN0aW9uTG9jYWwsCiAgICAgICAgLi4ucmVzdAogICAgICB9ID0gd2hlZWxJbmZvc1tpXTsKICAgICAgdmVoaWNsZS5hZGRXaGVlbCh7CiAgICAgICAgYXhsZUxvY2FsOiB0cmlwbGV0VG9WZWMzKGF4bGVMb2NhbCksCiAgICAgICAgY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludExvY2FsOiB0cmlwbGV0VG9WZWMzKGNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbCksCiAgICAgICAgZGlyZWN0aW9uTG9jYWw6IHRyaXBsZXRUb1ZlYzMoZGlyZWN0aW9uTG9jYWwpLAogICAgICAgIC4uLnJlc3QKICAgICAgfSk7CiAgICB9CgogICAgY29uc3QgcHJlU3RlcCA9ICgpID0+IHsKICAgICAgdmVoaWNsZS51cGRhdGVWZWhpY2xlKHN0YXRlLndvcmxkLmR0KTsKICAgIH07CgogICAgY29uc3QgcG9zdFN0ZXAgPSAoKSA9PiB7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVoaWNsZS53aGVlbEluZm9zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmVoaWNsZS51cGRhdGVXaGVlbFRyYW5zZm9ybShpKTsKICAgICAgICBjb25zdCB0ID0gdmVoaWNsZS53aGVlbEluZm9zW2ldLndvcmxkVHJhbnNmb3JtOwogICAgICAgIGNvbnN0IHdoZWVsQm9keSA9IHN0YXRlLmJvZGllc1t3aGVlbHNbaV1dOwogICAgICAgIHdoZWVsQm9keS5wb3NpdGlvbi5jb3B5KHQucG9zaXRpb24pOwogICAgICAgIHdoZWVsQm9keS5xdWF0ZXJuaW9uLmNvcHkodC5xdWF0ZXJuaW9uKTsKICAgICAgfQogICAgfTsKCiAgICBzdGF0ZS52ZWhpY2xlc1tkYXRhLnV1aWRdID0gewogICAgICBwb3N0U3RlcCwKICAgICAgcHJlU3RlcCwKICAgICAgdmVoaWNsZQogICAgfTsKICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCBwcmVTdGVwKTsKICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgcG9zdFN0ZXApOwogIH07CgogIGNvbnN0IGFkZFNwcmluZyA9IChzdGF0ZSwgX3JlZikgPT4gewogICAgbGV0IHsKICAgICAgcHJvcHM6IFtib2R5QSwgYm9keUIsIHsKICAgICAgICBkYW1waW5nLAogICAgICAgIGxvY2FsQW5jaG9yQSwKICAgICAgICBsb2NhbEFuY2hvckIsCiAgICAgICAgcmVzdExlbmd0aCwKICAgICAgICBzdGlmZm5lc3MsCiAgICAgICAgd29ybGRBbmNob3JBLAogICAgICAgIHdvcmxkQW5jaG9yQgogICAgICB9XSwKICAgICAgdXVpZAogICAgfSA9IF9yZWY7CiAgICBjb25zdCBzcHJpbmcgPSBuZXcgU3ByaW5nKHN0YXRlLmJvZGllc1tib2R5QV0sIHN0YXRlLmJvZGllc1tib2R5Ql0sIHsKICAgICAgZGFtcGluZywKICAgICAgbG9jYWxBbmNob3JBOiB0cmlwbGV0VG9WZWMzKGxvY2FsQW5jaG9yQSksCiAgICAgIGxvY2FsQW5jaG9yQjogdHJpcGxldFRvVmVjMyhsb2NhbEFuY2hvckIpLAogICAgICByZXN0TGVuZ3RoLAogICAgICBzdGlmZm5lc3MsCiAgICAgIHdvcmxkQW5jaG9yQTogdHJpcGxldFRvVmVjMyh3b3JsZEFuY2hvckEpLAogICAgICB3b3JsZEFuY2hvckI6IHRyaXBsZXRUb1ZlYzMod29ybGRBbmNob3JCKQogICAgfSk7CiAgICBzcHJpbmcudXVpZCA9IHV1aWQ7CgogICAgY29uc3QgcG9zdFN0ZXBTcHJpbmcgPSAoKSA9PiBzcHJpbmcuYXBwbHlGb3JjZSgpOwoKICAgIHN0YXRlLnNwcmluZ3NbdXVpZF0gPSBwb3N0U3RlcFNwcmluZzsKICAgIHN0YXRlLnNwcmluZ0luc3RhbmNlc1t1dWlkXSA9IHNwcmluZzsgLy8gQ29tcHV0ZSB0aGUgZm9yY2UgYWZ0ZXIgZWFjaCBzdGVwCgogICAgc3RhdGUud29ybGQuYWRkRXZlbnRMaXN0ZW5lcigncG9zdFN0ZXAnLCBzdGF0ZS5zcHJpbmdzW3V1aWRdKTsKICB9OwoKICBmdW5jdGlvbiBlbWl0QmVnaW5Db250YWN0KF9yZWYpIHsKICAgIGxldCB7CiAgICAgIGJvZHlBLAogICAgICBib2R5QgogICAgfSA9IF9yZWY7CiAgICBpZiAoIShib2R5QSAhPSBudWxsICYmIGJvZHlBLnV1aWQpIHx8ICEoYm9keUIgIT0gbnVsbCAmJiBib2R5Qi51dWlkKSkgcmV0dXJuOwogICAgc2VsZi5wb3N0TWVzc2FnZSh7CiAgICAgIGJvZHlBOiBib2R5QS51dWlkLAogICAgICBib2R5QjogYm9keUIudXVpZCwKICAgICAgb3A6ICdldmVudCcsCiAgICAgIHR5cGU6ICdjb2xsaWRlQmVnaW4nCiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIGVtaXRFbmRDb250YWN0KF9yZWYyKSB7CiAgICBsZXQgewogICAgICBib2R5QSwKICAgICAgYm9keUIKICAgIH0gPSBfcmVmMjsKICAgIGlmICghKGJvZHlBICE9IG51bGwgJiYgYm9keUEudXVpZCkgfHwgIShib2R5QiAhPSBudWxsICYmIGJvZHlCLnV1aWQpKSByZXR1cm47CiAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgYm9keUE6IGJvZHlBLnV1aWQsCiAgICAgIGJvZHlCOiBib2R5Qi51dWlkLAogICAgICBvcDogJ2V2ZW50JywKICAgICAgdHlwZTogJ2NvbGxpZGVFbmQnCiAgICB9KTsKICB9CgogIGNvbnN0IGluaXQgPSAod29ybGQsIF9yZWYzKSA9PiB7CiAgICBsZXQgewogICAgICBhbGxvd1NsZWVwLAogICAgICBheGlzSW5kZXggPSAwLAogICAgICBicm9hZHBoYXNlLAogICAgICBkZWZhdWx0Q29udGFjdE1hdGVyaWFsLAogICAgICBmcmljdGlvbkdyYXZpdHksCiAgICAgIGdyYXZpdHksCiAgICAgIGl0ZXJhdGlvbnMsCiAgICAgIHF1YXROb3JtYWxpemVGYXN0LAogICAgICBxdWF0Tm9ybWFsaXplU2tpcCwKICAgICAgc29sdmVyLAogICAgICB0b2xlcmFuY2UKICAgIH0gPSBfcmVmMzsKICAgIHdvcmxkLmFsbG93U2xlZXAgPSBhbGxvd1NsZWVwOwogICAgd29ybGQuZ3Jhdml0eS5zZXQoLi4uZ3Jhdml0eSk7CiAgICB3b3JsZC5mcmljdGlvbkdyYXZpdHkgPSBmcmljdGlvbkdyYXZpdHkgPyBuZXcgVmVjMyguLi5mcmljdGlvbkdyYXZpdHkpIDogdW5kZWZpbmVkOwogICAgd29ybGQucXVhdE5vcm1hbGl6ZUZhc3QgPSBxdWF0Tm9ybWFsaXplRmFzdDsKICAgIHdvcmxkLnF1YXROb3JtYWxpemVTa2lwID0gcXVhdE5vcm1hbGl6ZVNraXA7CgogICAgaWYgKHNvbHZlciA9PT0gJ1NwbGl0JykgewogICAgICB3b3JsZC5zb2x2ZXIgPSBuZXcgU3BsaXRTb2x2ZXIobmV3IEdTU29sdmVyKCkpOwogICAgfQoKICAgIGlmICh3b3JsZC5zb2x2ZXIgaW5zdGFuY2VvZiBHU1NvbHZlcikgewogICAgICB3b3JsZC5zb2x2ZXIudG9sZXJhbmNlID0gdG9sZXJhbmNlOwogICAgICB3b3JsZC5zb2x2ZXIuaXRlcmF0aW9ucyA9IGl0ZXJhdGlvbnM7CiAgICB9CgogICAgd29ybGQuYnJvYWRwaGFzZSA9IGJyb2FkcGhhc2UgPT09ICdTQVAnID8gbmV3IFNBUEJyb2FkcGhhc2Uod29ybGQpIDogbmV3IE5haXZlQnJvYWRwaGFzZSgpOwoKICAgIGlmICh3b3JsZC5icm9hZHBoYXNlIGluc3RhbmNlb2YgU0FQQnJvYWRwaGFzZSkgewogICAgICB3b3JsZC5icm9hZHBoYXNlLmF4aXNJbmRleCA9IGF4aXNJbmRleDsKICAgIH0KCiAgICB3b3JsZC5hZGRFdmVudExpc3RlbmVyKCdiZWdpbkNvbnRhY3QnLCBlbWl0QmVnaW5Db250YWN0KTsKICAgIHdvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZENvbnRhY3QnLCBlbWl0RW5kQ29udGFjdCk7CiAgICBPYmplY3QuYXNzaWduKHdvcmxkLmRlZmF1bHRDb250YWN0TWF0ZXJpYWwsIGRlZmF1bHRDb250YWN0TWF0ZXJpYWwpOwogIH07CgogIGNvbnN0IGlzUW9yViA9IHYgPT4gdiBpbnN0YW5jZW9mIFF1YXRlcm5pb24gfHwgdiBpbnN0YW5jZW9mIFZlYzM7CgogIGNvbnN0IHN0ZXAgPSAoc3RhdGUsIF9yZWYpID0+IHsKICAgIGxldCB7CiAgICAgIHBvc2l0aW9ucywKICAgICAgcHJvcHM6IHsKICAgICAgICBtYXhTdWJTdGVwcywKICAgICAgICBzdGVwU2l6ZSwKICAgICAgICB0aW1lU2luY2VMYXN0Q2FsbGVkCiAgICAgIH0sCiAgICAgIHF1YXRlcm5pb25zCiAgICB9ID0gX3JlZjsKICAgIHN0YXRlLndvcmxkLnN0ZXAoc3RlcFNpemUsIHRpbWVTaW5jZUxhc3RDYWxsZWQsIG1heFN1YlN0ZXBzKTsKCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0YXRlLndvcmxkLmJvZGllcy5sZW5ndGg7IGkgKz0gMSkgewogICAgICBjb25zdCBwID0gc3RhdGUud29ybGQuYm9kaWVzW2ldLnBvc2l0aW9uOwogICAgICBjb25zdCBxID0gc3RhdGUud29ybGQuYm9kaWVzW2ldLnF1YXRlcm5pb247CiAgICAgIHBvc2l0aW9uc1szICogaSArIDBdID0gcC54OwogICAgICBwb3NpdGlvbnNbMyAqIGkgKyAxXSA9IHAueTsKICAgICAgcG9zaXRpb25zWzMgKiBpICsgMl0gPSBwLno7CiAgICAgIHF1YXRlcm5pb25zWzQgKiBpICsgMF0gPSBxLng7CiAgICAgIHF1YXRlcm5pb25zWzQgKiBpICsgMV0gPSBxLnk7CiAgICAgIHF1YXRlcm5pb25zWzQgKiBpICsgMl0gPSBxLno7CiAgICAgIHF1YXRlcm5pb25zWzQgKiBpICsgM10gPSBxLnc7CiAgICB9CgogICAgY29uc3Qgb2JzZXJ2YXRpb25zID0gW107CgogICAgZm9yIChjb25zdCBpZCBvZiBPYmplY3Qua2V5cyhzdGF0ZS5zdWJzY3JpcHRpb25zKSkgewogICAgICBjb25zdCBbdXVpZCwgdHlwZSwgdGFyZ2V0ID0gJ2JvZGllcyddID0gc3RhdGUuc3Vic2NyaXB0aW9uc1tpZF07CiAgICAgIGNvbnN0IHsKICAgICAgICBib2RpZXMsCiAgICAgICAgdmVoaWNsZXMKICAgICAgfSA9IHN0YXRlOwogICAgICBjb25zdCB2YWx1ZSA9IHRhcmdldCA9PT0gJ3ZlaGljbGVzJyA/IC8vIEB0cy1leHBlY3QtZXJyb3IgVE9ETzogRGlmZmVyZW50aWF0ZSB0aGVzZSAidHlwZXMiCiAgICAgIHZlaGljbGVzW3V1aWRdLnZlaGljbGVbdHlwZV0gOiAvLyBAdHMtZXhwZWN0LWVycm9yIFRPRE86IERpZmZlcmVudGlhdGUgdGhlc2UgInR5cGVzIgogICAgICBib2RpZXNbdXVpZF1bdHlwZV07CiAgICAgIGNvbnN0IHNlcmlhbGl6YWJsZVZhbHVlID0gaXNRb3JWKHZhbHVlKSA/IHZhbHVlLnRvQXJyYXkoKSA6IHZhbHVlOwogICAgICBvYnNlcnZhdGlvbnMucHVzaChbTnVtYmVyKGlkKSwgc2VyaWFsaXphYmxlVmFsdWUsIC8vIEB0cy1leHBlY3QtZXJyb3IgVE9ETzogRGlmZmVyZW50aWF0ZSB0aGVzZSAidHlwZXMiCiAgICAgIHR5cGVdKTsKICAgIH0KCiAgICBjb25zdCBtZXNzYWdlID0gewogICAgICBhY3RpdmU6IHN0YXRlLndvcmxkLmhhc0FjdGl2ZUJvZGllcywKICAgICAgb2JzZXJ2YXRpb25zLAogICAgICBvcDogJ2ZyYW1lJywKICAgICAgcG9zaXRpb25zLAogICAgICBxdWF0ZXJuaW9ucwogICAgfTsKCiAgICBpZiAoc3RhdGUuYm9kaWVzTmVlZFN5bmNpbmcpIHsKICAgICAgbWVzc2FnZS5ib2RpZXMgPSBzdGF0ZS53b3JsZC5ib2RpZXMucmVkdWNlKChib2RpZXMsIGJvZHkpID0+IHsKICAgICAgICBpZiAoYm9keS51dWlkKSBib2RpZXMucHVzaChib2R5LnV1aWQpOwogICAgICAgIHJldHVybiBib2RpZXM7CiAgICAgIH0sIFtdKTsKICAgICAgc3RhdGUuYm9kaWVzTmVlZFN5bmNpbmcgPSBmYWxzZTsKICAgIH0KCiAgICBzZWxmLnBvc3RNZXNzYWdlKG1lc3NhZ2UsIFtwb3NpdGlvbnMuYnVmZmVyLCBxdWF0ZXJuaW9ucy5idWZmZXJdKTsKICB9OwoKICBjb25zdCBzdGF0ZSA9IHsKICAgIGJvZGllczoge30sCiAgICBib2RpZXNOZWVkU3luY2luZzogZmFsc2UsCiAgICBjb25zdHJhaW50czoge30sCiAgICBtYXRlcmlhbHM6IHt9LAogICAgcmF5czoge30sCiAgICBzcHJpbmdJbnN0YW5jZXM6IHt9LAogICAgc3ByaW5nczoge30sCiAgICBzdWJzY3JpcHRpb25zOiB7fSwKICAgIHZlaGljbGVzOiB7fSwKICAgIHdvcmxkOiBuZXcgV29ybGQoKQogIH07CgogIC8vLyA8cmVmZXJlbmNlIG5vLWRlZmF1bHQtbGliPSJ0cnVlIi8+CgogIGNvbnN0IGlzSGluZ2VDb25zdHJhaW50ID0gYyA9PiBjIGluc3RhbmNlb2YgSGluZ2VDb25zdHJhaW50OwoKICBmdW5jdGlvbiBzeW5jQm9kaWVzKCkgewogICAgc3RhdGUuYm9kaWVzTmVlZFN5bmNpbmcgPSB0cnVlOwogICAgc3RhdGUuYm9kaWVzID0gc3RhdGUud29ybGQuYm9kaWVzLnJlZHVjZSgoYm9kaWVzLCBib2R5KSA9PiBib2R5LnV1aWQgPyB7IC4uLmJvZGllcywKICAgICAgW2JvZHkudXVpZF06IGJvZHkKICAgIH0gOiBib2RpZXMsIHt9KTsKICB9CgogIGNvbnN0IGJyb2FkcGhhc2VzID0gewogICAgTmFpdmVCcm9hZHBoYXNlLAogICAgU0FQQnJvYWRwaGFzZQogIH07CiAgY29uc3QgY3JlYXRlTWF0ZXJpYWwgPSBjcmVhdGVNYXRlcmlhbEZhY3Rvcnkoc3RhdGUubWF0ZXJpYWxzKTsKCiAgc2VsZi5vbm1lc3NhZ2UgPSBfcmVmID0+IHsKICAgIGxldCB7CiAgICAgIGRhdGEKICAgIH0gPSBfcmVmOwoKICAgIHN3aXRjaCAoZGF0YS5vcCkgewogICAgICBjYXNlICdpbml0JzoKICAgICAgICB7CiAgICAgICAgICBpbml0KHN0YXRlLndvcmxkLCBkYXRhLnByb3BzKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3N0ZXAnOgogICAgICAgIHsKICAgICAgICAgIHN0ZXAoc3RhdGUsIGRhdGEpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnYWRkQm9kaWVzJzoKICAgICAgICB7CiAgICAgICAgICBhZGRCb2RpZXMoc3RhdGUsIGNyZWF0ZU1hdGVyaWFsLCBkYXRhKTsKICAgICAgICAgIHN5bmNCb2RpZXMoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3JlbW92ZUJvZGllcyc6CiAgICAgICAgewogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLnV1aWQubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgc3RhdGUud29ybGQucmVtb3ZlQm9keShzdGF0ZS5ib2RpZXNbZGF0YS51dWlkW2ldXSk7CiAgICAgICAgICB9CgogICAgICAgICAgc3luY0JvZGllcygpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc3Vic2NyaWJlJzoKICAgICAgICB7CiAgICAgICAgICBjb25zdCB7CiAgICAgICAgICAgIGlkLAogICAgICAgICAgICB0YXJnZXQsCiAgICAgICAgICAgIHR5cGUKICAgICAgICAgIH0gPSBkYXRhLnByb3BzOwogICAgICAgICAgc3RhdGUuc3Vic2NyaXB0aW9uc1tpZF0gPSBbZGF0YS51dWlkLCB0eXBlLCB0YXJnZXRdOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAndW5zdWJzY3JpYmUnOgogICAgICAgIHsKICAgICAgICAgIGRlbGV0ZSBzdGF0ZS5zdWJzY3JpcHRpb25zW2RhdGEucHJvcHNdOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc2V0UG9zaXRpb24nOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLnBvc2l0aW9uLnNldChkYXRhLnByb3BzWzBdLCBkYXRhLnByb3BzWzFdLCBkYXRhLnByb3BzWzJdKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldFF1YXRlcm5pb24nOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLnF1YXRlcm5pb24uc2V0KGRhdGEucHJvcHNbMF0sIGRhdGEucHJvcHNbMV0sIGRhdGEucHJvcHNbMl0sIGRhdGEucHJvcHNbM10pOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0Um90YXRpb24nOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLnF1YXRlcm5pb24uc2V0RnJvbUV1bGVyKGRhdGEucHJvcHNbMF0sIGRhdGEucHJvcHNbMV0sIGRhdGEucHJvcHNbMl0pOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0VmVsb2NpdHknOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLnZlbG9jaXR5LnNldChkYXRhLnByb3BzWzBdLCBkYXRhLnByb3BzWzFdLCBkYXRhLnByb3BzWzJdKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldEFuZ3VsYXJWZWxvY2l0eSc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uYW5ndWxhclZlbG9jaXR5LnNldChkYXRhLnByb3BzWzBdLCBkYXRhLnByb3BzWzFdLCBkYXRhLnByb3BzWzJdKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldExpbmVhckZhY3Rvcic6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0ubGluZWFyRmFjdG9yLnNldChkYXRhLnByb3BzWzBdLCBkYXRhLnByb3BzWzFdLCBkYXRhLnByb3BzWzJdKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldEFuZ3VsYXJGYWN0b3InOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLmFuZ3VsYXJGYWN0b3Iuc2V0KGRhdGEucHJvcHNbMF0sIGRhdGEucHJvcHNbMV0sIGRhdGEucHJvcHNbMl0pOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0TWFzcyc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0ubWFzcyA9IGRhdGEucHJvcHM7CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0udXBkYXRlTWFzc1Byb3BlcnRpZXMoKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldE1hdGVyaWFsJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5tYXRlcmlhbCA9IGRhdGEucHJvcHMgPyBjcmVhdGVNYXRlcmlhbChkYXRhLnByb3BzKSA6IG51bGw7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRMaW5lYXJEYW1waW5nJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5saW5lYXJEYW1waW5nID0gZGF0YS5wcm9wczsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldEFuZ3VsYXJEYW1waW5nJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5hbmd1bGFyRGFtcGluZyA9IGRhdGEucHJvcHM7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRBbGxvd1NsZWVwJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5hbGxvd1NsZWVwID0gZGF0YS5wcm9wczsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldFNsZWVwU3BlZWRMaW1pdCc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uc2xlZXBTcGVlZExpbWl0ID0gZGF0YS5wcm9wczsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldFNsZWVwVGltZUxpbWl0JzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5zbGVlcFRpbWVMaW1pdCA9IGRhdGEucHJvcHM7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRDb2xsaXNpb25GaWx0ZXJHcm91cCc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uY29sbGlzaW9uRmlsdGVyR3JvdXAgPSBkYXRhLnByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0Q29sbGlzaW9uRmlsdGVyTWFzayc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uY29sbGlzaW9uRmlsdGVyTWFzayA9IGRhdGEucHJvcHM7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRDb2xsaXNpb25SZXNwb25zZSc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uY29sbGlzaW9uUmVzcG9uc2UgPSBkYXRhLnByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0Rml4ZWRSb3RhdGlvbic6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uZml4ZWRSb3RhdGlvbiA9IGRhdGEucHJvcHM7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRGcmljdGlvbkdyYXZpdHknOgogICAgICAgIHN0YXRlLndvcmxkLmZyaWN0aW9uR3Jhdml0eSA9IGRhdGEucHJvcHMgPyBuZXcgVmVjMyguLi5kYXRhLnByb3BzKSA6IHVuZGVmaW5lZDsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldElzVHJpZ2dlcic6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uaXNUcmlnZ2VyID0gZGF0YS5wcm9wczsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldEdyYXZpdHknOgogICAgICAgIHN0YXRlLndvcmxkLmdyYXZpdHkuc2V0KGRhdGEucHJvcHNbMF0sIGRhdGEucHJvcHNbMV0sIGRhdGEucHJvcHNbMl0pOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0VG9sZXJhbmNlJzoKICAgICAgICBpZiAoc3RhdGUud29ybGQuc29sdmVyIGluc3RhbmNlb2YgR1NTb2x2ZXIpIHsKICAgICAgICAgIHN0YXRlLndvcmxkLnNvbHZlci50b2xlcmFuY2UgPSBkYXRhLnByb3BzOwogICAgICAgIH0KCiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRJdGVyYXRpb25zJzoKICAgICAgICBpZiAoc3RhdGUud29ybGQuc29sdmVyIGluc3RhbmNlb2YgR1NTb2x2ZXIpIHsKICAgICAgICAgIHN0YXRlLndvcmxkLnNvbHZlci5pdGVyYXRpb25zID0gZGF0YS5wcm9wczsKICAgICAgICB9CgogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0QnJvYWRwaGFzZSc6CiAgICAgICAgc3RhdGUud29ybGQuYnJvYWRwaGFzZSA9IG5ldyAoYnJvYWRwaGFzZXNbYCR7ZGF0YS5wcm9wc31Ccm9hZHBoYXNlYF0gfHwgTmFpdmVCcm9hZHBoYXNlKShzdGF0ZS53b3JsZCk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRBeGlzSW5kZXgnOgogICAgICAgIGlmIChzdGF0ZS53b3JsZC5icm9hZHBoYXNlIGluc3RhbmNlb2YgU0FQQnJvYWRwaGFzZSkgewogICAgICAgICAgc3RhdGUud29ybGQuYnJvYWRwaGFzZS5heGlzSW5kZXggPSBkYXRhLnByb3BzID09PSB1bmRlZmluZWQgfHwgZGF0YS5wcm9wcyA9PT0gbnVsbCA/IDAgOiBkYXRhLnByb3BzOwogICAgICAgIH0KCiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdhcHBseUZvcmNlJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5hcHBseUZvcmNlKG5ldyBWZWMzKC4uLmRhdGEucHJvcHNbMF0pLCBuZXcgVmVjMyguLi5kYXRhLnByb3BzWzFdKSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdhcHBseUltcHVsc2UnOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLmFwcGx5SW1wdWxzZShuZXcgVmVjMyguLi5kYXRhLnByb3BzWzBdKSwgbmV3IFZlYzMoLi4uZGF0YS5wcm9wc1sxXSkpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnYXBwbHlMb2NhbEZvcmNlJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5hcHBseUxvY2FsRm9yY2UobmV3IFZlYzMoLi4uZGF0YS5wcm9wc1swXSksIG5ldyBWZWMzKC4uLmRhdGEucHJvcHNbMV0pKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ2FwcGx5TG9jYWxJbXB1bHNlJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5hcHBseUxvY2FsSW1wdWxzZShuZXcgVmVjMyguLi5kYXRhLnByb3BzWzBdKSwgbmV3IFZlYzMoLi4uZGF0YS5wcm9wc1sxXSkpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnYXBwbHlUb3JxdWUnOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLmFwcGx5VG9ycXVlKG5ldyBWZWMzKC4uLmRhdGEucHJvcHNbMF0pKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ2FkZENvbnN0cmFpbnQnOgogICAgICAgIHsKICAgICAgICAgIGFkZENvbnN0cmFpbnQoc3RhdGUsIGRhdGEpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAncmVtb3ZlQ29uc3RyYWludCc6CiAgICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKF9yZWYyID0+IHsKICAgICAgICAgIGxldCB7CiAgICAgICAgICAgIHV1aWQKICAgICAgICAgIH0gPSBfcmVmMjsKICAgICAgICAgIHJldHVybiB1dWlkID09PSBkYXRhLnV1aWQ7CiAgICAgICAgfSkubWFwKGMgPT4gc3RhdGUud29ybGQucmVtb3ZlQ29uc3RyYWludChjKSk7CgogICAgICAgIGlmIChzdGF0ZS5jb25zdHJhaW50c1tkYXRhLnV1aWRdKSB7CiAgICAgICAgICBzdGF0ZS53b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb3N0U3RlcCcsIHN0YXRlLmNvbnN0cmFpbnRzW2RhdGEudXVpZF0pOwogICAgICAgICAgZGVsZXRlIHN0YXRlLmNvbnN0cmFpbnRzW2RhdGEudXVpZF07CiAgICAgICAgfQoKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ2VuYWJsZUNvbnN0cmFpbnQnOgogICAgICAgIHN0YXRlLndvcmxkLmNvbnN0cmFpbnRzLmZpbHRlcihjID0+IGMudXVpZCA9PT0gZGF0YS51dWlkKS5tYXAoYyA9PiBjLmVuYWJsZSgpKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ2Rpc2FibGVDb25zdHJhaW50JzoKICAgICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50cy5maWx0ZXIoYyA9PiBjLnV1aWQgPT09IGRhdGEudXVpZCkubWFwKGMgPT4gYy5kaXNhYmxlKCkpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnZW5hYmxlQ29uc3RyYWludE1vdG9yJzoKICAgICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50cy5maWx0ZXIoYyA9PiBjLnV1aWQgPT09IGRhdGEudXVpZCkuZmlsdGVyKGlzSGluZ2VDb25zdHJhaW50KS5tYXAoYyA9PiBjLmVuYWJsZU1vdG9yKCkpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnZGlzYWJsZUNvbnN0cmFpbnRNb3Rvcic6CiAgICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKGMgPT4gYy51dWlkID09PSBkYXRhLnV1aWQpLmZpbHRlcihpc0hpbmdlQ29uc3RyYWludCkubWFwKGMgPT4gYy5kaXNhYmxlTW90b3IoKSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRDb25zdHJhaW50TW90b3JTcGVlZCc6CiAgICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKGMgPT4gYy51dWlkID09PSBkYXRhLnV1aWQpLmZpbHRlcihpc0hpbmdlQ29uc3RyYWludCkubWFwKGMgPT4gYy5zZXRNb3RvclNwZWVkKGRhdGEucHJvcHMpKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldENvbnN0cmFpbnRNb3Rvck1heEZvcmNlJzoKICAgICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50cy5maWx0ZXIoYyA9PiBjLnV1aWQgPT09IGRhdGEudXVpZCkuZmlsdGVyKGlzSGluZ2VDb25zdHJhaW50KS5tYXAoYyA9PiBjLnNldE1vdG9yTWF4Rm9yY2UoZGF0YS5wcm9wcykpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnYWRkU3ByaW5nJzoKICAgICAgICB7CiAgICAgICAgICBhZGRTcHJpbmcoc3RhdGUsIGRhdGEpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc2V0U3ByaW5nU3RpZmZuZXNzJzoKICAgICAgICB7CiAgICAgICAgICBzdGF0ZS5zcHJpbmdJbnN0YW5jZXNbZGF0YS51dWlkXS5zdGlmZm5lc3MgPSBkYXRhLnByb3BzOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc2V0U3ByaW5nUmVzdExlbmd0aCc6CiAgICAgICAgewogICAgICAgICAgc3RhdGUuc3ByaW5nSW5zdGFuY2VzW2RhdGEudXVpZF0ucmVzdExlbmd0aCA9IGRhdGEucHJvcHM7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdzZXRTcHJpbmdEYW1waW5nJzoKICAgICAgICB7CiAgICAgICAgICBzdGF0ZS5zcHJpbmdJbnN0YW5jZXNbZGF0YS51dWlkXS5kYW1waW5nID0gZGF0YS5wcm9wczsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3JlbW92ZVNwcmluZyc6CiAgICAgICAgewogICAgICAgICAgc3RhdGUud29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9zdFN0ZXAnLCBzdGF0ZS5zcHJpbmdzW2RhdGEudXVpZF0pOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnYWRkUmF5JzoKICAgICAgICB7CiAgICAgICAgICBhZGRSYXkoc3RhdGUsIGRhdGEpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAncmVtb3ZlUmF5JzoKICAgICAgICB7CiAgICAgICAgICBzdGF0ZS53b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdwcmVTdGVwJywgc3RhdGUucmF5c1tkYXRhLnV1aWRdKTsKICAgICAgICAgIGRlbGV0ZSBzdGF0ZS5yYXlzW2RhdGEudXVpZF07CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdhZGRSYXljYXN0VmVoaWNsZSc6CiAgICAgICAgewogICAgICAgICAgYWRkUmF5Y2FzdFZlaGljbGUoc3RhdGUsIGRhdGEpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAncmVtb3ZlUmF5Y2FzdFZlaGljbGUnOgogICAgICAgIHsKICAgICAgICAgIHN0YXRlLndvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCBzdGF0ZS52ZWhpY2xlc1tkYXRhLnV1aWRdLnByZVN0ZXApOwogICAgICAgICAgc3RhdGUud29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9zdFN0ZXAnLCBzdGF0ZS52ZWhpY2xlc1tkYXRhLnV1aWRdLnBvc3RTdGVwKTsKICAgICAgICAgIHN0YXRlLnZlaGljbGVzW2RhdGEudXVpZF0udmVoaWNsZS53b3JsZCA9IG51bGw7CiAgICAgICAgICBkZWxldGUgc3RhdGUudmVoaWNsZXNbZGF0YS51dWlkXTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3NldFJheWNhc3RWZWhpY2xlU3RlZXJpbmdWYWx1ZSc6CiAgICAgICAgewogICAgICAgICAgY29uc3QgW3ZhbHVlLCB3aGVlbEluZGV4XSA9IGRhdGEucHJvcHM7CiAgICAgICAgICBzdGF0ZS52ZWhpY2xlc1tkYXRhLnV1aWRdLnZlaGljbGUuc2V0U3RlZXJpbmdWYWx1ZSh2YWx1ZSwgd2hlZWxJbmRleCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdhcHBseVJheWNhc3RWZWhpY2xlRW5naW5lRm9yY2UnOgogICAgICAgIHsKICAgICAgICAgIGNvbnN0IFt2YWx1ZSwgd2hlZWxJbmRleF0gPSBkYXRhLnByb3BzOwogICAgICAgICAgc3RhdGUudmVoaWNsZXNbZGF0YS51dWlkXS52ZWhpY2xlLmFwcGx5RW5naW5lRm9yY2UodmFsdWUsIHdoZWVsSW5kZXgpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc2V0UmF5Y2FzdFZlaGljbGVCcmFrZSc6CiAgICAgICAgewogICAgICAgICAgY29uc3QgW2JyYWtlLCB3aGVlbEluZGV4XSA9IGRhdGEucHJvcHM7CiAgICAgICAgICBzdGF0ZS52ZWhpY2xlc1tkYXRhLnV1aWRdLnZlaGljbGUuc2V0QnJha2UoYnJha2UsIHdoZWVsSW5kZXgpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnYWRkQ29udGFjdE1hdGVyaWFsJzoKICAgICAgICB7CiAgICAgICAgICBhZGRDb250YWN0TWF0ZXJpYWwoc3RhdGUud29ybGQsIGNyZWF0ZU1hdGVyaWFsLCBkYXRhLnByb3BzLCBkYXRhLnV1aWQpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAncmVtb3ZlQ29udGFjdE1hdGVyaWFsJzoKICAgICAgICB7CiAgICAgICAgICByZW1vdmVDb250YWN0TWF0ZXJpYWwoc3RhdGUud29ybGQsIGRhdGEudXVpZCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICd3YWtlVXAnOgogICAgICAgIHsKICAgICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLndha2VVcCgpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc2xlZXAnOgogICAgICAgIHsKICAgICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLnNsZWVwKCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICB9CiAgfTsKCn0pKCk7Cgo=', null, false);\n/* eslint-enable */\n\nclass CannonWorkerAPI extends EventEmitter$1 {\n  get axisIndex() {\n    return this.config.axisIndex;\n  }\n\n  set axisIndex(value) {\n    this.config.axisIndex = value;\n    this.postMessage({\n      op: 'setAxisIndex',\n      props: value\n    });\n  }\n\n  get broadphase() {\n    return this.config.broadphase;\n  }\n\n  set broadphase(value) {\n    this.config.broadphase = value;\n    this.postMessage({\n      op: 'setBroadphase',\n      props: value\n    });\n  }\n\n  get frictionGravity() {\n    return this.config.frictionGravity;\n  }\n\n  set frictionGravity(value) {\n    this.config.frictionGravity = value;\n    this.postMessage({\n      op: 'setFrictionGravity',\n      props: value\n    });\n  }\n\n  get gravity() {\n    return this.config.gravity;\n  }\n\n  set gravity(value) {\n    this.config.gravity = value;\n    this.postMessage({\n      op: 'setGravity',\n      props: value\n    });\n  }\n\n  get iterations() {\n    return this.config.iterations;\n  }\n\n  set iterations(value) {\n    this.config.iterations = value;\n    this.postMessage({\n      op: 'setIterations',\n      props: value\n    });\n  }\n\n  get tolerance() {\n    return this.config.tolerance;\n  }\n\n  set tolerance(value) {\n    this.config.tolerance = value;\n    this.postMessage({\n      op: 'setTolerance',\n      props: value\n    });\n  }\n\n  constructor(_ref) {\n    let {\n      allowSleep = false,\n      axisIndex = 0,\n      broadphase = 'Naive',\n      defaultContactMaterial = {\n        contactEquationStiffness: 1e6\n      },\n      frictionGravity = null,\n      gravity = [0, -9.81, 0],\n      iterations = 5,\n      quatNormalizeFast = false,\n      quatNormalizeSkip = 0,\n      size = 1000,\n      solver = 'GS',\n      tolerance = 0.001\n    } = _ref;\n    super();\n    this.messageQueue = [];\n    this.worker = null;\n    this.config = {\n      allowSleep,\n      axisIndex,\n      broadphase,\n      defaultContactMaterial,\n      frictionGravity,\n      gravity,\n      iterations,\n      quatNormalizeFast,\n      quatNormalizeSkip,\n      size,\n      solver,\n      tolerance\n    };\n    this.buffers = {\n      positions: new Float32Array(size * 3),\n      quaternions: new Float32Array(size * 4)\n    };\n  }\n\n  addBodies(_ref2) {\n    let {\n      props,\n      type,\n      uuid\n    } = _ref2;\n    this.postMessage({\n      op: 'addBodies',\n      props,\n      type,\n      uuid\n    });\n  }\n\n  addConstraint(_ref3) {\n    let {\n      props: [refA, refB, optns],\n      type,\n      uuid\n    } = _ref3;\n    this.postMessage({\n      op: 'addConstraint',\n      props: [refA, refB, optns],\n      type,\n      uuid\n    });\n  }\n\n  addContactMaterial(_ref4) {\n    let {\n      props,\n      uuid\n    } = _ref4;\n    this.postMessage({\n      op: 'addContactMaterial',\n      props,\n      uuid\n    });\n  }\n\n  addRay(_ref5) {\n    let {\n      props,\n      uuid\n    } = _ref5;\n    this.postMessage({\n      op: 'addRay',\n      props,\n      uuid\n    });\n  }\n\n  addRaycastVehicle(_ref6) {\n    let {\n      props: [chassisBodyUUID, wheelUUIDs, wheelInfos, indexForwardAxis, indexRightAxis, indexUpAxis],\n      uuid\n    } = _ref6;\n    this.postMessage({\n      op: 'addRaycastVehicle',\n      props: [chassisBodyUUID, wheelUUIDs, wheelInfos, indexForwardAxis, indexRightAxis, indexUpAxis],\n      uuid\n    });\n  }\n\n  addSpring(_ref7) {\n    let {\n      props: [refA, refB, optns],\n      uuid\n    } = _ref7;\n    this.postMessage({\n      op: 'addSpring',\n      props: [refA, refB, optns],\n      uuid\n    });\n  }\n\n  applyForce(_ref8) {\n    let {\n      props,\n      uuid\n    } = _ref8;\n    this.postMessage({\n      op: 'applyForce',\n      props,\n      uuid\n    });\n  }\n\n  applyImpulse(_ref9) {\n    let {\n      props,\n      uuid\n    } = _ref9;\n    this.postMessage({\n      op: 'applyImpulse',\n      props,\n      uuid\n    });\n  }\n\n  applyLocalForce(_ref10) {\n    let {\n      props,\n      uuid\n    } = _ref10;\n    this.postMessage({\n      op: 'applyLocalForce',\n      props,\n      uuid\n    });\n  }\n\n  applyLocalImpulse(_ref11) {\n    let {\n      props,\n      uuid\n    } = _ref11;\n    this.postMessage({\n      op: 'applyLocalImpulse',\n      props,\n      uuid\n    });\n  }\n\n  applyRaycastVehicleEngineForce(_ref12) {\n    let {\n      props,\n      uuid\n    } = _ref12;\n    this.postMessage({\n      op: 'applyRaycastVehicleEngineForce',\n      props,\n      uuid\n    });\n  }\n\n  applyTorque(_ref13) {\n    let {\n      props,\n      uuid\n    } = _ref13;\n    this.postMessage({\n      op: 'applyTorque',\n      props,\n      uuid\n    });\n  }\n\n  connect() {\n    this.worker = new WorkerFactory();\n\n    this.worker.onmessage = message => {\n      if (message.data.op === 'frame') {\n        this.buffers.positions = message.data.positions;\n        this.buffers.quaternions = message.data.quaternions;\n        this.emit(message.data.op, message.data);\n        return;\n      }\n\n      this.emit(message.data.type, message.data);\n    };\n\n    for (const message of this.messageQueue) {\n      this.worker.postMessage(message);\n    }\n\n    this.messageQueue.length = 0;\n  }\n\n  disableConstraint(_ref14) {\n    let {\n      uuid\n    } = _ref14;\n    this.postMessage({\n      op: 'disableConstraint',\n      uuid\n    });\n  }\n\n  disableConstraintMotor(_ref15) {\n    let {\n      uuid\n    } = _ref15;\n    this.postMessage({\n      op: 'disableConstraintMotor',\n      uuid\n    });\n  }\n\n  disconnect() {\n    if (this.worker) this.worker.onmessage = null;\n  }\n\n  enableConstraint(_ref16) {\n    let {\n      uuid\n    } = _ref16;\n    this.postMessage({\n      op: 'enableConstraint',\n      uuid\n    });\n  }\n\n  enableConstraintMotor(_ref17) {\n    let {\n      uuid\n    } = _ref17;\n    this.postMessage({\n      op: 'enableConstraintMotor',\n      uuid\n    });\n  }\n\n  init() {\n    const {\n      allowSleep,\n      axisIndex,\n      broadphase,\n      defaultContactMaterial,\n      frictionGravity,\n      gravity,\n      iterations,\n      quatNormalizeFast,\n      quatNormalizeSkip,\n      solver,\n      tolerance\n    } = this.config;\n    this.postMessage({\n      op: 'init',\n      props: {\n        allowSleep,\n        axisIndex,\n        broadphase,\n        defaultContactMaterial,\n        frictionGravity,\n        gravity,\n        iterations,\n        quatNormalizeFast,\n        quatNormalizeSkip,\n        solver,\n        tolerance\n      }\n    });\n  }\n\n  removeBodies(_ref18) {\n    let {\n      uuid\n    } = _ref18;\n    this.postMessage({\n      op: 'removeBodies',\n      uuid\n    });\n  }\n\n  removeConstraint(_ref19) {\n    let {\n      uuid\n    } = _ref19;\n    this.postMessage({\n      op: 'removeConstraint',\n      uuid\n    });\n  }\n\n  removeContactMaterial(_ref20) {\n    let {\n      uuid\n    } = _ref20;\n    this.postMessage({\n      op: 'removeContactMaterial',\n      uuid\n    });\n  }\n\n  removeRay(_ref21) {\n    let {\n      uuid\n    } = _ref21;\n    this.postMessage({\n      op: 'removeRay',\n      uuid\n    });\n  }\n\n  removeRaycastVehicle(_ref22) {\n    let {\n      uuid\n    } = _ref22;\n    this.postMessage({\n      op: 'removeRaycastVehicle',\n      uuid\n    });\n  }\n\n  removeSpring(_ref23) {\n    let {\n      uuid\n    } = _ref23;\n    this.postMessage({\n      op: 'removeSpring',\n      uuid\n    });\n  }\n\n  setAllowSleep(_ref24) {\n    let {\n      props,\n      uuid\n    } = _ref24;\n    this.postMessage({\n      op: 'setAllowSleep',\n      props,\n      uuid\n    });\n  }\n\n  setAngularDamping(_ref25) {\n    let {\n      props,\n      uuid\n    } = _ref25;\n    this.postMessage({\n      op: 'setAngularDamping',\n      props,\n      uuid\n    });\n  }\n\n  setAngularFactor(_ref26) {\n    let {\n      props,\n      uuid\n    } = _ref26;\n    this.postMessage({\n      op: 'setAngularFactor',\n      props,\n      uuid\n    });\n  }\n\n  setAngularVelocity(_ref27) {\n    let {\n      props,\n      uuid\n    } = _ref27;\n    this.postMessage({\n      op: 'setAngularVelocity',\n      props,\n      uuid\n    });\n  }\n\n  setCollisionFilterGroup(_ref28) {\n    let {\n      props,\n      uuid\n    } = _ref28;\n    this.postMessage({\n      op: 'setCollisionFilterGroup',\n      props,\n      uuid\n    });\n  }\n\n  setCollisionFilterMask(_ref29) {\n    let {\n      props,\n      uuid\n    } = _ref29;\n    this.postMessage({\n      op: 'setCollisionFilterMask',\n      props,\n      uuid\n    });\n  }\n\n  setCollisionResponse(_ref30) {\n    let {\n      props,\n      uuid\n    } = _ref30;\n    this.postMessage({\n      op: 'setCollisionResponse',\n      props,\n      uuid\n    });\n  }\n\n  setConstraintMotorMaxForce(_ref31) {\n    let {\n      props,\n      uuid\n    } = _ref31;\n    this.postMessage({\n      op: 'setConstraintMotorMaxForce',\n      props,\n      uuid\n    });\n  }\n\n  setConstraintMotorSpeed(_ref32) {\n    let {\n      props,\n      uuid\n    } = _ref32;\n    this.postMessage({\n      op: 'setConstraintMotorSpeed',\n      props,\n      uuid\n    });\n  }\n\n  setFixedRotation(_ref33) {\n    let {\n      props,\n      uuid\n    } = _ref33;\n    this.postMessage({\n      op: 'setFixedRotation',\n      props,\n      uuid\n    });\n  }\n\n  setIsTrigger(_ref34) {\n    let {\n      props,\n      uuid\n    } = _ref34;\n    this.postMessage({\n      op: 'setIsTrigger',\n      props,\n      uuid\n    });\n  }\n\n  setLinearDamping(_ref35) {\n    let {\n      props,\n      uuid\n    } = _ref35;\n    this.postMessage({\n      op: 'setLinearDamping',\n      props,\n      uuid\n    });\n  }\n\n  setLinearFactor(_ref36) {\n    let {\n      props,\n      uuid\n    } = _ref36;\n    this.postMessage({\n      op: 'setLinearFactor',\n      props,\n      uuid\n    });\n  }\n\n  setMass(_ref37) {\n    let {\n      props,\n      uuid\n    } = _ref37;\n    this.postMessage({\n      op: 'setMass',\n      props,\n      uuid\n    });\n  }\n\n  setMaterial(_ref38) {\n    let {\n      props,\n      uuid\n    } = _ref38;\n    this.postMessage({\n      op: 'setMaterial',\n      props,\n      uuid\n    });\n  }\n\n  setPosition(_ref39) {\n    let {\n      props,\n      uuid\n    } = _ref39;\n    this.postMessage({\n      op: 'setPosition',\n      props,\n      uuid\n    });\n  }\n\n  setQuaternion(_ref40) {\n    let {\n      props: [x, y, z, w],\n      uuid\n    } = _ref40;\n    this.postMessage({\n      op: 'setQuaternion',\n      props: [x, y, z, w],\n      uuid\n    });\n  }\n\n  setRaycastVehicleBrake(_ref41) {\n    let {\n      props,\n      uuid\n    } = _ref41;\n    this.postMessage({\n      op: 'setRaycastVehicleBrake',\n      props,\n      uuid\n    });\n  }\n\n  setRaycastVehicleSteeringValue(_ref42) {\n    let {\n      props,\n      uuid\n    } = _ref42;\n    this.postMessage({\n      op: 'setRaycastVehicleSteeringValue',\n      props,\n      uuid\n    });\n  }\n\n  setRotation(_ref43) {\n    let {\n      props,\n      uuid\n    } = _ref43;\n    this.postMessage({\n      op: 'setRotation',\n      props,\n      uuid\n    });\n  }\n\n  setSleepSpeedLimit(_ref44) {\n    let {\n      props,\n      uuid\n    } = _ref44;\n    this.postMessage({\n      op: 'setSleepSpeedLimit',\n      props,\n      uuid\n    });\n  }\n\n  setSleepTimeLimit(_ref45) {\n    let {\n      props,\n      uuid\n    } = _ref45;\n    this.postMessage({\n      op: 'setSleepTimeLimit',\n      props,\n      uuid\n    });\n  }\n\n  setSpringDamping(_ref46) {\n    let {\n      props,\n      uuid\n    } = _ref46;\n    this.postMessage({\n      op: 'setSpringDamping',\n      props,\n      uuid\n    });\n  }\n\n  setSpringRestLength(_ref47) {\n    let {\n      props,\n      uuid\n    } = _ref47;\n    this.postMessage({\n      op: 'setSpringRestLength',\n      props,\n      uuid\n    });\n  }\n\n  setSpringStiffness(_ref48) {\n    let {\n      props,\n      uuid\n    } = _ref48;\n    this.postMessage({\n      op: 'setSpringStiffness',\n      props,\n      uuid\n    });\n  }\n\n  setUserData(_ref49) {\n    let {\n      props,\n      uuid\n    } = _ref49;\n    this.postMessage({\n      op: 'setUserData',\n      props,\n      uuid\n    });\n  }\n\n  setVelocity(_ref50) {\n    let {\n      props,\n      uuid\n    } = _ref50;\n    this.postMessage({\n      op: 'setVelocity',\n      props,\n      uuid\n    });\n  }\n\n  sleep(_ref51) {\n    let {\n      uuid\n    } = _ref51;\n    this.postMessage({\n      op: 'sleep',\n      uuid\n    });\n  }\n\n  step(props) {\n    var _this$worker;\n\n    const {\n      buffers: {\n        positions,\n        quaternions\n      }\n    } = this;\n    if (!positions.byteLength && !quaternions.byteLength) return;\n    (_this$worker = this.worker) == null ? void 0 : _this$worker.postMessage({\n      op: 'step',\n      positions,\n      props,\n      quaternions\n    }, [positions.buffer, quaternions.buffer]);\n  }\n\n  subscribe(_ref52) {\n    let {\n      props: {\n        id,\n        target,\n        type\n      },\n      uuid\n    } = _ref52;\n    this.postMessage({\n      op: 'subscribe',\n      props: {\n        id,\n        target,\n        type\n      },\n      uuid\n    });\n  }\n\n  terminate() {\n    var _this$worker2;\n\n    (_this$worker2 = this.worker) == null ? void 0 : _this$worker2.terminate();\n    this.worker = null;\n  }\n\n  unsubscribe(_ref53) {\n    let {\n      props\n    } = _ref53;\n    this.postMessage({\n      op: 'unsubscribe',\n      props\n    });\n  }\n\n  wakeUp(_ref54) {\n    let {\n      uuid\n    } = _ref54;\n    this.postMessage({\n      op: 'wakeUp',\n      uuid\n    });\n  }\n\n  postMessage(message) {\n    if (this.worker) return this.worker.postMessage(message);\n    this.messageQueue.push(message);\n  }\n\n}\n\n/**\n * Records what objects are colliding with each other\n */\n\n/**\n * A 3x3 matrix.\n * Authored by {@link http://github.com/schteppe/ schteppe}\n */\nclass Mat3$1 {\n  /**\n   * A vector of length 9, containing all matrix elements.\n   */\n\n  /**\n   * @param elements A vector of length 9, containing all matrix elements.\n   */\n  constructor(elements) {\n    if (elements === void 0) {\n      elements = [0, 0, 0, 0, 0, 0, 0, 0, 0];\n    }\n\n    this.elements = elements;\n  }\n  /**\n   * Sets the matrix to identity\n   * @todo Should perhaps be renamed to `setIdentity()` to be more clear.\n   * @todo Create another function that immediately creates an identity matrix eg. `eye()`\n   */\n\n\n  identity() {\n    const e = this.elements;\n    e[0] = 1;\n    e[1] = 0;\n    e[2] = 0;\n    e[3] = 0;\n    e[4] = 1;\n    e[5] = 0;\n    e[6] = 0;\n    e[7] = 0;\n    e[8] = 1;\n  }\n  /**\n   * Set all elements to zero\n   */\n\n\n  setZero() {\n    const e = this.elements;\n    e[0] = 0;\n    e[1] = 0;\n    e[2] = 0;\n    e[3] = 0;\n    e[4] = 0;\n    e[5] = 0;\n    e[6] = 0;\n    e[7] = 0;\n    e[8] = 0;\n  }\n  /**\n   * Sets the matrix diagonal elements from a Vec3\n   */\n\n\n  setTrace(vector) {\n    const e = this.elements;\n    e[0] = vector.x;\n    e[4] = vector.y;\n    e[8] = vector.z;\n  }\n  /**\n   * Gets the matrix diagonal elements\n   */\n\n\n  getTrace(target) {\n    if (target === void 0) {\n      target = new Vec3$1();\n    }\n\n    const e = this.elements;\n    target.x = e[0];\n    target.y = e[4];\n    target.z = e[8];\n    return target;\n  }\n  /**\n   * Matrix-Vector multiplication\n   * @param v The vector to multiply with\n   * @param target Optional, target to save the result in.\n   */\n\n\n  vmult(v, target) {\n    if (target === void 0) {\n      target = new Vec3$1();\n    }\n\n    const e = this.elements;\n    const x = v.x;\n    const y = v.y;\n    const z = v.z;\n    target.x = e[0] * x + e[1] * y + e[2] * z;\n    target.y = e[3] * x + e[4] * y + e[5] * z;\n    target.z = e[6] * x + e[7] * y + e[8] * z;\n    return target;\n  }\n  /**\n   * Matrix-scalar multiplication\n   */\n\n\n  smult(s) {\n    for (let i = 0; i < this.elements.length; i++) {\n      this.elements[i] *= s;\n    }\n  }\n  /**\n   * Matrix multiplication\n   * @param matrix Matrix to multiply with from left side.\n   */\n\n\n  mmult(matrix, target) {\n    if (target === void 0) {\n      target = new Mat3$1();\n    }\n\n    const A = this.elements;\n    const B = matrix.elements;\n    const T = target.elements;\n    const a11 = A[0],\n          a12 = A[1],\n          a13 = A[2],\n          a21 = A[3],\n          a22 = A[4],\n          a23 = A[5],\n          a31 = A[6],\n          a32 = A[7],\n          a33 = A[8];\n    const b11 = B[0],\n          b12 = B[1],\n          b13 = B[2],\n          b21 = B[3],\n          b22 = B[4],\n          b23 = B[5],\n          b31 = B[6],\n          b32 = B[7],\n          b33 = B[8];\n    T[0] = a11 * b11 + a12 * b21 + a13 * b31;\n    T[1] = a11 * b12 + a12 * b22 + a13 * b32;\n    T[2] = a11 * b13 + a12 * b23 + a13 * b33;\n    T[3] = a21 * b11 + a22 * b21 + a23 * b31;\n    T[4] = a21 * b12 + a22 * b22 + a23 * b32;\n    T[5] = a21 * b13 + a22 * b23 + a23 * b33;\n    T[6] = a31 * b11 + a32 * b21 + a33 * b31;\n    T[7] = a31 * b12 + a32 * b22 + a33 * b32;\n    T[8] = a31 * b13 + a32 * b23 + a33 * b33;\n    return target;\n  }\n  /**\n   * Scale each column of the matrix\n   */\n\n\n  scale(vector, target) {\n    if (target === void 0) {\n      target = new Mat3$1();\n    }\n\n    const e = this.elements;\n    const t = target.elements;\n\n    for (let i = 0; i !== 3; i++) {\n      t[3 * i + 0] = vector.x * e[3 * i + 0];\n      t[3 * i + 1] = vector.y * e[3 * i + 1];\n      t[3 * i + 2] = vector.z * e[3 * i + 2];\n    }\n\n    return target;\n  }\n  /**\n   * Solve Ax=b\n   * @param b The right hand side\n   * @param target Optional. Target vector to save in.\n   * @return The solution x\n   * @todo should reuse arrays\n   */\n\n\n  solve(b, target) {\n    if (target === void 0) {\n      target = new Vec3$1();\n    }\n\n    // Construct equations\n    const nr = 3; // num rows\n\n    const nc = 4; // num cols\n\n    const eqns = [];\n    let i;\n    let j;\n\n    for (i = 0; i < nr * nc; i++) {\n      eqns.push(0);\n    }\n\n    for (i = 0; i < 3; i++) {\n      for (j = 0; j < 3; j++) {\n        eqns[i + nc * j] = this.elements[i + 3 * j];\n      }\n    }\n\n    eqns[3 + 4 * 0] = b.x;\n    eqns[3 + 4 * 1] = b.y;\n    eqns[3 + 4 * 2] = b.z; // Compute right upper triangular version of the matrix - Gauss elimination\n\n    let n = 3;\n    const k = n;\n    let np;\n    const kp = 4; // num rows\n\n    let p;\n\n    do {\n      i = k - n;\n\n      if (eqns[i + nc * i] === 0) {\n        // the pivot is null, swap lines\n        for (j = i + 1; j < k; j++) {\n          if (eqns[i + nc * j] !== 0) {\n            np = kp;\n\n            do {\n              // do ligne( i ) = ligne( i ) + ligne( k )\n              p = kp - np;\n              eqns[p + nc * i] += eqns[p + nc * j];\n            } while (--np);\n\n            break;\n          }\n        }\n      }\n\n      if (eqns[i + nc * i] !== 0) {\n        for (j = i + 1; j < k; j++) {\n          const multiplier = eqns[i + nc * j] / eqns[i + nc * i];\n          np = kp;\n\n          do {\n            // do ligne( k ) = ligne( k ) - multiplier * ligne( i )\n            p = kp - np;\n            eqns[p + nc * j] = p <= i ? 0 : eqns[p + nc * j] - eqns[p + nc * i] * multiplier;\n          } while (--np);\n        }\n      }\n    } while (--n); // Get the solution\n\n\n    target.z = eqns[2 * nc + 3] / eqns[2 * nc + 2];\n    target.y = (eqns[1 * nc + 3] - eqns[1 * nc + 2] * target.z) / eqns[1 * nc + 1];\n    target.x = (eqns[0 * nc + 3] - eqns[0 * nc + 2] * target.z - eqns[0 * nc + 1] * target.y) / eqns[0 * nc + 0];\n\n    if (isNaN(target.x) || isNaN(target.y) || isNaN(target.z) || target.x === Infinity || target.y === Infinity || target.z === Infinity) {\n      throw `Could not solve equation! Got x=[${target.toString()}], b=[${b.toString()}], A=[${this.toString()}]`;\n    }\n\n    return target;\n  }\n  /**\n   * Get an element in the matrix by index. Index starts at 0, not 1!!!\n   * @param value If provided, the matrix element will be set to this value.\n   */\n\n\n  e(row, column, value) {\n    if (value === undefined) {\n      return this.elements[column + 3 * row];\n    } else {\n      // Set value\n      this.elements[column + 3 * row] = value;\n    }\n  }\n  /**\n   * Copy another matrix into this matrix object.\n   */\n\n\n  copy(matrix) {\n    for (let i = 0; i < matrix.elements.length; i++) {\n      this.elements[i] = matrix.elements[i];\n    }\n\n    return this;\n  }\n  /**\n   * Returns a string representation of the matrix.\n   */\n\n\n  toString() {\n    let r = '';\n    const sep = ',';\n\n    for (let i = 0; i < 9; i++) {\n      r += this.elements[i] + sep;\n    }\n\n    return r;\n  }\n  /**\n   * reverse the matrix\n   * @param target Target matrix to save in.\n   * @return The solution x\n   */\n\n\n  reverse(target) {\n    if (target === void 0) {\n      target = new Mat3$1();\n    }\n\n    // Construct equations\n    const nr = 3; // num rows\n\n    const nc = 6; // num cols\n\n    const eqns = reverse_eqns$1;\n    let i;\n    let j;\n\n    for (i = 0; i < 3; i++) {\n      for (j = 0; j < 3; j++) {\n        eqns[i + nc * j] = this.elements[i + 3 * j];\n      }\n    }\n\n    eqns[3 + 6 * 0] = 1;\n    eqns[3 + 6 * 1] = 0;\n    eqns[3 + 6 * 2] = 0;\n    eqns[4 + 6 * 0] = 0;\n    eqns[4 + 6 * 1] = 1;\n    eqns[4 + 6 * 2] = 0;\n    eqns[5 + 6 * 0] = 0;\n    eqns[5 + 6 * 1] = 0;\n    eqns[5 + 6 * 2] = 1; // Compute right upper triangular version of the matrix - Gauss elimination\n\n    let n = 3;\n    const k = n;\n    let np;\n    const kp = nc; // num rows\n\n    let p;\n\n    do {\n      i = k - n;\n\n      if (eqns[i + nc * i] === 0) {\n        // the pivot is null, swap lines\n        for (j = i + 1; j < k; j++) {\n          if (eqns[i + nc * j] !== 0) {\n            np = kp;\n\n            do {\n              // do line( i ) = line( i ) + line( k )\n              p = kp - np;\n              eqns[p + nc * i] += eqns[p + nc * j];\n            } while (--np);\n\n            break;\n          }\n        }\n      }\n\n      if (eqns[i + nc * i] !== 0) {\n        for (j = i + 1; j < k; j++) {\n          const multiplier = eqns[i + nc * j] / eqns[i + nc * i];\n          np = kp;\n\n          do {\n            // do line( k ) = line( k ) - multiplier * line( i )\n            p = kp - np;\n            eqns[p + nc * j] = p <= i ? 0 : eqns[p + nc * j] - eqns[p + nc * i] * multiplier;\n          } while (--np);\n        }\n      }\n    } while (--n); // eliminate the upper left triangle of the matrix\n\n\n    i = 2;\n\n    do {\n      j = i - 1;\n\n      do {\n        const multiplier = eqns[i + nc * j] / eqns[i + nc * i];\n        np = nc;\n\n        do {\n          p = nc - np;\n          eqns[p + nc * j] = eqns[p + nc * j] - eqns[p + nc * i] * multiplier;\n        } while (--np);\n      } while (j--);\n    } while (--i); // operations on the diagonal\n\n\n    i = 2;\n\n    do {\n      const multiplier = 1 / eqns[i + nc * i];\n      np = nc;\n\n      do {\n        p = nc - np;\n        eqns[p + nc * i] = eqns[p + nc * i] * multiplier;\n      } while (--np);\n    } while (i--);\n\n    i = 2;\n\n    do {\n      j = 2;\n\n      do {\n        p = eqns[nr + j + nc * i];\n\n        if (isNaN(p) || p === Infinity) {\n          throw `Could not reverse! A=[${this.toString()}]`;\n        }\n\n        target.e(i, j, p);\n      } while (j--);\n    } while (i--);\n\n    return target;\n  }\n  /**\n   * Set the matrix from a quaterion\n   */\n\n\n  setRotationFromQuaternion(q) {\n    const x = q.x;\n    const y = q.y;\n    const z = q.z;\n    const w = q.w;\n    const x2 = x + x;\n    const y2 = y + y;\n    const z2 = z + z;\n    const xx = x * x2;\n    const xy = x * y2;\n    const xz = x * z2;\n    const yy = y * y2;\n    const yz = y * z2;\n    const zz = z * z2;\n    const wx = w * x2;\n    const wy = w * y2;\n    const wz = w * z2;\n    const e = this.elements;\n    e[3 * 0 + 0] = 1 - (yy + zz);\n    e[3 * 0 + 1] = xy - wz;\n    e[3 * 0 + 2] = xz + wy;\n    e[3 * 1 + 0] = xy + wz;\n    e[3 * 1 + 1] = 1 - (xx + zz);\n    e[3 * 1 + 2] = yz - wx;\n    e[3 * 2 + 0] = xz - wy;\n    e[3 * 2 + 1] = yz + wx;\n    e[3 * 2 + 2] = 1 - (xx + yy);\n    return this;\n  }\n  /**\n   * Transpose the matrix\n   * @param target Optional. Where to store the result.\n   * @return The target Mat3, or a new Mat3 if target was omitted.\n   */\n\n\n  transpose(target) {\n    if (target === void 0) {\n      target = new Mat3$1();\n    }\n\n    const M = this.elements;\n    const T = target.elements;\n    let tmp; //Set diagonals\n\n    T[0] = M[0];\n    T[4] = M[4];\n    T[8] = M[8];\n    tmp = M[1];\n    T[1] = M[3];\n    T[3] = tmp;\n    tmp = M[2];\n    T[2] = M[6];\n    T[6] = tmp;\n    tmp = M[5];\n    T[5] = M[7];\n    T[7] = tmp;\n    return target;\n  }\n\n}\nconst reverse_eqns$1 = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n\n/**\n * 3-dimensional vector\n * @example\n *     const v = new Vec3(1, 2, 3)\n *     console.log('x=' + v.x) // x=1\n */\n\nclass Vec3$1 {\n  constructor(x, y, z) {\n    if (x === void 0) {\n      x = 0.0;\n    }\n\n    if (y === void 0) {\n      y = 0.0;\n    }\n\n    if (z === void 0) {\n      z = 0.0;\n    }\n\n    this.x = x;\n    this.y = y;\n    this.z = z;\n  }\n  /**\n   * Vector cross product\n   * @param target Optional target to save in.\n   */\n\n\n  cross(vector, target) {\n    if (target === void 0) {\n      target = new Vec3$1();\n    }\n\n    const vx = vector.x;\n    const vy = vector.y;\n    const vz = vector.z;\n    const x = this.x;\n    const y = this.y;\n    const z = this.z;\n    target.x = y * vz - z * vy;\n    target.y = z * vx - x * vz;\n    target.z = x * vy - y * vx;\n    return target;\n  }\n  /**\n   * Set the vectors' 3 elements\n   */\n\n\n  set(x, y, z) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    return this;\n  }\n  /**\n   * Set all components of the vector to zero.\n   */\n\n\n  setZero() {\n    this.x = this.y = this.z = 0;\n  }\n  /**\n   * Vector addition\n   */\n\n\n  vadd(vector, target) {\n    if (target) {\n      target.x = vector.x + this.x;\n      target.y = vector.y + this.y;\n      target.z = vector.z + this.z;\n    } else {\n      return new Vec3$1(this.x + vector.x, this.y + vector.y, this.z + vector.z);\n    }\n  }\n  /**\n   * Vector subtraction\n   * @param target Optional target to save in.\n   */\n\n\n  vsub(vector, target) {\n    if (target) {\n      target.x = this.x - vector.x;\n      target.y = this.y - vector.y;\n      target.z = this.z - vector.z;\n    } else {\n      return new Vec3$1(this.x - vector.x, this.y - vector.y, this.z - vector.z);\n    }\n  }\n  /**\n   * Get the cross product matrix a_cross from a vector, such that a x b = a_cross * b = c\n   *\n   * See {@link https://www8.cs.umu.se/kurser/TDBD24/VT06/lectures/Lecture6.pdf Umeå University Lecture}\n   */\n\n\n  crossmat() {\n    return new Mat3$1([0, -this.z, this.y, this.z, 0, -this.x, -this.y, this.x, 0]);\n  }\n  /**\n   * Normalize the vector. Note that this changes the values in the vector.\n    * @return Returns the norm of the vector\n   */\n\n\n  normalize() {\n    const x = this.x;\n    const y = this.y;\n    const z = this.z;\n    const n = Math.sqrt(x * x + y * y + z * z);\n\n    if (n > 0.0) {\n      const invN = 1 / n;\n      this.x *= invN;\n      this.y *= invN;\n      this.z *= invN;\n    } else {\n      // Make something up\n      this.x = 0;\n      this.y = 0;\n      this.z = 0;\n    }\n\n    return n;\n  }\n  /**\n   * Get the version of this vector that is of length 1.\n   * @param target Optional target to save in\n   * @return Returns the unit vector\n   */\n\n\n  unit(target) {\n    if (target === void 0) {\n      target = new Vec3$1();\n    }\n\n    const x = this.x;\n    const y = this.y;\n    const z = this.z;\n    let ninv = Math.sqrt(x * x + y * y + z * z);\n\n    if (ninv > 0.0) {\n      ninv = 1.0 / ninv;\n      target.x = x * ninv;\n      target.y = y * ninv;\n      target.z = z * ninv;\n    } else {\n      target.x = 1;\n      target.y = 0;\n      target.z = 0;\n    }\n\n    return target;\n  }\n  /**\n   * Get the length of the vector\n   */\n\n\n  length() {\n    const x = this.x;\n    const y = this.y;\n    const z = this.z;\n    return Math.sqrt(x * x + y * y + z * z);\n  }\n  /**\n   * Get the squared length of the vector.\n   */\n\n\n  lengthSquared() {\n    return this.dot(this);\n  }\n  /**\n   * Get distance from this point to another point\n   */\n\n\n  distanceTo(p) {\n    const x = this.x;\n    const y = this.y;\n    const z = this.z;\n    const px = p.x;\n    const py = p.y;\n    const pz = p.z;\n    return Math.sqrt((px - x) * (px - x) + (py - y) * (py - y) + (pz - z) * (pz - z));\n  }\n  /**\n   * Get squared distance from this point to another point\n   */\n\n\n  distanceSquared(p) {\n    const x = this.x;\n    const y = this.y;\n    const z = this.z;\n    const px = p.x;\n    const py = p.y;\n    const pz = p.z;\n    return (px - x) * (px - x) + (py - y) * (py - y) + (pz - z) * (pz - z);\n  }\n  /**\n   * Multiply all the components of the vector with a scalar.\n   * @param target The vector to save the result in.\n   */\n\n\n  scale(scalar, target) {\n    if (target === void 0) {\n      target = new Vec3$1();\n    }\n\n    const x = this.x;\n    const y = this.y;\n    const z = this.z;\n    target.x = scalar * x;\n    target.y = scalar * y;\n    target.z = scalar * z;\n    return target;\n  }\n  /**\n   * Multiply the vector with an other vector, component-wise.\n   * @param target The vector to save the result in.\n   */\n\n\n  vmul(vector, target) {\n    if (target === void 0) {\n      target = new Vec3$1();\n    }\n\n    target.x = vector.x * this.x;\n    target.y = vector.y * this.y;\n    target.z = vector.z * this.z;\n    return target;\n  }\n  /**\n   * Scale a vector and add it to this vector. Save the result in \"target\". (target = this + vector * scalar)\n   * @param target The vector to save the result in.\n   */\n\n\n  addScaledVector(scalar, vector, target) {\n    if (target === void 0) {\n      target = new Vec3$1();\n    }\n\n    target.x = this.x + scalar * vector.x;\n    target.y = this.y + scalar * vector.y;\n    target.z = this.z + scalar * vector.z;\n    return target;\n  }\n  /**\n   * Calculate dot product\n   * @param vector\n   */\n\n\n  dot(vector) {\n    return this.x * vector.x + this.y * vector.y + this.z * vector.z;\n  }\n\n  isZero() {\n    return this.x === 0 && this.y === 0 && this.z === 0;\n  }\n  /**\n   * Make the vector point in the opposite direction.\n   * @param target Optional target to save in\n   */\n\n\n  negate(target) {\n    if (target === void 0) {\n      target = new Vec3$1();\n    }\n\n    target.x = -this.x;\n    target.y = -this.y;\n    target.z = -this.z;\n    return target;\n  }\n  /**\n   * Compute two artificial tangents to the vector\n   * @param t1 Vector object to save the first tangent in\n   * @param t2 Vector object to save the second tangent in\n   */\n\n\n  tangents(t1, t2) {\n    const norm = this.length();\n\n    if (norm > 0.0) {\n      const n = Vec3_tangents_n$1;\n      const inorm = 1 / norm;\n      n.set(this.x * inorm, this.y * inorm, this.z * inorm);\n      const randVec = Vec3_tangents_randVec$1;\n\n      if (Math.abs(n.x) < 0.9) {\n        randVec.set(1, 0, 0);\n        n.cross(randVec, t1);\n      } else {\n        randVec.set(0, 1, 0);\n        n.cross(randVec, t1);\n      }\n\n      n.cross(t1, t2);\n    } else {\n      // The normal length is zero, make something up\n      t1.set(1, 0, 0);\n      t2.set(0, 1, 0);\n    }\n  }\n  /**\n   * Converts to a more readable format\n   */\n\n\n  toString() {\n    return `${this.x},${this.y},${this.z}`;\n  }\n  /**\n   * Converts to an array\n   */\n\n\n  toArray() {\n    return [this.x, this.y, this.z];\n  }\n  /**\n   * Copies value of source to this vector.\n   */\n\n\n  copy(vector) {\n    this.x = vector.x;\n    this.y = vector.y;\n    this.z = vector.z;\n    return this;\n  }\n  /**\n   * Do a linear interpolation between two vectors\n   * @param t A number between 0 and 1. 0 will make this function return u, and 1 will make it return v. Numbers in between will generate a vector in between them.\n   */\n\n\n  lerp(vector, t, target) {\n    const x = this.x;\n    const y = this.y;\n    const z = this.z;\n    target.x = x + (vector.x - x) * t;\n    target.y = y + (vector.y - y) * t;\n    target.z = z + (vector.z - z) * t;\n  }\n  /**\n   * Check if a vector equals is almost equal to another one.\n   */\n\n\n  almostEquals(vector, precision) {\n    if (precision === void 0) {\n      precision = 1e-6;\n    }\n\n    if (Math.abs(this.x - vector.x) > precision || Math.abs(this.y - vector.y) > precision || Math.abs(this.z - vector.z) > precision) {\n      return false;\n    }\n\n    return true;\n  }\n  /**\n   * Check if a vector is almost zero\n   */\n\n\n  almostZero(precision) {\n    if (precision === void 0) {\n      precision = 1e-6;\n    }\n\n    if (Math.abs(this.x) > precision || Math.abs(this.y) > precision || Math.abs(this.z) > precision) {\n      return false;\n    }\n\n    return true;\n  }\n  /**\n   * Check if the vector is anti-parallel to another vector.\n   * @param precision Set to zero for exact comparisons\n   */\n\n\n  isAntiparallelTo(vector, precision) {\n    this.negate(antip_neg$1);\n    return antip_neg$1.almostEquals(vector, precision);\n  }\n  /**\n   * Clone the vector\n   */\n\n\n  clone() {\n    return new Vec3$1(this.x, this.y, this.z);\n  }\n\n}\nVec3$1.ZERO = new Vec3$1(0, 0, 0);\nVec3$1.UNIT_X = new Vec3$1(1, 0, 0);\nVec3$1.UNIT_Y = new Vec3$1(0, 1, 0);\nVec3$1.UNIT_Z = new Vec3$1(0, 0, 1);\nconst Vec3_tangents_n$1 = new Vec3$1();\nconst Vec3_tangents_randVec$1 = new Vec3$1();\nconst antip_neg$1 = new Vec3$1();\n\n/**\n * Axis aligned bounding box class.\n */\nclass AABB$1 {\n  /**\n   * The lower bound of the bounding box\n   */\n\n  /**\n   * The upper bound of the bounding box\n   */\n  constructor(options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    this.lowerBound = new Vec3$1();\n    this.upperBound = new Vec3$1();\n\n    if (options.lowerBound) {\n      this.lowerBound.copy(options.lowerBound);\n    }\n\n    if (options.upperBound) {\n      this.upperBound.copy(options.upperBound);\n    }\n  }\n  /**\n   * Set the AABB bounds from a set of points.\n   * @param points An array of Vec3's.\n   * @return The self object\n   */\n\n\n  setFromPoints(points, position, quaternion, skinSize) {\n    const l = this.lowerBound;\n    const u = this.upperBound;\n    const q = quaternion; // Set to the first point\n\n    l.copy(points[0]);\n\n    if (q) {\n      q.vmult(l, l);\n    }\n\n    u.copy(l);\n\n    for (let i = 1; i < points.length; i++) {\n      let p = points[i];\n\n      if (q) {\n        q.vmult(p, tmp$1$1);\n        p = tmp$1$1;\n      }\n\n      if (p.x > u.x) {\n        u.x = p.x;\n      }\n\n      if (p.x < l.x) {\n        l.x = p.x;\n      }\n\n      if (p.y > u.y) {\n        u.y = p.y;\n      }\n\n      if (p.y < l.y) {\n        l.y = p.y;\n      }\n\n      if (p.z > u.z) {\n        u.z = p.z;\n      }\n\n      if (p.z < l.z) {\n        l.z = p.z;\n      }\n    } // Add offset\n\n\n    if (position) {\n      position.vadd(l, l);\n      position.vadd(u, u);\n    }\n\n    if (skinSize) {\n      l.x -= skinSize;\n      l.y -= skinSize;\n      l.z -= skinSize;\n      u.x += skinSize;\n      u.y += skinSize;\n      u.z += skinSize;\n    }\n\n    return this;\n  }\n  /**\n   * Copy bounds from an AABB to this AABB\n   * @param aabb Source to copy from\n   * @return The this object, for chainability\n   */\n\n\n  copy(aabb) {\n    this.lowerBound.copy(aabb.lowerBound);\n    this.upperBound.copy(aabb.upperBound);\n    return this;\n  }\n  /**\n   * Clone an AABB\n   */\n\n\n  clone() {\n    return new AABB$1().copy(this);\n  }\n  /**\n   * Extend this AABB so that it covers the given AABB too.\n   */\n\n\n  extend(aabb) {\n    this.lowerBound.x = Math.min(this.lowerBound.x, aabb.lowerBound.x);\n    this.upperBound.x = Math.max(this.upperBound.x, aabb.upperBound.x);\n    this.lowerBound.y = Math.min(this.lowerBound.y, aabb.lowerBound.y);\n    this.upperBound.y = Math.max(this.upperBound.y, aabb.upperBound.y);\n    this.lowerBound.z = Math.min(this.lowerBound.z, aabb.lowerBound.z);\n    this.upperBound.z = Math.max(this.upperBound.z, aabb.upperBound.z);\n  }\n  /**\n   * Returns true if the given AABB overlaps this AABB.\n   */\n\n\n  overlaps(aabb) {\n    const l1 = this.lowerBound;\n    const u1 = this.upperBound;\n    const l2 = aabb.lowerBound;\n    const u2 = aabb.upperBound; //      l2        u2\n    //      |---------|\n    // |--------|\n    // l1       u1\n\n    const overlapsX = l2.x <= u1.x && u1.x <= u2.x || l1.x <= u2.x && u2.x <= u1.x;\n    const overlapsY = l2.y <= u1.y && u1.y <= u2.y || l1.y <= u2.y && u2.y <= u1.y;\n    const overlapsZ = l2.z <= u1.z && u1.z <= u2.z || l1.z <= u2.z && u2.z <= u1.z;\n    return overlapsX && overlapsY && overlapsZ;\n  } // Mostly for debugging\n\n\n  volume() {\n    const l = this.lowerBound;\n    const u = this.upperBound;\n    return (u.x - l.x) * (u.y - l.y) * (u.z - l.z);\n  }\n  /**\n   * Returns true if the given AABB is fully contained in this AABB.\n   */\n\n\n  contains(aabb) {\n    const l1 = this.lowerBound;\n    const u1 = this.upperBound;\n    const l2 = aabb.lowerBound;\n    const u2 = aabb.upperBound; //      l2        u2\n    //      |---------|\n    // |---------------|\n    // l1              u1\n\n    return l1.x <= l2.x && u1.x >= u2.x && l1.y <= l2.y && u1.y >= u2.y && l1.z <= l2.z && u1.z >= u2.z;\n  }\n\n  getCorners(a, b, c, d, e, f, g, h) {\n    const l = this.lowerBound;\n    const u = this.upperBound;\n    a.copy(l);\n    b.set(u.x, l.y, l.z);\n    c.set(u.x, u.y, l.z);\n    d.set(l.x, u.y, u.z);\n    e.set(u.x, l.y, u.z);\n    f.set(l.x, u.y, l.z);\n    g.set(l.x, l.y, u.z);\n    h.copy(u);\n  }\n  /**\n   * Get the representation of an AABB in another frame.\n   * @return The \"target\" AABB object.\n   */\n\n\n  toLocalFrame(frame, target) {\n    const corners = transformIntoFrame_corners$1;\n    const a = corners[0];\n    const b = corners[1];\n    const c = corners[2];\n    const d = corners[3];\n    const e = corners[4];\n    const f = corners[5];\n    const g = corners[6];\n    const h = corners[7]; // Get corners in current frame\n\n    this.getCorners(a, b, c, d, e, f, g, h); // Transform them to new local frame\n\n    for (let i = 0; i !== 8; i++) {\n      const corner = corners[i];\n      frame.pointToLocal(corner, corner);\n    }\n\n    return target.setFromPoints(corners);\n  }\n  /**\n   * Get the representation of an AABB in the global frame.\n   * @return The \"target\" AABB object.\n   */\n\n\n  toWorldFrame(frame, target) {\n    const corners = transformIntoFrame_corners$1;\n    const a = corners[0];\n    const b = corners[1];\n    const c = corners[2];\n    const d = corners[3];\n    const e = corners[4];\n    const f = corners[5];\n    const g = corners[6];\n    const h = corners[7]; // Get corners in current frame\n\n    this.getCorners(a, b, c, d, e, f, g, h); // Transform them to new local frame\n\n    for (let i = 0; i !== 8; i++) {\n      const corner = corners[i];\n      frame.pointToWorld(corner, corner);\n    }\n\n    return target.setFromPoints(corners);\n  }\n  /**\n   * Check if the AABB is hit by a ray.\n   */\n\n\n  overlapsRay(ray) {\n    const {\n      direction,\n      from\n    } = ray; // const t = 0\n    // ray.direction is unit direction vector of ray\n\n    const dirFracX = 1 / direction.x;\n    const dirFracY = 1 / direction.y;\n    const dirFracZ = 1 / direction.z; // this.lowerBound is the corner of AABB with minimal coordinates - left bottom, rt is maximal corner\n\n    const t1 = (this.lowerBound.x - from.x) * dirFracX;\n    const t2 = (this.upperBound.x - from.x) * dirFracX;\n    const t3 = (this.lowerBound.y - from.y) * dirFracY;\n    const t4 = (this.upperBound.y - from.y) * dirFracY;\n    const t5 = (this.lowerBound.z - from.z) * dirFracZ;\n    const t6 = (this.upperBound.z - from.z) * dirFracZ; // const tmin = Math.max(Math.max(Math.min(t1, t2), Math.min(t3, t4)));\n    // const tmax = Math.min(Math.min(Math.max(t1, t2), Math.max(t3, t4)));\n\n    const tmin = Math.max(Math.max(Math.min(t1, t2), Math.min(t3, t4)), Math.min(t5, t6));\n    const tmax = Math.min(Math.min(Math.max(t1, t2), Math.max(t3, t4)), Math.max(t5, t6)); // if tmax < 0, ray (line) is intersecting AABB, but whole AABB is behing us\n\n    if (tmax < 0) {\n      //t = tmax;\n      return false;\n    } // if tmin > tmax, ray doesn't intersect AABB\n\n\n    if (tmin > tmax) {\n      //t = tmax;\n      return false;\n    }\n\n    return true;\n  }\n\n}\nconst tmp$1$1 = new Vec3$1();\nconst transformIntoFrame_corners$1 = [new Vec3$1(), new Vec3$1(), new Vec3$1(), new Vec3$1(), new Vec3$1(), new Vec3$1(), new Vec3$1(), new Vec3$1()];\n\n/**\n * Base class for objects that dispatches events.\n */\nclass EventTarget {\n  /**\n   * Add an event listener\n   * @return The self object, for chainability.\n   */\n  addEventListener(type, listener) {\n    if (this._listeners === undefined) {\n      this._listeners = {};\n    }\n\n    const listeners = this._listeners;\n\n    if (listeners[type] === undefined) {\n      listeners[type] = [];\n    }\n\n    if (!listeners[type].includes(listener)) {\n      listeners[type].push(listener);\n    }\n\n    return this;\n  }\n  /**\n   * Check if an event listener is added\n   */\n\n\n  hasEventListener(type, listener) {\n    if (this._listeners === undefined) {\n      return false;\n    }\n\n    const listeners = this._listeners;\n\n    if (listeners[type] !== undefined && listeners[type].includes(listener)) {\n      return true;\n    }\n\n    return false;\n  }\n  /**\n   * Check if any event listener of the given type is added\n   */\n\n\n  hasAnyEventListener(type) {\n    if (this._listeners === undefined) {\n      return false;\n    }\n\n    const listeners = this._listeners;\n    return listeners[type] !== undefined;\n  }\n  /**\n   * Remove an event listener\n   * @return The self object, for chainability.\n   */\n\n\n  removeEventListener(type, listener) {\n    if (this._listeners === undefined) {\n      return this;\n    }\n\n    const listeners = this._listeners;\n\n    if (listeners[type] === undefined) {\n      return this;\n    }\n\n    const index = listeners[type].indexOf(listener);\n\n    if (index !== -1) {\n      listeners[type].splice(index, 1);\n    }\n\n    return this;\n  }\n  /**\n   * Emit an event.\n   * @return The self object, for chainability.\n   */\n\n\n  dispatchEvent(event) {\n    if (this._listeners === undefined) {\n      return this;\n    }\n\n    const listeners = this._listeners;\n    const listenerArray = listeners[event.type];\n\n    if (listenerArray !== undefined) {\n      event.target = this;\n\n      for (let i = 0, l = listenerArray.length; i < l; i++) {\n        listenerArray[i].call(this, event);\n      }\n    }\n\n    return this;\n  }\n\n}\n\n/**\n * A Quaternion describes a rotation in 3D space. The Quaternion is mathematically defined as Q = x*i + y*j + z*k + w, where (i,j,k) are imaginary basis vectors. (x,y,z) can be seen as a vector related to the axis of rotation, while the real multiplier, w, is related to the amount of rotation.\n * @param x Multiplier of the imaginary basis vector i.\n * @param y Multiplier of the imaginary basis vector j.\n * @param z Multiplier of the imaginary basis vector k.\n * @param w Multiplier of the real part.\n * @see http://en.wikipedia.org/wiki/Quaternion\n */\n\nclass Quaternion$1 {\n  constructor(x, y, z, w) {\n    if (x === void 0) {\n      x = 0;\n    }\n\n    if (y === void 0) {\n      y = 0;\n    }\n\n    if (z === void 0) {\n      z = 0;\n    }\n\n    if (w === void 0) {\n      w = 1;\n    }\n\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    this.w = w;\n  }\n  /**\n   * Set the value of the quaternion.\n   */\n\n\n  set(x, y, z, w) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    this.w = w;\n    return this;\n  }\n  /**\n   * Convert to a readable format\n   * @return \"x,y,z,w\"\n   */\n\n\n  toString() {\n    return `${this.x},${this.y},${this.z},${this.w}`;\n  }\n  /**\n   * Convert to an Array\n   * @return [x, y, z, w]\n   */\n\n\n  toArray() {\n    return [this.x, this.y, this.z, this.w];\n  }\n  /**\n   * Set the quaternion components given an axis and an angle in radians.\n   */\n\n\n  setFromAxisAngle(vector, angle) {\n    const s = Math.sin(angle * 0.5);\n    this.x = vector.x * s;\n    this.y = vector.y * s;\n    this.z = vector.z * s;\n    this.w = Math.cos(angle * 0.5);\n    return this;\n  }\n  /**\n   * Converts the quaternion to [ axis, angle ] representation.\n   * @param targetAxis A vector object to reuse for storing the axis.\n   * @return An array, first element is the axis and the second is the angle in radians.\n   */\n\n\n  toAxisAngle(targetAxis) {\n    if (targetAxis === void 0) {\n      targetAxis = new Vec3$1();\n    }\n\n    this.normalize(); // if w>1 acos and sqrt will produce errors, this cant happen if quaternion is normalised\n\n    const angle = 2 * Math.acos(this.w);\n    const s = Math.sqrt(1 - this.w * this.w); // assuming quaternion normalised then w is less than 1, so term always positive.\n\n    if (s < 0.001) {\n      // test to avoid divide by zero, s is always positive due to sqrt\n      // if s close to zero then direction of axis not important\n      targetAxis.x = this.x; // if it is important that axis is normalised then replace with x=1; y=z=0;\n\n      targetAxis.y = this.y;\n      targetAxis.z = this.z;\n    } else {\n      targetAxis.x = this.x / s; // normalise axis\n\n      targetAxis.y = this.y / s;\n      targetAxis.z = this.z / s;\n    }\n\n    return [targetAxis, angle];\n  }\n  /**\n   * Set the quaternion value given two vectors. The resulting rotation will be the needed rotation to rotate u to v.\n   */\n\n\n  setFromVectors(u, v) {\n    if (u.isAntiparallelTo(v)) {\n      const t1 = sfv_t1$1;\n      const t2 = sfv_t2$1;\n      u.tangents(t1, t2);\n      this.setFromAxisAngle(t1, Math.PI);\n    } else {\n      const a = u.cross(v);\n      this.x = a.x;\n      this.y = a.y;\n      this.z = a.z;\n      this.w = Math.sqrt(u.length() ** 2 * v.length() ** 2) + u.dot(v);\n      this.normalize();\n    }\n\n    return this;\n  }\n  /**\n   * Multiply the quaternion with an other quaternion.\n   */\n\n\n  mult(quat, target) {\n    if (target === void 0) {\n      target = new Quaternion$1();\n    }\n\n    const ax = this.x;\n    const ay = this.y;\n    const az = this.z;\n    const aw = this.w;\n    const bx = quat.x;\n    const by = quat.y;\n    const bz = quat.z;\n    const bw = quat.w;\n    target.x = ax * bw + aw * bx + ay * bz - az * by;\n    target.y = ay * bw + aw * by + az * bx - ax * bz;\n    target.z = az * bw + aw * bz + ax * by - ay * bx;\n    target.w = aw * bw - ax * bx - ay * by - az * bz;\n    return target;\n  }\n  /**\n   * Get the inverse quaternion rotation.\n   */\n\n\n  inverse(target) {\n    if (target === void 0) {\n      target = new Quaternion$1();\n    }\n\n    const x = this.x;\n    const y = this.y;\n    const z = this.z;\n    const w = this.w;\n    this.conjugate(target);\n    const inorm2 = 1 / (x * x + y * y + z * z + w * w);\n    target.x *= inorm2;\n    target.y *= inorm2;\n    target.z *= inorm2;\n    target.w *= inorm2;\n    return target;\n  }\n  /**\n   * Get the quaternion conjugate\n   */\n\n\n  conjugate(target) {\n    if (target === void 0) {\n      target = new Quaternion$1();\n    }\n\n    target.x = -this.x;\n    target.y = -this.y;\n    target.z = -this.z;\n    target.w = this.w;\n    return target;\n  }\n  /**\n   * Normalize the quaternion. Note that this changes the values of the quaternion.\n   */\n\n\n  normalize() {\n    let l = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);\n\n    if (l === 0) {\n      this.x = 0;\n      this.y = 0;\n      this.z = 0;\n      this.w = 0;\n    } else {\n      l = 1 / l;\n      this.x *= l;\n      this.y *= l;\n      this.z *= l;\n      this.w *= l;\n    }\n\n    return this;\n  }\n  /**\n   * Approximation of quaternion normalization. Works best when quat is already almost-normalized.\n   * @author unphased, https://github.com/unphased\n   */\n\n\n  normalizeFast() {\n    const f = (3.0 - (this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w)) / 2.0;\n\n    if (f === 0) {\n      this.x = 0;\n      this.y = 0;\n      this.z = 0;\n      this.w = 0;\n    } else {\n      this.x *= f;\n      this.y *= f;\n      this.z *= f;\n      this.w *= f;\n    }\n\n    return this;\n  }\n  /**\n   * Multiply the quaternion by a vector\n   */\n\n\n  vmult(v, target) {\n    if (target === void 0) {\n      target = new Vec3$1();\n    }\n\n    const x = v.x;\n    const y = v.y;\n    const z = v.z;\n    const qx = this.x;\n    const qy = this.y;\n    const qz = this.z;\n    const qw = this.w; // q*v\n\n    const ix = qw * x + qy * z - qz * y;\n    const iy = qw * y + qz * x - qx * z;\n    const iz = qw * z + qx * y - qy * x;\n    const iw = -qx * x - qy * y - qz * z;\n    target.x = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n    target.y = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n    target.z = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n    return target;\n  }\n  /**\n   * Copies value of source to this quaternion.\n   * @return this\n   */\n\n\n  copy(quat) {\n    this.x = quat.x;\n    this.y = quat.y;\n    this.z = quat.z;\n    this.w = quat.w;\n    return this;\n  }\n  /**\n   * Convert the quaternion to euler angle representation. Order: YZX, as this page describes: https://www.euclideanspace.com/maths/standards/index.htm\n   * @param order Three-character string, defaults to \"YZX\"\n   */\n\n\n  toEuler(target, order) {\n    if (order === void 0) {\n      order = 'YZX';\n    }\n\n    let heading;\n    let attitude;\n    let bank;\n    const x = this.x;\n    const y = this.y;\n    const z = this.z;\n    const w = this.w;\n\n    switch (order) {\n      case 'YZX':\n        const test = x * y + z * w;\n\n        if (test > 0.499) {\n          // singularity at north pole\n          heading = 2 * Math.atan2(x, w);\n          attitude = Math.PI / 2;\n          bank = 0;\n        }\n\n        if (test < -0.499) {\n          // singularity at south pole\n          heading = -2 * Math.atan2(x, w);\n          attitude = -Math.PI / 2;\n          bank = 0;\n        }\n\n        if (heading === undefined) {\n          const sqx = x * x;\n          const sqy = y * y;\n          const sqz = z * z;\n          heading = Math.atan2(2 * y * w - 2 * x * z, 1 - 2 * sqy - 2 * sqz); // Heading\n\n          attitude = Math.asin(2 * test); // attitude\n\n          bank = Math.atan2(2 * x * w - 2 * y * z, 1 - 2 * sqx - 2 * sqz); // bank\n        }\n\n        break;\n\n      default:\n        throw new Error(`Euler order ${order} not supported yet.`);\n    }\n\n    target.y = heading;\n    target.z = attitude;\n    target.x = bank;\n  }\n  /**\n   * Set the quaternion components given Euler angle representation.\n   *\n   * @param order The order to apply angles: 'XYZ' or 'YXZ' or any other combination.\n   *\n   * See {@link https://www.mathworks.com/matlabcentral/fileexchange/20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors MathWorks} reference\n   */\n\n\n  setFromEuler(x, y, z, order) {\n    if (order === void 0) {\n      order = 'XYZ';\n    }\n\n    const c1 = Math.cos(x / 2);\n    const c2 = Math.cos(y / 2);\n    const c3 = Math.cos(z / 2);\n    const s1 = Math.sin(x / 2);\n    const s2 = Math.sin(y / 2);\n    const s3 = Math.sin(z / 2);\n\n    if (order === 'XYZ') {\n      this.x = s1 * c2 * c3 + c1 * s2 * s3;\n      this.y = c1 * s2 * c3 - s1 * c2 * s3;\n      this.z = c1 * c2 * s3 + s1 * s2 * c3;\n      this.w = c1 * c2 * c3 - s1 * s2 * s3;\n    } else if (order === 'YXZ') {\n      this.x = s1 * c2 * c3 + c1 * s2 * s3;\n      this.y = c1 * s2 * c3 - s1 * c2 * s3;\n      this.z = c1 * c2 * s3 - s1 * s2 * c3;\n      this.w = c1 * c2 * c3 + s1 * s2 * s3;\n    } else if (order === 'ZXY') {\n      this.x = s1 * c2 * c3 - c1 * s2 * s3;\n      this.y = c1 * s2 * c3 + s1 * c2 * s3;\n      this.z = c1 * c2 * s3 + s1 * s2 * c3;\n      this.w = c1 * c2 * c3 - s1 * s2 * s3;\n    } else if (order === 'ZYX') {\n      this.x = s1 * c2 * c3 - c1 * s2 * s3;\n      this.y = c1 * s2 * c3 + s1 * c2 * s3;\n      this.z = c1 * c2 * s3 - s1 * s2 * c3;\n      this.w = c1 * c2 * c3 + s1 * s2 * s3;\n    } else if (order === 'YZX') {\n      this.x = s1 * c2 * c3 + c1 * s2 * s3;\n      this.y = c1 * s2 * c3 + s1 * c2 * s3;\n      this.z = c1 * c2 * s3 - s1 * s2 * c3;\n      this.w = c1 * c2 * c3 - s1 * s2 * s3;\n    } else if (order === 'XZY') {\n      this.x = s1 * c2 * c3 - c1 * s2 * s3;\n      this.y = c1 * s2 * c3 - s1 * c2 * s3;\n      this.z = c1 * c2 * s3 + s1 * s2 * c3;\n      this.w = c1 * c2 * c3 + s1 * s2 * s3;\n    }\n\n    return this;\n  }\n\n  clone() {\n    return new Quaternion$1(this.x, this.y, this.z, this.w);\n  }\n  /**\n   * Performs a spherical linear interpolation between two quat\n   *\n   * @param toQuat second operand\n   * @param t interpolation amount between the self quaternion and toQuat\n   * @param target A quaternion to store the result in. If not provided, a new one will be created.\n   * @returns {Quaternion} The \"target\" object\n   */\n\n\n  slerp(toQuat, t, target) {\n    if (target === void 0) {\n      target = new Quaternion$1();\n    }\n\n    const ax = this.x;\n    const ay = this.y;\n    const az = this.z;\n    const aw = this.w;\n    let bx = toQuat.x;\n    let by = toQuat.y;\n    let bz = toQuat.z;\n    let bw = toQuat.w;\n    let omega;\n    let cosom;\n    let sinom;\n    let scale0;\n    let scale1; // calc cosine\n\n    cosom = ax * bx + ay * by + az * bz + aw * bw; // adjust signs (if necessary)\n\n    if (cosom < 0.0) {\n      cosom = -cosom;\n      bx = -bx;\n      by = -by;\n      bz = -bz;\n      bw = -bw;\n    } // calculate coefficients\n\n\n    if (1.0 - cosom > 0.000001) {\n      // standard case (slerp)\n      omega = Math.acos(cosom);\n      sinom = Math.sin(omega);\n      scale0 = Math.sin((1.0 - t) * omega) / sinom;\n      scale1 = Math.sin(t * omega) / sinom;\n    } else {\n      // \"from\" and \"to\" quaternions are very close\n      //  ... so we can do a linear interpolation\n      scale0 = 1.0 - t;\n      scale1 = t;\n    } // calculate final values\n\n\n    target.x = scale0 * ax + scale1 * bx;\n    target.y = scale0 * ay + scale1 * by;\n    target.z = scale0 * az + scale1 * bz;\n    target.w = scale0 * aw + scale1 * bw;\n    return target;\n  }\n  /**\n   * Rotate an absolute orientation quaternion given an angular velocity and a time step.\n   */\n\n\n  integrate(angularVelocity, dt, angularFactor, target) {\n    if (target === void 0) {\n      target = new Quaternion$1();\n    }\n\n    const ax = angularVelocity.x * angularFactor.x,\n          ay = angularVelocity.y * angularFactor.y,\n          az = angularVelocity.z * angularFactor.z,\n          bx = this.x,\n          by = this.y,\n          bz = this.z,\n          bw = this.w;\n    const half_dt = dt * 0.5;\n    target.x += half_dt * (ax * bw + ay * bz - az * by);\n    target.y += half_dt * (ay * bw + az * bx - ax * bz);\n    target.z += half_dt * (az * bw + ax * by - ay * bx);\n    target.w += half_dt * (-ax * bx - ay * by - az * bz);\n    return target;\n  }\n\n}\nconst sfv_t1$1 = new Vec3$1();\nconst sfv_t2$1 = new Vec3$1();\n\n/**\n * The available shape types.\n */\nconst SHAPE_TYPES$1 = {\n  /** SPHERE */\n  SPHERE: 1,\n\n  /** PLANE */\n  PLANE: 2,\n\n  /** BOX */\n  BOX: 4,\n\n  /** COMPOUND */\n  COMPOUND: 8,\n\n  /** CONVEXPOLYHEDRON */\n  CONVEXPOLYHEDRON: 16,\n\n  /** HEIGHTFIELD */\n  HEIGHTFIELD: 32,\n\n  /** PARTICLE */\n  PARTICLE: 64,\n\n  /** CYLINDER */\n  CYLINDER: 128,\n\n  /** TRIMESH */\n  TRIMESH: 256\n};\n/**\n * ShapeType\n */\n\n/**\n * Base class for shapes\n */\nclass Shape$1 {\n  /**\n   * Identifier of the Shape.\n   */\n\n  /**\n   * The type of this shape. Must be set to an int > 0 by subclasses.\n   */\n\n  /**\n   * The local bounding sphere radius of this shape.\n   */\n\n  /**\n   * Whether to produce contact forces when in contact with other bodies. Note that contacts will be generated, but they will be disabled.\n   * @default true\n   */\n\n  /**\n   * @default 1\n   */\n\n  /**\n   * @default -1\n   */\n\n  /**\n   * Optional material of the shape that regulates contact properties.\n   */\n\n  /**\n   * The body to which the shape is added to.\n   */\n\n  /**\n   * All the Shape types.\n   */\n  constructor(options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    this.id = Shape$1.idCounter++;\n    this.type = options.type || 0;\n    this.boundingSphereRadius = 0;\n    this.collisionResponse = options.collisionResponse ? options.collisionResponse : true;\n    this.collisionFilterGroup = options.collisionFilterGroup !== undefined ? options.collisionFilterGroup : 1;\n    this.collisionFilterMask = options.collisionFilterMask !== undefined ? options.collisionFilterMask : -1;\n    this.material = options.material ? options.material : null;\n    this.body = null;\n  }\n  /**\n   * Computes the bounding sphere radius.\n   * The result is stored in the property `.boundingSphereRadius`\n   */\n\n\n  updateBoundingSphereRadius() {\n    throw `computeBoundingSphereRadius() not implemented for shape type ${this.type}`;\n  }\n  /**\n   * Get the volume of this shape\n   */\n\n\n  volume() {\n    throw `volume() not implemented for shape type ${this.type}`;\n  }\n  /**\n   * Calculates the inertia in the local frame for this shape.\n   * @see http://en.wikipedia.org/wiki/List_of_moments_of_inertia\n   */\n\n\n  calculateLocalInertia(mass, target) {\n    throw `calculateLocalInertia() not implemented for shape type ${this.type}`;\n  }\n  /**\n   * @todo use abstract for these kind of methods\n   */\n\n\n  calculateWorldAABB(pos, quat, min, max) {\n    throw `calculateWorldAABB() not implemented for shape type ${this.type}`;\n  }\n\n}\nShape$1.idCounter = 0;\nShape$1.types = SHAPE_TYPES$1;\n\n/**\n * Transformation utilities.\n */\nclass Transform$1 {\n  /**\n   * position\n   */\n\n  /**\n   * quaternion\n   */\n  constructor(options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    this.position = new Vec3$1();\n    this.quaternion = new Quaternion$1();\n\n    if (options.position) {\n      this.position.copy(options.position);\n    }\n\n    if (options.quaternion) {\n      this.quaternion.copy(options.quaternion);\n    }\n  }\n  /**\n   * Get a global point in local transform coordinates.\n   */\n\n\n  pointToLocal(worldPoint, result) {\n    return Transform$1.pointToLocalFrame(this.position, this.quaternion, worldPoint, result);\n  }\n  /**\n   * Get a local point in global transform coordinates.\n   */\n\n\n  pointToWorld(localPoint, result) {\n    return Transform$1.pointToWorldFrame(this.position, this.quaternion, localPoint, result);\n  }\n  /**\n   * vectorToWorldFrame\n   */\n\n\n  vectorToWorldFrame(localVector, result) {\n    if (result === void 0) {\n      result = new Vec3$1();\n    }\n\n    this.quaternion.vmult(localVector, result);\n    return result;\n  }\n  /**\n   * pointToLocalFrame\n   */\n\n\n  static pointToLocalFrame(position, quaternion, worldPoint, result) {\n    if (result === void 0) {\n      result = new Vec3$1();\n    }\n\n    worldPoint.vsub(position, result);\n    quaternion.conjugate(tmpQuat$1$1);\n    tmpQuat$1$1.vmult(result, result);\n    return result;\n  }\n  /**\n   * pointToWorldFrame\n   */\n\n\n  static pointToWorldFrame(position, quaternion, localPoint, result) {\n    if (result === void 0) {\n      result = new Vec3$1();\n    }\n\n    quaternion.vmult(localPoint, result);\n    result.vadd(position, result);\n    return result;\n  }\n  /**\n   * vectorToWorldFrame\n   */\n\n\n  static vectorToWorldFrame(quaternion, localVector, result) {\n    if (result === void 0) {\n      result = new Vec3$1();\n    }\n\n    quaternion.vmult(localVector, result);\n    return result;\n  }\n  /**\n   * vectorToLocalFrame\n   */\n\n\n  static vectorToLocalFrame(position, quaternion, worldVector, result) {\n    if (result === void 0) {\n      result = new Vec3$1();\n    }\n\n    quaternion.w *= -1;\n    quaternion.vmult(worldVector, result);\n    quaternion.w *= -1;\n    return result;\n  }\n\n}\nconst tmpQuat$1$1 = new Quaternion$1();\n\n/**\n * A set of polygons describing a convex shape.\n *\n * The shape MUST be convex for the code to work properly. No polygons may be coplanar (contained\n * in the same 3D plane), instead these should be merged into one polygon.\n *\n * @author qiao / https://github.com/qiao (original author, see https://github.com/qiao/three.js/commit/85026f0c769e4000148a67d45a9e9b9c5108836f)\n * @author schteppe / https://github.com/schteppe\n * @see https://www.altdevblogaday.com/2011/05/13/contact-generation-between-3d-convex-meshes/\n *\n * @todo Move the clipping functions to ContactGenerator?\n * @todo Automatically merge coplanar polygons in constructor.\n * @example\n *     const convexShape = new CANNON.ConvexPolyhedron({ vertices, faces })\n *     const convexBody = new CANNON.Body({ mass: 1, shape: convexShape })\n *     world.addBody(convexBody)\n */\nclass ConvexPolyhedron extends Shape$1 {\n  /** vertices */\n\n  /**\n   * Array of integer arrays, indicating which vertices each face consists of\n   */\n\n  /** faceNormals */\n\n  /** worldVertices */\n\n  /** worldVerticesNeedsUpdate */\n\n  /** worldFaceNormals */\n\n  /** worldFaceNormalsNeedsUpdate */\n\n  /**\n   * If given, these locally defined, normalized axes are the only ones being checked when doing separating axis check.\n   */\n\n  /** uniqueEdges */\n\n  /**\n   * @param vertices An array of Vec3's\n   * @param faces Array of integer arrays, describing which vertices that is included in each face.\n   */\n  constructor(props) {\n    if (props === void 0) {\n      props = {};\n    }\n\n    const {\n      vertices = [],\n      faces = [],\n      normals = [],\n      axes,\n      boundingSphereRadius\n    } = props;\n    super({\n      type: Shape$1.types.CONVEXPOLYHEDRON\n    });\n    this.vertices = vertices;\n    this.faces = faces;\n    this.faceNormals = normals;\n\n    if (this.faceNormals.length === 0) {\n      this.computeNormals();\n    }\n\n    if (!boundingSphereRadius) {\n      this.updateBoundingSphereRadius();\n    } else {\n      this.boundingSphereRadius = boundingSphereRadius;\n    }\n\n    this.worldVertices = []; // World transformed version of .vertices\n\n    this.worldVerticesNeedsUpdate = true;\n    this.worldFaceNormals = []; // World transformed version of .faceNormals\n\n    this.worldFaceNormalsNeedsUpdate = true;\n    this.uniqueAxes = axes ? axes.slice() : null;\n    this.uniqueEdges = [];\n    this.computeEdges();\n  }\n  /**\n   * Computes uniqueEdges\n   */\n\n\n  computeEdges() {\n    const faces = this.faces;\n    const vertices = this.vertices;\n    const edges = this.uniqueEdges;\n    edges.length = 0;\n    const edge = new Vec3$1();\n\n    for (let i = 0; i !== faces.length; i++) {\n      const face = faces[i];\n      const numVertices = face.length;\n\n      for (let j = 0; j !== numVertices; j++) {\n        const k = (j + 1) % numVertices;\n        vertices[face[j]].vsub(vertices[face[k]], edge);\n        edge.normalize();\n        let found = false;\n\n        for (let p = 0; p !== edges.length; p++) {\n          if (edges[p].almostEquals(edge) || edges[p].almostEquals(edge)) {\n            found = true;\n            break;\n          }\n        }\n\n        if (!found) {\n          edges.push(edge.clone());\n        }\n      }\n    }\n  }\n  /**\n   * Compute the normals of the faces.\n   * Will reuse existing Vec3 objects in the `faceNormals` array if they exist.\n   */\n\n\n  computeNormals() {\n    this.faceNormals.length = this.faces.length; // Generate normals\n\n    for (let i = 0; i < this.faces.length; i++) {\n      // Check so all vertices exists for this face\n      for (let j = 0; j < this.faces[i].length; j++) {\n        if (!this.vertices[this.faces[i][j]]) {\n          throw new Error(`Vertex ${this.faces[i][j]} not found!`);\n        }\n      }\n\n      const n = this.faceNormals[i] || new Vec3$1();\n      this.getFaceNormal(i, n);\n      n.negate(n);\n      this.faceNormals[i] = n;\n      const vertex = this.vertices[this.faces[i][0]];\n\n      if (n.dot(vertex) < 0) {\n        console.error(`.faceNormals[${i}] = Vec3(${n.toString()}) looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.`);\n\n        for (let j = 0; j < this.faces[i].length; j++) {\n          console.warn(`.vertices[${this.faces[i][j]}] = Vec3(${this.vertices[this.faces[i][j]].toString()})`);\n        }\n      }\n    }\n  }\n  /**\n   * Compute the normal of a face from its vertices\n   */\n\n\n  getFaceNormal(i, target) {\n    const f = this.faces[i];\n    const va = this.vertices[f[0]];\n    const vb = this.vertices[f[1]];\n    const vc = this.vertices[f[2]];\n    ConvexPolyhedron.computeNormal(va, vb, vc, target);\n  }\n  /**\n   * Get face normal given 3 vertices\n   */\n\n\n  static computeNormal(va, vb, vc, target) {\n    const cb = new Vec3$1();\n    const ab = new Vec3$1();\n    vb.vsub(va, ab);\n    vc.vsub(vb, cb);\n    cb.cross(ab, target);\n\n    if (!target.isZero()) {\n      target.normalize();\n    }\n  }\n  /**\n   * @param minDist Clamp distance\n   * @param result The an array of contact point objects, see clipFaceAgainstHull\n   */\n\n\n  clipAgainstHull(posA, quatA, hullB, posB, quatB, separatingNormal, minDist, maxDist, result) {\n    const WorldNormal = new Vec3$1();\n    let closestFaceB = -1;\n    let dmax = -Number.MAX_VALUE;\n\n    for (let face = 0; face < hullB.faces.length; face++) {\n      WorldNormal.copy(hullB.faceNormals[face]);\n      quatB.vmult(WorldNormal, WorldNormal);\n      const d = WorldNormal.dot(separatingNormal);\n\n      if (d > dmax) {\n        dmax = d;\n        closestFaceB = face;\n      }\n    }\n\n    const worldVertsB1 = [];\n\n    for (let i = 0; i < hullB.faces[closestFaceB].length; i++) {\n      const b = hullB.vertices[hullB.faces[closestFaceB][i]];\n      const worldb = new Vec3$1();\n      worldb.copy(b);\n      quatB.vmult(worldb, worldb);\n      posB.vadd(worldb, worldb);\n      worldVertsB1.push(worldb);\n    }\n\n    if (closestFaceB >= 0) {\n      this.clipFaceAgainstHull(separatingNormal, posA, quatA, worldVertsB1, minDist, maxDist, result);\n    }\n  }\n  /**\n   * Find the separating axis between this hull and another\n   * @param target The target vector to save the axis in\n   * @return Returns false if a separation is found, else true\n   */\n\n\n  findSeparatingAxis(hullB, posA, quatA, posB, quatB, target, faceListA, faceListB) {\n    const faceANormalWS3 = new Vec3$1();\n    const Worldnormal1 = new Vec3$1();\n    const deltaC = new Vec3$1();\n    const worldEdge0 = new Vec3$1();\n    const worldEdge1 = new Vec3$1();\n    const Cross = new Vec3$1();\n    let dmin = Number.MAX_VALUE;\n    const hullA = this;\n\n    if (!hullA.uniqueAxes) {\n      const numFacesA = faceListA ? faceListA.length : hullA.faces.length; // Test face normals from hullA\n\n      for (let i = 0; i < numFacesA; i++) {\n        const fi = faceListA ? faceListA[i] : i; // Get world face normal\n\n        faceANormalWS3.copy(hullA.faceNormals[fi]);\n        quatA.vmult(faceANormalWS3, faceANormalWS3);\n        const d = hullA.testSepAxis(faceANormalWS3, hullB, posA, quatA, posB, quatB);\n\n        if (d === false) {\n          return false;\n        }\n\n        if (d < dmin) {\n          dmin = d;\n          target.copy(faceANormalWS3);\n        }\n      }\n    } else {\n      // Test unique axes\n      for (let i = 0; i !== hullA.uniqueAxes.length; i++) {\n        // Get world axis\n        quatA.vmult(hullA.uniqueAxes[i], faceANormalWS3);\n        const d = hullA.testSepAxis(faceANormalWS3, hullB, posA, quatA, posB, quatB);\n\n        if (d === false) {\n          return false;\n        }\n\n        if (d < dmin) {\n          dmin = d;\n          target.copy(faceANormalWS3);\n        }\n      }\n    }\n\n    if (!hullB.uniqueAxes) {\n      // Test face normals from hullB\n      const numFacesB = faceListB ? faceListB.length : hullB.faces.length;\n\n      for (let i = 0; i < numFacesB; i++) {\n        const fi = faceListB ? faceListB[i] : i;\n        Worldnormal1.copy(hullB.faceNormals[fi]);\n        quatB.vmult(Worldnormal1, Worldnormal1);\n        const d = hullA.testSepAxis(Worldnormal1, hullB, posA, quatA, posB, quatB);\n\n        if (d === false) {\n          return false;\n        }\n\n        if (d < dmin) {\n          dmin = d;\n          target.copy(Worldnormal1);\n        }\n      }\n    } else {\n      // Test unique axes in B\n      for (let i = 0; i !== hullB.uniqueAxes.length; i++) {\n        quatB.vmult(hullB.uniqueAxes[i], Worldnormal1);\n        const d = hullA.testSepAxis(Worldnormal1, hullB, posA, quatA, posB, quatB);\n\n        if (d === false) {\n          return false;\n        }\n\n        if (d < dmin) {\n          dmin = d;\n          target.copy(Worldnormal1);\n        }\n      }\n    } // Test edges\n\n\n    for (let e0 = 0; e0 !== hullA.uniqueEdges.length; e0++) {\n      // Get world edge\n      quatA.vmult(hullA.uniqueEdges[e0], worldEdge0);\n\n      for (let e1 = 0; e1 !== hullB.uniqueEdges.length; e1++) {\n        // Get world edge 2\n        quatB.vmult(hullB.uniqueEdges[e1], worldEdge1);\n        worldEdge0.cross(worldEdge1, Cross);\n\n        if (!Cross.almostZero()) {\n          Cross.normalize();\n          const dist = hullA.testSepAxis(Cross, hullB, posA, quatA, posB, quatB);\n\n          if (dist === false) {\n            return false;\n          }\n\n          if (dist < dmin) {\n            dmin = dist;\n            target.copy(Cross);\n          }\n        }\n      }\n    }\n\n    posB.vsub(posA, deltaC);\n\n    if (deltaC.dot(target) > 0.0) {\n      target.negate(target);\n    }\n\n    return true;\n  }\n  /**\n   * Test separating axis against two hulls. Both hulls are projected onto the axis and the overlap size is returned if there is one.\n   * @return The overlap depth, or FALSE if no penetration.\n   */\n\n\n  testSepAxis(axis, hullB, posA, quatA, posB, quatB) {\n    const hullA = this;\n    ConvexPolyhedron.project(hullA, axis, posA, quatA, maxminA);\n    ConvexPolyhedron.project(hullB, axis, posB, quatB, maxminB);\n    const maxA = maxminA[0];\n    const minA = maxminA[1];\n    const maxB = maxminB[0];\n    const minB = maxminB[1];\n\n    if (maxA < minB || maxB < minA) {\n      return false; // Separated\n    }\n\n    const d0 = maxA - minB;\n    const d1 = maxB - minA;\n    const depth = d0 < d1 ? d0 : d1;\n    return depth;\n  }\n  /**\n   * calculateLocalInertia\n   */\n\n\n  calculateLocalInertia(mass, target) {\n    // Approximate with box inertia\n    // Exact inertia calculation is overkill, but see http://geometrictools.com/Documentation/PolyhedralMassProperties.pdf for the correct way to do it\n    const aabbmax = new Vec3$1();\n    const aabbmin = new Vec3$1();\n    this.computeLocalAABB(aabbmin, aabbmax);\n    const x = aabbmax.x - aabbmin.x;\n    const y = aabbmax.y - aabbmin.y;\n    const z = aabbmax.z - aabbmin.z;\n    target.x = 1.0 / 12.0 * mass * (2 * y * 2 * y + 2 * z * 2 * z);\n    target.y = 1.0 / 12.0 * mass * (2 * x * 2 * x + 2 * z * 2 * z);\n    target.z = 1.0 / 12.0 * mass * (2 * y * 2 * y + 2 * x * 2 * x);\n  }\n  /**\n   * @param face_i Index of the face\n   */\n\n\n  getPlaneConstantOfFace(face_i) {\n    const f = this.faces[face_i];\n    const n = this.faceNormals[face_i];\n    const v = this.vertices[f[0]];\n    const c = -n.dot(v);\n    return c;\n  }\n  /**\n   * Clip a face against a hull.\n   * @param worldVertsB1 An array of Vec3 with vertices in the world frame.\n   * @param minDist Distance clamping\n   * @param Array result Array to store resulting contact points in. Will be objects with properties: point, depth, normal. These are represented in world coordinates.\n   */\n\n\n  clipFaceAgainstHull(separatingNormal, posA, quatA, worldVertsB1, minDist, maxDist, result) {\n    const faceANormalWS = new Vec3$1();\n    const edge0 = new Vec3$1();\n    const WorldEdge0 = new Vec3$1();\n    const worldPlaneAnormal1 = new Vec3$1();\n    const planeNormalWS1 = new Vec3$1();\n    const worldA1 = new Vec3$1();\n    const localPlaneNormal = new Vec3$1();\n    const planeNormalWS = new Vec3$1();\n    const hullA = this;\n    const worldVertsB2 = [];\n    const pVtxIn = worldVertsB1;\n    const pVtxOut = worldVertsB2;\n    let closestFaceA = -1;\n    let dmin = Number.MAX_VALUE; // Find the face with normal closest to the separating axis\n\n    for (let face = 0; face < hullA.faces.length; face++) {\n      faceANormalWS.copy(hullA.faceNormals[face]);\n      quatA.vmult(faceANormalWS, faceANormalWS);\n      const d = faceANormalWS.dot(separatingNormal);\n\n      if (d < dmin) {\n        dmin = d;\n        closestFaceA = face;\n      }\n    }\n\n    if (closestFaceA < 0) {\n      return;\n    } // Get the face and construct connected faces\n\n\n    const polyA = hullA.faces[closestFaceA];\n    polyA.connectedFaces = [];\n\n    for (let i = 0; i < hullA.faces.length; i++) {\n      for (let j = 0; j < hullA.faces[i].length; j++) {\n        if (\n        /* Sharing a vertex*/\n        polyA.indexOf(hullA.faces[i][j]) !== -1 &&\n        /* Not the one we are looking for connections from */\n        i !== closestFaceA &&\n        /* Not already added */\n        polyA.connectedFaces.indexOf(i) === -1) {\n          polyA.connectedFaces.push(i);\n        }\n      }\n    } // Clip the polygon to the back of the planes of all faces of hull A,\n    // that are adjacent to the witness face\n\n\n    const numVerticesA = polyA.length;\n\n    for (let i = 0; i < numVerticesA; i++) {\n      const a = hullA.vertices[polyA[i]];\n      const b = hullA.vertices[polyA[(i + 1) % numVerticesA]];\n      a.vsub(b, edge0);\n      WorldEdge0.copy(edge0);\n      quatA.vmult(WorldEdge0, WorldEdge0);\n      posA.vadd(WorldEdge0, WorldEdge0);\n      worldPlaneAnormal1.copy(this.faceNormals[closestFaceA]);\n      quatA.vmult(worldPlaneAnormal1, worldPlaneAnormal1);\n      posA.vadd(worldPlaneAnormal1, worldPlaneAnormal1);\n      WorldEdge0.cross(worldPlaneAnormal1, planeNormalWS1);\n      planeNormalWS1.negate(planeNormalWS1);\n      worldA1.copy(a);\n      quatA.vmult(worldA1, worldA1);\n      posA.vadd(worldA1, worldA1);\n      const otherFace = polyA.connectedFaces[i];\n      localPlaneNormal.copy(this.faceNormals[otherFace]);\n      const localPlaneEq = this.getPlaneConstantOfFace(otherFace);\n      planeNormalWS.copy(localPlaneNormal);\n      quatA.vmult(planeNormalWS, planeNormalWS);\n      const planeEqWS = localPlaneEq - planeNormalWS.dot(posA); // Clip face against our constructed plane\n\n      this.clipFaceAgainstPlane(pVtxIn, pVtxOut, planeNormalWS, planeEqWS); // Throw away all clipped points, but save the remaining until next clip\n\n      while (pVtxIn.length) {\n        pVtxIn.shift();\n      }\n\n      while (pVtxOut.length) {\n        pVtxIn.push(pVtxOut.shift());\n      }\n    } // only keep contact points that are behind the witness face\n\n\n    localPlaneNormal.copy(this.faceNormals[closestFaceA]);\n    const localPlaneEq = this.getPlaneConstantOfFace(closestFaceA);\n    planeNormalWS.copy(localPlaneNormal);\n    quatA.vmult(planeNormalWS, planeNormalWS);\n    const planeEqWS = localPlaneEq - planeNormalWS.dot(posA);\n\n    for (let i = 0; i < pVtxIn.length; i++) {\n      let depth = planeNormalWS.dot(pVtxIn[i]) + planeEqWS; // ???\n\n      if (depth <= minDist) {\n        console.log(`clamped: depth=${depth} to minDist=${minDist}`);\n        depth = minDist;\n      }\n\n      if (depth <= maxDist) {\n        const point = pVtxIn[i];\n\n        if (depth <= 1e-6) {\n          const p = {\n            point,\n            normal: planeNormalWS,\n            depth\n          };\n          result.push(p);\n        }\n      }\n    }\n  }\n  /**\n   * Clip a face in a hull against the back of a plane.\n   * @param planeConstant The constant in the mathematical plane equation\n   */\n\n\n  clipFaceAgainstPlane(inVertices, outVertices, planeNormal, planeConstant) {\n    let n_dot_first;\n    let n_dot_last;\n    const numVerts = inVertices.length;\n\n    if (numVerts < 2) {\n      return outVertices;\n    }\n\n    let firstVertex = inVertices[inVertices.length - 1];\n    let lastVertex = inVertices[0];\n    n_dot_first = planeNormal.dot(firstVertex) + planeConstant;\n\n    for (let vi = 0; vi < numVerts; vi++) {\n      lastVertex = inVertices[vi];\n      n_dot_last = planeNormal.dot(lastVertex) + planeConstant;\n\n      if (n_dot_first < 0) {\n        if (n_dot_last < 0) {\n          // Start < 0, end < 0, so output lastVertex\n          const newv = new Vec3$1();\n          newv.copy(lastVertex);\n          outVertices.push(newv);\n        } else {\n          // Start < 0, end >= 0, so output intersection\n          const newv = new Vec3$1();\n          firstVertex.lerp(lastVertex, n_dot_first / (n_dot_first - n_dot_last), newv);\n          outVertices.push(newv);\n        }\n      } else {\n        if (n_dot_last < 0) {\n          // Start >= 0, end < 0 so output intersection and end\n          const newv = new Vec3$1();\n          firstVertex.lerp(lastVertex, n_dot_first / (n_dot_first - n_dot_last), newv);\n          outVertices.push(newv);\n          outVertices.push(lastVertex);\n        }\n      }\n\n      firstVertex = lastVertex;\n      n_dot_first = n_dot_last;\n    }\n\n    return outVertices;\n  }\n  /**\n   * Updates `.worldVertices` and sets `.worldVerticesNeedsUpdate` to false.\n   */\n\n\n  computeWorldVertices(position, quat) {\n    while (this.worldVertices.length < this.vertices.length) {\n      this.worldVertices.push(new Vec3$1());\n    }\n\n    const verts = this.vertices;\n    const worldVerts = this.worldVertices;\n\n    for (let i = 0; i !== this.vertices.length; i++) {\n      quat.vmult(verts[i], worldVerts[i]);\n      position.vadd(worldVerts[i], worldVerts[i]);\n    }\n\n    this.worldVerticesNeedsUpdate = false;\n  }\n\n  computeLocalAABB(aabbmin, aabbmax) {\n    const vertices = this.vertices;\n    aabbmin.set(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);\n    aabbmax.set(-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE);\n\n    for (let i = 0; i < this.vertices.length; i++) {\n      const v = vertices[i];\n\n      if (v.x < aabbmin.x) {\n        aabbmin.x = v.x;\n      } else if (v.x > aabbmax.x) {\n        aabbmax.x = v.x;\n      }\n\n      if (v.y < aabbmin.y) {\n        aabbmin.y = v.y;\n      } else if (v.y > aabbmax.y) {\n        aabbmax.y = v.y;\n      }\n\n      if (v.z < aabbmin.z) {\n        aabbmin.z = v.z;\n      } else if (v.z > aabbmax.z) {\n        aabbmax.z = v.z;\n      }\n    }\n  }\n  /**\n   * Updates `worldVertices` and sets `worldVerticesNeedsUpdate` to false.\n   */\n\n\n  computeWorldFaceNormals(quat) {\n    const N = this.faceNormals.length;\n\n    while (this.worldFaceNormals.length < N) {\n      this.worldFaceNormals.push(new Vec3$1());\n    }\n\n    const normals = this.faceNormals;\n    const worldNormals = this.worldFaceNormals;\n\n    for (let i = 0; i !== N; i++) {\n      quat.vmult(normals[i], worldNormals[i]);\n    }\n\n    this.worldFaceNormalsNeedsUpdate = false;\n  }\n  /**\n   * updateBoundingSphereRadius\n   */\n\n\n  updateBoundingSphereRadius() {\n    // Assume points are distributed with local (0,0,0) as center\n    let max2 = 0;\n    const verts = this.vertices;\n\n    for (let i = 0; i !== verts.length; i++) {\n      const norm2 = verts[i].lengthSquared();\n\n      if (norm2 > max2) {\n        max2 = norm2;\n      }\n    }\n\n    this.boundingSphereRadius = Math.sqrt(max2);\n  }\n  /**\n   * calculateWorldAABB\n   */\n\n\n  calculateWorldAABB(pos, quat, min, max) {\n    const verts = this.vertices;\n    let minx;\n    let miny;\n    let minz;\n    let maxx;\n    let maxy;\n    let maxz;\n    let tempWorldVertex = new Vec3$1();\n\n    for (let i = 0; i < verts.length; i++) {\n      tempWorldVertex.copy(verts[i]);\n      quat.vmult(tempWorldVertex, tempWorldVertex);\n      pos.vadd(tempWorldVertex, tempWorldVertex);\n      const v = tempWorldVertex;\n\n      if (minx === undefined || v.x < minx) {\n        minx = v.x;\n      }\n\n      if (maxx === undefined || v.x > maxx) {\n        maxx = v.x;\n      }\n\n      if (miny === undefined || v.y < miny) {\n        miny = v.y;\n      }\n\n      if (maxy === undefined || v.y > maxy) {\n        maxy = v.y;\n      }\n\n      if (minz === undefined || v.z < minz) {\n        minz = v.z;\n      }\n\n      if (maxz === undefined || v.z > maxz) {\n        maxz = v.z;\n      }\n    }\n\n    min.set(minx, miny, minz);\n    max.set(maxx, maxy, maxz);\n  }\n  /**\n   * Get approximate convex volume\n   */\n\n\n  volume() {\n    return 4.0 * Math.PI * this.boundingSphereRadius / 3.0;\n  }\n  /**\n   * Get an average of all the vertices positions\n   */\n\n\n  getAveragePointLocal(target) {\n    if (target === void 0) {\n      target = new Vec3$1();\n    }\n\n    const verts = this.vertices;\n\n    for (let i = 0; i < verts.length; i++) {\n      target.vadd(verts[i], target);\n    }\n\n    target.scale(1 / verts.length, target);\n    return target;\n  }\n  /**\n   * Transform all local points. Will change the .vertices\n   */\n\n\n  transformAllPoints(offset, quat) {\n    const n = this.vertices.length;\n    const verts = this.vertices; // Apply rotation\n\n    if (quat) {\n      // Rotate vertices\n      for (let i = 0; i < n; i++) {\n        const v = verts[i];\n        quat.vmult(v, v);\n      } // Rotate face normals\n\n\n      for (let i = 0; i < this.faceNormals.length; i++) {\n        const v = this.faceNormals[i];\n        quat.vmult(v, v);\n      }\n      /*\n            // Rotate edges\n            for(let i=0; i<this.uniqueEdges.length; i++){\n                const v = this.uniqueEdges[i];\n                quat.vmult(v,v);\n            }*/\n\n    } // Apply offset\n\n\n    if (offset) {\n      for (let i = 0; i < n; i++) {\n        const v = verts[i];\n        v.vadd(offset, v);\n      }\n    }\n  }\n  /**\n   * Checks whether p is inside the polyhedra. Must be in local coords.\n   * The point lies outside of the convex hull of the other points if and only if the direction\n   * of all the vectors from it to those other points are on less than one half of a sphere around it.\n   * @param p A point given in local coordinates\n   */\n\n\n  pointIsInside(p) {\n    const verts = this.vertices;\n    const faces = this.faces;\n    const normals = this.faceNormals;\n    const pointInside = new Vec3$1();\n    this.getAveragePointLocal(pointInside);\n\n    for (let i = 0; i < this.faces.length; i++) {\n      let n = normals[i];\n      const v = verts[faces[i][0]]; // We only need one point in the face\n      // This dot product determines which side of the edge the point is\n\n      const vToP = new Vec3$1();\n      p.vsub(v, vToP);\n      const r1 = n.dot(vToP);\n      const vToPointInside = new Vec3$1();\n      pointInside.vsub(v, vToPointInside);\n      const r2 = n.dot(vToPointInside);\n\n      if (r1 < 0 && r2 > 0 || r1 > 0 && r2 < 0) {\n        return false; // Encountered some other sign. Exit.\n      }\n    } // If we got here, all dot products were of the same sign.\n\n\n    return -1;\n  }\n  /**\n   * Get max and min dot product of a convex hull at position (pos,quat) projected onto an axis.\n   * Results are saved in the array maxmin.\n   * @param result result[0] and result[1] will be set to maximum and minimum, respectively.\n   */\n\n\n  static project(shape, axis, pos, quat, result) {\n    const n = shape.vertices.length;\n    const localAxis = project_localAxis;\n    let max = 0;\n    let min = 0;\n    const localOrigin = project_localOrigin;\n    const vs = shape.vertices;\n    localOrigin.setZero(); // Transform the axis to local\n\n    Transform$1.vectorToLocalFrame(pos, quat, axis, localAxis);\n    Transform$1.pointToLocalFrame(pos, quat, localOrigin, localOrigin);\n    const add = localOrigin.dot(localAxis);\n    min = max = vs[0].dot(localAxis);\n\n    for (let i = 1; i < n; i++) {\n      const val = vs[i].dot(localAxis);\n\n      if (val > max) {\n        max = val;\n      }\n\n      if (val < min) {\n        min = val;\n      }\n    }\n\n    min -= add;\n    max -= add;\n\n    if (min > max) {\n      // Inconsistent - swap\n      const temp = min;\n      min = max;\n      max = temp;\n    } // Output\n\n\n    result[0] = max;\n    result[1] = min;\n  }\n\n}\nconst maxminA = [];\nconst maxminB = [];\nnew Vec3$1();\nconst project_localAxis = new Vec3$1();\nconst project_localOrigin = new Vec3$1();\n\n/**\n * A 3d box shape.\n * @example\n *     const size = 1\n *     const halfExtents = new CANNON.Vec3(size, size, size)\n *     const boxShape = new CANNON.Box(halfExtents)\n *     const boxBody = new CANNON.Body({ mass: 1, shape: boxShape })\n *     world.addBody(boxBody)\n */\nclass Box extends Shape$1 {\n  /**\n   * The half extents of the box.\n   */\n\n  /**\n   * Used by the contact generator to make contacts with other convex polyhedra for example.\n   */\n  constructor(halfExtents) {\n    super({\n      type: Shape$1.types.BOX\n    });\n    this.halfExtents = halfExtents;\n    this.convexPolyhedronRepresentation = null;\n    this.updateConvexPolyhedronRepresentation();\n    this.updateBoundingSphereRadius();\n  }\n  /**\n   * Updates the local convex polyhedron representation used for some collisions.\n   */\n\n\n  updateConvexPolyhedronRepresentation() {\n    const sx = this.halfExtents.x;\n    const sy = this.halfExtents.y;\n    const sz = this.halfExtents.z;\n    const V = Vec3$1;\n    const vertices = [new V(-sx, -sy, -sz), new V(sx, -sy, -sz), new V(sx, sy, -sz), new V(-sx, sy, -sz), new V(-sx, -sy, sz), new V(sx, -sy, sz), new V(sx, sy, sz), new V(-sx, sy, sz)];\n    const faces = [[3, 2, 1, 0], // -z\n    [4, 5, 6, 7], // +z\n    [5, 4, 0, 1], // -y\n    [2, 3, 7, 6], // +y\n    [0, 4, 7, 3], // -x\n    [1, 2, 6, 5] // +x\n    ];\n    const axes = [new V(0, 0, 1), new V(0, 1, 0), new V(1, 0, 0)];\n    const h = new ConvexPolyhedron({\n      vertices,\n      faces,\n      axes\n    });\n    this.convexPolyhedronRepresentation = h;\n    h.material = this.material;\n  }\n  /**\n   * Calculate the inertia of the box.\n   */\n\n\n  calculateLocalInertia(mass, target) {\n    if (target === void 0) {\n      target = new Vec3$1();\n    }\n\n    Box.calculateInertia(this.halfExtents, mass, target);\n    return target;\n  }\n\n  static calculateInertia(halfExtents, mass, target) {\n    const e = halfExtents;\n    target.x = 1.0 / 12.0 * mass * (2 * e.y * 2 * e.y + 2 * e.z * 2 * e.z);\n    target.y = 1.0 / 12.0 * mass * (2 * e.x * 2 * e.x + 2 * e.z * 2 * e.z);\n    target.z = 1.0 / 12.0 * mass * (2 * e.y * 2 * e.y + 2 * e.x * 2 * e.x);\n  }\n  /**\n   * Get the box 6 side normals\n   * @param sixTargetVectors An array of 6 vectors, to store the resulting side normals in.\n   * @param quat Orientation to apply to the normal vectors. If not provided, the vectors will be in respect to the local frame.\n   */\n\n\n  getSideNormals(sixTargetVectors, quat) {\n    const sides = sixTargetVectors;\n    const ex = this.halfExtents;\n    sides[0].set(ex.x, 0, 0);\n    sides[1].set(0, ex.y, 0);\n    sides[2].set(0, 0, ex.z);\n    sides[3].set(-ex.x, 0, 0);\n    sides[4].set(0, -ex.y, 0);\n    sides[5].set(0, 0, -ex.z);\n\n    if (quat !== undefined) {\n      for (let i = 0; i !== sides.length; i++) {\n        quat.vmult(sides[i], sides[i]);\n      }\n    }\n\n    return sides;\n  }\n  /**\n   * Returns the volume of the box.\n   */\n\n\n  volume() {\n    return 8.0 * this.halfExtents.x * this.halfExtents.y * this.halfExtents.z;\n  }\n  /**\n   * updateBoundingSphereRadius\n   */\n\n\n  updateBoundingSphereRadius() {\n    this.boundingSphereRadius = this.halfExtents.length();\n  }\n  /**\n   * forEachWorldCorner\n   */\n\n\n  forEachWorldCorner(pos, quat, callback) {\n    const e = this.halfExtents;\n    const corners = [[e.x, e.y, e.z], [-e.x, e.y, e.z], [-e.x, -e.y, e.z], [-e.x, -e.y, -e.z], [e.x, -e.y, -e.z], [e.x, e.y, -e.z], [-e.x, e.y, -e.z], [e.x, -e.y, e.z]];\n\n    for (let i = 0; i < corners.length; i++) {\n      worldCornerTempPos.set(corners[i][0], corners[i][1], corners[i][2]);\n      quat.vmult(worldCornerTempPos, worldCornerTempPos);\n      pos.vadd(worldCornerTempPos, worldCornerTempPos);\n      callback(worldCornerTempPos.x, worldCornerTempPos.y, worldCornerTempPos.z);\n    }\n  }\n  /**\n   * calculateWorldAABB\n   */\n\n\n  calculateWorldAABB(pos, quat, min, max) {\n    const e = this.halfExtents;\n    worldCornersTemp[0].set(e.x, e.y, e.z);\n    worldCornersTemp[1].set(-e.x, e.y, e.z);\n    worldCornersTemp[2].set(-e.x, -e.y, e.z);\n    worldCornersTemp[3].set(-e.x, -e.y, -e.z);\n    worldCornersTemp[4].set(e.x, -e.y, -e.z);\n    worldCornersTemp[5].set(e.x, e.y, -e.z);\n    worldCornersTemp[6].set(-e.x, e.y, -e.z);\n    worldCornersTemp[7].set(e.x, -e.y, e.z);\n    const wc = worldCornersTemp[0];\n    quat.vmult(wc, wc);\n    pos.vadd(wc, wc);\n    max.copy(wc);\n    min.copy(wc);\n\n    for (let i = 1; i < 8; i++) {\n      const wc = worldCornersTemp[i];\n      quat.vmult(wc, wc);\n      pos.vadd(wc, wc);\n      const x = wc.x;\n      const y = wc.y;\n      const z = wc.z;\n\n      if (x > max.x) {\n        max.x = x;\n      }\n\n      if (y > max.y) {\n        max.y = y;\n      }\n\n      if (z > max.z) {\n        max.z = z;\n      }\n\n      if (x < min.x) {\n        min.x = x;\n      }\n\n      if (y < min.y) {\n        min.y = y;\n      }\n\n      if (z < min.z) {\n        min.z = z;\n      }\n    } // Get each axis max\n    // min.set(Infinity,Infinity,Infinity);\n    // max.set(-Infinity,-Infinity,-Infinity);\n    // this.forEachWorldCorner(pos,quat,function(x,y,z){\n    //     if(x > max.x){\n    //         max.x = x;\n    //     }\n    //     if(y > max.y){\n    //         max.y = y;\n    //     }\n    //     if(z > max.z){\n    //         max.z = z;\n    //     }\n    //     if(x < min.x){\n    //         min.x = x;\n    //     }\n    //     if(y < min.y){\n    //         min.y = y;\n    //     }\n    //     if(z < min.z){\n    //         min.z = z;\n    //     }\n    // });\n\n  }\n\n}\nconst worldCornerTempPos = new Vec3$1();\nconst worldCornersTemp = [new Vec3$1(), new Vec3$1(), new Vec3$1(), new Vec3$1(), new Vec3$1(), new Vec3$1(), new Vec3$1(), new Vec3$1()];\n\n/**\n * BODY_TYPES\n */\nconst BODY_TYPES = {\n  /** DYNAMIC */\n  DYNAMIC: 1,\n\n  /** STATIC */\n  STATIC: 2,\n\n  /** KINEMATIC */\n  KINEMATIC: 4\n};\n/**\n * BodyType\n */\n\n/**\n * BODY_SLEEP_STATES\n */\nconst BODY_SLEEP_STATES = {\n  /** AWAKE */\n  AWAKE: 0,\n\n  /** SLEEPY */\n  SLEEPY: 1,\n\n  /** SLEEPING */\n  SLEEPING: 2\n};\n/**\n * BodySleepState\n */\n\n/**\n * Base class for all body types.\n * @example\n *     const shape = new CANNON.Sphere(1)\n *     const body = new CANNON.Body({\n *       mass: 1,\n *       shape,\n *     })\n *     world.addBody(body)\n */\nclass Body extends EventTarget {\n  /**\n   * Dispatched after two bodies collide. This event is dispatched on each\n   * of the two bodies involved in the collision.\n   * @event collide\n   * @param body The body that was involved in the collision.\n   * @param contact The details of the collision.\n   */\n\n  /**\n   * A dynamic body is fully simulated. Can be moved manually by the user, but normally they move according to forces. A dynamic body can collide with all body types. A dynamic body always has finite, non-zero mass.\n   */\n\n  /**\n   * A static body does not move during simulation and behaves as if it has infinite mass. Static bodies can be moved manually by setting the position of the body. The velocity of a static body is always zero. Static bodies do not collide with other static or kinematic bodies.\n   */\n\n  /**\n   * A kinematic body moves under simulation according to its velocity. They do not respond to forces. They can be moved manually, but normally a kinematic body is moved by setting its velocity. A kinematic body behaves as if it has infinite mass. Kinematic bodies do not collide with other static or kinematic bodies.\n   */\n\n  /**\n   * AWAKE\n   */\n\n  /**\n   * SLEEPY\n   */\n\n  /**\n   * SLEEPING\n   */\n\n  /**\n   * Dispatched after a sleeping body has woken up.\n   * @event wakeup\n   */\n\n  /**\n   * Dispatched after a body has gone in to the sleepy state.\n   * @event sleepy\n   */\n\n  /**\n   * Dispatched after a body has fallen asleep.\n   * @event sleep\n   */\n  constructor(options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    super();\n    this.id = Body.idCounter++;\n    this.index = -1;\n    this.world = null;\n    this.vlambda = new Vec3$1();\n    this.collisionFilterGroup = typeof options.collisionFilterGroup === 'number' ? options.collisionFilterGroup : 1;\n    this.collisionFilterMask = typeof options.collisionFilterMask === 'number' ? options.collisionFilterMask : -1;\n    this.collisionResponse = typeof options.collisionResponse === 'boolean' ? options.collisionResponse : true;\n    this.position = new Vec3$1();\n    this.previousPosition = new Vec3$1();\n    this.interpolatedPosition = new Vec3$1();\n    this.initPosition = new Vec3$1();\n\n    if (options.position) {\n      this.position.copy(options.position);\n      this.previousPosition.copy(options.position);\n      this.interpolatedPosition.copy(options.position);\n      this.initPosition.copy(options.position);\n    }\n\n    this.velocity = new Vec3$1();\n\n    if (options.velocity) {\n      this.velocity.copy(options.velocity);\n    }\n\n    this.initVelocity = new Vec3$1();\n    this.force = new Vec3$1();\n    const mass = typeof options.mass === 'number' ? options.mass : 0;\n    this.mass = mass;\n    this.invMass = mass > 0 ? 1.0 / mass : 0;\n    this.material = options.material || null;\n    this.linearDamping = typeof options.linearDamping === 'number' ? options.linearDamping : 0.01;\n    this.type = mass <= 0.0 ? Body.STATIC : Body.DYNAMIC;\n\n    if (typeof options.type === typeof Body.STATIC) {\n      this.type = options.type;\n    }\n\n    this.allowSleep = typeof options.allowSleep !== 'undefined' ? options.allowSleep : true;\n    this.sleepState = Body.AWAKE;\n    this.sleepSpeedLimit = typeof options.sleepSpeedLimit !== 'undefined' ? options.sleepSpeedLimit : 0.1;\n    this.sleepTimeLimit = typeof options.sleepTimeLimit !== 'undefined' ? options.sleepTimeLimit : 1;\n    this.timeLastSleepy = 0;\n    this.wakeUpAfterNarrowphase = false;\n    this.torque = new Vec3$1();\n    this.quaternion = new Quaternion$1();\n    this.initQuaternion = new Quaternion$1();\n    this.previousQuaternion = new Quaternion$1();\n    this.interpolatedQuaternion = new Quaternion$1();\n\n    if (options.quaternion) {\n      this.quaternion.copy(options.quaternion);\n      this.initQuaternion.copy(options.quaternion);\n      this.previousQuaternion.copy(options.quaternion);\n      this.interpolatedQuaternion.copy(options.quaternion);\n    }\n\n    this.angularVelocity = new Vec3$1();\n\n    if (options.angularVelocity) {\n      this.angularVelocity.copy(options.angularVelocity);\n    }\n\n    this.initAngularVelocity = new Vec3$1();\n    this.shapes = [];\n    this.shapeOffsets = [];\n    this.shapeOrientations = [];\n    this.inertia = new Vec3$1();\n    this.invInertia = new Vec3$1();\n    this.invInertiaWorld = new Mat3$1();\n    this.invMassSolve = 0;\n    this.invInertiaSolve = new Vec3$1();\n    this.invInertiaWorldSolve = new Mat3$1();\n    this.fixedRotation = typeof options.fixedRotation !== 'undefined' ? options.fixedRotation : false;\n    this.angularDamping = typeof options.angularDamping !== 'undefined' ? options.angularDamping : 0.01;\n    this.linearFactor = new Vec3$1(1, 1, 1);\n\n    if (options.linearFactor) {\n      this.linearFactor.copy(options.linearFactor);\n    }\n\n    this.angularFactor = new Vec3$1(1, 1, 1);\n\n    if (options.angularFactor) {\n      this.angularFactor.copy(options.angularFactor);\n    }\n\n    this.aabb = new AABB$1();\n    this.aabbNeedsUpdate = true;\n    this.boundingRadius = 0;\n    this.wlambda = new Vec3$1();\n    this.isTrigger = Boolean(options.isTrigger);\n\n    if (options.shape) {\n      this.addShape(options.shape);\n    }\n\n    this.updateMassProperties();\n  }\n  /**\n   * Wake the body up.\n   */\n\n\n  wakeUp() {\n    const prevState = this.sleepState;\n    this.sleepState = Body.AWAKE;\n    this.wakeUpAfterNarrowphase = false;\n\n    if (prevState === Body.SLEEPING) {\n      this.dispatchEvent(Body.wakeupEvent);\n    }\n  }\n  /**\n   * Force body sleep\n   */\n\n\n  sleep() {\n    this.sleepState = Body.SLEEPING;\n    this.velocity.set(0, 0, 0);\n    this.angularVelocity.set(0, 0, 0);\n    this.wakeUpAfterNarrowphase = false;\n  }\n  /**\n   * Called every timestep to update internal sleep timer and change sleep state if needed.\n   * @param time The world time in seconds\n   */\n\n\n  sleepTick(time) {\n    if (this.allowSleep) {\n      const sleepState = this.sleepState;\n      const speedSquared = this.velocity.lengthSquared() + this.angularVelocity.lengthSquared();\n      const speedLimitSquared = this.sleepSpeedLimit ** 2;\n\n      if (sleepState === Body.AWAKE && speedSquared < speedLimitSquared) {\n        this.sleepState = Body.SLEEPY; // Sleepy\n\n        this.timeLastSleepy = time;\n        this.dispatchEvent(Body.sleepyEvent);\n      } else if (sleepState === Body.SLEEPY && speedSquared > speedLimitSquared) {\n        this.wakeUp(); // Wake up\n      } else if (sleepState === Body.SLEEPY && time - this.timeLastSleepy > this.sleepTimeLimit) {\n        this.sleep(); // Sleeping\n\n        this.dispatchEvent(Body.sleepEvent);\n      }\n    }\n  }\n  /**\n   * If the body is sleeping, it should be immovable / have infinite mass during solve. We solve it by having a separate \"solve mass\".\n   */\n\n\n  updateSolveMassProperties() {\n    if (this.sleepState === Body.SLEEPING || this.type === Body.KINEMATIC) {\n      this.invMassSolve = 0;\n      this.invInertiaSolve.setZero();\n      this.invInertiaWorldSolve.setZero();\n    } else {\n      this.invMassSolve = this.invMass;\n      this.invInertiaSolve.copy(this.invInertia);\n      this.invInertiaWorldSolve.copy(this.invInertiaWorld);\n    }\n  }\n  /**\n   * Convert a world point to local body frame.\n   */\n\n\n  pointToLocalFrame(worldPoint, result) {\n    if (result === void 0) {\n      result = new Vec3$1();\n    }\n\n    worldPoint.vsub(this.position, result);\n    this.quaternion.conjugate().vmult(result, result);\n    return result;\n  }\n  /**\n   * Convert a world vector to local body frame.\n   */\n\n\n  vectorToLocalFrame(worldVector, result) {\n    if (result === void 0) {\n      result = new Vec3$1();\n    }\n\n    this.quaternion.conjugate().vmult(worldVector, result);\n    return result;\n  }\n  /**\n   * Convert a local body point to world frame.\n   */\n\n\n  pointToWorldFrame(localPoint, result) {\n    if (result === void 0) {\n      result = new Vec3$1();\n    }\n\n    this.quaternion.vmult(localPoint, result);\n    result.vadd(this.position, result);\n    return result;\n  }\n  /**\n   * Convert a local body point to world frame.\n   */\n\n\n  vectorToWorldFrame(localVector, result) {\n    if (result === void 0) {\n      result = new Vec3$1();\n    }\n\n    this.quaternion.vmult(localVector, result);\n    return result;\n  }\n  /**\n   * Add a shape to the body with a local offset and orientation.\n   * @return The body object, for chainability.\n   */\n\n\n  addShape(shape, _offset, _orientation) {\n    const offset = new Vec3$1();\n    const orientation = new Quaternion$1();\n\n    if (_offset) {\n      offset.copy(_offset);\n    }\n\n    if (_orientation) {\n      orientation.copy(_orientation);\n    }\n\n    this.shapes.push(shape);\n    this.shapeOffsets.push(offset);\n    this.shapeOrientations.push(orientation);\n    this.updateMassProperties();\n    this.updateBoundingRadius();\n    this.aabbNeedsUpdate = true;\n    shape.body = this;\n    return this;\n  }\n  /**\n   * Remove a shape from the body.\n   * @return The body object, for chainability.\n   */\n\n\n  removeShape(shape) {\n    const index = this.shapes.indexOf(shape);\n\n    if (index === -1) {\n      console.warn('Shape does not belong to the body');\n      return this;\n    }\n\n    this.shapes.splice(index, 1);\n    this.shapeOffsets.splice(index, 1);\n    this.shapeOrientations.splice(index, 1);\n    this.updateMassProperties();\n    this.updateBoundingRadius();\n    this.aabbNeedsUpdate = true;\n    shape.body = null;\n    return this;\n  }\n  /**\n   * Update the bounding radius of the body. Should be done if any of the shapes are changed.\n   */\n\n\n  updateBoundingRadius() {\n    const shapes = this.shapes;\n    const shapeOffsets = this.shapeOffsets;\n    const N = shapes.length;\n    let radius = 0;\n\n    for (let i = 0; i !== N; i++) {\n      const shape = shapes[i];\n      shape.updateBoundingSphereRadius();\n      const offset = shapeOffsets[i].length();\n      const r = shape.boundingSphereRadius;\n\n      if (offset + r > radius) {\n        radius = offset + r;\n      }\n    }\n\n    this.boundingRadius = radius;\n  }\n  /**\n   * Updates the .aabb\n   */\n\n\n  updateAABB() {\n    const shapes = this.shapes;\n    const shapeOffsets = this.shapeOffsets;\n    const shapeOrientations = this.shapeOrientations;\n    const N = shapes.length;\n    const offset = tmpVec;\n    const orientation = tmpQuat;\n    const bodyQuat = this.quaternion;\n    const aabb = this.aabb;\n    const shapeAABB = updateAABB_shapeAABB;\n\n    for (let i = 0; i !== N; i++) {\n      const shape = shapes[i]; // Get shape world position\n\n      bodyQuat.vmult(shapeOffsets[i], offset);\n      offset.vadd(this.position, offset); // Get shape world quaternion\n\n      bodyQuat.mult(shapeOrientations[i], orientation); // Get shape AABB\n\n      shape.calculateWorldAABB(offset, orientation, shapeAABB.lowerBound, shapeAABB.upperBound);\n\n      if (i === 0) {\n        aabb.copy(shapeAABB);\n      } else {\n        aabb.extend(shapeAABB);\n      }\n    }\n\n    this.aabbNeedsUpdate = false;\n  }\n  /**\n   * Update `.inertiaWorld` and `.invInertiaWorld`\n   */\n\n\n  updateInertiaWorld(force) {\n    const I = this.invInertia;\n\n    if (I.x === I.y && I.y === I.z && !force) ; else {\n      const m1 = uiw_m1;\n      const m2 = uiw_m2;\n      m1.setRotationFromQuaternion(this.quaternion);\n      m1.transpose(m2);\n      m1.scale(I, m1);\n      m1.mmult(m2, this.invInertiaWorld);\n    }\n  }\n  /**\n   * Apply force to a point of the body. This could for example be a point on the Body surface.\n   * Applying force this way will add to Body.force and Body.torque.\n   * @param force The amount of force to add.\n   * @param relativePoint A point relative to the center of mass to apply the force on.\n   */\n\n\n  applyForce(force, relativePoint) {\n    if (relativePoint === void 0) {\n      relativePoint = new Vec3$1();\n    }\n\n    // Needed?\n    if (this.type !== Body.DYNAMIC) {\n      return;\n    }\n\n    if (this.sleepState === Body.SLEEPING) {\n      this.wakeUp();\n    } // Compute produced rotational force\n\n\n    const rotForce = Body_applyForce_rotForce;\n    relativePoint.cross(force, rotForce); // Add linear force\n\n    this.force.vadd(force, this.force); // Add rotational force\n\n    this.torque.vadd(rotForce, this.torque);\n  }\n  /**\n   * Apply force to a local point in the body.\n   * @param force The force vector to apply, defined locally in the body frame.\n   * @param localPoint A local point in the body to apply the force on.\n   */\n\n\n  applyLocalForce(localForce, localPoint) {\n    if (localPoint === void 0) {\n      localPoint = new Vec3$1();\n    }\n\n    if (this.type !== Body.DYNAMIC) {\n      return;\n    }\n\n    const worldForce = Body_applyLocalForce_worldForce;\n    const relativePointWorld = Body_applyLocalForce_relativePointWorld; // Transform the force vector to world space\n\n    this.vectorToWorldFrame(localForce, worldForce);\n    this.vectorToWorldFrame(localPoint, relativePointWorld);\n    this.applyForce(worldForce, relativePointWorld);\n  }\n  /**\n   * Apply torque to the body.\n   * @param torque The amount of torque to add.\n   */\n\n\n  applyTorque(torque) {\n    if (this.type !== Body.DYNAMIC) {\n      return;\n    }\n\n    if (this.sleepState === Body.SLEEPING) {\n      this.wakeUp();\n    } // Add rotational force\n\n\n    this.torque.vadd(torque, this.torque);\n  }\n  /**\n   * Apply impulse to a point of the body. This could for example be a point on the Body surface.\n   * An impulse is a force added to a body during a short period of time (impulse = force * time).\n   * Impulses will be added to Body.velocity and Body.angularVelocity.\n   * @param impulse The amount of impulse to add.\n   * @param relativePoint A point relative to the center of mass to apply the force on.\n   */\n\n\n  applyImpulse(impulse, relativePoint) {\n    if (relativePoint === void 0) {\n      relativePoint = new Vec3$1();\n    }\n\n    if (this.type !== Body.DYNAMIC) {\n      return;\n    }\n\n    if (this.sleepState === Body.SLEEPING) {\n      this.wakeUp();\n    } // Compute point position relative to the body center\n\n\n    const r = relativePoint; // Compute produced central impulse velocity\n\n    const velo = Body_applyImpulse_velo;\n    velo.copy(impulse);\n    velo.scale(this.invMass, velo); // Add linear impulse\n\n    this.velocity.vadd(velo, this.velocity); // Compute produced rotational impulse velocity\n\n    const rotVelo = Body_applyImpulse_rotVelo;\n    r.cross(impulse, rotVelo);\n    /*\n     rotVelo.x *= this.invInertia.x;\n     rotVelo.y *= this.invInertia.y;\n     rotVelo.z *= this.invInertia.z;\n     */\n\n    this.invInertiaWorld.vmult(rotVelo, rotVelo); // Add rotational Impulse\n\n    this.angularVelocity.vadd(rotVelo, this.angularVelocity);\n  }\n  /**\n   * Apply locally-defined impulse to a local point in the body.\n   * @param force The force vector to apply, defined locally in the body frame.\n   * @param localPoint A local point in the body to apply the force on.\n   */\n\n\n  applyLocalImpulse(localImpulse, localPoint) {\n    if (localPoint === void 0) {\n      localPoint = new Vec3$1();\n    }\n\n    if (this.type !== Body.DYNAMIC) {\n      return;\n    }\n\n    const worldImpulse = Body_applyLocalImpulse_worldImpulse;\n    const relativePointWorld = Body_applyLocalImpulse_relativePoint; // Transform the force vector to world space\n\n    this.vectorToWorldFrame(localImpulse, worldImpulse);\n    this.vectorToWorldFrame(localPoint, relativePointWorld);\n    this.applyImpulse(worldImpulse, relativePointWorld);\n  }\n  /**\n   * Should be called whenever you change the body shape or mass.\n   */\n\n\n  updateMassProperties() {\n    const halfExtents = Body_updateMassProperties_halfExtents;\n    this.invMass = this.mass > 0 ? 1.0 / this.mass : 0;\n    const I = this.inertia;\n    const fixed = this.fixedRotation; // Approximate with AABB box\n\n    this.updateAABB();\n    halfExtents.set((this.aabb.upperBound.x - this.aabb.lowerBound.x) / 2, (this.aabb.upperBound.y - this.aabb.lowerBound.y) / 2, (this.aabb.upperBound.z - this.aabb.lowerBound.z) / 2);\n    Box.calculateInertia(halfExtents, this.mass, I);\n    this.invInertia.set(I.x > 0 && !fixed ? 1.0 / I.x : 0, I.y > 0 && !fixed ? 1.0 / I.y : 0, I.z > 0 && !fixed ? 1.0 / I.z : 0);\n    this.updateInertiaWorld(true);\n  }\n  /**\n   * Get world velocity of a point in the body.\n   * @param worldPoint\n   * @param result\n   * @return The result vector.\n   */\n\n\n  getVelocityAtWorldPoint(worldPoint, result) {\n    const r = new Vec3$1();\n    worldPoint.vsub(this.position, r);\n    this.angularVelocity.cross(r, result);\n    this.velocity.vadd(result, result);\n    return result;\n  }\n  /**\n   * Move the body forward in time.\n   * @param dt Time step\n   * @param quatNormalize Set to true to normalize the body quaternion\n   * @param quatNormalizeFast If the quaternion should be normalized using \"fast\" quaternion normalization\n   */\n\n\n  integrate(dt, quatNormalize, quatNormalizeFast) {\n    // Save previous position\n    this.previousPosition.copy(this.position);\n    this.previousQuaternion.copy(this.quaternion);\n\n    if (!(this.type === Body.DYNAMIC || this.type === Body.KINEMATIC) || this.sleepState === Body.SLEEPING) {\n      // Only for dynamic\n      return;\n    }\n\n    const velo = this.velocity;\n    const angularVelo = this.angularVelocity;\n    const pos = this.position;\n    const force = this.force;\n    const torque = this.torque;\n    const quat = this.quaternion;\n    const invMass = this.invMass;\n    const invInertia = this.invInertiaWorld;\n    const linearFactor = this.linearFactor;\n    const iMdt = invMass * dt;\n    velo.x += force.x * iMdt * linearFactor.x;\n    velo.y += force.y * iMdt * linearFactor.y;\n    velo.z += force.z * iMdt * linearFactor.z;\n    const e = invInertia.elements;\n    const angularFactor = this.angularFactor;\n    const tx = torque.x * angularFactor.x;\n    const ty = torque.y * angularFactor.y;\n    const tz = torque.z * angularFactor.z;\n    angularVelo.x += dt * (e[0] * tx + e[1] * ty + e[2] * tz);\n    angularVelo.y += dt * (e[3] * tx + e[4] * ty + e[5] * tz);\n    angularVelo.z += dt * (e[6] * tx + e[7] * ty + e[8] * tz); // Use new velocity  - leap frog\n\n    pos.x += velo.x * dt;\n    pos.y += velo.y * dt;\n    pos.z += velo.z * dt;\n    quat.integrate(this.angularVelocity, dt, this.angularFactor, quat);\n\n    if (quatNormalize) {\n      if (quatNormalizeFast) {\n        quat.normalizeFast();\n      } else {\n        quat.normalize();\n      }\n    }\n\n    this.aabbNeedsUpdate = true; // Update world inertia\n\n    this.updateInertiaWorld();\n  }\n\n}\nBody.idCounter = 0;\nBody.COLLIDE_EVENT_NAME = 'collide';\nBody.DYNAMIC = BODY_TYPES.DYNAMIC;\nBody.STATIC = BODY_TYPES.STATIC;\nBody.KINEMATIC = BODY_TYPES.KINEMATIC;\nBody.AWAKE = BODY_SLEEP_STATES.AWAKE;\nBody.SLEEPY = BODY_SLEEP_STATES.SLEEPY;\nBody.SLEEPING = BODY_SLEEP_STATES.SLEEPING;\nBody.wakeupEvent = {\n  type: 'wakeup'\n};\nBody.sleepyEvent = {\n  type: 'sleepy'\n};\nBody.sleepEvent = {\n  type: 'sleep'\n};\nconst tmpVec = new Vec3$1();\nconst tmpQuat = new Quaternion$1();\nconst updateAABB_shapeAABB = new AABB$1();\nconst uiw_m1 = new Mat3$1();\nconst uiw_m2 = new Mat3$1();\nnew Mat3$1();\nconst Body_applyForce_rotForce = new Vec3$1();\nconst Body_applyLocalForce_worldForce = new Vec3$1();\nconst Body_applyLocalForce_relativePointWorld = new Vec3$1();\nconst Body_applyImpulse_velo = new Vec3$1();\nconst Body_applyImpulse_rotVelo = new Vec3$1();\nconst Body_applyLocalImpulse_worldImpulse = new Vec3$1();\nconst Body_applyLocalImpulse_relativePoint = new Vec3$1();\nconst Body_updateMassProperties_halfExtents = new Vec3$1();\n\nnew Vec3$1();\nnew Vec3$1();\nnew Quaternion$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\n\n/**\n * Storage for Ray casting data\n */\nclass RaycastResult$1 {\n  /**\n   * rayFromWorld\n   */\n\n  /**\n   * rayToWorld\n   */\n\n  /**\n   * hitNormalWorld\n   */\n\n  /**\n   * hitPointWorld\n   */\n\n  /**\n   * hasHit\n   */\n\n  /**\n   * shape\n   */\n\n  /**\n   * body\n   */\n\n  /**\n   * The index of the hit triangle, if the hit shape was a trimesh\n   */\n\n  /**\n   * Distance to the hit. Will be set to -1 if there was no hit\n   */\n\n  /**\n   * If the ray should stop traversing the bodies\n   */\n  constructor() {\n    this.rayFromWorld = new Vec3$1();\n    this.rayToWorld = new Vec3$1();\n    this.hitNormalWorld = new Vec3$1();\n    this.hitPointWorld = new Vec3$1();\n    this.hasHit = false;\n    this.shape = null;\n    this.body = null;\n    this.hitFaceIndex = -1;\n    this.distance = -1;\n    this.shouldStop = false;\n  }\n  /**\n   * Reset all result data.\n   */\n\n\n  reset() {\n    this.rayFromWorld.setZero();\n    this.rayToWorld.setZero();\n    this.hitNormalWorld.setZero();\n    this.hitPointWorld.setZero();\n    this.hasHit = false;\n    this.shape = null;\n    this.body = null;\n    this.hitFaceIndex = -1;\n    this.distance = -1;\n    this.shouldStop = false;\n  }\n  /**\n   * abort\n   */\n\n\n  abort() {\n    this.shouldStop = true;\n  }\n  /**\n   * Set result data.\n   */\n\n\n  set(rayFromWorld, rayToWorld, hitNormalWorld, hitPointWorld, shape, body, distance) {\n    this.rayFromWorld.copy(rayFromWorld);\n    this.rayToWorld.copy(rayToWorld);\n    this.hitNormalWorld.copy(hitNormalWorld);\n    this.hitPointWorld.copy(hitPointWorld);\n    this.shape = shape;\n    this.body = body;\n    this.distance = distance;\n  }\n\n}\n\nlet _Shape$types$SPHERE$1, _Shape$types$PLANE$1, _Shape$types$BOX$1, _Shape$types$CYLINDER$1, _Shape$types$CONVEXPO$1, _Shape$types$HEIGHTFI$1, _Shape$types$TRIMESH$1;\n\n/**\n * RAY_MODES\n */\nconst RAY_MODES$1 = {\n  /** CLOSEST */\n  CLOSEST: 1,\n\n  /** ANY */\n  ANY: 2,\n\n  /** ALL */\n  ALL: 4\n};\n/**\n * RayMode\n */\n\n_Shape$types$SPHERE$1 = Shape$1.types.SPHERE;\n_Shape$types$PLANE$1 = Shape$1.types.PLANE;\n_Shape$types$BOX$1 = Shape$1.types.BOX;\n_Shape$types$CYLINDER$1 = Shape$1.types.CYLINDER;\n_Shape$types$CONVEXPO$1 = Shape$1.types.CONVEXPOLYHEDRON;\n_Shape$types$HEIGHTFI$1 = Shape$1.types.HEIGHTFIELD;\n_Shape$types$TRIMESH$1 = Shape$1.types.TRIMESH;\n\n/**\n * A line in 3D space that intersects bodies and return points.\n */\nclass Ray$1 {\n  /**\n   * from\n   */\n\n  /**\n   * to\n   */\n\n  /**\n   * direction\n   */\n\n  /**\n   * The precision of the ray. Used when checking parallelity etc.\n   * @default 0.0001\n   */\n\n  /**\n   * Set to `false` if you don't want the Ray to take `collisionResponse` flags into account on bodies and shapes.\n   * @default true\n   */\n\n  /**\n   * If set to `true`, the ray skips any hits with normal.dot(rayDirection) < 0.\n   * @default false\n   */\n\n  /**\n   * collisionFilterMask\n   * @default -1\n   */\n\n  /**\n   * collisionFilterGroup\n   * @default -1\n   */\n\n  /**\n   * The intersection mode. Should be Ray.ANY, Ray.ALL or Ray.CLOSEST.\n   * @default RAY.ANY\n   */\n\n  /**\n   * Current result object.\n   */\n\n  /**\n   * Will be set to `true` during intersectWorld() if the ray hit anything.\n   */\n\n  /**\n   * User-provided result callback. Will be used if mode is Ray.ALL.\n   */\n\n  /**\n   * CLOSEST\n   */\n\n  /**\n   * ANY\n   */\n\n  /**\n   * ALL\n   */\n  get [_Shape$types$SPHERE$1]() {\n    return this._intersectSphere;\n  }\n\n  get [_Shape$types$PLANE$1]() {\n    return this._intersectPlane;\n  }\n\n  get [_Shape$types$BOX$1]() {\n    return this._intersectBox;\n  }\n\n  get [_Shape$types$CYLINDER$1]() {\n    return this._intersectConvex;\n  }\n\n  get [_Shape$types$CONVEXPO$1]() {\n    return this._intersectConvex;\n  }\n\n  get [_Shape$types$HEIGHTFI$1]() {\n    return this._intersectHeightfield;\n  }\n\n  get [_Shape$types$TRIMESH$1]() {\n    return this._intersectTrimesh;\n  }\n\n  constructor(from, to) {\n    if (from === void 0) {\n      from = new Vec3$1();\n    }\n\n    if (to === void 0) {\n      to = new Vec3$1();\n    }\n\n    this.from = from.clone();\n    this.to = to.clone();\n    this.direction = new Vec3$1();\n    this.precision = 0.0001;\n    this.checkCollisionResponse = true;\n    this.skipBackfaces = false;\n    this.collisionFilterMask = -1;\n    this.collisionFilterGroup = -1;\n    this.mode = Ray$1.ANY;\n    this.result = new RaycastResult$1();\n    this.hasHit = false;\n\n    this.callback = result => {};\n  }\n  /**\n   * Do itersection against all bodies in the given World.\n   * @return True if the ray hit anything, otherwise false.\n   */\n\n\n  intersectWorld(world, options) {\n    this.mode = options.mode || Ray$1.ANY;\n    this.result = options.result || new RaycastResult$1();\n    this.skipBackfaces = !!options.skipBackfaces;\n    this.collisionFilterMask = typeof options.collisionFilterMask !== 'undefined' ? options.collisionFilterMask : -1;\n    this.collisionFilterGroup = typeof options.collisionFilterGroup !== 'undefined' ? options.collisionFilterGroup : -1;\n    this.checkCollisionResponse = typeof options.checkCollisionResponse !== 'undefined' ? options.checkCollisionResponse : true;\n\n    if (options.from) {\n      this.from.copy(options.from);\n    }\n\n    if (options.to) {\n      this.to.copy(options.to);\n    }\n\n    this.callback = options.callback || (() => {});\n\n    this.hasHit = false;\n    this.result.reset();\n    this.updateDirection();\n    this.getAABB(tmpAABB$1$1);\n    tmpArray$1.length = 0;\n    world.broadphase.aabbQuery(world, tmpAABB$1$1, tmpArray$1);\n    this.intersectBodies(tmpArray$1);\n    return this.hasHit;\n  }\n  /**\n   * Shoot a ray at a body, get back information about the hit.\n   * @deprecated @param result set the result property of the Ray instead.\n   */\n\n\n  intersectBody(body, result) {\n    if (result) {\n      this.result = result;\n      this.updateDirection();\n    }\n\n    const checkCollisionResponse = this.checkCollisionResponse;\n\n    if (checkCollisionResponse && !body.collisionResponse) {\n      return;\n    }\n\n    if ((this.collisionFilterGroup & body.collisionFilterMask) === 0 || (body.collisionFilterGroup & this.collisionFilterMask) === 0) {\n      return;\n    }\n\n    const xi = intersectBody_xi$1;\n    const qi = intersectBody_qi$1;\n\n    for (let i = 0, N = body.shapes.length; i < N; i++) {\n      const shape = body.shapes[i];\n\n      if (checkCollisionResponse && !shape.collisionResponse) {\n        continue; // Skip\n      }\n\n      body.quaternion.mult(body.shapeOrientations[i], qi);\n      body.quaternion.vmult(body.shapeOffsets[i], xi);\n      xi.vadd(body.position, xi);\n      this.intersectShape(shape, qi, xi, body);\n\n      if (this.result.shouldStop) {\n        break;\n      }\n    }\n  }\n  /**\n   * Shoot a ray at an array bodies, get back information about the hit.\n   * @param bodies An array of Body objects.\n   * @deprecated @param result set the result property of the Ray instead.\n   *\n   */\n\n\n  intersectBodies(bodies, result) {\n    if (result) {\n      this.result = result;\n      this.updateDirection();\n    }\n\n    for (let i = 0, l = bodies.length; !this.result.shouldStop && i < l; i++) {\n      this.intersectBody(bodies[i]);\n    }\n  }\n  /**\n   * Updates the direction vector.\n   */\n\n\n  updateDirection() {\n    this.to.vsub(this.from, this.direction);\n    this.direction.normalize();\n  }\n\n  intersectShape(shape, quat, position, body) {\n    const from = this.from; // Checking boundingSphere\n\n    const distance = distanceFromIntersection$1(from, this.direction, position);\n\n    if (distance > shape.boundingSphereRadius) {\n      return;\n    }\n\n    const intersectMethod = this[shape.type];\n\n    if (intersectMethod) {\n      intersectMethod.call(this, shape, quat, position, body, shape);\n    }\n  }\n\n  _intersectBox(box, quat, position, body, reportedShape) {\n    return this._intersectConvex(box.convexPolyhedronRepresentation, quat, position, body, reportedShape);\n  }\n\n  _intersectPlane(shape, quat, position, body, reportedShape) {\n    const from = this.from;\n    const to = this.to;\n    const direction = this.direction; // Get plane normal\n\n    const worldNormal = new Vec3$1(0, 0, 1);\n    quat.vmult(worldNormal, worldNormal);\n    const len = new Vec3$1();\n    from.vsub(position, len);\n    const planeToFrom = len.dot(worldNormal);\n    to.vsub(position, len);\n    const planeToTo = len.dot(worldNormal);\n\n    if (planeToFrom * planeToTo > 0) {\n      // \"from\" and \"to\" are on the same side of the plane... bail out\n      return;\n    }\n\n    if (from.distanceTo(to) < planeToFrom) {\n      return;\n    }\n\n    const n_dot_dir = worldNormal.dot(direction);\n\n    if (Math.abs(n_dot_dir) < this.precision) {\n      // No intersection\n      return;\n    }\n\n    const planePointToFrom = new Vec3$1();\n    const dir_scaled_with_t = new Vec3$1();\n    const hitPointWorld = new Vec3$1();\n    from.vsub(position, planePointToFrom);\n    const t = -worldNormal.dot(planePointToFrom) / n_dot_dir;\n    direction.scale(t, dir_scaled_with_t);\n    from.vadd(dir_scaled_with_t, hitPointWorld);\n    this.reportIntersection(worldNormal, hitPointWorld, reportedShape, body, -1);\n  }\n  /**\n   * Get the world AABB of the ray.\n   */\n\n\n  getAABB(aabb) {\n    const {\n      lowerBound,\n      upperBound\n    } = aabb;\n    const to = this.to;\n    const from = this.from;\n    lowerBound.x = Math.min(to.x, from.x);\n    lowerBound.y = Math.min(to.y, from.y);\n    lowerBound.z = Math.min(to.z, from.z);\n    upperBound.x = Math.max(to.x, from.x);\n    upperBound.y = Math.max(to.y, from.y);\n    upperBound.z = Math.max(to.z, from.z);\n  }\n\n  _intersectHeightfield(shape, quat, position, body, reportedShape) {\n    shape.data;\n    shape.elementSize; // Convert the ray to local heightfield coordinates\n\n    const localRay = intersectHeightfield_localRay$1; //new Ray(this.from, this.to);\n\n    localRay.from.copy(this.from);\n    localRay.to.copy(this.to);\n    Transform$1.pointToLocalFrame(position, quat, localRay.from, localRay.from);\n    Transform$1.pointToLocalFrame(position, quat, localRay.to, localRay.to);\n    localRay.updateDirection(); // Get the index of the data points to test against\n\n    const index = intersectHeightfield_index$1;\n    let iMinX;\n    let iMinY;\n    let iMaxX;\n    let iMaxY; // Set to max\n\n    iMinX = iMinY = 0;\n    iMaxX = iMaxY = shape.data.length - 1;\n    const aabb = new AABB$1();\n    localRay.getAABB(aabb);\n    shape.getIndexOfPosition(aabb.lowerBound.x, aabb.lowerBound.y, index, true);\n    iMinX = Math.max(iMinX, index[0]);\n    iMinY = Math.max(iMinY, index[1]);\n    shape.getIndexOfPosition(aabb.upperBound.x, aabb.upperBound.y, index, true);\n    iMaxX = Math.min(iMaxX, index[0] + 1);\n    iMaxY = Math.min(iMaxY, index[1] + 1);\n\n    for (let i = iMinX; i < iMaxX; i++) {\n      for (let j = iMinY; j < iMaxY; j++) {\n        if (this.result.shouldStop) {\n          return;\n        }\n\n        shape.getAabbAtIndex(i, j, aabb);\n\n        if (!aabb.overlapsRay(localRay)) {\n          continue;\n        } // Lower triangle\n\n\n        shape.getConvexTrianglePillar(i, j, false);\n        Transform$1.pointToWorldFrame(position, quat, shape.pillarOffset, worldPillarOffset$1);\n\n        this._intersectConvex(shape.pillarConvex, quat, worldPillarOffset$1, body, reportedShape, intersectConvexOptions$1);\n\n        if (this.result.shouldStop) {\n          return;\n        } // Upper triangle\n\n\n        shape.getConvexTrianglePillar(i, j, true);\n        Transform$1.pointToWorldFrame(position, quat, shape.pillarOffset, worldPillarOffset$1);\n\n        this._intersectConvex(shape.pillarConvex, quat, worldPillarOffset$1, body, reportedShape, intersectConvexOptions$1);\n      }\n    }\n  }\n\n  _intersectSphere(sphere, quat, position, body, reportedShape) {\n    const from = this.from;\n    const to = this.to;\n    const r = sphere.radius;\n    const a = (to.x - from.x) ** 2 + (to.y - from.y) ** 2 + (to.z - from.z) ** 2;\n    const b = 2 * ((to.x - from.x) * (from.x - position.x) + (to.y - from.y) * (from.y - position.y) + (to.z - from.z) * (from.z - position.z));\n    const c = (from.x - position.x) ** 2 + (from.y - position.y) ** 2 + (from.z - position.z) ** 2 - r ** 2;\n    const delta = b ** 2 - 4 * a * c;\n    const intersectionPoint = Ray_intersectSphere_intersectionPoint$1;\n    const normal = Ray_intersectSphere_normal$1;\n\n    if (delta < 0) {\n      // No intersection\n      return;\n    } else if (delta === 0) {\n      // single intersection point\n      from.lerp(to, delta, intersectionPoint);\n      intersectionPoint.vsub(position, normal);\n      normal.normalize();\n      this.reportIntersection(normal, intersectionPoint, reportedShape, body, -1);\n    } else {\n      const d1 = (-b - Math.sqrt(delta)) / (2 * a);\n      const d2 = (-b + Math.sqrt(delta)) / (2 * a);\n\n      if (d1 >= 0 && d1 <= 1) {\n        from.lerp(to, d1, intersectionPoint);\n        intersectionPoint.vsub(position, normal);\n        normal.normalize();\n        this.reportIntersection(normal, intersectionPoint, reportedShape, body, -1);\n      }\n\n      if (this.result.shouldStop) {\n        return;\n      }\n\n      if (d2 >= 0 && d2 <= 1) {\n        from.lerp(to, d2, intersectionPoint);\n        intersectionPoint.vsub(position, normal);\n        normal.normalize();\n        this.reportIntersection(normal, intersectionPoint, reportedShape, body, -1);\n      }\n    }\n  }\n\n  _intersectConvex(shape, quat, position, body, reportedShape, options) {\n    const normal = intersectConvex_normal$1;\n    const vector = intersectConvex_vector$1;\n    const faceList = options && options.faceList || null; // Checking faces\n\n    const faces = shape.faces;\n    const vertices = shape.vertices;\n    const normals = shape.faceNormals;\n    const direction = this.direction;\n    const from = this.from;\n    const to = this.to;\n    const fromToDistance = from.distanceTo(to);\n    const Nfaces = faceList ? faceList.length : faces.length;\n    const result = this.result;\n\n    for (let j = 0; !result.shouldStop && j < Nfaces; j++) {\n      const fi = faceList ? faceList[j] : j;\n      const face = faces[fi];\n      const faceNormal = normals[fi];\n      const q = quat;\n      const x = position; // determine if ray intersects the plane of the face\n      // note: this works regardless of the direction of the face normal\n      // Get plane point in world coordinates...\n\n      vector.copy(vertices[face[0]]);\n      q.vmult(vector, vector);\n      vector.vadd(x, vector); // ...but make it relative to the ray from. We'll fix this later.\n\n      vector.vsub(from, vector); // Get plane normal\n\n      q.vmult(faceNormal, normal); // If this dot product is negative, we have something interesting\n\n      const dot = direction.dot(normal); // Bail out if ray and plane are parallel\n\n      if (Math.abs(dot) < this.precision) {\n        continue;\n      } // calc distance to plane\n\n\n      const scalar = normal.dot(vector) / dot; // if negative distance, then plane is behind ray\n\n      if (scalar < 0) {\n        continue;\n      } // if (dot < 0) {\n      // Intersection point is from + direction * scalar\n\n\n      direction.scale(scalar, intersectPoint$1);\n      intersectPoint$1.vadd(from, intersectPoint$1); // a is the point we compare points b and c with.\n\n      a$1.copy(vertices[face[0]]);\n      q.vmult(a$1, a$1);\n      x.vadd(a$1, a$1);\n\n      for (let i = 1; !result.shouldStop && i < face.length - 1; i++) {\n        // Transform 3 vertices to world coords\n        b$1.copy(vertices[face[i]]);\n        c$1.copy(vertices[face[i + 1]]);\n        q.vmult(b$1, b$1);\n        q.vmult(c$1, c$1);\n        x.vadd(b$1, b$1);\n        x.vadd(c$1, c$1);\n        const distance = intersectPoint$1.distanceTo(from);\n\n        if (!(Ray$1.pointInTriangle(intersectPoint$1, a$1, b$1, c$1) || Ray$1.pointInTriangle(intersectPoint$1, b$1, a$1, c$1)) || distance > fromToDistance) {\n          continue;\n        }\n\n        this.reportIntersection(normal, intersectPoint$1, reportedShape, body, fi);\n      } // }\n\n    }\n  }\n  /**\n   * @todo Optimize by transforming the world to local space first.\n   * @todo Use Octree lookup\n   */\n\n\n  _intersectTrimesh(mesh, quat, position, body, reportedShape, options) {\n    const normal = intersectTrimesh_normal$1;\n    const triangles = intersectTrimesh_triangles$1;\n    const treeTransform = intersectTrimesh_treeTransform$1;\n    const vector = intersectConvex_vector$1;\n    const localDirection = intersectTrimesh_localDirection$1;\n    const localFrom = intersectTrimesh_localFrom$1;\n    const localTo = intersectTrimesh_localTo$1;\n    const worldIntersectPoint = intersectTrimesh_worldIntersectPoint$1;\n    const worldNormal = intersectTrimesh_worldNormal$1; // Checking faces\n\n    const indices = mesh.indices;\n    mesh.vertices; // const normals = mesh.faceNormals\n\n    const from = this.from;\n    const to = this.to;\n    const direction = this.direction;\n    treeTransform.position.copy(position);\n    treeTransform.quaternion.copy(quat); // Transform ray to local space!\n\n    Transform$1.vectorToLocalFrame(position, quat, direction, localDirection);\n    Transform$1.pointToLocalFrame(position, quat, from, localFrom);\n    Transform$1.pointToLocalFrame(position, quat, to, localTo);\n    localTo.x *= mesh.scale.x;\n    localTo.y *= mesh.scale.y;\n    localTo.z *= mesh.scale.z;\n    localFrom.x *= mesh.scale.x;\n    localFrom.y *= mesh.scale.y;\n    localFrom.z *= mesh.scale.z;\n    localTo.vsub(localFrom, localDirection);\n    localDirection.normalize();\n    const fromToDistanceSquared = localFrom.distanceSquared(localTo);\n    mesh.tree.rayQuery(this, treeTransform, triangles);\n\n    for (let i = 0, N = triangles.length; !this.result.shouldStop && i !== N; i++) {\n      const trianglesIndex = triangles[i];\n      mesh.getNormal(trianglesIndex, normal); // determine if ray intersects the plane of the face\n      // note: this works regardless of the direction of the face normal\n      // Get plane point in world coordinates...\n\n      mesh.getVertex(indices[trianglesIndex * 3], a$1); // ...but make it relative to the ray from. We'll fix this later.\n\n      a$1.vsub(localFrom, vector); // If this dot product is negative, we have something interesting\n\n      const dot = localDirection.dot(normal); // Bail out if ray and plane are parallel\n      // if (Math.abs( dot ) < this.precision){\n      //     continue;\n      // }\n      // calc distance to plane\n\n      const scalar = normal.dot(vector) / dot; // if negative distance, then plane is behind ray\n\n      if (scalar < 0) {\n        continue;\n      } // Intersection point is from + direction * scalar\n\n\n      localDirection.scale(scalar, intersectPoint$1);\n      intersectPoint$1.vadd(localFrom, intersectPoint$1); // Get triangle vertices\n\n      mesh.getVertex(indices[trianglesIndex * 3 + 1], b$1);\n      mesh.getVertex(indices[trianglesIndex * 3 + 2], c$1);\n      const squaredDistance = intersectPoint$1.distanceSquared(localFrom);\n\n      if (!(Ray$1.pointInTriangle(intersectPoint$1, b$1, a$1, c$1) || Ray$1.pointInTriangle(intersectPoint$1, a$1, b$1, c$1)) || squaredDistance > fromToDistanceSquared) {\n        continue;\n      } // transform intersectpoint and normal to world\n\n\n      Transform$1.vectorToWorldFrame(quat, normal, worldNormal);\n      Transform$1.pointToWorldFrame(position, quat, intersectPoint$1, worldIntersectPoint);\n      this.reportIntersection(worldNormal, worldIntersectPoint, reportedShape, body, trianglesIndex);\n    }\n\n    triangles.length = 0;\n  }\n  /**\n   * @return True if the intersections should continue\n   */\n\n\n  reportIntersection(normal, hitPointWorld, shape, body, hitFaceIndex) {\n    const from = this.from;\n    const to = this.to;\n    const distance = from.distanceTo(hitPointWorld);\n    const result = this.result; // Skip back faces?\n\n    if (this.skipBackfaces && normal.dot(this.direction) > 0) {\n      return;\n    }\n\n    result.hitFaceIndex = typeof hitFaceIndex !== 'undefined' ? hitFaceIndex : -1;\n\n    switch (this.mode) {\n      case Ray$1.ALL:\n        this.hasHit = true;\n        result.set(from, to, normal, hitPointWorld, shape, body, distance);\n        result.hasHit = true;\n        this.callback(result);\n        break;\n\n      case Ray$1.CLOSEST:\n        // Store if closer than current closest\n        if (distance < result.distance || !result.hasHit) {\n          this.hasHit = true;\n          result.hasHit = true;\n          result.set(from, to, normal, hitPointWorld, shape, body, distance);\n        }\n\n        break;\n\n      case Ray$1.ANY:\n        // Report and stop.\n        this.hasHit = true;\n        result.hasHit = true;\n        result.set(from, to, normal, hitPointWorld, shape, body, distance);\n        result.shouldStop = true;\n        break;\n    }\n  }\n  /**\n   * As per \"Barycentric Technique\" as named\n   * {@link https://www.blackpawn.com/texts/pointinpoly/default.html here} but without the division\n   */\n\n\n  static pointInTriangle(p, a, b, c) {\n    c.vsub(a, v0$1);\n    b.vsub(a, v1$1);\n    p.vsub(a, v2$1);\n    const dot00 = v0$1.dot(v0$1);\n    const dot01 = v0$1.dot(v1$1);\n    const dot02 = v0$1.dot(v2$1);\n    const dot11 = v1$1.dot(v1$1);\n    const dot12 = v1$1.dot(v2$1);\n    let u;\n    let v;\n    return (u = dot11 * dot02 - dot01 * dot12) >= 0 && (v = dot00 * dot12 - dot01 * dot02) >= 0 && u + v < dot00 * dot11 - dot01 * dot01;\n  }\n\n}\nRay$1.CLOSEST = RAY_MODES$1.CLOSEST;\nRay$1.ANY = RAY_MODES$1.ANY;\nRay$1.ALL = RAY_MODES$1.ALL;\nconst tmpAABB$1$1 = new AABB$1();\nconst tmpArray$1 = [];\nconst v1$1 = new Vec3$1();\nconst v2$1 = new Vec3$1();\nconst intersectBody_xi$1 = new Vec3$1();\nconst intersectBody_qi$1 = new Quaternion$1();\nconst intersectPoint$1 = new Vec3$1();\nconst a$1 = new Vec3$1();\nconst b$1 = new Vec3$1();\nconst c$1 = new Vec3$1();\nnew Vec3$1();\nnew RaycastResult$1();\nconst intersectConvexOptions$1 = {\n  faceList: [0]\n};\nconst worldPillarOffset$1 = new Vec3$1();\nconst intersectHeightfield_localRay$1 = new Ray$1();\nconst intersectHeightfield_index$1 = [];\nconst Ray_intersectSphere_intersectionPoint$1 = new Vec3$1();\nconst Ray_intersectSphere_normal$1 = new Vec3$1();\nconst intersectConvex_normal$1 = new Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nconst intersectConvex_vector$1 = new Vec3$1();\nconst intersectTrimesh_normal$1 = new Vec3$1();\nconst intersectTrimesh_localDirection$1 = new Vec3$1();\nconst intersectTrimesh_localFrom$1 = new Vec3$1();\nconst intersectTrimesh_localTo$1 = new Vec3$1();\nconst intersectTrimesh_worldNormal$1 = new Vec3$1();\nconst intersectTrimesh_worldIntersectPoint$1 = new Vec3$1();\nnew AABB$1();\nconst intersectTrimesh_triangles$1 = [];\nconst intersectTrimesh_treeTransform$1 = new Transform$1();\nconst v0$1 = new Vec3$1();\nconst intersect$1 = new Vec3$1();\n\nfunction distanceFromIntersection$1(from, direction, position) {\n  // v0 is vector from from to position\n  position.vsub(from, v0$1);\n  const dot = v0$1.dot(direction); // intersect = direction*dot + from\n\n  direction.scale(dot, intersect$1);\n  intersect$1.vadd(from, intersect$1);\n  const distance = position.distanceTo(intersect$1);\n  return distance;\n}\n\nclass Utils {\n  /**\n   * Extend an options object with default values.\n   * @param options The options object. May be falsy: in this case, a new object is created and returned.\n   * @param defaults An object containing default values.\n   * @return The modified options object.\n   */\n  static defaults(options, defaults) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    for (let key in defaults) {\n      if (!(key in options)) {\n        options[key] = defaults[key];\n      }\n    }\n\n    return options;\n  }\n\n}\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1(); // Temp vectors\n\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\n\n/**\n * Defines a physics material.\n */\nclass Material {\n  /**\n   * Material name.\n   * If options is a string, name will be set to that string.\n   * @todo Deprecate this\n   */\n\n  /** Material id. */\n\n  /**\n   * Friction for this material.\n   * If non-negative, it will be used instead of the friction given by ContactMaterials. If there's no matching ContactMaterial, the value from `defaultContactMaterial` in the World will be used.\n   */\n\n  /**\n   * Restitution for this material.\n   * If non-negative, it will be used instead of the restitution given by ContactMaterials. If there's no matching ContactMaterial, the value from `defaultContactMaterial` in the World will be used.\n   */\n  constructor(options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    let name = ''; // Backwards compatibility fix\n\n    if (typeof options === 'string') {\n      //console.warn(`Passing a string to MaterialOptions is deprecated, and has no effect`)\n      name = options;\n      options = {};\n    }\n\n    this.name = name;\n    this.id = Material.idCounter++;\n    this.friction = typeof options.friction !== 'undefined' ? options.friction : -1;\n    this.restitution = typeof options.restitution !== 'undefined' ? options.restitution : -1;\n  }\n\n}\nMaterial.idCounter = 0;\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Ray$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\n[new Vec3$1(1, 0, 0), new Vec3$1(0, 1, 0), new Vec3$1(0, 0, 1)];\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\n\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\n\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1(); // bilateral constraint between two dynamic objects\n\n/**\n * Spherical shape\n * @example\n *     const radius = 1\n *     const sphereShape = new CANNON.Sphere(radius)\n *     const sphereBody = new CANNON.Body({ mass: 1, shape: sphereShape })\n *     world.addBody(sphereBody)\n */\nclass Sphere extends Shape$1 {\n  /**\n   * The radius of the sphere.\n   */\n\n  /**\n   *\n   * @param radius The radius of the sphere, a non-negative number.\n   */\n  constructor(radius) {\n    super({\n      type: Shape$1.types.SPHERE\n    });\n    this.radius = radius !== undefined ? radius : 1.0;\n\n    if (this.radius < 0) {\n      throw new Error('The sphere radius cannot be negative.');\n    }\n\n    this.updateBoundingSphereRadius();\n  }\n  /** calculateLocalInertia */\n\n\n  calculateLocalInertia(mass, target) {\n    if (target === void 0) {\n      target = new Vec3$1();\n    }\n\n    const I = 2.0 * mass * this.radius * this.radius / 5.0;\n    target.x = I;\n    target.y = I;\n    target.z = I;\n    return target;\n  }\n  /** volume */\n\n\n  volume() {\n    return 4.0 * Math.PI * Math.pow(this.radius, 3) / 3.0;\n  }\n\n  updateBoundingSphereRadius() {\n    this.boundingSphereRadius = this.radius;\n  }\n\n  calculateWorldAABB(pos, quat, min, max) {\n    const r = this.radius;\n    const axes = ['x', 'y', 'z'];\n\n    for (let i = 0; i < axes.length; i++) {\n      const ax = axes[i];\n      min[ax] = pos[ax] - r;\n      max[ax] = pos[ax] + r;\n    }\n  }\n\n}\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1(); // Temp vectors for calculation\n\nnew Vec3$1(); // Relative velocity\n\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\n\n/**\n * Cylinder class.\n * @example\n *     const radiusTop = 0.5\n *     const radiusBottom = 0.5\n *     const height = 2\n *     const numSegments = 12\n *     const cylinderShape = new CANNON.Cylinder(radiusTop, radiusBottom, height, numSegments)\n *     const cylinderBody = new CANNON.Body({ mass: 1, shape: cylinderShape })\n *     world.addBody(cylinderBody)\n */\n\nclass Cylinder extends ConvexPolyhedron {\n  /** The radius of the top of the Cylinder. */\n\n  /** The radius of the bottom of the Cylinder. */\n\n  /** The height of the Cylinder. */\n\n  /** The number of segments to build the cylinder out of. */\n\n  /**\n   * @param radiusTop The radius of the top of the Cylinder.\n   * @param radiusBottom The radius of the bottom of the Cylinder.\n   * @param height The height of the Cylinder.\n   * @param numSegments The number of segments to build the cylinder out of.\n   */\n  constructor(radiusTop, radiusBottom, height, numSegments) {\n    if (radiusTop === void 0) {\n      radiusTop = 1;\n    }\n\n    if (radiusBottom === void 0) {\n      radiusBottom = 1;\n    }\n\n    if (height === void 0) {\n      height = 1;\n    }\n\n    if (numSegments === void 0) {\n      numSegments = 8;\n    }\n\n    if (radiusTop < 0) {\n      throw new Error('The cylinder radiusTop cannot be negative.');\n    }\n\n    if (radiusBottom < 0) {\n      throw new Error('The cylinder radiusBottom cannot be negative.');\n    }\n\n    const N = numSegments;\n    const vertices = [];\n    const axes = [];\n    const faces = [];\n    const bottomface = [];\n    const topface = [];\n    const cos = Math.cos;\n    const sin = Math.sin; // First bottom point\n\n    vertices.push(new Vec3$1(-radiusBottom * sin(0), -height * 0.5, radiusBottom * cos(0)));\n    bottomface.push(0); // First top point\n\n    vertices.push(new Vec3$1(-radiusTop * sin(0), height * 0.5, radiusTop * cos(0)));\n    topface.push(1);\n\n    for (let i = 0; i < N; i++) {\n      const theta = 2 * Math.PI / N * (i + 1);\n      const thetaN = 2 * Math.PI / N * (i + 0.5);\n\n      if (i < N - 1) {\n        // Bottom\n        vertices.push(new Vec3$1(-radiusBottom * sin(theta), -height * 0.5, radiusBottom * cos(theta)));\n        bottomface.push(2 * i + 2); // Top\n\n        vertices.push(new Vec3$1(-radiusTop * sin(theta), height * 0.5, radiusTop * cos(theta)));\n        topface.push(2 * i + 3); // Face\n\n        faces.push([2 * i, 2 * i + 1, 2 * i + 3, 2 * i + 2]);\n      } else {\n        faces.push([2 * i, 2 * i + 1, 1, 0]); // Connect\n      } // Axis: we can cut off half of them if we have even number of segments\n\n\n      if (N % 2 === 1 || i < N / 2) {\n        axes.push(new Vec3$1(-sin(thetaN), 0, cos(thetaN)));\n      }\n    }\n\n    faces.push(bottomface);\n    axes.push(new Vec3$1(0, 1, 0)); // Reorder top face\n\n    const temp = [];\n\n    for (let i = 0; i < topface.length; i++) {\n      temp.push(topface[topface.length - i - 1]);\n    }\n\n    faces.push(temp);\n    super({\n      vertices,\n      faces,\n      axes\n    });\n    this.type = Shape$1.types.CYLINDER;\n    this.radiusTop = radiusTop;\n    this.radiusBottom = radiusBottom;\n    this.height = height;\n    this.numSegments = numSegments;\n  }\n\n}\n\n/**\n * Particle shape.\n * @example\n *     const particleShape = new CANNON.Particle()\n *     const particleBody = new CANNON.Body({ mass: 1, shape: particleShape })\n *     world.addBody(particleBody)\n */\nclass Particle extends Shape$1 {\n  constructor() {\n    super({\n      type: Shape$1.types.PARTICLE\n    });\n  }\n  /**\n   * calculateLocalInertia\n   */\n\n\n  calculateLocalInertia(mass, target) {\n    if (target === void 0) {\n      target = new Vec3$1();\n    }\n\n    target.set(0, 0, 0);\n    return target;\n  }\n\n  volume() {\n    return 0;\n  }\n\n  updateBoundingSphereRadius() {\n    this.boundingSphereRadius = 0;\n  }\n\n  calculateWorldAABB(pos, quat, min, max) {\n    // Get each axis max\n    min.copy(pos);\n    max.copy(pos);\n  }\n\n}\n\n/**\n * A plane, facing in the Z direction. The plane has its surface at z=0 and everything below z=0 is assumed to be solid plane. To make the plane face in some other direction than z, you must put it inside a Body and rotate that body. See the demos.\n * @example\n *     const planeShape = new CANNON.Plane()\n *     const planeBody = new CANNON.Body({ mass: 0, shape:  planeShape })\n *     planeBody.quaternion.setFromEuler(-Math.PI / 2, 0, 0) // make it face up\n *     world.addBody(planeBody)\n */\nclass Plane extends Shape$1 {\n  /** worldNormal */\n\n  /** worldNormalNeedsUpdate */\n  constructor() {\n    super({\n      type: Shape$1.types.PLANE\n    }); // World oriented normal\n\n    this.worldNormal = new Vec3$1();\n    this.worldNormalNeedsUpdate = true;\n    this.boundingSphereRadius = Number.MAX_VALUE;\n  }\n  /** computeWorldNormal */\n\n\n  computeWorldNormal(quat) {\n    const n = this.worldNormal;\n    n.set(0, 0, 1);\n    quat.vmult(n, n);\n    this.worldNormalNeedsUpdate = false;\n  }\n\n  calculateLocalInertia(mass, target) {\n    if (target === void 0) {\n      target = new Vec3$1();\n    }\n\n    return target;\n  }\n\n  volume() {\n    return (// The plane is infinite...\n      Number.MAX_VALUE\n    );\n  }\n\n  calculateWorldAABB(pos, quat, min, max) {\n    // The plane AABB is infinite, except if the normal is pointing along any axis\n    tempNormal.set(0, 0, 1); // Default plane normal is z\n\n    quat.vmult(tempNormal, tempNormal);\n    const maxVal = Number.MAX_VALUE;\n    min.set(-maxVal, -maxVal, -maxVal);\n    max.set(maxVal, maxVal, maxVal);\n\n    if (tempNormal.x === 1) {\n      max.x = pos.x;\n    } else if (tempNormal.x === -1) {\n      min.x = pos.x;\n    }\n\n    if (tempNormal.y === 1) {\n      max.y = pos.y;\n    } else if (tempNormal.y === -1) {\n      min.y = pos.y;\n    }\n\n    if (tempNormal.z === 1) {\n      max.z = pos.z;\n    } else if (tempNormal.z === -1) {\n      min.z = pos.z;\n    }\n  }\n\n  updateBoundingSphereRadius() {\n    this.boundingSphereRadius = Number.MAX_VALUE;\n  }\n\n}\nconst tempNormal = new Vec3$1();\n\n/**\n * Heightfield shape class. Height data is given as an array. These data points are spread out evenly with a given distance.\n * @todo Should be possible to use along all axes, not just y\n * @todo should be possible to scale along all axes\n * @todo Refactor elementSize to elementSizeX and elementSizeY\n *\n * @example\n *     // Generate some height data (y-values).\n *     const data = []\n *     for (let i = 0; i < 1000; i++) {\n *         const y = 0.5 * Math.cos(0.2 * i)\n *         data.push(y)\n *     }\n *\n *     // Create the heightfield shape\n *     const heightfieldShape = new CANNON.Heightfield(data, {\n *         elementSize: 1 // Distance between the data points in X and Y directions\n *     })\n *     const heightfieldBody = new CANNON.Body({ shape: heightfieldShape })\n *     world.addBody(heightfieldBody)\n */\nclass Heightfield extends Shape$1 {\n  /**\n   * An array of numbers, or height values, that are spread out along the x axis.\n   */\n\n  /**\n   * Max value of the data points in the data array.\n   */\n\n  /**\n   * Minimum value of the data points in the data array.\n   */\n\n  /**\n   * World spacing between the data points in X and Y direction.\n   * @todo elementSizeX and Y\n   * @default 1\n   */\n\n  /**\n   * @default true\n   */\n\n  /**\n   * @param data An array of numbers, or height values, that are spread out along the x axis.\n   */\n  constructor(data, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    options = Utils.defaults(options, {\n      maxValue: null,\n      minValue: null,\n      elementSize: 1\n    });\n    super({\n      type: Shape$1.types.HEIGHTFIELD\n    });\n    this.data = data;\n    this.maxValue = options.maxValue;\n    this.minValue = options.minValue;\n    this.elementSize = options.elementSize;\n\n    if (options.minValue === null) {\n      this.updateMinValue();\n    }\n\n    if (options.maxValue === null) {\n      this.updateMaxValue();\n    }\n\n    this.cacheEnabled = true;\n    this.pillarConvex = new ConvexPolyhedron();\n    this.pillarOffset = new Vec3$1();\n    this.updateBoundingSphereRadius(); // \"i_j_isUpper\" => { convex: ..., offset: ... }\n    // for example:\n    // _cachedPillars[\"0_2_1\"]\n\n    this._cachedPillars = {};\n  }\n  /**\n   * Call whenever you change the data array.\n   */\n\n\n  update() {\n    this._cachedPillars = {};\n  }\n  /**\n   * Update the `minValue` property\n   */\n\n\n  updateMinValue() {\n    const data = this.data;\n    let minValue = data[0][0];\n\n    for (let i = 0; i !== data.length; i++) {\n      for (let j = 0; j !== data[i].length; j++) {\n        const v = data[i][j];\n\n        if (v < minValue) {\n          minValue = v;\n        }\n      }\n    }\n\n    this.minValue = minValue;\n  }\n  /**\n   * Update the `maxValue` property\n   */\n\n\n  updateMaxValue() {\n    const data = this.data;\n    let maxValue = data[0][0];\n\n    for (let i = 0; i !== data.length; i++) {\n      for (let j = 0; j !== data[i].length; j++) {\n        const v = data[i][j];\n\n        if (v > maxValue) {\n          maxValue = v;\n        }\n      }\n    }\n\n    this.maxValue = maxValue;\n  }\n  /**\n   * Set the height value at an index. Don't forget to update maxValue and minValue after you're done.\n   */\n\n\n  setHeightValueAtIndex(xi, yi, value) {\n    const data = this.data;\n    data[xi][yi] = value; // Invalidate cache\n\n    this.clearCachedConvexTrianglePillar(xi, yi, false);\n\n    if (xi > 0) {\n      this.clearCachedConvexTrianglePillar(xi - 1, yi, true);\n      this.clearCachedConvexTrianglePillar(xi - 1, yi, false);\n    }\n\n    if (yi > 0) {\n      this.clearCachedConvexTrianglePillar(xi, yi - 1, true);\n      this.clearCachedConvexTrianglePillar(xi, yi - 1, false);\n    }\n\n    if (yi > 0 && xi > 0) {\n      this.clearCachedConvexTrianglePillar(xi - 1, yi - 1, true);\n    }\n  }\n  /**\n   * Get max/min in a rectangle in the matrix data\n   * @param result An array to store the results in.\n   * @return The result array, if it was passed in. Minimum will be at position 0 and max at 1.\n   */\n\n\n  getRectMinMax(iMinX, iMinY, iMaxX, iMaxY, result) {\n    if (result === void 0) {\n      result = [];\n    }\n\n    // Get max and min of the data\n    const data = this.data; // Set first value\n\n    let max = this.minValue;\n\n    for (let i = iMinX; i <= iMaxX; i++) {\n      for (let j = iMinY; j <= iMaxY; j++) {\n        const height = data[i][j];\n\n        if (height > max) {\n          max = height;\n        }\n      }\n    }\n\n    result[0] = this.minValue;\n    result[1] = max;\n  }\n  /**\n   * Get the index of a local position on the heightfield. The indexes indicate the rectangles, so if your terrain is made of N x N height data points, you will have rectangle indexes ranging from 0 to N-1.\n   * @param result Two-element array\n   * @param clamp If the position should be clamped to the heightfield edge.\n   */\n\n\n  getIndexOfPosition(x, y, result, clamp) {\n    // Get the index of the data points to test against\n    const w = this.elementSize;\n    const data = this.data;\n    let xi = Math.floor(x / w);\n    let yi = Math.floor(y / w);\n    result[0] = xi;\n    result[1] = yi;\n\n    if (clamp) {\n      // Clamp index to edges\n      if (xi < 0) {\n        xi = 0;\n      }\n\n      if (yi < 0) {\n        yi = 0;\n      }\n\n      if (xi >= data.length - 1) {\n        xi = data.length - 1;\n      }\n\n      if (yi >= data[0].length - 1) {\n        yi = data[0].length - 1;\n      }\n    } // Bail out if we are out of the terrain\n\n\n    if (xi < 0 || yi < 0 || xi >= data.length - 1 || yi >= data[0].length - 1) {\n      return false;\n    }\n\n    return true;\n  }\n\n  getTriangleAt(x, y, edgeClamp, a, b, c) {\n    const idx = getHeightAt_idx;\n    this.getIndexOfPosition(x, y, idx, edgeClamp);\n    let xi = idx[0];\n    let yi = idx[1];\n    const data = this.data;\n\n    if (edgeClamp) {\n      xi = Math.min(data.length - 2, Math.max(0, xi));\n      yi = Math.min(data[0].length - 2, Math.max(0, yi));\n    }\n\n    const elementSize = this.elementSize;\n    const lowerDist2 = (x / elementSize - xi) ** 2 + (y / elementSize - yi) ** 2;\n    const upperDist2 = (x / elementSize - (xi + 1)) ** 2 + (y / elementSize - (yi + 1)) ** 2;\n    const upper = lowerDist2 > upperDist2;\n    this.getTriangle(xi, yi, upper, a, b, c);\n    return upper;\n  }\n\n  getNormalAt(x, y, edgeClamp, result) {\n    const a = getNormalAt_a;\n    const b = getNormalAt_b;\n    const c = getNormalAt_c;\n    const e0 = getNormalAt_e0;\n    const e1 = getNormalAt_e1;\n    this.getTriangleAt(x, y, edgeClamp, a, b, c);\n    b.vsub(a, e0);\n    c.vsub(a, e1);\n    e0.cross(e1, result);\n    result.normalize();\n  }\n  /**\n   * Get an AABB of a square in the heightfield\n   * @param xi\n   * @param yi\n   * @param result\n   */\n\n\n  getAabbAtIndex(xi, yi, _ref) {\n    let {\n      lowerBound,\n      upperBound\n    } = _ref;\n    const data = this.data;\n    const elementSize = this.elementSize;\n    lowerBound.set(xi * elementSize, yi * elementSize, data[xi][yi]);\n    upperBound.set((xi + 1) * elementSize, (yi + 1) * elementSize, data[xi + 1][yi + 1]);\n  }\n  /**\n   * Get the height in the heightfield at a given position\n   */\n\n\n  getHeightAt(x, y, edgeClamp) {\n    const data = this.data;\n    const a = getHeightAt_a;\n    const b = getHeightAt_b;\n    const c = getHeightAt_c;\n    const idx = getHeightAt_idx;\n    this.getIndexOfPosition(x, y, idx, edgeClamp);\n    let xi = idx[0];\n    let yi = idx[1];\n\n    if (edgeClamp) {\n      xi = Math.min(data.length - 2, Math.max(0, xi));\n      yi = Math.min(data[0].length - 2, Math.max(0, yi));\n    }\n\n    const upper = this.getTriangleAt(x, y, edgeClamp, a, b, c);\n    barycentricWeights(x, y, a.x, a.y, b.x, b.y, c.x, c.y, getHeightAt_weights);\n    const w = getHeightAt_weights;\n\n    if (upper) {\n      // Top triangle verts\n      return data[xi + 1][yi + 1] * w.x + data[xi][yi + 1] * w.y + data[xi + 1][yi] * w.z;\n    } else {\n      // Top triangle verts\n      return data[xi][yi] * w.x + data[xi + 1][yi] * w.y + data[xi][yi + 1] * w.z;\n    }\n  }\n\n  getCacheConvexTrianglePillarKey(xi, yi, getUpperTriangle) {\n    return `${xi}_${yi}_${getUpperTriangle ? 1 : 0}`;\n  }\n\n  getCachedConvexTrianglePillar(xi, yi, getUpperTriangle) {\n    return this._cachedPillars[this.getCacheConvexTrianglePillarKey(xi, yi, getUpperTriangle)];\n  }\n\n  setCachedConvexTrianglePillar(xi, yi, getUpperTriangle, convex, offset) {\n    this._cachedPillars[this.getCacheConvexTrianglePillarKey(xi, yi, getUpperTriangle)] = {\n      convex,\n      offset\n    };\n  }\n\n  clearCachedConvexTrianglePillar(xi, yi, getUpperTriangle) {\n    delete this._cachedPillars[this.getCacheConvexTrianglePillarKey(xi, yi, getUpperTriangle)];\n  }\n  /**\n   * Get a triangle from the heightfield\n   */\n\n\n  getTriangle(xi, yi, upper, a, b, c) {\n    const data = this.data;\n    const elementSize = this.elementSize;\n\n    if (upper) {\n      // Top triangle verts\n      a.set((xi + 1) * elementSize, (yi + 1) * elementSize, data[xi + 1][yi + 1]);\n      b.set(xi * elementSize, (yi + 1) * elementSize, data[xi][yi + 1]);\n      c.set((xi + 1) * elementSize, yi * elementSize, data[xi + 1][yi]);\n    } else {\n      // Top triangle verts\n      a.set(xi * elementSize, yi * elementSize, data[xi][yi]);\n      b.set((xi + 1) * elementSize, yi * elementSize, data[xi + 1][yi]);\n      c.set(xi * elementSize, (yi + 1) * elementSize, data[xi][yi + 1]);\n    }\n  }\n  /**\n   * Get a triangle in the terrain in the form of a triangular convex shape.\n   */\n\n\n  getConvexTrianglePillar(xi, yi, getUpperTriangle) {\n    let result = this.pillarConvex;\n    let offsetResult = this.pillarOffset;\n\n    if (this.cacheEnabled) {\n      const data = this.getCachedConvexTrianglePillar(xi, yi, getUpperTriangle);\n\n      if (data) {\n        this.pillarConvex = data.convex;\n        this.pillarOffset = data.offset;\n        return;\n      }\n\n      result = new ConvexPolyhedron();\n      offsetResult = new Vec3$1();\n      this.pillarConvex = result;\n      this.pillarOffset = offsetResult;\n    }\n\n    const data = this.data;\n    const elementSize = this.elementSize;\n    const faces = result.faces; // Reuse verts if possible\n\n    result.vertices.length = 6;\n\n    for (let i = 0; i < 6; i++) {\n      if (!result.vertices[i]) {\n        result.vertices[i] = new Vec3$1();\n      }\n    } // Reuse faces if possible\n\n\n    faces.length = 5;\n\n    for (let i = 0; i < 5; i++) {\n      if (!faces[i]) {\n        faces[i] = [];\n      }\n    }\n\n    const verts = result.vertices;\n    const h = (Math.min(data[xi][yi], data[xi + 1][yi], data[xi][yi + 1], data[xi + 1][yi + 1]) - this.minValue) / 2 + this.minValue;\n\n    if (!getUpperTriangle) {\n      // Center of the triangle pillar - all polygons are given relative to this one\n      offsetResult.set((xi + 0.25) * elementSize, // sort of center of a triangle\n      (yi + 0.25) * elementSize, h // vertical center\n      ); // Top triangle verts\n\n      verts[0].set(-0.25 * elementSize, -0.25 * elementSize, data[xi][yi] - h);\n      verts[1].set(0.75 * elementSize, -0.25 * elementSize, data[xi + 1][yi] - h);\n      verts[2].set(-0.25 * elementSize, 0.75 * elementSize, data[xi][yi + 1] - h); // bottom triangle verts\n\n      verts[3].set(-0.25 * elementSize, -0.25 * elementSize, -Math.abs(h) - 1);\n      verts[4].set(0.75 * elementSize, -0.25 * elementSize, -Math.abs(h) - 1);\n      verts[5].set(-0.25 * elementSize, 0.75 * elementSize, -Math.abs(h) - 1); // top triangle\n\n      faces[0][0] = 0;\n      faces[0][1] = 1;\n      faces[0][2] = 2; // bottom triangle\n\n      faces[1][0] = 5;\n      faces[1][1] = 4;\n      faces[1][2] = 3; // -x facing quad\n\n      faces[2][0] = 0;\n      faces[2][1] = 2;\n      faces[2][2] = 5;\n      faces[2][3] = 3; // -y facing quad\n\n      faces[3][0] = 1;\n      faces[3][1] = 0;\n      faces[3][2] = 3;\n      faces[3][3] = 4; // +xy facing quad\n\n      faces[4][0] = 4;\n      faces[4][1] = 5;\n      faces[4][2] = 2;\n      faces[4][3] = 1;\n    } else {\n      // Center of the triangle pillar - all polygons are given relative to this one\n      offsetResult.set((xi + 0.75) * elementSize, // sort of center of a triangle\n      (yi + 0.75) * elementSize, h // vertical center\n      ); // Top triangle verts\n\n      verts[0].set(0.25 * elementSize, 0.25 * elementSize, data[xi + 1][yi + 1] - h);\n      verts[1].set(-0.75 * elementSize, 0.25 * elementSize, data[xi][yi + 1] - h);\n      verts[2].set(0.25 * elementSize, -0.75 * elementSize, data[xi + 1][yi] - h); // bottom triangle verts\n\n      verts[3].set(0.25 * elementSize, 0.25 * elementSize, -Math.abs(h) - 1);\n      verts[4].set(-0.75 * elementSize, 0.25 * elementSize, -Math.abs(h) - 1);\n      verts[5].set(0.25 * elementSize, -0.75 * elementSize, -Math.abs(h) - 1); // Top triangle\n\n      faces[0][0] = 0;\n      faces[0][1] = 1;\n      faces[0][2] = 2; // bottom triangle\n\n      faces[1][0] = 5;\n      faces[1][1] = 4;\n      faces[1][2] = 3; // +x facing quad\n\n      faces[2][0] = 2;\n      faces[2][1] = 5;\n      faces[2][2] = 3;\n      faces[2][3] = 0; // +y facing quad\n\n      faces[3][0] = 3;\n      faces[3][1] = 4;\n      faces[3][2] = 1;\n      faces[3][3] = 0; // -xy facing quad\n\n      faces[4][0] = 1;\n      faces[4][1] = 4;\n      faces[4][2] = 5;\n      faces[4][3] = 2;\n    }\n\n    result.computeNormals();\n    result.computeEdges();\n    result.updateBoundingSphereRadius();\n    this.setCachedConvexTrianglePillar(xi, yi, getUpperTriangle, result, offsetResult);\n  }\n\n  calculateLocalInertia(mass, target) {\n    if (target === void 0) {\n      target = new Vec3$1();\n    }\n\n    target.set(0, 0, 0);\n    return target;\n  }\n\n  volume() {\n    return (// The terrain is infinite\n      Number.MAX_VALUE\n    );\n  }\n\n  calculateWorldAABB(pos, quat, min, max) {\n    /** @TODO do it properly */\n    min.set(-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE);\n    max.set(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);\n  }\n\n  updateBoundingSphereRadius() {\n    // Use the bounding box of the min/max values\n    const data = this.data;\n    const s = this.elementSize;\n    this.boundingSphereRadius = new Vec3$1(data.length * s, data[0].length * s, Math.max(Math.abs(this.maxValue), Math.abs(this.minValue))).length();\n  }\n  /**\n   * Sets the height values from an image. Currently only supported in browser.\n   */\n\n\n  setHeightsFromImage(image, scale) {\n    const {\n      x,\n      z,\n      y\n    } = scale;\n    const canvas = document.createElement('canvas');\n    canvas.width = image.width;\n    canvas.height = image.height;\n    const context = canvas.getContext('2d');\n    context.drawImage(image, 0, 0);\n    const imageData = context.getImageData(0, 0, image.width, image.height);\n    const matrix = this.data;\n    matrix.length = 0;\n    this.elementSize = Math.abs(x) / imageData.width;\n\n    for (let i = 0; i < imageData.height; i++) {\n      const row = [];\n\n      for (let j = 0; j < imageData.width; j++) {\n        const a = imageData.data[(i * imageData.height + j) * 4];\n        const b = imageData.data[(i * imageData.height + j) * 4 + 1];\n        const c = imageData.data[(i * imageData.height + j) * 4 + 2];\n        const height = (a + b + c) / 4 / 255 * z;\n\n        if (x < 0) {\n          row.push(height);\n        } else {\n          row.unshift(height);\n        }\n      }\n\n      if (y < 0) {\n        matrix.unshift(row);\n      } else {\n        matrix.push(row);\n      }\n    }\n\n    this.updateMaxValue();\n    this.updateMinValue();\n    this.update();\n  }\n\n}\nconst getHeightAt_idx = [];\nconst getHeightAt_weights = new Vec3$1();\nconst getHeightAt_a = new Vec3$1();\nconst getHeightAt_b = new Vec3$1();\nconst getHeightAt_c = new Vec3$1();\nconst getNormalAt_a = new Vec3$1();\nconst getNormalAt_b = new Vec3$1();\nconst getNormalAt_c = new Vec3$1();\nconst getNormalAt_e0 = new Vec3$1();\nconst getNormalAt_e1 = new Vec3$1(); // from https://en.wikipedia.org/wiki/Barycentric_coordinate_system\n\nfunction barycentricWeights(x, y, ax, ay, bx, by, cx, cy, result) {\n  result.x = ((by - cy) * (x - cx) + (cx - bx) * (y - cy)) / ((by - cy) * (ax - cx) + (cx - bx) * (ay - cy));\n  result.y = ((cy - ay) * (x - cx) + (ax - cx) * (y - cy)) / ((by - cy) * (ax - cx) + (cx - bx) * (ay - cy));\n  result.z = 1 - result.x - result.y;\n}\n\n/**\n * OctreeNode\n */\nclass OctreeNode {\n  /** The root node */\n\n  /** Boundary of this node */\n\n  /** Contained data at the current node level */\n\n  /** Children to this node */\n  constructor(options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    this.root = options.root || null;\n    this.aabb = options.aabb ? options.aabb.clone() : new AABB$1();\n    this.data = [];\n    this.children = [];\n  }\n  /**\n   * reset\n   */\n\n\n  reset() {\n    this.children.length = this.data.length = 0;\n  }\n  /**\n   * Insert data into this node\n   * @return True if successful, otherwise false\n   */\n\n\n  insert(aabb, elementData, level) {\n    if (level === void 0) {\n      level = 0;\n    }\n\n    const nodeData = this.data; // Ignore objects that do not belong in this node\n\n    if (!this.aabb.contains(aabb)) {\n      return false; // object cannot be added\n    }\n\n    const children = this.children;\n    const maxDepth = this.maxDepth || this.root.maxDepth;\n\n    if (level < maxDepth) {\n      // Subdivide if there are no children yet\n      let subdivided = false;\n\n      if (!children.length) {\n        this.subdivide();\n        subdivided = true;\n      } // add to whichever node will accept it\n\n\n      for (let i = 0; i !== 8; i++) {\n        if (children[i].insert(aabb, elementData, level + 1)) {\n          return true;\n        }\n      }\n\n      if (subdivided) {\n        // No children accepted! Might as well just remove em since they contain none\n        children.length = 0;\n      }\n    } // Too deep, or children didnt want it. add it in current node\n\n\n    nodeData.push(elementData);\n    return true;\n  }\n  /**\n   * Create 8 equally sized children nodes and put them in the `children` array.\n   */\n\n\n  subdivide() {\n    const aabb = this.aabb;\n    const l = aabb.lowerBound;\n    const u = aabb.upperBound;\n    const children = this.children;\n    children.push(new OctreeNode({\n      aabb: new AABB$1({\n        lowerBound: new Vec3$1(0, 0, 0)\n      })\n    }), new OctreeNode({\n      aabb: new AABB$1({\n        lowerBound: new Vec3$1(1, 0, 0)\n      })\n    }), new OctreeNode({\n      aabb: new AABB$1({\n        lowerBound: new Vec3$1(1, 1, 0)\n      })\n    }), new OctreeNode({\n      aabb: new AABB$1({\n        lowerBound: new Vec3$1(1, 1, 1)\n      })\n    }), new OctreeNode({\n      aabb: new AABB$1({\n        lowerBound: new Vec3$1(0, 1, 1)\n      })\n    }), new OctreeNode({\n      aabb: new AABB$1({\n        lowerBound: new Vec3$1(0, 0, 1)\n      })\n    }), new OctreeNode({\n      aabb: new AABB$1({\n        lowerBound: new Vec3$1(1, 0, 1)\n      })\n    }), new OctreeNode({\n      aabb: new AABB$1({\n        lowerBound: new Vec3$1(0, 1, 0)\n      })\n    }));\n    u.vsub(l, halfDiagonal);\n    halfDiagonal.scale(0.5, halfDiagonal);\n    const root = this.root || this;\n\n    for (let i = 0; i !== 8; i++) {\n      const child = children[i]; // Set current node as root\n\n      child.root = root; // Compute bounds\n\n      const lowerBound = child.aabb.lowerBound;\n      lowerBound.x *= halfDiagonal.x;\n      lowerBound.y *= halfDiagonal.y;\n      lowerBound.z *= halfDiagonal.z;\n      lowerBound.vadd(l, lowerBound); // Upper bound is always lower bound + halfDiagonal\n\n      lowerBound.vadd(halfDiagonal, child.aabb.upperBound);\n    }\n  }\n  /**\n   * Get all data, potentially within an AABB\n   * @return The \"result\" object\n   */\n\n\n  aabbQuery(aabb, result) {\n    this.data; // abort if the range does not intersect this node\n    // if (!this.aabb.overlaps(aabb)){\n    //     return result;\n    // }\n    // Add objects at this level\n    // Array.prototype.push.apply(result, nodeData);\n    // Add child data\n    // @todo unwrap recursion into a queue / loop, that's faster in JS\n\n    this.children; // for (let i = 0, N = this.children.length; i !== N; i++) {\n    //     children[i].aabbQuery(aabb, result);\n    // }\n\n    const queue = [this];\n\n    while (queue.length) {\n      const node = queue.pop();\n\n      if (node.aabb.overlaps(aabb)) {\n        Array.prototype.push.apply(result, node.data);\n      }\n\n      Array.prototype.push.apply(queue, node.children);\n    }\n\n    return result;\n  }\n  /**\n   * Get all data, potentially intersected by a ray.\n   * @return The \"result\" object\n   */\n\n\n  rayQuery(ray, treeTransform, result) {\n    // Use aabb query for now.\n\n    /** @todo implement real ray query which needs less lookups */\n    ray.getAABB(tmpAABB);\n    tmpAABB.toLocalFrame(treeTransform, tmpAABB);\n    this.aabbQuery(tmpAABB, result);\n    return result;\n  }\n  /**\n   * removeEmptyNodes\n   */\n\n\n  removeEmptyNodes() {\n    for (let i = this.children.length - 1; i >= 0; i--) {\n      this.children[i].removeEmptyNodes();\n\n      if (!this.children[i].children.length && !this.children[i].data.length) {\n        this.children.splice(i, 1);\n      }\n    }\n  }\n\n}\n/**\n * Octree\n */\n\n\nclass Octree extends OctreeNode {\n  /**\n   * Maximum subdivision depth\n   * @default 8\n   */\n\n  /**\n   * @param aabb The total AABB of the tree\n   */\n  constructor(aabb, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    super({\n      root: null,\n      aabb\n    });\n    this.maxDepth = typeof options.maxDepth !== 'undefined' ? options.maxDepth : 8;\n  }\n\n}\nconst halfDiagonal = new Vec3$1();\nconst tmpAABB = new AABB$1();\n\n/**\n * Trimesh.\n * @example\n *     // How to make a mesh with a single triangle\n *     const vertices = [\n *         0, 0, 0, // vertex 0\n *         1, 0, 0, // vertex 1\n *         0, 1, 0  // vertex 2\n *     ]\n *     const indices = [\n *         0, 1, 2  // triangle 0\n *     ]\n *     const trimeshShape = new CANNON.Trimesh(vertices, indices)\n */\nclass Trimesh extends Shape$1 {\n  /**\n   * vertices\n   */\n\n  /**\n   * Array of integers, indicating which vertices each triangle consists of. The length of this array is thus 3 times the number of triangles.\n   */\n\n  /**\n   * The normals data.\n   */\n\n  /**\n   * The local AABB of the mesh.\n   */\n\n  /**\n   * References to vertex pairs, making up all unique edges in the trimesh.\n   */\n\n  /**\n   * Local scaling of the mesh. Use .setScale() to set it.\n   */\n\n  /**\n   * The indexed triangles. Use .updateTree() to update it.\n   */\n  constructor(vertices, indices) {\n    super({\n      type: Shape$1.types.TRIMESH\n    });\n    this.vertices = new Float32Array(vertices);\n    this.indices = new Int16Array(indices);\n    this.normals = new Float32Array(indices.length);\n    this.aabb = new AABB$1();\n    this.edges = null;\n    this.scale = new Vec3$1(1, 1, 1);\n    this.tree = new Octree();\n    this.updateEdges();\n    this.updateNormals();\n    this.updateAABB();\n    this.updateBoundingSphereRadius();\n    this.updateTree();\n  }\n  /**\n   * updateTree\n   */\n\n\n  updateTree() {\n    const tree = this.tree;\n    tree.reset();\n    tree.aabb.copy(this.aabb);\n    const scale = this.scale; // The local mesh AABB is scaled, but the octree AABB should be unscaled\n\n    tree.aabb.lowerBound.x *= 1 / scale.x;\n    tree.aabb.lowerBound.y *= 1 / scale.y;\n    tree.aabb.lowerBound.z *= 1 / scale.z;\n    tree.aabb.upperBound.x *= 1 / scale.x;\n    tree.aabb.upperBound.y *= 1 / scale.y;\n    tree.aabb.upperBound.z *= 1 / scale.z; // Insert all triangles\n\n    const triangleAABB = new AABB$1();\n    const a = new Vec3$1();\n    const b = new Vec3$1();\n    const c = new Vec3$1();\n    const points = [a, b, c];\n\n    for (let i = 0; i < this.indices.length / 3; i++) {\n      //this.getTriangleVertices(i, a, b, c);\n      // Get unscaled triangle verts\n      const i3 = i * 3;\n\n      this._getUnscaledVertex(this.indices[i3], a);\n\n      this._getUnscaledVertex(this.indices[i3 + 1], b);\n\n      this._getUnscaledVertex(this.indices[i3 + 2], c);\n\n      triangleAABB.setFromPoints(points);\n      tree.insert(triangleAABB, i);\n    }\n\n    tree.removeEmptyNodes();\n  }\n  /**\n   * Get triangles in a local AABB from the trimesh.\n   * @param result An array of integers, referencing the queried triangles.\n   */\n\n\n  getTrianglesInAABB(aabb, result) {\n    unscaledAABB.copy(aabb); // Scale it to local\n\n    const scale = this.scale;\n    const isx = scale.x;\n    const isy = scale.y;\n    const isz = scale.z;\n    const l = unscaledAABB.lowerBound;\n    const u = unscaledAABB.upperBound;\n    l.x /= isx;\n    l.y /= isy;\n    l.z /= isz;\n    u.x /= isx;\n    u.y /= isy;\n    u.z /= isz;\n    return this.tree.aabbQuery(unscaledAABB, result);\n  }\n  /**\n   * setScale\n   */\n\n\n  setScale(scale) {\n    const wasUniform = this.scale.x === this.scale.y && this.scale.y === this.scale.z;\n    const isUniform = scale.x === scale.y && scale.y === scale.z;\n\n    if (!(wasUniform && isUniform)) {\n      // Non-uniform scaling. Need to update normals.\n      this.updateNormals();\n    }\n\n    this.scale.copy(scale);\n    this.updateAABB();\n    this.updateBoundingSphereRadius();\n  }\n  /**\n   * Compute the normals of the faces. Will save in the `.normals` array.\n   */\n\n\n  updateNormals() {\n    const n = computeNormals_n; // Generate normals\n\n    const normals = this.normals;\n\n    for (let i = 0; i < this.indices.length / 3; i++) {\n      const i3 = i * 3;\n      const a = this.indices[i3];\n      const b = this.indices[i3 + 1];\n      const c = this.indices[i3 + 2];\n      this.getVertex(a, va);\n      this.getVertex(b, vb);\n      this.getVertex(c, vc);\n      Trimesh.computeNormal(vb, va, vc, n);\n      normals[i3] = n.x;\n      normals[i3 + 1] = n.y;\n      normals[i3 + 2] = n.z;\n    }\n  }\n  /**\n   * Update the `.edges` property\n   */\n\n\n  updateEdges() {\n    const edges = {};\n\n    const add = (a, b) => {\n      const key = a < b ? `${a}_${b}` : `${b}_${a}`;\n      edges[key] = true;\n    };\n\n    for (let i = 0; i < this.indices.length / 3; i++) {\n      const i3 = i * 3;\n      const a = this.indices[i3];\n      const b = this.indices[i3 + 1];\n      const c = this.indices[i3 + 2];\n      add(a, b);\n      add(b, c);\n      add(c, a);\n    }\n\n    const keys = Object.keys(edges);\n    this.edges = new Int16Array(keys.length * 2);\n\n    for (let i = 0; i < keys.length; i++) {\n      const indices = keys[i].split('_');\n      this.edges[2 * i] = parseInt(indices[0], 10);\n      this.edges[2 * i + 1] = parseInt(indices[1], 10);\n    }\n  }\n  /**\n   * Get an edge vertex\n   * @param firstOrSecond 0 or 1, depending on which one of the vertices you need.\n   * @param vertexStore Where to store the result\n   */\n\n\n  getEdgeVertex(edgeIndex, firstOrSecond, vertexStore) {\n    const vertexIndex = this.edges[edgeIndex * 2 + (firstOrSecond ? 1 : 0)];\n    this.getVertex(vertexIndex, vertexStore);\n  }\n  /**\n   * Get a vector along an edge.\n   */\n\n\n  getEdgeVector(edgeIndex, vectorStore) {\n    const va = getEdgeVector_va;\n    const vb = getEdgeVector_vb;\n    this.getEdgeVertex(edgeIndex, 0, va);\n    this.getEdgeVertex(edgeIndex, 1, vb);\n    vb.vsub(va, vectorStore);\n  }\n  /**\n   * Get face normal given 3 vertices\n   */\n\n\n  static computeNormal(va, vb, vc, target) {\n    vb.vsub(va, ab);\n    vc.vsub(vb, cb);\n    cb.cross(ab, target);\n\n    if (!target.isZero()) {\n      target.normalize();\n    }\n  }\n  /**\n   * Get vertex i.\n   * @return The \"out\" vector object\n   */\n\n\n  getVertex(i, out) {\n    const scale = this.scale;\n\n    this._getUnscaledVertex(i, out);\n\n    out.x *= scale.x;\n    out.y *= scale.y;\n    out.z *= scale.z;\n    return out;\n  }\n  /**\n   * Get raw vertex i\n   * @return The \"out\" vector object\n   */\n\n\n  _getUnscaledVertex(i, out) {\n    const i3 = i * 3;\n    const vertices = this.vertices;\n    return out.set(vertices[i3], vertices[i3 + 1], vertices[i3 + 2]);\n  }\n  /**\n   * Get a vertex from the trimesh,transformed by the given position and quaternion.\n   * @return The \"out\" vector object\n   */\n\n\n  getWorldVertex(i, pos, quat, out) {\n    this.getVertex(i, out);\n    Transform$1.pointToWorldFrame(pos, quat, out, out);\n    return out;\n  }\n  /**\n   * Get the three vertices for triangle i.\n   */\n\n\n  getTriangleVertices(i, a, b, c) {\n    const i3 = i * 3;\n    this.getVertex(this.indices[i3], a);\n    this.getVertex(this.indices[i3 + 1], b);\n    this.getVertex(this.indices[i3 + 2], c);\n  }\n  /**\n   * Compute the normal of triangle i.\n   * @return The \"target\" vector object\n   */\n\n\n  getNormal(i, target) {\n    const i3 = i * 3;\n    return target.set(this.normals[i3], this.normals[i3 + 1], this.normals[i3 + 2]);\n  }\n  /**\n   * @return The \"target\" vector object\n   */\n\n\n  calculateLocalInertia(mass, target) {\n    // Approximate with box inertia\n    // Exact inertia calculation is overkill, but see http://geometrictools.com/Documentation/PolyhedralMassProperties.pdf for the correct way to do it\n    this.computeLocalAABB(cli_aabb);\n    const x = cli_aabb.upperBound.x - cli_aabb.lowerBound.x;\n    const y = cli_aabb.upperBound.y - cli_aabb.lowerBound.y;\n    const z = cli_aabb.upperBound.z - cli_aabb.lowerBound.z;\n    return target.set(1.0 / 12.0 * mass * (2 * y * 2 * y + 2 * z * 2 * z), 1.0 / 12.0 * mass * (2 * x * 2 * x + 2 * z * 2 * z), 1.0 / 12.0 * mass * (2 * y * 2 * y + 2 * x * 2 * x));\n  }\n  /**\n   * Compute the local AABB for the trimesh\n   */\n\n\n  computeLocalAABB(aabb) {\n    const l = aabb.lowerBound;\n    const u = aabb.upperBound;\n    const n = this.vertices.length;\n    this.vertices;\n    const v = computeLocalAABB_worldVert;\n    this.getVertex(0, v);\n    l.copy(v);\n    u.copy(v);\n\n    for (let i = 0; i !== n; i++) {\n      this.getVertex(i, v);\n\n      if (v.x < l.x) {\n        l.x = v.x;\n      } else if (v.x > u.x) {\n        u.x = v.x;\n      }\n\n      if (v.y < l.y) {\n        l.y = v.y;\n      } else if (v.y > u.y) {\n        u.y = v.y;\n      }\n\n      if (v.z < l.z) {\n        l.z = v.z;\n      } else if (v.z > u.z) {\n        u.z = v.z;\n      }\n    }\n  }\n  /**\n   * Update the `.aabb` property\n   */\n\n\n  updateAABB() {\n    this.computeLocalAABB(this.aabb);\n  }\n  /**\n   * Will update the `.boundingSphereRadius` property\n   */\n\n\n  updateBoundingSphereRadius() {\n    // Assume points are distributed with local (0,0,0) as center\n    let max2 = 0;\n    const vertices = this.vertices;\n    const v = new Vec3$1();\n\n    for (let i = 0, N = vertices.length / 3; i !== N; i++) {\n      this.getVertex(i, v);\n      const norm2 = v.lengthSquared();\n\n      if (norm2 > max2) {\n        max2 = norm2;\n      }\n    }\n\n    this.boundingSphereRadius = Math.sqrt(max2);\n  }\n  /**\n   * calculateWorldAABB\n   */\n\n\n  calculateWorldAABB(pos, quat, min, max) {\n    /*\n        const n = this.vertices.length / 3,\n            verts = this.vertices;\n        const minx,miny,minz,maxx,maxy,maxz;\n         const v = tempWorldVertex;\n        for(let i=0; i<n; i++){\n            this.getVertex(i, v);\n            quat.vmult(v, v);\n            pos.vadd(v, v);\n            if (v.x < minx || minx===undefined){\n                minx = v.x;\n            } else if(v.x > maxx || maxx===undefined){\n                maxx = v.x;\n            }\n             if (v.y < miny || miny===undefined){\n                miny = v.y;\n            } else if(v.y > maxy || maxy===undefined){\n                maxy = v.y;\n            }\n             if (v.z < minz || minz===undefined){\n                minz = v.z;\n            } else if(v.z > maxz || maxz===undefined){\n                maxz = v.z;\n            }\n        }\n        min.set(minx,miny,minz);\n        max.set(maxx,maxy,maxz);\n        */\n    // Faster approximation using local AABB\n    const frame = calculateWorldAABB_frame;\n    const result = calculateWorldAABB_aabb;\n    frame.position = pos;\n    frame.quaternion = quat;\n    this.aabb.toWorldFrame(frame, result);\n    min.copy(result.lowerBound);\n    max.copy(result.upperBound);\n  }\n  /**\n   * Get approximate volume\n   */\n\n\n  volume() {\n    return 4.0 * Math.PI * this.boundingSphereRadius / 3.0;\n  }\n  /**\n   * Create a Trimesh instance, shaped as a torus.\n   */\n\n\n  static createTorus(radius, tube, radialSegments, tubularSegments, arc) {\n    if (radius === void 0) {\n      radius = 1;\n    }\n\n    if (tube === void 0) {\n      tube = 0.5;\n    }\n\n    if (radialSegments === void 0) {\n      radialSegments = 8;\n    }\n\n    if (tubularSegments === void 0) {\n      tubularSegments = 6;\n    }\n\n    if (arc === void 0) {\n      arc = Math.PI * 2;\n    }\n\n    const vertices = [];\n    const indices = [];\n\n    for (let j = 0; j <= radialSegments; j++) {\n      for (let i = 0; i <= tubularSegments; i++) {\n        const u = i / tubularSegments * arc;\n        const v = j / radialSegments * Math.PI * 2;\n        const x = (radius + tube * Math.cos(v)) * Math.cos(u);\n        const y = (radius + tube * Math.cos(v)) * Math.sin(u);\n        const z = tube * Math.sin(v);\n        vertices.push(x, y, z);\n      }\n    }\n\n    for (let j = 1; j <= radialSegments; j++) {\n      for (let i = 1; i <= tubularSegments; i++) {\n        const a = (tubularSegments + 1) * j + i - 1;\n        const b = (tubularSegments + 1) * (j - 1) + i - 1;\n        const c = (tubularSegments + 1) * (j - 1) + i;\n        const d = (tubularSegments + 1) * j + i;\n        indices.push(a, b, d);\n        indices.push(b, c, d);\n      }\n    }\n\n    return new Trimesh(vertices, indices);\n  }\n\n}\nconst computeNormals_n = new Vec3$1();\nconst unscaledAABB = new AABB$1();\nconst getEdgeVector_va = new Vec3$1();\nconst getEdgeVector_vb = new Vec3$1();\nconst cb = new Vec3$1();\nconst ab = new Vec3$1();\nconst va = new Vec3$1();\nconst vb = new Vec3$1();\nconst vc = new Vec3$1();\nconst cli_aabb = new AABB$1();\nconst computeLocalAABB_worldVert = new Vec3$1();\nconst calculateWorldAABB_frame = new Transform$1();\nconst calculateWorldAABB_aabb = new AABB$1();\n\n// Naming rule: based of the order in SHAPE_TYPES,\n// the first part of the method is formed by the\n// shape type that comes before, in the second part\n// there is the shape type that comes after in the SHAPE_TYPES list\n({\n  sphereSphere: Shape$1.types.SPHERE,\n  spherePlane: Shape$1.types.SPHERE | Shape$1.types.PLANE,\n  boxBox: Shape$1.types.BOX | Shape$1.types.BOX,\n  sphereBox: Shape$1.types.SPHERE | Shape$1.types.BOX,\n  planeBox: Shape$1.types.PLANE | Shape$1.types.BOX,\n  convexConvex: Shape$1.types.CONVEXPOLYHEDRON,\n  sphereConvex: Shape$1.types.SPHERE | Shape$1.types.CONVEXPOLYHEDRON,\n  planeConvex: Shape$1.types.PLANE | Shape$1.types.CONVEXPOLYHEDRON,\n  boxConvex: Shape$1.types.BOX | Shape$1.types.CONVEXPOLYHEDRON,\n  sphereHeightfield: Shape$1.types.SPHERE | Shape$1.types.HEIGHTFIELD,\n  boxHeightfield: Shape$1.types.BOX | Shape$1.types.HEIGHTFIELD,\n  convexHeightfield: Shape$1.types.CONVEXPOLYHEDRON | Shape$1.types.HEIGHTFIELD,\n  sphereParticle: Shape$1.types.PARTICLE | Shape$1.types.SPHERE,\n  planeParticle: Shape$1.types.PLANE | Shape$1.types.PARTICLE,\n  boxParticle: Shape$1.types.BOX | Shape$1.types.PARTICLE,\n  convexParticle: Shape$1.types.PARTICLE | Shape$1.types.CONVEXPOLYHEDRON,\n  cylinderCylinder: Shape$1.types.CYLINDER,\n  sphereCylinder: Shape$1.types.SPHERE | Shape$1.types.CYLINDER,\n  planeCylinder: Shape$1.types.PLANE | Shape$1.types.CYLINDER,\n  boxCylinder: Shape$1.types.BOX | Shape$1.types.CYLINDER,\n  convexCylinder: Shape$1.types.CONVEXPOLYHEDRON | Shape$1.types.CYLINDER,\n  heightfieldCylinder: Shape$1.types.HEIGHTFIELD | Shape$1.types.CYLINDER,\n  particleCylinder: Shape$1.types.PARTICLE | Shape$1.types.CYLINDER,\n  sphereTrimesh: Shape$1.types.SPHERE | Shape$1.types.TRIMESH,\n  planeTrimesh: Shape$1.types.PLANE | Shape$1.types.TRIMESH\n});\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Quaternion$1();\nnew Quaternion$1();\n\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew AABB$1();\nnew Vec3$1();\nnew Vec3$1(); // See http://bulletphysics.com/Bullet/BulletFull/SphereTriangleDetector_8cpp_source.html\n\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\n\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\n[new Vec3$1(), new Vec3$1(), new Vec3$1(), new Vec3$1(), new Vec3$1(), new Vec3$1()];\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1(); // WIP\n\nnew Quaternion$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\nnew Vec3$1();\n\nnew AABB$1();\nnew Ray$1(); // performance.now() fallback on Date.now()\n\nconst performance$1 = globalThis.performance || {};\n\nif (!performance$1.now) {\n  let nowOffset = Date.now();\n\n  if (performance$1.timing && performance$1.timing.navigationStart) {\n    nowOffset = performance$1.timing.navigationStart;\n  }\n\n  performance$1.now = () => Date.now() - nowOffset;\n}\n\nnew Vec3$1(); // Dispatched after the world has stepped forward in time.\n\n/**\n * @typedef { import('cannon-es').MaterialOptions } MaterialOptions\n */\n\nconst makeVec3 = _ref => {\n  let [x, y, z] = _ref;\n  return new Vec3$1(x, y, z);\n};\n\nconst prepareSphere = args => Array.isArray(args) ? args : [args];\n\nconst prepareConvexPolyhedron = _ref2 => {\n  let [v, faces, n, a, boundingSphereRadius] = _ref2;\n  return [{\n    axes: a ? a.map(makeVec3) : undefined,\n    boundingSphereRadius,\n    faces,\n    normals: n ? n.map(makeVec3) : undefined,\n    vertices: v ? v.map(makeVec3) : undefined\n  }];\n};\n\nfunction createShape(type, args) {\n  switch (type) {\n    case 'Box':\n      return new Box(new Vec3$1(...args.map(v => v / 2)));\n    // extents => halfExtents\n\n    case 'ConvexPolyhedron':\n      return new ConvexPolyhedron(...prepareConvexPolyhedron(args));\n\n    case 'Cylinder':\n      return new Cylinder(...args);\n    // [ radiusTop, radiusBottom, height, numSegments ] = args\n\n    case 'Heightfield':\n      return new Heightfield(...args);\n    // [ Array data, options: {minValue, maxValue, elementSize}  ] = args\n\n    case 'Particle':\n      return new Particle();\n    // no args\n\n    case 'Plane':\n      return new Plane();\n    // no args, infinite x and y\n\n    case 'Sphere':\n      return new Sphere(...prepareSphere(args));\n    // radius = args\n\n    case 'Trimesh':\n      return new Trimesh(...args);\n    // [vertices, indices] = args\n  }\n}\n/**\n * @function\n * @param {Object} options\n * @param {string} options.uuid\n * @param {BodyProps} options.props\n * @param {BodyShapeType} options.type\n * @param {(materialOptions: MaterialOptions) => Material =} options.createMaterial\n * @returns {Body}\n */\n\n\nconst propsToBody = options => {\n  const {\n    uuid,\n    props,\n    type,\n    createMaterial = materialOptions => new Material(materialOptions)\n  } = options;\n  const {\n    angularFactor = [1, 1, 1],\n    angularVelocity = [0, 0, 0],\n    args = [],\n    collisionResponse,\n    linearFactor = [1, 1, 1],\n    mass,\n    material,\n    onCollide,\n    position = [0, 0, 0],\n    rotation = [0, 0, 0],\n    shapes,\n    type: bodyType,\n    velocity = [0, 0, 0],\n    ...extra\n  } = props;\n  const body = new Body({ ...extra,\n    mass: bodyType === 'Static' ? 0 : mass,\n    material: material ? createMaterial(material) : undefined,\n    type: bodyType ? Body[bodyType.toUpperCase()] : undefined\n  });\n  body.uuid = uuid;\n\n  if (collisionResponse !== undefined) {\n    body.collisionResponse = collisionResponse;\n  }\n\n  if (type === 'Compound') {\n    shapes.forEach(_ref3 => {\n      let {\n        type,\n        args,\n        position,\n        rotation,\n        material,\n        ...extra\n      } = _ref3;\n      const shapeBody = body.addShape(createShape(type, args), position ? new Vec3$1(...position) : undefined, rotation ? new Quaternion$1().setFromEuler(...rotation) : undefined);\n      if (material) shapeBody.material = createMaterial(material);\n      Object.assign(shapeBody, extra);\n    });\n  } else {\n    body.addShape(createShape(type, args));\n  }\n\n  body.position.set(position[0], position[1], position[2]);\n  body.quaternion.setFromEuler(rotation[0], rotation[1], rotation[2]);\n  body.velocity.set(velocity[0], velocity[1], velocity[2]);\n  body.angularVelocity.set(angularVelocity[0], angularVelocity[1], angularVelocity[2]);\n  body.linearFactor.set(linearFactor[0], linearFactor[1], linearFactor[2]);\n  body.angularFactor.set(angularFactor[0], angularFactor[1], angularFactor[2]);\n  return body;\n};\n\n/**\n * Records what objects are colliding with each other\n */\n\n/**\n * A 3x3 matrix.\n * Authored by {@link http://github.com/schteppe/ schteppe}\n */\nclass Mat3 {\n  /**\n   * A vector of length 9, containing all matrix elements.\n   */\n\n  /**\n   * @param elements A vector of length 9, containing all matrix elements.\n   */\n  constructor(elements) {\n    if (elements === void 0) {\n      elements = [0, 0, 0, 0, 0, 0, 0, 0, 0];\n    }\n\n    this.elements = elements;\n  }\n  /**\n   * Sets the matrix to identity\n   * @todo Should perhaps be renamed to `setIdentity()` to be more clear.\n   * @todo Create another function that immediately creates an identity matrix eg. `eye()`\n   */\n\n\n  identity() {\n    const e = this.elements;\n    e[0] = 1;\n    e[1] = 0;\n    e[2] = 0;\n    e[3] = 0;\n    e[4] = 1;\n    e[5] = 0;\n    e[6] = 0;\n    e[7] = 0;\n    e[8] = 1;\n  }\n  /**\n   * Set all elements to zero\n   */\n\n\n  setZero() {\n    const e = this.elements;\n    e[0] = 0;\n    e[1] = 0;\n    e[2] = 0;\n    e[3] = 0;\n    e[4] = 0;\n    e[5] = 0;\n    e[6] = 0;\n    e[7] = 0;\n    e[8] = 0;\n  }\n  /**\n   * Sets the matrix diagonal elements from a Vec3\n   */\n\n\n  setTrace(vector) {\n    const e = this.elements;\n    e[0] = vector.x;\n    e[4] = vector.y;\n    e[8] = vector.z;\n  }\n  /**\n   * Gets the matrix diagonal elements\n   */\n\n\n  getTrace(target) {\n    if (target === void 0) {\n      target = new Vec3();\n    }\n\n    const e = this.elements;\n    target.x = e[0];\n    target.y = e[4];\n    target.z = e[8];\n    return target;\n  }\n  /**\n   * Matrix-Vector multiplication\n   * @param v The vector to multiply with\n   * @param target Optional, target to save the result in.\n   */\n\n\n  vmult(v, target) {\n    if (target === void 0) {\n      target = new Vec3();\n    }\n\n    const e = this.elements;\n    const x = v.x;\n    const y = v.y;\n    const z = v.z;\n    target.x = e[0] * x + e[1] * y + e[2] * z;\n    target.y = e[3] * x + e[4] * y + e[5] * z;\n    target.z = e[6] * x + e[7] * y + e[8] * z;\n    return target;\n  }\n  /**\n   * Matrix-scalar multiplication\n   */\n\n\n  smult(s) {\n    for (let i = 0; i < this.elements.length; i++) {\n      this.elements[i] *= s;\n    }\n  }\n  /**\n   * Matrix multiplication\n   * @param matrix Matrix to multiply with from left side.\n   */\n\n\n  mmult(matrix, target) {\n    if (target === void 0) {\n      target = new Mat3();\n    }\n\n    const A = this.elements;\n    const B = matrix.elements;\n    const T = target.elements;\n    const a11 = A[0],\n          a12 = A[1],\n          a13 = A[2],\n          a21 = A[3],\n          a22 = A[4],\n          a23 = A[5],\n          a31 = A[6],\n          a32 = A[7],\n          a33 = A[8];\n    const b11 = B[0],\n          b12 = B[1],\n          b13 = B[2],\n          b21 = B[3],\n          b22 = B[4],\n          b23 = B[5],\n          b31 = B[6],\n          b32 = B[7],\n          b33 = B[8];\n    T[0] = a11 * b11 + a12 * b21 + a13 * b31;\n    T[1] = a11 * b12 + a12 * b22 + a13 * b32;\n    T[2] = a11 * b13 + a12 * b23 + a13 * b33;\n    T[3] = a21 * b11 + a22 * b21 + a23 * b31;\n    T[4] = a21 * b12 + a22 * b22 + a23 * b32;\n    T[5] = a21 * b13 + a22 * b23 + a23 * b33;\n    T[6] = a31 * b11 + a32 * b21 + a33 * b31;\n    T[7] = a31 * b12 + a32 * b22 + a33 * b32;\n    T[8] = a31 * b13 + a32 * b23 + a33 * b33;\n    return target;\n  }\n  /**\n   * Scale each column of the matrix\n   */\n\n\n  scale(vector, target) {\n    if (target === void 0) {\n      target = new Mat3();\n    }\n\n    const e = this.elements;\n    const t = target.elements;\n\n    for (let i = 0; i !== 3; i++) {\n      t[3 * i + 0] = vector.x * e[3 * i + 0];\n      t[3 * i + 1] = vector.y * e[3 * i + 1];\n      t[3 * i + 2] = vector.z * e[3 * i + 2];\n    }\n\n    return target;\n  }\n  /**\n   * Solve Ax=b\n   * @param b The right hand side\n   * @param target Optional. Target vector to save in.\n   * @return The solution x\n   * @todo should reuse arrays\n   */\n\n\n  solve(b, target) {\n    if (target === void 0) {\n      target = new Vec3();\n    }\n\n    // Construct equations\n    const nr = 3; // num rows\n\n    const nc = 4; // num cols\n\n    const eqns = [];\n    let i;\n    let j;\n\n    for (i = 0; i < nr * nc; i++) {\n      eqns.push(0);\n    }\n\n    for (i = 0; i < 3; i++) {\n      for (j = 0; j < 3; j++) {\n        eqns[i + nc * j] = this.elements[i + 3 * j];\n      }\n    }\n\n    eqns[3 + 4 * 0] = b.x;\n    eqns[3 + 4 * 1] = b.y;\n    eqns[3 + 4 * 2] = b.z; // Compute right upper triangular version of the matrix - Gauss elimination\n\n    let n = 3;\n    const k = n;\n    let np;\n    const kp = 4; // num rows\n\n    let p;\n\n    do {\n      i = k - n;\n\n      if (eqns[i + nc * i] === 0) {\n        // the pivot is null, swap lines\n        for (j = i + 1; j < k; j++) {\n          if (eqns[i + nc * j] !== 0) {\n            np = kp;\n\n            do {\n              // do ligne( i ) = ligne( i ) + ligne( k )\n              p = kp - np;\n              eqns[p + nc * i] += eqns[p + nc * j];\n            } while (--np);\n\n            break;\n          }\n        }\n      }\n\n      if (eqns[i + nc * i] !== 0) {\n        for (j = i + 1; j < k; j++) {\n          const multiplier = eqns[i + nc * j] / eqns[i + nc * i];\n          np = kp;\n\n          do {\n            // do ligne( k ) = ligne( k ) - multiplier * ligne( i )\n            p = kp - np;\n            eqns[p + nc * j] = p <= i ? 0 : eqns[p + nc * j] - eqns[p + nc * i] * multiplier;\n          } while (--np);\n        }\n      }\n    } while (--n); // Get the solution\n\n\n    target.z = eqns[2 * nc + 3] / eqns[2 * nc + 2];\n    target.y = (eqns[1 * nc + 3] - eqns[1 * nc + 2] * target.z) / eqns[1 * nc + 1];\n    target.x = (eqns[0 * nc + 3] - eqns[0 * nc + 2] * target.z - eqns[0 * nc + 1] * target.y) / eqns[0 * nc + 0];\n\n    if (isNaN(target.x) || isNaN(target.y) || isNaN(target.z) || target.x === Infinity || target.y === Infinity || target.z === Infinity) {\n      throw `Could not solve equation! Got x=[${target.toString()}], b=[${b.toString()}], A=[${this.toString()}]`;\n    }\n\n    return target;\n  }\n  /**\n   * Get an element in the matrix by index. Index starts at 0, not 1!!!\n   * @param value If provided, the matrix element will be set to this value.\n   */\n\n\n  e(row, column, value) {\n    if (value === undefined) {\n      return this.elements[column + 3 * row];\n    } else {\n      // Set value\n      this.elements[column + 3 * row] = value;\n    }\n  }\n  /**\n   * Copy another matrix into this matrix object.\n   */\n\n\n  copy(matrix) {\n    for (let i = 0; i < matrix.elements.length; i++) {\n      this.elements[i] = matrix.elements[i];\n    }\n\n    return this;\n  }\n  /**\n   * Returns a string representation of the matrix.\n   */\n\n\n  toString() {\n    let r = '';\n    const sep = ',';\n\n    for (let i = 0; i < 9; i++) {\n      r += this.elements[i] + sep;\n    }\n\n    return r;\n  }\n  /**\n   * reverse the matrix\n   * @param target Target matrix to save in.\n   * @return The solution x\n   */\n\n\n  reverse(target) {\n    if (target === void 0) {\n      target = new Mat3();\n    }\n\n    // Construct equations\n    const nr = 3; // num rows\n\n    const nc = 6; // num cols\n\n    const eqns = reverse_eqns;\n    let i;\n    let j;\n\n    for (i = 0; i < 3; i++) {\n      for (j = 0; j < 3; j++) {\n        eqns[i + nc * j] = this.elements[i + 3 * j];\n      }\n    }\n\n    eqns[3 + 6 * 0] = 1;\n    eqns[3 + 6 * 1] = 0;\n    eqns[3 + 6 * 2] = 0;\n    eqns[4 + 6 * 0] = 0;\n    eqns[4 + 6 * 1] = 1;\n    eqns[4 + 6 * 2] = 0;\n    eqns[5 + 6 * 0] = 0;\n    eqns[5 + 6 * 1] = 0;\n    eqns[5 + 6 * 2] = 1; // Compute right upper triangular version of the matrix - Gauss elimination\n\n    let n = 3;\n    const k = n;\n    let np;\n    const kp = nc; // num rows\n\n    let p;\n\n    do {\n      i = k - n;\n\n      if (eqns[i + nc * i] === 0) {\n        // the pivot is null, swap lines\n        for (j = i + 1; j < k; j++) {\n          if (eqns[i + nc * j] !== 0) {\n            np = kp;\n\n            do {\n              // do line( i ) = line( i ) + line( k )\n              p = kp - np;\n              eqns[p + nc * i] += eqns[p + nc * j];\n            } while (--np);\n\n            break;\n          }\n        }\n      }\n\n      if (eqns[i + nc * i] !== 0) {\n        for (j = i + 1; j < k; j++) {\n          const multiplier = eqns[i + nc * j] / eqns[i + nc * i];\n          np = kp;\n\n          do {\n            // do line( k ) = line( k ) - multiplier * line( i )\n            p = kp - np;\n            eqns[p + nc * j] = p <= i ? 0 : eqns[p + nc * j] - eqns[p + nc * i] * multiplier;\n          } while (--np);\n        }\n      }\n    } while (--n); // eliminate the upper left triangle of the matrix\n\n\n    i = 2;\n\n    do {\n      j = i - 1;\n\n      do {\n        const multiplier = eqns[i + nc * j] / eqns[i + nc * i];\n        np = nc;\n\n        do {\n          p = nc - np;\n          eqns[p + nc * j] = eqns[p + nc * j] - eqns[p + nc * i] * multiplier;\n        } while (--np);\n      } while (j--);\n    } while (--i); // operations on the diagonal\n\n\n    i = 2;\n\n    do {\n      const multiplier = 1 / eqns[i + nc * i];\n      np = nc;\n\n      do {\n        p = nc - np;\n        eqns[p + nc * i] = eqns[p + nc * i] * multiplier;\n      } while (--np);\n    } while (i--);\n\n    i = 2;\n\n    do {\n      j = 2;\n\n      do {\n        p = eqns[nr + j + nc * i];\n\n        if (isNaN(p) || p === Infinity) {\n          throw `Could not reverse! A=[${this.toString()}]`;\n        }\n\n        target.e(i, j, p);\n      } while (j--);\n    } while (i--);\n\n    return target;\n  }\n  /**\n   * Set the matrix from a quaterion\n   */\n\n\n  setRotationFromQuaternion(q) {\n    const x = q.x;\n    const y = q.y;\n    const z = q.z;\n    const w = q.w;\n    const x2 = x + x;\n    const y2 = y + y;\n    const z2 = z + z;\n    const xx = x * x2;\n    const xy = x * y2;\n    const xz = x * z2;\n    const yy = y * y2;\n    const yz = y * z2;\n    const zz = z * z2;\n    const wx = w * x2;\n    const wy = w * y2;\n    const wz = w * z2;\n    const e = this.elements;\n    e[3 * 0 + 0] = 1 - (yy + zz);\n    e[3 * 0 + 1] = xy - wz;\n    e[3 * 0 + 2] = xz + wy;\n    e[3 * 1 + 0] = xy + wz;\n    e[3 * 1 + 1] = 1 - (xx + zz);\n    e[3 * 1 + 2] = yz - wx;\n    e[3 * 2 + 0] = xz - wy;\n    e[3 * 2 + 1] = yz + wx;\n    e[3 * 2 + 2] = 1 - (xx + yy);\n    return this;\n  }\n  /**\n   * Transpose the matrix\n   * @param target Optional. Where to store the result.\n   * @return The target Mat3, or a new Mat3 if target was omitted.\n   */\n\n\n  transpose(target) {\n    if (target === void 0) {\n      target = new Mat3();\n    }\n\n    const M = this.elements;\n    const T = target.elements;\n    let tmp; //Set diagonals\n\n    T[0] = M[0];\n    T[4] = M[4];\n    T[8] = M[8];\n    tmp = M[1];\n    T[1] = M[3];\n    T[3] = tmp;\n    tmp = M[2];\n    T[2] = M[6];\n    T[6] = tmp;\n    tmp = M[5];\n    T[5] = M[7];\n    T[7] = tmp;\n    return target;\n  }\n\n}\nconst reverse_eqns = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n\n/**\n * 3-dimensional vector\n * @example\n *     const v = new Vec3(1, 2, 3)\n *     console.log('x=' + v.x) // x=1\n */\n\nclass Vec3 {\n  constructor(x, y, z) {\n    if (x === void 0) {\n      x = 0.0;\n    }\n\n    if (y === void 0) {\n      y = 0.0;\n    }\n\n    if (z === void 0) {\n      z = 0.0;\n    }\n\n    this.x = x;\n    this.y = y;\n    this.z = z;\n  }\n  /**\n   * Vector cross product\n   * @param target Optional target to save in.\n   */\n\n\n  cross(vector, target) {\n    if (target === void 0) {\n      target = new Vec3();\n    }\n\n    const vx = vector.x;\n    const vy = vector.y;\n    const vz = vector.z;\n    const x = this.x;\n    const y = this.y;\n    const z = this.z;\n    target.x = y * vz - z * vy;\n    target.y = z * vx - x * vz;\n    target.z = x * vy - y * vx;\n    return target;\n  }\n  /**\n   * Set the vectors' 3 elements\n   */\n\n\n  set(x, y, z) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    return this;\n  }\n  /**\n   * Set all components of the vector to zero.\n   */\n\n\n  setZero() {\n    this.x = this.y = this.z = 0;\n  }\n  /**\n   * Vector addition\n   */\n\n\n  vadd(vector, target) {\n    if (target) {\n      target.x = vector.x + this.x;\n      target.y = vector.y + this.y;\n      target.z = vector.z + this.z;\n    } else {\n      return new Vec3(this.x + vector.x, this.y + vector.y, this.z + vector.z);\n    }\n  }\n  /**\n   * Vector subtraction\n   * @param target Optional target to save in.\n   */\n\n\n  vsub(vector, target) {\n    if (target) {\n      target.x = this.x - vector.x;\n      target.y = this.y - vector.y;\n      target.z = this.z - vector.z;\n    } else {\n      return new Vec3(this.x - vector.x, this.y - vector.y, this.z - vector.z);\n    }\n  }\n  /**\n   * Get the cross product matrix a_cross from a vector, such that a x b = a_cross * b = c\n   *\n   * See {@link https://www8.cs.umu.se/kurser/TDBD24/VT06/lectures/Lecture6.pdf Umeå University Lecture}\n   */\n\n\n  crossmat() {\n    return new Mat3([0, -this.z, this.y, this.z, 0, -this.x, -this.y, this.x, 0]);\n  }\n  /**\n   * Normalize the vector. Note that this changes the values in the vector.\n    * @return Returns the norm of the vector\n   */\n\n\n  normalize() {\n    const x = this.x;\n    const y = this.y;\n    const z = this.z;\n    const n = Math.sqrt(x * x + y * y + z * z);\n\n    if (n > 0.0) {\n      const invN = 1 / n;\n      this.x *= invN;\n      this.y *= invN;\n      this.z *= invN;\n    } else {\n      // Make something up\n      this.x = 0;\n      this.y = 0;\n      this.z = 0;\n    }\n\n    return n;\n  }\n  /**\n   * Get the version of this vector that is of length 1.\n   * @param target Optional target to save in\n   * @return Returns the unit vector\n   */\n\n\n  unit(target) {\n    if (target === void 0) {\n      target = new Vec3();\n    }\n\n    const x = this.x;\n    const y = this.y;\n    const z = this.z;\n    let ninv = Math.sqrt(x * x + y * y + z * z);\n\n    if (ninv > 0.0) {\n      ninv = 1.0 / ninv;\n      target.x = x * ninv;\n      target.y = y * ninv;\n      target.z = z * ninv;\n    } else {\n      target.x = 1;\n      target.y = 0;\n      target.z = 0;\n    }\n\n    return target;\n  }\n  /**\n   * Get the length of the vector\n   */\n\n\n  length() {\n    const x = this.x;\n    const y = this.y;\n    const z = this.z;\n    return Math.sqrt(x * x + y * y + z * z);\n  }\n  /**\n   * Get the squared length of the vector.\n   */\n\n\n  lengthSquared() {\n    return this.dot(this);\n  }\n  /**\n   * Get distance from this point to another point\n   */\n\n\n  distanceTo(p) {\n    const x = this.x;\n    const y = this.y;\n    const z = this.z;\n    const px = p.x;\n    const py = p.y;\n    const pz = p.z;\n    return Math.sqrt((px - x) * (px - x) + (py - y) * (py - y) + (pz - z) * (pz - z));\n  }\n  /**\n   * Get squared distance from this point to another point\n   */\n\n\n  distanceSquared(p) {\n    const x = this.x;\n    const y = this.y;\n    const z = this.z;\n    const px = p.x;\n    const py = p.y;\n    const pz = p.z;\n    return (px - x) * (px - x) + (py - y) * (py - y) + (pz - z) * (pz - z);\n  }\n  /**\n   * Multiply all the components of the vector with a scalar.\n   * @param target The vector to save the result in.\n   */\n\n\n  scale(scalar, target) {\n    if (target === void 0) {\n      target = new Vec3();\n    }\n\n    const x = this.x;\n    const y = this.y;\n    const z = this.z;\n    target.x = scalar * x;\n    target.y = scalar * y;\n    target.z = scalar * z;\n    return target;\n  }\n  /**\n   * Multiply the vector with an other vector, component-wise.\n   * @param target The vector to save the result in.\n   */\n\n\n  vmul(vector, target) {\n    if (target === void 0) {\n      target = new Vec3();\n    }\n\n    target.x = vector.x * this.x;\n    target.y = vector.y * this.y;\n    target.z = vector.z * this.z;\n    return target;\n  }\n  /**\n   * Scale a vector and add it to this vector. Save the result in \"target\". (target = this + vector * scalar)\n   * @param target The vector to save the result in.\n   */\n\n\n  addScaledVector(scalar, vector, target) {\n    if (target === void 0) {\n      target = new Vec3();\n    }\n\n    target.x = this.x + scalar * vector.x;\n    target.y = this.y + scalar * vector.y;\n    target.z = this.z + scalar * vector.z;\n    return target;\n  }\n  /**\n   * Calculate dot product\n   * @param vector\n   */\n\n\n  dot(vector) {\n    return this.x * vector.x + this.y * vector.y + this.z * vector.z;\n  }\n\n  isZero() {\n    return this.x === 0 && this.y === 0 && this.z === 0;\n  }\n  /**\n   * Make the vector point in the opposite direction.\n   * @param target Optional target to save in\n   */\n\n\n  negate(target) {\n    if (target === void 0) {\n      target = new Vec3();\n    }\n\n    target.x = -this.x;\n    target.y = -this.y;\n    target.z = -this.z;\n    return target;\n  }\n  /**\n   * Compute two artificial tangents to the vector\n   * @param t1 Vector object to save the first tangent in\n   * @param t2 Vector object to save the second tangent in\n   */\n\n\n  tangents(t1, t2) {\n    const norm = this.length();\n\n    if (norm > 0.0) {\n      const n = Vec3_tangents_n;\n      const inorm = 1 / norm;\n      n.set(this.x * inorm, this.y * inorm, this.z * inorm);\n      const randVec = Vec3_tangents_randVec;\n\n      if (Math.abs(n.x) < 0.9) {\n        randVec.set(1, 0, 0);\n        n.cross(randVec, t1);\n      } else {\n        randVec.set(0, 1, 0);\n        n.cross(randVec, t1);\n      }\n\n      n.cross(t1, t2);\n    } else {\n      // The normal length is zero, make something up\n      t1.set(1, 0, 0);\n      t2.set(0, 1, 0);\n    }\n  }\n  /**\n   * Converts to a more readable format\n   */\n\n\n  toString() {\n    return `${this.x},${this.y},${this.z}`;\n  }\n  /**\n   * Converts to an array\n   */\n\n\n  toArray() {\n    return [this.x, this.y, this.z];\n  }\n  /**\n   * Copies value of source to this vector.\n   */\n\n\n  copy(vector) {\n    this.x = vector.x;\n    this.y = vector.y;\n    this.z = vector.z;\n    return this;\n  }\n  /**\n   * Do a linear interpolation between two vectors\n   * @param t A number between 0 and 1. 0 will make this function return u, and 1 will make it return v. Numbers in between will generate a vector in between them.\n   */\n\n\n  lerp(vector, t, target) {\n    const x = this.x;\n    const y = this.y;\n    const z = this.z;\n    target.x = x + (vector.x - x) * t;\n    target.y = y + (vector.y - y) * t;\n    target.z = z + (vector.z - z) * t;\n  }\n  /**\n   * Check if a vector equals is almost equal to another one.\n   */\n\n\n  almostEquals(vector, precision) {\n    if (precision === void 0) {\n      precision = 1e-6;\n    }\n\n    if (Math.abs(this.x - vector.x) > precision || Math.abs(this.y - vector.y) > precision || Math.abs(this.z - vector.z) > precision) {\n      return false;\n    }\n\n    return true;\n  }\n  /**\n   * Check if a vector is almost zero\n   */\n\n\n  almostZero(precision) {\n    if (precision === void 0) {\n      precision = 1e-6;\n    }\n\n    if (Math.abs(this.x) > precision || Math.abs(this.y) > precision || Math.abs(this.z) > precision) {\n      return false;\n    }\n\n    return true;\n  }\n  /**\n   * Check if the vector is anti-parallel to another vector.\n   * @param precision Set to zero for exact comparisons\n   */\n\n\n  isAntiparallelTo(vector, precision) {\n    this.negate(antip_neg);\n    return antip_neg.almostEquals(vector, precision);\n  }\n  /**\n   * Clone the vector\n   */\n\n\n  clone() {\n    return new Vec3(this.x, this.y, this.z);\n  }\n\n}\nVec3.ZERO = new Vec3(0, 0, 0);\nVec3.UNIT_X = new Vec3(1, 0, 0);\nVec3.UNIT_Y = new Vec3(0, 1, 0);\nVec3.UNIT_Z = new Vec3(0, 0, 1);\nconst Vec3_tangents_n = new Vec3();\nconst Vec3_tangents_randVec = new Vec3();\nconst antip_neg = new Vec3();\n\n/**\n * Axis aligned bounding box class.\n */\nclass AABB {\n  /**\n   * The lower bound of the bounding box\n   */\n\n  /**\n   * The upper bound of the bounding box\n   */\n  constructor(options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    this.lowerBound = new Vec3();\n    this.upperBound = new Vec3();\n\n    if (options.lowerBound) {\n      this.lowerBound.copy(options.lowerBound);\n    }\n\n    if (options.upperBound) {\n      this.upperBound.copy(options.upperBound);\n    }\n  }\n  /**\n   * Set the AABB bounds from a set of points.\n   * @param points An array of Vec3's.\n   * @return The self object\n   */\n\n\n  setFromPoints(points, position, quaternion, skinSize) {\n    const l = this.lowerBound;\n    const u = this.upperBound;\n    const q = quaternion; // Set to the first point\n\n    l.copy(points[0]);\n\n    if (q) {\n      q.vmult(l, l);\n    }\n\n    u.copy(l);\n\n    for (let i = 1; i < points.length; i++) {\n      let p = points[i];\n\n      if (q) {\n        q.vmult(p, tmp$1);\n        p = tmp$1;\n      }\n\n      if (p.x > u.x) {\n        u.x = p.x;\n      }\n\n      if (p.x < l.x) {\n        l.x = p.x;\n      }\n\n      if (p.y > u.y) {\n        u.y = p.y;\n      }\n\n      if (p.y < l.y) {\n        l.y = p.y;\n      }\n\n      if (p.z > u.z) {\n        u.z = p.z;\n      }\n\n      if (p.z < l.z) {\n        l.z = p.z;\n      }\n    } // Add offset\n\n\n    if (position) {\n      position.vadd(l, l);\n      position.vadd(u, u);\n    }\n\n    if (skinSize) {\n      l.x -= skinSize;\n      l.y -= skinSize;\n      l.z -= skinSize;\n      u.x += skinSize;\n      u.y += skinSize;\n      u.z += skinSize;\n    }\n\n    return this;\n  }\n  /**\n   * Copy bounds from an AABB to this AABB\n   * @param aabb Source to copy from\n   * @return The this object, for chainability\n   */\n\n\n  copy(aabb) {\n    this.lowerBound.copy(aabb.lowerBound);\n    this.upperBound.copy(aabb.upperBound);\n    return this;\n  }\n  /**\n   * Clone an AABB\n   */\n\n\n  clone() {\n    return new AABB().copy(this);\n  }\n  /**\n   * Extend this AABB so that it covers the given AABB too.\n   */\n\n\n  extend(aabb) {\n    this.lowerBound.x = Math.min(this.lowerBound.x, aabb.lowerBound.x);\n    this.upperBound.x = Math.max(this.upperBound.x, aabb.upperBound.x);\n    this.lowerBound.y = Math.min(this.lowerBound.y, aabb.lowerBound.y);\n    this.upperBound.y = Math.max(this.upperBound.y, aabb.upperBound.y);\n    this.lowerBound.z = Math.min(this.lowerBound.z, aabb.lowerBound.z);\n    this.upperBound.z = Math.max(this.upperBound.z, aabb.upperBound.z);\n  }\n  /**\n   * Returns true if the given AABB overlaps this AABB.\n   */\n\n\n  overlaps(aabb) {\n    const l1 = this.lowerBound;\n    const u1 = this.upperBound;\n    const l2 = aabb.lowerBound;\n    const u2 = aabb.upperBound; //      l2        u2\n    //      |---------|\n    // |--------|\n    // l1       u1\n\n    const overlapsX = l2.x <= u1.x && u1.x <= u2.x || l1.x <= u2.x && u2.x <= u1.x;\n    const overlapsY = l2.y <= u1.y && u1.y <= u2.y || l1.y <= u2.y && u2.y <= u1.y;\n    const overlapsZ = l2.z <= u1.z && u1.z <= u2.z || l1.z <= u2.z && u2.z <= u1.z;\n    return overlapsX && overlapsY && overlapsZ;\n  } // Mostly for debugging\n\n\n  volume() {\n    const l = this.lowerBound;\n    const u = this.upperBound;\n    return (u.x - l.x) * (u.y - l.y) * (u.z - l.z);\n  }\n  /**\n   * Returns true if the given AABB is fully contained in this AABB.\n   */\n\n\n  contains(aabb) {\n    const l1 = this.lowerBound;\n    const u1 = this.upperBound;\n    const l2 = aabb.lowerBound;\n    const u2 = aabb.upperBound; //      l2        u2\n    //      |---------|\n    // |---------------|\n    // l1              u1\n\n    return l1.x <= l2.x && u1.x >= u2.x && l1.y <= l2.y && u1.y >= u2.y && l1.z <= l2.z && u1.z >= u2.z;\n  }\n\n  getCorners(a, b, c, d, e, f, g, h) {\n    const l = this.lowerBound;\n    const u = this.upperBound;\n    a.copy(l);\n    b.set(u.x, l.y, l.z);\n    c.set(u.x, u.y, l.z);\n    d.set(l.x, u.y, u.z);\n    e.set(u.x, l.y, u.z);\n    f.set(l.x, u.y, l.z);\n    g.set(l.x, l.y, u.z);\n    h.copy(u);\n  }\n  /**\n   * Get the representation of an AABB in another frame.\n   * @return The \"target\" AABB object.\n   */\n\n\n  toLocalFrame(frame, target) {\n    const corners = transformIntoFrame_corners;\n    const a = corners[0];\n    const b = corners[1];\n    const c = corners[2];\n    const d = corners[3];\n    const e = corners[4];\n    const f = corners[5];\n    const g = corners[6];\n    const h = corners[7]; // Get corners in current frame\n\n    this.getCorners(a, b, c, d, e, f, g, h); // Transform them to new local frame\n\n    for (let i = 0; i !== 8; i++) {\n      const corner = corners[i];\n      frame.pointToLocal(corner, corner);\n    }\n\n    return target.setFromPoints(corners);\n  }\n  /**\n   * Get the representation of an AABB in the global frame.\n   * @return The \"target\" AABB object.\n   */\n\n\n  toWorldFrame(frame, target) {\n    const corners = transformIntoFrame_corners;\n    const a = corners[0];\n    const b = corners[1];\n    const c = corners[2];\n    const d = corners[3];\n    const e = corners[4];\n    const f = corners[5];\n    const g = corners[6];\n    const h = corners[7]; // Get corners in current frame\n\n    this.getCorners(a, b, c, d, e, f, g, h); // Transform them to new local frame\n\n    for (let i = 0; i !== 8; i++) {\n      const corner = corners[i];\n      frame.pointToWorld(corner, corner);\n    }\n\n    return target.setFromPoints(corners);\n  }\n  /**\n   * Check if the AABB is hit by a ray.\n   */\n\n\n  overlapsRay(ray) {\n    const {\n      direction,\n      from\n    } = ray; // const t = 0\n    // ray.direction is unit direction vector of ray\n\n    const dirFracX = 1 / direction.x;\n    const dirFracY = 1 / direction.y;\n    const dirFracZ = 1 / direction.z; // this.lowerBound is the corner of AABB with minimal coordinates - left bottom, rt is maximal corner\n\n    const t1 = (this.lowerBound.x - from.x) * dirFracX;\n    const t2 = (this.upperBound.x - from.x) * dirFracX;\n    const t3 = (this.lowerBound.y - from.y) * dirFracY;\n    const t4 = (this.upperBound.y - from.y) * dirFracY;\n    const t5 = (this.lowerBound.z - from.z) * dirFracZ;\n    const t6 = (this.upperBound.z - from.z) * dirFracZ; // const tmin = Math.max(Math.max(Math.min(t1, t2), Math.min(t3, t4)));\n    // const tmax = Math.min(Math.min(Math.max(t1, t2), Math.max(t3, t4)));\n\n    const tmin = Math.max(Math.max(Math.min(t1, t2), Math.min(t3, t4)), Math.min(t5, t6));\n    const tmax = Math.min(Math.min(Math.max(t1, t2), Math.max(t3, t4)), Math.max(t5, t6)); // if tmax < 0, ray (line) is intersecting AABB, but whole AABB is behing us\n\n    if (tmax < 0) {\n      //t = tmax;\n      return false;\n    } // if tmin > tmax, ray doesn't intersect AABB\n\n\n    if (tmin > tmax) {\n      //t = tmax;\n      return false;\n    }\n\n    return true;\n  }\n\n}\nconst tmp$1 = new Vec3();\nconst transformIntoFrame_corners = [new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3()];\n\n/**\n * A Quaternion describes a rotation in 3D space. The Quaternion is mathematically defined as Q = x*i + y*j + z*k + w, where (i,j,k) are imaginary basis vectors. (x,y,z) can be seen as a vector related to the axis of rotation, while the real multiplier, w, is related to the amount of rotation.\n * @param x Multiplier of the imaginary basis vector i.\n * @param y Multiplier of the imaginary basis vector j.\n * @param z Multiplier of the imaginary basis vector k.\n * @param w Multiplier of the real part.\n * @see http://en.wikipedia.org/wiki/Quaternion\n */\n\nclass Quaternion {\n  constructor(x, y, z, w) {\n    if (x === void 0) {\n      x = 0;\n    }\n\n    if (y === void 0) {\n      y = 0;\n    }\n\n    if (z === void 0) {\n      z = 0;\n    }\n\n    if (w === void 0) {\n      w = 1;\n    }\n\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    this.w = w;\n  }\n  /**\n   * Set the value of the quaternion.\n   */\n\n\n  set(x, y, z, w) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    this.w = w;\n    return this;\n  }\n  /**\n   * Convert to a readable format\n   * @return \"x,y,z,w\"\n   */\n\n\n  toString() {\n    return `${this.x},${this.y},${this.z},${this.w}`;\n  }\n  /**\n   * Convert to an Array\n   * @return [x, y, z, w]\n   */\n\n\n  toArray() {\n    return [this.x, this.y, this.z, this.w];\n  }\n  /**\n   * Set the quaternion components given an axis and an angle in radians.\n   */\n\n\n  setFromAxisAngle(vector, angle) {\n    const s = Math.sin(angle * 0.5);\n    this.x = vector.x * s;\n    this.y = vector.y * s;\n    this.z = vector.z * s;\n    this.w = Math.cos(angle * 0.5);\n    return this;\n  }\n  /**\n   * Converts the quaternion to [ axis, angle ] representation.\n   * @param targetAxis A vector object to reuse for storing the axis.\n   * @return An array, first element is the axis and the second is the angle in radians.\n   */\n\n\n  toAxisAngle(targetAxis) {\n    if (targetAxis === void 0) {\n      targetAxis = new Vec3();\n    }\n\n    this.normalize(); // if w>1 acos and sqrt will produce errors, this cant happen if quaternion is normalised\n\n    const angle = 2 * Math.acos(this.w);\n    const s = Math.sqrt(1 - this.w * this.w); // assuming quaternion normalised then w is less than 1, so term always positive.\n\n    if (s < 0.001) {\n      // test to avoid divide by zero, s is always positive due to sqrt\n      // if s close to zero then direction of axis not important\n      targetAxis.x = this.x; // if it is important that axis is normalised then replace with x=1; y=z=0;\n\n      targetAxis.y = this.y;\n      targetAxis.z = this.z;\n    } else {\n      targetAxis.x = this.x / s; // normalise axis\n\n      targetAxis.y = this.y / s;\n      targetAxis.z = this.z / s;\n    }\n\n    return [targetAxis, angle];\n  }\n  /**\n   * Set the quaternion value given two vectors. The resulting rotation will be the needed rotation to rotate u to v.\n   */\n\n\n  setFromVectors(u, v) {\n    if (u.isAntiparallelTo(v)) {\n      const t1 = sfv_t1;\n      const t2 = sfv_t2;\n      u.tangents(t1, t2);\n      this.setFromAxisAngle(t1, Math.PI);\n    } else {\n      const a = u.cross(v);\n      this.x = a.x;\n      this.y = a.y;\n      this.z = a.z;\n      this.w = Math.sqrt(u.length() ** 2 * v.length() ** 2) + u.dot(v);\n      this.normalize();\n    }\n\n    return this;\n  }\n  /**\n   * Multiply the quaternion with an other quaternion.\n   */\n\n\n  mult(quat, target) {\n    if (target === void 0) {\n      target = new Quaternion();\n    }\n\n    const ax = this.x;\n    const ay = this.y;\n    const az = this.z;\n    const aw = this.w;\n    const bx = quat.x;\n    const by = quat.y;\n    const bz = quat.z;\n    const bw = quat.w;\n    target.x = ax * bw + aw * bx + ay * bz - az * by;\n    target.y = ay * bw + aw * by + az * bx - ax * bz;\n    target.z = az * bw + aw * bz + ax * by - ay * bx;\n    target.w = aw * bw - ax * bx - ay * by - az * bz;\n    return target;\n  }\n  /**\n   * Get the inverse quaternion rotation.\n   */\n\n\n  inverse(target) {\n    if (target === void 0) {\n      target = new Quaternion();\n    }\n\n    const x = this.x;\n    const y = this.y;\n    const z = this.z;\n    const w = this.w;\n    this.conjugate(target);\n    const inorm2 = 1 / (x * x + y * y + z * z + w * w);\n    target.x *= inorm2;\n    target.y *= inorm2;\n    target.z *= inorm2;\n    target.w *= inorm2;\n    return target;\n  }\n  /**\n   * Get the quaternion conjugate\n   */\n\n\n  conjugate(target) {\n    if (target === void 0) {\n      target = new Quaternion();\n    }\n\n    target.x = -this.x;\n    target.y = -this.y;\n    target.z = -this.z;\n    target.w = this.w;\n    return target;\n  }\n  /**\n   * Normalize the quaternion. Note that this changes the values of the quaternion.\n   */\n\n\n  normalize() {\n    let l = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);\n\n    if (l === 0) {\n      this.x = 0;\n      this.y = 0;\n      this.z = 0;\n      this.w = 0;\n    } else {\n      l = 1 / l;\n      this.x *= l;\n      this.y *= l;\n      this.z *= l;\n      this.w *= l;\n    }\n\n    return this;\n  }\n  /**\n   * Approximation of quaternion normalization. Works best when quat is already almost-normalized.\n   * @author unphased, https://github.com/unphased\n   */\n\n\n  normalizeFast() {\n    const f = (3.0 - (this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w)) / 2.0;\n\n    if (f === 0) {\n      this.x = 0;\n      this.y = 0;\n      this.z = 0;\n      this.w = 0;\n    } else {\n      this.x *= f;\n      this.y *= f;\n      this.z *= f;\n      this.w *= f;\n    }\n\n    return this;\n  }\n  /**\n   * Multiply the quaternion by a vector\n   */\n\n\n  vmult(v, target) {\n    if (target === void 0) {\n      target = new Vec3();\n    }\n\n    const x = v.x;\n    const y = v.y;\n    const z = v.z;\n    const qx = this.x;\n    const qy = this.y;\n    const qz = this.z;\n    const qw = this.w; // q*v\n\n    const ix = qw * x + qy * z - qz * y;\n    const iy = qw * y + qz * x - qx * z;\n    const iz = qw * z + qx * y - qy * x;\n    const iw = -qx * x - qy * y - qz * z;\n    target.x = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n    target.y = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n    target.z = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n    return target;\n  }\n  /**\n   * Copies value of source to this quaternion.\n   * @return this\n   */\n\n\n  copy(quat) {\n    this.x = quat.x;\n    this.y = quat.y;\n    this.z = quat.z;\n    this.w = quat.w;\n    return this;\n  }\n  /**\n   * Convert the quaternion to euler angle representation. Order: YZX, as this page describes: https://www.euclideanspace.com/maths/standards/index.htm\n   * @param order Three-character string, defaults to \"YZX\"\n   */\n\n\n  toEuler(target, order) {\n    if (order === void 0) {\n      order = 'YZX';\n    }\n\n    let heading;\n    let attitude;\n    let bank;\n    const x = this.x;\n    const y = this.y;\n    const z = this.z;\n    const w = this.w;\n\n    switch (order) {\n      case 'YZX':\n        const test = x * y + z * w;\n\n        if (test > 0.499) {\n          // singularity at north pole\n          heading = 2 * Math.atan2(x, w);\n          attitude = Math.PI / 2;\n          bank = 0;\n        }\n\n        if (test < -0.499) {\n          // singularity at south pole\n          heading = -2 * Math.atan2(x, w);\n          attitude = -Math.PI / 2;\n          bank = 0;\n        }\n\n        if (heading === undefined) {\n          const sqx = x * x;\n          const sqy = y * y;\n          const sqz = z * z;\n          heading = Math.atan2(2 * y * w - 2 * x * z, 1 - 2 * sqy - 2 * sqz); // Heading\n\n          attitude = Math.asin(2 * test); // attitude\n\n          bank = Math.atan2(2 * x * w - 2 * y * z, 1 - 2 * sqx - 2 * sqz); // bank\n        }\n\n        break;\n\n      default:\n        throw new Error(`Euler order ${order} not supported yet.`);\n    }\n\n    target.y = heading;\n    target.z = attitude;\n    target.x = bank;\n  }\n  /**\n   * Set the quaternion components given Euler angle representation.\n   *\n   * @param order The order to apply angles: 'XYZ' or 'YXZ' or any other combination.\n   *\n   * See {@link https://www.mathworks.com/matlabcentral/fileexchange/20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors MathWorks} reference\n   */\n\n\n  setFromEuler(x, y, z, order) {\n    if (order === void 0) {\n      order = 'XYZ';\n    }\n\n    const c1 = Math.cos(x / 2);\n    const c2 = Math.cos(y / 2);\n    const c3 = Math.cos(z / 2);\n    const s1 = Math.sin(x / 2);\n    const s2 = Math.sin(y / 2);\n    const s3 = Math.sin(z / 2);\n\n    if (order === 'XYZ') {\n      this.x = s1 * c2 * c3 + c1 * s2 * s3;\n      this.y = c1 * s2 * c3 - s1 * c2 * s3;\n      this.z = c1 * c2 * s3 + s1 * s2 * c3;\n      this.w = c1 * c2 * c3 - s1 * s2 * s3;\n    } else if (order === 'YXZ') {\n      this.x = s1 * c2 * c3 + c1 * s2 * s3;\n      this.y = c1 * s2 * c3 - s1 * c2 * s3;\n      this.z = c1 * c2 * s3 - s1 * s2 * c3;\n      this.w = c1 * c2 * c3 + s1 * s2 * s3;\n    } else if (order === 'ZXY') {\n      this.x = s1 * c2 * c3 - c1 * s2 * s3;\n      this.y = c1 * s2 * c3 + s1 * c2 * s3;\n      this.z = c1 * c2 * s3 + s1 * s2 * c3;\n      this.w = c1 * c2 * c3 - s1 * s2 * s3;\n    } else if (order === 'ZYX') {\n      this.x = s1 * c2 * c3 - c1 * s2 * s3;\n      this.y = c1 * s2 * c3 + s1 * c2 * s3;\n      this.z = c1 * c2 * s3 - s1 * s2 * c3;\n      this.w = c1 * c2 * c3 + s1 * s2 * s3;\n    } else if (order === 'YZX') {\n      this.x = s1 * c2 * c3 + c1 * s2 * s3;\n      this.y = c1 * s2 * c3 + s1 * c2 * s3;\n      this.z = c1 * c2 * s3 - s1 * s2 * c3;\n      this.w = c1 * c2 * c3 - s1 * s2 * s3;\n    } else if (order === 'XZY') {\n      this.x = s1 * c2 * c3 - c1 * s2 * s3;\n      this.y = c1 * s2 * c3 - s1 * c2 * s3;\n      this.z = c1 * c2 * s3 + s1 * s2 * c3;\n      this.w = c1 * c2 * c3 + s1 * s2 * s3;\n    }\n\n    return this;\n  }\n\n  clone() {\n    return new Quaternion(this.x, this.y, this.z, this.w);\n  }\n  /**\n   * Performs a spherical linear interpolation between two quat\n   *\n   * @param toQuat second operand\n   * @param t interpolation amount between the self quaternion and toQuat\n   * @param target A quaternion to store the result in. If not provided, a new one will be created.\n   * @returns {Quaternion} The \"target\" object\n   */\n\n\n  slerp(toQuat, t, target) {\n    if (target === void 0) {\n      target = new Quaternion();\n    }\n\n    const ax = this.x;\n    const ay = this.y;\n    const az = this.z;\n    const aw = this.w;\n    let bx = toQuat.x;\n    let by = toQuat.y;\n    let bz = toQuat.z;\n    let bw = toQuat.w;\n    let omega;\n    let cosom;\n    let sinom;\n    let scale0;\n    let scale1; // calc cosine\n\n    cosom = ax * bx + ay * by + az * bz + aw * bw; // adjust signs (if necessary)\n\n    if (cosom < 0.0) {\n      cosom = -cosom;\n      bx = -bx;\n      by = -by;\n      bz = -bz;\n      bw = -bw;\n    } // calculate coefficients\n\n\n    if (1.0 - cosom > 0.000001) {\n      // standard case (slerp)\n      omega = Math.acos(cosom);\n      sinom = Math.sin(omega);\n      scale0 = Math.sin((1.0 - t) * omega) / sinom;\n      scale1 = Math.sin(t * omega) / sinom;\n    } else {\n      // \"from\" and \"to\" quaternions are very close\n      //  ... so we can do a linear interpolation\n      scale0 = 1.0 - t;\n      scale1 = t;\n    } // calculate final values\n\n\n    target.x = scale0 * ax + scale1 * bx;\n    target.y = scale0 * ay + scale1 * by;\n    target.z = scale0 * az + scale1 * bz;\n    target.w = scale0 * aw + scale1 * bw;\n    return target;\n  }\n  /**\n   * Rotate an absolute orientation quaternion given an angular velocity and a time step.\n   */\n\n\n  integrate(angularVelocity, dt, angularFactor, target) {\n    if (target === void 0) {\n      target = new Quaternion();\n    }\n\n    const ax = angularVelocity.x * angularFactor.x,\n          ay = angularVelocity.y * angularFactor.y,\n          az = angularVelocity.z * angularFactor.z,\n          bx = this.x,\n          by = this.y,\n          bz = this.z,\n          bw = this.w;\n    const half_dt = dt * 0.5;\n    target.x += half_dt * (ax * bw + ay * bz - az * by);\n    target.y += half_dt * (ay * bw + az * bx - ax * bz);\n    target.z += half_dt * (az * bw + ax * by - ay * bx);\n    target.w += half_dt * (-ax * bx - ay * by - az * bz);\n    return target;\n  }\n\n}\nconst sfv_t1 = new Vec3();\nconst sfv_t2 = new Vec3();\n\n/**\n * The available shape types.\n */\nconst SHAPE_TYPES = {\n  /** SPHERE */\n  SPHERE: 1,\n\n  /** PLANE */\n  PLANE: 2,\n\n  /** BOX */\n  BOX: 4,\n\n  /** COMPOUND */\n  COMPOUND: 8,\n\n  /** CONVEXPOLYHEDRON */\n  CONVEXPOLYHEDRON: 16,\n\n  /** HEIGHTFIELD */\n  HEIGHTFIELD: 32,\n\n  /** PARTICLE */\n  PARTICLE: 64,\n\n  /** CYLINDER */\n  CYLINDER: 128,\n\n  /** TRIMESH */\n  TRIMESH: 256\n};\n/**\n * ShapeType\n */\n\n/**\n * Base class for shapes\n */\nclass Shape {\n  /**\n   * Identifier of the Shape.\n   */\n\n  /**\n   * The type of this shape. Must be set to an int > 0 by subclasses.\n   */\n\n  /**\n   * The local bounding sphere radius of this shape.\n   */\n\n  /**\n   * Whether to produce contact forces when in contact with other bodies. Note that contacts will be generated, but they will be disabled.\n   * @default true\n   */\n\n  /**\n   * @default 1\n   */\n\n  /**\n   * @default -1\n   */\n\n  /**\n   * Optional material of the shape that regulates contact properties.\n   */\n\n  /**\n   * The body to which the shape is added to.\n   */\n\n  /**\n   * All the Shape types.\n   */\n  constructor(options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    this.id = Shape.idCounter++;\n    this.type = options.type || 0;\n    this.boundingSphereRadius = 0;\n    this.collisionResponse = options.collisionResponse ? options.collisionResponse : true;\n    this.collisionFilterGroup = options.collisionFilterGroup !== undefined ? options.collisionFilterGroup : 1;\n    this.collisionFilterMask = options.collisionFilterMask !== undefined ? options.collisionFilterMask : -1;\n    this.material = options.material ? options.material : null;\n    this.body = null;\n  }\n  /**\n   * Computes the bounding sphere radius.\n   * The result is stored in the property `.boundingSphereRadius`\n   */\n\n\n  updateBoundingSphereRadius() {\n    throw `computeBoundingSphereRadius() not implemented for shape type ${this.type}`;\n  }\n  /**\n   * Get the volume of this shape\n   */\n\n\n  volume() {\n    throw `volume() not implemented for shape type ${this.type}`;\n  }\n  /**\n   * Calculates the inertia in the local frame for this shape.\n   * @see http://en.wikipedia.org/wiki/List_of_moments_of_inertia\n   */\n\n\n  calculateLocalInertia(mass, target) {\n    throw `calculateLocalInertia() not implemented for shape type ${this.type}`;\n  }\n  /**\n   * @todo use abstract for these kind of methods\n   */\n\n\n  calculateWorldAABB(pos, quat, min, max) {\n    throw `calculateWorldAABB() not implemented for shape type ${this.type}`;\n  }\n\n}\nShape.idCounter = 0;\nShape.types = SHAPE_TYPES;\n\n/**\n * Transformation utilities.\n */\nclass Transform {\n  /**\n   * position\n   */\n\n  /**\n   * quaternion\n   */\n  constructor(options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    this.position = new Vec3();\n    this.quaternion = new Quaternion();\n\n    if (options.position) {\n      this.position.copy(options.position);\n    }\n\n    if (options.quaternion) {\n      this.quaternion.copy(options.quaternion);\n    }\n  }\n  /**\n   * Get a global point in local transform coordinates.\n   */\n\n\n  pointToLocal(worldPoint, result) {\n    return Transform.pointToLocalFrame(this.position, this.quaternion, worldPoint, result);\n  }\n  /**\n   * Get a local point in global transform coordinates.\n   */\n\n\n  pointToWorld(localPoint, result) {\n    return Transform.pointToWorldFrame(this.position, this.quaternion, localPoint, result);\n  }\n  /**\n   * vectorToWorldFrame\n   */\n\n\n  vectorToWorldFrame(localVector, result) {\n    if (result === void 0) {\n      result = new Vec3();\n    }\n\n    this.quaternion.vmult(localVector, result);\n    return result;\n  }\n  /**\n   * pointToLocalFrame\n   */\n\n\n  static pointToLocalFrame(position, quaternion, worldPoint, result) {\n    if (result === void 0) {\n      result = new Vec3();\n    }\n\n    worldPoint.vsub(position, result);\n    quaternion.conjugate(tmpQuat$1);\n    tmpQuat$1.vmult(result, result);\n    return result;\n  }\n  /**\n   * pointToWorldFrame\n   */\n\n\n  static pointToWorldFrame(position, quaternion, localPoint, result) {\n    if (result === void 0) {\n      result = new Vec3();\n    }\n\n    quaternion.vmult(localPoint, result);\n    result.vadd(position, result);\n    return result;\n  }\n  /**\n   * vectorToWorldFrame\n   */\n\n\n  static vectorToWorldFrame(quaternion, localVector, result) {\n    if (result === void 0) {\n      result = new Vec3();\n    }\n\n    quaternion.vmult(localVector, result);\n    return result;\n  }\n  /**\n   * vectorToLocalFrame\n   */\n\n\n  static vectorToLocalFrame(position, quaternion, worldVector, result) {\n    if (result === void 0) {\n      result = new Vec3();\n    }\n\n    quaternion.w *= -1;\n    quaternion.vmult(worldVector, result);\n    quaternion.w *= -1;\n    return result;\n  }\n\n}\nconst tmpQuat$1 = new Quaternion();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\n[new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3()];\nnew Vec3();\nnew Quaternion();\nnew AABB();\nnew Mat3();\nnew Mat3();\nnew Mat3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\n\nnew Vec3();\nnew Vec3();\nnew Quaternion();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\n\n/**\n * Storage for Ray casting data\n */\nclass RaycastResult {\n  /**\n   * rayFromWorld\n   */\n\n  /**\n   * rayToWorld\n   */\n\n  /**\n   * hitNormalWorld\n   */\n\n  /**\n   * hitPointWorld\n   */\n\n  /**\n   * hasHit\n   */\n\n  /**\n   * shape\n   */\n\n  /**\n   * body\n   */\n\n  /**\n   * The index of the hit triangle, if the hit shape was a trimesh\n   */\n\n  /**\n   * Distance to the hit. Will be set to -1 if there was no hit\n   */\n\n  /**\n   * If the ray should stop traversing the bodies\n   */\n  constructor() {\n    this.rayFromWorld = new Vec3();\n    this.rayToWorld = new Vec3();\n    this.hitNormalWorld = new Vec3();\n    this.hitPointWorld = new Vec3();\n    this.hasHit = false;\n    this.shape = null;\n    this.body = null;\n    this.hitFaceIndex = -1;\n    this.distance = -1;\n    this.shouldStop = false;\n  }\n  /**\n   * Reset all result data.\n   */\n\n\n  reset() {\n    this.rayFromWorld.setZero();\n    this.rayToWorld.setZero();\n    this.hitNormalWorld.setZero();\n    this.hitPointWorld.setZero();\n    this.hasHit = false;\n    this.shape = null;\n    this.body = null;\n    this.hitFaceIndex = -1;\n    this.distance = -1;\n    this.shouldStop = false;\n  }\n  /**\n   * abort\n   */\n\n\n  abort() {\n    this.shouldStop = true;\n  }\n  /**\n   * Set result data.\n   */\n\n\n  set(rayFromWorld, rayToWorld, hitNormalWorld, hitPointWorld, shape, body, distance) {\n    this.rayFromWorld.copy(rayFromWorld);\n    this.rayToWorld.copy(rayToWorld);\n    this.hitNormalWorld.copy(hitNormalWorld);\n    this.hitPointWorld.copy(hitPointWorld);\n    this.shape = shape;\n    this.body = body;\n    this.distance = distance;\n  }\n\n}\n\nlet _Shape$types$SPHERE, _Shape$types$PLANE, _Shape$types$BOX, _Shape$types$CYLINDER, _Shape$types$CONVEXPO, _Shape$types$HEIGHTFI, _Shape$types$TRIMESH;\n\n/**\n * RAY_MODES\n */\nconst RAY_MODES = {\n  /** CLOSEST */\n  CLOSEST: 1,\n\n  /** ANY */\n  ANY: 2,\n\n  /** ALL */\n  ALL: 4\n};\n/**\n * RayMode\n */\n\n_Shape$types$SPHERE = Shape.types.SPHERE;\n_Shape$types$PLANE = Shape.types.PLANE;\n_Shape$types$BOX = Shape.types.BOX;\n_Shape$types$CYLINDER = Shape.types.CYLINDER;\n_Shape$types$CONVEXPO = Shape.types.CONVEXPOLYHEDRON;\n_Shape$types$HEIGHTFI = Shape.types.HEIGHTFIELD;\n_Shape$types$TRIMESH = Shape.types.TRIMESH;\n\n/**\n * A line in 3D space that intersects bodies and return points.\n */\nclass Ray {\n  /**\n   * from\n   */\n\n  /**\n   * to\n   */\n\n  /**\n   * direction\n   */\n\n  /**\n   * The precision of the ray. Used when checking parallelity etc.\n   * @default 0.0001\n   */\n\n  /**\n   * Set to `false` if you don't want the Ray to take `collisionResponse` flags into account on bodies and shapes.\n   * @default true\n   */\n\n  /**\n   * If set to `true`, the ray skips any hits with normal.dot(rayDirection) < 0.\n   * @default false\n   */\n\n  /**\n   * collisionFilterMask\n   * @default -1\n   */\n\n  /**\n   * collisionFilterGroup\n   * @default -1\n   */\n\n  /**\n   * The intersection mode. Should be Ray.ANY, Ray.ALL or Ray.CLOSEST.\n   * @default RAY.ANY\n   */\n\n  /**\n   * Current result object.\n   */\n\n  /**\n   * Will be set to `true` during intersectWorld() if the ray hit anything.\n   */\n\n  /**\n   * User-provided result callback. Will be used if mode is Ray.ALL.\n   */\n\n  /**\n   * CLOSEST\n   */\n\n  /**\n   * ANY\n   */\n\n  /**\n   * ALL\n   */\n  get [_Shape$types$SPHERE]() {\n    return this._intersectSphere;\n  }\n\n  get [_Shape$types$PLANE]() {\n    return this._intersectPlane;\n  }\n\n  get [_Shape$types$BOX]() {\n    return this._intersectBox;\n  }\n\n  get [_Shape$types$CYLINDER]() {\n    return this._intersectConvex;\n  }\n\n  get [_Shape$types$CONVEXPO]() {\n    return this._intersectConvex;\n  }\n\n  get [_Shape$types$HEIGHTFI]() {\n    return this._intersectHeightfield;\n  }\n\n  get [_Shape$types$TRIMESH]() {\n    return this._intersectTrimesh;\n  }\n\n  constructor(from, to) {\n    if (from === void 0) {\n      from = new Vec3();\n    }\n\n    if (to === void 0) {\n      to = new Vec3();\n    }\n\n    this.from = from.clone();\n    this.to = to.clone();\n    this.direction = new Vec3();\n    this.precision = 0.0001;\n    this.checkCollisionResponse = true;\n    this.skipBackfaces = false;\n    this.collisionFilterMask = -1;\n    this.collisionFilterGroup = -1;\n    this.mode = Ray.ANY;\n    this.result = new RaycastResult();\n    this.hasHit = false;\n\n    this.callback = result => {};\n  }\n  /**\n   * Do itersection against all bodies in the given World.\n   * @return True if the ray hit anything, otherwise false.\n   */\n\n\n  intersectWorld(world, options) {\n    this.mode = options.mode || Ray.ANY;\n    this.result = options.result || new RaycastResult();\n    this.skipBackfaces = !!options.skipBackfaces;\n    this.collisionFilterMask = typeof options.collisionFilterMask !== 'undefined' ? options.collisionFilterMask : -1;\n    this.collisionFilterGroup = typeof options.collisionFilterGroup !== 'undefined' ? options.collisionFilterGroup : -1;\n    this.checkCollisionResponse = typeof options.checkCollisionResponse !== 'undefined' ? options.checkCollisionResponse : true;\n\n    if (options.from) {\n      this.from.copy(options.from);\n    }\n\n    if (options.to) {\n      this.to.copy(options.to);\n    }\n\n    this.callback = options.callback || (() => {});\n\n    this.hasHit = false;\n    this.result.reset();\n    this.updateDirection();\n    this.getAABB(tmpAABB$1);\n    tmpArray.length = 0;\n    world.broadphase.aabbQuery(world, tmpAABB$1, tmpArray);\n    this.intersectBodies(tmpArray);\n    return this.hasHit;\n  }\n  /**\n   * Shoot a ray at a body, get back information about the hit.\n   * @deprecated @param result set the result property of the Ray instead.\n   */\n\n\n  intersectBody(body, result) {\n    if (result) {\n      this.result = result;\n      this.updateDirection();\n    }\n\n    const checkCollisionResponse = this.checkCollisionResponse;\n\n    if (checkCollisionResponse && !body.collisionResponse) {\n      return;\n    }\n\n    if ((this.collisionFilterGroup & body.collisionFilterMask) === 0 || (body.collisionFilterGroup & this.collisionFilterMask) === 0) {\n      return;\n    }\n\n    const xi = intersectBody_xi;\n    const qi = intersectBody_qi;\n\n    for (let i = 0, N = body.shapes.length; i < N; i++) {\n      const shape = body.shapes[i];\n\n      if (checkCollisionResponse && !shape.collisionResponse) {\n        continue; // Skip\n      }\n\n      body.quaternion.mult(body.shapeOrientations[i], qi);\n      body.quaternion.vmult(body.shapeOffsets[i], xi);\n      xi.vadd(body.position, xi);\n      this.intersectShape(shape, qi, xi, body);\n\n      if (this.result.shouldStop) {\n        break;\n      }\n    }\n  }\n  /**\n   * Shoot a ray at an array bodies, get back information about the hit.\n   * @param bodies An array of Body objects.\n   * @deprecated @param result set the result property of the Ray instead.\n   *\n   */\n\n\n  intersectBodies(bodies, result) {\n    if (result) {\n      this.result = result;\n      this.updateDirection();\n    }\n\n    for (let i = 0, l = bodies.length; !this.result.shouldStop && i < l; i++) {\n      this.intersectBody(bodies[i]);\n    }\n  }\n  /**\n   * Updates the direction vector.\n   */\n\n\n  updateDirection() {\n    this.to.vsub(this.from, this.direction);\n    this.direction.normalize();\n  }\n\n  intersectShape(shape, quat, position, body) {\n    const from = this.from; // Checking boundingSphere\n\n    const distance = distanceFromIntersection(from, this.direction, position);\n\n    if (distance > shape.boundingSphereRadius) {\n      return;\n    }\n\n    const intersectMethod = this[shape.type];\n\n    if (intersectMethod) {\n      intersectMethod.call(this, shape, quat, position, body, shape);\n    }\n  }\n\n  _intersectBox(box, quat, position, body, reportedShape) {\n    return this._intersectConvex(box.convexPolyhedronRepresentation, quat, position, body, reportedShape);\n  }\n\n  _intersectPlane(shape, quat, position, body, reportedShape) {\n    const from = this.from;\n    const to = this.to;\n    const direction = this.direction; // Get plane normal\n\n    const worldNormal = new Vec3(0, 0, 1);\n    quat.vmult(worldNormal, worldNormal);\n    const len = new Vec3();\n    from.vsub(position, len);\n    const planeToFrom = len.dot(worldNormal);\n    to.vsub(position, len);\n    const planeToTo = len.dot(worldNormal);\n\n    if (planeToFrom * planeToTo > 0) {\n      // \"from\" and \"to\" are on the same side of the plane... bail out\n      return;\n    }\n\n    if (from.distanceTo(to) < planeToFrom) {\n      return;\n    }\n\n    const n_dot_dir = worldNormal.dot(direction);\n\n    if (Math.abs(n_dot_dir) < this.precision) {\n      // No intersection\n      return;\n    }\n\n    const planePointToFrom = new Vec3();\n    const dir_scaled_with_t = new Vec3();\n    const hitPointWorld = new Vec3();\n    from.vsub(position, planePointToFrom);\n    const t = -worldNormal.dot(planePointToFrom) / n_dot_dir;\n    direction.scale(t, dir_scaled_with_t);\n    from.vadd(dir_scaled_with_t, hitPointWorld);\n    this.reportIntersection(worldNormal, hitPointWorld, reportedShape, body, -1);\n  }\n  /**\n   * Get the world AABB of the ray.\n   */\n\n\n  getAABB(aabb) {\n    const {\n      lowerBound,\n      upperBound\n    } = aabb;\n    const to = this.to;\n    const from = this.from;\n    lowerBound.x = Math.min(to.x, from.x);\n    lowerBound.y = Math.min(to.y, from.y);\n    lowerBound.z = Math.min(to.z, from.z);\n    upperBound.x = Math.max(to.x, from.x);\n    upperBound.y = Math.max(to.y, from.y);\n    upperBound.z = Math.max(to.z, from.z);\n  }\n\n  _intersectHeightfield(shape, quat, position, body, reportedShape) {\n    shape.data;\n    shape.elementSize; // Convert the ray to local heightfield coordinates\n\n    const localRay = intersectHeightfield_localRay; //new Ray(this.from, this.to);\n\n    localRay.from.copy(this.from);\n    localRay.to.copy(this.to);\n    Transform.pointToLocalFrame(position, quat, localRay.from, localRay.from);\n    Transform.pointToLocalFrame(position, quat, localRay.to, localRay.to);\n    localRay.updateDirection(); // Get the index of the data points to test against\n\n    const index = intersectHeightfield_index;\n    let iMinX;\n    let iMinY;\n    let iMaxX;\n    let iMaxY; // Set to max\n\n    iMinX = iMinY = 0;\n    iMaxX = iMaxY = shape.data.length - 1;\n    const aabb = new AABB();\n    localRay.getAABB(aabb);\n    shape.getIndexOfPosition(aabb.lowerBound.x, aabb.lowerBound.y, index, true);\n    iMinX = Math.max(iMinX, index[0]);\n    iMinY = Math.max(iMinY, index[1]);\n    shape.getIndexOfPosition(aabb.upperBound.x, aabb.upperBound.y, index, true);\n    iMaxX = Math.min(iMaxX, index[0] + 1);\n    iMaxY = Math.min(iMaxY, index[1] + 1);\n\n    for (let i = iMinX; i < iMaxX; i++) {\n      for (let j = iMinY; j < iMaxY; j++) {\n        if (this.result.shouldStop) {\n          return;\n        }\n\n        shape.getAabbAtIndex(i, j, aabb);\n\n        if (!aabb.overlapsRay(localRay)) {\n          continue;\n        } // Lower triangle\n\n\n        shape.getConvexTrianglePillar(i, j, false);\n        Transform.pointToWorldFrame(position, quat, shape.pillarOffset, worldPillarOffset);\n\n        this._intersectConvex(shape.pillarConvex, quat, worldPillarOffset, body, reportedShape, intersectConvexOptions);\n\n        if (this.result.shouldStop) {\n          return;\n        } // Upper triangle\n\n\n        shape.getConvexTrianglePillar(i, j, true);\n        Transform.pointToWorldFrame(position, quat, shape.pillarOffset, worldPillarOffset);\n\n        this._intersectConvex(shape.pillarConvex, quat, worldPillarOffset, body, reportedShape, intersectConvexOptions);\n      }\n    }\n  }\n\n  _intersectSphere(sphere, quat, position, body, reportedShape) {\n    const from = this.from;\n    const to = this.to;\n    const r = sphere.radius;\n    const a = (to.x - from.x) ** 2 + (to.y - from.y) ** 2 + (to.z - from.z) ** 2;\n    const b = 2 * ((to.x - from.x) * (from.x - position.x) + (to.y - from.y) * (from.y - position.y) + (to.z - from.z) * (from.z - position.z));\n    const c = (from.x - position.x) ** 2 + (from.y - position.y) ** 2 + (from.z - position.z) ** 2 - r ** 2;\n    const delta = b ** 2 - 4 * a * c;\n    const intersectionPoint = Ray_intersectSphere_intersectionPoint;\n    const normal = Ray_intersectSphere_normal;\n\n    if (delta < 0) {\n      // No intersection\n      return;\n    } else if (delta === 0) {\n      // single intersection point\n      from.lerp(to, delta, intersectionPoint);\n      intersectionPoint.vsub(position, normal);\n      normal.normalize();\n      this.reportIntersection(normal, intersectionPoint, reportedShape, body, -1);\n    } else {\n      const d1 = (-b - Math.sqrt(delta)) / (2 * a);\n      const d2 = (-b + Math.sqrt(delta)) / (2 * a);\n\n      if (d1 >= 0 && d1 <= 1) {\n        from.lerp(to, d1, intersectionPoint);\n        intersectionPoint.vsub(position, normal);\n        normal.normalize();\n        this.reportIntersection(normal, intersectionPoint, reportedShape, body, -1);\n      }\n\n      if (this.result.shouldStop) {\n        return;\n      }\n\n      if (d2 >= 0 && d2 <= 1) {\n        from.lerp(to, d2, intersectionPoint);\n        intersectionPoint.vsub(position, normal);\n        normal.normalize();\n        this.reportIntersection(normal, intersectionPoint, reportedShape, body, -1);\n      }\n    }\n  }\n\n  _intersectConvex(shape, quat, position, body, reportedShape, options) {\n    const normal = intersectConvex_normal;\n    const vector = intersectConvex_vector;\n    const faceList = options && options.faceList || null; // Checking faces\n\n    const faces = shape.faces;\n    const vertices = shape.vertices;\n    const normals = shape.faceNormals;\n    const direction = this.direction;\n    const from = this.from;\n    const to = this.to;\n    const fromToDistance = from.distanceTo(to);\n    const Nfaces = faceList ? faceList.length : faces.length;\n    const result = this.result;\n\n    for (let j = 0; !result.shouldStop && j < Nfaces; j++) {\n      const fi = faceList ? faceList[j] : j;\n      const face = faces[fi];\n      const faceNormal = normals[fi];\n      const q = quat;\n      const x = position; // determine if ray intersects the plane of the face\n      // note: this works regardless of the direction of the face normal\n      // Get plane point in world coordinates...\n\n      vector.copy(vertices[face[0]]);\n      q.vmult(vector, vector);\n      vector.vadd(x, vector); // ...but make it relative to the ray from. We'll fix this later.\n\n      vector.vsub(from, vector); // Get plane normal\n\n      q.vmult(faceNormal, normal); // If this dot product is negative, we have something interesting\n\n      const dot = direction.dot(normal); // Bail out if ray and plane are parallel\n\n      if (Math.abs(dot) < this.precision) {\n        continue;\n      } // calc distance to plane\n\n\n      const scalar = normal.dot(vector) / dot; // if negative distance, then plane is behind ray\n\n      if (scalar < 0) {\n        continue;\n      } // if (dot < 0) {\n      // Intersection point is from + direction * scalar\n\n\n      direction.scale(scalar, intersectPoint);\n      intersectPoint.vadd(from, intersectPoint); // a is the point we compare points b and c with.\n\n      a.copy(vertices[face[0]]);\n      q.vmult(a, a);\n      x.vadd(a, a);\n\n      for (let i = 1; !result.shouldStop && i < face.length - 1; i++) {\n        // Transform 3 vertices to world coords\n        b.copy(vertices[face[i]]);\n        c.copy(vertices[face[i + 1]]);\n        q.vmult(b, b);\n        q.vmult(c, c);\n        x.vadd(b, b);\n        x.vadd(c, c);\n        const distance = intersectPoint.distanceTo(from);\n\n        if (!(Ray.pointInTriangle(intersectPoint, a, b, c) || Ray.pointInTriangle(intersectPoint, b, a, c)) || distance > fromToDistance) {\n          continue;\n        }\n\n        this.reportIntersection(normal, intersectPoint, reportedShape, body, fi);\n      } // }\n\n    }\n  }\n  /**\n   * @todo Optimize by transforming the world to local space first.\n   * @todo Use Octree lookup\n   */\n\n\n  _intersectTrimesh(mesh, quat, position, body, reportedShape, options) {\n    const normal = intersectTrimesh_normal;\n    const triangles = intersectTrimesh_triangles;\n    const treeTransform = intersectTrimesh_treeTransform;\n    const vector = intersectConvex_vector;\n    const localDirection = intersectTrimesh_localDirection;\n    const localFrom = intersectTrimesh_localFrom;\n    const localTo = intersectTrimesh_localTo;\n    const worldIntersectPoint = intersectTrimesh_worldIntersectPoint;\n    const worldNormal = intersectTrimesh_worldNormal; // Checking faces\n\n    const indices = mesh.indices;\n    mesh.vertices; // const normals = mesh.faceNormals\n\n    const from = this.from;\n    const to = this.to;\n    const direction = this.direction;\n    treeTransform.position.copy(position);\n    treeTransform.quaternion.copy(quat); // Transform ray to local space!\n\n    Transform.vectorToLocalFrame(position, quat, direction, localDirection);\n    Transform.pointToLocalFrame(position, quat, from, localFrom);\n    Transform.pointToLocalFrame(position, quat, to, localTo);\n    localTo.x *= mesh.scale.x;\n    localTo.y *= mesh.scale.y;\n    localTo.z *= mesh.scale.z;\n    localFrom.x *= mesh.scale.x;\n    localFrom.y *= mesh.scale.y;\n    localFrom.z *= mesh.scale.z;\n    localTo.vsub(localFrom, localDirection);\n    localDirection.normalize();\n    const fromToDistanceSquared = localFrom.distanceSquared(localTo);\n    mesh.tree.rayQuery(this, treeTransform, triangles);\n\n    for (let i = 0, N = triangles.length; !this.result.shouldStop && i !== N; i++) {\n      const trianglesIndex = triangles[i];\n      mesh.getNormal(trianglesIndex, normal); // determine if ray intersects the plane of the face\n      // note: this works regardless of the direction of the face normal\n      // Get plane point in world coordinates...\n\n      mesh.getVertex(indices[trianglesIndex * 3], a); // ...but make it relative to the ray from. We'll fix this later.\n\n      a.vsub(localFrom, vector); // If this dot product is negative, we have something interesting\n\n      const dot = localDirection.dot(normal); // Bail out if ray and plane are parallel\n      // if (Math.abs( dot ) < this.precision){\n      //     continue;\n      // }\n      // calc distance to plane\n\n      const scalar = normal.dot(vector) / dot; // if negative distance, then plane is behind ray\n\n      if (scalar < 0) {\n        continue;\n      } // Intersection point is from + direction * scalar\n\n\n      localDirection.scale(scalar, intersectPoint);\n      intersectPoint.vadd(localFrom, intersectPoint); // Get triangle vertices\n\n      mesh.getVertex(indices[trianglesIndex * 3 + 1], b);\n      mesh.getVertex(indices[trianglesIndex * 3 + 2], c);\n      const squaredDistance = intersectPoint.distanceSquared(localFrom);\n\n      if (!(Ray.pointInTriangle(intersectPoint, b, a, c) || Ray.pointInTriangle(intersectPoint, a, b, c)) || squaredDistance > fromToDistanceSquared) {\n        continue;\n      } // transform intersectpoint and normal to world\n\n\n      Transform.vectorToWorldFrame(quat, normal, worldNormal);\n      Transform.pointToWorldFrame(position, quat, intersectPoint, worldIntersectPoint);\n      this.reportIntersection(worldNormal, worldIntersectPoint, reportedShape, body, trianglesIndex);\n    }\n\n    triangles.length = 0;\n  }\n  /**\n   * @return True if the intersections should continue\n   */\n\n\n  reportIntersection(normal, hitPointWorld, shape, body, hitFaceIndex) {\n    const from = this.from;\n    const to = this.to;\n    const distance = from.distanceTo(hitPointWorld);\n    const result = this.result; // Skip back faces?\n\n    if (this.skipBackfaces && normal.dot(this.direction) > 0) {\n      return;\n    }\n\n    result.hitFaceIndex = typeof hitFaceIndex !== 'undefined' ? hitFaceIndex : -1;\n\n    switch (this.mode) {\n      case Ray.ALL:\n        this.hasHit = true;\n        result.set(from, to, normal, hitPointWorld, shape, body, distance);\n        result.hasHit = true;\n        this.callback(result);\n        break;\n\n      case Ray.CLOSEST:\n        // Store if closer than current closest\n        if (distance < result.distance || !result.hasHit) {\n          this.hasHit = true;\n          result.hasHit = true;\n          result.set(from, to, normal, hitPointWorld, shape, body, distance);\n        }\n\n        break;\n\n      case Ray.ANY:\n        // Report and stop.\n        this.hasHit = true;\n        result.hasHit = true;\n        result.set(from, to, normal, hitPointWorld, shape, body, distance);\n        result.shouldStop = true;\n        break;\n    }\n  }\n  /**\n   * As per \"Barycentric Technique\" as named\n   * {@link https://www.blackpawn.com/texts/pointinpoly/default.html here} but without the division\n   */\n\n\n  static pointInTriangle(p, a, b, c) {\n    c.vsub(a, v0);\n    b.vsub(a, v1);\n    p.vsub(a, v2);\n    const dot00 = v0.dot(v0);\n    const dot01 = v0.dot(v1);\n    const dot02 = v0.dot(v2);\n    const dot11 = v1.dot(v1);\n    const dot12 = v1.dot(v2);\n    let u;\n    let v;\n    return (u = dot11 * dot02 - dot01 * dot12) >= 0 && (v = dot00 * dot12 - dot01 * dot02) >= 0 && u + v < dot00 * dot11 - dot01 * dot01;\n  }\n\n}\nRay.CLOSEST = RAY_MODES.CLOSEST;\nRay.ANY = RAY_MODES.ANY;\nRay.ALL = RAY_MODES.ALL;\nconst tmpAABB$1 = new AABB();\nconst tmpArray = [];\nconst v1 = new Vec3();\nconst v2 = new Vec3();\nconst intersectBody_xi = new Vec3();\nconst intersectBody_qi = new Quaternion();\nconst intersectPoint = new Vec3();\nconst a = new Vec3();\nconst b = new Vec3();\nconst c = new Vec3();\nnew Vec3();\nnew RaycastResult();\nconst intersectConvexOptions = {\n  faceList: [0]\n};\nconst worldPillarOffset = new Vec3();\nconst intersectHeightfield_localRay = new Ray();\nconst intersectHeightfield_index = [];\nconst Ray_intersectSphere_intersectionPoint = new Vec3();\nconst Ray_intersectSphere_normal = new Vec3();\nconst intersectConvex_normal = new Vec3();\nnew Vec3();\nnew Vec3();\nconst intersectConvex_vector = new Vec3();\nconst intersectTrimesh_normal = new Vec3();\nconst intersectTrimesh_localDirection = new Vec3();\nconst intersectTrimesh_localFrom = new Vec3();\nconst intersectTrimesh_localTo = new Vec3();\nconst intersectTrimesh_worldNormal = new Vec3();\nconst intersectTrimesh_worldIntersectPoint = new Vec3();\nnew AABB();\nconst intersectTrimesh_triangles = [];\nconst intersectTrimesh_treeTransform = new Transform();\nconst v0 = new Vec3();\nconst intersect = new Vec3();\n\nfunction distanceFromIntersection(from, direction, position) {\n  // v0 is vector from from to position\n  position.vsub(from, v0);\n  const dot = v0.dot(direction); // intersect = direction*dot + from\n\n  direction.scale(dot, intersect);\n  intersect.vadd(from, intersect);\n  const distance = position.distanceTo(intersect);\n  return distance;\n}\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3(); // Temp vectors\n\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Ray();\nnew Vec3();\nnew Vec3();\nnew Vec3();\n[new Vec3(1, 0, 0), new Vec3(0, 1, 0), new Vec3(0, 0, 1)];\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\n\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\n\nnew Vec3();\nnew Vec3();\nnew Vec3(); // bilateral constraint between two dynamic objects\nnew Vec3();\nnew Vec3();\nnew Vec3(); // Temp vectors for calculation\n\nnew Vec3(); // Relative velocity\n\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3(); // from https://en.wikipedia.org/wiki/Barycentric_coordinate_system\nnew Vec3();\nnew AABB();\nnew Vec3();\nnew AABB();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew AABB();\nnew Vec3();\nnew Transform();\nnew AABB();\n\n// Naming rule: based of the order in SHAPE_TYPES,\n// the first part of the method is formed by the\n// shape type that comes before, in the second part\n// there is the shape type that comes after in the SHAPE_TYPES list\n({\n  sphereSphere: Shape.types.SPHERE,\n  spherePlane: Shape.types.SPHERE | Shape.types.PLANE,\n  boxBox: Shape.types.BOX | Shape.types.BOX,\n  sphereBox: Shape.types.SPHERE | Shape.types.BOX,\n  planeBox: Shape.types.PLANE | Shape.types.BOX,\n  convexConvex: Shape.types.CONVEXPOLYHEDRON,\n  sphereConvex: Shape.types.SPHERE | Shape.types.CONVEXPOLYHEDRON,\n  planeConvex: Shape.types.PLANE | Shape.types.CONVEXPOLYHEDRON,\n  boxConvex: Shape.types.BOX | Shape.types.CONVEXPOLYHEDRON,\n  sphereHeightfield: Shape.types.SPHERE | Shape.types.HEIGHTFIELD,\n  boxHeightfield: Shape.types.BOX | Shape.types.HEIGHTFIELD,\n  convexHeightfield: Shape.types.CONVEXPOLYHEDRON | Shape.types.HEIGHTFIELD,\n  sphereParticle: Shape.types.PARTICLE | Shape.types.SPHERE,\n  planeParticle: Shape.types.PLANE | Shape.types.PARTICLE,\n  boxParticle: Shape.types.BOX | Shape.types.PARTICLE,\n  convexParticle: Shape.types.PARTICLE | Shape.types.CONVEXPOLYHEDRON,\n  cylinderCylinder: Shape.types.CYLINDER,\n  sphereCylinder: Shape.types.SPHERE | Shape.types.CYLINDER,\n  planeCylinder: Shape.types.PLANE | Shape.types.CYLINDER,\n  boxCylinder: Shape.types.BOX | Shape.types.CYLINDER,\n  convexCylinder: Shape.types.CONVEXPOLYHEDRON | Shape.types.CYLINDER,\n  heightfieldCylinder: Shape.types.HEIGHTFIELD | Shape.types.CYLINDER,\n  particleCylinder: Shape.types.PARTICLE | Shape.types.CYLINDER,\n  sphereTrimesh: Shape.types.SPHERE | Shape.types.TRIMESH,\n  planeTrimesh: Shape.types.PLANE | Shape.types.TRIMESH\n});\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Quaternion();\nnew Quaternion();\n\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew AABB();\nnew Vec3();\nnew Vec3(); // See http://bulletphysics.com/Bullet/BulletFull/SphereTriangleDetector_8cpp_source.html\n\nnew Vec3();\nnew Vec3();\nnew Vec3();\n\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\n[new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3()];\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3(); // WIP\n\nnew Quaternion();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\nnew Vec3();\n\nnew AABB();\nnew Ray(); // performance.now() fallback on Date.now()\n\nconst performance = globalThis.performance || {};\n\nif (!performance.now) {\n  let nowOffset = Date.now();\n\n  if (performance.timing && performance.timing.navigationStart) {\n    nowOffset = performance.timing.navigationStart;\n  }\n\n  performance.now = () => Date.now() - nowOffset;\n}\n\nnew Vec3(); // Dispatched after the world has stepped forward in time.\n\nfunction CannonDebugger(scene, world, _temp) {\n  let {\n    color = 0x00ff00,\n    scale = 1,\n    onInit,\n    onUpdate\n  } = _temp === void 0 ? {} : _temp;\n  const _meshes = [];\n\n  const _material = new MeshBasicMaterial({\n    color: color != null ? color : 0x00ff00,\n    wireframe: true\n  });\n\n  const _tempVec0 = new Vec3();\n\n  const _tempVec1 = new Vec3();\n\n  const _tempVec2 = new Vec3();\n\n  const _tempQuat0 = new Quaternion();\n\n  const _sphereGeometry = new SphereGeometry(1);\n\n  const _boxGeometry = new BoxGeometry(1, 1, 1);\n\n  const _planeGeometry = new PlaneGeometry(10, 10, 10, 10); // Move the planeGeometry forward a little bit to prevent z-fighting\n\n\n  _planeGeometry.translate(0, 0, 0.0001);\n\n  function createConvexPolyhedronGeometry(shape) {\n    const geometry = new BufferGeometry(); // Add vertices\n\n    const positions = [];\n\n    for (let i = 0; i < shape.vertices.length; i++) {\n      const vertex = shape.vertices[i];\n      positions.push(vertex.x, vertex.y, vertex.z);\n    }\n\n    geometry.setAttribute('position', new Float32BufferAttribute(positions, 3)); // Add faces\n\n    const indices = [];\n\n    for (let i = 0; i < shape.faces.length; i++) {\n      const face = shape.faces[i];\n      const a = face[0];\n\n      for (let j = 1; j < face.length - 1; j++) {\n        const b = face[j];\n        const c = face[j + 1];\n        indices.push(a, b, c);\n      }\n    }\n\n    geometry.setIndex(indices);\n    geometry.computeBoundingSphere();\n    geometry.computeVertexNormals();\n    return geometry;\n  }\n\n  function createTrimeshGeometry(shape) {\n    const geometry = new BufferGeometry();\n    const positions = [];\n    const v0 = _tempVec0;\n    const v1 = _tempVec1;\n    const v2 = _tempVec2;\n\n    for (let i = 0; i < shape.indices.length / 3; i++) {\n      shape.getTriangleVertices(i, v0, v1, v2);\n      positions.push(v0.x, v0.y, v0.z);\n      positions.push(v1.x, v1.y, v1.z);\n      positions.push(v2.x, v2.y, v2.z);\n    }\n\n    geometry.setAttribute('position', new Float32BufferAttribute(positions, 3));\n    geometry.computeBoundingSphere();\n    geometry.computeVertexNormals();\n    return geometry;\n  }\n\n  function createHeightfieldGeometry(shape) {\n    const geometry = new BufferGeometry();\n    const s = shape.elementSize || 1; // assumes square heightfield, else i*x, j*y\n\n    const positions = shape.data.flatMap((row, i) => row.flatMap((z, j) => [i * s, j * s, z]));\n    const indices = [];\n\n    for (let xi = 0; xi < shape.data.length - 1; xi++) {\n      for (let yi = 0; yi < shape.data[xi].length - 1; yi++) {\n        const stride = shape.data[xi].length;\n        const index = xi * stride + yi;\n        indices.push(index + 1, index + stride, index + stride + 1);\n        indices.push(index + stride, index + 1, index);\n      }\n    }\n\n    geometry.setIndex(indices);\n    geometry.setAttribute('position', new Float32BufferAttribute(positions, 3));\n    geometry.computeBoundingSphere();\n    geometry.computeVertexNormals();\n    return geometry;\n  }\n\n  function createMesh(shape) {\n    let mesh = new Mesh();\n    const {\n      SPHERE,\n      BOX,\n      PLANE,\n      CYLINDER,\n      CONVEXPOLYHEDRON,\n      TRIMESH,\n      HEIGHTFIELD\n    } = Shape.types;\n\n    switch (shape.type) {\n      case SPHERE:\n        {\n          mesh = new Mesh(_sphereGeometry, _material);\n          break;\n        }\n\n      case BOX:\n        {\n          mesh = new Mesh(_boxGeometry, _material);\n          break;\n        }\n\n      case PLANE:\n        {\n          mesh = new Mesh(_planeGeometry, _material);\n          break;\n        }\n\n      case CYLINDER:\n        {\n          const geometry = new CylinderGeometry(shape.radiusTop, shape.radiusBottom, shape.height, shape.numSegments);\n          mesh = new Mesh(geometry, _material);\n          shape.geometryId = geometry.id;\n          break;\n        }\n\n      case CONVEXPOLYHEDRON:\n        {\n          const geometry = createConvexPolyhedronGeometry(shape);\n          mesh = new Mesh(geometry, _material);\n          shape.geometryId = geometry.id;\n          break;\n        }\n\n      case TRIMESH:\n        {\n          const geometry = createTrimeshGeometry(shape);\n          mesh = new Mesh(geometry, _material);\n          shape.geometryId = geometry.id;\n          break;\n        }\n\n      case HEIGHTFIELD:\n        {\n          const geometry = createHeightfieldGeometry(shape);\n          mesh = new Mesh(geometry, _material);\n          shape.geometryId = geometry.id;\n          break;\n        }\n    }\n\n    scene.add(mesh);\n    return mesh;\n  }\n\n  function scaleMesh(mesh, shape) {\n    const {\n      SPHERE,\n      BOX,\n      PLANE,\n      CYLINDER,\n      CONVEXPOLYHEDRON,\n      TRIMESH,\n      HEIGHTFIELD\n    } = Shape.types;\n\n    switch (shape.type) {\n      case SPHERE:\n        {\n          const {\n            radius\n          } = shape;\n          mesh.scale.set(radius * scale, radius * scale, radius * scale);\n          break;\n        }\n\n      case BOX:\n        {\n          mesh.scale.copy(shape.halfExtents);\n          mesh.scale.multiplyScalar(2 * scale);\n          break;\n        }\n\n      case PLANE:\n        {\n          break;\n        }\n\n      case CYLINDER:\n        {\n          mesh.scale.set(1 * scale, 1 * scale, 1 * scale);\n          break;\n        }\n\n      case CONVEXPOLYHEDRON:\n        {\n          mesh.scale.set(1 * scale, 1 * scale, 1 * scale);\n          break;\n        }\n\n      case TRIMESH:\n        {\n          mesh.scale.copy(shape.scale).multiplyScalar(scale);\n          break;\n        }\n\n      case HEIGHTFIELD:\n        {\n          mesh.scale.set(1 * scale, 1 * scale, 1 * scale);\n          break;\n        }\n    }\n  }\n\n  function typeMatch(mesh, shape) {\n    if (!mesh) return false;\n    const {\n      geometry\n    } = mesh;\n    return geometry instanceof SphereGeometry && shape.type === Shape.types.SPHERE || geometry instanceof BoxGeometry && shape.type === Shape.types.BOX || geometry instanceof PlaneGeometry && shape.type === Shape.types.PLANE || geometry.id === shape.geometryId && shape.type === Shape.types.CYLINDER || geometry.id === shape.geometryId && shape.type === Shape.types.CONVEXPOLYHEDRON || geometry.id === shape.geometryId && shape.type === Shape.types.TRIMESH || geometry.id === shape.geometryId && shape.type === Shape.types.HEIGHTFIELD;\n  }\n\n  function updateMesh(index, shape) {\n    let mesh = _meshes[index];\n    let didCreateNewMesh = false;\n\n    if (!typeMatch(mesh, shape)) {\n      if (mesh) scene.remove(mesh);\n      _meshes[index] = mesh = createMesh(shape);\n      didCreateNewMesh = true;\n    }\n\n    scaleMesh(mesh, shape);\n    return didCreateNewMesh;\n  }\n\n  function update() {\n    const meshes = _meshes;\n    const shapeWorldPosition = _tempVec0;\n    const shapeWorldQuaternion = _tempQuat0;\n    let meshIndex = 0;\n\n    for (const body of world.bodies) {\n      for (let i = 0; i !== body.shapes.length; i++) {\n        const shape = body.shapes[i];\n        const didCreateNewMesh = updateMesh(meshIndex, shape);\n        const mesh = meshes[meshIndex];\n\n        if (mesh) {\n          // Get world position\n          body.quaternion.vmult(body.shapeOffsets[i], shapeWorldPosition);\n          body.position.vadd(shapeWorldPosition, shapeWorldPosition); // Get world quaternion\n\n          body.quaternion.mult(body.shapeOrientations[i], shapeWorldQuaternion); // Copy to meshes\n\n          mesh.position.copy(shapeWorldPosition);\n          mesh.quaternion.copy(shapeWorldQuaternion);\n          if (didCreateNewMesh && onInit instanceof Function) onInit(body, mesh, shape);\n          if (!didCreateNewMesh && onUpdate instanceof Function) onUpdate(body, mesh, shape);\n        }\n\n        meshIndex++;\n      }\n    }\n\n    for (let i = meshIndex; i < meshes.length; i++) {\n      const mesh = meshes[i];\n      if (mesh) scene.remove(mesh);\n    }\n\n    meshes.length = meshIndex;\n  }\n\n  return {\n    update\n  };\n}\n\nconst debugContext = /*#__PURE__*/createContext(null);\nconst useDebugContext = () => useContext(debugContext);\n\nconst physicsContext = /*#__PURE__*/createContext(null);\nconst usePhysicsContext = () => {\n  const context = useContext(physicsContext);\n  if (!context) throw new Error('Physics context not found. @react-three/cannon & components can only be used within a Physics provider');\n  return context;\n};\n\nconst q$2 = new Quaternion$2();\nconst s$1 = new Vector3(1, 1, 1);\nconst v$1 = new Vector3();\nconst m$1 = new Matrix4();\n\nconst getMatrix = o => {\n  if (o instanceof InstancedMesh) {\n    o.getMatrixAt(parseInt(o.uuid.split('/')[1]), m$1);\n    return m$1;\n  }\n\n  return o.matrix;\n};\n\nfunction DebugProvider(_ref) {\n  let {\n    children,\n    color = 'black',\n    impl = CannonDebugger,\n    scale = 1\n  } = _ref;\n  const [{\n    bodies,\n    bodyMap\n  }] = useState({\n    bodies: [],\n    bodyMap: {}\n  });\n  const {\n    refs\n  } = usePhysicsContext();\n  const [scene] = useState(() => new Scene());\n  const cannonDebuggerRef = useRef(impl(scene, {\n    bodies\n  }, {\n    color,\n    scale\n  }));\n  useFrame(() => {\n    for (const uuid in bodyMap) {\n      getMatrix(refs[uuid]).decompose(v$1, q$2, s$1);\n      bodyMap[uuid].position.copy(v$1);\n      bodyMap[uuid].quaternion.copy(q$2);\n    }\n\n    cannonDebuggerRef.current.update();\n  });\n  const api = useMemo(() => ({\n    add(uuid, props, type) {\n      const body = propsToBody({\n        props,\n        type,\n        uuid\n      });\n      bodies.push(body);\n      bodyMap[uuid] = body;\n    },\n\n    remove(uuid) {\n      const index = bodies.indexOf(bodyMap[uuid]);\n      if (index !== -1) bodies.splice(index, 1);\n      delete bodyMap[uuid];\n    }\n\n  }), [bodies, bodyMap]);\n  return /*#__PURE__*/jsxs(debugContext.Provider, {\n    value: api,\n    children: [/*#__PURE__*/jsx(\"primitive\", {\n      object: scene\n    }), children]\n  });\n}\n\nconst temp = new Object3D();\n\nfunction useForwardedRef(ref) {\n  const nullRef = useRef(null);\n  return ref && typeof ref !== 'function' ? ref : nullRef;\n}\n\nfunction capitalize(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\nfunction getUUID(ref, index) {\n  const suffix = index === undefined ? '' : `/${index}`;\n  if (typeof ref === 'function') return null;\n  return ref && ref.current && `${ref.current.uuid}${suffix}`;\n}\n\nconst e = new Euler();\nconst q$1 = new Quaternion$2();\n\nconst quaternionToRotation = callback => {\n  return v => callback(e.setFromQuaternion(q$1.fromArray(v)).toArray());\n};\n\nlet incrementingId = 0;\n\nfunction subscribe(ref, worker, subscriptions, type, index, target) {\n  if (target === void 0) {\n    target = 'bodies';\n  }\n\n  return callback => {\n    const id = incrementingId++;\n    subscriptions[id] = {\n      [type]: callback\n    };\n    const uuid = getUUID(ref, index);\n    uuid && worker.subscribe({\n      props: {\n        id,\n        target,\n        type\n      },\n      uuid\n    });\n    return () => {\n      delete subscriptions[id];\n      worker.unsubscribe({\n        props: id\n      });\n    };\n  };\n}\n\nfunction prepare(object, _ref) {\n  let {\n    position = [0, 0, 0],\n    rotation = [0, 0, 0],\n    userData = {}\n  } = _ref;\n  object.userData = userData;\n  object.position.set(...position);\n  object.rotation.set(...rotation);\n  object.updateMatrix();\n}\n\nfunction setupCollision(events, _ref2, uuid) {\n  let {\n    onCollide,\n    onCollideBegin,\n    onCollideEnd\n  } = _ref2;\n  events[uuid] = {\n    collide: onCollide,\n    collideBegin: onCollideBegin,\n    collideEnd: onCollideEnd\n  };\n}\n\nfunction useBody(type, fn, argsFn, fwdRef, deps) {\n  if (fwdRef === void 0) {\n    fwdRef = null;\n  }\n\n  if (deps === void 0) {\n    deps = [];\n  }\n\n  const ref = useForwardedRef(fwdRef);\n  const {\n    events,\n    refs,\n    scaleOverrides,\n    subscriptions,\n    worker\n  } = usePhysicsContext();\n  const debugApi = useDebugContext();\n  useLayoutEffect(() => {\n    if (!ref.current) {\n      // When the reference isn't used we create a stub\n      // The body doesn't have a visual representation but can still be constrained\n      // Yes, this type may be technically incorrect\n      ref.current = new Object3D();\n    }\n\n    const object = ref.current;\n    const currentWorker = worker;\n    const objectCount = object instanceof InstancedMesh ? (object.instanceMatrix.setUsage(DynamicDrawUsage), object.count) : 1;\n    const uuid = object instanceof InstancedMesh ? new Array(objectCount).fill(0).map((_, i) => `${object.uuid}/${i}`) : [object.uuid];\n    const props = object instanceof InstancedMesh ? uuid.map((id, i) => {\n      const props = fn(i);\n      prepare(temp, props);\n      object.setMatrixAt(i, temp.matrix);\n      object.instanceMatrix.needsUpdate = true;\n      refs[id] = object;\n      debugApi == null ? void 0 : debugApi.add(id, props, type);\n      setupCollision(events, props, id);\n      return { ...props,\n        args: argsFn(props.args)\n      };\n    }) : uuid.map((id, i) => {\n      const props = fn(i);\n      prepare(object, props);\n      refs[id] = object;\n      debugApi == null ? void 0 : debugApi.add(id, props, type);\n      setupCollision(events, props, id);\n      return { ...props,\n        args: argsFn(props.args)\n      };\n    }); // Register on mount, unregister on unmount\n\n    currentWorker.addBodies({\n      props: props.map(_ref3 => {\n        let {\n          onCollide,\n          onCollideBegin,\n          onCollideEnd,\n          ...serializableProps\n        } = _ref3;\n        return {\n          onCollide: Boolean(onCollide),\n          ...serializableProps\n        };\n      }),\n      type,\n      uuid\n    });\n    return () => {\n      uuid.forEach(id => {\n        delete refs[id];\n        debugApi == null ? void 0 : debugApi.remove(id);\n        delete events[id];\n      });\n      currentWorker.removeBodies({\n        uuid\n      });\n    };\n  }, deps);\n  const api = useMemo(() => {\n    const makeAtomic = (type, index) => {\n      const op = `set${capitalize(type)}`;\n      return {\n        set: value => {\n          const uuid = getUUID(ref, index);\n          uuid && worker[op]({\n            props: value,\n            uuid\n          });\n        },\n        subscribe: subscribe(ref, worker, subscriptions, type, index)\n      };\n    };\n\n    const makeQuaternion = index => {\n      const type = 'quaternion';\n      return {\n        copy: _ref4 => {\n          let {\n            w,\n            x,\n            y,\n            z\n          } = _ref4;\n          const uuid = getUUID(ref, index);\n          uuid && worker.setQuaternion({\n            props: [x, y, z, w],\n            uuid\n          });\n        },\n        set: (x, y, z, w) => {\n          const uuid = getUUID(ref, index);\n          uuid && worker.setQuaternion({\n            props: [x, y, z, w],\n            uuid\n          });\n        },\n        subscribe: subscribe(ref, worker, subscriptions, type, index)\n      };\n    };\n\n    const makeRotation = index => {\n      return {\n        copy: _ref5 => {\n          let {\n            x,\n            y,\n            z\n          } = _ref5;\n          const uuid = getUUID(ref, index);\n          uuid && worker.setRotation({\n            props: [x, y, z],\n            uuid\n          });\n        },\n        set: (x, y, z) => {\n          const uuid = getUUID(ref, index);\n          uuid && worker.setRotation({\n            props: [x, y, z],\n            uuid\n          });\n        },\n        subscribe: callback => {\n          const id = incrementingId++;\n          const target = 'bodies';\n          const type = 'quaternion';\n          const uuid = getUUID(ref, index);\n          subscriptions[id] = {\n            [type]: quaternionToRotation(callback)\n          };\n          uuid && worker.subscribe({\n            props: {\n              id,\n              target,\n              type\n            },\n            uuid\n          });\n          return () => {\n            delete subscriptions[id];\n            worker.unsubscribe({\n              props: id\n            });\n          };\n        }\n      };\n    };\n\n    const makeVec = (type, index) => {\n      const op = `set${capitalize(type)}`;\n      return {\n        copy: _ref6 => {\n          let {\n            x,\n            y,\n            z\n          } = _ref6;\n          const uuid = getUUID(ref, index);\n          uuid && worker[op]({\n            props: [x, y, z],\n            uuid\n          });\n        },\n        set: (x, y, z) => {\n          const uuid = getUUID(ref, index);\n          uuid && worker[op]({\n            props: [x, y, z],\n            uuid\n          });\n        },\n        subscribe: subscribe(ref, worker, subscriptions, type, index)\n      };\n    };\n\n    function makeApi(index) {\n      return {\n        allowSleep: makeAtomic('allowSleep', index),\n        angularDamping: makeAtomic('angularDamping', index),\n        angularFactor: makeVec('angularFactor', index),\n        angularVelocity: makeVec('angularVelocity', index),\n\n        applyForce(force, worldPoint) {\n          const uuid = getUUID(ref, index);\n          uuid && worker.applyForce({\n            props: [force, worldPoint],\n            uuid\n          });\n        },\n\n        applyImpulse(impulse, worldPoint) {\n          const uuid = getUUID(ref, index);\n          uuid && worker.applyImpulse({\n            props: [impulse, worldPoint],\n            uuid\n          });\n        },\n\n        applyLocalForce(force, localPoint) {\n          const uuid = getUUID(ref, index);\n          uuid && worker.applyLocalForce({\n            props: [force, localPoint],\n            uuid\n          });\n        },\n\n        applyLocalImpulse(impulse, localPoint) {\n          const uuid = getUUID(ref, index);\n          uuid && worker.applyLocalImpulse({\n            props: [impulse, localPoint],\n            uuid\n          });\n        },\n\n        applyTorque(torque) {\n          const uuid = getUUID(ref, index);\n          uuid && worker.applyTorque({\n            props: [torque],\n            uuid\n          });\n        },\n\n        collisionFilterGroup: makeAtomic('collisionFilterGroup', index),\n        collisionFilterMask: makeAtomic('collisionFilterMask', index),\n        collisionResponse: makeAtomic('collisionResponse', index),\n        fixedRotation: makeAtomic('fixedRotation', index),\n        isTrigger: makeAtomic('isTrigger', index),\n        linearDamping: makeAtomic('linearDamping', index),\n        linearFactor: makeVec('linearFactor', index),\n        mass: makeAtomic('mass', index),\n        material: makeAtomic('material', index),\n        position: makeVec('position', index),\n        quaternion: makeQuaternion(index),\n        rotation: makeRotation(index),\n\n        scaleOverride(scale) {\n          const uuid = getUUID(ref, index);\n          if (uuid) scaleOverrides[uuid] = new Vector3(...scale);\n        },\n\n        sleep() {\n          const uuid = getUUID(ref, index);\n          uuid && worker.sleep({\n            uuid\n          });\n        },\n\n        sleepSpeedLimit: makeAtomic('sleepSpeedLimit', index),\n        sleepTimeLimit: makeAtomic('sleepTimeLimit', index),\n        userData: makeAtomic('userData', index),\n        velocity: makeVec('velocity', index),\n\n        wakeUp() {\n          const uuid = getUUID(ref, index);\n          uuid && worker.wakeUp({\n            uuid\n          });\n        }\n\n      };\n    }\n\n    const cache = {};\n    return { ...makeApi(undefined),\n      at: index => cache[index] || (cache[index] = makeApi(index))\n    };\n  }, []);\n  return [ref, api];\n}\n\nfunction makeTriplet(v) {\n  return v instanceof Vector3 ? [v.x, v.y, v.z] : v;\n}\n\nfunction usePlane(fn, fwdRef, deps) {\n  return useBody('Plane', fn, () => [], fwdRef, deps);\n}\nfunction useBox(fn, fwdRef, deps) {\n  const defaultBoxArgs = [1, 1, 1];\n  return useBody('Box', fn, function (args) {\n    if (args === void 0) {\n      args = defaultBoxArgs;\n    }\n\n    return args;\n  }, fwdRef, deps);\n}\nfunction useCylinder(fn, fwdRef, deps) {\n  return useBody('Cylinder', fn, function (args) {\n    if (args === void 0) {\n      args = [];\n    }\n\n    return args;\n  }, fwdRef, deps);\n}\nfunction useHeightfield(fn, fwdRef, deps) {\n  return useBody('Heightfield', fn, args => args, fwdRef, deps);\n}\nfunction useParticle(fn, fwdRef, deps) {\n  return useBody('Particle', fn, () => [], fwdRef, deps);\n}\nfunction useSphere(fn, fwdRef, deps) {\n  return useBody('Sphere', fn, function (args) {\n    if (args === void 0) {\n      args = [1];\n    }\n\n    if (!Array.isArray(args)) throw new Error('useSphere args must be an array');\n    return [args[0]];\n  }, fwdRef, deps);\n}\nfunction useTrimesh(fn, fwdRef, deps) {\n  return useBody('Trimesh', fn, args => args, fwdRef, deps);\n}\nfunction useConvexPolyhedron(fn, fwdRef, deps) {\n  return useBody('ConvexPolyhedron', fn, function (_temp) {\n    let [vertices, faces, normals, axes, boundingSphereRadius] = _temp === void 0 ? [] : _temp;\n    return [vertices && vertices.map(makeTriplet), faces, normals && normals.map(makeTriplet), axes && axes.map(makeTriplet), boundingSphereRadius];\n  }, fwdRef, deps);\n}\nfunction useCompoundBody(fn, fwdRef, deps) {\n  return useBody('Compound', fn, args => args, fwdRef, deps);\n}\n\nfunction useConstraint(type, bodyA, bodyB, optns, deps) {\n  if (optns === void 0) {\n    optns = {};\n  }\n\n  if (deps === void 0) {\n    deps = [];\n  }\n\n  const {\n    worker\n  } = usePhysicsContext();\n  const uuid = MathUtils.generateUUID();\n  const refA = useForwardedRef(bodyA);\n  const refB = useForwardedRef(bodyB);\n  useEffect(() => {\n    if (refA.current && refB.current) {\n      worker.addConstraint({\n        props: [refA.current.uuid, refB.current.uuid, optns],\n        type,\n        uuid\n      });\n      return () => worker.removeConstraint({\n        uuid\n      });\n    }\n  }, deps);\n  const api = useMemo(() => {\n    const enableDisable = {\n      disable: () => worker.disableConstraint({\n        uuid\n      }),\n      enable: () => worker.enableConstraint({\n        uuid\n      })\n    };\n\n    if (type === 'Hinge') {\n      return { ...enableDisable,\n        disableMotor: () => worker.disableConstraintMotor({\n          uuid\n        }),\n        enableMotor: () => worker.enableConstraintMotor({\n          uuid\n        }),\n        setMotorMaxForce: value => worker.setConstraintMotorMaxForce({\n          props: value,\n          uuid\n        }),\n        setMotorSpeed: value => worker.setConstraintMotorSpeed({\n          props: value,\n          uuid\n        })\n      };\n    }\n\n    return enableDisable;\n  }, deps);\n  return [refA, refB, api];\n}\n\nfunction usePointToPointConstraint(bodyA, bodyB, optns, deps) {\n  if (bodyA === void 0) {\n    bodyA = null;\n  }\n\n  if (bodyB === void 0) {\n    bodyB = null;\n  }\n\n  if (deps === void 0) {\n    deps = [];\n  }\n\n  return useConstraint('PointToPoint', bodyA, bodyB, optns, deps);\n}\nfunction useConeTwistConstraint(bodyA, bodyB, optns, deps) {\n  if (bodyA === void 0) {\n    bodyA = null;\n  }\n\n  if (bodyB === void 0) {\n    bodyB = null;\n  }\n\n  if (deps === void 0) {\n    deps = [];\n  }\n\n  return useConstraint('ConeTwist', bodyA, bodyB, optns, deps);\n}\nfunction useDistanceConstraint(bodyA, bodyB, optns, deps) {\n  if (bodyA === void 0) {\n    bodyA = null;\n  }\n\n  if (bodyB === void 0) {\n    bodyB = null;\n  }\n\n  if (deps === void 0) {\n    deps = [];\n  }\n\n  return useConstraint('Distance', bodyA, bodyB, optns, deps);\n}\nfunction useHingeConstraint(bodyA, bodyB, optns, deps) {\n  if (bodyA === void 0) {\n    bodyA = null;\n  }\n\n  if (bodyB === void 0) {\n    bodyB = null;\n  }\n\n  if (deps === void 0) {\n    deps = [];\n  }\n\n  return useConstraint('Hinge', bodyA, bodyB, optns, deps);\n}\nfunction useLockConstraint(bodyA, bodyB, optns, deps) {\n  if (bodyA === void 0) {\n    bodyA = null;\n  }\n\n  if (bodyB === void 0) {\n    bodyB = null;\n  }\n\n  if (deps === void 0) {\n    deps = [];\n  }\n\n  return useConstraint('Lock', bodyA, bodyB, optns, deps);\n}\nfunction useSpring(bodyA, bodyB, optns, deps) {\n  if (bodyA === void 0) {\n    bodyA = null;\n  }\n\n  if (bodyB === void 0) {\n    bodyB = null;\n  }\n\n  if (deps === void 0) {\n    deps = [];\n  }\n\n  const {\n    worker\n  } = usePhysicsContext();\n  const [uuid] = useState(() => MathUtils.generateUUID());\n  const refA = useForwardedRef(bodyA);\n  const refB = useForwardedRef(bodyB);\n  useEffect(() => {\n    if (refA.current && refB.current) {\n      worker.addSpring({\n        props: [refA.current.uuid, refB.current.uuid, optns],\n        uuid\n      });\n      return () => {\n        worker.removeSpring({\n          uuid\n        });\n      };\n    }\n  }, deps);\n  const api = useMemo(() => ({\n    setDamping: value => worker.setSpringDamping({\n      props: value,\n      uuid\n    }),\n    setRestLength: value => worker.setSpringRestLength({\n      props: value,\n      uuid\n    }),\n    setStiffness: value => worker.setSpringStiffness({\n      props: value,\n      uuid\n    })\n  }), deps);\n  return [refA, refB, api];\n}\n\nfunction useRay(mode, options, callback, deps) {\n  if (deps === void 0) {\n    deps = [];\n  }\n\n  const {\n    worker,\n    events\n  } = usePhysicsContext();\n  const [uuid] = useState(() => MathUtils.generateUUID());\n  useEffect(() => {\n    events[uuid] = {\n      rayhit: callback\n    };\n    worker.addRay({\n      props: { ...options,\n        mode\n      },\n      uuid\n    });\n    return () => {\n      worker.removeRay({\n        uuid\n      });\n      delete events[uuid];\n    };\n  }, deps);\n}\n\nfunction useRaycastClosest(options, callback, deps) {\n  if (deps === void 0) {\n    deps = [];\n  }\n\n  useRay('Closest', options, callback, deps);\n}\nfunction useRaycastAny(options, callback, deps) {\n  if (deps === void 0) {\n    deps = [];\n  }\n\n  useRay('Any', options, callback, deps);\n}\nfunction useRaycastAll(options, callback, deps) {\n  if (deps === void 0) {\n    deps = [];\n  }\n\n  useRay('All', options, callback, deps);\n}\n\nfunction isString(v) {\n  return typeof v === 'string';\n}\n\nfunction useRaycastVehicle(fn, fwdRef, deps) {\n  if (fwdRef === void 0) {\n    fwdRef = null;\n  }\n\n  if (deps === void 0) {\n    deps = [];\n  }\n\n  const ref = useForwardedRef(fwdRef);\n  const {\n    worker,\n    subscriptions\n  } = usePhysicsContext();\n  useLayoutEffect(() => {\n    if (!ref.current) {\n      // When the reference isn't used we create a stub\n      // The body doesn't have a visual representation but can still be constrained\n      // Yes, this type may be technically incorrect\n      ref.current = new Object3D();\n    }\n\n    const currentWorker = worker;\n    const uuid = ref.current.uuid;\n    const {\n      chassisBody,\n      indexForwardAxis = 2,\n      indexRightAxis = 0,\n      indexUpAxis = 1,\n      wheelInfos,\n      wheels\n    } = fn();\n    const chassisBodyUUID = getUUID(chassisBody);\n    const wheelUUIDs = wheels.map(ref => getUUID(ref));\n    if (!chassisBodyUUID || !wheelUUIDs.every(isString)) return;\n    currentWorker.addRaycastVehicle({\n      props: [chassisBodyUUID, wheelUUIDs, wheelInfos, indexForwardAxis, indexRightAxis, indexUpAxis],\n      uuid\n    });\n    return () => {\n      currentWorker.removeRaycastVehicle({\n        uuid\n      });\n    };\n  }, deps);\n  const api = useMemo(() => {\n    return {\n      applyEngineForce(value, wheelIndex) {\n        const uuid = getUUID(ref);\n        uuid && worker.applyRaycastVehicleEngineForce({\n          props: [value, wheelIndex],\n          uuid\n        });\n      },\n\n      setBrake(brake, wheelIndex) {\n        const uuid = getUUID(ref);\n        uuid && worker.setRaycastVehicleBrake({\n          props: [brake, wheelIndex],\n          uuid\n        });\n      },\n\n      setSteeringValue(value, wheelIndex) {\n        const uuid = getUUID(ref);\n        uuid && worker.setRaycastVehicleSteeringValue({\n          props: [value, wheelIndex],\n          uuid\n        });\n      },\n\n      sliding: {\n        subscribe: subscribe(ref, worker, subscriptions, 'sliding', undefined, 'vehicles')\n      }\n    };\n  }, deps);\n  return [ref, api];\n}\nfunction useContactMaterial(materialA, materialB, options, deps) {\n  if (deps === void 0) {\n    deps = [];\n  }\n\n  const {\n    worker\n  } = usePhysicsContext();\n  const [uuid] = useState(() => MathUtils.generateUUID());\n  useEffect(() => {\n    worker.addContactMaterial({\n      props: [materialA, materialB, options],\n      uuid\n    });\n    return () => {\n      worker.removeContactMaterial({\n        uuid\n      });\n    };\n  }, deps);\n}\n\nconst v = new Vector3();\nconst s = new Vector3(1, 1, 1);\nconst q = new Quaternion$2();\nconst m = new Matrix4();\n\nfunction apply(index, positions, quaternions, scale, object) {\n  if (scale === void 0) {\n    scale = s;\n  }\n\n  if (index !== undefined) {\n    m.compose(v.fromArray(positions, index * 3), q.fromArray(quaternions, index * 4), scale);\n\n    if (object) {\n      object.matrixAutoUpdate = false;\n      object.matrix.copy(m);\n    }\n\n    return m;\n  }\n\n  return m.identity();\n}\n\nfunction PhysicsProvider(_ref) {\n  let {\n    allowSleep = false,\n    axisIndex = 0,\n    broadphase = 'Naive',\n    children,\n    defaultContactMaterial = {\n      contactEquationStiffness: 1e6\n    },\n    frictionGravity = null,\n    gravity = [0, -9.81, 0],\n    isPaused = false,\n    iterations = 5,\n    maxSubSteps = 10,\n    quatNormalizeFast = false,\n    quatNormalizeSkip = 0,\n    shouldInvalidate = true,\n    size = 1000,\n    solver = 'GS',\n    stepSize = 1 / 60,\n    tolerance = 0.001\n  } = _ref;\n  const {\n    invalidate\n  } = useThree();\n  const [{\n    bodies,\n    events,\n    refs,\n    scaleOverrides,\n    subscriptions,\n    worker\n  }] = useState(() => ({\n    bodies: {},\n    events: {},\n    refs: {},\n    scaleOverrides: {},\n    subscriptions: {},\n    worker: new CannonWorkerAPI({\n      allowSleep,\n      axisIndex,\n      broadphase,\n      defaultContactMaterial,\n      frictionGravity,\n      gravity,\n      iterations,\n      quatNormalizeFast,\n      quatNormalizeSkip,\n      size,\n      solver,\n      tolerance\n    })\n  }));\n  let timeSinceLastCalled = 0;\n  const loop = useCallback((_, delta) => {\n    if (isPaused) return;\n    timeSinceLastCalled += delta;\n    worker.step({\n      maxSubSteps,\n      stepSize,\n      timeSinceLastCalled\n    });\n    timeSinceLastCalled = 0;\n  }, [isPaused, maxSubSteps, stepSize]);\n\n  const collideHandler = _ref2 => {\n    var _events$target;\n\n    let {\n      body,\n      contact: {\n        bi,\n        bj,\n        ...contactRest\n      },\n      target,\n      ...rest\n    } = _ref2;\n    const cb = (_events$target = events[target]) == null ? void 0 : _events$target.collide;\n    cb && cb({\n      body: refs[body],\n      contact: {\n        bi: refs[bi],\n        bj: refs[bj],\n        ...contactRest\n      },\n      target: refs[target],\n      ...rest\n    });\n  };\n\n  const collideBeginHandler = _ref3 => {\n    var _events$bodyA, _events$bodyB;\n\n    let {\n      bodyA,\n      bodyB\n    } = _ref3;\n    const cbA = (_events$bodyA = events[bodyA]) == null ? void 0 : _events$bodyA.collideBegin;\n    cbA && cbA({\n      body: refs[bodyB],\n      op: 'event',\n      target: refs[bodyA],\n      type: 'collideBegin'\n    });\n    const cbB = (_events$bodyB = events[bodyB]) == null ? void 0 : _events$bodyB.collideBegin;\n    cbB && cbB({\n      body: refs[bodyA],\n      op: 'event',\n      target: refs[bodyB],\n      type: 'collideBegin'\n    });\n  };\n\n  const collideEndHandler = _ref4 => {\n    var _events$bodyA2, _events$bodyB2;\n\n    let {\n      bodyA,\n      bodyB\n    } = _ref4;\n    const cbA = (_events$bodyA2 = events[bodyA]) == null ? void 0 : _events$bodyA2.collideEnd;\n    cbA && cbA({\n      body: refs[bodyB],\n      op: 'event',\n      target: refs[bodyA],\n      type: 'collideEnd'\n    });\n    const cbB = (_events$bodyB2 = events[bodyB]) == null ? void 0 : _events$bodyB2.collideEnd;\n    cbB && cbB({\n      body: refs[bodyA],\n      op: 'event',\n      target: refs[bodyB],\n      type: 'collideEnd'\n    });\n  };\n\n  const frameHandler = _ref5 => {\n    let {\n      active,\n      bodies: uuids = [],\n      observations,\n      positions,\n      quaternions\n    } = _ref5;\n\n    for (let i = 0; i < uuids.length; i++) {\n      bodies[uuids[i]] = i;\n    }\n\n    observations.forEach(_ref6 => {\n      let [id, value, type] = _ref6;\n      const subscription = subscriptions[id] || {};\n      const cb = subscription[type]; // HELP: We clearly know the type of the callback, but typescript can't deal with it\n\n      cb && cb(value);\n    });\n\n    if (active) {\n      for (const ref of Object.values(refs)) {\n        if (ref instanceof InstancedMesh) {\n          for (let i = 0; i < ref.count; i++) {\n            const uuid = `${ref.uuid}/${i}`;\n            const index = bodies[uuid];\n\n            if (index !== undefined) {\n              ref.setMatrixAt(i, apply(index, positions, quaternions, scaleOverrides[uuid]));\n              ref.instanceMatrix.needsUpdate = true;\n            }\n          }\n        } else {\n          const scale = scaleOverrides[ref.uuid] || ref.scale;\n          apply(bodies[ref.uuid], positions, quaternions, scale, ref);\n        }\n      }\n\n      if (shouldInvalidate) {\n        invalidate();\n      }\n    }\n  };\n\n  const rayhitHandler = _ref7 => {\n    var _events$uuid;\n\n    let {\n      body,\n      ray: {\n        uuid,\n        ...rayRest\n      },\n      ...rest\n    } = _ref7;\n    const cb = (_events$uuid = events[uuid]) == null ? void 0 : _events$uuid.rayhit;\n    cb && cb({\n      body: body ? refs[body] : null,\n      ray: {\n        uuid,\n        ...rayRest\n      },\n      ...rest\n    });\n  }; // Run loop *after* all the physics objects have ran theirs!\n  // Otherwise the buffers will be invalidated by the browser\n\n\n  useFrame(loop);\n  useEffect(() => {\n    worker.connect();\n    worker.init();\n    worker.on('collide', collideHandler);\n    worker.on('collideBegin', collideBeginHandler);\n    worker.on('collideEnd', collideEndHandler);\n    worker.on('frame', frameHandler);\n    worker.on('rayhit', rayhitHandler);\n    return () => {\n      worker.terminate();\n      worker.removeAllListeners();\n    };\n  }, []);\n  useEffect(() => {\n    worker.axisIndex = axisIndex;\n  }, [axisIndex]);\n  useEffect(() => {\n    worker.broadphase = broadphase;\n  }, [broadphase]);\n  useEffect(() => {\n    worker.gravity = gravity;\n  }, [gravity]);\n  useEffect(() => {\n    worker.iterations = iterations;\n  }, [iterations]);\n  useEffect(() => {\n    worker.tolerance = tolerance;\n  }, [tolerance]);\n  const value = useMemo(() => ({\n    bodies,\n    events,\n    refs,\n    scaleOverrides,\n    subscriptions,\n    worker\n  }), [bodies, events, refs, subscriptions, worker]);\n  return /*#__PURE__*/jsx(physicsContext.Provider, {\n    value: value,\n    children: children\n  });\n}\n\nexport { DebugProvider as Debug, PhysicsProvider as Physics, useBox, useCompoundBody, useConeTwistConstraint, useContactMaterial, useConvexPolyhedron, useCylinder, useDistanceConstraint, useHeightfield, useHingeConstraint, useLockConstraint, useParticle, usePlane, usePointToPointConstraint, useRaycastAll, useRaycastAny, useRaycastClosest, useRaycastVehicle, useSphere, useSpring, useTrimesh };\n","import { DataTextureLoader, HalfFloatType, DataUtils, FloatType, LinearFilter } from \"three\";\nclass RGBELoader extends DataTextureLoader {\n  constructor(manager) {\n    super(manager);\n    this.type = HalfFloatType;\n  }\n  // adapted from http://www.graphics.cornell.edu/~bjw/rgbe.html\n  parse(buffer) {\n    const RGBE_RETURN_FAILURE = -1, rgbe_read_error = 1, rgbe_write_error = 2, rgbe_format_error = 3, rgbe_memory_error = 4, rgbe_error = function(rgbe_error_code, msg) {\n      switch (rgbe_error_code) {\n        case rgbe_read_error:\n          console.error(\"THREE.RGBELoader Read Error: \" + (msg || \"\"));\n          break;\n        case rgbe_write_error:\n          console.error(\"THREE.RGBELoader Write Error: \" + (msg || \"\"));\n          break;\n        case rgbe_format_error:\n          console.error(\"THREE.RGBELoader Bad File Format: \" + (msg || \"\"));\n          break;\n        default:\n        case rgbe_memory_error:\n          console.error(\"THREE.RGBELoader: Error: \" + (msg || \"\"));\n      }\n      return RGBE_RETURN_FAILURE;\n    }, RGBE_VALID_PROGRAMTYPE = 1, RGBE_VALID_FORMAT = 2, RGBE_VALID_DIMENSIONS = 4, NEWLINE = \"\\n\", fgets = function(buffer2, lineLimit, consume) {\n      const chunkSize = 128;\n      lineLimit = !lineLimit ? 1024 : lineLimit;\n      let p = buffer2.pos, i = -1, len = 0, s = \"\", chunk = String.fromCharCode.apply(null, new Uint16Array(buffer2.subarray(p, p + chunkSize)));\n      while (0 > (i = chunk.indexOf(NEWLINE)) && len < lineLimit && p < buffer2.byteLength) {\n        s += chunk;\n        len += chunk.length;\n        p += chunkSize;\n        chunk += String.fromCharCode.apply(null, new Uint16Array(buffer2.subarray(p, p + chunkSize)));\n      }\n      if (-1 < i) {\n        if (false !== consume)\n          buffer2.pos += len + i + 1;\n        return s + chunk.slice(0, i);\n      }\n      return false;\n    }, RGBE_ReadHeader = function(buffer2) {\n      const magic_token_re = /^#\\?(\\S+)/, gamma_re = /^\\s*GAMMA\\s*=\\s*(\\d+(\\.\\d+)?)\\s*$/, exposure_re = /^\\s*EXPOSURE\\s*=\\s*(\\d+(\\.\\d+)?)\\s*$/, format_re = /^\\s*FORMAT=(\\S+)\\s*$/, dimensions_re = /^\\s*\\-Y\\s+(\\d+)\\s+\\+X\\s+(\\d+)\\s*$/, header = {\n        valid: 0,\n        string: \"\",\n        comments: \"\",\n        programtype: \"RGBE\",\n        format: \"\",\n        gamma: 1,\n        exposure: 1,\n        width: 0,\n        height: 0\n      };\n      let line, match;\n      if (buffer2.pos >= buffer2.byteLength || !(line = fgets(buffer2))) {\n        return rgbe_error(rgbe_read_error, \"no header found\");\n      }\n      if (!(match = line.match(magic_token_re))) {\n        return rgbe_error(rgbe_format_error, \"bad initial token\");\n      }\n      header.valid |= RGBE_VALID_PROGRAMTYPE;\n      header.programtype = match[1];\n      header.string += line + \"\\n\";\n      while (true) {\n        line = fgets(buffer2);\n        if (false === line)\n          break;\n        header.string += line + \"\\n\";\n        if (\"#\" === line.charAt(0)) {\n          header.comments += line + \"\\n\";\n          continue;\n        }\n        if (match = line.match(gamma_re)) {\n          header.gamma = parseFloat(match[1]);\n        }\n        if (match = line.match(exposure_re)) {\n          header.exposure = parseFloat(match[1]);\n        }\n        if (match = line.match(format_re)) {\n          header.valid |= RGBE_VALID_FORMAT;\n          header.format = match[1];\n        }\n        if (match = line.match(dimensions_re)) {\n          header.valid |= RGBE_VALID_DIMENSIONS;\n          header.height = parseInt(match[1], 10);\n          header.width = parseInt(match[2], 10);\n        }\n        if (header.valid & RGBE_VALID_FORMAT && header.valid & RGBE_VALID_DIMENSIONS)\n          break;\n      }\n      if (!(header.valid & RGBE_VALID_FORMAT)) {\n        return rgbe_error(rgbe_format_error, \"missing format specifier\");\n      }\n      if (!(header.valid & RGBE_VALID_DIMENSIONS)) {\n        return rgbe_error(rgbe_format_error, \"missing image size specifier\");\n      }\n      return header;\n    }, RGBE_ReadPixels_RLE = function(buffer2, w, h) {\n      const scanline_width = w;\n      if (\n        // run length encoding is not allowed so read flat\n        scanline_width < 8 || scanline_width > 32767 || // this file is not run length encoded\n        2 !== buffer2[0] || 2 !== buffer2[1] || buffer2[2] & 128\n      ) {\n        return new Uint8Array(buffer2);\n      }\n      if (scanline_width !== (buffer2[2] << 8 | buffer2[3])) {\n        return rgbe_error(rgbe_format_error, \"wrong scanline width\");\n      }\n      const data_rgba = new Uint8Array(4 * w * h);\n      if (!data_rgba.length) {\n        return rgbe_error(rgbe_memory_error, \"unable to allocate buffer space\");\n      }\n      let offset = 0, pos = 0;\n      const ptr_end = 4 * scanline_width;\n      const rgbeStart = new Uint8Array(4);\n      const scanline_buffer = new Uint8Array(ptr_end);\n      let num_scanlines = h;\n      while (num_scanlines > 0 && pos < buffer2.byteLength) {\n        if (pos + 4 > buffer2.byteLength) {\n          return rgbe_error(rgbe_read_error);\n        }\n        rgbeStart[0] = buffer2[pos++];\n        rgbeStart[1] = buffer2[pos++];\n        rgbeStart[2] = buffer2[pos++];\n        rgbeStart[3] = buffer2[pos++];\n        if (2 != rgbeStart[0] || 2 != rgbeStart[1] || (rgbeStart[2] << 8 | rgbeStart[3]) != scanline_width) {\n          return rgbe_error(rgbe_format_error, \"bad rgbe scanline format\");\n        }\n        let ptr = 0, count;\n        while (ptr < ptr_end && pos < buffer2.byteLength) {\n          count = buffer2[pos++];\n          const isEncodedRun = count > 128;\n          if (isEncodedRun)\n            count -= 128;\n          if (0 === count || ptr + count > ptr_end) {\n            return rgbe_error(rgbe_format_error, \"bad scanline data\");\n          }\n          if (isEncodedRun) {\n            const byteValue = buffer2[pos++];\n            for (let i = 0; i < count; i++) {\n              scanline_buffer[ptr++] = byteValue;\n            }\n          } else {\n            scanline_buffer.set(buffer2.subarray(pos, pos + count), ptr);\n            ptr += count;\n            pos += count;\n          }\n        }\n        const l = scanline_width;\n        for (let i = 0; i < l; i++) {\n          let off = 0;\n          data_rgba[offset] = scanline_buffer[i + off];\n          off += scanline_width;\n          data_rgba[offset + 1] = scanline_buffer[i + off];\n          off += scanline_width;\n          data_rgba[offset + 2] = scanline_buffer[i + off];\n          off += scanline_width;\n          data_rgba[offset + 3] = scanline_buffer[i + off];\n          offset += 4;\n        }\n        num_scanlines--;\n      }\n      return data_rgba;\n    };\n    const RGBEByteToRGBFloat = function(sourceArray, sourceOffset, destArray, destOffset) {\n      const e = sourceArray[sourceOffset + 3];\n      const scale = Math.pow(2, e - 128) / 255;\n      destArray[destOffset + 0] = sourceArray[sourceOffset + 0] * scale;\n      destArray[destOffset + 1] = sourceArray[sourceOffset + 1] * scale;\n      destArray[destOffset + 2] = sourceArray[sourceOffset + 2] * scale;\n      destArray[destOffset + 3] = 1;\n    };\n    const RGBEByteToRGBHalf = function(sourceArray, sourceOffset, destArray, destOffset) {\n      const e = sourceArray[sourceOffset + 3];\n      const scale = Math.pow(2, e - 128) / 255;\n      destArray[destOffset + 0] = DataUtils.toHalfFloat(Math.min(sourceArray[sourceOffset + 0] * scale, 65504));\n      destArray[destOffset + 1] = DataUtils.toHalfFloat(Math.min(sourceArray[sourceOffset + 1] * scale, 65504));\n      destArray[destOffset + 2] = DataUtils.toHalfFloat(Math.min(sourceArray[sourceOffset + 2] * scale, 65504));\n      destArray[destOffset + 3] = DataUtils.toHalfFloat(1);\n    };\n    const byteArray = new Uint8Array(buffer);\n    byteArray.pos = 0;\n    const rgbe_header_info = RGBE_ReadHeader(byteArray);\n    if (RGBE_RETURN_FAILURE !== rgbe_header_info) {\n      const w = rgbe_header_info.width, h = rgbe_header_info.height, image_rgba_data = RGBE_ReadPixels_RLE(byteArray.subarray(byteArray.pos), w, h);\n      if (RGBE_RETURN_FAILURE !== image_rgba_data) {\n        let data, type;\n        let numElements;\n        switch (this.type) {\n          case FloatType:\n            numElements = image_rgba_data.length / 4;\n            const floatArray = new Float32Array(numElements * 4);\n            for (let j = 0; j < numElements; j++) {\n              RGBEByteToRGBFloat(image_rgba_data, j * 4, floatArray, j * 4);\n            }\n            data = floatArray;\n            type = FloatType;\n            break;\n          case HalfFloatType:\n            numElements = image_rgba_data.length / 4;\n            const halfArray = new Uint16Array(numElements * 4);\n            for (let j = 0; j < numElements; j++) {\n              RGBEByteToRGBHalf(image_rgba_data, j * 4, halfArray, j * 4);\n            }\n            data = halfArray;\n            type = HalfFloatType;\n            break;\n          default:\n            console.error(\"THREE.RGBELoader: unsupported type: \", this.type);\n            break;\n        }\n        return {\n          width: w,\n          height: h,\n          data,\n          header: rgbe_header_info.string,\n          gamma: rgbe_header_info.gamma,\n          exposure: rgbe_header_info.exposure,\n          type\n        };\n      }\n    }\n    return null;\n  }\n  setDataType(value) {\n    this.type = value;\n    return this;\n  }\n  load(url, onLoad, onProgress, onError) {\n    function onLoadCallback(texture, texData) {\n      switch (texture.type) {\n        case FloatType:\n        case HalfFloatType:\n          if (\"colorSpace\" in texture)\n            texture.colorSpace = \"srgb-linear\";\n          else\n            texture.encoding = 3e3;\n          texture.minFilter = LinearFilter;\n          texture.magFilter = LinearFilter;\n          texture.generateMipmaps = false;\n          texture.flipY = true;\n          break;\n      }\n      if (onLoad)\n        onLoad(texture, texData);\n    }\n    return super.load(url, onLoadCallback, onProgress, onError);\n  }\n}\nexport {\n  RGBELoader\n};\n","import { Mesh, REVISION, IcosahedronGeometry, ShaderMaterial, DoubleSide } from \"three\";\nconst isCubeTexture = (def) => def && def.isCubeTexture;\nclass GroundProjectedEnv extends Mesh {\n  constructor(texture, options) {\n    var _a, _b;\n    const isCubeMap = isCubeTexture(texture);\n    const w = (_b = isCubeMap ? (_a = texture.image[0]) == null ? void 0 : _a.width : texture.image.width) != null ? _b : 1024;\n    const cubeSize = w / 4;\n    const _lodMax = Math.floor(Math.log2(cubeSize));\n    const _cubeSize = Math.pow(2, _lodMax);\n    const width = 3 * Math.max(_cubeSize, 16 * 7);\n    const height = 4 * _cubeSize;\n    const defines = [\n      isCubeMap ? \"#define ENVMAP_TYPE_CUBE\" : \"\",\n      `#define CUBEUV_TEXEL_WIDTH ${1 / width}`,\n      `#define CUBEUV_TEXEL_HEIGHT ${1 / height}`,\n      `#define CUBEUV_MAX_MIP ${_lodMax}.0`\n    ];\n    const vertexShader = (\n      /* glsl */\n      `\n        varying vec3 vWorldPosition;\n        void main() \n        {\n            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );\n            vWorldPosition = worldPosition.xyz;\n            \n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }\n        `\n    );\n    const fragmentShader = defines.join(\"\\n\") + /* glsl */\n    `\n        #define ENVMAP_TYPE_CUBE_UV\n        varying vec3 vWorldPosition;\n        uniform float radius;\n        uniform float height;\n        uniform float angle;\n        #ifdef ENVMAP_TYPE_CUBE\n            uniform samplerCube map;\n        #else\n            uniform sampler2D map;\n        #endif\n        // From: https://www.shadertoy.com/view/4tsBD7\n        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) \n        {\n            float d = dot ( rd, n );\n            \n            if( d > 0.0 ) { return 1e6; }\n            \n            vec3  o = ro - c;\n            float t = - dot( n, o ) / d;\n            vec3  q = o + rd * t;\n            \n            return ( dot( q, q ) < r * r ) ? t : 1e6;\n        }\n        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm\n        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) \n        {\n            vec3 oc = ro - ce;\n            float b = dot( oc, rd );\n            float c = dot( oc, oc ) - ra * ra;\n            float h = b * b - c;\n            \n            if( h < 0.0 ) { return -1.0; }\n            \n            h = sqrt( h );\n            \n            return - b + h;\n        }\n        vec3 project() \n        {\n            vec3 p = normalize( vWorldPosition );\n            vec3 camPos = cameraPosition;\n            camPos.y -= height;\n            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );\n            if( intersection > 0.0 ) {\n                \n                vec3 h = vec3( 0.0, - height, 0.0 );\n                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );\n                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;\n            } else {\n                p = vec3( 0.0, 1.0, 0.0 );\n            }\n            return p;\n        }\n        #include <common>\n        #include <cube_uv_reflection_fragment>\n        void main() \n        {\n            vec3 projectedWorldPosition = project();\n            \n            #ifdef ENVMAP_TYPE_CUBE\n                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;\n            #else\n                vec3 direction = normalize( projectedWorldPosition );\n                vec2 uv = equirectUv( direction );\n                vec3 outcolor = texture2D( map, uv ).rgb;\n            #endif\n            gl_FragColor = vec4( outcolor, 1.0 );\n            #include <tonemapping_fragment>\n            #include <${parseInt(REVISION.replace(/\\D+/g, \"\")) >= 154 ? \"colorspace_fragment\" : \"encodings_fragment\"}>\n        }\n        `;\n    const uniforms = {\n      map: { value: texture },\n      height: { value: (options == null ? void 0 : options.height) || 15 },\n      radius: { value: (options == null ? void 0 : options.radius) || 100 }\n    };\n    const geometry = new IcosahedronGeometry(1, 16);\n    const material = new ShaderMaterial({\n      uniforms,\n      fragmentShader,\n      vertexShader,\n      side: DoubleSide\n    });\n    super(geometry, material);\n  }\n  set radius(radius) {\n    this.material.uniforms.radius.value = radius;\n  }\n  get radius() {\n    return this.material.uniforms.radius.value;\n  }\n  set height(height) {\n    this.material.uniforms.height.value = height;\n  }\n  get height() {\n    return this.material.uniforms.height.value;\n  }\n}\nexport {\n  GroundProjectedEnv\n};\n","const presetsObj = {\n  sunset: 'venice/venice_sunset_1k.hdr',\n  dawn: 'kiara/kiara_1_dawn_1k.hdr',\n  night: 'dikhololo/dikhololo_night_1k.hdr',\n  warehouse: 'empty-wharehouse/empty_warehouse_01_1k.hdr',\n  forest: 'forrest-slope/forest_slope_1k.hdr',\n  apartment: 'lebombo/lebombo_1k.hdr',\n  studio: 'studio-small-3/studio_small_03_1k.hdr',\n  city: 'potsdamer-platz/potsdamer_platz_1k.hdr',\n  park: 'rooitou/rooitou_park_1k.hdr',\n  lobby: 'st-fagans/st_fagans_interior_1k.hdr'\n};\n\nexport { presetsObj };\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport { useThree, useLoader, useFrame, createPortal, extend } from '@react-three/fiber';\nimport { CubeReflectionMapping, EquirectangularReflectionMapping, sRGBEncoding, LinearEncoding, Scene, WebGLCubeRenderTarget, HalfFloatType, CubeTextureLoader } from 'three';\nimport { RGBELoader, GroundProjectedEnv } from 'three-stdlib';\nimport { presetsObj } from '../helpers/environment-assets.js';\n\nconst CUBEMAP_ROOT = 'https://market-assets.fra1.cdn.digitaloceanspaces.com/market-assets/hdris/';\n\nconst isRef = obj => obj.current && obj.current.isScene;\n\nconst resolveScene = scene => isRef(scene) ? scene.current : scene;\n\nfunction EnvironmentMap({\n  scene,\n  background = false,\n  map\n}) {\n  const defaultScene = useThree(state => state.scene);\n  React.useLayoutEffect(() => {\n    if (map) {\n      const target = resolveScene(scene || defaultScene);\n      const oldbg = target.background;\n      const oldenv = target.environment;\n      if (background !== 'only') target.environment = map;\n      if (background) target.background = map;\n      return () => {\n        if (background !== 'only') target.environment = oldenv;\n        if (background) target.background = oldbg;\n      };\n    }\n  }, [defaultScene, scene, map, background]);\n  return null;\n}\nfunction useEnvironment({\n  files = ['/px.png', '/nx.png', '/py.png', '/ny.png', '/pz.png', '/nz.png'],\n  path = '',\n  preset = undefined,\n  encoding = undefined,\n  extensions\n}) {\n  if (preset) {\n    if (!(preset in presetsObj)) throw new Error('Preset must be one of: ' + Object.keys(presetsObj).join(', '));\n    files = presetsObj[preset];\n    path = CUBEMAP_ROOT;\n  }\n\n  const isCubeMap = Array.isArray(files);\n  const loader = isCubeMap ? CubeTextureLoader : RGBELoader;\n  const loaderResult = useLoader( // @ts-expect-error\n  loader, isCubeMap ? [files] : files, loader => {\n    loader.setPath(path);\n    if (extensions) extensions(loader);\n  });\n  const texture = isCubeMap ? // @ts-ignore\n  loaderResult[0] : loaderResult;\n  texture.mapping = isCubeMap ? CubeReflectionMapping : EquirectangularReflectionMapping;\n  texture.encoding = (encoding !== null && encoding !== void 0 ? encoding : isCubeMap) ? sRGBEncoding : LinearEncoding;\n  return texture;\n}\nfunction EnvironmentCube({\n  background = false,\n  scene,\n  ...rest\n}) {\n  const texture = useEnvironment(rest);\n  const defaultScene = useThree(state => state.scene);\n  React.useLayoutEffect(() => {\n    const target = resolveScene(scene || defaultScene);\n    const oldbg = target.background;\n    const oldenv = target.environment;\n    if (background !== 'only') target.environment = texture;\n    if (background) target.background = texture;\n    return () => {\n      if (background !== 'only') target.environment = oldenv;\n      if (background) target.background = oldbg;\n    };\n  }, [texture, background, scene, defaultScene]);\n  return null;\n}\nfunction EnvironmentPortal({\n  children,\n  near = 1,\n  far = 1000,\n  resolution = 256,\n  frames = 1,\n  map,\n  background = false,\n  scene,\n  files,\n  path,\n  preset = undefined,\n  extensions\n}) {\n  const gl = useThree(state => state.gl);\n  const defaultScene = useThree(state => state.scene);\n  const camera = React.useRef(null);\n  const [virtualScene] = React.useState(() => new Scene());\n  const fbo = React.useMemo(() => {\n    const fbo = new WebGLCubeRenderTarget(resolution);\n    fbo.texture.type = HalfFloatType;\n    return fbo;\n  }, [resolution]);\n  React.useLayoutEffect(() => {\n    if (frames === 1) camera.current.update(gl, virtualScene);\n    const target = resolveScene(scene || defaultScene);\n    const oldbg = target.background;\n    const oldenv = target.environment;\n    if (background !== 'only') target.environment = fbo.texture;\n    if (background) target.background = fbo.texture;\n    return () => {\n      if (background !== 'only') target.environment = oldenv;\n      if (background) target.background = oldbg;\n    };\n  }, [children, virtualScene, fbo.texture, scene, defaultScene, background, frames, gl]);\n  let count = 1;\n  useFrame(() => {\n    if (frames === Infinity || count < frames) {\n      camera.current.update(gl, virtualScene);\n      count++;\n    }\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, null, createPortal( /*#__PURE__*/React.createElement(React.Fragment, null, children, /*#__PURE__*/React.createElement(\"cubeCamera\", {\n    ref: camera,\n    args: [near, far, fbo]\n  }), files || preset ? /*#__PURE__*/React.createElement(EnvironmentCube, {\n    background: true,\n    files: files,\n    preset: preset,\n    path: path,\n    extensions: extensions\n  }) : map ? /*#__PURE__*/React.createElement(EnvironmentMap, {\n    background: true,\n    map: map,\n    extensions: extensions\n  }) : null), virtualScene));\n}\n\nfunction EnvironmentGround(props) {\n  var _props$ground, _props$ground2, _scale, _props$ground3;\n\n  const textureDefault = useEnvironment(props);\n  const texture = props.map || textureDefault;\n  React.useMemo(() => {\n    extend({\n      GroundProjectedEnvImpl: GroundProjectedEnv\n    });\n  }, []);\n  const args = React.useMemo(() => [texture], [texture]);\n  const height = (_props$ground = props.ground) == null ? void 0 : _props$ground.height;\n  const radius = (_props$ground2 = props.ground) == null ? void 0 : _props$ground2.radius;\n  const scale = (_scale = (_props$ground3 = props.ground) == null ? void 0 : _props$ground3.scale) !== null && _scale !== void 0 ? _scale : 1000;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(EnvironmentMap, _extends({}, props, {\n    map: texture\n  })), /*#__PURE__*/React.createElement(\"groundProjectedEnvImpl\", {\n    args: args,\n    scale: scale,\n    height: height,\n    radius: radius\n  }));\n}\n\nfunction Environment(props) {\n  return props.ground ? /*#__PURE__*/React.createElement(EnvironmentGround, props) : props.map ? /*#__PURE__*/React.createElement(EnvironmentMap, props) : props.children ? /*#__PURE__*/React.createElement(EnvironmentPortal, props) : /*#__PURE__*/React.createElement(EnvironmentCube, props);\n}\n\nexport { Environment, EnvironmentCube, EnvironmentMap, EnvironmentPortal, useEnvironment };\n","import { ShaderMaterial, Uniform, Vector2, NoBlending } from 'three';\n\nclass ConvolutionMaterial extends ShaderMaterial {\n  constructor(texelSize = new Vector2()) {\n    super({\n      uniforms: {\n        inputBuffer: new Uniform(null),\n        depthBuffer: new Uniform(null),\n        resolution: new Uniform(new Vector2()),\n        texelSize: new Uniform(new Vector2()),\n        halfTexelSize: new Uniform(new Vector2()),\n        kernel: new Uniform(0.0),\n        scale: new Uniform(1.0),\n        cameraNear: new Uniform(0.0),\n        cameraFar: new Uniform(1.0),\n        minDepthThreshold: new Uniform(0.0),\n        maxDepthThreshold: new Uniform(1.0),\n        depthScale: new Uniform(0.0),\n        depthToBlurRatioBias: new Uniform(0.25)\n      },\n      fragmentShader: `#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <encodings_fragment>\n        }`,\n      vertexShader: `uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }`,\n      blending: NoBlending,\n      depthWrite: false,\n      depthTest: false\n    });\n    this.toneMapped = false;\n    this.setTexelSize(texelSize.x, texelSize.y);\n    this.kernel = new Float32Array([0.0, 1.0, 2.0, 2.0, 3.0]);\n  }\n\n  setTexelSize(x, y) {\n    this.uniforms.texelSize.value.set(x, y);\n    this.uniforms.halfTexelSize.value.set(x, y).multiplyScalar(0.5);\n  }\n\n  setResolution(resolution) {\n    this.uniforms.resolution.value.copy(resolution);\n  }\n\n}\n\nexport { ConvolutionMaterial };\n","import { WebGLRenderTarget, LinearFilter, Vector2, Scene, Camera, BufferGeometry, BufferAttribute, Mesh } from 'three';\nimport { ConvolutionMaterial } from './ConvolutionMaterial.js';\n\nclass BlurPass {\n  constructor({\n    gl,\n    resolution,\n    width = 500,\n    height = 500,\n    minDepthThreshold = 0,\n    maxDepthThreshold = 1,\n    depthScale = 0,\n    depthToBlurRatioBias = 0.25\n  }) {\n    this.renderToScreen = false;\n    this.renderTargetA = new WebGLRenderTarget(resolution, resolution, {\n      minFilter: LinearFilter,\n      magFilter: LinearFilter,\n      stencilBuffer: false,\n      depthBuffer: false,\n      encoding: gl.outputEncoding\n    });\n    this.renderTargetB = this.renderTargetA.clone();\n    this.convolutionMaterial = new ConvolutionMaterial();\n    this.convolutionMaterial.setTexelSize(1.0 / width, 1.0 / height);\n    this.convolutionMaterial.setResolution(new Vector2(width, height));\n    this.scene = new Scene();\n    this.camera = new Camera();\n    this.convolutionMaterial.uniforms.minDepthThreshold.value = minDepthThreshold;\n    this.convolutionMaterial.uniforms.maxDepthThreshold.value = maxDepthThreshold;\n    this.convolutionMaterial.uniforms.depthScale.value = depthScale;\n    this.convolutionMaterial.uniforms.depthToBlurRatioBias.value = depthToBlurRatioBias;\n    this.convolutionMaterial.defines.USE_DEPTH = depthScale > 0;\n    const vertices = new Float32Array([-1, -1, 0, 3, -1, 0, -1, 3, 0]);\n    const uvs = new Float32Array([0, 0, 2, 0, 0, 2]);\n    const geometry = new BufferGeometry();\n    geometry.setAttribute('position', new BufferAttribute(vertices, 3));\n    geometry.setAttribute('uv', new BufferAttribute(uvs, 2));\n    this.screen = new Mesh(geometry, this.convolutionMaterial);\n    this.screen.frustumCulled = false;\n    this.scene.add(this.screen);\n  }\n\n  render(renderer, inputBuffer, outputBuffer) {\n    const scene = this.scene;\n    const camera = this.camera;\n    const renderTargetA = this.renderTargetA;\n    const renderTargetB = this.renderTargetB;\n    let material = this.convolutionMaterial;\n    let uniforms = material.uniforms;\n    uniforms.depthBuffer.value = inputBuffer.depthTexture;\n    const kernel = material.kernel;\n    let lastRT = inputBuffer;\n    let destRT;\n    let i, l; // Apply the multi-pass blur.\n\n    for (i = 0, l = kernel.length - 1; i < l; ++i) {\n      // Alternate between targets.\n      destRT = (i & 1) === 0 ? renderTargetA : renderTargetB;\n      uniforms.kernel.value = kernel[i];\n      uniforms.inputBuffer.value = lastRT.texture;\n      renderer.setRenderTarget(destRT);\n      renderer.render(scene, camera);\n      lastRT = destRT;\n    }\n\n    uniforms.kernel.value = kernel[i];\n    uniforms.inputBuffer.value = lastRT.texture;\n    renderer.setRenderTarget(this.renderToScreen ? null : outputBuffer);\n    renderer.render(scene, camera);\n  }\n\n}\n\nexport { BlurPass };\n","import { MeshStandardMaterial } from 'three';\n\nclass MeshReflectorMaterial extends MeshStandardMaterial {\n  constructor(parameters = {}) {\n    super(parameters);\n    this._tDepth = {\n      value: null\n    };\n    this._distortionMap = {\n      value: null\n    };\n    this._tDiffuse = {\n      value: null\n    };\n    this._tDiffuseBlur = {\n      value: null\n    };\n    this._textureMatrix = {\n      value: null\n    };\n    this._hasBlur = {\n      value: false\n    };\n    this._mirror = {\n      value: 0.0\n    };\n    this._mixBlur = {\n      value: 0.0\n    };\n    this._blurStrength = {\n      value: 0.5\n    };\n    this._minDepthThreshold = {\n      value: 0.9\n    };\n    this._maxDepthThreshold = {\n      value: 1\n    };\n    this._depthScale = {\n      value: 0\n    };\n    this._depthToBlurRatioBias = {\n      value: 0.25\n    };\n    this._distortion = {\n      value: 1\n    };\n    this._mixContrast = {\n      value: 1.0\n    };\n    this.setValues(parameters);\n  }\n\n  onBeforeCompile(shader) {\n    var _shader$defines;\n\n    if (!((_shader$defines = shader.defines) != null && _shader$defines.USE_UV)) {\n      shader.defines.USE_UV = '';\n    }\n\n    shader.uniforms.hasBlur = this._hasBlur;\n    shader.uniforms.tDiffuse = this._tDiffuse;\n    shader.uniforms.tDepth = this._tDepth;\n    shader.uniforms.distortionMap = this._distortionMap;\n    shader.uniforms.tDiffuseBlur = this._tDiffuseBlur;\n    shader.uniforms.textureMatrix = this._textureMatrix;\n    shader.uniforms.mirror = this._mirror;\n    shader.uniforms.mixBlur = this._mixBlur;\n    shader.uniforms.mixStrength = this._blurStrength;\n    shader.uniforms.minDepthThreshold = this._minDepthThreshold;\n    shader.uniforms.maxDepthThreshold = this._maxDepthThreshold;\n    shader.uniforms.depthScale = this._depthScale;\n    shader.uniforms.depthToBlurRatioBias = this._depthToBlurRatioBias;\n    shader.uniforms.distortion = this._distortion;\n    shader.uniforms.mixContrast = this._mixContrast;\n    shader.vertexShader = `\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ${shader.vertexShader}`;\n    shader.vertexShader = shader.vertexShader.replace('#include <project_vertex>', `#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );`);\n    shader.fragmentShader = `\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ${shader.fragmentShader}`;\n    shader.fragmentShader = shader.fragmentShader.replace('#include <emissivemap_fragment>', `#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      `);\n  }\n\n  get tDiffuse() {\n    return this._tDiffuse.value;\n  }\n\n  set tDiffuse(v) {\n    this._tDiffuse.value = v;\n  }\n\n  get tDepth() {\n    return this._tDepth.value;\n  }\n\n  set tDepth(v) {\n    this._tDepth.value = v;\n  }\n\n  get distortionMap() {\n    return this._distortionMap.value;\n  }\n\n  set distortionMap(v) {\n    this._distortionMap.value = v;\n  }\n\n  get tDiffuseBlur() {\n    return this._tDiffuseBlur.value;\n  }\n\n  set tDiffuseBlur(v) {\n    this._tDiffuseBlur.value = v;\n  }\n\n  get textureMatrix() {\n    return this._textureMatrix.value;\n  }\n\n  set textureMatrix(v) {\n    this._textureMatrix.value = v;\n  }\n\n  get hasBlur() {\n    return this._hasBlur.value;\n  }\n\n  set hasBlur(v) {\n    this._hasBlur.value = v;\n  }\n\n  get mirror() {\n    return this._mirror.value;\n  }\n\n  set mirror(v) {\n    this._mirror.value = v;\n  }\n\n  get mixBlur() {\n    return this._mixBlur.value;\n  }\n\n  set mixBlur(v) {\n    this._mixBlur.value = v;\n  }\n\n  get mixStrength() {\n    return this._blurStrength.value;\n  }\n\n  set mixStrength(v) {\n    this._blurStrength.value = v;\n  }\n\n  get minDepthThreshold() {\n    return this._minDepthThreshold.value;\n  }\n\n  set minDepthThreshold(v) {\n    this._minDepthThreshold.value = v;\n  }\n\n  get maxDepthThreshold() {\n    return this._maxDepthThreshold.value;\n  }\n\n  set maxDepthThreshold(v) {\n    this._maxDepthThreshold.value = v;\n  }\n\n  get depthScale() {\n    return this._depthScale.value;\n  }\n\n  set depthScale(v) {\n    this._depthScale.value = v;\n  }\n\n  get depthToBlurRatioBias() {\n    return this._depthToBlurRatioBias.value;\n  }\n\n  set depthToBlurRatioBias(v) {\n    this._depthToBlurRatioBias.value = v;\n  }\n\n  get distortion() {\n    return this._distortion.value;\n  }\n\n  set distortion(v) {\n    this._distortion.value = v;\n  }\n\n  get mixContrast() {\n    return this._mixContrast.value;\n  }\n\n  set mixContrast(v) {\n    this._mixContrast.value = v;\n  }\n\n}\n\nexport { MeshReflectorMaterial };\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport { Plane, Vector3, Matrix4, Vector4, PerspectiveCamera, LinearFilter, HalfFloatType, WebGLRenderTarget, DepthTexture, DepthFormat, UnsignedShortType } from 'three';\nimport { extend, useThree, useFrame } from '@react-three/fiber';\nimport mergeRefs from 'react-merge-refs';\nimport { BlurPass } from '../materials/BlurPass.js';\nimport { MeshReflectorMaterial as MeshReflectorMaterial$1 } from '../materials/MeshReflectorMaterial.js';\n\nextend({\n  MeshReflectorMaterialImpl: MeshReflectorMaterial$1\n});\nconst MeshReflectorMaterial = /*#__PURE__*/React.forwardRef(({\n  mixBlur = 0,\n  mixStrength = 1,\n  resolution = 256,\n  blur = [0, 0],\n  minDepthThreshold = 0.9,\n  maxDepthThreshold = 1,\n  depthScale = 0,\n  depthToBlurRatioBias = 0.25,\n  mirror = 0,\n  distortion = 1,\n  mixContrast = 1,\n  distortionMap,\n  reflectorOffset = 0,\n  ...props\n}, ref) => {\n  const gl = useThree(({\n    gl\n  }) => gl);\n  const camera = useThree(({\n    camera\n  }) => camera);\n  const scene = useThree(({\n    scene\n  }) => scene);\n  blur = Array.isArray(blur) ? blur : [blur, blur];\n  const hasBlur = blur[0] + blur[1] > 0;\n  const materialRef = React.useRef(null);\n  const [reflectorPlane] = React.useState(() => new Plane());\n  const [normal] = React.useState(() => new Vector3());\n  const [reflectorWorldPosition] = React.useState(() => new Vector3());\n  const [cameraWorldPosition] = React.useState(() => new Vector3());\n  const [rotationMatrix] = React.useState(() => new Matrix4());\n  const [lookAtPosition] = React.useState(() => new Vector3(0, 0, -1));\n  const [clipPlane] = React.useState(() => new Vector4());\n  const [view] = React.useState(() => new Vector3());\n  const [target] = React.useState(() => new Vector3());\n  const [q] = React.useState(() => new Vector4());\n  const [textureMatrix] = React.useState(() => new Matrix4());\n  const [virtualCamera] = React.useState(() => new PerspectiveCamera());\n  const beforeRender = React.useCallback(() => {\n    var _materialRef$current;\n\n    // TODO: As of R3f 7-8 this should be __r3f.parent\n    const parent = materialRef.current.parent || ((_materialRef$current = materialRef.current) == null ? void 0 : _materialRef$current.__r3f.parent);\n    if (!parent) return;\n    reflectorWorldPosition.setFromMatrixPosition(parent.matrixWorld);\n    cameraWorldPosition.setFromMatrixPosition(camera.matrixWorld);\n    rotationMatrix.extractRotation(parent.matrixWorld);\n    normal.set(0, 0, 1);\n    normal.applyMatrix4(rotationMatrix);\n    reflectorWorldPosition.addScaledVector(normal, reflectorOffset);\n    view.subVectors(reflectorWorldPosition, cameraWorldPosition); // Avoid rendering when reflector is facing away\n\n    if (view.dot(normal) > 0) return;\n    view.reflect(normal).negate();\n    view.add(reflectorWorldPosition);\n    rotationMatrix.extractRotation(camera.matrixWorld);\n    lookAtPosition.set(0, 0, -1);\n    lookAtPosition.applyMatrix4(rotationMatrix);\n    lookAtPosition.add(cameraWorldPosition);\n    target.subVectors(reflectorWorldPosition, lookAtPosition);\n    target.reflect(normal).negate();\n    target.add(reflectorWorldPosition);\n    virtualCamera.position.copy(view);\n    virtualCamera.up.set(0, 1, 0);\n    virtualCamera.up.applyMatrix4(rotationMatrix);\n    virtualCamera.up.reflect(normal);\n    virtualCamera.lookAt(target);\n    virtualCamera.far = camera.far; // Used in WebGLBackground\n\n    virtualCamera.updateMatrixWorld();\n    virtualCamera.projectionMatrix.copy(camera.projectionMatrix); // Update the texture matrix\n\n    textureMatrix.set(0.5, 0.0, 0.0, 0.5, 0.0, 0.5, 0.0, 0.5, 0.0, 0.0, 0.5, 0.5, 0.0, 0.0, 0.0, 1.0);\n    textureMatrix.multiply(virtualCamera.projectionMatrix);\n    textureMatrix.multiply(virtualCamera.matrixWorldInverse);\n    textureMatrix.multiply(parent.matrixWorld); // Now update projection matrix with new clip plane, implementing code from: http://www.terathon.com/code/oblique.html\n    // Paper explaining this technique: http://www.terathon.com/lengyel/Lengyel-Oblique.pdf\n\n    reflectorPlane.setFromNormalAndCoplanarPoint(normal, reflectorWorldPosition);\n    reflectorPlane.applyMatrix4(virtualCamera.matrixWorldInverse);\n    clipPlane.set(reflectorPlane.normal.x, reflectorPlane.normal.y, reflectorPlane.normal.z, reflectorPlane.constant);\n    const projectionMatrix = virtualCamera.projectionMatrix;\n    q.x = (Math.sign(clipPlane.x) + projectionMatrix.elements[8]) / projectionMatrix.elements[0];\n    q.y = (Math.sign(clipPlane.y) + projectionMatrix.elements[9]) / projectionMatrix.elements[5];\n    q.z = -1.0;\n    q.w = (1.0 + projectionMatrix.elements[10]) / projectionMatrix.elements[14]; // Calculate the scaled plane vector\n\n    clipPlane.multiplyScalar(2.0 / clipPlane.dot(q)); // Replacing the third row of the projection matrix\n\n    projectionMatrix.elements[2] = clipPlane.x;\n    projectionMatrix.elements[6] = clipPlane.y;\n    projectionMatrix.elements[10] = clipPlane.z + 1.0;\n    projectionMatrix.elements[14] = clipPlane.w;\n  }, [camera, reflectorOffset]);\n  const [fbo1, fbo2, blurpass, reflectorProps] = React.useMemo(() => {\n    const parameters = {\n      minFilter: LinearFilter,\n      magFilter: LinearFilter,\n      encoding: gl.outputEncoding,\n      type: HalfFloatType\n    };\n    const fbo1 = new WebGLRenderTarget(resolution, resolution, parameters);\n    fbo1.depthBuffer = true;\n    fbo1.depthTexture = new DepthTexture(resolution, resolution);\n    fbo1.depthTexture.format = DepthFormat;\n    fbo1.depthTexture.type = UnsignedShortType;\n    const fbo2 = new WebGLRenderTarget(resolution, resolution, parameters);\n    const blurpass = new BlurPass({\n      gl,\n      resolution,\n      width: blur[0],\n      height: blur[1],\n      minDepthThreshold,\n      maxDepthThreshold,\n      depthScale,\n      depthToBlurRatioBias\n    });\n    const reflectorProps = {\n      mirror,\n      textureMatrix,\n      mixBlur,\n      tDiffuse: fbo1.texture,\n      tDepth: fbo1.depthTexture,\n      tDiffuseBlur: fbo2.texture,\n      hasBlur,\n      mixStrength,\n      minDepthThreshold,\n      maxDepthThreshold,\n      depthScale,\n      depthToBlurRatioBias,\n      distortion,\n      distortionMap,\n      mixContrast,\n      'defines-USE_BLUR': hasBlur ? '' : undefined,\n      'defines-USE_DEPTH': depthScale > 0 ? '' : undefined,\n      'defines-USE_DISTORTION': distortionMap ? '' : undefined\n    };\n    return [fbo1, fbo2, blurpass, reflectorProps];\n  }, [gl, blur, textureMatrix, resolution, mirror, hasBlur, mixBlur, mixStrength, minDepthThreshold, maxDepthThreshold, depthScale, depthToBlurRatioBias, distortion, distortionMap, mixContrast]);\n  useFrame(() => {\n    var _materialRef$current2;\n\n    // TODO: As of R3f 7-8 this should be __r3f.parent\n    const parent = materialRef.current.parent || ((_materialRef$current2 = materialRef.current) == null ? void 0 : _materialRef$current2.__r3f.parent);\n    if (!parent) return;\n    parent.visible = false;\n    const currentXrEnabled = gl.xr.enabled;\n    const currentShadowAutoUpdate = gl.shadowMap.autoUpdate;\n    beforeRender();\n    gl.xr.enabled = false;\n    gl.shadowMap.autoUpdate = false;\n    gl.setRenderTarget(fbo1);\n    gl.state.buffers.depth.setMask(true);\n    if (!gl.autoClear) gl.clear();\n    gl.render(scene, virtualCamera);\n    if (hasBlur) blurpass.render(gl, fbo1, fbo2);\n    gl.xr.enabled = currentXrEnabled;\n    gl.shadowMap.autoUpdate = currentShadowAutoUpdate;\n    parent.visible = true;\n    gl.setRenderTarget(null);\n  });\n  return /*#__PURE__*/React.createElement(\"meshReflectorMaterialImpl\", _extends({\n    attach: \"material\" // Defines can't be updated dynamically, so we need to recreate the material\n    ,\n    key: 'key' + reflectorProps['defines-USE_BLUR'] + reflectorProps['defines-USE_DEPTH'] + reflectorProps['defines-USE_DISTORTION'],\n    ref: mergeRefs([materialRef, ref])\n  }, reflectorProps, props));\n});\n\nexport { MeshReflectorMaterial };\n","var __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nimport { EventDispatcher, Vector3, MOUSE, TOUCH, Quaternion, Spherical, Vector2, PerspectiveCamera, OrthographicCamera } from \"three\";\nconst moduloWrapAround = (offset, capacity) => (offset % capacity + capacity) % capacity;\nclass OrbitControls extends EventDispatcher {\n  constructor(object, domElement) {\n    super();\n    __publicField(this, \"object\");\n    __publicField(this, \"domElement\");\n    // Set to false to disable this control\n    __publicField(this, \"enabled\", true);\n    // \"target\" sets the location of focus, where the object orbits around\n    __publicField(this, \"target\", new Vector3());\n    // How far you can dolly in and out ( PerspectiveCamera only )\n    __publicField(this, \"minDistance\", 0);\n    __publicField(this, \"maxDistance\", Infinity);\n    // How far you can zoom in and out ( OrthographicCamera only )\n    __publicField(this, \"minZoom\", 0);\n    __publicField(this, \"maxZoom\", Infinity);\n    // How far you can orbit vertically, upper and lower limits.\n    // Range is 0 to Math.PI radians.\n    __publicField(this, \"minPolarAngle\", 0);\n    // radians\n    __publicField(this, \"maxPolarAngle\", Math.PI);\n    // radians\n    // How far you can orbit horizontally, upper and lower limits.\n    // If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )\n    __publicField(this, \"minAzimuthAngle\", -Infinity);\n    // radians\n    __publicField(this, \"maxAzimuthAngle\", Infinity);\n    // radians\n    // Set to true to enable damping (inertia)\n    // If damping is enabled, you must call controls.update() in your animation loop\n    __publicField(this, \"enableDamping\", false);\n    __publicField(this, \"dampingFactor\", 0.05);\n    // This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n    // Set to false to disable zooming\n    __publicField(this, \"enableZoom\", true);\n    __publicField(this, \"zoomSpeed\", 1);\n    // Set to false to disable rotating\n    __publicField(this, \"enableRotate\", true);\n    __publicField(this, \"rotateSpeed\", 1);\n    // Set to false to disable panning\n    __publicField(this, \"enablePan\", true);\n    __publicField(this, \"panSpeed\", 1);\n    __publicField(this, \"screenSpacePanning\", true);\n    // if false, pan orthogonal to world-space direction camera.up\n    __publicField(this, \"keyPanSpeed\", 7);\n    // pixels moved per arrow key push\n    // Set to true to automatically rotate around the target\n    // If auto-rotate is enabled, you must call controls.update() in your animation loop\n    __publicField(this, \"autoRotate\", false);\n    __publicField(this, \"autoRotateSpeed\", 2);\n    // 30 seconds per orbit when fps is 60\n    __publicField(this, \"reverseOrbit\", false);\n    // true if you want to reverse the orbit to mouse drag from left to right = orbits left\n    __publicField(this, \"reverseHorizontalOrbit\", false);\n    // true if you want to reverse the horizontal orbit direction\n    __publicField(this, \"reverseVerticalOrbit\", false);\n    // true if you want to reverse the vertical orbit direction\n    // The four arrow keys\n    __publicField(this, \"keys\", { LEFT: \"ArrowLeft\", UP: \"ArrowUp\", RIGHT: \"ArrowRight\", BOTTOM: \"ArrowDown\" });\n    // Mouse buttons\n    __publicField(this, \"mouseButtons\", {\n      LEFT: MOUSE.ROTATE,\n      MIDDLE: MOUSE.DOLLY,\n      RIGHT: MOUSE.PAN\n    });\n    // Touch fingers\n    __publicField(this, \"touches\", { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN });\n    __publicField(this, \"target0\");\n    __publicField(this, \"position0\");\n    __publicField(this, \"zoom0\");\n    // the target DOM element for key events\n    __publicField(this, \"_domElementKeyEvents\", null);\n    __publicField(this, \"getPolarAngle\");\n    __publicField(this, \"getAzimuthalAngle\");\n    __publicField(this, \"setPolarAngle\");\n    __publicField(this, \"setAzimuthalAngle\");\n    __publicField(this, \"getDistance\");\n    __publicField(this, \"listenToKeyEvents\");\n    __publicField(this, \"stopListenToKeyEvents\");\n    __publicField(this, \"saveState\");\n    __publicField(this, \"reset\");\n    __publicField(this, \"update\");\n    __publicField(this, \"connect\");\n    __publicField(this, \"dispose\");\n    this.object = object;\n    this.domElement = domElement;\n    this.target0 = this.target.clone();\n    this.position0 = this.object.position.clone();\n    this.zoom0 = this.object.zoom;\n    this.getPolarAngle = () => spherical.phi;\n    this.getAzimuthalAngle = () => spherical.theta;\n    this.setPolarAngle = (value) => {\n      let phi = moduloWrapAround(value, 2 * Math.PI);\n      let currentPhi = spherical.phi;\n      if (currentPhi < 0)\n        currentPhi += 2 * Math.PI;\n      if (phi < 0)\n        phi += 2 * Math.PI;\n      let phiDist = Math.abs(phi - currentPhi);\n      if (2 * Math.PI - phiDist < phiDist) {\n        if (phi < currentPhi) {\n          phi += 2 * Math.PI;\n        } else {\n          currentPhi += 2 * Math.PI;\n        }\n      }\n      sphericalDelta.phi = phi - currentPhi;\n      scope.update();\n    };\n    this.setAzimuthalAngle = (value) => {\n      let theta = moduloWrapAround(value, 2 * Math.PI);\n      let currentTheta = spherical.theta;\n      if (currentTheta < 0)\n        currentTheta += 2 * Math.PI;\n      if (theta < 0)\n        theta += 2 * Math.PI;\n      let thetaDist = Math.abs(theta - currentTheta);\n      if (2 * Math.PI - thetaDist < thetaDist) {\n        if (theta < currentTheta) {\n          theta += 2 * Math.PI;\n        } else {\n          currentTheta += 2 * Math.PI;\n        }\n      }\n      sphericalDelta.theta = theta - currentTheta;\n      scope.update();\n    };\n    this.getDistance = () => scope.object.position.distanceTo(scope.target);\n    this.listenToKeyEvents = (domElement2) => {\n      domElement2.addEventListener(\"keydown\", onKeyDown);\n      this._domElementKeyEvents = domElement2;\n    };\n    this.stopListenToKeyEvents = () => {\n      this._domElementKeyEvents.removeEventListener(\"keydown\", onKeyDown);\n      this._domElementKeyEvents = null;\n    };\n    this.saveState = () => {\n      scope.target0.copy(scope.target);\n      scope.position0.copy(scope.object.position);\n      scope.zoom0 = scope.object.zoom;\n    };\n    this.reset = () => {\n      scope.target.copy(scope.target0);\n      scope.object.position.copy(scope.position0);\n      scope.object.zoom = scope.zoom0;\n      scope.object.updateProjectionMatrix();\n      scope.dispatchEvent(changeEvent);\n      scope.update();\n      state = STATE.NONE;\n    };\n    this.update = (() => {\n      const offset = new Vector3();\n      const up = new Vector3(0, 1, 0);\n      const quat = new Quaternion().setFromUnitVectors(object.up, up);\n      const quatInverse = quat.clone().invert();\n      const lastPosition = new Vector3();\n      const lastQuaternion = new Quaternion();\n      const twoPI = 2 * Math.PI;\n      return function update() {\n        const position = scope.object.position;\n        quat.setFromUnitVectors(object.up, up);\n        quatInverse.copy(quat).invert();\n        offset.copy(position).sub(scope.target);\n        offset.applyQuaternion(quat);\n        spherical.setFromVector3(offset);\n        if (scope.autoRotate && state === STATE.NONE) {\n          rotateLeft(getAutoRotationAngle());\n        }\n        if (scope.enableDamping) {\n          spherical.theta += sphericalDelta.theta * scope.dampingFactor;\n          spherical.phi += sphericalDelta.phi * scope.dampingFactor;\n        } else {\n          spherical.theta += sphericalDelta.theta;\n          spherical.phi += sphericalDelta.phi;\n        }\n        let min = scope.minAzimuthAngle;\n        let max = scope.maxAzimuthAngle;\n        if (isFinite(min) && isFinite(max)) {\n          if (min < -Math.PI)\n            min += twoPI;\n          else if (min > Math.PI)\n            min -= twoPI;\n          if (max < -Math.PI)\n            max += twoPI;\n          else if (max > Math.PI)\n            max -= twoPI;\n          if (min <= max) {\n            spherical.theta = Math.max(min, Math.min(max, spherical.theta));\n          } else {\n            spherical.theta = spherical.theta > (min + max) / 2 ? Math.max(min, spherical.theta) : Math.min(max, spherical.theta);\n          }\n        }\n        spherical.phi = Math.max(scope.minPolarAngle, Math.min(scope.maxPolarAngle, spherical.phi));\n        spherical.makeSafe();\n        spherical.radius *= scale;\n        spherical.radius = Math.max(scope.minDistance, Math.min(scope.maxDistance, spherical.radius));\n        if (scope.enableDamping === true) {\n          scope.target.addScaledVector(panOffset, scope.dampingFactor);\n        } else {\n          scope.target.add(panOffset);\n        }\n        offset.setFromSpherical(spherical);\n        offset.applyQuaternion(quatInverse);\n        position.copy(scope.target).add(offset);\n        scope.object.lookAt(scope.target);\n        if (scope.enableDamping === true) {\n          sphericalDelta.theta *= 1 - scope.dampingFactor;\n          sphericalDelta.phi *= 1 - scope.dampingFactor;\n          panOffset.multiplyScalar(1 - scope.dampingFactor);\n        } else {\n          sphericalDelta.set(0, 0, 0);\n          panOffset.set(0, 0, 0);\n        }\n        scale = 1;\n        if (zoomChanged || lastPosition.distanceToSquared(scope.object.position) > EPS || 8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS) {\n          scope.dispatchEvent(changeEvent);\n          lastPosition.copy(scope.object.position);\n          lastQuaternion.copy(scope.object.quaternion);\n          zoomChanged = false;\n          return true;\n        }\n        return false;\n      };\n    })();\n    this.connect = (domElement2) => {\n      if (domElement2 === document) {\n        console.error(\n          'THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.'\n        );\n      }\n      scope.domElement = domElement2;\n      scope.domElement.style.touchAction = \"none\";\n      scope.domElement.addEventListener(\"contextmenu\", onContextMenu);\n      scope.domElement.addEventListener(\"pointerdown\", onPointerDown);\n      scope.domElement.addEventListener(\"pointercancel\", onPointerCancel);\n      scope.domElement.addEventListener(\"wheel\", onMouseWheel);\n    };\n    this.dispose = () => {\n      var _a, _b, _c, _d, _e, _f;\n      (_a = scope.domElement) == null ? void 0 : _a.removeEventListener(\"contextmenu\", onContextMenu);\n      (_b = scope.domElement) == null ? void 0 : _b.removeEventListener(\"pointerdown\", onPointerDown);\n      (_c = scope.domElement) == null ? void 0 : _c.removeEventListener(\"pointercancel\", onPointerCancel);\n      (_d = scope.domElement) == null ? void 0 : _d.removeEventListener(\"wheel\", onMouseWheel);\n      (_e = scope.domElement) == null ? void 0 : _e.ownerDocument.removeEventListener(\"pointermove\", onPointerMove);\n      (_f = scope.domElement) == null ? void 0 : _f.ownerDocument.removeEventListener(\"pointerup\", onPointerUp);\n      if (scope._domElementKeyEvents !== null) {\n        scope._domElementKeyEvents.removeEventListener(\"keydown\", onKeyDown);\n      }\n    };\n    const scope = this;\n    const changeEvent = { type: \"change\" };\n    const startEvent = { type: \"start\" };\n    const endEvent = { type: \"end\" };\n    const STATE = {\n      NONE: -1,\n      ROTATE: 0,\n      DOLLY: 1,\n      PAN: 2,\n      TOUCH_ROTATE: 3,\n      TOUCH_PAN: 4,\n      TOUCH_DOLLY_PAN: 5,\n      TOUCH_DOLLY_ROTATE: 6\n    };\n    let state = STATE.NONE;\n    const EPS = 1e-6;\n    const spherical = new Spherical();\n    const sphericalDelta = new Spherical();\n    let scale = 1;\n    const panOffset = new Vector3();\n    let zoomChanged = false;\n    const rotateStart = new Vector2();\n    const rotateEnd = new Vector2();\n    const rotateDelta = new Vector2();\n    const panStart = new Vector2();\n    const panEnd = new Vector2();\n    const panDelta = new Vector2();\n    const dollyStart = new Vector2();\n    const dollyEnd = new Vector2();\n    const dollyDelta = new Vector2();\n    const pointers = [];\n    const pointerPositions = {};\n    function getAutoRotationAngle() {\n      return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n    }\n    function getZoomScale() {\n      return Math.pow(0.95, scope.zoomSpeed);\n    }\n    function rotateLeft(angle) {\n      if (scope.reverseOrbit || scope.reverseHorizontalOrbit) {\n        sphericalDelta.theta += angle;\n      } else {\n        sphericalDelta.theta -= angle;\n      }\n    }\n    function rotateUp(angle) {\n      if (scope.reverseOrbit || scope.reverseVerticalOrbit) {\n        sphericalDelta.phi += angle;\n      } else {\n        sphericalDelta.phi -= angle;\n      }\n    }\n    const panLeft = (() => {\n      const v = new Vector3();\n      return function panLeft2(distance, objectMatrix) {\n        v.setFromMatrixColumn(objectMatrix, 0);\n        v.multiplyScalar(-distance);\n        panOffset.add(v);\n      };\n    })();\n    const panUp = (() => {\n      const v = new Vector3();\n      return function panUp2(distance, objectMatrix) {\n        if (scope.screenSpacePanning === true) {\n          v.setFromMatrixColumn(objectMatrix, 1);\n        } else {\n          v.setFromMatrixColumn(objectMatrix, 0);\n          v.crossVectors(scope.object.up, v);\n        }\n        v.multiplyScalar(distance);\n        panOffset.add(v);\n      };\n    })();\n    const pan = (() => {\n      const offset = new Vector3();\n      return function pan2(deltaX, deltaY) {\n        const element = scope.domElement;\n        if (element && scope.object instanceof PerspectiveCamera && scope.object.isPerspectiveCamera) {\n          const position = scope.object.position;\n          offset.copy(position).sub(scope.target);\n          let targetDistance = offset.length();\n          targetDistance *= Math.tan(scope.object.fov / 2 * Math.PI / 180);\n          panLeft(2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix);\n          panUp(2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix);\n        } else if (element && scope.object instanceof OrthographicCamera && scope.object.isOrthographicCamera) {\n          panLeft(\n            deltaX * (scope.object.right - scope.object.left) / scope.object.zoom / element.clientWidth,\n            scope.object.matrix\n          );\n          panUp(\n            deltaY * (scope.object.top - scope.object.bottom) / scope.object.zoom / element.clientHeight,\n            scope.object.matrix\n          );\n        } else {\n          console.warn(\"WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.\");\n          scope.enablePan = false;\n        }\n      };\n    })();\n    function dollyOut(dollyScale) {\n      if (scope.object instanceof PerspectiveCamera && scope.object.isPerspectiveCamera) {\n        scale /= dollyScale;\n      } else if (scope.object instanceof OrthographicCamera && scope.object.isOrthographicCamera) {\n        scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom * dollyScale));\n        scope.object.updateProjectionMatrix();\n        zoomChanged = true;\n      } else {\n        console.warn(\"WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.\");\n        scope.enableZoom = false;\n      }\n    }\n    function dollyIn(dollyScale) {\n      if (scope.object instanceof PerspectiveCamera && scope.object.isPerspectiveCamera) {\n        scale *= dollyScale;\n      } else if (scope.object instanceof OrthographicCamera && scope.object.isOrthographicCamera) {\n        scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom / dollyScale));\n        scope.object.updateProjectionMatrix();\n        zoomChanged = true;\n      } else {\n        console.warn(\"WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.\");\n        scope.enableZoom = false;\n      }\n    }\n    function handleMouseDownRotate(event) {\n      rotateStart.set(event.clientX, event.clientY);\n    }\n    function handleMouseDownDolly(event) {\n      dollyStart.set(event.clientX, event.clientY);\n    }\n    function handleMouseDownPan(event) {\n      panStart.set(event.clientX, event.clientY);\n    }\n    function handleMouseMoveRotate(event) {\n      rotateEnd.set(event.clientX, event.clientY);\n      rotateDelta.subVectors(rotateEnd, rotateStart).multiplyScalar(scope.rotateSpeed);\n      const element = scope.domElement;\n      if (element) {\n        rotateLeft(2 * Math.PI * rotateDelta.x / element.clientHeight);\n        rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight);\n      }\n      rotateStart.copy(rotateEnd);\n      scope.update();\n    }\n    function handleMouseMoveDolly(event) {\n      dollyEnd.set(event.clientX, event.clientY);\n      dollyDelta.subVectors(dollyEnd, dollyStart);\n      if (dollyDelta.y > 0) {\n        dollyOut(getZoomScale());\n      } else if (dollyDelta.y < 0) {\n        dollyIn(getZoomScale());\n      }\n      dollyStart.copy(dollyEnd);\n      scope.update();\n    }\n    function handleMouseMovePan(event) {\n      panEnd.set(event.clientX, event.clientY);\n      panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\n      pan(panDelta.x, panDelta.y);\n      panStart.copy(panEnd);\n      scope.update();\n    }\n    function handleMouseWheel(event) {\n      if (event.deltaY < 0) {\n        dollyIn(getZoomScale());\n      } else if (event.deltaY > 0) {\n        dollyOut(getZoomScale());\n      }\n      scope.update();\n    }\n    function handleKeyDown(event) {\n      let needsUpdate = false;\n      switch (event.code) {\n        case scope.keys.UP:\n          pan(0, scope.keyPanSpeed);\n          needsUpdate = true;\n          break;\n        case scope.keys.BOTTOM:\n          pan(0, -scope.keyPanSpeed);\n          needsUpdate = true;\n          break;\n        case scope.keys.LEFT:\n          pan(scope.keyPanSpeed, 0);\n          needsUpdate = true;\n          break;\n        case scope.keys.RIGHT:\n          pan(-scope.keyPanSpeed, 0);\n          needsUpdate = true;\n          break;\n      }\n      if (needsUpdate) {\n        event.preventDefault();\n        scope.update();\n      }\n    }\n    function handleTouchStartRotate() {\n      if (pointers.length == 1) {\n        rotateStart.set(pointers[0].pageX, pointers[0].pageY);\n      } else {\n        const x = 0.5 * (pointers[0].pageX + pointers[1].pageX);\n        const y = 0.5 * (pointers[0].pageY + pointers[1].pageY);\n        rotateStart.set(x, y);\n      }\n    }\n    function handleTouchStartPan() {\n      if (pointers.length == 1) {\n        panStart.set(pointers[0].pageX, pointers[0].pageY);\n      } else {\n        const x = 0.5 * (pointers[0].pageX + pointers[1].pageX);\n        const y = 0.5 * (pointers[0].pageY + pointers[1].pageY);\n        panStart.set(x, y);\n      }\n    }\n    function handleTouchStartDolly() {\n      const dx = pointers[0].pageX - pointers[1].pageX;\n      const dy = pointers[0].pageY - pointers[1].pageY;\n      const distance = Math.sqrt(dx * dx + dy * dy);\n      dollyStart.set(0, distance);\n    }\n    function handleTouchStartDollyPan() {\n      if (scope.enableZoom)\n        handleTouchStartDolly();\n      if (scope.enablePan)\n        handleTouchStartPan();\n    }\n    function handleTouchStartDollyRotate() {\n      if (scope.enableZoom)\n        handleTouchStartDolly();\n      if (scope.enableRotate)\n        handleTouchStartRotate();\n    }\n    function handleTouchMoveRotate(event) {\n      if (pointers.length == 1) {\n        rotateEnd.set(event.pageX, event.pageY);\n      } else {\n        const position = getSecondPointerPosition(event);\n        const x = 0.5 * (event.pageX + position.x);\n        const y = 0.5 * (event.pageY + position.y);\n        rotateEnd.set(x, y);\n      }\n      rotateDelta.subVectors(rotateEnd, rotateStart).multiplyScalar(scope.rotateSpeed);\n      const element = scope.domElement;\n      if (element) {\n        rotateLeft(2 * Math.PI * rotateDelta.x / element.clientHeight);\n        rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight);\n      }\n      rotateStart.copy(rotateEnd);\n    }\n    function handleTouchMovePan(event) {\n      if (pointers.length == 1) {\n        panEnd.set(event.pageX, event.pageY);\n      } else {\n        const position = getSecondPointerPosition(event);\n        const x = 0.5 * (event.pageX + position.x);\n        const y = 0.5 * (event.pageY + position.y);\n        panEnd.set(x, y);\n      }\n      panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\n      pan(panDelta.x, panDelta.y);\n      panStart.copy(panEnd);\n    }\n    function handleTouchMoveDolly(event) {\n      const position = getSecondPointerPosition(event);\n      const dx = event.pageX - position.x;\n      const dy = event.pageY - position.y;\n      const distance = Math.sqrt(dx * dx + dy * dy);\n      dollyEnd.set(0, distance);\n      dollyDelta.set(0, Math.pow(dollyEnd.y / dollyStart.y, scope.zoomSpeed));\n      dollyOut(dollyDelta.y);\n      dollyStart.copy(dollyEnd);\n    }\n    function handleTouchMoveDollyPan(event) {\n      if (scope.enableZoom)\n        handleTouchMoveDolly(event);\n      if (scope.enablePan)\n        handleTouchMovePan(event);\n    }\n    function handleTouchMoveDollyRotate(event) {\n      if (scope.enableZoom)\n        handleTouchMoveDolly(event);\n      if (scope.enableRotate)\n        handleTouchMoveRotate(event);\n    }\n    function onPointerDown(event) {\n      var _a, _b;\n      if (scope.enabled === false)\n        return;\n      if (pointers.length === 0) {\n        (_a = scope.domElement) == null ? void 0 : _a.ownerDocument.addEventListener(\"pointermove\", onPointerMove);\n        (_b = scope.domElement) == null ? void 0 : _b.ownerDocument.addEventListener(\"pointerup\", onPointerUp);\n      }\n      addPointer(event);\n      if (event.pointerType === \"touch\") {\n        onTouchStart(event);\n      } else {\n        onMouseDown(event);\n      }\n    }\n    function onPointerMove(event) {\n      if (scope.enabled === false)\n        return;\n      if (event.pointerType === \"touch\") {\n        onTouchMove(event);\n      } else {\n        onMouseMove(event);\n      }\n    }\n    function onPointerUp(event) {\n      var _a, _b, _c;\n      removePointer(event);\n      if (pointers.length === 0) {\n        (_a = scope.domElement) == null ? void 0 : _a.releasePointerCapture(event.pointerId);\n        (_b = scope.domElement) == null ? void 0 : _b.ownerDocument.removeEventListener(\"pointermove\", onPointerMove);\n        (_c = scope.domElement) == null ? void 0 : _c.ownerDocument.removeEventListener(\"pointerup\", onPointerUp);\n      }\n      scope.dispatchEvent(endEvent);\n      state = STATE.NONE;\n    }\n    function onPointerCancel(event) {\n      removePointer(event);\n    }\n    function onMouseDown(event) {\n      let mouseAction;\n      switch (event.button) {\n        case 0:\n          mouseAction = scope.mouseButtons.LEFT;\n          break;\n        case 1:\n          mouseAction = scope.mouseButtons.MIDDLE;\n          break;\n        case 2:\n          mouseAction = scope.mouseButtons.RIGHT;\n          break;\n        default:\n          mouseAction = -1;\n      }\n      switch (mouseAction) {\n        case MOUSE.DOLLY:\n          if (scope.enableZoom === false)\n            return;\n          handleMouseDownDolly(event);\n          state = STATE.DOLLY;\n          break;\n        case MOUSE.ROTATE:\n          if (event.ctrlKey || event.metaKey || event.shiftKey) {\n            if (scope.enablePan === false)\n              return;\n            handleMouseDownPan(event);\n            state = STATE.PAN;\n          } else {\n            if (scope.enableRotate === false)\n              return;\n            handleMouseDownRotate(event);\n            state = STATE.ROTATE;\n          }\n          break;\n        case MOUSE.PAN:\n          if (event.ctrlKey || event.metaKey || event.shiftKey) {\n            if (scope.enableRotate === false)\n              return;\n            handleMouseDownRotate(event);\n            state = STATE.ROTATE;\n          } else {\n            if (scope.enablePan === false)\n              return;\n            handleMouseDownPan(event);\n            state = STATE.PAN;\n          }\n          break;\n        default:\n          state = STATE.NONE;\n      }\n      if (state !== STATE.NONE) {\n        scope.dispatchEvent(startEvent);\n      }\n    }\n    function onMouseMove(event) {\n      if (scope.enabled === false)\n        return;\n      switch (state) {\n        case STATE.ROTATE:\n          if (scope.enableRotate === false)\n            return;\n          handleMouseMoveRotate(event);\n          break;\n        case STATE.DOLLY:\n          if (scope.enableZoom === false)\n            return;\n          handleMouseMoveDolly(event);\n          break;\n        case STATE.PAN:\n          if (scope.enablePan === false)\n            return;\n          handleMouseMovePan(event);\n          break;\n      }\n    }\n    function onMouseWheel(event) {\n      if (scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE && state !== STATE.ROTATE) {\n        return;\n      }\n      event.preventDefault();\n      scope.dispatchEvent(startEvent);\n      handleMouseWheel(event);\n      scope.dispatchEvent(endEvent);\n    }\n    function onKeyDown(event) {\n      if (scope.enabled === false || scope.enablePan === false)\n        return;\n      handleKeyDown(event);\n    }\n    function onTouchStart(event) {\n      trackPointer(event);\n      switch (pointers.length) {\n        case 1:\n          switch (scope.touches.ONE) {\n            case TOUCH.ROTATE:\n              if (scope.enableRotate === false)\n                return;\n              handleTouchStartRotate();\n              state = STATE.TOUCH_ROTATE;\n              break;\n            case TOUCH.PAN:\n              if (scope.enablePan === false)\n                return;\n              handleTouchStartPan();\n              state = STATE.TOUCH_PAN;\n              break;\n            default:\n              state = STATE.NONE;\n          }\n          break;\n        case 2:\n          switch (scope.touches.TWO) {\n            case TOUCH.DOLLY_PAN:\n              if (scope.enableZoom === false && scope.enablePan === false)\n                return;\n              handleTouchStartDollyPan();\n              state = STATE.TOUCH_DOLLY_PAN;\n              break;\n            case TOUCH.DOLLY_ROTATE:\n              if (scope.enableZoom === false && scope.enableRotate === false)\n                return;\n              handleTouchStartDollyRotate();\n              state = STATE.TOUCH_DOLLY_ROTATE;\n              break;\n            default:\n              state = STATE.NONE;\n          }\n          break;\n        default:\n          state = STATE.NONE;\n      }\n      if (state !== STATE.NONE) {\n        scope.dispatchEvent(startEvent);\n      }\n    }\n    function onTouchMove(event) {\n      trackPointer(event);\n      switch (state) {\n        case STATE.TOUCH_ROTATE:\n          if (scope.enableRotate === false)\n            return;\n          handleTouchMoveRotate(event);\n          scope.update();\n          break;\n        case STATE.TOUCH_PAN:\n          if (scope.enablePan === false)\n            return;\n          handleTouchMovePan(event);\n          scope.update();\n          break;\n        case STATE.TOUCH_DOLLY_PAN:\n          if (scope.enableZoom === false && scope.enablePan === false)\n            return;\n          handleTouchMoveDollyPan(event);\n          scope.update();\n          break;\n        case STATE.TOUCH_DOLLY_ROTATE:\n          if (scope.enableZoom === false && scope.enableRotate === false)\n            return;\n          handleTouchMoveDollyRotate(event);\n          scope.update();\n          break;\n        default:\n          state = STATE.NONE;\n      }\n    }\n    function onContextMenu(event) {\n      if (scope.enabled === false)\n        return;\n      event.preventDefault();\n    }\n    function addPointer(event) {\n      pointers.push(event);\n    }\n    function removePointer(event) {\n      delete pointerPositions[event.pointerId];\n      for (let i = 0; i < pointers.length; i++) {\n        if (pointers[i].pointerId == event.pointerId) {\n          pointers.splice(i, 1);\n          return;\n        }\n      }\n    }\n    function trackPointer(event) {\n      let position = pointerPositions[event.pointerId];\n      if (position === void 0) {\n        position = new Vector2();\n        pointerPositions[event.pointerId] = position;\n      }\n      position.set(event.pageX, event.pageY);\n    }\n    function getSecondPointerPosition(event) {\n      const pointer = event.pointerId === pointers[0].pointerId ? pointers[1] : pointers[0];\n      return pointerPositions[pointer.pointerId];\n    }\n    if (domElement !== void 0)\n      this.connect(domElement);\n    this.update();\n  }\n}\nclass MapControls extends OrbitControls {\n  constructor(object, domElement) {\n    super(object, domElement);\n    this.screenSpacePanning = false;\n    this.mouseButtons.LEFT = MOUSE.PAN;\n    this.mouseButtons.RIGHT = MOUSE.ROTATE;\n    this.touches.ONE = TOUCH.PAN;\n    this.touches.TWO = TOUCH.DOLLY_ROTATE;\n  }\n}\nexport {\n  MapControls,\n  OrbitControls\n};\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport { useThree, useFrame } from '@react-three/fiber';\nimport * as React from 'react';\nimport { OrbitControls as OrbitControls$1 } from 'three-stdlib';\n\nconst OrbitControls = /*#__PURE__*/React.forwardRef(({\n  makeDefault,\n  camera,\n  regress,\n  domElement,\n  enableDamping = true,\n  onChange,\n  onStart,\n  onEnd,\n  ...restProps\n}, ref) => {\n  const invalidate = useThree(state => state.invalidate);\n  const defaultCamera = useThree(state => state.camera);\n  const gl = useThree(state => state.gl);\n  const events = useThree(state => state.events);\n  const set = useThree(state => state.set);\n  const get = useThree(state => state.get);\n  const performance = useThree(state => state.performance);\n  const explCamera = camera || defaultCamera;\n  const explDomElement = domElement || events.connected || gl.domElement;\n  const controls = React.useMemo(() => new OrbitControls$1(explCamera), [explCamera]);\n  useFrame(() => {\n    if (controls.enabled) controls.update();\n  }, -1);\n  React.useEffect(() => {\n    controls.connect(explDomElement);\n    return () => void controls.dispose();\n  }, [explDomElement, regress, controls, invalidate]);\n  React.useEffect(() => {\n    const callback = e => {\n      invalidate();\n      if (regress) performance.regress();\n      if (onChange) onChange(e);\n    };\n\n    controls.addEventListener('change', callback);\n    if (onStart) controls.addEventListener('start', onStart);\n    if (onEnd) controls.addEventListener('end', onEnd);\n    return () => {\n      if (onStart) controls.removeEventListener('start', onStart);\n      if (onEnd) controls.removeEventListener('end', onEnd);\n      controls.removeEventListener('change', callback);\n    };\n  }, [onChange, onStart, onEnd, controls, invalidate]);\n  React.useEffect(() => {\n    if (makeDefault) {\n      const old = get().controls;\n      set({\n        controls\n      });\n      return () => set({\n        controls: old\n      });\n    }\n  }, [makeDefault, controls]);\n  return /*#__PURE__*/React.createElement(\"primitive\", _extends({\n    ref: ref,\n    object: controls,\n    enableDamping: enableDamping\n  }, restProps));\n});\n\nexport { OrbitControls };\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport { useThree } from '@react-three/fiber';\nimport mergeRefs from 'react-merge-refs';\n\nconst PerspectiveCamera = /*#__PURE__*/React.forwardRef(({\n  makeDefault,\n  ...props\n}, ref) => {\n  const set = useThree(({\n    set\n  }) => set);\n  const camera = useThree(({\n    camera\n  }) => camera);\n  const size = useThree(({\n    size\n  }) => size);\n  const cameraRef = React.useRef(null);\n  React.useLayoutEffect(() => {\n    if (!props.manual) {\n      cameraRef.current.aspect = size.width / size.height;\n    }\n  }, [size, props]);\n  React.useLayoutEffect(() => {\n    cameraRef.current.updateProjectionMatrix();\n  });\n  React.useLayoutEffect(() => {\n    if (makeDefault) {\n      const oldCam = camera;\n      set(() => ({\n        camera: cameraRef.current\n      }));\n      return () => set(() => ({\n        camera: oldCam\n      }));\n    } // The camera should not be part of the dependency list because this components camera is a stable reference\n    // that must exchange the default, and clean up after itself on unmount.\n\n  }, [cameraRef, makeDefault, set]);\n  return /*#__PURE__*/React.createElement(\"perspectiveCamera\", _extends({\n    ref: mergeRefs([cameraRef, ref])\n  }, props));\n});\n\nexport { PerspectiveCamera };\n","import { useReducer, useRef, useDebugValue, useEffect, useLayoutEffect } from 'react';\n\nfunction createStore(createState) {\n  let state;\n  const listeners = /* @__PURE__ */ new Set();\n  const setState = (partial, replace) => {\n    const nextState = typeof partial === \"function\" ? partial(state) : partial;\n    if (nextState !== state) {\n      const previousState = state;\n      state = replace ? nextState : Object.assign({}, state, nextState);\n      listeners.forEach((listener) => listener(state, previousState));\n    }\n  };\n  const getState = () => state;\n  const subscribeWithSelector = (listener, selector = getState, equalityFn = Object.is) => {\n    console.warn(\"[DEPRECATED] Please use `subscribeWithSelector` middleware\");\n    let currentSlice = selector(state);\n    function listenerToAdd() {\n      const nextSlice = selector(state);\n      if (!equalityFn(currentSlice, nextSlice)) {\n        const previousSlice = currentSlice;\n        listener(currentSlice = nextSlice, previousSlice);\n      }\n    }\n    listeners.add(listenerToAdd);\n    return () => listeners.delete(listenerToAdd);\n  };\n  const subscribe = (listener, selector, equalityFn) => {\n    if (selector || equalityFn) {\n      return subscribeWithSelector(listener, selector, equalityFn);\n    }\n    listeners.add(listener);\n    return () => listeners.delete(listener);\n  };\n  const destroy = () => listeners.clear();\n  const api = { setState, getState, subscribe, destroy };\n  state = createState(setState, getState, api);\n  return api;\n}\n\nconst isSSR = typeof window === \"undefined\" || !window.navigator || /ServerSideRendering|^Deno\\//.test(window.navigator.userAgent);\nconst useIsomorphicLayoutEffect = isSSR ? useEffect : useLayoutEffect;\nfunction create(createState) {\n  const api = typeof createState === \"function\" ? createStore(createState) : createState;\n  const useStore = (selector = api.getState, equalityFn = Object.is) => {\n    const [, forceUpdate] = useReducer((c) => c + 1, 0);\n    const state = api.getState();\n    const stateRef = useRef(state);\n    const selectorRef = useRef(selector);\n    const equalityFnRef = useRef(equalityFn);\n    const erroredRef = useRef(false);\n    const currentSliceRef = useRef();\n    if (currentSliceRef.current === void 0) {\n      currentSliceRef.current = selector(state);\n    }\n    let newStateSlice;\n    let hasNewStateSlice = false;\n    if (stateRef.current !== state || selectorRef.current !== selector || equalityFnRef.current !== equalityFn || erroredRef.current) {\n      newStateSlice = selector(state);\n      hasNewStateSlice = !equalityFn(currentSliceRef.current, newStateSlice);\n    }\n    useIsomorphicLayoutEffect(() => {\n      if (hasNewStateSlice) {\n        currentSliceRef.current = newStateSlice;\n      }\n      stateRef.current = state;\n      selectorRef.current = selector;\n      equalityFnRef.current = equalityFn;\n      erroredRef.current = false;\n    });\n    const stateBeforeSubscriptionRef = useRef(state);\n    useIsomorphicLayoutEffect(() => {\n      const listener = () => {\n        try {\n          const nextState = api.getState();\n          const nextStateSlice = selectorRef.current(nextState);\n          if (!equalityFnRef.current(currentSliceRef.current, nextStateSlice)) {\n            stateRef.current = nextState;\n            currentSliceRef.current = nextStateSlice;\n            forceUpdate();\n          }\n        } catch (error) {\n          erroredRef.current = true;\n          forceUpdate();\n        }\n      };\n      const unsubscribe = api.subscribe(listener);\n      if (api.getState() !== stateBeforeSubscriptionRef.current) {\n        listener();\n      }\n      return unsubscribe;\n    }, []);\n    const sliceToReturn = hasNewStateSlice ? newStateSlice : currentSliceRef.current;\n    useDebugValue(sliceToReturn);\n    return sliceToReturn;\n  };\n  Object.assign(useStore, api);\n  useStore[Symbol.iterator] = function() {\n    console.warn(\"[useStore, api] = create() is deprecated and will be removed in v4\");\n    const items = [useStore, api];\n    return {\n      next() {\n        const done = items.length <= 0;\n        return { value: items.shift(), done };\n      }\n    };\n  };\n  return useStore;\n}\n\nexport { create as default };\n","function shallowEqualArrays(arrA, arrB, equal = (a, b) => a === b) {\n  if (arrA === arrB) return true;\n  if (!arrA || !arrB) return false;\n  const len = arrA.length;\n  if (arrB.length !== len) return false;\n\n  for (let i = 0; i < len; i++) if (!equal(arrA[i], arrB[i])) return false;\n\n  return true;\n}\n\nconst globalCache = [];\n\nfunction query(fn, keys, preload = false, config = {}) {\n  for (const entry of globalCache) {\n    // Find a match\n    if (shallowEqualArrays(keys, entry.keys, entry.equal)) {\n      // If we're pre-loading and the element is present, just return\n      if (preload) return undefined; // If an error occurred, throw\n\n      if (Object.prototype.hasOwnProperty.call(entry, 'error')) throw entry.error; // If a response was successful, return\n\n      if (Object.prototype.hasOwnProperty.call(entry, 'response')) return entry.response; // If the promise is still unresolved, throw\n\n      if (!preload) throw entry.promise;\n    }\n  } // The request is new or has changed.\n\n\n  const entry = {\n    keys,\n    equal: config.equal,\n    promise: // Execute the promise\n    fn(...keys) // When it resolves, store its value\n    .then(response => entry.response = response) // Remove the entry if a lifespan was given\n    .then(() => {\n      if (config.lifespan && config.lifespan > 0) {\n        setTimeout(() => {\n          const index = globalCache.indexOf(entry);\n          if (index !== -1) globalCache.splice(index, 1);\n        }, config.lifespan);\n      }\n    }) // Store caught errors, they will be thrown in the render-phase to bubble into an error-bound\n    .catch(error => entry.error = error)\n  }; // Register the entry\n\n  globalCache.push(entry); // And throw the promise, this yields control back to React\n\n  if (!preload) throw entry.promise;\n  return undefined;\n}\n\nconst suspend = (fn, keys, config) => query(fn, keys, false, config);\n\nconst preload = (fn, keys, config) => void query(fn, keys, true, config);\n\nconst peek = keys => {\n  var _globalCache$find;\n\n  return (_globalCache$find = globalCache.find(entry => shallowEqualArrays(keys, entry.keys, entry.equal))) == null ? void 0 : _globalCache$find.response;\n};\n\nconst clear = keys => {\n  if (keys === undefined || keys.length === 0) globalCache.splice(0, globalCache.length);else {\n    const entry = globalCache.find(entry => shallowEqualArrays(keys, entry.keys, entry.equal));\n\n    if (entry) {\n      const index = globalCache.indexOf(entry);\n      if (index !== -1) globalCache.splice(index, 1);\n    }\n  }\n};\n\nexport { clear, peek, preload, suspend };\n","import * as THREE from 'three';\nimport * as React from 'react';\nimport { DefaultEventPriority, ContinuousEventPriority, DiscreteEventPriority, ConcurrentRoot } from 'react-reconciler/constants';\nimport create from 'zustand';\nimport Reconciler from 'react-reconciler';\nimport { unstable_scheduleCallback, unstable_IdlePriority } from 'scheduler';\nimport { suspend, preload, clear } from 'suspend-react';\n\nvar threeTypes = /*#__PURE__*/Object.freeze({\n  __proto__: null\n});\n\nvar _window$document, _window$navigator;\nconst isOrthographicCamera = def => def && def.isOrthographicCamera;\nconst isRef = obj => obj && obj.hasOwnProperty('current');\n/**\n * An SSR-friendly useLayoutEffect.\n *\n * React currently throws a warning when using useLayoutEffect on the server.\n * To get around it, we can conditionally useEffect on the server (no-op) and\n * useLayoutEffect elsewhere.\n *\n * @see https://github.com/facebook/react/issues/14927\n */\n\nconst useIsomorphicLayoutEffect = typeof window !== 'undefined' && ((_window$document = window.document) != null && _window$document.createElement || ((_window$navigator = window.navigator) == null ? void 0 : _window$navigator.product) === 'ReactNative') ? React.useLayoutEffect : React.useEffect;\nfunction useMutableCallback(fn) {\n  const ref = React.useRef(fn);\n  useIsomorphicLayoutEffect(() => void (ref.current = fn), [fn]);\n  return ref;\n}\nfunction Block({\n  set\n}) {\n  useIsomorphicLayoutEffect(() => {\n    set(new Promise(() => null));\n    return () => set(false);\n  }, [set]);\n  return null;\n}\nclass ErrorBoundary extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      error: false\n    };\n  }\n\n  componentDidCatch(err) {\n    this.props.set(err);\n  }\n\n  render() {\n    return this.state.error ? null : this.props.children;\n  }\n\n}\n\nErrorBoundary.getDerivedStateFromError = () => ({\n  error: true\n});\n\nconst DEFAULT = '__default';\nconst isDiffSet = def => def && !!def.memoized && !!def.changes;\nfunction calculateDpr(dpr) {\n  const target = typeof window !== 'undefined' ? window.devicePixelRatio : 1;\n  return Array.isArray(dpr) ? Math.min(Math.max(dpr[0], target), dpr[1]) : dpr;\n}\n/**\n * Returns instance root state\n */\n\nconst getRootState = obj => {\n  var _r3f;\n\n  return (_r3f = obj.__r3f) == null ? void 0 : _r3f.root.getState();\n};\n// A collection of compare functions\nconst is = {\n  obj: a => a === Object(a) && !is.arr(a) && typeof a !== 'function',\n  fun: a => typeof a === 'function',\n  str: a => typeof a === 'string',\n  num: a => typeof a === 'number',\n  boo: a => typeof a === 'boolean',\n  und: a => a === void 0,\n  arr: a => Array.isArray(a),\n\n  equ(a, b, {\n    arrays = 'shallow',\n    objects = 'reference',\n    strict = true\n  } = {}) {\n    // Wrong type or one of the two undefined, doesn't match\n    if (typeof a !== typeof b || !!a !== !!b) return false; // Atomic, just compare a against b\n\n    if (is.str(a) || is.num(a)) return a === b;\n    const isObj = is.obj(a);\n    if (isObj && objects === 'reference') return a === b;\n    const isArr = is.arr(a);\n    if (isArr && arrays === 'reference') return a === b; // Array or Object, shallow compare first to see if it's a match\n\n    if ((isArr || isObj) && a === b) return true; // Last resort, go through keys\n\n    let i;\n\n    for (i in a) if (!(i in b)) return false;\n\n    for (i in strict ? b : a) if (a[i] !== b[i]) return false;\n\n    if (is.und(i)) {\n      if (isArr && a.length === 0 && b.length === 0) return true;\n      if (isObj && Object.keys(a).length === 0 && Object.keys(b).length === 0) return true;\n      if (a !== b) return false;\n    }\n\n    return true;\n  }\n\n}; // Collects nodes and materials from a THREE.Object3D\n\nfunction buildGraph(object) {\n  const data = {\n    nodes: {},\n    materials: {}\n  };\n\n  if (object) {\n    object.traverse(obj => {\n      if (obj.name) data.nodes[obj.name] = obj;\n      if (obj.material && !data.materials[obj.material.name]) data.materials[obj.material.name] = obj.material;\n    });\n  }\n\n  return data;\n} // Disposes an object and all its properties\n\nfunction dispose(obj) {\n  if (obj.dispose && obj.type !== 'Scene') obj.dispose();\n\n  for (const p in obj) {\n    p.dispose == null ? void 0 : p.dispose();\n    delete obj[p];\n  }\n} // Each object in the scene carries a small LocalState descriptor\n\nfunction prepare(object, state) {\n  const instance = object;\n\n  if (state != null && state.primitive || !instance.__r3f) {\n    instance.__r3f = {\n      type: '',\n      root: null,\n      previousAttach: null,\n      memoizedProps: {},\n      eventCount: 0,\n      handlers: {},\n      objects: [],\n      parent: null,\n      ...state\n    };\n  }\n\n  return object;\n}\n\nfunction resolve(instance, key) {\n  let target = instance;\n\n  if (key.includes('-')) {\n    const entries = key.split('-');\n    const last = entries.pop();\n    target = entries.reduce((acc, key) => acc[key], instance);\n    return {\n      target,\n      key: last\n    };\n  } else return {\n    target,\n    key\n  };\n} // Checks if a dash-cased string ends with an integer\n\n\nconst INDEX_REGEX = /-\\d+$/;\nfunction attach(parent, child, type) {\n  if (is.str(type)) {\n    // If attaching into an array (foo-0), create one\n    if (INDEX_REGEX.test(type)) {\n      const root = type.replace(INDEX_REGEX, '');\n      const {\n        target,\n        key\n      } = resolve(parent, root);\n      if (!Array.isArray(target[key])) target[key] = [];\n    }\n\n    const {\n      target,\n      key\n    } = resolve(parent, type);\n    child.__r3f.previousAttach = target[key];\n    target[key] = child;\n  } else child.__r3f.previousAttach = type(parent, child);\n}\nfunction detach(parent, child, type) {\n  var _child$__r3f, _child$__r3f2;\n\n  if (is.str(type)) {\n    const {\n      target,\n      key\n    } = resolve(parent, type);\n    const previous = child.__r3f.previousAttach; // When the previous value was undefined, it means the value was never set to begin with\n\n    if (previous === undefined) delete target[key]; // Otherwise set the previous value\n    else target[key] = previous;\n  } else (_child$__r3f = child.__r3f) == null ? void 0 : _child$__r3f.previousAttach == null ? void 0 : _child$__r3f.previousAttach(parent, child);\n\n  (_child$__r3f2 = child.__r3f) == null ? true : delete _child$__r3f2.previousAttach;\n} // This function prepares a set of changes to be applied to the instance\n\nfunction diffProps(instance, {\n  children: cN,\n  key: kN,\n  ref: rN,\n  ...props\n}, {\n  children: cP,\n  key: kP,\n  ref: rP,\n  ...previous\n} = {}, remove = false) {\n  var _instance$__r3f;\n\n  const localState = (_instance$__r3f = instance == null ? void 0 : instance.__r3f) != null ? _instance$__r3f : {};\n  const entries = Object.entries(props);\n  const changes = []; // Catch removed props, prepend them so they can be reset or removed\n\n  if (remove) {\n    const previousKeys = Object.keys(previous);\n\n    for (let i = 0; i < previousKeys.length; i++) {\n      if (!props.hasOwnProperty(previousKeys[i])) entries.unshift([previousKeys[i], DEFAULT + 'remove']);\n    }\n  }\n\n  entries.forEach(([key, value]) => {\n    var _instance$__r3f2;\n\n    // Bail out on primitive object\n    if ((_instance$__r3f2 = instance.__r3f) != null && _instance$__r3f2.primitive && key === 'object') return; // When props match bail out\n\n    if (is.equ(value, previous[key])) return; // Collect handlers and bail out\n\n    if (/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(key)) return changes.push([key, value, true, []]); // Split dashed props\n\n    let entries = [];\n    if (key.includes('-')) entries = key.split('-');\n    changes.push([key, value, false, entries]); // Reset pierced props\n\n    for (const prop in props) {\n      const value = props[prop];\n      if (prop.startsWith(`${key}-`)) changes.push([prop, value, false, prop.split('-')]);\n    }\n  });\n  const memoized = { ...props\n  };\n  if (localState.memoizedProps && localState.memoizedProps.args) memoized.args = localState.memoizedProps.args;\n  if (localState.memoizedProps && localState.memoizedProps.attach) memoized.attach = localState.memoizedProps.attach;\n  return {\n    memoized,\n    changes\n  };\n} // This function applies a set of changes to the instance\n\nfunction applyProps$1(instance, data) {\n  var _instance$__r3f3, _root$getState, _instance$__r3f4;\n\n  // Filter equals, events and reserved props\n  const localState = (_instance$__r3f3 = instance.__r3f) != null ? _instance$__r3f3 : {};\n  const root = localState.root;\n  const rootState = (_root$getState = root == null ? void 0 : root.getState == null ? void 0 : root.getState()) != null ? _root$getState : {};\n  const {\n    memoized,\n    changes\n  } = isDiffSet(data) ? data : diffProps(instance, data);\n  const prevHandlers = localState.eventCount; // Prepare memoized props\n\n  if (instance.__r3f) instance.__r3f.memoizedProps = memoized;\n\n  for (let i = 0; i < changes.length; i++) {\n    let [key, value, isEvent, keys] = changes[i];\n    let currentInstance = instance;\n    let targetProp = currentInstance[key]; // Revolve dashed props\n\n    if (keys.length) {\n      targetProp = keys.reduce((acc, key) => acc[key], instance); // If the target is atomic, it forces us to switch the root\n\n      if (!(targetProp && targetProp.set)) {\n        const [name, ...reverseEntries] = keys.reverse();\n        currentInstance = reverseEntries.reverse().reduce((acc, key) => acc[key], instance);\n        key = name;\n      }\n    } // https://github.com/mrdoob/three.js/issues/21209\n    // HMR/fast-refresh relies on the ability to cancel out props, but threejs\n    // has no means to do this. Hence we curate a small collection of value-classes\n    // with their respective constructor/set arguments\n    // For removed props, try to set default values, if possible\n\n\n    if (value === DEFAULT + 'remove') {\n      if (targetProp && targetProp.constructor) {\n        var _memoized$args;\n\n        // use the prop constructor to find the default it should be\n        value = new targetProp.constructor(...((_memoized$args = memoized.args) != null ? _memoized$args : []));\n      } else if (currentInstance.constructor) {\n        var _currentInstance$__r;\n\n        // create a blank slate of the instance and copy the particular parameter.\n        // @ts-ignore\n        const defaultClassCall = new currentInstance.constructor(...((_currentInstance$__r = currentInstance.__r3f.memoizedProps.args) != null ? _currentInstance$__r : []));\n        value = defaultClassCall[targetProp]; // destory the instance\n\n        if (defaultClassCall.dispose) defaultClassCall.dispose(); // instance does not have constructor, just set it to 0\n      } else {\n        value = 0;\n      }\n    } // Deal with pointer events ...\n\n\n    if (isEvent) {\n      if (value) localState.handlers[key] = value;else delete localState.handlers[key];\n      localState.eventCount = Object.keys(localState.handlers).length;\n    } // Special treatment for objects with support for set/copy, and layers\n    else if (targetProp && targetProp.set && (targetProp.copy || targetProp instanceof THREE.Layers)) {\n      // If value is an array\n      if (Array.isArray(value)) {\n        if (targetProp.fromArray) targetProp.fromArray(value);else targetProp.set(...value);\n      } // Test again target.copy(class) next ...\n      else if (targetProp.copy && value && value.constructor && targetProp.constructor.name === value.constructor.name) {\n        targetProp.copy(value);\n      } // If nothing else fits, just set the single value, ignore undefined\n      // https://github.com/pmndrs/react-three-fiber/issues/274\n      else if (value !== undefined) {\n        const isColor = targetProp instanceof THREE.Color; // Allow setting array scalars\n\n        if (!isColor && targetProp.setScalar) targetProp.setScalar(value); // Layers have no copy function, we must therefore copy the mask property\n        else if (targetProp instanceof THREE.Layers && value instanceof THREE.Layers) targetProp.mask = value.mask; // Otherwise just set ...\n        else targetProp.set(value); // For versions of three which don't support THREE.ColorManagement,\n        // Auto-convert sRGB colors\n        // https://github.com/pmndrs/react-three-fiber/issues/344\n\n        const supportsColorManagement = ('ColorManagement' in THREE);\n        if (!supportsColorManagement && !rootState.linear && isColor) targetProp.convertSRGBToLinear();\n      } // Else, just overwrite the value\n\n    } else {\n      currentInstance[key] = value; // Auto-convert sRGB textures, for now ...\n      // https://github.com/pmndrs/react-three-fiber/issues/344\n\n      if (!rootState.linear && currentInstance[key] instanceof THREE.Texture) {\n        currentInstance[key].encoding = THREE.sRGBEncoding;\n      }\n    }\n\n    invalidateInstance(instance);\n  }\n\n  if (localState.parent && rootState.internal && instance.raycast && prevHandlers !== localState.eventCount) {\n    // Pre-emptively remove the instance from the interaction manager\n    const index = rootState.internal.interaction.indexOf(instance);\n    if (index > -1) rootState.internal.interaction.splice(index, 1); // Add the instance to the interaction manager only when it has handlers\n\n    if (localState.eventCount) rootState.internal.interaction.push(instance);\n  } // Call the update lifecycle when it is being updated, but only when it is part of the scene\n\n\n  if (changes.length && (_instance$__r3f4 = instance.__r3f) != null && _instance$__r3f4.parent) updateInstance(instance);\n  return instance;\n}\nfunction invalidateInstance(instance) {\n  var _instance$__r3f5, _instance$__r3f5$root;\n\n  const state = (_instance$__r3f5 = instance.__r3f) == null ? void 0 : (_instance$__r3f5$root = _instance$__r3f5.root) == null ? void 0 : _instance$__r3f5$root.getState == null ? void 0 : _instance$__r3f5$root.getState();\n  if (state && state.internal.frames === 0) state.invalidate();\n}\nfunction updateInstance(instance) {\n  instance.onUpdate == null ? void 0 : instance.onUpdate(instance);\n}\nfunction updateCamera(camera, size) {\n  // https://github.com/pmndrs/react-three-fiber/issues/92\n  // Do not mess with the camera if it belongs to the user\n  if (!camera.manual) {\n    if (isOrthographicCamera(camera)) {\n      camera.left = size.width / -2;\n      camera.right = size.width / 2;\n      camera.top = size.height / 2;\n      camera.bottom = size.height / -2;\n    } else {\n      camera.aspect = size.width / size.height;\n    }\n\n    camera.updateProjectionMatrix(); // https://github.com/pmndrs/react-three-fiber/issues/178\n    // Update matrix world since the renderer is a frame late\n\n    camera.updateMatrixWorld();\n  }\n}\n/**\n * Safely sets a deeply-nested value on an object.\n */\n\nfunction setDeep(obj, value, keys) {\n  const key = keys.pop();\n  const target = keys.reduce((acc, key) => acc[key], obj);\n  return target[key] = value;\n}\n\nfunction makeId(event) {\n  return (event.eventObject || event.object).uuid + '/' + event.index + event.instanceId;\n} // https://github.com/facebook/react/tree/main/packages/react-reconciler#getcurrenteventpriority\n// Gives React a clue as to how import the current interaction is\n\n\nfunction getEventPriority() {\n  var _globalScope$event;\n\n  // Get a handle to the current global scope in window and worker contexts if able\n  // https://github.com/pmndrs/react-three-fiber/pull/2493\n  const globalScope = typeof self !== 'undefined' && self || typeof window !== 'undefined' && window;\n  if (!globalScope) return DefaultEventPriority;\n  const name = (_globalScope$event = globalScope.event) == null ? void 0 : _globalScope$event.type;\n\n  switch (name) {\n    case 'click':\n    case 'contextmenu':\n    case 'dblclick':\n    case 'pointercancel':\n    case 'pointerdown':\n    case 'pointerup':\n      return DiscreteEventPriority;\n\n    case 'pointermove':\n    case 'pointerout':\n    case 'pointerover':\n    case 'pointerenter':\n    case 'pointerleave':\n    case 'wheel':\n      return ContinuousEventPriority;\n\n    default:\n      return DefaultEventPriority;\n  }\n}\n/**\n * Release pointer captures.\n * This is called by releasePointerCapture in the API, and when an object is removed.\n */\n\nfunction releaseInternalPointerCapture(capturedMap, obj, captures, pointerId) {\n  const captureData = captures.get(obj);\n\n  if (captureData) {\n    captures.delete(obj); // If this was the last capturing object for this pointer\n\n    if (captures.size === 0) {\n      capturedMap.delete(pointerId);\n      captureData.target.releasePointerCapture(pointerId);\n    }\n  }\n}\n\nfunction removeInteractivity(store, object) {\n  const {\n    internal\n  } = store.getState(); // Removes every trace of an object from the data store\n\n  internal.interaction = internal.interaction.filter(o => o !== object);\n  internal.initialHits = internal.initialHits.filter(o => o !== object);\n  internal.hovered.forEach((value, key) => {\n    if (value.eventObject === object || value.object === object) {\n      // Clear out intersects, they are outdated by now\n      internal.hovered.delete(key);\n    }\n  });\n  internal.capturedMap.forEach((captures, pointerId) => {\n    releaseInternalPointerCapture(internal.capturedMap, object, captures, pointerId);\n  });\n}\nfunction createEvents(store) {\n  /** Calculates delta */\n  function calculateDistance(event) {\n    const {\n      internal\n    } = store.getState();\n    const dx = event.offsetX - internal.initialClick[0];\n    const dy = event.offsetY - internal.initialClick[1];\n    return Math.round(Math.sqrt(dx * dx + dy * dy));\n  }\n  /** Returns true if an instance has a valid pointer-event registered, this excludes scroll, clicks etc */\n\n\n  function filterPointerEvents(objects) {\n    return objects.filter(obj => ['Move', 'Over', 'Enter', 'Out', 'Leave'].some(name => {\n      var _r3f;\n\n      return (_r3f = obj.__r3f) == null ? void 0 : _r3f.handlers['onPointer' + name];\n    }));\n  }\n\n  function intersect(event, filter) {\n    const state = store.getState();\n    const duplicates = new Set();\n    const intersections = []; // Allow callers to eliminate event objects\n\n    const eventsObjects = filter ? filter(state.internal.interaction) : state.internal.interaction; // Reset all raycaster cameras to undefined\n\n    for (let i = 0; i < eventsObjects.length; i++) {\n      const state = getRootState(eventsObjects[i]);\n\n      if (state) {\n        state.raycaster.camera = undefined;\n      }\n    }\n\n    if (!state.previousRoot) {\n      // Make sure root-level pointer and ray are set up\n      state.events.compute == null ? void 0 : state.events.compute(event, state);\n    }\n\n    function handleRaycast(obj) {\n      const state = getRootState(obj); // Skip event handling when noEvents is set, or when the raycasters camera is null\n\n      if (!state || !state.events.enabled || state.raycaster.camera === null) return []; // When the camera is undefined we have to call the event layers update function\n\n      if (state.raycaster.camera === undefined) {\n        var _state$previousRoot;\n\n        state.events.compute == null ? void 0 : state.events.compute(event, state, (_state$previousRoot = state.previousRoot) == null ? void 0 : _state$previousRoot.getState()); // If the camera is still undefined we have to skip this layer entirely\n\n        if (state.raycaster.camera === undefined) state.raycaster.camera = null;\n      } // Intersect object by object\n\n\n      return state.raycaster.camera ? state.raycaster.intersectObject(obj, true) : [];\n    } // Collect events\n\n\n    let hits = eventsObjects // Intersect objects\n    .flatMap(handleRaycast) // Sort by event priority and distance\n    .sort((a, b) => {\n      const aState = getRootState(a.object);\n      const bState = getRootState(b.object);\n      if (!aState || !bState) return 0;\n      return bState.events.priority - aState.events.priority || a.distance - b.distance;\n    }) // Filter out duplicates\n    .filter(item => {\n      const id = makeId(item);\n      if (duplicates.has(id)) return false;\n      duplicates.add(id);\n      return true;\n    }); // https://github.com/mrdoob/three.js/issues/16031\n    // Allow custom userland intersect sort order, this likely only makes sense on the root filter\n\n    if (state.events.filter) hits = state.events.filter(hits, state); // Bubble up the events, find the event source (eventObject)\n\n    for (const hit of hits) {\n      let eventObject = hit.object; // Bubble event up\n\n      while (eventObject) {\n        var _r3f2;\n\n        if ((_r3f2 = eventObject.__r3f) != null && _r3f2.eventCount) intersections.push({ ...hit,\n          eventObject\n        });\n        eventObject = eventObject.parent;\n      }\n    } // If the interaction is captured, make all capturing targets part of the intersect.\n\n\n    if ('pointerId' in event && state.internal.capturedMap.has(event.pointerId)) {\n      for (let captureData of state.internal.capturedMap.get(event.pointerId).values()) {\n        intersections.push(captureData.intersection);\n      }\n    }\n\n    return intersections;\n  }\n  /**  Handles intersections by forwarding them to handlers */\n\n\n  function handleIntersects(intersections, event, delta, callback) {\n    const rootState = store.getState(); // If anything has been found, forward it to the event listeners\n\n    if (intersections.length) {\n      const localState = {\n        stopped: false\n      };\n\n      for (const hit of intersections) {\n        const state = getRootState(hit.object) || rootState;\n        const {\n          raycaster,\n          pointer,\n          camera,\n          internal\n        } = state;\n        const unprojectedPoint = new THREE.Vector3(pointer.x, pointer.y, 0).unproject(camera);\n\n        const hasPointerCapture = id => {\n          var _internal$capturedMap, _internal$capturedMap2;\n\n          return (_internal$capturedMap = (_internal$capturedMap2 = internal.capturedMap.get(id)) == null ? void 0 : _internal$capturedMap2.has(hit.eventObject)) != null ? _internal$capturedMap : false;\n        };\n\n        const setPointerCapture = id => {\n          const captureData = {\n            intersection: hit,\n            target: event.target\n          };\n\n          if (internal.capturedMap.has(id)) {\n            // if the pointerId was previously captured, we add the hit to the\n            // event capturedMap.\n            internal.capturedMap.get(id).set(hit.eventObject, captureData);\n          } else {\n            // if the pointerId was not previously captured, we create a map\n            // containing the hitObject, and the hit. hitObject is used for\n            // faster access.\n            internal.capturedMap.set(id, new Map([[hit.eventObject, captureData]]));\n          } // Call the original event now\n          event.target.setPointerCapture(id);\n        };\n\n        const releasePointerCapture = id => {\n          const captures = internal.capturedMap.get(id);\n\n          if (captures) {\n            releaseInternalPointerCapture(internal.capturedMap, hit.eventObject, captures, id);\n          }\n        }; // Add native event props\n\n\n        let extractEventProps = {}; // This iterates over the event's properties including the inherited ones. Native PointerEvents have most of their props as getters which are inherited, but polyfilled PointerEvents have them all as their own properties (i.e. not inherited). We can't use Object.keys() or Object.entries() as they only return \"own\" properties; nor Object.getPrototypeOf(event) as that *doesn't* return \"own\" properties, only inherited ones.\n\n        for (let prop in event) {\n          let property = event[prop]; // Only copy over atomics, leave functions alone as these should be\n          // called as event.nativeEvent.fn()\n\n          if (typeof property !== 'function') extractEventProps[prop] = property;\n        }\n\n        let raycastEvent = { ...hit,\n          ...extractEventProps,\n          pointer,\n          intersections,\n          stopped: localState.stopped,\n          delta,\n          unprojectedPoint,\n          ray: raycaster.ray,\n          camera: camera,\n\n          // Hijack stopPropagation, which just sets a flag\n          stopPropagation() {\n            // https://github.com/pmndrs/react-three-fiber/issues/596\n            // Events are not allowed to stop propagation if the pointer has been captured\n            const capturesForPointer = 'pointerId' in event && internal.capturedMap.get(event.pointerId); // We only authorize stopPropagation...\n\n            if ( // ...if this pointer hasn't been captured\n            !capturesForPointer || // ... or if the hit object is capturing the pointer\n            capturesForPointer.has(hit.eventObject)) {\n              raycastEvent.stopped = localState.stopped = true; // Propagation is stopped, remove all other hover records\n              // An event handler is only allowed to flush other handlers if it is hovered itself\n\n              if (internal.hovered.size && Array.from(internal.hovered.values()).find(i => i.eventObject === hit.eventObject)) {\n                // Objects cannot flush out higher up objects that have already caught the event\n                const higher = intersections.slice(0, intersections.indexOf(hit));\n                cancelPointer([...higher, hit]);\n              }\n            }\n          },\n\n          // there should be a distinction between target and currentTarget\n          target: {\n            hasPointerCapture,\n            setPointerCapture,\n            releasePointerCapture\n          },\n          currentTarget: {\n            hasPointerCapture,\n            setPointerCapture,\n            releasePointerCapture\n          },\n          nativeEvent: event\n        }; // Call subscribers\n\n        callback(raycastEvent); // Event bubbling may be interrupted by stopPropagation\n\n        if (localState.stopped === true) break;\n      }\n    }\n\n    return intersections;\n  }\n\n  function cancelPointer(intersections) {\n    const {\n      internal\n    } = store.getState();\n\n    for (const hoveredObj of internal.hovered.values()) {\n      // When no objects were hit or the the hovered object wasn't found underneath the cursor\n      // we call onPointerOut and delete the object from the hovered-elements map\n      if (!intersections.length || !intersections.find(hit => hit.object === hoveredObj.object && hit.index === hoveredObj.index && hit.instanceId === hoveredObj.instanceId)) {\n        const eventObject = hoveredObj.eventObject;\n        const instance = eventObject.__r3f;\n        const handlers = instance == null ? void 0 : instance.handlers;\n        internal.hovered.delete(makeId(hoveredObj));\n\n        if (instance != null && instance.eventCount) {\n          // Clear out intersects, they are outdated by now\n          const data = { ...hoveredObj,\n            intersections\n          };\n          handlers.onPointerOut == null ? void 0 : handlers.onPointerOut(data);\n          handlers.onPointerLeave == null ? void 0 : handlers.onPointerLeave(data);\n        }\n      }\n    }\n  }\n\n  function pointerMissed(event, objects) {\n    for (let i = 0; i < objects.length; i++) {\n      const instance = objects[i].__r3f;\n      instance == null ? void 0 : instance.handlers.onPointerMissed == null ? void 0 : instance.handlers.onPointerMissed(event);\n    }\n  }\n\n  function handlePointer(name) {\n    // Deal with cancelation\n    switch (name) {\n      case 'onPointerLeave':\n      case 'onPointerCancel':\n        return () => cancelPointer([]);\n\n      case 'onLostPointerCapture':\n        return event => {\n          const {\n            internal\n          } = store.getState();\n\n          if ('pointerId' in event && !internal.capturedMap.has(event.pointerId)) {\n            // If the object event interface had onLostPointerCapture, we'd call it here on every\n            // object that's getting removed.\n            internal.capturedMap.delete(event.pointerId);\n            cancelPointer([]);\n          }\n        };\n    } // Any other pointer goes here ...\n\n\n    return function handleEvent(event) {\n      const {\n        onPointerMissed,\n        internal\n      } = store.getState(); // prepareRay(event)\n\n      internal.lastEvent.current = event; // Get fresh intersects\n\n      const isPointerMove = name === 'onPointerMove';\n      const isClickEvent = name === 'onClick' || name === 'onContextMenu' || name === 'onDoubleClick';\n      const filter = isPointerMove ? filterPointerEvents : undefined; // const hits = patchIntersects(intersect(filter), event)\n\n      const hits = intersect(event, filter);\n      const delta = isClickEvent ? calculateDistance(event) : 0; // Save initial coordinates on pointer-down\n\n      if (name === 'onPointerDown') {\n        internal.initialClick = [event.offsetX, event.offsetY];\n        internal.initialHits = hits.map(hit => hit.eventObject);\n      } // If a click yields no results, pass it back to the user as a miss\n      // Missed events have to come first in order to establish user-land side-effect clean up\n\n\n      if (isClickEvent && !hits.length) {\n        if (delta <= 2) {\n          pointerMissed(event, internal.interaction);\n          if (onPointerMissed) onPointerMissed(event);\n        }\n      } // Take care of unhover\n\n\n      if (isPointerMove) cancelPointer(hits);\n\n      function onIntersect(data) {\n        const eventObject = data.eventObject;\n        const instance = eventObject.__r3f;\n        const handlers = instance == null ? void 0 : instance.handlers; // Check presence of handlers\n\n        if (!(instance != null && instance.eventCount)) return;\n\n        if (isPointerMove) {\n          // Move event ...\n          if (handlers.onPointerOver || handlers.onPointerEnter || handlers.onPointerOut || handlers.onPointerLeave) {\n            // When enter or out is present take care of hover-state\n            const id = makeId(data);\n            const hoveredItem = internal.hovered.get(id);\n\n            if (!hoveredItem) {\n              // If the object wasn't previously hovered, book it and call its handler\n              internal.hovered.set(id, data);\n              handlers.onPointerOver == null ? void 0 : handlers.onPointerOver(data);\n              handlers.onPointerEnter == null ? void 0 : handlers.onPointerEnter(data);\n            } else if (hoveredItem.stopped) {\n              // If the object was previously hovered and stopped, we shouldn't allow other items to proceed\n              data.stopPropagation();\n            }\n          } // Call mouse move\n\n\n          handlers.onPointerMove == null ? void 0 : handlers.onPointerMove(data);\n        } else {\n          // All other events ...\n          const handler = handlers[name];\n\n          if (handler) {\n            // Forward all events back to their respective handlers with the exception of click events,\n            // which must use the initial target\n            if (!isClickEvent || internal.initialHits.includes(eventObject)) {\n              // Missed events have to come first\n              pointerMissed(event, internal.interaction.filter(object => !internal.initialHits.includes(object))); // Now call the handler\n\n              handler(data);\n            }\n          } else {\n            // Trigger onPointerMissed on all elements that have pointer over/out handlers, but not click and weren't hit\n            if (isClickEvent && internal.initialHits.includes(eventObject)) {\n              pointerMissed(event, internal.interaction.filter(object => !internal.initialHits.includes(object)));\n            }\n          }\n        }\n      }\n\n      handleIntersects(hits, event, delta, onIntersect);\n    };\n  }\n\n  return {\n    handlePointer\n  };\n}\n\nlet catalogue = {};\n\nlet extend = objects => void (catalogue = { ...catalogue,\n  ...objects\n});\n\nfunction createRenderer(_roots, _getEventPriority) {\n  function createInstance(type, {\n    args = [],\n    attach,\n    ...props\n  }, root) {\n    let name = `${type[0].toUpperCase()}${type.slice(1)}`;\n    let instance;\n\n    if (type === 'primitive') {\n      if (props.object === undefined) throw new Error(\"R3F: Primitives without 'object' are invalid!\");\n      const object = props.object;\n      instance = prepare(object, {\n        type,\n        root,\n        attach,\n        primitive: true\n      });\n    } else {\n      const target = catalogue[name];\n\n      if (!target) {\n        throw new Error(`R3F: ${name} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);\n      } // Throw if an object or literal was passed for args\n\n\n      if (!Array.isArray(args)) throw new Error('R3F: The args prop must be an array!'); // Instanciate new object, link it to the root\n      // Append memoized props with args so it's not forgotten\n\n      instance = prepare(new target(...args), {\n        type,\n        root,\n        attach,\n        // Save args in case we need to reconstruct later for HMR\n        memoizedProps: {\n          args\n        }\n      });\n    } // Auto-attach geometries and materials\n\n\n    if (instance.__r3f.attach === undefined) {\n      if (instance instanceof THREE.BufferGeometry) instance.__r3f.attach = 'geometry';else if (instance instanceof THREE.Material) instance.__r3f.attach = 'material';\n    } // It should NOT call onUpdate on object instanciation, because it hasn't been added to the\n    // view yet. If the callback relies on references for instance, they won't be ready yet, this is\n    // why it passes \"true\" here\n    // There is no reason to apply props to injects\n\n\n    if (name !== 'inject') applyProps$1(instance, props);\n    return instance;\n  }\n\n  function appendChild(parentInstance, child) {\n    let added = false;\n\n    if (child) {\n      var _child$__r3f, _parentInstance$__r3f;\n\n      // The attach attribute implies that the object attaches itself on the parent\n      if ((_child$__r3f = child.__r3f) != null && _child$__r3f.attach) {\n        attach(parentInstance, child, child.__r3f.attach);\n      } else if (child.isObject3D && parentInstance.isObject3D) {\n        // add in the usual parent-child way\n        parentInstance.add(child);\n        added = true;\n      } // This is for anything that used attach, and for non-Object3Ds that don't get attached to props;\n      // that is, anything that's a child in React but not a child in the scenegraph.\n\n\n      if (!added) (_parentInstance$__r3f = parentInstance.__r3f) == null ? void 0 : _parentInstance$__r3f.objects.push(child);\n      if (!child.__r3f) prepare(child, {});\n      child.__r3f.parent = parentInstance;\n      updateInstance(child);\n      invalidateInstance(child);\n    }\n  }\n\n  function insertBefore(parentInstance, child, beforeChild) {\n    let added = false;\n\n    if (child) {\n      var _child$__r3f2, _parentInstance$__r3f2;\n\n      if ((_child$__r3f2 = child.__r3f) != null && _child$__r3f2.attach) {\n        attach(parentInstance, child, child.__r3f.attach);\n      } else if (child.isObject3D && parentInstance.isObject3D) {\n        child.parent = parentInstance;\n        child.dispatchEvent({\n          type: 'added'\n        });\n        const restSiblings = parentInstance.children.filter(sibling => sibling !== child);\n        const index = restSiblings.indexOf(beforeChild);\n        parentInstance.children = [...restSiblings.slice(0, index), child, ...restSiblings.slice(index)];\n        added = true;\n      }\n\n      if (!added) (_parentInstance$__r3f2 = parentInstance.__r3f) == null ? void 0 : _parentInstance$__r3f2.objects.push(child);\n      if (!child.__r3f) prepare(child, {});\n      child.__r3f.parent = parentInstance;\n      updateInstance(child);\n      invalidateInstance(child);\n    }\n  }\n\n  function removeRecursive(array, parent, dispose = false) {\n    if (array) [...array].forEach(child => removeChild(parent, child, dispose));\n  }\n\n  function removeChild(parentInstance, child, dispose) {\n    if (child) {\n      var _parentInstance$__r3f3, _child$__r3f3, _child$__r3f5;\n\n      // Clear the parent reference\n      if (child.__r3f) child.__r3f.parent = null; // Remove child from the parents objects\n\n      if ((_parentInstance$__r3f3 = parentInstance.__r3f) != null && _parentInstance$__r3f3.objects) parentInstance.__r3f.objects = parentInstance.__r3f.objects.filter(x => x !== child); // Remove attachment\n\n      if ((_child$__r3f3 = child.__r3f) != null && _child$__r3f3.attach) {\n        detach(parentInstance, child, child.__r3f.attach);\n      } else if (child.isObject3D && parentInstance.isObject3D) {\n        var _child$__r3f4;\n\n        parentInstance.remove(child); // Remove interactivity\n\n        if ((_child$__r3f4 = child.__r3f) != null && _child$__r3f4.root) {\n          removeInteractivity(child.__r3f.root, child);\n        }\n      } // Allow objects to bail out of recursive dispose altogether by passing dispose={null}\n      // Never dispose of primitives because their state may be kept outside of React!\n      // In order for an object to be able to dispose it has to have\n      //   - a dispose method,\n      //   - it cannot be a <primitive object={...} />\n      //   - it cannot be a THREE.Scene, because three has broken it's own api\n      //\n      // Since disposal is recursive, we can check the optional dispose arg, which will be undefined\n      // when the reconciler calls it, but then carry our own check recursively\n\n\n      const isPrimitive = (_child$__r3f5 = child.__r3f) == null ? void 0 : _child$__r3f5.primitive;\n      const shouldDispose = dispose === undefined ? child.dispose !== null && !isPrimitive : dispose; // Remove nested child objects. Primitives should not have objects and children that are\n      // attached to them declaratively ...\n\n      if (!isPrimitive) {\n        var _child$__r3f6;\n\n        removeRecursive((_child$__r3f6 = child.__r3f) == null ? void 0 : _child$__r3f6.objects, child, shouldDispose);\n        removeRecursive(child.children, child, shouldDispose);\n      } // Remove references\n\n\n      if (child.__r3f) {\n        delete child.__r3f.root;\n        delete child.__r3f.objects;\n        delete child.__r3f.handlers;\n        delete child.__r3f.memoizedProps;\n        if (!isPrimitive) delete child.__r3f;\n      } // Dispose item whenever the reconciler feels like it\n\n\n      if (shouldDispose && child.dispose && child.type !== 'Scene') {\n        unstable_scheduleCallback(unstable_IdlePriority, () => {\n          try {\n            child.dispose();\n          } catch (e) {\n            /* ... */\n          }\n        });\n      }\n\n      invalidateInstance(parentInstance);\n    }\n  }\n\n  function switchInstance(instance, type, newProps, fiber) {\n    var _instance$__r3f;\n\n    const parent = (_instance$__r3f = instance.__r3f) == null ? void 0 : _instance$__r3f.parent;\n    if (!parent) return;\n    const newInstance = createInstance(type, newProps, instance.__r3f.root); // https://github.com/pmndrs/react-three-fiber/issues/1348\n    // When args change the instance has to be re-constructed, which then\n    // forces r3f to re-parent the children and non-scene objects\n\n    if (instance.children) {\n      for (const child of instance.children) {\n        if (child.__r3f) appendChild(newInstance, child);\n      }\n\n      instance.children = instance.children.filter(child => !child.__r3f);\n    }\n\n    instance.__r3f.objects.forEach(child => appendChild(newInstance, child));\n\n    instance.__r3f.objects = [];\n    removeChild(parent, instance);\n    appendChild(parent, newInstance); // Re-bind event handlers\n\n    if (newInstance.raycast && newInstance.__r3f.eventCount) {\n      const rootState = newInstance.__r3f.root.getState();\n\n      rootState.internal.interaction.push(newInstance);\n    } // This evil hack switches the react-internal fiber node\n    [fiber, fiber.alternate].forEach(fiber => {\n      if (fiber !== null) {\n        fiber.stateNode = newInstance;\n\n        if (fiber.ref) {\n          if (typeof fiber.ref === 'function') fiber.ref(newInstance);else fiber.ref.current = newInstance;\n        }\n      }\n    });\n  } // Don't handle text instances, warn on undefined behavior\n\n\n  const handleTextInstance = () => console.warn('Text is not allowed in the R3F tree! This could be stray whitespace or characters.');\n\n  const reconciler = Reconciler({\n    createInstance,\n    removeChild,\n    appendChild,\n    appendInitialChild: appendChild,\n    insertBefore,\n    supportsMutation: true,\n    isPrimaryRenderer: false,\n    supportsPersistence: false,\n    supportsHydration: false,\n    noTimeout: -1,\n    appendChildToContainer: (container, child) => {\n      if (!child) return; // Don't append to unmounted container\n\n      const scene = container.getState().scene;\n      if (!scene.__r3f) return; // Link current root to the default scene\n\n      scene.__r3f.root = container;\n      appendChild(scene, child);\n    },\n    removeChildFromContainer: (container, child) => {\n      if (!child) return;\n      removeChild(container.getState().scene, child);\n    },\n    insertInContainerBefore: (container, child, beforeChild) => {\n      if (!child || !beforeChild) return; // Don't append to unmounted container\n\n      const scene = container.getState().scene;\n      if (!scene.__r3f) return;\n      insertBefore(scene, child, beforeChild);\n    },\n    getRootHostContext: () => null,\n    getChildHostContext: parentHostContext => parentHostContext,\n\n    finalizeInitialChildren(instance) {\n      var _instance$__r3f2;\n\n      const localState = (_instance$__r3f2 = instance == null ? void 0 : instance.__r3f) != null ? _instance$__r3f2 : {}; // https://github.com/facebook/react/issues/20271\n      // Returning true will trigger commitMount\n\n      return Boolean(localState.handlers);\n    },\n\n    prepareUpdate(instance, _type, oldProps, newProps) {\n      // Create diff-sets\n      if (instance.__r3f.primitive && newProps.object && newProps.object !== instance) {\n        return [true];\n      } else {\n        // This is a data object, let's extract critical information about it\n        const {\n          args: argsNew = [],\n          children: cN,\n          ...restNew\n        } = newProps;\n        const {\n          args: argsOld = [],\n          children: cO,\n          ...restOld\n        } = oldProps; // Throw if an object or literal was passed for args\n\n        if (!Array.isArray(argsNew)) throw new Error('R3F: the args prop must be an array!'); // If it has new props or arguments, then it needs to be re-instantiated\n\n        if (argsNew.some((value, index) => value !== argsOld[index])) return [true]; // Create a diff-set, flag if there are any changes\n\n        const diff = diffProps(instance, restNew, restOld, true);\n        if (diff.changes.length) return [false, diff]; // Otherwise do not touch the instance\n\n        return null;\n      }\n    },\n\n    commitUpdate(instance, [reconstruct, diff], type, _oldProps, newProps, fiber) {\n      // Reconstruct when args or <primitive object={...} have changes\n      if (reconstruct) switchInstance(instance, type, newProps, fiber); // Otherwise just overwrite props\n      else applyProps$1(instance, diff);\n    },\n\n    commitMount(instance, _type, _props, _int) {\n      var _instance$__r3f3;\n\n      // https://github.com/facebook/react/issues/20271\n      // This will make sure events are only added once to the central container\n      const localState = (_instance$__r3f3 = instance.__r3f) != null ? _instance$__r3f3 : {};\n\n      if (instance.raycast && localState.handlers && localState.eventCount) {\n        instance.__r3f.root.getState().internal.interaction.push(instance);\n      }\n    },\n\n    getPublicInstance: instance => instance,\n    prepareForCommit: () => null,\n    preparePortalMount: container => prepare(container.getState().scene),\n    resetAfterCommit: () => {},\n    shouldSetTextContent: () => false,\n    clearContainer: () => false,\n\n    hideInstance(instance) {\n      var _instance$__r3f4;\n\n      // Detach while the instance is hidden\n      const {\n        attach: type,\n        parent\n      } = (_instance$__r3f4 = instance.__r3f) != null ? _instance$__r3f4 : {};\n      if (type && parent) detach(parent, instance, type);\n      if (instance.isObject3D) instance.visible = false;\n      invalidateInstance(instance);\n    },\n\n    unhideInstance(instance, props) {\n      var _instance$__r3f5;\n\n      // Re-attach when the instance is unhidden\n      const {\n        attach: type,\n        parent\n      } = (_instance$__r3f5 = instance.__r3f) != null ? _instance$__r3f5 : {};\n      if (type && parent) attach(parent, instance, type);\n      if (instance.isObject3D && props.visible == null || props.visible) instance.visible = true;\n      invalidateInstance(instance);\n    },\n\n    createTextInstance: handleTextInstance,\n    hideTextInstance: handleTextInstance,\n    unhideTextInstance: handleTextInstance,\n    // https://github.com/pmndrs/react-three-fiber/pull/2360#discussion_r916356874\n    // @ts-ignore\n    getCurrentEventPriority: () => _getEventPriority ? _getEventPriority() : DefaultEventPriority,\n    beforeActiveInstanceBlur: () => {},\n    afterActiveInstanceBlur: () => {},\n    detachDeletedInstance: () => {},\n    now: typeof performance !== 'undefined' && is.fun(performance.now) ? performance.now : is.fun(Date.now) ? Date.now : () => 0,\n    // https://github.com/pmndrs/react-three-fiber/pull/2360#discussion_r920883503\n    scheduleTimeout: is.fun(setTimeout) ? setTimeout : undefined,\n    cancelTimeout: is.fun(clearTimeout) ? clearTimeout : undefined\n  });\n  return {\n    reconciler,\n    applyProps: applyProps$1\n  };\n}\n\nconst privateKeys = ['set', 'get', 'setSize', 'setFrameloop', 'setDpr', 'events', 'invalidate', 'advance', 'size', 'viewport'];\nconst isRenderer = def => !!(def != null && def.render);\nconst context = /*#__PURE__*/React.createContext(null);\n\nconst createStore = (invalidate, advance) => {\n  const rootState = create((set, get) => {\n    const position = new THREE.Vector3();\n    const defaultTarget = new THREE.Vector3();\n    const tempTarget = new THREE.Vector3();\n\n    function getCurrentViewport(camera = get().camera, target = defaultTarget, size = get().size) {\n      const {\n        width,\n        height,\n        top,\n        left\n      } = size;\n      const aspect = width / height;\n      if (target instanceof THREE.Vector3) tempTarget.copy(target);else tempTarget.set(...target);\n      const distance = camera.getWorldPosition(position).distanceTo(tempTarget);\n\n      if (isOrthographicCamera(camera)) {\n        return {\n          width: width / camera.zoom,\n          height: height / camera.zoom,\n          top,\n          left,\n          factor: 1,\n          distance,\n          aspect\n        };\n      } else {\n        const fov = camera.fov * Math.PI / 180; // convert vertical fov to radians\n\n        const h = 2 * Math.tan(fov / 2) * distance; // visible height\n\n        const w = h * (width / height);\n        return {\n          width: w,\n          height: h,\n          top,\n          left,\n          factor: width / w,\n          distance,\n          aspect\n        };\n      }\n    }\n\n    let performanceTimeout = undefined;\n\n    const setPerformanceCurrent = current => set(state => ({\n      performance: { ...state.performance,\n        current\n      }\n    }));\n\n    const pointer = new THREE.Vector2();\n    const rootState = {\n      set,\n      get,\n      // Mock objects that have to be configured\n      gl: null,\n      camera: null,\n      raycaster: null,\n      events: {\n        priority: 1,\n        enabled: true,\n        connected: false\n      },\n      xr: null,\n      invalidate: (frames = 1) => invalidate(get(), frames),\n      advance: (timestamp, runGlobalEffects) => advance(timestamp, runGlobalEffects, get()),\n      legacy: false,\n      linear: false,\n      flat: false,\n      scene: prepare(new THREE.Scene()),\n      controls: null,\n      clock: new THREE.Clock(),\n      pointer,\n      mouse: pointer,\n      frameloop: 'always',\n      onPointerMissed: undefined,\n      performance: {\n        current: 1,\n        min: 0.5,\n        max: 1,\n        debounce: 200,\n        regress: () => {\n          const state = get(); // Clear timeout\n\n          if (performanceTimeout) clearTimeout(performanceTimeout); // Set lower bound performance\n\n          if (state.performance.current !== state.performance.min) setPerformanceCurrent(state.performance.min); // Go back to upper bound performance after a while unless something regresses meanwhile\n\n          performanceTimeout = setTimeout(() => setPerformanceCurrent(get().performance.max), state.performance.debounce);\n        }\n      },\n      size: {\n        width: 0,\n        height: 0,\n        top: 0,\n        left: 0,\n        updateStyle: false\n      },\n      viewport: {\n        initialDpr: 0,\n        dpr: 0,\n        width: 0,\n        height: 0,\n        top: 0,\n        left: 0,\n        aspect: 0,\n        distance: 0,\n        factor: 0,\n        getCurrentViewport\n      },\n      setEvents: events => set(state => ({ ...state,\n        events: { ...state.events,\n          ...events\n        }\n      })),\n      setSize: (width, height, updateStyle, top, left) => {\n        const camera = get().camera;\n        const size = {\n          width,\n          height,\n          top: top || 0,\n          left: left || 0,\n          updateStyle\n        };\n        set(state => ({\n          size,\n          viewport: { ...state.viewport,\n            ...getCurrentViewport(camera, defaultTarget, size)\n          }\n        }));\n      },\n      setDpr: dpr => set(state => {\n        const resolved = calculateDpr(dpr);\n        return {\n          viewport: { ...state.viewport,\n            dpr: resolved,\n            initialDpr: state.viewport.initialDpr || resolved\n          }\n        };\n      }),\n      setFrameloop: (frameloop = 'always') => {\n        const clock = get().clock; // if frameloop === \"never\" clock.elapsedTime is updated using advance(timestamp)\n\n        clock.stop();\n        clock.elapsedTime = 0;\n\n        if (frameloop !== 'never') {\n          clock.start();\n          clock.elapsedTime = 0;\n        }\n\n        set(() => ({\n          frameloop\n        }));\n      },\n      previousRoot: undefined,\n      internal: {\n        active: false,\n        priority: 0,\n        frames: 0,\n        lastEvent: /*#__PURE__*/React.createRef(),\n        interaction: [],\n        hovered: new Map(),\n        subscribers: [],\n        initialClick: [0, 0],\n        initialHits: [],\n        capturedMap: new Map(),\n        subscribe: (ref, priority, store) => {\n          const internal = get().internal; // If this subscription was given a priority, it takes rendering into its own hands\n          // For that reason we switch off automatic rendering and increase the manual flag\n          // As long as this flag is positive there can be no internal rendering at all\n          // because there could be multiple render subscriptions\n\n          internal.priority = internal.priority + (priority > 0 ? 1 : 0);\n          internal.subscribers.push({\n            ref,\n            priority,\n            store\n          }); // Register subscriber and sort layers from lowest to highest, meaning,\n          // highest priority renders last (on top of the other frames)\n\n          internal.subscribers = internal.subscribers.sort((a, b) => a.priority - b.priority);\n          return () => {\n            const internal = get().internal;\n\n            if (internal != null && internal.subscribers) {\n              // Decrease manual flag if this subscription had a priority\n              internal.priority = internal.priority - (priority > 0 ? 1 : 0); // Remove subscriber from list\n\n              internal.subscribers = internal.subscribers.filter(s => s.ref !== ref);\n            }\n          };\n        }\n      }\n    };\n    return rootState;\n  });\n  const state = rootState.getState();\n  let oldSize = state.size;\n  let oldDpr = state.viewport.dpr;\n  let oldCamera = state.camera;\n  rootState.subscribe(() => {\n    const {\n      camera,\n      size,\n      viewport,\n      gl,\n      set\n    } = rootState.getState(); // Resize camera and renderer on changes to size and pixelratio\n\n    if (size !== oldSize || viewport.dpr !== oldDpr) {\n      oldSize = size;\n      oldDpr = viewport.dpr; // Update camera & renderer\n\n      updateCamera(camera, size);\n      gl.setPixelRatio(viewport.dpr);\n      gl.setSize(size.width, size.height, size.updateStyle);\n    } // Update viewport once the camera changes\n\n\n    if (camera !== oldCamera) {\n      oldCamera = camera; // Update viewport\n\n      set(state => ({\n        viewport: { ...state.viewport,\n          ...state.viewport.getCurrentViewport(camera)\n        }\n      }));\n    }\n  }); // Invalidate on any change\n\n  rootState.subscribe(state => invalidate(state)); // Return root state\n\n  return rootState;\n};\n\nfunction createSubs(callback, subs) {\n  const sub = {\n    callback\n  };\n  subs.add(sub);\n  return () => void subs.delete(sub);\n}\n\nlet i;\nlet globalEffects = new Set();\nlet globalAfterEffects = new Set();\nlet globalTailEffects = new Set();\n/**\n * Adds a global render callback which is called each frame.\n * @see https://docs.pmnd.rs/react-three-fiber/api/additional-exports#addEffect\n */\n\nconst addEffect = callback => createSubs(callback, globalEffects);\n/**\n * Adds a global after-render callback which is called each frame.\n * @see https://docs.pmnd.rs/react-three-fiber/api/additional-exports#addAfterEffect\n */\n\nconst addAfterEffect = callback => createSubs(callback, globalAfterEffects);\n/**\n * Adds a global callback which is called when rendering stops.\n * @see https://docs.pmnd.rs/react-three-fiber/api/additional-exports#addTail\n */\n\nconst addTail = callback => createSubs(callback, globalTailEffects);\n\nfunction run(effects, timestamp) {\n  if (!effects.size) return;\n\n  for (const {\n    callback\n  } of effects.values()) {\n    callback(timestamp);\n  }\n}\n\nfunction flushGlobalEffects(type, timestamp) {\n  switch (type) {\n    case 'before':\n      return run(globalEffects, timestamp);\n\n    case 'after':\n      return run(globalAfterEffects, timestamp);\n\n    case 'tail':\n      return run(globalTailEffects, timestamp);\n  }\n}\nlet subscribers;\nlet subscription;\n\nfunction render$1(timestamp, state, frame) {\n  // Run local effects\n  let delta = state.clock.getDelta(); // In frameloop='never' mode, clock times are updated using the provided timestamp\n\n  if (state.frameloop === 'never' && typeof timestamp === 'number') {\n    delta = timestamp - state.clock.elapsedTime;\n    state.clock.oldTime = state.clock.elapsedTime;\n    state.clock.elapsedTime = timestamp;\n  } // Call subscribers (useFrame)\n\n\n  subscribers = state.internal.subscribers;\n\n  for (i = 0; i < subscribers.length; i++) {\n    subscription = subscribers[i];\n    subscription.ref.current(subscription.store.getState(), delta, frame);\n  } // Render content\n\n\n  if (!state.internal.priority && state.gl.render) state.gl.render(state.scene, state.camera); // Decrease frame count\n\n  state.internal.frames = Math.max(0, state.internal.frames - 1);\n  return state.frameloop === 'always' ? 1 : state.internal.frames;\n}\n\nfunction createLoop(roots) {\n  let running = false;\n  let repeat;\n  let frame;\n  let state;\n\n  function loop(timestamp) {\n    frame = requestAnimationFrame(loop);\n    running = true;\n    repeat = 0; // Run effects\n\n    flushGlobalEffects('before', timestamp); // Render all roots\n\n    for (const root of roots.values()) {\n      var _state$gl$xr;\n\n      state = root.store.getState(); // If the frameloop is invalidated, do not run another frame\n\n      if (state.internal.active && (state.frameloop === 'always' || state.internal.frames > 0) && !((_state$gl$xr = state.gl.xr) != null && _state$gl$xr.isPresenting)) {\n        repeat += render$1(timestamp, state);\n      }\n    } // Run after-effects\n\n\n    flushGlobalEffects('after', timestamp); // Stop the loop if nothing invalidates it\n\n    if (repeat === 0) {\n      // Tail call effects, they are called when rendering stops\n      flushGlobalEffects('tail', timestamp); // Flag end of operation\n\n      running = false;\n      return cancelAnimationFrame(frame);\n    }\n  }\n\n  function invalidate(state, frames = 1) {\n    var _state$gl$xr2;\n\n    if (!state) return roots.forEach(root => invalidate(root.store.getState()), frames);\n    if ((_state$gl$xr2 = state.gl.xr) != null && _state$gl$xr2.isPresenting || !state.internal.active || state.frameloop === 'never') return; // Increase frames, do not go higher than 60\n\n    state.internal.frames = Math.min(60, state.internal.frames + frames); // If the render-loop isn't active, start it\n\n    if (!running) {\n      running = true;\n      requestAnimationFrame(loop);\n    }\n  }\n\n  function advance(timestamp, runGlobalEffects = true, state, frame) {\n    if (runGlobalEffects) flushGlobalEffects('before', timestamp);\n    if (!state) for (const root of roots.values()) render$1(timestamp, root.store.getState());else render$1(timestamp, state, frame);\n    if (runGlobalEffects) flushGlobalEffects('after', timestamp);\n  }\n\n  return {\n    loop,\n\n    /**\n     * Invalidates the view, requesting a frame to be rendered. Will globally invalidate unless passed a root's state.\n     * @see https://docs.pmnd.rs/react-three-fiber/api/additional-exports#invalidate\n     */\n    invalidate,\n\n    /**\n     * Advances the frameloop and runs render effects, useful for when manually rendering via `frameloop=\"never\"`.\n     * @see https://docs.pmnd.rs/react-three-fiber/api/additional-exports#advance\n     */\n    advance\n  };\n}\n\n/**\n * Exposes an object's {@link LocalState}.\n * @see https://docs.pmnd.rs/react-three-fiber/api/additional-exports#useInstanceHandle\n *\n * **Note**: this is an escape hatch to react-internal fields. Expect this to change significantly between versions.\n */\nfunction useInstanceHandle(ref) {\n  const instance = React.useRef(null);\n  useIsomorphicLayoutEffect(() => void (instance.current = ref.current.__r3f), [ref]);\n  return instance;\n}\nfunction useStore() {\n  const store = React.useContext(context);\n  if (!store) throw new Error('R3F: Hooks can only be used within the Canvas component!');\n  return store;\n}\n/**\n * Accesses R3F's internal state, containing renderer, canvas, scene, etc.\n * @see https://docs.pmnd.rs/react-three-fiber/api/hooks#usethree\n */\n\nfunction useThree(selector = state => state, equalityFn) {\n  return useStore()(selector, equalityFn);\n}\n/**\n * Executes a callback before render in a shared frame loop.\n * Can order effects with render priority or manually render with a positive priority.\n * @see https://docs.pmnd.rs/react-three-fiber/api/hooks#useframe\n */\n\nfunction useFrame(callback, renderPriority = 0) {\n  const store = useStore();\n  const subscribe = store.getState().internal.subscribe; // Memoize ref\n\n  const ref = useMutableCallback(callback); // Subscribe on mount, unsubscribe on unmount\n\n  useIsomorphicLayoutEffect(() => subscribe(ref, renderPriority, store), [renderPriority, subscribe, store]);\n  return null;\n}\n/**\n * Returns a node graph of an object with named nodes & materials.\n * @see https://docs.pmnd.rs/react-three-fiber/api/hooks#usegraph\n */\n\nfunction useGraph(object) {\n  return React.useMemo(() => buildGraph(object), [object]);\n}\n\nfunction loadingFn(extensions, onProgress) {\n  return function (Proto, ...input) {\n    // Construct new loader and run extensions\n    const loader = new Proto();\n    if (extensions) extensions(loader); // Go through the urls and load them\n\n    return Promise.all(input.map(input => new Promise((res, reject) => loader.load(input, data => {\n      if (data.scene) Object.assign(data, buildGraph(data.scene));\n      res(data);\n    }, onProgress, error => reject(new Error(`Could not load ${input}: ${error.message})`))))));\n  };\n}\n/**\n * Synchronously loads and caches assets with a three loader.\n *\n * Note: this hook's caller must be wrapped with `React.Suspense`\n * @see https://docs.pmnd.rs/react-three-fiber/api/hooks#useloader\n */\n\n\nfunction useLoader(Proto, input, extensions, onProgress) {\n  // Use suspense to load async assets\n  const keys = Array.isArray(input) ? input : [input];\n  const results = suspend(loadingFn(extensions, onProgress), [Proto, ...keys], {\n    equal: is.equ\n  }); // Return the object/s\n\n  return Array.isArray(input) ? results : results[0];\n}\n/**\n * Preloads an asset into cache as a side-effect.\n */\n\nuseLoader.preload = function (Proto, input, extensions) {\n  const keys = Array.isArray(input) ? input : [input];\n  return preload(loadingFn(extensions), [Proto, ...keys]);\n};\n/**\n * Removes a loaded asset from cache.\n */\n\n\nuseLoader.clear = function (Proto, input) {\n  const keys = Array.isArray(input) ? input : [input];\n  return clear([Proto, ...keys]);\n};\n\nconst roots = new Map();\nconst {\n  invalidate,\n  advance\n} = createLoop(roots);\nconst {\n  reconciler,\n  applyProps\n} = createRenderer(roots, getEventPriority);\nconst shallowLoose = {\n  objects: 'shallow',\n  strict: false\n};\n\nconst createRendererInstance = (gl, canvas) => {\n  const customRenderer = typeof gl === 'function' ? gl(canvas) : gl;\n  if (isRenderer(customRenderer)) return customRenderer;else return new THREE.WebGLRenderer({\n    powerPreference: 'high-performance',\n    canvas: canvas,\n    antialias: true,\n    alpha: true,\n    ...gl\n  });\n};\n\nfunction isCanvas(maybeCanvas) {\n  return maybeCanvas instanceof HTMLCanvasElement;\n}\n\nfunction computeInitialSize(canvas, defaultSize) {\n  if (defaultSize) {\n    return defaultSize;\n  }\n\n  if (isCanvas(canvas) && canvas.parentElement) {\n    const {\n      width,\n      height,\n      top,\n      left\n    } = canvas.parentElement.getBoundingClientRect();\n    return {\n      width,\n      height,\n      top,\n      left\n    };\n  }\n\n  return {\n    width: 0,\n    height: 0,\n    top: 0,\n    left: 0\n  };\n}\n\nfunction createRoot(canvas) {\n  // Check against mistaken use of createRoot\n  const prevRoot = roots.get(canvas);\n  const prevFiber = prevRoot == null ? void 0 : prevRoot.fiber;\n  const prevStore = prevRoot == null ? void 0 : prevRoot.store;\n  if (prevRoot) console.warn('R3F.createRoot should only be called once!'); // Report when an error was detected in a previous render\n  // https://github.com/pmndrs/react-three-fiber/pull/2261\n\n  const logRecoverableError = typeof reportError === 'function' ? // In modern browsers, reportError will dispatch an error event,\n  // emulating an uncaught JavaScript error.\n  reportError : // In older browsers and test environments, fallback to console.error.\n  console.error; // Create store\n\n  const store = prevStore || createStore(invalidate, advance); // Create renderer\n\n  const fiber = prevFiber || reconciler.createContainer(store, ConcurrentRoot, null, false, null, '', logRecoverableError, null); // Map it\n\n  if (!prevRoot) roots.set(canvas, {\n    fiber,\n    store\n  }); // Locals\n\n  let onCreated;\n  let configured = false;\n  return {\n    configure(props = {}) {\n      let {\n        gl: glConfig,\n        size: propsSize,\n        events,\n        onCreated: onCreatedCallback,\n        shadows = false,\n        linear = false,\n        flat = false,\n        legacy = false,\n        orthographic = false,\n        frameloop = 'always',\n        dpr = [1, 2],\n        performance,\n        raycaster: raycastOptions,\n        camera: cameraOptions,\n        onPointerMissed\n      } = props;\n      let state = store.getState(); // Set up renderer (one time only!)\n\n      let gl = state.gl;\n      if (!state.gl) state.set({\n        gl: gl = createRendererInstance(glConfig, canvas)\n      }); // Set up raycaster (one time only!)\n\n      let raycaster = state.raycaster;\n      if (!raycaster) state.set({\n        raycaster: raycaster = new THREE.Raycaster()\n      }); // Set raycaster options\n\n      const {\n        params,\n        ...options\n      } = raycastOptions || {};\n      if (!is.equ(options, raycaster, shallowLoose)) applyProps(raycaster, { ...options\n      });\n      if (!is.equ(params, raycaster.params, shallowLoose)) applyProps(raycaster, {\n        params: { ...raycaster.params,\n          ...params\n        }\n      }); // Create default camera (one time only!)\n\n      if (!state.camera) {\n        const isCamera = cameraOptions instanceof THREE.Camera;\n        const camera = isCamera ? cameraOptions : orthographic ? new THREE.OrthographicCamera(0, 0, 0, 0, 0.1, 1000) : new THREE.PerspectiveCamera(75, 0, 0.1, 1000);\n\n        if (!isCamera) {\n          camera.position.z = 5;\n          if (cameraOptions) applyProps(camera, cameraOptions); // Always look at center by default\n\n          if (!(cameraOptions != null && cameraOptions.rotation)) camera.lookAt(0, 0, 0);\n        }\n\n        state.set({\n          camera\n        });\n      } // Set up XR (one time only!)\n\n\n      if (!state.xr) {\n        // Handle frame behavior in WebXR\n        const handleXRFrame = (timestamp, frame) => {\n          const state = store.getState();\n          if (state.frameloop === 'never') return;\n          advance(timestamp, true, state, frame);\n        }; // Toggle render switching on session\n\n\n        const handleSessionChange = () => {\n          const state = store.getState();\n          state.gl.xr.enabled = state.gl.xr.isPresenting;\n          state.gl.xr.setAnimationLoop(state.gl.xr.isPresenting ? handleXRFrame : null);\n          if (!state.gl.xr.isPresenting) invalidate(state);\n        }; // WebXR session manager\n\n\n        const xr = {\n          connect() {\n            const gl = store.getState().gl;\n            gl.xr.addEventListener('sessionstart', handleSessionChange);\n            gl.xr.addEventListener('sessionend', handleSessionChange);\n          },\n\n          disconnect() {\n            const gl = store.getState().gl;\n            gl.xr.removeEventListener('sessionstart', handleSessionChange);\n            gl.xr.removeEventListener('sessionend', handleSessionChange);\n          }\n\n        }; // Subscribe to WebXR session events\n\n        if (gl.xr) xr.connect();\n        state.set({\n          xr\n        });\n      } // Set shadowmap\n\n\n      if (gl.shadowMap) {\n        const isBoolean = is.boo(shadows);\n\n        if (isBoolean && gl.shadowMap.enabled !== shadows || !is.equ(shadows, gl.shadowMap, shallowLoose)) {\n          const old = gl.shadowMap.enabled;\n          gl.shadowMap.enabled = !!shadows;\n          if (!isBoolean) Object.assign(gl.shadowMap, shadows);else gl.shadowMap.type = THREE.PCFSoftShadowMap;\n          if (old !== gl.shadowMap.enabled) gl.shadowMap.needsUpdate = true;\n        }\n      } // Safely set color management if available.\n      // Avoid accessing THREE.ColorManagement to play nice with older versions\n\n\n      if ('ColorManagement' in THREE) {\n        setDeep(THREE, legacy, ['ColorManagement', 'legacyMode']);\n      }\n\n      const outputEncoding = linear ? THREE.LinearEncoding : THREE.sRGBEncoding;\n      const toneMapping = flat ? THREE.NoToneMapping : THREE.ACESFilmicToneMapping;\n      if (gl.outputEncoding !== outputEncoding) gl.outputEncoding = outputEncoding;\n      if (gl.toneMapping !== toneMapping) gl.toneMapping = toneMapping; // Update color management state\n\n      if (state.legacy !== legacy) state.set(() => ({\n        legacy\n      }));\n      if (state.linear !== linear) state.set(() => ({\n        linear\n      }));\n      if (state.flat !== flat) state.set(() => ({\n        flat\n      })); // Set gl props\n\n      if (glConfig && !is.fun(glConfig) && !isRenderer(glConfig) && !is.equ(glConfig, gl, shallowLoose)) applyProps(gl, glConfig); // Store events internally\n\n      if (events && !state.events.handlers) state.set({\n        events: events(store)\n      }); // Check pixelratio\n\n      if (dpr && state.viewport.dpr !== calculateDpr(dpr)) state.setDpr(dpr); // Check size, allow it to take on container bounds initially\n\n      const size = computeInitialSize(canvas, propsSize);\n\n      if (!is.equ(size, state.size, shallowLoose)) {\n        state.setSize(size.width, size.height, size.updateStyle, size.top, size.left);\n      } // Check frameloop\n\n\n      if (state.frameloop !== frameloop) state.setFrameloop(frameloop); // Check pointer missed\n\n      if (!state.onPointerMissed) state.set({\n        onPointerMissed\n      }); // Check performance\n\n      if (performance && !is.equ(performance, state.performance, shallowLoose)) state.set(state => ({\n        performance: { ...state.performance,\n          ...performance\n        }\n      })); // Set locals\n\n      onCreated = onCreatedCallback;\n      configured = true;\n      return this;\n    },\n\n    render(children) {\n      // The root has to be configured before it can be rendered\n      if (!configured) this.configure();\n      reconciler.updateContainer( /*#__PURE__*/React.createElement(Provider, {\n        store: store,\n        children: children,\n        onCreated: onCreated,\n        rootElement: canvas\n      }), fiber, null, () => undefined);\n      return store;\n    },\n\n    unmount() {\n      unmountComponentAtNode(canvas);\n    }\n\n  };\n}\n\nfunction render(children, canvas, config) {\n  console.warn('R3F.render is no longer supported in React 18. Use createRoot instead!');\n  const root = createRoot(canvas);\n  root.configure(config);\n  return root.render(children);\n}\n\nfunction Provider({\n  store,\n  children,\n  onCreated,\n  rootElement\n}) {\n  useIsomorphicLayoutEffect(() => {\n    const state = store.getState(); // Flag the canvas active, rendering will now begin\n\n    state.set(state => ({\n      internal: { ...state.internal,\n        active: true\n      }\n    })); // Notifiy that init is completed, the scene graph exists, but nothing has yet rendered\n\n    if (onCreated) onCreated(state); // Connect events to the targets parent, this is done to ensure events are registered on\n    // a shared target, and not on the canvas itself\n\n    if (!store.getState().events.connected) state.events.connect == null ? void 0 : state.events.connect(rootElement); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return /*#__PURE__*/React.createElement(context.Provider, {\n    value: store\n  }, children);\n}\n\nfunction unmountComponentAtNode(canvas, callback) {\n  const root = roots.get(canvas);\n  const fiber = root == null ? void 0 : root.fiber;\n\n  if (fiber) {\n    const state = root == null ? void 0 : root.store.getState();\n    if (state) state.internal.active = false;\n    reconciler.updateContainer(null, fiber, null, () => {\n      if (state) {\n        setTimeout(() => {\n          try {\n            var _state$gl, _state$gl$renderLists, _state$gl2, _state$gl3;\n\n            state.events.disconnect == null ? void 0 : state.events.disconnect();\n            (_state$gl = state.gl) == null ? void 0 : (_state$gl$renderLists = _state$gl.renderLists) == null ? void 0 : _state$gl$renderLists.dispose == null ? void 0 : _state$gl$renderLists.dispose();\n            (_state$gl2 = state.gl) == null ? void 0 : _state$gl2.forceContextLoss == null ? void 0 : _state$gl2.forceContextLoss();\n            if ((_state$gl3 = state.gl) != null && _state$gl3.xr) state.xr.disconnect();\n            dispose(state);\n            roots.delete(canvas);\n            if (callback) callback(canvas);\n          } catch (e) {\n            /* ... */\n          }\n        }, 500);\n      }\n    });\n  }\n}\n\nfunction createPortal(children, container, state) {\n  return /*#__PURE__*/React.createElement(Portal, {\n    key: container.uuid,\n    children: children,\n    container: container,\n    state: state\n  });\n}\n\nfunction Portal({\n  state = {},\n  children,\n  container\n}) {\n  /** This has to be a component because it would not be able to call useThree/useStore otherwise since\n   *  if this is our environment, then we are not in r3f's renderer but in react-dom, it would trigger\n   *  the \"R3F hooks can only be used within the Canvas component!\" warning:\n   *  <Canvas>\n   *    {createPortal(...)} */\n  const {\n    events,\n    size,\n    ...rest\n  } = state;\n  const previousRoot = useStore();\n  const [raycaster] = React.useState(() => new THREE.Raycaster());\n  const [pointer] = React.useState(() => new THREE.Vector2());\n  const inject = React.useCallback((rootState, injectState) => {\n    const intersect = { ...rootState\n    }; // all prev state props\n    // Only the fields of \"rootState\" that do not differ from injectState\n    // Some props should be off-limits\n    // Otherwise filter out the props that are different and let the inject layer take precedence\n\n    Object.keys(rootState).forEach(key => {\n      if ( // Some props should be off-limits\n      privateKeys.includes(key) || // Otherwise filter out the props that are different and let the inject layer take precedence\n      rootState[key] !== injectState[key]) {\n        delete intersect[key];\n      }\n    });\n    let viewport = undefined;\n\n    if (injectState && size) {\n      const camera = injectState.camera; // Calculate the override viewport, if present\n\n      viewport = rootState.viewport.getCurrentViewport(camera, new THREE.Vector3(), size); // Update the portal camera, if it differs from the previous layer\n\n      if (camera !== rootState.camera) updateCamera(camera, size);\n    }\n\n    return { // The intersect consists of the previous root state\n      ...intersect,\n      // Portals have their own scene, which forms the root, a raycaster and a pointer\n      scene: container,\n      raycaster,\n      pointer,\n      mouse: pointer,\n      // Their previous root is the layer before it\n      previousRoot,\n      // Events, size and viewport can be overridden by the inject layer\n      events: { ...rootState.events,\n        ...(injectState == null ? void 0 : injectState.events),\n        ...events\n      },\n      size: { ...rootState.size,\n        ...size\n      },\n      viewport: { ...rootState.viewport,\n        ...viewport\n      },\n      ...rest\n    };\n  }, [state]);\n  const [usePortalStore] = React.useState(() => {\n    // Create a mirrored store, based on the previous root with a few overrides ...\n    const previousState = previousRoot.getState();\n    const store = create((set, get) => ({ ...previousState,\n      scene: container,\n      raycaster,\n      pointer,\n      mouse: pointer,\n      previousRoot,\n      events: { ...previousState.events,\n        ...events\n      },\n      size: { ...previousState.size,\n        ...size\n      },\n      ...rest,\n      // Set and get refer to this root-state\n      set,\n      get,\n      // Layers are allowed to override events\n      setEvents: events => set(state => ({ ...state,\n        events: { ...state.events,\n          ...events\n        }\n      }))\n    }));\n    return store;\n  });\n  React.useEffect(() => {\n    // Subscribe to previous root-state and copy changes over to the mirrored portal-state\n    const unsub = previousRoot.subscribe(prev => usePortalStore.setState(state => inject(prev, state)));\n    return () => {\n      unsub();\n      usePortalStore.destroy();\n    };\n  }, []);\n  React.useEffect(() => {\n    usePortalStore.setState(injectState => inject(previousRoot.getState(), injectState));\n  }, [inject]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, reconciler.createPortal( /*#__PURE__*/React.createElement(context.Provider, {\n    value: usePortalStore\n  }, children), usePortalStore, null));\n}\n\nreconciler.injectIntoDevTools({\n  bundleType: process.env.NODE_ENV === 'production' ? 0 : 1,\n  rendererPackageName: '@react-three/fiber',\n  version: React.version\n});\nconst act = React.unstable_act;\n\nexport { useGraph as A, Block as B, useLoader as C, ErrorBoundary as E, createRoot as a, useIsomorphicLayoutEffect as b, createEvents as c, unmountComponentAtNode as d, extend as e, context as f, createPortal as g, reconciler as h, isRef as i, applyProps as j, dispose as k, invalidate as l, advance as m, addEffect as n, addAfterEffect as o, addTail as p, getRootState as q, render as r, act as s, threeTypes as t, useMutableCallback as u, roots as v, useInstanceHandle as w, useStore as x, useThree as y, useFrame as z };\n","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _toArray(arr) {\n  return arrayWithHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableRest();\n}","import { useState, useRef, useEffect, useMemo } from 'react';\nimport createDebounce from 'debounce';\n\nfunction useMeasure(_temp) {\n  let {\n    debounce,\n    scroll,\n    polyfill,\n    offsetSize\n  } = _temp === void 0 ? {\n    debounce: 0,\n    scroll: false,\n    offsetSize: false\n  } : _temp;\n  const ResizeObserver = polyfill || (typeof window === 'undefined' ? class ResizeObserver {} : window.ResizeObserver);\n\n  if (!ResizeObserver) {\n    throw new Error('This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills');\n  }\n\n  const [bounds, set] = useState({\n    left: 0,\n    top: 0,\n    width: 0,\n    height: 0,\n    bottom: 0,\n    right: 0,\n    x: 0,\n    y: 0\n  }); // keep all state in a ref\n\n  const state = useRef({\n    element: null,\n    scrollContainers: null,\n    resizeObserver: null,\n    lastBounds: bounds\n  }); // set actual debounce values early, so effects know if they should react accordingly\n\n  const scrollDebounce = debounce ? typeof debounce === 'number' ? debounce : debounce.scroll : null;\n  const resizeDebounce = debounce ? typeof debounce === 'number' ? debounce : debounce.resize : null; // make sure to update state only as long as the component is truly mounted\n\n  const mounted = useRef(false);\n  useEffect(() => {\n    mounted.current = true;\n    return () => void (mounted.current = false);\n  }); // memoize handlers, so event-listeners know when they should update\n\n  const [forceRefresh, resizeChange, scrollChange] = useMemo(() => {\n    const callback = () => {\n      if (!state.current.element) return;\n      const {\n        left,\n        top,\n        width,\n        height,\n        bottom,\n        right,\n        x,\n        y\n      } = state.current.element.getBoundingClientRect();\n      const size = {\n        left,\n        top,\n        width,\n        height,\n        bottom,\n        right,\n        x,\n        y\n      };\n\n      if (state.current.element instanceof HTMLElement && offsetSize) {\n        size.height = state.current.element.offsetHeight;\n        size.width = state.current.element.offsetWidth;\n      }\n\n      Object.freeze(size);\n      if (mounted.current && !areBoundsEqual(state.current.lastBounds, size)) set(state.current.lastBounds = size);\n    };\n\n    return [callback, resizeDebounce ? createDebounce(callback, resizeDebounce) : callback, scrollDebounce ? createDebounce(callback, scrollDebounce) : callback];\n  }, [set, offsetSize, scrollDebounce, resizeDebounce]); // cleanup current scroll-listeners / observers\n\n  function removeListeners() {\n    if (state.current.scrollContainers) {\n      state.current.scrollContainers.forEach(element => element.removeEventListener('scroll', scrollChange, true));\n      state.current.scrollContainers = null;\n    }\n\n    if (state.current.resizeObserver) {\n      state.current.resizeObserver.disconnect();\n      state.current.resizeObserver = null;\n    }\n  } // add scroll-listeners / observers\n\n\n  function addListeners() {\n    if (!state.current.element) return;\n    state.current.resizeObserver = new ResizeObserver(scrollChange);\n    state.current.resizeObserver.observe(state.current.element);\n\n    if (scroll && state.current.scrollContainers) {\n      state.current.scrollContainers.forEach(scrollContainer => scrollContainer.addEventListener('scroll', scrollChange, {\n        capture: true,\n        passive: true\n      }));\n    }\n  } // the ref we expose to the user\n\n\n  const ref = node => {\n    if (!node || node === state.current.element) return;\n    removeListeners();\n    state.current.element = node;\n    state.current.scrollContainers = findScrollContainers(node);\n    addListeners();\n  }; // add general event listeners\n\n\n  useOnWindowScroll(scrollChange, Boolean(scroll));\n  useOnWindowResize(resizeChange); // respond to changes that are relevant for the listeners\n\n  useEffect(() => {\n    removeListeners();\n    addListeners();\n  }, [scroll, scrollChange, resizeChange]); // remove all listeners when the components unmounts\n\n  useEffect(() => removeListeners, []);\n  return [ref, bounds, forceRefresh];\n} // Adds native resize listener to window\n\n\nfunction useOnWindowResize(onWindowResize) {\n  useEffect(() => {\n    const cb = onWindowResize;\n    window.addEventListener('resize', cb);\n    return () => void window.removeEventListener('resize', cb);\n  }, [onWindowResize]);\n}\n\nfunction useOnWindowScroll(onScroll, enabled) {\n  useEffect(() => {\n    if (enabled) {\n      const cb = onScroll;\n      window.addEventListener('scroll', cb, {\n        capture: true,\n        passive: true\n      });\n      return () => void window.removeEventListener('scroll', cb, true);\n    }\n  }, [onScroll, enabled]);\n} // Returns a list of scroll offsets\n\n\nfunction findScrollContainers(element) {\n  const result = [];\n  if (!element || element === document.body) return result;\n  const {\n    overflow,\n    overflowX,\n    overflowY\n  } = window.getComputedStyle(element);\n  if ([overflow, overflowX, overflowY].some(prop => prop === 'auto' || prop === 'scroll')) result.push(element);\n  return [...result, ...findScrollContainers(element.parentElement)];\n} // Checks if element boundaries are equal\n\n\nconst keys = ['x', 'y', 'top', 'bottom', 'left', 'right', 'width', 'height'];\n\nconst areBoundsEqual = (a, b) => keys.every(key => a[key] === b[key]);\n\nexport { useMeasure as default };\n","import * as React from 'react'\nimport type ReactReconciler from 'react-reconciler'\n\n/**\n * Represents a react-internal Fiber node.\n */\nexport type Fiber<T = any> = Omit<ReactReconciler.Fiber, 'stateNode'> & { stateNode: T }\n\n/**\n * Represents a {@link Fiber} node selector for traversal.\n */\nexport type FiberSelector<T = any> = (\n  /** The current {@link Fiber} node. */\n  node: Fiber<T | null>,\n) => boolean | void\n\n/**\n * Traverses up or down a {@link Fiber}, return `true` to stop and select a node.\n */\nexport function traverseFiber<T = any>(\n  /** Input {@link Fiber} to traverse. */\n  fiber: Fiber | undefined,\n  /** Whether to ascend and walk up the tree. Will walk down if `false`. */\n  ascending: boolean,\n  /** A {@link Fiber} node selector, returns the first match when `true` is passed. */\n  selector: FiberSelector<T>,\n): Fiber<T> | undefined {\n  if (!fiber) return\n  if (selector(fiber) === true) return fiber\n\n  let child = ascending ? fiber.return : fiber.child\n  while (child) {\n    const match = traverseFiber(child, ascending, selector)\n    if (match) return match\n\n    child = ascending ? null : child.sibling\n  }\n}\n\n// In development, React will warn about using contexts between renderers.\n// Hide the warning because its-fine fixes this issue\n// https://github.com/facebook/react/pull/12779\nfunction wrapContext<T>(context: React.Context<T>): React.Context<T> {\n  try {\n    return Object.defineProperties(context, {\n      _currentRenderer: {\n        get() {\n          return null\n        },\n        set() {},\n      },\n      _currentRenderer2: {\n        get() {\n          return null\n        },\n        set() {},\n      },\n    })\n  } catch (_) {\n    return context\n  }\n}\n\nconst FiberContext = wrapContext(React.createContext<Fiber>(null!))\n\n/**\n * A react-internal {@link Fiber} provider. This component binds React children to the React Fiber tree. Call its-fine hooks within this.\n */\nexport class FiberProvider extends React.Component<{ children?: React.ReactNode }> {\n  private _reactInternals!: Fiber\n\n  render() {\n    return <FiberContext.Provider value={this._reactInternals}>{this.props.children}</FiberContext.Provider>\n  }\n}\n\ninterface ReactInternal {\n  __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED: {\n    ReactCurrentOwner: React.RefObject<Fiber>\n    ReactCurrentDispatcher: React.RefObject<{ readContext<T>(context: React.Context<T>): T }>\n  }\n}\n\nconst { ReactCurrentOwner, ReactCurrentDispatcher } = (React as unknown as ReactInternal)\n  .__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED\n\n/**\n * Returns the current react-internal {@link Fiber}. This is an implementation detail of [react-reconciler](https://github.com/facebook/react/tree/main/packages/react-reconciler).\n */\nexport function useFiber(): Fiber<null> | undefined {\n  const root = React.useContext(FiberContext)\n  if (root === null) throw new Error('its-fine: useFiber must be called within a <FiberProvider />!')\n\n  // In development mode, React will expose the current component's Fiber as ReactCurrentOwner.\n  // In production, we don't have this luxury and must traverse from FiberProvider via useId\n  const id = React.useId()\n  const fiber = React.useMemo(() => {\n    for (const maybeFiber of [ReactCurrentOwner?.current, root, root?.alternate]) {\n      if (!maybeFiber) continue\n      const fiber = traverseFiber<null>(maybeFiber, false, (node) => {\n        let state = node.memoizedState\n        while (state) {\n          if (state.memoizedState === id) return true\n          state = state.next\n        }\n      })\n      if (fiber) return fiber\n    }\n  }, [root, id])\n\n  return fiber\n}\n\n/**\n * Represents a react-reconciler container instance.\n */\nexport interface ContainerInstance<T = any> {\n  containerInfo: T\n}\n\n/**\n * Returns the current react-reconciler container info passed to {@link ReactReconciler.Reconciler.createContainer}.\n *\n * In react-dom, a container will point to the root DOM element; in react-three-fiber, it will point to the root Zustand store.\n */\nexport function useContainer<T = any>(): T | undefined {\n  const fiber = useFiber()\n  const root = React.useMemo(\n    () => traverseFiber<ContainerInstance<T>>(fiber, true, (node) => node.stateNode?.containerInfo != null),\n    [fiber],\n  )\n\n  return root?.stateNode.containerInfo\n}\n\n/**\n * Returns the nearest react-reconciler child instance or the node created from {@link ReactReconciler.HostConfig.createInstance}.\n *\n * In react-dom, this would be a DOM element; in react-three-fiber this would be an instance descriptor.\n */\nexport function useNearestChild<T = any>(\n  /** An optional element type to filter to. */\n  type?: keyof JSX.IntrinsicElements,\n): React.MutableRefObject<T | undefined> {\n  const fiber = useFiber()\n  const childRef = React.useRef<T>()\n\n  React.useLayoutEffect(() => {\n    childRef.current = traverseFiber<T>(\n      fiber,\n      false,\n      (node) => typeof node.type === 'string' && (type === undefined || node.type === type),\n    )?.stateNode\n  }, [fiber])\n\n  return childRef\n}\n\n/**\n * Returns the nearest react-reconciler parent instance or the node created from {@link ReactReconciler.HostConfig.createInstance}.\n *\n * In react-dom, this would be a DOM element; in react-three-fiber this would be an instance descriptor.\n */\nexport function useNearestParent<T = any>(\n  /** An optional element type to filter to. */\n  type?: keyof JSX.IntrinsicElements,\n): React.MutableRefObject<T | undefined> {\n  const fiber = useFiber()\n  const parentRef = React.useRef<T>()\n\n  React.useLayoutEffect(() => {\n    parentRef.current = traverseFiber<T>(\n      fiber,\n      true,\n      (node) => typeof node.type === 'string' && (type === undefined || node.type === type),\n    )?.stateNode\n  }, [fiber])\n\n  return parentRef\n}\n\nexport type ContextMap = Map<React.Context<any>, any> & {\n  get<T>(context: React.Context<T>): T | undefined\n}\n\n/**\n * Returns a map of all contexts and their values.\n */\nexport function useContextMap(): ContextMap {\n  const fiber = useFiber()\n  const [contextMap] = React.useState(() => new Map<React.Context<any>, any>())\n\n  // Collect live context\n  contextMap.clear()\n  let node = fiber\n  while (node) {\n    const context = node.type?._context\n    if (context && context !== FiberContext && !contextMap.has(context)) {\n      contextMap.set(context, ReactCurrentDispatcher?.current?.readContext(wrapContext(context)))\n    }\n    node = node.return!\n  }\n\n  return contextMap\n}\n\n/**\n * Represents a react-context bridge provider component.\n */\nexport type ContextBridge = React.FC<React.PropsWithChildren<{}>>\n\n/**\n * React Context currently cannot be shared across [React renderers](https://reactjs.org/docs/codebase-overview.html#renderers) but explicitly forwarded between providers (see [react#17275](https://github.com/facebook/react/issues/17275)). This hook returns a {@link ContextBridge} of live context providers to pierce Context across renderers.\n *\n * Pass {@link ContextBridge} as a component to a secondary renderer to enable context-sharing within its children.\n */\nexport function useContextBridge(): ContextBridge {\n  const contextMap = useContextMap()\n\n  // Flatten context and their memoized values into a `ContextBridge` provider\n  return React.useMemo(\n    () =>\n      Array.from(contextMap.keys()).reduce(\n        (Prev, context) => (props) =>\n          (\n            <Prev>\n              <context.Provider {...props} value={contextMap.get(context)} />\n            </Prev>\n          ),\n        (props) => <FiberProvider {...props} />,\n      ),\n    [contextMap],\n  )\n}\n","import { c as createEvents, e as extend, u as useMutableCallback, a as createRoot, i as isRef, E as ErrorBoundary, B as Block, b as useIsomorphicLayoutEffect, d as unmountComponentAtNode } from './index-21f75f82.esm.js';\nexport { t as ReactThreeFiber, v as _roots, s as act, o as addAfterEffect, n as addEffect, p as addTail, m as advance, j as applyProps, f as context, c as createEvents, g as createPortal, a as createRoot, k as dispose, e as extend, q as getRootState, l as invalidate, h as reconciler, r as render, d as unmountComponentAtNode, z as useFrame, A as useGraph, w as useInstanceHandle, C as useLoader, x as useStore, y as useThree } from './index-21f75f82.esm.js';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport * as THREE from 'three';\nimport useMeasure from 'react-use-measure';\nimport { FiberProvider, useContextBridge } from 'its-fine';\nimport 'react-reconciler/constants';\nimport 'zustand';\nimport 'react-reconciler';\nimport 'scheduler';\nimport 'suspend-react';\n\nconst DOM_EVENTS = {\n  onClick: ['click', false],\n  onContextMenu: ['contextmenu', false],\n  onDoubleClick: ['dblclick', false],\n  onWheel: ['wheel', true],\n  onPointerDown: ['pointerdown', true],\n  onPointerUp: ['pointerup', true],\n  onPointerLeave: ['pointerleave', true],\n  onPointerMove: ['pointermove', true],\n  onPointerCancel: ['pointercancel', true],\n  onLostPointerCapture: ['lostpointercapture', true]\n};\n/** Default R3F event manager for web */\n\nfunction createPointerEvents(store) {\n  const {\n    handlePointer\n  } = createEvents(store);\n  return {\n    priority: 1,\n    enabled: true,\n\n    compute(event, state, previous) {\n      // https://github.com/pmndrs/react-three-fiber/pull/782\n      // Events trigger outside of canvas when moved, use offsetX/Y by default and allow overrides\n      state.pointer.set(event.offsetX / state.size.width * 2 - 1, -(event.offsetY / state.size.height) * 2 + 1);\n      state.raycaster.setFromCamera(state.pointer, state.camera);\n    },\n\n    connected: undefined,\n    handlers: Object.keys(DOM_EVENTS).reduce((acc, key) => ({ ...acc,\n      [key]: handlePointer(key)\n    }), {}),\n    connect: target => {\n      var _events$handlers;\n\n      const {\n        set,\n        events\n      } = store.getState();\n      events.disconnect == null ? void 0 : events.disconnect();\n      set(state => ({\n        events: { ...state.events,\n          connected: target\n        }\n      }));\n      Object.entries((_events$handlers = events.handlers) != null ? _events$handlers : []).forEach(([name, event]) => {\n        const [eventName, passive] = DOM_EVENTS[name];\n        target.addEventListener(eventName, event, {\n          passive\n        });\n      });\n    },\n    disconnect: () => {\n      const {\n        set,\n        events\n      } = store.getState();\n\n      if (events.connected) {\n        var _events$handlers2;\n\n        Object.entries((_events$handlers2 = events.handlers) != null ? _events$handlers2 : []).forEach(([name, event]) => {\n          if (events && events.connected instanceof HTMLElement) {\n            const [eventName] = DOM_EVENTS[name];\n            events.connected.removeEventListener(eventName, event);\n          }\n        });\n        set(state => ({\n          events: { ...state.events,\n            connected: undefined\n          }\n        }));\n      }\n    }\n  };\n}\n\nconst CanvasImpl = /*#__PURE__*/React.forwardRef(function Canvas({\n  children,\n  fallback,\n  resize,\n  style,\n  gl,\n  events = createPointerEvents,\n  eventSource,\n  eventPrefix,\n  shadows,\n  linear,\n  flat,\n  legacy,\n  orthographic,\n  frameloop,\n  dpr,\n  performance,\n  raycaster,\n  camera,\n  onPointerMissed,\n  onCreated,\n  ...props\n}, forwardedRef) {\n  // Create a known catalogue of Threejs-native elements\n  // This will include the entire THREE namespace by default, users can extend\n  // their own elements by using the createRoot API instead\n  React.useMemo(() => extend(THREE), []);\n  const Bridge = useContextBridge();\n  const [containerRef, containerRect] = useMeasure({\n    scroll: true,\n    debounce: {\n      scroll: 50,\n      resize: 0\n    },\n    ...resize\n  });\n  const canvasRef = React.useRef(null);\n  const divRef = React.useRef(null);\n  const [canvas, setCanvas] = React.useState(null);\n  React.useImperativeHandle(forwardedRef, () => canvasRef.current);\n  const handlePointerMissed = useMutableCallback(onPointerMissed);\n  const [block, setBlock] = React.useState(false);\n  const [error, setError] = React.useState(false); // Suspend this component if block is a promise (2nd run)\n\n  if (block) throw block; // Throw exception outwards if anything within canvas throws\n\n  if (error) throw error;\n  const root = React.useRef(null);\n\n  if (containerRect.width > 0 && containerRect.height > 0 && canvas) {\n    if (!root.current) root.current = createRoot(canvas);\n    root.current.configure({\n      gl,\n      events,\n      shadows,\n      linear,\n      flat,\n      legacy,\n      orthographic,\n      frameloop,\n      dpr,\n      performance,\n      raycaster,\n      camera,\n      size: containerRect,\n      // Pass mutable reference to onPointerMissed so it's free to update\n      onPointerMissed: (...args) => handlePointerMissed.current == null ? void 0 : handlePointerMissed.current(...args),\n      onCreated: state => {\n        // Connect to event source\n        state.events.connect == null ? void 0 : state.events.connect(eventSource ? isRef(eventSource) ? eventSource.current : eventSource : divRef.current); // Set up compute function\n\n        if (eventPrefix) {\n          state.setEvents({\n            compute: (event, state) => {\n              const x = event[eventPrefix + 'X'];\n              const y = event[eventPrefix + 'Y'];\n              state.pointer.set(x / state.size.width * 2 - 1, -(y / state.size.height) * 2 + 1);\n              state.raycaster.setFromCamera(state.pointer, state.camera);\n            }\n          });\n        } // Call onCreated callback\n\n\n        onCreated == null ? void 0 : onCreated(state);\n      }\n    });\n    root.current.render( /*#__PURE__*/React.createElement(Bridge, null, /*#__PURE__*/React.createElement(ErrorBoundary, {\n      set: setError\n    }, /*#__PURE__*/React.createElement(React.Suspense, {\n      fallback: /*#__PURE__*/React.createElement(Block, {\n        set: setBlock\n      })\n    }, children))));\n  }\n\n  useIsomorphicLayoutEffect(() => {\n    setCanvas(canvasRef.current);\n  }, []);\n  React.useEffect(() => {\n    if (canvas) return () => unmountComponentAtNode(canvas);\n  }, [canvas]); // When the event source is not this div, we need to set pointer-events to none\n  // Or else the canvas will block events from reaching the event source\n\n  const pointerEvents = eventSource ? 'none' : 'auto';\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    ref: divRef,\n    style: {\n      position: 'relative',\n      width: '100%',\n      height: '100%',\n      overflow: 'hidden',\n      pointerEvents,\n      ...style\n    }\n  }, props), /*#__PURE__*/React.createElement(\"div\", {\n    ref: containerRef,\n    style: {\n      width: '100%',\n      height: '100%'\n    }\n  }, /*#__PURE__*/React.createElement(\"canvas\", {\n    ref: canvasRef,\n    style: {\n      display: 'block'\n    }\n  }, fallback)));\n});\n/**\n * A DOM canvas which accepts threejs elements as children.\n * @see https://docs.pmnd.rs/react-three-fiber/api/canvas\n */\n\nconst Canvas = /*#__PURE__*/React.forwardRef(function CanvasWrapper(props, ref) {\n  return /*#__PURE__*/React.createElement(FiberProvider, null, /*#__PURE__*/React.createElement(CanvasImpl, _extends({}, props, {\n    ref: ref\n  })));\n});\n\nexport { Canvas, createPointerEvents as events };\n","/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\nfunction debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  };\n\n  var debounced = function(){\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n  \n  debounced.flush = function() {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n      \n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n};\n\n// Adds compatibility for ES modules\ndebounce.debounce = debounce;\n\nmodule.exports = debounce;\n","import * as React from \"react\";\n\nexport default function mergeRefs<T = any>(\n  refs: Array<React.MutableRefObject<T> | React.LegacyRef<T>>\n): React.RefCallback<T> {\n  return (value) => {\n    refs.forEach((ref) => {\n      if (typeof ref === \"function\") {\n        ref(value);\n      } else if (ref != null) {\n        (ref as React.MutableRefObject<T | null>).current = value;\n      }\n    });\n  };\n}\n","/**\n * @license React\n * react-reconciler-constants.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';exports.ConcurrentRoot=1;exports.ContinuousEventPriority=4;exports.DefaultEventPriority=16;exports.DiscreteEventPriority=1;exports.IdleEventPriority=536870912;exports.LegacyRoot=0;\n","/**\n * @license React\n * react-reconciler.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nmodule.exports = function $$$reconciler($$$hostConfig) {\n    var exports = {};\n'use strict';var aa=require(\"react\"),ba=require(\"scheduler\"),ca=Object.assign;function n(a){for(var b=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=1;c<arguments.length;c++)b+=\"&args[]=\"+encodeURIComponent(arguments[c]);return\"Minified React error #\"+a+\"; visit \"+b+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}\nvar ea=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fa=Symbol.for(\"react.element\"),ha=Symbol.for(\"react.portal\"),ia=Symbol.for(\"react.fragment\"),ja=Symbol.for(\"react.strict_mode\"),ka=Symbol.for(\"react.profiler\"),la=Symbol.for(\"react.provider\"),ma=Symbol.for(\"react.context\"),na=Symbol.for(\"react.forward_ref\"),oa=Symbol.for(\"react.suspense\"),pa=Symbol.for(\"react.suspense_list\"),qa=Symbol.for(\"react.memo\"),ra=Symbol.for(\"react.lazy\");Symbol.for(\"react.scope\");Symbol.for(\"react.debug_trace_mode\");\nvar sa=Symbol.for(\"react.offscreen\");Symbol.for(\"react.legacy_hidden\");Symbol.for(\"react.cache\");Symbol.for(\"react.tracing_marker\");var ta=Symbol.iterator;function ua(a){if(null===a||\"object\"!==typeof a)return null;a=ta&&a[ta]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}\nfunction va(a){if(null==a)return null;if(\"function\"===typeof a)return a.displayName||a.name||null;if(\"string\"===typeof a)return a;switch(a){case ia:return\"Fragment\";case ha:return\"Portal\";case ka:return\"Profiler\";case ja:return\"StrictMode\";case oa:return\"Suspense\";case pa:return\"SuspenseList\"}if(\"object\"===typeof a)switch(a.$$typeof){case ma:return(a.displayName||\"Context\")+\".Consumer\";case la:return(a._context.displayName||\"Context\")+\".Provider\";case na:var b=a.render;a=a.displayName;a||(a=b.displayName||\nb.name||\"\",a=\"\"!==a?\"ForwardRef(\"+a+\")\":\"ForwardRef\");return a;case qa:return b=a.displayName||null,null!==b?b:va(a.type)||\"Memo\";case ra:b=a._payload;a=a._init;try{return va(a(b))}catch(c){}}return null}\nfunction xa(a){var b=a.type;switch(a.tag){case 24:return\"Cache\";case 9:return(b.displayName||\"Context\")+\".Consumer\";case 10:return(b._context.displayName||\"Context\")+\".Provider\";case 18:return\"DehydratedFragment\";case 11:return a=b.render,a=a.displayName||a.name||\"\",b.displayName||(\"\"!==a?\"ForwardRef(\"+a+\")\":\"ForwardRef\");case 7:return\"Fragment\";case 5:return b;case 4:return\"Portal\";case 3:return\"Root\";case 6:return\"Text\";case 16:return va(b);case 8:return b===ja?\"StrictMode\":\"Mode\";case 22:return\"Offscreen\";\ncase 12:return\"Profiler\";case 21:return\"Scope\";case 13:return\"Suspense\";case 19:return\"SuspenseList\";case 25:return\"TracingMarker\";case 1:case 0:case 17:case 2:case 14:case 15:if(\"function\"===typeof b)return b.displayName||b.name||null;if(\"string\"===typeof b)return b}return null}function ya(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do b=a,0!==(b.flags&4098)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function za(a){if(ya(a)!==a)throw Error(n(188));}\nfunction Aa(a){var b=a.alternate;if(!b){b=ya(a);if(null===b)throw Error(n(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return za(e),a;if(f===d)return za(e),b;f=f.sibling}throw Error(n(188));}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=f.child;h;){if(h===\nc){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}if(!g)throw Error(n(189));}}if(c.alternate!==d)throw Error(n(190));}if(3!==c.tag)throw Error(n(188));return c.stateNode.current===c?a:b}function Ba(a){a=Aa(a);return null!==a?Ca(a):null}function Ca(a){if(5===a.tag||6===a.tag)return a;for(a=a.child;null!==a;){var b=Ca(a);if(null!==b)return b;a=a.sibling}return null}\nfunction Da(a){if(5===a.tag||6===a.tag)return a;for(a=a.child;null!==a;){if(4!==a.tag){var b=Da(a);if(null!==b)return b}a=a.sibling}return null}\nvar Ea=Array.isArray,Fa=$$$hostConfig.getPublicInstance,Ga=$$$hostConfig.getRootHostContext,Ha=$$$hostConfig.getChildHostContext,Ia=$$$hostConfig.prepareForCommit,Ja=$$$hostConfig.resetAfterCommit,Ka=$$$hostConfig.createInstance,La=$$$hostConfig.appendInitialChild,Ma=$$$hostConfig.finalizeInitialChildren,Na=$$$hostConfig.prepareUpdate,Oa=$$$hostConfig.shouldSetTextContent,Pa=$$$hostConfig.createTextInstance,Qa=$$$hostConfig.scheduleTimeout,Ra=$$$hostConfig.cancelTimeout,Sa=$$$hostConfig.noTimeout,\nTa=$$$hostConfig.isPrimaryRenderer,Ua=$$$hostConfig.supportsMutation,Va=$$$hostConfig.supportsPersistence,p=$$$hostConfig.supportsHydration,Wa=$$$hostConfig.getInstanceFromNode,Xa=$$$hostConfig.preparePortalMount,Ya=$$$hostConfig.getCurrentEventPriority,Za=$$$hostConfig.detachDeletedInstance,$a=$$$hostConfig.supportsMicrotasks,ab=$$$hostConfig.scheduleMicrotask,bb=$$$hostConfig.supportsTestSelectors,cb=$$$hostConfig.findFiberRoot,db=$$$hostConfig.getBoundingRect,eb=$$$hostConfig.getTextContent,fb=\n$$$hostConfig.isHiddenSubtree,gb=$$$hostConfig.matchAccessibilityRole,hb=$$$hostConfig.setFocusIfFocusable,ib=$$$hostConfig.setupIntersectionObserver,jb=$$$hostConfig.appendChild,kb=$$$hostConfig.appendChildToContainer,lb=$$$hostConfig.commitTextUpdate,mb=$$$hostConfig.commitMount,nb=$$$hostConfig.commitUpdate,ob=$$$hostConfig.insertBefore,pb=$$$hostConfig.insertInContainerBefore,qb=$$$hostConfig.removeChild,rb=$$$hostConfig.removeChildFromContainer,sb=$$$hostConfig.resetTextContent,tb=$$$hostConfig.hideInstance,\nub=$$$hostConfig.hideTextInstance,vb=$$$hostConfig.unhideInstance,wb=$$$hostConfig.unhideTextInstance,xb=$$$hostConfig.clearContainer,yb=$$$hostConfig.cloneInstance,zb=$$$hostConfig.createContainerChildSet,Ab=$$$hostConfig.appendChildToContainerChildSet,Bb=$$$hostConfig.finalizeContainerChildren,Cb=$$$hostConfig.replaceContainerChildren,Db=$$$hostConfig.cloneHiddenInstance,Eb=$$$hostConfig.cloneHiddenTextInstance,Fb=$$$hostConfig.canHydrateInstance,Gb=$$$hostConfig.canHydrateTextInstance,Hb=$$$hostConfig.canHydrateSuspenseInstance,\nIb=$$$hostConfig.isSuspenseInstancePending,Jb=$$$hostConfig.isSuspenseInstanceFallback,Kb=$$$hostConfig.registerSuspenseInstanceRetry,Lb=$$$hostConfig.getNextHydratableSibling,Mb=$$$hostConfig.getFirstHydratableChild,Nb=$$$hostConfig.getFirstHydratableChildWithinContainer,Ob=$$$hostConfig.getFirstHydratableChildWithinSuspenseInstance,Pb=$$$hostConfig.hydrateInstance,Qb=$$$hostConfig.hydrateTextInstance,Rb=$$$hostConfig.hydrateSuspenseInstance,Sb=$$$hostConfig.getNextHydratableInstanceAfterSuspenseInstance,\nTb=$$$hostConfig.commitHydratedContainer,Ub=$$$hostConfig.commitHydratedSuspenseInstance,Vb=$$$hostConfig.clearSuspenseBoundary,Wb=$$$hostConfig.clearSuspenseBoundaryFromContainer,Xb=$$$hostConfig.shouldDeleteUnhydratedTailInstances,Yb=$$$hostConfig.didNotMatchHydratedContainerTextInstance,Zb=$$$hostConfig.didNotMatchHydratedTextInstance,$b;function ac(a){if(void 0===$b)try{throw Error();}catch(c){var b=c.stack.trim().match(/\\n( *(at )?)/);$b=b&&b[1]||\"\"}return\"\\n\"+$b+a}var bc=!1;\nfunction cc(a,b){if(!a||bc)return\"\";bc=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(b)if(b=function(){throw Error();},Object.defineProperty(b.prototype,\"props\",{set:function(){throw Error();}}),\"object\"===typeof Reflect&&Reflect.construct){try{Reflect.construct(b,[])}catch(l){var d=l}Reflect.construct(a,[],b)}else{try{b.call()}catch(l){d=l}a.call(b.prototype)}else{try{throw Error();}catch(l){d=l}a()}}catch(l){if(l&&d&&\"string\"===typeof l.stack){for(var e=l.stack.split(\"\\n\"),\nf=d.stack.split(\"\\n\"),g=e.length-1,h=f.length-1;1<=g&&0<=h&&e[g]!==f[h];)h--;for(;1<=g&&0<=h;g--,h--)if(e[g]!==f[h]){if(1!==g||1!==h){do if(g--,h--,0>h||e[g]!==f[h]){var k=\"\\n\"+e[g].replace(\" at new \",\" at \");a.displayName&&k.includes(\"<anonymous>\")&&(k=k.replace(\"<anonymous>\",a.displayName));return k}while(1<=g&&0<=h)}break}}}finally{bc=!1,Error.prepareStackTrace=c}return(a=a?a.displayName||a.name:\"\")?ac(a):\"\"}var dc=Object.prototype.hasOwnProperty,ec=[],fc=-1;function gc(a){return{current:a}}\nfunction x(a){0>fc||(a.current=ec[fc],ec[fc]=null,fc--)}function y(a,b){fc++;ec[fc]=a.current;a.current=b}var hc={},A=gc(hc),B=gc(!1),ic=hc;function jc(a,b){var c=a.type.contextTypes;if(!c)return hc;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}\nfunction C(a){a=a.childContextTypes;return null!==a&&void 0!==a}function kc(){x(B);x(A)}function lc(a,b,c){if(A.current!==hc)throw Error(n(168));y(A,b);y(B,c)}function mc(a,b,c){var d=a.stateNode;b=b.childContextTypes;if(\"function\"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in b))throw Error(n(108,xa(a)||\"Unknown\",e));return ca({},c,d)}\nfunction nc(a){a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||hc;ic=A.current;y(A,a);y(B,B.current);return!0}function oc(a,b,c){var d=a.stateNode;if(!d)throw Error(n(169));c?(a=mc(a,b,ic),d.__reactInternalMemoizedMergedChildContext=a,x(B),x(A),y(A,a)):x(B);y(B,c)}var qc=Math.clz32?Math.clz32:pc,rc=Math.log,sc=Math.LN2;function pc(a){a>>>=0;return 0===a?32:31-(rc(a)/sc|0)|0}var tc=64,uc=4194304;\nfunction vc(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;\ndefault:return a}}function wc(a,b){var c=a.pendingLanes;if(0===c)return 0;var d=0,e=a.suspendedLanes,f=a.pingedLanes,g=c&268435455;if(0!==g){var h=g&~e;0!==h?d=vc(h):(f&=g,0!==f&&(d=vc(f)))}else g=c&~e,0!==g?d=vc(g):0!==f&&(d=vc(f));if(0===d)return 0;if(0!==b&&b!==d&&0===(b&e)&&(e=d&-d,f=b&-b,e>=f||16===e&&0!==(f&4194240)))return b;0!==(d&4)&&(d|=c&16);b=a.entangledLanes;if(0!==b)for(a=a.entanglements,b&=d;0<b;)c=31-qc(b),e=1<<c,d|=a[c],b&=~e;return d}\nfunction xc(a,b){switch(a){case 1:case 2:case 4:return b+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b+5E3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}\nfunction yc(a,b){for(var c=a.suspendedLanes,d=a.pingedLanes,e=a.expirationTimes,f=a.pendingLanes;0<f;){var g=31-qc(f),h=1<<g,k=e[g];if(-1===k){if(0===(h&c)||0!==(h&d))e[g]=xc(h,b)}else k<=b&&(a.expiredLanes|=h);f&=~h}}function zc(a){a=a.pendingLanes&-1073741825;return 0!==a?a:a&1073741824?1073741824:0}function Ac(a){for(var b=[],c=0;31>c;c++)b.push(a);return b}function Bc(a,b,c){a.pendingLanes|=b;536870912!==b&&(a.suspendedLanes=0,a.pingedLanes=0);a=a.eventTimes;b=31-qc(b);a[b]=c}\nfunction Cc(a,b){var c=a.pendingLanes&~b;a.pendingLanes=b;a.suspendedLanes=0;a.pingedLanes=0;a.expiredLanes&=b;a.mutableReadLanes&=b;a.entangledLanes&=b;b=a.entanglements;var d=a.eventTimes;for(a=a.expirationTimes;0<c;){var e=31-qc(c),f=1<<e;b[e]=0;d[e]=-1;a[e]=-1;c&=~f}}function Dc(a,b){var c=a.entangledLanes|=b;for(a=a.entanglements;c;){var d=31-qc(c),e=1<<d;e&b|a[d]&b&&(a[d]|=b);c&=~e}}var D=0;function Ec(a){a&=-a;return 1<a?4<a?0!==(a&268435455)?16:536870912:4:1}\nvar Fc=ba.unstable_scheduleCallback,Gc=ba.unstable_cancelCallback,Hc=ba.unstable_shouldYield,Ic=ba.unstable_requestPaint,E=ba.unstable_now,Jc=ba.unstable_ImmediatePriority,Kc=ba.unstable_UserBlockingPriority,Lc=ba.unstable_NormalPriority,Mc=ba.unstable_IdlePriority,Nc=null,Oc=null;function Pc(a){if(Oc&&\"function\"===typeof Oc.onCommitFiberRoot)try{Oc.onCommitFiberRoot(Nc,a,void 0,128===(a.current.flags&128))}catch(b){}}function Qc(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}\nvar Rc=\"function\"===typeof Object.is?Object.is:Qc,Sc=null,Tc=!1,Uc=!1;function Vc(a){null===Sc?Sc=[a]:Sc.push(a)}function Wc(a){Tc=!0;Vc(a)}function Xc(){if(!Uc&&null!==Sc){Uc=!0;var a=0,b=D;try{var c=Sc;for(D=1;a<c.length;a++){var d=c[a];do d=d(!0);while(null!==d)}Sc=null;Tc=!1}catch(e){throw null!==Sc&&(Sc=Sc.slice(a+1)),Fc(Jc,Xc),e;}finally{D=b,Uc=!1}}return null}var Yc=ea.ReactCurrentBatchConfig;\nfunction Zc(a,b){if(Rc(a,b))return!0;if(\"object\"!==typeof a||null===a||\"object\"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var e=c[d];if(!dc.call(b,e)||!Rc(a[e],b[e]))return!1}return!0}\nfunction $c(a){switch(a.tag){case 5:return ac(a.type);case 16:return ac(\"Lazy\");case 13:return ac(\"Suspense\");case 19:return ac(\"SuspenseList\");case 0:case 2:case 15:return a=cc(a.type,!1),a;case 11:return a=cc(a.type.render,!1),a;case 1:return a=cc(a.type,!0),a;default:return\"\"}}function ad(a,b){if(a&&a.defaultProps){b=ca({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c]);return b}return b}var bd=gc(null),cd=null,dd=null,ed=null;function fd(){ed=dd=cd=null}\nfunction gd(a,b,c){Ta?(y(bd,b._currentValue),b._currentValue=c):(y(bd,b._currentValue2),b._currentValue2=c)}function hd(a){var b=bd.current;x(bd);Ta?a._currentValue=b:a._currentValue2=b}function id(a,b,c){for(;null!==a;){var d=a.alternate;(a.childLanes&b)!==b?(a.childLanes|=b,null!==d&&(d.childLanes|=b)):null!==d&&(d.childLanes&b)!==b&&(d.childLanes|=b);if(a===c)break;a=a.return}}\nfunction jd(a,b){cd=a;ed=dd=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(0!==(a.lanes&b)&&(kd=!0),a.firstContext=null)}function ld(a){var b=Ta?a._currentValue:a._currentValue2;if(ed!==a)if(a={context:a,memoizedValue:b,next:null},null===dd){if(null===cd)throw Error(n(308));dd=a;cd.dependencies={lanes:0,firstContext:a}}else dd=dd.next=a;return b}var md=null,nd=!1;\nfunction od(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pd(a,b){a=a.updateQueue;b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function qd(a,b){return{eventTime:a,lane:b,tag:0,payload:null,callback:null,next:null}}\nfunction rd(a,b){var c=a.updateQueue;null!==c&&(c=c.shared,null!==F&&0!==(a.mode&1)&&0===(G&2)?(a=c.interleaved,null===a?(b.next=b,null===md?md=[c]:md.push(c)):(b.next=a.next,a.next=b),c.interleaved=b):(a=c.pending,null===a?b.next=b:(b.next=a.next,a.next=b),c.pending=b))}function sd(a,b,c){b=b.updateQueue;if(null!==b&&(b=b.shared,0!==(c&4194240))){var d=b.lanes;d&=a.pendingLanes;c|=d;b.lanes=c;Dc(a,c)}}\nfunction td(a,b){var c=a.updateQueue,d=a.alternate;if(null!==d&&(d=d.updateQueue,c===d)){var e=null,f=null;c=c.firstBaseUpdate;if(null!==c){do{var g={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};null===f?e=f=g:f=f.next=g;c=c.next}while(null!==c);null===f?e=f=b:f=f.next=b}else e=f=b;c={baseState:d.baseState,firstBaseUpdate:e,lastBaseUpdate:f,shared:d.shared,effects:d.effects};a.updateQueue=c;return}a=c.lastBaseUpdate;null===a?c.firstBaseUpdate=b:a.next=\nb;c.lastBaseUpdate=b}\nfunction ud(a,b,c,d){var e=a.updateQueue;nd=!1;var f=e.firstBaseUpdate,g=e.lastBaseUpdate,h=e.shared.pending;if(null!==h){e.shared.pending=null;var k=h,l=k.next;k.next=null;null===g?f=l:g.next=l;g=k;var m=a.alternate;null!==m&&(m=m.updateQueue,h=m.lastBaseUpdate,h!==g&&(null===h?m.firstBaseUpdate=l:h.next=l,m.lastBaseUpdate=k))}if(null!==f){var v=e.baseState;g=0;m=l=k=null;h=f;do{var r=h.lane,z=h.eventTime;if((d&r)===r){null!==m&&(m=m.next={eventTime:z,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,\nnext:null});a:{var q=a,N=h;r=b;z=c;switch(N.tag){case 1:q=N.payload;if(\"function\"===typeof q){v=q.call(z,v,r);break a}v=q;break a;case 3:q.flags=q.flags&-65537|128;case 0:q=N.payload;r=\"function\"===typeof q?q.call(z,v,r):q;if(null===r||void 0===r)break a;v=ca({},v,r);break a;case 2:nd=!0}}null!==h.callback&&0!==h.lane&&(a.flags|=64,r=e.effects,null===r?e.effects=[h]:r.push(h))}else z={eventTime:z,lane:r,tag:h.tag,payload:h.payload,callback:h.callback,next:null},null===m?(l=m=z,k=v):m=m.next=z,g|=\nr;h=h.next;if(null===h)if(h=e.shared.pending,null===h)break;else r=h,h=r.next,r.next=null,e.lastBaseUpdate=r,e.shared.pending=null}while(1);null===m&&(k=v);e.baseState=k;e.firstBaseUpdate=l;e.lastBaseUpdate=m;b=e.shared.interleaved;if(null!==b){e=b;do g|=e.lane,e=e.next;while(e!==b)}else null===f&&(e.shared.lanes=0);vd|=g;a.lanes=g;a.memoizedState=v}}\nfunction wd(a,b,c){a=b.effects;b.effects=null;if(null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){d.callback=null;d=c;if(\"function\"!==typeof e)throw Error(n(191,e));e.call(d)}}}var xd=(new aa.Component).refs;function yd(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:ca({},b,c);a.memoizedState=c;0===a.lanes&&(a.updateQueue.baseState=c)}\nvar Bd={isMounted:function(a){return(a=a._reactInternals)?ya(a)===a:!1},enqueueSetState:function(a,b,c){a=a._reactInternals;var d=H(),e=zd(a),f=qd(d,e);f.payload=b;void 0!==c&&null!==c&&(f.callback=c);rd(a,f);b=Ad(a,e,d);null!==b&&sd(b,a,e)},enqueueReplaceState:function(a,b,c){a=a._reactInternals;var d=H(),e=zd(a),f=qd(d,e);f.tag=1;f.payload=b;void 0!==c&&null!==c&&(f.callback=c);rd(a,f);b=Ad(a,e,d);null!==b&&sd(b,a,e)},enqueueForceUpdate:function(a,b){a=a._reactInternals;var c=H(),d=zd(a),e=qd(c,\nd);e.tag=2;void 0!==b&&null!==b&&(e.callback=b);rd(a,e);b=Ad(a,d,c);null!==b&&sd(b,a,d)}};function Cd(a,b,c,d,e,f,g){a=a.stateNode;return\"function\"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,f,g):b.prototype&&b.prototype.isPureReactComponent?!Zc(c,d)||!Zc(e,f):!0}\nfunction Dd(a,b,c){var d=!1,e=hc;var f=b.contextType;\"object\"===typeof f&&null!==f?f=ld(f):(e=C(b)?ic:A.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?jc(a,e):hc);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=Bd;a.stateNode=b;b._reactInternals=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}\nfunction Ed(a,b,c,d){a=b.state;\"function\"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);\"function\"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&Bd.enqueueReplaceState(b,b.state,null)}\nfunction Fd(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs=xd;od(a);var f=b.contextType;\"object\"===typeof f&&null!==f?e.context=ld(f):(f=C(b)?ic:A.current,e.context=jc(a,f));e.state=a.memoizedState;f=b.getDerivedStateFromProps;\"function\"===typeof f&&(yd(a,b,f,c),e.state=a.memoizedState);\"function\"===typeof b.getDerivedStateFromProps||\"function\"===typeof e.getSnapshotBeforeUpdate||\"function\"!==typeof e.UNSAFE_componentWillMount&&\"function\"!==typeof e.componentWillMount||(b=e.state,\n\"function\"===typeof e.componentWillMount&&e.componentWillMount(),\"function\"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Bd.enqueueReplaceState(e,e.state,null),ud(a,c,e,d),e.state=a.memoizedState);\"function\"===typeof e.componentDidMount&&(a.flags|=4194308)}var Gd=[],Hd=0,Id=null,Jd=0,Kd=[],Ld=0,Md=null,Nd=1,Od=\"\";function Pd(a,b){Gd[Hd++]=Jd;Gd[Hd++]=Id;Id=a;Jd=b}\nfunction Qd(a,b,c){Kd[Ld++]=Nd;Kd[Ld++]=Od;Kd[Ld++]=Md;Md=a;var d=Nd;a=Od;var e=32-qc(d)-1;d&=~(1<<e);c+=1;var f=32-qc(b)+e;if(30<f){var g=e-e%5;f=(d&(1<<g)-1).toString(32);d>>=g;e-=g;Nd=1<<32-qc(b)+e|c<<e|d;Od=f+a}else Nd=1<<f|c<<e|d,Od=a}function Rd(a){null!==a.return&&(Pd(a,1),Qd(a,1,0))}function Sd(a){for(;a===Id;)Id=Gd[--Hd],Gd[Hd]=null,Jd=Gd[--Hd],Gd[Hd]=null;for(;a===Md;)Md=Kd[--Ld],Kd[Ld]=null,Od=Kd[--Ld],Kd[Ld]=null,Nd=Kd[--Ld],Kd[Ld]=null}var Td=null,Ud=null,I=!1,Vd=!1,Wd=null;\nfunction Xd(a,b){var c=Yd(5,null,null,0);c.elementType=\"DELETED\";c.stateNode=b;c.return=a;b=a.deletions;null===b?(a.deletions=[c],a.flags|=16):b.push(c)}\nfunction Zd(a,b){switch(a.tag){case 5:return b=Fb(b,a.type,a.pendingProps),null!==b?(a.stateNode=b,Td=a,Ud=Mb(b),!0):!1;case 6:return b=Gb(b,a.pendingProps),null!==b?(a.stateNode=b,Td=a,Ud=null,!0):!1;case 13:b=Hb(b);if(null!==b){var c=null!==Md?{id:Nd,overflow:Od}:null;a.memoizedState={dehydrated:b,treeContext:c,retryLane:1073741824};c=Yd(18,null,null,0);c.stateNode=b;c.return=a;a.child=c;Td=a;Ud=null;return!0}return!1;default:return!1}}function $d(a){return 0!==(a.mode&1)&&0===(a.flags&128)}\nfunction ae(a){if(I){var b=Ud;if(b){var c=b;if(!Zd(a,b)){if($d(a))throw Error(n(418));b=Lb(c);var d=Td;b&&Zd(a,b)?Xd(d,c):(a.flags=a.flags&-4097|2,I=!1,Td=a)}}else{if($d(a))throw Error(n(418));a.flags=a.flags&-4097|2;I=!1;Td=a}}}function be(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;Td=a}\nfunction ce(a){if(!p||a!==Td)return!1;if(!I)return be(a),I=!0,!1;if(3!==a.tag&&(5!==a.tag||Xb(a.type)&&!Oa(a.type,a.memoizedProps))){var b=Ud;if(b){if($d(a)){for(a=Ud;a;)a=Lb(a);throw Error(n(418));}for(;b;)Xd(a,b),b=Lb(b)}}be(a);if(13===a.tag){if(!p)throw Error(n(316));a=a.memoizedState;a=null!==a?a.dehydrated:null;if(!a)throw Error(n(317));Ud=Sb(a)}else Ud=Td?Lb(a.stateNode):null;return!0}function de(){p&&(Ud=Td=null,Vd=I=!1)}function ee(a){null===Wd?Wd=[a]:Wd.push(a)}\nfunction fe(a,b,c){a=c.ref;if(null!==a&&\"function\"!==typeof a&&\"object\"!==typeof a){if(c._owner){c=c._owner;if(c){if(1!==c.tag)throw Error(n(309));var d=c.stateNode}if(!d)throw Error(n(147,a));var e=d,f=\"\"+a;if(null!==b&&null!==b.ref&&\"function\"===typeof b.ref&&b.ref._stringRef===f)return b.ref;b=function(a){var b=e.refs;b===xd&&(b=e.refs={});null===a?delete b[f]:b[f]=a};b._stringRef=f;return b}if(\"string\"!==typeof a)throw Error(n(284));if(!c._owner)throw Error(n(290,a));}return a}\nfunction ge(a,b){a=Object.prototype.toString.call(b);throw Error(n(31,\"[object Object]\"===a?\"object with keys {\"+Object.keys(b).join(\", \")+\"}\":a));}function he(a){var b=a._init;return b(a._payload)}\nfunction ie(a){function b(b,c){if(a){var d=b.deletions;null===d?(b.deletions=[c],b.flags|=16):d.push(c)}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b){a=je(a,b);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return b.flags|=1048576,c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.flags|=2,c):d;b.flags|=2;return c}function g(b){a&&\nnull===b.alternate&&(b.flags|=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=ke(c,a.mode,d),b.return=a,b;b=e(b,c);b.return=a;return b}function k(a,b,c,d){var f=c.type;if(f===ia)return m(a,b,c.props.children,d,c.key);if(null!==b&&(b.elementType===f||\"object\"===typeof f&&null!==f&&f.$$typeof===ra&&he(f)===b.type))return d=e(b,c.props),d.ref=fe(a,b,c),d.return=a,d;d=le(c.type,c.key,c.props,null,a.mode,d);d.ref=fe(a,b,c);d.return=a;return d}function l(a,b,c,d){if(null===b||4!==b.tag||\nb.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=me(c,a.mode,d),b.return=a,b;b=e(b,c.children||[]);b.return=a;return b}function m(a,b,c,d,f){if(null===b||7!==b.tag)return b=ne(c,a.mode,d,f),b.return=a,b;b=e(b,c);b.return=a;return b}function v(a,b,c){if(\"string\"===typeof b&&\"\"!==b||\"number\"===typeof b)return b=ke(\"\"+b,a.mode,c),b.return=a,b;if(\"object\"===typeof b&&null!==b){switch(b.$$typeof){case fa:return c=le(b.type,b.key,b.props,null,a.mode,c),\nc.ref=fe(a,null,b),c.return=a,c;case ha:return b=me(b,a.mode,c),b.return=a,b;case ra:var d=b._init;return v(a,d(b._payload),c)}if(Ea(b)||ua(b))return b=ne(b,a.mode,c,null),b.return=a,b;ge(a,b)}return null}function r(a,b,c,d){var e=null!==b?b.key:null;if(\"string\"===typeof c&&\"\"!==c||\"number\"===typeof c)return null!==e?null:h(a,b,\"\"+c,d);if(\"object\"===typeof c&&null!==c){switch(c.$$typeof){case fa:return c.key===e?k(a,b,c,d):null;case ha:return c.key===e?l(a,b,c,d):null;case ra:return e=c._init,r(a,\nb,e(c._payload),d)}if(Ea(c)||ua(c))return null!==e?null:m(a,b,c,d,null);ge(a,c)}return null}function z(a,b,c,d,e){if(\"string\"===typeof d&&\"\"!==d||\"number\"===typeof d)return a=a.get(c)||null,h(b,a,\"\"+d,e);if(\"object\"===typeof d&&null!==d){switch(d.$$typeof){case fa:return a=a.get(null===d.key?c:d.key)||null,k(b,a,d,e);case ha:return a=a.get(null===d.key?c:d.key)||null,l(b,a,d,e);case ra:var f=d._init;return z(a,b,c,f(d._payload),e)}if(Ea(d)||ua(d))return a=a.get(c)||null,m(b,a,d,e,null);ge(b,d)}return null}\nfunction q(e,g,h,k){for(var l=null,m=null,w=g,u=g=0,t=null;null!==w&&u<h.length;u++){w.index>u?(t=w,w=null):t=w.sibling;var q=r(e,w,h[u],k);if(null===q){null===w&&(w=t);break}a&&w&&null===q.alternate&&b(e,w);g=f(q,g,u);null===m?l=q:m.sibling=q;m=q;w=t}if(u===h.length)return c(e,w),I&&Pd(e,u),l;if(null===w){for(;u<h.length;u++)w=v(e,h[u],k),null!==w&&(g=f(w,g,u),null===m?l=w:m.sibling=w,m=w);I&&Pd(e,u);return l}for(w=d(e,w);u<h.length;u++)t=z(w,e,u,h[u],k),null!==t&&(a&&null!==t.alternate&&w.delete(null===\nt.key?u:t.key),g=f(t,g,u),null===m?l=t:m.sibling=t,m=t);a&&w.forEach(function(a){return b(e,a)});I&&Pd(e,u);return l}function N(e,g,h,k){var l=ua(h);if(\"function\"!==typeof l)throw Error(n(150));h=l.call(h);if(null==h)throw Error(n(151));for(var w=l=null,m=g,u=g=0,q=null,t=h.next();null!==m&&!t.done;u++,t=h.next()){m.index>u?(q=m,m=null):q=m.sibling;var V=r(e,m,t.value,k);if(null===V){null===m&&(m=q);break}a&&m&&null===V.alternate&&b(e,m);g=f(V,g,u);null===w?l=V:w.sibling=V;w=V;m=q}if(t.done)return c(e,\nm),I&&Pd(e,u),l;if(null===m){for(;!t.done;u++,t=h.next())t=v(e,t.value,k),null!==t&&(g=f(t,g,u),null===w?l=t:w.sibling=t,w=t);I&&Pd(e,u);return l}for(m=d(e,m);!t.done;u++,t=h.next())t=z(m,e,u,t.value,k),null!==t&&(a&&null!==t.alternate&&m.delete(null===t.key?u:t.key),g=f(t,g,u),null===w?l=t:w.sibling=t,w=t);a&&m.forEach(function(a){return b(e,a)});I&&Pd(e,u);return l}function da(a,d,f,h){\"object\"===typeof f&&null!==f&&f.type===ia&&null===f.key&&(f=f.props.children);if(\"object\"===typeof f&&null!==\nf){switch(f.$$typeof){case fa:a:{for(var k=f.key,l=d;null!==l;){if(l.key===k){k=f.type;if(k===ia){if(7===l.tag){c(a,l.sibling);d=e(l,f.props.children);d.return=a;a=d;break a}}else if(l.elementType===k||\"object\"===typeof k&&null!==k&&k.$$typeof===ra&&he(k)===l.type){c(a,l.sibling);d=e(l,f.props);d.ref=fe(a,l,f);d.return=a;a=d;break a}c(a,l);break}else b(a,l);l=l.sibling}f.type===ia?(d=ne(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=le(f.type,f.key,f.props,null,a.mode,h),h.ref=fe(a,d,f),h.return=\na,a=h)}return g(a);case ha:a:{for(l=f.key;null!==d;){if(d.key===l)if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[]);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=me(f,a.mode,h);d.return=a;a=d}return g(a);case ra:return l=f._init,da(a,d,l(f._payload),h)}if(Ea(f))return q(a,d,f,h);if(ua(f))return N(a,d,f,h);ge(a,f)}return\"string\"===typeof f&&\"\"!==f||\"number\"===typeof f?(f=\"\"+f,null!==d&&\n6===d.tag?(c(a,d.sibling),d=e(d,f),d.return=a,a=d):(c(a,d),d=ke(f,a.mode,h),d.return=a,a=d),g(a)):c(a,d)}return da}var oe=ie(!0),pe=ie(!1),qe={},re=gc(qe),se=gc(qe),te=gc(qe);function ue(a){if(a===qe)throw Error(n(174));return a}function ve(a,b){y(te,b);y(se,a);y(re,qe);a=Ga(b);x(re);y(re,a)}function we(){x(re);x(se);x(te)}function xe(a){var b=ue(te.current),c=ue(re.current);b=Ha(c,a.type,b);c!==b&&(y(se,a),y(re,b))}function ye(a){se.current===a&&(x(re),x(se))}var J=gc(0);\nfunction ze(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(c=c.dehydrated,null===c||Ib(c)||Jb(c)))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.flags&128))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}return null}var Ae=[];\nfunction Be(){for(var a=0;a<Ae.length;a++){var b=Ae[a];Ta?b._workInProgressVersionPrimary=null:b._workInProgressVersionSecondary=null}Ae.length=0}var Ce=ea.ReactCurrentDispatcher,De=ea.ReactCurrentBatchConfig,Ee=0,K=null,L=null,M=null,Fe=!1,Ge=!1,He=0,Ie=0;function O(){throw Error(n(321));}function Je(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!Rc(a[c],b[c]))return!1;return!0}\nfunction Ke(a,b,c,d,e,f){Ee=f;K=b;b.memoizedState=null;b.updateQueue=null;b.lanes=0;Ce.current=null===a||null===a.memoizedState?Le:Me;a=c(d,e);if(Ge){f=0;do{Ge=!1;He=0;if(25<=f)throw Error(n(301));f+=1;M=L=null;b.updateQueue=null;Ce.current=Ne;a=c(d,e)}while(Ge)}Ce.current=Oe;b=null!==L&&null!==L.next;Ee=0;M=L=K=null;Fe=!1;if(b)throw Error(n(300));return a}function Pe(){var a=0!==He;He=0;return a}\nfunction Qe(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===M?K.memoizedState=M=a:M=M.next=a;return M}function Re(){if(null===L){var a=K.alternate;a=null!==a?a.memoizedState:null}else a=L.next;var b=null===M?K.memoizedState:M.next;if(null!==b)M=b,L=a;else{if(null===a)throw Error(n(310));L=a;a={memoizedState:L.memoizedState,baseState:L.baseState,baseQueue:L.baseQueue,queue:L.queue,next:null};null===M?K.memoizedState=M=a:M=M.next=a}return M}\nfunction Se(a,b){return\"function\"===typeof b?b(a):b}\nfunction Te(a){var b=Re(),c=b.queue;if(null===c)throw Error(n(311));c.lastRenderedReducer=a;var d=L,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next;f.next=g}d.baseQueue=e=f;c.pending=null}if(null!==e){f=e.next;d=d.baseState;var h=g=null,k=null,l=f;do{var m=l.lane;if((Ee&m)===m)null!==k&&(k=k.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),d=l.hasEagerState?l.eagerState:a(d,l.action);else{var v={lane:m,action:l.action,hasEagerState:l.hasEagerState,\neagerState:l.eagerState,next:null};null===k?(h=k=v,g=d):k=k.next=v;K.lanes|=m;vd|=m}l=l.next}while(null!==l&&l!==f);null===k?g=d:k.next=h;Rc(d,b.memoizedState)||(kd=!0);b.memoizedState=d;b.baseState=g;b.baseQueue=k;c.lastRenderedState=d}a=c.interleaved;if(null!==a){e=a;do f=e.lane,K.lanes|=f,vd|=f,e=e.next;while(e!==a)}else null===e&&(c.lanes=0);return[b.memoizedState,c.dispatch]}\nfunction Ue(a){var b=Re(),c=b.queue;if(null===c)throw Error(n(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do f=a(f,g.action),g=g.next;while(g!==e);Rc(f,b.memoizedState)||(kd=!0);b.memoizedState=f;null===b.baseQueue&&(b.baseState=f);c.lastRenderedState=f}return[f,d]}function Ve(){}\nfunction We(a,b){var c=K,d=Re(),e=b(),f=!Rc(d.memoizedState,e);f&&(d.memoizedState=e,kd=!0);d=d.queue;Xe(Ye.bind(null,c,d,a),[a]);if(d.getSnapshot!==b||f||null!==M&&M.memoizedState.tag&1){c.flags|=2048;Ze(9,$e.bind(null,c,d,e,b),void 0,null);if(null===F)throw Error(n(349));0!==(Ee&30)||af(c,b,e)}return e}function af(a,b,c){a.flags|=16384;a={getSnapshot:b,value:c};b=K.updateQueue;null===b?(b={lastEffect:null,stores:null},K.updateQueue=b,b.stores=[a]):(c=b.stores,null===c?b.stores=[a]:c.push(a))}\nfunction $e(a,b,c,d){b.value=c;b.getSnapshot=d;bf(b)&&Ad(a,1,-1)}function Ye(a,b,c){return c(function(){bf(b)&&Ad(a,1,-1)})}function bf(a){var b=a.getSnapshot;a=a.value;try{var c=b();return!Rc(a,c)}catch(d){return!0}}function cf(a){var b=Qe();\"function\"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Se,lastRenderedState:a};b.queue=a;a=a.dispatch=df.bind(null,K,a);return[b.memoizedState,a]}\nfunction Ze(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};b=K.updateQueue;null===b?(b={lastEffect:null,stores:null},K.updateQueue=b,b.lastEffect=a.next=a):(c=b.lastEffect,null===c?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a));return a}function ef(){return Re().memoizedState}function ff(a,b,c,d){var e=Qe();K.flags|=a;e.memoizedState=Ze(1|b,c,void 0,void 0===d?null:d)}\nfunction gf(a,b,c,d){var e=Re();d=void 0===d?null:d;var f=void 0;if(null!==L){var g=L.memoizedState;f=g.destroy;if(null!==d&&Je(d,g.deps)){e.memoizedState=Ze(b,c,f,d);return}}K.flags|=a;e.memoizedState=Ze(1|b,c,f,d)}function hf(a,b){return ff(8390656,8,a,b)}function Xe(a,b){return gf(2048,8,a,b)}function jf(a,b){return gf(4,2,a,b)}function kf(a,b){return gf(4,4,a,b)}\nfunction lf(a,b){if(\"function\"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}function mf(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return gf(4,4,lf.bind(null,b,a),c)}function nf(){}function of(a,b){var c=Re();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Je(b,d[1]))return d[0];c.memoizedState=[a,b];return a}\nfunction pf(a,b){var c=Re();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Je(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a}function qf(a,b){var c=D;D=0!==c&&4>c?c:4;a(!0);var d=De.transition;De.transition={};try{a(!1),b()}finally{D=c,De.transition=d}}function rf(){return Re().memoizedState}function sf(a,b,c){var d=zd(a);c={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};tf(a)?uf(b,c):(vf(a,b,c),c=H(),a=Ad(a,d,c),null!==a&&wf(a,b,d))}\nfunction df(a,b,c){var d=zd(a),e={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if(tf(a))uf(b,e);else{vf(a,b,e);var f=a.alternate;if(0===a.lanes&&(null===f||0===f.lanes)&&(f=b.lastRenderedReducer,null!==f))try{var g=b.lastRenderedState,h=f(g,c);e.hasEagerState=!0;e.eagerState=h;if(Rc(h,g))return}catch(k){}finally{}c=H();a=Ad(a,d,c);null!==a&&wf(a,b,d)}}function tf(a){var b=a.alternate;return a===K||null!==b&&b===K}\nfunction uf(a,b){Ge=Fe=!0;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b);a.pending=b}function vf(a,b,c){null!==F&&0!==(a.mode&1)&&0===(G&2)?(a=b.interleaved,null===a?(c.next=c,null===md?md=[b]:md.push(b)):(c.next=a.next,a.next=c),b.interleaved=c):(a=b.pending,null===a?c.next=c:(c.next=a.next,a.next=c),b.pending=c)}function wf(a,b,c){if(0!==(c&4194240)){var d=b.lanes;d&=a.pendingLanes;c|=d;b.lanes=c;Dc(a,c)}}\nvar Oe={readContext:ld,useCallback:O,useContext:O,useEffect:O,useImperativeHandle:O,useInsertionEffect:O,useLayoutEffect:O,useMemo:O,useReducer:O,useRef:O,useState:O,useDebugValue:O,useDeferredValue:O,useTransition:O,useMutableSource:O,useSyncExternalStore:O,useId:O,unstable_isNewReconciler:!1},Le={readContext:ld,useCallback:function(a,b){Qe().memoizedState=[a,void 0===b?null:b];return a},useContext:ld,useEffect:hf,useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return ff(4194308,\n4,lf.bind(null,b,a),c)},useLayoutEffect:function(a,b){return ff(4194308,4,a,b)},useInsertionEffect:function(a,b){return ff(4,2,a,b)},useMemo:function(a,b){var c=Qe();b=void 0===b?null:b;a=a();c.memoizedState=[a,b];return a},useReducer:function(a,b,c){var d=Qe();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};d.queue=a;a=a.dispatch=sf.bind(null,K,a);return[d.memoizedState,a]},useRef:function(a){var b=\nQe();a={current:a};return b.memoizedState=a},useState:cf,useDebugValue:nf,useDeferredValue:function(a){var b=cf(a),c=b[0],d=b[1];hf(function(){var b=De.transition;De.transition={};try{d(a)}finally{De.transition=b}},[a]);return c},useTransition:function(){var a=cf(!1),b=a[0];a=qf.bind(null,a[1]);Qe().memoizedState=a;return[b,a]},useMutableSource:function(){},useSyncExternalStore:function(a,b,c){var d=K,e=Qe();if(I){if(void 0===c)throw Error(n(407));c=c()}else{c=b();if(null===F)throw Error(n(349));\n0!==(Ee&30)||af(d,b,c)}e.memoizedState=c;var f={value:c,getSnapshot:b};e.queue=f;hf(Ye.bind(null,d,f,a),[a]);d.flags|=2048;Ze(9,$e.bind(null,d,f,c,b),void 0,null);return c},useId:function(){var a=Qe(),b=F.identifierPrefix;if(I){var c=Od;var d=Nd;c=(d&~(1<<32-qc(d)-1)).toString(32)+c;b=\":\"+b+\"R\"+c;c=He++;0<c&&(b+=\"H\"+c.toString(32));b+=\":\"}else c=Ie++,b=\":\"+b+\"r\"+c.toString(32)+\":\";return a.memoizedState=b},unstable_isNewReconciler:!1},Me={readContext:ld,useCallback:of,useContext:ld,useEffect:Xe,useImperativeHandle:mf,\nuseInsertionEffect:jf,useLayoutEffect:kf,useMemo:pf,useReducer:Te,useRef:ef,useState:function(){return Te(Se)},useDebugValue:nf,useDeferredValue:function(a){var b=Te(Se),c=b[0],d=b[1];Xe(function(){var b=De.transition;De.transition={};try{d(a)}finally{De.transition=b}},[a]);return c},useTransition:function(){var a=Te(Se)[0],b=Re().memoizedState;return[a,b]},useMutableSource:Ve,useSyncExternalStore:We,useId:rf,unstable_isNewReconciler:!1},Ne={readContext:ld,useCallback:of,useContext:ld,useEffect:Xe,\nuseImperativeHandle:mf,useInsertionEffect:jf,useLayoutEffect:kf,useMemo:pf,useReducer:Ue,useRef:ef,useState:function(){return Ue(Se)},useDebugValue:nf,useDeferredValue:function(a){var b=Ue(Se),c=b[0],d=b[1];Xe(function(){var b=De.transition;De.transition={};try{d(a)}finally{De.transition=b}},[a]);return c},useTransition:function(){var a=Ue(Se)[0],b=Re().memoizedState;return[a,b]},useMutableSource:Ve,useSyncExternalStore:We,useId:rf,unstable_isNewReconciler:!1};\nfunction xf(a,b){try{var c=\"\",d=b;do c+=$c(d),d=d.return;while(d);var e=c}catch(f){e=\"\\nError generating stack: \"+f.message+\"\\n\"+f.stack}return{value:a,source:b,stack:e}}function yf(a,b){try{console.error(b.value)}catch(c){setTimeout(function(){throw c;})}}var zf=\"function\"===typeof WeakMap?WeakMap:Map;function Af(a,b,c){c=qd(-1,c);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){Bf||(Bf=!0,Cf=d);yf(a,b)};return c}\nfunction Df(a,b,c){c=qd(-1,c);c.tag=3;var d=a.type.getDerivedStateFromError;if(\"function\"===typeof d){var e=b.value;c.payload=function(){return d(e)};c.callback=function(){yf(a,b)}}var f=a.stateNode;null!==f&&\"function\"===typeof f.componentDidCatch&&(c.callback=function(){yf(a,b);\"function\"!==typeof d&&(null===Ef?Ef=new Set([this]):Ef.add(this));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:\"\"})});return c}\nfunction Ff(a,b,c){var d=a.pingCache;if(null===d){d=a.pingCache=new zf;var e=new Set;d.set(b,e)}else e=d.get(b),void 0===e&&(e=new Set,d.set(b,e));e.has(c)||(e.add(c),a=Gf.bind(null,a,b,c),b.then(a,a))}function Hf(a){do{var b;if(b=13===a.tag)b=a.memoizedState,b=null!==b?null!==b.dehydrated?!0:!1:!0;if(b)return a;a=a.return}while(null!==a);return null}\nfunction If(a,b,c,d,e){if(0===(a.mode&1))return a===b?a.flags|=65536:(a.flags|=128,c.flags|=131072,c.flags&=-52805,1===c.tag&&(null===c.alternate?c.tag=17:(b=qd(-1,1),b.tag=2,rd(c,b))),c.lanes|=1),a;a.flags|=65536;a.lanes=e;return a}function Jf(a){a.flags|=4}function Kf(a,b){if(null!==a&&a.child===b.child)return!0;if(0!==(b.flags&16))return!1;for(a=b.child;null!==a;){if(0!==(a.flags&12854)||0!==(a.subtreeFlags&12854))return!1;a=a.sibling}return!0}var Lf,Mf,Nf,Of;\nif(Ua)Lf=function(a,b){for(var c=b.child;null!==c;){if(5===c.tag||6===c.tag)La(a,c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}},Mf=function(){},Nf=function(a,b,c,d,e){a=a.memoizedProps;if(a!==d){var f=b.stateNode,g=ue(re.current);c=Na(f,c,a,d,e,g);(b.updateQueue=c)&&Jf(b)}},Of=function(a,b,c,d){c!==d&&Jf(b)};else if(Va){Lf=function(a,\nb,c,d){for(var e=b.child;null!==e;){if(5===e.tag){var f=e.stateNode;c&&d&&(f=Db(f,e.type,e.memoizedProps,e));La(a,f)}else if(6===e.tag)f=e.stateNode,c&&d&&(f=Eb(f,e.memoizedProps,e)),La(a,f);else if(4!==e.tag)if(22===e.tag&&null!==e.memoizedState)f=e.child,null!==f&&(f.return=e),Lf(a,e,!0,!0);else if(null!==e.child){e.child.return=e;e=e.child;continue}if(e===b)break;for(;null===e.sibling;){if(null===e.return||e.return===b)return;e=e.return}e.sibling.return=e.return;e=e.sibling}};var Pf=function(a,\nb,c,d){for(var e=b.child;null!==e;){if(5===e.tag){var f=e.stateNode;c&&d&&(f=Db(f,e.type,e.memoizedProps,e));Ab(a,f)}else if(6===e.tag)f=e.stateNode,c&&d&&(f=Eb(f,e.memoizedProps,e)),Ab(a,f);else if(4!==e.tag)if(22===e.tag&&null!==e.memoizedState)f=e.child,null!==f&&(f.return=e),Pf(a,e,!0,!0);else if(null!==e.child){e.child.return=e;e=e.child;continue}if(e===b)break;for(;null===e.sibling;){if(null===e.return||e.return===b)return;e=e.return}e.sibling.return=e.return;e=e.sibling}};Mf=function(a,b){var c=\nb.stateNode;if(!Kf(a,b)){a=c.containerInfo;var d=zb(a);Pf(d,b,!1,!1);c.pendingChildren=d;Jf(b);Bb(a,d)}};Nf=function(a,b,c,d,e){var f=a.stateNode,g=a.memoizedProps;if((a=Kf(a,b))&&g===d)b.stateNode=f;else{var h=b.stateNode,k=ue(re.current),l=null;g!==d&&(l=Na(h,c,g,d,e,k));a&&null===l?b.stateNode=f:(f=yb(f,l,c,g,d,b,a,h),Ma(f,c,d,e,k)&&Jf(b),b.stateNode=f,a?Jf(b):Lf(f,b,!1,!1))}};Of=function(a,b,c,d){c!==d?(a=ue(te.current),c=ue(re.current),b.stateNode=Pa(d,a,c,b),Jf(b)):b.stateNode=a.stateNode}}else Mf=\nfunction(){},Nf=function(){},Of=function(){};function Qf(a,b){if(!I)switch(a.tailMode){case \"hidden\":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case \"collapsed\":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}\nfunction P(a){var b=null!==a.alternate&&a.alternate.child===a.child,c=0,d=0;if(b)for(var e=a.child;null!==e;)c|=e.lanes|e.childLanes,d|=e.subtreeFlags&14680064,d|=e.flags&14680064,e.return=a,e=e.sibling;else for(e=a.child;null!==e;)c|=e.lanes|e.childLanes,d|=e.subtreeFlags,d|=e.flags,e.return=a,e=e.sibling;a.subtreeFlags|=d;a.childLanes=c;return b}\nfunction Rf(a,b,c){var d=b.pendingProps;Sd(b);switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return P(b),null;case 1:return C(b.type)&&kc(),P(b),null;case 3:d=b.stateNode;we();x(B);x(A);Be();d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null);if(null===a||null===a.child)ce(b)?Jf(b):null===a||a.memoizedState.isDehydrated&&0===(b.flags&256)||(b.flags|=1024,null!==Wd&&(Sf(Wd),Wd=null));Mf(a,b);P(b);return null;case 5:ye(b);c=ue(te.current);var e=\nb.type;if(null!==a&&null!=b.stateNode)Nf(a,b,e,d,c),a.ref!==b.ref&&(b.flags|=512,b.flags|=2097152);else{if(!d){if(null===b.stateNode)throw Error(n(166));P(b);return null}a=ue(re.current);if(ce(b)){if(!p)throw Error(n(175));a=Pb(b.stateNode,b.type,b.memoizedProps,c,a,b,!Vd);b.updateQueue=a;null!==a&&Jf(b)}else{var f=Ka(e,d,c,a,b);Lf(f,b,!1,!1);b.stateNode=f;Ma(f,e,d,c,a)&&Jf(b)}null!==b.ref&&(b.flags|=512,b.flags|=2097152)}P(b);return null;case 6:if(a&&null!=b.stateNode)Of(a,b,a.memoizedProps,d);else{if(\"string\"!==\ntypeof d&&null===b.stateNode)throw Error(n(166));a=ue(te.current);c=ue(re.current);if(ce(b)){if(!p)throw Error(n(176));a=b.stateNode;d=b.memoizedProps;if(c=Qb(a,d,b,!Vd))if(e=Td,null!==e)switch(f=0!==(e.mode&1),e.tag){case 3:Yb(e.stateNode.containerInfo,a,d,f);break;case 5:Zb(e.type,e.memoizedProps,e.stateNode,a,d,f)}c&&Jf(b)}else b.stateNode=Pa(d,a,c,b)}P(b);return null;case 13:x(J);d=b.memoizedState;if(I&&null!==Ud&&0!==(b.mode&1)&&0===(b.flags&128)){for(a=Ud;a;)a=Lb(a);de();b.flags|=98560;return b}if(null!==\nd&&null!==d.dehydrated){d=ce(b);if(null===a){if(!d)throw Error(n(318));if(!p)throw Error(n(344));a=b.memoizedState;a=null!==a?a.dehydrated:null;if(!a)throw Error(n(317));Rb(a,b)}else de(),0===(b.flags&128)&&(b.memoizedState=null),b.flags|=4;P(b);return null}null!==Wd&&(Sf(Wd),Wd=null);if(0!==(b.flags&128))return b.lanes=c,b;d=null!==d;c=!1;null===a?ce(b):c=null!==a.memoizedState;d&&!c&&(b.child.flags|=8192,0!==(b.mode&1)&&(null===a||0!==(J.current&1)?0===Q&&(Q=3):Tf()));null!==b.updateQueue&&(b.flags|=\n4);P(b);return null;case 4:return we(),Mf(a,b),null===a&&Xa(b.stateNode.containerInfo),P(b),null;case 10:return hd(b.type._context),P(b),null;case 17:return C(b.type)&&kc(),P(b),null;case 19:x(J);e=b.memoizedState;if(null===e)return P(b),null;d=0!==(b.flags&128);f=e.rendering;if(null===f)if(d)Qf(e,!1);else{if(0!==Q||null!==a&&0!==(a.flags&128))for(a=b.child;null!==a;){f=ze(a);if(null!==f){b.flags|=128;Qf(e,!1);a=f.updateQueue;null!==a&&(b.updateQueue=a,b.flags|=4);b.subtreeFlags=0;a=c;for(d=b.child;null!==\nd;)c=d,e=a,c.flags&=14680066,f=c.alternate,null===f?(c.childLanes=0,c.lanes=e,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=f.childLanes,c.lanes=f.lanes,c.child=f.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=f.memoizedProps,c.memoizedState=f.memoizedState,c.updateQueue=f.updateQueue,c.type=f.type,e=f.dependencies,c.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),d=d.sibling;\ny(J,J.current&1|2);return b.child}a=a.sibling}null!==e.tail&&E()>Uf&&(b.flags|=128,d=!0,Qf(e,!1),b.lanes=4194304)}else{if(!d)if(a=ze(f),null!==a){if(b.flags|=128,d=!0,a=a.updateQueue,null!==a&&(b.updateQueue=a,b.flags|=4),Qf(e,!0),null===e.tail&&\"hidden\"===e.tailMode&&!f.alternate&&!I)return P(b),null}else 2*E()-e.renderingStartTime>Uf&&1073741824!==c&&(b.flags|=128,d=!0,Qf(e,!1),b.lanes=4194304);e.isBackwards?(f.sibling=b.child,b.child=f):(a=e.last,null!==a?a.sibling=f:b.child=f,e.last=f)}if(null!==\ne.tail)return b=e.tail,e.rendering=b,e.tail=b.sibling,e.renderingStartTime=E(),b.sibling=null,a=J.current,y(J,d?a&1|2:a&1),b;P(b);return null;case 22:case 23:return Vf(),d=null!==b.memoizedState,null!==a&&null!==a.memoizedState!==d&&(b.flags|=8192),d&&0!==(b.mode&1)?0!==(Wf&1073741824)&&(P(b),Ua&&b.subtreeFlags&6&&(b.flags|=8192)):P(b),null;case 24:return null;case 25:return null}throw Error(n(156,b.tag));}var Xf=ea.ReactCurrentOwner,kd=!1;\nfunction R(a,b,c,d){b.child=null===a?pe(b,null,c,d):oe(b,a.child,c,d)}function Yf(a,b,c,d,e){c=c.render;var f=b.ref;jd(b,e);d=Ke(a,b,c,d,f,e);c=Pe();if(null!==a&&!kd)return b.updateQueue=a.updateQueue,b.flags&=-2053,a.lanes&=~e,Zf(a,b,e);I&&c&&Rd(b);b.flags|=1;R(a,b,d,e);return b.child}\nfunction $f(a,b,c,d,e){if(null===a){var f=c.type;if(\"function\"===typeof f&&!ag(f)&&void 0===f.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=f,bg(a,b,f,d,e);a=le(c.type,null,d,b,b.mode,e);a.ref=b.ref;a.return=b;return b.child=a}f=a.child;if(0===(a.lanes&e)){var g=f.memoizedProps;c=c.compare;c=null!==c?c:Zc;if(c(g,d)&&a.ref===b.ref)return Zf(a,b,e)}b.flags|=1;a=je(f,d);a.ref=b.ref;a.return=b;return b.child=a}\nfunction bg(a,b,c,d,e){if(null!==a&&Zc(a.memoizedProps,d)&&a.ref===b.ref)if(kd=!1,0!==(a.lanes&e))0!==(a.flags&131072)&&(kd=!0);else return b.lanes=a.lanes,Zf(a,b,e);return cg(a,b,c,d,e)}\nfunction dg(a,b,c){var d=b.pendingProps,e=d.children,f=null!==a?a.memoizedState:null;if(\"hidden\"===d.mode)if(0===(b.mode&1))b.memoizedState={baseLanes:0,cachePool:null},y(eg,Wf),Wf|=c;else if(0!==(c&1073741824))b.memoizedState={baseLanes:0,cachePool:null},d=null!==f?f.baseLanes:c,y(eg,Wf),Wf|=d;else return a=null!==f?f.baseLanes|c:c,b.lanes=b.childLanes=1073741824,b.memoizedState={baseLanes:a,cachePool:null},b.updateQueue=null,y(eg,Wf),Wf|=a,null;else null!==f?(d=f.baseLanes|c,b.memoizedState=null):\nd=c,y(eg,Wf),Wf|=d;R(a,b,e,c);return b.child}function fg(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.flags|=512,b.flags|=2097152}function cg(a,b,c,d,e){var f=C(c)?ic:A.current;f=jc(b,f);jd(b,e);c=Ke(a,b,c,d,f,e);d=Pe();if(null!==a&&!kd)return b.updateQueue=a.updateQueue,b.flags&=-2053,a.lanes&=~e,Zf(a,b,e);I&&d&&Rd(b);b.flags|=1;R(a,b,c,e);return b.child}\nfunction gg(a,b,c,d,e){if(C(c)){var f=!0;nc(b)}else f=!1;jd(b,e);if(null===b.stateNode)null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2),Dd(b,c,d),Fd(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var k=g.context,l=c.contextType;\"object\"===typeof l&&null!==l?l=ld(l):(l=C(c)?ic:A.current,l=jc(b,l));var m=c.getDerivedStateFromProps,v=\"function\"===typeof m||\"function\"===typeof g.getSnapshotBeforeUpdate;v||\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\"function\"!==\ntypeof g.componentWillReceiveProps||(h!==d||k!==l)&&Ed(b,g,d,l);nd=!1;var r=b.memoizedState;g.state=r;ud(b,d,g,e);k=b.memoizedState;h!==d||r!==k||B.current||nd?(\"function\"===typeof m&&(yd(b,c,m,d),k=b.memoizedState),(h=nd||Cd(b,c,h,d,r,k,l))?(v||\"function\"!==typeof g.UNSAFE_componentWillMount&&\"function\"!==typeof g.componentWillMount||(\"function\"===typeof g.componentWillMount&&g.componentWillMount(),\"function\"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),\"function\"===typeof g.componentDidMount&&\n(b.flags|=4194308)):(\"function\"===typeof g.componentDidMount&&(b.flags|=4194308),b.memoizedProps=d,b.memoizedState=k),g.props=d,g.state=k,g.context=l,d=h):(\"function\"===typeof g.componentDidMount&&(b.flags|=4194308),d=!1)}else{g=b.stateNode;pd(a,b);h=b.memoizedProps;l=b.type===b.elementType?h:ad(b.type,h);g.props=l;v=b.pendingProps;r=g.context;k=c.contextType;\"object\"===typeof k&&null!==k?k=ld(k):(k=C(c)?ic:A.current,k=jc(b,k));var z=c.getDerivedStateFromProps;(m=\"function\"===typeof z||\"function\"===\ntypeof g.getSnapshotBeforeUpdate)||\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\"function\"!==typeof g.componentWillReceiveProps||(h!==v||r!==k)&&Ed(b,g,d,k);nd=!1;r=b.memoizedState;g.state=r;ud(b,d,g,e);var q=b.memoizedState;h!==v||r!==q||B.current||nd?(\"function\"===typeof z&&(yd(b,c,z,d),q=b.memoizedState),(l=nd||Cd(b,c,l,d,r,q,k)||!1)?(m||\"function\"!==typeof g.UNSAFE_componentWillUpdate&&\"function\"!==typeof g.componentWillUpdate||(\"function\"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,\nq,k),\"function\"===typeof g.UNSAFE_componentWillUpdate&&g.UNSAFE_componentWillUpdate(d,q,k)),\"function\"===typeof g.componentDidUpdate&&(b.flags|=4),\"function\"===typeof g.getSnapshotBeforeUpdate&&(b.flags|=1024)):(\"function\"!==typeof g.componentDidUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=1024),b.memoizedProps=d,b.memoizedState=q),g.props=d,g.state=q,g.context=k,d=l):(\"function\"!==\ntypeof g.componentDidUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=1024),d=!1)}return hg(a,b,c,d,f,e)}\nfunction hg(a,b,c,d,e,f){fg(a,b);var g=0!==(b.flags&128);if(!d&&!g)return e&&oc(b,c,!1),Zf(a,b,f);d=b.stateNode;Xf.current=b;var h=g&&\"function\"!==typeof c.getDerivedStateFromError?null:d.render();b.flags|=1;null!==a&&g?(b.child=oe(b,a.child,null,f),b.child=oe(b,null,h,f)):R(a,b,h,f);b.memoizedState=d.state;e&&oc(b,c,!0);return b.child}function ig(a){var b=a.stateNode;b.pendingContext?lc(a,b.pendingContext,b.pendingContext!==b.context):b.context&&lc(a,b.context,!1);ve(a,b.containerInfo)}\nfunction jg(a,b,c,d,e){de();ee(e);b.flags|=256;R(a,b,c,d);return b.child}var kg={dehydrated:null,treeContext:null,retryLane:0};function lg(a){return{baseLanes:a,cachePool:null}}\nfunction mg(a,b,c){var d=b.pendingProps,e=J.current,f=!1,g=0!==(b.flags&128),h;(h=g)||(h=null!==a&&null===a.memoizedState?!1:0!==(e&2));if(h)f=!0,b.flags&=-129;else if(null===a||null!==a.memoizedState)e|=1;y(J,e&1);if(null===a){ae(b);a=b.memoizedState;if(null!==a&&(a=a.dehydrated,null!==a))return 0===(b.mode&1)?b.lanes=1:Jb(a)?b.lanes=8:b.lanes=1073741824,null;e=d.children;a=d.fallback;return f?(d=b.mode,f=b.child,e={mode:\"hidden\",children:e},0===(d&1)&&null!==f?(f.childLanes=0,f.pendingProps=e):\nf=ng(e,d,0,null),a=ne(a,d,c,null),f.return=b,a.return=b,f.sibling=a,b.child=f,b.child.memoizedState=lg(c),b.memoizedState=kg,a):og(b,e)}e=a.memoizedState;if(null!==e){h=e.dehydrated;if(null!==h){if(g){if(b.flags&256)return b.flags&=-257,pg(a,b,c,Error(n(422)));if(null!==b.memoizedState)return b.child=a.child,b.flags|=128,null;f=d.fallback;e=b.mode;d=ng({mode:\"visible\",children:d.children},e,0,null);f=ne(f,e,c,null);f.flags|=2;d.return=b;f.return=b;d.sibling=f;b.child=d;0!==(b.mode&1)&&oe(b,a.child,\nnull,c);b.child.memoizedState=lg(c);b.memoizedState=kg;return f}if(0===(b.mode&1))b=pg(a,b,c,null);else if(Jb(h))b=pg(a,b,c,Error(n(419)));else if(d=0!==(c&a.childLanes),kd||d){d=F;if(null!==d){switch(c&-c){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=\n268435456;break;default:f=0}d=0!==(f&(d.suspendedLanes|c))?0:f;0!==d&&d!==e.retryLane&&(e.retryLane=d,Ad(a,d,-1))}Tf();b=pg(a,b,c,Error(n(421)))}else Ib(h)?(b.flags|=128,b.child=a.child,b=qg.bind(null,a),Kb(h,b),b=null):(c=e.treeContext,p&&(Ud=Ob(h),Td=b,I=!0,Wd=null,Vd=!1,null!==c&&(Kd[Ld++]=Nd,Kd[Ld++]=Od,Kd[Ld++]=Md,Nd=c.id,Od=c.overflow,Md=b)),b=og(b,b.pendingProps.children),b.flags|=4096);return b}if(f)return d=rg(a,b,d.children,d.fallback,c),f=b.child,e=a.child.memoizedState,f.memoizedState=\nnull===e?lg(c):{baseLanes:e.baseLanes|c,cachePool:null},f.childLanes=a.childLanes&~c,b.memoizedState=kg,d;c=sg(a,b,d.children,c);b.memoizedState=null;return c}if(f)return d=rg(a,b,d.children,d.fallback,c),f=b.child,e=a.child.memoizedState,f.memoizedState=null===e?lg(c):{baseLanes:e.baseLanes|c,cachePool:null},f.childLanes=a.childLanes&~c,b.memoizedState=kg,d;c=sg(a,b,d.children,c);b.memoizedState=null;return c}\nfunction og(a,b){b=ng({mode:\"visible\",children:b},a.mode,0,null);b.return=a;return a.child=b}function sg(a,b,c,d){var e=a.child;a=e.sibling;c=je(e,{mode:\"visible\",children:c});0===(b.mode&1)&&(c.lanes=d);c.return=b;c.sibling=null;null!==a&&(d=b.deletions,null===d?(b.deletions=[a],b.flags|=16):d.push(a));return b.child=c}\nfunction rg(a,b,c,d,e){var f=b.mode;a=a.child;var g=a.sibling,h={mode:\"hidden\",children:c};0===(f&1)&&b.child!==a?(c=b.child,c.childLanes=0,c.pendingProps=h,b.deletions=null):(c=je(a,h),c.subtreeFlags=a.subtreeFlags&14680064);null!==g?d=je(g,d):(d=ne(d,f,e,null),d.flags|=2);d.return=b;c.return=b;c.sibling=d;b.child=c;return d}function pg(a,b,c,d){null!==d&&ee(d);oe(b,a.child,null,c);a=og(b,b.pendingProps.children);a.flags|=2;b.memoizedState=null;return a}\nfunction tg(a,b,c){a.lanes|=b;var d=a.alternate;null!==d&&(d.lanes|=b);id(a.return,b,c)}function ug(a,b,c,d,e){var f=a.memoizedState;null===f?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:e}:(f.isBackwards=b,f.rendering=null,f.renderingStartTime=0,f.last=d,f.tail=c,f.tailMode=e)}\nfunction vg(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;R(a,b,d.children,c);d=J.current;if(0!==(d&2))d=d&1|2,b.flags|=128;else{if(null!==a&&0!==(a.flags&128))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&tg(a,c,b);else if(19===a.tag)tg(a,c,b);else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=1}y(J,d);if(0===(b.mode&1))b.memoizedState=\nnull;else switch(e){case \"forwards\":c=b.child;for(e=null;null!==c;)a=c.alternate,null!==a&&null===ze(a)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);ug(b,!1,e,c,f);break;case \"backwards\":c=null;e=b.child;for(b.child=null;null!==e;){a=e.alternate;if(null!==a&&null===ze(a)){b.child=e;break}a=e.sibling;e.sibling=c;c=e;e=a}ug(b,!0,c,null,f);break;case \"together\":ug(b,!1,null,null,void 0);break;default:b.memoizedState=null}return b.child}\nfunction Zf(a,b,c){null!==a&&(b.dependencies=a.dependencies);vd|=b.lanes;if(0===(c&b.childLanes))return null;if(null!==a&&b.child!==a.child)throw Error(n(153));if(null!==b.child){a=b.child;c=je(a,a.pendingProps);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=je(a,a.pendingProps),c.return=b;c.sibling=null}return b.child}\nfunction wg(a,b,c){switch(b.tag){case 3:ig(b);de();break;case 5:xe(b);break;case 1:C(b.type)&&nc(b);break;case 4:ve(b,b.stateNode.containerInfo);break;case 10:gd(b,b.type._context,b.memoizedProps.value);break;case 13:var d=b.memoizedState;if(null!==d){if(null!==d.dehydrated)return y(J,J.current&1),b.flags|=128,null;if(0!==(c&b.child.childLanes))return mg(a,b,c);y(J,J.current&1);a=Zf(a,b,c);return null!==a?a.sibling:null}y(J,J.current&1);break;case 19:d=0!==(c&b.childLanes);if(0!==(a.flags&128)){if(d)return vg(a,\nb,c);b.flags|=128}var e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null,e.lastEffect=null);y(J,J.current);if(d)break;else return null;case 22:case 23:return b.lanes=0,dg(a,b,c)}return Zf(a,b,c)}\nfunction xg(a,b){Sd(b);switch(b.tag){case 1:return C(b.type)&&kc(),a=b.flags,a&65536?(b.flags=a&-65537|128,b):null;case 3:return we(),x(B),x(A),Be(),a=b.flags,0!==(a&65536)&&0===(a&128)?(b.flags=a&-65537|128,b):null;case 5:return ye(b),null;case 13:x(J);a=b.memoizedState;if(null!==a&&null!==a.dehydrated){if(null===b.alternate)throw Error(n(340));de()}a=b.flags;return a&65536?(b.flags=a&-65537|128,b):null;case 19:return x(J),null;case 4:return we(),null;case 10:return hd(b.type._context),null;case 22:case 23:return Vf(),\nnull;case 24:return null;default:return null}}var yg=!1,zg=!1,Ag=\"function\"===typeof WeakSet?WeakSet:Set,S=null;function Bg(a,b){var c=a.ref;if(null!==c)if(\"function\"===typeof c)try{c(null)}catch(d){T(a,b,d)}else c.current=null}function Cg(a,b,c){try{c()}catch(d){T(a,b,d)}}var Dg=!1;\nfunction Eg(a,b){Ia(a.containerInfo);for(S=b;null!==S;)if(a=S,b=a.child,0!==(a.subtreeFlags&1028)&&null!==b)b.return=a,S=b;else for(;null!==S;){a=S;try{var c=a.alternate;if(0!==(a.flags&1024))switch(a.tag){case 0:case 11:case 15:break;case 1:if(null!==c){var d=c.memoizedProps,e=c.memoizedState,f=a.stateNode,g=f.getSnapshotBeforeUpdate(a.elementType===a.type?d:ad(a.type,d),e);f.__reactInternalSnapshotBeforeUpdate=g}break;case 3:Ua&&xb(a.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;\ndefault:throw Error(n(163));}}catch(h){T(a,a.return,h)}b=a.sibling;if(null!==b){b.return=a.return;S=b;break}S=a.return}c=Dg;Dg=!1;return c}function Fg(a,b,c){var d=b.updateQueue;d=null!==d?d.lastEffect:null;if(null!==d){var e=d=d.next;do{if((e.tag&a)===a){var f=e.destroy;e.destroy=void 0;void 0!==f&&Cg(b,c,f)}e=e.next}while(e!==d)}}function Gg(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.create;c.destroy=d()}c=c.next}while(c!==b)}}\nfunction Hg(a){var b=a.ref;if(null!==b){var c=a.stateNode;switch(a.tag){case 5:a=Fa(c);break;default:a=c}\"function\"===typeof b?b(a):b.current=a}}\nfunction Ig(a,b,c){if(Oc&&\"function\"===typeof Oc.onCommitFiberUnmount)try{Oc.onCommitFiberUnmount(Nc,b)}catch(g){}switch(b.tag){case 0:case 11:case 14:case 15:a=b.updateQueue;if(null!==a&&(a=a.lastEffect,null!==a)){var d=a=a.next;do{var e=d,f=e.destroy;e=e.tag;void 0!==f&&(0!==(e&2)?Cg(b,c,f):0!==(e&4)&&Cg(b,c,f));d=d.next}while(d!==a)}break;case 1:Bg(b,c);a=b.stateNode;if(\"function\"===typeof a.componentWillUnmount)try{a.props=b.memoizedProps,a.state=b.memoizedState,a.componentWillUnmount()}catch(g){T(b,\nc,g)}break;case 5:Bg(b,c);break;case 4:Ua?Jg(a,b,c):Va&&Va&&(b=b.stateNode.containerInfo,c=zb(b),Cb(b,c))}}function Kg(a,b,c){for(var d=b;;)if(Ig(a,d,c),null===d.child||Ua&&4===d.tag){if(d===b)break;for(;null===d.sibling;){if(null===d.return||d.return===b)return;d=d.return}d.sibling.return=d.return;d=d.sibling}else d.child.return=d,d=d.child}\nfunction Lg(a){var b=a.alternate;null!==b&&(a.alternate=null,Lg(b));a.child=null;a.deletions=null;a.sibling=null;5===a.tag&&(b=a.stateNode,null!==b&&Za(b));a.stateNode=null;a.return=null;a.dependencies=null;a.memoizedProps=null;a.memoizedState=null;a.pendingProps=null;a.stateNode=null;a.updateQueue=null}function Mg(a){return 5===a.tag||3===a.tag||4===a.tag}\nfunction Ng(a){a:for(;;){for(;null===a.sibling;){if(null===a.return||Mg(a.return))return null;a=a.return}a.sibling.return=a.return;for(a=a.sibling;5!==a.tag&&6!==a.tag&&18!==a.tag;){if(a.flags&2)continue a;if(null===a.child||4===a.tag)continue a;else a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}\nfunction Og(a){if(Ua){a:{for(var b=a.return;null!==b;){if(Mg(b))break a;b=b.return}throw Error(n(160));}var c=b;switch(c.tag){case 5:b=c.stateNode;c.flags&32&&(sb(b),c.flags&=-33);c=Ng(a);Pg(a,c,b);break;case 3:case 4:b=c.stateNode.containerInfo;c=Ng(a);Qg(a,c,b);break;default:throw Error(n(161));}}}function Qg(a,b,c){var d=a.tag;if(5===d||6===d)a=a.stateNode,b?pb(c,a,b):kb(c,a);else if(4!==d&&(a=a.child,null!==a))for(Qg(a,b,c),a=a.sibling;null!==a;)Qg(a,b,c),a=a.sibling}\nfunction Pg(a,b,c){var d=a.tag;if(5===d||6===d)a=a.stateNode,b?ob(c,a,b):jb(c,a);else if(4!==d&&(a=a.child,null!==a))for(Pg(a,b,c),a=a.sibling;null!==a;)Pg(a,b,c),a=a.sibling}\nfunction Jg(a,b,c){for(var d=b,e=!1,f,g;;){if(!e){e=d.return;a:for(;;){if(null===e)throw Error(n(160));f=e.stateNode;switch(e.tag){case 5:g=!1;break a;case 3:f=f.containerInfo;g=!0;break a;case 4:f=f.containerInfo;g=!0;break a}e=e.return}e=!0}if(5===d.tag||6===d.tag)Kg(a,d,c),g?rb(f,d.stateNode):qb(f,d.stateNode);else if(18===d.tag)g?Wb(f,d.stateNode):Vb(f,d.stateNode);else if(4===d.tag){if(null!==d.child){f=d.stateNode.containerInfo;g=!0;d.child.return=d;d=d.child;continue}}else if(Ig(a,d,c),null!==\nd.child){d.child.return=d;d=d.child;continue}if(d===b)break;for(;null===d.sibling;){if(null===d.return||d.return===b)return;d=d.return;4===d.tag&&(e=!1)}d.sibling.return=d.return;d=d.sibling}}\nfunction Rg(a,b){if(Ua){switch(b.tag){case 0:case 11:case 14:case 15:Fg(3,b,b.return);Gg(3,b);Fg(5,b,b.return);return;case 1:return;case 5:var c=b.stateNode;if(null!=c){var d=b.memoizedProps;a=null!==a?a.memoizedProps:d;var e=b.type,f=b.updateQueue;b.updateQueue=null;null!==f&&nb(c,f,e,a,d,b)}return;case 6:if(null===b.stateNode)throw Error(n(162));c=b.memoizedProps;lb(b.stateNode,null!==a?a.memoizedProps:c,c);return;case 3:p&&null!==a&&a.memoizedState.isDehydrated&&Tb(b.stateNode.containerInfo);return;\ncase 12:return;case 13:Sg(b);return;case 19:Sg(b);return;case 17:return}throw Error(n(163));}switch(b.tag){case 0:case 11:case 14:case 15:Fg(3,b,b.return);Gg(3,b);Fg(5,b,b.return);return;case 12:return;case 13:Sg(b);return;case 19:Sg(b);return;case 3:p&&null!==a&&a.memoizedState.isDehydrated&&Tb(b.stateNode.containerInfo);break;case 22:case 23:return}a:if(Va){switch(b.tag){case 1:case 5:case 6:break a;case 3:case 4:b=b.stateNode;Cb(b.containerInfo,b.pendingChildren);break a}throw Error(n(163));}}\nfunction Sg(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=new Ag);b.forEach(function(b){var d=Tg.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}\nfunction Ug(a,b){for(S=b;null!==S;){b=S;var c=b.deletions;if(null!==c)for(var d=0;d<c.length;d++){var e=c[d];try{var f=a;Ua?Jg(f,e,b):Kg(f,e,b);var g=e.alternate;null!==g&&(g.return=null);e.return=null}catch(wa){T(e,b,wa)}}c=b.child;if(0!==(b.subtreeFlags&12854)&&null!==c)c.return=b,S=c;else for(;null!==S;){b=S;try{var h=b.flags;h&32&&Ua&&sb(b.stateNode);if(h&512){var k=b.alternate;if(null!==k){var l=k.ref;null!==l&&(\"function\"===typeof l?l(null):l.current=null)}}if(h&8192)switch(b.tag){case 13:if(null!==\nb.memoizedState){var m=b.alternate;if(null===m||null===m.memoizedState)Vg=E()}break;case 22:var v=null!==b.memoizedState,r=b.alternate,z=null!==r&&null!==r.memoizedState;c=b;if(Ua)a:if(d=c,e=v,f=null,Ua)for(var q=d;;){if(5===q.tag){if(null===f){f=q;var N=q.stateNode;e?tb(N):vb(q.stateNode,q.memoizedProps)}}else if(6===q.tag){if(null===f){var da=q.stateNode;e?ub(da):wb(da,q.memoizedProps)}}else if((22!==q.tag&&23!==q.tag||null===q.memoizedState||q===d)&&null!==q.child){q.child.return=q;q=q.child;continue}if(q===\nd)break;for(;null===q.sibling;){if(null===q.return||q.return===d)break a;f===q&&(f=null);q=q.return}f===q&&(f=null);q.sibling.return=q.return;q=q.sibling}if(v&&!z&&0!==(c.mode&1)){S=c;for(var t=c.child;null!==t;){for(c=S=t;null!==S;){d=S;var w=d.child;switch(d.tag){case 0:case 11:case 14:case 15:Fg(4,d,d.return);break;case 1:Bg(d,d.return);var u=d.stateNode;if(\"function\"===typeof u.componentWillUnmount){var V=d.return;try{u.props=d.memoizedProps,u.state=d.memoizedState,u.componentWillUnmount()}catch(wa){T(d,\nV,wa)}}break;case 5:Bg(d,d.return);break;case 22:if(null!==d.memoizedState){Wg(c);continue}}null!==w?(w.return=d,S=w):Wg(c)}t=t.sibling}}}switch(h&4102){case 2:Og(b);b.flags&=-3;break;case 6:Og(b);b.flags&=-3;Rg(b.alternate,b);break;case 4096:b.flags&=-4097;break;case 4100:b.flags&=-4097;Rg(b.alternate,b);break;case 4:Rg(b.alternate,b)}}catch(wa){T(b,b.return,wa)}c=b.sibling;if(null!==c){c.return=b.return;S=c;break}S=b.return}}}function Xg(a,b,c){S=a;Yg(a,b,c)}\nfunction Yg(a,b,c){for(var d=0!==(a.mode&1);null!==S;){var e=S,f=e.child;if(22===e.tag&&d){var g=null!==e.memoizedState||yg;if(!g){var h=e.alternate,k=null!==h&&null!==h.memoizedState||zg;h=yg;var l=zg;yg=g;if((zg=k)&&!l)for(S=e;null!==S;)g=S,k=g.child,22===g.tag&&null!==g.memoizedState?Zg(e):null!==k?(k.return=g,S=k):Zg(e);for(;null!==f;)S=f,Yg(f,b,c),f=f.sibling;S=e;yg=h;zg=l}$g(a,b,c)}else 0!==(e.subtreeFlags&8772)&&null!==f?(f.return=e,S=f):$g(a,b,c)}}\nfunction $g(a){for(;null!==S;){var b=S;if(0!==(b.flags&8772)){var c=b.alternate;try{if(0!==(b.flags&8772))switch(b.tag){case 0:case 11:case 15:zg||Gg(5,b);break;case 1:var d=b.stateNode;if(b.flags&4&&!zg)if(null===c)d.componentDidMount();else{var e=b.elementType===b.type?c.memoizedProps:ad(b.type,c.memoizedProps);d.componentDidUpdate(e,c.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var f=b.updateQueue;null!==f&&wd(b,f,d);break;case 3:var g=b.updateQueue;if(null!==g){c=null;if(null!==b.child)switch(b.child.tag){case 5:c=\nFa(b.child.stateNode);break;case 1:c=b.child.stateNode}wd(b,g,c)}break;case 5:var h=b.stateNode;null===c&&b.flags&4&&mb(h,b.type,b.memoizedProps,b);break;case 6:break;case 4:break;case 12:break;case 13:if(p&&null===b.memoizedState){var k=b.alternate;if(null!==k){var l=k.memoizedState;if(null!==l){var m=l.dehydrated;null!==m&&Ub(m)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(n(163));}zg||b.flags&512&&Hg(b)}catch(v){T(b,b.return,v)}}if(b===a){S=null;break}c=b.sibling;if(null!==\nc){c.return=b.return;S=c;break}S=b.return}}function Wg(a){for(;null!==S;){var b=S;if(b===a){S=null;break}var c=b.sibling;if(null!==c){c.return=b.return;S=c;break}S=b.return}}\nfunction Zg(a){for(;null!==S;){var b=S;try{switch(b.tag){case 0:case 11:case 15:var c=b.return;try{Gg(4,b)}catch(k){T(b,c,k)}break;case 1:var d=b.stateNode;if(\"function\"===typeof d.componentDidMount){var e=b.return;try{d.componentDidMount()}catch(k){T(b,e,k)}}var f=b.return;try{Hg(b)}catch(k){T(b,f,k)}break;case 5:var g=b.return;try{Hg(b)}catch(k){T(b,g,k)}}}catch(k){T(b,b.return,k)}if(b===a){S=null;break}var h=b.sibling;if(null!==h){h.return=b.return;S=h;break}S=b.return}}\nvar ah=0,bh=1,ch=2,dh=3,eh=4;if(\"function\"===typeof Symbol&&Symbol.for){var fh=Symbol.for;ah=fh(\"selector.component\");bh=fh(\"selector.has_pseudo_class\");ch=fh(\"selector.role\");dh=fh(\"selector.test_id\");eh=fh(\"selector.text\")}function gh(a){var b=Wa(a);if(null!=b){if(\"string\"!==typeof b.memoizedProps[\"data-testname\"])throw Error(n(364));return b}a=cb(a);if(null===a)throw Error(n(362));return a.stateNode.current}\nfunction hh(a,b){switch(b.$$typeof){case ah:if(a.type===b.value)return!0;break;case bh:a:{b=b.value;a=[a,0];for(var c=0;c<a.length;){var d=a[c++],e=a[c++],f=b[e];if(5!==d.tag||!fb(d)){for(;null!=f&&hh(d,f);)e++,f=b[e];if(e===b.length){b=!0;break a}else for(d=d.child;null!==d;)a.push(d,e),d=d.sibling}}b=!1}return b;case ch:if(5===a.tag&&gb(a.stateNode,b.value))return!0;break;case eh:if(5===a.tag||6===a.tag)if(a=eb(a),null!==a&&0<=a.indexOf(b.value))return!0;break;case dh:if(5===a.tag&&(a=a.memoizedProps[\"data-testname\"],\n\"string\"===typeof a&&a.toLowerCase()===b.value.toLowerCase()))return!0;break;default:throw Error(n(365));}return!1}function ih(a){switch(a.$$typeof){case ah:return\"<\"+(va(a.value)||\"Unknown\")+\">\";case bh:return\":has(\"+(ih(a)||\"\")+\")\";case ch:return'[role=\"'+a.value+'\"]';case eh:return'\"'+a.value+'\"';case dh:return'[data-testname=\"'+a.value+'\"]';default:throw Error(n(365));}}\nfunction jh(a,b){var c=[];a=[a,0];for(var d=0;d<a.length;){var e=a[d++],f=a[d++],g=b[f];if(5!==e.tag||!fb(e)){for(;null!=g&&hh(e,g);)f++,g=b[f];if(f===b.length)c.push(e);else for(e=e.child;null!==e;)a.push(e,f),e=e.sibling}}return c}function kh(a,b){if(!bb)throw Error(n(363));a=gh(a);a=jh(a,b);b=[];a=Array.from(a);for(var c=0;c<a.length;){var d=a[c++];if(5===d.tag)fb(d)||b.push(d.stateNode);else for(d=d.child;null!==d;)a.push(d),d=d.sibling}return b}\nvar lh=Math.ceil,mh=ea.ReactCurrentDispatcher,nh=ea.ReactCurrentOwner,U=ea.ReactCurrentBatchConfig,G=0,F=null,W=null,X=0,Wf=0,eg=gc(0),Q=0,oh=null,vd=0,ph=0,qh=0,rh=null,Y=null,Vg=0,Uf=Infinity;function sh(){Uf=E()+500}var Bf=!1,Cf=null,Ef=null,th=!1,uh=null,vh=0,wh=0,xh=null,yh=-1,zh=0;function H(){return 0!==(G&6)?E():-1!==yh?yh:yh=E()}\nfunction zd(a){if(0===(a.mode&1))return 1;if(0!==(G&2)&&0!==X)return X&-X;if(null!==Yc.transition)return 0===zh&&(a=tc,tc<<=1,0===(tc&4194240)&&(tc=64),zh=a),zh;a=D;return 0!==a?a:Ya()}function Ad(a,b,c){if(50<wh)throw wh=0,xh=null,Error(n(185));var d=Ah(a,b);if(null===d)return null;Bc(d,b,c);if(0===(G&2)||d!==F)d===F&&(0===(G&2)&&(ph|=b),4===Q&&Bh(d,X)),Z(d,c),1===b&&0===G&&0===(a.mode&1)&&(sh(),Tc&&Xc());return d}\nfunction Ah(a,b){a.lanes|=b;var c=a.alternate;null!==c&&(c.lanes|=b);c=a;for(a=a.return;null!==a;)a.childLanes|=b,c=a.alternate,null!==c&&(c.childLanes|=b),c=a,a=a.return;return 3===c.tag?c.stateNode:null}\nfunction Z(a,b){var c=a.callbackNode;yc(a,b);var d=wc(a,a===F?X:0);if(0===d)null!==c&&Gc(c),a.callbackNode=null,a.callbackPriority=0;else if(b=d&-d,a.callbackPriority!==b){null!=c&&Gc(c);if(1===b)0===a.tag?Wc(Ch.bind(null,a)):Vc(Ch.bind(null,a)),$a?ab(function(){0===G&&Xc()}):Fc(Jc,Xc),c=null;else{switch(Ec(d)){case 1:c=Jc;break;case 4:c=Kc;break;case 16:c=Lc;break;case 536870912:c=Mc;break;default:c=Lc}c=Dh(c,Eh.bind(null,a))}a.callbackPriority=b;a.callbackNode=c}}\nfunction Eh(a,b){yh=-1;zh=0;if(0!==(G&6))throw Error(n(327));var c=a.callbackNode;if(Fh()&&a.callbackNode!==c)return null;var d=wc(a,a===F?X:0);if(0===d)return null;if(0!==(d&30)||0!==(d&a.expiredLanes)||b)b=Gh(a,d);else{b=d;var e=G;G|=2;var f=Hh();if(F!==a||X!==b)sh(),Ih(a,b);do try{Jh();break}catch(h){Kh(a,h)}while(1);fd();mh.current=f;G=e;null!==W?b=0:(F=null,X=0,b=Q)}if(0!==b){2===b&&(e=zc(a),0!==e&&(d=e,b=Lh(a,e)));if(1===b)throw c=oh,Ih(a,0),Bh(a,d),Z(a,E()),c;if(6===b)Bh(a,d);else{e=a.current.alternate;\nif(0===(d&30)&&!Mh(e)&&(b=Gh(a,d),2===b&&(f=zc(a),0!==f&&(d=f,b=Lh(a,f))),1===b))throw c=oh,Ih(a,0),Bh(a,d),Z(a,E()),c;a.finishedWork=e;a.finishedLanes=d;switch(b){case 0:case 1:throw Error(n(345));case 2:Nh(a,Y);break;case 3:Bh(a,d);if((d&130023424)===d&&(b=Vg+500-E(),10<b)){if(0!==wc(a,0))break;e=a.suspendedLanes;if((e&d)!==d){H();a.pingedLanes|=a.suspendedLanes&e;break}a.timeoutHandle=Qa(Nh.bind(null,a,Y),b);break}Nh(a,Y);break;case 4:Bh(a,d);if((d&4194240)===d)break;b=a.eventTimes;for(e=-1;0<\nd;){var g=31-qc(d);f=1<<g;g=b[g];g>e&&(e=g);d&=~f}d=e;d=E()-d;d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3E3>d?3E3:4320>d?4320:1960*lh(d/1960))-d;if(10<d){a.timeoutHandle=Qa(Nh.bind(null,a,Y),d);break}Nh(a,Y);break;case 5:Nh(a,Y);break;default:throw Error(n(329));}}}Z(a,E());return a.callbackNode===c?Eh.bind(null,a):null}function Lh(a,b){var c=rh;a.current.memoizedState.isDehydrated&&(Ih(a,b).flags|=256);a=Gh(a,b);2!==a&&(b=Y,Y=c,null!==b&&Sf(b));return a}\nfunction Sf(a){null===Y?Y=a:Y.push.apply(Y,a)}function Mh(a){for(var b=a;;){if(b.flags&16384){var c=b.updateQueue;if(null!==c&&(c=c.stores,null!==c))for(var d=0;d<c.length;d++){var e=c[d],f=e.getSnapshot;e=e.value;try{if(!Rc(f(),e))return!1}catch(g){return!1}}}c=b.child;if(b.subtreeFlags&16384&&null!==c)c.return=b,b=c;else{if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return!0;b=b.return}b.sibling.return=b.return;b=b.sibling}}return!0}\nfunction Bh(a,b){b&=~qh;b&=~ph;a.suspendedLanes|=b;a.pingedLanes&=~b;for(a=a.expirationTimes;0<b;){var c=31-qc(b),d=1<<c;a[c]=-1;b&=~d}}function Ch(a){if(0!==(G&6))throw Error(n(327));Fh();var b=wc(a,0);if(0===(b&1))return Z(a,E()),null;var c=Gh(a,b);if(0!==a.tag&&2===c){var d=zc(a);0!==d&&(b=d,c=Lh(a,d))}if(1===c)throw c=oh,Ih(a,0),Bh(a,b),Z(a,E()),c;if(6===c)throw Error(n(345));a.finishedWork=a.current.alternate;a.finishedLanes=b;Nh(a,Y);Z(a,E());return null}\nfunction Oh(a){null!==uh&&0===uh.tag&&0===(G&6)&&Fh();var b=G;G|=1;var c=U.transition,d=D;try{if(U.transition=null,D=1,a)return a()}finally{D=d,U.transition=c,G=b,0===(G&6)&&Xc()}}function Vf(){Wf=eg.current;x(eg)}\nfunction Ih(a,b){a.finishedWork=null;a.finishedLanes=0;var c=a.timeoutHandle;c!==Sa&&(a.timeoutHandle=Sa,Ra(c));if(null!==W)for(c=W.return;null!==c;){var d=c;Sd(d);switch(d.tag){case 1:d=d.type.childContextTypes;null!==d&&void 0!==d&&kc();break;case 3:we();x(B);x(A);Be();break;case 5:ye(d);break;case 4:we();break;case 13:x(J);break;case 19:x(J);break;case 10:hd(d.type._context);break;case 22:case 23:Vf()}c=c.return}F=a;W=a=je(a.current,null);X=Wf=b;Q=0;oh=null;qh=ph=vd=0;Y=rh=null;if(null!==md){for(b=\n0;b<md.length;b++)if(c=md[b],d=c.interleaved,null!==d){c.interleaved=null;var e=d.next,f=c.pending;if(null!==f){var g=f.next;f.next=e;d.next=g}c.pending=d}md=null}return a}\nfunction Kh(a,b){do{var c=W;try{fd();Ce.current=Oe;if(Fe){for(var d=K.memoizedState;null!==d;){var e=d.queue;null!==e&&(e.pending=null);d=d.next}Fe=!1}Ee=0;M=L=K=null;Ge=!1;He=0;nh.current=null;if(null===c||null===c.return){Q=1;oh=b;W=null;break}a:{var f=a,g=c.return,h=c,k=b;b=X;h.flags|=32768;if(null!==k&&\"object\"===typeof k&&\"function\"===typeof k.then){var l=k,m=h,v=m.tag;if(0===(m.mode&1)&&(0===v||11===v||15===v)){var r=m.alternate;r?(m.updateQueue=r.updateQueue,m.memoizedState=r.memoizedState,\nm.lanes=r.lanes):(m.updateQueue=null,m.memoizedState=null)}var z=Hf(g);if(null!==z){z.flags&=-257;If(z,g,h,f,b);z.mode&1&&Ff(f,l,b);b=z;k=l;var q=b.updateQueue;if(null===q){var N=new Set;N.add(k);b.updateQueue=N}else q.add(k);break a}else{if(0===(b&1)){Ff(f,l,b);Tf();break a}k=Error(n(426))}}else if(I&&h.mode&1){var da=Hf(g);if(null!==da){0===(da.flags&65536)&&(da.flags|=256);If(da,g,h,f,b);ee(k);break a}}f=k;4!==Q&&(Q=2);null===rh?rh=[f]:rh.push(f);k=xf(k,h);h=g;do{switch(h.tag){case 3:h.flags|=\n65536;b&=-b;h.lanes|=b;var t=Af(h,k,b);td(h,t);break a;case 1:f=k;var w=h.type,u=h.stateNode;if(0===(h.flags&128)&&(\"function\"===typeof w.getDerivedStateFromError||null!==u&&\"function\"===typeof u.componentDidCatch&&(null===Ef||!Ef.has(u)))){h.flags|=65536;b&=-b;h.lanes|=b;var V=Df(h,f,b);td(h,V);break a}}h=h.return}while(null!==h)}Ph(c)}catch(wa){b=wa;W===c&&null!==c&&(W=c=c.return);continue}break}while(1)}function Hh(){var a=mh.current;mh.current=Oe;return null===a?Oe:a}\nfunction Tf(){if(0===Q||3===Q||2===Q)Q=4;null===F||0===(vd&268435455)&&0===(ph&268435455)||Bh(F,X)}function Gh(a,b){var c=G;G|=2;var d=Hh();F===a&&X===b||Ih(a,b);do try{Qh();break}catch(e){Kh(a,e)}while(1);fd();G=c;mh.current=d;if(null!==W)throw Error(n(261));F=null;X=0;return Q}function Qh(){for(;null!==W;)Rh(W)}function Jh(){for(;null!==W&&!Hc();)Rh(W)}function Rh(a){var b=Sh(a.alternate,a,Wf);a.memoizedProps=a.pendingProps;null===b?Ph(a):W=b;nh.current=null}\nfunction Ph(a){var b=a;do{var c=b.alternate;a=b.return;if(0===(b.flags&32768)){if(c=Rf(c,b,Wf),null!==c){W=c;return}}else{c=xg(c,b);if(null!==c){c.flags&=32767;W=c;return}if(null!==a)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Q=6;W=null;return}}b=b.sibling;if(null!==b){W=b;return}W=b=a}while(null!==b);0===Q&&(Q=5)}function Nh(a,b){var c=D,d=U.transition;try{U.transition=null,D=1,Th(a,b,c)}finally{U.transition=d,D=c}return null}\nfunction Th(a,b,c){do Fh();while(null!==uh);if(0!==(G&6))throw Error(n(327));var d=a.finishedWork,e=a.finishedLanes;if(null===d)return null;a.finishedWork=null;a.finishedLanes=0;if(d===a.current)throw Error(n(177));a.callbackNode=null;a.callbackPriority=0;var f=d.lanes|d.childLanes;Cc(a,f);a===F&&(W=F=null,X=0);0===(d.subtreeFlags&2064)&&0===(d.flags&2064)||th||(th=!0,Dh(Lc,function(){Fh();return null}));f=0!==(d.flags&15990);if(0!==(d.subtreeFlags&15990)||f){f=U.transition;U.transition=null;var g=\nD;D=1;var h=G;G|=4;nh.current=null;Eg(a,d);Ug(a,d,e);Ja(a.containerInfo);a.current=d;Xg(d,a,e);Ic();G=h;D=g;U.transition=f}else a.current=d;th&&(th=!1,uh=a,vh=e);f=a.pendingLanes;0===f&&(Ef=null);Pc(d.stateNode,c);Z(a,E());if(null!==b)for(c=a.onRecoverableError,d=0;d<b.length;d++)c(b[d]);if(Bf)throw Bf=!1,a=Cf,Cf=null,a;0!==(vh&1)&&0!==a.tag&&Fh();f=a.pendingLanes;0!==(f&1)?a===xh?wh++:(wh=0,xh=a):wh=0;Xc();return null}\nfunction Fh(){if(null!==uh){var a=Ec(vh),b=U.transition,c=D;try{U.transition=null;D=16>a?16:a;if(null===uh)var d=!1;else{a=uh;uh=null;vh=0;if(0!==(G&6))throw Error(n(331));var e=G;G|=4;for(S=a.current;null!==S;){var f=S,g=f.child;if(0!==(S.flags&16)){var h=f.deletions;if(null!==h){for(var k=0;k<h.length;k++){var l=h[k];for(S=l;null!==S;){var m=S;switch(m.tag){case 0:case 11:case 15:Fg(8,m,f)}var v=m.child;if(null!==v)v.return=m,S=v;else for(;null!==S;){m=S;var r=m.sibling,z=m.return;Lg(m);if(m===\nl){S=null;break}if(null!==r){r.return=z;S=r;break}S=z}}}var q=f.alternate;if(null!==q){var N=q.child;if(null!==N){q.child=null;do{var da=N.sibling;N.sibling=null;N=da}while(null!==N)}}S=f}}if(0!==(f.subtreeFlags&2064)&&null!==g)g.return=f,S=g;else b:for(;null!==S;){f=S;if(0!==(f.flags&2048))switch(f.tag){case 0:case 11:case 15:Fg(9,f,f.return)}var t=f.sibling;if(null!==t){t.return=f.return;S=t;break b}S=f.return}}var w=a.current;for(S=w;null!==S;){g=S;var u=g.child;if(0!==(g.subtreeFlags&2064)&&null!==\nu)u.return=g,S=u;else b:for(g=w;null!==S;){h=S;if(0!==(h.flags&2048))try{switch(h.tag){case 0:case 11:case 15:Gg(9,h)}}catch(wa){T(h,h.return,wa)}if(h===g){S=null;break b}var V=h.sibling;if(null!==V){V.return=h.return;S=V;break b}S=h.return}}G=e;Xc();if(Oc&&\"function\"===typeof Oc.onPostCommitFiberRoot)try{Oc.onPostCommitFiberRoot(Nc,a)}catch(wa){}d=!0}return d}finally{D=c,U.transition=b}}return!1}function Uh(a,b,c){b=xf(c,b);b=Af(a,b,1);rd(a,b);b=H();a=Ah(a,1);null!==a&&(Bc(a,1,b),Z(a,b))}\nfunction T(a,b,c){if(3===a.tag)Uh(a,a,c);else for(;null!==b;){if(3===b.tag){Uh(b,a,c);break}else if(1===b.tag){var d=b.stateNode;if(\"function\"===typeof b.type.getDerivedStateFromError||\"function\"===typeof d.componentDidCatch&&(null===Ef||!Ef.has(d))){a=xf(c,a);a=Df(b,a,1);rd(b,a);a=H();b=Ah(b,1);null!==b&&(Bc(b,1,a),Z(b,a));break}}b=b.return}}\nfunction Gf(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);b=H();a.pingedLanes|=a.suspendedLanes&c;F===a&&(X&c)===c&&(4===Q||3===Q&&(X&130023424)===X&&500>E()-Vg?Ih(a,0):qh|=c);Z(a,b)}function Vh(a,b){0===b&&(0===(a.mode&1)?b=1:(b=uc,uc<<=1,0===(uc&130023424)&&(uc=4194304)));var c=H();a=Ah(a,b);null!==a&&(Bc(a,b,c),Z(a,c))}function qg(a){var b=a.memoizedState,c=0;null!==b&&(c=b.retryLane);Vh(a,c)}\nfunction Tg(a,b){var c=0;switch(a.tag){case 13:var d=a.stateNode;var e=a.memoizedState;null!==e&&(c=e.retryLane);break;case 19:d=a.stateNode;break;default:throw Error(n(314));}null!==d&&d.delete(b);Vh(a,c)}var Sh;\nSh=function(a,b,c){if(null!==a)if(a.memoizedProps!==b.pendingProps||B.current)kd=!0;else{if(0===(a.lanes&c)&&0===(b.flags&128))return kd=!1,wg(a,b,c);kd=0!==(a.flags&131072)?!0:!1}else kd=!1,I&&0!==(b.flags&1048576)&&Qd(b,Jd,b.index);b.lanes=0;switch(b.tag){case 2:var d=b.type;null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2);a=b.pendingProps;var e=jc(b,A.current);jd(b,c);e=Ke(null,b,d,a,e,c);var f=Pe();b.flags|=1;\"object\"===typeof e&&null!==e&&\"function\"===typeof e.render&&void 0===e.$$typeof?\n(b.tag=1,b.memoizedState=null,b.updateQueue=null,C(d)?(f=!0,nc(b)):f=!1,b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,od(b),e.updater=Bd,b.stateNode=e,e._reactInternals=b,Fd(b,d,a,c),b=hg(null,b,d,!0,f,c)):(b.tag=0,I&&f&&Rd(b),R(null,b,e,c),b=b.child);return b;case 16:d=b.elementType;a:{null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2);a=b.pendingProps;e=d._init;d=e(d._payload);b.type=d;e=b.tag=Wh(d);a=ad(d,a);switch(e){case 0:b=cg(null,b,d,a,c);break a;case 1:b=gg(null,b,d,\na,c);break a;case 11:b=Yf(null,b,d,a,c);break a;case 14:b=$f(null,b,d,ad(d.type,a),c);break a}throw Error(n(306,d,\"\"));}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:ad(d,e),cg(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:ad(d,e),gg(a,b,d,e,c);case 3:a:{ig(b);if(null===a)throw Error(n(387));d=b.pendingProps;f=b.memoizedState;e=f.element;pd(a,b);ud(b,d,null,c);var g=b.memoizedState;d=g.element;if(p&&f.isDehydrated)if(f={element:d,isDehydrated:!1,\ncache:g.cache,transitions:g.transitions},b.updateQueue.baseState=f,b.memoizedState=f,b.flags&256){e=Error(n(423));b=jg(a,b,d,c,e);break a}else if(d!==e){e=Error(n(424));b=jg(a,b,d,c,e);break a}else for(p&&(Ud=Nb(b.stateNode.containerInfo),Td=b,I=!0,Wd=null,Vd=!1),c=pe(b,null,d,c),b.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{de();if(d===e){b=Zf(a,b,c);break a}R(a,b,d,c)}b=b.child}return b;case 5:return xe(b),null===a&&ae(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:null,g=e.children,\nOa(d,e)?g=null:null!==f&&Oa(d,f)&&(b.flags|=32),fg(a,b),R(a,b,g,c),b.child;case 6:return null===a&&ae(b),null;case 13:return mg(a,b,c);case 4:return ve(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=oe(b,null,d,c):R(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:ad(d,e),Yf(a,b,d,e,c);case 7:return R(a,b,b.pendingProps,c),b.child;case 8:return R(a,b,b.pendingProps.children,c),b.child;case 12:return R(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=\nb.type._context;e=b.pendingProps;f=b.memoizedProps;g=e.value;gd(b,d,g);if(null!==f)if(Rc(f.value,g)){if(f.children===e.children&&!B.current){b=Zf(a,b,c);break a}}else for(f=b.child,null!==f&&(f.return=b);null!==f;){var h=f.dependencies;if(null!==h){g=f.child;for(var k=h.firstContext;null!==k;){if(k.context===d){if(1===f.tag){k=qd(-1,c&-c);k.tag=2;var l=f.updateQueue;if(null!==l){l=l.shared;var m=l.pending;null===m?k.next=k:(k.next=m.next,m.next=k);l.pending=k}}f.lanes|=c;k=f.alternate;null!==k&&(k.lanes|=\nc);id(f.return,c,b);h.lanes|=c;break}k=k.next}}else if(10===f.tag)g=f.type===b.type?null:f.child;else if(18===f.tag){g=f.return;if(null===g)throw Error(n(341));g.lanes|=c;h=g.alternate;null!==h&&(h.lanes|=c);id(g,c,b);g=f.sibling}else g=f.child;if(null!==g)g.return=f;else for(g=f;null!==g;){if(g===b){g=null;break}f=g.sibling;if(null!==f){f.return=g.return;g=f;break}g=g.return}f=g}R(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,d=b.pendingProps.children,jd(b,c),e=ld(e),d=d(e),b.flags|=\n1,R(a,b,d,c),b.child;case 14:return d=b.type,e=ad(d,b.pendingProps),e=ad(d.type,e),$f(a,b,d,e,c);case 15:return bg(a,b,b.type,b.pendingProps,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:ad(d,e),null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2),b.tag=1,C(d)?(a=!0,nc(b)):a=!1,jd(b,c),Dd(b,d,e),Fd(b,d,e,c),hg(null,b,d,!0,a,c);case 19:return vg(a,b,c);case 22:return dg(a,b,c)}throw Error(n(156,b.tag));};function Dh(a,b){return Fc(a,b)}\nfunction Xh(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.subtreeFlags=this.flags=0;this.deletions=null;this.childLanes=this.lanes=0;this.alternate=null}function Yd(a,b,c,d){return new Xh(a,b,c,d)}function ag(a){a=a.prototype;return!(!a||!a.isReactComponent)}\nfunction Wh(a){if(\"function\"===typeof a)return ag(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===na)return 11;if(a===qa)return 14}return 2}\nfunction je(a,b){var c=a.alternate;null===c?(c=Yd(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null);c.flags=a.flags&14680064;c.childLanes=a.childLanes;c.lanes=a.lanes;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{lanes:b.lanes,firstContext:b.firstContext};\nc.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}\nfunction le(a,b,c,d,e,f){var g=2;d=a;if(\"function\"===typeof a)ag(a)&&(g=1);else if(\"string\"===typeof a)g=5;else a:switch(a){case ia:return ne(c.children,e,f,b);case ja:g=8;e|=8;break;case ka:return a=Yd(12,c,b,e|2),a.elementType=ka,a.lanes=f,a;case oa:return a=Yd(13,c,b,e),a.elementType=oa,a.lanes=f,a;case pa:return a=Yd(19,c,b,e),a.elementType=pa,a.lanes=f,a;case sa:return ng(c,e,f,b);default:if(\"object\"===typeof a&&null!==a)switch(a.$$typeof){case la:g=10;break a;case ma:g=9;break a;case na:g=11;\nbreak a;case qa:g=14;break a;case ra:g=16;d=null;break a}throw Error(n(130,null==a?a:typeof a,\"\"));}b=Yd(g,c,b,e);b.elementType=a;b.type=d;b.lanes=f;return b}function ne(a,b,c,d){a=Yd(7,a,d,b);a.lanes=c;return a}function ng(a,b,c,d){a=Yd(22,a,d,b);a.elementType=sa;a.lanes=c;a.stateNode={};return a}function ke(a,b,c){a=Yd(6,a,null,b);a.lanes=c;return a}\nfunction me(a,b,c){b=Yd(4,null!==a.children?a.children:[],a.key,b);b.lanes=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}\nfunction Yh(a,b,c,d,e){this.tag=b;this.containerInfo=a;this.finishedWork=this.pingCache=this.current=this.pendingChildren=null;this.timeoutHandle=Sa;this.callbackNode=this.pendingContext=this.context=null;this.callbackPriority=0;this.eventTimes=Ac(0);this.expirationTimes=Ac(-1);this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0;this.entanglements=Ac(0);this.identifierPrefix=d;this.onRecoverableError=e;p&&(this.mutableSourceEagerHydrationData=\nnull)}function Zh(a,b,c,d,e,f,g,h,k){a=new Yh(a,b,c,h,k);1===b?(b=1,!0===f&&(b|=8)):b=0;f=Yd(3,null,null,b);a.current=f;f.stateNode=a;f.memoizedState={element:d,isDehydrated:c,cache:null,transitions:null};od(f);return a}\nfunction $h(a){if(!a)return hc;a=a._reactInternals;a:{if(ya(a)!==a||1!==a.tag)throw Error(n(170));var b=a;do{switch(b.tag){case 3:b=b.stateNode.context;break a;case 1:if(C(b.type)){b=b.stateNode.__reactInternalMemoizedMergedChildContext;break a}}b=b.return}while(null!==b);throw Error(n(171));}if(1===a.tag){var c=a.type;if(C(c))return mc(a,c,b)}return b}\nfunction ai(a){var b=a._reactInternals;if(void 0===b){if(\"function\"===typeof a.render)throw Error(n(188));a=Object.keys(a).join(\",\");throw Error(n(268,a));}a=Ba(b);return null===a?null:a.stateNode}function bi(a,b){a=a.memoizedState;if(null!==a&&null!==a.dehydrated){var c=a.retryLane;a.retryLane=0!==c&&c<b?c:b}}function ci(a,b){bi(a,b);(a=a.alternate)&&bi(a,b)}function di(a){a=Ba(a);return null===a?null:a.stateNode}function ei(){return null}\nexports.attemptContinuousHydration=function(a){if(13===a.tag){var b=H();Ad(a,134217728,b);ci(a,134217728)}};exports.attemptHydrationAtCurrentPriority=function(a){if(13===a.tag){var b=H(),c=zd(a);Ad(a,c,b);ci(a,c)}};exports.attemptSynchronousHydration=function(a){switch(a.tag){case 3:var b=a.stateNode;if(b.current.memoizedState.isDehydrated){var c=vc(b.pendingLanes);0!==c&&(Dc(b,c|1),Z(b,E()),0===(G&6)&&(sh(),Xc()))}break;case 13:var d=H();Oh(function(){return Ad(a,1,d)});ci(a,1)}};\nexports.batchedUpdates=function(a,b){var c=G;G|=1;try{return a(b)}finally{G=c,0===G&&(sh(),Tc&&Xc())}};exports.createComponentSelector=function(a){return{$$typeof:ah,value:a}};exports.createContainer=function(a,b,c,d,e,f,g){return Zh(a,b,!1,null,c,d,e,f,g)};exports.createHasPseudoClassSelector=function(a){return{$$typeof:bh,value:a}};\nexports.createHydrationContainer=function(a,b,c,d,e,f,g,h,k){a=Zh(c,d,!0,a,e,f,g,h,k);a.context=$h(null);c=a.current;d=H();e=zd(c);f=qd(d,e);f.callback=void 0!==b&&null!==b?b:null;rd(c,f);a.current.lanes=e;Bc(a,e,d);Z(a,d);return a};exports.createPortal=function(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:ha,key:null==d?null:\"\"+d,children:a,containerInfo:b,implementation:c}};exports.createRoleSelector=function(a){return{$$typeof:ch,value:a}};\nexports.createTestNameSelector=function(a){return{$$typeof:dh,value:a}};exports.createTextSelector=function(a){return{$$typeof:eh,value:a}};exports.deferredUpdates=function(a){var b=D,c=U.transition;try{return U.transition=null,D=16,a()}finally{D=b,U.transition=c}};exports.discreteUpdates=function(a,b,c,d,e){var f=D,g=U.transition;try{return U.transition=null,D=1,a(b,c,d,e)}finally{D=f,U.transition=g,0===G&&sh()}};exports.findAllNodes=kh;\nexports.findBoundingRects=function(a,b){if(!bb)throw Error(n(363));b=kh(a,b);a=[];for(var c=0;c<b.length;c++)a.push(db(b[c]));for(b=a.length-1;0<b;b--){c=a[b];for(var d=c.x,e=d+c.width,f=c.y,g=f+c.height,h=b-1;0<=h;h--)if(b!==h){var k=a[h],l=k.x,m=l+k.width,v=k.y,r=v+k.height;if(d>=l&&f>=v&&e<=m&&g<=r){a.splice(b,1);break}else if(!(d!==l||c.width!==k.width||r<f||v>g)){v>f&&(k.height+=v-f,k.y=f);r<g&&(k.height=g-v);a.splice(b,1);break}else if(!(f!==v||c.height!==k.height||m<d||l>e)){l>d&&(k.width+=\nl-d,k.x=d);m<e&&(k.width=e-l);a.splice(b,1);break}}}return a};exports.findHostInstance=ai;exports.findHostInstanceWithNoPortals=function(a){a=Aa(a);a=null!==a?Da(a):null;return null===a?null:a.stateNode};exports.findHostInstanceWithWarning=function(a){return ai(a)};exports.flushControlled=function(a){var b=G;G|=1;var c=U.transition,d=D;try{U.transition=null,D=1,a()}finally{D=d,U.transition=c,G=b,0===G&&(sh(),Xc())}};exports.flushPassiveEffects=Fh;exports.flushSync=Oh;\nexports.focusWithin=function(a,b){if(!bb)throw Error(n(363));a=gh(a);b=jh(a,b);b=Array.from(b);for(a=0;a<b.length;){var c=b[a++];if(!fb(c)){if(5===c.tag&&hb(c.stateNode))return!0;for(c=c.child;null!==c;)b.push(c),c=c.sibling}}return!1};exports.getCurrentUpdatePriority=function(){return D};\nexports.getFindAllNodesFailureDescription=function(a,b){if(!bb)throw Error(n(363));var c=0,d=[];a=[gh(a),0];for(var e=0;e<a.length;){var f=a[e++],g=a[e++],h=b[g];if(5!==f.tag||!fb(f))if(hh(f,h)&&(d.push(ih(h)),g++,g>c&&(c=g)),g<b.length)for(f=f.child;null!==f;)a.push(f,g),f=f.sibling}if(c<b.length){for(a=[];c<b.length;c++)a.push(ih(b[c]));return\"findAllNodes was able to match part of the selector:\\n  \"+(d.join(\" > \")+\"\\n\\nNo matching component was found for:\\n  \")+a.join(\" > \")}return null};\nexports.getPublicRootInstance=function(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return Fa(a.child.stateNode);default:return a.child.stateNode}};\nexports.injectIntoDevTools=function(a){a={bundleType:a.bundleType,version:a.version,rendererPackageName:a.rendererPackageName,rendererConfig:a.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ea.ReactCurrentDispatcher,findHostInstanceByFiber:di,findFiberByHostInstance:a.findFiberByHostInstance||\nei,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:\"18.0.0-fc46dba67-20220329\"};if(\"undefined\"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)a=!1;else{var b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(b.isDisabled||!b.supportsFiber)a=!0;else{try{Nc=b.inject(a),Oc=b}catch(c){}a=b.checkDCE?!0:!1}}return a};exports.isAlreadyRendering=function(){return!1};\nexports.observeVisibleRects=function(a,b,c,d){if(!bb)throw Error(n(363));a=kh(a,b);var e=ib(a,c,d).disconnect;return{disconnect:function(){e()}}};exports.registerMutableSourceForHydration=function(a,b){var c=b._getVersion;c=c(b._source);null==a.mutableSourceEagerHydrationData?a.mutableSourceEagerHydrationData=[b,c]:a.mutableSourceEagerHydrationData.push(b,c)};exports.runWithPriority=function(a,b){var c=D;try{return D=a,b()}finally{D=c}};exports.shouldError=function(){return null};\nexports.shouldSuspend=function(){return!1};exports.updateContainer=function(a,b,c,d){var e=b.current,f=H(),g=zd(e);c=$h(c);null===b.context?b.context=c:b.pendingContext=c;b=qd(f,g);b.payload={element:a};d=void 0===d?null:d;null!==d&&(b.callback=d);rd(e,b);a=Ad(e,g,f);null!==a&&sd(a,e,g);return g};\n\n    return exports;\n};\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-reconciler-constants.production.min.js');\n} else {\n  module.exports = require('./cjs/react-reconciler-constants.development.js');\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-reconciler.production.min.js');\n} else {\n  module.exports = require('./cjs/react-reconciler.development.js');\n}\n","/**\n * @license React\n * scheduler.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';function f(a,b){var c=a.length;a.push(b);a:for(;0<c;){var d=c-1>>>1,e=a[d];if(0<g(e,b))a[d]=b,a[c]=e,c=d;else break a}}function h(a){return 0===a.length?null:a[0]}function k(a){if(0===a.length)return null;var b=a[0],c=a.pop();if(c!==b){a[0]=c;a:for(var d=0,e=a.length,w=e>>>1;d<w;){var m=2*(d+1)-1,C=a[m],n=m+1,x=a[n];if(0>g(C,c))n<e&&0>g(x,C)?(a[d]=x,a[n]=c,d=n):(a[d]=C,a[m]=c,d=m);else if(n<e&&0>g(x,c))a[d]=x,a[n]=c,d=n;else break a}}return b}\nfunction g(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}if(\"object\"===typeof performance&&\"function\"===typeof performance.now){var l=performance;exports.unstable_now=function(){return l.now()}}else{var p=Date,q=p.now();exports.unstable_now=function(){return p.now()-q}}var r=[],t=[],u=1,v=null,y=3,z=!1,A=!1,B=!1,D=\"function\"===typeof setTimeout?setTimeout:null,E=\"function\"===typeof clearTimeout?clearTimeout:null,F=\"undefined\"!==typeof setImmediate?setImmediate:null;\n\"undefined\"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(a){for(var b=h(t);null!==b;){if(null===b.callback)k(t);else if(b.startTime<=a)k(t),b.sortIndex=b.expirationTime,f(r,b);else break;b=h(t)}}function H(a){B=!1;G(a);if(!A)if(null!==h(r))A=!0,I(J);else{var b=h(t);null!==b&&K(H,b.startTime-a)}}\nfunction J(a,b){A=!1;B&&(B=!1,E(L),L=-1);z=!0;var c=y;try{G(b);for(v=h(r);null!==v&&(!(v.expirationTime>b)||a&&!M());){var d=v.callback;if(\"function\"===typeof d){v.callback=null;y=v.priorityLevel;var e=d(v.expirationTime<=b);b=exports.unstable_now();\"function\"===typeof e?v.callback=e:v===h(r)&&k(r);G(b)}else k(r);v=h(r)}if(null!==v)var w=!0;else{var m=h(t);null!==m&&K(H,m.startTime-b);w=!1}return w}finally{v=null,y=c,z=!1}}var N=!1,O=null,L=-1,P=5,Q=-1;\nfunction M(){return exports.unstable_now()-Q<P?!1:!0}function R(){if(null!==O){var a=exports.unstable_now();Q=a;var b=!0;try{b=O(!0,a)}finally{b?S():(N=!1,O=null)}}else N=!1}var S;if(\"function\"===typeof F)S=function(){F(R)};else if(\"undefined\"!==typeof MessageChannel){var T=new MessageChannel,U=T.port2;T.port1.onmessage=R;S=function(){U.postMessage(null)}}else S=function(){D(R,0)};function I(a){O=a;N||(N=!0,S())}function K(a,b){L=D(function(){a(exports.unstable_now())},b)}\nexports.unstable_IdlePriority=5;exports.unstable_ImmediatePriority=1;exports.unstable_LowPriority=4;exports.unstable_NormalPriority=3;exports.unstable_Profiling=null;exports.unstable_UserBlockingPriority=2;exports.unstable_cancelCallback=function(a){a.callback=null};exports.unstable_continueExecution=function(){A||z||(A=!0,I(J))};\nexports.unstable_forceFrameRate=function(a){0>a||125<a?console.error(\"forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported\"):P=0<a?Math.floor(1E3/a):5};exports.unstable_getCurrentPriorityLevel=function(){return y};exports.unstable_getFirstCallbackNode=function(){return h(r)};exports.unstable_next=function(a){switch(y){case 1:case 2:case 3:var b=3;break;default:b=y}var c=y;y=b;try{return a()}finally{y=c}};exports.unstable_pauseExecution=function(){};\nexports.unstable_requestPaint=function(){};exports.unstable_runWithPriority=function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=y;y=a;try{return b()}finally{y=c}};\nexports.unstable_scheduleCallback=function(a,b,c){var d=exports.unstable_now();\"object\"===typeof c&&null!==c?(c=c.delay,c=\"number\"===typeof c&&0<c?d+c:d):c=d;switch(a){case 1:var e=-1;break;case 2:e=250;break;case 5:e=1073741823;break;case 4:e=1E4;break;default:e=5E3}e=c+e;a={id:u++,callback:b,priorityLevel:a,startTime:c,expirationTime:e,sortIndex:-1};c>d?(a.sortIndex=c,f(t,a),null===h(r)&&a===h(t)&&(B?(E(L),L=-1):B=!0,K(H,c-d))):(a.sortIndex=e,f(r,a),A||z||(A=!0,I(J)));return a};\nexports.unstable_shouldYield=M;exports.unstable_wrapCallback=function(a){var b=y;return function(){var c=y;y=b;try{return a.apply(this,arguments)}finally{y=c}}};\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/scheduler.production.min.js');\n} else {\n  module.exports = require('./cjs/scheduler.development.js');\n}\n","import { BufferGeometry, BufferAttribute, InterleavedBuffer, InterleavedBufferAttribute, TrianglesDrawMode, TriangleFanDrawMode, TriangleStripDrawMode, Vector3, Float32BufferAttribute } from \"three\";\nimport { getWithKey } from \"../types/helpers.js\";\nconst mergeBufferGeometries = (geometries, useGroups) => {\n  const isIndexed = geometries[0].index !== null;\n  const attributesUsed = new Set(Object.keys(geometries[0].attributes));\n  const morphAttributesUsed = new Set(Object.keys(geometries[0].morphAttributes));\n  const attributes = {};\n  const morphAttributes = {};\n  const morphTargetsRelative = geometries[0].morphTargetsRelative;\n  const mergedGeometry = new BufferGeometry();\n  let offset = 0;\n  geometries.forEach((geom, i) => {\n    let attributesCount = 0;\n    if (isIndexed !== (geom.index !== null)) {\n      console.error(\n        \"THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index \" + i + \". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them.\"\n      );\n      return null;\n    }\n    for (let name in geom.attributes) {\n      if (!attributesUsed.has(name)) {\n        console.error(\n          \"THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index \" + i + '. All geometries must have compatible attributes; make sure \"' + name + '\" attribute exists among all geometries, or in none of them.'\n        );\n        return null;\n      }\n      if (attributes[name] === void 0) {\n        attributes[name] = [];\n      }\n      attributes[name].push(geom.attributes[name]);\n      attributesCount++;\n    }\n    if (attributesCount !== attributesUsed.size) {\n      console.error(\n        \"THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index \" + i + \". Make sure all geometries have the same number of attributes.\"\n      );\n      return null;\n    }\n    if (morphTargetsRelative !== geom.morphTargetsRelative) {\n      console.error(\n        \"THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index \" + i + \". .morphTargetsRelative must be consistent throughout all geometries.\"\n      );\n      return null;\n    }\n    for (let name in geom.morphAttributes) {\n      if (!morphAttributesUsed.has(name)) {\n        console.error(\n          \"THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index \" + i + \".  .morphAttributes must be consistent throughout all geometries.\"\n        );\n        return null;\n      }\n      if (morphAttributes[name] === void 0)\n        morphAttributes[name] = [];\n      morphAttributes[name].push(geom.morphAttributes[name]);\n    }\n    mergedGeometry.userData.mergedUserData = mergedGeometry.userData.mergedUserData || [];\n    mergedGeometry.userData.mergedUserData.push(geom.userData);\n    if (useGroups) {\n      let count;\n      if (geom.index) {\n        count = geom.index.count;\n      } else if (geom.attributes.position !== void 0) {\n        count = geom.attributes.position.count;\n      } else {\n        console.error(\n          \"THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index \" + i + \". The geometry must have either an index or a position attribute\"\n        );\n        return null;\n      }\n      mergedGeometry.addGroup(offset, count, i);\n      offset += count;\n    }\n  });\n  if (isIndexed) {\n    let indexOffset = 0;\n    const mergedIndex = [];\n    geometries.forEach((geom) => {\n      const index = geom.index;\n      for (let j = 0; j < index.count; ++j) {\n        mergedIndex.push(index.getX(j) + indexOffset);\n      }\n      indexOffset += geom.attributes.position.count;\n    });\n    mergedGeometry.setIndex(mergedIndex);\n  }\n  for (let name in attributes) {\n    const mergedAttribute = mergeBufferAttributes(attributes[name]);\n    if (!mergedAttribute) {\n      console.error(\n        \"THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the \" + name + \" attribute.\"\n      );\n      return null;\n    }\n    mergedGeometry.setAttribute(name, mergedAttribute);\n  }\n  for (let name in morphAttributes) {\n    const numMorphTargets = morphAttributes[name][0].length;\n    if (numMorphTargets === 0)\n      break;\n    mergedGeometry.morphAttributes = mergedGeometry.morphAttributes || {};\n    mergedGeometry.morphAttributes[name] = [];\n    for (let i = 0; i < numMorphTargets; ++i) {\n      const morphAttributesToMerge = [];\n      for (let j = 0; j < morphAttributes[name].length; ++j) {\n        morphAttributesToMerge.push(morphAttributes[name][j][i]);\n      }\n      const mergedMorphAttribute = mergeBufferAttributes(morphAttributesToMerge);\n      if (!mergedMorphAttribute) {\n        console.error(\n          \"THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the \" + name + \" morphAttribute.\"\n        );\n        return null;\n      }\n      mergedGeometry.morphAttributes[name].push(mergedMorphAttribute);\n    }\n  }\n  return mergedGeometry;\n};\nconst mergeBufferAttributes = (attributes) => {\n  let TypedArray = void 0;\n  let itemSize = void 0;\n  let normalized = void 0;\n  let arrayLength = 0;\n  attributes.forEach((attr) => {\n    if (TypedArray === void 0) {\n      TypedArray = attr.array.constructor;\n    }\n    if (TypedArray !== attr.array.constructor) {\n      console.error(\n        \"THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes.\"\n      );\n      return null;\n    }\n    if (itemSize === void 0)\n      itemSize = attr.itemSize;\n    if (itemSize !== attr.itemSize) {\n      console.error(\n        \"THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes.\"\n      );\n      return null;\n    }\n    if (normalized === void 0)\n      normalized = attr.normalized;\n    if (normalized !== attr.normalized) {\n      console.error(\n        \"THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes.\"\n      );\n      return null;\n    }\n    arrayLength += attr.array.length;\n  });\n  if (TypedArray && itemSize) {\n    const array = new TypedArray(arrayLength);\n    let offset = 0;\n    attributes.forEach((attr) => {\n      array.set(attr.array, offset);\n      offset += attr.array.length;\n    });\n    return new BufferAttribute(array, itemSize, normalized);\n  }\n};\nconst interleaveAttributes = (attributes) => {\n  let TypedArray = void 0;\n  let arrayLength = 0;\n  let stride = 0;\n  for (let i = 0, l = attributes.length; i < l; ++i) {\n    const attribute = attributes[i];\n    if (TypedArray === void 0)\n      TypedArray = attribute.array.constructor;\n    if (TypedArray !== attribute.array.constructor) {\n      console.error(\"AttributeBuffers of different types cannot be interleaved\");\n      return null;\n    }\n    arrayLength += attribute.array.length;\n    stride += attribute.itemSize;\n  }\n  const interleavedBuffer = new InterleavedBuffer(new TypedArray(arrayLength), stride);\n  let offset = 0;\n  const res = [];\n  const getters = [\"getX\", \"getY\", \"getZ\", \"getW\"];\n  const setters = [\"setX\", \"setY\", \"setZ\", \"setW\"];\n  for (let j = 0, l = attributes.length; j < l; j++) {\n    const attribute = attributes[j];\n    const itemSize = attribute.itemSize;\n    const count = attribute.count;\n    const iba = new InterleavedBufferAttribute(interleavedBuffer, itemSize, offset, attribute.normalized);\n    res.push(iba);\n    offset += itemSize;\n    for (let c = 0; c < count; c++) {\n      for (let k = 0; k < itemSize; k++) {\n        const set = getWithKey(iba, setters[k]);\n        const get = getWithKey(attribute, getters[k]);\n        set(c, get(c));\n      }\n    }\n  }\n  return res;\n};\nfunction estimateBytesUsed(geometry) {\n  let mem = 0;\n  for (let name in geometry.attributes) {\n    const attr = geometry.getAttribute(name);\n    mem += attr.count * attr.itemSize * attr.array.BYTES_PER_ELEMENT;\n  }\n  const indices = geometry.getIndex();\n  mem += indices ? indices.count * indices.itemSize * indices.array.BYTES_PER_ELEMENT : 0;\n  return mem;\n}\nfunction mergeVertices(geometry, tolerance = 1e-4) {\n  tolerance = Math.max(tolerance, Number.EPSILON);\n  const hashToIndex = {};\n  const indices = geometry.getIndex();\n  const positions = geometry.getAttribute(\"position\");\n  const vertexCount = indices ? indices.count : positions.count;\n  let nextIndex = 0;\n  const attributeNames = Object.keys(geometry.attributes);\n  const attrArrays = {};\n  const morphAttrsArrays = {};\n  const newIndices = [];\n  const getters = [\"getX\", \"getY\", \"getZ\", \"getW\"];\n  for (let i = 0, l = attributeNames.length; i < l; i++) {\n    const name = attributeNames[i];\n    attrArrays[name] = [];\n    const morphAttr = geometry.morphAttributes[name];\n    if (morphAttr) {\n      morphAttrsArrays[name] = new Array(morphAttr.length).fill(0).map(() => []);\n    }\n  }\n  const decimalShift = Math.log10(1 / tolerance);\n  const shiftMultiplier = Math.pow(10, decimalShift);\n  for (let i = 0; i < vertexCount; i++) {\n    const index = indices ? indices.getX(i) : i;\n    let hash = \"\";\n    for (let j = 0, l = attributeNames.length; j < l; j++) {\n      const name = attributeNames[j];\n      const attribute = geometry.getAttribute(name);\n      const itemSize = attribute.itemSize;\n      for (let k = 0; k < itemSize; k++) {\n        hash += `${~~(attribute[getters[k]](index) * shiftMultiplier)},`;\n      }\n    }\n    if (hash in hashToIndex) {\n      newIndices.push(hashToIndex[hash]);\n    } else {\n      for (let j = 0, l = attributeNames.length; j < l; j++) {\n        const name = attributeNames[j];\n        const attribute = geometry.getAttribute(name);\n        const morphAttr = geometry.morphAttributes[name];\n        const itemSize = attribute.itemSize;\n        const newarray = attrArrays[name];\n        const newMorphArrays = morphAttrsArrays[name];\n        for (let k = 0; k < itemSize; k++) {\n          const getterFunc = getters[k];\n          newarray.push(attribute[getterFunc](index));\n          if (morphAttr) {\n            for (let m = 0, ml = morphAttr.length; m < ml; m++) {\n              newMorphArrays[m].push(morphAttr[m][getterFunc](index));\n            }\n          }\n        }\n      }\n      hashToIndex[hash] = nextIndex;\n      newIndices.push(nextIndex);\n      nextIndex++;\n    }\n  }\n  const result = geometry.clone();\n  for (let i = 0, l = attributeNames.length; i < l; i++) {\n    const name = attributeNames[i];\n    const oldAttribute = geometry.getAttribute(name);\n    const buffer = new oldAttribute.array.constructor(attrArrays[name]);\n    const attribute = new BufferAttribute(buffer, oldAttribute.itemSize, oldAttribute.normalized);\n    result.setAttribute(name, attribute);\n    if (name in morphAttrsArrays) {\n      for (let j = 0; j < morphAttrsArrays[name].length; j++) {\n        const oldMorphAttribute = geometry.morphAttributes[name][j];\n        const buffer2 = new oldMorphAttribute.array.constructor(morphAttrsArrays[name][j]);\n        const morphAttribute = new BufferAttribute(buffer2, oldMorphAttribute.itemSize, oldMorphAttribute.normalized);\n        result.morphAttributes[name][j] = morphAttribute;\n      }\n    }\n  }\n  result.setIndex(newIndices);\n  return result;\n}\nfunction toTrianglesDrawMode(geometry, drawMode) {\n  if (drawMode === TrianglesDrawMode) {\n    console.warn(\"THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles.\");\n    return geometry;\n  }\n  if (drawMode === TriangleFanDrawMode || drawMode === TriangleStripDrawMode) {\n    let index = geometry.getIndex();\n    if (index === null) {\n      const indices = [];\n      const position = geometry.getAttribute(\"position\");\n      if (position !== void 0) {\n        for (let i = 0; i < position.count; i++) {\n          indices.push(i);\n        }\n        geometry.setIndex(indices);\n        index = geometry.getIndex();\n      } else {\n        console.error(\n          \"THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.\"\n        );\n        return geometry;\n      }\n    }\n    const numberOfTriangles = index.count - 2;\n    const newIndices = [];\n    if (index) {\n      if (drawMode === TriangleFanDrawMode) {\n        for (let i = 1; i <= numberOfTriangles; i++) {\n          newIndices.push(index.getX(0));\n          newIndices.push(index.getX(i));\n          newIndices.push(index.getX(i + 1));\n        }\n      } else {\n        for (let i = 0; i < numberOfTriangles; i++) {\n          if (i % 2 === 0) {\n            newIndices.push(index.getX(i));\n            newIndices.push(index.getX(i + 1));\n            newIndices.push(index.getX(i + 2));\n          } else {\n            newIndices.push(index.getX(i + 2));\n            newIndices.push(index.getX(i + 1));\n            newIndices.push(index.getX(i));\n          }\n        }\n      }\n    }\n    if (newIndices.length / 3 !== numberOfTriangles) {\n      console.error(\"THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.\");\n    }\n    const newGeometry = geometry.clone();\n    newGeometry.setIndex(newIndices);\n    newGeometry.clearGroups();\n    return newGeometry;\n  } else {\n    console.error(\"THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:\", drawMode);\n    return geometry;\n  }\n}\nfunction computeMorphedAttributes(object) {\n  if (object.geometry.isBufferGeometry !== true) {\n    console.error(\"THREE.BufferGeometryUtils: Geometry is not of type BufferGeometry.\");\n    return null;\n  }\n  const _vA = new Vector3();\n  const _vB = new Vector3();\n  const _vC = new Vector3();\n  const _tempA = new Vector3();\n  const _tempB = new Vector3();\n  const _tempC = new Vector3();\n  const _morphA = new Vector3();\n  const _morphB = new Vector3();\n  const _morphC = new Vector3();\n  function _calculateMorphedAttributeData(object2, material2, attribute, morphAttribute, morphTargetsRelative2, a2, b2, c2, modifiedAttributeArray) {\n    _vA.fromBufferAttribute(attribute, a2);\n    _vB.fromBufferAttribute(attribute, b2);\n    _vC.fromBufferAttribute(attribute, c2);\n    const morphInfluences = object2.morphTargetInfluences;\n    if (\n      // @ts-ignore\n      material2.morphTargets && morphAttribute && morphInfluences\n    ) {\n      _morphA.set(0, 0, 0);\n      _morphB.set(0, 0, 0);\n      _morphC.set(0, 0, 0);\n      for (let i2 = 0, il2 = morphAttribute.length; i2 < il2; i2++) {\n        const influence = morphInfluences[i2];\n        const morph = morphAttribute[i2];\n        if (influence === 0)\n          continue;\n        _tempA.fromBufferAttribute(morph, a2);\n        _tempB.fromBufferAttribute(morph, b2);\n        _tempC.fromBufferAttribute(morph, c2);\n        if (morphTargetsRelative2) {\n          _morphA.addScaledVector(_tempA, influence);\n          _morphB.addScaledVector(_tempB, influence);\n          _morphC.addScaledVector(_tempC, influence);\n        } else {\n          _morphA.addScaledVector(_tempA.sub(_vA), influence);\n          _morphB.addScaledVector(_tempB.sub(_vB), influence);\n          _morphC.addScaledVector(_tempC.sub(_vC), influence);\n        }\n      }\n      _vA.add(_morphA);\n      _vB.add(_morphB);\n      _vC.add(_morphC);\n    }\n    if (object2.isSkinnedMesh) {\n      object2.boneTransform(a2, _vA);\n      object2.boneTransform(b2, _vB);\n      object2.boneTransform(c2, _vC);\n    }\n    modifiedAttributeArray[a2 * 3 + 0] = _vA.x;\n    modifiedAttributeArray[a2 * 3 + 1] = _vA.y;\n    modifiedAttributeArray[a2 * 3 + 2] = _vA.z;\n    modifiedAttributeArray[b2 * 3 + 0] = _vB.x;\n    modifiedAttributeArray[b2 * 3 + 1] = _vB.y;\n    modifiedAttributeArray[b2 * 3 + 2] = _vB.z;\n    modifiedAttributeArray[c2 * 3 + 0] = _vC.x;\n    modifiedAttributeArray[c2 * 3 + 1] = _vC.y;\n    modifiedAttributeArray[c2 * 3 + 2] = _vC.z;\n  }\n  const geometry = object.geometry;\n  const material = object.material;\n  let a, b, c;\n  const index = geometry.index;\n  const positionAttribute = geometry.attributes.position;\n  const morphPosition = geometry.morphAttributes.position;\n  const morphTargetsRelative = geometry.morphTargetsRelative;\n  const normalAttribute = geometry.attributes.normal;\n  const morphNormal = geometry.morphAttributes.position;\n  const groups = geometry.groups;\n  const drawRange = geometry.drawRange;\n  let i, j, il, jl;\n  let group, groupMaterial;\n  let start, end;\n  const modifiedPosition = new Float32Array(positionAttribute.count * positionAttribute.itemSize);\n  const modifiedNormal = new Float32Array(normalAttribute.count * normalAttribute.itemSize);\n  if (index !== null) {\n    if (Array.isArray(material)) {\n      for (i = 0, il = groups.length; i < il; i++) {\n        group = groups[i];\n        groupMaterial = material[group.materialIndex];\n        start = Math.max(group.start, drawRange.start);\n        end = Math.min(group.start + group.count, drawRange.start + drawRange.count);\n        for (j = start, jl = end; j < jl; j += 3) {\n          a = index.getX(j);\n          b = index.getX(j + 1);\n          c = index.getX(j + 2);\n          _calculateMorphedAttributeData(\n            object,\n            groupMaterial,\n            positionAttribute,\n            morphPosition,\n            morphTargetsRelative,\n            a,\n            b,\n            c,\n            modifiedPosition\n          );\n          _calculateMorphedAttributeData(\n            object,\n            groupMaterial,\n            normalAttribute,\n            morphNormal,\n            morphTargetsRelative,\n            a,\n            b,\n            c,\n            modifiedNormal\n          );\n        }\n      }\n    } else {\n      start = Math.max(0, drawRange.start);\n      end = Math.min(index.count, drawRange.start + drawRange.count);\n      for (i = start, il = end; i < il; i += 3) {\n        a = index.getX(i);\n        b = index.getX(i + 1);\n        c = index.getX(i + 2);\n        _calculateMorphedAttributeData(\n          object,\n          material,\n          positionAttribute,\n          morphPosition,\n          morphTargetsRelative,\n          a,\n          b,\n          c,\n          modifiedPosition\n        );\n        _calculateMorphedAttributeData(\n          object,\n          material,\n          normalAttribute,\n          morphNormal,\n          morphTargetsRelative,\n          a,\n          b,\n          c,\n          modifiedNormal\n        );\n      }\n    }\n  } else if (positionAttribute !== void 0) {\n    if (Array.isArray(material)) {\n      for (i = 0, il = groups.length; i < il; i++) {\n        group = groups[i];\n        groupMaterial = material[group.materialIndex];\n        start = Math.max(group.start, drawRange.start);\n        end = Math.min(group.start + group.count, drawRange.start + drawRange.count);\n        for (j = start, jl = end; j < jl; j += 3) {\n          a = j;\n          b = j + 1;\n          c = j + 2;\n          _calculateMorphedAttributeData(\n            object,\n            groupMaterial,\n            positionAttribute,\n            morphPosition,\n            morphTargetsRelative,\n            a,\n            b,\n            c,\n            modifiedPosition\n          );\n          _calculateMorphedAttributeData(\n            object,\n            groupMaterial,\n            normalAttribute,\n            morphNormal,\n            morphTargetsRelative,\n            a,\n            b,\n            c,\n            modifiedNormal\n          );\n        }\n      }\n    } else {\n      start = Math.max(0, drawRange.start);\n      end = Math.min(positionAttribute.count, drawRange.start + drawRange.count);\n      for (i = start, il = end; i < il; i += 3) {\n        a = i;\n        b = i + 1;\n        c = i + 2;\n        _calculateMorphedAttributeData(\n          object,\n          material,\n          positionAttribute,\n          morphPosition,\n          morphTargetsRelative,\n          a,\n          b,\n          c,\n          modifiedPosition\n        );\n        _calculateMorphedAttributeData(\n          object,\n          material,\n          normalAttribute,\n          morphNormal,\n          morphTargetsRelative,\n          a,\n          b,\n          c,\n          modifiedNormal\n        );\n      }\n    }\n  }\n  const morphedPositionAttribute = new Float32BufferAttribute(modifiedPosition, 3);\n  const morphedNormalAttribute = new Float32BufferAttribute(modifiedNormal, 3);\n  return {\n    positionAttribute,\n    normalAttribute,\n    morphedPositionAttribute,\n    morphedNormalAttribute\n  };\n}\nfunction toCreasedNormals(geometry, creaseAngle = Math.PI / 3) {\n  const creaseDot = Math.cos(creaseAngle);\n  const hashMultiplier = (1 + 1e-10) * 100;\n  const verts = [new Vector3(), new Vector3(), new Vector3()];\n  const tempVec1 = new Vector3();\n  const tempVec2 = new Vector3();\n  const tempNorm = new Vector3();\n  const tempNorm2 = new Vector3();\n  function hashVertex(v) {\n    const x = ~~(v.x * hashMultiplier);\n    const y = ~~(v.y * hashMultiplier);\n    const z = ~~(v.z * hashMultiplier);\n    return `${x},${y},${z}`;\n  }\n  const resultGeometry = geometry.index ? geometry.toNonIndexed() : geometry;\n  const posAttr = resultGeometry.attributes.position;\n  const vertexMap = {};\n  for (let i = 0, l = posAttr.count / 3; i < l; i++) {\n    const i3 = 3 * i;\n    const a = verts[0].fromBufferAttribute(posAttr, i3 + 0);\n    const b = verts[1].fromBufferAttribute(posAttr, i3 + 1);\n    const c = verts[2].fromBufferAttribute(posAttr, i3 + 2);\n    tempVec1.subVectors(c, b);\n    tempVec2.subVectors(a, b);\n    const normal = new Vector3().crossVectors(tempVec1, tempVec2).normalize();\n    for (let n = 0; n < 3; n++) {\n      const vert = verts[n];\n      const hash = hashVertex(vert);\n      if (!(hash in vertexMap)) {\n        vertexMap[hash] = [];\n      }\n      vertexMap[hash].push(normal);\n    }\n  }\n  const normalArray = new Float32Array(posAttr.count * 3);\n  const normAttr = new BufferAttribute(normalArray, 3, false);\n  for (let i = 0, l = posAttr.count / 3; i < l; i++) {\n    const i3 = 3 * i;\n    const a = verts[0].fromBufferAttribute(posAttr, i3 + 0);\n    const b = verts[1].fromBufferAttribute(posAttr, i3 + 1);\n    const c = verts[2].fromBufferAttribute(posAttr, i3 + 2);\n    tempVec1.subVectors(c, b);\n    tempVec2.subVectors(a, b);\n    tempNorm.crossVectors(tempVec1, tempVec2).normalize();\n    for (let n = 0; n < 3; n++) {\n      const vert = verts[n];\n      const hash = hashVertex(vert);\n      const otherNormals = vertexMap[hash];\n      tempNorm2.set(0, 0, 0);\n      for (let k = 0, lk = otherNormals.length; k < lk; k++) {\n        const otherNorm = otherNormals[k];\n        if (tempNorm.dot(otherNorm) > creaseDot) {\n          tempNorm2.add(otherNorm);\n        }\n      }\n      tempNorm2.normalize();\n      normAttr.setXYZ(i3 + n, tempNorm2.x, tempNorm2.y, tempNorm2.z);\n    }\n  }\n  resultGeometry.setAttribute(\"normal\", normAttr);\n  return resultGeometry;\n}\nexport {\n  computeMorphedAttributes,\n  estimateBytesUsed,\n  interleaveAttributes,\n  mergeBufferAttributes,\n  mergeBufferGeometries,\n  mergeVertices,\n  toCreasedNormals,\n  toTrianglesDrawMode\n};\n","import { Loader, LoaderUtils, FileLoader, Color, SpotLight, PointLight, DirectionalLight, MeshBasicMaterial, MeshPhysicalMaterial, Vector2, Matrix4, Vector3, Quaternion, InstancedMesh, Object3D, Interpolant, NearestFilter, LinearFilter, NearestMipmapNearestFilter, LinearMipmapNearestFilter, NearestMipmapLinearFilter, LinearMipmapLinearFilter, ClampToEdgeWrapping, MirroredRepeatWrapping, RepeatWrapping, REVISION, InterpolateLinear, InterpolateDiscrete, MeshStandardMaterial, FrontSide, TextureLoader, ImageBitmapLoader, BufferAttribute, InterleavedBuffer, InterleavedBufferAttribute, Texture, PointsMaterial, Material, LineBasicMaterial, DoubleSide, PropertyBinding, BufferGeometry, SkinnedMesh, Mesh, TriangleStripDrawMode, TriangleFanDrawMode, LineSegments, Line, LineLoop, Points, Group, PerspectiveCamera, MathUtils, OrthographicCamera, Skeleton, VectorKeyframeTrack, QuaternionKeyframeTrack, NumberKeyframeTrack, AnimationClip, Bone, Box3, Sphere } from \"three\";\nimport { toTrianglesDrawMode } from \"../utils/BufferGeometryUtils.js\";\nclass GLTFLoader extends Loader {\n  constructor(manager) {\n    super(manager);\n    this.dracoLoader = null;\n    this.ktx2Loader = null;\n    this.meshoptDecoder = null;\n    this.pluginCallbacks = [];\n    this.register(function(parser) {\n      return new GLTFMaterialsClearcoatExtension(parser);\n    });\n    this.register(function(parser) {\n      return new GLTFTextureBasisUExtension(parser);\n    });\n    this.register(function(parser) {\n      return new GLTFTextureWebPExtension(parser);\n    });\n    this.register(function(parser) {\n      return new GLTFTextureAVIFExtension(parser);\n    });\n    this.register(function(parser) {\n      return new GLTFMaterialsSheenExtension(parser);\n    });\n    this.register(function(parser) {\n      return new GLTFMaterialsTransmissionExtension(parser);\n    });\n    this.register(function(parser) {\n      return new GLTFMaterialsVolumeExtension(parser);\n    });\n    this.register(function(parser) {\n      return new GLTFMaterialsIorExtension(parser);\n    });\n    this.register(function(parser) {\n      return new GLTFMaterialsEmissiveStrengthExtension(parser);\n    });\n    this.register(function(parser) {\n      return new GLTFMaterialsSpecularExtension(parser);\n    });\n    this.register(function(parser) {\n      return new GLTFMaterialsIridescenceExtension(parser);\n    });\n    this.register(function(parser) {\n      return new GLTFMaterialsAnisotropyExtension(parser);\n    });\n    this.register(function(parser) {\n      return new GLTFLightsExtension(parser);\n    });\n    this.register(function(parser) {\n      return new GLTFMeshoptCompression(parser);\n    });\n    this.register(function(parser) {\n      return new GLTFMeshGpuInstancing(parser);\n    });\n  }\n  load(url, onLoad, onProgress, onError) {\n    const scope = this;\n    let resourcePath;\n    if (this.resourcePath !== \"\") {\n      resourcePath = this.resourcePath;\n    } else if (this.path !== \"\") {\n      resourcePath = this.path;\n    } else {\n      resourcePath = LoaderUtils.extractUrlBase(url);\n    }\n    this.manager.itemStart(url);\n    const _onError = function(e) {\n      if (onError) {\n        onError(e);\n      } else {\n        console.error(e);\n      }\n      scope.manager.itemError(url);\n      scope.manager.itemEnd(url);\n    };\n    const loader = new FileLoader(this.manager);\n    loader.setPath(this.path);\n    loader.setResponseType(\"arraybuffer\");\n    loader.setRequestHeader(this.requestHeader);\n    loader.setWithCredentials(this.withCredentials);\n    loader.load(\n      url,\n      function(data) {\n        try {\n          scope.parse(\n            data,\n            resourcePath,\n            function(gltf) {\n              onLoad(gltf);\n              scope.manager.itemEnd(url);\n            },\n            _onError\n          );\n        } catch (e) {\n          _onError(e);\n        }\n      },\n      onProgress,\n      _onError\n    );\n  }\n  setDRACOLoader(dracoLoader) {\n    this.dracoLoader = dracoLoader;\n    return this;\n  }\n  setDDSLoader() {\n    throw new Error('THREE.GLTFLoader: \"MSFT_texture_dds\" no longer supported. Please update to \"KHR_texture_basisu\".');\n  }\n  setKTX2Loader(ktx2Loader) {\n    this.ktx2Loader = ktx2Loader;\n    return this;\n  }\n  setMeshoptDecoder(meshoptDecoder) {\n    this.meshoptDecoder = meshoptDecoder;\n    return this;\n  }\n  register(callback) {\n    if (this.pluginCallbacks.indexOf(callback) === -1) {\n      this.pluginCallbacks.push(callback);\n    }\n    return this;\n  }\n  unregister(callback) {\n    if (this.pluginCallbacks.indexOf(callback) !== -1) {\n      this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(callback), 1);\n    }\n    return this;\n  }\n  parse(data, path, onLoad, onError) {\n    let json;\n    const extensions = {};\n    const plugins = {};\n    if (typeof data === \"string\") {\n      json = JSON.parse(data);\n    } else if (data instanceof ArrayBuffer) {\n      const magic = LoaderUtils.decodeText(new Uint8Array(data.slice(0, 4)));\n      if (magic === BINARY_EXTENSION_HEADER_MAGIC) {\n        try {\n          extensions[EXTENSIONS.KHR_BINARY_GLTF] = new GLTFBinaryExtension(data);\n        } catch (error) {\n          if (onError)\n            onError(error);\n          return;\n        }\n        json = JSON.parse(extensions[EXTENSIONS.KHR_BINARY_GLTF].content);\n      } else {\n        json = JSON.parse(LoaderUtils.decodeText(new Uint8Array(data)));\n      }\n    } else {\n      json = data;\n    }\n    if (json.asset === void 0 || json.asset.version[0] < 2) {\n      if (onError)\n        onError(new Error(\"THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.\"));\n      return;\n    }\n    const parser = new GLTFParser(json, {\n      path: path || this.resourcePath || \"\",\n      crossOrigin: this.crossOrigin,\n      requestHeader: this.requestHeader,\n      manager: this.manager,\n      ktx2Loader: this.ktx2Loader,\n      meshoptDecoder: this.meshoptDecoder\n    });\n    parser.fileLoader.setRequestHeader(this.requestHeader);\n    for (let i = 0; i < this.pluginCallbacks.length; i++) {\n      const plugin = this.pluginCallbacks[i](parser);\n      plugins[plugin.name] = plugin;\n      extensions[plugin.name] = true;\n    }\n    if (json.extensionsUsed) {\n      for (let i = 0; i < json.extensionsUsed.length; ++i) {\n        const extensionName = json.extensionsUsed[i];\n        const extensionsRequired = json.extensionsRequired || [];\n        switch (extensionName) {\n          case EXTENSIONS.KHR_MATERIALS_UNLIT:\n            extensions[extensionName] = new GLTFMaterialsUnlitExtension();\n            break;\n          case EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\n            extensions[extensionName] = new GLTFDracoMeshCompressionExtension(json, this.dracoLoader);\n            break;\n          case EXTENSIONS.KHR_TEXTURE_TRANSFORM:\n            extensions[extensionName] = new GLTFTextureTransformExtension();\n            break;\n          case EXTENSIONS.KHR_MESH_QUANTIZATION:\n            extensions[extensionName] = new GLTFMeshQuantizationExtension();\n            break;\n          default:\n            if (extensionsRequired.indexOf(extensionName) >= 0 && plugins[extensionName] === void 0) {\n              console.warn('THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".');\n            }\n        }\n      }\n    }\n    parser.setExtensions(extensions);\n    parser.setPlugins(plugins);\n    parser.parse(onLoad, onError);\n  }\n  parseAsync(data, path) {\n    const scope = this;\n    return new Promise(function(resolve, reject) {\n      scope.parse(data, path, resolve, reject);\n    });\n  }\n}\nfunction GLTFRegistry() {\n  let objects = {};\n  return {\n    get: function(key) {\n      return objects[key];\n    },\n    add: function(key, object) {\n      objects[key] = object;\n    },\n    remove: function(key) {\n      delete objects[key];\n    },\n    removeAll: function() {\n      objects = {};\n    }\n  };\n}\nconst EXTENSIONS = {\n  KHR_BINARY_GLTF: \"KHR_binary_glTF\",\n  KHR_DRACO_MESH_COMPRESSION: \"KHR_draco_mesh_compression\",\n  KHR_LIGHTS_PUNCTUAL: \"KHR_lights_punctual\",\n  KHR_MATERIALS_CLEARCOAT: \"KHR_materials_clearcoat\",\n  KHR_MATERIALS_IOR: \"KHR_materials_ior\",\n  KHR_MATERIALS_SHEEN: \"KHR_materials_sheen\",\n  KHR_MATERIALS_SPECULAR: \"KHR_materials_specular\",\n  KHR_MATERIALS_TRANSMISSION: \"KHR_materials_transmission\",\n  KHR_MATERIALS_IRIDESCENCE: \"KHR_materials_iridescence\",\n  KHR_MATERIALS_ANISOTROPY: \"KHR_materials_anisotropy\",\n  KHR_MATERIALS_UNLIT: \"KHR_materials_unlit\",\n  KHR_MATERIALS_VOLUME: \"KHR_materials_volume\",\n  KHR_TEXTURE_BASISU: \"KHR_texture_basisu\",\n  KHR_TEXTURE_TRANSFORM: \"KHR_texture_transform\",\n  KHR_MESH_QUANTIZATION: \"KHR_mesh_quantization\",\n  KHR_MATERIALS_EMISSIVE_STRENGTH: \"KHR_materials_emissive_strength\",\n  EXT_TEXTURE_WEBP: \"EXT_texture_webp\",\n  EXT_TEXTURE_AVIF: \"EXT_texture_avif\",\n  EXT_MESHOPT_COMPRESSION: \"EXT_meshopt_compression\",\n  EXT_MESH_GPU_INSTANCING: \"EXT_mesh_gpu_instancing\"\n};\nclass GLTFLightsExtension {\n  constructor(parser) {\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL;\n    this.cache = { refs: {}, uses: {} };\n  }\n  _markDefs() {\n    const parser = this.parser;\n    const nodeDefs = this.parser.json.nodes || [];\n    for (let nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex++) {\n      const nodeDef = nodeDefs[nodeIndex];\n      if (nodeDef.extensions && nodeDef.extensions[this.name] && nodeDef.extensions[this.name].light !== void 0) {\n        parser._addNodeRef(this.cache, nodeDef.extensions[this.name].light);\n      }\n    }\n  }\n  _loadLight(lightIndex) {\n    const parser = this.parser;\n    const cacheKey = \"light:\" + lightIndex;\n    let dependency = parser.cache.get(cacheKey);\n    if (dependency)\n      return dependency;\n    const json = parser.json;\n    const extensions = json.extensions && json.extensions[this.name] || {};\n    const lightDefs = extensions.lights || [];\n    const lightDef = lightDefs[lightIndex];\n    let lightNode;\n    const color = new Color(16777215);\n    if (lightDef.color !== void 0)\n      color.fromArray(lightDef.color);\n    const range = lightDef.range !== void 0 ? lightDef.range : 0;\n    switch (lightDef.type) {\n      case \"directional\":\n        lightNode = new DirectionalLight(color);\n        lightNode.target.position.set(0, 0, -1);\n        lightNode.add(lightNode.target);\n        break;\n      case \"point\":\n        lightNode = new PointLight(color);\n        lightNode.distance = range;\n        break;\n      case \"spot\":\n        lightNode = new SpotLight(color);\n        lightNode.distance = range;\n        lightDef.spot = lightDef.spot || {};\n        lightDef.spot.innerConeAngle = lightDef.spot.innerConeAngle !== void 0 ? lightDef.spot.innerConeAngle : 0;\n        lightDef.spot.outerConeAngle = lightDef.spot.outerConeAngle !== void 0 ? lightDef.spot.outerConeAngle : Math.PI / 4;\n        lightNode.angle = lightDef.spot.outerConeAngle;\n        lightNode.penumbra = 1 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\n        lightNode.target.position.set(0, 0, -1);\n        lightNode.add(lightNode.target);\n        break;\n      default:\n        throw new Error(\"THREE.GLTFLoader: Unexpected light type: \" + lightDef.type);\n    }\n    lightNode.position.set(0, 0, 0);\n    lightNode.decay = 2;\n    assignExtrasToUserData(lightNode, lightDef);\n    if (lightDef.intensity !== void 0)\n      lightNode.intensity = lightDef.intensity;\n    lightNode.name = parser.createUniqueName(lightDef.name || \"light_\" + lightIndex);\n    dependency = Promise.resolve(lightNode);\n    parser.cache.add(cacheKey, dependency);\n    return dependency;\n  }\n  getDependency(type, index) {\n    if (type !== \"light\")\n      return;\n    return this._loadLight(index);\n  }\n  createNodeAttachment(nodeIndex) {\n    const self2 = this;\n    const parser = this.parser;\n    const json = parser.json;\n    const nodeDef = json.nodes[nodeIndex];\n    const lightDef = nodeDef.extensions && nodeDef.extensions[this.name] || {};\n    const lightIndex = lightDef.light;\n    if (lightIndex === void 0)\n      return null;\n    return this._loadLight(lightIndex).then(function(light) {\n      return parser._getNodeRef(self2.cache, lightIndex, light);\n    });\n  }\n}\nclass GLTFMaterialsUnlitExtension {\n  constructor() {\n    this.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\n  }\n  getMaterialType() {\n    return MeshBasicMaterial;\n  }\n  extendParams(materialParams, materialDef, parser) {\n    const pending = [];\n    materialParams.color = new Color(1, 1, 1);\n    materialParams.opacity = 1;\n    const metallicRoughness = materialDef.pbrMetallicRoughness;\n    if (metallicRoughness) {\n      if (Array.isArray(metallicRoughness.baseColorFactor)) {\n        const array = metallicRoughness.baseColorFactor;\n        materialParams.color.fromArray(array);\n        materialParams.opacity = array[3];\n      }\n      if (metallicRoughness.baseColorTexture !== void 0) {\n        pending.push(parser.assignTexture(materialParams, \"map\", metallicRoughness.baseColorTexture, 3001));\n      }\n    }\n    return Promise.all(pending);\n  }\n}\nclass GLTFMaterialsEmissiveStrengthExtension {\n  constructor(parser) {\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_MATERIALS_EMISSIVE_STRENGTH;\n  }\n  extendMaterialParams(materialIndex, materialParams) {\n    const parser = this.parser;\n    const materialDef = parser.json.materials[materialIndex];\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n      return Promise.resolve();\n    }\n    const emissiveStrength = materialDef.extensions[this.name].emissiveStrength;\n    if (emissiveStrength !== void 0) {\n      materialParams.emissiveIntensity = emissiveStrength;\n    }\n    return Promise.resolve();\n  }\n}\nclass GLTFMaterialsClearcoatExtension {\n  constructor(parser) {\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_MATERIALS_CLEARCOAT;\n  }\n  getMaterialType(materialIndex) {\n    const parser = this.parser;\n    const materialDef = parser.json.materials[materialIndex];\n    if (!materialDef.extensions || !materialDef.extensions[this.name])\n      return null;\n    return MeshPhysicalMaterial;\n  }\n  extendMaterialParams(materialIndex, materialParams) {\n    const parser = this.parser;\n    const materialDef = parser.json.materials[materialIndex];\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n      return Promise.resolve();\n    }\n    const pending = [];\n    const extension = materialDef.extensions[this.name];\n    if (extension.clearcoatFactor !== void 0) {\n      materialParams.clearcoat = extension.clearcoatFactor;\n    }\n    if (extension.clearcoatTexture !== void 0) {\n      pending.push(parser.assignTexture(materialParams, \"clearcoatMap\", extension.clearcoatTexture));\n    }\n    if (extension.clearcoatRoughnessFactor !== void 0) {\n      materialParams.clearcoatRoughness = extension.clearcoatRoughnessFactor;\n    }\n    if (extension.clearcoatRoughnessTexture !== void 0) {\n      pending.push(parser.assignTexture(materialParams, \"clearcoatRoughnessMap\", extension.clearcoatRoughnessTexture));\n    }\n    if (extension.clearcoatNormalTexture !== void 0) {\n      pending.push(parser.assignTexture(materialParams, \"clearcoatNormalMap\", extension.clearcoatNormalTexture));\n      if (extension.clearcoatNormalTexture.scale !== void 0) {\n        const scale = extension.clearcoatNormalTexture.scale;\n        materialParams.clearcoatNormalScale = new Vector2(scale, scale);\n      }\n    }\n    return Promise.all(pending);\n  }\n}\nclass GLTFMaterialsIridescenceExtension {\n  constructor(parser) {\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_MATERIALS_IRIDESCENCE;\n  }\n  getMaterialType(materialIndex) {\n    const parser = this.parser;\n    const materialDef = parser.json.materials[materialIndex];\n    if (!materialDef.extensions || !materialDef.extensions[this.name])\n      return null;\n    return MeshPhysicalMaterial;\n  }\n  extendMaterialParams(materialIndex, materialParams) {\n    const parser = this.parser;\n    const materialDef = parser.json.materials[materialIndex];\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n      return Promise.resolve();\n    }\n    const pending = [];\n    const extension = materialDef.extensions[this.name];\n    if (extension.iridescenceFactor !== void 0) {\n      materialParams.iridescence = extension.iridescenceFactor;\n    }\n    if (extension.iridescenceTexture !== void 0) {\n      pending.push(parser.assignTexture(materialParams, \"iridescenceMap\", extension.iridescenceTexture));\n    }\n    if (extension.iridescenceIor !== void 0) {\n      materialParams.iridescenceIOR = extension.iridescenceIor;\n    }\n    if (materialParams.iridescenceThicknessRange === void 0) {\n      materialParams.iridescenceThicknessRange = [100, 400];\n    }\n    if (extension.iridescenceThicknessMinimum !== void 0) {\n      materialParams.iridescenceThicknessRange[0] = extension.iridescenceThicknessMinimum;\n    }\n    if (extension.iridescenceThicknessMaximum !== void 0) {\n      materialParams.iridescenceThicknessRange[1] = extension.iridescenceThicknessMaximum;\n    }\n    if (extension.iridescenceThicknessTexture !== void 0) {\n      pending.push(\n        parser.assignTexture(materialParams, \"iridescenceThicknessMap\", extension.iridescenceThicknessTexture)\n      );\n    }\n    return Promise.all(pending);\n  }\n}\nclass GLTFMaterialsSheenExtension {\n  constructor(parser) {\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_MATERIALS_SHEEN;\n  }\n  getMaterialType(materialIndex) {\n    const parser = this.parser;\n    const materialDef = parser.json.materials[materialIndex];\n    if (!materialDef.extensions || !materialDef.extensions[this.name])\n      return null;\n    return MeshPhysicalMaterial;\n  }\n  extendMaterialParams(materialIndex, materialParams) {\n    const parser = this.parser;\n    const materialDef = parser.json.materials[materialIndex];\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n      return Promise.resolve();\n    }\n    const pending = [];\n    materialParams.sheenColor = new Color(0, 0, 0);\n    materialParams.sheenRoughness = 0;\n    materialParams.sheen = 1;\n    const extension = materialDef.extensions[this.name];\n    if (extension.sheenColorFactor !== void 0) {\n      materialParams.sheenColor.fromArray(extension.sheenColorFactor);\n    }\n    if (extension.sheenRoughnessFactor !== void 0) {\n      materialParams.sheenRoughness = extension.sheenRoughnessFactor;\n    }\n    if (extension.sheenColorTexture !== void 0) {\n      pending.push(parser.assignTexture(materialParams, \"sheenColorMap\", extension.sheenColorTexture, 3001));\n    }\n    if (extension.sheenRoughnessTexture !== void 0) {\n      pending.push(parser.assignTexture(materialParams, \"sheenRoughnessMap\", extension.sheenRoughnessTexture));\n    }\n    return Promise.all(pending);\n  }\n}\nclass GLTFMaterialsTransmissionExtension {\n  constructor(parser) {\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_MATERIALS_TRANSMISSION;\n  }\n  getMaterialType(materialIndex) {\n    const parser = this.parser;\n    const materialDef = parser.json.materials[materialIndex];\n    if (!materialDef.extensions || !materialDef.extensions[this.name])\n      return null;\n    return MeshPhysicalMaterial;\n  }\n  extendMaterialParams(materialIndex, materialParams) {\n    const parser = this.parser;\n    const materialDef = parser.json.materials[materialIndex];\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n      return Promise.resolve();\n    }\n    const pending = [];\n    const extension = materialDef.extensions[this.name];\n    if (extension.transmissionFactor !== void 0) {\n      materialParams.transmission = extension.transmissionFactor;\n    }\n    if (extension.transmissionTexture !== void 0) {\n      pending.push(parser.assignTexture(materialParams, \"transmissionMap\", extension.transmissionTexture));\n    }\n    return Promise.all(pending);\n  }\n}\nclass GLTFMaterialsVolumeExtension {\n  constructor(parser) {\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_MATERIALS_VOLUME;\n  }\n  getMaterialType(materialIndex) {\n    const parser = this.parser;\n    const materialDef = parser.json.materials[materialIndex];\n    if (!materialDef.extensions || !materialDef.extensions[this.name])\n      return null;\n    return MeshPhysicalMaterial;\n  }\n  extendMaterialParams(materialIndex, materialParams) {\n    const parser = this.parser;\n    const materialDef = parser.json.materials[materialIndex];\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n      return Promise.resolve();\n    }\n    const pending = [];\n    const extension = materialDef.extensions[this.name];\n    materialParams.thickness = extension.thicknessFactor !== void 0 ? extension.thicknessFactor : 0;\n    if (extension.thicknessTexture !== void 0) {\n      pending.push(parser.assignTexture(materialParams, \"thicknessMap\", extension.thicknessTexture));\n    }\n    materialParams.attenuationDistance = extension.attenuationDistance || Infinity;\n    const colorArray = extension.attenuationColor || [1, 1, 1];\n    materialParams.attenuationColor = new Color(colorArray[0], colorArray[1], colorArray[2]);\n    return Promise.all(pending);\n  }\n}\nclass GLTFMaterialsIorExtension {\n  constructor(parser) {\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_MATERIALS_IOR;\n  }\n  getMaterialType(materialIndex) {\n    const parser = this.parser;\n    const materialDef = parser.json.materials[materialIndex];\n    if (!materialDef.extensions || !materialDef.extensions[this.name])\n      return null;\n    return MeshPhysicalMaterial;\n  }\n  extendMaterialParams(materialIndex, materialParams) {\n    const parser = this.parser;\n    const materialDef = parser.json.materials[materialIndex];\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n      return Promise.resolve();\n    }\n    const extension = materialDef.extensions[this.name];\n    materialParams.ior = extension.ior !== void 0 ? extension.ior : 1.5;\n    return Promise.resolve();\n  }\n}\nclass GLTFMaterialsSpecularExtension {\n  constructor(parser) {\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_MATERIALS_SPECULAR;\n  }\n  getMaterialType(materialIndex) {\n    const parser = this.parser;\n    const materialDef = parser.json.materials[materialIndex];\n    if (!materialDef.extensions || !materialDef.extensions[this.name])\n      return null;\n    return MeshPhysicalMaterial;\n  }\n  extendMaterialParams(materialIndex, materialParams) {\n    const parser = this.parser;\n    const materialDef = parser.json.materials[materialIndex];\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n      return Promise.resolve();\n    }\n    const pending = [];\n    const extension = materialDef.extensions[this.name];\n    materialParams.specularIntensity = extension.specularFactor !== void 0 ? extension.specularFactor : 1;\n    if (extension.specularTexture !== void 0) {\n      pending.push(parser.assignTexture(materialParams, \"specularIntensityMap\", extension.specularTexture));\n    }\n    const colorArray = extension.specularColorFactor || [1, 1, 1];\n    materialParams.specularColor = new Color(colorArray[0], colorArray[1], colorArray[2]);\n    if (extension.specularColorTexture !== void 0) {\n      pending.push(\n        parser.assignTexture(materialParams, \"specularColorMap\", extension.specularColorTexture, 3001)\n        // sRGBEncoding\n      );\n    }\n    return Promise.all(pending);\n  }\n}\nclass GLTFMaterialsAnisotropyExtension {\n  constructor(parser) {\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_MATERIALS_ANISOTROPY;\n  }\n  getMaterialType(materialIndex) {\n    const parser = this.parser;\n    const materialDef = parser.json.materials[materialIndex];\n    if (!materialDef.extensions || !materialDef.extensions[this.name])\n      return null;\n    return MeshPhysicalMaterial;\n  }\n  extendMaterialParams(materialIndex, materialParams) {\n    const parser = this.parser;\n    const materialDef = parser.json.materials[materialIndex];\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n      return Promise.resolve();\n    }\n    const pending = [];\n    const extension = materialDef.extensions[this.name];\n    if (extension.anisotropyStrength !== void 0) {\n      materialParams.anisotropy = extension.anisotropyStrength;\n    }\n    if (extension.anisotropyRotation !== void 0) {\n      materialParams.anisotropyRotation = extension.anisotropyRotation;\n    }\n    if (extension.anisotropyTexture !== void 0) {\n      pending.push(parser.assignTexture(materialParams, \"anisotropyMap\", extension.anisotropyTexture));\n    }\n    return Promise.all(pending);\n  }\n}\nclass GLTFTextureBasisUExtension {\n  constructor(parser) {\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_TEXTURE_BASISU;\n  }\n  loadTexture(textureIndex) {\n    const parser = this.parser;\n    const json = parser.json;\n    const textureDef = json.textures[textureIndex];\n    if (!textureDef.extensions || !textureDef.extensions[this.name]) {\n      return null;\n    }\n    const extension = textureDef.extensions[this.name];\n    const loader = parser.options.ktx2Loader;\n    if (!loader) {\n      if (json.extensionsRequired && json.extensionsRequired.indexOf(this.name) >= 0) {\n        throw new Error(\"THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures\");\n      } else {\n        return null;\n      }\n    }\n    return parser.loadTextureImage(textureIndex, extension.source, loader);\n  }\n}\nclass GLTFTextureWebPExtension {\n  constructor(parser) {\n    this.parser = parser;\n    this.name = EXTENSIONS.EXT_TEXTURE_WEBP;\n    this.isSupported = null;\n  }\n  loadTexture(textureIndex) {\n    const name = this.name;\n    const parser = this.parser;\n    const json = parser.json;\n    const textureDef = json.textures[textureIndex];\n    if (!textureDef.extensions || !textureDef.extensions[name]) {\n      return null;\n    }\n    const extension = textureDef.extensions[name];\n    const source = json.images[extension.source];\n    let loader = parser.textureLoader;\n    if (source.uri) {\n      const handler = parser.options.manager.getHandler(source.uri);\n      if (handler !== null)\n        loader = handler;\n    }\n    return this.detectSupport().then(function(isSupported) {\n      if (isSupported)\n        return parser.loadTextureImage(textureIndex, extension.source, loader);\n      if (json.extensionsRequired && json.extensionsRequired.indexOf(name) >= 0) {\n        throw new Error(\"THREE.GLTFLoader: WebP required by asset but unsupported.\");\n      }\n      return parser.loadTexture(textureIndex);\n    });\n  }\n  detectSupport() {\n    if (!this.isSupported) {\n      this.isSupported = new Promise(function(resolve) {\n        const image = new Image();\n        image.src = \"data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA\";\n        image.onload = image.onerror = function() {\n          resolve(image.height === 1);\n        };\n      });\n    }\n    return this.isSupported;\n  }\n}\nclass GLTFTextureAVIFExtension {\n  constructor(parser) {\n    this.parser = parser;\n    this.name = EXTENSIONS.EXT_TEXTURE_AVIF;\n    this.isSupported = null;\n  }\n  loadTexture(textureIndex) {\n    const name = this.name;\n    const parser = this.parser;\n    const json = parser.json;\n    const textureDef = json.textures[textureIndex];\n    if (!textureDef.extensions || !textureDef.extensions[name]) {\n      return null;\n    }\n    const extension = textureDef.extensions[name];\n    const source = json.images[extension.source];\n    let loader = parser.textureLoader;\n    if (source.uri) {\n      const handler = parser.options.manager.getHandler(source.uri);\n      if (handler !== null)\n        loader = handler;\n    }\n    return this.detectSupport().then(function(isSupported) {\n      if (isSupported)\n        return parser.loadTextureImage(textureIndex, extension.source, loader);\n      if (json.extensionsRequired && json.extensionsRequired.indexOf(name) >= 0) {\n        throw new Error(\"THREE.GLTFLoader: AVIF required by asset but unsupported.\");\n      }\n      return parser.loadTexture(textureIndex);\n    });\n  }\n  detectSupport() {\n    if (!this.isSupported) {\n      this.isSupported = new Promise(function(resolve) {\n        const image = new Image();\n        image.src = \"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=\";\n        image.onload = image.onerror = function() {\n          resolve(image.height === 1);\n        };\n      });\n    }\n    return this.isSupported;\n  }\n}\nclass GLTFMeshoptCompression {\n  constructor(parser) {\n    this.name = EXTENSIONS.EXT_MESHOPT_COMPRESSION;\n    this.parser = parser;\n  }\n  loadBufferView(index) {\n    const json = this.parser.json;\n    const bufferView = json.bufferViews[index];\n    if (bufferView.extensions && bufferView.extensions[this.name]) {\n      const extensionDef = bufferView.extensions[this.name];\n      const buffer = this.parser.getDependency(\"buffer\", extensionDef.buffer);\n      const decoder = this.parser.options.meshoptDecoder;\n      if (!decoder || !decoder.supported) {\n        if (json.extensionsRequired && json.extensionsRequired.indexOf(this.name) >= 0) {\n          throw new Error(\"THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files\");\n        } else {\n          return null;\n        }\n      }\n      return buffer.then(function(res) {\n        const byteOffset = extensionDef.byteOffset || 0;\n        const byteLength = extensionDef.byteLength || 0;\n        const count = extensionDef.count;\n        const stride = extensionDef.byteStride;\n        const source = new Uint8Array(res, byteOffset, byteLength);\n        if (decoder.decodeGltfBufferAsync) {\n          return decoder.decodeGltfBufferAsync(count, stride, source, extensionDef.mode, extensionDef.filter).then(function(res2) {\n            return res2.buffer;\n          });\n        } else {\n          return decoder.ready.then(function() {\n            const result = new ArrayBuffer(count * stride);\n            decoder.decodeGltfBuffer(\n              new Uint8Array(result),\n              count,\n              stride,\n              source,\n              extensionDef.mode,\n              extensionDef.filter\n            );\n            return result;\n          });\n        }\n      });\n    } else {\n      return null;\n    }\n  }\n}\nclass GLTFMeshGpuInstancing {\n  constructor(parser) {\n    this.name = EXTENSIONS.EXT_MESH_GPU_INSTANCING;\n    this.parser = parser;\n  }\n  createNodeMesh(nodeIndex) {\n    const json = this.parser.json;\n    const nodeDef = json.nodes[nodeIndex];\n    if (!nodeDef.extensions || !nodeDef.extensions[this.name] || nodeDef.mesh === void 0) {\n      return null;\n    }\n    const meshDef = json.meshes[nodeDef.mesh];\n    for (const primitive of meshDef.primitives) {\n      if (primitive.mode !== WEBGL_CONSTANTS.TRIANGLES && primitive.mode !== WEBGL_CONSTANTS.TRIANGLE_STRIP && primitive.mode !== WEBGL_CONSTANTS.TRIANGLE_FAN && primitive.mode !== void 0) {\n        return null;\n      }\n    }\n    const extensionDef = nodeDef.extensions[this.name];\n    const attributesDef = extensionDef.attributes;\n    const pending = [];\n    const attributes = {};\n    for (const key in attributesDef) {\n      pending.push(\n        this.parser.getDependency(\"accessor\", attributesDef[key]).then((accessor) => {\n          attributes[key] = accessor;\n          return attributes[key];\n        })\n      );\n    }\n    if (pending.length < 1) {\n      return null;\n    }\n    pending.push(this.parser.createNodeMesh(nodeIndex));\n    return Promise.all(pending).then((results) => {\n      const nodeObject = results.pop();\n      const meshes = nodeObject.isGroup ? nodeObject.children : [nodeObject];\n      const count = results[0].count;\n      const instancedMeshes = [];\n      for (const mesh of meshes) {\n        const m = new Matrix4();\n        const p = new Vector3();\n        const q = new Quaternion();\n        const s = new Vector3(1, 1, 1);\n        const instancedMesh = new InstancedMesh(mesh.geometry, mesh.material, count);\n        for (let i = 0; i < count; i++) {\n          if (attributes.TRANSLATION) {\n            p.fromBufferAttribute(attributes.TRANSLATION, i);\n          }\n          if (attributes.ROTATION) {\n            q.fromBufferAttribute(attributes.ROTATION, i);\n          }\n          if (attributes.SCALE) {\n            s.fromBufferAttribute(attributes.SCALE, i);\n          }\n          instancedMesh.setMatrixAt(i, m.compose(p, q, s));\n        }\n        for (const attributeName in attributes) {\n          if (attributeName !== \"TRANSLATION\" && attributeName !== \"ROTATION\" && attributeName !== \"SCALE\") {\n            mesh.geometry.setAttribute(attributeName, attributes[attributeName]);\n          }\n        }\n        Object3D.prototype.copy.call(instancedMesh, mesh);\n        this.parser.assignFinalMaterial(instancedMesh);\n        instancedMeshes.push(instancedMesh);\n      }\n      if (nodeObject.isGroup) {\n        nodeObject.clear();\n        nodeObject.add(...instancedMeshes);\n        return nodeObject;\n      }\n      return instancedMeshes[0];\n    });\n  }\n}\nconst BINARY_EXTENSION_HEADER_MAGIC = \"glTF\";\nconst BINARY_EXTENSION_HEADER_LENGTH = 12;\nconst BINARY_EXTENSION_CHUNK_TYPES = { JSON: 1313821514, BIN: 5130562 };\nclass GLTFBinaryExtension {\n  constructor(data) {\n    this.name = EXTENSIONS.KHR_BINARY_GLTF;\n    this.content = null;\n    this.body = null;\n    const headerView = new DataView(data, 0, BINARY_EXTENSION_HEADER_LENGTH);\n    this.header = {\n      magic: LoaderUtils.decodeText(new Uint8Array(data.slice(0, 4))),\n      version: headerView.getUint32(4, true),\n      length: headerView.getUint32(8, true)\n    };\n    if (this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC) {\n      throw new Error(\"THREE.GLTFLoader: Unsupported glTF-Binary header.\");\n    } else if (this.header.version < 2) {\n      throw new Error(\"THREE.GLTFLoader: Legacy binary file detected.\");\n    }\n    const chunkContentsLength = this.header.length - BINARY_EXTENSION_HEADER_LENGTH;\n    const chunkView = new DataView(data, BINARY_EXTENSION_HEADER_LENGTH);\n    let chunkIndex = 0;\n    while (chunkIndex < chunkContentsLength) {\n      const chunkLength = chunkView.getUint32(chunkIndex, true);\n      chunkIndex += 4;\n      const chunkType = chunkView.getUint32(chunkIndex, true);\n      chunkIndex += 4;\n      if (chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON) {\n        const contentArray = new Uint8Array(data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength);\n        this.content = LoaderUtils.decodeText(contentArray);\n      } else if (chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN) {\n        const byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\n        this.body = data.slice(byteOffset, byteOffset + chunkLength);\n      }\n      chunkIndex += chunkLength;\n    }\n    if (this.content === null) {\n      throw new Error(\"THREE.GLTFLoader: JSON content not found.\");\n    }\n  }\n}\nclass GLTFDracoMeshCompressionExtension {\n  constructor(json, dracoLoader) {\n    if (!dracoLoader) {\n      throw new Error(\"THREE.GLTFLoader: No DRACOLoader instance provided.\");\n    }\n    this.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\n    this.json = json;\n    this.dracoLoader = dracoLoader;\n    this.dracoLoader.preload();\n  }\n  decodePrimitive(primitive, parser) {\n    const json = this.json;\n    const dracoLoader = this.dracoLoader;\n    const bufferViewIndex = primitive.extensions[this.name].bufferView;\n    const gltfAttributeMap = primitive.extensions[this.name].attributes;\n    const threeAttributeMap = {};\n    const attributeNormalizedMap = {};\n    const attributeTypeMap = {};\n    for (const attributeName in gltfAttributeMap) {\n      const threeAttributeName = ATTRIBUTES[attributeName] || attributeName.toLowerCase();\n      threeAttributeMap[threeAttributeName] = gltfAttributeMap[attributeName];\n    }\n    for (const attributeName in primitive.attributes) {\n      const threeAttributeName = ATTRIBUTES[attributeName] || attributeName.toLowerCase();\n      if (gltfAttributeMap[attributeName] !== void 0) {\n        const accessorDef = json.accessors[primitive.attributes[attributeName]];\n        const componentType = WEBGL_COMPONENT_TYPES[accessorDef.componentType];\n        attributeTypeMap[threeAttributeName] = componentType.name;\n        attributeNormalizedMap[threeAttributeName] = accessorDef.normalized === true;\n      }\n    }\n    return parser.getDependency(\"bufferView\", bufferViewIndex).then(function(bufferView) {\n      return new Promise(function(resolve) {\n        dracoLoader.decodeDracoFile(\n          bufferView,\n          function(geometry) {\n            for (const attributeName in geometry.attributes) {\n              const attribute = geometry.attributes[attributeName];\n              const normalized = attributeNormalizedMap[attributeName];\n              if (normalized !== void 0)\n                attribute.normalized = normalized;\n            }\n            resolve(geometry);\n          },\n          threeAttributeMap,\n          attributeTypeMap\n        );\n      });\n    });\n  }\n}\nclass GLTFTextureTransformExtension {\n  constructor() {\n    this.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM;\n  }\n  extendTexture(texture, transform) {\n    if ((transform.texCoord === void 0 || transform.texCoord === texture.channel) && transform.offset === void 0 && transform.rotation === void 0 && transform.scale === void 0) {\n      return texture;\n    }\n    texture = texture.clone();\n    if (transform.texCoord !== void 0) {\n      texture.channel = transform.texCoord;\n    }\n    if (transform.offset !== void 0) {\n      texture.offset.fromArray(transform.offset);\n    }\n    if (transform.rotation !== void 0) {\n      texture.rotation = transform.rotation;\n    }\n    if (transform.scale !== void 0) {\n      texture.repeat.fromArray(transform.scale);\n    }\n    texture.needsUpdate = true;\n    return texture;\n  }\n}\nclass GLTFMeshQuantizationExtension {\n  constructor() {\n    this.name = EXTENSIONS.KHR_MESH_QUANTIZATION;\n  }\n}\nclass GLTFCubicSplineInterpolant extends Interpolant {\n  constructor(parameterPositions, sampleValues, sampleSize, resultBuffer) {\n    super(parameterPositions, sampleValues, sampleSize, resultBuffer);\n  }\n  copySampleValue_(index) {\n    const result = this.resultBuffer, values = this.sampleValues, valueSize = this.valueSize, offset = index * valueSize * 3 + valueSize;\n    for (let i = 0; i !== valueSize; i++) {\n      result[i] = values[offset + i];\n    }\n    return result;\n  }\n  interpolate_(i1, t0, t, t1) {\n    const result = this.resultBuffer;\n    const values = this.sampleValues;\n    const stride = this.valueSize;\n    const stride2 = stride * 2;\n    const stride3 = stride * 3;\n    const td = t1 - t0;\n    const p = (t - t0) / td;\n    const pp = p * p;\n    const ppp = pp * p;\n    const offset1 = i1 * stride3;\n    const offset0 = offset1 - stride3;\n    const s2 = -2 * ppp + 3 * pp;\n    const s3 = ppp - pp;\n    const s0 = 1 - s2;\n    const s1 = s3 - pp + p;\n    for (let i = 0; i !== stride; i++) {\n      const p0 = values[offset0 + i + stride];\n      const m0 = values[offset0 + i + stride2] * td;\n      const p1 = values[offset1 + i + stride];\n      const m1 = values[offset1 + i] * td;\n      result[i] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\n    }\n    return result;\n  }\n}\nconst _q = /* @__PURE__ */ new Quaternion();\nclass GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant {\n  interpolate_(i1, t0, t, t1) {\n    const result = super.interpolate_(i1, t0, t, t1);\n    _q.fromArray(result).normalize().toArray(result);\n    return result;\n  }\n}\nconst WEBGL_CONSTANTS = {\n  FLOAT: 5126,\n  //FLOAT_MAT2: 35674,\n  FLOAT_MAT3: 35675,\n  FLOAT_MAT4: 35676,\n  FLOAT_VEC2: 35664,\n  FLOAT_VEC3: 35665,\n  FLOAT_VEC4: 35666,\n  LINEAR: 9729,\n  REPEAT: 10497,\n  SAMPLER_2D: 35678,\n  POINTS: 0,\n  LINES: 1,\n  LINE_LOOP: 2,\n  LINE_STRIP: 3,\n  TRIANGLES: 4,\n  TRIANGLE_STRIP: 5,\n  TRIANGLE_FAN: 6,\n  UNSIGNED_BYTE: 5121,\n  UNSIGNED_SHORT: 5123\n};\nconst WEBGL_COMPONENT_TYPES = {\n  5120: Int8Array,\n  5121: Uint8Array,\n  5122: Int16Array,\n  5123: Uint16Array,\n  5125: Uint32Array,\n  5126: Float32Array\n};\nconst WEBGL_FILTERS = {\n  9728: NearestFilter,\n  9729: LinearFilter,\n  9984: NearestMipmapNearestFilter,\n  9985: LinearMipmapNearestFilter,\n  9986: NearestMipmapLinearFilter,\n  9987: LinearMipmapLinearFilter\n};\nconst WEBGL_WRAPPINGS = {\n  33071: ClampToEdgeWrapping,\n  33648: MirroredRepeatWrapping,\n  10497: RepeatWrapping\n};\nconst WEBGL_TYPE_SIZES = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\nconst ATTRIBUTES = {\n  POSITION: \"position\",\n  NORMAL: \"normal\",\n  TANGENT: \"tangent\",\n  // uv => uv1, 4 uv channels\n  // https://github.com/mrdoob/three.js/pull/25943\n  // https://github.com/mrdoob/three.js/pull/25788\n  ...REVISION.replace(/\\D+/g, \"\") >= 152 ? {\n    TEXCOORD_0: \"uv\",\n    TEXCOORD_1: \"uv1\",\n    TEXCOORD_2: \"uv2\",\n    TEXCOORD_3: \"uv3\"\n  } : {\n    TEXCOORD_0: \"uv\",\n    TEXCOORD_1: \"uv2\"\n  },\n  COLOR_0: \"color\",\n  WEIGHTS_0: \"skinWeight\",\n  JOINTS_0: \"skinIndex\"\n};\nconst PATH_PROPERTIES = {\n  scale: \"scale\",\n  translation: \"position\",\n  rotation: \"quaternion\",\n  weights: \"morphTargetInfluences\"\n};\nconst INTERPOLATION = {\n  CUBICSPLINE: void 0,\n  // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each\n  // keyframe track will be initialized with a default interpolation type, then modified.\n  LINEAR: InterpolateLinear,\n  STEP: InterpolateDiscrete\n};\nconst ALPHA_MODES = {\n  OPAQUE: \"OPAQUE\",\n  MASK: \"MASK\",\n  BLEND: \"BLEND\"\n};\nfunction createDefaultMaterial(cache) {\n  if (cache[\"DefaultMaterial\"] === void 0) {\n    cache[\"DefaultMaterial\"] = new MeshStandardMaterial({\n      color: 16777215,\n      emissive: 0,\n      metalness: 1,\n      roughness: 1,\n      transparent: false,\n      depthTest: true,\n      side: FrontSide\n    });\n  }\n  return cache[\"DefaultMaterial\"];\n}\nfunction addUnknownExtensionsToUserData(knownExtensions, object, objectDef) {\n  for (const name in objectDef.extensions) {\n    if (knownExtensions[name] === void 0) {\n      object.userData.gltfExtensions = object.userData.gltfExtensions || {};\n      object.userData.gltfExtensions[name] = objectDef.extensions[name];\n    }\n  }\n}\nfunction assignExtrasToUserData(object, gltfDef) {\n  if (gltfDef.extras !== void 0) {\n    if (typeof gltfDef.extras === \"object\") {\n      Object.assign(object.userData, gltfDef.extras);\n    } else {\n      console.warn(\"THREE.GLTFLoader: Ignoring primitive type .extras, \" + gltfDef.extras);\n    }\n  }\n}\nfunction addMorphTargets(geometry, targets, parser) {\n  let hasMorphPosition = false;\n  let hasMorphNormal = false;\n  let hasMorphColor = false;\n  for (let i = 0, il = targets.length; i < il; i++) {\n    const target = targets[i];\n    if (target.POSITION !== void 0)\n      hasMorphPosition = true;\n    if (target.NORMAL !== void 0)\n      hasMorphNormal = true;\n    if (target.COLOR_0 !== void 0)\n      hasMorphColor = true;\n    if (hasMorphPosition && hasMorphNormal && hasMorphColor)\n      break;\n  }\n  if (!hasMorphPosition && !hasMorphNormal && !hasMorphColor)\n    return Promise.resolve(geometry);\n  const pendingPositionAccessors = [];\n  const pendingNormalAccessors = [];\n  const pendingColorAccessors = [];\n  for (let i = 0, il = targets.length; i < il; i++) {\n    const target = targets[i];\n    if (hasMorphPosition) {\n      const pendingAccessor = target.POSITION !== void 0 ? parser.getDependency(\"accessor\", target.POSITION) : geometry.attributes.position;\n      pendingPositionAccessors.push(pendingAccessor);\n    }\n    if (hasMorphNormal) {\n      const pendingAccessor = target.NORMAL !== void 0 ? parser.getDependency(\"accessor\", target.NORMAL) : geometry.attributes.normal;\n      pendingNormalAccessors.push(pendingAccessor);\n    }\n    if (hasMorphColor) {\n      const pendingAccessor = target.COLOR_0 !== void 0 ? parser.getDependency(\"accessor\", target.COLOR_0) : geometry.attributes.color;\n      pendingColorAccessors.push(pendingAccessor);\n    }\n  }\n  return Promise.all([\n    Promise.all(pendingPositionAccessors),\n    Promise.all(pendingNormalAccessors),\n    Promise.all(pendingColorAccessors)\n  ]).then(function(accessors) {\n    const morphPositions = accessors[0];\n    const morphNormals = accessors[1];\n    const morphColors = accessors[2];\n    if (hasMorphPosition)\n      geometry.morphAttributes.position = morphPositions;\n    if (hasMorphNormal)\n      geometry.morphAttributes.normal = morphNormals;\n    if (hasMorphColor)\n      geometry.morphAttributes.color = morphColors;\n    geometry.morphTargetsRelative = true;\n    return geometry;\n  });\n}\nfunction updateMorphTargets(mesh, meshDef) {\n  mesh.updateMorphTargets();\n  if (meshDef.weights !== void 0) {\n    for (let i = 0, il = meshDef.weights.length; i < il; i++) {\n      mesh.morphTargetInfluences[i] = meshDef.weights[i];\n    }\n  }\n  if (meshDef.extras && Array.isArray(meshDef.extras.targetNames)) {\n    const targetNames = meshDef.extras.targetNames;\n    if (mesh.morphTargetInfluences.length === targetNames.length) {\n      mesh.morphTargetDictionary = {};\n      for (let i = 0, il = targetNames.length; i < il; i++) {\n        mesh.morphTargetDictionary[targetNames[i]] = i;\n      }\n    } else {\n      console.warn(\"THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.\");\n    }\n  }\n}\nfunction createPrimitiveKey(primitiveDef) {\n  let geometryKey;\n  const dracoExtension = primitiveDef.extensions && primitiveDef.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION];\n  if (dracoExtension) {\n    geometryKey = \"draco:\" + dracoExtension.bufferView + \":\" + dracoExtension.indices + \":\" + createAttributesKey(dracoExtension.attributes);\n  } else {\n    geometryKey = primitiveDef.indices + \":\" + createAttributesKey(primitiveDef.attributes) + \":\" + primitiveDef.mode;\n  }\n  if (primitiveDef.targets !== void 0) {\n    for (let i = 0, il = primitiveDef.targets.length; i < il; i++) {\n      geometryKey += \":\" + createAttributesKey(primitiveDef.targets[i]);\n    }\n  }\n  return geometryKey;\n}\nfunction createAttributesKey(attributes) {\n  let attributesKey = \"\";\n  const keys = Object.keys(attributes).sort();\n  for (let i = 0, il = keys.length; i < il; i++) {\n    attributesKey += keys[i] + \":\" + attributes[keys[i]] + \";\";\n  }\n  return attributesKey;\n}\nfunction getNormalizedComponentScale(constructor) {\n  switch (constructor) {\n    case Int8Array:\n      return 1 / 127;\n    case Uint8Array:\n      return 1 / 255;\n    case Int16Array:\n      return 1 / 32767;\n    case Uint16Array:\n      return 1 / 65535;\n    default:\n      throw new Error(\"THREE.GLTFLoader: Unsupported normalized accessor component type.\");\n  }\n}\nfunction getImageURIMimeType(uri) {\n  if (uri.search(/\\.jpe?g($|\\?)/i) > 0 || uri.search(/^data\\:image\\/jpeg/) === 0)\n    return \"image/jpeg\";\n  if (uri.search(/\\.webp($|\\?)/i) > 0 || uri.search(/^data\\:image\\/webp/) === 0)\n    return \"image/webp\";\n  return \"image/png\";\n}\nconst _identityMatrix = /* @__PURE__ */ new Matrix4();\nclass GLTFParser {\n  constructor(json = {}, options = {}) {\n    this.json = json;\n    this.extensions = {};\n    this.plugins = {};\n    this.options = options;\n    this.cache = new GLTFRegistry();\n    this.associations = /* @__PURE__ */ new Map();\n    this.primitiveCache = {};\n    this.nodeCache = {};\n    this.meshCache = { refs: {}, uses: {} };\n    this.cameraCache = { refs: {}, uses: {} };\n    this.lightCache = { refs: {}, uses: {} };\n    this.sourceCache = {};\n    this.textureCache = {};\n    this.nodeNamesUsed = {};\n    let isSafari = false;\n    let isFirefox = false;\n    let firefoxVersion = -1;\n    if (typeof navigator !== \"undefined\" && typeof navigator.userAgent !== \"undefined\") {\n      isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent) === true;\n      isFirefox = navigator.userAgent.indexOf(\"Firefox\") > -1;\n      firefoxVersion = isFirefox ? navigator.userAgent.match(/Firefox\\/([0-9]+)\\./)[1] : -1;\n    }\n    if (typeof createImageBitmap === \"undefined\" || isSafari || isFirefox && firefoxVersion < 98) {\n      this.textureLoader = new TextureLoader(this.options.manager);\n    } else {\n      this.textureLoader = new ImageBitmapLoader(this.options.manager);\n    }\n    this.textureLoader.setCrossOrigin(this.options.crossOrigin);\n    this.textureLoader.setRequestHeader(this.options.requestHeader);\n    this.fileLoader = new FileLoader(this.options.manager);\n    this.fileLoader.setResponseType(\"arraybuffer\");\n    if (this.options.crossOrigin === \"use-credentials\") {\n      this.fileLoader.setWithCredentials(true);\n    }\n  }\n  setExtensions(extensions) {\n    this.extensions = extensions;\n  }\n  setPlugins(plugins) {\n    this.plugins = plugins;\n  }\n  parse(onLoad, onError) {\n    const parser = this;\n    const json = this.json;\n    const extensions = this.extensions;\n    this.cache.removeAll();\n    this.nodeCache = {};\n    this._invokeAll(function(ext) {\n      return ext._markDefs && ext._markDefs();\n    });\n    Promise.all(\n      this._invokeAll(function(ext) {\n        return ext.beforeRoot && ext.beforeRoot();\n      })\n    ).then(function() {\n      return Promise.all([\n        parser.getDependencies(\"scene\"),\n        parser.getDependencies(\"animation\"),\n        parser.getDependencies(\"camera\")\n      ]);\n    }).then(function(dependencies) {\n      const result = {\n        scene: dependencies[0][json.scene || 0],\n        scenes: dependencies[0],\n        animations: dependencies[1],\n        cameras: dependencies[2],\n        asset: json.asset,\n        parser,\n        userData: {}\n      };\n      addUnknownExtensionsToUserData(extensions, result, json);\n      assignExtrasToUserData(result, json);\n      Promise.all(\n        parser._invokeAll(function(ext) {\n          return ext.afterRoot && ext.afterRoot(result);\n        })\n      ).then(function() {\n        onLoad(result);\n      });\n    }).catch(onError);\n  }\n  /**\n   * Marks the special nodes/meshes in json for efficient parse.\n   */\n  _markDefs() {\n    const nodeDefs = this.json.nodes || [];\n    const skinDefs = this.json.skins || [];\n    const meshDefs = this.json.meshes || [];\n    for (let skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex++) {\n      const joints = skinDefs[skinIndex].joints;\n      for (let i = 0, il = joints.length; i < il; i++) {\n        nodeDefs[joints[i]].isBone = true;\n      }\n    }\n    for (let nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex++) {\n      const nodeDef = nodeDefs[nodeIndex];\n      if (nodeDef.mesh !== void 0) {\n        this._addNodeRef(this.meshCache, nodeDef.mesh);\n        if (nodeDef.skin !== void 0) {\n          meshDefs[nodeDef.mesh].isSkinnedMesh = true;\n        }\n      }\n      if (nodeDef.camera !== void 0) {\n        this._addNodeRef(this.cameraCache, nodeDef.camera);\n      }\n    }\n  }\n  /**\n   * Counts references to shared node / Object3D resources. These resources\n   * can be reused, or \"instantiated\", at multiple nodes in the scene\n   * hierarchy. Mesh, Camera, and Light instances are instantiated and must\n   * be marked. Non-scenegraph resources (like Materials, Geometries, and\n   * Textures) can be reused directly and are not marked here.\n   *\n   * Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\n   */\n  _addNodeRef(cache, index) {\n    if (index === void 0)\n      return;\n    if (cache.refs[index] === void 0) {\n      cache.refs[index] = cache.uses[index] = 0;\n    }\n    cache.refs[index]++;\n  }\n  /** Returns a reference to a shared resource, cloning it if necessary. */\n  _getNodeRef(cache, index, object) {\n    if (cache.refs[index] <= 1)\n      return object;\n    const ref = object.clone();\n    const updateMappings = (original, clone) => {\n      const mappings = this.associations.get(original);\n      if (mappings != null) {\n        this.associations.set(clone, mappings);\n      }\n      for (const [i, child] of original.children.entries()) {\n        updateMappings(child, clone.children[i]);\n      }\n    };\n    updateMappings(object, ref);\n    ref.name += \"_instance_\" + cache.uses[index]++;\n    return ref;\n  }\n  _invokeOne(func) {\n    const extensions = Object.values(this.plugins);\n    extensions.push(this);\n    for (let i = 0; i < extensions.length; i++) {\n      const result = func(extensions[i]);\n      if (result)\n        return result;\n    }\n    return null;\n  }\n  _invokeAll(func) {\n    const extensions = Object.values(this.plugins);\n    extensions.unshift(this);\n    const pending = [];\n    for (let i = 0; i < extensions.length; i++) {\n      const result = func(extensions[i]);\n      if (result)\n        pending.push(result);\n    }\n    return pending;\n  }\n  /**\n   * Requests the specified dependency asynchronously, with caching.\n   * @param {string} type\n   * @param {number} index\n   * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}\n   */\n  getDependency(type, index) {\n    const cacheKey = type + \":\" + index;\n    let dependency = this.cache.get(cacheKey);\n    if (!dependency) {\n      switch (type) {\n        case \"scene\":\n          dependency = this.loadScene(index);\n          break;\n        case \"node\":\n          dependency = this._invokeOne(function(ext) {\n            return ext.loadNode && ext.loadNode(index);\n          });\n          break;\n        case \"mesh\":\n          dependency = this._invokeOne(function(ext) {\n            return ext.loadMesh && ext.loadMesh(index);\n          });\n          break;\n        case \"accessor\":\n          dependency = this.loadAccessor(index);\n          break;\n        case \"bufferView\":\n          dependency = this._invokeOne(function(ext) {\n            return ext.loadBufferView && ext.loadBufferView(index);\n          });\n          break;\n        case \"buffer\":\n          dependency = this.loadBuffer(index);\n          break;\n        case \"material\":\n          dependency = this._invokeOne(function(ext) {\n            return ext.loadMaterial && ext.loadMaterial(index);\n          });\n          break;\n        case \"texture\":\n          dependency = this._invokeOne(function(ext) {\n            return ext.loadTexture && ext.loadTexture(index);\n          });\n          break;\n        case \"skin\":\n          dependency = this.loadSkin(index);\n          break;\n        case \"animation\":\n          dependency = this._invokeOne(function(ext) {\n            return ext.loadAnimation && ext.loadAnimation(index);\n          });\n          break;\n        case \"camera\":\n          dependency = this.loadCamera(index);\n          break;\n        default:\n          dependency = this._invokeOne(function(ext) {\n            return ext != this && ext.getDependency && ext.getDependency(type, index);\n          });\n          if (!dependency) {\n            throw new Error(\"Unknown type: \" + type);\n          }\n          break;\n      }\n      this.cache.add(cacheKey, dependency);\n    }\n    return dependency;\n  }\n  /**\n   * Requests all dependencies of the specified type asynchronously, with caching.\n   * @param {string} type\n   * @return {Promise<Array<Object>>}\n   */\n  getDependencies(type) {\n    let dependencies = this.cache.get(type);\n    if (!dependencies) {\n      const parser = this;\n      const defs = this.json[type + (type === \"mesh\" ? \"es\" : \"s\")] || [];\n      dependencies = Promise.all(\n        defs.map(function(def, index) {\n          return parser.getDependency(type, index);\n        })\n      );\n      this.cache.add(type, dependencies);\n    }\n    return dependencies;\n  }\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n   * @param {number} bufferIndex\n   * @return {Promise<ArrayBuffer>}\n   */\n  loadBuffer(bufferIndex) {\n    const bufferDef = this.json.buffers[bufferIndex];\n    const loader = this.fileLoader;\n    if (bufferDef.type && bufferDef.type !== \"arraybuffer\") {\n      throw new Error(\"THREE.GLTFLoader: \" + bufferDef.type + \" buffer type is not supported.\");\n    }\n    if (bufferDef.uri === void 0 && bufferIndex === 0) {\n      return Promise.resolve(this.extensions[EXTENSIONS.KHR_BINARY_GLTF].body);\n    }\n    const options = this.options;\n    return new Promise(function(resolve, reject) {\n      loader.load(LoaderUtils.resolveURL(bufferDef.uri, options.path), resolve, void 0, function() {\n        reject(new Error('THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".'));\n      });\n    });\n  }\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n   * @param {number} bufferViewIndex\n   * @return {Promise<ArrayBuffer>}\n   */\n  loadBufferView(bufferViewIndex) {\n    const bufferViewDef = this.json.bufferViews[bufferViewIndex];\n    return this.getDependency(\"buffer\", bufferViewDef.buffer).then(function(buffer) {\n      const byteLength = bufferViewDef.byteLength || 0;\n      const byteOffset = bufferViewDef.byteOffset || 0;\n      return buffer.slice(byteOffset, byteOffset + byteLength);\n    });\n  }\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\n   * @param {number} accessorIndex\n   * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}\n   */\n  loadAccessor(accessorIndex) {\n    const parser = this;\n    const json = this.json;\n    const accessorDef = this.json.accessors[accessorIndex];\n    if (accessorDef.bufferView === void 0 && accessorDef.sparse === void 0) {\n      const itemSize = WEBGL_TYPE_SIZES[accessorDef.type];\n      const TypedArray = WEBGL_COMPONENT_TYPES[accessorDef.componentType];\n      const normalized = accessorDef.normalized === true;\n      const array = new TypedArray(accessorDef.count * itemSize);\n      return Promise.resolve(new BufferAttribute(array, itemSize, normalized));\n    }\n    const pendingBufferViews = [];\n    if (accessorDef.bufferView !== void 0) {\n      pendingBufferViews.push(this.getDependency(\"bufferView\", accessorDef.bufferView));\n    } else {\n      pendingBufferViews.push(null);\n    }\n    if (accessorDef.sparse !== void 0) {\n      pendingBufferViews.push(this.getDependency(\"bufferView\", accessorDef.sparse.indices.bufferView));\n      pendingBufferViews.push(this.getDependency(\"bufferView\", accessorDef.sparse.values.bufferView));\n    }\n    return Promise.all(pendingBufferViews).then(function(bufferViews) {\n      const bufferView = bufferViews[0];\n      const itemSize = WEBGL_TYPE_SIZES[accessorDef.type];\n      const TypedArray = WEBGL_COMPONENT_TYPES[accessorDef.componentType];\n      const elementBytes = TypedArray.BYTES_PER_ELEMENT;\n      const itemBytes = elementBytes * itemSize;\n      const byteOffset = accessorDef.byteOffset || 0;\n      const byteStride = accessorDef.bufferView !== void 0 ? json.bufferViews[accessorDef.bufferView].byteStride : void 0;\n      const normalized = accessorDef.normalized === true;\n      let array, bufferAttribute;\n      if (byteStride && byteStride !== itemBytes) {\n        const ibSlice = Math.floor(byteOffset / byteStride);\n        const ibCacheKey = \"InterleavedBuffer:\" + accessorDef.bufferView + \":\" + accessorDef.componentType + \":\" + ibSlice + \":\" + accessorDef.count;\n        let ib = parser.cache.get(ibCacheKey);\n        if (!ib) {\n          array = new TypedArray(bufferView, ibSlice * byteStride, accessorDef.count * byteStride / elementBytes);\n          ib = new InterleavedBuffer(array, byteStride / elementBytes);\n          parser.cache.add(ibCacheKey, ib);\n        }\n        bufferAttribute = new InterleavedBufferAttribute(\n          ib,\n          itemSize,\n          byteOffset % byteStride / elementBytes,\n          normalized\n        );\n      } else {\n        if (bufferView === null) {\n          array = new TypedArray(accessorDef.count * itemSize);\n        } else {\n          array = new TypedArray(bufferView, byteOffset, accessorDef.count * itemSize);\n        }\n        bufferAttribute = new BufferAttribute(array, itemSize, normalized);\n      }\n      if (accessorDef.sparse !== void 0) {\n        const itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\n        const TypedArrayIndices = WEBGL_COMPONENT_TYPES[accessorDef.sparse.indices.componentType];\n        const byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\n        const byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\n        const sparseIndices = new TypedArrayIndices(\n          bufferViews[1],\n          byteOffsetIndices,\n          accessorDef.sparse.count * itemSizeIndices\n        );\n        const sparseValues = new TypedArray(bufferViews[2], byteOffsetValues, accessorDef.sparse.count * itemSize);\n        if (bufferView !== null) {\n          bufferAttribute = new BufferAttribute(\n            bufferAttribute.array.slice(),\n            bufferAttribute.itemSize,\n            bufferAttribute.normalized\n          );\n        }\n        for (let i = 0, il = sparseIndices.length; i < il; i++) {\n          const index = sparseIndices[i];\n          bufferAttribute.setX(index, sparseValues[i * itemSize]);\n          if (itemSize >= 2)\n            bufferAttribute.setY(index, sparseValues[i * itemSize + 1]);\n          if (itemSize >= 3)\n            bufferAttribute.setZ(index, sparseValues[i * itemSize + 2]);\n          if (itemSize >= 4)\n            bufferAttribute.setW(index, sparseValues[i * itemSize + 3]);\n          if (itemSize >= 5)\n            throw new Error(\"THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.\");\n        }\n      }\n      return bufferAttribute;\n    });\n  }\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\n   * @param {number} textureIndex\n   * @return {Promise<THREE.Texture|null>}\n   */\n  loadTexture(textureIndex) {\n    const json = this.json;\n    const options = this.options;\n    const textureDef = json.textures[textureIndex];\n    const sourceIndex = textureDef.source;\n    const sourceDef = json.images[sourceIndex];\n    let loader = this.textureLoader;\n    if (sourceDef.uri) {\n      const handler = options.manager.getHandler(sourceDef.uri);\n      if (handler !== null)\n        loader = handler;\n    }\n    return this.loadTextureImage(textureIndex, sourceIndex, loader);\n  }\n  loadTextureImage(textureIndex, sourceIndex, loader) {\n    const parser = this;\n    const json = this.json;\n    const textureDef = json.textures[textureIndex];\n    const sourceDef = json.images[sourceIndex];\n    const cacheKey = (sourceDef.uri || sourceDef.bufferView) + \":\" + textureDef.sampler;\n    if (this.textureCache[cacheKey]) {\n      return this.textureCache[cacheKey];\n    }\n    const promise = this.loadImageSource(sourceIndex, loader).then(function(texture) {\n      texture.flipY = false;\n      texture.name = textureDef.name || sourceDef.name || \"\";\n      if (texture.name === \"\" && typeof sourceDef.uri === \"string\" && sourceDef.uri.startsWith(\"data:image/\") === false) {\n        texture.name = sourceDef.uri;\n      }\n      const samplers = json.samplers || {};\n      const sampler = samplers[textureDef.sampler] || {};\n      texture.magFilter = WEBGL_FILTERS[sampler.magFilter] || LinearFilter;\n      texture.minFilter = WEBGL_FILTERS[sampler.minFilter] || LinearMipmapLinearFilter;\n      texture.wrapS = WEBGL_WRAPPINGS[sampler.wrapS] || RepeatWrapping;\n      texture.wrapT = WEBGL_WRAPPINGS[sampler.wrapT] || RepeatWrapping;\n      parser.associations.set(texture, { textures: textureIndex });\n      return texture;\n    }).catch(function() {\n      return null;\n    });\n    this.textureCache[cacheKey] = promise;\n    return promise;\n  }\n  loadImageSource(sourceIndex, loader) {\n    const parser = this;\n    const json = this.json;\n    const options = this.options;\n    if (this.sourceCache[sourceIndex] !== void 0) {\n      return this.sourceCache[sourceIndex].then((texture) => texture.clone());\n    }\n    const sourceDef = json.images[sourceIndex];\n    const URL = self.URL || self.webkitURL;\n    let sourceURI = sourceDef.uri || \"\";\n    let isObjectURL = false;\n    if (sourceDef.bufferView !== void 0) {\n      sourceURI = parser.getDependency(\"bufferView\", sourceDef.bufferView).then(function(bufferView) {\n        isObjectURL = true;\n        const blob = new Blob([bufferView], { type: sourceDef.mimeType });\n        sourceURI = URL.createObjectURL(blob);\n        return sourceURI;\n      });\n    } else if (sourceDef.uri === void 0) {\n      throw new Error(\"THREE.GLTFLoader: Image \" + sourceIndex + \" is missing URI and bufferView\");\n    }\n    const promise = Promise.resolve(sourceURI).then(function(sourceURI2) {\n      return new Promise(function(resolve, reject) {\n        let onLoad = resolve;\n        if (loader.isImageBitmapLoader === true) {\n          onLoad = function(imageBitmap) {\n            const texture = new Texture(imageBitmap);\n            texture.needsUpdate = true;\n            resolve(texture);\n          };\n        }\n        loader.load(LoaderUtils.resolveURL(sourceURI2, options.path), onLoad, void 0, reject);\n      });\n    }).then(function(texture) {\n      if (isObjectURL === true) {\n        URL.revokeObjectURL(sourceURI);\n      }\n      texture.userData.mimeType = sourceDef.mimeType || getImageURIMimeType(sourceDef.uri);\n      return texture;\n    }).catch(function(error) {\n      console.error(\"THREE.GLTFLoader: Couldn't load texture\", sourceURI);\n      throw error;\n    });\n    this.sourceCache[sourceIndex] = promise;\n    return promise;\n  }\n  /**\n   * Asynchronously assigns a texture to the given material parameters.\n   * @param {Object} materialParams\n   * @param {string} mapName\n   * @param {Object} mapDef\n   * @return {Promise<Texture>}\n   */\n  assignTexture(materialParams, mapName, mapDef, encoding) {\n    const parser = this;\n    return this.getDependency(\"texture\", mapDef.index).then(function(texture) {\n      if (!texture)\n        return null;\n      if (mapDef.texCoord !== void 0 && mapDef.texCoord > 0) {\n        texture = texture.clone();\n        texture.channel = mapDef.texCoord;\n      }\n      if (parser.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]) {\n        const transform = mapDef.extensions !== void 0 ? mapDef.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM] : void 0;\n        if (transform) {\n          const gltfReference = parser.associations.get(texture);\n          texture = parser.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM].extendTexture(texture, transform);\n          parser.associations.set(texture, gltfReference);\n        }\n      }\n      if (encoding !== void 0) {\n        if (\"colorSpace\" in texture)\n          texture.colorSpace = encoding === 3001 ? \"srgb\" : \"srgb-linear\";\n        else\n          texture.encoding = encoding;\n      }\n      materialParams[mapName] = texture;\n      return texture;\n    });\n  }\n  /**\n   * Assigns final material to a Mesh, Line, or Points instance. The instance\n   * already has a material (generated from the glTF material options alone)\n   * but reuse of the same glTF material may require multiple threejs materials\n   * to accommodate different primitive types, defines, etc. New materials will\n   * be created if necessary, and reused from a cache.\n   * @param  {Object3D} mesh Mesh, Line, or Points instance.\n   */\n  assignFinalMaterial(mesh) {\n    const geometry = mesh.geometry;\n    let material = mesh.material;\n    const useDerivativeTangents = geometry.attributes.tangent === void 0;\n    const useVertexColors = geometry.attributes.color !== void 0;\n    const useFlatShading = geometry.attributes.normal === void 0;\n    if (mesh.isPoints) {\n      const cacheKey = \"PointsMaterial:\" + material.uuid;\n      let pointsMaterial = this.cache.get(cacheKey);\n      if (!pointsMaterial) {\n        pointsMaterial = new PointsMaterial();\n        Material.prototype.copy.call(pointsMaterial, material);\n        pointsMaterial.color.copy(material.color);\n        pointsMaterial.map = material.map;\n        pointsMaterial.sizeAttenuation = false;\n        this.cache.add(cacheKey, pointsMaterial);\n      }\n      material = pointsMaterial;\n    } else if (mesh.isLine) {\n      const cacheKey = \"LineBasicMaterial:\" + material.uuid;\n      let lineMaterial = this.cache.get(cacheKey);\n      if (!lineMaterial) {\n        lineMaterial = new LineBasicMaterial();\n        Material.prototype.copy.call(lineMaterial, material);\n        lineMaterial.color.copy(material.color);\n        lineMaterial.map = material.map;\n        this.cache.add(cacheKey, lineMaterial);\n      }\n      material = lineMaterial;\n    }\n    if (useDerivativeTangents || useVertexColors || useFlatShading) {\n      let cacheKey = \"ClonedMaterial:\" + material.uuid + \":\";\n      if (useDerivativeTangents)\n        cacheKey += \"derivative-tangents:\";\n      if (useVertexColors)\n        cacheKey += \"vertex-colors:\";\n      if (useFlatShading)\n        cacheKey += \"flat-shading:\";\n      let cachedMaterial = this.cache.get(cacheKey);\n      if (!cachedMaterial) {\n        cachedMaterial = material.clone();\n        if (useVertexColors)\n          cachedMaterial.vertexColors = true;\n        if (useFlatShading)\n          cachedMaterial.flatShading = true;\n        if (useDerivativeTangents) {\n          if (cachedMaterial.normalScale)\n            cachedMaterial.normalScale.y *= -1;\n          if (cachedMaterial.clearcoatNormalScale)\n            cachedMaterial.clearcoatNormalScale.y *= -1;\n        }\n        this.cache.add(cacheKey, cachedMaterial);\n        this.associations.set(cachedMaterial, this.associations.get(material));\n      }\n      material = cachedMaterial;\n    }\n    mesh.material = material;\n  }\n  getMaterialType() {\n    return MeshStandardMaterial;\n  }\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\n   * @param {number} materialIndex\n   * @return {Promise<Material>}\n   */\n  loadMaterial(materialIndex) {\n    const parser = this;\n    const json = this.json;\n    const extensions = this.extensions;\n    const materialDef = json.materials[materialIndex];\n    let materialType;\n    const materialParams = {};\n    const materialExtensions = materialDef.extensions || {};\n    const pending = [];\n    if (materialExtensions[EXTENSIONS.KHR_MATERIALS_UNLIT]) {\n      const kmuExtension = extensions[EXTENSIONS.KHR_MATERIALS_UNLIT];\n      materialType = kmuExtension.getMaterialType();\n      pending.push(kmuExtension.extendParams(materialParams, materialDef, parser));\n    } else {\n      const metallicRoughness = materialDef.pbrMetallicRoughness || {};\n      materialParams.color = new Color(1, 1, 1);\n      materialParams.opacity = 1;\n      if (Array.isArray(metallicRoughness.baseColorFactor)) {\n        const array = metallicRoughness.baseColorFactor;\n        materialParams.color.fromArray(array);\n        materialParams.opacity = array[3];\n      }\n      if (metallicRoughness.baseColorTexture !== void 0) {\n        pending.push(parser.assignTexture(materialParams, \"map\", metallicRoughness.baseColorTexture, 3001));\n      }\n      materialParams.metalness = metallicRoughness.metallicFactor !== void 0 ? metallicRoughness.metallicFactor : 1;\n      materialParams.roughness = metallicRoughness.roughnessFactor !== void 0 ? metallicRoughness.roughnessFactor : 1;\n      if (metallicRoughness.metallicRoughnessTexture !== void 0) {\n        pending.push(parser.assignTexture(materialParams, \"metalnessMap\", metallicRoughness.metallicRoughnessTexture));\n        pending.push(parser.assignTexture(materialParams, \"roughnessMap\", metallicRoughness.metallicRoughnessTexture));\n      }\n      materialType = this._invokeOne(function(ext) {\n        return ext.getMaterialType && ext.getMaterialType(materialIndex);\n      });\n      pending.push(\n        Promise.all(\n          this._invokeAll(function(ext) {\n            return ext.extendMaterialParams && ext.extendMaterialParams(materialIndex, materialParams);\n          })\n        )\n      );\n    }\n    if (materialDef.doubleSided === true) {\n      materialParams.side = DoubleSide;\n    }\n    const alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\n    if (alphaMode === ALPHA_MODES.BLEND) {\n      materialParams.transparent = true;\n      materialParams.depthWrite = false;\n    } else {\n      materialParams.transparent = false;\n      if (alphaMode === ALPHA_MODES.MASK) {\n        materialParams.alphaTest = materialDef.alphaCutoff !== void 0 ? materialDef.alphaCutoff : 0.5;\n      }\n    }\n    if (materialDef.normalTexture !== void 0 && materialType !== MeshBasicMaterial) {\n      pending.push(parser.assignTexture(materialParams, \"normalMap\", materialDef.normalTexture));\n      materialParams.normalScale = new Vector2(1, 1);\n      if (materialDef.normalTexture.scale !== void 0) {\n        const scale = materialDef.normalTexture.scale;\n        materialParams.normalScale.set(scale, scale);\n      }\n    }\n    if (materialDef.occlusionTexture !== void 0 && materialType !== MeshBasicMaterial) {\n      pending.push(parser.assignTexture(materialParams, \"aoMap\", materialDef.occlusionTexture));\n      if (materialDef.occlusionTexture.strength !== void 0) {\n        materialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\n      }\n    }\n    if (materialDef.emissiveFactor !== void 0 && materialType !== MeshBasicMaterial) {\n      materialParams.emissive = new Color().fromArray(materialDef.emissiveFactor);\n    }\n    if (materialDef.emissiveTexture !== void 0 && materialType !== MeshBasicMaterial) {\n      pending.push(parser.assignTexture(materialParams, \"emissiveMap\", materialDef.emissiveTexture, 3001));\n    }\n    return Promise.all(pending).then(function() {\n      const material = new materialType(materialParams);\n      if (materialDef.name)\n        material.name = materialDef.name;\n      assignExtrasToUserData(material, materialDef);\n      parser.associations.set(material, { materials: materialIndex });\n      if (materialDef.extensions)\n        addUnknownExtensionsToUserData(extensions, material, materialDef);\n      return material;\n    });\n  }\n  /** When Object3D instances are targeted by animation, they need unique names. */\n  createUniqueName(originalName) {\n    const sanitizedName = PropertyBinding.sanitizeNodeName(originalName || \"\");\n    if (sanitizedName in this.nodeNamesUsed) {\n      return sanitizedName + \"_\" + ++this.nodeNamesUsed[sanitizedName];\n    } else {\n      this.nodeNamesUsed[sanitizedName] = 0;\n      return sanitizedName;\n    }\n  }\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\n   *\n   * Creates BufferGeometries from primitives.\n   *\n   * @param {Array<GLTF.Primitive>} primitives\n   * @return {Promise<Array<BufferGeometry>>}\n   */\n  loadGeometries(primitives) {\n    const parser = this;\n    const extensions = this.extensions;\n    const cache = this.primitiveCache;\n    function createDracoPrimitive(primitive) {\n      return extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(primitive, parser).then(function(geometry) {\n        return addPrimitiveAttributes(geometry, primitive, parser);\n      });\n    }\n    const pending = [];\n    for (let i = 0, il = primitives.length; i < il; i++) {\n      const primitive = primitives[i];\n      const cacheKey = createPrimitiveKey(primitive);\n      const cached = cache[cacheKey];\n      if (cached) {\n        pending.push(cached.promise);\n      } else {\n        let geometryPromise;\n        if (primitive.extensions && primitive.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]) {\n          geometryPromise = createDracoPrimitive(primitive);\n        } else {\n          geometryPromise = addPrimitiveAttributes(new BufferGeometry(), primitive, parser);\n        }\n        cache[cacheKey] = { primitive, promise: geometryPromise };\n        pending.push(geometryPromise);\n      }\n    }\n    return Promise.all(pending);\n  }\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\n   * @param {number} meshIndex\n   * @return {Promise<Group|Mesh|SkinnedMesh>}\n   */\n  loadMesh(meshIndex) {\n    const parser = this;\n    const json = this.json;\n    const extensions = this.extensions;\n    const meshDef = json.meshes[meshIndex];\n    const primitives = meshDef.primitives;\n    const pending = [];\n    for (let i = 0, il = primitives.length; i < il; i++) {\n      const material = primitives[i].material === void 0 ? createDefaultMaterial(this.cache) : this.getDependency(\"material\", primitives[i].material);\n      pending.push(material);\n    }\n    pending.push(parser.loadGeometries(primitives));\n    return Promise.all(pending).then(function(results) {\n      const materials = results.slice(0, results.length - 1);\n      const geometries = results[results.length - 1];\n      const meshes = [];\n      for (let i = 0, il = geometries.length; i < il; i++) {\n        const geometry = geometries[i];\n        const primitive = primitives[i];\n        let mesh;\n        const material = materials[i];\n        if (primitive.mode === WEBGL_CONSTANTS.TRIANGLES || primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP || primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN || primitive.mode === void 0) {\n          mesh = meshDef.isSkinnedMesh === true ? new SkinnedMesh(geometry, material) : new Mesh(geometry, material);\n          if (mesh.isSkinnedMesh === true) {\n            mesh.normalizeSkinWeights();\n          }\n          if (primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP) {\n            mesh.geometry = toTrianglesDrawMode(mesh.geometry, TriangleStripDrawMode);\n          } else if (primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN) {\n            mesh.geometry = toTrianglesDrawMode(mesh.geometry, TriangleFanDrawMode);\n          }\n        } else if (primitive.mode === WEBGL_CONSTANTS.LINES) {\n          mesh = new LineSegments(geometry, material);\n        } else if (primitive.mode === WEBGL_CONSTANTS.LINE_STRIP) {\n          mesh = new Line(geometry, material);\n        } else if (primitive.mode === WEBGL_CONSTANTS.LINE_LOOP) {\n          mesh = new LineLoop(geometry, material);\n        } else if (primitive.mode === WEBGL_CONSTANTS.POINTS) {\n          mesh = new Points(geometry, material);\n        } else {\n          throw new Error(\"THREE.GLTFLoader: Primitive mode unsupported: \" + primitive.mode);\n        }\n        if (Object.keys(mesh.geometry.morphAttributes).length > 0) {\n          updateMorphTargets(mesh, meshDef);\n        }\n        mesh.name = parser.createUniqueName(meshDef.name || \"mesh_\" + meshIndex);\n        assignExtrasToUserData(mesh, meshDef);\n        if (primitive.extensions)\n          addUnknownExtensionsToUserData(extensions, mesh, primitive);\n        parser.assignFinalMaterial(mesh);\n        meshes.push(mesh);\n      }\n      for (let i = 0, il = meshes.length; i < il; i++) {\n        parser.associations.set(meshes[i], {\n          meshes: meshIndex,\n          primitives: i\n        });\n      }\n      if (meshes.length === 1) {\n        if (meshDef.extensions)\n          addUnknownExtensionsToUserData(extensions, meshes[0], meshDef);\n        return meshes[0];\n      }\n      const group = new Group();\n      if (meshDef.extensions)\n        addUnknownExtensionsToUserData(extensions, group, meshDef);\n      parser.associations.set(group, { meshes: meshIndex });\n      for (let i = 0, il = meshes.length; i < il; i++) {\n        group.add(meshes[i]);\n      }\n      return group;\n    });\n  }\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\n   * @param {number} cameraIndex\n   * @return {Promise<THREE.Camera>}\n   */\n  loadCamera(cameraIndex) {\n    let camera;\n    const cameraDef = this.json.cameras[cameraIndex];\n    const params = cameraDef[cameraDef.type];\n    if (!params) {\n      console.warn(\"THREE.GLTFLoader: Missing camera parameters.\");\n      return;\n    }\n    if (cameraDef.type === \"perspective\") {\n      camera = new PerspectiveCamera(\n        MathUtils.radToDeg(params.yfov),\n        params.aspectRatio || 1,\n        params.znear || 1,\n        params.zfar || 2e6\n      );\n    } else if (cameraDef.type === \"orthographic\") {\n      camera = new OrthographicCamera(-params.xmag, params.xmag, params.ymag, -params.ymag, params.znear, params.zfar);\n    }\n    if (cameraDef.name)\n      camera.name = this.createUniqueName(cameraDef.name);\n    assignExtrasToUserData(camera, cameraDef);\n    return Promise.resolve(camera);\n  }\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\n   * @param {number} skinIndex\n   * @return {Promise<Skeleton>}\n   */\n  loadSkin(skinIndex) {\n    const skinDef = this.json.skins[skinIndex];\n    const pending = [];\n    for (let i = 0, il = skinDef.joints.length; i < il; i++) {\n      pending.push(this._loadNodeShallow(skinDef.joints[i]));\n    }\n    if (skinDef.inverseBindMatrices !== void 0) {\n      pending.push(this.getDependency(\"accessor\", skinDef.inverseBindMatrices));\n    } else {\n      pending.push(null);\n    }\n    return Promise.all(pending).then(function(results) {\n      const inverseBindMatrices = results.pop();\n      const jointNodes = results;\n      const bones = [];\n      const boneInverses = [];\n      for (let i = 0, il = jointNodes.length; i < il; i++) {\n        const jointNode = jointNodes[i];\n        if (jointNode) {\n          bones.push(jointNode);\n          const mat = new Matrix4();\n          if (inverseBindMatrices !== null) {\n            mat.fromArray(inverseBindMatrices.array, i * 16);\n          }\n          boneInverses.push(mat);\n        } else {\n          console.warn('THREE.GLTFLoader: Joint \"%s\" could not be found.', skinDef.joints[i]);\n        }\n      }\n      return new Skeleton(bones, boneInverses);\n    });\n  }\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n   * @param {number} animationIndex\n   * @return {Promise<AnimationClip>}\n   */\n  loadAnimation(animationIndex) {\n    const json = this.json;\n    const animationDef = json.animations[animationIndex];\n    const animationName = animationDef.name ? animationDef.name : \"animation_\" + animationIndex;\n    const pendingNodes = [];\n    const pendingInputAccessors = [];\n    const pendingOutputAccessors = [];\n    const pendingSamplers = [];\n    const pendingTargets = [];\n    for (let i = 0, il = animationDef.channels.length; i < il; i++) {\n      const channel = animationDef.channels[i];\n      const sampler = animationDef.samplers[channel.sampler];\n      const target = channel.target;\n      const name = target.node;\n      const input = animationDef.parameters !== void 0 ? animationDef.parameters[sampler.input] : sampler.input;\n      const output = animationDef.parameters !== void 0 ? animationDef.parameters[sampler.output] : sampler.output;\n      if (target.node === void 0)\n        continue;\n      pendingNodes.push(this.getDependency(\"node\", name));\n      pendingInputAccessors.push(this.getDependency(\"accessor\", input));\n      pendingOutputAccessors.push(this.getDependency(\"accessor\", output));\n      pendingSamplers.push(sampler);\n      pendingTargets.push(target);\n    }\n    return Promise.all([\n      Promise.all(pendingNodes),\n      Promise.all(pendingInputAccessors),\n      Promise.all(pendingOutputAccessors),\n      Promise.all(pendingSamplers),\n      Promise.all(pendingTargets)\n    ]).then(function(dependencies) {\n      const nodes = dependencies[0];\n      const inputAccessors = dependencies[1];\n      const outputAccessors = dependencies[2];\n      const samplers = dependencies[3];\n      const targets = dependencies[4];\n      const tracks = [];\n      for (let i = 0, il = nodes.length; i < il; i++) {\n        const node = nodes[i];\n        const inputAccessor = inputAccessors[i];\n        const outputAccessor = outputAccessors[i];\n        const sampler = samplers[i];\n        const target = targets[i];\n        if (node === void 0)\n          continue;\n        node.updateMatrix();\n        let TypedKeyframeTrack;\n        switch (PATH_PROPERTIES[target.path]) {\n          case PATH_PROPERTIES.weights:\n            TypedKeyframeTrack = NumberKeyframeTrack;\n            break;\n          case PATH_PROPERTIES.rotation:\n            TypedKeyframeTrack = QuaternionKeyframeTrack;\n            break;\n          case PATH_PROPERTIES.position:\n          case PATH_PROPERTIES.scale:\n          default:\n            TypedKeyframeTrack = VectorKeyframeTrack;\n            break;\n        }\n        const targetName = node.name ? node.name : node.uuid;\n        const interpolation = sampler.interpolation !== void 0 ? INTERPOLATION[sampler.interpolation] : InterpolateLinear;\n        const targetNames = [];\n        if (PATH_PROPERTIES[target.path] === PATH_PROPERTIES.weights) {\n          node.traverse(function(object) {\n            if (object.morphTargetInfluences) {\n              targetNames.push(object.name ? object.name : object.uuid);\n            }\n          });\n        } else {\n          targetNames.push(targetName);\n        }\n        let outputArray = outputAccessor.array;\n        if (outputAccessor.normalized) {\n          const scale = getNormalizedComponentScale(outputArray.constructor);\n          const scaled = new Float32Array(outputArray.length);\n          for (let j = 0, jl = outputArray.length; j < jl; j++) {\n            scaled[j] = outputArray[j] * scale;\n          }\n          outputArray = scaled;\n        }\n        for (let j = 0, jl = targetNames.length; j < jl; j++) {\n          const track = new TypedKeyframeTrack(\n            targetNames[j] + \".\" + PATH_PROPERTIES[target.path],\n            inputAccessor.array,\n            outputArray,\n            interpolation\n          );\n          if (sampler.interpolation === \"CUBICSPLINE\") {\n            track.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline(result) {\n              const interpolantType = this instanceof QuaternionKeyframeTrack ? GLTFCubicSplineQuaternionInterpolant : GLTFCubicSplineInterpolant;\n              return new interpolantType(this.times, this.values, this.getValueSize() / 3, result);\n            };\n            track.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\n          }\n          tracks.push(track);\n        }\n      }\n      return new AnimationClip(animationName, void 0, tracks);\n    });\n  }\n  createNodeMesh(nodeIndex) {\n    const json = this.json;\n    const parser = this;\n    const nodeDef = json.nodes[nodeIndex];\n    if (nodeDef.mesh === void 0)\n      return null;\n    return parser.getDependency(\"mesh\", nodeDef.mesh).then(function(mesh) {\n      const node = parser._getNodeRef(parser.meshCache, nodeDef.mesh, mesh);\n      if (nodeDef.weights !== void 0) {\n        node.traverse(function(o) {\n          if (!o.isMesh)\n            return;\n          for (let i = 0, il = nodeDef.weights.length; i < il; i++) {\n            o.morphTargetInfluences[i] = nodeDef.weights[i];\n          }\n        });\n      }\n      return node;\n    });\n  }\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\n   * @param {number} nodeIndex\n   * @return {Promise<Object3D>}\n   */\n  loadNode(nodeIndex) {\n    const json = this.json;\n    const parser = this;\n    const nodeDef = json.nodes[nodeIndex];\n    const nodePending = parser._loadNodeShallow(nodeIndex);\n    const childPending = [];\n    const childrenDef = nodeDef.children || [];\n    for (let i = 0, il = childrenDef.length; i < il; i++) {\n      childPending.push(parser.getDependency(\"node\", childrenDef[i]));\n    }\n    const skeletonPending = nodeDef.skin === void 0 ? Promise.resolve(null) : parser.getDependency(\"skin\", nodeDef.skin);\n    return Promise.all([nodePending, Promise.all(childPending), skeletonPending]).then(function(results) {\n      const node = results[0];\n      const children = results[1];\n      const skeleton = results[2];\n      if (skeleton !== null) {\n        node.traverse(function(mesh) {\n          if (!mesh.isSkinnedMesh)\n            return;\n          mesh.bind(skeleton, _identityMatrix);\n        });\n      }\n      for (let i = 0, il = children.length; i < il; i++) {\n        node.add(children[i]);\n      }\n      return node;\n    });\n  }\n  // ._loadNodeShallow() parses a single node.\n  // skin and child nodes are created and added in .loadNode() (no '_' prefix).\n  _loadNodeShallow(nodeIndex) {\n    const json = this.json;\n    const extensions = this.extensions;\n    const parser = this;\n    if (this.nodeCache[nodeIndex] !== void 0) {\n      return this.nodeCache[nodeIndex];\n    }\n    const nodeDef = json.nodes[nodeIndex];\n    const nodeName = nodeDef.name ? parser.createUniqueName(nodeDef.name) : \"\";\n    const pending = [];\n    const meshPromise = parser._invokeOne(function(ext) {\n      return ext.createNodeMesh && ext.createNodeMesh(nodeIndex);\n    });\n    if (meshPromise) {\n      pending.push(meshPromise);\n    }\n    if (nodeDef.camera !== void 0) {\n      pending.push(\n        parser.getDependency(\"camera\", nodeDef.camera).then(function(camera) {\n          return parser._getNodeRef(parser.cameraCache, nodeDef.camera, camera);\n        })\n      );\n    }\n    parser._invokeAll(function(ext) {\n      return ext.createNodeAttachment && ext.createNodeAttachment(nodeIndex);\n    }).forEach(function(promise) {\n      pending.push(promise);\n    });\n    this.nodeCache[nodeIndex] = Promise.all(pending).then(function(objects) {\n      let node;\n      if (nodeDef.isBone === true) {\n        node = new Bone();\n      } else if (objects.length > 1) {\n        node = new Group();\n      } else if (objects.length === 1) {\n        node = objects[0];\n      } else {\n        node = new Object3D();\n      }\n      if (node !== objects[0]) {\n        for (let i = 0, il = objects.length; i < il; i++) {\n          node.add(objects[i]);\n        }\n      }\n      if (nodeDef.name) {\n        node.userData.name = nodeDef.name;\n        node.name = nodeName;\n      }\n      assignExtrasToUserData(node, nodeDef);\n      if (nodeDef.extensions)\n        addUnknownExtensionsToUserData(extensions, node, nodeDef);\n      if (nodeDef.matrix !== void 0) {\n        const matrix = new Matrix4();\n        matrix.fromArray(nodeDef.matrix);\n        node.applyMatrix4(matrix);\n      } else {\n        if (nodeDef.translation !== void 0) {\n          node.position.fromArray(nodeDef.translation);\n        }\n        if (nodeDef.rotation !== void 0) {\n          node.quaternion.fromArray(nodeDef.rotation);\n        }\n        if (nodeDef.scale !== void 0) {\n          node.scale.fromArray(nodeDef.scale);\n        }\n      }\n      if (!parser.associations.has(node)) {\n        parser.associations.set(node, {});\n      }\n      parser.associations.get(node).nodes = nodeIndex;\n      return node;\n    });\n    return this.nodeCache[nodeIndex];\n  }\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\n   * @param {number} sceneIndex\n   * @return {Promise<Group>}\n   */\n  loadScene(sceneIndex) {\n    const extensions = this.extensions;\n    const sceneDef = this.json.scenes[sceneIndex];\n    const parser = this;\n    const scene = new Group();\n    if (sceneDef.name)\n      scene.name = parser.createUniqueName(sceneDef.name);\n    assignExtrasToUserData(scene, sceneDef);\n    if (sceneDef.extensions)\n      addUnknownExtensionsToUserData(extensions, scene, sceneDef);\n    const nodeIds = sceneDef.nodes || [];\n    const pending = [];\n    for (let i = 0, il = nodeIds.length; i < il; i++) {\n      pending.push(parser.getDependency(\"node\", nodeIds[i]));\n    }\n    return Promise.all(pending).then(function(nodes) {\n      for (let i = 0, il = nodes.length; i < il; i++) {\n        scene.add(nodes[i]);\n      }\n      const reduceAssociations = (node) => {\n        const reducedAssociations = /* @__PURE__ */ new Map();\n        for (const [key, value] of parser.associations) {\n          if (key instanceof Material || key instanceof Texture) {\n            reducedAssociations.set(key, value);\n          }\n        }\n        node.traverse((node2) => {\n          const mappings = parser.associations.get(node2);\n          if (mappings != null) {\n            reducedAssociations.set(node2, mappings);\n          }\n        });\n        return reducedAssociations;\n      };\n      parser.associations = reduceAssociations(scene);\n      return scene;\n    });\n  }\n}\nfunction computeBounds(geometry, primitiveDef, parser) {\n  const attributes = primitiveDef.attributes;\n  const box = new Box3();\n  if (attributes.POSITION !== void 0) {\n    const accessor = parser.json.accessors[attributes.POSITION];\n    const min = accessor.min;\n    const max = accessor.max;\n    if (min !== void 0 && max !== void 0) {\n      box.set(new Vector3(min[0], min[1], min[2]), new Vector3(max[0], max[1], max[2]));\n      if (accessor.normalized) {\n        const boxScale = getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[accessor.componentType]);\n        box.min.multiplyScalar(boxScale);\n        box.max.multiplyScalar(boxScale);\n      }\n    } else {\n      console.warn(\"THREE.GLTFLoader: Missing min/max properties for accessor POSITION.\");\n      return;\n    }\n  } else {\n    return;\n  }\n  const targets = primitiveDef.targets;\n  if (targets !== void 0) {\n    const maxDisplacement = new Vector3();\n    const vector = new Vector3();\n    for (let i = 0, il = targets.length; i < il; i++) {\n      const target = targets[i];\n      if (target.POSITION !== void 0) {\n        const accessor = parser.json.accessors[target.POSITION];\n        const min = accessor.min;\n        const max = accessor.max;\n        if (min !== void 0 && max !== void 0) {\n          vector.setX(Math.max(Math.abs(min[0]), Math.abs(max[0])));\n          vector.setY(Math.max(Math.abs(min[1]), Math.abs(max[1])));\n          vector.setZ(Math.max(Math.abs(min[2]), Math.abs(max[2])));\n          if (accessor.normalized) {\n            const boxScale = getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[accessor.componentType]);\n            vector.multiplyScalar(boxScale);\n          }\n          maxDisplacement.max(vector);\n        } else {\n          console.warn(\"THREE.GLTFLoader: Missing min/max properties for accessor POSITION.\");\n        }\n      }\n    }\n    box.expandByVector(maxDisplacement);\n  }\n  geometry.boundingBox = box;\n  const sphere = new Sphere();\n  box.getCenter(sphere.center);\n  sphere.radius = box.min.distanceTo(box.max) / 2;\n  geometry.boundingSphere = sphere;\n}\nfunction addPrimitiveAttributes(geometry, primitiveDef, parser) {\n  const attributes = primitiveDef.attributes;\n  const pending = [];\n  function assignAttributeAccessor(accessorIndex, attributeName) {\n    return parser.getDependency(\"accessor\", accessorIndex).then(function(accessor) {\n      geometry.setAttribute(attributeName, accessor);\n    });\n  }\n  for (const gltfAttributeName in attributes) {\n    const threeAttributeName = ATTRIBUTES[gltfAttributeName] || gltfAttributeName.toLowerCase();\n    if (threeAttributeName in geometry.attributes)\n      continue;\n    pending.push(assignAttributeAccessor(attributes[gltfAttributeName], threeAttributeName));\n  }\n  if (primitiveDef.indices !== void 0 && !geometry.index) {\n    const accessor = parser.getDependency(\"accessor\", primitiveDef.indices).then(function(accessor2) {\n      geometry.setIndex(accessor2);\n    });\n    pending.push(accessor);\n  }\n  assignExtrasToUserData(geometry, primitiveDef);\n  computeBounds(geometry, primitiveDef, parser);\n  return Promise.all(pending).then(function() {\n    return primitiveDef.targets !== void 0 ? addMorphTargets(geometry, primitiveDef.targets, parser) : geometry;\n  });\n}\nexport {\n  GLTFLoader\n};\n","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct.bind();\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n  return _construct.apply(null, arguments);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","import unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (!it) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      var F = function F() {};\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var normalCompletion = true,\n    didErr = false,\n    err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn.js\";\nexport default function _createSuper(Derived) {\n  var hasNativeReflectConstruct = isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return possibleConstructorReturn(this, result);\n  };\n}","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return assertThisInitialized(self);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","import superPropBase from \"./superPropBase.js\";\nexport default function _get() {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get.bind();\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n      if (desc.get) {\n        return desc.get.call(arguments.length < 3 ? target : receiver);\n      }\n      return desc.value;\n    };\n  }\n  return _get.apply(this, arguments);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n  return object;\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import defineProperty from \"./defineProperty.js\";\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nexport default function _objectSpread2(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose.js\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}","import _typeof from \"./typeof.js\";\nexport default function _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n      _cache.set(Class, Wrapper);\n    }\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n  return _wrapNativeSuper(Class);\n}","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","/**\n * @license\n * Copyright 2010-2022 Three.js Authors\n * SPDX-License-Identifier: MIT\n */\nconst REVISION = '145';\nconst MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2, ROTATE: 0, DOLLY: 1, PAN: 2 };\nconst TOUCH = { ROTATE: 0, PAN: 1, DOLLY_PAN: 2, DOLLY_ROTATE: 3 };\nconst CullFaceNone = 0;\nconst CullFaceBack = 1;\nconst CullFaceFront = 2;\nconst CullFaceFrontBack = 3;\nconst BasicShadowMap = 0;\nconst PCFShadowMap = 1;\nconst PCFSoftShadowMap = 2;\nconst VSMShadowMap = 3;\nconst FrontSide = 0;\nconst BackSide = 1;\nconst DoubleSide = 2;\nconst NoBlending = 0;\nconst NormalBlending = 1;\nconst AdditiveBlending = 2;\nconst SubtractiveBlending = 3;\nconst MultiplyBlending = 4;\nconst CustomBlending = 5;\nconst AddEquation = 100;\nconst SubtractEquation = 101;\nconst ReverseSubtractEquation = 102;\nconst MinEquation = 103;\nconst MaxEquation = 104;\nconst ZeroFactor = 200;\nconst OneFactor = 201;\nconst SrcColorFactor = 202;\nconst OneMinusSrcColorFactor = 203;\nconst SrcAlphaFactor = 204;\nconst OneMinusSrcAlphaFactor = 205;\nconst DstAlphaFactor = 206;\nconst OneMinusDstAlphaFactor = 207;\nconst DstColorFactor = 208;\nconst OneMinusDstColorFactor = 209;\nconst SrcAlphaSaturateFactor = 210;\nconst NeverDepth = 0;\nconst AlwaysDepth = 1;\nconst LessDepth = 2;\nconst LessEqualDepth = 3;\nconst EqualDepth = 4;\nconst GreaterEqualDepth = 5;\nconst GreaterDepth = 6;\nconst NotEqualDepth = 7;\nconst MultiplyOperation = 0;\nconst MixOperation = 1;\nconst AddOperation = 2;\nconst NoToneMapping = 0;\nconst LinearToneMapping = 1;\nconst ReinhardToneMapping = 2;\nconst CineonToneMapping = 3;\nconst ACESFilmicToneMapping = 4;\nconst CustomToneMapping = 5;\n\nconst UVMapping = 300;\nconst CubeReflectionMapping = 301;\nconst CubeRefractionMapping = 302;\nconst EquirectangularReflectionMapping = 303;\nconst EquirectangularRefractionMapping = 304;\nconst CubeUVReflectionMapping = 306;\nconst RepeatWrapping = 1000;\nconst ClampToEdgeWrapping = 1001;\nconst MirroredRepeatWrapping = 1002;\nconst NearestFilter = 1003;\nconst NearestMipmapNearestFilter = 1004;\nconst NearestMipMapNearestFilter = 1004;\nconst NearestMipmapLinearFilter = 1005;\nconst NearestMipMapLinearFilter = 1005;\nconst LinearFilter = 1006;\nconst LinearMipmapNearestFilter = 1007;\nconst LinearMipMapNearestFilter = 1007;\nconst LinearMipmapLinearFilter = 1008;\nconst LinearMipMapLinearFilter = 1008;\nconst UnsignedByteType = 1009;\nconst ByteType = 1010;\nconst ShortType = 1011;\nconst UnsignedShortType = 1012;\nconst IntType = 1013;\nconst UnsignedIntType = 1014;\nconst FloatType = 1015;\nconst HalfFloatType = 1016;\nconst UnsignedShort4444Type = 1017;\nconst UnsignedShort5551Type = 1018;\nconst UnsignedInt248Type = 1020;\nconst AlphaFormat = 1021;\nconst RGBFormat = 1022; // @deprecated since r137\nconst RGBAFormat = 1023;\nconst LuminanceFormat = 1024;\nconst LuminanceAlphaFormat = 1025;\nconst DepthFormat = 1026;\nconst DepthStencilFormat = 1027;\nconst RedFormat = 1028;\nconst RedIntegerFormat = 1029;\nconst RGFormat = 1030;\nconst RGIntegerFormat = 1031;\nconst RGBAIntegerFormat = 1033;\n\nconst RGB_S3TC_DXT1_Format = 33776;\nconst RGBA_S3TC_DXT1_Format = 33777;\nconst RGBA_S3TC_DXT3_Format = 33778;\nconst RGBA_S3TC_DXT5_Format = 33779;\nconst RGB_PVRTC_4BPPV1_Format = 35840;\nconst RGB_PVRTC_2BPPV1_Format = 35841;\nconst RGBA_PVRTC_4BPPV1_Format = 35842;\nconst RGBA_PVRTC_2BPPV1_Format = 35843;\nconst RGB_ETC1_Format = 36196;\nconst RGB_ETC2_Format = 37492;\nconst RGBA_ETC2_EAC_Format = 37496;\nconst RGBA_ASTC_4x4_Format = 37808;\nconst RGBA_ASTC_5x4_Format = 37809;\nconst RGBA_ASTC_5x5_Format = 37810;\nconst RGBA_ASTC_6x5_Format = 37811;\nconst RGBA_ASTC_6x6_Format = 37812;\nconst RGBA_ASTC_8x5_Format = 37813;\nconst RGBA_ASTC_8x6_Format = 37814;\nconst RGBA_ASTC_8x8_Format = 37815;\nconst RGBA_ASTC_10x5_Format = 37816;\nconst RGBA_ASTC_10x6_Format = 37817;\nconst RGBA_ASTC_10x8_Format = 37818;\nconst RGBA_ASTC_10x10_Format = 37819;\nconst RGBA_ASTC_12x10_Format = 37820;\nconst RGBA_ASTC_12x12_Format = 37821;\nconst RGBA_BPTC_Format = 36492;\nconst LoopOnce = 2200;\nconst LoopRepeat = 2201;\nconst LoopPingPong = 2202;\nconst InterpolateDiscrete = 2300;\nconst InterpolateLinear = 2301;\nconst InterpolateSmooth = 2302;\nconst ZeroCurvatureEnding = 2400;\nconst ZeroSlopeEnding = 2401;\nconst WrapAroundEnding = 2402;\nconst NormalAnimationBlendMode = 2500;\nconst AdditiveAnimationBlendMode = 2501;\nconst TrianglesDrawMode = 0;\nconst TriangleStripDrawMode = 1;\nconst TriangleFanDrawMode = 2;\nconst LinearEncoding = 3000;\nconst sRGBEncoding = 3001;\nconst BasicDepthPacking = 3200;\nconst RGBADepthPacking = 3201;\nconst TangentSpaceNormalMap = 0;\nconst ObjectSpaceNormalMap = 1;\n\n// Color space string identifiers, matching CSS Color Module Level 4 and WebGPU names where available.\nconst NoColorSpace = '';\nconst SRGBColorSpace = 'srgb';\nconst LinearSRGBColorSpace = 'srgb-linear';\n\nconst ZeroStencilOp = 0;\nconst KeepStencilOp = 7680;\nconst ReplaceStencilOp = 7681;\nconst IncrementStencilOp = 7682;\nconst DecrementStencilOp = 7683;\nconst IncrementWrapStencilOp = 34055;\nconst DecrementWrapStencilOp = 34056;\nconst InvertStencilOp = 5386;\n\nconst NeverStencilFunc = 512;\nconst LessStencilFunc = 513;\nconst EqualStencilFunc = 514;\nconst LessEqualStencilFunc = 515;\nconst GreaterStencilFunc = 516;\nconst NotEqualStencilFunc = 517;\nconst GreaterEqualStencilFunc = 518;\nconst AlwaysStencilFunc = 519;\n\nconst StaticDrawUsage = 35044;\nconst DynamicDrawUsage = 35048;\nconst StreamDrawUsage = 35040;\nconst StaticReadUsage = 35045;\nconst DynamicReadUsage = 35049;\nconst StreamReadUsage = 35041;\nconst StaticCopyUsage = 35046;\nconst DynamicCopyUsage = 35050;\nconst StreamCopyUsage = 35042;\n\nconst GLSL1 = '100';\nconst GLSL3 = '300 es';\n\nconst _SRGBAFormat = 1035; // fallback for WebGL 1\n\n/**\n * https://github.com/mrdoob/eventdispatcher.js/\n */\n\nclass EventDispatcher {\n\n\taddEventListener( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) this._listeners = {};\n\n\t\tconst listeners = this._listeners;\n\n\t\tif ( listeners[ type ] === undefined ) {\n\n\t\t\tlisteners[ type ] = [];\n\n\t\t}\n\n\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\n\n\t\t\tlisteners[ type ].push( listener );\n\n\t\t}\n\n\t}\n\n\thasEventListener( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return false;\n\n\t\tconst listeners = this._listeners;\n\n\t\treturn listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1;\n\n\t}\n\n\tremoveEventListener( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tconst listeners = this._listeners;\n\t\tconst listenerArray = listeners[ type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tconst index = listenerArray.indexOf( listener );\n\n\t\t\tif ( index !== - 1 ) {\n\n\t\t\t\tlistenerArray.splice( index, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tdispatchEvent( event ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tconst listeners = this._listeners;\n\t\tconst listenerArray = listeners[ event.type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tevent.target = this;\n\n\t\t\t// Make a copy, in case listeners are removed while iterating.\n\t\t\tconst array = listenerArray.slice( 0 );\n\n\t\t\tfor ( let i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tarray[ i ].call( this, event );\n\n\t\t\t}\n\n\t\t\tevent.target = null;\n\n\t\t}\n\n\t}\n\n}\n\nconst _lut = [ '00', '01', '02', '03', '04', '05', '06', '07', '08', '09', '0a', '0b', '0c', '0d', '0e', '0f', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '1a', '1b', '1c', '1d', '1e', '1f', '20', '21', '22', '23', '24', '25', '26', '27', '28', '29', '2a', '2b', '2c', '2d', '2e', '2f', '30', '31', '32', '33', '34', '35', '36', '37', '38', '39', '3a', '3b', '3c', '3d', '3e', '3f', '40', '41', '42', '43', '44', '45', '46', '47', '48', '49', '4a', '4b', '4c', '4d', '4e', '4f', '50', '51', '52', '53', '54', '55', '56', '57', '58', '59', '5a', '5b', '5c', '5d', '5e', '5f', '60', '61', '62', '63', '64', '65', '66', '67', '68', '69', '6a', '6b', '6c', '6d', '6e', '6f', '70', '71', '72', '73', '74', '75', '76', '77', '78', '79', '7a', '7b', '7c', '7d', '7e', '7f', '80', '81', '82', '83', '84', '85', '86', '87', '88', '89', '8a', '8b', '8c', '8d', '8e', '8f', '90', '91', '92', '93', '94', '95', '96', '97', '98', '99', '9a', '9b', '9c', '9d', '9e', '9f', 'a0', 'a1', 'a2', 'a3', 'a4', 'a5', 'a6', 'a7', 'a8', 'a9', 'aa', 'ab', 'ac', 'ad', 'ae', 'af', 'b0', 'b1', 'b2', 'b3', 'b4', 'b5', 'b6', 'b7', 'b8', 'b9', 'ba', 'bb', 'bc', 'bd', 'be', 'bf', 'c0', 'c1', 'c2', 'c3', 'c4', 'c5', 'c6', 'c7', 'c8', 'c9', 'ca', 'cb', 'cc', 'cd', 'ce', 'cf', 'd0', 'd1', 'd2', 'd3', 'd4', 'd5', 'd6', 'd7', 'd8', 'd9', 'da', 'db', 'dc', 'dd', 'de', 'df', 'e0', 'e1', 'e2', 'e3', 'e4', 'e5', 'e6', 'e7', 'e8', 'e9', 'ea', 'eb', 'ec', 'ed', 'ee', 'ef', 'f0', 'f1', 'f2', 'f3', 'f4', 'f5', 'f6', 'f7', 'f8', 'f9', 'fa', 'fb', 'fc', 'fd', 'fe', 'ff' ];\n\nlet _seed = 1234567;\n\n\nconst DEG2RAD = Math.PI / 180;\nconst RAD2DEG = 180 / Math.PI;\n\n// http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\nfunction generateUUID() {\n\n\tconst d0 = Math.random() * 0xffffffff | 0;\n\tconst d1 = Math.random() * 0xffffffff | 0;\n\tconst d2 = Math.random() * 0xffffffff | 0;\n\tconst d3 = Math.random() * 0xffffffff | 0;\n\tconst uuid = _lut[ d0 & 0xff ] + _lut[ d0 >> 8 & 0xff ] + _lut[ d0 >> 16 & 0xff ] + _lut[ d0 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d1 & 0xff ] + _lut[ d1 >> 8 & 0xff ] + '-' + _lut[ d1 >> 16 & 0x0f | 0x40 ] + _lut[ d1 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d2 & 0x3f | 0x80 ] + _lut[ d2 >> 8 & 0xff ] + '-' + _lut[ d2 >> 16 & 0xff ] + _lut[ d2 >> 24 & 0xff ] +\n\t\t\t_lut[ d3 & 0xff ] + _lut[ d3 >> 8 & 0xff ] + _lut[ d3 >> 16 & 0xff ] + _lut[ d3 >> 24 & 0xff ];\n\n\t// .toLowerCase() here flattens concatenated strings to save heap memory space.\n\treturn uuid.toLowerCase();\n\n}\n\nfunction clamp( value, min, max ) {\n\n\treturn Math.max( min, Math.min( max, value ) );\n\n}\n\n// compute euclidean modulo of m % n\n// https://en.wikipedia.org/wiki/Modulo_operation\nfunction euclideanModulo( n, m ) {\n\n\treturn ( ( n % m ) + m ) % m;\n\n}\n\n// Linear mapping from range <a1, a2> to range <b1, b2>\nfunction mapLinear( x, a1, a2, b1, b2 ) {\n\n\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\n\n}\n\n// https://www.gamedev.net/tutorials/programming/general-and-gameplay-programming/inverse-lerp-a-super-useful-yet-often-overlooked-function-r5230/\nfunction inverseLerp( x, y, value ) {\n\n\tif ( x !== y ) {\n\n\t\treturn ( value - x ) / ( y - x );\n\n\t} else {\n\n\t\treturn 0;\n\n\t}\n\n}\n\n// https://en.wikipedia.org/wiki/Linear_interpolation\nfunction lerp( x, y, t ) {\n\n\treturn ( 1 - t ) * x + t * y;\n\n}\n\n// http://www.rorydriscoll.com/2016/03/07/frame-rate-independent-damping-using-lerp/\nfunction damp( x, y, lambda, dt ) {\n\n\treturn lerp( x, y, 1 - Math.exp( - lambda * dt ) );\n\n}\n\n// https://www.desmos.com/calculator/vcsjnyz7x4\nfunction pingpong( x, length = 1 ) {\n\n\treturn length - Math.abs( euclideanModulo( x, length * 2 ) - length );\n\n}\n\n// http://en.wikipedia.org/wiki/Smoothstep\nfunction smoothstep( x, min, max ) {\n\n\tif ( x <= min ) return 0;\n\tif ( x >= max ) return 1;\n\n\tx = ( x - min ) / ( max - min );\n\n\treturn x * x * ( 3 - 2 * x );\n\n}\n\nfunction smootherstep( x, min, max ) {\n\n\tif ( x <= min ) return 0;\n\tif ( x >= max ) return 1;\n\n\tx = ( x - min ) / ( max - min );\n\n\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\n\n}\n\n// Random integer from <low, high> interval\nfunction randInt( low, high ) {\n\n\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\n\n}\n\n// Random float from <low, high> interval\nfunction randFloat( low, high ) {\n\n\treturn low + Math.random() * ( high - low );\n\n}\n\n// Random float from <-range/2, range/2> interval\nfunction randFloatSpread( range ) {\n\n\treturn range * ( 0.5 - Math.random() );\n\n}\n\n// Deterministic pseudo-random float in the interval [ 0, 1 ]\nfunction seededRandom( s ) {\n\n\tif ( s !== undefined ) _seed = s;\n\n\t// Mulberry32 generator\n\n\tlet t = _seed += 0x6D2B79F5;\n\n\tt = Math.imul( t ^ t >>> 15, t | 1 );\n\n\tt ^= t + Math.imul( t ^ t >>> 7, t | 61 );\n\n\treturn ( ( t ^ t >>> 14 ) >>> 0 ) / 4294967296;\n\n}\n\nfunction degToRad( degrees ) {\n\n\treturn degrees * DEG2RAD;\n\n}\n\nfunction radToDeg( radians ) {\n\n\treturn radians * RAD2DEG;\n\n}\n\nfunction isPowerOfTwo( value ) {\n\n\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\n\n}\n\nfunction ceilPowerOfTwo( value ) {\n\n\treturn Math.pow( 2, Math.ceil( Math.log( value ) / Math.LN2 ) );\n\n}\n\nfunction floorPowerOfTwo( value ) {\n\n\treturn Math.pow( 2, Math.floor( Math.log( value ) / Math.LN2 ) );\n\n}\n\nfunction setQuaternionFromProperEuler( q, a, b, c, order ) {\n\n\t// Intrinsic Proper Euler Angles - see https://en.wikipedia.org/wiki/Euler_angles\n\n\t// rotations are applied to the axes in the order specified by 'order'\n\t// rotation by angle 'a' is applied first, then by angle 'b', then by angle 'c'\n\t// angles are in radians\n\n\tconst cos = Math.cos;\n\tconst sin = Math.sin;\n\n\tconst c2 = cos( b / 2 );\n\tconst s2 = sin( b / 2 );\n\n\tconst c13 = cos( ( a + c ) / 2 );\n\tconst s13 = sin( ( a + c ) / 2 );\n\n\tconst c1_3 = cos( ( a - c ) / 2 );\n\tconst s1_3 = sin( ( a - c ) / 2 );\n\n\tconst c3_1 = cos( ( c - a ) / 2 );\n\tconst s3_1 = sin( ( c - a ) / 2 );\n\n\tswitch ( order ) {\n\n\t\tcase 'XYX':\n\t\t\tq.set( c2 * s13, s2 * c1_3, s2 * s1_3, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'YZY':\n\t\t\tq.set( s2 * s1_3, c2 * s13, s2 * c1_3, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'ZXZ':\n\t\t\tq.set( s2 * c1_3, s2 * s1_3, c2 * s13, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'XZX':\n\t\t\tq.set( c2 * s13, s2 * s3_1, s2 * c3_1, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'YXY':\n\t\t\tq.set( s2 * c3_1, c2 * s13, s2 * s3_1, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'ZYZ':\n\t\t\tq.set( s2 * s3_1, s2 * c3_1, c2 * s13, c2 * c13 );\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tconsole.warn( 'THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: ' + order );\n\n\t}\n\n}\n\nfunction denormalize( value, array ) {\n\n\tswitch ( array.constructor ) {\n\n\t\tcase Float32Array:\n\n\t\t\treturn value;\n\n\t\tcase Uint16Array:\n\n\t\t\treturn value / 65535.0;\n\n\t\tcase Uint8Array:\n\n\t\t\treturn value / 255.0;\n\n\t\tcase Int16Array:\n\n\t\t\treturn Math.max( value / 32767.0, - 1.0 );\n\n\t\tcase Int8Array:\n\n\t\t\treturn Math.max( value / 127.0, - 1.0 );\n\n\t\tdefault:\n\n\t\t\tthrow new Error( 'Invalid component type.' );\n\n\t}\n\n}\n\nfunction normalize( value, array ) {\n\n\tswitch ( array.constructor ) {\n\n\t\tcase Float32Array:\n\n\t\t\treturn value;\n\n\t\tcase Uint16Array:\n\n\t\t\treturn Math.round( value * 65535.0 );\n\n\t\tcase Uint8Array:\n\n\t\t\treturn Math.round( value * 255.0 );\n\n\t\tcase Int16Array:\n\n\t\t\treturn Math.round( value * 32767.0 );\n\n\t\tcase Int8Array:\n\n\t\t\treturn Math.round( value * 127.0 );\n\n\t\tdefault:\n\n\t\t\tthrow new Error( 'Invalid component type.' );\n\n\t}\n\n}\n\nvar MathUtils = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tDEG2RAD: DEG2RAD,\n\tRAD2DEG: RAD2DEG,\n\tgenerateUUID: generateUUID,\n\tclamp: clamp,\n\teuclideanModulo: euclideanModulo,\n\tmapLinear: mapLinear,\n\tinverseLerp: inverseLerp,\n\tlerp: lerp,\n\tdamp: damp,\n\tpingpong: pingpong,\n\tsmoothstep: smoothstep,\n\tsmootherstep: smootherstep,\n\trandInt: randInt,\n\trandFloat: randFloat,\n\trandFloatSpread: randFloatSpread,\n\tseededRandom: seededRandom,\n\tdegToRad: degToRad,\n\tradToDeg: radToDeg,\n\tisPowerOfTwo: isPowerOfTwo,\n\tceilPowerOfTwo: ceilPowerOfTwo,\n\tfloorPowerOfTwo: floorPowerOfTwo,\n\tsetQuaternionFromProperEuler: setQuaternionFromProperEuler,\n\tnormalize: normalize,\n\tdenormalize: denormalize\n});\n\nclass Vector2 {\n\n\tconstructor( x = 0, y = 0 ) {\n\n\t\tVector2.prototype.isVector2 = true;\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t}\n\n\tget width() {\n\n\t\treturn this.x;\n\n\t}\n\n\tset width( value ) {\n\n\t\tthis.x = value;\n\n\t}\n\n\tget height() {\n\n\t\treturn this.y;\n\n\t}\n\n\tset height( value ) {\n\n\t\tthis.y = value;\n\n\t}\n\n\tset( x, y ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v ) {\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v ) {\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tdivide( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tapplyMatrix3( m ) {\n\n\t\tconst x = this.x, y = this.y;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ];\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ];\n\n\t\treturn this;\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y;\n\n\t}\n\n\tcross( v ) {\n\n\t\treturn this.x * v.y - this.y * v.x;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tangle() {\n\n\t\t// computes the angle in radians with respect to the positive x-axis\n\n\t\tconst angle = Math.atan2( - this.y, - this.x ) + Math.PI;\n\n\t\treturn angle;\n\n\t}\n\n\tdistanceTo( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t}\n\n\tdistanceToSquared( v ) {\n\n\t\tconst dx = this.x - v.x, dy = this.y - v.y;\n\t\treturn dx * dx + dy * dy;\n\n\t}\n\n\tmanhattanDistanceTo( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\n\t\treturn this;\n\n\t}\n\n\trotateAround( center, angle ) {\n\n\t\tconst c = Math.cos( angle ), s = Math.sin( angle );\n\n\t\tconst x = this.x - center.x;\n\t\tconst y = this.y - center.y;\n\n\t\tthis.x = x * c - y * s + center.x;\n\t\tthis.y = x * s + y * c + center.y;\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\n\t\treturn this;\n\n\t}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this.x;\n\t\tyield this.y;\n\n\t}\n\n}\n\nclass Matrix3 {\n\n\tconstructor() {\n\n\t\tMatrix3.prototype.isMatrix3 = true;\n\n\t\tthis.elements = [\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t];\n\n\t}\n\n\tset( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 1 ] = n21; te[ 2 ] = n31;\n\t\tte[ 3 ] = n12; te[ 4 ] = n22; te[ 5 ] = n32;\n\t\tte[ 6 ] = n13; te[ 7 ] = n23; te[ 8 ] = n33;\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tcopy( m ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ];\n\t\tte[ 3 ] = me[ 3 ]; te[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ];\n\t\tte[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ]; te[ 8 ] = me[ 8 ];\n\n\t\treturn this;\n\n\t}\n\n\textractBasis( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrix3Column( this, 0 );\n\t\tyAxis.setFromMatrix3Column( this, 1 );\n\t\tzAxis.setFromMatrix3Column( this, 2 );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrix4( m ) {\n\n\t\tconst me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 4 ], me[ 8 ],\n\t\t\tme[ 1 ], me[ 5 ], me[ 9 ],\n\t\t\tme[ 2 ], me[ 6 ], me[ 10 ]\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( m ) {\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t}\n\n\tpremultiply( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t}\n\n\tmultiplyMatrices( a, b ) {\n\n\t\tconst ae = a.elements;\n\t\tconst be = b.elements;\n\t\tconst te = this.elements;\n\n\t\tconst a11 = ae[ 0 ], a12 = ae[ 3 ], a13 = ae[ 6 ];\n\t\tconst a21 = ae[ 1 ], a22 = ae[ 4 ], a23 = ae[ 7 ];\n\t\tconst a31 = ae[ 2 ], a32 = ae[ 5 ], a33 = ae[ 8 ];\n\n\t\tconst b11 = be[ 0 ], b12 = be[ 3 ], b13 = be[ 6 ];\n\t\tconst b21 = be[ 1 ], b22 = be[ 4 ], b23 = be[ 7 ];\n\t\tconst b31 = be[ 2 ], b32 = be[ 5 ], b33 = be[ 8 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31;\n\t\tte[ 3 ] = a11 * b12 + a12 * b22 + a13 * b32;\n\t\tte[ 6 ] = a11 * b13 + a12 * b23 + a13 * b33;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31;\n\t\tte[ 4 ] = a21 * b12 + a22 * b22 + a23 * b32;\n\t\tte[ 7 ] = a21 * b13 + a22 * b23 + a23 * b33;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31;\n\t\tte[ 5 ] = a31 * b12 + a32 * b22 + a33 * b32;\n\t\tte[ 8 ] = a31 * b13 + a32 * b23 + a33 * b33;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\n\n\t\treturn this;\n\n\t}\n\n\tdeterminant() {\n\n\t\tconst te = this.elements;\n\n\t\tconst a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\n\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n\n\t}\n\n\tinvert() {\n\n\t\tconst te = this.elements,\n\n\t\t\tn11 = te[ 0 ], n21 = te[ 1 ], n31 = te[ 2 ],\n\t\t\tn12 = te[ 3 ], n22 = te[ 4 ], n32 = te[ 5 ],\n\t\t\tn13 = te[ 6 ], n23 = te[ 7 ], n33 = te[ 8 ],\n\n\t\t\tt11 = n33 * n22 - n32 * n23,\n\t\t\tt12 = n32 * n13 - n33 * n12,\n\t\t\tt13 = n23 * n12 - n22 * n13,\n\n\t\t\tdet = n11 * t11 + n21 * t12 + n31 * t13;\n\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0 );\n\n\t\tconst detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n31 * n23 - n33 * n21 ) * detInv;\n\t\tte[ 2 ] = ( n32 * n21 - n31 * n22 ) * detInv;\n\n\t\tte[ 3 ] = t12 * detInv;\n\t\tte[ 4 ] = ( n33 * n11 - n31 * n13 ) * detInv;\n\t\tte[ 5 ] = ( n31 * n12 - n32 * n11 ) * detInv;\n\n\t\tte[ 6 ] = t13 * detInv;\n\t\tte[ 7 ] = ( n21 * n13 - n23 * n11 ) * detInv;\n\t\tte[ 8 ] = ( n22 * n11 - n21 * n12 ) * detInv;\n\n\t\treturn this;\n\n\t}\n\n\ttranspose() {\n\n\t\tlet tmp;\n\t\tconst m = this.elements;\n\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\n\n\t\treturn this;\n\n\t}\n\n\tgetNormalMatrix( matrix4 ) {\n\n\t\treturn this.setFromMatrix4( matrix4 ).invert().transpose();\n\n\t}\n\n\ttransposeIntoArray( r ) {\n\n\t\tconst m = this.elements;\n\n\t\tr[ 0 ] = m[ 0 ];\n\t\tr[ 1 ] = m[ 3 ];\n\t\tr[ 2 ] = m[ 6 ];\n\t\tr[ 3 ] = m[ 1 ];\n\t\tr[ 4 ] = m[ 4 ];\n\t\tr[ 5 ] = m[ 7 ];\n\t\tr[ 6 ] = m[ 2 ];\n\t\tr[ 7 ] = m[ 5 ];\n\t\tr[ 8 ] = m[ 8 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetUvTransform( tx, ty, sx, sy, rotation, cx, cy ) {\n\n\t\tconst c = Math.cos( rotation );\n\t\tconst s = Math.sin( rotation );\n\n\t\tthis.set(\n\t\t\tsx * c, sx * s, - sx * ( c * cx + s * cy ) + cx + tx,\n\t\t\t- sy * s, sy * c, - sy * ( - s * cx + c * cy ) + cy + ty,\n\t\t\t0, 0, 1\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tscale( sx, sy ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= sx; te[ 3 ] *= sx; te[ 6 ] *= sx;\n\t\tte[ 1 ] *= sy; te[ 4 ] *= sy; te[ 7 ] *= sy;\n\n\t\treturn this;\n\n\t}\n\n\trotate( theta ) {\n\n\t\tconst c = Math.cos( theta );\n\t\tconst s = Math.sin( theta );\n\n\t\tconst te = this.elements;\n\n\t\tconst a11 = te[ 0 ], a12 = te[ 3 ], a13 = te[ 6 ];\n\t\tconst a21 = te[ 1 ], a22 = te[ 4 ], a23 = te[ 7 ];\n\n\t\tte[ 0 ] = c * a11 + s * a21;\n\t\tte[ 3 ] = c * a12 + s * a22;\n\t\tte[ 6 ] = c * a13 + s * a23;\n\n\t\tte[ 1 ] = - s * a11 + c * a21;\n\t\tte[ 4 ] = - s * a12 + c * a22;\n\t\tte[ 7 ] = - s * a13 + c * a23;\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( tx, ty ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] += tx * te[ 2 ]; te[ 3 ] += tx * te[ 5 ]; te[ 6 ] += tx * te[ 8 ];\n\t\tte[ 1 ] += ty * te[ 2 ]; te[ 4 ] += ty * te[ 5 ]; te[ 7 ] += ty * te[ 8 ];\n\n\t\treturn this;\n\n\t}\n\n\tequals( matrix ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = matrix.elements;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tconst te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\n\t\treturn array;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().fromArray( this.elements );\n\n\t}\n\n}\n\nfunction arrayNeedsUint32( array ) {\n\n\t// assumes larger values usually on last\n\n\tfor ( let i = array.length - 1; i >= 0; -- i ) {\n\n\t\tif ( array[ i ] >= 65535 ) return true; // account for PRIMITIVE_RESTART_FIXED_INDEX, #24565\n\n\t}\n\n\treturn false;\n\n}\n\nconst TYPED_ARRAYS = {\n\tInt8Array: Int8Array,\n\tUint8Array: Uint8Array,\n\tUint8ClampedArray: Uint8ClampedArray,\n\tInt16Array: Int16Array,\n\tUint16Array: Uint16Array,\n\tInt32Array: Int32Array,\n\tUint32Array: Uint32Array,\n\tFloat32Array: Float32Array,\n\tFloat64Array: Float64Array\n};\n\nfunction getTypedArray( type, buffer ) {\n\n\treturn new TYPED_ARRAYS[ type ]( buffer );\n\n}\n\nfunction createElementNS( name ) {\n\n\treturn document.createElementNS( 'http://www.w3.org/1999/xhtml', name );\n\n}\n\nfunction SRGBToLinear( c ) {\n\n\treturn ( c < 0.04045 ) ? c * 0.0773993808 : Math.pow( c * 0.9478672986 + 0.0521327014, 2.4 );\n\n}\n\nfunction LinearToSRGB( c ) {\n\n\treturn ( c < 0.0031308 ) ? c * 12.92 : 1.055 * ( Math.pow( c, 0.41666 ) ) - 0.055;\n\n}\n\n// JavaScript RGB-to-RGB transforms, defined as\n// FN[InputColorSpace][OutputColorSpace] callback functions.\nconst FN = {\n\t[ SRGBColorSpace ]: { [ LinearSRGBColorSpace ]: SRGBToLinear },\n\t[ LinearSRGBColorSpace ]: { [ SRGBColorSpace ]: LinearToSRGB },\n};\n\nconst ColorManagement = {\n\n\tlegacyMode: true,\n\n\tget workingColorSpace() {\n\n\t\treturn LinearSRGBColorSpace;\n\n\t},\n\n\tset workingColorSpace( colorSpace ) {\n\n\t\tconsole.warn( 'THREE.ColorManagement: .workingColorSpace is readonly.' );\n\n\t},\n\n\tconvert: function ( color, sourceColorSpace, targetColorSpace ) {\n\n\t\tif ( this.legacyMode || sourceColorSpace === targetColorSpace || ! sourceColorSpace || ! targetColorSpace ) {\n\n\t\t\treturn color;\n\n\t\t}\n\n\t\tif ( FN[ sourceColorSpace ] && FN[ sourceColorSpace ][ targetColorSpace ] !== undefined ) {\n\n\t\t\tconst fn = FN[ sourceColorSpace ][ targetColorSpace ];\n\n\t\t\tcolor.r = fn( color.r );\n\t\t\tcolor.g = fn( color.g );\n\t\t\tcolor.b = fn( color.b );\n\n\t\t\treturn color;\n\n\t\t}\n\n\t\tthrow new Error( 'Unsupported color space conversion.' );\n\n\t},\n\n\tfromWorkingColorSpace: function ( color, targetColorSpace ) {\n\n\t\treturn this.convert( color, this.workingColorSpace, targetColorSpace );\n\n\t},\n\n\ttoWorkingColorSpace: function ( color, sourceColorSpace ) {\n\n\t\treturn this.convert( color, sourceColorSpace, this.workingColorSpace );\n\n\t},\n\n};\n\nconst _colorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\n\t'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\n\t'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\n\t'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\n\t'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\n\t'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\n\t'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\n\t'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\n\t'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\n\t'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\n\t'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\n\t'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\n\t'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\n\t'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\n\t'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\n\t'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\n\t'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\n\t'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\n\t'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\n\t'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'rebeccapurple': 0x663399, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\n\t'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\n\t'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\n\t'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\n\t'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\n\nconst _rgb = { r: 0, g: 0, b: 0 };\nconst _hslA = { h: 0, s: 0, l: 0 };\nconst _hslB = { h: 0, s: 0, l: 0 };\n\nfunction hue2rgb( p, q, t ) {\n\n\tif ( t < 0 ) t += 1;\n\tif ( t > 1 ) t -= 1;\n\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\n\tif ( t < 1 / 2 ) return q;\n\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\n\treturn p;\n\n}\n\nfunction toComponents( source, target ) {\n\n\ttarget.r = source.r;\n\ttarget.g = source.g;\n\ttarget.b = source.b;\n\n\treturn target;\n\n}\n\nclass Color {\n\n\tconstructor( r, g, b ) {\n\n\t\tthis.isColor = true;\n\n\t\tthis.r = 1;\n\t\tthis.g = 1;\n\t\tthis.b = 1;\n\n\t\tif ( g === undefined && b === undefined ) {\n\n\t\t\t// r is THREE.Color, hex or string\n\t\t\treturn this.set( r );\n\n\t\t}\n\n\t\treturn this.setRGB( r, g, b );\n\n\t}\n\n\tset( value ) {\n\n\t\tif ( value && value.isColor ) {\n\n\t\t\tthis.copy( value );\n\n\t\t} else if ( typeof value === 'number' ) {\n\n\t\t\tthis.setHex( value );\n\n\t\t} else if ( typeof value === 'string' ) {\n\n\t\t\tthis.setStyle( value );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.r = scalar;\n\t\tthis.g = scalar;\n\t\tthis.b = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetHex( hex, colorSpace = SRGBColorSpace ) {\n\n\t\thex = Math.floor( hex );\n\n\t\tthis.r = ( hex >> 16 & 255 ) / 255;\n\t\tthis.g = ( hex >> 8 & 255 ) / 255;\n\t\tthis.b = ( hex & 255 ) / 255;\n\n\t\tColorManagement.toWorkingColorSpace( this, colorSpace );\n\n\t\treturn this;\n\n\t}\n\n\tsetRGB( r, g, b, colorSpace = LinearSRGBColorSpace ) {\n\n\t\tthis.r = r;\n\t\tthis.g = g;\n\t\tthis.b = b;\n\n\t\tColorManagement.toWorkingColorSpace( this, colorSpace );\n\n\t\treturn this;\n\n\t}\n\n\tsetHSL( h, s, l, colorSpace = LinearSRGBColorSpace ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\t\th = euclideanModulo( h, 1 );\n\t\ts = clamp( s, 0, 1 );\n\t\tl = clamp( l, 0, 1 );\n\n\t\tif ( s === 0 ) {\n\n\t\t\tthis.r = this.g = this.b = l;\n\n\t\t} else {\n\n\t\t\tconst p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\n\t\t\tconst q = ( 2 * l ) - p;\n\n\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\n\t\t\tthis.g = hue2rgb( q, p, h );\n\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\n\n\t\t}\n\n\t\tColorManagement.toWorkingColorSpace( this, colorSpace );\n\n\t\treturn this;\n\n\t}\n\n\tsetStyle( style, colorSpace = SRGBColorSpace ) {\n\n\t\tfunction handleAlpha( string ) {\n\n\t\t\tif ( string === undefined ) return;\n\n\t\t\tif ( parseFloat( string ) < 1 ) {\n\n\t\t\t\tconsole.warn( 'THREE.Color: Alpha component of ' + style + ' will be ignored.' );\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tlet m;\n\n\t\tif ( m = /^((?:rgb|hsl)a?)\\(([^\\)]*)\\)/.exec( style ) ) {\n\n\t\t\t// rgb / hsl\n\n\t\t\tlet color;\n\t\t\tconst name = m[ 1 ];\n\t\t\tconst components = m[ 2 ];\n\n\t\t\tswitch ( name ) {\n\n\t\t\t\tcase 'rgb':\n\t\t\t\tcase 'rgba':\n\n\t\t\t\t\tif ( color = /^\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(255,0,0) rgba(255,0,0,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\n\n\t\t\t\t\t\tColorManagement.toWorkingColorSpace( this, colorSpace );\n\n\t\t\t\t\t\thandleAlpha( color[ 4 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( color = /^\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\n\n\t\t\t\t\t\tColorManagement.toWorkingColorSpace( this, colorSpace );\n\n\t\t\t\t\t\thandleAlpha( color[ 4 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'hsl':\n\t\t\t\tcase 'hsla':\n\n\t\t\t\t\tif ( color = /^\\s*(\\d*\\.?\\d+)\\s*,\\s*(\\d*\\.?\\d+)\\%\\s*,\\s*(\\d*\\.?\\d+)\\%\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// hsl(120,50%,50%) hsla(120,50%,50%,0.5)\n\t\t\t\t\t\tconst h = parseFloat( color[ 1 ] ) / 360;\n\t\t\t\t\t\tconst s = parseFloat( color[ 2 ] ) / 100;\n\t\t\t\t\t\tconst l = parseFloat( color[ 3 ] ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 4 ] );\n\n\t\t\t\t\t\treturn this.setHSL( h, s, l, colorSpace );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t} else if ( m = /^\\#([A-Fa-f\\d]+)$/.exec( style ) ) {\n\n\t\t\t// hex color\n\n\t\t\tconst hex = m[ 1 ];\n\t\t\tconst size = hex.length;\n\n\t\t\tif ( size === 3 ) {\n\n\t\t\t\t// #ff0\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 0 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 1 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 2 ) + hex.charAt( 2 ), 16 ) / 255;\n\n\t\t\t\tColorManagement.toWorkingColorSpace( this, colorSpace );\n\n\t\t\t\treturn this;\n\n\t\t\t} else if ( size === 6 ) {\n\n\t\t\t\t// #ff0000\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 2 ) + hex.charAt( 3 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 4 ) + hex.charAt( 5 ), 16 ) / 255;\n\n\t\t\t\tColorManagement.toWorkingColorSpace( this, colorSpace );\n\n\t\t\t\treturn this;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( style && style.length > 0 ) {\n\n\t\t\treturn this.setColorName( style, colorSpace );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetColorName( style, colorSpace = SRGBColorSpace ) {\n\n\t\t// color keywords\n\t\tconst hex = _colorKeywords[ style.toLowerCase() ];\n\n\t\tif ( hex !== undefined ) {\n\n\t\t\t// red\n\t\t\tthis.setHex( hex, colorSpace );\n\n\t\t} else {\n\n\t\t\t// unknown color\n\t\t\tconsole.warn( 'THREE.Color: Unknown color ' + style );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.r, this.g, this.b );\n\n\t}\n\n\tcopy( color ) {\n\n\t\tthis.r = color.r;\n\t\tthis.g = color.g;\n\t\tthis.b = color.b;\n\n\t\treturn this;\n\n\t}\n\n\tcopySRGBToLinear( color ) {\n\n\t\tthis.r = SRGBToLinear( color.r );\n\t\tthis.g = SRGBToLinear( color.g );\n\t\tthis.b = SRGBToLinear( color.b );\n\n\t\treturn this;\n\n\t}\n\n\tcopyLinearToSRGB( color ) {\n\n\t\tthis.r = LinearToSRGB( color.r );\n\t\tthis.g = LinearToSRGB( color.g );\n\t\tthis.b = LinearToSRGB( color.b );\n\n\t\treturn this;\n\n\t}\n\n\tconvertSRGBToLinear() {\n\n\t\tthis.copySRGBToLinear( this );\n\n\t\treturn this;\n\n\t}\n\n\tconvertLinearToSRGB() {\n\n\t\tthis.copyLinearToSRGB( this );\n\n\t\treturn this;\n\n\t}\n\n\tgetHex( colorSpace = SRGBColorSpace ) {\n\n\t\tColorManagement.fromWorkingColorSpace( toComponents( this, _rgb ), colorSpace );\n\n\t\treturn clamp( _rgb.r * 255, 0, 255 ) << 16 ^ clamp( _rgb.g * 255, 0, 255 ) << 8 ^ clamp( _rgb.b * 255, 0, 255 ) << 0;\n\n\t}\n\n\tgetHexString( colorSpace = SRGBColorSpace ) {\n\n\t\treturn ( '000000' + this.getHex( colorSpace ).toString( 16 ) ).slice( - 6 );\n\n\t}\n\n\tgetHSL( target, colorSpace = LinearSRGBColorSpace ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\n\t\tColorManagement.fromWorkingColorSpace( toComponents( this, _rgb ), colorSpace );\n\n\t\tconst r = _rgb.r, g = _rgb.g, b = _rgb.b;\n\n\t\tconst max = Math.max( r, g, b );\n\t\tconst min = Math.min( r, g, b );\n\n\t\tlet hue, saturation;\n\t\tconst lightness = ( min + max ) / 2.0;\n\n\t\tif ( min === max ) {\n\n\t\t\thue = 0;\n\t\t\tsaturation = 0;\n\n\t\t} else {\n\n\t\t\tconst delta = max - min;\n\n\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\n\n\t\t\tswitch ( max ) {\n\n\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\n\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\n\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\n\n\t\t\t}\n\n\t\t\thue /= 6;\n\n\t\t}\n\n\t\ttarget.h = hue;\n\t\ttarget.s = saturation;\n\t\ttarget.l = lightness;\n\n\t\treturn target;\n\n\t}\n\n\tgetRGB( target, colorSpace = LinearSRGBColorSpace ) {\n\n\t\tColorManagement.fromWorkingColorSpace( toComponents( this, _rgb ), colorSpace );\n\n\t\ttarget.r = _rgb.r;\n\t\ttarget.g = _rgb.g;\n\t\ttarget.b = _rgb.b;\n\n\t\treturn target;\n\n\t}\n\n\tgetStyle( colorSpace = SRGBColorSpace ) {\n\n\t\tColorManagement.fromWorkingColorSpace( toComponents( this, _rgb ), colorSpace );\n\n\t\tif ( colorSpace !== SRGBColorSpace ) {\n\n\t\t\t// Requires CSS Color Module Level 4 (https://www.w3.org/TR/css-color-4/).\n\t\t\treturn `color(${ colorSpace } ${ _rgb.r } ${ _rgb.g } ${ _rgb.b })`;\n\n\t\t}\n\n\t\treturn `rgb(${( _rgb.r * 255 ) | 0},${( _rgb.g * 255 ) | 0},${( _rgb.b * 255 ) | 0})`;\n\n\t}\n\n\toffsetHSL( h, s, l ) {\n\n\t\tthis.getHSL( _hslA );\n\n\t\t_hslA.h += h; _hslA.s += s; _hslA.l += l;\n\n\t\tthis.setHSL( _hslA.h, _hslA.s, _hslA.l );\n\n\t\treturn this;\n\n\t}\n\n\tadd( color ) {\n\n\t\tthis.r += color.r;\n\t\tthis.g += color.g;\n\t\tthis.b += color.b;\n\n\t\treturn this;\n\n\t}\n\n\taddColors( color1, color2 ) {\n\n\t\tthis.r = color1.r + color2.r;\n\t\tthis.g = color1.g + color2.g;\n\t\tthis.b = color1.b + color2.b;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.r += s;\n\t\tthis.g += s;\n\t\tthis.b += s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( color ) {\n\n\t\tthis.r = Math.max( 0, this.r - color.r );\n\t\tthis.g = Math.max( 0, this.g - color.g );\n\t\tthis.b = Math.max( 0, this.b - color.b );\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( color ) {\n\n\t\tthis.r *= color.r;\n\t\tthis.g *= color.g;\n\t\tthis.b *= color.b;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tthis.r *= s;\n\t\tthis.g *= s;\n\t\tthis.b *= s;\n\n\t\treturn this;\n\n\t}\n\n\tlerp( color, alpha ) {\n\n\t\tthis.r += ( color.r - this.r ) * alpha;\n\t\tthis.g += ( color.g - this.g ) * alpha;\n\t\tthis.b += ( color.b - this.b ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpColors( color1, color2, alpha ) {\n\n\t\tthis.r = color1.r + ( color2.r - color1.r ) * alpha;\n\t\tthis.g = color1.g + ( color2.g - color1.g ) * alpha;\n\t\tthis.b = color1.b + ( color2.b - color1.b ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpHSL( color, alpha ) {\n\n\t\tthis.getHSL( _hslA );\n\t\tcolor.getHSL( _hslB );\n\n\t\tconst h = lerp( _hslA.h, _hslB.h, alpha );\n\t\tconst s = lerp( _hslA.s, _hslB.s, alpha );\n\t\tconst l = lerp( _hslA.l, _hslB.l, alpha );\n\n\t\tthis.setHSL( h, s, l );\n\n\t\treturn this;\n\n\t}\n\n\tequals( c ) {\n\n\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.r = array[ offset ];\n\t\tthis.g = array[ offset + 1 ];\n\t\tthis.b = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.r;\n\t\tarray[ offset + 1 ] = this.g;\n\t\tarray[ offset + 2 ] = this.b;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis.r = attribute.getX( index );\n\t\tthis.g = attribute.getY( index );\n\t\tthis.b = attribute.getZ( index );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\treturn this.getHex();\n\n\t}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this.r;\n\t\tyield this.g;\n\t\tyield this.b;\n\n\t}\n\n}\n\nColor.NAMES = _colorKeywords;\n\nlet _canvas;\n\nclass ImageUtils {\n\n\tstatic getDataURL( image ) {\n\n\t\tif ( /^data:/i.test( image.src ) ) {\n\n\t\t\treturn image.src;\n\n\t\t}\n\n\t\tif ( typeof HTMLCanvasElement == 'undefined' ) {\n\n\t\t\treturn image.src;\n\n\t\t}\n\n\t\tlet canvas;\n\n\t\tif ( image instanceof HTMLCanvasElement ) {\n\n\t\t\tcanvas = image;\n\n\t\t} else {\n\n\t\t\tif ( _canvas === undefined ) _canvas = createElementNS( 'canvas' );\n\n\t\t\t_canvas.width = image.width;\n\t\t\t_canvas.height = image.height;\n\n\t\t\tconst context = _canvas.getContext( '2d' );\n\n\t\t\tif ( image instanceof ImageData ) {\n\n\t\t\t\tcontext.putImageData( image, 0, 0 );\n\n\t\t\t} else {\n\n\t\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height );\n\n\t\t\t}\n\n\t\t\tcanvas = _canvas;\n\n\t\t}\n\n\t\tif ( canvas.width > 2048 || canvas.height > 2048 ) {\n\n\t\t\tconsole.warn( 'THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons', image );\n\n\t\t\treturn canvas.toDataURL( 'image/jpeg', 0.6 );\n\n\t\t} else {\n\n\t\t\treturn canvas.toDataURL( 'image/png' );\n\n\t\t}\n\n\t}\n\n\tstatic sRGBToLinear( image ) {\n\n\t\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\n\t\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\n\t\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\n\n\t\t\tconst canvas = createElementNS( 'canvas' );\n\n\t\t\tcanvas.width = image.width;\n\t\t\tcanvas.height = image.height;\n\n\t\t\tconst context = canvas.getContext( '2d' );\n\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height );\n\n\t\t\tconst imageData = context.getImageData( 0, 0, image.width, image.height );\n\t\t\tconst data = imageData.data;\n\n\t\t\tfor ( let i = 0; i < data.length; i ++ ) {\n\n\t\t\t\tdata[ i ] = SRGBToLinear( data[ i ] / 255 ) * 255;\n\n\t\t\t}\n\n\t\t\tcontext.putImageData( imageData, 0, 0 );\n\n\t\t\treturn canvas;\n\n\t\t} else if ( image.data ) {\n\n\t\t\tconst data = image.data.slice( 0 );\n\n\t\t\tfor ( let i = 0; i < data.length; i ++ ) {\n\n\t\t\t\tif ( data instanceof Uint8Array || data instanceof Uint8ClampedArray ) {\n\n\t\t\t\t\tdata[ i ] = Math.floor( SRGBToLinear( data[ i ] / 255 ) * 255 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// assuming float\n\n\t\t\t\t\tdata[ i ] = SRGBToLinear( data[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tdata: data,\n\t\t\t\twidth: image.width,\n\t\t\t\theight: image.height\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied.' );\n\t\t\treturn image;\n\n\t\t}\n\n\t}\n\n}\n\nclass Source {\n\n\tconstructor( data = null ) {\n\n\t\tthis.isSource = true;\n\n\t\tthis.uuid = generateUUID();\n\n\t\tthis.data = data;\n\n\t\tthis.version = 0;\n\n\t}\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( ! isRootObject && meta.images[ this.uuid ] !== undefined ) {\n\n\t\t\treturn meta.images[ this.uuid ];\n\n\t\t}\n\n\t\tconst output = {\n\t\t\tuuid: this.uuid,\n\t\t\turl: ''\n\t\t};\n\n\t\tconst data = this.data;\n\n\t\tif ( data !== null ) {\n\n\t\t\tlet url;\n\n\t\t\tif ( Array.isArray( data ) ) {\n\n\t\t\t\t// cube texture\n\n\t\t\t\turl = [];\n\n\t\t\t\tfor ( let i = 0, l = data.length; i < l; i ++ ) {\n\n\t\t\t\t\tif ( data[ i ].isDataTexture ) {\n\n\t\t\t\t\t\turl.push( serializeImage( data[ i ].image ) );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\turl.push( serializeImage( data[ i ] ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// texture\n\n\t\t\t\turl = serializeImage( data );\n\n\t\t\t}\n\n\t\t\toutput.url = url;\n\n\t\t}\n\n\t\tif ( ! isRootObject ) {\n\n\t\t\tmeta.images[ this.uuid ] = output;\n\n\t\t}\n\n\t\treturn output;\n\n\t}\n\n}\n\nfunction serializeImage( image ) {\n\n\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\n\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\n\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\n\n\t\t// default images\n\n\t\treturn ImageUtils.getDataURL( image );\n\n\t} else {\n\n\t\tif ( image.data ) {\n\n\t\t\t// images of DataTexture\n\n\t\t\treturn {\n\t\t\t\tdata: Array.from( image.data ),\n\t\t\t\twidth: image.width,\n\t\t\t\theight: image.height,\n\t\t\t\ttype: image.data.constructor.name\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Texture: Unable to serialize Texture.' );\n\t\t\treturn {};\n\n\t\t}\n\n\t}\n\n}\n\nlet textureId = 0;\n\nclass Texture extends EventDispatcher {\n\n\tconstructor( image = Texture.DEFAULT_IMAGE, mapping = Texture.DEFAULT_MAPPING, wrapS = ClampToEdgeWrapping, wrapT = ClampToEdgeWrapping, magFilter = LinearFilter, minFilter = LinearMipmapLinearFilter, format = RGBAFormat, type = UnsignedByteType, anisotropy = 1, encoding = LinearEncoding ) {\n\n\t\tsuper();\n\n\t\tthis.isTexture = true;\n\n\t\tObject.defineProperty( this, 'id', { value: textureId ++ } );\n\n\t\tthis.uuid = generateUUID();\n\n\t\tthis.name = '';\n\n\t\tthis.source = new Source( image );\n\t\tthis.mipmaps = [];\n\n\t\tthis.mapping = mapping;\n\n\t\tthis.wrapS = wrapS;\n\t\tthis.wrapT = wrapT;\n\n\t\tthis.magFilter = magFilter;\n\t\tthis.minFilter = minFilter;\n\n\t\tthis.anisotropy = anisotropy;\n\n\t\tthis.format = format;\n\t\tthis.internalFormat = null;\n\t\tthis.type = type;\n\n\t\tthis.offset = new Vector2( 0, 0 );\n\t\tthis.repeat = new Vector2( 1, 1 );\n\t\tthis.center = new Vector2( 0, 0 );\n\t\tthis.rotation = 0;\n\n\t\tthis.matrixAutoUpdate = true;\n\t\tthis.matrix = new Matrix3();\n\n\t\tthis.generateMipmaps = true;\n\t\tthis.premultiplyAlpha = false;\n\t\tthis.flipY = true;\n\t\tthis.unpackAlignment = 4;\t// valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\n\n\t\t// Values of encoding !== THREE.LinearEncoding only supported on map, envMap and emissiveMap.\n\t\t//\n\t\t// Also changing the encoding after already used by a Material will not automatically make the Material\n\t\t// update. You need to explicitly call Material.needsUpdate to trigger it to recompile.\n\t\tthis.encoding = encoding;\n\n\t\tthis.userData = {};\n\n\t\tthis.version = 0;\n\t\tthis.onUpdate = null;\n\n\t\tthis.isRenderTargetTexture = false; // indicates whether a texture belongs to a render target or not\n\t\tthis.needsPMREMUpdate = false; // indicates whether this texture should be processed by PMREMGenerator or not (only relevant for render target textures)\n\n\t}\n\n\tget image() {\n\n\t\treturn this.source.data;\n\n\t}\n\n\tset image( value ) {\n\n\t\tthis.source.data = value;\n\n\t}\n\n\tupdateMatrix() {\n\n\t\tthis.matrix.setUvTransform( this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.source = source.source;\n\t\tthis.mipmaps = source.mipmaps.slice( 0 );\n\n\t\tthis.mapping = source.mapping;\n\n\t\tthis.wrapS = source.wrapS;\n\t\tthis.wrapT = source.wrapT;\n\n\t\tthis.magFilter = source.magFilter;\n\t\tthis.minFilter = source.minFilter;\n\n\t\tthis.anisotropy = source.anisotropy;\n\n\t\tthis.format = source.format;\n\t\tthis.internalFormat = source.internalFormat;\n\t\tthis.type = source.type;\n\n\t\tthis.offset.copy( source.offset );\n\t\tthis.repeat.copy( source.repeat );\n\t\tthis.center.copy( source.center );\n\t\tthis.rotation = source.rotation;\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrix.copy( source.matrix );\n\n\t\tthis.generateMipmaps = source.generateMipmaps;\n\t\tthis.premultiplyAlpha = source.premultiplyAlpha;\n\t\tthis.flipY = source.flipY;\n\t\tthis.unpackAlignment = source.unpackAlignment;\n\t\tthis.encoding = source.encoding;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\tthis.needsUpdate = true;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( ! isRootObject && meta.textures[ this.uuid ] !== undefined ) {\n\n\t\t\treturn meta.textures[ this.uuid ];\n\n\t\t}\n\n\t\tconst output = {\n\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Texture',\n\t\t\t\tgenerator: 'Texture.toJSON'\n\t\t\t},\n\n\t\t\tuuid: this.uuid,\n\t\t\tname: this.name,\n\n\t\t\timage: this.source.toJSON( meta ).uuid,\n\n\t\t\tmapping: this.mapping,\n\n\t\t\trepeat: [ this.repeat.x, this.repeat.y ],\n\t\t\toffset: [ this.offset.x, this.offset.y ],\n\t\t\tcenter: [ this.center.x, this.center.y ],\n\t\t\trotation: this.rotation,\n\n\t\t\twrap: [ this.wrapS, this.wrapT ],\n\n\t\t\tformat: this.format,\n\t\t\ttype: this.type,\n\t\t\tencoding: this.encoding,\n\n\t\t\tminFilter: this.minFilter,\n\t\t\tmagFilter: this.magFilter,\n\t\t\tanisotropy: this.anisotropy,\n\n\t\t\tflipY: this.flipY,\n\n\t\t\tpremultiplyAlpha: this.premultiplyAlpha,\n\t\t\tunpackAlignment: this.unpackAlignment\n\n\t\t};\n\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) output.userData = this.userData;\n\n\t\tif ( ! isRootObject ) {\n\n\t\t\tmeta.textures[ this.uuid ] = output;\n\n\t\t}\n\n\t\treturn output;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n\ttransformUv( uv ) {\n\n\t\tif ( this.mapping !== UVMapping ) return uv;\n\n\t\tuv.applyMatrix3( this.matrix );\n\n\t\tif ( uv.x < 0 || uv.x > 1 ) {\n\n\t\t\tswitch ( this.wrapS ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.x = uv.x < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.x ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.x = Math.ceil( uv.x ) - uv.x;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( uv.y < 0 || uv.y > 1 ) {\n\n\t\t\tswitch ( this.wrapT ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.y = uv.y < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.y ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.y = Math.ceil( uv.y ) - uv.y;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.flipY ) {\n\n\t\t\tuv.y = 1 - uv.y;\n\n\t\t}\n\n\t\treturn uv;\n\n\t}\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) {\n\n\t\t\tthis.version ++;\n\t\t\tthis.source.needsUpdate = true;\n\n\t\t}\n\n\t}\n\n}\n\nTexture.DEFAULT_IMAGE = null;\nTexture.DEFAULT_MAPPING = UVMapping;\n\nclass Vector4 {\n\n\tconstructor( x = 0, y = 0, z = 0, w = 1 ) {\n\n\t\tVector4.prototype.isVector4 = true;\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t}\n\n\tget width() {\n\n\t\treturn this.z;\n\n\t}\n\n\tset width( value ) {\n\n\t\tthis.z = value;\n\n\t}\n\n\tget height() {\n\n\t\treturn this.w;\n\n\t}\n\n\tset height( value ) {\n\n\t\tthis.w = value;\n\n\t}\n\n\tset( x, y, z, w ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\t\tthis.w = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetZ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetW( w ) {\n\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tcase 3: this.w = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tcase 3: return this.w;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v ) {\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\t\tthis.w += v.w;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\t\tthis.w += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\t\tthis.w = a.w + b.w;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\t\tthis.w += v.w * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v ) {\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\t\tthis.w -= v.w;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\t\tthis.w -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\t\tthis.w = a.w - b.w;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\t\tthis.w *= v.w;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\t\tthis.w *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z, w = this.w;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tsetAxisAngleFromQuaternion( q ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\n\n\t\t// q is assumed to be normalized\n\n\t\tthis.w = 2 * Math.acos( q.w );\n\n\t\tconst s = Math.sqrt( 1 - q.w * q.w );\n\n\t\tif ( s < 0.0001 ) {\n\n\t\t\tthis.x = 1;\n\t\t\tthis.y = 0;\n\t\t\tthis.z = 0;\n\n\t\t} else {\n\n\t\t\tthis.x = q.x / s;\n\t\t\tthis.y = q.y / s;\n\t\t\tthis.z = q.z / s;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetAxisAngleFromRotationMatrix( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tlet angle, x, y, z; // variables for result\n\t\tconst epsilon = 0.01,\t\t// margin to allow for rounding errors\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\n\n\t\t\tte = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon ) &&\n\t\t     ( Math.abs( m13 - m31 ) < epsilon ) &&\n\t\t     ( Math.abs( m23 - m32 ) < epsilon ) ) {\n\n\t\t\t// singularity found\n\t\t\t// first check for identity matrix which must have +1 for all terms\n\t\t\t// in leading diagonal and zero in other terms\n\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m13 + m31 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m23 + m32 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\n\n\t\t\t\t// this singularity is identity matrix so angle = 0\n\n\t\t\t\tthis.set( 1, 0, 0, 0 );\n\n\t\t\t\treturn this; // zero angle, arbitrary axis\n\n\t\t\t}\n\n\t\t\t// otherwise this singularity is angle = 180\n\n\t\t\tangle = Math.PI;\n\n\t\t\tconst xx = ( m11 + 1 ) / 2;\n\t\t\tconst yy = ( m22 + 1 ) / 2;\n\t\t\tconst zz = ( m33 + 1 ) / 2;\n\t\t\tconst xy = ( m12 + m21 ) / 4;\n\t\t\tconst xz = ( m13 + m31 ) / 4;\n\t\t\tconst yz = ( m23 + m32 ) / 4;\n\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\n\n\t\t\t\t// m11 is the largest diagonal term\n\n\t\t\t\tif ( xx < epsilon ) {\n\n\t\t\t\t\tx = 0;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tx = Math.sqrt( xx );\n\t\t\t\t\ty = xy / x;\n\t\t\t\t\tz = xz / x;\n\n\t\t\t\t}\n\n\t\t\t} else if ( yy > zz ) {\n\n\t\t\t\t// m22 is the largest diagonal term\n\n\t\t\t\tif ( yy < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ty = Math.sqrt( yy );\n\t\t\t\t\tx = xy / y;\n\t\t\t\t\tz = yz / y;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// m33 is the largest diagonal term so base result on this\n\n\t\t\t\tif ( zz < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tz = Math.sqrt( zz );\n\t\t\t\t\tx = xz / z;\n\t\t\t\t\ty = yz / z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.set( x, y, z, angle );\n\n\t\t\treturn this; // return 180 deg rotation\n\n\t\t}\n\n\t\t// as we have reached here there are no singularities so we can handle normally\n\n\t\tlet s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 ) +\n\t\t\t( m13 - m31 ) * ( m13 - m31 ) +\n\t\t\t( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\n\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\n\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\n\t\t// caught by singularity test above, but I've left it in just in case\n\n\t\tthis.x = ( m32 - m23 ) / s;\n\t\tthis.y = ( m13 - m31 ) / s;\n\t\tthis.z = ( m21 - m12 ) / s;\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\n\n\t\treturn this;\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\t\tthis.w = Math.min( this.w, v.w );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\t\tthis.w = Math.max( this.w, v.w );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\t\tthis.w = Math.max( min.w, Math.min( max.w, this.w ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\t\tthis.w = Math.max( minVal, Math.min( maxVal, this.w ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\t\tthis.w = Math.floor( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\t\tthis.w = Math.ceil( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\t\tthis.w = Math.round( this.w );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\t\tthis.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\t\tthis.w = - this.w;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\t\tthis.w += ( v.w - this.w ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\t\tthis.z = v1.z + ( v2.z - v1.z ) * alpha;\n\t\tthis.w = v1.w + ( v2.w - v1.w ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\t\tthis.w = array[ offset + 3 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\t\tarray[ offset + 3 ] = this.w;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\t\tthis.w = attribute.getW( index );\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\t\tthis.z = Math.random();\n\t\tthis.w = Math.random();\n\n\t\treturn this;\n\n\t}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this.x;\n\t\tyield this.y;\n\t\tyield this.z;\n\t\tyield this.w;\n\n\t}\n\n}\n\n/*\n In options, we can specify:\n * Texture parameters for an auto-generated target texture\n * depthBuffer/stencilBuffer: Booleans to indicate if we should generate these buffers\n*/\nclass WebGLRenderTarget extends EventDispatcher {\n\n\tconstructor( width, height, options = {} ) {\n\n\t\tsuper();\n\n\t\tthis.isWebGLRenderTarget = true;\n\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.depth = 1;\n\n\t\tthis.scissor = new Vector4( 0, 0, width, height );\n\t\tthis.scissorTest = false;\n\n\t\tthis.viewport = new Vector4( 0, 0, width, height );\n\n\t\tconst image = { width: width, height: height, depth: 1 };\n\n\t\tthis.texture = new Texture( image, options.mapping, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding );\n\t\tthis.texture.isRenderTargetTexture = true;\n\n\t\tthis.texture.flipY = false;\n\t\tthis.texture.generateMipmaps = options.generateMipmaps !== undefined ? options.generateMipmaps : false;\n\t\tthis.texture.internalFormat = options.internalFormat !== undefined ? options.internalFormat : null;\n\t\tthis.texture.minFilter = options.minFilter !== undefined ? options.minFilter : LinearFilter;\n\n\t\tthis.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\n\t\tthis.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : false;\n\n\t\tthis.depthTexture = options.depthTexture !== undefined ? options.depthTexture : null;\n\n\t\tthis.samples = options.samples !== undefined ? options.samples : 0;\n\n\t}\n\n\tsetSize( width, height, depth = 1 ) {\n\n\t\tif ( this.width !== width || this.height !== height || this.depth !== depth ) {\n\n\t\t\tthis.width = width;\n\t\t\tthis.height = height;\n\t\t\tthis.depth = depth;\n\n\t\t\tthis.texture.image.width = width;\n\t\t\tthis.texture.image.height = height;\n\t\t\tthis.texture.image.depth = depth;\n\n\t\t\tthis.dispose();\n\n\t\t}\n\n\t\tthis.viewport.set( 0, 0, width, height );\n\t\tthis.scissor.set( 0, 0, width, height );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\t\tthis.depth = source.depth;\n\n\t\tthis.viewport.copy( source.viewport );\n\n\t\tthis.texture = source.texture.clone();\n\t\tthis.texture.isRenderTargetTexture = true;\n\n\t\t// ensure image object is not shared, see #20328\n\n\t\tconst image = Object.assign( {}, source.texture.image );\n\t\tthis.texture.source = new Source( image );\n\n\t\tthis.depthBuffer = source.depthBuffer;\n\t\tthis.stencilBuffer = source.stencilBuffer;\n\n\t\tif ( source.depthTexture !== null ) this.depthTexture = source.depthTexture.clone();\n\n\t\tthis.samples = source.samples;\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n}\n\nclass DataArrayTexture extends Texture {\n\n\tconstructor( data = null, width = 1, height = 1, depth = 1 ) {\n\n\t\tsuper( null );\n\n\t\tthis.isDataArrayTexture = true;\n\n\t\tthis.image = { data, width, height, depth };\n\n\t\tthis.magFilter = NearestFilter;\n\t\tthis.minFilter = NearestFilter;\n\n\t\tthis.wrapR = ClampToEdgeWrapping;\n\n\t\tthis.generateMipmaps = false;\n\t\tthis.flipY = false;\n\t\tthis.unpackAlignment = 1;\n\n\t}\n\n}\n\nclass WebGLArrayRenderTarget extends WebGLRenderTarget {\n\n\tconstructor( width, height, depth ) {\n\n\t\tsuper( width, height );\n\n\t\tthis.isWebGLArrayRenderTarget = true;\n\n\t\tthis.depth = depth;\n\n\t\tthis.texture = new DataArrayTexture( null, width, height, depth );\n\n\t\tthis.texture.isRenderTargetTexture = true;\n\n\t}\n\n}\n\nclass Data3DTexture extends Texture {\n\n\tconstructor( data = null, width = 1, height = 1, depth = 1 ) {\n\n\t\t// We're going to add .setXXX() methods for setting properties later.\n\t\t// Users can still set in DataTexture3D directly.\n\t\t//\n\t\t//\tconst texture = new THREE.DataTexture3D( data, width, height, depth );\n\t\t// \ttexture.anisotropy = 16;\n\t\t//\n\t\t// See #14839\n\n\t\tsuper( null );\n\n\t\tthis.isData3DTexture = true;\n\n\t\tthis.image = { data, width, height, depth };\n\n\t\tthis.magFilter = NearestFilter;\n\t\tthis.minFilter = NearestFilter;\n\n\t\tthis.wrapR = ClampToEdgeWrapping;\n\n\t\tthis.generateMipmaps = false;\n\t\tthis.flipY = false;\n\t\tthis.unpackAlignment = 1;\n\n\t}\n\n}\n\nclass WebGL3DRenderTarget extends WebGLRenderTarget {\n\n\tconstructor( width, height, depth ) {\n\n\t\tsuper( width, height );\n\n\t\tthis.isWebGL3DRenderTarget = true;\n\n\t\tthis.depth = depth;\n\n\t\tthis.texture = new Data3DTexture( null, width, height, depth );\n\n\t\tthis.texture.isRenderTargetTexture = true;\n\n\t}\n\n}\n\nclass WebGLMultipleRenderTargets extends WebGLRenderTarget {\n\n\tconstructor( width, height, count, options = {} ) {\n\n\t\tsuper( width, height, options );\n\n\t\tthis.isWebGLMultipleRenderTargets = true;\n\n\t\tconst texture = this.texture;\n\n\t\tthis.texture = [];\n\n\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\tthis.texture[ i ] = texture.clone();\n\t\t\tthis.texture[ i ].isRenderTargetTexture = true;\n\n\t\t}\n\n\t}\n\n\tsetSize( width, height, depth = 1 ) {\n\n\t\tif ( this.width !== width || this.height !== height || this.depth !== depth ) {\n\n\t\t\tthis.width = width;\n\t\t\tthis.height = height;\n\t\t\tthis.depth = depth;\n\n\t\t\tfor ( let i = 0, il = this.texture.length; i < il; i ++ ) {\n\n\t\t\t\tthis.texture[ i ].image.width = width;\n\t\t\t\tthis.texture[ i ].image.height = height;\n\t\t\t\tthis.texture[ i ].image.depth = depth;\n\n\t\t\t}\n\n\t\t\tthis.dispose();\n\n\t\t}\n\n\t\tthis.viewport.set( 0, 0, width, height );\n\t\tthis.scissor.set( 0, 0, width, height );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.dispose();\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\t\tthis.depth = source.depth;\n\n\t\tthis.viewport.set( 0, 0, this.width, this.height );\n\t\tthis.scissor.set( 0, 0, this.width, this.height );\n\n\t\tthis.depthBuffer = source.depthBuffer;\n\t\tthis.stencilBuffer = source.stencilBuffer;\n\n\t\tif ( source.depthTexture !== null ) this.depthTexture = source.depthTexture.clone();\n\n\t\tthis.texture.length = 0;\n\n\t\tfor ( let i = 0, il = source.texture.length; i < il; i ++ ) {\n\n\t\t\tthis.texture[ i ] = source.texture[ i ].clone();\n\t\t\tthis.texture[ i ].isRenderTargetTexture = true;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass Quaternion {\n\n\tconstructor( x = 0, y = 0, z = 0, w = 1 ) {\n\n\t\tthis.isQuaternion = true;\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t}\n\n\tstatic slerpFlat( dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\n\n\t\t// fuzz-free, array-based Quaternion SLERP operation\n\n\t\tlet x0 = src0[ srcOffset0 + 0 ],\n\t\t\ty0 = src0[ srcOffset0 + 1 ],\n\t\t\tz0 = src0[ srcOffset0 + 2 ],\n\t\t\tw0 = src0[ srcOffset0 + 3 ];\n\n\t\tconst x1 = src1[ srcOffset1 + 0 ],\n\t\t\ty1 = src1[ srcOffset1 + 1 ],\n\t\t\tz1 = src1[ srcOffset1 + 2 ],\n\t\t\tw1 = src1[ srcOffset1 + 3 ];\n\n\t\tif ( t === 0 ) {\n\n\t\t\tdst[ dstOffset + 0 ] = x0;\n\t\t\tdst[ dstOffset + 1 ] = y0;\n\t\t\tdst[ dstOffset + 2 ] = z0;\n\t\t\tdst[ dstOffset + 3 ] = w0;\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( t === 1 ) {\n\n\t\t\tdst[ dstOffset + 0 ] = x1;\n\t\t\tdst[ dstOffset + 1 ] = y1;\n\t\t\tdst[ dstOffset + 2 ] = z1;\n\t\t\tdst[ dstOffset + 3 ] = w1;\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\n\n\t\t\tlet s = 1 - t;\n\t\t\tconst cos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\n\t\t\t\tdir = ( cos >= 0 ? 1 : - 1 ),\n\t\t\t\tsqrSin = 1 - cos * cos;\n\n\t\t\t// Skip the Slerp for tiny steps to avoid numeric problems:\n\t\t\tif ( sqrSin > Number.EPSILON ) {\n\n\t\t\t\tconst sin = Math.sqrt( sqrSin ),\n\t\t\t\t\tlen = Math.atan2( sin, cos * dir );\n\n\t\t\t\ts = Math.sin( s * len ) / sin;\n\t\t\t\tt = Math.sin( t * len ) / sin;\n\n\t\t\t}\n\n\t\t\tconst tDir = t * dir;\n\n\t\t\tx0 = x0 * s + x1 * tDir;\n\t\t\ty0 = y0 * s + y1 * tDir;\n\t\t\tz0 = z0 * s + z1 * tDir;\n\t\t\tw0 = w0 * s + w1 * tDir;\n\n\t\t\t// Normalize in case we just did a lerp:\n\t\t\tif ( s === 1 - t ) {\n\n\t\t\t\tconst f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\n\n\t\t\t\tx0 *= f;\n\t\t\t\ty0 *= f;\n\t\t\t\tz0 *= f;\n\t\t\t\tw0 *= f;\n\n\t\t\t}\n\n\t\t}\n\n\t\tdst[ dstOffset ] = x0;\n\t\tdst[ dstOffset + 1 ] = y0;\n\t\tdst[ dstOffset + 2 ] = z0;\n\t\tdst[ dstOffset + 3 ] = w0;\n\n\t}\n\n\tstatic multiplyQuaternionsFlat( dst, dstOffset, src0, srcOffset0, src1, srcOffset1 ) {\n\n\t\tconst x0 = src0[ srcOffset0 ];\n\t\tconst y0 = src0[ srcOffset0 + 1 ];\n\t\tconst z0 = src0[ srcOffset0 + 2 ];\n\t\tconst w0 = src0[ srcOffset0 + 3 ];\n\n\t\tconst x1 = src1[ srcOffset1 ];\n\t\tconst y1 = src1[ srcOffset1 + 1 ];\n\t\tconst z1 = src1[ srcOffset1 + 2 ];\n\t\tconst w1 = src1[ srcOffset1 + 3 ];\n\n\t\tdst[ dstOffset ] = x0 * w1 + w0 * x1 + y0 * z1 - z0 * y1;\n\t\tdst[ dstOffset + 1 ] = y0 * w1 + w0 * y1 + z0 * x1 - x0 * z1;\n\t\tdst[ dstOffset + 2 ] = z0 * w1 + w0 * z1 + x0 * y1 - y0 * x1;\n\t\tdst[ dstOffset + 3 ] = w0 * w1 - x0 * x1 - y0 * y1 - z0 * z1;\n\n\t\treturn dst;\n\n\t}\n\n\tget x() {\n\n\t\treturn this._x;\n\n\t}\n\n\tset x( value ) {\n\n\t\tthis._x = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget y() {\n\n\t\treturn this._y;\n\n\t}\n\n\tset y( value ) {\n\n\t\tthis._y = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget z() {\n\n\t\treturn this._z;\n\n\t}\n\n\tset z( value ) {\n\n\t\tthis._z = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget w() {\n\n\t\treturn this._w;\n\n\t}\n\n\tset w( value ) {\n\n\t\tthis._w = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tset( x, y, z, w ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\n\n\t}\n\n\tcopy( quaternion ) {\n\n\t\tthis._x = quaternion.x;\n\t\tthis._y = quaternion.y;\n\t\tthis._z = quaternion.z;\n\t\tthis._w = quaternion.w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromEuler( euler, update ) {\n\n\t\tconst x = euler._x, y = euler._y, z = euler._z, order = euler._order;\n\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n\t\t//\tcontent/SpinCalc.m\n\n\t\tconst cos = Math.cos;\n\t\tconst sin = Math.sin;\n\n\t\tconst c1 = cos( x / 2 );\n\t\tconst c2 = cos( y / 2 );\n\t\tconst c3 = cos( z / 2 );\n\n\t\tconst s1 = sin( x / 2 );\n\t\tconst s2 = sin( y / 2 );\n\t\tconst s3 = sin( z / 2 );\n\n\t\tswitch ( order ) {\n\n\t\t\tcase 'XYZ':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YXZ':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZXY':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZYX':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YZX':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'XZY':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.warn( 'THREE.Quaternion: .setFromEuler() encountered an unknown order: ' + order );\n\n\t\t}\n\n\t\tif ( update !== false ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromAxisAngle( axis, angle ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n\n\t\t// assumes axis is normalized\n\n\t\tconst halfAngle = angle / 2, s = Math.sin( halfAngle );\n\n\t\tthis._x = axis.x * s;\n\t\tthis._y = axis.y * s;\n\t\tthis._z = axis.z * s;\n\t\tthis._w = Math.cos( halfAngle );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromRotationMatrix( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tconst te = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\n\n\t\t\ttrace = m11 + m22 + m33;\n\n\t\tif ( trace > 0 ) {\n\n\t\t\tconst s = 0.5 / Math.sqrt( trace + 1.0 );\n\n\t\t\tthis._w = 0.25 / s;\n\t\t\tthis._x = ( m32 - m23 ) * s;\n\t\t\tthis._y = ( m13 - m31 ) * s;\n\t\t\tthis._z = ( m21 - m12 ) * s;\n\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\n\n\t\t\tthis._w = ( m32 - m23 ) / s;\n\t\t\tthis._x = 0.25 * s;\n\t\t\tthis._y = ( m12 + m21 ) / s;\n\t\t\tthis._z = ( m13 + m31 ) / s;\n\n\t\t} else if ( m22 > m33 ) {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\n\n\t\t\tthis._w = ( m13 - m31 ) / s;\n\t\t\tthis._x = ( m12 + m21 ) / s;\n\t\t\tthis._y = 0.25 * s;\n\t\t\tthis._z = ( m23 + m32 ) / s;\n\n\t\t} else {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\n\n\t\t\tthis._w = ( m21 - m12 ) / s;\n\t\t\tthis._x = ( m13 + m31 ) / s;\n\t\t\tthis._y = ( m23 + m32 ) / s;\n\t\t\tthis._z = 0.25 * s;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromUnitVectors( vFrom, vTo ) {\n\n\t\t// assumes direction vectors vFrom and vTo are normalized\n\n\t\tlet r = vFrom.dot( vTo ) + 1;\n\n\t\tif ( r < Number.EPSILON ) {\n\n\t\t\t// vFrom and vTo point in opposite directions\n\n\t\t\tr = 0;\n\n\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\n\n\t\t\t\tthis._x = - vFrom.y;\n\t\t\t\tthis._y = vFrom.x;\n\t\t\t\tthis._z = 0;\n\t\t\t\tthis._w = r;\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._y = - vFrom.z;\n\t\t\t\tthis._z = vFrom.y;\n\t\t\t\tthis._w = r;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// crossVectors( vFrom, vTo ); // inlined to avoid cyclic dependency on Vector3\n\n\t\t\tthis._x = vFrom.y * vTo.z - vFrom.z * vTo.y;\n\t\t\tthis._y = vFrom.z * vTo.x - vFrom.x * vTo.z;\n\t\t\tthis._z = vFrom.x * vTo.y - vFrom.y * vTo.x;\n\t\t\tthis._w = r;\n\n\t\t}\n\n\t\treturn this.normalize();\n\n\t}\n\n\tangleTo( q ) {\n\n\t\treturn 2 * Math.acos( Math.abs( clamp( this.dot( q ), - 1, 1 ) ) );\n\n\t}\n\n\trotateTowards( q, step ) {\n\n\t\tconst angle = this.angleTo( q );\n\n\t\tif ( angle === 0 ) return this;\n\n\t\tconst t = Math.min( 1, step / angle );\n\n\t\tthis.slerp( q, t );\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\treturn this.set( 0, 0, 0, 1 );\n\n\t}\n\n\tinvert() {\n\n\t\t// quaternion is assumed to have unit length\n\n\t\treturn this.conjugate();\n\n\t}\n\n\tconjugate() {\n\n\t\tthis._x *= - 1;\n\t\tthis._y *= - 1;\n\t\tthis._z *= - 1;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\n\n\t}\n\n\tnormalize() {\n\n\t\tlet l = this.length();\n\n\t\tif ( l === 0 ) {\n\n\t\t\tthis._x = 0;\n\t\t\tthis._y = 0;\n\t\t\tthis._z = 0;\n\t\t\tthis._w = 1;\n\n\t\t} else {\n\n\t\t\tl = 1 / l;\n\n\t\t\tthis._x = this._x * l;\n\t\t\tthis._y = this._y * l;\n\t\t\tthis._z = this._z * l;\n\t\t\tthis._w = this._w * l;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( q ) {\n\n\t\treturn this.multiplyQuaternions( this, q );\n\n\t}\n\n\tpremultiply( q ) {\n\n\t\treturn this.multiplyQuaternions( q, this );\n\n\t}\n\n\tmultiplyQuaternions( a, b ) {\n\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n\n\t\tconst qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\n\t\tconst qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\n\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tslerp( qb, t ) {\n\n\t\tif ( t === 0 ) return this;\n\t\tif ( t === 1 ) return this.copy( qb );\n\n\t\tconst x = this._x, y = this._y, z = this._z, w = this._w;\n\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n\n\t\tlet cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\n\n\t\tif ( cosHalfTheta < 0 ) {\n\n\t\t\tthis._w = - qb._w;\n\t\t\tthis._x = - qb._x;\n\t\t\tthis._y = - qb._y;\n\t\t\tthis._z = - qb._z;\n\n\t\t\tcosHalfTheta = - cosHalfTheta;\n\n\t\t} else {\n\n\t\t\tthis.copy( qb );\n\n\t\t}\n\n\t\tif ( cosHalfTheta >= 1.0 ) {\n\n\t\t\tthis._w = w;\n\t\t\tthis._x = x;\n\t\t\tthis._y = y;\n\t\t\tthis._z = z;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst sqrSinHalfTheta = 1.0 - cosHalfTheta * cosHalfTheta;\n\n\t\tif ( sqrSinHalfTheta <= Number.EPSILON ) {\n\n\t\t\tconst s = 1 - t;\n\t\t\tthis._w = s * w + t * this._w;\n\t\t\tthis._x = s * x + t * this._x;\n\t\t\tthis._y = s * y + t * this._y;\n\t\t\tthis._z = s * z + t * this._z;\n\n\t\t\tthis.normalize();\n\t\t\tthis._onChangeCallback();\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst sinHalfTheta = Math.sqrt( sqrSinHalfTheta );\n\t\tconst halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\n\t\tconst ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\n\t\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\n\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tslerpQuaternions( qa, qb, t ) {\n\n\t\treturn this.copy( qa ).slerp( qb, t );\n\n\t}\n\n\trandom() {\n\n\t\t// Derived from http://planning.cs.uiuc.edu/node198.html\n\t\t// Note, this source uses w, x, y, z ordering,\n\t\t// so we swap the order below.\n\n\t\tconst u1 = Math.random();\n\t\tconst sqrt1u1 = Math.sqrt( 1 - u1 );\n\t\tconst sqrtu1 = Math.sqrt( u1 );\n\n\t\tconst u2 = 2 * Math.PI * Math.random();\n\n\t\tconst u3 = 2 * Math.PI * Math.random();\n\n\t\treturn this.set(\n\t\t\tsqrt1u1 * Math.cos( u2 ),\n\t\t\tsqrtu1 * Math.sin( u3 ),\n\t\t\tsqrtu1 * Math.cos( u3 ),\n\t\t\tsqrt1u1 * Math.sin( u2 ),\n\t\t);\n\n\t}\n\n\tequals( quaternion ) {\n\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis._x = array[ offset ];\n\t\tthis._y = array[ offset + 1 ];\n\t\tthis._z = array[ offset + 2 ];\n\t\tthis._w = array[ offset + 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._w;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis._x = attribute.getX( index );\n\t\tthis._y = attribute.getY( index );\n\t\tthis._z = attribute.getZ( index );\n\t\tthis._w = attribute.getW( index );\n\n\t\treturn this;\n\n\t}\n\n\t_onChange( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\t_onChangeCallback() {}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this._x;\n\t\tyield this._y;\n\t\tyield this._z;\n\t\tyield this._w;\n\n\t}\n\n}\n\nclass Vector3 {\n\n\tconstructor( x = 0, y = 0, z = 0 ) {\n\n\t\tVector3.prototype.isVector3 = true;\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t}\n\n\tset( x, y, z ) {\n\n\t\tif ( z === undefined ) z = this.z; // sprite.scale.set(x,y)\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetZ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y, this.z );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v ) {\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v ) {\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyVectors( a, b ) {\n\n\t\tthis.x = a.x * b.x;\n\t\tthis.y = a.y * b.y;\n\t\tthis.z = a.z * b.z;\n\n\t\treturn this;\n\n\t}\n\n\tapplyEuler( euler ) {\n\n\t\treturn this.applyQuaternion( _quaternion$4.setFromEuler( euler ) );\n\n\t}\n\n\tapplyAxisAngle( axis, angle ) {\n\n\t\treturn this.applyQuaternion( _quaternion$4.setFromAxisAngle( axis, angle ) );\n\n\t}\n\n\tapplyMatrix3( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\n\n\t\treturn this;\n\n\t}\n\n\tapplyNormalMatrix( m ) {\n\n\t\treturn this.applyMatrix3( m ).normalize();\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tconst w = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] );\n\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] ) * w;\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] ) * w;\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * w;\n\n\t\treturn this;\n\n\t}\n\n\tapplyQuaternion( q ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst qx = q.x, qy = q.y, qz = q.z, qw = q.w;\n\n\t\t// calculate quat * vector\n\n\t\tconst ix = qw * x + qy * z - qz * y;\n\t\tconst iy = qw * y + qz * x - qx * z;\n\t\tconst iz = qw * z + qx * y - qy * x;\n\t\tconst iw = - qx * x - qy * y - qz * z;\n\n\t\t// calculate result * inverse quat\n\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\n\n\t\treturn this;\n\n\t}\n\n\tproject( camera ) {\n\n\t\treturn this.applyMatrix4( camera.matrixWorldInverse ).applyMatrix4( camera.projectionMatrix );\n\n\t}\n\n\tunproject( camera ) {\n\n\t\treturn this.applyMatrix4( camera.projectionMatrixInverse ).applyMatrix4( camera.matrixWorld );\n\n\t}\n\n\ttransformDirection( m ) {\n\n\t\t// input: THREE.Matrix4 affine matrix\n\t\t// vector interpreted as a direction\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\n\n\t\treturn this.normalize();\n\n\t}\n\n\tdivide( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\t\tthis.z /= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\n\n\t}\n\n\t// TODO lengthSquared?\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\t\tthis.z = v1.z + ( v2.z - v1.z ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tcross( v ) {\n\n\t\treturn this.crossVectors( this, v );\n\n\t}\n\n\tcrossVectors( a, b ) {\n\n\t\tconst ax = a.x, ay = a.y, az = a.z;\n\t\tconst bx = b.x, by = b.y, bz = b.z;\n\n\t\tthis.x = ay * bz - az * by;\n\t\tthis.y = az * bx - ax * bz;\n\t\tthis.z = ax * by - ay * bx;\n\n\t\treturn this;\n\n\t}\n\n\tprojectOnVector( v ) {\n\n\t\tconst denominator = v.lengthSq();\n\n\t\tif ( denominator === 0 ) return this.set( 0, 0, 0 );\n\n\t\tconst scalar = v.dot( this ) / denominator;\n\n\t\treturn this.copy( v ).multiplyScalar( scalar );\n\n\t}\n\n\tprojectOnPlane( planeNormal ) {\n\n\t\t_vector$c.copy( this ).projectOnVector( planeNormal );\n\n\t\treturn this.sub( _vector$c );\n\n\t}\n\n\treflect( normal ) {\n\n\t\t// reflect incident vector off plane orthogonal to normal\n\t\t// normal is assumed to have unit length\n\n\t\treturn this.sub( _vector$c.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\n\n\t}\n\n\tangleTo( v ) {\n\n\t\tconst denominator = Math.sqrt( this.lengthSq() * v.lengthSq() );\n\n\t\tif ( denominator === 0 ) return Math.PI / 2;\n\n\t\tconst theta = this.dot( v ) / denominator;\n\n\t\t// clamp, to handle numerical problems\n\n\t\treturn Math.acos( clamp( theta, - 1, 1 ) );\n\n\t}\n\n\tdistanceTo( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t}\n\n\tdistanceToSquared( v ) {\n\n\t\tconst dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\n\n\t\treturn dx * dx + dy * dy + dz * dz;\n\n\t}\n\n\tmanhattanDistanceTo( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y ) + Math.abs( this.z - v.z );\n\n\t}\n\n\tsetFromSpherical( s ) {\n\n\t\treturn this.setFromSphericalCoords( s.radius, s.phi, s.theta );\n\n\t}\n\n\tsetFromSphericalCoords( radius, phi, theta ) {\n\n\t\tconst sinPhiRadius = Math.sin( phi ) * radius;\n\n\t\tthis.x = sinPhiRadius * Math.sin( theta );\n\t\tthis.y = Math.cos( phi ) * radius;\n\t\tthis.z = sinPhiRadius * Math.cos( theta );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCylindrical( c ) {\n\n\t\treturn this.setFromCylindricalCoords( c.radius, c.theta, c.y );\n\n\t}\n\n\tsetFromCylindricalCoords( radius, theta, y ) {\n\n\t\tthis.x = radius * Math.sin( theta );\n\t\tthis.y = y;\n\t\tthis.z = radius * Math.cos( theta );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixPosition( m ) {\n\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 12 ];\n\t\tthis.y = e[ 13 ];\n\t\tthis.z = e[ 14 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixScale( m ) {\n\n\t\tconst sx = this.setFromMatrixColumn( m, 0 ).length();\n\t\tconst sy = this.setFromMatrixColumn( m, 1 ).length();\n\t\tconst sz = this.setFromMatrixColumn( m, 2 ).length();\n\n\t\tthis.x = sx;\n\t\tthis.y = sy;\n\t\tthis.z = sz;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixColumn( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 4 );\n\n\t}\n\n\tsetFromMatrix3Column( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 3 );\n\n\t}\n\n\tsetFromEuler( e ) {\n\n\t\tthis.x = e._x;\n\t\tthis.y = e._y;\n\t\tthis.z = e._z;\n\n\t\treturn this;\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\t\tthis.z = Math.random();\n\n\t\treturn this;\n\n\t}\n\n\trandomDirection() {\n\n\t\t// Derived from https://mathworld.wolfram.com/SpherePointPicking.html\n\n\t\tconst u = ( Math.random() - 0.5 ) * 2;\n\t\tconst t = Math.random() * Math.PI * 2;\n\t\tconst f = Math.sqrt( 1 - u ** 2 );\n\n\t\tthis.x = f * Math.cos( t );\n\t\tthis.y = f * Math.sin( t );\n\t\tthis.z = u;\n\n\t\treturn this;\n\n\t}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this.x;\n\t\tyield this.y;\n\t\tyield this.z;\n\n\t}\n\n}\n\nconst _vector$c = /*@__PURE__*/ new Vector3();\nconst _quaternion$4 = /*@__PURE__*/ new Quaternion();\n\nclass Box3 {\n\n\tconstructor( min = new Vector3( + Infinity, + Infinity, + Infinity ), max = new Vector3( - Infinity, - Infinity, - Infinity ) ) {\n\n\t\tthis.isBox3 = true;\n\n\t\tthis.min = min;\n\t\tthis.max = max;\n\n\t}\n\n\tset( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromArray( array ) {\n\n\t\tlet minX = + Infinity;\n\t\tlet minY = + Infinity;\n\t\tlet minZ = + Infinity;\n\n\t\tlet maxX = - Infinity;\n\t\tlet maxY = - Infinity;\n\t\tlet maxZ = - Infinity;\n\n\t\tfor ( let i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\tconst x = array[ i ];\n\t\t\tconst y = array[ i + 1 ];\n\t\t\tconst z = array[ i + 2 ];\n\n\t\t\tif ( x < minX ) minX = x;\n\t\t\tif ( y < minY ) minY = y;\n\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\tif ( x > maxX ) maxX = x;\n\t\t\tif ( y > maxY ) maxY = y;\n\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t}\n\n\t\tthis.min.set( minX, minY, minZ );\n\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromBufferAttribute( attribute ) {\n\n\t\tlet minX = + Infinity;\n\t\tlet minY = + Infinity;\n\t\tlet minZ = + Infinity;\n\n\t\tlet maxX = - Infinity;\n\t\tlet maxY = - Infinity;\n\t\tlet maxZ = - Infinity;\n\n\t\tfor ( let i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\tconst x = attribute.getX( i );\n\t\t\tconst y = attribute.getY( i );\n\t\t\tconst z = attribute.getZ( i );\n\n\t\t\tif ( x < minX ) minX = x;\n\t\t\tif ( y < minY ) minY = y;\n\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\tif ( x > maxX ) maxX = x;\n\t\t\tif ( y > maxY ) maxY = y;\n\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t}\n\n\t\tthis.min.set( minX, minY, minZ );\n\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPoints( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCenterAndSize( center, size ) {\n\n\t\tconst halfSize = _vector$b.copy( size ).multiplyScalar( 0.5 );\n\n\t\tthis.min.copy( center ).sub( halfSize );\n\t\tthis.max.copy( center ).add( halfSize );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromObject( object, precise = false ) {\n\n\t\tthis.makeEmpty();\n\n\t\treturn this.expandByObject( object, precise );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t}\n\n\tmakeEmpty() {\n\n\t\tthis.min.x = this.min.y = this.min.z = + Infinity;\n\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\n\n\t\treturn this;\n\n\t}\n\n\tisEmpty() {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\n\n\t}\n\n\tgetCenter( target ) {\n\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t}\n\n\tgetSize( target ) {\n\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.subVectors( this.max, this.min );\n\n\t}\n\n\texpandByPoint( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t}\n\n\texpandByVector( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t}\n\n\texpandByScalar( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t}\n\n\texpandByObject( object, precise = false ) {\n\n\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\n\t\t// accounting for both the object's, and children's, world transforms\n\n\t\tobject.updateWorldMatrix( false, false );\n\n\t\tconst geometry = object.geometry;\n\n\t\tif ( geometry !== undefined ) {\n\n\t\t\tif ( precise && geometry.attributes != undefined && geometry.attributes.position !== undefined ) {\n\n\t\t\t\tconst position = geometry.attributes.position;\n\t\t\t\tfor ( let i = 0, l = position.count; i < l; i ++ ) {\n\n\t\t\t\t\t_vector$b.fromBufferAttribute( position, i ).applyMatrix4( object.matrixWorld );\n\t\t\t\t\tthis.expandByPoint( _vector$b );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( geometry.boundingBox === null ) {\n\n\t\t\t\t\tgeometry.computeBoundingBox();\n\n\t\t\t\t}\n\n\t\t\t\t_box$3.copy( geometry.boundingBox );\n\t\t\t\t_box$3.applyMatrix4( object.matrixWorld );\n\n\t\t\t\tthis.union( _box$3 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tthis.expandByObject( children[ i ], precise );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ||\n\t\t\tpoint.z < this.min.z || point.z > this.max.z ? false : true;\n\n\t}\n\n\tcontainsBox( box ) {\n\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y &&\n\t\t\tthis.min.z <= box.min.z && box.max.z <= this.max.z;\n\n\t}\n\n\tgetParameter( point, target ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\treturn target.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\n\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\n\t\t);\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\t// using 6 splitting planes to rule out intersections.\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ||\n\t\t\tbox.max.z < this.min.z || box.min.z > this.max.z ? false : true;\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\t// Find the point on the AABB closest to the sphere center.\n\t\tthis.clampPoint( sphere.center, _vector$b );\n\n\t\t// If that point is inside the sphere, the AABB and sphere intersect.\n\t\treturn _vector$b.distanceToSquared( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t}\n\n\tintersectsPlane( plane ) {\n\n\t\t// We compute the minimum and maximum dot product values. If those values\n\t\t// are on the same side (back or front) of the plane, then there is no intersection.\n\n\t\tlet min, max;\n\n\t\tif ( plane.normal.x > 0 ) {\n\n\t\t\tmin = plane.normal.x * this.min.x;\n\t\t\tmax = plane.normal.x * this.max.x;\n\n\t\t} else {\n\n\t\t\tmin = plane.normal.x * this.max.x;\n\t\t\tmax = plane.normal.x * this.min.x;\n\n\t\t}\n\n\t\tif ( plane.normal.y > 0 ) {\n\n\t\t\tmin += plane.normal.y * this.min.y;\n\t\t\tmax += plane.normal.y * this.max.y;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.y * this.max.y;\n\t\t\tmax += plane.normal.y * this.min.y;\n\n\t\t}\n\n\t\tif ( plane.normal.z > 0 ) {\n\n\t\t\tmin += plane.normal.z * this.min.z;\n\t\t\tmax += plane.normal.z * this.max.z;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.z * this.max.z;\n\t\t\tmax += plane.normal.z * this.min.z;\n\n\t\t}\n\n\t\treturn ( min <= - plane.constant && max >= - plane.constant );\n\n\t}\n\n\tintersectsTriangle( triangle ) {\n\n\t\tif ( this.isEmpty() ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// compute box center and extents\n\t\tthis.getCenter( _center );\n\t\t_extents.subVectors( this.max, _center );\n\n\t\t// translate triangle to aabb origin\n\t\t_v0$2.subVectors( triangle.a, _center );\n\t\t_v1$7.subVectors( triangle.b, _center );\n\t\t_v2$3.subVectors( triangle.c, _center );\n\n\t\t// compute edge vectors for triangle\n\t\t_f0.subVectors( _v1$7, _v0$2 );\n\t\t_f1.subVectors( _v2$3, _v1$7 );\n\t\t_f2.subVectors( _v0$2, _v2$3 );\n\n\t\t// test against axes that are given by cross product combinations of the edges of the triangle and the edges of the aabb\n\t\t// make an axis testing of each of the 3 sides of the aabb against each of the 3 sides of the triangle = 9 axis of separation\n\t\t// axis_ij = u_i x f_j (u0, u1, u2 = face normals of aabb = x,y,z axes vectors since aabb is axis aligned)\n\t\tlet axes = [\n\t\t\t0, - _f0.z, _f0.y, 0, - _f1.z, _f1.y, 0, - _f2.z, _f2.y,\n\t\t\t_f0.z, 0, - _f0.x, _f1.z, 0, - _f1.x, _f2.z, 0, - _f2.x,\n\t\t\t- _f0.y, _f0.x, 0, - _f1.y, _f1.x, 0, - _f2.y, _f2.x, 0\n\t\t];\n\t\tif ( ! satForAxes( axes, _v0$2, _v1$7, _v2$3, _extents ) ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// test 3 face normals from the aabb\n\t\taxes = [ 1, 0, 0, 0, 1, 0, 0, 0, 1 ];\n\t\tif ( ! satForAxes( axes, _v0$2, _v1$7, _v2$3, _extents ) ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// finally testing the face normal of the triangle\n\t\t// use already existing triangle edge vectors here\n\t\t_triangleNormal.crossVectors( _f0, _f1 );\n\t\taxes = [ _triangleNormal.x, _triangleNormal.y, _triangleNormal.z ];\n\n\t\treturn satForAxes( axes, _v0$2, _v1$7, _v2$3, _extents );\n\n\t}\n\n\tclampPoint( point, target ) {\n\n\t\treturn target.copy( point ).clamp( this.min, this.max );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\tconst clampedPoint = _vector$b.copy( point ).clamp( this.min, this.max );\n\n\t\treturn clampedPoint.sub( point ).length();\n\n\t}\n\n\tgetBoundingSphere( target ) {\n\n\t\tthis.getCenter( target.center );\n\n\t\ttarget.radius = this.getSize( _vector$b ).length() * 0.5;\n\n\t\treturn target;\n\n\t}\n\n\tintersect( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\t// ensure that if there is no overlap, the result is fully empty, not slightly empty with non-inf/+inf values that will cause subsequence intersects to erroneously return valid values.\n\t\tif ( this.isEmpty() ) this.makeEmpty();\n\n\t\treturn this;\n\n\t}\n\n\tunion( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t}\n\n\tapplyMatrix4( matrix ) {\n\n\t\t// transform of empty box is an empty box.\n\t\tif ( this.isEmpty() ) return this;\n\n\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\n\t\t_points[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\n\t\t_points[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\n\t\t_points[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\n\t\t_points[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\n\t\t_points[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\n\t\t_points[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\n\t\t_points[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\n\t\t_points[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 111\n\n\t\tthis.setFromPoints( _points );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t}\n\n\tequals( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t}\n\n}\n\nconst _points = [\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3()\n];\n\nconst _vector$b = /*@__PURE__*/ new Vector3();\n\nconst _box$3 = /*@__PURE__*/ new Box3();\n\n// triangle centered vertices\n\nconst _v0$2 = /*@__PURE__*/ new Vector3();\nconst _v1$7 = /*@__PURE__*/ new Vector3();\nconst _v2$3 = /*@__PURE__*/ new Vector3();\n\n// triangle edge vectors\n\nconst _f0 = /*@__PURE__*/ new Vector3();\nconst _f1 = /*@__PURE__*/ new Vector3();\nconst _f2 = /*@__PURE__*/ new Vector3();\n\nconst _center = /*@__PURE__*/ new Vector3();\nconst _extents = /*@__PURE__*/ new Vector3();\nconst _triangleNormal = /*@__PURE__*/ new Vector3();\nconst _testAxis = /*@__PURE__*/ new Vector3();\n\nfunction satForAxes( axes, v0, v1, v2, extents ) {\n\n\tfor ( let i = 0, j = axes.length - 3; i <= j; i += 3 ) {\n\n\t\t_testAxis.fromArray( axes, i );\n\t\t// project the aabb onto the separating axis\n\t\tconst r = extents.x * Math.abs( _testAxis.x ) + extents.y * Math.abs( _testAxis.y ) + extents.z * Math.abs( _testAxis.z );\n\t\t// project all 3 vertices of the triangle onto the separating axis\n\t\tconst p0 = v0.dot( _testAxis );\n\t\tconst p1 = v1.dot( _testAxis );\n\t\tconst p2 = v2.dot( _testAxis );\n\t\t// actual test, basically see if either of the most extreme of the triangle points intersects r\n\t\tif ( Math.max( - Math.max( p0, p1, p2 ), Math.min( p0, p1, p2 ) ) > r ) {\n\n\t\t\t// points of the projected triangle are outside the projected half-length of the aabb\n\t\t\t// the axis is separating and we can exit\n\t\t\treturn false;\n\n\t\t}\n\n\t}\n\n\treturn true;\n\n}\n\nconst _box$2 = /*@__PURE__*/ new Box3();\nconst _v1$6 = /*@__PURE__*/ new Vector3();\nconst _toFarthestPoint = /*@__PURE__*/ new Vector3();\nconst _toPoint = /*@__PURE__*/ new Vector3();\n\nclass Sphere {\n\n\tconstructor( center = new Vector3(), radius = - 1 ) {\n\n\t\tthis.center = center;\n\t\tthis.radius = radius;\n\n\t}\n\n\tset( center, radius ) {\n\n\t\tthis.center.copy( center );\n\t\tthis.radius = radius;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPoints( points, optionalCenter ) {\n\n\t\tconst center = this.center;\n\n\t\tif ( optionalCenter !== undefined ) {\n\n\t\t\tcenter.copy( optionalCenter );\n\n\t\t} else {\n\n\t\t\t_box$2.setFromPoints( points ).getCenter( center );\n\n\t\t}\n\n\t\tlet maxRadiusSq = 0;\n\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\n\n\t\t}\n\n\t\tthis.radius = Math.sqrt( maxRadiusSq );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( sphere ) {\n\n\t\tthis.center.copy( sphere.center );\n\t\tthis.radius = sphere.radius;\n\n\t\treturn this;\n\n\t}\n\n\tisEmpty() {\n\n\t\treturn ( this.radius < 0 );\n\n\t}\n\n\tmakeEmpty() {\n\n\t\tthis.center.set( 0, 0, 0 );\n\t\tthis.radius = - 1;\n\n\t\treturn this;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\treturn ( point.distanceTo( this.center ) - this.radius );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\tconst radiusSum = this.radius + sphere.radius;\n\n\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn box.intersectsSphere( this );\n\n\t}\n\n\tintersectsPlane( plane ) {\n\n\t\treturn Math.abs( plane.distanceToPoint( this.center ) ) <= this.radius;\n\n\t}\n\n\tclampPoint( point, target ) {\n\n\t\tconst deltaLengthSq = this.center.distanceToSquared( point );\n\n\t\ttarget.copy( point );\n\n\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\n\n\t\t\ttarget.sub( this.center ).normalize();\n\t\t\ttarget.multiplyScalar( this.radius ).add( this.center );\n\n\t\t}\n\n\t\treturn target;\n\n\t}\n\n\tgetBoundingBox( target ) {\n\n\t\tif ( this.isEmpty() ) {\n\n\t\t\t// Empty sphere produces empty bounding box\n\t\t\ttarget.makeEmpty();\n\t\t\treturn target;\n\n\t\t}\n\n\t\ttarget.set( this.center, this.center );\n\t\ttarget.expandByScalar( this.radius );\n\n\t\treturn target;\n\n\t}\n\n\tapplyMatrix4( matrix ) {\n\n\t\tthis.center.applyMatrix4( matrix );\n\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.center.add( offset );\n\n\t\treturn this;\n\n\t}\n\n\texpandByPoint( point ) {\n\n\t\tif ( this.isEmpty() ) {\n\n\t\t\tthis.center.copy( point );\n\t\t\tthis.radius = 0;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\t// from https://github.com/juj/MathGeoLib/blob/2940b99b99cfe575dd45103ef20f4019dee15b54/src/Geometry/Sphere.cpp#L649-L671\n\n\t\t_toPoint.subVectors( point, this.center );\n\n\t\tconst lengthSq = _toPoint.lengthSq();\n\n\t\tif ( lengthSq > ( this.radius * this.radius ) ) {\n\n\t\t\tconst length = Math.sqrt( lengthSq );\n\t\t\tconst missingRadiusHalf = ( length - this.radius ) * 0.5;\n\n\t\t\t// Nudge this sphere towards the target point. Add half the missing distance to radius,\n\t\t\t// and the other half to position. This gives a tighter enclosure, instead of if\n\t\t\t// the whole missing distance were just added to radius.\n\n\t\t\tthis.center.add( _toPoint.multiplyScalar( missingRadiusHalf / length ) );\n\t\t\tthis.radius += missingRadiusHalf;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tunion( sphere ) {\n\n\t\t// handle empty sphere cases\n\t\tif ( sphere.isEmpty() ) {\n\n\t\t\treturn this;\n\n\t\t} else if ( this.isEmpty() ) {\n\n\t\t\tthis.copy( sphere );\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\t// from https://github.com/juj/MathGeoLib/blob/2940b99b99cfe575dd45103ef20f4019dee15b54/src/Geometry/Sphere.cpp#L759-L769\n\n\t\t// To enclose another sphere into this sphere, we only need to enclose two points:\n\t\t// 1) Enclose the farthest point on the other sphere into this sphere.\n\t\t// 2) Enclose the opposite point of the farthest point into this sphere.\n\n\t\t if ( this.center.equals( sphere.center ) === true ) {\n\n\t\t\t _toFarthestPoint.set( 0, 0, 1 ).multiplyScalar( sphere.radius );\n\n\n\t\t} else {\n\n\t\t\t_toFarthestPoint.subVectors( sphere.center, this.center ).normalize().multiplyScalar( sphere.radius );\n\n\t\t}\n\n\t\tthis.expandByPoint( _v1$6.copy( sphere.center ).add( _toFarthestPoint ) );\n\t\tthis.expandByPoint( _v1$6.copy( sphere.center ).sub( _toFarthestPoint ) );\n\n\t\treturn this;\n\n\t}\n\n\tequals( sphere ) {\n\n\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nconst _vector$a = /*@__PURE__*/ new Vector3();\nconst _segCenter = /*@__PURE__*/ new Vector3();\nconst _segDir = /*@__PURE__*/ new Vector3();\nconst _diff = /*@__PURE__*/ new Vector3();\n\nconst _edge1 = /*@__PURE__*/ new Vector3();\nconst _edge2 = /*@__PURE__*/ new Vector3();\nconst _normal$1 = /*@__PURE__*/ new Vector3();\n\nclass Ray {\n\n\tconstructor( origin = new Vector3(), direction = new Vector3( 0, 0, - 1 ) ) {\n\n\t\tthis.origin = origin;\n\t\tthis.direction = direction;\n\n\t}\n\n\tset( origin, direction ) {\n\n\t\tthis.origin.copy( origin );\n\t\tthis.direction.copy( direction );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( ray ) {\n\n\t\tthis.origin.copy( ray.origin );\n\t\tthis.direction.copy( ray.direction );\n\n\t\treturn this;\n\n\t}\n\n\tat( t, target ) {\n\n\t\treturn target.copy( this.direction ).multiplyScalar( t ).add( this.origin );\n\n\t}\n\n\tlookAt( v ) {\n\n\t\tthis.direction.copy( v ).sub( this.origin ).normalize();\n\n\t\treturn this;\n\n\t}\n\n\trecast( t ) {\n\n\t\tthis.origin.copy( this.at( t, _vector$a ) );\n\n\t\treturn this;\n\n\t}\n\n\tclosestPointToPoint( point, target ) {\n\n\t\ttarget.subVectors( point, this.origin );\n\n\t\tconst directionDistance = target.dot( this.direction );\n\n\t\tif ( directionDistance < 0 ) {\n\n\t\t\treturn target.copy( this.origin );\n\n\t\t}\n\n\t\treturn target.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\treturn Math.sqrt( this.distanceSqToPoint( point ) );\n\n\t}\n\n\tdistanceSqToPoint( point ) {\n\n\t\tconst directionDistance = _vector$a.subVectors( point, this.origin ).dot( this.direction );\n\n\t\t// point behind the ray\n\n\t\tif ( directionDistance < 0 ) {\n\n\t\t\treturn this.origin.distanceToSquared( point );\n\n\t\t}\n\n\t\t_vector$a.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t\treturn _vector$a.distanceToSquared( point );\n\n\t}\n\n\tdistanceSqToSegment( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\n\n\t\t// from https://github.com/pmjoniak/GeometricTools/blob/master/GTEngine/Include/Mathematics/GteDistRaySegment.h\n\t\t// It returns the min distance between the ray and the segment\n\t\t// defined by v0 and v1\n\t\t// It can also set two optional targets :\n\t\t// - The closest point on the ray\n\t\t// - The closest point on the segment\n\n\t\t_segCenter.copy( v0 ).add( v1 ).multiplyScalar( 0.5 );\n\t\t_segDir.copy( v1 ).sub( v0 ).normalize();\n\t\t_diff.copy( this.origin ).sub( _segCenter );\n\n\t\tconst segExtent = v0.distanceTo( v1 ) * 0.5;\n\t\tconst a01 = - this.direction.dot( _segDir );\n\t\tconst b0 = _diff.dot( this.direction );\n\t\tconst b1 = - _diff.dot( _segDir );\n\t\tconst c = _diff.lengthSq();\n\t\tconst det = Math.abs( 1 - a01 * a01 );\n\t\tlet s0, s1, sqrDist, extDet;\n\n\t\tif ( det > 0 ) {\n\n\t\t\t// The ray and segment are not parallel.\n\n\t\t\ts0 = a01 * b1 - b0;\n\t\t\ts1 = a01 * b0 - b1;\n\t\t\textDet = segExtent * det;\n\n\t\t\tif ( s0 >= 0 ) {\n\n\t\t\t\tif ( s1 >= - extDet ) {\n\n\t\t\t\t\tif ( s1 <= extDet ) {\n\n\t\t\t\t\t\t// region 0\n\t\t\t\t\t\t// Minimum at interior points of ray and segment.\n\n\t\t\t\t\t\tconst invDet = 1 / det;\n\t\t\t\t\t\ts0 *= invDet;\n\t\t\t\t\t\ts1 *= invDet;\n\t\t\t\t\t\tsqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// region 1\n\n\t\t\t\t\t\ts1 = segExtent;\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// region 5\n\n\t\t\t\t\ts1 = - segExtent;\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( s1 <= - extDet ) {\n\n\t\t\t\t\t// region 4\n\n\t\t\t\t\ts0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\n\t\t\t\t\ts1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t} else if ( s1 <= extDet ) {\n\n\t\t\t\t\t// region 3\n\n\t\t\t\t\ts0 = 0;\n\t\t\t\t\ts1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// region 2\n\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\n\t\t\t\t\ts1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// Ray and segment are parallel.\n\n\t\t\ts1 = ( a01 > 0 ) ? - segExtent : segExtent;\n\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t}\n\n\t\tif ( optionalPointOnRay ) {\n\n\t\t\toptionalPointOnRay.copy( this.direction ).multiplyScalar( s0 ).add( this.origin );\n\n\t\t}\n\n\t\tif ( optionalPointOnSegment ) {\n\n\t\t\toptionalPointOnSegment.copy( _segDir ).multiplyScalar( s1 ).add( _segCenter );\n\n\t\t}\n\n\t\treturn sqrDist;\n\n\t}\n\n\tintersectSphere( sphere, target ) {\n\n\t\t_vector$a.subVectors( sphere.center, this.origin );\n\t\tconst tca = _vector$a.dot( this.direction );\n\t\tconst d2 = _vector$a.dot( _vector$a ) - tca * tca;\n\t\tconst radius2 = sphere.radius * sphere.radius;\n\n\t\tif ( d2 > radius2 ) return null;\n\n\t\tconst thc = Math.sqrt( radius2 - d2 );\n\n\t\t// t0 = first intersect point - entrance on front of sphere\n\t\tconst t0 = tca - thc;\n\n\t\t// t1 = second intersect point - exit point on back of sphere\n\t\tconst t1 = tca + thc;\n\n\t\t// test to see if both t0 and t1 are behind the ray - if so, return null\n\t\tif ( t0 < 0 && t1 < 0 ) return null;\n\n\t\t// test to see if t0 is behind the ray:\n\t\t// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\n\t\t// in order to always return an intersect point that is in front of the ray.\n\t\tif ( t0 < 0 ) return this.at( t1, target );\n\n\t\t// else t0 is in front of the ray, so return the first collision point scaled by t0\n\t\treturn this.at( t0, target );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\treturn this.distanceSqToPoint( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t}\n\n\tdistanceToPlane( plane ) {\n\n\t\tconst denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator === 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( plane.distanceToPoint( this.origin ) === 0 ) {\n\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\t// Null is preferable to undefined since undefined means.... it is undefined\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\n\n\t\t// Return if the ray never intersects the plane\n\n\t\treturn t >= 0 ? t : null;\n\n\t}\n\n\tintersectPlane( plane, target ) {\n\n\t\tconst t = this.distanceToPlane( plane );\n\n\t\tif ( t === null ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\treturn this.at( t, target );\n\n\t}\n\n\tintersectsPlane( plane ) {\n\n\t\t// check if the ray lies on the plane first\n\n\t\tconst distToPoint = plane.distanceToPoint( this.origin );\n\n\t\tif ( distToPoint === 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\tconst denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator * distToPoint < 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\t// ray origin is behind the plane (and is pointing behind it)\n\n\t\treturn false;\n\n\t}\n\n\tintersectBox( box, target ) {\n\n\t\tlet tmin, tmax, tymin, tymax, tzmin, tzmax;\n\n\t\tconst invdirx = 1 / this.direction.x,\n\t\t\tinvdiry = 1 / this.direction.y,\n\t\t\tinvdirz = 1 / this.direction.z;\n\n\t\tconst origin = this.origin;\n\n\t\tif ( invdirx >= 0 ) {\n\n\t\t\ttmin = ( box.min.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.max.x - origin.x ) * invdirx;\n\n\t\t} else {\n\n\t\t\ttmin = ( box.max.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.min.x - origin.x ) * invdirx;\n\n\t\t}\n\n\t\tif ( invdiry >= 0 ) {\n\n\t\t\ttymin = ( box.min.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.max.y - origin.y ) * invdiry;\n\n\t\t} else {\n\n\t\t\ttymin = ( box.max.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.min.y - origin.y ) * invdiry;\n\n\t\t}\n\n\t\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\n\n\t\t// These lines also handle the case where tmin or tmax is NaN\n\t\t// (result of 0 * Infinity). x !== x returns true if x is NaN\n\n\t\tif ( tymin > tmin || tmin !== tmin ) tmin = tymin;\n\n\t\tif ( tymax < tmax || tmax !== tmax ) tmax = tymax;\n\n\t\tif ( invdirz >= 0 ) {\n\n\t\t\ttzmin = ( box.min.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.max.z - origin.z ) * invdirz;\n\n\t\t} else {\n\n\t\t\ttzmin = ( box.max.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.min.z - origin.z ) * invdirz;\n\n\t\t}\n\n\t\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\n\n\t\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\n\n\t\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\n\n\t\t//return point closest to the ray (positive side)\n\n\t\tif ( tmax < 0 ) return null;\n\n\t\treturn this.at( tmin >= 0 ? tmin : tmax, target );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn this.intersectBox( box, _vector$a ) !== null;\n\n\t}\n\n\tintersectTriangle( a, b, c, backfaceCulling, target ) {\n\n\t\t// Compute the offset origin, edges, and normal.\n\n\t\t// from https://github.com/pmjoniak/GeometricTools/blob/master/GTEngine/Include/Mathematics/GteIntrRay3Triangle3.h\n\n\t\t_edge1.subVectors( b, a );\n\t\t_edge2.subVectors( c, a );\n\t\t_normal$1.crossVectors( _edge1, _edge2 );\n\n\t\t// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\n\t\t// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\n\t\t//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\n\t\t//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\n\t\t//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\n\t\tlet DdN = this.direction.dot( _normal$1 );\n\t\tlet sign;\n\n\t\tif ( DdN > 0 ) {\n\n\t\t\tif ( backfaceCulling ) return null;\n\t\t\tsign = 1;\n\n\t\t} else if ( DdN < 0 ) {\n\n\t\t\tsign = - 1;\n\t\t\tDdN = - DdN;\n\n\t\t} else {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t_diff.subVectors( this.origin, a );\n\t\tconst DdQxE2 = sign * this.direction.dot( _edge2.crossVectors( _diff, _edge2 ) );\n\n\t\t// b1 < 0, no intersection\n\t\tif ( DdQxE2 < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst DdE1xQ = sign * this.direction.dot( _edge1.cross( _diff ) );\n\n\t\t// b2 < 0, no intersection\n\t\tif ( DdE1xQ < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// b1+b2 > 1, no intersection\n\t\tif ( DdQxE2 + DdE1xQ > DdN ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// Line intersects triangle, check if ray does.\n\t\tconst QdN = - sign * _diff.dot( _normal$1 );\n\n\t\t// t < 0, no intersection\n\t\tif ( QdN < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// Ray intersects triangle.\n\t\treturn this.at( QdN / DdN, target );\n\n\t}\n\n\tapplyMatrix4( matrix4 ) {\n\n\t\tthis.origin.applyMatrix4( matrix4 );\n\t\tthis.direction.transformDirection( matrix4 );\n\n\t\treturn this;\n\n\t}\n\n\tequals( ray ) {\n\n\t\treturn ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nclass Matrix4 {\n\n\tconstructor() {\n\n\t\tMatrix4.prototype.isMatrix4 = true;\n\n\t\tthis.elements = [\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t];\n\n\t}\n\n\tset( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new Matrix4().fromArray( this.elements );\n\n\t}\n\n\tcopy( m ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ]; te[ 3 ] = me[ 3 ];\n\t\tte[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ]; te[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ];\n\t\tte[ 8 ] = me[ 8 ]; te[ 9 ] = me[ 9 ]; te[ 10 ] = me[ 10 ]; te[ 11 ] = me[ 11 ];\n\t\tte[ 12 ] = me[ 12 ]; te[ 13 ] = me[ 13 ]; te[ 14 ] = me[ 14 ]; te[ 15 ] = me[ 15 ];\n\n\t\treturn this;\n\n\t}\n\n\tcopyPosition( m ) {\n\n\t\tconst te = this.elements, me = m.elements;\n\n\t\tte[ 12 ] = me[ 12 ];\n\t\tte[ 13 ] = me[ 13 ];\n\t\tte[ 14 ] = me[ 14 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrix3( m ) {\n\n\t\tconst me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 3 ], me[ 6 ], 0,\n\t\t\tme[ 1 ], me[ 4 ], me[ 7 ], 0,\n\t\t\tme[ 2 ], me[ 5 ], me[ 8 ], 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\textractBasis( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrixColumn( this, 0 );\n\t\tyAxis.setFromMatrixColumn( this, 1 );\n\t\tzAxis.setFromMatrixColumn( this, 2 );\n\n\t\treturn this;\n\n\t}\n\n\tmakeBasis( xAxis, yAxis, zAxis ) {\n\n\t\tthis.set(\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\textractRotation( m ) {\n\n\t\t// this method does not support reflection matrices\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tconst scaleX = 1 / _v1$5.setFromMatrixColumn( m, 0 ).length();\n\t\tconst scaleY = 1 / _v1$5.setFromMatrixColumn( m, 1 ).length();\n\t\tconst scaleZ = 1 / _v1$5.setFromMatrixColumn( m, 2 ).length();\n\n\t\tte[ 0 ] = me[ 0 ] * scaleX;\n\t\tte[ 1 ] = me[ 1 ] * scaleX;\n\t\tte[ 2 ] = me[ 2 ] * scaleX;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = me[ 4 ] * scaleY;\n\t\tte[ 5 ] = me[ 5 ] * scaleY;\n\t\tte[ 6 ] = me[ 6 ] * scaleY;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = me[ 8 ] * scaleZ;\n\t\tte[ 9 ] = me[ 9 ] * scaleZ;\n\t\tte[ 10 ] = me[ 10 ] * scaleZ;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationFromEuler( euler ) {\n\n\t\tconst te = this.elements;\n\n\t\tconst x = euler.x, y = euler.y, z = euler.z;\n\t\tconst a = Math.cos( x ), b = Math.sin( x );\n\t\tconst c = Math.cos( y ), d = Math.sin( y );\n\t\tconst e = Math.cos( z ), f = Math.sin( z );\n\n\t\tif ( euler.order === 'XYZ' ) {\n\n\t\t\tconst ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - c * f;\n\t\t\tte[ 8 ] = d;\n\n\t\t\tte[ 1 ] = af + be * d;\n\t\t\tte[ 5 ] = ae - bf * d;\n\t\t\tte[ 9 ] = - b * c;\n\n\t\t\tte[ 2 ] = bf - ae * d;\n\t\t\tte[ 6 ] = be + af * d;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YXZ' ) {\n\n\t\t\tconst ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce + df * b;\n\t\t\tte[ 4 ] = de * b - cf;\n\t\t\tte[ 8 ] = a * d;\n\n\t\t\tte[ 1 ] = a * f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b;\n\n\t\t\tte[ 2 ] = cf * b - de;\n\t\t\tte[ 6 ] = df + ce * b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZXY' ) {\n\n\t\t\tconst ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce - df * b;\n\t\t\tte[ 4 ] = - a * f;\n\t\t\tte[ 8 ] = de + cf * b;\n\n\t\t\tte[ 1 ] = cf + de * b;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = df - ce * b;\n\n\t\t\tte[ 2 ] = - a * d;\n\t\t\tte[ 6 ] = b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZYX' ) {\n\n\t\t\tconst ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = be * d - af;\n\t\t\tte[ 8 ] = ae * d + bf;\n\n\t\t\tte[ 1 ] = c * f;\n\t\t\tte[ 5 ] = bf * d + ae;\n\t\t\tte[ 9 ] = af * d - be;\n\n\t\t\tte[ 2 ] = - d;\n\t\t\tte[ 6 ] = b * c;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YZX' ) {\n\n\t\t\tconst ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = bd - ac * f;\n\t\t\tte[ 8 ] = bc * f + ad;\n\n\t\t\tte[ 1 ] = f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b * e;\n\n\t\t\tte[ 2 ] = - d * e;\n\t\t\tte[ 6 ] = ad * f + bc;\n\t\t\tte[ 10 ] = ac - bd * f;\n\n\t\t} else if ( euler.order === 'XZY' ) {\n\n\t\t\tconst ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - f;\n\t\t\tte[ 8 ] = d * e;\n\n\t\t\tte[ 1 ] = ac * f + bd;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = ad * f - bc;\n\n\t\t\tte[ 2 ] = bc * f - ad;\n\t\t\tte[ 6 ] = b * e;\n\t\t\tte[ 10 ] = bd * f + ac;\n\n\t\t}\n\n\t\t// bottom row\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// last column\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationFromQuaternion( q ) {\n\n\t\treturn this.compose( _zero, q, _one );\n\n\t}\n\n\tlookAt( eye, target, up ) {\n\n\t\tconst te = this.elements;\n\n\t\t_z.subVectors( eye, target );\n\n\t\tif ( _z.lengthSq() === 0 ) {\n\n\t\t\t// eye and target are in the same position\n\n\t\t\t_z.z = 1;\n\n\t\t}\n\n\t\t_z.normalize();\n\t\t_x.crossVectors( up, _z );\n\n\t\tif ( _x.lengthSq() === 0 ) {\n\n\t\t\t// up and z are parallel\n\n\t\t\tif ( Math.abs( up.z ) === 1 ) {\n\n\t\t\t\t_z.x += 0.0001;\n\n\t\t\t} else {\n\n\t\t\t\t_z.z += 0.0001;\n\n\t\t\t}\n\n\t\t\t_z.normalize();\n\t\t\t_x.crossVectors( up, _z );\n\n\t\t}\n\n\t\t_x.normalize();\n\t\t_y.crossVectors( _z, _x );\n\n\t\tte[ 0 ] = _x.x; te[ 4 ] = _y.x; te[ 8 ] = _z.x;\n\t\tte[ 1 ] = _x.y; te[ 5 ] = _y.y; te[ 9 ] = _z.y;\n\t\tte[ 2 ] = _x.z; te[ 6 ] = _y.z; te[ 10 ] = _z.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( m ) {\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t}\n\n\tpremultiply( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t}\n\n\tmultiplyMatrices( a, b ) {\n\n\t\tconst ae = a.elements;\n\t\tconst be = b.elements;\n\t\tconst te = this.elements;\n\n\t\tconst a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\n\t\tconst a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\n\t\tconst a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\n\t\tconst a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\n\n\t\tconst b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\n\t\tconst b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\n\t\tconst b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\n\t\tconst b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\n\n\t\treturn this;\n\n\t}\n\n\tdeterminant() {\n\n\t\tconst te = this.elements;\n\n\t\tconst n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\n\t\tconst n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\n\t\tconst n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\n\t\tconst n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\n\n\t\t//TODO: make this more efficient\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n\t\treturn (\n\t\t\tn41 * (\n\t\t\t\t+ n14 * n23 * n32\n\t\t\t\t - n13 * n24 * n32\n\t\t\t\t - n14 * n22 * n33\n\t\t\t\t + n12 * n24 * n33\n\t\t\t\t + n13 * n22 * n34\n\t\t\t\t - n12 * n23 * n34\n\t\t\t) +\n\t\t\tn42 * (\n\t\t\t\t+ n11 * n23 * n34\n\t\t\t\t - n11 * n24 * n33\n\t\t\t\t + n14 * n21 * n33\n\t\t\t\t - n13 * n21 * n34\n\t\t\t\t + n13 * n24 * n31\n\t\t\t\t - n14 * n23 * n31\n\t\t\t) +\n\t\t\tn43 * (\n\t\t\t\t+ n11 * n24 * n32\n\t\t\t\t - n11 * n22 * n34\n\t\t\t\t - n14 * n21 * n32\n\t\t\t\t + n12 * n21 * n34\n\t\t\t\t + n14 * n22 * n31\n\t\t\t\t - n12 * n24 * n31\n\t\t\t) +\n\t\t\tn44 * (\n\t\t\t\t- n13 * n22 * n31\n\t\t\t\t - n11 * n23 * n32\n\t\t\t\t + n11 * n22 * n33\n\t\t\t\t + n13 * n21 * n32\n\t\t\t\t - n12 * n21 * n33\n\t\t\t\t + n12 * n23 * n31\n\t\t\t)\n\n\t\t);\n\n\t}\n\n\ttranspose() {\n\n\t\tconst te = this.elements;\n\t\tlet tmp;\n\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\n\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\n\n\t\treturn this;\n\n\t}\n\n\tsetPosition( x, y, z ) {\n\n\t\tconst te = this.elements;\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\tte[ 12 ] = x.x;\n\t\t\tte[ 13 ] = x.y;\n\t\t\tte[ 14 ] = x.z;\n\n\t\t} else {\n\n\t\t\tte[ 12 ] = x;\n\t\t\tte[ 13 ] = y;\n\t\t\tte[ 14 ] = z;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tinvert() {\n\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n\t\tconst te = this.elements,\n\n\t\t\tn11 = te[ 0 ], n21 = te[ 1 ], n31 = te[ 2 ], n41 = te[ 3 ],\n\t\t\tn12 = te[ 4 ], n22 = te[ 5 ], n32 = te[ 6 ], n42 = te[ 7 ],\n\t\t\tn13 = te[ 8 ], n23 = te[ 9 ], n33 = te[ 10 ], n43 = te[ 11 ],\n\t\t\tn14 = te[ 12 ], n24 = te[ 13 ], n34 = te[ 14 ], n44 = te[ 15 ],\n\n\t\t\tt11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\n\t\t\tt12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\n\t\t\tt13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\n\t\t\tt14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n\n\t\tconst det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 );\n\n\t\tconst detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\n\t\tte[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\n\t\tte[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\n\n\t\tte[ 4 ] = t12 * detInv;\n\t\tte[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\n\t\tte[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\n\t\tte[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\n\n\t\tte[ 8 ] = t13 * detInv;\n\t\tte[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\n\t\tte[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\n\t\tte[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\n\n\t\tte[ 12 ] = t14 * detInv;\n\t\tte[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\n\t\tte[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\n\t\tte[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\n\n\t\treturn this;\n\n\t}\n\n\tscale( v ) {\n\n\t\tconst te = this.elements;\n\t\tconst x = v.x, y = v.y, z = v.z;\n\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\n\n\t\treturn this;\n\n\t}\n\n\tgetMaxScaleOnAxis() {\n\n\t\tconst te = this.elements;\n\n\t\tconst scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\n\t\tconst scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\n\t\tconst scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\n\n\t\treturn Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\n\n\t}\n\n\tmakeTranslation( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, x,\n\t\t\t0, 1, 0, y,\n\t\t\t0, 0, 1, z,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationX( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, c, - s, 0,\n\t\t\t0, s, c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationY( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t c, 0, s, 0,\n\t\t\t 0, 1, 0, 0,\n\t\t\t- s, 0, c, 0,\n\t\t\t 0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationZ( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\tc, - s, 0, 0,\n\t\t\ts, c, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationAxis( axis, angle ) {\n\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\n\n\t\tconst c = Math.cos( angle );\n\t\tconst s = Math.sin( angle );\n\t\tconst t = 1 - c;\n\t\tconst x = axis.x, y = axis.y, z = axis.z;\n\t\tconst tx = t * x, ty = t * y;\n\n\t\tthis.set(\n\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeScale( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\tx, 0, 0, 0,\n\t\t\t0, y, 0, 0,\n\t\t\t0, 0, z, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeShear( xy, xz, yx, yz, zx, zy ) {\n\n\t\tthis.set(\n\n\t\t\t1, yx, zx, 0,\n\t\t\txy, 1, zy, 0,\n\t\t\txz, yz, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tcompose( position, quaternion, scale ) {\n\n\t\tconst te = this.elements;\n\n\t\tconst x = quaternion._x, y = quaternion._y, z = quaternion._z, w = quaternion._w;\n\t\tconst x2 = x + x,\ty2 = y + y, z2 = z + z;\n\t\tconst xx = x * x2, xy = x * y2, xz = x * z2;\n\t\tconst yy = y * y2, yz = y * z2, zz = z * z2;\n\t\tconst wx = w * x2, wy = w * y2, wz = w * z2;\n\n\t\tconst sx = scale.x, sy = scale.y, sz = scale.z;\n\n\t\tte[ 0 ] = ( 1 - ( yy + zz ) ) * sx;\n\t\tte[ 1 ] = ( xy + wz ) * sx;\n\t\tte[ 2 ] = ( xz - wy ) * sx;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = ( xy - wz ) * sy;\n\t\tte[ 5 ] = ( 1 - ( xx + zz ) ) * sy;\n\t\tte[ 6 ] = ( yz + wx ) * sy;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = ( xz + wy ) * sz;\n\t\tte[ 9 ] = ( yz - wx ) * sz;\n\t\tte[ 10 ] = ( 1 - ( xx + yy ) ) * sz;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = position.x;\n\t\tte[ 13 ] = position.y;\n\t\tte[ 14 ] = position.z;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tdecompose( position, quaternion, scale ) {\n\n\t\tconst te = this.elements;\n\n\t\tlet sx = _v1$5.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\n\t\tconst sy = _v1$5.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\n\t\tconst sz = _v1$5.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\n\n\t\t// if determine is negative, we need to invert one scale\n\t\tconst det = this.determinant();\n\t\tif ( det < 0 ) sx = - sx;\n\n\t\tposition.x = te[ 12 ];\n\t\tposition.y = te[ 13 ];\n\t\tposition.z = te[ 14 ];\n\n\t\t// scale the rotation part\n\t\t_m1$2.copy( this );\n\n\t\tconst invSX = 1 / sx;\n\t\tconst invSY = 1 / sy;\n\t\tconst invSZ = 1 / sz;\n\n\t\t_m1$2.elements[ 0 ] *= invSX;\n\t\t_m1$2.elements[ 1 ] *= invSX;\n\t\t_m1$2.elements[ 2 ] *= invSX;\n\n\t\t_m1$2.elements[ 4 ] *= invSY;\n\t\t_m1$2.elements[ 5 ] *= invSY;\n\t\t_m1$2.elements[ 6 ] *= invSY;\n\n\t\t_m1$2.elements[ 8 ] *= invSZ;\n\t\t_m1$2.elements[ 9 ] *= invSZ;\n\t\t_m1$2.elements[ 10 ] *= invSZ;\n\n\t\tquaternion.setFromRotationMatrix( _m1$2 );\n\n\t\tscale.x = sx;\n\t\tscale.y = sy;\n\t\tscale.z = sz;\n\n\t\treturn this;\n\n\t}\n\n\tmakePerspective( left, right, top, bottom, near, far ) {\n\n\t\tconst te = this.elements;\n\t\tconst x = 2 * near / ( right - left );\n\t\tconst y = 2 * near / ( top - bottom );\n\n\t\tconst a = ( right + left ) / ( right - left );\n\t\tconst b = ( top + bottom ) / ( top - bottom );\n\t\tconst c = - ( far + near ) / ( far - near );\n\t\tconst d = - 2 * far * near / ( far - near );\n\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\n\n\t\treturn this;\n\n\t}\n\n\tmakeOrthographic( left, right, top, bottom, near, far ) {\n\n\t\tconst te = this.elements;\n\t\tconst w = 1.0 / ( right - left );\n\t\tconst h = 1.0 / ( top - bottom );\n\t\tconst p = 1.0 / ( far - near );\n\n\t\tconst x = ( right + left ) * w;\n\t\tconst y = ( top + bottom ) * h;\n\t\tconst z = ( far + near ) * p;\n\n\t\tte[ 0 ] = 2 * w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 * p;\tte[ 14 ] = - z;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tequals( matrix ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = matrix.elements;\n\n\t\tfor ( let i = 0; i < 16; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tfor ( let i = 0; i < 16; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tconst te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\t\tarray[ offset + 9 ] = te[ 9 ];\n\t\tarray[ offset + 10 ] = te[ 10 ];\n\t\tarray[ offset + 11 ] = te[ 11 ];\n\n\t\tarray[ offset + 12 ] = te[ 12 ];\n\t\tarray[ offset + 13 ] = te[ 13 ];\n\t\tarray[ offset + 14 ] = te[ 14 ];\n\t\tarray[ offset + 15 ] = te[ 15 ];\n\n\t\treturn array;\n\n\t}\n\n}\n\nconst _v1$5 = /*@__PURE__*/ new Vector3();\nconst _m1$2 = /*@__PURE__*/ new Matrix4();\nconst _zero = /*@__PURE__*/ new Vector3( 0, 0, 0 );\nconst _one = /*@__PURE__*/ new Vector3( 1, 1, 1 );\nconst _x = /*@__PURE__*/ new Vector3();\nconst _y = /*@__PURE__*/ new Vector3();\nconst _z = /*@__PURE__*/ new Vector3();\n\nconst _matrix$1 = /*@__PURE__*/ new Matrix4();\nconst _quaternion$3 = /*@__PURE__*/ new Quaternion();\n\nclass Euler {\n\n\tconstructor( x = 0, y = 0, z = 0, order = Euler.DefaultOrder ) {\n\n\t\tthis.isEuler = true;\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._order = order;\n\n\t}\n\n\tget x() {\n\n\t\treturn this._x;\n\n\t}\n\n\tset x( value ) {\n\n\t\tthis._x = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget y() {\n\n\t\treturn this._y;\n\n\t}\n\n\tset y( value ) {\n\n\t\tthis._y = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget z() {\n\n\t\treturn this._z;\n\n\t}\n\n\tset z( value ) {\n\n\t\tthis._z = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget order() {\n\n\t\treturn this._order;\n\n\t}\n\n\tset order( value ) {\n\n\t\tthis._order = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tset( x, y, z, order = this._order ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._order = order;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._order );\n\n\t}\n\n\tcopy( euler ) {\n\n\t\tthis._x = euler._x;\n\t\tthis._y = euler._y;\n\t\tthis._z = euler._z;\n\t\tthis._order = euler._order;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromRotationMatrix( m, order = this._order, update = true ) {\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tconst te = m.elements;\n\t\tconst m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\n\t\tconst m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\n\t\tconst m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\tswitch ( order ) {\n\n\t\t\tcase 'XYZ':\n\n\t\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m13 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\t\tthis._z = Math.atan2( - m12, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\t\tthis._z = 0;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'YXZ':\n\n\t\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m23 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\t\t\t\t\tthis._z = Math.atan2( m21, m22 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\t\t\t\t\tthis._z = 0;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZXY':\n\n\t\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m32 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._y = Math.atan2( - m31, m33 );\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._y = 0;\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZYX':\n\n\t\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m31 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m33 );\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = 0;\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'YZX':\n\n\t\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m21 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m22 );\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = 0;\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'XZY':\n\n\t\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m12 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\t\tthis._y = Math.atan2( m13, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\t\tthis._y = 0;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() encountered an unknown order: ' + order );\n\n\t\t}\n\n\t\tthis._order = order;\n\n\t\tif ( update === true ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromQuaternion( q, order, update ) {\n\n\t\t_matrix$1.makeRotationFromQuaternion( q );\n\n\t\treturn this.setFromRotationMatrix( _matrix$1, order, update );\n\n\t}\n\n\tsetFromVector3( v, order = this._order ) {\n\n\t\treturn this.set( v.x, v.y, v.z, order );\n\n\t}\n\n\treorder( newOrder ) {\n\n\t\t// WARNING: this discards revolution information -bhouston\n\n\t\t_quaternion$3.setFromEuler( this );\n\n\t\treturn this.setFromQuaternion( _quaternion$3, newOrder );\n\n\t}\n\n\tequals( euler ) {\n\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\n\n\t}\n\n\tfromArray( array ) {\n\n\t\tthis._x = array[ 0 ];\n\t\tthis._y = array[ 1 ];\n\t\tthis._z = array[ 2 ];\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._order;\n\n\t\treturn array;\n\n\t}\n\n\t_onChange( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\t_onChangeCallback() {}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this._x;\n\t\tyield this._y;\n\t\tyield this._z;\n\t\tyield this._order;\n\n\t}\n\n\t// @deprecated since r138, 02cf0df1cb4575d5842fef9c85bb5a89fe020d53\n\n\ttoVector3() {\n\n\t\tconsole.error( 'THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead' );\n\n\t}\n\n}\n\nEuler.DefaultOrder = 'XYZ';\nEuler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\n\nclass Layers {\n\n\tconstructor() {\n\n\t\tthis.mask = 1 | 0;\n\n\t}\n\n\tset( channel ) {\n\n\t\tthis.mask = ( 1 << channel | 0 ) >>> 0;\n\n\t}\n\n\tenable( channel ) {\n\n\t\tthis.mask |= 1 << channel | 0;\n\n\t}\n\n\tenableAll() {\n\n\t\tthis.mask = 0xffffffff | 0;\n\n\t}\n\n\ttoggle( channel ) {\n\n\t\tthis.mask ^= 1 << channel | 0;\n\n\t}\n\n\tdisable( channel ) {\n\n\t\tthis.mask &= ~ ( 1 << channel | 0 );\n\n\t}\n\n\tdisableAll() {\n\n\t\tthis.mask = 0;\n\n\t}\n\n\ttest( layers ) {\n\n\t\treturn ( this.mask & layers.mask ) !== 0;\n\n\t}\n\n\tisEnabled( channel ) {\n\n\t\treturn ( this.mask & ( 1 << channel | 0 ) ) !== 0;\n\n\t}\n\n}\n\nlet _object3DId = 0;\n\nconst _v1$4 = /*@__PURE__*/ new Vector3();\nconst _q1 = /*@__PURE__*/ new Quaternion();\nconst _m1$1 = /*@__PURE__*/ new Matrix4();\nconst _target = /*@__PURE__*/ new Vector3();\n\nconst _position$3 = /*@__PURE__*/ new Vector3();\nconst _scale$2 = /*@__PURE__*/ new Vector3();\nconst _quaternion$2 = /*@__PURE__*/ new Quaternion();\n\nconst _xAxis = /*@__PURE__*/ new Vector3( 1, 0, 0 );\nconst _yAxis = /*@__PURE__*/ new Vector3( 0, 1, 0 );\nconst _zAxis = /*@__PURE__*/ new Vector3( 0, 0, 1 );\n\nconst _addedEvent = { type: 'added' };\nconst _removedEvent = { type: 'removed' };\n\nclass Object3D extends EventDispatcher {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isObject3D = true;\n\n\t\tObject.defineProperty( this, 'id', { value: _object3DId ++ } );\n\n\t\tthis.uuid = generateUUID();\n\n\t\tthis.name = '';\n\t\tthis.type = 'Object3D';\n\n\t\tthis.parent = null;\n\t\tthis.children = [];\n\n\t\tthis.up = Object3D.DefaultUp.clone();\n\n\t\tconst position = new Vector3();\n\t\tconst rotation = new Euler();\n\t\tconst quaternion = new Quaternion();\n\t\tconst scale = new Vector3( 1, 1, 1 );\n\n\t\tfunction onRotationChange() {\n\n\t\t\tquaternion.setFromEuler( rotation, false );\n\n\t\t}\n\n\t\tfunction onQuaternionChange() {\n\n\t\t\trotation.setFromQuaternion( quaternion, undefined, false );\n\n\t\t}\n\n\t\trotation._onChange( onRotationChange );\n\t\tquaternion._onChange( onQuaternionChange );\n\n\t\tObject.defineProperties( this, {\n\t\t\tposition: {\n\t\t\t\tconfigurable: true,\n\t\t\t\tenumerable: true,\n\t\t\t\tvalue: position\n\t\t\t},\n\t\t\trotation: {\n\t\t\t\tconfigurable: true,\n\t\t\t\tenumerable: true,\n\t\t\t\tvalue: rotation\n\t\t\t},\n\t\t\tquaternion: {\n\t\t\t\tconfigurable: true,\n\t\t\t\tenumerable: true,\n\t\t\t\tvalue: quaternion\n\t\t\t},\n\t\t\tscale: {\n\t\t\t\tconfigurable: true,\n\t\t\t\tenumerable: true,\n\t\t\t\tvalue: scale\n\t\t\t},\n\t\t\tmodelViewMatrix: {\n\t\t\t\tvalue: new Matrix4()\n\t\t\t},\n\t\t\tnormalMatrix: {\n\t\t\t\tvalue: new Matrix3()\n\t\t\t}\n\t\t} );\n\n\t\tthis.matrix = new Matrix4();\n\t\tthis.matrixWorld = new Matrix4();\n\n\t\tthis.matrixAutoUpdate = Object3D.DefaultMatrixAutoUpdate;\n\t\tthis.matrixWorldNeedsUpdate = false;\n\n\t\tthis.matrixWorldAutoUpdate = Object3D.DefaultMatrixWorldAutoUpdate; // checked by the renderer\n\n\t\tthis.layers = new Layers();\n\t\tthis.visible = true;\n\n\t\tthis.castShadow = false;\n\t\tthis.receiveShadow = false;\n\n\t\tthis.frustumCulled = true;\n\t\tthis.renderOrder = 0;\n\n\t\tthis.animations = [];\n\n\t\tthis.userData = {};\n\n\t}\n\n\tonBeforeRender( /* renderer, scene, camera, geometry, material, group */ ) {}\n\n\tonAfterRender( /* renderer, scene, camera, geometry, material, group */ ) {}\n\n\tapplyMatrix4( matrix ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tthis.matrix.premultiply( matrix );\n\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\n\n\t}\n\n\tapplyQuaternion( q ) {\n\n\t\tthis.quaternion.premultiply( q );\n\n\t\treturn this;\n\n\t}\n\n\tsetRotationFromAxisAngle( axis, angle ) {\n\n\t\t// assumes axis is normalized\n\n\t\tthis.quaternion.setFromAxisAngle( axis, angle );\n\n\t}\n\n\tsetRotationFromEuler( euler ) {\n\n\t\tthis.quaternion.setFromEuler( euler, true );\n\n\t}\n\n\tsetRotationFromMatrix( m ) {\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tthis.quaternion.setFromRotationMatrix( m );\n\n\t}\n\n\tsetRotationFromQuaternion( q ) {\n\n\t\t// assumes q is normalized\n\n\t\tthis.quaternion.copy( q );\n\n\t}\n\n\trotateOnAxis( axis, angle ) {\n\n\t\t// rotate object on axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\t_q1.setFromAxisAngle( axis, angle );\n\n\t\tthis.quaternion.multiply( _q1 );\n\n\t\treturn this;\n\n\t}\n\n\trotateOnWorldAxis( axis, angle ) {\n\n\t\t// rotate object on axis in world space\n\t\t// axis is assumed to be normalized\n\t\t// method assumes no rotated parent\n\n\t\t_q1.setFromAxisAngle( axis, angle );\n\n\t\tthis.quaternion.premultiply( _q1 );\n\n\t\treturn this;\n\n\t}\n\n\trotateX( angle ) {\n\n\t\treturn this.rotateOnAxis( _xAxis, angle );\n\n\t}\n\n\trotateY( angle ) {\n\n\t\treturn this.rotateOnAxis( _yAxis, angle );\n\n\t}\n\n\trotateZ( angle ) {\n\n\t\treturn this.rotateOnAxis( _zAxis, angle );\n\n\t}\n\n\ttranslateOnAxis( axis, distance ) {\n\n\t\t// translate object by distance along axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\t_v1$4.copy( axis ).applyQuaternion( this.quaternion );\n\n\t\tthis.position.add( _v1$4.multiplyScalar( distance ) );\n\n\t\treturn this;\n\n\t}\n\n\ttranslateX( distance ) {\n\n\t\treturn this.translateOnAxis( _xAxis, distance );\n\n\t}\n\n\ttranslateY( distance ) {\n\n\t\treturn this.translateOnAxis( _yAxis, distance );\n\n\t}\n\n\ttranslateZ( distance ) {\n\n\t\treturn this.translateOnAxis( _zAxis, distance );\n\n\t}\n\n\tlocalToWorld( vector ) {\n\n\t\treturn vector.applyMatrix4( this.matrixWorld );\n\n\t}\n\n\tworldToLocal( vector ) {\n\n\t\treturn vector.applyMatrix4( _m1$1.copy( this.matrixWorld ).invert() );\n\n\t}\n\n\tlookAt( x, y, z ) {\n\n\t\t// This method does not support objects having non-uniformly-scaled parent(s)\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\t_target.copy( x );\n\n\t\t} else {\n\n\t\t\t_target.set( x, y, z );\n\n\t\t}\n\n\t\tconst parent = this.parent;\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\t_position$3.setFromMatrixPosition( this.matrixWorld );\n\n\t\tif ( this.isCamera || this.isLight ) {\n\n\t\t\t_m1$1.lookAt( _position$3, _target, this.up );\n\n\t\t} else {\n\n\t\t\t_m1$1.lookAt( _target, _position$3, this.up );\n\n\t\t}\n\n\t\tthis.quaternion.setFromRotationMatrix( _m1$1 );\n\n\t\tif ( parent ) {\n\n\t\t\t_m1$1.extractRotation( parent.matrixWorld );\n\t\t\t_q1.setFromRotationMatrix( _m1$1 );\n\t\t\tthis.quaternion.premultiply( _q1.invert() );\n\n\t\t}\n\n\t}\n\n\tadd( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( let i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.add( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( object === this ) {\n\n\t\t\tconsole.error( 'THREE.Object3D.add: object can\\'t be added as a child of itself.', object );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( object && object.isObject3D ) {\n\n\t\t\tif ( object.parent !== null ) {\n\n\t\t\t\tobject.parent.remove( object );\n\n\t\t\t}\n\n\t\t\tobject.parent = this;\n\t\t\tthis.children.push( object );\n\n\t\t\tobject.dispatchEvent( _addedEvent );\n\n\t\t} else {\n\n\t\t\tconsole.error( 'THREE.Object3D.add: object not an instance of THREE.Object3D.', object );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tremove( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( let i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.remove( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst index = this.children.indexOf( object );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\tobject.parent = null;\n\t\t\tthis.children.splice( index, 1 );\n\n\t\t\tobject.dispatchEvent( _removedEvent );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tremoveFromParent() {\n\n\t\tconst parent = this.parent;\n\n\t\tif ( parent !== null ) {\n\n\t\t\tparent.remove( this );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclear() {\n\n\t\tfor ( let i = 0; i < this.children.length; i ++ ) {\n\n\t\t\tconst object = this.children[ i ];\n\n\t\t\tobject.parent = null;\n\n\t\t\tobject.dispatchEvent( _removedEvent );\n\n\t\t}\n\n\t\tthis.children.length = 0;\n\n\t\treturn this;\n\n\n\t}\n\n\tattach( object ) {\n\n\t\t// adds object as a child of this, while maintaining the object's world transform\n\n\t\t// Note: This method does not support scene graphs having non-uniformly-scaled nodes(s)\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\t_m1$1.copy( this.matrixWorld ).invert();\n\n\t\tif ( object.parent !== null ) {\n\n\t\t\tobject.parent.updateWorldMatrix( true, false );\n\n\t\t\t_m1$1.multiply( object.parent.matrixWorld );\n\n\t\t}\n\n\t\tobject.applyMatrix4( _m1$1 );\n\n\t\tthis.add( object );\n\n\t\tobject.updateWorldMatrix( false, true );\n\n\t\treturn this;\n\n\t}\n\n\tgetObjectById( id ) {\n\n\t\treturn this.getObjectByProperty( 'id', id );\n\n\t}\n\n\tgetObjectByName( name ) {\n\n\t\treturn this.getObjectByProperty( 'name', name );\n\n\t}\n\n\tgetObjectByProperty( name, value ) {\n\n\t\tif ( this[ name ] === value ) return this;\n\n\t\tfor ( let i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tconst child = this.children[ i ];\n\t\t\tconst object = child.getObjectByProperty( name, value );\n\n\t\t\tif ( object !== undefined ) {\n\n\t\t\t\treturn object;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t}\n\n\tgetWorldPosition( target ) {\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\treturn target.setFromMatrixPosition( this.matrixWorld );\n\n\t}\n\n\tgetWorldQuaternion( target ) {\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\tthis.matrixWorld.decompose( _position$3, target, _scale$2 );\n\n\t\treturn target;\n\n\t}\n\n\tgetWorldScale( target ) {\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\tthis.matrixWorld.decompose( _position$3, _quaternion$2, target );\n\n\t\treturn target;\n\n\t}\n\n\tgetWorldDirection( target ) {\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\tconst e = this.matrixWorld.elements;\n\n\t\treturn target.set( e[ 8 ], e[ 9 ], e[ 10 ] ).normalize();\n\n\t}\n\n\traycast( /* raycaster, intersects */ ) {}\n\n\ttraverse( callback ) {\n\n\t\tcallback( this );\n\n\t\tconst children = this.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverse( callback );\n\n\t\t}\n\n\t}\n\n\ttraverseVisible( callback ) {\n\n\t\tif ( this.visible === false ) return;\n\n\t\tcallback( this );\n\n\t\tconst children = this.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverseVisible( callback );\n\n\t\t}\n\n\t}\n\n\ttraverseAncestors( callback ) {\n\n\t\tconst parent = this.parent;\n\n\t\tif ( parent !== null ) {\n\n\t\t\tcallback( parent );\n\n\t\t\tparent.traverseAncestors( callback );\n\n\t\t}\n\n\t}\n\n\tupdateMatrix() {\n\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\n\n\t\tthis.matrixWorldNeedsUpdate = true;\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.matrixWorldNeedsUpdate || force ) {\n\n\t\t\tif ( this.parent === null ) {\n\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t\t} else {\n\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t\t}\n\n\t\t\tthis.matrixWorldNeedsUpdate = false;\n\n\t\t\tforce = true;\n\n\t\t}\n\n\t\t// update children\n\n\t\tconst children = this.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tconst child = children[ i ];\n\n\t\t\tif ( child.matrixWorldAutoUpdate === true || force === true ) {\n\n\t\t\t\tchild.updateMatrixWorld( force );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tupdateWorldMatrix( updateParents, updateChildren ) {\n\n\t\tconst parent = this.parent;\n\n\t\tif ( updateParents === true && parent !== null && parent.matrixWorldAutoUpdate === true ) {\n\n\t\t\tparent.updateWorldMatrix( true, false );\n\n\t\t}\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.parent === null ) {\n\n\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t} else {\n\n\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t}\n\n\t\t// update children\n\n\t\tif ( updateChildren === true ) {\n\n\t\t\tconst children = this.children;\n\n\t\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\t\tconst child = children[ i ];\n\n\t\t\t\tif ( child.matrixWorldAutoUpdate === true ) {\n\n\t\t\t\t\tchild.updateWorldMatrix( false, true );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\t// meta is a string when called from JSON.stringify\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tconst output = {};\n\n\t\t// meta is a hash used to collect geometries, materials.\n\t\t// not providing it implies that this is the root object\n\t\t// being serialized.\n\t\tif ( isRootObject ) {\n\n\t\t\t// initialize meta obj\n\t\t\tmeta = {\n\t\t\t\tgeometries: {},\n\t\t\t\tmaterials: {},\n\t\t\t\ttextures: {},\n\t\t\t\timages: {},\n\t\t\t\tshapes: {},\n\t\t\t\tskeletons: {},\n\t\t\t\tanimations: {},\n\t\t\t\tnodes: {}\n\t\t\t};\n\n\t\t\toutput.metadata = {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Object',\n\t\t\t\tgenerator: 'Object3D.toJSON'\n\t\t\t};\n\n\t\t}\n\n\t\t// standard Object3D serialization\n\n\t\tconst object = {};\n\n\t\tobject.uuid = this.uuid;\n\t\tobject.type = this.type;\n\n\t\tif ( this.name !== '' ) object.name = this.name;\n\t\tif ( this.castShadow === true ) object.castShadow = true;\n\t\tif ( this.receiveShadow === true ) object.receiveShadow = true;\n\t\tif ( this.visible === false ) object.visible = false;\n\t\tif ( this.frustumCulled === false ) object.frustumCulled = false;\n\t\tif ( this.renderOrder !== 0 ) object.renderOrder = this.renderOrder;\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) object.userData = this.userData;\n\n\t\tobject.layers = this.layers.mask;\n\t\tobject.matrix = this.matrix.toArray();\n\n\t\tif ( this.matrixAutoUpdate === false ) object.matrixAutoUpdate = false;\n\n\t\t// object specific properties\n\n\t\tif ( this.isInstancedMesh ) {\n\n\t\t\tobject.type = 'InstancedMesh';\n\t\t\tobject.count = this.count;\n\t\t\tobject.instanceMatrix = this.instanceMatrix.toJSON();\n\t\t\tif ( this.instanceColor !== null ) object.instanceColor = this.instanceColor.toJSON();\n\n\t\t}\n\n\t\t//\n\n\t\tfunction serialize( library, element ) {\n\n\t\t\tif ( library[ element.uuid ] === undefined ) {\n\n\t\t\t\tlibrary[ element.uuid ] = element.toJSON( meta );\n\n\t\t\t}\n\n\t\t\treturn element.uuid;\n\n\t\t}\n\n\t\tif ( this.isScene ) {\n\n\t\t\tif ( this.background ) {\n\n\t\t\t\tif ( this.background.isColor ) {\n\n\t\t\t\t\tobject.background = this.background.toJSON();\n\n\t\t\t\t} else if ( this.background.isTexture ) {\n\n\t\t\t\t\tobject.background = this.background.toJSON( meta ).uuid;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( this.environment && this.environment.isTexture && this.environment.isRenderTargetTexture !== true ) {\n\n\t\t\t\tobject.environment = this.environment.toJSON( meta ).uuid;\n\n\t\t\t}\n\n\t\t} else if ( this.isMesh || this.isLine || this.isPoints ) {\n\n\t\t\tobject.geometry = serialize( meta.geometries, this.geometry );\n\n\t\t\tconst parameters = this.geometry.parameters;\n\n\t\t\tif ( parameters !== undefined && parameters.shapes !== undefined ) {\n\n\t\t\t\tconst shapes = parameters.shapes;\n\n\t\t\t\tif ( Array.isArray( shapes ) ) {\n\n\t\t\t\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\t\t\t\tconst shape = shapes[ i ];\n\n\t\t\t\t\t\tserialize( meta.shapes, shape );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tserialize( meta.shapes, shapes );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.isSkinnedMesh ) {\n\n\t\t\tobject.bindMode = this.bindMode;\n\t\t\tobject.bindMatrix = this.bindMatrix.toArray();\n\n\t\t\tif ( this.skeleton !== undefined ) {\n\n\t\t\t\tserialize( meta.skeletons, this.skeleton );\n\n\t\t\t\tobject.skeleton = this.skeleton.uuid;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.material !== undefined ) {\n\n\t\t\tif ( Array.isArray( this.material ) ) {\n\n\t\t\t\tconst uuids = [];\n\n\t\t\t\tfor ( let i = 0, l = this.material.length; i < l; i ++ ) {\n\n\t\t\t\t\tuuids.push( serialize( meta.materials, this.material[ i ] ) );\n\n\t\t\t\t}\n\n\t\t\t\tobject.material = uuids;\n\n\t\t\t} else {\n\n\t\t\t\tobject.material = serialize( meta.materials, this.material );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.children.length > 0 ) {\n\n\t\t\tobject.children = [];\n\n\t\t\tfor ( let i = 0; i < this.children.length; i ++ ) {\n\n\t\t\t\tobject.children.push( this.children[ i ].toJSON( meta ).object );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.animations.length > 0 ) {\n\n\t\t\tobject.animations = [];\n\n\t\t\tfor ( let i = 0; i < this.animations.length; i ++ ) {\n\n\t\t\t\tconst animation = this.animations[ i ];\n\n\t\t\t\tobject.animations.push( serialize( meta.animations, animation ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( isRootObject ) {\n\n\t\t\tconst geometries = extractFromCache( meta.geometries );\n\t\t\tconst materials = extractFromCache( meta.materials );\n\t\t\tconst textures = extractFromCache( meta.textures );\n\t\t\tconst images = extractFromCache( meta.images );\n\t\t\tconst shapes = extractFromCache( meta.shapes );\n\t\t\tconst skeletons = extractFromCache( meta.skeletons );\n\t\t\tconst animations = extractFromCache( meta.animations );\n\t\t\tconst nodes = extractFromCache( meta.nodes );\n\n\t\t\tif ( geometries.length > 0 ) output.geometries = geometries;\n\t\t\tif ( materials.length > 0 ) output.materials = materials;\n\t\t\tif ( textures.length > 0 ) output.textures = textures;\n\t\t\tif ( images.length > 0 ) output.images = images;\n\t\t\tif ( shapes.length > 0 ) output.shapes = shapes;\n\t\t\tif ( skeletons.length > 0 ) output.skeletons = skeletons;\n\t\t\tif ( animations.length > 0 ) output.animations = animations;\n\t\t\tif ( nodes.length > 0 ) output.nodes = nodes;\n\n\t\t}\n\n\t\toutput.object = object;\n\n\t\treturn output;\n\n\t\t// extract data from the cache hash\n\t\t// remove metadata on each item\n\t\t// and return as array\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tconst values = [];\n\t\t\tfor ( const key in cache ) {\n\n\t\t\t\tconst data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\n\t\t\treturn values;\n\n\t\t}\n\n\t}\n\n\tclone( recursive ) {\n\n\t\treturn new this.constructor().copy( this, recursive );\n\n\t}\n\n\tcopy( source, recursive = true ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.up.copy( source.up );\n\n\t\tthis.position.copy( source.position );\n\t\tthis.rotation.order = source.rotation.order;\n\t\tthis.quaternion.copy( source.quaternion );\n\t\tthis.scale.copy( source.scale );\n\n\t\tthis.matrix.copy( source.matrix );\n\t\tthis.matrixWorld.copy( source.matrixWorld );\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\n\n\t\tthis.matrixWorldAutoUpdate = source.matrixWorldAutoUpdate;\n\n\t\tthis.layers.mask = source.layers.mask;\n\t\tthis.visible = source.visible;\n\n\t\tthis.castShadow = source.castShadow;\n\t\tthis.receiveShadow = source.receiveShadow;\n\n\t\tthis.frustumCulled = source.frustumCulled;\n\t\tthis.renderOrder = source.renderOrder;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\tif ( recursive === true ) {\n\n\t\t\tfor ( let i = 0; i < source.children.length; i ++ ) {\n\n\t\t\t\tconst child = source.children[ i ];\n\t\t\t\tthis.add( child.clone() );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\nObject3D.DefaultUp = /*@__PURE__*/ new Vector3( 0, 1, 0 );\nObject3D.DefaultMatrixAutoUpdate = true;\nObject3D.DefaultMatrixWorldAutoUpdate = true;\n\nconst _v0$1 = /*@__PURE__*/ new Vector3();\nconst _v1$3 = /*@__PURE__*/ new Vector3();\nconst _v2$2 = /*@__PURE__*/ new Vector3();\nconst _v3$1 = /*@__PURE__*/ new Vector3();\n\nconst _vab = /*@__PURE__*/ new Vector3();\nconst _vac = /*@__PURE__*/ new Vector3();\nconst _vbc = /*@__PURE__*/ new Vector3();\nconst _vap = /*@__PURE__*/ new Vector3();\nconst _vbp = /*@__PURE__*/ new Vector3();\nconst _vcp = /*@__PURE__*/ new Vector3();\n\nclass Triangle {\n\n\tconstructor( a = new Vector3(), b = new Vector3(), c = new Vector3() ) {\n\n\t\tthis.a = a;\n\t\tthis.b = b;\n\t\tthis.c = c;\n\n\t}\n\n\tstatic getNormal( a, b, c, target ) {\n\n\t\ttarget.subVectors( c, b );\n\t\t_v0$1.subVectors( a, b );\n\t\ttarget.cross( _v0$1 );\n\n\t\tconst targetLengthSq = target.lengthSq();\n\t\tif ( targetLengthSq > 0 ) {\n\n\t\t\treturn target.multiplyScalar( 1 / Math.sqrt( targetLengthSq ) );\n\n\t\t}\n\n\t\treturn target.set( 0, 0, 0 );\n\n\t}\n\n\t// static/instance method to calculate barycentric coordinates\n\t// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\n\tstatic getBarycoord( point, a, b, c, target ) {\n\n\t\t_v0$1.subVectors( c, a );\n\t\t_v1$3.subVectors( b, a );\n\t\t_v2$2.subVectors( point, a );\n\n\t\tconst dot00 = _v0$1.dot( _v0$1 );\n\t\tconst dot01 = _v0$1.dot( _v1$3 );\n\t\tconst dot02 = _v0$1.dot( _v2$2 );\n\t\tconst dot11 = _v1$3.dot( _v1$3 );\n\t\tconst dot12 = _v1$3.dot( _v2$2 );\n\n\t\tconst denom = ( dot00 * dot11 - dot01 * dot01 );\n\n\t\t// collinear or singular triangle\n\t\tif ( denom === 0 ) {\n\n\t\t\t// arbitrary location outside of triangle?\n\t\t\t// not sure if this is the best idea, maybe should be returning undefined\n\t\t\treturn target.set( - 2, - 1, - 1 );\n\n\t\t}\n\n\t\tconst invDenom = 1 / denom;\n\t\tconst u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\n\t\tconst v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\n\n\t\t// barycentric coordinates must always sum to 1\n\t\treturn target.set( 1 - u - v, v, u );\n\n\t}\n\n\tstatic containsPoint( point, a, b, c ) {\n\n\t\tthis.getBarycoord( point, a, b, c, _v3$1 );\n\n\t\treturn ( _v3$1.x >= 0 ) && ( _v3$1.y >= 0 ) && ( ( _v3$1.x + _v3$1.y ) <= 1 );\n\n\t}\n\n\tstatic getUV( point, p1, p2, p3, uv1, uv2, uv3, target ) {\n\n\t\tthis.getBarycoord( point, p1, p2, p3, _v3$1 );\n\n\t\ttarget.set( 0, 0 );\n\t\ttarget.addScaledVector( uv1, _v3$1.x );\n\t\ttarget.addScaledVector( uv2, _v3$1.y );\n\t\ttarget.addScaledVector( uv3, _v3$1.z );\n\n\t\treturn target;\n\n\t}\n\n\tstatic isFrontFacing( a, b, c, direction ) {\n\n\t\t_v0$1.subVectors( c, b );\n\t\t_v1$3.subVectors( a, b );\n\n\t\t// strictly front facing\n\t\treturn ( _v0$1.cross( _v1$3 ).dot( direction ) < 0 ) ? true : false;\n\n\t}\n\n\tset( a, b, c ) {\n\n\t\tthis.a.copy( a );\n\t\tthis.b.copy( b );\n\t\tthis.c.copy( c );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPointsAndIndices( points, i0, i1, i2 ) {\n\n\t\tthis.a.copy( points[ i0 ] );\n\t\tthis.b.copy( points[ i1 ] );\n\t\tthis.c.copy( points[ i2 ] );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromAttributeAndIndices( attribute, i0, i1, i2 ) {\n\n\t\tthis.a.fromBufferAttribute( attribute, i0 );\n\t\tthis.b.fromBufferAttribute( attribute, i1 );\n\t\tthis.c.fromBufferAttribute( attribute, i2 );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( triangle ) {\n\n\t\tthis.a.copy( triangle.a );\n\t\tthis.b.copy( triangle.b );\n\t\tthis.c.copy( triangle.c );\n\n\t\treturn this;\n\n\t}\n\n\tgetArea() {\n\n\t\t_v0$1.subVectors( this.c, this.b );\n\t\t_v1$3.subVectors( this.a, this.b );\n\n\t\treturn _v0$1.cross( _v1$3 ).length() * 0.5;\n\n\t}\n\n\tgetMidpoint( target ) {\n\n\t\treturn target.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\n\n\t}\n\n\tgetNormal( target ) {\n\n\t\treturn Triangle.getNormal( this.a, this.b, this.c, target );\n\n\t}\n\n\tgetPlane( target ) {\n\n\t\treturn target.setFromCoplanarPoints( this.a, this.b, this.c );\n\n\t}\n\n\tgetBarycoord( point, target ) {\n\n\t\treturn Triangle.getBarycoord( point, this.a, this.b, this.c, target );\n\n\t}\n\n\tgetUV( point, uv1, uv2, uv3, target ) {\n\n\t\treturn Triangle.getUV( point, this.a, this.b, this.c, uv1, uv2, uv3, target );\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn Triangle.containsPoint( point, this.a, this.b, this.c );\n\n\t}\n\n\tisFrontFacing( direction ) {\n\n\t\treturn Triangle.isFrontFacing( this.a, this.b, this.c, direction );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn box.intersectsTriangle( this );\n\n\t}\n\n\tclosestPointToPoint( p, target ) {\n\n\t\tconst a = this.a, b = this.b, c = this.c;\n\t\tlet v, w;\n\n\t\t// algorithm thanks to Real-Time Collision Detection by Christer Ericson,\n\t\t// published by Morgan Kaufmann Publishers, (c) 2005 Elsevier Inc.,\n\t\t// under the accompanying license; see chapter 5.1.5 for detailed explanation.\n\t\t// basically, we're distinguishing which of the voronoi regions of the triangle\n\t\t// the point lies in with the minimum amount of redundant computation.\n\n\t\t_vab.subVectors( b, a );\n\t\t_vac.subVectors( c, a );\n\t\t_vap.subVectors( p, a );\n\t\tconst d1 = _vab.dot( _vap );\n\t\tconst d2 = _vac.dot( _vap );\n\t\tif ( d1 <= 0 && d2 <= 0 ) {\n\n\t\t\t// vertex region of A; barycentric coords (1, 0, 0)\n\t\t\treturn target.copy( a );\n\n\t\t}\n\n\t\t_vbp.subVectors( p, b );\n\t\tconst d3 = _vab.dot( _vbp );\n\t\tconst d4 = _vac.dot( _vbp );\n\t\tif ( d3 >= 0 && d4 <= d3 ) {\n\n\t\t\t// vertex region of B; barycentric coords (0, 1, 0)\n\t\t\treturn target.copy( b );\n\n\t\t}\n\n\t\tconst vc = d1 * d4 - d3 * d2;\n\t\tif ( vc <= 0 && d1 >= 0 && d3 <= 0 ) {\n\n\t\t\tv = d1 / ( d1 - d3 );\n\t\t\t// edge region of AB; barycentric coords (1-v, v, 0)\n\t\t\treturn target.copy( a ).addScaledVector( _vab, v );\n\n\t\t}\n\n\t\t_vcp.subVectors( p, c );\n\t\tconst d5 = _vab.dot( _vcp );\n\t\tconst d6 = _vac.dot( _vcp );\n\t\tif ( d6 >= 0 && d5 <= d6 ) {\n\n\t\t\t// vertex region of C; barycentric coords (0, 0, 1)\n\t\t\treturn target.copy( c );\n\n\t\t}\n\n\t\tconst vb = d5 * d2 - d1 * d6;\n\t\tif ( vb <= 0 && d2 >= 0 && d6 <= 0 ) {\n\n\t\t\tw = d2 / ( d2 - d6 );\n\t\t\t// edge region of AC; barycentric coords (1-w, 0, w)\n\t\t\treturn target.copy( a ).addScaledVector( _vac, w );\n\n\t\t}\n\n\t\tconst va = d3 * d6 - d5 * d4;\n\t\tif ( va <= 0 && ( d4 - d3 ) >= 0 && ( d5 - d6 ) >= 0 ) {\n\n\t\t\t_vbc.subVectors( c, b );\n\t\t\tw = ( d4 - d3 ) / ( ( d4 - d3 ) + ( d5 - d6 ) );\n\t\t\t// edge region of BC; barycentric coords (0, 1-w, w)\n\t\t\treturn target.copy( b ).addScaledVector( _vbc, w ); // edge region of BC\n\n\t\t}\n\n\t\t// face region\n\t\tconst denom = 1 / ( va + vb + vc );\n\t\t// u = va * denom\n\t\tv = vb * denom;\n\t\tw = vc * denom;\n\n\t\treturn target.copy( a ).addScaledVector( _vab, v ).addScaledVector( _vac, w );\n\n\t}\n\n\tequals( triangle ) {\n\n\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\n\n\t}\n\n}\n\nlet materialId = 0;\n\nclass Material extends EventDispatcher {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isMaterial = true;\n\n\t\tObject.defineProperty( this, 'id', { value: materialId ++ } );\n\n\t\tthis.uuid = generateUUID();\n\n\t\tthis.name = '';\n\t\tthis.type = 'Material';\n\n\t\tthis.blending = NormalBlending;\n\t\tthis.side = FrontSide;\n\t\tthis.vertexColors = false;\n\n\t\tthis.opacity = 1;\n\t\tthis.transparent = false;\n\n\t\tthis.blendSrc = SrcAlphaFactor;\n\t\tthis.blendDst = OneMinusSrcAlphaFactor;\n\t\tthis.blendEquation = AddEquation;\n\t\tthis.blendSrcAlpha = null;\n\t\tthis.blendDstAlpha = null;\n\t\tthis.blendEquationAlpha = null;\n\n\t\tthis.depthFunc = LessEqualDepth;\n\t\tthis.depthTest = true;\n\t\tthis.depthWrite = true;\n\n\t\tthis.stencilWriteMask = 0xff;\n\t\tthis.stencilFunc = AlwaysStencilFunc;\n\t\tthis.stencilRef = 0;\n\t\tthis.stencilFuncMask = 0xff;\n\t\tthis.stencilFail = KeepStencilOp;\n\t\tthis.stencilZFail = KeepStencilOp;\n\t\tthis.stencilZPass = KeepStencilOp;\n\t\tthis.stencilWrite = false;\n\n\t\tthis.clippingPlanes = null;\n\t\tthis.clipIntersection = false;\n\t\tthis.clipShadows = false;\n\n\t\tthis.shadowSide = null;\n\n\t\tthis.colorWrite = true;\n\n\t\tthis.precision = null; // override the renderer's default precision for this material\n\n\t\tthis.polygonOffset = false;\n\t\tthis.polygonOffsetFactor = 0;\n\t\tthis.polygonOffsetUnits = 0;\n\n\t\tthis.dithering = false;\n\n\t\tthis.alphaToCoverage = false;\n\t\tthis.premultipliedAlpha = false;\n\n\t\tthis.visible = true;\n\n\t\tthis.toneMapped = true;\n\n\t\tthis.userData = {};\n\n\t\tthis.version = 0;\n\n\t\tthis._alphaTest = 0;\n\n\t}\n\n\tget alphaTest() {\n\n\t\treturn this._alphaTest;\n\n\t}\n\n\tset alphaTest( value ) {\n\n\t\tif ( this._alphaTest > 0 !== value > 0 ) {\n\n\t\t\tthis.version ++;\n\n\t\t}\n\n\t\tthis._alphaTest = value;\n\n\t}\n\n\tonBuild( /* shaderobject, renderer */ ) {}\n\n\tonBeforeRender( /* renderer, scene, camera, geometry, object, group */ ) {}\n\n\tonBeforeCompile( /* shaderobject, renderer */ ) {}\n\n\tcustomProgramCacheKey() {\n\n\t\treturn this.onBeforeCompile.toString();\n\n\t}\n\n\tsetValues( values ) {\n\n\t\tif ( values === undefined ) return;\n\n\t\tfor ( const key in values ) {\n\n\t\t\tconst newValue = values[ key ];\n\n\t\t\tif ( newValue === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Material: \\'' + key + '\\' parameter is undefined.' );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tconst currentValue = this[ key ];\n\n\t\t\tif ( currentValue === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.' + this.type + ': \\'' + key + '\\' is not a property of this material.' );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( currentValue && currentValue.isColor ) {\n\n\t\t\t\tcurrentValue.set( newValue );\n\n\t\t\t} else if ( ( currentValue && currentValue.isVector3 ) && ( newValue && newValue.isVector3 ) ) {\n\n\t\t\t\tcurrentValue.copy( newValue );\n\n\t\t\t} else {\n\n\t\t\t\tthis[ key ] = newValue;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( isRootObject ) {\n\n\t\t\tmeta = {\n\t\t\t\ttextures: {},\n\t\t\t\timages: {}\n\t\t\t};\n\n\t\t}\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Material',\n\t\t\t\tgenerator: 'Material.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard Material serialization\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.color && this.color.isColor ) data.color = this.color.getHex();\n\n\t\tif ( this.roughness !== undefined ) data.roughness = this.roughness;\n\t\tif ( this.metalness !== undefined ) data.metalness = this.metalness;\n\n\t\tif ( this.sheen !== undefined ) data.sheen = this.sheen;\n\t\tif ( this.sheenColor && this.sheenColor.isColor ) data.sheenColor = this.sheenColor.getHex();\n\t\tif ( this.sheenRoughness !== undefined ) data.sheenRoughness = this.sheenRoughness;\n\t\tif ( this.emissive && this.emissive.isColor ) data.emissive = this.emissive.getHex();\n\t\tif ( this.emissiveIntensity && this.emissiveIntensity !== 1 ) data.emissiveIntensity = this.emissiveIntensity;\n\n\t\tif ( this.specular && this.specular.isColor ) data.specular = this.specular.getHex();\n\t\tif ( this.specularIntensity !== undefined ) data.specularIntensity = this.specularIntensity;\n\t\tif ( this.specularColor && this.specularColor.isColor ) data.specularColor = this.specularColor.getHex();\n\t\tif ( this.shininess !== undefined ) data.shininess = this.shininess;\n\t\tif ( this.clearcoat !== undefined ) data.clearcoat = this.clearcoat;\n\t\tif ( this.clearcoatRoughness !== undefined ) data.clearcoatRoughness = this.clearcoatRoughness;\n\n\t\tif ( this.clearcoatMap && this.clearcoatMap.isTexture ) {\n\n\t\t\tdata.clearcoatMap = this.clearcoatMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.clearcoatRoughnessMap && this.clearcoatRoughnessMap.isTexture ) {\n\n\t\t\tdata.clearcoatRoughnessMap = this.clearcoatRoughnessMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.clearcoatNormalMap && this.clearcoatNormalMap.isTexture ) {\n\n\t\t\tdata.clearcoatNormalMap = this.clearcoatNormalMap.toJSON( meta ).uuid;\n\t\t\tdata.clearcoatNormalScale = this.clearcoatNormalScale.toArray();\n\n\t\t}\n\n\t\tif ( this.iridescence !== undefined ) data.iridescence = this.iridescence;\n\t\tif ( this.iridescenceIOR !== undefined ) data.iridescenceIOR = this.iridescenceIOR;\n\t\tif ( this.iridescenceThicknessRange !== undefined ) data.iridescenceThicknessRange = this.iridescenceThicknessRange;\n\n\t\tif ( this.iridescenceMap && this.iridescenceMap.isTexture ) {\n\n\t\t\tdata.iridescenceMap = this.iridescenceMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.iridescenceThicknessMap && this.iridescenceThicknessMap.isTexture ) {\n\n\t\t\tdata.iridescenceThicknessMap = this.iridescenceThicknessMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.map && this.map.isTexture ) data.map = this.map.toJSON( meta ).uuid;\n\t\tif ( this.matcap && this.matcap.isTexture ) data.matcap = this.matcap.toJSON( meta ).uuid;\n\t\tif ( this.alphaMap && this.alphaMap.isTexture ) data.alphaMap = this.alphaMap.toJSON( meta ).uuid;\n\n\t\tif ( this.lightMap && this.lightMap.isTexture ) {\n\n\t\t\tdata.lightMap = this.lightMap.toJSON( meta ).uuid;\n\t\t\tdata.lightMapIntensity = this.lightMapIntensity;\n\n\t\t}\n\n\t\tif ( this.aoMap && this.aoMap.isTexture ) {\n\n\t\t\tdata.aoMap = this.aoMap.toJSON( meta ).uuid;\n\t\t\tdata.aoMapIntensity = this.aoMapIntensity;\n\n\t\t}\n\n\t\tif ( this.bumpMap && this.bumpMap.isTexture ) {\n\n\t\t\tdata.bumpMap = this.bumpMap.toJSON( meta ).uuid;\n\t\t\tdata.bumpScale = this.bumpScale;\n\n\t\t}\n\n\t\tif ( this.normalMap && this.normalMap.isTexture ) {\n\n\t\t\tdata.normalMap = this.normalMap.toJSON( meta ).uuid;\n\t\t\tdata.normalMapType = this.normalMapType;\n\t\t\tdata.normalScale = this.normalScale.toArray();\n\n\t\t}\n\n\t\tif ( this.displacementMap && this.displacementMap.isTexture ) {\n\n\t\t\tdata.displacementMap = this.displacementMap.toJSON( meta ).uuid;\n\t\t\tdata.displacementScale = this.displacementScale;\n\t\t\tdata.displacementBias = this.displacementBias;\n\n\t\t}\n\n\t\tif ( this.roughnessMap && this.roughnessMap.isTexture ) data.roughnessMap = this.roughnessMap.toJSON( meta ).uuid;\n\t\tif ( this.metalnessMap && this.metalnessMap.isTexture ) data.metalnessMap = this.metalnessMap.toJSON( meta ).uuid;\n\n\t\tif ( this.emissiveMap && this.emissiveMap.isTexture ) data.emissiveMap = this.emissiveMap.toJSON( meta ).uuid;\n\t\tif ( this.specularMap && this.specularMap.isTexture ) data.specularMap = this.specularMap.toJSON( meta ).uuid;\n\t\tif ( this.specularIntensityMap && this.specularIntensityMap.isTexture ) data.specularIntensityMap = this.specularIntensityMap.toJSON( meta ).uuid;\n\t\tif ( this.specularColorMap && this.specularColorMap.isTexture ) data.specularColorMap = this.specularColorMap.toJSON( meta ).uuid;\n\n\t\tif ( this.envMap && this.envMap.isTexture ) {\n\n\t\t\tdata.envMap = this.envMap.toJSON( meta ).uuid;\n\n\t\t\tif ( this.combine !== undefined ) data.combine = this.combine;\n\n\t\t}\n\n\t\tif ( this.envMapIntensity !== undefined ) data.envMapIntensity = this.envMapIntensity;\n\t\tif ( this.reflectivity !== undefined ) data.reflectivity = this.reflectivity;\n\t\tif ( this.refractionRatio !== undefined ) data.refractionRatio = this.refractionRatio;\n\n\t\tif ( this.gradientMap && this.gradientMap.isTexture ) {\n\n\t\t\tdata.gradientMap = this.gradientMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.transmission !== undefined ) data.transmission = this.transmission;\n\t\tif ( this.transmissionMap && this.transmissionMap.isTexture ) data.transmissionMap = this.transmissionMap.toJSON( meta ).uuid;\n\t\tif ( this.thickness !== undefined ) data.thickness = this.thickness;\n\t\tif ( this.thicknessMap && this.thicknessMap.isTexture ) data.thicknessMap = this.thicknessMap.toJSON( meta ).uuid;\n\t\tif ( this.attenuationDistance !== undefined ) data.attenuationDistance = this.attenuationDistance;\n\t\tif ( this.attenuationColor !== undefined ) data.attenuationColor = this.attenuationColor.getHex();\n\n\t\tif ( this.size !== undefined ) data.size = this.size;\n\t\tif ( this.shadowSide !== null ) data.shadowSide = this.shadowSide;\n\t\tif ( this.sizeAttenuation !== undefined ) data.sizeAttenuation = this.sizeAttenuation;\n\n\t\tif ( this.blending !== NormalBlending ) data.blending = this.blending;\n\t\tif ( this.side !== FrontSide ) data.side = this.side;\n\t\tif ( this.vertexColors ) data.vertexColors = true;\n\n\t\tif ( this.opacity < 1 ) data.opacity = this.opacity;\n\t\tif ( this.transparent === true ) data.transparent = this.transparent;\n\n\t\tdata.depthFunc = this.depthFunc;\n\t\tdata.depthTest = this.depthTest;\n\t\tdata.depthWrite = this.depthWrite;\n\t\tdata.colorWrite = this.colorWrite;\n\n\t\tdata.stencilWrite = this.stencilWrite;\n\t\tdata.stencilWriteMask = this.stencilWriteMask;\n\t\tdata.stencilFunc = this.stencilFunc;\n\t\tdata.stencilRef = this.stencilRef;\n\t\tdata.stencilFuncMask = this.stencilFuncMask;\n\t\tdata.stencilFail = this.stencilFail;\n\t\tdata.stencilZFail = this.stencilZFail;\n\t\tdata.stencilZPass = this.stencilZPass;\n\n\t\t// rotation (SpriteMaterial)\n\t\tif ( this.rotation !== undefined && this.rotation !== 0 ) data.rotation = this.rotation;\n\n\t\tif ( this.polygonOffset === true ) data.polygonOffset = true;\n\t\tif ( this.polygonOffsetFactor !== 0 ) data.polygonOffsetFactor = this.polygonOffsetFactor;\n\t\tif ( this.polygonOffsetUnits !== 0 ) data.polygonOffsetUnits = this.polygonOffsetUnits;\n\n\t\tif ( this.linewidth !== undefined && this.linewidth !== 1 ) data.linewidth = this.linewidth;\n\t\tif ( this.dashSize !== undefined ) data.dashSize = this.dashSize;\n\t\tif ( this.gapSize !== undefined ) data.gapSize = this.gapSize;\n\t\tif ( this.scale !== undefined ) data.scale = this.scale;\n\n\t\tif ( this.dithering === true ) data.dithering = true;\n\n\t\tif ( this.alphaTest > 0 ) data.alphaTest = this.alphaTest;\n\t\tif ( this.alphaToCoverage === true ) data.alphaToCoverage = this.alphaToCoverage;\n\t\tif ( this.premultipliedAlpha === true ) data.premultipliedAlpha = this.premultipliedAlpha;\n\n\t\tif ( this.wireframe === true ) data.wireframe = this.wireframe;\n\t\tif ( this.wireframeLinewidth > 1 ) data.wireframeLinewidth = this.wireframeLinewidth;\n\t\tif ( this.wireframeLinecap !== 'round' ) data.wireframeLinecap = this.wireframeLinecap;\n\t\tif ( this.wireframeLinejoin !== 'round' ) data.wireframeLinejoin = this.wireframeLinejoin;\n\n\t\tif ( this.flatShading === true ) data.flatShading = this.flatShading;\n\n\t\tif ( this.visible === false ) data.visible = false;\n\n\t\tif ( this.toneMapped === false ) data.toneMapped = false;\n\n\t\tif ( this.fog === false ) data.fog = false;\n\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) data.userData = this.userData;\n\n\t\t// TODO: Copied from Object3D.toJSON\n\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tconst values = [];\n\n\t\t\tfor ( const key in cache ) {\n\n\t\t\t\tconst data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\n\t\t\treturn values;\n\n\t\t}\n\n\t\tif ( isRootObject ) {\n\n\t\t\tconst textures = extractFromCache( meta.textures );\n\t\t\tconst images = extractFromCache( meta.images );\n\n\t\t\tif ( textures.length > 0 ) data.textures = textures;\n\t\t\tif ( images.length > 0 ) data.images = images;\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.blending = source.blending;\n\t\tthis.side = source.side;\n\t\tthis.vertexColors = source.vertexColors;\n\n\t\tthis.opacity = source.opacity;\n\t\tthis.transparent = source.transparent;\n\n\t\tthis.blendSrc = source.blendSrc;\n\t\tthis.blendDst = source.blendDst;\n\t\tthis.blendEquation = source.blendEquation;\n\t\tthis.blendSrcAlpha = source.blendSrcAlpha;\n\t\tthis.blendDstAlpha = source.blendDstAlpha;\n\t\tthis.blendEquationAlpha = source.blendEquationAlpha;\n\n\t\tthis.depthFunc = source.depthFunc;\n\t\tthis.depthTest = source.depthTest;\n\t\tthis.depthWrite = source.depthWrite;\n\n\t\tthis.stencilWriteMask = source.stencilWriteMask;\n\t\tthis.stencilFunc = source.stencilFunc;\n\t\tthis.stencilRef = source.stencilRef;\n\t\tthis.stencilFuncMask = source.stencilFuncMask;\n\t\tthis.stencilFail = source.stencilFail;\n\t\tthis.stencilZFail = source.stencilZFail;\n\t\tthis.stencilZPass = source.stencilZPass;\n\t\tthis.stencilWrite = source.stencilWrite;\n\n\t\tconst srcPlanes = source.clippingPlanes;\n\t\tlet dstPlanes = null;\n\n\t\tif ( srcPlanes !== null ) {\n\n\t\t\tconst n = srcPlanes.length;\n\t\t\tdstPlanes = new Array( n );\n\n\t\t\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\t\t\tdstPlanes[ i ] = srcPlanes[ i ].clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.clippingPlanes = dstPlanes;\n\t\tthis.clipIntersection = source.clipIntersection;\n\t\tthis.clipShadows = source.clipShadows;\n\n\t\tthis.shadowSide = source.shadowSide;\n\n\t\tthis.colorWrite = source.colorWrite;\n\n\t\tthis.precision = source.precision;\n\n\t\tthis.polygonOffset = source.polygonOffset;\n\t\tthis.polygonOffsetFactor = source.polygonOffsetFactor;\n\t\tthis.polygonOffsetUnits = source.polygonOffsetUnits;\n\n\t\tthis.dithering = source.dithering;\n\n\t\tthis.alphaTest = source.alphaTest;\n\t\tthis.alphaToCoverage = source.alphaToCoverage;\n\t\tthis.premultipliedAlpha = source.premultipliedAlpha;\n\n\t\tthis.visible = source.visible;\n\n\t\tthis.toneMapped = source.toneMapped;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n}\n\nclass MeshBasicMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshBasicMaterial = true;\n\n\t\tthis.type = 'MeshBasicMaterial';\n\n\t\tthis.color = new Color( 0xffffff ); // emissive\n\n\t\tthis.map = null;\n\n\t\tthis.lightMap = null;\n\t\tthis.lightMapIntensity = 1.0;\n\n\t\tthis.aoMap = null;\n\t\tthis.aoMapIntensity = 1.0;\n\n\t\tthis.specularMap = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.envMap = null;\n\t\tthis.combine = MultiplyOperation;\n\t\tthis.reflectivity = 1;\n\t\tthis.refractionRatio = 0.98;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\t\tthis.wireframeLinecap = 'round';\n\t\tthis.wireframeLinejoin = 'round';\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.map = source.map;\n\n\t\tthis.lightMap = source.lightMap;\n\t\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\t\tthis.aoMap = source.aoMap;\n\t\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\t\tthis.specularMap = source.specularMap;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.envMap = source.envMap;\n\t\tthis.combine = source.combine;\n\t\tthis.reflectivity = source.reflectivity;\n\t\tthis.refractionRatio = source.refractionRatio;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _vector$9 = /*@__PURE__*/ new Vector3();\nconst _vector2$1 = /*@__PURE__*/ new Vector2();\n\nclass BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tif ( Array.isArray( array ) ) {\n\n\t\t\tthrow new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\n\n\t\t}\n\n\t\tthis.isBufferAttribute = true;\n\n\t\tthis.name = '';\n\n\t\tthis.array = array;\n\t\tthis.itemSize = itemSize;\n\t\tthis.count = array !== undefined ? array.length / itemSize : 0;\n\t\tthis.normalized = normalized === true;\n\n\t\tthis.usage = StaticDrawUsage;\n\t\tthis.updateRange = { offset: 0, count: - 1 };\n\n\t\tthis.version = 0;\n\n\t}\n\n\tonUploadCallback() {}\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n\tsetUsage( value ) {\n\n\t\tthis.usage = value;\n\n\t\treturn this;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.name = source.name;\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.itemSize = source.itemSize;\n\t\tthis.count = source.count;\n\t\tthis.normalized = source.normalized;\n\n\t\tthis.usage = source.usage;\n\n\t\treturn this;\n\n\t}\n\n\tcopyAt( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.itemSize;\n\t\tindex2 *= attribute.itemSize;\n\n\t\tfor ( let i = 0, l = this.itemSize; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tcopyArray( array ) {\n\n\t\tthis.array.set( array );\n\n\t\treturn this;\n\n\t}\n\n\tapplyMatrix3( m ) {\n\n\t\tif ( this.itemSize === 2 ) {\n\n\t\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t\t_vector2$1.fromBufferAttribute( this, i );\n\t\t\t\t_vector2$1.applyMatrix3( m );\n\n\t\t\t\tthis.setXY( i, _vector2$1.x, _vector2$1.y );\n\n\t\t\t}\n\n\t\t} else if ( this.itemSize === 3 ) {\n\n\t\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t\t_vector$9.fromBufferAttribute( this, i );\n\t\t\t\t_vector$9.applyMatrix3( m );\n\n\t\t\t\tthis.setXYZ( i, _vector$9.x, _vector$9.y, _vector$9.z );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$9.fromBufferAttribute( this, i );\n\n\t\t\t_vector$9.applyMatrix4( m );\n\n\t\t\tthis.setXYZ( i, _vector$9.x, _vector$9.y, _vector$9.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tapplyNormalMatrix( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$9.fromBufferAttribute( this, i );\n\n\t\t\t_vector$9.applyNormalMatrix( m );\n\n\t\t\tthis.setXYZ( i, _vector$9.x, _vector$9.y, _vector$9.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttransformDirection( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$9.fromBufferAttribute( this, i );\n\n\t\t\t_vector$9.transformDirection( m );\n\n\t\t\tthis.setXYZ( i, _vector$9.x, _vector$9.y, _vector$9.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tset( value, offset = 0 ) {\n\n\t\t// Matching BufferAttribute constructor, do not normalize the array.\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t}\n\n\tgetX( index ) {\n\n\t\tlet x = this.array[ index * this.itemSize ];\n\n\t\tif ( this.normalized ) x = denormalize( x, this.array );\n\n\t\treturn x;\n\n\t}\n\n\tsetX( index, x ) {\n\n\t\tif ( this.normalized ) x = normalize( x, this.array );\n\n\t\tthis.array[ index * this.itemSize ] = x;\n\n\t\treturn this;\n\n\t}\n\n\tgetY( index ) {\n\n\t\tlet y = this.array[ index * this.itemSize + 1 ];\n\n\t\tif ( this.normalized ) y = denormalize( y, this.array );\n\n\t\treturn y;\n\n\t}\n\n\tsetY( index, y ) {\n\n\t\tif ( this.normalized ) y = normalize( y, this.array );\n\n\t\tthis.array[ index * this.itemSize + 1 ] = y;\n\n\t\treturn this;\n\n\t}\n\n\tgetZ( index ) {\n\n\t\tlet z = this.array[ index * this.itemSize + 2 ];\n\n\t\tif ( this.normalized ) z = denormalize( z, this.array );\n\n\t\treturn z;\n\n\t}\n\n\tsetZ( index, z ) {\n\n\t\tif ( this.normalized ) z = normalize( z, this.array );\n\n\t\tthis.array[ index * this.itemSize + 2 ] = z;\n\n\t\treturn this;\n\n\t}\n\n\tgetW( index ) {\n\n\t\tlet w = this.array[ index * this.itemSize + 3 ];\n\n\t\tif ( this.normalized ) w = denormalize( w, this.array );\n\n\t\treturn w;\n\n\t}\n\n\tsetW( index, w ) {\n\n\t\tif ( this.normalized ) w = normalize( w, this.array );\n\n\t\tthis.array[ index * this.itemSize + 3 ] = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetXY( index, x, y ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tif ( this.normalized ) {\n\n\t\t\tx = normalize( x, this.array );\n\t\t\ty = normalize( y, this.array );\n\n\t\t}\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetXYZ( index, x, y, z ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tif ( this.normalized ) {\n\n\t\t\tx = normalize( x, this.array );\n\t\t\ty = normalize( y, this.array );\n\t\t\tz = normalize( z, this.array );\n\n\t\t}\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetXYZW( index, x, y, z, w ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tif ( this.normalized ) {\n\n\t\t\tx = normalize( x, this.array );\n\t\t\ty = normalize( y, this.array );\n\t\t\tz = normalize( z, this.array );\n\t\t\tw = normalize( w, this.array );\n\n\t\t}\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\t\tthis.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t}\n\n\tonUpload( callback ) {\n\n\t\tthis.onUploadCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.array, this.itemSize ).copy( this );\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = {\n\t\t\titemSize: this.itemSize,\n\t\t\ttype: this.array.constructor.name,\n\t\t\tarray: Array.from( this.array ),\n\t\t\tnormalized: this.normalized\n\t\t};\n\n\t\tif ( this.name !== '' ) data.name = this.name;\n\t\tif ( this.usage !== StaticDrawUsage ) data.usage = this.usage;\n\t\tif ( this.updateRange.offset !== 0 || this.updateRange.count !== - 1 ) data.updateRange = this.updateRange;\n\n\t\treturn data;\n\n\t}\n\n\t// @deprecated\n\n\tcopyColorsArray() {\n\n\t\tconsole.error( 'THREE.BufferAttribute: copyColorsArray() was removed in r144.' );\n\n\t}\n\n\tcopyVector2sArray() {\n\n\t\tconsole.error( 'THREE.BufferAttribute: copyVector2sArray() was removed in r144.' );\n\n\t}\n\n\tcopyVector3sArray() {\n\n\t\tconsole.error( 'THREE.BufferAttribute: copyVector3sArray() was removed in r144.' );\n\n\t}\n\n\tcopyVector4sArray() {\n\n\t\tconsole.error( 'THREE.BufferAttribute: copyVector4sArray() was removed in r144.' );\n\n\t}\n\n}\n\n//\n\nclass Int8BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Int8Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Uint8BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Uint8Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Uint8ClampedBufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Uint8ClampedArray( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Int16BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Int16Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Uint16BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Uint16Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Int32BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Int32Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Uint32BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Uint32Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Float16BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Uint16Array( array ), itemSize, normalized );\n\n\t\tthis.isFloat16BufferAttribute = true;\n\n\t}\n\n}\n\n\nclass Float32BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Float32Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Float64BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Float64Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nlet _id$1 = 0;\n\nconst _m1 = /*@__PURE__*/ new Matrix4();\nconst _obj = /*@__PURE__*/ new Object3D();\nconst _offset = /*@__PURE__*/ new Vector3();\nconst _box$1 = /*@__PURE__*/ new Box3();\nconst _boxMorphTargets = /*@__PURE__*/ new Box3();\nconst _vector$8 = /*@__PURE__*/ new Vector3();\n\nclass BufferGeometry extends EventDispatcher {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isBufferGeometry = true;\n\n\t\tObject.defineProperty( this, 'id', { value: _id$1 ++ } );\n\n\t\tthis.uuid = generateUUID();\n\n\t\tthis.name = '';\n\t\tthis.type = 'BufferGeometry';\n\n\t\tthis.index = null;\n\t\tthis.attributes = {};\n\n\t\tthis.morphAttributes = {};\n\t\tthis.morphTargetsRelative = false;\n\n\t\tthis.groups = [];\n\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\tthis.drawRange = { start: 0, count: Infinity };\n\n\t\tthis.userData = {};\n\n\t}\n\n\tgetIndex() {\n\n\t\treturn this.index;\n\n\t}\n\n\tsetIndex( index ) {\n\n\t\tif ( Array.isArray( index ) ) {\n\n\t\t\tthis.index = new ( arrayNeedsUint32( index ) ? Uint32BufferAttribute : Uint16BufferAttribute )( index, 1 );\n\n\t\t} else {\n\n\t\t\tthis.index = index;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetAttribute( name ) {\n\n\t\treturn this.attributes[ name ];\n\n\t}\n\n\tsetAttribute( name, attribute ) {\n\n\t\tthis.attributes[ name ] = attribute;\n\n\t\treturn this;\n\n\t}\n\n\tdeleteAttribute( name ) {\n\n\t\tdelete this.attributes[ name ];\n\n\t\treturn this;\n\n\t}\n\n\thasAttribute( name ) {\n\n\t\treturn this.attributes[ name ] !== undefined;\n\n\t}\n\n\taddGroup( start, count, materialIndex = 0 ) {\n\n\t\tthis.groups.push( {\n\n\t\t\tstart: start,\n\t\t\tcount: count,\n\t\t\tmaterialIndex: materialIndex\n\n\t\t} );\n\n\t}\n\n\tclearGroups() {\n\n\t\tthis.groups = [];\n\n\t}\n\n\tsetDrawRange( start, count ) {\n\n\t\tthis.drawRange.start = start;\n\t\tthis.drawRange.count = count;\n\n\t}\n\n\tapplyMatrix4( matrix ) {\n\n\t\tconst position = this.attributes.position;\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tposition.applyMatrix4( matrix );\n\n\t\t\tposition.needsUpdate = true;\n\n\t\t}\n\n\t\tconst normal = this.attributes.normal;\n\n\t\tif ( normal !== undefined ) {\n\n\t\t\tconst normalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t\tnormal.applyNormalMatrix( normalMatrix );\n\n\t\t\tnormal.needsUpdate = true;\n\n\t\t}\n\n\t\tconst tangent = this.attributes.tangent;\n\n\t\tif ( tangent !== undefined ) {\n\n\t\t\ttangent.transformDirection( matrix );\n\n\t\t\ttangent.needsUpdate = true;\n\n\t\t}\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tapplyQuaternion( q ) {\n\n\t\t_m1.makeRotationFromQuaternion( q );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\trotateX( angle ) {\n\n\t\t// rotate geometry around world x-axis\n\n\t\t_m1.makeRotationX( angle );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\trotateY( angle ) {\n\n\t\t// rotate geometry around world y-axis\n\n\t\t_m1.makeRotationY( angle );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\trotateZ( angle ) {\n\n\t\t// rotate geometry around world z-axis\n\n\t\t_m1.makeRotationZ( angle );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( x, y, z ) {\n\n\t\t// translate geometry\n\n\t\t_m1.makeTranslation( x, y, z );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\tscale( x, y, z ) {\n\n\t\t// scale geometry\n\n\t\t_m1.makeScale( x, y, z );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\tlookAt( vector ) {\n\n\t\t_obj.lookAt( vector );\n\n\t\t_obj.updateMatrix();\n\n\t\tthis.applyMatrix4( _obj.matrix );\n\n\t\treturn this;\n\n\t}\n\n\tcenter() {\n\n\t\tthis.computeBoundingBox();\n\n\t\tthis.boundingBox.getCenter( _offset ).negate();\n\n\t\tthis.translate( _offset.x, _offset.y, _offset.z );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPoints( points ) {\n\n\t\tconst position = [];\n\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tconst point = points[ i ];\n\t\t\tposition.push( point.x, point.y, point.z || 0 );\n\n\t\t}\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( position, 3 ) );\n\n\t\treturn this;\n\n\t}\n\n\tcomputeBoundingBox() {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tconst position = this.attributes.position;\n\t\tconst morphAttributesPosition = this.morphAttributes.position;\n\n\t\tif ( position && position.isGLBufferAttribute ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set \"mesh.frustumCulled\" to \"false\".', this );\n\n\t\t\tthis.boundingBox.set(\n\t\t\t\tnew Vector3( - Infinity, - Infinity, - Infinity ),\n\t\t\t\tnew Vector3( + Infinity, + Infinity, + Infinity )\n\t\t\t);\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tthis.boundingBox.setFromBufferAttribute( position );\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\t_box$1.setFromBufferAttribute( morphAttribute );\n\n\t\t\t\t\tif ( this.morphTargetsRelative ) {\n\n\t\t\t\t\t\t_vector$8.addVectors( this.boundingBox.min, _box$1.min );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector$8 );\n\n\t\t\t\t\t\t_vector$8.addVectors( this.boundingBox.max, _box$1.max );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector$8 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box$1.min );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box$1.max );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.boundingBox.makeEmpty();\n\n\t\t}\n\n\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t}\n\n\t}\n\n\tcomputeBoundingSphere() {\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\tconst position = this.attributes.position;\n\t\tconst morphAttributesPosition = this.morphAttributes.position;\n\n\t\tif ( position && position.isGLBufferAttribute ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set \"mesh.frustumCulled\" to \"false\".', this );\n\n\t\t\tthis.boundingSphere.set( new Vector3(), Infinity );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( position ) {\n\n\t\t\t// first, find the center of the bounding sphere\n\n\t\t\tconst center = this.boundingSphere.center;\n\n\t\t\t_box$1.setFromBufferAttribute( position );\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\t_boxMorphTargets.setFromBufferAttribute( morphAttribute );\n\n\t\t\t\t\tif ( this.morphTargetsRelative ) {\n\n\t\t\t\t\t\t_vector$8.addVectors( _box$1.min, _boxMorphTargets.min );\n\t\t\t\t\t\t_box$1.expandByPoint( _vector$8 );\n\n\t\t\t\t\t\t_vector$8.addVectors( _box$1.max, _boxMorphTargets.max );\n\t\t\t\t\t\t_box$1.expandByPoint( _vector$8 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t_box$1.expandByPoint( _boxMorphTargets.min );\n\t\t\t\t\t\t_box$1.expandByPoint( _boxMorphTargets.max );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_box$1.getCenter( center );\n\n\t\t\t// second, try to find a boundingSphere with a radius smaller than the\n\t\t\t// boundingSphere of the boundingBox: sqrt(3) smaller in the best case\n\n\t\t\tlet maxRadiusSq = 0;\n\n\t\t\tfor ( let i = 0, il = position.count; i < il; i ++ ) {\n\n\t\t\t\t_vector$8.fromBufferAttribute( position, i );\n\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector$8 ) );\n\n\t\t\t}\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\tconst morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t\t\t\tfor ( let j = 0, jl = morphAttribute.count; j < jl; j ++ ) {\n\n\t\t\t\t\t\t_vector$8.fromBufferAttribute( morphAttribute, j );\n\n\t\t\t\t\t\tif ( morphTargetsRelative ) {\n\n\t\t\t\t\t\t\t_offset.fromBufferAttribute( position, j );\n\t\t\t\t\t\t\t_vector$8.add( _offset );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector$8 ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\n\n\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tcomputeTangents() {\n\n\t\tconst index = this.index;\n\t\tconst attributes = this.attributes;\n\n\t\t// based on http://www.terathon.com/code/tangent.html\n\t\t// (per vertex tangents)\n\n\t\tif ( index === null ||\n\t\t\t attributes.position === undefined ||\n\t\t\t attributes.normal === undefined ||\n\t\t\t attributes.uv === undefined ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst indices = index.array;\n\t\tconst positions = attributes.position.array;\n\t\tconst normals = attributes.normal.array;\n\t\tconst uvs = attributes.uv.array;\n\n\t\tconst nVertices = positions.length / 3;\n\n\t\tif ( this.hasAttribute( 'tangent' ) === false ) {\n\n\t\t\tthis.setAttribute( 'tangent', new BufferAttribute( new Float32Array( 4 * nVertices ), 4 ) );\n\n\t\t}\n\n\t\tconst tangents = this.getAttribute( 'tangent' ).array;\n\n\t\tconst tan1 = [], tan2 = [];\n\n\t\tfor ( let i = 0; i < nVertices; i ++ ) {\n\n\t\t\ttan1[ i ] = new Vector3();\n\t\t\ttan2[ i ] = new Vector3();\n\n\t\t}\n\n\t\tconst vA = new Vector3(),\n\t\t\tvB = new Vector3(),\n\t\t\tvC = new Vector3(),\n\n\t\t\tuvA = new Vector2(),\n\t\t\tuvB = new Vector2(),\n\t\t\tuvC = new Vector2(),\n\n\t\t\tsdir = new Vector3(),\n\t\t\ttdir = new Vector3();\n\n\t\tfunction handleTriangle( a, b, c ) {\n\n\t\t\tvA.fromArray( positions, a * 3 );\n\t\t\tvB.fromArray( positions, b * 3 );\n\t\t\tvC.fromArray( positions, c * 3 );\n\n\t\t\tuvA.fromArray( uvs, a * 2 );\n\t\t\tuvB.fromArray( uvs, b * 2 );\n\t\t\tuvC.fromArray( uvs, c * 2 );\n\n\t\t\tvB.sub( vA );\n\t\t\tvC.sub( vA );\n\n\t\t\tuvB.sub( uvA );\n\t\t\tuvC.sub( uvA );\n\n\t\t\tconst r = 1.0 / ( uvB.x * uvC.y - uvC.x * uvB.y );\n\n\t\t\t// silently ignore degenerate uv triangles having coincident or colinear vertices\n\n\t\t\tif ( ! isFinite( r ) ) return;\n\n\t\t\tsdir.copy( vB ).multiplyScalar( uvC.y ).addScaledVector( vC, - uvB.y ).multiplyScalar( r );\n\t\t\ttdir.copy( vC ).multiplyScalar( uvB.x ).addScaledVector( vB, - uvC.x ).multiplyScalar( r );\n\n\t\t\ttan1[ a ].add( sdir );\n\t\t\ttan1[ b ].add( sdir );\n\t\t\ttan1[ c ].add( sdir );\n\n\t\t\ttan2[ a ].add( tdir );\n\t\t\ttan2[ b ].add( tdir );\n\t\t\ttan2[ c ].add( tdir );\n\n\t\t}\n\n\t\tlet groups = this.groups;\n\n\t\tif ( groups.length === 0 ) {\n\n\t\t\tgroups = [ {\n\t\t\t\tstart: 0,\n\t\t\t\tcount: indices.length\n\t\t\t} ];\n\n\t\t}\n\n\t\tfor ( let i = 0, il = groups.length; i < il; ++ i ) {\n\n\t\t\tconst group = groups[ i ];\n\n\t\t\tconst start = group.start;\n\t\t\tconst count = group.count;\n\n\t\t\tfor ( let j = start, jl = start + count; j < jl; j += 3 ) {\n\n\t\t\t\thandleTriangle(\n\t\t\t\t\tindices[ j + 0 ],\n\t\t\t\t\tindices[ j + 1 ],\n\t\t\t\t\tindices[ j + 2 ]\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst tmp = new Vector3(), tmp2 = new Vector3();\n\t\tconst n = new Vector3(), n2 = new Vector3();\n\n\t\tfunction handleVertex( v ) {\n\n\t\t\tn.fromArray( normals, v * 3 );\n\t\t\tn2.copy( n );\n\n\t\t\tconst t = tan1[ v ];\n\n\t\t\t// Gram-Schmidt orthogonalize\n\n\t\t\ttmp.copy( t );\n\t\t\ttmp.sub( n.multiplyScalar( n.dot( t ) ) ).normalize();\n\n\t\t\t// Calculate handedness\n\n\t\t\ttmp2.crossVectors( n2, t );\n\t\t\tconst test = tmp2.dot( tan2[ v ] );\n\t\t\tconst w = ( test < 0.0 ) ? - 1.0 : 1.0;\n\n\t\t\ttangents[ v * 4 ] = tmp.x;\n\t\t\ttangents[ v * 4 + 1 ] = tmp.y;\n\t\t\ttangents[ v * 4 + 2 ] = tmp.z;\n\t\t\ttangents[ v * 4 + 3 ] = w;\n\n\t\t}\n\n\t\tfor ( let i = 0, il = groups.length; i < il; ++ i ) {\n\n\t\t\tconst group = groups[ i ];\n\n\t\t\tconst start = group.start;\n\t\t\tconst count = group.count;\n\n\t\t\tfor ( let j = start, jl = start + count; j < jl; j += 3 ) {\n\n\t\t\t\thandleVertex( indices[ j + 0 ] );\n\t\t\t\thandleVertex( indices[ j + 1 ] );\n\t\t\t\thandleVertex( indices[ j + 2 ] );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tcomputeVertexNormals() {\n\n\t\tconst index = this.index;\n\t\tconst positionAttribute = this.getAttribute( 'position' );\n\n\t\tif ( positionAttribute !== undefined ) {\n\n\t\t\tlet normalAttribute = this.getAttribute( 'normal' );\n\n\t\t\tif ( normalAttribute === undefined ) {\n\n\t\t\t\tnormalAttribute = new BufferAttribute( new Float32Array( positionAttribute.count * 3 ), 3 );\n\t\t\t\tthis.setAttribute( 'normal', normalAttribute );\n\n\t\t\t} else {\n\n\t\t\t\t// reset existing normals to zero\n\n\t\t\t\tfor ( let i = 0, il = normalAttribute.count; i < il; i ++ ) {\n\n\t\t\t\t\tnormalAttribute.setXYZ( i, 0, 0, 0 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst pA = new Vector3(), pB = new Vector3(), pC = new Vector3();\n\t\t\tconst nA = new Vector3(), nB = new Vector3(), nC = new Vector3();\n\t\t\tconst cb = new Vector3(), ab = new Vector3();\n\n\t\t\t// indexed elements\n\n\t\t\tif ( index ) {\n\n\t\t\t\tfor ( let i = 0, il = index.count; i < il; i += 3 ) {\n\n\t\t\t\t\tconst vA = index.getX( i + 0 );\n\t\t\t\t\tconst vB = index.getX( i + 1 );\n\t\t\t\t\tconst vC = index.getX( i + 2 );\n\n\t\t\t\t\tpA.fromBufferAttribute( positionAttribute, vA );\n\t\t\t\t\tpB.fromBufferAttribute( positionAttribute, vB );\n\t\t\t\t\tpC.fromBufferAttribute( positionAttribute, vC );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnA.fromBufferAttribute( normalAttribute, vA );\n\t\t\t\t\tnB.fromBufferAttribute( normalAttribute, vB );\n\t\t\t\t\tnC.fromBufferAttribute( normalAttribute, vC );\n\n\t\t\t\t\tnA.add( cb );\n\t\t\t\t\tnB.add( cb );\n\t\t\t\t\tnC.add( cb );\n\n\t\t\t\t\tnormalAttribute.setXYZ( vA, nA.x, nA.y, nA.z );\n\t\t\t\t\tnormalAttribute.setXYZ( vB, nB.x, nB.y, nB.z );\n\t\t\t\t\tnormalAttribute.setXYZ( vC, nC.x, nC.y, nC.z );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed elements (unconnected triangle soup)\n\n\t\t\t\tfor ( let i = 0, il = positionAttribute.count; i < il; i += 3 ) {\n\n\t\t\t\t\tpA.fromBufferAttribute( positionAttribute, i + 0 );\n\t\t\t\t\tpB.fromBufferAttribute( positionAttribute, i + 1 );\n\t\t\t\t\tpC.fromBufferAttribute( positionAttribute, i + 2 );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnormalAttribute.setXYZ( i + 0, cb.x, cb.y, cb.z );\n\t\t\t\t\tnormalAttribute.setXYZ( i + 1, cb.x, cb.y, cb.z );\n\t\t\t\t\tnormalAttribute.setXYZ( i + 2, cb.x, cb.y, cb.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.normalizeNormals();\n\n\t\t\tnormalAttribute.needsUpdate = true;\n\n\t\t}\n\n\t}\n\n\t// @deprecated since r144\n\n\tmerge() {\n\n\t\tconsole.error( 'THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead.' );\n\t\treturn this;\n\n\t}\n\n\tnormalizeNormals() {\n\n\t\tconst normals = this.attributes.normal;\n\n\t\tfor ( let i = 0, il = normals.count; i < il; i ++ ) {\n\n\t\t\t_vector$8.fromBufferAttribute( normals, i );\n\n\t\t\t_vector$8.normalize();\n\n\t\t\tnormals.setXYZ( i, _vector$8.x, _vector$8.y, _vector$8.z );\n\n\t\t}\n\n\t}\n\n\ttoNonIndexed() {\n\n\t\tfunction convertBufferAttribute( attribute, indices ) {\n\n\t\t\tconst array = attribute.array;\n\t\t\tconst itemSize = attribute.itemSize;\n\t\t\tconst normalized = attribute.normalized;\n\n\t\t\tconst array2 = new array.constructor( indices.length * itemSize );\n\n\t\t\tlet index = 0, index2 = 0;\n\n\t\t\tfor ( let i = 0, l = indices.length; i < l; i ++ ) {\n\n\t\t\t\tif ( attribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\t\tindex = indices[ i ] * attribute.data.stride + attribute.offset;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tindex = indices[ i ] * itemSize;\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let j = 0; j < itemSize; j ++ ) {\n\n\t\t\t\t\tarray2[ index2 ++ ] = array[ index ++ ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new BufferAttribute( array2, itemSize, normalized );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.index === null ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed.' );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst geometry2 = new BufferGeometry();\n\n\t\tconst indices = this.index.array;\n\t\tconst attributes = this.attributes;\n\n\t\t// attributes\n\n\t\tfor ( const name in attributes ) {\n\n\t\t\tconst attribute = attributes[ name ];\n\n\t\t\tconst newAttribute = convertBufferAttribute( attribute, indices );\n\n\t\t\tgeometry2.setAttribute( name, newAttribute );\n\n\t\t}\n\n\t\t// morph attributes\n\n\t\tconst morphAttributes = this.morphAttributes;\n\n\t\tfor ( const name in morphAttributes ) {\n\n\t\t\tconst morphArray = [];\n\t\t\tconst morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\n\n\t\t\tfor ( let i = 0, il = morphAttribute.length; i < il; i ++ ) {\n\n\t\t\t\tconst attribute = morphAttribute[ i ];\n\n\t\t\t\tconst newAttribute = convertBufferAttribute( attribute, indices );\n\n\t\t\t\tmorphArray.push( newAttribute );\n\n\t\t\t}\n\n\t\t\tgeometry2.morphAttributes[ name ] = morphArray;\n\n\t\t}\n\n\t\tgeometry2.morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t// groups\n\n\t\tconst groups = this.groups;\n\n\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tconst group = groups[ i ];\n\t\t\tgeometry2.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\treturn geometry2;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'BufferGeometry',\n\t\t\t\tgenerator: 'BufferGeometry.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard BufferGeometry serialization\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\t\tif ( this.name !== '' ) data.name = this.name;\n\t\tif ( Object.keys( this.userData ).length > 0 ) data.userData = this.userData;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tconst parameters = this.parameters;\n\n\t\t\tfor ( const key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\t// for simplicity the code assumes attributes are not shared across geometries, see #15811\n\n\t\tdata.data = { attributes: {} };\n\n\t\tconst index = this.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tdata.data.index = {\n\t\t\t\ttype: index.array.constructor.name,\n\t\t\t\tarray: Array.prototype.slice.call( index.array )\n\t\t\t};\n\n\t\t}\n\n\t\tconst attributes = this.attributes;\n\n\t\tfor ( const key in attributes ) {\n\n\t\t\tconst attribute = attributes[ key ];\n\n\t\t\tdata.data.attributes[ key ] = attribute.toJSON( data.data );\n\n\t\t}\n\n\t\tconst morphAttributes = {};\n\t\tlet hasMorphAttributes = false;\n\n\t\tfor ( const key in this.morphAttributes ) {\n\n\t\t\tconst attributeArray = this.morphAttributes[ key ];\n\n\t\t\tconst array = [];\n\n\t\t\tfor ( let i = 0, il = attributeArray.length; i < il; i ++ ) {\n\n\t\t\t\tconst attribute = attributeArray[ i ];\n\n\t\t\t\tarray.push( attribute.toJSON( data.data ) );\n\n\t\t\t}\n\n\t\t\tif ( array.length > 0 ) {\n\n\t\t\t\tmorphAttributes[ key ] = array;\n\n\t\t\t\thasMorphAttributes = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( hasMorphAttributes ) {\n\n\t\t\tdata.data.morphAttributes = morphAttributes;\n\t\t\tdata.data.morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t}\n\n\t\tconst groups = this.groups;\n\n\t\tif ( groups.length > 0 ) {\n\n\t\t\tdata.data.groups = JSON.parse( JSON.stringify( groups ) );\n\n\t\t}\n\n\t\tconst boundingSphere = this.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tdata.data.boundingSphere = {\n\t\t\t\tcenter: boundingSphere.center.toArray(),\n\t\t\t\tradius: boundingSphere.radius\n\t\t\t};\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n\tclone() {\n\n\t\t return new this.constructor().copy( this );\n\n\t}\n\n\tcopy( source ) {\n\n\t\t// reset\n\n\t\tthis.index = null;\n\t\tthis.attributes = {};\n\t\tthis.morphAttributes = {};\n\t\tthis.groups = [];\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// used for storing cloned, shared data\n\n\t\tconst data = {};\n\n\t\t// name\n\n\t\tthis.name = source.name;\n\n\t\t// index\n\n\t\tconst index = source.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tthis.setIndex( index.clone( data ) );\n\n\t\t}\n\n\t\t// attributes\n\n\t\tconst attributes = source.attributes;\n\n\t\tfor ( const name in attributes ) {\n\n\t\t\tconst attribute = attributes[ name ];\n\t\t\tthis.setAttribute( name, attribute.clone( data ) );\n\n\t\t}\n\n\t\t// morph attributes\n\n\t\tconst morphAttributes = source.morphAttributes;\n\n\t\tfor ( const name in morphAttributes ) {\n\n\t\t\tconst array = [];\n\t\t\tconst morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\n\n\t\t\tfor ( let i = 0, l = morphAttribute.length; i < l; i ++ ) {\n\n\t\t\t\tarray.push( morphAttribute[ i ].clone( data ) );\n\n\t\t\t}\n\n\t\t\tthis.morphAttributes[ name ] = array;\n\n\t\t}\n\n\t\tthis.morphTargetsRelative = source.morphTargetsRelative;\n\n\t\t// groups\n\n\t\tconst groups = source.groups;\n\n\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tconst group = groups[ i ];\n\t\t\tthis.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\t// bounding box\n\n\t\tconst boundingBox = source.boundingBox;\n\n\t\tif ( boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = boundingBox.clone();\n\n\t\t}\n\n\t\t// bounding sphere\n\n\t\tconst boundingSphere = source.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = boundingSphere.clone();\n\n\t\t}\n\n\t\t// draw range\n\n\t\tthis.drawRange.start = source.drawRange.start;\n\t\tthis.drawRange.count = source.drawRange.count;\n\n\t\t// user data\n\n\t\tthis.userData = source.userData;\n\n\t\t// geometry generator parameters\n\n\t\tif ( source.parameters !== undefined ) this.parameters = Object.assign( {}, source.parameters );\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n}\n\nconst _inverseMatrix$2 = /*@__PURE__*/ new Matrix4();\nconst _ray$2 = /*@__PURE__*/ new Ray();\nconst _sphere$3 = /*@__PURE__*/ new Sphere();\n\nconst _vA$1 = /*@__PURE__*/ new Vector3();\nconst _vB$1 = /*@__PURE__*/ new Vector3();\nconst _vC$1 = /*@__PURE__*/ new Vector3();\n\nconst _tempA = /*@__PURE__*/ new Vector3();\nconst _tempB = /*@__PURE__*/ new Vector3();\nconst _tempC = /*@__PURE__*/ new Vector3();\n\nconst _morphA = /*@__PURE__*/ new Vector3();\nconst _morphB = /*@__PURE__*/ new Vector3();\nconst _morphC = /*@__PURE__*/ new Vector3();\n\nconst _uvA$1 = /*@__PURE__*/ new Vector2();\nconst _uvB$1 = /*@__PURE__*/ new Vector2();\nconst _uvC$1 = /*@__PURE__*/ new Vector2();\n\nconst _intersectionPoint = /*@__PURE__*/ new Vector3();\nconst _intersectionPointWorld = /*@__PURE__*/ new Vector3();\n\nclass Mesh extends Object3D {\n\n\tconstructor( geometry = new BufferGeometry(), material = new MeshBasicMaterial() ) {\n\n\t\tsuper();\n\n\t\tthis.isMesh = true;\n\n\t\tthis.type = 'Mesh';\n\n\t\tthis.geometry = geometry;\n\t\tthis.material = material;\n\n\t\tthis.updateMorphTargets();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tif ( source.morphTargetInfluences !== undefined ) {\n\n\t\t\tthis.morphTargetInfluences = source.morphTargetInfluences.slice();\n\n\t\t}\n\n\t\tif ( source.morphTargetDictionary !== undefined ) {\n\n\t\t\tthis.morphTargetDictionary = Object.assign( {}, source.morphTargetDictionary );\n\n\t\t}\n\n\t\tthis.material = source.material;\n\t\tthis.geometry = source.geometry;\n\n\t\treturn this;\n\n\t}\n\n\tupdateMorphTargets() {\n\n\t\tconst geometry = this.geometry;\n\n\t\tconst morphAttributes = geometry.morphAttributes;\n\t\tconst keys = Object.keys( morphAttributes );\n\n\t\tif ( keys.length > 0 ) {\n\n\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\traycast( raycaster, intersects ) {\n\n\t\tconst geometry = this.geometry;\n\t\tconst material = this.material;\n\t\tconst matrixWorld = this.matrixWorld;\n\n\t\tif ( material === undefined ) return;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere$3.copy( geometry.boundingSphere );\n\t\t_sphere$3.applyMatrix4( matrixWorld );\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere$3 ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix$2.copy( matrixWorld ).invert();\n\t\t_ray$2.copy( raycaster.ray ).applyMatrix4( _inverseMatrix$2 );\n\n\t\t// Check boundingBox before continuing\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tif ( _ray$2.intersectsBox( geometry.boundingBox ) === false ) return;\n\n\t\t}\n\n\t\tlet intersection;\n\n\t\tconst index = geometry.index;\n\t\tconst position = geometry.attributes.position;\n\t\tconst morphPosition = geometry.morphAttributes.position;\n\t\tconst morphTargetsRelative = geometry.morphTargetsRelative;\n\t\tconst uv = geometry.attributes.uv;\n\t\tconst uv2 = geometry.attributes.uv2;\n\t\tconst groups = geometry.groups;\n\t\tconst drawRange = geometry.drawRange;\n\n\t\tif ( index !== null ) {\n\n\t\t\t// indexed buffer geometry\n\n\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\tfor ( let i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst group = groups[ i ];\n\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\tconst start = Math.max( group.start, drawRange.start );\n\t\t\t\t\tconst end = Math.min( index.count, Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) ) );\n\n\t\t\t\t\tfor ( let j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\t\tconst a = index.getX( j );\n\t\t\t\t\t\tconst b = index.getX( j + 1 );\n\t\t\t\t\t\tconst c = index.getX( j + 2 );\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, groupMaterial, raycaster, _ray$2, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( j / 3 ); // triangle number in indexed buffer semantics\n\t\t\t\t\t\t\tintersection.face.materialIndex = group.materialIndex;\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\t\tconst end = Math.min( index.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\t\tfor ( let i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\t\tconst a = index.getX( i );\n\t\t\t\t\tconst b = index.getX( i + 1 );\n\t\t\t\t\tconst c = index.getX( i + 2 );\n\n\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, material, raycaster, _ray$2, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in indexed buffer semantics\n\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( position !== undefined ) {\n\n\t\t\t// non-indexed buffer geometry\n\n\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\tfor ( let i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst group = groups[ i ];\n\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\tconst start = Math.max( group.start, drawRange.start );\n\t\t\t\t\tconst end = Math.min( position.count, Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) ) );\n\n\t\t\t\t\tfor ( let j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\t\tconst a = j;\n\t\t\t\t\t\tconst b = j + 1;\n\t\t\t\t\t\tconst c = j + 2;\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, groupMaterial, raycaster, _ray$2, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( j / 3 ); // triangle number in non-indexed buffer semantics\n\t\t\t\t\t\t\tintersection.face.materialIndex = group.materialIndex;\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\t\tconst end = Math.min( position.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\t\tfor ( let i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\t\tconst a = i;\n\t\t\t\t\tconst b = i + 1;\n\t\t\t\t\tconst c = i + 2;\n\n\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, material, raycaster, _ray$2, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in non-indexed buffer semantics\n\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nfunction checkIntersection( object, material, raycaster, ray, pA, pB, pC, point ) {\n\n\tlet intersect;\n\n\tif ( material.side === BackSide ) {\n\n\t\tintersect = ray.intersectTriangle( pC, pB, pA, true, point );\n\n\t} else {\n\n\t\tintersect = ray.intersectTriangle( pA, pB, pC, material.side !== DoubleSide, point );\n\n\t}\n\n\tif ( intersect === null ) return null;\n\n\t_intersectionPointWorld.copy( point );\n\t_intersectionPointWorld.applyMatrix4( object.matrixWorld );\n\n\tconst distance = raycaster.ray.origin.distanceTo( _intersectionPointWorld );\n\n\tif ( distance < raycaster.near || distance > raycaster.far ) return null;\n\n\treturn {\n\t\tdistance: distance,\n\t\tpoint: _intersectionPointWorld.clone(),\n\t\tobject: object\n\t};\n\n}\n\nfunction checkBufferGeometryIntersection( object, material, raycaster, ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c ) {\n\n\t_vA$1.fromBufferAttribute( position, a );\n\t_vB$1.fromBufferAttribute( position, b );\n\t_vC$1.fromBufferAttribute( position, c );\n\n\tconst morphInfluences = object.morphTargetInfluences;\n\n\tif ( morphPosition && morphInfluences ) {\n\n\t\t_morphA.set( 0, 0, 0 );\n\t\t_morphB.set( 0, 0, 0 );\n\t\t_morphC.set( 0, 0, 0 );\n\n\t\tfor ( let i = 0, il = morphPosition.length; i < il; i ++ ) {\n\n\t\t\tconst influence = morphInfluences[ i ];\n\t\t\tconst morphAttribute = morphPosition[ i ];\n\n\t\t\tif ( influence === 0 ) continue;\n\n\t\t\t_tempA.fromBufferAttribute( morphAttribute, a );\n\t\t\t_tempB.fromBufferAttribute( morphAttribute, b );\n\t\t\t_tempC.fromBufferAttribute( morphAttribute, c );\n\n\t\t\tif ( morphTargetsRelative ) {\n\n\t\t\t\t_morphA.addScaledVector( _tempA, influence );\n\t\t\t\t_morphB.addScaledVector( _tempB, influence );\n\t\t\t\t_morphC.addScaledVector( _tempC, influence );\n\n\t\t\t} else {\n\n\t\t\t\t_morphA.addScaledVector( _tempA.sub( _vA$1 ), influence );\n\t\t\t\t_morphB.addScaledVector( _tempB.sub( _vB$1 ), influence );\n\t\t\t\t_morphC.addScaledVector( _tempC.sub( _vC$1 ), influence );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_vA$1.add( _morphA );\n\t\t_vB$1.add( _morphB );\n\t\t_vC$1.add( _morphC );\n\n\t}\n\n\tif ( object.isSkinnedMesh ) {\n\n\t\tobject.boneTransform( a, _vA$1 );\n\t\tobject.boneTransform( b, _vB$1 );\n\t\tobject.boneTransform( c, _vC$1 );\n\n\t}\n\n\tconst intersection = checkIntersection( object, material, raycaster, ray, _vA$1, _vB$1, _vC$1, _intersectionPoint );\n\n\tif ( intersection ) {\n\n\t\tif ( uv ) {\n\n\t\t\t_uvA$1.fromBufferAttribute( uv, a );\n\t\t\t_uvB$1.fromBufferAttribute( uv, b );\n\t\t\t_uvC$1.fromBufferAttribute( uv, c );\n\n\t\t\tintersection.uv = Triangle.getUV( _intersectionPoint, _vA$1, _vB$1, _vC$1, _uvA$1, _uvB$1, _uvC$1, new Vector2() );\n\n\t\t}\n\n\t\tif ( uv2 ) {\n\n\t\t\t_uvA$1.fromBufferAttribute( uv2, a );\n\t\t\t_uvB$1.fromBufferAttribute( uv2, b );\n\t\t\t_uvC$1.fromBufferAttribute( uv2, c );\n\n\t\t\tintersection.uv2 = Triangle.getUV( _intersectionPoint, _vA$1, _vB$1, _vC$1, _uvA$1, _uvB$1, _uvC$1, new Vector2() );\n\n\t\t}\n\n\t\tconst face = {\n\t\t\ta: a,\n\t\t\tb: b,\n\t\t\tc: c,\n\t\t\tnormal: new Vector3(),\n\t\t\tmaterialIndex: 0\n\t\t};\n\n\t\tTriangle.getNormal( _vA$1, _vB$1, _vC$1, face.normal );\n\n\t\tintersection.face = face;\n\n\t}\n\n\treturn intersection;\n\n}\n\nclass BoxGeometry extends BufferGeometry {\n\n\tconstructor( width = 1, height = 1, depth = 1, widthSegments = 1, heightSegments = 1, depthSegments = 1 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'BoxGeometry';\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\tdepth: depth,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\tdepthSegments: depthSegments\n\t\t};\n\n\t\tconst scope = this;\n\n\t\t// segments\n\n\t\twidthSegments = Math.floor( widthSegments );\n\t\theightSegments = Math.floor( heightSegments );\n\t\tdepthSegments = Math.floor( depthSegments );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tlet numberOfVertices = 0;\n\t\tlet groupStart = 0;\n\n\t\t// build each side of the box geometry\n\n\t\tbuildPlane( 'z', 'y', 'x', - 1, - 1, depth, height, width, depthSegments, heightSegments, 0 ); // px\n\t\tbuildPlane( 'z', 'y', 'x', 1, - 1, depth, height, - width, depthSegments, heightSegments, 1 ); // nx\n\t\tbuildPlane( 'x', 'z', 'y', 1, 1, width, depth, height, widthSegments, depthSegments, 2 ); // py\n\t\tbuildPlane( 'x', 'z', 'y', 1, - 1, width, depth, - height, widthSegments, depthSegments, 3 ); // ny\n\t\tbuildPlane( 'x', 'y', 'z', 1, - 1, width, height, depth, widthSegments, heightSegments, 4 ); // pz\n\t\tbuildPlane( 'x', 'y', 'z', - 1, - 1, width, height, - depth, widthSegments, heightSegments, 5 ); // nz\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\tfunction buildPlane( u, v, w, udir, vdir, width, height, depth, gridX, gridY, materialIndex ) {\n\n\t\t\tconst segmentWidth = width / gridX;\n\t\t\tconst segmentHeight = height / gridY;\n\n\t\t\tconst widthHalf = width / 2;\n\t\t\tconst heightHalf = height / 2;\n\t\t\tconst depthHalf = depth / 2;\n\n\t\t\tconst gridX1 = gridX + 1;\n\t\t\tconst gridY1 = gridY + 1;\n\n\t\t\tlet vertexCounter = 0;\n\t\t\tlet groupCount = 0;\n\n\t\t\tconst vector = new Vector3();\n\n\t\t\t// generate vertices, normals and uvs\n\n\t\t\tfor ( let iy = 0; iy < gridY1; iy ++ ) {\n\n\t\t\t\tconst y = iy * segmentHeight - heightHalf;\n\n\t\t\t\tfor ( let ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\t\t\tconst x = ix * segmentWidth - widthHalf;\n\n\t\t\t\t\t// set values to correct vector component\n\n\t\t\t\t\tvector[ u ] = x * udir;\n\t\t\t\t\tvector[ v ] = y * vdir;\n\t\t\t\t\tvector[ w ] = depthHalf;\n\n\t\t\t\t\t// now apply vector to vertex buffer\n\n\t\t\t\t\tvertices.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t\t// set values to correct vector component\n\n\t\t\t\t\tvector[ u ] = 0;\n\t\t\t\t\tvector[ v ] = 0;\n\t\t\t\t\tvector[ w ] = depth > 0 ? 1 : - 1;\n\n\t\t\t\t\t// now apply vector to normal buffer\n\n\t\t\t\t\tnormals.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t\t// uvs\n\n\t\t\t\t\tuvs.push( ix / gridX );\n\t\t\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t\t\t\t// counters\n\n\t\t\t\t\tvertexCounter += 1;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// indices\n\n\t\t\t// 1. you need three indices to draw a single face\n\t\t\t// 2. a single segment consists of two faces\n\t\t\t// 3. so we need to generate six (2*3) indices per segment\n\n\t\t\tfor ( let iy = 0; iy < gridY; iy ++ ) {\n\n\t\t\t\tfor ( let ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\t\t\tconst a = numberOfVertices + ix + gridX1 * iy;\n\t\t\t\t\tconst b = numberOfVertices + ix + gridX1 * ( iy + 1 );\n\t\t\t\t\tconst c = numberOfVertices + ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\t\t\tconst d = numberOfVertices + ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t\t\t// faces\n\n\t\t\t\t\tindices.push( a, b, d );\n\t\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t\t// increase counter\n\n\t\t\t\t\tgroupCount += 6;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\t\tscope.addGroup( groupStart, groupCount, materialIndex );\n\n\t\t\t// calculate new start value for groups\n\n\t\t\tgroupStart += groupCount;\n\n\t\t\t// update total number of vertices\n\n\t\t\tnumberOfVertices += vertexCounter;\n\n\t\t}\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new BoxGeometry( data.width, data.height, data.depth, data.widthSegments, data.heightSegments, data.depthSegments );\n\n\t}\n\n}\n\n/**\n * Uniform Utilities\n */\n\nfunction cloneUniforms( src ) {\n\n\tconst dst = {};\n\n\tfor ( const u in src ) {\n\n\t\tdst[ u ] = {};\n\n\t\tfor ( const p in src[ u ] ) {\n\n\t\t\tconst property = src[ u ][ p ];\n\n\t\t\tif ( property && ( property.isColor ||\n\t\t\t\tproperty.isMatrix3 || property.isMatrix4 ||\n\t\t\t\tproperty.isVector2 || property.isVector3 || property.isVector4 ||\n\t\t\t\tproperty.isTexture || property.isQuaternion ) ) {\n\n\t\t\t\tdst[ u ][ p ] = property.clone();\n\n\t\t\t} else if ( Array.isArray( property ) ) {\n\n\t\t\t\tdst[ u ][ p ] = property.slice();\n\n\t\t\t} else {\n\n\t\t\t\tdst[ u ][ p ] = property;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn dst;\n\n}\n\nfunction mergeUniforms( uniforms ) {\n\n\tconst merged = {};\n\n\tfor ( let u = 0; u < uniforms.length; u ++ ) {\n\n\t\tconst tmp = cloneUniforms( uniforms[ u ] );\n\n\t\tfor ( const p in tmp ) {\n\n\t\t\tmerged[ p ] = tmp[ p ];\n\n\t\t}\n\n\t}\n\n\treturn merged;\n\n}\n\nfunction cloneUniformsGroups( src ) {\n\n\tconst dst = [];\n\n\tfor ( let u = 0; u < src.length; u ++ ) {\n\n\t\tdst.push( src[ u ].clone() );\n\n\t}\n\n\treturn dst;\n\n}\n\n// Legacy\n\nconst UniformsUtils = { clone: cloneUniforms, merge: mergeUniforms };\n\nvar default_vertex = \"void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}\";\n\nvar default_fragment = \"void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}\";\n\nclass ShaderMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isShaderMaterial = true;\n\n\t\tthis.type = 'ShaderMaterial';\n\n\t\tthis.defines = {};\n\t\tthis.uniforms = {};\n\t\tthis.uniformsGroups = [];\n\n\t\tthis.vertexShader = default_vertex;\n\t\tthis.fragmentShader = default_fragment;\n\n\t\tthis.linewidth = 1;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\n\t\tthis.fog = false; // set to use scene fog\n\t\tthis.lights = false; // set to use scene lights\n\t\tthis.clipping = false; // set to use user-defined clipping planes\n\n\t\tthis.extensions = {\n\t\t\tderivatives: false, // set to use derivatives\n\t\t\tfragDepth: false, // set to use fragment depth values\n\t\t\tdrawBuffers: false, // set to use draw buffers\n\t\t\tshaderTextureLOD: false // set to use shader texture LOD\n\t\t};\n\n\t\t// When rendered geometry doesn't include these attributes but the material does,\n\t\t// use these default values in WebGL. This avoids errors when buffer data is missing.\n\t\tthis.defaultAttributeValues = {\n\t\t\t'color': [ 1, 1, 1 ],\n\t\t\t'uv': [ 0, 0 ],\n\t\t\t'uv2': [ 0, 0 ]\n\t\t};\n\n\t\tthis.index0AttributeName = undefined;\n\t\tthis.uniformsNeedUpdate = false;\n\n\t\tthis.glslVersion = null;\n\n\t\tif ( parameters !== undefined ) {\n\n\t\t\tthis.setValues( parameters );\n\n\t\t}\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.fragmentShader = source.fragmentShader;\n\t\tthis.vertexShader = source.vertexShader;\n\n\t\tthis.uniforms = cloneUniforms( source.uniforms );\n\t\tthis.uniformsGroups = cloneUniformsGroups( source.uniformsGroups );\n\n\t\tthis.defines = Object.assign( {}, source.defines );\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\t\tthis.fog = source.fog;\n\t\tthis.lights = source.lights;\n\t\tthis.clipping = source.clipping;\n\n\t\tthis.extensions = Object.assign( {}, source.extensions );\n\n\t\tthis.glslVersion = source.glslVersion;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tdata.glslVersion = this.glslVersion;\n\t\tdata.uniforms = {};\n\n\t\tfor ( const name in this.uniforms ) {\n\n\t\t\tconst uniform = this.uniforms[ name ];\n\t\t\tconst value = uniform.value;\n\n\t\t\tif ( value && value.isTexture ) {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\ttype: 't',\n\t\t\t\t\tvalue: value.toJSON( meta ).uuid\n\t\t\t\t};\n\n\t\t\t} else if ( value && value.isColor ) {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\ttype: 'c',\n\t\t\t\t\tvalue: value.getHex()\n\t\t\t\t};\n\n\t\t\t} else if ( value && value.isVector2 ) {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\ttype: 'v2',\n\t\t\t\t\tvalue: value.toArray()\n\t\t\t\t};\n\n\t\t\t} else if ( value && value.isVector3 ) {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\ttype: 'v3',\n\t\t\t\t\tvalue: value.toArray()\n\t\t\t\t};\n\n\t\t\t} else if ( value && value.isVector4 ) {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\ttype: 'v4',\n\t\t\t\t\tvalue: value.toArray()\n\t\t\t\t};\n\n\t\t\t} else if ( value && value.isMatrix3 ) {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\ttype: 'm3',\n\t\t\t\t\tvalue: value.toArray()\n\t\t\t\t};\n\n\t\t\t} else if ( value && value.isMatrix4 ) {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\ttype: 'm4',\n\t\t\t\t\tvalue: value.toArray()\n\t\t\t\t};\n\n\t\t\t} else {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\tvalue: value\n\t\t\t\t};\n\n\t\t\t\t// note: the array variants v2v, v3v, v4v, m4v and tv are not supported so far\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( Object.keys( this.defines ).length > 0 ) data.defines = this.defines;\n\n\t\tdata.vertexShader = this.vertexShader;\n\t\tdata.fragmentShader = this.fragmentShader;\n\n\t\tconst extensions = {};\n\n\t\tfor ( const key in this.extensions ) {\n\n\t\t\tif ( this.extensions[ key ] === true ) extensions[ key ] = true;\n\n\t\t}\n\n\t\tif ( Object.keys( extensions ).length > 0 ) data.extensions = extensions;\n\n\t\treturn data;\n\n\t}\n\n}\n\nclass Camera extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isCamera = true;\n\n\t\tthis.type = 'Camera';\n\n\t\tthis.matrixWorldInverse = new Matrix4();\n\n\t\tthis.projectionMatrix = new Matrix4();\n\t\tthis.projectionMatrixInverse = new Matrix4();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.matrixWorldInverse.copy( source.matrixWorldInverse );\n\n\t\tthis.projectionMatrix.copy( source.projectionMatrix );\n\t\tthis.projectionMatrixInverse.copy( source.projectionMatrixInverse );\n\n\t\treturn this;\n\n\t}\n\n\tgetWorldDirection( target ) {\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\tconst e = this.matrixWorld.elements;\n\n\t\treturn target.set( - e[ 8 ], - e[ 9 ], - e[ 10 ] ).normalize();\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t\tthis.matrixWorldInverse.copy( this.matrixWorld ).invert();\n\n\t}\n\n\tupdateWorldMatrix( updateParents, updateChildren ) {\n\n\t\tsuper.updateWorldMatrix( updateParents, updateChildren );\n\n\t\tthis.matrixWorldInverse.copy( this.matrixWorld ).invert();\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nclass PerspectiveCamera extends Camera {\n\n\tconstructor( fov = 50, aspect = 1, near = 0.1, far = 2000 ) {\n\n\t\tsuper();\n\n\t\tthis.isPerspectiveCamera = true;\n\n\t\tthis.type = 'PerspectiveCamera';\n\n\t\tthis.fov = fov;\n\t\tthis.zoom = 1;\n\n\t\tthis.near = near;\n\t\tthis.far = far;\n\t\tthis.focus = 10;\n\n\t\tthis.aspect = aspect;\n\t\tthis.view = null;\n\n\t\tthis.filmGauge = 35;\t// width of the film (default in millimeters)\n\t\tthis.filmOffset = 0;\t// horizontal film offset (same unit as gauge)\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.fov = source.fov;\n\t\tthis.zoom = source.zoom;\n\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\t\tthis.focus = source.focus;\n\n\t\tthis.aspect = source.aspect;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\tthis.filmGauge = source.filmGauge;\n\t\tthis.filmOffset = source.filmOffset;\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Sets the FOV by focal length in respect to the current .filmGauge.\n\t *\n\t * The default film gauge is 35, so that the focal length can be specified for\n\t * a 35mm (full frame) camera.\n\t *\n\t * Values for focal length and film gauge must have the same unit.\n\t */\n\tsetFocalLength( focalLength ) {\n\n\t\t/** see {@link http://www.bobatkins.com/photography/technical/field_of_view.html} */\n\t\tconst vExtentSlope = 0.5 * this.getFilmHeight() / focalLength;\n\n\t\tthis.fov = RAD2DEG * 2 * Math.atan( vExtentSlope );\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\t/**\n\t * Calculates the focal length from the current .fov and .filmGauge.\n\t */\n\tgetFocalLength() {\n\n\t\tconst vExtentSlope = Math.tan( DEG2RAD * 0.5 * this.fov );\n\n\t\treturn 0.5 * this.getFilmHeight() / vExtentSlope;\n\n\t}\n\n\tgetEffectiveFOV() {\n\n\t\treturn RAD2DEG * 2 * Math.atan(\n\t\t\tMath.tan( DEG2RAD * 0.5 * this.fov ) / this.zoom );\n\n\t}\n\n\tgetFilmWidth() {\n\n\t\t// film not completely covered in portrait format (aspect < 1)\n\t\treturn this.filmGauge * Math.min( this.aspect, 1 );\n\n\t}\n\n\tgetFilmHeight() {\n\n\t\t// film not completely covered in landscape format (aspect > 1)\n\t\treturn this.filmGauge / Math.max( this.aspect, 1 );\n\n\t}\n\n\t/**\n\t * Sets an offset in a larger frustum. This is useful for multi-window or\n\t * multi-monitor/multi-machine setups.\n\t *\n\t * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\n\t * the monitors are in grid like this\n\t *\n\t *   +---+---+---+\n\t *   | A | B | C |\n\t *   +---+---+---+\n\t *   | D | E | F |\n\t *   +---+---+---+\n\t *\n\t * then for each monitor you would call it like this\n\t *\n\t *   const w = 1920;\n\t *   const h = 1080;\n\t *   const fullWidth = w * 3;\n\t *   const fullHeight = h * 2;\n\t *\n\t *   --A--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\n\t *   --B--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\n\t *   --C--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\n\t *   --D--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\n\t *   --E--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\n\t *   --F--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\n\t *\n\t *   Note there is no reason monitors have to be the same size or in a grid.\n\t */\n\tsetViewOffset( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tthis.aspect = fullWidth / fullHeight;\n\n\t\tif ( this.view === null ) {\n\n\t\t\tthis.view = {\n\t\t\t\tenabled: true,\n\t\t\t\tfullWidth: 1,\n\t\t\t\tfullHeight: 1,\n\t\t\t\toffsetX: 0,\n\t\t\t\toffsetY: 0,\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1\n\t\t\t};\n\n\t\t}\n\n\t\tthis.view.enabled = true;\n\t\tthis.view.fullWidth = fullWidth;\n\t\tthis.view.fullHeight = fullHeight;\n\t\tthis.view.offsetX = x;\n\t\tthis.view.offsetY = y;\n\t\tthis.view.width = width;\n\t\tthis.view.height = height;\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tclearViewOffset() {\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tthis.view.enabled = false;\n\n\t\t}\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tupdateProjectionMatrix() {\n\n\t\tconst near = this.near;\n\t\tlet top = near * Math.tan( DEG2RAD * 0.5 * this.fov ) / this.zoom;\n\t\tlet height = 2 * top;\n\t\tlet width = this.aspect * height;\n\t\tlet left = - 0.5 * width;\n\t\tconst view = this.view;\n\n\t\tif ( this.view !== null && this.view.enabled ) {\n\n\t\t\tconst fullWidth = view.fullWidth,\n\t\t\t\tfullHeight = view.fullHeight;\n\n\t\t\tleft += view.offsetX * width / fullWidth;\n\t\t\ttop -= view.offsetY * height / fullHeight;\n\t\t\twidth *= view.width / fullWidth;\n\t\t\theight *= view.height / fullHeight;\n\n\t\t}\n\n\t\tconst skew = this.filmOffset;\n\t\tif ( skew !== 0 ) left += near * skew / this.getFilmWidth();\n\n\t\tthis.projectionMatrix.makePerspective( left, left + width, top, top - height, near, this.far );\n\n\t\tthis.projectionMatrixInverse.copy( this.projectionMatrix ).invert();\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tdata.object.fov = this.fov;\n\t\tdata.object.zoom = this.zoom;\n\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\t\tdata.object.focus = this.focus;\n\n\t\tdata.object.aspect = this.aspect;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\tdata.object.filmGauge = this.filmGauge;\n\t\tdata.object.filmOffset = this.filmOffset;\n\n\t\treturn data;\n\n\t}\n\n}\n\nconst fov = 90, aspect = 1;\n\nclass CubeCamera extends Object3D {\n\n\tconstructor( near, far, renderTarget ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'CubeCamera';\n\n\t\tthis.renderTarget = renderTarget;\n\n\t\tconst cameraPX = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraPX.layers = this.layers;\n\t\tcameraPX.up.set( 0, - 1, 0 );\n\t\tcameraPX.lookAt( new Vector3( 1, 0, 0 ) );\n\t\tthis.add( cameraPX );\n\n\t\tconst cameraNX = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraNX.layers = this.layers;\n\t\tcameraNX.up.set( 0, - 1, 0 );\n\t\tcameraNX.lookAt( new Vector3( - 1, 0, 0 ) );\n\t\tthis.add( cameraNX );\n\n\t\tconst cameraPY = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraPY.layers = this.layers;\n\t\tcameraPY.up.set( 0, 0, 1 );\n\t\tcameraPY.lookAt( new Vector3( 0, 1, 0 ) );\n\t\tthis.add( cameraPY );\n\n\t\tconst cameraNY = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraNY.layers = this.layers;\n\t\tcameraNY.up.set( 0, 0, - 1 );\n\t\tcameraNY.lookAt( new Vector3( 0, - 1, 0 ) );\n\t\tthis.add( cameraNY );\n\n\t\tconst cameraPZ = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraPZ.layers = this.layers;\n\t\tcameraPZ.up.set( 0, - 1, 0 );\n\t\tcameraPZ.lookAt( new Vector3( 0, 0, 1 ) );\n\t\tthis.add( cameraPZ );\n\n\t\tconst cameraNZ = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraNZ.layers = this.layers;\n\t\tcameraNZ.up.set( 0, - 1, 0 );\n\t\tcameraNZ.lookAt( new Vector3( 0, 0, - 1 ) );\n\t\tthis.add( cameraNZ );\n\n\t}\n\n\tupdate( renderer, scene ) {\n\n\t\tif ( this.parent === null ) this.updateMatrixWorld();\n\n\t\tconst renderTarget = this.renderTarget;\n\n\t\tconst [ cameraPX, cameraNX, cameraPY, cameraNY, cameraPZ, cameraNZ ] = this.children;\n\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\tconst currentToneMapping = renderer.toneMapping;\n\t\tconst currentXrEnabled = renderer.xr.enabled;\n\n\t\trenderer.toneMapping = NoToneMapping;\n\t\trenderer.xr.enabled = false;\n\n\t\tconst generateMipmaps = renderTarget.texture.generateMipmaps;\n\n\t\trenderTarget.texture.generateMipmaps = false;\n\n\t\trenderer.setRenderTarget( renderTarget, 0 );\n\t\trenderer.render( scene, cameraPX );\n\n\t\trenderer.setRenderTarget( renderTarget, 1 );\n\t\trenderer.render( scene, cameraNX );\n\n\t\trenderer.setRenderTarget( renderTarget, 2 );\n\t\trenderer.render( scene, cameraPY );\n\n\t\trenderer.setRenderTarget( renderTarget, 3 );\n\t\trenderer.render( scene, cameraNY );\n\n\t\trenderer.setRenderTarget( renderTarget, 4 );\n\t\trenderer.render( scene, cameraPZ );\n\n\t\trenderTarget.texture.generateMipmaps = generateMipmaps;\n\n\t\trenderer.setRenderTarget( renderTarget, 5 );\n\t\trenderer.render( scene, cameraNZ );\n\n\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t\trenderer.toneMapping = currentToneMapping;\n\t\trenderer.xr.enabled = currentXrEnabled;\n\n\t\trenderTarget.texture.needsPMREMUpdate = true;\n\n\t}\n\n}\n\nclass CubeTexture extends Texture {\n\n\tconstructor( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\n\n\t\timages = images !== undefined ? images : [];\n\t\tmapping = mapping !== undefined ? mapping : CubeReflectionMapping;\n\n\t\tsuper( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\t\tthis.isCubeTexture = true;\n\n\t\tthis.flipY = false;\n\n\t}\n\n\tget images() {\n\n\t\treturn this.image;\n\n\t}\n\n\tset images( value ) {\n\n\t\tthis.image = value;\n\n\t}\n\n}\n\nclass WebGLCubeRenderTarget extends WebGLRenderTarget {\n\n\tconstructor( size, options = {} ) {\n\n\t\tsuper( size, size, options );\n\n\t\tthis.isWebGLCubeRenderTarget = true;\n\n\t\tconst image = { width: size, height: size, depth: 1 };\n\t\tconst images = [ image, image, image, image, image, image ];\n\n\t\tthis.texture = new CubeTexture( images, options.mapping, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding );\n\n\t\t// By convention -- likely based on the RenderMan spec from the 1990's -- cube maps are specified by WebGL (and three.js)\n\t\t// in a coordinate system in which positive-x is to the right when looking up the positive-z axis -- in other words,\n\t\t// in a left-handed coordinate system. By continuing this convention, preexisting cube maps continued to render correctly.\n\n\t\t// three.js uses a right-handed coordinate system. So environment maps used in three.js appear to have px and nx swapped\n\t\t// and the flag isRenderTargetTexture controls this conversion. The flip is not required when using WebGLCubeRenderTarget.texture\n\t\t// as a cube texture (this is detected when isRenderTargetTexture is set to true for cube textures).\n\n\t\tthis.texture.isRenderTargetTexture = true;\n\n\t\tthis.texture.generateMipmaps = options.generateMipmaps !== undefined ? options.generateMipmaps : false;\n\t\tthis.texture.minFilter = options.minFilter !== undefined ? options.minFilter : LinearFilter;\n\n\t}\n\n\tfromEquirectangularTexture( renderer, texture ) {\n\n\t\tthis.texture.type = texture.type;\n\t\tthis.texture.encoding = texture.encoding;\n\n\t\tthis.texture.generateMipmaps = texture.generateMipmaps;\n\t\tthis.texture.minFilter = texture.minFilter;\n\t\tthis.texture.magFilter = texture.magFilter;\n\n\t\tconst shader = {\n\n\t\t\tuniforms: {\n\t\t\t\ttEquirect: { value: null },\n\t\t\t},\n\n\t\t\tvertexShader: /* glsl */`\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t`,\n\n\t\t\tfragmentShader: /* glsl */`\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t`\n\t\t};\n\n\t\tconst geometry = new BoxGeometry( 5, 5, 5 );\n\n\t\tconst material = new ShaderMaterial( {\n\n\t\t\tname: 'CubemapFromEquirect',\n\n\t\t\tuniforms: cloneUniforms( shader.uniforms ),\n\t\t\tvertexShader: shader.vertexShader,\n\t\t\tfragmentShader: shader.fragmentShader,\n\t\t\tside: BackSide,\n\t\t\tblending: NoBlending\n\n\t\t} );\n\n\t\tmaterial.uniforms.tEquirect.value = texture;\n\n\t\tconst mesh = new Mesh( geometry, material );\n\n\t\tconst currentMinFilter = texture.minFilter;\n\n\t\t// Avoid blurred poles\n\t\tif ( texture.minFilter === LinearMipmapLinearFilter ) texture.minFilter = LinearFilter;\n\n\t\tconst camera = new CubeCamera( 1, 10, this );\n\t\tcamera.update( renderer, mesh );\n\n\t\ttexture.minFilter = currentMinFilter;\n\n\t\tmesh.geometry.dispose();\n\t\tmesh.material.dispose();\n\n\t\treturn this;\n\n\t}\n\n\tclear( renderer, color, depth, stencil ) {\n\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\trenderer.setRenderTarget( this, i );\n\n\t\t\trenderer.clear( color, depth, stencil );\n\n\t\t}\n\n\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t}\n\n}\n\nconst _vector1 = /*@__PURE__*/ new Vector3();\nconst _vector2 = /*@__PURE__*/ new Vector3();\nconst _normalMatrix = /*@__PURE__*/ new Matrix3();\n\nclass Plane {\n\n\tconstructor( normal = new Vector3( 1, 0, 0 ), constant = 0 ) {\n\n\t\tthis.isPlane = true;\n\n\t\t// normal is assumed to be normalized\n\n\t\tthis.normal = normal;\n\t\tthis.constant = constant;\n\n\t}\n\n\tset( normal, constant ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = constant;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponents( x, y, z, w ) {\n\n\t\tthis.normal.set( x, y, z );\n\t\tthis.constant = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromNormalAndCoplanarPoint( normal, point ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = - point.dot( this.normal );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCoplanarPoints( a, b, c ) {\n\n\t\tconst normal = _vector1.subVectors( c, b ).cross( _vector2.subVectors( a, b ) ).normalize();\n\n\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\n\n\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( plane ) {\n\n\t\tthis.normal.copy( plane.normal );\n\t\tthis.constant = plane.constant;\n\n\t\treturn this;\n\n\t}\n\n\tnormalize() {\n\n\t\t// Note: will lead to a divide by zero if the plane is invalid.\n\n\t\tconst inverseNormalLength = 1.0 / this.normal.length();\n\t\tthis.normal.multiplyScalar( inverseNormalLength );\n\t\tthis.constant *= inverseNormalLength;\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.constant *= - 1;\n\t\tthis.normal.negate();\n\n\t\treturn this;\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\treturn this.normal.dot( point ) + this.constant;\n\n\t}\n\n\tdistanceToSphere( sphere ) {\n\n\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\n\n\t}\n\n\tprojectPoint( point, target ) {\n\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.distanceToPoint( point ) ).add( point );\n\n\t}\n\n\tintersectLine( line, target ) {\n\n\t\tconst direction = line.delta( _vector1 );\n\n\t\tconst denominator = this.normal.dot( direction );\n\n\t\tif ( denominator === 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( this.distanceToPoint( line.start ) === 0 ) {\n\n\t\t\t\treturn target.copy( line.start );\n\n\t\t\t}\n\n\t\t\t// Unsure if this is the correct method to handle this case.\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\n\n\t\tif ( t < 0 || t > 1 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\treturn target.copy( direction ).multiplyScalar( t ).add( line.start );\n\n\t}\n\n\tintersectsLine( line ) {\n\n\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\n\n\t\tconst startSign = this.distanceToPoint( line.start );\n\t\tconst endSign = this.distanceToPoint( line.end );\n\n\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn box.intersectsPlane( this );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\treturn sphere.intersectsPlane( this );\n\n\t}\n\n\tcoplanarPoint( target ) {\n\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.constant );\n\n\t}\n\n\tapplyMatrix4( matrix, optionalNormalMatrix ) {\n\n\t\tconst normalMatrix = optionalNormalMatrix || _normalMatrix.getNormalMatrix( matrix );\n\n\t\tconst referencePoint = this.coplanarPoint( _vector1 ).applyMatrix4( matrix );\n\n\t\tconst normal = this.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\tthis.constant = - referencePoint.dot( normal );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.constant -= offset.dot( this.normal );\n\n\t\treturn this;\n\n\t}\n\n\tequals( plane ) {\n\n\t\treturn plane.normal.equals( this.normal ) && ( plane.constant === this.constant );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nconst _sphere$2 = /*@__PURE__*/ new Sphere();\nconst _vector$7 = /*@__PURE__*/ new Vector3();\n\nclass Frustum {\n\n\tconstructor( p0 = new Plane(), p1 = new Plane(), p2 = new Plane(), p3 = new Plane(), p4 = new Plane(), p5 = new Plane() ) {\n\n\t\tthis.planes = [ p0, p1, p2, p3, p4, p5 ];\n\n\t}\n\n\tset( p0, p1, p2, p3, p4, p5 ) {\n\n\t\tconst planes = this.planes;\n\n\t\tplanes[ 0 ].copy( p0 );\n\t\tplanes[ 1 ].copy( p1 );\n\t\tplanes[ 2 ].copy( p2 );\n\t\tplanes[ 3 ].copy( p3 );\n\t\tplanes[ 4 ].copy( p4 );\n\t\tplanes[ 5 ].copy( p5 );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( frustum ) {\n\n\t\tconst planes = this.planes;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetFromProjectionMatrix( m ) {\n\n\t\tconst planes = this.planes;\n\t\tconst me = m.elements;\n\t\tconst me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\n\t\tconst me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\n\t\tconst me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\n\t\tconst me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\n\n\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\n\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\n\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\n\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\n\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\n\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\n\n\t\treturn this;\n\n\t}\n\n\tintersectsObject( object ) {\n\n\t\tconst geometry = object.geometry;\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere$2.copy( geometry.boundingSphere ).applyMatrix4( object.matrixWorld );\n\n\t\treturn this.intersectsSphere( _sphere$2 );\n\n\t}\n\n\tintersectsSprite( sprite ) {\n\n\t\t_sphere$2.center.set( 0, 0, 0 );\n\t\t_sphere$2.radius = 0.7071067811865476;\n\t\t_sphere$2.applyMatrix4( sprite.matrixWorld );\n\n\t\treturn this.intersectsSphere( _sphere$2 );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\tconst planes = this.planes;\n\t\tconst center = sphere.center;\n\t\tconst negRadius = - sphere.radius;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tconst distance = planes[ i ].distanceToPoint( center );\n\n\t\t\tif ( distance < negRadius ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\tconst planes = this.planes;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tconst plane = planes[ i ];\n\n\t\t\t// corner at max distance\n\n\t\t\t_vector$7.x = plane.normal.x > 0 ? box.max.x : box.min.x;\n\t\t\t_vector$7.y = plane.normal.y > 0 ? box.max.y : box.min.y;\n\t\t\t_vector$7.z = plane.normal.z > 0 ? box.max.z : box.min.z;\n\n\t\t\tif ( plane.distanceToPoint( _vector$7 ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\tconst planes = this.planes;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nfunction WebGLAnimation() {\n\n\tlet context = null;\n\tlet isAnimating = false;\n\tlet animationLoop = null;\n\tlet requestId = null;\n\n\tfunction onAnimationFrame( time, frame ) {\n\n\t\tanimationLoop( time, frame );\n\n\t\trequestId = context.requestAnimationFrame( onAnimationFrame );\n\n\t}\n\n\treturn {\n\n\t\tstart: function () {\n\n\t\t\tif ( isAnimating === true ) return;\n\t\t\tif ( animationLoop === null ) return;\n\n\t\t\trequestId = context.requestAnimationFrame( onAnimationFrame );\n\n\t\t\tisAnimating = true;\n\n\t\t},\n\n\t\tstop: function () {\n\n\t\t\tcontext.cancelAnimationFrame( requestId );\n\n\t\t\tisAnimating = false;\n\n\t\t},\n\n\t\tsetAnimationLoop: function ( callback ) {\n\n\t\t\tanimationLoop = callback;\n\n\t\t},\n\n\t\tsetContext: function ( value ) {\n\n\t\t\tcontext = value;\n\n\t\t}\n\n\t};\n\n}\n\nfunction WebGLAttributes( gl, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tconst buffers = new WeakMap();\n\n\tfunction createBuffer( attribute, bufferType ) {\n\n\t\tconst array = attribute.array;\n\t\tconst usage = attribute.usage;\n\n\t\tconst buffer = gl.createBuffer();\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\t\tgl.bufferData( bufferType, array, usage );\n\n\t\tattribute.onUploadCallback();\n\n\t\tlet type;\n\n\t\tif ( array instanceof Float32Array ) {\n\n\t\t\ttype = 5126;\n\n\t\t} else if ( array instanceof Uint16Array ) {\n\n\t\t\tif ( attribute.isFloat16BufferAttribute ) {\n\n\t\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t\ttype = 5131;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.' );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\ttype = 5123;\n\n\t\t\t}\n\n\t\t} else if ( array instanceof Int16Array ) {\n\n\t\t\ttype = 5122;\n\n\t\t} else if ( array instanceof Uint32Array ) {\n\n\t\t\ttype = 5125;\n\n\t\t} else if ( array instanceof Int32Array ) {\n\n\t\t\ttype = 5124;\n\n\t\t} else if ( array instanceof Int8Array ) {\n\n\t\t\ttype = 5120;\n\n\t\t} else if ( array instanceof Uint8Array ) {\n\n\t\t\ttype = 5121;\n\n\t\t} else if ( array instanceof Uint8ClampedArray ) {\n\n\t\t\ttype = 5121;\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.WebGLAttributes: Unsupported buffer data format: ' + array );\n\n\t\t}\n\n\t\treturn {\n\t\t\tbuffer: buffer,\n\t\t\ttype: type,\n\t\t\tbytesPerElement: array.BYTES_PER_ELEMENT,\n\t\t\tversion: attribute.version\n\t\t};\n\n\t}\n\n\tfunction updateBuffer( buffer, attribute, bufferType ) {\n\n\t\tconst array = attribute.array;\n\t\tconst updateRange = attribute.updateRange;\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\n\t\tif ( updateRange.count === - 1 ) {\n\n\t\t\t// Not using update ranges\n\n\t\t\tgl.bufferSubData( bufferType, 0, array );\n\n\t\t} else {\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\n\t\t\t\t\tarray, updateRange.offset, updateRange.count );\n\n\t\t\t} else {\n\n\t\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\n\t\t\t\t\tarray.subarray( updateRange.offset, updateRange.offset + updateRange.count ) );\n\n\t\t\t}\n\n\t\t\tupdateRange.count = - 1; // reset range\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction get( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\treturn buffers.get( attribute );\n\n\t}\n\n\tfunction remove( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tconst data = buffers.get( attribute );\n\n\t\tif ( data ) {\n\n\t\t\tgl.deleteBuffer( data.buffer );\n\n\t\t\tbuffers.delete( attribute );\n\n\t\t}\n\n\t}\n\n\tfunction update( attribute, bufferType ) {\n\n\t\tif ( attribute.isGLBufferAttribute ) {\n\n\t\t\tconst cached = buffers.get( attribute );\n\n\t\t\tif ( ! cached || cached.version < attribute.version ) {\n\n\t\t\t\tbuffers.set( attribute, {\n\t\t\t\t\tbuffer: attribute.buffer,\n\t\t\t\t\ttype: attribute.type,\n\t\t\t\t\tbytesPerElement: attribute.elementSize,\n\t\t\t\t\tversion: attribute.version\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tconst data = buffers.get( attribute );\n\n\t\tif ( data === undefined ) {\n\n\t\t\tbuffers.set( attribute, createBuffer( attribute, bufferType ) );\n\n\t\t} else if ( data.version < attribute.version ) {\n\n\t\t\tupdateBuffer( data.buffer, attribute, bufferType );\n\n\t\t\tdata.version = attribute.version;\n\n\t\t}\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tremove: remove,\n\t\tupdate: update\n\n\t};\n\n}\n\nclass PlaneGeometry extends BufferGeometry {\n\n\tconstructor( width = 1, height = 1, widthSegments = 1, heightSegments = 1 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'PlaneGeometry';\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments\n\t\t};\n\n\t\tconst width_half = width / 2;\n\t\tconst height_half = height / 2;\n\n\t\tconst gridX = Math.floor( widthSegments );\n\t\tconst gridY = Math.floor( heightSegments );\n\n\t\tconst gridX1 = gridX + 1;\n\t\tconst gridY1 = gridY + 1;\n\n\t\tconst segment_width = width / gridX;\n\t\tconst segment_height = height / gridY;\n\n\t\t//\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\tfor ( let iy = 0; iy < gridY1; iy ++ ) {\n\n\t\t\tconst y = iy * segment_height - height_half;\n\n\t\t\tfor ( let ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\t\tconst x = ix * segment_width - width_half;\n\n\t\t\t\tvertices.push( x, - y, 0 );\n\n\t\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\t\tuvs.push( ix / gridX );\n\t\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let iy = 0; iy < gridY; iy ++ ) {\n\n\t\t\tfor ( let ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\t\tconst a = ix + gridX1 * iy;\n\t\t\t\tconst b = ix + gridX1 * ( iy + 1 );\n\t\t\t\tconst c = ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\t\tconst d = ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new PlaneGeometry( data.width, data.height, data.widthSegments, data.heightSegments );\n\n\t}\n\n}\n\nvar alphamap_fragment = \"#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n#endif\";\n\nvar alphamap_pars_fragment = \"#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\";\n\nvar alphatest_fragment = \"#ifdef USE_ALPHATEST\\n\\tif ( diffuseColor.a < alphaTest ) discard;\\n#endif\";\n\nvar alphatest_pars_fragment = \"#ifdef USE_ALPHATEST\\n\\tuniform float alphaTest;\\n#endif\";\n\nvar aomap_fragment = \"#ifdef USE_AOMAP\\n\\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD )\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\\n\\t#endif\\n#endif\";\n\nvar aomap_pars_fragment = \"#ifdef USE_AOMAP\\n\\tuniform sampler2D aoMap;\\n\\tuniform float aoMapIntensity;\\n#endif\";\n\nvar begin_vertex = \"vec3 transformed = vec3( position );\";\n\nvar beginnormal_vertex = \"vec3 objectNormal = vec3( normal );\\n#ifdef USE_TANGENT\\n\\tvec3 objectTangent = vec3( tangent.xyz );\\n#endif\";\n\nvar bsdfs = \"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\\n\\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\\n\\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\\n\\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\\n}\\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\\n\\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\\n\\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\\n}\\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\\n    float x2 = x * x;\\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\\n}\\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\treturn 0.5 / max( gv + gl, EPSILON );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\\n\\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n}\\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tvec3 halfDir = normalize( lightDir + viewDir );\\n\\tfloat dotNL = saturate( dot( normal, lightDir ) );\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\\n\\tvec3 F = F_Schlick( f0, f90, dotVH );\\n\\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\tfloat D = D_GGX( alpha, dotNH );\\n\\treturn F * ( V * D );\\n}\\n#ifdef USE_IRIDESCENCE\\n\\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\\n\\t\\tfloat alpha = pow2( roughness );\\n\\t\\tvec3 halfDir = normalize( lightDir + viewDir );\\n\\t\\tfloat dotNL = saturate( dot( normal, lightDir ) );\\n\\t\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\t\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\t\\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\\n\\t\\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\\n\\t\\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\t\\tfloat D = D_GGX( alpha, dotNH );\\n\\t\\treturn F * ( V * D );\\n\\t}\\n#endif\\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\\n\\tconst float LUT_SIZE = 64.0;\\n\\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\\n\\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\\n\\tfloat dotNV = saturate( dot( N, V ) );\\n\\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\\n\\tuv = uv * LUT_SCALE + LUT_BIAS;\\n\\treturn uv;\\n}\\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\\n\\tfloat l = length( f );\\n\\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\\n}\\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\\n\\tfloat x = dot( v1, v2 );\\n\\tfloat y = abs( x );\\n\\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\\n\\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\\n\\tfloat v = a / b;\\n\\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\\n\\treturn cross( v1, v2 ) * theta_sintheta;\\n}\\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\\n\\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\\n\\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\\n\\tvec3 lightNormal = cross( v1, v2 );\\n\\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\\n\\tvec3 T1, T2;\\n\\tT1 = normalize( V - N * dot( V, N ) );\\n\\tT2 = - cross( N, T1 );\\n\\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\\n\\tvec3 coords[ 4 ];\\n\\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\\n\\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\\n\\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\\n\\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\\n\\tcoords[ 0 ] = normalize( coords[ 0 ] );\\n\\tcoords[ 1 ] = normalize( coords[ 1 ] );\\n\\tcoords[ 2 ] = normalize( coords[ 2 ] );\\n\\tcoords[ 3 ] = normalize( coords[ 3 ] );\\n\\tvec3 vectorFormFactor = vec3( 0.0 );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\\n\\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\\n\\treturn vec3( result );\\n}\\nfloat G_BlinnPhong_Implicit( ) {\\n\\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\\n\\tvec3 halfDir = normalize( lightDir + viewDir );\\n\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\\n\\tfloat G = G_BlinnPhong_Implicit( );\\n\\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\treturn F * ( G * D );\\n}\\n#if defined( USE_SHEEN )\\nfloat D_Charlie( float roughness, float dotNH ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tfloat invAlpha = 1.0 / alpha;\\n\\tfloat cos2h = dotNH * dotNH;\\n\\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\\n\\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\\n}\\nfloat V_Neubelt( float dotNV, float dotNL ) {\\n\\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\\n}\\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\\n\\tvec3 halfDir = normalize( lightDir + viewDir );\\n\\tfloat dotNL = saturate( dot( normal, lightDir ) );\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\tfloat D = D_Charlie( sheenRoughness, dotNH );\\n\\tfloat V = V_Neubelt( dotNV, dotNL );\\n\\treturn sheenColor * ( D * V );\\n}\\n#endif\";\n\nvar iridescence_fragment = \"#ifdef USE_IRIDESCENCE\\n\\tconst mat3 XYZ_TO_REC709 = mat3(\\n\\t\\t 3.2404542, -0.9692660,  0.0556434,\\n\\t\\t-1.5371385,  1.8760108, -0.2040259,\\n\\t\\t-0.4985314,  0.0415560,  1.0572252\\n\\t);\\n\\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\\n\\t\\tvec3 sqrtF0 = sqrt( fresnel0 );\\n\\t\\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\\n\\t}\\n\\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\\n\\t\\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\\n\\t}\\n\\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\\n\\t\\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\\n\\t}\\n\\tvec3 evalSensitivity( float OPD, vec3 shift ) {\\n\\t\\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\\n\\t\\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\\n\\t\\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\\n\\t\\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\\n\\t\\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\\n\\t\\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\\n\\t\\txyz /= 1.0685e-7;\\n\\t\\tvec3 rgb = XYZ_TO_REC709 * xyz;\\n\\t\\treturn rgb;\\n\\t}\\n\\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\\n\\t\\tvec3 I;\\n\\t\\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\\n\\t\\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\\n\\t\\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\\n\\t\\tif ( cosTheta2Sq < 0.0 ) {\\n\\t\\t\\t return vec3( 1.0 );\\n\\t\\t}\\n\\t\\tfloat cosTheta2 = sqrt( cosTheta2Sq );\\n\\t\\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\\n\\t\\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\\n\\t\\tfloat R21 = R12;\\n\\t\\tfloat T121 = 1.0 - R12;\\n\\t\\tfloat phi12 = 0.0;\\n\\t\\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\\n\\t\\tfloat phi21 = PI - phi12;\\n\\t\\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\\t\\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\\n\\t\\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\\n\\t\\tvec3 phi23 = vec3( 0.0 );\\n\\t\\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\\n\\t\\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\\n\\t\\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\\n\\t\\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\\n\\t\\tvec3 phi = vec3( phi21 ) + phi23;\\n\\t\\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\\n\\t\\tvec3 r123 = sqrt( R123 );\\n\\t\\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\\n\\t\\tvec3 C0 = R12 + Rs;\\n\\t\\tI = C0;\\n\\t\\tvec3 Cm = Rs - T121;\\n\\t\\tfor ( int m = 1; m <= 2; ++ m ) {\\n\\t\\t\\tCm *= r123;\\n\\t\\t\\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\\n\\t\\t\\tI += Cm * Sm;\\n\\t\\t}\\n\\t\\treturn max( I, vec3( 0.0 ) );\\n\\t}\\n#endif\";\n\nvar bumpmap_pars_fragment = \"#ifdef USE_BUMPMAP\\n\\tuniform sampler2D bumpMap;\\n\\tuniform float bumpScale;\\n\\tvec2 dHdxy_fwd() {\\n\\t\\tvec2 dSTdx = dFdx( vUv );\\n\\t\\tvec2 dSTdy = dFdy( vUv );\\n\\t\\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\\t\\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\\t\\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\t\\treturn vec2( dBx, dBy );\\n\\t}\\n\\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\\n\\t\\tvec3 vSigmaX = dFdx( surf_pos.xyz );\\n\\t\\tvec3 vSigmaY = dFdy( surf_pos.xyz );\\n\\t\\tvec3 vN = surf_norm;\\n\\t\\tvec3 R1 = cross( vSigmaY, vN );\\n\\t\\tvec3 R2 = cross( vN, vSigmaX );\\n\\t\\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\\n\\t\\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\\t\\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\t}\\n#endif\";\n\nvar clipping_planes_fragment = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvec4 plane;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\\n\\t\\tplane = clippingPlanes[ i ];\\n\\t\\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\\n\\t\\tbool clipped = true;\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\\n\\t\\t\\tplane = clippingPlanes[ i ];\\n\\t\\t\\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t\\tif ( clipped ) discard;\\n\\t#endif\\n#endif\";\n\nvar clipping_planes_pars_fragment = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvarying vec3 vClipPosition;\\n\\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n#endif\";\n\nvar clipping_planes_pars_vertex = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvarying vec3 vClipPosition;\\n#endif\";\n\nvar clipping_planes_vertex = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvClipPosition = - mvPosition.xyz;\\n#endif\";\n\nvar color_fragment = \"#if defined( USE_COLOR_ALPHA )\\n\\tdiffuseColor *= vColor;\\n#elif defined( USE_COLOR )\\n\\tdiffuseColor.rgb *= vColor;\\n#endif\";\n\nvar color_pars_fragment = \"#if defined( USE_COLOR_ALPHA )\\n\\tvarying vec4 vColor;\\n#elif defined( USE_COLOR )\\n\\tvarying vec3 vColor;\\n#endif\";\n\nvar color_pars_vertex = \"#if defined( USE_COLOR_ALPHA )\\n\\tvarying vec4 vColor;\\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\\n\\tvarying vec3 vColor;\\n#endif\";\n\nvar color_vertex = \"#if defined( USE_COLOR_ALPHA )\\n\\tvColor = vec4( 1.0 );\\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\\n\\tvColor = vec3( 1.0 );\\n#endif\\n#ifdef USE_COLOR\\n\\tvColor *= color;\\n#endif\\n#ifdef USE_INSTANCING_COLOR\\n\\tvColor.xyz *= instanceColor.xyz;\\n#endif\";\n\nvar common = \"#define PI 3.141592653589793\\n#define PI2 6.283185307179586\\n#define PI_HALF 1.5707963267948966\\n#define RECIPROCAL_PI 0.3183098861837907\\n#define RECIPROCAL_PI2 0.15915494309189535\\n#define EPSILON 1e-6\\n#ifndef saturate\\n#define saturate( a ) clamp( a, 0.0, 1.0 )\\n#endif\\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\\nfloat pow2( const in float x ) { return x*x; }\\nvec3 pow2( const in vec3 x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\\nhighp float rand( const in vec2 uv ) {\\n\\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\\treturn fract( sin( sn ) * c );\\n}\\n#ifdef HIGH_PRECISION\\n\\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\\n#else\\n\\tfloat precisionSafeLength( vec3 v ) {\\n\\t\\tfloat maxComponent = max3( abs( v ) );\\n\\t\\treturn length( v / maxComponent ) * maxComponent;\\n\\t}\\n#endif\\nstruct IncidentLight {\\n\\tvec3 color;\\n\\tvec3 direction;\\n\\tbool visible;\\n};\\nstruct ReflectedLight {\\n\\tvec3 directDiffuse;\\n\\tvec3 directSpecular;\\n\\tvec3 indirectDiffuse;\\n\\tvec3 indirectSpecular;\\n};\\nstruct GeometricContext {\\n\\tvec3 position;\\n\\tvec3 normal;\\n\\tvec3 viewDir;\\n#ifdef USE_CLEARCOAT\\n\\tvec3 clearcoatNormal;\\n#endif\\n};\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nmat3 transposeMat3( const in mat3 m ) {\\n\\tmat3 tmp;\\n\\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\\n\\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\\n\\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\\n\\treturn tmp;\\n}\\nfloat luminance( const in vec3 rgb ) {\\n\\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\\n\\treturn dot( weights, rgb );\\n}\\nbool isPerspectiveMatrix( mat4 m ) {\\n\\treturn m[ 2 ][ 3 ] == - 1.0;\\n}\\nvec2 equirectUv( in vec3 dir ) {\\n\\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\\n\\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\treturn vec2( u, v );\\n}\";\n\nvar cube_uv_reflection_fragment = \"#ifdef ENVMAP_TYPE_CUBE_UV\\n\\t#define cubeUV_minMipLevel 4.0\\n\\t#define cubeUV_minTileSize 16.0\\n\\tfloat getFace( vec3 direction ) {\\n\\t\\tvec3 absDirection = abs( direction );\\n\\t\\tfloat face = - 1.0;\\n\\t\\tif ( absDirection.x > absDirection.z ) {\\n\\t\\t\\tif ( absDirection.x > absDirection.y )\\n\\t\\t\\t\\tface = direction.x > 0.0 ? 0.0 : 3.0;\\n\\t\\t\\telse\\n\\t\\t\\t\\tface = direction.y > 0.0 ? 1.0 : 4.0;\\n\\t\\t} else {\\n\\t\\t\\tif ( absDirection.z > absDirection.y )\\n\\t\\t\\t\\tface = direction.z > 0.0 ? 2.0 : 5.0;\\n\\t\\t\\telse\\n\\t\\t\\t\\tface = direction.y > 0.0 ? 1.0 : 4.0;\\n\\t\\t}\\n\\t\\treturn face;\\n\\t}\\n\\tvec2 getUV( vec3 direction, float face ) {\\n\\t\\tvec2 uv;\\n\\t\\tif ( face == 0.0 ) {\\n\\t\\t\\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\\n\\t\\t} else if ( face == 1.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\\n\\t\\t} else if ( face == 2.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\\n\\t\\t} else if ( face == 3.0 ) {\\n\\t\\t\\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\\n\\t\\t} else if ( face == 4.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\\n\\t\\t} else {\\n\\t\\t\\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\\n\\t\\t}\\n\\t\\treturn 0.5 * ( uv + 1.0 );\\n\\t}\\n\\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\\n\\t\\tfloat face = getFace( direction );\\n\\t\\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\\n\\t\\tmipInt = max( mipInt, cubeUV_minMipLevel );\\n\\t\\tfloat faceSize = exp2( mipInt );\\n\\t\\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\\n\\t\\tif ( face > 2.0 ) {\\n\\t\\t\\tuv.y += faceSize;\\n\\t\\t\\tface -= 3.0;\\n\\t\\t}\\n\\t\\tuv.x += face * faceSize;\\n\\t\\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\\n\\t\\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\\n\\t\\tuv.x *= CUBEUV_TEXEL_WIDTH;\\n\\t\\tuv.y *= CUBEUV_TEXEL_HEIGHT;\\n\\t\\t#ifdef texture2DGradEXT\\n\\t\\t\\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\\n\\t\\t#else\\n\\t\\t\\treturn texture2D( envMap, uv ).rgb;\\n\\t\\t#endif\\n\\t}\\n\\t#define cubeUV_r0 1.0\\n\\t#define cubeUV_v0 0.339\\n\\t#define cubeUV_m0 - 2.0\\n\\t#define cubeUV_r1 0.8\\n\\t#define cubeUV_v1 0.276\\n\\t#define cubeUV_m1 - 1.0\\n\\t#define cubeUV_r4 0.4\\n\\t#define cubeUV_v4 0.046\\n\\t#define cubeUV_m4 2.0\\n\\t#define cubeUV_r5 0.305\\n\\t#define cubeUV_v5 0.016\\n\\t#define cubeUV_m5 3.0\\n\\t#define cubeUV_r6 0.21\\n\\t#define cubeUV_v6 0.0038\\n\\t#define cubeUV_m6 4.0\\n\\tfloat roughnessToMip( float roughness ) {\\n\\t\\tfloat mip = 0.0;\\n\\t\\tif ( roughness >= cubeUV_r1 ) {\\n\\t\\t\\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\\n\\t\\t} else if ( roughness >= cubeUV_r4 ) {\\n\\t\\t\\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\\n\\t\\t} else if ( roughness >= cubeUV_r5 ) {\\n\\t\\t\\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\\n\\t\\t} else if ( roughness >= cubeUV_r6 ) {\\n\\t\\t\\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\\n\\t\\t} else {\\n\\t\\t\\tmip = - 2.0 * log2( 1.16 * roughness );\\t\\t}\\n\\t\\treturn mip;\\n\\t}\\n\\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\\n\\t\\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\\n\\t\\tfloat mipF = fract( mip );\\n\\t\\tfloat mipInt = floor( mip );\\n\\t\\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\\n\\t\\tif ( mipF == 0.0 ) {\\n\\t\\t\\treturn vec4( color0, 1.0 );\\n\\t\\t} else {\\n\\t\\t\\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\\n\\t\\t\\treturn vec4( mix( color0, color1, mipF ), 1.0 );\\n\\t\\t}\\n\\t}\\n#endif\";\n\nvar defaultnormal_vertex = \"vec3 transformedNormal = objectNormal;\\n#ifdef USE_INSTANCING\\n\\tmat3 m = mat3( instanceMatrix );\\n\\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\\n\\ttransformedNormal = m * transformedNormal;\\n#endif\\ntransformedNormal = normalMatrix * transformedNormal;\\n#ifdef FLIP_SIDED\\n\\ttransformedNormal = - transformedNormal;\\n#endif\\n#ifdef USE_TANGENT\\n\\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\\n\\t#ifdef FLIP_SIDED\\n\\t\\ttransformedTangent = - transformedTangent;\\n\\t#endif\\n#endif\";\n\nvar displacementmap_pars_vertex = \"#ifdef USE_DISPLACEMENTMAP\\n\\tuniform sampler2D displacementMap;\\n\\tuniform float displacementScale;\\n\\tuniform float displacementBias;\\n#endif\";\n\nvar displacementmap_vertex = \"#ifdef USE_DISPLACEMENTMAP\\n\\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\\n#endif\";\n\nvar emissivemap_fragment = \"#ifdef USE_EMISSIVEMAP\\n\\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n#endif\";\n\nvar emissivemap_pars_fragment = \"#ifdef USE_EMISSIVEMAP\\n\\tuniform sampler2D emissiveMap;\\n#endif\";\n\nvar encodings_fragment = \"gl_FragColor = linearToOutputTexel( gl_FragColor );\";\n\nvar encodings_pars_fragment = \"vec4 LinearToLinear( in vec4 value ) {\\n\\treturn value;\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\\n}\";\n\nvar envmap_fragment = \"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvec3 cameraToFrag;\\n\\t\\tif ( isOrthographic ) {\\n\\t\\t\\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t} else {\\n\\t\\t\\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#else\\n\\t\\tvec3 reflectVec = vReflect;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\\n\\t#else\\n\\t\\tvec4 envColor = vec4( 0.0 );\\n\\t#endif\\n\\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\t\\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\t\\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\t\\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\t#endif\\n#endif\";\n\nvar envmap_common_pars_fragment = \"#ifdef USE_ENVMAP\\n\\tuniform float envMapIntensity;\\n\\tuniform float flipEnvMap;\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tuniform samplerCube envMap;\\n\\t#else\\n\\t\\tuniform sampler2D envMap;\\n\\t#endif\\n\\t\\n#endif\";\n\nvar envmap_pars_fragment = \"#ifdef USE_ENVMAP\\n\\tuniform float reflectivity;\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t\\tuniform float refractionRatio;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t#endif\\n#endif\";\n\nvar envmap_pars_vertex = \"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\t\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n#endif\";\n\nvar envmap_vertex = \"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvWorldPosition = worldPosition.xyz;\\n\\t#else\\n\\t\\tvec3 cameraToVertex;\\n\\t\\tif ( isOrthographic ) {\\n\\t\\t\\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t} else {\\n\\t\\t\\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#endif\\n#endif\";\n\nvar fog_vertex = \"#ifdef USE_FOG\\n\\tvFogDepth = - mvPosition.z;\\n#endif\";\n\nvar fog_pars_vertex = \"#ifdef USE_FOG\\n\\tvarying float vFogDepth;\\n#endif\";\n\nvar fog_fragment = \"#ifdef USE_FOG\\n\\t#ifdef FOG_EXP2\\n\\t\\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\\n\\t#else\\n\\t\\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\\n\\t#endif\\n\\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n#endif\";\n\nvar fog_pars_fragment = \"#ifdef USE_FOG\\n\\tuniform vec3 fogColor;\\n\\tvarying float vFogDepth;\\n\\t#ifdef FOG_EXP2\\n\\t\\tuniform float fogDensity;\\n\\t#else\\n\\t\\tuniform float fogNear;\\n\\t\\tuniform float fogFar;\\n\\t#endif\\n#endif\";\n\nvar gradientmap_pars_fragment = \"#ifdef USE_GRADIENTMAP\\n\\tuniform sampler2D gradientMap;\\n#endif\\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\\n\\tfloat dotNL = dot( normal, lightDirection );\\n\\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\\n\\t#ifdef USE_GRADIENTMAP\\n\\t\\treturn vec3( texture2D( gradientMap, coord ).r );\\n\\t#else\\n\\t\\tvec2 fw = fwidth( coord ) * 0.5;\\n\\t\\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\\n\\t#endif\\n}\";\n\nvar lightmap_fragment = \"#ifdef USE_LIGHTMAP\\n\\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\\n\\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\\n\\treflectedLight.indirectDiffuse += lightMapIrradiance;\\n#endif\";\n\nvar lightmap_pars_fragment = \"#ifdef USE_LIGHTMAP\\n\\tuniform sampler2D lightMap;\\n\\tuniform float lightMapIntensity;\\n#endif\";\n\nvar lights_lambert_fragment = \"LambertMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularStrength = specularStrength;\";\n\nvar lights_lambert_pars_fragment = \"varying vec3 vViewPosition;\\nstruct LambertMaterial {\\n\\tvec3 diffuseColor;\\n\\tfloat specularStrength;\\n};\\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Lambert\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Lambert\\n#define Material_LightProbeLOD( material )\\t(0)\";\n\nvar lights_pars_begin = \"uniform bool receiveShadow;\\nuniform vec3 ambientLightColor;\\nuniform vec3 lightProbe[ 9 ];\\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\\n\\tfloat x = normal.x, y = normal.y, z = normal.z;\\n\\tvec3 result = shCoefficients[ 0 ] * 0.886227;\\n\\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\\n\\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\\n\\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\\n\\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\\n\\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\\n\\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\\n\\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\\n\\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\\n\\treturn result;\\n}\\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\\n\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\\n\\treturn irradiance;\\n}\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\\tvec3 irradiance = ambientLightColor;\\n\\treturn irradiance;\\n}\\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n\\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\\n\\t\\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\\t\\tif ( cutoffDistance > 0.0 ) {\\n\\t\\t\\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\\t\\t}\\n\\t\\treturn distanceFalloff;\\n\\t#else\\n\\t\\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\\n\\t\\t\\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n\\t\\t}\\n\\t\\treturn 1.0;\\n\\t#endif\\n}\\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\\n\\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\\n}\\n#if NUM_DIR_LIGHTS > 0\\n\\tstruct DirectionalLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t};\\n\\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\\n\\t\\tlight.color = directionalLight.color;\\n\\t\\tlight.direction = directionalLight.direction;\\n\\t\\tlight.visible = true;\\n\\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\tstruct PointLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t};\\n\\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\\n\\t\\tvec3 lVector = pointLight.position - geometry.position;\\n\\t\\tlight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tlight.color = pointLight.color;\\n\\t\\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\\n\\t\\tlight.visible = ( light.color != vec3( 0.0 ) );\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tstruct SpotLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tfloat coneCos;\\n\\t\\tfloat penumbraCos;\\n\\t};\\n\\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\\n\\t\\tvec3 lVector = spotLight.position - geometry.position;\\n\\t\\tlight.direction = normalize( lVector );\\n\\t\\tfloat angleCos = dot( light.direction, spotLight.direction );\\n\\t\\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\\t\\tif ( spotAttenuation > 0.0 ) {\\n\\t\\t\\tfloat lightDistance = length( lVector );\\n\\t\\t\\tlight.color = spotLight.color * spotAttenuation;\\n\\t\\t\\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\\n\\t\\t\\tlight.visible = ( light.color != vec3( 0.0 ) );\\n\\t\\t} else {\\n\\t\\t\\tlight.color = vec3( 0.0 );\\n\\t\\t\\tlight.visible = false;\\n\\t\\t}\\n\\t}\\n#endif\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tstruct RectAreaLight {\\n\\t\\tvec3 color;\\n\\t\\tvec3 position;\\n\\t\\tvec3 halfWidth;\\n\\t\\tvec3 halfHeight;\\n\\t};\\n\\tuniform sampler2D ltc_1;\\tuniform sampler2D ltc_2;\\n\\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tstruct HemisphereLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 skyColor;\\n\\t\\tvec3 groundColor;\\n\\t};\\n\\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\\n\\t\\tfloat dotNL = dot( normal, hemiLight.direction );\\n\\t\\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\\t\\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\\t\\treturn irradiance;\\n\\t}\\n#endif\";\n\nvar envmap_physical_pars_fragment = \"#if defined( USE_ENVMAP )\\n\\tvec3 getIBLIrradiance( const in vec3 normal ) {\\n\\t\\t#if defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\\n\\t\\t\\treturn PI * envMapColor.rgb * envMapIntensity;\\n\\t\\t#else\\n\\t\\t\\treturn vec3( 0.0 );\\n\\t\\t#endif\\n\\t}\\n\\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\\n\\t\\t#if defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 reflectVec = reflect( - viewDir, normal );\\n\\t\\t\\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\\n\\t\\t\\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\\n\\t\\t\\treturn envMapColor.rgb * envMapIntensity;\\n\\t\\t#else\\n\\t\\t\\treturn vec3( 0.0 );\\n\\t\\t#endif\\n\\t}\\n#endif\";\n\nvar lights_toon_fragment = \"ToonMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\";\n\nvar lights_toon_pars_fragment = \"varying vec3 vViewPosition;\\nstruct ToonMaterial {\\n\\tvec3 diffuseColor;\\n};\\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Toon\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Toon\\n#define Material_LightProbeLOD( material )\\t(0)\";\n\nvar lights_phong_fragment = \"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\";\n\nvar lights_phong_pars_fragment = \"varying vec3 vViewPosition;\\nstruct BlinnPhongMaterial {\\n\\tvec3 diffuseColor;\\n\\tvec3 specularColor;\\n\\tfloat specularShininess;\\n\\tfloat specularStrength;\\n};\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n\\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_BlinnPhong\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_BlinnPhong\\n#define Material_LightProbeLOD( material )\\t(0)\";\n\nvar lights_physical_fragment = \"PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\\nmaterial.roughness = min( material.roughness, 1.0 );\\n#ifdef IOR\\n\\tmaterial.ior = ior;\\n\\t#ifdef SPECULAR\\n\\t\\tfloat specularIntensityFactor = specularIntensity;\\n\\t\\tvec3 specularColorFactor = specularColor;\\n\\t\\t#ifdef USE_SPECULARINTENSITYMAP\\n\\t\\t\\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\\n\\t\\t#endif\\n\\t\\t#ifdef USE_SPECULARCOLORMAP\\n\\t\\t\\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\\n\\t\\t#endif\\n\\t\\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\\n\\t#else\\n\\t\\tfloat specularIntensityFactor = 1.0;\\n\\t\\tvec3 specularColorFactor = vec3( 1.0 );\\n\\t\\tmaterial.specularF90 = 1.0;\\n\\t#endif\\n\\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\\n#else\\n\\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\\n\\tmaterial.specularF90 = 1.0;\\n#endif\\n#ifdef USE_CLEARCOAT\\n\\tmaterial.clearcoat = clearcoat;\\n\\tmaterial.clearcoatRoughness = clearcoatRoughness;\\n\\tmaterial.clearcoatF0 = vec3( 0.04 );\\n\\tmaterial.clearcoatF90 = 1.0;\\n\\t#ifdef USE_CLEARCOATMAP\\n\\t\\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\\n\\t#endif\\n\\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\t\\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\\n\\t#endif\\n\\tmaterial.clearcoat = saturate( material.clearcoat );\\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\\n\\tmaterial.clearcoatRoughness += geometryRoughness;\\n\\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\\n#endif\\n#ifdef USE_IRIDESCENCE\\n\\tmaterial.iridescence = iridescence;\\n\\tmaterial.iridescenceIOR = iridescenceIOR;\\n\\t#ifdef USE_IRIDESCENCEMAP\\n\\t\\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\\n\\t#endif\\n\\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\\n\\t\\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\\n\\t#else\\n\\t\\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\\n\\t#endif\\n#endif\\n#ifdef USE_SHEEN\\n\\tmaterial.sheenColor = sheenColor;\\n\\t#ifdef USE_SHEENCOLORMAP\\n\\t\\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\\n\\t#endif\\n\\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\\n\\t#ifdef USE_SHEENROUGHNESSMAP\\n\\t\\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\\n\\t#endif\\n#endif\";\n\nvar lights_physical_pars_fragment = \"struct PhysicalMaterial {\\n\\tvec3 diffuseColor;\\n\\tfloat roughness;\\n\\tvec3 specularColor;\\n\\tfloat specularF90;\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tfloat clearcoat;\\n\\t\\tfloat clearcoatRoughness;\\n\\t\\tvec3 clearcoatF0;\\n\\t\\tfloat clearcoatF90;\\n\\t#endif\\n\\t#ifdef USE_IRIDESCENCE\\n\\t\\tfloat iridescence;\\n\\t\\tfloat iridescenceIOR;\\n\\t\\tfloat iridescenceThickness;\\n\\t\\tvec3 iridescenceFresnel;\\n\\t\\tvec3 iridescenceF0;\\n\\t#endif\\n\\t#ifdef USE_SHEEN\\n\\t\\tvec3 sheenColor;\\n\\t\\tfloat sheenRoughness;\\n\\t#endif\\n\\t#ifdef IOR\\n\\t\\tfloat ior;\\n\\t#endif\\n\\t#ifdef USE_TRANSMISSION\\n\\t\\tfloat transmission;\\n\\t\\tfloat transmissionAlpha;\\n\\t\\tfloat thickness;\\n\\t\\tfloat attenuationDistance;\\n\\t\\tvec3 attenuationColor;\\n\\t#endif\\n};\\nvec3 clearcoatSpecular = vec3( 0.0 );\\nvec3 sheenSpecular = vec3( 0.0 );\\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tfloat r2 = roughness * roughness;\\n\\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\\n\\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\\n\\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\\n\\treturn saturate( DG * RECIPROCAL_PI );\\n}\\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\\tvec4 r = roughness * c0 + c1;\\n\\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\\n\\treturn fab;\\n}\\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\\n\\tvec2 fab = DFGApprox( normal, viewDir, roughness );\\n\\treturn specularColor * fab.x + specularF90 * fab.y;\\n}\\n#ifdef USE_IRIDESCENCE\\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\\n#else\\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\\n#endif\\n\\tvec2 fab = DFGApprox( normal, viewDir, roughness );\\n\\t#ifdef USE_IRIDESCENCE\\n\\t\\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\\n\\t#else\\n\\t\\tvec3 Fr = specularColor;\\n\\t#endif\\n\\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\\n\\tfloat Ess = fab.x + fab.y;\\n\\tfloat Ems = 1.0 - Ess;\\n\\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\\n\\tsingleScatter += FssEss;\\n\\tmultiScatter += Fms * Ems;\\n}\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t\\tvec3 normal = geometry.normal;\\n\\t\\tvec3 viewDir = geometry.viewDir;\\n\\t\\tvec3 position = geometry.position;\\n\\t\\tvec3 lightPos = rectAreaLight.position;\\n\\t\\tvec3 halfWidth = rectAreaLight.halfWidth;\\n\\t\\tvec3 halfHeight = rectAreaLight.halfHeight;\\n\\t\\tvec3 lightColor = rectAreaLight.color;\\n\\t\\tfloat roughness = material.roughness;\\n\\t\\tvec3 rectCoords[ 4 ];\\n\\t\\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\\t\\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\\n\\t\\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\\n\\t\\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\\n\\t\\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\\n\\t\\tvec4 t1 = texture2D( ltc_1, uv );\\n\\t\\tvec4 t2 = texture2D( ltc_2, uv );\\n\\t\\tmat3 mInv = mat3(\\n\\t\\t\\tvec3( t1.x, 0, t1.y ),\\n\\t\\t\\tvec3(    0, 1,    0 ),\\n\\t\\t\\tvec3( t1.z, 0, t1.w )\\n\\t\\t);\\n\\t\\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\\n\\t\\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\\n\\t\\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\\n\\t}\\n#endif\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\\n\\t\\tvec3 ccIrradiance = dotNLcc * directLight.color;\\n\\t\\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\\n\\t#endif\\n\\t#ifdef USE_SHEEN\\n\\t\\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\\n\\t#endif\\n\\t#ifdef USE_IRIDESCENCE\\n\\t\\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\\n\\t#else\\n\\t\\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\\n\\t#endif\\n\\t#ifdef USE_SHEEN\\n\\t\\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\\n\\t#endif\\n\\tvec3 singleScattering = vec3( 0.0 );\\n\\tvec3 multiScattering = vec3( 0.0 );\\n\\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\\n\\t#ifdef USE_IRIDESCENCE\\n\\t\\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\\n\\t#else\\n\\t\\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\\n\\t#endif\\n\\tvec3 totalScattering = singleScattering + multiScattering;\\n\\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\\n\\treflectedLight.indirectSpecular += radiance * singleScattering;\\n\\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\\n\\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Physical\\n#define RE_Direct_RectArea\\t\\tRE_Direct_RectArea_Physical\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\\t\\tRE_IndirectSpecular_Physical\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n}\";\n\nvar lights_fragment_begin = \"\\nGeometricContext geometry;\\ngeometry.position = - vViewPosition;\\ngeometry.normal = normal;\\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\\n#ifdef USE_CLEARCOAT\\n\\tgeometry.clearcoatNormal = clearcoatNormal;\\n#endif\\n#ifdef USE_IRIDESCENCE\\n\\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\\n\\tif ( material.iridescenceThickness == 0.0 ) {\\n\\t\\tmaterial.iridescence = 0.0;\\n\\t} else {\\n\\t\\tmaterial.iridescence = saturate( material.iridescence );\\n\\t}\\n\\tif ( material.iridescence > 0.0 ) {\\n\\t\\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\\n\\t\\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\\n\\t}\\n#endif\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tPointLight pointLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLightShadow pointLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tgetPointLightInfo( pointLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\\n\\t\\tpointLightShadow = pointLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tSpotLight spotLight;\\n\\tvec4 spotColor;\\n\\tvec3 spotLightCoord;\\n\\tbool inSpotLightMap;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLightShadow spotLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tgetSpotLightInfo( spotLight, geometry, directLight );\\n\\t\\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\\n\\t\\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\\n\\t\\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\\n\\t\\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\\n\\t\\t#else\\n\\t\\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\\n\\t\\t#endif\\n\\t\\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\\n\\t\\t\\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\\n\\t\\t\\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\\n\\t\\t\\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\\n\\t\\t\\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\\n\\t\\t#endif\\n\\t\\t#undef SPOT_LIGHT_MAP_INDEX\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\\n\\t\\tspotLightShadow = spotLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tDirectionalLight directionalLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLightShadow directionalLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\\n\\t\\tdirectionalLightShadow = directionalLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\\n\\tRectAreaLight rectAreaLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\\n\\t\\trectAreaLight = rectAreaLights[ i ];\\n\\t\\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\\tvec3 iblIrradiance = vec3( 0.0 );\\n\\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\\n\\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\t\\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t#endif\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tvec3 radiance = vec3( 0.0 );\\n\\tvec3 clearcoatRadiance = vec3( 0.0 );\\n#endif\";\n\nvar lights_fragment_maps = \"#if defined( RE_IndirectDiffuse )\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\\n\\t\\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\\n\\t\\tirradiance += lightMapIrradiance;\\n\\t#endif\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tiblIrradiance += getIBLIrradiance( geometry.normal );\\n\\t#endif\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\\n\\t#endif\\n#endif\";\n\nvar lights_fragment_end = \"#if defined( RE_IndirectDiffuse )\\n\\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\\n#endif\";\n\nvar logdepthbuf_fragment = \"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\\n#endif\";\n\nvar logdepthbuf_pars_fragment = \"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tuniform float logDepthBufFC;\\n\\tvarying float vFragDepth;\\n\\tvarying float vIsPerspective;\\n#endif\";\n\nvar logdepthbuf_pars_vertex = \"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t\\tvarying float vIsPerspective;\\n\\t#else\\n\\t\\tuniform float logDepthBufFC;\\n\\t#endif\\n#endif\";\n\nvar logdepthbuf_vertex = \"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvFragDepth = 1.0 + gl_Position.w;\\n\\t\\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\\n\\t#else\\n\\t\\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\\n\\t\\t\\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\\n\\t\\t\\tgl_Position.z *= gl_Position.w;\\n\\t\\t}\\n\\t#endif\\n#endif\";\n\nvar map_fragment = \"#ifdef USE_MAP\\n\\tvec4 sampledDiffuseColor = texture2D( map, vUv );\\n\\t#ifdef DECODE_VIDEO_TEXTURE\\n\\t\\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\\n\\t#endif\\n\\tdiffuseColor *= sampledDiffuseColor;\\n#endif\";\n\nvar map_pars_fragment = \"#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\";\n\nvar map_particle_fragment = \"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\\n#endif\\n#ifdef USE_MAP\\n\\tdiffuseColor *= texture2D( map, uv );\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\\n#endif\";\n\nvar map_particle_pars_fragment = \"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\tuniform mat3 uvTransform;\\n#endif\\n#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\";\n\nvar metalnessmap_fragment = \"float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\\n\\tmetalnessFactor *= texelMetalness.b;\\n#endif\";\n\nvar metalnessmap_pars_fragment = \"#ifdef USE_METALNESSMAP\\n\\tuniform sampler2D metalnessMap;\\n#endif\";\n\nvar morphcolor_vertex = \"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\\n\\tvColor *= morphTargetBaseInfluence;\\n\\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\\n\\t\\t#if defined( USE_COLOR_ALPHA )\\n\\t\\t\\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\\n\\t\\t#elif defined( USE_COLOR )\\n\\t\\t\\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\\n\\t\\t#endif\\n\\t}\\n#endif\";\n\nvar morphnormal_vertex = \"#ifdef USE_MORPHNORMALS\\n\\tobjectNormal *= morphTargetBaseInfluence;\\n\\t#ifdef MORPHTARGETS_TEXTURE\\n\\t\\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\\n\\t\\t\\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\\n\\t\\t}\\n\\t#else\\n\\t\\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\\n\\t\\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\\n\\t\\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\\n\\t\\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\\n\\t#endif\\n#endif\";\n\nvar morphtarget_pars_vertex = \"#ifdef USE_MORPHTARGETS\\n\\tuniform float morphTargetBaseInfluence;\\n\\t#ifdef MORPHTARGETS_TEXTURE\\n\\t\\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\\n\\t\\tuniform sampler2DArray morphTargetsTexture;\\n\\t\\tuniform ivec2 morphTargetsTextureSize;\\n\\t\\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\\n\\t\\t\\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\\n\\t\\t\\tint y = texelIndex / morphTargetsTextureSize.x;\\n\\t\\t\\tint x = texelIndex - y * morphTargetsTextureSize.x;\\n\\t\\t\\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\\n\\t\\t\\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\\n\\t\\t}\\n\\t#else\\n\\t\\t#ifndef USE_MORPHNORMALS\\n\\t\\t\\tuniform float morphTargetInfluences[ 8 ];\\n\\t\\t#else\\n\\t\\t\\tuniform float morphTargetInfluences[ 4 ];\\n\\t\\t#endif\\n\\t#endif\\n#endif\";\n\nvar morphtarget_vertex = \"#ifdef USE_MORPHTARGETS\\n\\ttransformed *= morphTargetBaseInfluence;\\n\\t#ifdef MORPHTARGETS_TEXTURE\\n\\t\\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\\n\\t\\t\\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\\n\\t\\t}\\n\\t#else\\n\\t\\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\\n\\t\\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\\n\\t\\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\\n\\t\\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\\n\\t\\t#ifndef USE_MORPHNORMALS\\n\\t\\t\\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\\n\\t\\t\\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\\n\\t\\t\\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\\n\\t\\t\\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\\n\\t\\t#endif\\n\\t#endif\\n#endif\";\n\nvar normal_fragment_begin = \"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\\n#ifdef FLAT_SHADED\\n\\tvec3 fdx = dFdx( vViewPosition );\\n\\tvec3 fdy = dFdy( vViewPosition );\\n\\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\\tvec3 normal = normalize( vNormal );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * faceDirection;\\n\\t#endif\\n\\t#ifdef USE_TANGENT\\n\\t\\tvec3 tangent = normalize( vTangent );\\n\\t\\tvec3 bitangent = normalize( vBitangent );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\ttangent = tangent * faceDirection;\\n\\t\\t\\tbitangent = bitangent * faceDirection;\\n\\t\\t#endif\\n\\t\\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\\n\\t\\t\\tmat3 vTBN = mat3( tangent, bitangent, normal );\\n\\t\\t#endif\\n\\t#endif\\n#endif\\nvec3 geometryNormal = normal;\";\n\nvar normal_fragment_maps = \"#ifdef OBJECTSPACE_NORMALMAP\\n\\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\t#ifdef FLIP_SIDED\\n\\t\\tnormal = - normal;\\n\\t#endif\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * faceDirection;\\n\\t#endif\\n\\tnormal = normalize( normalMatrix * normal );\\n#elif defined( TANGENTSPACE_NORMALMAP )\\n\\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\tmapN.xy *= normalScale;\\n\\t#ifdef USE_TANGENT\\n\\t\\tnormal = normalize( vTBN * mapN );\\n\\t#else\\n\\t\\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\\n\\t#endif\\n#elif defined( USE_BUMPMAP )\\n\\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\\n#endif\";\n\nvar normal_pars_fragment = \"#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\";\n\nvar normal_pars_vertex = \"#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\";\n\nvar normal_vertex = \"#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n\\t#ifdef USE_TANGENT\\n\\t\\tvTangent = normalize( transformedTangent );\\n\\t\\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\\n\\t#endif\\n#endif\";\n\nvar normalmap_pars_fragment = \"#ifdef USE_NORMALMAP\\n\\tuniform sampler2D normalMap;\\n\\tuniform vec2 normalScale;\\n#endif\\n#ifdef OBJECTSPACE_NORMALMAP\\n\\tuniform mat3 normalMatrix;\\n#endif\\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\\n\\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\\n\\t\\tvec3 q0 = dFdx( eye_pos.xyz );\\n\\t\\tvec3 q1 = dFdy( eye_pos.xyz );\\n\\t\\tvec2 st0 = dFdx( vUv.st );\\n\\t\\tvec2 st1 = dFdy( vUv.st );\\n\\t\\tvec3 N = surf_norm;\\n\\t\\tvec3 q1perp = cross( q1, N );\\n\\t\\tvec3 q0perp = cross( N, q0 );\\n\\t\\tvec3 T = q1perp * st0.x + q0perp * st1.x;\\n\\t\\tvec3 B = q1perp * st0.y + q0perp * st1.y;\\n\\t\\tfloat det = max( dot( T, T ), dot( B, B ) );\\n\\t\\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\\n\\t\\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\\n\\t}\\n#endif\";\n\nvar clearcoat_normal_fragment_begin = \"#ifdef USE_CLEARCOAT\\n\\tvec3 clearcoatNormal = geometryNormal;\\n#endif\";\n\nvar clearcoat_normal_fragment_maps = \"#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\\n\\tclearcoatMapN.xy *= clearcoatNormalScale;\\n\\t#ifdef USE_TANGENT\\n\\t\\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\\n\\t#else\\n\\t\\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\\n\\t#endif\\n#endif\";\n\nvar clearcoat_pars_fragment = \"#ifdef USE_CLEARCOATMAP\\n\\tuniform sampler2D clearcoatMap;\\n#endif\\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\tuniform sampler2D clearcoatRoughnessMap;\\n#endif\\n#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tuniform sampler2D clearcoatNormalMap;\\n\\tuniform vec2 clearcoatNormalScale;\\n#endif\";\n\nvar iridescence_pars_fragment = \"#ifdef USE_IRIDESCENCEMAP\\n\\tuniform sampler2D iridescenceMap;\\n#endif\\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\\n\\tuniform sampler2D iridescenceThicknessMap;\\n#endif\";\n\nvar output_fragment = \"#ifdef OPAQUE\\ndiffuseColor.a = 1.0;\\n#endif\\n#ifdef USE_TRANSMISSION\\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\\n#endif\\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );\";\n\nvar packing = \"vec3 packNormalToRGB( const in vec3 normal ) {\\n\\treturn normalize( normal ) * 0.5 + 0.5;\\n}\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n\\treturn 2.0 * rgb.xyz - 1.0;\\n}\\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\\nconst float ShiftRight8 = 1. / 256.;\\nvec4 packDepthToRGBA( const in float v ) {\\n\\tvec4 r = vec4( fract( v * PackFactors ), v );\\n\\tr.yzw -= r.xyz * ShiftRight8;\\treturn r * PackUpscale;\\n}\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\\treturn dot( v, UnpackFactors );\\n}\\nvec4 pack2HalfToRGBA( vec2 v ) {\\n\\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\\n\\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\\n}\\nvec2 unpackRGBATo2Half( vec4 v ) {\\n\\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\\n}\\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( viewZ + near ) / ( near - far );\\n}\\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\\n\\treturn linearClipZ * ( near - far ) - near;\\n}\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\\n\\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\\n}\";\n\nvar premultiplied_alpha_fragment = \"#ifdef PREMULTIPLIED_ALPHA\\n\\tgl_FragColor.rgb *= gl_FragColor.a;\\n#endif\";\n\nvar project_vertex = \"vec4 mvPosition = vec4( transformed, 1.0 );\\n#ifdef USE_INSTANCING\\n\\tmvPosition = instanceMatrix * mvPosition;\\n#endif\\nmvPosition = modelViewMatrix * mvPosition;\\ngl_Position = projectionMatrix * mvPosition;\";\n\nvar dithering_fragment = \"#ifdef DITHERING\\n\\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\\n#endif\";\n\nvar dithering_pars_fragment = \"#ifdef DITHERING\\n\\tvec3 dithering( vec3 color ) {\\n\\t\\tfloat grid_position = rand( gl_FragCoord.xy );\\n\\t\\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\\n\\t\\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\\n\\t\\treturn color + dither_shift_RGB;\\n\\t}\\n#endif\";\n\nvar roughnessmap_fragment = \"float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\\n\\troughnessFactor *= texelRoughness.g;\\n#endif\";\n\nvar roughnessmap_pars_fragment = \"#ifdef USE_ROUGHNESSMAP\\n\\tuniform sampler2D roughnessMap;\\n#endif\";\n\nvar shadowmap_pars_fragment = \"#if NUM_SPOT_LIGHT_COORDS > 0\\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\\n#endif\\n#if NUM_SPOT_LIGHT_MAPS > 0\\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\\n#endif\\n#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tstruct DirectionalLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tstruct SpotLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tstruct PointLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t\\tfloat shadowCameraNear;\\n\\t\\t\\tfloat shadowCameraFar;\\n\\t\\t};\\n\\t\\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\\t\\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\\t}\\n\\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\\n\\t\\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\\n\\t}\\n\\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\\n\\t\\tfloat occlusion = 1.0;\\n\\t\\tvec2 distribution = texture2DDistribution( shadow, uv );\\n\\t\\tfloat hard_shadow = step( compare , distribution.x );\\n\\t\\tif (hard_shadow != 1.0 ) {\\n\\t\\t\\tfloat distance = compare - distribution.x ;\\n\\t\\t\\tfloat variance = max( 0.00000, distribution.y * distribution.y );\\n\\t\\t\\tfloat softness_probability = variance / (variance + distance * distance );\\t\\t\\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\\t\\t\\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\\n\\t\\t}\\n\\t\\treturn occlusion;\\n\\t}\\n\\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\t\\tfloat shadow = 1.0;\\n\\t\\tshadowCoord.xyz /= shadowCoord.w;\\n\\t\\tshadowCoord.z += shadowBias;\\n\\t\\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\\t\\tbool inFrustum = all( inFrustumVec );\\n\\t\\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\t\\tbool frustumTest = all( frustumTestVec );\\n\\t\\tif ( frustumTest ) {\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx2 = dx0 / 2.0;\\n\\t\\t\\tfloat dy2 = dy0 / 2.0;\\n\\t\\t\\tfloat dx3 = dx1 / 2.0;\\n\\t\\t\\tfloat dy3 = dy1 / 2.0;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 17.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx = texelSize.x;\\n\\t\\t\\tfloat dy = texelSize.y;\\n\\t\\t\\tvec2 uv = shadowCoord.xy;\\n\\t\\t\\tvec2 f = fract( uv * shadowMapSize + 0.5 );\\n\\t\\t\\tuv -= f * texelSize;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.x ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.x ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.y ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.y ) +\\n\\t\\t\\t\\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  f.x ),\\n\\t\\t\\t\\t\\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  f.x ),\\n\\t\\t\\t\\t\\t f.y )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#else\\n\\t\\t\\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#endif\\n\\t\\t}\\n\\t\\treturn shadow;\\n\\t}\\n\\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\\t\\tvec3 absV = abs( v );\\n\\t\\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\\t\\tabsV *= scaleToCube;\\n\\t\\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\\t\\tvec2 planar = v.xy;\\n\\t\\tfloat almostATexel = 1.5 * texelSizeY;\\n\\t\\tfloat almostOne = 1.0 - almostATexel;\\n\\t\\tif ( absV.z >= almostOne ) {\\n\\t\\t\\tif ( v.z > 0.0 )\\n\\t\\t\\t\\tplanar.x = 4.0 - v.x;\\n\\t\\t} else if ( absV.x >= almostOne ) {\\n\\t\\t\\tfloat signX = sign( v.x );\\n\\t\\t\\tplanar.x = v.z * signX + 2.0 * signX;\\n\\t\\t} else if ( absV.y >= almostOne ) {\\n\\t\\t\\tfloat signY = sign( v.y );\\n\\t\\t\\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\\t\\t\\tplanar.y = v.z * signY - 2.0;\\n\\t\\t}\\n\\t\\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\\t}\\n\\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\\t\\tvec3 lightToPosition = shadowCoord.xyz;\\n\\t\\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\\t\\tdp += shadowBias;\\n\\t\\tvec3 bd3D = normalize( lightToPosition );\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\\t\\t#endif\\n\\t}\\n#endif\";\n\nvar shadowmap_pars_vertex = \"#if NUM_SPOT_LIGHT_COORDS > 0\\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\\n#endif\\n#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tstruct DirectionalLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tstruct SpotLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tstruct PointLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t\\tfloat shadowCameraNear;\\n\\t\\t\\tfloat shadowCameraFar;\\n\\t\\t};\\n\\t\\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n#endif\";\n\nvar shadowmap_vertex = \"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\tvec4 shadowWorldPosition;\\n\\t#endif\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_COORDS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition;\\n\\t\\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\\n\\t\\t\\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\\n\\t\\t#endif\\n\\t\\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n#endif\";\n\nvar shadowmask_pars_fragment = \"float getShadowMask() {\\n\\tfloat shadow = 1.0;\\n\\t#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLightShadow directionalLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLightShadow spotLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tspotLight = spotLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLightShadow pointLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tpointLight = pointLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#endif\\n\\treturn shadow;\\n}\";\n\nvar skinbase_vertex = \"#ifdef USE_SKINNING\\n\\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif\";\n\nvar skinning_pars_vertex = \"#ifdef USE_SKINNING\\n\\tuniform mat4 bindMatrix;\\n\\tuniform mat4 bindMatrixInverse;\\n\\tuniform highp sampler2D boneTexture;\\n\\tuniform int boneTextureSize;\\n\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\tfloat j = i * 4.0;\\n\\t\\tfloat x = mod( j, float( boneTextureSize ) );\\n\\t\\tfloat y = floor( j / float( boneTextureSize ) );\\n\\t\\tfloat dx = 1.0 / float( boneTextureSize );\\n\\t\\tfloat dy = 1.0 / float( boneTextureSize );\\n\\t\\ty = dy * ( y + 0.5 );\\n\\t\\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\\t\\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\\t\\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\\t\\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\t\\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\t\\treturn bone;\\n\\t}\\n#endif\";\n\nvar skinning_vertex = \"#ifdef USE_SKINNING\\n\\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\tvec4 skinned = vec4( 0.0 );\\n\\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\\ttransformed = ( bindMatrixInverse * skinned ).xyz;\\n#endif\";\n\nvar skinnormal_vertex = \"#ifdef USE_SKINNING\\n\\tmat4 skinMatrix = mat4( 0.0 );\\n\\tskinMatrix += skinWeight.x * boneMatX;\\n\\tskinMatrix += skinWeight.y * boneMatY;\\n\\tskinMatrix += skinWeight.z * boneMatZ;\\n\\tskinMatrix += skinWeight.w * boneMatW;\\n\\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n\\t#ifdef USE_TANGENT\\n\\t\\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\\n\\t#endif\\n#endif\";\n\nvar specularmap_fragment = \"float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\\tspecularStrength = texelSpecular.r;\\n#else\\n\\tspecularStrength = 1.0;\\n#endif\";\n\nvar specularmap_pars_fragment = \"#ifdef USE_SPECULARMAP\\n\\tuniform sampler2D specularMap;\\n#endif\";\n\nvar tonemapping_fragment = \"#if defined( TONE_MAPPING )\\n\\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n#endif\";\n\nvar tonemapping_pars_fragment = \"#ifndef saturate\\n#define saturate( a ) clamp( a, 0.0, 1.0 )\\n#endif\\nuniform float toneMappingExposure;\\nvec3 LinearToneMapping( vec3 color ) {\\n\\treturn toneMappingExposure * color;\\n}\\nvec3 ReinhardToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( color / ( vec3( 1.0 ) + color ) );\\n}\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\tcolor = max( vec3( 0.0 ), color - 0.004 );\\n\\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n}\\nvec3 RRTAndODTFit( vec3 v ) {\\n\\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\\n\\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\\n\\treturn a / b;\\n}\\nvec3 ACESFilmicToneMapping( vec3 color ) {\\n\\tconst mat3 ACESInputMat = mat3(\\n\\t\\tvec3( 0.59719, 0.07600, 0.02840 ),\\t\\tvec3( 0.35458, 0.90834, 0.13383 ),\\n\\t\\tvec3( 0.04823, 0.01566, 0.83777 )\\n\\t);\\n\\tconst mat3 ACESOutputMat = mat3(\\n\\t\\tvec3(  1.60475, -0.10208, -0.00327 ),\\t\\tvec3( -0.53108,  1.10813, -0.07276 ),\\n\\t\\tvec3( -0.07367, -0.00605,  1.07602 )\\n\\t);\\n\\tcolor *= toneMappingExposure / 0.6;\\n\\tcolor = ACESInputMat * color;\\n\\tcolor = RRTAndODTFit( color );\\n\\tcolor = ACESOutputMat * color;\\n\\treturn saturate( color );\\n}\\nvec3 CustomToneMapping( vec3 color ) { return color; }\";\n\nvar transmission_fragment = \"#ifdef USE_TRANSMISSION\\n\\tmaterial.transmission = transmission;\\n\\tmaterial.transmissionAlpha = 1.0;\\n\\tmaterial.thickness = thickness;\\n\\tmaterial.attenuationDistance = attenuationDistance;\\n\\tmaterial.attenuationColor = attenuationColor;\\n\\t#ifdef USE_TRANSMISSIONMAP\\n\\t\\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\\n\\t#endif\\n\\t#ifdef USE_THICKNESSMAP\\n\\t\\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\\n\\t#endif\\n\\tvec3 pos = vWorldPosition;\\n\\tvec3 v = normalize( cameraPosition - pos );\\n\\tvec3 n = inverseTransformDirection( normal, viewMatrix );\\n\\tvec4 transmission = getIBLVolumeRefraction(\\n\\t\\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\\n\\t\\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\\n\\t\\tmaterial.attenuationColor, material.attenuationDistance );\\n\\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\\n\\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\\n#endif\";\n\nvar transmission_pars_fragment = \"#ifdef USE_TRANSMISSION\\n\\tuniform float transmission;\\n\\tuniform float thickness;\\n\\tuniform float attenuationDistance;\\n\\tuniform vec3 attenuationColor;\\n\\t#ifdef USE_TRANSMISSIONMAP\\n\\t\\tuniform sampler2D transmissionMap;\\n\\t#endif\\n\\t#ifdef USE_THICKNESSMAP\\n\\t\\tuniform sampler2D thicknessMap;\\n\\t#endif\\n\\tuniform vec2 transmissionSamplerSize;\\n\\tuniform sampler2D transmissionSamplerMap;\\n\\tuniform mat4 modelMatrix;\\n\\tuniform mat4 projectionMatrix;\\n\\tvarying vec3 vWorldPosition;\\n\\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\\n\\t\\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\\n\\t\\tvec3 modelScale;\\n\\t\\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\\n\\t\\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\\n\\t\\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\\n\\t\\treturn normalize( refractionVector ) * thickness * modelScale;\\n\\t}\\n\\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\\n\\t\\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\\n\\t}\\n\\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\\n\\t\\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\\n\\t\\t#ifdef texture2DLodEXT\\n\\t\\t\\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\\n\\t\\t#else\\n\\t\\t\\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\\n\\t\\t#endif\\n\\t}\\n\\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\\n\\t\\tif ( isinf( attenuationDistance ) ) {\\n\\t\\t\\treturn radiance;\\n\\t\\t} else {\\n\\t\\t\\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\\n\\t\\t\\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\\t\\t\\treturn transmittance * radiance;\\n\\t\\t}\\n\\t}\\n\\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\\n\\t\\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\\n\\t\\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\\n\\t\\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\\n\\t\\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\\n\\t\\tvec3 refractedRayExit = position + transmissionRay;\\n\\t\\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\\n\\t\\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\\n\\t\\trefractionCoords += 1.0;\\n\\t\\trefractionCoords /= 2.0;\\n\\t\\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\\n\\t\\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\\n\\t\\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\\n\\t\\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\\n\\t}\\n#endif\";\n\nvar uv_pars_fragment = \"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\\n\\tvarying vec2 vUv;\\n#endif\";\n\nvar uv_pars_vertex = \"#ifdef USE_UV\\n\\t#ifdef UVS_VERTEX_ONLY\\n\\t\\tvec2 vUv;\\n\\t#else\\n\\t\\tvarying vec2 vUv;\\n\\t#endif\\n\\tuniform mat3 uvTransform;\\n#endif\";\n\nvar uv_vertex = \"#ifdef USE_UV\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n#endif\";\n\nvar uv2_pars_fragment = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvarying vec2 vUv2;\\n#endif\";\n\nvar uv2_pars_vertex = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tattribute vec2 uv2;\\n\\tvarying vec2 vUv2;\\n\\tuniform mat3 uv2Transform;\\n#endif\";\n\nvar uv2_vertex = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\\n#endif\";\n\nvar worldpos_vertex = \"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\\n\\tvec4 worldPosition = vec4( transformed, 1.0 );\\n\\t#ifdef USE_INSTANCING\\n\\t\\tworldPosition = instanceMatrix * worldPosition;\\n\\t#endif\\n\\tworldPosition = modelMatrix * worldPosition;\\n#endif\";\n\nconst vertex$g = \"varying vec2 vUv;\\nuniform mat3 uvTransform;\\nvoid main() {\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n\\tgl_Position = vec4( position.xy, 1.0, 1.0 );\\n}\";\n\nconst fragment$g = \"uniform sampler2D t2D;\\nvarying vec2 vUv;\\nvoid main() {\\n\\tgl_FragColor = texture2D( t2D, vUv );\\n\\t#ifdef DECODE_VIDEO_TEXTURE\\n\\t\\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\\n\\t#endif\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\";\n\nconst vertex$f = \"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\tgl_Position.z = gl_Position.w;\\n}\";\n\nconst fragment$f = \"#include <envmap_common_pars_fragment>\\nuniform float opacity;\\nvarying vec3 vWorldDirection;\\n#include <cube_uv_reflection_fragment>\\nvoid main() {\\n\\tvec3 vReflect = vWorldDirection;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = envColor;\\n\\tgl_FragColor.a *= opacity;\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\";\n\nconst vertex$e = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvarying vec2 vHighPrecisionZW;\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvHighPrecisionZW = gl_Position.zw;\\n}\";\n\nconst fragment$e = \"#if DEPTH_PACKING == 3200\\n\\tuniform float opacity;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvarying vec2 vHighPrecisionZW;\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tdiffuseColor.a = opacity;\\n\\t#endif\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\\n\\t#elif DEPTH_PACKING == 3201\\n\\t\\tgl_FragColor = packDepthToRGBA( fragCoordZ );\\n\\t#endif\\n}\";\n\nconst vertex$d = \"#define DISTANCE\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvWorldPosition = worldPosition.xyz;\\n}\";\n\nconst fragment$d = \"#define DISTANCE\\nuniform vec3 referencePosition;\\nuniform float nearDistance;\\nuniform float farDistance;\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main () {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\tfloat dist = length( vWorldPosition - referencePosition );\\n\\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\\n\\tdist = saturate( dist );\\n\\tgl_FragColor = packDepthToRGBA( dist );\\n}\";\n\nconst vertex$c = \"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\";\n\nconst fragment$c = \"uniform sampler2D tEquirect;\\nvarying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvec3 direction = normalize( vWorldDirection );\\n\\tvec2 sampleUV = equirectUv( direction );\\n\\tgl_FragColor = texture2D( tEquirect, sampleUV );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\";\n\nconst vertex$b = \"uniform float scale;\\nattribute float lineDistance;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\tvLineDistance = scale * lineDistance;\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$b = \"uniform vec3 diffuse;\\nuniform float opacity;\\nuniform float dashSize;\\nuniform float totalSize;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\\t\\tdiscard;\\n\\t}\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <color_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n}\";\n\nconst vertex$a = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinbase_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t\\t#include <defaultnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$a = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\\n\\t\\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vec3( 1.0 );\\n\\t#endif\\n\\t#include <aomap_fragment>\\n\\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\\n\\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\\t#include <envmap_fragment>\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nconst vertex$9 = \"#define LAMBERT\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$9 = \"#define LAMBERT\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <normal_pars_fragment>\\n#include <lights_lambert_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_lambert_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nconst vertex$8 = \"#define MATCAP\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <color_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n}\";\n\nconst fragment$8 = \"#define MATCAP\\nuniform vec3 diffuse;\\nuniform float opacity;\\nuniform sampler2D matcap;\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <normal_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tvec3 viewDir = normalize( vViewPosition );\\n\\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\\n\\tvec3 y = cross( viewDir, x );\\n\\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\\n\\t#ifdef USE_MATCAP\\n\\t\\tvec4 matcapColor = texture2D( matcap, uv );\\n\\t#else\\n\\t\\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\\n\\t#endif\\n\\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nconst vertex$7 = \"#define NORMAL\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n}\";\n\nconst fragment$7 = \"#define NORMAL\\nuniform float opacity;\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <normal_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\\n\\t#ifdef OPAQUE\\n\\t\\tgl_FragColor.a = 1.0;\\n\\t#endif\\n}\";\n\nconst vertex$6 = \"#define PHONG\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$6 = \"#define PHONG\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <normal_pars_fragment>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_phong_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nconst vertex$5 = \"#define STANDARD\\nvarying vec3 vViewPosition;\\n#ifdef USE_TRANSMISSION\\n\\tvarying vec3 vWorldPosition;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n#ifdef USE_TRANSMISSION\\n\\tvWorldPosition = worldPosition.xyz;\\n#endif\\n}\";\n\nconst fragment$5 = \"#define STANDARD\\n#ifdef PHYSICAL\\n\\t#define IOR\\n\\t#define SPECULAR\\n#endif\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\n#ifdef IOR\\n\\tuniform float ior;\\n#endif\\n#ifdef SPECULAR\\n\\tuniform float specularIntensity;\\n\\tuniform vec3 specularColor;\\n\\t#ifdef USE_SPECULARINTENSITYMAP\\n\\t\\tuniform sampler2D specularIntensityMap;\\n\\t#endif\\n\\t#ifdef USE_SPECULARCOLORMAP\\n\\t\\tuniform sampler2D specularColorMap;\\n\\t#endif\\n#endif\\n#ifdef USE_CLEARCOAT\\n\\tuniform float clearcoat;\\n\\tuniform float clearcoatRoughness;\\n#endif\\n#ifdef USE_IRIDESCENCE\\n\\tuniform float iridescence;\\n\\tuniform float iridescenceIOR;\\n\\tuniform float iridescenceThicknessMinimum;\\n\\tuniform float iridescenceThicknessMaximum;\\n#endif\\n#ifdef USE_SHEEN\\n\\tuniform vec3 sheenColor;\\n\\tuniform float sheenRoughness;\\n\\t#ifdef USE_SHEENCOLORMAP\\n\\t\\tuniform sampler2D sheenColorMap;\\n\\t#endif\\n\\t#ifdef USE_SHEENROUGHNESSMAP\\n\\t\\tuniform sampler2D sheenRoughnessMap;\\n\\t#endif\\n#endif\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <bsdfs>\\n#include <iridescence_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_physical_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <lights_pars_begin>\\n#include <normal_pars_fragment>\\n#include <lights_physical_pars_fragment>\\n#include <transmission_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <clearcoat_pars_fragment>\\n#include <iridescence_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <roughnessmap_fragment>\\n\\t#include <metalnessmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <clearcoat_normal_fragment_begin>\\n\\t#include <clearcoat_normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_physical_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\\n\\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\\n\\t#include <transmission_fragment>\\n\\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\\n\\t#ifdef USE_SHEEN\\n\\t\\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\\n\\t\\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\\n\\t#endif\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\\n\\t\\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\\n\\t\\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\\n\\t#endif\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nconst vertex$4 = \"#define TOON\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$4 = \"#define TOON\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <gradientmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <normal_pars_fragment>\\n#include <lights_toon_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_toon_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nconst vertex$3 = \"uniform float size;\\nuniform float scale;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\tgl_PointSize = size;\\n\\t#ifdef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\\n\\t#endif\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$3 = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_particle_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n}\";\n\nconst vertex$2 = \"#include <common>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\nvoid main() {\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$2 = \"uniform vec3 color;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\nvoid main() {\\n\\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\";\n\nconst vertex$1 = \"uniform float rotation;\\nuniform vec2 center;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\\n\\tvec2 scale;\\n\\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\\n\\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\\n\\t#ifndef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) scale *= - mvPosition.z;\\n\\t#endif\\n\\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\\n\\tvec2 rotatedPosition;\\n\\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\\n\\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\\n\\tmvPosition.xy += rotatedPosition;\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$1 = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\";\n\nconst ShaderChunk = {\n\talphamap_fragment: alphamap_fragment,\n\talphamap_pars_fragment: alphamap_pars_fragment,\n\talphatest_fragment: alphatest_fragment,\n\talphatest_pars_fragment: alphatest_pars_fragment,\n\taomap_fragment: aomap_fragment,\n\taomap_pars_fragment: aomap_pars_fragment,\n\tbegin_vertex: begin_vertex,\n\tbeginnormal_vertex: beginnormal_vertex,\n\tbsdfs: bsdfs,\n\tiridescence_fragment: iridescence_fragment,\n\tbumpmap_pars_fragment: bumpmap_pars_fragment,\n\tclipping_planes_fragment: clipping_planes_fragment,\n\tclipping_planes_pars_fragment: clipping_planes_pars_fragment,\n\tclipping_planes_pars_vertex: clipping_planes_pars_vertex,\n\tclipping_planes_vertex: clipping_planes_vertex,\n\tcolor_fragment: color_fragment,\n\tcolor_pars_fragment: color_pars_fragment,\n\tcolor_pars_vertex: color_pars_vertex,\n\tcolor_vertex: color_vertex,\n\tcommon: common,\n\tcube_uv_reflection_fragment: cube_uv_reflection_fragment,\n\tdefaultnormal_vertex: defaultnormal_vertex,\n\tdisplacementmap_pars_vertex: displacementmap_pars_vertex,\n\tdisplacementmap_vertex: displacementmap_vertex,\n\temissivemap_fragment: emissivemap_fragment,\n\temissivemap_pars_fragment: emissivemap_pars_fragment,\n\tencodings_fragment: encodings_fragment,\n\tencodings_pars_fragment: encodings_pars_fragment,\n\tenvmap_fragment: envmap_fragment,\n\tenvmap_common_pars_fragment: envmap_common_pars_fragment,\n\tenvmap_pars_fragment: envmap_pars_fragment,\n\tenvmap_pars_vertex: envmap_pars_vertex,\n\tenvmap_physical_pars_fragment: envmap_physical_pars_fragment,\n\tenvmap_vertex: envmap_vertex,\n\tfog_vertex: fog_vertex,\n\tfog_pars_vertex: fog_pars_vertex,\n\tfog_fragment: fog_fragment,\n\tfog_pars_fragment: fog_pars_fragment,\n\tgradientmap_pars_fragment: gradientmap_pars_fragment,\n\tlightmap_fragment: lightmap_fragment,\n\tlightmap_pars_fragment: lightmap_pars_fragment,\n\tlights_lambert_fragment: lights_lambert_fragment,\n\tlights_lambert_pars_fragment: lights_lambert_pars_fragment,\n\tlights_pars_begin: lights_pars_begin,\n\tlights_toon_fragment: lights_toon_fragment,\n\tlights_toon_pars_fragment: lights_toon_pars_fragment,\n\tlights_phong_fragment: lights_phong_fragment,\n\tlights_phong_pars_fragment: lights_phong_pars_fragment,\n\tlights_physical_fragment: lights_physical_fragment,\n\tlights_physical_pars_fragment: lights_physical_pars_fragment,\n\tlights_fragment_begin: lights_fragment_begin,\n\tlights_fragment_maps: lights_fragment_maps,\n\tlights_fragment_end: lights_fragment_end,\n\tlogdepthbuf_fragment: logdepthbuf_fragment,\n\tlogdepthbuf_pars_fragment: logdepthbuf_pars_fragment,\n\tlogdepthbuf_pars_vertex: logdepthbuf_pars_vertex,\n\tlogdepthbuf_vertex: logdepthbuf_vertex,\n\tmap_fragment: map_fragment,\n\tmap_pars_fragment: map_pars_fragment,\n\tmap_particle_fragment: map_particle_fragment,\n\tmap_particle_pars_fragment: map_particle_pars_fragment,\n\tmetalnessmap_fragment: metalnessmap_fragment,\n\tmetalnessmap_pars_fragment: metalnessmap_pars_fragment,\n\tmorphcolor_vertex: morphcolor_vertex,\n\tmorphnormal_vertex: morphnormal_vertex,\n\tmorphtarget_pars_vertex: morphtarget_pars_vertex,\n\tmorphtarget_vertex: morphtarget_vertex,\n\tnormal_fragment_begin: normal_fragment_begin,\n\tnormal_fragment_maps: normal_fragment_maps,\n\tnormal_pars_fragment: normal_pars_fragment,\n\tnormal_pars_vertex: normal_pars_vertex,\n\tnormal_vertex: normal_vertex,\n\tnormalmap_pars_fragment: normalmap_pars_fragment,\n\tclearcoat_normal_fragment_begin: clearcoat_normal_fragment_begin,\n\tclearcoat_normal_fragment_maps: clearcoat_normal_fragment_maps,\n\tclearcoat_pars_fragment: clearcoat_pars_fragment,\n\tiridescence_pars_fragment: iridescence_pars_fragment,\n\toutput_fragment: output_fragment,\n\tpacking: packing,\n\tpremultiplied_alpha_fragment: premultiplied_alpha_fragment,\n\tproject_vertex: project_vertex,\n\tdithering_fragment: dithering_fragment,\n\tdithering_pars_fragment: dithering_pars_fragment,\n\troughnessmap_fragment: roughnessmap_fragment,\n\troughnessmap_pars_fragment: roughnessmap_pars_fragment,\n\tshadowmap_pars_fragment: shadowmap_pars_fragment,\n\tshadowmap_pars_vertex: shadowmap_pars_vertex,\n\tshadowmap_vertex: shadowmap_vertex,\n\tshadowmask_pars_fragment: shadowmask_pars_fragment,\n\tskinbase_vertex: skinbase_vertex,\n\tskinning_pars_vertex: skinning_pars_vertex,\n\tskinning_vertex: skinning_vertex,\n\tskinnormal_vertex: skinnormal_vertex,\n\tspecularmap_fragment: specularmap_fragment,\n\tspecularmap_pars_fragment: specularmap_pars_fragment,\n\ttonemapping_fragment: tonemapping_fragment,\n\ttonemapping_pars_fragment: tonemapping_pars_fragment,\n\ttransmission_fragment: transmission_fragment,\n\ttransmission_pars_fragment: transmission_pars_fragment,\n\tuv_pars_fragment: uv_pars_fragment,\n\tuv_pars_vertex: uv_pars_vertex,\n\tuv_vertex: uv_vertex,\n\tuv2_pars_fragment: uv2_pars_fragment,\n\tuv2_pars_vertex: uv2_pars_vertex,\n\tuv2_vertex: uv2_vertex,\n\tworldpos_vertex: worldpos_vertex,\n\n\tbackground_vert: vertex$g,\n\tbackground_frag: fragment$g,\n\tcube_vert: vertex$f,\n\tcube_frag: fragment$f,\n\tdepth_vert: vertex$e,\n\tdepth_frag: fragment$e,\n\tdistanceRGBA_vert: vertex$d,\n\tdistanceRGBA_frag: fragment$d,\n\tequirect_vert: vertex$c,\n\tequirect_frag: fragment$c,\n\tlinedashed_vert: vertex$b,\n\tlinedashed_frag: fragment$b,\n\tmeshbasic_vert: vertex$a,\n\tmeshbasic_frag: fragment$a,\n\tmeshlambert_vert: vertex$9,\n\tmeshlambert_frag: fragment$9,\n\tmeshmatcap_vert: vertex$8,\n\tmeshmatcap_frag: fragment$8,\n\tmeshnormal_vert: vertex$7,\n\tmeshnormal_frag: fragment$7,\n\tmeshphong_vert: vertex$6,\n\tmeshphong_frag: fragment$6,\n\tmeshphysical_vert: vertex$5,\n\tmeshphysical_frag: fragment$5,\n\tmeshtoon_vert: vertex$4,\n\tmeshtoon_frag: fragment$4,\n\tpoints_vert: vertex$3,\n\tpoints_frag: fragment$3,\n\tshadow_vert: vertex$2,\n\tshadow_frag: fragment$2,\n\tsprite_vert: vertex$1,\n\tsprite_frag: fragment$1\n};\n\n/**\n * Uniforms library for shared webgl shaders\n */\n\nconst UniformsLib = {\n\n\tcommon: {\n\n\t\tdiffuse: { value: /*@__PURE__*/ new Color( 0xffffff ) },\n\t\topacity: { value: 1.0 },\n\n\t\tmap: { value: null },\n\t\tuvTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\tuv2Transform: { value: /*@__PURE__*/ new Matrix3() },\n\n\t\talphaMap: { value: null },\n\t\talphaTest: { value: 0 }\n\n\t},\n\n\tspecularmap: {\n\n\t\tspecularMap: { value: null },\n\n\t},\n\n\tenvmap: {\n\n\t\tenvMap: { value: null },\n\t\tflipEnvMap: { value: - 1 },\n\t\treflectivity: { value: 1.0 }, // basic, lambert, phong\n\t\tior: { value: 1.5 }, // physical\n\t\trefractionRatio: { value: 0.98 } // basic, lambert, phong\n\n\t},\n\n\taomap: {\n\n\t\taoMap: { value: null },\n\t\taoMapIntensity: { value: 1 }\n\n\t},\n\n\tlightmap: {\n\n\t\tlightMap: { value: null },\n\t\tlightMapIntensity: { value: 1 }\n\n\t},\n\n\temissivemap: {\n\n\t\temissiveMap: { value: null }\n\n\t},\n\n\tbumpmap: {\n\n\t\tbumpMap: { value: null },\n\t\tbumpScale: { value: 1 }\n\n\t},\n\n\tnormalmap: {\n\n\t\tnormalMap: { value: null },\n\t\tnormalScale: { value: /*@__PURE__*/ new Vector2( 1, 1 ) }\n\n\t},\n\n\tdisplacementmap: {\n\n\t\tdisplacementMap: { value: null },\n\t\tdisplacementScale: { value: 1 },\n\t\tdisplacementBias: { value: 0 }\n\n\t},\n\n\troughnessmap: {\n\n\t\troughnessMap: { value: null }\n\n\t},\n\n\tmetalnessmap: {\n\n\t\tmetalnessMap: { value: null }\n\n\t},\n\n\tgradientmap: {\n\n\t\tgradientMap: { value: null }\n\n\t},\n\n\tfog: {\n\n\t\tfogDensity: { value: 0.00025 },\n\t\tfogNear: { value: 1 },\n\t\tfogFar: { value: 2000 },\n\t\tfogColor: { value: /*@__PURE__*/ new Color( 0xffffff ) }\n\n\t},\n\n\tlights: {\n\n\t\tambientLightColor: { value: [] },\n\n\t\tlightProbe: { value: [] },\n\n\t\tdirectionalLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tcolor: {}\n\t\t} },\n\n\t\tdirectionalLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowNormalBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tdirectionalShadowMap: { value: [] },\n\t\tdirectionalShadowMatrix: { value: [] },\n\n\t\tspotLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdirection: {},\n\t\t\tdistance: {},\n\t\t\tconeCos: {},\n\t\t\tpenumbraCos: {},\n\t\t\tdecay: {}\n\t\t} },\n\n\t\tspotLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowNormalBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tspotLightMap: { value: [] },\n\t\tspotShadowMap: { value: [] },\n\t\tspotLightMatrix: { value: [] },\n\n\t\tpointLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdecay: {},\n\t\t\tdistance: {}\n\t\t} },\n\n\t\tpointLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowNormalBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {},\n\t\t\tshadowCameraNear: {},\n\t\t\tshadowCameraFar: {}\n\t\t} },\n\n\t\tpointShadowMap: { value: [] },\n\t\tpointShadowMatrix: { value: [] },\n\n\t\themisphereLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tskyColor: {},\n\t\t\tgroundColor: {}\n\t\t} },\n\n\t\t// TODO (abelnation): RectAreaLight BRDF data needs to be moved from example to main src\n\t\trectAreaLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\twidth: {},\n\t\t\theight: {}\n\t\t} },\n\n\t\tltc_1: { value: null },\n\t\tltc_2: { value: null }\n\n\t},\n\n\tpoints: {\n\n\t\tdiffuse: { value: /*@__PURE__*/ new Color( 0xffffff ) },\n\t\topacity: { value: 1.0 },\n\t\tsize: { value: 1.0 },\n\t\tscale: { value: 1.0 },\n\t\tmap: { value: null },\n\t\talphaMap: { value: null },\n\t\talphaTest: { value: 0 },\n\t\tuvTransform: { value: /*@__PURE__*/ new Matrix3() }\n\n\t},\n\n\tsprite: {\n\n\t\tdiffuse: { value: /*@__PURE__*/ new Color( 0xffffff ) },\n\t\topacity: { value: 1.0 },\n\t\tcenter: { value: /*@__PURE__*/ new Vector2( 0.5, 0.5 ) },\n\t\trotation: { value: 0.0 },\n\t\tmap: { value: null },\n\t\talphaMap: { value: null },\n\t\talphaTest: { value: 0 },\n\t\tuvTransform: { value: /*@__PURE__*/ new Matrix3() }\n\n\t}\n\n};\n\nconst ShaderLib = {\n\n\tbasic: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshbasic_vert,\n\t\tfragmentShader: ShaderChunk.meshbasic_frag\n\n\t},\n\n\tlambert: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: /*@__PURE__*/ new Color( 0x000000 ) }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshlambert_vert,\n\t\tfragmentShader: ShaderChunk.meshlambert_frag\n\n\t},\n\n\tphong: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: /*@__PURE__*/ new Color( 0x000000 ) },\n\t\t\t\tspecular: { value: /*@__PURE__*/ new Color( 0x111111 ) },\n\t\t\t\tshininess: { value: 30 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphong_vert,\n\t\tfragmentShader: ShaderChunk.meshphong_frag\n\n\t},\n\n\tstandard: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.roughnessmap,\n\t\t\tUniformsLib.metalnessmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: /*@__PURE__*/ new Color( 0x000000 ) },\n\t\t\t\troughness: { value: 1.0 },\n\t\t\t\tmetalness: { value: 0.0 },\n\t\t\t\tenvMapIntensity: { value: 1 } // temporary\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphysical_vert,\n\t\tfragmentShader: ShaderChunk.meshphysical_frag\n\n\t},\n\n\ttoon: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.gradientmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: /*@__PURE__*/ new Color( 0x000000 ) }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshtoon_vert,\n\t\tfragmentShader: ShaderChunk.meshtoon_frag\n\n\t},\n\n\tmatcap: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tmatcap: { value: null }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshmatcap_vert,\n\t\tfragmentShader: ShaderChunk.meshmatcap_frag\n\n\t},\n\n\tpoints: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.points,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.points_vert,\n\t\tfragmentShader: ShaderChunk.points_frag\n\n\t},\n\n\tdashed: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tscale: { value: 1 },\n\t\t\t\tdashSize: { value: 1 },\n\t\t\t\ttotalSize: { value: 2 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.linedashed_vert,\n\t\tfragmentShader: ShaderChunk.linedashed_frag\n\n\t},\n\n\tdepth: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.depth_vert,\n\t\tfragmentShader: ShaderChunk.depth_frag\n\n\t},\n\n\tnormal: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshnormal_vert,\n\t\tfragmentShader: ShaderChunk.meshnormal_frag\n\n\t},\n\n\tsprite: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.sprite,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.sprite_vert,\n\t\tfragmentShader: ShaderChunk.sprite_frag\n\n\t},\n\n\tbackground: {\n\n\t\tuniforms: {\n\t\t\tuvTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\t\tt2D: { value: null },\n\t\t},\n\n\t\tvertexShader: ShaderChunk.background_vert,\n\t\tfragmentShader: ShaderChunk.background_frag\n\n\t},\n\n\tcube: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.envmap,\n\t\t\t{\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.cube_vert,\n\t\tfragmentShader: ShaderChunk.cube_frag\n\n\t},\n\n\tequirect: {\n\n\t\tuniforms: {\n\t\t\ttEquirect: { value: null },\n\t\t},\n\n\t\tvertexShader: ShaderChunk.equirect_vert,\n\t\tfragmentShader: ShaderChunk.equirect_frag\n\n\t},\n\n\tdistanceRGBA: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\treferencePosition: { value: /*@__PURE__*/ new Vector3() },\n\t\t\t\tnearDistance: { value: 1 },\n\t\t\t\tfarDistance: { value: 1000 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.distanceRGBA_vert,\n\t\tfragmentShader: ShaderChunk.distanceRGBA_frag\n\n\t},\n\n\tshadow: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.lights,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tcolor: { value: /*@__PURE__*/ new Color( 0x00000 ) },\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t},\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.shadow_vert,\n\t\tfragmentShader: ShaderChunk.shadow_frag\n\n\t}\n\n};\n\nShaderLib.physical = {\n\n\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\tShaderLib.standard.uniforms,\n\t\t{\n\t\t\tclearcoat: { value: 0 },\n\t\t\tclearcoatMap: { value: null },\n\t\t\tclearcoatRoughness: { value: 0 },\n\t\t\tclearcoatRoughnessMap: { value: null },\n\t\t\tclearcoatNormalScale: { value: /*@__PURE__*/ new Vector2( 1, 1 ) },\n\t\t\tclearcoatNormalMap: { value: null },\n\t\t\tiridescence: { value: 0 },\n\t\t\tiridescenceMap: { value: null },\n\t\t\tiridescenceIOR: { value: 1.3 },\n\t\t\tiridescenceThicknessMinimum: { value: 100 },\n\t\t\tiridescenceThicknessMaximum: { value: 400 },\n\t\t\tiridescenceThicknessMap: { value: null },\n\t\t\tsheen: { value: 0 },\n\t\t\tsheenColor: { value: /*@__PURE__*/ new Color( 0x000000 ) },\n\t\t\tsheenColorMap: { value: null },\n\t\t\tsheenRoughness: { value: 1 },\n\t\t\tsheenRoughnessMap: { value: null },\n\t\t\ttransmission: { value: 0 },\n\t\t\ttransmissionMap: { value: null },\n\t\t\ttransmissionSamplerSize: { value: /*@__PURE__*/ new Vector2() },\n\t\t\ttransmissionSamplerMap: { value: null },\n\t\t\tthickness: { value: 0 },\n\t\t\tthicknessMap: { value: null },\n\t\t\tattenuationDistance: { value: 0 },\n\t\t\tattenuationColor: { value: /*@__PURE__*/ new Color( 0x000000 ) },\n\t\t\tspecularIntensity: { value: 1 },\n\t\t\tspecularIntensityMap: { value: null },\n\t\t\tspecularColor: { value: /*@__PURE__*/ new Color( 1, 1, 1 ) },\n\t\t\tspecularColorMap: { value: null },\n\t\t}\n\t] ),\n\n\tvertexShader: ShaderChunk.meshphysical_vert,\n\tfragmentShader: ShaderChunk.meshphysical_frag\n\n};\n\nfunction WebGLBackground( renderer, cubemaps, state, objects, alpha, premultipliedAlpha ) {\n\n\tconst clearColor = new Color( 0x000000 );\n\tlet clearAlpha = alpha === true ? 0 : 1;\n\n\tlet planeMesh;\n\tlet boxMesh;\n\n\tlet currentBackground = null;\n\tlet currentBackgroundVersion = 0;\n\tlet currentTonemapping = null;\n\n\tfunction render( renderList, scene ) {\n\n\t\tlet forceClear = false;\n\t\tlet background = scene.isScene === true ? scene.background : null;\n\n\t\tif ( background && background.isTexture ) {\n\n\t\t\tbackground = cubemaps.get( background );\n\n\t\t}\n\n\t\t// Ignore background in AR\n\t\t// TODO: Reconsider this.\n\n\t\tconst xr = renderer.xr;\n\t\tconst session = xr.getSession && xr.getSession();\n\n\t\tif ( session && session.environmentBlendMode === 'additive' ) {\n\n\t\t\tbackground = null;\n\n\t\t}\n\n\t\tif ( background === null ) {\n\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t} else if ( background && background.isColor ) {\n\n\t\t\tsetClear( background, 1 );\n\t\t\tforceClear = true;\n\n\t\t}\n\n\t\tif ( renderer.autoClear || forceClear ) {\n\n\t\t\trenderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\n\t\t}\n\n\t\tif ( background && ( background.isCubeTexture || background.mapping === CubeUVReflectionMapping ) ) {\n\n\t\t\tif ( boxMesh === undefined ) {\n\n\t\t\t\tboxMesh = new Mesh(\n\t\t\t\t\tnew BoxGeometry( 1, 1, 1 ),\n\t\t\t\t\tnew ShaderMaterial( {\n\t\t\t\t\t\tname: 'BackgroundCubeMaterial',\n\t\t\t\t\t\tuniforms: cloneUniforms( ShaderLib.cube.uniforms ),\n\t\t\t\t\t\tvertexShader: ShaderLib.cube.vertexShader,\n\t\t\t\t\t\tfragmentShader: ShaderLib.cube.fragmentShader,\n\t\t\t\t\t\tside: BackSide,\n\t\t\t\t\t\tdepthTest: false,\n\t\t\t\t\t\tdepthWrite: false,\n\t\t\t\t\t\tfog: false\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t\tboxMesh.geometry.deleteAttribute( 'normal' );\n\t\t\t\tboxMesh.geometry.deleteAttribute( 'uv' );\n\n\t\t\t\tboxMesh.onBeforeRender = function ( renderer, scene, camera ) {\n\n\t\t\t\t\tthis.matrixWorld.copyPosition( camera.matrixWorld );\n\n\t\t\t\t};\n\n\t\t\t\t// add \"envMap\" material property so the renderer can evaluate it like for built-in materials\n\t\t\t\tObject.defineProperty( boxMesh.material, 'envMap', {\n\n\t\t\t\t\tget: function () {\n\n\t\t\t\t\t\treturn this.uniforms.envMap.value;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tobjects.update( boxMesh );\n\n\t\t\t}\n\n\t\t\tboxMesh.material.uniforms.envMap.value = background;\n\t\t\tboxMesh.material.uniforms.flipEnvMap.value = ( background.isCubeTexture && background.isRenderTargetTexture === false ) ? - 1 : 1;\n\n\t\t\tif ( currentBackground !== background ||\n\t\t\t\tcurrentBackgroundVersion !== background.version ||\n\t\t\t\tcurrentTonemapping !== renderer.toneMapping ) {\n\n\t\t\t\tboxMesh.material.needsUpdate = true;\n\n\t\t\t\tcurrentBackground = background;\n\t\t\t\tcurrentBackgroundVersion = background.version;\n\t\t\t\tcurrentTonemapping = renderer.toneMapping;\n\n\t\t\t}\n\n\t\t\tboxMesh.layers.enableAll();\n\n\t\t\t// push to the pre-sorted opaque render list\n\t\t\trenderList.unshift( boxMesh, boxMesh.geometry, boxMesh.material, 0, 0, null );\n\n\t\t} else if ( background && background.isTexture ) {\n\n\t\t\tif ( planeMesh === undefined ) {\n\n\t\t\t\tplaneMesh = new Mesh(\n\t\t\t\t\tnew PlaneGeometry( 2, 2 ),\n\t\t\t\t\tnew ShaderMaterial( {\n\t\t\t\t\t\tname: 'BackgroundMaterial',\n\t\t\t\t\t\tuniforms: cloneUniforms( ShaderLib.background.uniforms ),\n\t\t\t\t\t\tvertexShader: ShaderLib.background.vertexShader,\n\t\t\t\t\t\tfragmentShader: ShaderLib.background.fragmentShader,\n\t\t\t\t\t\tside: FrontSide,\n\t\t\t\t\t\tdepthTest: false,\n\t\t\t\t\t\tdepthWrite: false,\n\t\t\t\t\t\tfog: false\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t\tplaneMesh.geometry.deleteAttribute( 'normal' );\n\n\t\t\t\t// add \"map\" material property so the renderer can evaluate it like for built-in materials\n\t\t\t\tObject.defineProperty( planeMesh.material, 'map', {\n\n\t\t\t\t\tget: function () {\n\n\t\t\t\t\t\treturn this.uniforms.t2D.value;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tobjects.update( planeMesh );\n\n\t\t\t}\n\n\t\t\tplaneMesh.material.uniforms.t2D.value = background;\n\n\t\t\tif ( background.matrixAutoUpdate === true ) {\n\n\t\t\t\tbackground.updateMatrix();\n\n\t\t\t}\n\n\t\t\tplaneMesh.material.uniforms.uvTransform.value.copy( background.matrix );\n\n\t\t\tif ( currentBackground !== background ||\n\t\t\t\tcurrentBackgroundVersion !== background.version ||\n\t\t\t\tcurrentTonemapping !== renderer.toneMapping ) {\n\n\t\t\t\tplaneMesh.material.needsUpdate = true;\n\n\t\t\t\tcurrentBackground = background;\n\t\t\t\tcurrentBackgroundVersion = background.version;\n\t\t\t\tcurrentTonemapping = renderer.toneMapping;\n\n\t\t\t}\n\n\t\t\tplaneMesh.layers.enableAll();\n\n\t\t\t// push to the pre-sorted opaque render list\n\t\t\trenderList.unshift( planeMesh, planeMesh.geometry, planeMesh.material, 0, 0, null );\n\n\t\t}\n\n\t}\n\n\tfunction setClear( color, alpha ) {\n\n\t\tstate.buffers.color.setClear( color.r, color.g, color.b, alpha, premultipliedAlpha );\n\n\t}\n\n\treturn {\n\n\t\tgetClearColor: function () {\n\n\t\t\treturn clearColor;\n\n\t\t},\n\t\tsetClearColor: function ( color, alpha = 1 ) {\n\n\t\t\tclearColor.set( color );\n\t\t\tclearAlpha = alpha;\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t},\n\t\tgetClearAlpha: function () {\n\n\t\t\treturn clearAlpha;\n\n\t\t},\n\t\tsetClearAlpha: function ( alpha ) {\n\n\t\t\tclearAlpha = alpha;\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t},\n\t\trender: render\n\n\t};\n\n}\n\nfunction WebGLBindingStates( gl, extensions, attributes, capabilities ) {\n\n\tconst maxVertexAttributes = gl.getParameter( 34921 );\n\n\tconst extension = capabilities.isWebGL2 ? null : extensions.get( 'OES_vertex_array_object' );\n\tconst vaoAvailable = capabilities.isWebGL2 || extension !== null;\n\n\tconst bindingStates = {};\n\n\tconst defaultState = createBindingState( null );\n\tlet currentState = defaultState;\n\tlet forceUpdate = false;\n\n\tfunction setup( object, material, program, geometry, index ) {\n\n\t\tlet updateBuffers = false;\n\n\t\tif ( vaoAvailable ) {\n\n\t\t\tconst state = getBindingState( geometry, program, material );\n\n\t\t\tif ( currentState !== state ) {\n\n\t\t\t\tcurrentState = state;\n\t\t\t\tbindVertexArrayObject( currentState.object );\n\n\t\t\t}\n\n\t\t\tupdateBuffers = needsUpdate( object, geometry, program, index );\n\n\t\t\tif ( updateBuffers ) saveCache( object, geometry, program, index );\n\n\t\t} else {\n\n\t\t\tconst wireframe = ( material.wireframe === true );\n\n\t\t\tif ( currentState.geometry !== geometry.id ||\n\t\t\t\tcurrentState.program !== program.id ||\n\t\t\t\tcurrentState.wireframe !== wireframe ) {\n\n\t\t\t\tcurrentState.geometry = geometry.id;\n\t\t\t\tcurrentState.program = program.id;\n\t\t\t\tcurrentState.wireframe = wireframe;\n\n\t\t\t\tupdateBuffers = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( index !== null ) {\n\n\t\t\tattributes.update( index, 34963 );\n\n\t\t}\n\n\t\tif ( updateBuffers || forceUpdate ) {\n\n\t\t\tforceUpdate = false;\n\n\t\t\tsetupVertexAttributes( object, material, program, geometry );\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\tgl.bindBuffer( 34963, attributes.get( index ).buffer );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction createVertexArrayObject() {\n\n\t\tif ( capabilities.isWebGL2 ) return gl.createVertexArray();\n\n\t\treturn extension.createVertexArrayOES();\n\n\t}\n\n\tfunction bindVertexArrayObject( vao ) {\n\n\t\tif ( capabilities.isWebGL2 ) return gl.bindVertexArray( vao );\n\n\t\treturn extension.bindVertexArrayOES( vao );\n\n\t}\n\n\tfunction deleteVertexArrayObject( vao ) {\n\n\t\tif ( capabilities.isWebGL2 ) return gl.deleteVertexArray( vao );\n\n\t\treturn extension.deleteVertexArrayOES( vao );\n\n\t}\n\n\tfunction getBindingState( geometry, program, material ) {\n\n\t\tconst wireframe = ( material.wireframe === true );\n\n\t\tlet programMap = bindingStates[ geometry.id ];\n\n\t\tif ( programMap === undefined ) {\n\n\t\t\tprogramMap = {};\n\t\t\tbindingStates[ geometry.id ] = programMap;\n\n\t\t}\n\n\t\tlet stateMap = programMap[ program.id ];\n\n\t\tif ( stateMap === undefined ) {\n\n\t\t\tstateMap = {};\n\t\t\tprogramMap[ program.id ] = stateMap;\n\n\t\t}\n\n\t\tlet state = stateMap[ wireframe ];\n\n\t\tif ( state === undefined ) {\n\n\t\t\tstate = createBindingState( createVertexArrayObject() );\n\t\t\tstateMap[ wireframe ] = state;\n\n\t\t}\n\n\t\treturn state;\n\n\t}\n\n\tfunction createBindingState( vao ) {\n\n\t\tconst newAttributes = [];\n\t\tconst enabledAttributes = [];\n\t\tconst attributeDivisors = [];\n\n\t\tfor ( let i = 0; i < maxVertexAttributes; i ++ ) {\n\n\t\t\tnewAttributes[ i ] = 0;\n\t\t\tenabledAttributes[ i ] = 0;\n\t\t\tattributeDivisors[ i ] = 0;\n\n\t\t}\n\n\t\treturn {\n\n\t\t\t// for backward compatibility on non-VAO support browser\n\t\t\tgeometry: null,\n\t\t\tprogram: null,\n\t\t\twireframe: false,\n\n\t\t\tnewAttributes: newAttributes,\n\t\t\tenabledAttributes: enabledAttributes,\n\t\t\tattributeDivisors: attributeDivisors,\n\t\t\tobject: vao,\n\t\t\tattributes: {},\n\t\t\tindex: null\n\n\t\t};\n\n\t}\n\n\tfunction needsUpdate( object, geometry, program, index ) {\n\n\t\tconst cachedAttributes = currentState.attributes;\n\t\tconst geometryAttributes = geometry.attributes;\n\n\t\tlet attributesNum = 0;\n\n\t\tconst programAttributes = program.getAttributes();\n\n\t\tfor ( const name in programAttributes ) {\n\n\t\t\tconst programAttribute = programAttributes[ name ];\n\n\t\t\tif ( programAttribute.location >= 0 ) {\n\n\t\t\t\tconst cachedAttribute = cachedAttributes[ name ];\n\t\t\t\tlet geometryAttribute = geometryAttributes[ name ];\n\n\t\t\t\tif ( geometryAttribute === undefined ) {\n\n\t\t\t\t\tif ( name === 'instanceMatrix' && object.instanceMatrix ) geometryAttribute = object.instanceMatrix;\n\t\t\t\t\tif ( name === 'instanceColor' && object.instanceColor ) geometryAttribute = object.instanceColor;\n\n\t\t\t\t}\n\n\t\t\t\tif ( cachedAttribute === undefined ) return true;\n\n\t\t\t\tif ( cachedAttribute.attribute !== geometryAttribute ) return true;\n\n\t\t\t\tif ( geometryAttribute && cachedAttribute.data !== geometryAttribute.data ) return true;\n\n\t\t\t\tattributesNum ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( currentState.attributesNum !== attributesNum ) return true;\n\n\t\tif ( currentState.index !== index ) return true;\n\n\t\treturn false;\n\n\t}\n\n\tfunction saveCache( object, geometry, program, index ) {\n\n\t\tconst cache = {};\n\t\tconst attributes = geometry.attributes;\n\t\tlet attributesNum = 0;\n\n\t\tconst programAttributes = program.getAttributes();\n\n\t\tfor ( const name in programAttributes ) {\n\n\t\t\tconst programAttribute = programAttributes[ name ];\n\n\t\t\tif ( programAttribute.location >= 0 ) {\n\n\t\t\t\tlet attribute = attributes[ name ];\n\n\t\t\t\tif ( attribute === undefined ) {\n\n\t\t\t\t\tif ( name === 'instanceMatrix' && object.instanceMatrix ) attribute = object.instanceMatrix;\n\t\t\t\t\tif ( name === 'instanceColor' && object.instanceColor ) attribute = object.instanceColor;\n\n\t\t\t\t}\n\n\t\t\t\tconst data = {};\n\t\t\t\tdata.attribute = attribute;\n\n\t\t\t\tif ( attribute && attribute.data ) {\n\n\t\t\t\t\tdata.data = attribute.data;\n\n\t\t\t\t}\n\n\t\t\t\tcache[ name ] = data;\n\n\t\t\t\tattributesNum ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tcurrentState.attributes = cache;\n\t\tcurrentState.attributesNum = attributesNum;\n\n\t\tcurrentState.index = index;\n\n\t}\n\n\tfunction initAttributes() {\n\n\t\tconst newAttributes = currentState.newAttributes;\n\n\t\tfor ( let i = 0, il = newAttributes.length; i < il; i ++ ) {\n\n\t\t\tnewAttributes[ i ] = 0;\n\n\t\t}\n\n\t}\n\n\tfunction enableAttribute( attribute ) {\n\n\t\tenableAttributeAndDivisor( attribute, 0 );\n\n\t}\n\n\tfunction enableAttributeAndDivisor( attribute, meshPerAttribute ) {\n\n\t\tconst newAttributes = currentState.newAttributes;\n\t\tconst enabledAttributes = currentState.enabledAttributes;\n\t\tconst attributeDivisors = currentState.attributeDivisors;\n\n\t\tnewAttributes[ attribute ] = 1;\n\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\n\n\t\t\tgl.enableVertexAttribArray( attribute );\n\t\t\tenabledAttributes[ attribute ] = 1;\n\n\t\t}\n\n\t\tif ( attributeDivisors[ attribute ] !== meshPerAttribute ) {\n\n\t\t\tconst extension = capabilities.isWebGL2 ? gl : extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t\textension[ capabilities.isWebGL2 ? 'vertexAttribDivisor' : 'vertexAttribDivisorANGLE' ]( attribute, meshPerAttribute );\n\t\t\tattributeDivisors[ attribute ] = meshPerAttribute;\n\n\t\t}\n\n\t}\n\n\tfunction disableUnusedAttributes() {\n\n\t\tconst newAttributes = currentState.newAttributes;\n\t\tconst enabledAttributes = currentState.enabledAttributes;\n\n\t\tfor ( let i = 0, il = enabledAttributes.length; i < il; i ++ ) {\n\n\t\t\tif ( enabledAttributes[ i ] !== newAttributes[ i ] ) {\n\n\t\t\t\tgl.disableVertexAttribArray( i );\n\t\t\t\tenabledAttributes[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction vertexAttribPointer( index, size, type, normalized, stride, offset ) {\n\n\t\tif ( capabilities.isWebGL2 === true && ( type === 5124 || type === 5125 ) ) {\n\n\t\t\tgl.vertexAttribIPointer( index, size, type, stride, offset );\n\n\t\t} else {\n\n\t\t\tgl.vertexAttribPointer( index, size, type, normalized, stride, offset );\n\n\t\t}\n\n\t}\n\n\tfunction setupVertexAttributes( object, material, program, geometry ) {\n\n\t\tif ( capabilities.isWebGL2 === false && ( object.isInstancedMesh || geometry.isInstancedBufferGeometry ) ) {\n\n\t\t\tif ( extensions.get( 'ANGLE_instanced_arrays' ) === null ) return;\n\n\t\t}\n\n\t\tinitAttributes();\n\n\t\tconst geometryAttributes = geometry.attributes;\n\n\t\tconst programAttributes = program.getAttributes();\n\n\t\tconst materialDefaultAttributeValues = material.defaultAttributeValues;\n\n\t\tfor ( const name in programAttributes ) {\n\n\t\t\tconst programAttribute = programAttributes[ name ];\n\n\t\t\tif ( programAttribute.location >= 0 ) {\n\n\t\t\t\tlet geometryAttribute = geometryAttributes[ name ];\n\n\t\t\t\tif ( geometryAttribute === undefined ) {\n\n\t\t\t\t\tif ( name === 'instanceMatrix' && object.instanceMatrix ) geometryAttribute = object.instanceMatrix;\n\t\t\t\t\tif ( name === 'instanceColor' && object.instanceColor ) geometryAttribute = object.instanceColor;\n\n\t\t\t\t}\n\n\t\t\t\tif ( geometryAttribute !== undefined ) {\n\n\t\t\t\t\tconst normalized = geometryAttribute.normalized;\n\t\t\t\t\tconst size = geometryAttribute.itemSize;\n\n\t\t\t\t\tconst attribute = attributes.get( geometryAttribute );\n\n\t\t\t\t\t// TODO Attribute may not be available on context restore\n\n\t\t\t\t\tif ( attribute === undefined ) continue;\n\n\t\t\t\t\tconst buffer = attribute.buffer;\n\t\t\t\t\tconst type = attribute.type;\n\t\t\t\t\tconst bytesPerElement = attribute.bytesPerElement;\n\n\t\t\t\t\tif ( geometryAttribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\t\t\tconst data = geometryAttribute.data;\n\t\t\t\t\t\tconst stride = data.stride;\n\t\t\t\t\t\tconst offset = geometryAttribute.offset;\n\n\t\t\t\t\t\tif ( data.isInstancedInterleavedBuffer ) {\n\n\t\t\t\t\t\t\tfor ( let i = 0; i < programAttribute.locationSize; i ++ ) {\n\n\t\t\t\t\t\t\t\tenableAttributeAndDivisor( programAttribute.location + i, data.meshPerAttribute );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( object.isInstancedMesh !== true && geometry._maxInstanceCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry._maxInstanceCount = data.meshPerAttribute * data.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tfor ( let i = 0; i < programAttribute.locationSize; i ++ ) {\n\n\t\t\t\t\t\t\t\tenableAttribute( programAttribute.location + i );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgl.bindBuffer( 34962, buffer );\n\n\t\t\t\t\t\tfor ( let i = 0; i < programAttribute.locationSize; i ++ ) {\n\n\t\t\t\t\t\t\tvertexAttribPointer(\n\t\t\t\t\t\t\t\tprogramAttribute.location + i,\n\t\t\t\t\t\t\t\tsize / programAttribute.locationSize,\n\t\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\t\tnormalized,\n\t\t\t\t\t\t\t\tstride * bytesPerElement,\n\t\t\t\t\t\t\t\t( offset + ( size / programAttribute.locationSize ) * i ) * bytesPerElement\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( geometryAttribute.isInstancedBufferAttribute ) {\n\n\t\t\t\t\t\t\tfor ( let i = 0; i < programAttribute.locationSize; i ++ ) {\n\n\t\t\t\t\t\t\t\tenableAttributeAndDivisor( programAttribute.location + i, geometryAttribute.meshPerAttribute );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( object.isInstancedMesh !== true && geometry._maxInstanceCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry._maxInstanceCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tfor ( let i = 0; i < programAttribute.locationSize; i ++ ) {\n\n\t\t\t\t\t\t\t\tenableAttribute( programAttribute.location + i );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgl.bindBuffer( 34962, buffer );\n\n\t\t\t\t\t\tfor ( let i = 0; i < programAttribute.locationSize; i ++ ) {\n\n\t\t\t\t\t\t\tvertexAttribPointer(\n\t\t\t\t\t\t\t\tprogramAttribute.location + i,\n\t\t\t\t\t\t\t\tsize / programAttribute.locationSize,\n\t\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\t\tnormalized,\n\t\t\t\t\t\t\t\tsize * bytesPerElement,\n\t\t\t\t\t\t\t\t( size / programAttribute.locationSize ) * i * bytesPerElement\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( materialDefaultAttributeValues !== undefined ) {\n\n\t\t\t\t\tconst value = materialDefaultAttributeValues[ name ];\n\n\t\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\t\tswitch ( value.length ) {\n\n\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\tgl.vertexAttrib2fv( programAttribute.location, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\tgl.vertexAttrib3fv( programAttribute.location, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\t\tgl.vertexAttrib4fv( programAttribute.location, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tgl.vertexAttrib1fv( programAttribute.location, value );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tdisableUnusedAttributes();\n\n\t}\n\n\tfunction dispose() {\n\n\t\treset();\n\n\t\tfor ( const geometryId in bindingStates ) {\n\n\t\t\tconst programMap = bindingStates[ geometryId ];\n\n\t\t\tfor ( const programId in programMap ) {\n\n\t\t\t\tconst stateMap = programMap[ programId ];\n\n\t\t\t\tfor ( const wireframe in stateMap ) {\n\n\t\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\n\n\t\t\t\t\tdelete stateMap[ wireframe ];\n\n\t\t\t\t}\n\n\t\t\t\tdelete programMap[ programId ];\n\n\t\t\t}\n\n\t\t\tdelete bindingStates[ geometryId ];\n\n\t\t}\n\n\t}\n\n\tfunction releaseStatesOfGeometry( geometry ) {\n\n\t\tif ( bindingStates[ geometry.id ] === undefined ) return;\n\n\t\tconst programMap = bindingStates[ geometry.id ];\n\n\t\tfor ( const programId in programMap ) {\n\n\t\t\tconst stateMap = programMap[ programId ];\n\n\t\t\tfor ( const wireframe in stateMap ) {\n\n\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\n\n\t\t\t\tdelete stateMap[ wireframe ];\n\n\t\t\t}\n\n\t\t\tdelete programMap[ programId ];\n\n\t\t}\n\n\t\tdelete bindingStates[ geometry.id ];\n\n\t}\n\n\tfunction releaseStatesOfProgram( program ) {\n\n\t\tfor ( const geometryId in bindingStates ) {\n\n\t\t\tconst programMap = bindingStates[ geometryId ];\n\n\t\t\tif ( programMap[ program.id ] === undefined ) continue;\n\n\t\t\tconst stateMap = programMap[ program.id ];\n\n\t\t\tfor ( const wireframe in stateMap ) {\n\n\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\n\n\t\t\t\tdelete stateMap[ wireframe ];\n\n\t\t\t}\n\n\t\t\tdelete programMap[ program.id ];\n\n\t\t}\n\n\t}\n\n\tfunction reset() {\n\n\t\tresetDefaultState();\n\t\tforceUpdate = true;\n\n\t\tif ( currentState === defaultState ) return;\n\n\t\tcurrentState = defaultState;\n\t\tbindVertexArrayObject( currentState.object );\n\n\t}\n\n\t// for backward-compatibility\n\n\tfunction resetDefaultState() {\n\n\t\tdefaultState.geometry = null;\n\t\tdefaultState.program = null;\n\t\tdefaultState.wireframe = false;\n\n\t}\n\n\treturn {\n\n\t\tsetup: setup,\n\t\treset: reset,\n\t\tresetDefaultState: resetDefaultState,\n\t\tdispose: dispose,\n\t\treleaseStatesOfGeometry: releaseStatesOfGeometry,\n\t\treleaseStatesOfProgram: releaseStatesOfProgram,\n\n\t\tinitAttributes: initAttributes,\n\t\tenableAttribute: enableAttribute,\n\t\tdisableUnusedAttributes: disableUnusedAttributes\n\n\t};\n\n}\n\nfunction WebGLBufferRenderer( gl, extensions, info, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tlet mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawArrays( mode, start, count );\n\n\t\tinfo.update( count, mode, 1 );\n\n\t}\n\n\tfunction renderInstances( start, count, primcount ) {\n\n\t\tif ( primcount === 0 ) return;\n\n\t\tlet extension, methodName;\n\n\t\tif ( isWebGL2 ) {\n\n\t\t\textension = gl;\n\t\t\tmethodName = 'drawArraysInstanced';\n\n\t\t} else {\n\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\n\t\t\tmethodName = 'drawArraysInstancedANGLE';\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\textension[ methodName ]( mode, start, count, primcount );\n\n\t\tinfo.update( count, mode, primcount );\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n}\n\nfunction WebGLCapabilities( gl, extensions, parameters ) {\n\n\tlet maxAnisotropy;\n\n\tfunction getMaxAnisotropy() {\n\n\t\tif ( maxAnisotropy !== undefined ) return maxAnisotropy;\n\n\t\tif ( extensions.has( 'EXT_texture_filter_anisotropic' ) === true ) {\n\n\t\t\tconst extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\t\tmaxAnisotropy = gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT );\n\n\t\t} else {\n\n\t\t\tmaxAnisotropy = 0;\n\n\t\t}\n\n\t\treturn maxAnisotropy;\n\n\t}\n\n\tfunction getMaxPrecision( precision ) {\n\n\t\tif ( precision === 'highp' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( 35633, 36338 ).precision > 0 &&\n\t\t\t\tgl.getShaderPrecisionFormat( 35632, 36338 ).precision > 0 ) {\n\n\t\t\t\treturn 'highp';\n\n\t\t\t}\n\n\t\t\tprecision = 'mediump';\n\n\t\t}\n\n\t\tif ( precision === 'mediump' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( 35633, 36337 ).precision > 0 &&\n\t\t\t\tgl.getShaderPrecisionFormat( 35632, 36337 ).precision > 0 ) {\n\n\t\t\t\treturn 'mediump';\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn 'lowp';\n\n\t}\n\n\tconst isWebGL2 = ( typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext ) ||\n\t\t( typeof WebGL2ComputeRenderingContext !== 'undefined' && gl instanceof WebGL2ComputeRenderingContext );\n\n\tlet precision = parameters.precision !== undefined ? parameters.precision : 'highp';\n\tconst maxPrecision = getMaxPrecision( precision );\n\n\tif ( maxPrecision !== precision ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer:', precision, 'not supported, using', maxPrecision, 'instead.' );\n\t\tprecision = maxPrecision;\n\n\t}\n\n\tconst drawBuffers = isWebGL2 || extensions.has( 'WEBGL_draw_buffers' );\n\n\tconst logarithmicDepthBuffer = parameters.logarithmicDepthBuffer === true;\n\n\tconst maxTextures = gl.getParameter( 34930 );\n\tconst maxVertexTextures = gl.getParameter( 35660 );\n\tconst maxTextureSize = gl.getParameter( 3379 );\n\tconst maxCubemapSize = gl.getParameter( 34076 );\n\n\tconst maxAttributes = gl.getParameter( 34921 );\n\tconst maxVertexUniforms = gl.getParameter( 36347 );\n\tconst maxVaryings = gl.getParameter( 36348 );\n\tconst maxFragmentUniforms = gl.getParameter( 36349 );\n\n\tconst vertexTextures = maxVertexTextures > 0;\n\tconst floatFragmentTextures = isWebGL2 || extensions.has( 'OES_texture_float' );\n\tconst floatVertexTextures = vertexTextures && floatFragmentTextures;\n\n\tconst maxSamples = isWebGL2 ? gl.getParameter( 36183 ) : 0;\n\n\treturn {\n\n\t\tisWebGL2: isWebGL2,\n\n\t\tdrawBuffers: drawBuffers,\n\n\t\tgetMaxAnisotropy: getMaxAnisotropy,\n\t\tgetMaxPrecision: getMaxPrecision,\n\n\t\tprecision: precision,\n\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\tmaxTextures: maxTextures,\n\t\tmaxVertexTextures: maxVertexTextures,\n\t\tmaxTextureSize: maxTextureSize,\n\t\tmaxCubemapSize: maxCubemapSize,\n\n\t\tmaxAttributes: maxAttributes,\n\t\tmaxVertexUniforms: maxVertexUniforms,\n\t\tmaxVaryings: maxVaryings,\n\t\tmaxFragmentUniforms: maxFragmentUniforms,\n\n\t\tvertexTextures: vertexTextures,\n\t\tfloatFragmentTextures: floatFragmentTextures,\n\t\tfloatVertexTextures: floatVertexTextures,\n\n\t\tmaxSamples: maxSamples\n\n\t};\n\n}\n\nfunction WebGLClipping( properties ) {\n\n\tconst scope = this;\n\n\tlet globalState = null,\n\t\tnumGlobalPlanes = 0,\n\t\tlocalClippingEnabled = false,\n\t\trenderingShadows = false;\n\n\tconst plane = new Plane(),\n\t\tviewNormalMatrix = new Matrix3(),\n\n\t\tuniform = { value: null, needsUpdate: false };\n\n\tthis.uniform = uniform;\n\tthis.numPlanes = 0;\n\tthis.numIntersection = 0;\n\n\tthis.init = function ( planes, enableLocalClipping, camera ) {\n\n\t\tconst enabled =\n\t\t\tplanes.length !== 0 ||\n\t\t\tenableLocalClipping ||\n\t\t\t// enable state of previous frame - the clipping code has to\n\t\t\t// run another frame in order to reset the state:\n\t\t\tnumGlobalPlanes !== 0 ||\n\t\t\tlocalClippingEnabled;\n\n\t\tlocalClippingEnabled = enableLocalClipping;\n\n\t\tglobalState = projectPlanes( planes, camera, 0 );\n\t\tnumGlobalPlanes = planes.length;\n\n\t\treturn enabled;\n\n\t};\n\n\tthis.beginShadows = function () {\n\n\t\trenderingShadows = true;\n\t\tprojectPlanes( null );\n\n\t};\n\n\tthis.endShadows = function () {\n\n\t\trenderingShadows = false;\n\t\tresetGlobalState();\n\n\t};\n\n\tthis.setState = function ( material, camera, useCache ) {\n\n\t\tconst planes = material.clippingPlanes,\n\t\t\tclipIntersection = material.clipIntersection,\n\t\t\tclipShadows = material.clipShadows;\n\n\t\tconst materialProperties = properties.get( material );\n\n\t\tif ( ! localClippingEnabled || planes === null || planes.length === 0 || renderingShadows && ! clipShadows ) {\n\n\t\t\t// there's no local clipping\n\n\t\t\tif ( renderingShadows ) {\n\n\t\t\t\t// there's no global clipping\n\n\t\t\t\tprojectPlanes( null );\n\n\t\t\t} else {\n\n\t\t\t\tresetGlobalState();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst nGlobal = renderingShadows ? 0 : numGlobalPlanes,\n\t\t\t\tlGlobal = nGlobal * 4;\n\n\t\t\tlet dstArray = materialProperties.clippingState || null;\n\n\t\t\tuniform.value = dstArray; // ensure unique state\n\n\t\t\tdstArray = projectPlanes( planes, camera, lGlobal, useCache );\n\n\t\t\tfor ( let i = 0; i !== lGlobal; ++ i ) {\n\n\t\t\t\tdstArray[ i ] = globalState[ i ];\n\n\t\t\t}\n\n\t\t\tmaterialProperties.clippingState = dstArray;\n\t\t\tthis.numIntersection = clipIntersection ? this.numPlanes : 0;\n\t\t\tthis.numPlanes += nGlobal;\n\n\t\t}\n\n\n\t};\n\n\tfunction resetGlobalState() {\n\n\t\tif ( uniform.value !== globalState ) {\n\n\t\t\tuniform.value = globalState;\n\t\t\tuniform.needsUpdate = numGlobalPlanes > 0;\n\n\t\t}\n\n\t\tscope.numPlanes = numGlobalPlanes;\n\t\tscope.numIntersection = 0;\n\n\t}\n\n\tfunction projectPlanes( planes, camera, dstOffset, skipTransform ) {\n\n\t\tconst nPlanes = planes !== null ? planes.length : 0;\n\t\tlet dstArray = null;\n\n\t\tif ( nPlanes !== 0 ) {\n\n\t\t\tdstArray = uniform.value;\n\n\t\t\tif ( skipTransform !== true || dstArray === null ) {\n\n\t\t\t\tconst flatSize = dstOffset + nPlanes * 4,\n\t\t\t\t\tviewMatrix = camera.matrixWorldInverse;\n\n\t\t\t\tviewNormalMatrix.getNormalMatrix( viewMatrix );\n\n\t\t\t\tif ( dstArray === null || dstArray.length < flatSize ) {\n\n\t\t\t\t\tdstArray = new Float32Array( flatSize );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0, i4 = dstOffset; i !== nPlanes; ++ i, i4 += 4 ) {\n\n\t\t\t\t\tplane.copy( planes[ i ] ).applyMatrix4( viewMatrix, viewNormalMatrix );\n\n\t\t\t\t\tplane.normal.toArray( dstArray, i4 );\n\t\t\t\t\tdstArray[ i4 + 3 ] = plane.constant;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tuniform.value = dstArray;\n\t\t\tuniform.needsUpdate = true;\n\n\t\t}\n\n\t\tscope.numPlanes = nPlanes;\n\t\tscope.numIntersection = 0;\n\n\t\treturn dstArray;\n\n\t}\n\n}\n\nfunction WebGLCubeMaps( renderer ) {\n\n\tlet cubemaps = new WeakMap();\n\n\tfunction mapTextureMapping( texture, mapping ) {\n\n\t\tif ( mapping === EquirectangularReflectionMapping ) {\n\n\t\t\ttexture.mapping = CubeReflectionMapping;\n\n\t\t} else if ( mapping === EquirectangularRefractionMapping ) {\n\n\t\t\ttexture.mapping = CubeRefractionMapping;\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tfunction get( texture ) {\n\n\t\tif ( texture && texture.isTexture && texture.isRenderTargetTexture === false ) {\n\n\t\t\tconst mapping = texture.mapping;\n\n\t\t\tif ( mapping === EquirectangularReflectionMapping || mapping === EquirectangularRefractionMapping ) {\n\n\t\t\t\tif ( cubemaps.has( texture ) ) {\n\n\t\t\t\t\tconst cubemap = cubemaps.get( texture ).texture;\n\t\t\t\t\treturn mapTextureMapping( cubemap, texture.mapping );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst image = texture.image;\n\n\t\t\t\t\tif ( image && image.height > 0 ) {\n\n\t\t\t\t\t\tconst renderTarget = new WebGLCubeRenderTarget( image.height / 2 );\n\t\t\t\t\t\trenderTarget.fromEquirectangularTexture( renderer, texture );\n\t\t\t\t\t\tcubemaps.set( texture, renderTarget );\n\n\t\t\t\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\t\t\t\treturn mapTextureMapping( renderTarget.texture, texture.mapping );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// image not yet ready. try the conversion next frame\n\n\t\t\t\t\t\treturn null;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tfunction onTextureDispose( event ) {\n\n\t\tconst texture = event.target;\n\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\tconst cubemap = cubemaps.get( texture );\n\n\t\tif ( cubemap !== undefined ) {\n\n\t\t\tcubemaps.delete( texture );\n\t\t\tcubemap.dispose();\n\n\t\t}\n\n\t}\n\n\tfunction dispose() {\n\n\t\tcubemaps = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\nclass OrthographicCamera extends Camera {\n\n\tconstructor( left = - 1, right = 1, top = 1, bottom = - 1, near = 0.1, far = 2000 ) {\n\n\t\tsuper();\n\n\t\tthis.isOrthographicCamera = true;\n\n\t\tthis.type = 'OrthographicCamera';\n\n\t\tthis.zoom = 1;\n\t\tthis.view = null;\n\n\t\tthis.left = left;\n\t\tthis.right = right;\n\t\tthis.top = top;\n\t\tthis.bottom = bottom;\n\n\t\tthis.near = near;\n\t\tthis.far = far;\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.left = source.left;\n\t\tthis.right = source.right;\n\t\tthis.top = source.top;\n\t\tthis.bottom = source.bottom;\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\n\t\tthis.zoom = source.zoom;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\treturn this;\n\n\t}\n\n\tsetViewOffset( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tif ( this.view === null ) {\n\n\t\t\tthis.view = {\n\t\t\t\tenabled: true,\n\t\t\t\tfullWidth: 1,\n\t\t\t\tfullHeight: 1,\n\t\t\t\toffsetX: 0,\n\t\t\t\toffsetY: 0,\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1\n\t\t\t};\n\n\t\t}\n\n\t\tthis.view.enabled = true;\n\t\tthis.view.fullWidth = fullWidth;\n\t\tthis.view.fullHeight = fullHeight;\n\t\tthis.view.offsetX = x;\n\t\tthis.view.offsetY = y;\n\t\tthis.view.width = width;\n\t\tthis.view.height = height;\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tclearViewOffset() {\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tthis.view.enabled = false;\n\n\t\t}\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tupdateProjectionMatrix() {\n\n\t\tconst dx = ( this.right - this.left ) / ( 2 * this.zoom );\n\t\tconst dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\n\t\tconst cx = ( this.right + this.left ) / 2;\n\t\tconst cy = ( this.top + this.bottom ) / 2;\n\n\t\tlet left = cx - dx;\n\t\tlet right = cx + dx;\n\t\tlet top = cy + dy;\n\t\tlet bottom = cy - dy;\n\n\t\tif ( this.view !== null && this.view.enabled ) {\n\n\t\t\tconst scaleW = ( this.right - this.left ) / this.view.fullWidth / this.zoom;\n\t\t\tconst scaleH = ( this.top - this.bottom ) / this.view.fullHeight / this.zoom;\n\n\t\t\tleft += scaleW * this.view.offsetX;\n\t\t\tright = left + scaleW * this.view.width;\n\t\t\ttop -= scaleH * this.view.offsetY;\n\t\t\tbottom = top - scaleH * this.view.height;\n\n\t\t}\n\n\t\tthis.projectionMatrix.makeOrthographic( left, right, top, bottom, this.near, this.far );\n\n\t\tthis.projectionMatrixInverse.copy( this.projectionMatrix ).invert();\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tdata.object.zoom = this.zoom;\n\t\tdata.object.left = this.left;\n\t\tdata.object.right = this.right;\n\t\tdata.object.top = this.top;\n\t\tdata.object.bottom = this.bottom;\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\treturn data;\n\n\t}\n\n}\n\nconst LOD_MIN = 4;\n\n// The standard deviations (radians) associated with the extra mips. These are\n// chosen to approximate a Trowbridge-Reitz distribution function times the\n// geometric shadowing function. These sigma values squared must match the\n// variance #defines in cube_uv_reflection_fragment.glsl.js.\nconst EXTRA_LOD_SIGMA = [ 0.125, 0.215, 0.35, 0.446, 0.526, 0.582 ];\n\n// The maximum length of the blur for loop. Smaller sigmas will use fewer\n// samples and exit early, but not recompile the shader.\nconst MAX_SAMPLES = 20;\n\nconst _flatCamera = /*@__PURE__*/ new OrthographicCamera();\nconst _clearColor = /*@__PURE__*/ new Color();\nlet _oldTarget = null;\n\n// Golden Ratio\nconst PHI = ( 1 + Math.sqrt( 5 ) ) / 2;\nconst INV_PHI = 1 / PHI;\n\n// Vertices of a dodecahedron (except the opposites, which represent the\n// same axis), used as axis directions evenly spread on a sphere.\nconst _axisDirections = [\n\t/*@__PURE__*/ new Vector3( 1, 1, 1 ),\n\t/*@__PURE__*/ new Vector3( - 1, 1, 1 ),\n\t/*@__PURE__*/ new Vector3( 1, 1, - 1 ),\n\t/*@__PURE__*/ new Vector3( - 1, 1, - 1 ),\n\t/*@__PURE__*/ new Vector3( 0, PHI, INV_PHI ),\n\t/*@__PURE__*/ new Vector3( 0, PHI, - INV_PHI ),\n\t/*@__PURE__*/ new Vector3( INV_PHI, 0, PHI ),\n\t/*@__PURE__*/ new Vector3( - INV_PHI, 0, PHI ),\n\t/*@__PURE__*/ new Vector3( PHI, INV_PHI, 0 ),\n\t/*@__PURE__*/ new Vector3( - PHI, INV_PHI, 0 ) ];\n\n/**\n * This class generates a Prefiltered, Mipmapped Radiance Environment Map\n * (PMREM) from a cubeMap environment texture. This allows different levels of\n * blur to be quickly accessed based on material roughness. It is packed into a\n * special CubeUV format that allows us to perform custom interpolation so that\n * we can support nonlinear formats such as RGBE. Unlike a traditional mipmap\n * chain, it only goes down to the LOD_MIN level (above), and then creates extra\n * even more filtered 'mips' at the same LOD_MIN resolution, associated with\n * higher roughness levels. In this way we maintain resolution to smoothly\n * interpolate diffuse lighting while limiting sampling computation.\n *\n * Paper: Fast, Accurate Image-Based Lighting\n * https://drive.google.com/file/d/15y8r_UpKlU9SvV4ILb0C3qCPecS8pvLz/view\n*/\n\nclass PMREMGenerator {\n\n\tconstructor( renderer ) {\n\n\t\tthis._renderer = renderer;\n\t\tthis._pingPongRenderTarget = null;\n\n\t\tthis._lodMax = 0;\n\t\tthis._cubeSize = 0;\n\t\tthis._lodPlanes = [];\n\t\tthis._sizeLods = [];\n\t\tthis._sigmas = [];\n\n\t\tthis._blurMaterial = null;\n\t\tthis._cubemapMaterial = null;\n\t\tthis._equirectMaterial = null;\n\n\t\tthis._compileMaterial( this._blurMaterial );\n\n\t}\n\n\t/**\n\t * Generates a PMREM from a supplied Scene, which can be faster than using an\n\t * image if networking bandwidth is low. Optional sigma specifies a blur radius\n\t * in radians to be applied to the scene before PMREM generation. Optional near\n\t * and far planes ensure the scene is rendered in its entirety (the cubeCamera\n\t * is placed at the origin).\n\t */\n\tfromScene( scene, sigma = 0, near = 0.1, far = 100 ) {\n\n\t\t_oldTarget = this._renderer.getRenderTarget();\n\n\t\tthis._setSize( 256 );\n\n\t\tconst cubeUVRenderTarget = this._allocateTargets();\n\t\tcubeUVRenderTarget.depthBuffer = true;\n\n\t\tthis._sceneToCubeUV( scene, near, far, cubeUVRenderTarget );\n\n\t\tif ( sigma > 0 ) {\n\n\t\t\tthis._blur( cubeUVRenderTarget, 0, 0, sigma );\n\n\t\t}\n\n\t\tthis._applyPMREM( cubeUVRenderTarget );\n\t\tthis._cleanup( cubeUVRenderTarget );\n\n\t\treturn cubeUVRenderTarget;\n\n\t}\n\n\t/**\n\t * Generates a PMREM from an equirectangular texture, which can be either LDR\n\t * or HDR. The ideal input image size is 1k (1024 x 512),\n\t * as this matches best with the 256 x 256 cubemap output.\n\t */\n\tfromEquirectangular( equirectangular, renderTarget = null ) {\n\n\t\treturn this._fromTexture( equirectangular, renderTarget );\n\n\t}\n\n\t/**\n\t * Generates a PMREM from an cubemap texture, which can be either LDR\n\t * or HDR. The ideal input cube size is 256 x 256,\n\t * as this matches best with the 256 x 256 cubemap output.\n\t */\n\tfromCubemap( cubemap, renderTarget = null ) {\n\n\t\treturn this._fromTexture( cubemap, renderTarget );\n\n\t}\n\n\t/**\n\t * Pre-compiles the cubemap shader. You can get faster start-up by invoking this method during\n\t * your texture's network fetch for increased concurrency.\n\t */\n\tcompileCubemapShader() {\n\n\t\tif ( this._cubemapMaterial === null ) {\n\n\t\t\tthis._cubemapMaterial = _getCubemapMaterial();\n\t\t\tthis._compileMaterial( this._cubemapMaterial );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Pre-compiles the equirectangular shader. You can get faster start-up by invoking this method during\n\t * your texture's network fetch for increased concurrency.\n\t */\n\tcompileEquirectangularShader() {\n\n\t\tif ( this._equirectMaterial === null ) {\n\n\t\t\tthis._equirectMaterial = _getEquirectMaterial();\n\t\t\tthis._compileMaterial( this._equirectMaterial );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Disposes of the PMREMGenerator's internal memory. Note that PMREMGenerator is a static class,\n\t * so you should not need more than one PMREMGenerator object. If you do, calling dispose() on\n\t * one of them will cause any others to also become unusable.\n\t */\n\tdispose() {\n\n\t\tthis._dispose();\n\n\t\tif ( this._cubemapMaterial !== null ) this._cubemapMaterial.dispose();\n\t\tif ( this._equirectMaterial !== null ) this._equirectMaterial.dispose();\n\n\t}\n\n\t// private interface\n\n\t_setSize( cubeSize ) {\n\n\t\tthis._lodMax = Math.floor( Math.log2( cubeSize ) );\n\t\tthis._cubeSize = Math.pow( 2, this._lodMax );\n\n\t}\n\n\t_dispose() {\n\n\t\tif ( this._blurMaterial !== null ) this._blurMaterial.dispose();\n\n\t\tif ( this._pingPongRenderTarget !== null ) this._pingPongRenderTarget.dispose();\n\n\t\tfor ( let i = 0; i < this._lodPlanes.length; i ++ ) {\n\n\t\t\tthis._lodPlanes[ i ].dispose();\n\n\t\t}\n\n\t}\n\n\t_cleanup( outputTarget ) {\n\n\t\tthis._renderer.setRenderTarget( _oldTarget );\n\t\toutputTarget.scissorTest = false;\n\t\t_setViewport( outputTarget, 0, 0, outputTarget.width, outputTarget.height );\n\n\t}\n\n\t_fromTexture( texture, renderTarget ) {\n\n\t\tif ( texture.mapping === CubeReflectionMapping || texture.mapping === CubeRefractionMapping ) {\n\n\t\t\tthis._setSize( texture.image.length === 0 ? 16 : ( texture.image[ 0 ].width || texture.image[ 0 ].image.width ) );\n\n\t\t} else { // Equirectangular\n\n\t\t\tthis._setSize( texture.image.width / 4 );\n\n\t\t}\n\n\t\t_oldTarget = this._renderer.getRenderTarget();\n\n\t\tconst cubeUVRenderTarget = renderTarget || this._allocateTargets();\n\t\tthis._textureToCubeUV( texture, cubeUVRenderTarget );\n\t\tthis._applyPMREM( cubeUVRenderTarget );\n\t\tthis._cleanup( cubeUVRenderTarget );\n\n\t\treturn cubeUVRenderTarget;\n\n\t}\n\n\t_allocateTargets() {\n\n\t\tconst width = 3 * Math.max( this._cubeSize, 16 * 7 );\n\t\tconst height = 4 * this._cubeSize;\n\n\t\tconst params = {\n\t\t\tmagFilter: LinearFilter,\n\t\t\tminFilter: LinearFilter,\n\t\t\tgenerateMipmaps: false,\n\t\t\ttype: HalfFloatType,\n\t\t\tformat: RGBAFormat,\n\t\t\tencoding: LinearEncoding,\n\t\t\tdepthBuffer: false\n\t\t};\n\n\t\tconst cubeUVRenderTarget = _createRenderTarget( width, height, params );\n\n\t\tif ( this._pingPongRenderTarget === null || this._pingPongRenderTarget.width !== width ) {\n\n\t\t\tif ( this._pingPongRenderTarget !== null ) {\n\n\t\t\t\tthis._dispose();\n\n\t\t\t}\n\n\t\t\tthis._pingPongRenderTarget = _createRenderTarget( width, height, params );\n\n\t\t\tconst { _lodMax } = this;\n\t\t\t( { sizeLods: this._sizeLods, lodPlanes: this._lodPlanes, sigmas: this._sigmas } = _createPlanes( _lodMax ) );\n\n\t\t\tthis._blurMaterial = _getBlurShader( _lodMax, width, height );\n\n\t\t}\n\n\t\treturn cubeUVRenderTarget;\n\n\t}\n\n\t_compileMaterial( material ) {\n\n\t\tconst tmpMesh = new Mesh( this._lodPlanes[ 0 ], material );\n\t\tthis._renderer.compile( tmpMesh, _flatCamera );\n\n\t}\n\n\t_sceneToCubeUV( scene, near, far, cubeUVRenderTarget ) {\n\n\t\tconst fov = 90;\n\t\tconst aspect = 1;\n\t\tconst cubeCamera = new PerspectiveCamera( fov, aspect, near, far );\n\t\tconst upSign = [ 1, - 1, 1, 1, 1, 1 ];\n\t\tconst forwardSign = [ 1, 1, 1, - 1, - 1, - 1 ];\n\t\tconst renderer = this._renderer;\n\n\t\tconst originalAutoClear = renderer.autoClear;\n\t\tconst toneMapping = renderer.toneMapping;\n\t\trenderer.getClearColor( _clearColor );\n\n\t\trenderer.toneMapping = NoToneMapping;\n\t\trenderer.autoClear = false;\n\n\t\tconst backgroundMaterial = new MeshBasicMaterial( {\n\t\t\tname: 'PMREM.Background',\n\t\t\tside: BackSide,\n\t\t\tdepthWrite: false,\n\t\t\tdepthTest: false,\n\t\t} );\n\n\t\tconst backgroundBox = new Mesh( new BoxGeometry(), backgroundMaterial );\n\n\t\tlet useSolidColor = false;\n\t\tconst background = scene.background;\n\n\t\tif ( background ) {\n\n\t\t\tif ( background.isColor ) {\n\n\t\t\t\tbackgroundMaterial.color.copy( background );\n\t\t\t\tscene.background = null;\n\t\t\t\tuseSolidColor = true;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tbackgroundMaterial.color.copy( _clearColor );\n\t\t\tuseSolidColor = true;\n\n\t\t}\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tconst col = i % 3;\n\n\t\t\tif ( col === 0 ) {\n\n\t\t\t\tcubeCamera.up.set( 0, upSign[ i ], 0 );\n\t\t\t\tcubeCamera.lookAt( forwardSign[ i ], 0, 0 );\n\n\t\t\t} else if ( col === 1 ) {\n\n\t\t\t\tcubeCamera.up.set( 0, 0, upSign[ i ] );\n\t\t\t\tcubeCamera.lookAt( 0, forwardSign[ i ], 0 );\n\n\t\t\t} else {\n\n\t\t\t\tcubeCamera.up.set( 0, upSign[ i ], 0 );\n\t\t\t\tcubeCamera.lookAt( 0, 0, forwardSign[ i ] );\n\n\t\t\t}\n\n\t\t\tconst size = this._cubeSize;\n\n\t\t\t_setViewport( cubeUVRenderTarget, col * size, i > 2 ? size : 0, size, size );\n\n\t\t\trenderer.setRenderTarget( cubeUVRenderTarget );\n\n\t\t\tif ( useSolidColor ) {\n\n\t\t\t\trenderer.render( backgroundBox, cubeCamera );\n\n\t\t\t}\n\n\t\t\trenderer.render( scene, cubeCamera );\n\n\t\t}\n\n\t\tbackgroundBox.geometry.dispose();\n\t\tbackgroundBox.material.dispose();\n\n\t\trenderer.toneMapping = toneMapping;\n\t\trenderer.autoClear = originalAutoClear;\n\t\tscene.background = background;\n\n\t}\n\n\t_textureToCubeUV( texture, cubeUVRenderTarget ) {\n\n\t\tconst renderer = this._renderer;\n\n\t\tconst isCubeTexture = ( texture.mapping === CubeReflectionMapping || texture.mapping === CubeRefractionMapping );\n\n\t\tif ( isCubeTexture ) {\n\n\t\t\tif ( this._cubemapMaterial === null ) {\n\n\t\t\t\tthis._cubemapMaterial = _getCubemapMaterial();\n\n\t\t\t}\n\n\t\t\tthis._cubemapMaterial.uniforms.flipEnvMap.value = ( texture.isRenderTargetTexture === false ) ? - 1 : 1;\n\n\t\t} else {\n\n\t\t\tif ( this._equirectMaterial === null ) {\n\n\t\t\t\tthis._equirectMaterial = _getEquirectMaterial();\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst material = isCubeTexture ? this._cubemapMaterial : this._equirectMaterial;\n\t\tconst mesh = new Mesh( this._lodPlanes[ 0 ], material );\n\n\t\tconst uniforms = material.uniforms;\n\n\t\tuniforms[ 'envMap' ].value = texture;\n\n\t\tconst size = this._cubeSize;\n\n\t\t_setViewport( cubeUVRenderTarget, 0, 0, 3 * size, 2 * size );\n\n\t\trenderer.setRenderTarget( cubeUVRenderTarget );\n\t\trenderer.render( mesh, _flatCamera );\n\n\t}\n\n\t_applyPMREM( cubeUVRenderTarget ) {\n\n\t\tconst renderer = this._renderer;\n\t\tconst autoClear = renderer.autoClear;\n\t\trenderer.autoClear = false;\n\n\t\tfor ( let i = 1; i < this._lodPlanes.length; i ++ ) {\n\n\t\t\tconst sigma = Math.sqrt( this._sigmas[ i ] * this._sigmas[ i ] - this._sigmas[ i - 1 ] * this._sigmas[ i - 1 ] );\n\n\t\t\tconst poleAxis = _axisDirections[ ( i - 1 ) % _axisDirections.length ];\n\n\t\t\tthis._blur( cubeUVRenderTarget, i - 1, i, sigma, poleAxis );\n\n\t\t}\n\n\t\trenderer.autoClear = autoClear;\n\n\t}\n\n\t/**\n\t * This is a two-pass Gaussian blur for a cubemap. Normally this is done\n\t * vertically and horizontally, but this breaks down on a cube. Here we apply\n\t * the blur latitudinally (around the poles), and then longitudinally (towards\n\t * the poles) to approximate the orthogonally-separable blur. It is least\n\t * accurate at the poles, but still does a decent job.\n\t */\n\t_blur( cubeUVRenderTarget, lodIn, lodOut, sigma, poleAxis ) {\n\n\t\tconst pingPongRenderTarget = this._pingPongRenderTarget;\n\n\t\tthis._halfBlur(\n\t\t\tcubeUVRenderTarget,\n\t\t\tpingPongRenderTarget,\n\t\t\tlodIn,\n\t\t\tlodOut,\n\t\t\tsigma,\n\t\t\t'latitudinal',\n\t\t\tpoleAxis );\n\n\t\tthis._halfBlur(\n\t\t\tpingPongRenderTarget,\n\t\t\tcubeUVRenderTarget,\n\t\t\tlodOut,\n\t\t\tlodOut,\n\t\t\tsigma,\n\t\t\t'longitudinal',\n\t\t\tpoleAxis );\n\n\t}\n\n\t_halfBlur( targetIn, targetOut, lodIn, lodOut, sigmaRadians, direction, poleAxis ) {\n\n\t\tconst renderer = this._renderer;\n\t\tconst blurMaterial = this._blurMaterial;\n\n\t\tif ( direction !== 'latitudinal' && direction !== 'longitudinal' ) {\n\n\t\t\tconsole.error(\n\t\t\t\t'blur direction must be either latitudinal or longitudinal!' );\n\n\t\t}\n\n\t\t// Number of standard deviations at which to cut off the discrete approximation.\n\t\tconst STANDARD_DEVIATIONS = 3;\n\n\t\tconst blurMesh = new Mesh( this._lodPlanes[ lodOut ], blurMaterial );\n\t\tconst blurUniforms = blurMaterial.uniforms;\n\n\t\tconst pixels = this._sizeLods[ lodIn ] - 1;\n\t\tconst radiansPerPixel = isFinite( sigmaRadians ) ? Math.PI / ( 2 * pixels ) : 2 * Math.PI / ( 2 * MAX_SAMPLES - 1 );\n\t\tconst sigmaPixels = sigmaRadians / radiansPerPixel;\n\t\tconst samples = isFinite( sigmaRadians ) ? 1 + Math.floor( STANDARD_DEVIATIONS * sigmaPixels ) : MAX_SAMPLES;\n\n\t\tif ( samples > MAX_SAMPLES ) {\n\n\t\t\tconsole.warn( `sigmaRadians, ${\n\t\t\t\tsigmaRadians}, is too large and will clip, as it requested ${\n\t\t\t\tsamples} samples when the maximum is set to ${MAX_SAMPLES}` );\n\n\t\t}\n\n\t\tconst weights = [];\n\t\tlet sum = 0;\n\n\t\tfor ( let i = 0; i < MAX_SAMPLES; ++ i ) {\n\n\t\t\tconst x = i / sigmaPixels;\n\t\t\tconst weight = Math.exp( - x * x / 2 );\n\t\t\tweights.push( weight );\n\n\t\t\tif ( i === 0 ) {\n\n\t\t\t\tsum += weight;\n\n\t\t\t} else if ( i < samples ) {\n\n\t\t\t\tsum += 2 * weight;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let i = 0; i < weights.length; i ++ ) {\n\n\t\t\tweights[ i ] = weights[ i ] / sum;\n\n\t\t}\n\n\t\tblurUniforms[ 'envMap' ].value = targetIn.texture;\n\t\tblurUniforms[ 'samples' ].value = samples;\n\t\tblurUniforms[ 'weights' ].value = weights;\n\t\tblurUniforms[ 'latitudinal' ].value = direction === 'latitudinal';\n\n\t\tif ( poleAxis ) {\n\n\t\t\tblurUniforms[ 'poleAxis' ].value = poleAxis;\n\n\t\t}\n\n\t\tconst { _lodMax } = this;\n\t\tblurUniforms[ 'dTheta' ].value = radiansPerPixel;\n\t\tblurUniforms[ 'mipInt' ].value = _lodMax - lodIn;\n\n\t\tconst outputSize = this._sizeLods[ lodOut ];\n\t\tconst x = 3 * outputSize * ( lodOut > _lodMax - LOD_MIN ? lodOut - _lodMax + LOD_MIN : 0 );\n\t\tconst y = 4 * ( this._cubeSize - outputSize );\n\n\t\t_setViewport( targetOut, x, y, 3 * outputSize, 2 * outputSize );\n\t\trenderer.setRenderTarget( targetOut );\n\t\trenderer.render( blurMesh, _flatCamera );\n\n\t}\n\n}\n\n\n\nfunction _createPlanes( lodMax ) {\n\n\tconst lodPlanes = [];\n\tconst sizeLods = [];\n\tconst sigmas = [];\n\n\tlet lod = lodMax;\n\n\tconst totalLods = lodMax - LOD_MIN + 1 + EXTRA_LOD_SIGMA.length;\n\n\tfor ( let i = 0; i < totalLods; i ++ ) {\n\n\t\tconst sizeLod = Math.pow( 2, lod );\n\t\tsizeLods.push( sizeLod );\n\t\tlet sigma = 1.0 / sizeLod;\n\n\t\tif ( i > lodMax - LOD_MIN ) {\n\n\t\t\tsigma = EXTRA_LOD_SIGMA[ i - lodMax + LOD_MIN - 1 ];\n\n\t\t} else if ( i === 0 ) {\n\n\t\t\tsigma = 0;\n\n\t\t}\n\n\t\tsigmas.push( sigma );\n\n\t\tconst texelSize = 1.0 / ( sizeLod - 2 );\n\t\tconst min = - texelSize;\n\t\tconst max = 1 + texelSize;\n\t\tconst uv1 = [ min, min, max, min, max, max, min, min, max, max, min, max ];\n\n\t\tconst cubeFaces = 6;\n\t\tconst vertices = 6;\n\t\tconst positionSize = 3;\n\t\tconst uvSize = 2;\n\t\tconst faceIndexSize = 1;\n\n\t\tconst position = new Float32Array( positionSize * vertices * cubeFaces );\n\t\tconst uv = new Float32Array( uvSize * vertices * cubeFaces );\n\t\tconst faceIndex = new Float32Array( faceIndexSize * vertices * cubeFaces );\n\n\t\tfor ( let face = 0; face < cubeFaces; face ++ ) {\n\n\t\t\tconst x = ( face % 3 ) * 2 / 3 - 1;\n\t\t\tconst y = face > 2 ? 0 : - 1;\n\t\t\tconst coordinates = [\n\t\t\t\tx, y, 0,\n\t\t\t\tx + 2 / 3, y, 0,\n\t\t\t\tx + 2 / 3, y + 1, 0,\n\t\t\t\tx, y, 0,\n\t\t\t\tx + 2 / 3, y + 1, 0,\n\t\t\t\tx, y + 1, 0\n\t\t\t];\n\t\t\tposition.set( coordinates, positionSize * vertices * face );\n\t\t\tuv.set( uv1, uvSize * vertices * face );\n\t\t\tconst fill = [ face, face, face, face, face, face ];\n\t\t\tfaceIndex.set( fill, faceIndexSize * vertices * face );\n\n\t\t}\n\n\t\tconst planes = new BufferGeometry();\n\t\tplanes.setAttribute( 'position', new BufferAttribute( position, positionSize ) );\n\t\tplanes.setAttribute( 'uv', new BufferAttribute( uv, uvSize ) );\n\t\tplanes.setAttribute( 'faceIndex', new BufferAttribute( faceIndex, faceIndexSize ) );\n\t\tlodPlanes.push( planes );\n\n\t\tif ( lod > LOD_MIN ) {\n\n\t\t\tlod --;\n\n\t\t}\n\n\t}\n\n\treturn { lodPlanes, sizeLods, sigmas };\n\n}\n\nfunction _createRenderTarget( width, height, params ) {\n\n\tconst cubeUVRenderTarget = new WebGLRenderTarget( width, height, params );\n\tcubeUVRenderTarget.texture.mapping = CubeUVReflectionMapping;\n\tcubeUVRenderTarget.texture.name = 'PMREM.cubeUv';\n\tcubeUVRenderTarget.scissorTest = true;\n\treturn cubeUVRenderTarget;\n\n}\n\nfunction _setViewport( target, x, y, width, height ) {\n\n\ttarget.viewport.set( x, y, width, height );\n\ttarget.scissor.set( x, y, width, height );\n\n}\n\nfunction _getBlurShader( lodMax, width, height ) {\n\n\tconst weights = new Float32Array( MAX_SAMPLES );\n\tconst poleAxis = new Vector3( 0, 1, 0 );\n\tconst shaderMaterial = new ShaderMaterial( {\n\n\t\tname: 'SphericalGaussianBlur',\n\n\t\tdefines: {\n\t\t\t'n': MAX_SAMPLES,\n\t\t\t'CUBEUV_TEXEL_WIDTH': 1.0 / width,\n\t\t\t'CUBEUV_TEXEL_HEIGHT': 1.0 / height,\n\t\t\t'CUBEUV_MAX_MIP': `${lodMax}.0`,\n\t\t},\n\n\t\tuniforms: {\n\t\t\t'envMap': { value: null },\n\t\t\t'samples': { value: 1 },\n\t\t\t'weights': { value: weights },\n\t\t\t'latitudinal': { value: false },\n\t\t\t'dTheta': { value: 0 },\n\t\t\t'mipInt': { value: 0 },\n\t\t\t'poleAxis': { value: poleAxis }\n\t\t},\n\n\t\tvertexShader: _getCommonVertexShader(),\n\n\t\tfragmentShader: /* glsl */`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n\treturn shaderMaterial;\n\n}\n\nfunction _getEquirectMaterial() {\n\n\treturn new ShaderMaterial( {\n\n\t\tname: 'EquirectangularToCubeUV',\n\n\t\tuniforms: {\n\t\t\t'envMap': { value: null }\n\t\t},\n\n\t\tvertexShader: _getCommonVertexShader(),\n\n\t\tfragmentShader: /* glsl */`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n}\n\nfunction _getCubemapMaterial() {\n\n\treturn new ShaderMaterial( {\n\n\t\tname: 'CubemapToCubeUV',\n\n\t\tuniforms: {\n\t\t\t'envMap': { value: null },\n\t\t\t'flipEnvMap': { value: - 1 }\n\t\t},\n\n\t\tvertexShader: _getCommonVertexShader(),\n\n\t\tfragmentShader: /* glsl */`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n}\n\nfunction _getCommonVertexShader() {\n\n\treturn /* glsl */`\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t`;\n\n}\n\nfunction WebGLCubeUVMaps( renderer ) {\n\n\tlet cubeUVmaps = new WeakMap();\n\n\tlet pmremGenerator = null;\n\n\tfunction get( texture ) {\n\n\t\tif ( texture && texture.isTexture ) {\n\n\t\t\tconst mapping = texture.mapping;\n\n\t\t\tconst isEquirectMap = ( mapping === EquirectangularReflectionMapping || mapping === EquirectangularRefractionMapping );\n\t\t\tconst isCubeMap = ( mapping === CubeReflectionMapping || mapping === CubeRefractionMapping );\n\n\t\t\t// equirect/cube map to cubeUV conversion\n\n\t\t\tif ( isEquirectMap || isCubeMap ) {\n\n\t\t\t\tif ( texture.isRenderTargetTexture && texture.needsPMREMUpdate === true ) {\n\n\t\t\t\t\ttexture.needsPMREMUpdate = false;\n\n\t\t\t\t\tlet renderTarget = cubeUVmaps.get( texture );\n\n\t\t\t\t\tif ( pmremGenerator === null ) pmremGenerator = new PMREMGenerator( renderer );\n\n\t\t\t\t\trenderTarget = isEquirectMap ? pmremGenerator.fromEquirectangular( texture, renderTarget ) : pmremGenerator.fromCubemap( texture, renderTarget );\n\t\t\t\t\tcubeUVmaps.set( texture, renderTarget );\n\n\t\t\t\t\treturn renderTarget.texture;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( cubeUVmaps.has( texture ) ) {\n\n\t\t\t\t\t\treturn cubeUVmaps.get( texture ).texture;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconst image = texture.image;\n\n\t\t\t\t\t\tif ( ( isEquirectMap && image && image.height > 0 ) || ( isCubeMap && image && isCubeTextureComplete( image ) ) ) {\n\n\t\t\t\t\t\t\tif ( pmremGenerator === null ) pmremGenerator = new PMREMGenerator( renderer );\n\n\t\t\t\t\t\t\tconst renderTarget = isEquirectMap ? pmremGenerator.fromEquirectangular( texture ) : pmremGenerator.fromCubemap( texture );\n\t\t\t\t\t\t\tcubeUVmaps.set( texture, renderTarget );\n\n\t\t\t\t\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\t\t\t\t\treturn renderTarget.texture;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// image not yet ready. try the conversion next frame\n\n\t\t\t\t\t\t\treturn null;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tfunction isCubeTextureComplete( image ) {\n\n\t\tlet count = 0;\n\t\tconst length = 6;\n\n\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\tif ( image[ i ] !== undefined ) count ++;\n\n\t\t}\n\n\t\treturn count === length;\n\n\n\t}\n\n\tfunction onTextureDispose( event ) {\n\n\t\tconst texture = event.target;\n\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\tconst cubemapUV = cubeUVmaps.get( texture );\n\n\t\tif ( cubemapUV !== undefined ) {\n\n\t\t\tcubeUVmaps.delete( texture );\n\t\t\tcubemapUV.dispose();\n\n\t\t}\n\n\t}\n\n\tfunction dispose() {\n\n\t\tcubeUVmaps = new WeakMap();\n\n\t\tif ( pmremGenerator !== null ) {\n\n\t\t\tpmremGenerator.dispose();\n\t\t\tpmremGenerator = null;\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\nfunction WebGLExtensions( gl ) {\n\n\tconst extensions = {};\n\n\tfunction getExtension( name ) {\n\n\t\tif ( extensions[ name ] !== undefined ) {\n\n\t\t\treturn extensions[ name ];\n\n\t\t}\n\n\t\tlet extension;\n\n\t\tswitch ( name ) {\n\n\t\t\tcase 'WEBGL_depth_texture':\n\t\t\t\textension = gl.getExtension( 'WEBGL_depth_texture' ) || gl.getExtension( 'MOZ_WEBGL_depth_texture' ) || gl.getExtension( 'WEBKIT_WEBGL_depth_texture' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'EXT_texture_filter_anisotropic':\n\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'WEBGL_compressed_texture_s3tc':\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\textension = gl.getExtension( name );\n\n\t\t}\n\n\t\textensions[ name ] = extension;\n\n\t\treturn extension;\n\n\t}\n\n\treturn {\n\n\t\thas: function ( name ) {\n\n\t\t\treturn getExtension( name ) !== null;\n\n\t\t},\n\n\t\tinit: function ( capabilities ) {\n\n\t\t\tif ( capabilities.isWebGL2 ) {\n\n\t\t\t\tgetExtension( 'EXT_color_buffer_float' );\n\n\t\t\t} else {\n\n\t\t\t\tgetExtension( 'WEBGL_depth_texture' );\n\t\t\t\tgetExtension( 'OES_texture_float' );\n\t\t\t\tgetExtension( 'OES_texture_half_float' );\n\t\t\t\tgetExtension( 'OES_texture_half_float_linear' );\n\t\t\t\tgetExtension( 'OES_standard_derivatives' );\n\t\t\t\tgetExtension( 'OES_element_index_uint' );\n\t\t\t\tgetExtension( 'OES_vertex_array_object' );\n\t\t\t\tgetExtension( 'ANGLE_instanced_arrays' );\n\n\t\t\t}\n\n\t\t\tgetExtension( 'OES_texture_float_linear' );\n\t\t\tgetExtension( 'EXT_color_buffer_half_float' );\n\t\t\tgetExtension( 'WEBGL_multisampled_render_to_texture' );\n\n\t\t},\n\n\t\tget: function ( name ) {\n\n\t\t\tconst extension = getExtension( name );\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\n\n\t\t\t}\n\n\t\t\treturn extension;\n\n\t\t}\n\n\t};\n\n}\n\nfunction WebGLGeometries( gl, attributes, info, bindingStates ) {\n\n\tconst geometries = {};\n\tconst wireframeAttributes = new WeakMap();\n\n\tfunction onGeometryDispose( event ) {\n\n\t\tconst geometry = event.target;\n\n\t\tif ( geometry.index !== null ) {\n\n\t\t\tattributes.remove( geometry.index );\n\n\t\t}\n\n\t\tfor ( const name in geometry.attributes ) {\n\n\t\t\tattributes.remove( geometry.attributes[ name ] );\n\n\t\t}\n\n\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\n\n\t\tdelete geometries[ geometry.id ];\n\n\t\tconst attribute = wireframeAttributes.get( geometry );\n\n\t\tif ( attribute ) {\n\n\t\t\tattributes.remove( attribute );\n\t\t\twireframeAttributes.delete( geometry );\n\n\t\t}\n\n\t\tbindingStates.releaseStatesOfGeometry( geometry );\n\n\t\tif ( geometry.isInstancedBufferGeometry === true ) {\n\n\t\t\tdelete geometry._maxInstanceCount;\n\n\t\t}\n\n\t\t//\n\n\t\tinfo.memory.geometries --;\n\n\t}\n\n\tfunction get( object, geometry ) {\n\n\t\tif ( geometries[ geometry.id ] === true ) return geometry;\n\n\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\n\n\t\tgeometries[ geometry.id ] = true;\n\n\t\tinfo.memory.geometries ++;\n\n\t\treturn geometry;\n\n\t}\n\n\tfunction update( geometry ) {\n\n\t\tconst geometryAttributes = geometry.attributes;\n\n\t\t// Updating index buffer in VAO now. See WebGLBindingStates.\n\n\t\tfor ( const name in geometryAttributes ) {\n\n\t\t\tattributes.update( geometryAttributes[ name ], 34962 );\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tconst morphAttributes = geometry.morphAttributes;\n\n\t\tfor ( const name in morphAttributes ) {\n\n\t\t\tconst array = morphAttributes[ name ];\n\n\t\t\tfor ( let i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tattributes.update( array[ i ], 34962 );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction updateWireframeAttribute( geometry ) {\n\n\t\tconst indices = [];\n\n\t\tconst geometryIndex = geometry.index;\n\t\tconst geometryPosition = geometry.attributes.position;\n\t\tlet version = 0;\n\n\t\tif ( geometryIndex !== null ) {\n\n\t\t\tconst array = geometryIndex.array;\n\t\t\tversion = geometryIndex.version;\n\n\t\t\tfor ( let i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\t\tconst a = array[ i + 0 ];\n\t\t\t\tconst b = array[ i + 1 ];\n\t\t\t\tconst c = array[ i + 2 ];\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst array = geometryPosition.array;\n\t\t\tversion = geometryPosition.version;\n\n\t\t\tfor ( let i = 0, l = ( array.length / 3 ) - 1; i < l; i += 3 ) {\n\n\t\t\t\tconst a = i + 0;\n\t\t\t\tconst b = i + 1;\n\t\t\t\tconst c = i + 2;\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst attribute = new ( arrayNeedsUint32( indices ) ? Uint32BufferAttribute : Uint16BufferAttribute )( indices, 1 );\n\t\tattribute.version = version;\n\n\t\t// Updating index buffer in VAO now. See WebGLBindingStates\n\n\t\t//\n\n\t\tconst previousAttribute = wireframeAttributes.get( geometry );\n\n\t\tif ( previousAttribute ) attributes.remove( previousAttribute );\n\n\t\t//\n\n\t\twireframeAttributes.set( geometry, attribute );\n\n\t}\n\n\tfunction getWireframeAttribute( geometry ) {\n\n\t\tconst currentAttribute = wireframeAttributes.get( geometry );\n\n\t\tif ( currentAttribute ) {\n\n\t\t\tconst geometryIndex = geometry.index;\n\n\t\t\tif ( geometryIndex !== null ) {\n\n\t\t\t\t// if the attribute is obsolete, create a new one\n\n\t\t\t\tif ( currentAttribute.version < geometryIndex.version ) {\n\n\t\t\t\t\tupdateWireframeAttribute( geometry );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tupdateWireframeAttribute( geometry );\n\n\t\t}\n\n\t\treturn wireframeAttributes.get( geometry );\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tupdate: update,\n\n\t\tgetWireframeAttribute: getWireframeAttribute\n\n\t};\n\n}\n\nfunction WebGLIndexedBufferRenderer( gl, extensions, info, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tlet mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tlet type, bytesPerElement;\n\n\tfunction setIndex( value ) {\n\n\t\ttype = value.type;\n\t\tbytesPerElement = value.bytesPerElement;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawElements( mode, count, type, start * bytesPerElement );\n\n\t\tinfo.update( count, mode, 1 );\n\n\t}\n\n\tfunction renderInstances( start, count, primcount ) {\n\n\t\tif ( primcount === 0 ) return;\n\n\t\tlet extension, methodName;\n\n\t\tif ( isWebGL2 ) {\n\n\t\t\textension = gl;\n\t\t\tmethodName = 'drawElementsInstanced';\n\n\t\t} else {\n\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\n\t\t\tmethodName = 'drawElementsInstancedANGLE';\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\textension[ methodName ]( mode, count, type, start * bytesPerElement, primcount );\n\n\t\tinfo.update( count, mode, primcount );\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.setIndex = setIndex;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n}\n\nfunction WebGLInfo( gl ) {\n\n\tconst memory = {\n\t\tgeometries: 0,\n\t\ttextures: 0\n\t};\n\n\tconst render = {\n\t\tframe: 0,\n\t\tcalls: 0,\n\t\ttriangles: 0,\n\t\tpoints: 0,\n\t\tlines: 0\n\t};\n\n\tfunction update( count, mode, instanceCount ) {\n\n\t\trender.calls ++;\n\n\t\tswitch ( mode ) {\n\n\t\t\tcase 4:\n\t\t\t\trender.triangles += instanceCount * ( count / 3 );\n\t\t\t\tbreak;\n\n\t\t\tcase 1:\n\t\t\t\trender.lines += instanceCount * ( count / 2 );\n\t\t\t\tbreak;\n\n\t\t\tcase 3:\n\t\t\t\trender.lines += instanceCount * ( count - 1 );\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\t\t\t\trender.lines += instanceCount * count;\n\t\t\t\tbreak;\n\n\t\t\tcase 0:\n\t\t\t\trender.points += instanceCount * count;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.error( 'THREE.WebGLInfo: Unknown draw mode:', mode );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction reset() {\n\n\t\trender.frame ++;\n\t\trender.calls = 0;\n\t\trender.triangles = 0;\n\t\trender.points = 0;\n\t\trender.lines = 0;\n\n\t}\n\n\treturn {\n\t\tmemory: memory,\n\t\trender: render,\n\t\tprograms: null,\n\t\tautoReset: true,\n\t\treset: reset,\n\t\tupdate: update\n\t};\n\n}\n\nfunction numericalSort( a, b ) {\n\n\treturn a[ 0 ] - b[ 0 ];\n\n}\n\nfunction absNumericalSort( a, b ) {\n\n\treturn Math.abs( b[ 1 ] ) - Math.abs( a[ 1 ] );\n\n}\n\nfunction WebGLMorphtargets( gl, capabilities, textures ) {\n\n\tconst influencesList = {};\n\tconst morphInfluences = new Float32Array( 8 );\n\tconst morphTextures = new WeakMap();\n\tconst morph = new Vector4();\n\n\tconst workInfluences = [];\n\n\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\tworkInfluences[ i ] = [ i, 0 ];\n\n\t}\n\n\tfunction update( object, geometry, material, program ) {\n\n\t\tconst objectInfluences = object.morphTargetInfluences;\n\n\t\tif ( capabilities.isWebGL2 === true ) {\n\n\t\t\t// instead of using attributes, the WebGL 2 code path encodes morph targets\n\t\t\t// into an array of data textures. Each layer represents a single morph target.\n\n\t\t\tconst morphAttribute = geometry.morphAttributes.position || geometry.morphAttributes.normal || geometry.morphAttributes.color;\n\t\t\tconst morphTargetsCount = ( morphAttribute !== undefined ) ? morphAttribute.length : 0;\n\n\t\t\tlet entry = morphTextures.get( geometry );\n\n\t\t\tif ( entry === undefined || entry.count !== morphTargetsCount ) {\n\n\t\t\t\tif ( entry !== undefined ) entry.texture.dispose();\n\n\t\t\t\tconst hasMorphPosition = geometry.morphAttributes.position !== undefined;\n\t\t\t\tconst hasMorphNormals = geometry.morphAttributes.normal !== undefined;\n\t\t\t\tconst hasMorphColors = geometry.morphAttributes.color !== undefined;\n\n\t\t\t\tconst morphTargets = geometry.morphAttributes.position || [];\n\t\t\t\tconst morphNormals = geometry.morphAttributes.normal || [];\n\t\t\t\tconst morphColors = geometry.morphAttributes.color || [];\n\n\t\t\t\tlet vertexDataCount = 0;\n\n\t\t\t\tif ( hasMorphPosition === true ) vertexDataCount = 1;\n\t\t\t\tif ( hasMorphNormals === true ) vertexDataCount = 2;\n\t\t\t\tif ( hasMorphColors === true ) vertexDataCount = 3;\n\n\t\t\t\tlet width = geometry.attributes.position.count * vertexDataCount;\n\t\t\t\tlet height = 1;\n\n\t\t\t\tif ( width > capabilities.maxTextureSize ) {\n\n\t\t\t\t\theight = Math.ceil( width / capabilities.maxTextureSize );\n\t\t\t\t\twidth = capabilities.maxTextureSize;\n\n\t\t\t\t}\n\n\t\t\t\tconst buffer = new Float32Array( width * height * 4 * morphTargetsCount );\n\n\t\t\t\tconst texture = new DataArrayTexture( buffer, width, height, morphTargetsCount );\n\t\t\t\ttexture.type = FloatType;\n\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t// fill buffer\n\n\t\t\t\tconst vertexDataStride = vertexDataCount * 4;\n\n\t\t\t\tfor ( let i = 0; i < morphTargetsCount; i ++ ) {\n\n\t\t\t\t\tconst morphTarget = morphTargets[ i ];\n\t\t\t\t\tconst morphNormal = morphNormals[ i ];\n\t\t\t\t\tconst morphColor = morphColors[ i ];\n\n\t\t\t\t\tconst offset = width * height * 4 * i;\n\n\t\t\t\t\tfor ( let j = 0; j < morphTarget.count; j ++ ) {\n\n\t\t\t\t\t\tconst stride = j * vertexDataStride;\n\n\t\t\t\t\t\tif ( hasMorphPosition === true ) {\n\n\t\t\t\t\t\t\tmorph.fromBufferAttribute( morphTarget, j );\n\n\t\t\t\t\t\t\tbuffer[ offset + stride + 0 ] = morph.x;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 1 ] = morph.y;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 2 ] = morph.z;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 3 ] = 0;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( hasMorphNormals === true ) {\n\n\t\t\t\t\t\t\tmorph.fromBufferAttribute( morphNormal, j );\n\n\t\t\t\t\t\t\tbuffer[ offset + stride + 4 ] = morph.x;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 5 ] = morph.y;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 6 ] = morph.z;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 7 ] = 0;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( hasMorphColors === true ) {\n\n\t\t\t\t\t\t\tmorph.fromBufferAttribute( morphColor, j );\n\n\t\t\t\t\t\t\tbuffer[ offset + stride + 8 ] = morph.x;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 9 ] = morph.y;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 10 ] = morph.z;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 11 ] = ( morphColor.itemSize === 4 ) ? morph.w : 1;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tentry = {\n\t\t\t\t\tcount: morphTargetsCount,\n\t\t\t\t\ttexture: texture,\n\t\t\t\t\tsize: new Vector2( width, height )\n\t\t\t\t};\n\n\t\t\t\tmorphTextures.set( geometry, entry );\n\n\t\t\t\tfunction disposeTexture() {\n\n\t\t\t\t\ttexture.dispose();\n\n\t\t\t\t\tmorphTextures.delete( geometry );\n\n\t\t\t\t\tgeometry.removeEventListener( 'dispose', disposeTexture );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.addEventListener( 'dispose', disposeTexture );\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tlet morphInfluencesSum = 0;\n\n\t\t\tfor ( let i = 0; i < objectInfluences.length; i ++ ) {\n\n\t\t\t\tmorphInfluencesSum += objectInfluences[ i ];\n\n\t\t\t}\n\n\t\t\tconst morphBaseInfluence = geometry.morphTargetsRelative ? 1 : 1 - morphInfluencesSum;\n\n\t\t\tprogram.getUniforms().setValue( gl, 'morphTargetBaseInfluence', morphBaseInfluence );\n\t\t\tprogram.getUniforms().setValue( gl, 'morphTargetInfluences', objectInfluences );\n\n\t\t\tprogram.getUniforms().setValue( gl, 'morphTargetsTexture', entry.texture, textures );\n\t\t\tprogram.getUniforms().setValue( gl, 'morphTargetsTextureSize', entry.size );\n\n\n\t\t} else {\n\n\t\t\t// When object doesn't have morph target influences defined, we treat it as a 0-length array\n\t\t\t// This is important to make sure we set up morphTargetBaseInfluence / morphTargetInfluences\n\n\t\t\tconst length = objectInfluences === undefined ? 0 : objectInfluences.length;\n\n\t\t\tlet influences = influencesList[ geometry.id ];\n\n\t\t\tif ( influences === undefined || influences.length !== length ) {\n\n\t\t\t\t// initialise list\n\n\t\t\t\tinfluences = [];\n\n\t\t\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\t\t\tinfluences[ i ] = [ i, 0 ];\n\n\t\t\t\t}\n\n\t\t\t\tinfluencesList[ geometry.id ] = influences;\n\n\t\t\t}\n\n\t\t\t// Collect influences\n\n\t\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\t\tconst influence = influences[ i ];\n\n\t\t\t\tinfluence[ 0 ] = i;\n\t\t\t\tinfluence[ 1 ] = objectInfluences[ i ];\n\n\t\t\t}\n\n\t\t\tinfluences.sort( absNumericalSort );\n\n\t\t\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\t\t\tif ( i < length && influences[ i ][ 1 ] ) {\n\n\t\t\t\t\tworkInfluences[ i ][ 0 ] = influences[ i ][ 0 ];\n\t\t\t\t\tworkInfluences[ i ][ 1 ] = influences[ i ][ 1 ];\n\n\t\t\t\t} else {\n\n\t\t\t\t\tworkInfluences[ i ][ 0 ] = Number.MAX_SAFE_INTEGER;\n\t\t\t\t\tworkInfluences[ i ][ 1 ] = 0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tworkInfluences.sort( numericalSort );\n\n\t\t\tconst morphTargets = geometry.morphAttributes.position;\n\t\t\tconst morphNormals = geometry.morphAttributes.normal;\n\n\t\t\tlet morphInfluencesSum = 0;\n\n\t\t\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\t\t\tconst influence = workInfluences[ i ];\n\t\t\t\tconst index = influence[ 0 ];\n\t\t\t\tconst value = influence[ 1 ];\n\n\t\t\t\tif ( index !== Number.MAX_SAFE_INTEGER && value ) {\n\n\t\t\t\t\tif ( morphTargets && geometry.getAttribute( 'morphTarget' + i ) !== morphTargets[ index ] ) {\n\n\t\t\t\t\t\tgeometry.setAttribute( 'morphTarget' + i, morphTargets[ index ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( morphNormals && geometry.getAttribute( 'morphNormal' + i ) !== morphNormals[ index ] ) {\n\n\t\t\t\t\t\tgeometry.setAttribute( 'morphNormal' + i, morphNormals[ index ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmorphInfluences[ i ] = value;\n\t\t\t\t\tmorphInfluencesSum += value;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( morphTargets && geometry.hasAttribute( 'morphTarget' + i ) === true ) {\n\n\t\t\t\t\t\tgeometry.deleteAttribute( 'morphTarget' + i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( morphNormals && geometry.hasAttribute( 'morphNormal' + i ) === true ) {\n\n\t\t\t\t\t\tgeometry.deleteAttribute( 'morphNormal' + i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmorphInfluences[ i ] = 0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// GLSL shader uses formula baseinfluence * base + sum(target * influence)\n\t\t\t// This allows us to switch between absolute morphs and relative morphs without changing shader code\n\t\t\t// When baseinfluence = 1 - sum(influence), the above is equivalent to sum((target - base) * influence)\n\t\t\tconst morphBaseInfluence = geometry.morphTargetsRelative ? 1 : 1 - morphInfluencesSum;\n\n\t\t\tprogram.getUniforms().setValue( gl, 'morphTargetBaseInfluence', morphBaseInfluence );\n\t\t\tprogram.getUniforms().setValue( gl, 'morphTargetInfluences', morphInfluences );\n\n\t\t}\n\n\t}\n\n\treturn {\n\n\t\tupdate: update\n\n\t};\n\n}\n\nfunction WebGLObjects( gl, geometries, attributes, info ) {\n\n\tlet updateMap = new WeakMap();\n\n\tfunction update( object ) {\n\n\t\tconst frame = info.render.frame;\n\n\t\tconst geometry = object.geometry;\n\t\tconst buffergeometry = geometries.get( object, geometry );\n\n\t\t// Update once per frame\n\n\t\tif ( updateMap.get( buffergeometry ) !== frame ) {\n\n\t\t\tgeometries.update( buffergeometry );\n\n\t\t\tupdateMap.set( buffergeometry, frame );\n\n\t\t}\n\n\t\tif ( object.isInstancedMesh ) {\n\n\t\t\tif ( object.hasEventListener( 'dispose', onInstancedMeshDispose ) === false ) {\n\n\t\t\t\tobject.addEventListener( 'dispose', onInstancedMeshDispose );\n\n\t\t\t}\n\n\t\t\tattributes.update( object.instanceMatrix, 34962 );\n\n\t\t\tif ( object.instanceColor !== null ) {\n\n\t\t\t\tattributes.update( object.instanceColor, 34962 );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn buffergeometry;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tupdateMap = new WeakMap();\n\n\t}\n\n\tfunction onInstancedMeshDispose( event ) {\n\n\t\tconst instancedMesh = event.target;\n\n\t\tinstancedMesh.removeEventListener( 'dispose', onInstancedMeshDispose );\n\n\t\tattributes.remove( instancedMesh.instanceMatrix );\n\n\t\tif ( instancedMesh.instanceColor !== null ) attributes.remove( instancedMesh.instanceColor );\n\n\t}\n\n\treturn {\n\n\t\tupdate: update,\n\t\tdispose: dispose\n\n\t};\n\n}\n\n/**\n * Uniforms of a program.\n * Those form a tree structure with a special top-level container for the root,\n * which you get by calling 'new WebGLUniforms( gl, program )'.\n *\n *\n * Properties of inner nodes including the top-level container:\n *\n * .seq - array of nested uniforms\n * .map - nested uniforms by name\n *\n *\n * Methods of all nodes except the top-level container:\n *\n * .setValue( gl, value, [textures] )\n *\n * \t\tuploads a uniform value(s)\n *  \tthe 'textures' parameter is needed for sampler uniforms\n *\n *\n * Static methods of the top-level container (textures factorizations):\n *\n * .upload( gl, seq, values, textures )\n *\n * \t\tsets uniforms in 'seq' to 'values[id].value'\n *\n * .seqWithValue( seq, values ) : filteredSeq\n *\n * \t\tfilters 'seq' entries with corresponding entry in values\n *\n *\n * Methods of the top-level container (textures factorizations):\n *\n * .setValue( gl, name, value, textures )\n *\n * \t\tsets uniform with  name 'name' to 'value'\n *\n * .setOptional( gl, obj, prop )\n *\n * \t\tlike .set for an optional property of the object\n *\n */\n\nconst emptyTexture = /*@__PURE__*/ new Texture();\nconst emptyArrayTexture = /*@__PURE__*/ new DataArrayTexture();\nconst empty3dTexture = /*@__PURE__*/ new Data3DTexture();\nconst emptyCubeTexture = /*@__PURE__*/ new CubeTexture();\n\n// --- Utilities ---\n\n// Array Caches (provide typed arrays for temporary by size)\n\nconst arrayCacheF32 = [];\nconst arrayCacheI32 = [];\n\n// Float32Array caches used for uploading Matrix uniforms\n\nconst mat4array = new Float32Array( 16 );\nconst mat3array = new Float32Array( 9 );\nconst mat2array = new Float32Array( 4 );\n\n// Flattening for arrays of vectors and matrices\n\nfunction flatten( array, nBlocks, blockSize ) {\n\n\tconst firstElem = array[ 0 ];\n\n\tif ( firstElem <= 0 || firstElem > 0 ) return array;\n\t// unoptimized: ! isNaN( firstElem )\n\t// see http://jacksondunstan.com/articles/983\n\n\tconst n = nBlocks * blockSize;\n\tlet r = arrayCacheF32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Float32Array( n );\n\t\tarrayCacheF32[ n ] = r;\n\n\t}\n\n\tif ( nBlocks !== 0 ) {\n\n\t\tfirstElem.toArray( r, 0 );\n\n\t\tfor ( let i = 1, offset = 0; i !== nBlocks; ++ i ) {\n\n\t\t\toffset += blockSize;\n\t\t\tarray[ i ].toArray( r, offset );\n\n\t\t}\n\n\t}\n\n\treturn r;\n\n}\n\nfunction arraysEqual( a, b ) {\n\n\tif ( a.length !== b.length ) return false;\n\n\tfor ( let i = 0, l = a.length; i < l; i ++ ) {\n\n\t\tif ( a[ i ] !== b[ i ] ) return false;\n\n\t}\n\n\treturn true;\n\n}\n\nfunction copyArray( a, b ) {\n\n\tfor ( let i = 0, l = b.length; i < l; i ++ ) {\n\n\t\ta[ i ] = b[ i ];\n\n\t}\n\n}\n\n// Texture unit allocation\n\nfunction allocTexUnits( textures, n ) {\n\n\tlet r = arrayCacheI32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Int32Array( n );\n\t\tarrayCacheI32[ n ] = r;\n\n\t}\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\tr[ i ] = textures.allocateTextureUnit();\n\n\t}\n\n\treturn r;\n\n}\n\n// --- Setters ---\n\n// Note: Defining these methods externally, because they come in a bunch\n// and this way their names minify.\n\n// Single scalar\n\nfunction setValueV1f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1f( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\n// Single float vector (from flat array or THREE.VectorN)\n\nfunction setValueV2f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y ) {\n\n\t\t\tgl.uniform2f( this.addr, v.x, v.y );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform2fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV3f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z ) {\n\n\t\t\tgl.uniform3f( this.addr, v.x, v.y, v.z );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\n\t\t}\n\n\t} else if ( v.r !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.r || cache[ 1 ] !== v.g || cache[ 2 ] !== v.b ) {\n\n\t\t\tgl.uniform3f( this.addr, v.r, v.g, v.b );\n\n\t\t\tcache[ 0 ] = v.r;\n\t\t\tcache[ 1 ] = v.g;\n\t\t\tcache[ 2 ] = v.b;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform3fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV4f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z || cache[ 3 ] !== v.w ) {\n\n\t\t\tgl.uniform4f( this.addr, v.x, v.y, v.z, v.w );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\t\t\tcache[ 3 ] = v.w;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform4fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\n// Single matrix (from flat array or THREE.MatrixN)\n\nfunction setValueM2( gl, v ) {\n\n\tconst cache = this.cache;\n\tconst elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix2fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat2array.set( elements );\n\n\t\tgl.uniformMatrix2fv( this.addr, false, mat2array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\nfunction setValueM3( gl, v ) {\n\n\tconst cache = this.cache;\n\tconst elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix3fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat3array.set( elements );\n\n\t\tgl.uniformMatrix3fv( this.addr, false, mat3array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\nfunction setValueM4( gl, v ) {\n\n\tconst cache = this.cache;\n\tconst elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix4fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat4array.set( elements );\n\n\t\tgl.uniformMatrix4fv( this.addr, false, mat4array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\n// Single integer / boolean\n\nfunction setValueV1i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1i( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\n// Single integer / boolean vector (from flat array)\n\nfunction setValueV2i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform2iv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\nfunction setValueV3i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform3iv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\nfunction setValueV4i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform4iv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\n// Single unsigned integer\n\nfunction setValueV1ui( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1ui( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\n// Single unsigned integer vector (from flat array)\n\nfunction setValueV2ui( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform2uiv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\nfunction setValueV3ui( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform3uiv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\nfunction setValueV4ui( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform4uiv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\n\n// Single texture (2D / Cube)\n\nfunction setValueT1( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTexture2D( v || emptyTexture, unit );\n\n}\n\nfunction setValueT3D1( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTexture3D( v || empty3dTexture, unit );\n\n}\n\nfunction setValueT6( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTextureCube( v || emptyCubeTexture, unit );\n\n}\n\nfunction setValueT2DArray1( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTexture2DArray( v || emptyArrayTexture, unit );\n\n}\n\n// Helper to pick the right setter for the singular case\n\nfunction getSingularSetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValueV1f; // FLOAT\n\t\tcase 0x8b50: return setValueV2f; // _VEC2\n\t\tcase 0x8b51: return setValueV3f; // _VEC3\n\t\tcase 0x8b52: return setValueV4f; // _VEC4\n\n\t\tcase 0x8b5a: return setValueM2; // _MAT2\n\t\tcase 0x8b5b: return setValueM3; // _MAT3\n\t\tcase 0x8b5c: return setValueM4; // _MAT4\n\n\t\tcase 0x1404: case 0x8b56: return setValueV1i; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValueV2i; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValueV3i; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValueV4i; // _VEC4\n\n\t\tcase 0x1405: return setValueV1ui; // UINT\n\t\tcase 0x8dc6: return setValueV2ui; // _VEC2\n\t\tcase 0x8dc7: return setValueV3ui; // _VEC3\n\t\tcase 0x8dc8: return setValueV4ui; // _VEC4\n\n\t\tcase 0x8b5e: // SAMPLER_2D\n\t\tcase 0x8d66: // SAMPLER_EXTERNAL_OES\n\t\tcase 0x8dca: // INT_SAMPLER_2D\n\t\tcase 0x8dd2: // UNSIGNED_INT_SAMPLER_2D\n\t\tcase 0x8b62: // SAMPLER_2D_SHADOW\n\t\t\treturn setValueT1;\n\n\t\tcase 0x8b5f: // SAMPLER_3D\n\t\tcase 0x8dcb: // INT_SAMPLER_3D\n\t\tcase 0x8dd3: // UNSIGNED_INT_SAMPLER_3D\n\t\t\treturn setValueT3D1;\n\n\t\tcase 0x8b60: // SAMPLER_CUBE\n\t\tcase 0x8dcc: // INT_SAMPLER_CUBE\n\t\tcase 0x8dd4: // UNSIGNED_INT_SAMPLER_CUBE\n\t\tcase 0x8dc5: // SAMPLER_CUBE_SHADOW\n\t\t\treturn setValueT6;\n\n\t\tcase 0x8dc1: // SAMPLER_2D_ARRAY\n\t\tcase 0x8dcf: // INT_SAMPLER_2D_ARRAY\n\t\tcase 0x8dd7: // UNSIGNED_INT_SAMPLER_2D_ARRAY\n\t\tcase 0x8dc4: // SAMPLER_2D_ARRAY_SHADOW\n\t\t\treturn setValueT2DArray1;\n\n\t}\n\n}\n\n\n// Array of scalars\n\nfunction setValueV1fArray( gl, v ) {\n\n\tgl.uniform1fv( this.addr, v );\n\n}\n\n// Array of vectors (from flat array or array of THREE.VectorN)\n\nfunction setValueV2fArray( gl, v ) {\n\n\tconst data = flatten( v, this.size, 2 );\n\n\tgl.uniform2fv( this.addr, data );\n\n}\n\nfunction setValueV3fArray( gl, v ) {\n\n\tconst data = flatten( v, this.size, 3 );\n\n\tgl.uniform3fv( this.addr, data );\n\n}\n\nfunction setValueV4fArray( gl, v ) {\n\n\tconst data = flatten( v, this.size, 4 );\n\n\tgl.uniform4fv( this.addr, data );\n\n}\n\n// Array of matrices (from flat array or array of THREE.MatrixN)\n\nfunction setValueM2Array( gl, v ) {\n\n\tconst data = flatten( v, this.size, 4 );\n\n\tgl.uniformMatrix2fv( this.addr, false, data );\n\n}\n\nfunction setValueM3Array( gl, v ) {\n\n\tconst data = flatten( v, this.size, 9 );\n\n\tgl.uniformMatrix3fv( this.addr, false, data );\n\n}\n\nfunction setValueM4Array( gl, v ) {\n\n\tconst data = flatten( v, this.size, 16 );\n\n\tgl.uniformMatrix4fv( this.addr, false, data );\n\n}\n\n// Array of integer / boolean\n\nfunction setValueV1iArray( gl, v ) {\n\n\tgl.uniform1iv( this.addr, v );\n\n}\n\n// Array of integer / boolean vectors (from flat array)\n\nfunction setValueV2iArray( gl, v ) {\n\n\tgl.uniform2iv( this.addr, v );\n\n}\n\nfunction setValueV3iArray( gl, v ) {\n\n\tgl.uniform3iv( this.addr, v );\n\n}\n\nfunction setValueV4iArray( gl, v ) {\n\n\tgl.uniform4iv( this.addr, v );\n\n}\n\n// Array of unsigned integer\n\nfunction setValueV1uiArray( gl, v ) {\n\n\tgl.uniform1uiv( this.addr, v );\n\n}\n\n// Array of unsigned integer vectors (from flat array)\n\nfunction setValueV2uiArray( gl, v ) {\n\n\tgl.uniform2uiv( this.addr, v );\n\n}\n\nfunction setValueV3uiArray( gl, v ) {\n\n\tgl.uniform3uiv( this.addr, v );\n\n}\n\nfunction setValueV4uiArray( gl, v ) {\n\n\tgl.uniform4uiv( this.addr, v );\n\n}\n\n\n// Array of textures (2D / 3D / Cube / 2DArray)\n\nfunction setValueT1Array( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\n\tconst n = v.length;\n\n\tconst units = allocTexUnits( textures, n );\n\n\tif ( ! arraysEqual( cache, units ) ) {\n\n\t\tgl.uniform1iv( this.addr, units );\n\n\t\tcopyArray( cache, units );\n\n\t}\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\ttextures.setTexture2D( v[ i ] || emptyTexture, units[ i ] );\n\n\t}\n\n}\n\nfunction setValueT3DArray( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\n\tconst n = v.length;\n\n\tconst units = allocTexUnits( textures, n );\n\n\tif ( ! arraysEqual( cache, units ) ) {\n\n\t\tgl.uniform1iv( this.addr, units );\n\n\t\tcopyArray( cache, units );\n\n\t}\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\ttextures.setTexture3D( v[ i ] || empty3dTexture, units[ i ] );\n\n\t}\n\n}\n\nfunction setValueT6Array( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\n\tconst n = v.length;\n\n\tconst units = allocTexUnits( textures, n );\n\n\tif ( ! arraysEqual( cache, units ) ) {\n\n\t\tgl.uniform1iv( this.addr, units );\n\n\t\tcopyArray( cache, units );\n\n\t}\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\ttextures.setTextureCube( v[ i ] || emptyCubeTexture, units[ i ] );\n\n\t}\n\n}\n\nfunction setValueT2DArrayArray( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\n\tconst n = v.length;\n\n\tconst units = allocTexUnits( textures, n );\n\n\tif ( ! arraysEqual( cache, units ) ) {\n\n\t\tgl.uniform1iv( this.addr, units );\n\n\t\tcopyArray( cache, units );\n\n\t}\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\ttextures.setTexture2DArray( v[ i ] || emptyArrayTexture, units[ i ] );\n\n\t}\n\n}\n\n\n// Helper to pick the right setter for a pure (bottom-level) array\n\nfunction getPureArraySetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValueV1fArray; // FLOAT\n\t\tcase 0x8b50: return setValueV2fArray; // _VEC2\n\t\tcase 0x8b51: return setValueV3fArray; // _VEC3\n\t\tcase 0x8b52: return setValueV4fArray; // _VEC4\n\n\t\tcase 0x8b5a: return setValueM2Array; // _MAT2\n\t\tcase 0x8b5b: return setValueM3Array; // _MAT3\n\t\tcase 0x8b5c: return setValueM4Array; // _MAT4\n\n\t\tcase 0x1404: case 0x8b56: return setValueV1iArray; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValueV2iArray; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValueV3iArray; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValueV4iArray; // _VEC4\n\n\t\tcase 0x1405: return setValueV1uiArray; // UINT\n\t\tcase 0x8dc6: return setValueV2uiArray; // _VEC2\n\t\tcase 0x8dc7: return setValueV3uiArray; // _VEC3\n\t\tcase 0x8dc8: return setValueV4uiArray; // _VEC4\n\n\t\tcase 0x8b5e: // SAMPLER_2D\n\t\tcase 0x8d66: // SAMPLER_EXTERNAL_OES\n\t\tcase 0x8dca: // INT_SAMPLER_2D\n\t\tcase 0x8dd2: // UNSIGNED_INT_SAMPLER_2D\n\t\tcase 0x8b62: // SAMPLER_2D_SHADOW\n\t\t\treturn setValueT1Array;\n\n\t\tcase 0x8b5f: // SAMPLER_3D\n\t\tcase 0x8dcb: // INT_SAMPLER_3D\n\t\tcase 0x8dd3: // UNSIGNED_INT_SAMPLER_3D\n\t\t\treturn setValueT3DArray;\n\n\t\tcase 0x8b60: // SAMPLER_CUBE\n\t\tcase 0x8dcc: // INT_SAMPLER_CUBE\n\t\tcase 0x8dd4: // UNSIGNED_INT_SAMPLER_CUBE\n\t\tcase 0x8dc5: // SAMPLER_CUBE_SHADOW\n\t\t\treturn setValueT6Array;\n\n\t\tcase 0x8dc1: // SAMPLER_2D_ARRAY\n\t\tcase 0x8dcf: // INT_SAMPLER_2D_ARRAY\n\t\tcase 0x8dd7: // UNSIGNED_INT_SAMPLER_2D_ARRAY\n\t\tcase 0x8dc4: // SAMPLER_2D_ARRAY_SHADOW\n\t\t\treturn setValueT2DArrayArray;\n\n\t}\n\n}\n\n// --- Uniform Classes ---\n\nclass SingleUniform {\n\n\tconstructor( id, activeInfo, addr ) {\n\n\t\tthis.id = id;\n\t\tthis.addr = addr;\n\t\tthis.cache = [];\n\t\tthis.setValue = getSingularSetter( activeInfo.type );\n\n\t\t// this.path = activeInfo.name; // DEBUG\n\n\t}\n\n}\n\nclass PureArrayUniform {\n\n\tconstructor( id, activeInfo, addr ) {\n\n\t\tthis.id = id;\n\t\tthis.addr = addr;\n\t\tthis.cache = [];\n\t\tthis.size = activeInfo.size;\n\t\tthis.setValue = getPureArraySetter( activeInfo.type );\n\n\t\t// this.path = activeInfo.name; // DEBUG\n\n\t}\n\n}\n\nclass StructuredUniform {\n\n\tconstructor( id ) {\n\n\t\tthis.id = id;\n\n\t\tthis.seq = [];\n\t\tthis.map = {};\n\n\t}\n\n\tsetValue( gl, value, textures ) {\n\n\t\tconst seq = this.seq;\n\n\t\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\t\tconst u = seq[ i ];\n\t\t\tu.setValue( gl, value[ u.id ], textures );\n\n\t\t}\n\n\t}\n\n}\n\n// --- Top-level ---\n\n// Parser - builds up the property tree from the path strings\n\nconst RePathPart = /(\\w+)(\\])?(\\[|\\.)?/g;\n\n// extracts\n// \t- the identifier (member name or array index)\n//  - followed by an optional right bracket (found when array index)\n//  - followed by an optional left bracket or dot (type of subscript)\n//\n// Note: These portions can be read in a non-overlapping fashion and\n// allow straightforward parsing of the hierarchy that WebGL encodes\n// in the uniform names.\n\nfunction addUniform( container, uniformObject ) {\n\n\tcontainer.seq.push( uniformObject );\n\tcontainer.map[ uniformObject.id ] = uniformObject;\n\n}\n\nfunction parseUniform( activeInfo, addr, container ) {\n\n\tconst path = activeInfo.name,\n\t\tpathLength = path.length;\n\n\t// reset RegExp object, because of the early exit of a previous run\n\tRePathPart.lastIndex = 0;\n\n\twhile ( true ) {\n\n\t\tconst match = RePathPart.exec( path ),\n\t\t\tmatchEnd = RePathPart.lastIndex;\n\n\t\tlet id = match[ 1 ];\n\t\tconst idIsIndex = match[ 2 ] === ']',\n\t\t\tsubscript = match[ 3 ];\n\n\t\tif ( idIsIndex ) id = id | 0; // convert to integer\n\n\t\tif ( subscript === undefined || subscript === '[' && matchEnd + 2 === pathLength ) {\n\n\t\t\t// bare name or \"pure\" bottom-level array \"[0]\" suffix\n\n\t\t\taddUniform( container, subscript === undefined ?\n\t\t\t\tnew SingleUniform( id, activeInfo, addr ) :\n\t\t\t\tnew PureArrayUniform( id, activeInfo, addr ) );\n\n\t\t\tbreak;\n\n\t\t} else {\n\n\t\t\t// step into inner node / create it in case it doesn't exist\n\n\t\t\tconst map = container.map;\n\t\t\tlet next = map[ id ];\n\n\t\t\tif ( next === undefined ) {\n\n\t\t\t\tnext = new StructuredUniform( id );\n\t\t\t\taddUniform( container, next );\n\n\t\t\t}\n\n\t\t\tcontainer = next;\n\n\t\t}\n\n\t}\n\n}\n\n// Root Container\n\nclass WebGLUniforms {\n\n\tconstructor( gl, program ) {\n\n\t\tthis.seq = [];\n\t\tthis.map = {};\n\n\t\tconst n = gl.getProgramParameter( program, 35718 );\n\n\t\tfor ( let i = 0; i < n; ++ i ) {\n\n\t\t\tconst info = gl.getActiveUniform( program, i ),\n\t\t\t\taddr = gl.getUniformLocation( program, info.name );\n\n\t\t\tparseUniform( info, addr, this );\n\n\t\t}\n\n\t}\n\n\tsetValue( gl, name, value, textures ) {\n\n\t\tconst u = this.map[ name ];\n\n\t\tif ( u !== undefined ) u.setValue( gl, value, textures );\n\n\t}\n\n\tsetOptional( gl, object, name ) {\n\n\t\tconst v = object[ name ];\n\n\t\tif ( v !== undefined ) this.setValue( gl, name, v );\n\n\t}\n\n\tstatic upload( gl, seq, values, textures ) {\n\n\t\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\t\tconst u = seq[ i ],\n\t\t\t\tv = values[ u.id ];\n\n\t\t\tif ( v.needsUpdate !== false ) {\n\n\t\t\t\t// note: always updating when .needsUpdate is undefined\n\t\t\t\tu.setValue( gl, v.value, textures );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tstatic seqWithValue( seq, values ) {\n\n\t\tconst r = [];\n\n\t\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\t\tconst u = seq[ i ];\n\t\t\tif ( u.id in values ) r.push( u );\n\n\t\t}\n\n\t\treturn r;\n\n\t}\n\n}\n\nfunction WebGLShader( gl, type, string ) {\n\n\tconst shader = gl.createShader( type );\n\n\tgl.shaderSource( shader, string );\n\tgl.compileShader( shader );\n\n\treturn shader;\n\n}\n\nlet programIdCount = 0;\n\nfunction handleSource( string, errorLine ) {\n\n\tconst lines = string.split( '\\n' );\n\tconst lines2 = [];\n\n\tconst from = Math.max( errorLine - 6, 0 );\n\tconst to = Math.min( errorLine + 6, lines.length );\n\n\tfor ( let i = from; i < to; i ++ ) {\n\n\t\tconst line = i + 1;\n\t\tlines2.push( `${line === errorLine ? '>' : ' '} ${line}: ${lines[ i ]}` );\n\n\t}\n\n\treturn lines2.join( '\\n' );\n\n}\n\nfunction getEncodingComponents( encoding ) {\n\n\tswitch ( encoding ) {\n\n\t\tcase LinearEncoding:\n\t\t\treturn [ 'Linear', '( value )' ];\n\t\tcase sRGBEncoding:\n\t\t\treturn [ 'sRGB', '( value )' ];\n\t\tdefault:\n\t\t\tconsole.warn( 'THREE.WebGLProgram: Unsupported encoding:', encoding );\n\t\t\treturn [ 'Linear', '( value )' ];\n\n\t}\n\n}\n\nfunction getShaderErrors( gl, shader, type ) {\n\n\tconst status = gl.getShaderParameter( shader, 35713 );\n\tconst errors = gl.getShaderInfoLog( shader ).trim();\n\n\tif ( status && errors === '' ) return '';\n\n\tconst errorMatches = /ERROR: 0:(\\d+)/.exec( errors );\n\tif ( errorMatches ) {\n\n\t\t// --enable-privileged-webgl-extension\n\t\t// console.log( '**' + type + '**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\n\n\t\tconst errorLine = parseInt( errorMatches[ 1 ] );\n\t\treturn type.toUpperCase() + '\\n\\n' + errors + '\\n\\n' + handleSource( gl.getShaderSource( shader ), errorLine );\n\n\t} else {\n\n\t\treturn errors;\n\n\t}\n\n}\n\nfunction getTexelEncodingFunction( functionName, encoding ) {\n\n\tconst components = getEncodingComponents( encoding );\n\treturn 'vec4 ' + functionName + '( vec4 value ) { return LinearTo' + components[ 0 ] + components[ 1 ] + '; }';\n\n}\n\nfunction getToneMappingFunction( functionName, toneMapping ) {\n\n\tlet toneMappingName;\n\n\tswitch ( toneMapping ) {\n\n\t\tcase LinearToneMapping:\n\t\t\ttoneMappingName = 'Linear';\n\t\t\tbreak;\n\n\t\tcase ReinhardToneMapping:\n\t\t\ttoneMappingName = 'Reinhard';\n\t\t\tbreak;\n\n\t\tcase CineonToneMapping:\n\t\t\ttoneMappingName = 'OptimizedCineon';\n\t\t\tbreak;\n\n\t\tcase ACESFilmicToneMapping:\n\t\t\ttoneMappingName = 'ACESFilmic';\n\t\t\tbreak;\n\n\t\tcase CustomToneMapping:\n\t\t\ttoneMappingName = 'Custom';\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tconsole.warn( 'THREE.WebGLProgram: Unsupported toneMapping:', toneMapping );\n\t\t\ttoneMappingName = 'Linear';\n\n\t}\n\n\treturn 'vec3 ' + functionName + '( vec3 color ) { return ' + toneMappingName + 'ToneMapping( color ); }';\n\n}\n\nfunction generateExtensions( parameters ) {\n\n\tconst chunks = [\n\t\t( parameters.extensionDerivatives || !! parameters.envMapCubeUVHeight || parameters.bumpMap || parameters.tangentSpaceNormalMap || parameters.clearcoatNormalMap || parameters.flatShading || parameters.shaderID === 'physical' ) ? '#extension GL_OES_standard_derivatives : enable' : '',\n\t\t( parameters.extensionFragDepth || parameters.logarithmicDepthBuffer ) && parameters.rendererExtensionFragDepth ? '#extension GL_EXT_frag_depth : enable' : '',\n\t\t( parameters.extensionDrawBuffers && parameters.rendererExtensionDrawBuffers ) ? '#extension GL_EXT_draw_buffers : require' : '',\n\t\t( parameters.extensionShaderTextureLOD || parameters.envMap || parameters.transmission ) && parameters.rendererExtensionShaderTextureLod ? '#extension GL_EXT_shader_texture_lod : enable' : ''\n\t];\n\n\treturn chunks.filter( filterEmptyLine ).join( '\\n' );\n\n}\n\nfunction generateDefines( defines ) {\n\n\tconst chunks = [];\n\n\tfor ( const name in defines ) {\n\n\t\tconst value = defines[ name ];\n\n\t\tif ( value === false ) continue;\n\n\t\tchunks.push( '#define ' + name + ' ' + value );\n\n\t}\n\n\treturn chunks.join( '\\n' );\n\n}\n\nfunction fetchAttributeLocations( gl, program ) {\n\n\tconst attributes = {};\n\n\tconst n = gl.getProgramParameter( program, 35721 );\n\n\tfor ( let i = 0; i < n; i ++ ) {\n\n\t\tconst info = gl.getActiveAttrib( program, i );\n\t\tconst name = info.name;\n\n\t\tlet locationSize = 1;\n\t\tif ( info.type === 35674 ) locationSize = 2;\n\t\tif ( info.type === 35675 ) locationSize = 3;\n\t\tif ( info.type === 35676 ) locationSize = 4;\n\n\t\t// console.log( 'THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:', name, i );\n\n\t\tattributes[ name ] = {\n\t\t\ttype: info.type,\n\t\t\tlocation: gl.getAttribLocation( program, name ),\n\t\t\tlocationSize: locationSize\n\t\t};\n\n\t}\n\n\treturn attributes;\n\n}\n\nfunction filterEmptyLine( string ) {\n\n\treturn string !== '';\n\n}\n\nfunction replaceLightNums( string, parameters ) {\n\n\tconst numSpotLightCoords = parameters.numSpotLightShadows + parameters.numSpotLightMaps - parameters.numSpotLightShadowsWithMaps;\n\n\treturn string\n\t\t.replace( /NUM_DIR_LIGHTS/g, parameters.numDirLights )\n\t\t.replace( /NUM_SPOT_LIGHTS/g, parameters.numSpotLights )\n\t\t.replace( /NUM_SPOT_LIGHT_MAPS/g, parameters.numSpotLightMaps )\n\t\t.replace( /NUM_SPOT_LIGHT_COORDS/g, numSpotLightCoords )\n\t\t.replace( /NUM_RECT_AREA_LIGHTS/g, parameters.numRectAreaLights )\n\t\t.replace( /NUM_POINT_LIGHTS/g, parameters.numPointLights )\n\t\t.replace( /NUM_HEMI_LIGHTS/g, parameters.numHemiLights )\n\t\t.replace( /NUM_DIR_LIGHT_SHADOWS/g, parameters.numDirLightShadows )\n\t\t.replace( /NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g, parameters.numSpotLightShadowsWithMaps )\n\t\t.replace( /NUM_SPOT_LIGHT_SHADOWS/g, parameters.numSpotLightShadows )\n\t\t.replace( /NUM_POINT_LIGHT_SHADOWS/g, parameters.numPointLightShadows );\n\n}\n\nfunction replaceClippingPlaneNums( string, parameters ) {\n\n\treturn string\n\t\t.replace( /NUM_CLIPPING_PLANES/g, parameters.numClippingPlanes )\n\t\t.replace( /UNION_CLIPPING_PLANES/g, ( parameters.numClippingPlanes - parameters.numClipIntersection ) );\n\n}\n\n// Resolve Includes\n\nconst includePattern = /^[ \\t]*#include +<([\\w\\d./]+)>/gm;\n\nfunction resolveIncludes( string ) {\n\n\treturn string.replace( includePattern, includeReplacer );\n\n}\n\nfunction includeReplacer( match, include ) {\n\n\tconst string = ShaderChunk[ include ];\n\n\tif ( string === undefined ) {\n\n\t\tthrow new Error( 'Can not resolve #include <' + include + '>' );\n\n\t}\n\n\treturn resolveIncludes( string );\n\n}\n\n// Unroll Loops\n\nconst unrollLoopPattern = /#pragma unroll_loop_start\\s+for\\s*\\(\\s*int\\s+i\\s*=\\s*(\\d+)\\s*;\\s*i\\s*<\\s*(\\d+)\\s*;\\s*i\\s*\\+\\+\\s*\\)\\s*{([\\s\\S]+?)}\\s+#pragma unroll_loop_end/g;\n\nfunction unrollLoops( string ) {\n\n\treturn string.replace( unrollLoopPattern, loopReplacer );\n\n}\n\nfunction loopReplacer( match, start, end, snippet ) {\n\n\tlet string = '';\n\n\tfor ( let i = parseInt( start ); i < parseInt( end ); i ++ ) {\n\n\t\tstring += snippet\n\t\t\t.replace( /\\[\\s*i\\s*\\]/g, '[ ' + i + ' ]' )\n\t\t\t.replace( /UNROLLED_LOOP_INDEX/g, i );\n\n\t}\n\n\treturn string;\n\n}\n\n//\n\nfunction generatePrecision( parameters ) {\n\n\tlet precisionstring = 'precision ' + parameters.precision + ' float;\\nprecision ' + parameters.precision + ' int;';\n\n\tif ( parameters.precision === 'highp' ) {\n\n\t\tprecisionstring += '\\n#define HIGH_PRECISION';\n\n\t} else if ( parameters.precision === 'mediump' ) {\n\n\t\tprecisionstring += '\\n#define MEDIUM_PRECISION';\n\n\t} else if ( parameters.precision === 'lowp' ) {\n\n\t\tprecisionstring += '\\n#define LOW_PRECISION';\n\n\t}\n\n\treturn precisionstring;\n\n}\n\nfunction generateShadowMapTypeDefine( parameters ) {\n\n\tlet shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\n\n\tif ( parameters.shadowMapType === PCFShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\n\n\t} else if ( parameters.shadowMapType === PCFSoftShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\n\n\t} else if ( parameters.shadowMapType === VSMShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_VSM';\n\n\t}\n\n\treturn shadowMapTypeDefine;\n\n}\n\nfunction generateEnvMapTypeDefine( parameters ) {\n\n\tlet envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.envMapMode ) {\n\n\t\t\tcase CubeReflectionMapping:\n\t\t\tcase CubeRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\t\t\t\tbreak;\n\n\t\t\tcase CubeUVReflectionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE_UV';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapTypeDefine;\n\n}\n\nfunction generateEnvMapModeDefine( parameters ) {\n\n\tlet envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.envMapMode ) {\n\n\t\t\tcase CubeRefractionMapping:\n\n\t\t\t\tenvMapModeDefine = 'ENVMAP_MODE_REFRACTION';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapModeDefine;\n\n}\n\nfunction generateEnvMapBlendingDefine( parameters ) {\n\n\tlet envMapBlendingDefine = 'ENVMAP_BLENDING_NONE';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.combine ) {\n\n\t\t\tcase MultiplyOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\n\t\t\t\tbreak;\n\n\t\t\tcase MixOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\n\t\t\t\tbreak;\n\n\t\t\tcase AddOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapBlendingDefine;\n\n}\n\nfunction generateCubeUVSize( parameters ) {\n\n\tconst imageHeight = parameters.envMapCubeUVHeight;\n\n\tif ( imageHeight === null ) return null;\n\n\tconst maxMip = Math.log2( imageHeight ) - 2;\n\n\tconst texelHeight = 1.0 / imageHeight;\n\n\tconst texelWidth = 1.0 / ( 3 * Math.max( Math.pow( 2, maxMip ), 7 * 16 ) );\n\n\treturn { texelWidth, texelHeight, maxMip };\n\n}\n\nfunction WebGLProgram( renderer, cacheKey, parameters, bindingStates ) {\n\n\t// TODO Send this event to Three.js DevTools\n\t// console.log( 'WebGLProgram', cacheKey );\n\n\tconst gl = renderer.getContext();\n\n\tconst defines = parameters.defines;\n\n\tlet vertexShader = parameters.vertexShader;\n\tlet fragmentShader = parameters.fragmentShader;\n\n\tconst shadowMapTypeDefine = generateShadowMapTypeDefine( parameters );\n\tconst envMapTypeDefine = generateEnvMapTypeDefine( parameters );\n\tconst envMapModeDefine = generateEnvMapModeDefine( parameters );\n\tconst envMapBlendingDefine = generateEnvMapBlendingDefine( parameters );\n\tconst envMapCubeUVSize = generateCubeUVSize( parameters );\n\n\tconst customExtensions = parameters.isWebGL2 ? '' : generateExtensions( parameters );\n\n\tconst customDefines = generateDefines( defines );\n\n\tconst program = gl.createProgram();\n\n\tlet prefixVertex, prefixFragment;\n\tlet versionString = parameters.glslVersion ? '#version ' + parameters.glslVersion + '\\n' : '';\n\n\tif ( parameters.isRawShaderMaterial ) {\n\n\t\tprefixVertex = [\n\n\t\t\tcustomDefines\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tif ( prefixVertex.length > 0 ) {\n\n\t\t\tprefixVertex += '\\n';\n\n\t\t}\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\t\t\tcustomDefines\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tif ( prefixFragment.length > 0 ) {\n\n\t\t\tprefixFragment += '\\n';\n\n\t\t}\n\n\t} else {\n\n\t\tprefixVertex = [\n\n\t\t\tgeneratePrecision( parameters ),\n\n\t\t\t'#define SHADER_NAME ' + parameters.shaderName,\n\n\t\t\tcustomDefines,\n\n\t\t\tparameters.instancing ? '#define USE_INSTANCING' : '',\n\t\t\tparameters.instancingColor ? '#define USE_INSTANCING_COLOR' : '',\n\n\t\t\tparameters.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '',\n\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t( parameters.useFog && parameters.fogExp2 ) ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.objectSpaceNormalMap ) ? '#define OBJECTSPACE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.tangentSpaceNormalMap ) ? '#define TANGENTSPACE_NORMALMAP' : '',\n\n\t\t\tparameters.clearcoatMap ? '#define USE_CLEARCOATMAP' : '',\n\t\t\tparameters.clearcoatRoughnessMap ? '#define USE_CLEARCOAT_ROUGHNESSMAP' : '',\n\t\t\tparameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',\n\n\t\t\tparameters.iridescenceMap ? '#define USE_IRIDESCENCEMAP' : '',\n\t\t\tparameters.iridescenceThicknessMap ? '#define USE_IRIDESCENCE_THICKNESSMAP' : '',\n\n\t\t\tparameters.displacementMap && parameters.supportsVertexTextures ? '#define USE_DISPLACEMENTMAP' : '',\n\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.specularIntensityMap ? '#define USE_SPECULARINTENSITYMAP' : '',\n\t\t\tparameters.specularColorMap ? '#define USE_SPECULARCOLORMAP' : '',\n\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\n\t\t\tparameters.transmission ? '#define USE_TRANSMISSION' : '',\n\t\t\tparameters.transmissionMap ? '#define USE_TRANSMISSIONMAP' : '',\n\t\t\tparameters.thicknessMap ? '#define USE_THICKNESSMAP' : '',\n\n\t\t\tparameters.sheenColorMap ? '#define USE_SHEENCOLORMAP' : '',\n\t\t\tparameters.sheenRoughnessMap ? '#define USE_SHEENROUGHNESSMAP' : '',\n\n\t\t\tparameters.vertexTangents ? '#define USE_TANGENT' : '',\n\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\n\t\t\tparameters.vertexAlphas ? '#define USE_COLOR_ALPHA' : '',\n\t\t\tparameters.vertexUvs ? '#define USE_UV' : '',\n\t\t\tparameters.uvsVertexOnly ? '#define UVS_VERTEX_ONLY' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.skinning ? '#define USE_SKINNING' : '',\n\n\t\t\tparameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\n\t\t\tparameters.morphNormals && parameters.flatShading === false ? '#define USE_MORPHNORMALS' : '',\n\t\t\t( parameters.morphColors && parameters.isWebGL2 ) ? '#define USE_MORPHCOLORS' : '',\n\t\t\t( parameters.morphTargetsCount > 0 && parameters.isWebGL2 ) ? '#define MORPHTARGETS_TEXTURE' : '',\n\t\t\t( parameters.morphTargetsCount > 0 && parameters.isWebGL2 ) ? '#define MORPHTARGETS_TEXTURE_STRIDE ' + parameters.morphTextureStride : '',\n\t\t\t( parameters.morphTargetsCount > 0 && parameters.isWebGL2 ) ? '#define MORPHTARGETS_COUNT ' + parameters.morphTargetsCount : '',\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\t( parameters.logarithmicDepthBuffer && parameters.rendererExtensionFragDepth ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t'uniform mat4 modelMatrix;',\n\t\t\t'uniform mat4 modelViewMatrix;',\n\t\t\t'uniform mat4 projectionMatrix;',\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform mat3 normalMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\t\t\t'uniform bool isOrthographic;',\n\n\t\t\t'#ifdef USE_INSTANCING',\n\n\t\t\t'\tattribute mat4 instanceMatrix;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_INSTANCING_COLOR',\n\n\t\t\t'\tattribute vec3 instanceColor;',\n\n\t\t\t'#endif',\n\n\t\t\t'attribute vec3 position;',\n\t\t\t'attribute vec3 normal;',\n\t\t\t'attribute vec2 uv;',\n\n\t\t\t'#ifdef USE_TANGENT',\n\n\t\t\t'\tattribute vec4 tangent;',\n\n\t\t\t'#endif',\n\n\t\t\t'#if defined( USE_COLOR_ALPHA )',\n\n\t\t\t'\tattribute vec4 color;',\n\n\t\t\t'#elif defined( USE_COLOR )',\n\n\t\t\t'\tattribute vec3 color;',\n\n\t\t\t'#endif',\n\n\t\t\t'#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )',\n\n\t\t\t'\tattribute vec3 morphTarget0;',\n\t\t\t'\tattribute vec3 morphTarget1;',\n\t\t\t'\tattribute vec3 morphTarget2;',\n\t\t\t'\tattribute vec3 morphTarget3;',\n\n\t\t\t'\t#ifdef USE_MORPHNORMALS',\n\n\t\t\t'\t\tattribute vec3 morphNormal0;',\n\t\t\t'\t\tattribute vec3 morphNormal1;',\n\t\t\t'\t\tattribute vec3 morphNormal2;',\n\t\t\t'\t\tattribute vec3 morphNormal3;',\n\n\t\t\t'\t#else',\n\n\t\t\t'\t\tattribute vec3 morphTarget4;',\n\t\t\t'\t\tattribute vec3 morphTarget5;',\n\t\t\t'\t\tattribute vec3 morphTarget6;',\n\t\t\t'\t\tattribute vec3 morphTarget7;',\n\n\t\t\t'\t#endif',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_SKINNING',\n\n\t\t\t'\tattribute vec4 skinIndex;',\n\t\t\t'\tattribute vec4 skinWeight;',\n\n\t\t\t'#endif',\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\n\t\t\tgeneratePrecision( parameters ),\n\n\t\t\t'#define SHADER_NAME ' + parameters.shaderName,\n\n\t\t\tcustomDefines,\n\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t( parameters.useFog && parameters.fogExp2 ) ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.matcap ? '#define USE_MATCAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapTypeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapBlendingDefine : '',\n\t\t\tenvMapCubeUVSize ? '#define CUBEUV_TEXEL_WIDTH ' + envMapCubeUVSize.texelWidth : '',\n\t\t\tenvMapCubeUVSize ? '#define CUBEUV_TEXEL_HEIGHT ' + envMapCubeUVSize.texelHeight : '',\n\t\t\tenvMapCubeUVSize ? '#define CUBEUV_MAX_MIP ' + envMapCubeUVSize.maxMip + '.0' : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.objectSpaceNormalMap ) ? '#define OBJECTSPACE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.tangentSpaceNormalMap ) ? '#define TANGENTSPACE_NORMALMAP' : '',\n\n\t\t\tparameters.clearcoat ? '#define USE_CLEARCOAT' : '',\n\t\t\tparameters.clearcoatMap ? '#define USE_CLEARCOATMAP' : '',\n\t\t\tparameters.clearcoatRoughnessMap ? '#define USE_CLEARCOAT_ROUGHNESSMAP' : '',\n\t\t\tparameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',\n\n\t\t\tparameters.iridescence ? '#define USE_IRIDESCENCE' : '',\n\t\t\tparameters.iridescenceMap ? '#define USE_IRIDESCENCEMAP' : '',\n\t\t\tparameters.iridescenceThicknessMap ? '#define USE_IRIDESCENCE_THICKNESSMAP' : '',\n\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.specularIntensityMap ? '#define USE_SPECULARINTENSITYMAP' : '',\n\t\t\tparameters.specularColorMap ? '#define USE_SPECULARCOLORMAP' : '',\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\t\t\tparameters.alphaTest ? '#define USE_ALPHATEST' : '',\n\n\t\t\tparameters.sheen ? '#define USE_SHEEN' : '',\n\t\t\tparameters.sheenColorMap ? '#define USE_SHEENCOLORMAP' : '',\n\t\t\tparameters.sheenRoughnessMap ? '#define USE_SHEENROUGHNESSMAP' : '',\n\n\t\t\tparameters.transmission ? '#define USE_TRANSMISSION' : '',\n\t\t\tparameters.transmissionMap ? '#define USE_TRANSMISSIONMAP' : '',\n\t\t\tparameters.thicknessMap ? '#define USE_THICKNESSMAP' : '',\n\n\t\t\tparameters.decodeVideoTexture ? '#define DECODE_VIDEO_TEXTURE' : '',\n\n\t\t\tparameters.vertexTangents ? '#define USE_TANGENT' : '',\n\t\t\tparameters.vertexColors || parameters.instancingColor ? '#define USE_COLOR' : '',\n\t\t\tparameters.vertexAlphas ? '#define USE_COLOR_ALPHA' : '',\n\t\t\tparameters.vertexUvs ? '#define USE_UV' : '',\n\t\t\tparameters.uvsVertexOnly ? '#define UVS_VERTEX_ONLY' : '',\n\n\t\t\tparameters.gradientMap ? '#define USE_GRADIENTMAP' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.premultipliedAlpha ? '#define PREMULTIPLIED_ALPHA' : '',\n\n\t\t\tparameters.physicallyCorrectLights ? '#define PHYSICALLY_CORRECT_LIGHTS' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\t( parameters.logarithmicDepthBuffer && parameters.rendererExtensionFragDepth ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\t\t\t'uniform bool isOrthographic;',\n\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? '#define TONE_MAPPING' : '',\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? ShaderChunk[ 'tonemapping_pars_fragment' ] : '', // this code is required here because it is used by the toneMapping() function defined below\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? getToneMappingFunction( 'toneMapping', parameters.toneMapping ) : '',\n\n\t\t\tparameters.dithering ? '#define DITHERING' : '',\n\t\t\tparameters.opaque ? '#define OPAQUE' : '',\n\n\t\t\tShaderChunk[ 'encodings_pars_fragment' ], // this code is required here because it is used by the various encoding/decoding function defined below\n\t\t\tgetTexelEncodingFunction( 'linearToOutputTexel', parameters.outputEncoding ),\n\n\t\t\tparameters.useDepthPacking ? '#define DEPTH_PACKING ' + parameters.depthPacking : '',\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t}\n\n\tvertexShader = resolveIncludes( vertexShader );\n\tvertexShader = replaceLightNums( vertexShader, parameters );\n\tvertexShader = replaceClippingPlaneNums( vertexShader, parameters );\n\n\tfragmentShader = resolveIncludes( fragmentShader );\n\tfragmentShader = replaceLightNums( fragmentShader, parameters );\n\tfragmentShader = replaceClippingPlaneNums( fragmentShader, parameters );\n\n\tvertexShader = unrollLoops( vertexShader );\n\tfragmentShader = unrollLoops( fragmentShader );\n\n\tif ( parameters.isWebGL2 && parameters.isRawShaderMaterial !== true ) {\n\n\t\t// GLSL 3.0 conversion for built-in materials and ShaderMaterial\n\n\t\tversionString = '#version 300 es\\n';\n\n\t\tprefixVertex = [\n\t\t\t'precision mediump sampler2DArray;',\n\t\t\t'#define attribute in',\n\t\t\t'#define varying out',\n\t\t\t'#define texture2D texture'\n\t\t].join( '\\n' ) + '\\n' + prefixVertex;\n\n\t\tprefixFragment = [\n\t\t\t'#define varying in',\n\t\t\t( parameters.glslVersion === GLSL3 ) ? '' : 'layout(location = 0) out highp vec4 pc_fragColor;',\n\t\t\t( parameters.glslVersion === GLSL3 ) ? '' : '#define gl_FragColor pc_fragColor',\n\t\t\t'#define gl_FragDepthEXT gl_FragDepth',\n\t\t\t'#define texture2D texture',\n\t\t\t'#define textureCube texture',\n\t\t\t'#define texture2DProj textureProj',\n\t\t\t'#define texture2DLodEXT textureLod',\n\t\t\t'#define texture2DProjLodEXT textureProjLod',\n\t\t\t'#define textureCubeLodEXT textureLod',\n\t\t\t'#define texture2DGradEXT textureGrad',\n\t\t\t'#define texture2DProjGradEXT textureProjGrad',\n\t\t\t'#define textureCubeGradEXT textureGrad'\n\t\t].join( '\\n' ) + '\\n' + prefixFragment;\n\n\t}\n\n\tconst vertexGlsl = versionString + prefixVertex + vertexShader;\n\tconst fragmentGlsl = versionString + prefixFragment + fragmentShader;\n\n\t// console.log( '*VERTEX*', vertexGlsl );\n\t// console.log( '*FRAGMENT*', fragmentGlsl );\n\n\tconst glVertexShader = WebGLShader( gl, 35633, vertexGlsl );\n\tconst glFragmentShader = WebGLShader( gl, 35632, fragmentGlsl );\n\n\tgl.attachShader( program, glVertexShader );\n\tgl.attachShader( program, glFragmentShader );\n\n\t// Force a particular attribute to index 0.\n\n\tif ( parameters.index0AttributeName !== undefined ) {\n\n\t\tgl.bindAttribLocation( program, 0, parameters.index0AttributeName );\n\n\t} else if ( parameters.morphTargets === true ) {\n\n\t\t// programs with morphTargets displace position out of attribute 0\n\t\tgl.bindAttribLocation( program, 0, 'position' );\n\n\t}\n\n\tgl.linkProgram( program );\n\n\t// check for link errors\n\tif ( renderer.debug.checkShaderErrors ) {\n\n\t\tconst programLog = gl.getProgramInfoLog( program ).trim();\n\t\tconst vertexLog = gl.getShaderInfoLog( glVertexShader ).trim();\n\t\tconst fragmentLog = gl.getShaderInfoLog( glFragmentShader ).trim();\n\n\t\tlet runnable = true;\n\t\tlet haveDiagnostics = true;\n\n\t\tif ( gl.getProgramParameter( program, 35714 ) === false ) {\n\n\t\t\trunnable = false;\n\n\t\t\tconst vertexErrors = getShaderErrors( gl, glVertexShader, 'vertex' );\n\t\t\tconst fragmentErrors = getShaderErrors( gl, glFragmentShader, 'fragment' );\n\n\t\t\tconsole.error(\n\t\t\t\t'THREE.WebGLProgram: Shader Error ' + gl.getError() + ' - ' +\n\t\t\t\t'VALIDATE_STATUS ' + gl.getProgramParameter( program, 35715 ) + '\\n\\n' +\n\t\t\t\t'Program Info Log: ' + programLog + '\\n' +\n\t\t\t\tvertexErrors + '\\n' +\n\t\t\t\tfragmentErrors\n\t\t\t);\n\n\t\t} else if ( programLog !== '' ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLProgram: Program Info Log:', programLog );\n\n\t\t} else if ( vertexLog === '' || fragmentLog === '' ) {\n\n\t\t\thaveDiagnostics = false;\n\n\t\t}\n\n\t\tif ( haveDiagnostics ) {\n\n\t\t\tthis.diagnostics = {\n\n\t\t\t\trunnable: runnable,\n\n\t\t\t\tprogramLog: programLog,\n\n\t\t\t\tvertexShader: {\n\n\t\t\t\t\tlog: vertexLog,\n\t\t\t\t\tprefix: prefixVertex\n\n\t\t\t\t},\n\n\t\t\t\tfragmentShader: {\n\n\t\t\t\t\tlog: fragmentLog,\n\t\t\t\t\tprefix: prefixFragment\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}\n\n\t}\n\n\t// Clean up\n\n\t// Crashes in iOS9 and iOS10. #18402\n\t// gl.detachShader( program, glVertexShader );\n\t// gl.detachShader( program, glFragmentShader );\n\n\tgl.deleteShader( glVertexShader );\n\tgl.deleteShader( glFragmentShader );\n\n\t// set up caching for uniform locations\n\n\tlet cachedUniforms;\n\n\tthis.getUniforms = function () {\n\n\t\tif ( cachedUniforms === undefined ) {\n\n\t\t\tcachedUniforms = new WebGLUniforms( gl, program );\n\n\t\t}\n\n\t\treturn cachedUniforms;\n\n\t};\n\n\t// set up caching for attribute locations\n\n\tlet cachedAttributes;\n\n\tthis.getAttributes = function () {\n\n\t\tif ( cachedAttributes === undefined ) {\n\n\t\t\tcachedAttributes = fetchAttributeLocations( gl, program );\n\n\t\t}\n\n\t\treturn cachedAttributes;\n\n\t};\n\n\t// free resource\n\n\tthis.destroy = function () {\n\n\t\tbindingStates.releaseStatesOfProgram( this );\n\n\t\tgl.deleteProgram( program );\n\t\tthis.program = undefined;\n\n\t};\n\n\t//\n\n\tthis.name = parameters.shaderName;\n\tthis.id = programIdCount ++;\n\tthis.cacheKey = cacheKey;\n\tthis.usedTimes = 1;\n\tthis.program = program;\n\tthis.vertexShader = glVertexShader;\n\tthis.fragmentShader = glFragmentShader;\n\n\treturn this;\n\n}\n\nlet _id = 0;\n\nclass WebGLShaderCache {\n\n\tconstructor() {\n\n\t\tthis.shaderCache = new Map();\n\t\tthis.materialCache = new Map();\n\n\t}\n\n\tupdate( material ) {\n\n\t\tconst vertexShader = material.vertexShader;\n\t\tconst fragmentShader = material.fragmentShader;\n\n\t\tconst vertexShaderStage = this._getShaderStage( vertexShader );\n\t\tconst fragmentShaderStage = this._getShaderStage( fragmentShader );\n\n\t\tconst materialShaders = this._getShaderCacheForMaterial( material );\n\n\t\tif ( materialShaders.has( vertexShaderStage ) === false ) {\n\n\t\t\tmaterialShaders.add( vertexShaderStage );\n\t\t\tvertexShaderStage.usedTimes ++;\n\n\t\t}\n\n\t\tif ( materialShaders.has( fragmentShaderStage ) === false ) {\n\n\t\t\tmaterialShaders.add( fragmentShaderStage );\n\t\t\tfragmentShaderStage.usedTimes ++;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tremove( material ) {\n\n\t\tconst materialShaders = this.materialCache.get( material );\n\n\t\tfor ( const shaderStage of materialShaders ) {\n\n\t\t\tshaderStage.usedTimes --;\n\n\t\t\tif ( shaderStage.usedTimes === 0 ) this.shaderCache.delete( shaderStage.code );\n\n\t\t}\n\n\t\tthis.materialCache.delete( material );\n\n\t\treturn this;\n\n\t}\n\n\tgetVertexShaderID( material ) {\n\n\t\treturn this._getShaderStage( material.vertexShader ).id;\n\n\t}\n\n\tgetFragmentShaderID( material ) {\n\n\t\treturn this._getShaderStage( material.fragmentShader ).id;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.shaderCache.clear();\n\t\tthis.materialCache.clear();\n\n\t}\n\n\t_getShaderCacheForMaterial( material ) {\n\n\t\tconst cache = this.materialCache;\n\t\tlet set = cache.get( material );\n\n\t\tif ( set === undefined ) {\n\n\t\t\tset = new Set();\n\t\t\tcache.set( material, set );\n\n\t\t}\n\n\t\treturn set;\n\n\t}\n\n\t_getShaderStage( code ) {\n\n\t\tconst cache = this.shaderCache;\n\t\tlet stage = cache.get( code );\n\n\t\tif ( stage === undefined ) {\n\n\t\t\tstage = new WebGLShaderStage( code );\n\t\t\tcache.set( code, stage );\n\n\t\t}\n\n\t\treturn stage;\n\n\t}\n\n}\n\nclass WebGLShaderStage {\n\n\tconstructor( code ) {\n\n\t\tthis.id = _id ++;\n\n\t\tthis.code = code;\n\t\tthis.usedTimes = 0;\n\n\t}\n\n}\n\nfunction WebGLPrograms( renderer, cubemaps, cubeuvmaps, extensions, capabilities, bindingStates, clipping ) {\n\n\tconst _programLayers = new Layers();\n\tconst _customShaders = new WebGLShaderCache();\n\tconst programs = [];\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\tconst logarithmicDepthBuffer = capabilities.logarithmicDepthBuffer;\n\tconst vertexTextures = capabilities.vertexTextures;\n\tlet precision = capabilities.precision;\n\n\tconst shaderIDs = {\n\t\tMeshDepthMaterial: 'depth',\n\t\tMeshDistanceMaterial: 'distanceRGBA',\n\t\tMeshNormalMaterial: 'normal',\n\t\tMeshBasicMaterial: 'basic',\n\t\tMeshLambertMaterial: 'lambert',\n\t\tMeshPhongMaterial: 'phong',\n\t\tMeshToonMaterial: 'toon',\n\t\tMeshStandardMaterial: 'physical',\n\t\tMeshPhysicalMaterial: 'physical',\n\t\tMeshMatcapMaterial: 'matcap',\n\t\tLineBasicMaterial: 'basic',\n\t\tLineDashedMaterial: 'dashed',\n\t\tPointsMaterial: 'points',\n\t\tShadowMaterial: 'shadow',\n\t\tSpriteMaterial: 'sprite'\n\t};\n\n\tfunction getParameters( material, lights, shadows, scene, object ) {\n\n\t\tconst fog = scene.fog;\n\t\tconst geometry = object.geometry;\n\t\tconst environment = material.isMeshStandardMaterial ? scene.environment : null;\n\n\t\tconst envMap = ( material.isMeshStandardMaterial ? cubeuvmaps : cubemaps ).get( material.envMap || environment );\n\t\tconst envMapCubeUVHeight = ( !! envMap ) && ( envMap.mapping === CubeUVReflectionMapping ) ? envMap.image.height : null;\n\n\t\tconst shaderID = shaderIDs[ material.type ];\n\n\t\t// heuristics to create shader parameters according to lights in the scene\n\t\t// (not to blow over maxLights budget)\n\n\t\tif ( material.precision !== null ) {\n\n\t\t\tprecision = capabilities.getMaxPrecision( material.precision );\n\n\t\t\tif ( precision !== material.precision ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram.getParameters:', material.precision, 'not supported, using', precision, 'instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tconst morphAttribute = geometry.morphAttributes.position || geometry.morphAttributes.normal || geometry.morphAttributes.color;\n\t\tconst morphTargetsCount = ( morphAttribute !== undefined ) ? morphAttribute.length : 0;\n\n\t\tlet morphTextureStride = 0;\n\n\t\tif ( geometry.morphAttributes.position !== undefined ) morphTextureStride = 1;\n\t\tif ( geometry.morphAttributes.normal !== undefined ) morphTextureStride = 2;\n\t\tif ( geometry.morphAttributes.color !== undefined ) morphTextureStride = 3;\n\n\t\t//\n\n\t\tlet vertexShader, fragmentShader;\n\t\tlet customVertexShaderID, customFragmentShaderID;\n\n\t\tif ( shaderID ) {\n\n\t\t\tconst shader = ShaderLib[ shaderID ];\n\n\t\t\tvertexShader = shader.vertexShader;\n\t\t\tfragmentShader = shader.fragmentShader;\n\n\t\t} else {\n\n\t\t\tvertexShader = material.vertexShader;\n\t\t\tfragmentShader = material.fragmentShader;\n\n\t\t\t_customShaders.update( material );\n\n\t\t\tcustomVertexShaderID = _customShaders.getVertexShaderID( material );\n\t\t\tcustomFragmentShaderID = _customShaders.getFragmentShaderID( material );\n\n\t\t}\n\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\tconst useAlphaTest = material.alphaTest > 0;\n\t\tconst useClearcoat = material.clearcoat > 0;\n\t\tconst useIridescence = material.iridescence > 0;\n\n\t\tconst parameters = {\n\n\t\t\tisWebGL2: isWebGL2,\n\n\t\t\tshaderID: shaderID,\n\t\t\tshaderName: material.type,\n\n\t\t\tvertexShader: vertexShader,\n\t\t\tfragmentShader: fragmentShader,\n\t\t\tdefines: material.defines,\n\n\t\t\tcustomVertexShaderID: customVertexShaderID,\n\t\t\tcustomFragmentShaderID: customFragmentShaderID,\n\n\t\t\tisRawShaderMaterial: material.isRawShaderMaterial === true,\n\t\t\tglslVersion: material.glslVersion,\n\n\t\t\tprecision: precision,\n\n\t\t\tinstancing: object.isInstancedMesh === true,\n\t\t\tinstancingColor: object.isInstancedMesh === true && object.instanceColor !== null,\n\n\t\t\tsupportsVertexTextures: vertexTextures,\n\t\t\toutputEncoding: ( currentRenderTarget === null ) ? renderer.outputEncoding : ( currentRenderTarget.isXRRenderTarget === true ? currentRenderTarget.texture.encoding : LinearEncoding ),\n\t\t\tmap: !! material.map,\n\t\t\tmatcap: !! material.matcap,\n\t\t\tenvMap: !! envMap,\n\t\t\tenvMapMode: envMap && envMap.mapping,\n\t\t\tenvMapCubeUVHeight: envMapCubeUVHeight,\n\t\t\tlightMap: !! material.lightMap,\n\t\t\taoMap: !! material.aoMap,\n\t\t\temissiveMap: !! material.emissiveMap,\n\t\t\tbumpMap: !! material.bumpMap,\n\t\t\tnormalMap: !! material.normalMap,\n\t\t\tobjectSpaceNormalMap: material.normalMapType === ObjectSpaceNormalMap,\n\t\t\ttangentSpaceNormalMap: material.normalMapType === TangentSpaceNormalMap,\n\n\t\t\tdecodeVideoTexture: !! material.map && ( material.map.isVideoTexture === true ) && ( material.map.encoding === sRGBEncoding ),\n\n\t\t\tclearcoat: useClearcoat,\n\t\t\tclearcoatMap: useClearcoat && !! material.clearcoatMap,\n\t\t\tclearcoatRoughnessMap: useClearcoat && !! material.clearcoatRoughnessMap,\n\t\t\tclearcoatNormalMap: useClearcoat && !! material.clearcoatNormalMap,\n\n\t\t\tiridescence: useIridescence,\n\t\t\tiridescenceMap: useIridescence && !! material.iridescenceMap,\n\t\t\tiridescenceThicknessMap: useIridescence && !! material.iridescenceThicknessMap,\n\n\t\t\tdisplacementMap: !! material.displacementMap,\n\t\t\troughnessMap: !! material.roughnessMap,\n\t\t\tmetalnessMap: !! material.metalnessMap,\n\t\t\tspecularMap: !! material.specularMap,\n\t\t\tspecularIntensityMap: !! material.specularIntensityMap,\n\t\t\tspecularColorMap: !! material.specularColorMap,\n\n\t\t\topaque: material.transparent === false && material.blending === NormalBlending,\n\n\t\t\talphaMap: !! material.alphaMap,\n\t\t\talphaTest: useAlphaTest,\n\n\t\t\tgradientMap: !! material.gradientMap,\n\n\t\t\tsheen: material.sheen > 0,\n\t\t\tsheenColorMap: !! material.sheenColorMap,\n\t\t\tsheenRoughnessMap: !! material.sheenRoughnessMap,\n\n\t\t\ttransmission: material.transmission > 0,\n\t\t\ttransmissionMap: !! material.transmissionMap,\n\t\t\tthicknessMap: !! material.thicknessMap,\n\n\t\t\tcombine: material.combine,\n\n\t\t\tvertexTangents: ( !! material.normalMap && !! geometry.attributes.tangent ),\n\t\t\tvertexColors: material.vertexColors,\n\t\t\tvertexAlphas: material.vertexColors === true && !! geometry.attributes.color && geometry.attributes.color.itemSize === 4,\n\t\t\tvertexUvs: !! material.map || !! material.bumpMap || !! material.normalMap || !! material.specularMap || !! material.alphaMap || !! material.emissiveMap || !! material.roughnessMap || !! material.metalnessMap || !! material.clearcoatMap || !! material.clearcoatRoughnessMap || !! material.clearcoatNormalMap || !! material.iridescenceMap || !! material.iridescenceThicknessMap || !! material.displacementMap || !! material.transmissionMap || !! material.thicknessMap || !! material.specularIntensityMap || !! material.specularColorMap || !! material.sheenColorMap || !! material.sheenRoughnessMap,\n\t\t\tuvsVertexOnly: ! ( !! material.map || !! material.bumpMap || !! material.normalMap || !! material.specularMap || !! material.alphaMap || !! material.emissiveMap || !! material.roughnessMap || !! material.metalnessMap || !! material.clearcoatNormalMap || !! material.iridescenceMap || !! material.iridescenceThicknessMap || material.transmission > 0 || !! material.transmissionMap || !! material.thicknessMap || !! material.specularIntensityMap || !! material.specularColorMap || material.sheen > 0 || !! material.sheenColorMap || !! material.sheenRoughnessMap ) && !! material.displacementMap,\n\n\t\t\tfog: !! fog,\n\t\t\tuseFog: material.fog === true,\n\t\t\tfogExp2: ( fog && fog.isFogExp2 ),\n\n\t\t\tflatShading: !! material.flatShading,\n\n\t\t\tsizeAttenuation: material.sizeAttenuation,\n\t\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\t\tskinning: object.isSkinnedMesh === true,\n\n\t\t\tmorphTargets: geometry.morphAttributes.position !== undefined,\n\t\t\tmorphNormals: geometry.morphAttributes.normal !== undefined,\n\t\t\tmorphColors: geometry.morphAttributes.color !== undefined,\n\t\t\tmorphTargetsCount: morphTargetsCount,\n\t\t\tmorphTextureStride: morphTextureStride,\n\n\t\t\tnumDirLights: lights.directional.length,\n\t\t\tnumPointLights: lights.point.length,\n\t\t\tnumSpotLights: lights.spot.length,\n\t\t\tnumSpotLightMaps: lights.spotLightMap.length,\n\t\t\tnumRectAreaLights: lights.rectArea.length,\n\t\t\tnumHemiLights: lights.hemi.length,\n\n\t\t\tnumDirLightShadows: lights.directionalShadowMap.length,\n\t\t\tnumPointLightShadows: lights.pointShadowMap.length,\n\t\t\tnumSpotLightShadows: lights.spotShadowMap.length,\n\t\t\tnumSpotLightShadowsWithMaps: lights.numSpotLightShadowsWithMaps,\n\n\t\t\tnumClippingPlanes: clipping.numPlanes,\n\t\t\tnumClipIntersection: clipping.numIntersection,\n\n\t\t\tdithering: material.dithering,\n\n\t\t\tshadowMapEnabled: renderer.shadowMap.enabled && shadows.length > 0,\n\t\t\tshadowMapType: renderer.shadowMap.type,\n\n\t\t\ttoneMapping: material.toneMapped ? renderer.toneMapping : NoToneMapping,\n\t\t\tphysicallyCorrectLights: renderer.physicallyCorrectLights,\n\n\t\t\tpremultipliedAlpha: material.premultipliedAlpha,\n\n\t\t\tdoubleSided: material.side === DoubleSide,\n\t\t\tflipSided: material.side === BackSide,\n\n\t\t\tuseDepthPacking: !! material.depthPacking,\n\t\t\tdepthPacking: material.depthPacking || 0,\n\n\t\t\tindex0AttributeName: material.index0AttributeName,\n\n\t\t\textensionDerivatives: material.extensions && material.extensions.derivatives,\n\t\t\textensionFragDepth: material.extensions && material.extensions.fragDepth,\n\t\t\textensionDrawBuffers: material.extensions && material.extensions.drawBuffers,\n\t\t\textensionShaderTextureLOD: material.extensions && material.extensions.shaderTextureLOD,\n\n\t\t\trendererExtensionFragDepth: isWebGL2 || extensions.has( 'EXT_frag_depth' ),\n\t\t\trendererExtensionDrawBuffers: isWebGL2 || extensions.has( 'WEBGL_draw_buffers' ),\n\t\t\trendererExtensionShaderTextureLod: isWebGL2 || extensions.has( 'EXT_shader_texture_lod' ),\n\n\t\t\tcustomProgramCacheKey: material.customProgramCacheKey()\n\n\t\t};\n\n\t\treturn parameters;\n\n\t}\n\n\tfunction getProgramCacheKey( parameters ) {\n\n\t\tconst array = [];\n\n\t\tif ( parameters.shaderID ) {\n\n\t\t\tarray.push( parameters.shaderID );\n\n\t\t} else {\n\n\t\t\tarray.push( parameters.customVertexShaderID );\n\t\t\tarray.push( parameters.customFragmentShaderID );\n\n\t\t}\n\n\t\tif ( parameters.defines !== undefined ) {\n\n\t\t\tfor ( const name in parameters.defines ) {\n\n\t\t\t\tarray.push( name );\n\t\t\t\tarray.push( parameters.defines[ name ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( parameters.isRawShaderMaterial === false ) {\n\n\t\t\tgetProgramCacheKeyParameters( array, parameters );\n\t\t\tgetProgramCacheKeyBooleans( array, parameters );\n\t\t\tarray.push( renderer.outputEncoding );\n\n\t\t}\n\n\t\tarray.push( parameters.customProgramCacheKey );\n\n\t\treturn array.join();\n\n\t}\n\n\tfunction getProgramCacheKeyParameters( array, parameters ) {\n\n\t\tarray.push( parameters.precision );\n\t\tarray.push( parameters.outputEncoding );\n\t\tarray.push( parameters.envMapMode );\n\t\tarray.push( parameters.envMapCubeUVHeight );\n\t\tarray.push( parameters.combine );\n\t\tarray.push( parameters.vertexUvs );\n\t\tarray.push( parameters.fogExp2 );\n\t\tarray.push( parameters.sizeAttenuation );\n\t\tarray.push( parameters.morphTargetsCount );\n\t\tarray.push( parameters.morphAttributeCount );\n\t\tarray.push( parameters.numDirLights );\n\t\tarray.push( parameters.numPointLights );\n\t\tarray.push( parameters.numSpotLights );\n\t\tarray.push( parameters.numSpotLightMaps );\n\t\tarray.push( parameters.numHemiLights );\n\t\tarray.push( parameters.numRectAreaLights );\n\t\tarray.push( parameters.numDirLightShadows );\n\t\tarray.push( parameters.numPointLightShadows );\n\t\tarray.push( parameters.numSpotLightShadows );\n\t\tarray.push( parameters.numSpotLightShadowsWithMaps );\n\t\tarray.push( parameters.shadowMapType );\n\t\tarray.push( parameters.toneMapping );\n\t\tarray.push( parameters.numClippingPlanes );\n\t\tarray.push( parameters.numClipIntersection );\n\t\tarray.push( parameters.depthPacking );\n\n\t}\n\n\tfunction getProgramCacheKeyBooleans( array, parameters ) {\n\n\t\t_programLayers.disableAll();\n\n\t\tif ( parameters.isWebGL2 )\n\t\t\t_programLayers.enable( 0 );\n\t\tif ( parameters.supportsVertexTextures )\n\t\t\t_programLayers.enable( 1 );\n\t\tif ( parameters.instancing )\n\t\t\t_programLayers.enable( 2 );\n\t\tif ( parameters.instancingColor )\n\t\t\t_programLayers.enable( 3 );\n\t\tif ( parameters.map )\n\t\t\t_programLayers.enable( 4 );\n\t\tif ( parameters.matcap )\n\t\t\t_programLayers.enable( 5 );\n\t\tif ( parameters.envMap )\n\t\t\t_programLayers.enable( 6 );\n\t\tif ( parameters.lightMap )\n\t\t\t_programLayers.enable( 7 );\n\t\tif ( parameters.aoMap )\n\t\t\t_programLayers.enable( 8 );\n\t\tif ( parameters.emissiveMap )\n\t\t\t_programLayers.enable( 9 );\n\t\tif ( parameters.bumpMap )\n\t\t\t_programLayers.enable( 10 );\n\t\tif ( parameters.normalMap )\n\t\t\t_programLayers.enable( 11 );\n\t\tif ( parameters.objectSpaceNormalMap )\n\t\t\t_programLayers.enable( 12 );\n\t\tif ( parameters.tangentSpaceNormalMap )\n\t\t\t_programLayers.enable( 13 );\n\t\tif ( parameters.clearcoat )\n\t\t\t_programLayers.enable( 14 );\n\t\tif ( parameters.clearcoatMap )\n\t\t\t_programLayers.enable( 15 );\n\t\tif ( parameters.clearcoatRoughnessMap )\n\t\t\t_programLayers.enable( 16 );\n\t\tif ( parameters.clearcoatNormalMap )\n\t\t\t_programLayers.enable( 17 );\n\t\tif ( parameters.iridescence )\n\t\t\t_programLayers.enable( 18 );\n\t\tif ( parameters.iridescenceMap )\n\t\t\t_programLayers.enable( 19 );\n\t\tif ( parameters.iridescenceThicknessMap )\n\t\t\t_programLayers.enable( 20 );\n\t\tif ( parameters.displacementMap )\n\t\t\t_programLayers.enable( 21 );\n\t\tif ( parameters.specularMap )\n\t\t\t_programLayers.enable( 22 );\n\t\tif ( parameters.roughnessMap )\n\t\t\t_programLayers.enable( 23 );\n\t\tif ( parameters.metalnessMap )\n\t\t\t_programLayers.enable( 24 );\n\t\tif ( parameters.gradientMap )\n\t\t\t_programLayers.enable( 25 );\n\t\tif ( parameters.alphaMap )\n\t\t\t_programLayers.enable( 26 );\n\t\tif ( parameters.alphaTest )\n\t\t\t_programLayers.enable( 27 );\n\t\tif ( parameters.vertexColors )\n\t\t\t_programLayers.enable( 28 );\n\t\tif ( parameters.vertexAlphas )\n\t\t\t_programLayers.enable( 29 );\n\t\tif ( parameters.vertexUvs )\n\t\t\t_programLayers.enable( 30 );\n\t\tif ( parameters.vertexTangents )\n\t\t\t_programLayers.enable( 31 );\n\t\tif ( parameters.uvsVertexOnly )\n\t\t\t_programLayers.enable( 32 );\n\n\t\tarray.push( _programLayers.mask );\n\t\t_programLayers.disableAll();\n\n\t\tif ( parameters.fog )\n\t\t\t_programLayers.enable( 0 );\n\t\tif ( parameters.useFog )\n\t\t\t_programLayers.enable( 1 );\n\t\tif ( parameters.flatShading )\n\t\t\t_programLayers.enable( 2 );\n\t\tif ( parameters.logarithmicDepthBuffer )\n\t\t\t_programLayers.enable( 3 );\n\t\tif ( parameters.skinning )\n\t\t\t_programLayers.enable( 4 );\n\t\tif ( parameters.morphTargets )\n\t\t\t_programLayers.enable( 5 );\n\t\tif ( parameters.morphNormals )\n\t\t\t_programLayers.enable( 6 );\n\t\tif ( parameters.morphColors )\n\t\t\t_programLayers.enable( 7 );\n\t\tif ( parameters.premultipliedAlpha )\n\t\t\t_programLayers.enable( 8 );\n\t\tif ( parameters.shadowMapEnabled )\n\t\t\t_programLayers.enable( 9 );\n\t\tif ( parameters.physicallyCorrectLights )\n\t\t\t_programLayers.enable( 10 );\n\t\tif ( parameters.doubleSided )\n\t\t\t_programLayers.enable( 11 );\n\t\tif ( parameters.flipSided )\n\t\t\t_programLayers.enable( 12 );\n\t\tif ( parameters.useDepthPacking )\n\t\t\t_programLayers.enable( 13 );\n\t\tif ( parameters.dithering )\n\t\t\t_programLayers.enable( 14 );\n\t\tif ( parameters.specularIntensityMap )\n\t\t\t_programLayers.enable( 15 );\n\t\tif ( parameters.specularColorMap )\n\t\t\t_programLayers.enable( 16 );\n\t\tif ( parameters.transmission )\n\t\t\t_programLayers.enable( 17 );\n\t\tif ( parameters.transmissionMap )\n\t\t\t_programLayers.enable( 18 );\n\t\tif ( parameters.thicknessMap )\n\t\t\t_programLayers.enable( 19 );\n\t\tif ( parameters.sheen )\n\t\t\t_programLayers.enable( 20 );\n\t\tif ( parameters.sheenColorMap )\n\t\t\t_programLayers.enable( 21 );\n\t\tif ( parameters.sheenRoughnessMap )\n\t\t\t_programLayers.enable( 22 );\n\t\tif ( parameters.decodeVideoTexture )\n\t\t\t_programLayers.enable( 23 );\n\t\tif ( parameters.opaque )\n\t\t\t_programLayers.enable( 24 );\n\n\t\tarray.push( _programLayers.mask );\n\n\t}\n\n\tfunction getUniforms( material ) {\n\n\t\tconst shaderID = shaderIDs[ material.type ];\n\t\tlet uniforms;\n\n\t\tif ( shaderID ) {\n\n\t\t\tconst shader = ShaderLib[ shaderID ];\n\t\t\tuniforms = UniformsUtils.clone( shader.uniforms );\n\n\t\t} else {\n\n\t\t\tuniforms = material.uniforms;\n\n\t\t}\n\n\t\treturn uniforms;\n\n\t}\n\n\tfunction acquireProgram( parameters, cacheKey ) {\n\n\t\tlet program;\n\n\t\t// Check if code has been already compiled\n\t\tfor ( let p = 0, pl = programs.length; p < pl; p ++ ) {\n\n\t\t\tconst preexistingProgram = programs[ p ];\n\n\t\t\tif ( preexistingProgram.cacheKey === cacheKey ) {\n\n\t\t\t\tprogram = preexistingProgram;\n\t\t\t\t++ program.usedTimes;\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( program === undefined ) {\n\n\t\t\tprogram = new WebGLProgram( renderer, cacheKey, parameters, bindingStates );\n\t\t\tprograms.push( program );\n\n\t\t}\n\n\t\treturn program;\n\n\t}\n\n\tfunction releaseProgram( program ) {\n\n\t\tif ( -- program.usedTimes === 0 ) {\n\n\t\t\t// Remove from unordered set\n\t\t\tconst i = programs.indexOf( program );\n\t\t\tprograms[ i ] = programs[ programs.length - 1 ];\n\t\t\tprograms.pop();\n\n\t\t\t// Free WebGL resources\n\t\t\tprogram.destroy();\n\n\t\t}\n\n\t}\n\n\tfunction releaseShaderCache( material ) {\n\n\t\t_customShaders.remove( material );\n\n\t}\n\n\tfunction dispose() {\n\n\t\t_customShaders.dispose();\n\n\t}\n\n\treturn {\n\t\tgetParameters: getParameters,\n\t\tgetProgramCacheKey: getProgramCacheKey,\n\t\tgetUniforms: getUniforms,\n\t\tacquireProgram: acquireProgram,\n\t\treleaseProgram: releaseProgram,\n\t\treleaseShaderCache: releaseShaderCache,\n\t\t// Exposed for resource monitoring & error feedback via renderer.info:\n\t\tprograms: programs,\n\t\tdispose: dispose\n\t};\n\n}\n\nfunction WebGLProperties() {\n\n\tlet properties = new WeakMap();\n\n\tfunction get( object ) {\n\n\t\tlet map = properties.get( object );\n\n\t\tif ( map === undefined ) {\n\n\t\t\tmap = {};\n\t\t\tproperties.set( object, map );\n\n\t\t}\n\n\t\treturn map;\n\n\t}\n\n\tfunction remove( object ) {\n\n\t\tproperties.delete( object );\n\n\t}\n\n\tfunction update( object, key, value ) {\n\n\t\tproperties.get( object )[ key ] = value;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tproperties = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tremove: remove,\n\t\tupdate: update,\n\t\tdispose: dispose\n\t};\n\n}\n\nfunction painterSortStable( a, b ) {\n\n\tif ( a.groupOrder !== b.groupOrder ) {\n\n\t\treturn a.groupOrder - b.groupOrder;\n\n\t} else if ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} else if ( a.material.id !== b.material.id ) {\n\n\t\treturn a.material.id - b.material.id;\n\n\t} else if ( a.z !== b.z ) {\n\n\t\treturn a.z - b.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\nfunction reversePainterSortStable( a, b ) {\n\n\tif ( a.groupOrder !== b.groupOrder ) {\n\n\t\treturn a.groupOrder - b.groupOrder;\n\n\t} else if ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} else if ( a.z !== b.z ) {\n\n\t\treturn b.z - a.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\n\nfunction WebGLRenderList() {\n\n\tconst renderItems = [];\n\tlet renderItemsIndex = 0;\n\n\tconst opaque = [];\n\tconst transmissive = [];\n\tconst transparent = [];\n\n\tfunction init() {\n\n\t\trenderItemsIndex = 0;\n\n\t\topaque.length = 0;\n\t\ttransmissive.length = 0;\n\t\ttransparent.length = 0;\n\n\t}\n\n\tfunction getNextRenderItem( object, geometry, material, groupOrder, z, group ) {\n\n\t\tlet renderItem = renderItems[ renderItemsIndex ];\n\n\t\tif ( renderItem === undefined ) {\n\n\t\t\trenderItem = {\n\t\t\t\tid: object.id,\n\t\t\t\tobject: object,\n\t\t\t\tgeometry: geometry,\n\t\t\t\tmaterial: material,\n\t\t\t\tgroupOrder: groupOrder,\n\t\t\t\trenderOrder: object.renderOrder,\n\t\t\t\tz: z,\n\t\t\t\tgroup: group\n\t\t\t};\n\n\t\t\trenderItems[ renderItemsIndex ] = renderItem;\n\n\t\t} else {\n\n\t\t\trenderItem.id = object.id;\n\t\t\trenderItem.object = object;\n\t\t\trenderItem.geometry = geometry;\n\t\t\trenderItem.material = material;\n\t\t\trenderItem.groupOrder = groupOrder;\n\t\t\trenderItem.renderOrder = object.renderOrder;\n\t\t\trenderItem.z = z;\n\t\t\trenderItem.group = group;\n\n\t\t}\n\n\t\trenderItemsIndex ++;\n\n\t\treturn renderItem;\n\n\t}\n\n\tfunction push( object, geometry, material, groupOrder, z, group ) {\n\n\t\tconst renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\n\n\t\tif ( material.transmission > 0.0 ) {\n\n\t\t\ttransmissive.push( renderItem );\n\n\t\t} else if ( material.transparent === true ) {\n\n\t\t\ttransparent.push( renderItem );\n\n\t\t} else {\n\n\t\t\topaque.push( renderItem );\n\n\t\t}\n\n\t}\n\n\tfunction unshift( object, geometry, material, groupOrder, z, group ) {\n\n\t\tconst renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\n\n\t\tif ( material.transmission > 0.0 ) {\n\n\t\t\ttransmissive.unshift( renderItem );\n\n\t\t} else if ( material.transparent === true ) {\n\n\t\t\ttransparent.unshift( renderItem );\n\n\t\t} else {\n\n\t\t\topaque.unshift( renderItem );\n\n\t\t}\n\n\t}\n\n\tfunction sort( customOpaqueSort, customTransparentSort ) {\n\n\t\tif ( opaque.length > 1 ) opaque.sort( customOpaqueSort || painterSortStable );\n\t\tif ( transmissive.length > 1 ) transmissive.sort( customTransparentSort || reversePainterSortStable );\n\t\tif ( transparent.length > 1 ) transparent.sort( customTransparentSort || reversePainterSortStable );\n\n\t}\n\n\tfunction finish() {\n\n\t\t// Clear references from inactive renderItems in the list\n\n\t\tfor ( let i = renderItemsIndex, il = renderItems.length; i < il; i ++ ) {\n\n\t\t\tconst renderItem = renderItems[ i ];\n\n\t\t\tif ( renderItem.id === null ) break;\n\n\t\t\trenderItem.id = null;\n\t\t\trenderItem.object = null;\n\t\t\trenderItem.geometry = null;\n\t\t\trenderItem.material = null;\n\t\t\trenderItem.group = null;\n\n\t\t}\n\n\t}\n\n\treturn {\n\n\t\topaque: opaque,\n\t\ttransmissive: transmissive,\n\t\ttransparent: transparent,\n\n\t\tinit: init,\n\t\tpush: push,\n\t\tunshift: unshift,\n\t\tfinish: finish,\n\n\t\tsort: sort\n\t};\n\n}\n\nfunction WebGLRenderLists() {\n\n\tlet lists = new WeakMap();\n\n\tfunction get( scene, renderCallDepth ) {\n\n\t\tconst listArray = lists.get( scene );\n\t\tlet list;\n\n\t\tif ( listArray === undefined ) {\n\n\t\t\tlist = new WebGLRenderList();\n\t\t\tlists.set( scene, [ list ] );\n\n\t\t} else {\n\n\t\t\tif ( renderCallDepth >= listArray.length ) {\n\n\t\t\t\tlist = new WebGLRenderList();\n\t\t\t\tlistArray.push( list );\n\n\t\t\t} else {\n\n\t\t\t\tlist = listArray[ renderCallDepth ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn list;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tlists = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\nfunction UniformsCache() {\n\n\tconst lights = {};\n\n\treturn {\n\n\t\tget: function ( light ) {\n\n\t\t\tif ( lights[ light.id ] !== undefined ) {\n\n\t\t\t\treturn lights[ light.id ];\n\n\t\t\t}\n\n\t\t\tlet uniforms;\n\n\t\t\tswitch ( light.type ) {\n\n\t\t\t\tcase 'DirectionalLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpotLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tconeCos: 0,\n\t\t\t\t\t\tpenumbraCos: 0,\n\t\t\t\t\t\tdecay: 0\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tdecay: 0\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'HemisphereLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tskyColor: new Color(),\n\t\t\t\t\t\tgroundColor: new Color()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'RectAreaLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\thalfWidth: new Vector3(),\n\t\t\t\t\t\thalfHeight: new Vector3()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tlights[ light.id ] = uniforms;\n\n\t\t\treturn uniforms;\n\n\t\t}\n\n\t};\n\n}\n\nfunction ShadowUniformsCache() {\n\n\tconst lights = {};\n\n\treturn {\n\n\t\tget: function ( light ) {\n\n\t\t\tif ( lights[ light.id ] !== undefined ) {\n\n\t\t\t\treturn lights[ light.id ];\n\n\t\t\t}\n\n\t\t\tlet uniforms;\n\n\t\t\tswitch ( light.type ) {\n\n\t\t\t\tcase 'DirectionalLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowNormalBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpotLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowNormalBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowNormalBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2(),\n\t\t\t\t\t\tshadowCameraNear: 1,\n\t\t\t\t\t\tshadowCameraFar: 1000\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\t// TODO (abelnation): set RectAreaLight shadow uniforms\n\n\t\t\t}\n\n\t\t\tlights[ light.id ] = uniforms;\n\n\t\t\treturn uniforms;\n\n\t\t}\n\n\t};\n\n}\n\n\n\nlet nextVersion = 0;\n\nfunction shadowCastingAndTexturingLightsFirst( lightA, lightB ) {\n\n\treturn ( lightB.castShadow ? 2 : 0 ) - ( lightA.castShadow ? 2 : 0 ) + ( lightB.map ? 1 : 0 ) - ( lightA.map ? 1 : 0 );\n\n}\n\nfunction WebGLLights( extensions, capabilities ) {\n\n\tconst cache = new UniformsCache();\n\n\tconst shadowCache = ShadowUniformsCache();\n\n\tconst state = {\n\n\t\tversion: 0,\n\n\t\thash: {\n\t\t\tdirectionalLength: - 1,\n\t\t\tpointLength: - 1,\n\t\t\tspotLength: - 1,\n\t\t\trectAreaLength: - 1,\n\t\t\themiLength: - 1,\n\n\t\t\tnumDirectionalShadows: - 1,\n\t\t\tnumPointShadows: - 1,\n\t\t\tnumSpotShadows: - 1,\n\t\t\tnumSpotMaps: - 1\n\t\t},\n\n\t\tambient: [ 0, 0, 0 ],\n\t\tprobe: [],\n\t\tdirectional: [],\n\t\tdirectionalShadow: [],\n\t\tdirectionalShadowMap: [],\n\t\tdirectionalShadowMatrix: [],\n\t\tspot: [],\n\t\tspotLightMap: [],\n\t\tspotShadow: [],\n\t\tspotShadowMap: [],\n\t\tspotLightMatrix: [],\n\t\trectArea: [],\n\t\trectAreaLTC1: null,\n\t\trectAreaLTC2: null,\n\t\tpoint: [],\n\t\tpointShadow: [],\n\t\tpointShadowMap: [],\n\t\tpointShadowMatrix: [],\n\t\themi: [],\n\t\tnumSpotLightShadowsWithMaps: 0\n\n\t};\n\n\tfor ( let i = 0; i < 9; i ++ ) state.probe.push( new Vector3() );\n\n\tconst vector3 = new Vector3();\n\tconst matrix4 = new Matrix4();\n\tconst matrix42 = new Matrix4();\n\n\tfunction setup( lights, physicallyCorrectLights ) {\n\n\t\tlet r = 0, g = 0, b = 0;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) state.probe[ i ].set( 0, 0, 0 );\n\n\t\tlet directionalLength = 0;\n\t\tlet pointLength = 0;\n\t\tlet spotLength = 0;\n\t\tlet rectAreaLength = 0;\n\t\tlet hemiLength = 0;\n\n\t\tlet numDirectionalShadows = 0;\n\t\tlet numPointShadows = 0;\n\t\tlet numSpotShadows = 0;\n\t\tlet numSpotMaps = 0;\n\t\tlet numSpotShadowsWithMaps = 0;\n\n\t\t// ordering : [shadow casting + map texturing, map texturing, shadow casting, none ]\n\t\tlights.sort( shadowCastingAndTexturingLightsFirst );\n\n\t\t// artist-friendly light intensity scaling factor\n\t\tconst scaleFactor = ( physicallyCorrectLights !== true ) ? Math.PI : 1;\n\n\t\tfor ( let i = 0, l = lights.length; i < l; i ++ ) {\n\n\t\t\tconst light = lights[ i ];\n\n\t\t\tconst color = light.color;\n\t\t\tconst intensity = light.intensity;\n\t\t\tconst distance = light.distance;\n\n\t\t\tconst shadowMap = ( light.shadow && light.shadow.map ) ? light.shadow.map.texture : null;\n\n\t\t\tif ( light.isAmbientLight ) {\n\n\t\t\t\tr += color.r * intensity * scaleFactor;\n\t\t\t\tg += color.g * intensity * scaleFactor;\n\t\t\t\tb += color.b * intensity * scaleFactor;\n\n\t\t\t} else if ( light.isLightProbe ) {\n\n\t\t\t\tfor ( let j = 0; j < 9; j ++ ) {\n\n\t\t\t\t\tstate.probe[ j ].addScaledVector( light.sh.coefficients[ j ], intensity );\n\n\t\t\t\t}\n\n\t\t\t} else if ( light.isDirectionalLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity * scaleFactor );\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tconst shadow = light.shadow;\n\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\n\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t\tstate.directionalShadow[ directionalLength ] = shadowUniforms;\n\t\t\t\t\tstate.directionalShadowMap[ directionalLength ] = shadowMap;\n\t\t\t\t\tstate.directionalShadowMatrix[ directionalLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumDirectionalShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.directional[ directionalLength ] = uniforms;\n\n\t\t\t\tdirectionalLength ++;\n\n\t\t\t} else if ( light.isSpotLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity * scaleFactor );\n\t\t\t\tuniforms.distance = distance;\n\n\t\t\t\tuniforms.coneCos = Math.cos( light.angle );\n\t\t\t\tuniforms.penumbraCos = Math.cos( light.angle * ( 1 - light.penumbra ) );\n\t\t\t\tuniforms.decay = light.decay;\n\n\t\t\t\tstate.spot[ spotLength ] = uniforms;\n\n\t\t\t\tconst shadow = light.shadow;\n\n\t\t\t\tif ( light.map ) {\n\n\t\t\t\t\tstate.spotLightMap[ numSpotMaps ] = light.map;\n\t\t\t\t\tnumSpotMaps ++;\n\n\t\t\t\t\t// make sure the lightMatrix is up to date\n\t\t\t\t\t// TODO : do it if required only\n\t\t\t\t\tshadow.updateMatrices( light );\n\n\t\t\t\t\tif ( light.castShadow ) numSpotShadowsWithMaps ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.spotLightMatrix[ spotLength ] = shadow.matrix;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\n\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t\tstate.spotShadow[ spotLength ] = shadowUniforms;\n\t\t\t\t\tstate.spotShadowMap[ spotLength ] = shadowMap;\n\n\t\t\t\t\tnumSpotShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tspotLength ++;\n\n\t\t\t} else if ( light.isRectAreaLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\t// (a) intensity is the total visible light emitted\n\t\t\t\t//uniforms.color.copy( color ).multiplyScalar( intensity / ( light.width * light.height * Math.PI ) );\n\n\t\t\t\t// (b) intensity is the brightness of the light\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\n\n\t\t\t\tuniforms.halfWidth.set( light.width * 0.5, 0.0, 0.0 );\n\t\t\t\tuniforms.halfHeight.set( 0.0, light.height * 0.5, 0.0 );\n\n\t\t\t\tstate.rectArea[ rectAreaLength ] = uniforms;\n\n\t\t\t\trectAreaLength ++;\n\n\t\t\t} else if ( light.isPointLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity * scaleFactor );\n\t\t\t\tuniforms.distance = light.distance;\n\t\t\t\tuniforms.decay = light.decay;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tconst shadow = light.shadow;\n\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\n\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\n\t\t\t\t\tshadowUniforms.shadowCameraNear = shadow.camera.near;\n\t\t\t\t\tshadowUniforms.shadowCameraFar = shadow.camera.far;\n\n\t\t\t\t\tstate.pointShadow[ pointLength ] = shadowUniforms;\n\t\t\t\t\tstate.pointShadowMap[ pointLength ] = shadowMap;\n\t\t\t\t\tstate.pointShadowMatrix[ pointLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumPointShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.point[ pointLength ] = uniforms;\n\n\t\t\t\tpointLength ++;\n\n\t\t\t} else if ( light.isHemisphereLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.skyColor.copy( light.color ).multiplyScalar( intensity * scaleFactor );\n\t\t\t\tuniforms.groundColor.copy( light.groundColor ).multiplyScalar( intensity * scaleFactor );\n\n\t\t\t\tstate.hemi[ hemiLength ] = uniforms;\n\n\t\t\t\themiLength ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( rectAreaLength > 0 ) {\n\n\t\t\tif ( capabilities.isWebGL2 ) {\n\n\t\t\t\t// WebGL 2\n\n\t\t\t\tstate.rectAreaLTC1 = UniformsLib.LTC_FLOAT_1;\n\t\t\t\tstate.rectAreaLTC2 = UniformsLib.LTC_FLOAT_2;\n\n\t\t\t} else {\n\n\t\t\t\t// WebGL 1\n\n\t\t\t\tif ( extensions.has( 'OES_texture_float_linear' ) === true ) {\n\n\t\t\t\t\tstate.rectAreaLTC1 = UniformsLib.LTC_FLOAT_1;\n\t\t\t\t\tstate.rectAreaLTC2 = UniformsLib.LTC_FLOAT_2;\n\n\t\t\t\t} else if ( extensions.has( 'OES_texture_half_float_linear' ) === true ) {\n\n\t\t\t\t\tstate.rectAreaLTC1 = UniformsLib.LTC_HALF_1;\n\t\t\t\t\tstate.rectAreaLTC2 = UniformsLib.LTC_HALF_2;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.ambient[ 0 ] = r;\n\t\tstate.ambient[ 1 ] = g;\n\t\tstate.ambient[ 2 ] = b;\n\n\t\tconst hash = state.hash;\n\n\t\tif ( hash.directionalLength !== directionalLength ||\n\t\t\thash.pointLength !== pointLength ||\n\t\t\thash.spotLength !== spotLength ||\n\t\t\thash.rectAreaLength !== rectAreaLength ||\n\t\t\thash.hemiLength !== hemiLength ||\n\t\t\thash.numDirectionalShadows !== numDirectionalShadows ||\n\t\t\thash.numPointShadows !== numPointShadows ||\n\t\t\thash.numSpotShadows !== numSpotShadows ||\n\t\t\thash.numSpotMaps !== numSpotMaps ) {\n\n\t\t\tstate.directional.length = directionalLength;\n\t\t\tstate.spot.length = spotLength;\n\t\t\tstate.rectArea.length = rectAreaLength;\n\t\t\tstate.point.length = pointLength;\n\t\t\tstate.hemi.length = hemiLength;\n\n\t\t\tstate.directionalShadow.length = numDirectionalShadows;\n\t\t\tstate.directionalShadowMap.length = numDirectionalShadows;\n\t\t\tstate.pointShadow.length = numPointShadows;\n\t\t\tstate.pointShadowMap.length = numPointShadows;\n\t\t\tstate.spotShadow.length = numSpotShadows;\n\t\t\tstate.spotShadowMap.length = numSpotShadows;\n\t\t\tstate.directionalShadowMatrix.length = numDirectionalShadows;\n\t\t\tstate.pointShadowMatrix.length = numPointShadows;\n\t\t\tstate.spotLightMatrix.length = numSpotShadows + numSpotMaps - numSpotShadowsWithMaps;\n\t\t\tstate.spotLightMap.length = numSpotMaps;\n\t\t\tstate.numSpotLightShadowsWithMaps = numSpotShadowsWithMaps;\n\n\t\t\thash.directionalLength = directionalLength;\n\t\t\thash.pointLength = pointLength;\n\t\t\thash.spotLength = spotLength;\n\t\t\thash.rectAreaLength = rectAreaLength;\n\t\t\thash.hemiLength = hemiLength;\n\n\t\t\thash.numDirectionalShadows = numDirectionalShadows;\n\t\t\thash.numPointShadows = numPointShadows;\n\t\t\thash.numSpotShadows = numSpotShadows;\n\t\t\thash.numSpotMaps = numSpotMaps;\n\n\t\t\tstate.version = nextVersion ++;\n\n\t\t}\n\n\t}\n\n\tfunction setupView( lights, camera ) {\n\n\t\tlet directionalLength = 0;\n\t\tlet pointLength = 0;\n\t\tlet spotLength = 0;\n\t\tlet rectAreaLength = 0;\n\t\tlet hemiLength = 0;\n\n\t\tconst viewMatrix = camera.matrixWorldInverse;\n\n\t\tfor ( let i = 0, l = lights.length; i < l; i ++ ) {\n\n\t\t\tconst light = lights[ i ];\n\n\t\t\tif ( light.isDirectionalLight ) {\n\n\t\t\t\tconst uniforms = state.directional[ directionalLength ];\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tdirectionalLength ++;\n\n\t\t\t} else if ( light.isSpotLight ) {\n\n\t\t\t\tconst uniforms = state.spot[ spotLength ];\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tspotLength ++;\n\n\t\t\t} else if ( light.isRectAreaLight ) {\n\n\t\t\t\tconst uniforms = state.rectArea[ rectAreaLength ];\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\t// extract local rotation of light to derive width/height half vectors\n\t\t\t\tmatrix42.identity();\n\t\t\t\tmatrix4.copy( light.matrixWorld );\n\t\t\t\tmatrix4.premultiply( viewMatrix );\n\t\t\t\tmatrix42.extractRotation( matrix4 );\n\n\t\t\t\tuniforms.halfWidth.set( light.width * 0.5, 0.0, 0.0 );\n\t\t\t\tuniforms.halfHeight.set( 0.0, light.height * 0.5, 0.0 );\n\n\t\t\t\tuniforms.halfWidth.applyMatrix4( matrix42 );\n\t\t\t\tuniforms.halfHeight.applyMatrix4( matrix42 );\n\n\t\t\t\trectAreaLength ++;\n\n\t\t\t} else if ( light.isPointLight ) {\n\n\t\t\t\tconst uniforms = state.point[ pointLength ];\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tpointLength ++;\n\n\t\t\t} else if ( light.isHemisphereLight ) {\n\n\t\t\t\tconst uniforms = state.hemi[ hemiLength ];\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\themiLength ++;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\tsetup: setup,\n\t\tsetupView: setupView,\n\t\tstate: state\n\t};\n\n}\n\nfunction WebGLRenderState( extensions, capabilities ) {\n\n\tconst lights = new WebGLLights( extensions, capabilities );\n\n\tconst lightsArray = [];\n\tconst shadowsArray = [];\n\n\tfunction init() {\n\n\t\tlightsArray.length = 0;\n\t\tshadowsArray.length = 0;\n\n\t}\n\n\tfunction pushLight( light ) {\n\n\t\tlightsArray.push( light );\n\n\t}\n\n\tfunction pushShadow( shadowLight ) {\n\n\t\tshadowsArray.push( shadowLight );\n\n\t}\n\n\tfunction setupLights( physicallyCorrectLights ) {\n\n\t\tlights.setup( lightsArray, physicallyCorrectLights );\n\n\t}\n\n\tfunction setupLightsView( camera ) {\n\n\t\tlights.setupView( lightsArray, camera );\n\n\t}\n\n\tconst state = {\n\t\tlightsArray: lightsArray,\n\t\tshadowsArray: shadowsArray,\n\n\t\tlights: lights\n\t};\n\n\treturn {\n\t\tinit: init,\n\t\tstate: state,\n\t\tsetupLights: setupLights,\n\t\tsetupLightsView: setupLightsView,\n\n\t\tpushLight: pushLight,\n\t\tpushShadow: pushShadow\n\t};\n\n}\n\nfunction WebGLRenderStates( extensions, capabilities ) {\n\n\tlet renderStates = new WeakMap();\n\n\tfunction get( scene, renderCallDepth = 0 ) {\n\n\t\tconst renderStateArray = renderStates.get( scene );\n\t\tlet renderState;\n\n\t\tif ( renderStateArray === undefined ) {\n\n\t\t\trenderState = new WebGLRenderState( extensions, capabilities );\n\t\t\trenderStates.set( scene, [ renderState ] );\n\n\t\t} else {\n\n\t\t\tif ( renderCallDepth >= renderStateArray.length ) {\n\n\t\t\t\trenderState = new WebGLRenderState( extensions, capabilities );\n\t\t\t\trenderStateArray.push( renderState );\n\n\t\t\t} else {\n\n\t\t\t\trenderState = renderStateArray[ renderCallDepth ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn renderState;\n\n\t}\n\n\tfunction dispose() {\n\n\t\trenderStates = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\nclass MeshDepthMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshDepthMaterial = true;\n\n\t\tthis.type = 'MeshDepthMaterial';\n\n\t\tthis.depthPacking = BasicDepthPacking;\n\n\t\tthis.map = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.depthPacking = source.depthPacking;\n\n\t\tthis.map = source.map;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass MeshDistanceMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshDistanceMaterial = true;\n\n\t\tthis.type = 'MeshDistanceMaterial';\n\n\t\tthis.referencePosition = new Vector3();\n\t\tthis.nearDistance = 1;\n\t\tthis.farDistance = 1000;\n\n\t\tthis.map = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.referencePosition.copy( source.referencePosition );\n\t\tthis.nearDistance = source.nearDistance;\n\t\tthis.farDistance = source.farDistance;\n\n\t\tthis.map = source.map;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst vertex = \"void main() {\\n\\tgl_Position = vec4( position, 1.0 );\\n}\";\n\nconst fragment = \"uniform sampler2D shadow_pass;\\nuniform vec2 resolution;\\nuniform float radius;\\n#include <packing>\\nvoid main() {\\n\\tconst float samples = float( VSM_SAMPLES );\\n\\tfloat mean = 0.0;\\n\\tfloat squared_mean = 0.0;\\n\\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\\n\\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\\n\\tfor ( float i = 0.0; i < samples; i ++ ) {\\n\\t\\tfloat uvOffset = uvStart + i * uvStride;\\n\\t\\t#ifdef HORIZONTAL_PASS\\n\\t\\t\\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\\n\\t\\t\\tmean += distribution.x;\\n\\t\\t\\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\\n\\t\\t#else\\n\\t\\t\\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\\n\\t\\t\\tmean += depth;\\n\\t\\t\\tsquared_mean += depth * depth;\\n\\t\\t#endif\\n\\t}\\n\\tmean = mean / samples;\\n\\tsquared_mean = squared_mean / samples;\\n\\tfloat std_dev = sqrt( squared_mean - mean * mean );\\n\\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\\n}\";\n\nfunction WebGLShadowMap( _renderer, _objects, _capabilities ) {\n\n\tlet _frustum = new Frustum();\n\n\tconst _shadowMapSize = new Vector2(),\n\t\t_viewportSize = new Vector2(),\n\n\t\t_viewport = new Vector4(),\n\n\t\t_depthMaterial = new MeshDepthMaterial( { depthPacking: RGBADepthPacking } ),\n\t\t_distanceMaterial = new MeshDistanceMaterial(),\n\n\t\t_materialCache = {},\n\n\t\t_maxTextureSize = _capabilities.maxTextureSize;\n\n\tconst shadowSide = { 0: BackSide, 1: FrontSide, 2: DoubleSide };\n\n\tconst shadowMaterialVertical = new ShaderMaterial( {\n\t\tdefines: {\n\t\t\tVSM_SAMPLES: 8\n\t\t},\n\t\tuniforms: {\n\t\t\tshadow_pass: { value: null },\n\t\t\tresolution: { value: new Vector2() },\n\t\t\tradius: { value: 4.0 }\n\t\t},\n\n\t\tvertexShader: vertex,\n\t\tfragmentShader: fragment\n\n\t} );\n\n\tconst shadowMaterialHorizontal = shadowMaterialVertical.clone();\n\tshadowMaterialHorizontal.defines.HORIZONTAL_PASS = 1;\n\n\tconst fullScreenTri = new BufferGeometry();\n\tfullScreenTri.setAttribute(\n\t\t'position',\n\t\tnew BufferAttribute(\n\t\t\tnew Float32Array( [ - 1, - 1, 0.5, 3, - 1, 0.5, - 1, 3, 0.5 ] ),\n\t\t\t3\n\t\t)\n\t);\n\n\tconst fullScreenMesh = new Mesh( fullScreenTri, shadowMaterialVertical );\n\n\tconst scope = this;\n\n\tthis.enabled = false;\n\n\tthis.autoUpdate = true;\n\tthis.needsUpdate = false;\n\n\tthis.type = PCFShadowMap;\n\n\tthis.render = function ( lights, scene, camera ) {\n\n\t\tif ( scope.enabled === false ) return;\n\t\tif ( scope.autoUpdate === false && scope.needsUpdate === false ) return;\n\n\t\tif ( lights.length === 0 ) return;\n\n\t\tconst currentRenderTarget = _renderer.getRenderTarget();\n\t\tconst activeCubeFace = _renderer.getActiveCubeFace();\n\t\tconst activeMipmapLevel = _renderer.getActiveMipmapLevel();\n\n\t\tconst _state = _renderer.state;\n\n\t\t// Set GL state for depth map.\n\t\t_state.setBlending( NoBlending );\n\t\t_state.buffers.color.setClear( 1, 1, 1, 1 );\n\t\t_state.buffers.depth.setTest( true );\n\t\t_state.setScissorTest( false );\n\n\t\t// render depth map\n\n\t\tfor ( let i = 0, il = lights.length; i < il; i ++ ) {\n\n\t\t\tconst light = lights[ i ];\n\t\t\tconst shadow = light.shadow;\n\n\t\t\tif ( shadow === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap:', light, 'has no shadow.' );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( shadow.autoUpdate === false && shadow.needsUpdate === false ) continue;\n\n\t\t\t_shadowMapSize.copy( shadow.mapSize );\n\n\t\t\tconst shadowFrameExtents = shadow.getFrameExtents();\n\n\t\t\t_shadowMapSize.multiply( shadowFrameExtents );\n\n\t\t\t_viewportSize.copy( shadow.mapSize );\n\n\t\t\tif ( _shadowMapSize.x > _maxTextureSize || _shadowMapSize.y > _maxTextureSize ) {\n\n\t\t\t\tif ( _shadowMapSize.x > _maxTextureSize ) {\n\n\t\t\t\t\t_viewportSize.x = Math.floor( _maxTextureSize / shadowFrameExtents.x );\n\t\t\t\t\t_shadowMapSize.x = _viewportSize.x * shadowFrameExtents.x;\n\t\t\t\t\tshadow.mapSize.x = _viewportSize.x;\n\n\t\t\t\t}\n\n\t\t\t\tif ( _shadowMapSize.y > _maxTextureSize ) {\n\n\t\t\t\t\t_viewportSize.y = Math.floor( _maxTextureSize / shadowFrameExtents.y );\n\t\t\t\t\t_shadowMapSize.y = _viewportSize.y * shadowFrameExtents.y;\n\t\t\t\t\tshadow.mapSize.y = _viewportSize.y;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( shadow.map === null ) {\n\n\t\t\t\tconst pars = ( this.type !== VSMShadowMap ) ? { minFilter: NearestFilter, magFilter: NearestFilter } : {};\n\n\t\t\t\tshadow.map = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\t\t\t\tshadow.map.texture.name = light.name + '.shadowMap';\n\n\t\t\t\tshadow.camera.updateProjectionMatrix();\n\n\t\t\t}\n\n\t\t\t_renderer.setRenderTarget( shadow.map );\n\t\t\t_renderer.clear();\n\n\t\t\tconst viewportCount = shadow.getViewportCount();\n\n\t\t\tfor ( let vp = 0; vp < viewportCount; vp ++ ) {\n\n\t\t\t\tconst viewport = shadow.getViewport( vp );\n\n\t\t\t\t_viewport.set(\n\t\t\t\t\t_viewportSize.x * viewport.x,\n\t\t\t\t\t_viewportSize.y * viewport.y,\n\t\t\t\t\t_viewportSize.x * viewport.z,\n\t\t\t\t\t_viewportSize.y * viewport.w\n\t\t\t\t);\n\n\t\t\t\t_state.viewport( _viewport );\n\n\t\t\t\tshadow.updateMatrices( light, vp );\n\n\t\t\t\t_frustum = shadow.getFrustum();\n\n\t\t\t\trenderObject( scene, camera, shadow.camera, light, this.type );\n\n\t\t\t}\n\n\t\t\t// do blur pass for VSM\n\n\t\t\tif ( shadow.isPointLightShadow !== true && this.type === VSMShadowMap ) {\n\n\t\t\t\tVSMPass( shadow, camera );\n\n\t\t\t}\n\n\t\t\tshadow.needsUpdate = false;\n\n\t\t}\n\n\t\tscope.needsUpdate = false;\n\n\t\t_renderer.setRenderTarget( currentRenderTarget, activeCubeFace, activeMipmapLevel );\n\n\t};\n\n\tfunction VSMPass( shadow, camera ) {\n\n\t\tconst geometry = _objects.update( fullScreenMesh );\n\n\t\tif ( shadowMaterialVertical.defines.VSM_SAMPLES !== shadow.blurSamples ) {\n\n\t\t\tshadowMaterialVertical.defines.VSM_SAMPLES = shadow.blurSamples;\n\t\t\tshadowMaterialHorizontal.defines.VSM_SAMPLES = shadow.blurSamples;\n\n\t\t\tshadowMaterialVertical.needsUpdate = true;\n\t\t\tshadowMaterialHorizontal.needsUpdate = true;\n\n\t\t}\n\n\t\tif ( shadow.mapPass === null ) {\n\n\t\t\tshadow.mapPass = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y );\n\n\t\t}\n\n\t\t// vertical pass\n\n\t\tshadowMaterialVertical.uniforms.shadow_pass.value = shadow.map.texture;\n\t\tshadowMaterialVertical.uniforms.resolution.value = shadow.mapSize;\n\t\tshadowMaterialVertical.uniforms.radius.value = shadow.radius;\n\t\t_renderer.setRenderTarget( shadow.mapPass );\n\t\t_renderer.clear();\n\t\t_renderer.renderBufferDirect( camera, null, geometry, shadowMaterialVertical, fullScreenMesh, null );\n\n\t\t// horizontal pass\n\n\t\tshadowMaterialHorizontal.uniforms.shadow_pass.value = shadow.mapPass.texture;\n\t\tshadowMaterialHorizontal.uniforms.resolution.value = shadow.mapSize;\n\t\tshadowMaterialHorizontal.uniforms.radius.value = shadow.radius;\n\t\t_renderer.setRenderTarget( shadow.map );\n\t\t_renderer.clear();\n\t\t_renderer.renderBufferDirect( camera, null, geometry, shadowMaterialHorizontal, fullScreenMesh, null );\n\n\t}\n\n\tfunction getDepthMaterial( object, material, light, shadowCameraNear, shadowCameraFar, type ) {\n\n\t\tlet result = null;\n\n\t\tconst customMaterial = ( light.isPointLight === true ) ? object.customDistanceMaterial : object.customDepthMaterial;\n\n\t\tif ( customMaterial !== undefined ) {\n\n\t\t\tresult = customMaterial;\n\n\t\t} else {\n\n\t\t\tresult = ( light.isPointLight === true ) ? _distanceMaterial : _depthMaterial;\n\n\t\t}\n\n\t\tif ( ( _renderer.localClippingEnabled && material.clipShadows === true && Array.isArray( material.clippingPlanes ) && material.clippingPlanes.length !== 0 ) ||\n\t\t\t( material.displacementMap && material.displacementScale !== 0 ) ||\n\t\t\t( material.alphaMap && material.alphaTest > 0 ) ) {\n\n\t\t\t// in this case we need a unique material instance reflecting the\n\t\t\t// appropriate state\n\n\t\t\tconst keyA = result.uuid, keyB = material.uuid;\n\n\t\t\tlet materialsForVariant = _materialCache[ keyA ];\n\n\t\t\tif ( materialsForVariant === undefined ) {\n\n\t\t\t\tmaterialsForVariant = {};\n\t\t\t\t_materialCache[ keyA ] = materialsForVariant;\n\n\t\t\t}\n\n\t\t\tlet cachedMaterial = materialsForVariant[ keyB ];\n\n\t\t\tif ( cachedMaterial === undefined ) {\n\n\t\t\t\tcachedMaterial = result.clone();\n\t\t\t\tmaterialsForVariant[ keyB ] = cachedMaterial;\n\n\t\t\t}\n\n\t\t\tresult = cachedMaterial;\n\n\t\t}\n\n\t\tresult.visible = material.visible;\n\t\tresult.wireframe = material.wireframe;\n\n\t\tif ( type === VSMShadowMap ) {\n\n\t\t\tresult.side = ( material.shadowSide !== null ) ? material.shadowSide : material.side;\n\n\t\t} else {\n\n\t\t\tresult.side = ( material.shadowSide !== null ) ? material.shadowSide : shadowSide[ material.side ];\n\n\t\t}\n\n\t\tresult.alphaMap = material.alphaMap;\n\t\tresult.alphaTest = material.alphaTest;\n\n\t\tresult.clipShadows = material.clipShadows;\n\t\tresult.clippingPlanes = material.clippingPlanes;\n\t\tresult.clipIntersection = material.clipIntersection;\n\n\t\tresult.displacementMap = material.displacementMap;\n\t\tresult.displacementScale = material.displacementScale;\n\t\tresult.displacementBias = material.displacementBias;\n\n\t\tresult.wireframeLinewidth = material.wireframeLinewidth;\n\t\tresult.linewidth = material.linewidth;\n\n\t\tif ( light.isPointLight === true && result.isMeshDistanceMaterial === true ) {\n\n\t\t\tresult.referencePosition.setFromMatrixPosition( light.matrixWorld );\n\t\t\tresult.nearDistance = shadowCameraNear;\n\t\t\tresult.farDistance = shadowCameraFar;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tfunction renderObject( object, camera, shadowCamera, light, type ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tconst visible = object.layers.test( camera.layers );\n\n\t\tif ( visible && ( object.isMesh || object.isLine || object.isPoints ) ) {\n\n\t\t\tif ( ( object.castShadow || ( object.receiveShadow && type === VSMShadowMap ) ) && ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) ) {\n\n\t\t\t\tobject.modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\n\n\t\t\t\tconst geometry = _objects.update( object );\n\t\t\t\tconst material = object.material;\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tconst groups = geometry.groups;\n\n\t\t\t\t\tfor ( let k = 0, kl = groups.length; k < kl; k ++ ) {\n\n\t\t\t\t\t\tconst group = groups[ k ];\n\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\tconst depthMaterial = getDepthMaterial( object, groupMaterial, light, shadowCamera.near, shadowCamera.far, type );\n\n\t\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, group );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\tconst depthMaterial = getDepthMaterial( object, material, light, shadowCamera.near, shadowCamera.far, type );\n\n\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, null );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\trenderObject( children[ i ], camera, shadowCamera, light, type );\n\n\t\t}\n\n\t}\n\n}\n\nfunction WebGLState( gl, extensions, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tfunction ColorBuffer() {\n\n\t\tlet locked = false;\n\n\t\tconst color = new Vector4();\n\t\tlet currentColorMask = null;\n\t\tconst currentColorClear = new Vector4( 0, 0, 0, 0 );\n\n\t\treturn {\n\n\t\t\tsetMask: function ( colorMask ) {\n\n\t\t\t\tif ( currentColorMask !== colorMask && ! locked ) {\n\n\t\t\t\t\tgl.colorMask( colorMask, colorMask, colorMask, colorMask );\n\t\t\t\t\tcurrentColorMask = colorMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( r, g, b, a, premultipliedAlpha ) {\n\n\t\t\t\tif ( premultipliedAlpha === true ) {\n\n\t\t\t\t\tr *= a; g *= a; b *= a;\n\n\t\t\t\t}\n\n\t\t\t\tcolor.set( r, g, b, a );\n\n\t\t\t\tif ( currentColorClear.equals( color ) === false ) {\n\n\t\t\t\t\tgl.clearColor( r, g, b, a );\n\t\t\t\t\tcurrentColorClear.copy( color );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentColorMask = null;\n\t\t\t\tcurrentColorClear.set( - 1, 0, 0, 0 ); // set to invalid state\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction DepthBuffer() {\n\n\t\tlet locked = false;\n\n\t\tlet currentDepthMask = null;\n\t\tlet currentDepthFunc = null;\n\t\tlet currentDepthClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( depthTest ) {\n\n\t\t\t\tif ( depthTest ) {\n\n\t\t\t\t\tenable( 2929 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdisable( 2929 );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( depthMask ) {\n\n\t\t\t\tif ( currentDepthMask !== depthMask && ! locked ) {\n\n\t\t\t\t\tgl.depthMask( depthMask );\n\t\t\t\t\tcurrentDepthMask = depthMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( depthFunc ) {\n\n\t\t\t\tif ( currentDepthFunc !== depthFunc ) {\n\n\t\t\t\t\tswitch ( depthFunc ) {\n\n\t\t\t\t\t\tcase NeverDepth:\n\n\t\t\t\t\t\t\tgl.depthFunc( 512 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase AlwaysDepth:\n\n\t\t\t\t\t\t\tgl.depthFunc( 519 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase LessDepth:\n\n\t\t\t\t\t\t\tgl.depthFunc( 513 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase LessEqualDepth:\n\n\t\t\t\t\t\t\tgl.depthFunc( 515 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EqualDepth:\n\n\t\t\t\t\t\t\tgl.depthFunc( 514 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase GreaterEqualDepth:\n\n\t\t\t\t\t\t\tgl.depthFunc( 518 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase GreaterDepth:\n\n\t\t\t\t\t\t\tgl.depthFunc( 516 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase NotEqualDepth:\n\n\t\t\t\t\t\t\tgl.depthFunc( 517 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tgl.depthFunc( 515 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrentDepthFunc = depthFunc;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( depth ) {\n\n\t\t\t\tif ( currentDepthClear !== depth ) {\n\n\t\t\t\t\tgl.clearDepth( depth );\n\t\t\t\t\tcurrentDepthClear = depth;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentDepthMask = null;\n\t\t\t\tcurrentDepthFunc = null;\n\t\t\t\tcurrentDepthClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction StencilBuffer() {\n\n\t\tlet locked = false;\n\n\t\tlet currentStencilMask = null;\n\t\tlet currentStencilFunc = null;\n\t\tlet currentStencilRef = null;\n\t\tlet currentStencilFuncMask = null;\n\t\tlet currentStencilFail = null;\n\t\tlet currentStencilZFail = null;\n\t\tlet currentStencilZPass = null;\n\t\tlet currentStencilClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( stencilTest ) {\n\n\t\t\t\tif ( ! locked ) {\n\n\t\t\t\t\tif ( stencilTest ) {\n\n\t\t\t\t\t\tenable( 2960 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdisable( 2960 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( stencilMask ) {\n\n\t\t\t\tif ( currentStencilMask !== stencilMask && ! locked ) {\n\n\t\t\t\t\tgl.stencilMask( stencilMask );\n\t\t\t\t\tcurrentStencilMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( stencilFunc, stencilRef, stencilMask ) {\n\n\t\t\t\tif ( currentStencilFunc !== stencilFunc ||\n\t\t\t\t     currentStencilRef !== stencilRef ||\n\t\t\t\t     currentStencilFuncMask !== stencilMask ) {\n\n\t\t\t\t\tgl.stencilFunc( stencilFunc, stencilRef, stencilMask );\n\n\t\t\t\t\tcurrentStencilFunc = stencilFunc;\n\t\t\t\t\tcurrentStencilRef = stencilRef;\n\t\t\t\t\tcurrentStencilFuncMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetOp: function ( stencilFail, stencilZFail, stencilZPass ) {\n\n\t\t\t\tif ( currentStencilFail !== stencilFail ||\n\t\t\t\t     currentStencilZFail !== stencilZFail ||\n\t\t\t\t     currentStencilZPass !== stencilZPass ) {\n\n\t\t\t\t\tgl.stencilOp( stencilFail, stencilZFail, stencilZPass );\n\n\t\t\t\t\tcurrentStencilFail = stencilFail;\n\t\t\t\t\tcurrentStencilZFail = stencilZFail;\n\t\t\t\t\tcurrentStencilZPass = stencilZPass;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( stencil ) {\n\n\t\t\t\tif ( currentStencilClear !== stencil ) {\n\n\t\t\t\t\tgl.clearStencil( stencil );\n\t\t\t\t\tcurrentStencilClear = stencil;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentStencilMask = null;\n\t\t\t\tcurrentStencilFunc = null;\n\t\t\t\tcurrentStencilRef = null;\n\t\t\t\tcurrentStencilFuncMask = null;\n\t\t\t\tcurrentStencilFail = null;\n\t\t\t\tcurrentStencilZFail = null;\n\t\t\t\tcurrentStencilZPass = null;\n\t\t\t\tcurrentStencilClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t//\n\n\tconst colorBuffer = new ColorBuffer();\n\tconst depthBuffer = new DepthBuffer();\n\tconst stencilBuffer = new StencilBuffer();\n\n\tconst uboBindings = new WeakMap();\n\tconst uboProgamMap = new WeakMap();\n\n\tlet enabledCapabilities = {};\n\n\tlet currentBoundFramebuffers = {};\n\tlet currentDrawbuffers = new WeakMap();\n\tlet defaultDrawbuffers = [];\n\n\tlet currentProgram = null;\n\n\tlet currentBlendingEnabled = false;\n\tlet currentBlending = null;\n\tlet currentBlendEquation = null;\n\tlet currentBlendSrc = null;\n\tlet currentBlendDst = null;\n\tlet currentBlendEquationAlpha = null;\n\tlet currentBlendSrcAlpha = null;\n\tlet currentBlendDstAlpha = null;\n\tlet currentPremultipledAlpha = false;\n\n\tlet currentFlipSided = null;\n\tlet currentCullFace = null;\n\n\tlet currentLineWidth = null;\n\n\tlet currentPolygonOffsetFactor = null;\n\tlet currentPolygonOffsetUnits = null;\n\n\tconst maxTextures = gl.getParameter( 35661 );\n\n\tlet lineWidthAvailable = false;\n\tlet version = 0;\n\tconst glVersion = gl.getParameter( 7938 );\n\n\tif ( glVersion.indexOf( 'WebGL' ) !== - 1 ) {\n\n\t\tversion = parseFloat( /^WebGL (\\d)/.exec( glVersion )[ 1 ] );\n\t\tlineWidthAvailable = ( version >= 1.0 );\n\n\t} else if ( glVersion.indexOf( 'OpenGL ES' ) !== - 1 ) {\n\n\t\tversion = parseFloat( /^OpenGL ES (\\d)/.exec( glVersion )[ 1 ] );\n\t\tlineWidthAvailable = ( version >= 2.0 );\n\n\t}\n\n\tlet currentTextureSlot = null;\n\tlet currentBoundTextures = {};\n\n\tconst scissorParam = gl.getParameter( 3088 );\n\tconst viewportParam = gl.getParameter( 2978 );\n\n\tconst currentScissor = new Vector4().fromArray( scissorParam );\n\tconst currentViewport = new Vector4().fromArray( viewportParam );\n\n\tfunction createTexture( type, target, count ) {\n\n\t\tconst data = new Uint8Array( 4 ); // 4 is required to match default unpack alignment of 4.\n\t\tconst texture = gl.createTexture();\n\n\t\tgl.bindTexture( type, texture );\n\t\tgl.texParameteri( type, 10241, 9728 );\n\t\tgl.texParameteri( type, 10240, 9728 );\n\n\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\tgl.texImage2D( target + i, 0, 6408, 1, 1, 0, 6408, 5121, data );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tconst emptyTextures = {};\n\temptyTextures[ 3553 ] = createTexture( 3553, 3553, 1 );\n\temptyTextures[ 34067 ] = createTexture( 34067, 34069, 6 );\n\n\t// init\n\n\tcolorBuffer.setClear( 0, 0, 0, 1 );\n\tdepthBuffer.setClear( 1 );\n\tstencilBuffer.setClear( 0 );\n\n\tenable( 2929 );\n\tdepthBuffer.setFunc( LessEqualDepth );\n\n\tsetFlipSided( false );\n\tsetCullFace( CullFaceBack );\n\tenable( 2884 );\n\n\tsetBlending( NoBlending );\n\n\t//\n\n\tfunction enable( id ) {\n\n\t\tif ( enabledCapabilities[ id ] !== true ) {\n\n\t\t\tgl.enable( id );\n\t\t\tenabledCapabilities[ id ] = true;\n\n\t\t}\n\n\t}\n\n\tfunction disable( id ) {\n\n\t\tif ( enabledCapabilities[ id ] !== false ) {\n\n\t\t\tgl.disable( id );\n\t\t\tenabledCapabilities[ id ] = false;\n\n\t\t}\n\n\t}\n\n\tfunction bindFramebuffer( target, framebuffer ) {\n\n\t\tif ( currentBoundFramebuffers[ target ] !== framebuffer ) {\n\n\t\t\tgl.bindFramebuffer( target, framebuffer );\n\n\t\t\tcurrentBoundFramebuffers[ target ] = framebuffer;\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t// 36009 is equivalent to 36160\n\n\t\t\t\tif ( target === 36009 ) {\n\n\t\t\t\t\tcurrentBoundFramebuffers[ 36160 ] = framebuffer;\n\n\t\t\t\t}\n\n\t\t\t\tif ( target === 36160 ) {\n\n\t\t\t\t\tcurrentBoundFramebuffers[ 36009 ] = framebuffer;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tfunction drawBuffers( renderTarget, framebuffer ) {\n\n\t\tlet drawBuffers = defaultDrawbuffers;\n\n\t\tlet needsUpdate = false;\n\n\t\tif ( renderTarget ) {\n\n\t\t\tdrawBuffers = currentDrawbuffers.get( framebuffer );\n\n\t\t\tif ( drawBuffers === undefined ) {\n\n\t\t\t\tdrawBuffers = [];\n\t\t\t\tcurrentDrawbuffers.set( framebuffer, drawBuffers );\n\n\t\t\t}\n\n\t\t\tif ( renderTarget.isWebGLMultipleRenderTargets ) {\n\n\t\t\t\tconst textures = renderTarget.texture;\n\n\t\t\t\tif ( drawBuffers.length !== textures.length || drawBuffers[ 0 ] !== 36064 ) {\n\n\t\t\t\t\tfor ( let i = 0, il = textures.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tdrawBuffers[ i ] = 36064 + i;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tdrawBuffers.length = textures.length;\n\n\t\t\t\t\tneedsUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( drawBuffers[ 0 ] !== 36064 ) {\n\n\t\t\t\t\tdrawBuffers[ 0 ] = 36064;\n\n\t\t\t\t\tneedsUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( drawBuffers[ 0 ] !== 1029 ) {\n\n\t\t\t\tdrawBuffers[ 0 ] = 1029;\n\n\t\t\t\tneedsUpdate = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( needsUpdate ) {\n\n\t\t\tif ( capabilities.isWebGL2 ) {\n\n\t\t\t\tgl.drawBuffers( drawBuffers );\n\n\t\t\t} else {\n\n\t\t\t\textensions.get( 'WEBGL_draw_buffers' ).drawBuffersWEBGL( drawBuffers );\n\n\t\t\t}\n\n\t\t}\n\n\n\t}\n\n\tfunction useProgram( program ) {\n\n\t\tif ( currentProgram !== program ) {\n\n\t\t\tgl.useProgram( program );\n\n\t\t\tcurrentProgram = program;\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tconst equationToGL = {\n\t\t[ AddEquation ]: 32774,\n\t\t[ SubtractEquation ]: 32778,\n\t\t[ ReverseSubtractEquation ]: 32779\n\t};\n\n\tif ( isWebGL2 ) {\n\n\t\tequationToGL[ MinEquation ] = 32775;\n\t\tequationToGL[ MaxEquation ] = 32776;\n\n\t} else {\n\n\t\tconst extension = extensions.get( 'EXT_blend_minmax' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tequationToGL[ MinEquation ] = extension.MIN_EXT;\n\t\t\tequationToGL[ MaxEquation ] = extension.MAX_EXT;\n\n\t\t}\n\n\t}\n\n\tconst factorToGL = {\n\t\t[ ZeroFactor ]: 0,\n\t\t[ OneFactor ]: 1,\n\t\t[ SrcColorFactor ]: 768,\n\t\t[ SrcAlphaFactor ]: 770,\n\t\t[ SrcAlphaSaturateFactor ]: 776,\n\t\t[ DstColorFactor ]: 774,\n\t\t[ DstAlphaFactor ]: 772,\n\t\t[ OneMinusSrcColorFactor ]: 769,\n\t\t[ OneMinusSrcAlphaFactor ]: 771,\n\t\t[ OneMinusDstColorFactor ]: 775,\n\t\t[ OneMinusDstAlphaFactor ]: 773\n\t};\n\n\tfunction setBlending( blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha, premultipliedAlpha ) {\n\n\t\tif ( blending === NoBlending ) {\n\n\t\t\tif ( currentBlendingEnabled === true ) {\n\n\t\t\t\tdisable( 3042 );\n\t\t\t\tcurrentBlendingEnabled = false;\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( currentBlendingEnabled === false ) {\n\n\t\t\tenable( 3042 );\n\t\t\tcurrentBlendingEnabled = true;\n\n\t\t}\n\n\t\tif ( blending !== CustomBlending ) {\n\n\t\t\tif ( blending !== currentBlending || premultipliedAlpha !== currentPremultipledAlpha ) {\n\n\t\t\t\tif ( currentBlendEquation !== AddEquation || currentBlendEquationAlpha !== AddEquation ) {\n\n\t\t\t\t\tgl.blendEquation( 32774 );\n\n\t\t\t\t\tcurrentBlendEquation = AddEquation;\n\t\t\t\t\tcurrentBlendEquationAlpha = AddEquation;\n\n\t\t\t\t}\n\n\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\tswitch ( blending ) {\n\n\t\t\t\t\t\tcase NormalBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 1, 771, 1, 771 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase AdditiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( 1, 1 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase SubtractiveBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 0, 769, 0, 1 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase MultiplyBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 0, 768, 0, 770 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLState: Invalid blending: ', blending );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tswitch ( blending ) {\n\n\t\t\t\t\t\tcase NormalBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 770, 771, 1, 771 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase AdditiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( 770, 1 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase SubtractiveBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 0, 769, 0, 1 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase MultiplyBlending:\n\t\t\t\t\t\t\tgl.blendFunc( 0, 768 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLState: Invalid blending: ', blending );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tcurrentBlendSrc = null;\n\t\t\t\tcurrentBlendDst = null;\n\t\t\t\tcurrentBlendSrcAlpha = null;\n\t\t\t\tcurrentBlendDstAlpha = null;\n\n\t\t\t\tcurrentBlending = blending;\n\t\t\t\tcurrentPremultipledAlpha = premultipliedAlpha;\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// custom blending\n\n\t\tblendEquationAlpha = blendEquationAlpha || blendEquation;\n\t\tblendSrcAlpha = blendSrcAlpha || blendSrc;\n\t\tblendDstAlpha = blendDstAlpha || blendDst;\n\n\t\tif ( blendEquation !== currentBlendEquation || blendEquationAlpha !== currentBlendEquationAlpha ) {\n\n\t\t\tgl.blendEquationSeparate( equationToGL[ blendEquation ], equationToGL[ blendEquationAlpha ] );\n\n\t\t\tcurrentBlendEquation = blendEquation;\n\t\t\tcurrentBlendEquationAlpha = blendEquationAlpha;\n\n\t\t}\n\n\t\tif ( blendSrc !== currentBlendSrc || blendDst !== currentBlendDst || blendSrcAlpha !== currentBlendSrcAlpha || blendDstAlpha !== currentBlendDstAlpha ) {\n\n\t\t\tgl.blendFuncSeparate( factorToGL[ blendSrc ], factorToGL[ blendDst ], factorToGL[ blendSrcAlpha ], factorToGL[ blendDstAlpha ] );\n\n\t\t\tcurrentBlendSrc = blendSrc;\n\t\t\tcurrentBlendDst = blendDst;\n\t\t\tcurrentBlendSrcAlpha = blendSrcAlpha;\n\t\t\tcurrentBlendDstAlpha = blendDstAlpha;\n\n\t\t}\n\n\t\tcurrentBlending = blending;\n\t\tcurrentPremultipledAlpha = null;\n\n\t}\n\n\tfunction setMaterial( material, frontFaceCW ) {\n\n\t\tmaterial.side === DoubleSide\n\t\t\t? disable( 2884 )\n\t\t\t: enable( 2884 );\n\n\t\tlet flipSided = ( material.side === BackSide );\n\t\tif ( frontFaceCW ) flipSided = ! flipSided;\n\n\t\tsetFlipSided( flipSided );\n\n\t\t( material.blending === NormalBlending && material.transparent === false )\n\t\t\t? setBlending( NoBlending )\n\t\t\t: setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha );\n\n\t\tdepthBuffer.setFunc( material.depthFunc );\n\t\tdepthBuffer.setTest( material.depthTest );\n\t\tdepthBuffer.setMask( material.depthWrite );\n\t\tcolorBuffer.setMask( material.colorWrite );\n\n\t\tconst stencilWrite = material.stencilWrite;\n\t\tstencilBuffer.setTest( stencilWrite );\n\t\tif ( stencilWrite ) {\n\n\t\t\tstencilBuffer.setMask( material.stencilWriteMask );\n\t\t\tstencilBuffer.setFunc( material.stencilFunc, material.stencilRef, material.stencilFuncMask );\n\t\t\tstencilBuffer.setOp( material.stencilFail, material.stencilZFail, material.stencilZPass );\n\n\t\t}\n\n\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\n\n\t\tmaterial.alphaToCoverage === true\n\t\t\t? enable( 32926 )\n\t\t\t: disable( 32926 );\n\n\t}\n\n\t//\n\n\tfunction setFlipSided( flipSided ) {\n\n\t\tif ( currentFlipSided !== flipSided ) {\n\n\t\t\tif ( flipSided ) {\n\n\t\t\t\tgl.frontFace( 2304 );\n\n\t\t\t} else {\n\n\t\t\t\tgl.frontFace( 2305 );\n\n\t\t\t}\n\n\t\t\tcurrentFlipSided = flipSided;\n\n\t\t}\n\n\t}\n\n\tfunction setCullFace( cullFace ) {\n\n\t\tif ( cullFace !== CullFaceNone ) {\n\n\t\t\tenable( 2884 );\n\n\t\t\tif ( cullFace !== currentCullFace ) {\n\n\t\t\t\tif ( cullFace === CullFaceBack ) {\n\n\t\t\t\t\tgl.cullFace( 1029 );\n\n\t\t\t\t} else if ( cullFace === CullFaceFront ) {\n\n\t\t\t\t\tgl.cullFace( 1028 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgl.cullFace( 1032 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( 2884 );\n\n\t\t}\n\n\t\tcurrentCullFace = cullFace;\n\n\t}\n\n\tfunction setLineWidth( width ) {\n\n\t\tif ( width !== currentLineWidth ) {\n\n\t\t\tif ( lineWidthAvailable ) gl.lineWidth( width );\n\n\t\t\tcurrentLineWidth = width;\n\n\t\t}\n\n\t}\n\n\tfunction setPolygonOffset( polygonOffset, factor, units ) {\n\n\t\tif ( polygonOffset ) {\n\n\t\t\tenable( 32823 );\n\n\t\t\tif ( currentPolygonOffsetFactor !== factor || currentPolygonOffsetUnits !== units ) {\n\n\t\t\t\tgl.polygonOffset( factor, units );\n\n\t\t\t\tcurrentPolygonOffsetFactor = factor;\n\t\t\t\tcurrentPolygonOffsetUnits = units;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( 32823 );\n\n\t\t}\n\n\t}\n\n\tfunction setScissorTest( scissorTest ) {\n\n\t\tif ( scissorTest ) {\n\n\t\t\tenable( 3089 );\n\n\t\t} else {\n\n\t\t\tdisable( 3089 );\n\n\t\t}\n\n\t}\n\n\t// texture\n\n\tfunction activeTexture( webglSlot ) {\n\n\t\tif ( webglSlot === undefined ) webglSlot = 33984 + maxTextures - 1;\n\n\t\tif ( currentTextureSlot !== webglSlot ) {\n\n\t\t\tgl.activeTexture( webglSlot );\n\t\t\tcurrentTextureSlot = webglSlot;\n\n\t\t}\n\n\t}\n\n\tfunction bindTexture( webglType, webglTexture, webglSlot ) {\n\n\t\tif ( webglSlot === undefined ) {\n\n\t\t\tif ( currentTextureSlot === null ) {\n\n\t\t\t\twebglSlot = 33984 + maxTextures - 1;\n\n\t\t\t} else {\n\n\t\t\t\twebglSlot = currentTextureSlot;\n\n\t\t\t}\n\n\t\t}\n\n\t\tlet boundTexture = currentBoundTextures[ webglSlot ];\n\n\t\tif ( boundTexture === undefined ) {\n\n\t\t\tboundTexture = { type: undefined, texture: undefined };\n\t\t\tcurrentBoundTextures[ webglSlot ] = boundTexture;\n\n\t\t}\n\n\t\tif ( boundTexture.type !== webglType || boundTexture.texture !== webglTexture ) {\n\n\t\t\tif ( currentTextureSlot !== webglSlot ) {\n\n\t\t\t\tgl.activeTexture( webglSlot );\n\t\t\t\tcurrentTextureSlot = webglSlot;\n\n\t\t\t}\n\n\t\t\tgl.bindTexture( webglType, webglTexture || emptyTextures[ webglType ] );\n\n\t\t\tboundTexture.type = webglType;\n\t\t\tboundTexture.texture = webglTexture;\n\n\t\t}\n\n\t}\n\n\tfunction unbindTexture() {\n\n\t\tconst boundTexture = currentBoundTextures[ currentTextureSlot ];\n\n\t\tif ( boundTexture !== undefined && boundTexture.type !== undefined ) {\n\n\t\t\tgl.bindTexture( boundTexture.type, null );\n\n\t\t\tboundTexture.type = undefined;\n\t\t\tboundTexture.texture = undefined;\n\n\t\t}\n\n\t}\n\n\tfunction compressedTexImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.compressedTexImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texSubImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.texSubImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texSubImage3D() {\n\n\t\ttry {\n\n\t\t\tgl.texSubImage3D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction compressedTexSubImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.compressedTexSubImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texStorage2D() {\n\n\t\ttry {\n\n\t\t\tgl.texStorage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texStorage3D() {\n\n\t\ttry {\n\n\t\t\tgl.texStorage3D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.texImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texImage3D() {\n\n\t\ttry {\n\n\t\t\tgl.texImage3D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction scissor( scissor ) {\n\n\t\tif ( currentScissor.equals( scissor ) === false ) {\n\n\t\t\tgl.scissor( scissor.x, scissor.y, scissor.z, scissor.w );\n\t\t\tcurrentScissor.copy( scissor );\n\n\t\t}\n\n\t}\n\n\tfunction viewport( viewport ) {\n\n\t\tif ( currentViewport.equals( viewport ) === false ) {\n\n\t\t\tgl.viewport( viewport.x, viewport.y, viewport.z, viewport.w );\n\t\t\tcurrentViewport.copy( viewport );\n\n\t\t}\n\n\t}\n\n\tfunction updateUBOMapping( uniformsGroup, program ) {\n\n\t\tlet mapping = uboProgamMap.get( program );\n\n\t\tif ( mapping === undefined ) {\n\n\t\t\tmapping = new WeakMap();\n\n\t\t\tuboProgamMap.set( program, mapping );\n\n\t\t}\n\n\t\tlet blockIndex = mapping.get( uniformsGroup );\n\n\t\tif ( blockIndex === undefined ) {\n\n\t\t\tblockIndex = gl.getUniformBlockIndex( program, uniformsGroup.name );\n\n\t\t\tmapping.set( uniformsGroup, blockIndex );\n\n\t\t}\n\n\t}\n\n\tfunction uniformBlockBinding( uniformsGroup, program ) {\n\n\t\tconst mapping = uboProgamMap.get( program );\n\t\tconst blockIndex = mapping.get( uniformsGroup );\n\n\t\tif ( uboBindings.get( uniformsGroup ) !== blockIndex ) {\n\n\t\t\t// bind shader specific block index to global block point\n\n\t\t\tgl.uniformBlockBinding( program, blockIndex, uniformsGroup.__bindingPointIndex );\n\n\t\t\tuboBindings.set( uniformsGroup, blockIndex );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction reset() {\n\n\t\t// reset state\n\n\t\tgl.disable( 3042 );\n\t\tgl.disable( 2884 );\n\t\tgl.disable( 2929 );\n\t\tgl.disable( 32823 );\n\t\tgl.disable( 3089 );\n\t\tgl.disable( 2960 );\n\t\tgl.disable( 32926 );\n\n\t\tgl.blendEquation( 32774 );\n\t\tgl.blendFunc( 1, 0 );\n\t\tgl.blendFuncSeparate( 1, 0, 1, 0 );\n\n\t\tgl.colorMask( true, true, true, true );\n\t\tgl.clearColor( 0, 0, 0, 0 );\n\n\t\tgl.depthMask( true );\n\t\tgl.depthFunc( 513 );\n\t\tgl.clearDepth( 1 );\n\n\t\tgl.stencilMask( 0xffffffff );\n\t\tgl.stencilFunc( 519, 0, 0xffffffff );\n\t\tgl.stencilOp( 7680, 7680, 7680 );\n\t\tgl.clearStencil( 0 );\n\n\t\tgl.cullFace( 1029 );\n\t\tgl.frontFace( 2305 );\n\n\t\tgl.polygonOffset( 0, 0 );\n\n\t\tgl.activeTexture( 33984 );\n\n\t\tgl.bindFramebuffer( 36160, null );\n\n\t\tif ( isWebGL2 === true ) {\n\n\t\t\tgl.bindFramebuffer( 36009, null );\n\t\t\tgl.bindFramebuffer( 36008, null );\n\n\t\t}\n\n\t\tgl.useProgram( null );\n\n\t\tgl.lineWidth( 1 );\n\n\t\tgl.scissor( 0, 0, gl.canvas.width, gl.canvas.height );\n\t\tgl.viewport( 0, 0, gl.canvas.width, gl.canvas.height );\n\n\t\t// reset internals\n\n\t\tenabledCapabilities = {};\n\n\t\tcurrentTextureSlot = null;\n\t\tcurrentBoundTextures = {};\n\n\t\tcurrentBoundFramebuffers = {};\n\t\tcurrentDrawbuffers = new WeakMap();\n\t\tdefaultDrawbuffers = [];\n\n\t\tcurrentProgram = null;\n\n\t\tcurrentBlendingEnabled = false;\n\t\tcurrentBlending = null;\n\t\tcurrentBlendEquation = null;\n\t\tcurrentBlendSrc = null;\n\t\tcurrentBlendDst = null;\n\t\tcurrentBlendEquationAlpha = null;\n\t\tcurrentBlendSrcAlpha = null;\n\t\tcurrentBlendDstAlpha = null;\n\t\tcurrentPremultipledAlpha = false;\n\n\t\tcurrentFlipSided = null;\n\t\tcurrentCullFace = null;\n\n\t\tcurrentLineWidth = null;\n\n\t\tcurrentPolygonOffsetFactor = null;\n\t\tcurrentPolygonOffsetUnits = null;\n\n\t\tcurrentScissor.set( 0, 0, gl.canvas.width, gl.canvas.height );\n\t\tcurrentViewport.set( 0, 0, gl.canvas.width, gl.canvas.height );\n\n\t\tcolorBuffer.reset();\n\t\tdepthBuffer.reset();\n\t\tstencilBuffer.reset();\n\n\t}\n\n\treturn {\n\n\t\tbuffers: {\n\t\t\tcolor: colorBuffer,\n\t\t\tdepth: depthBuffer,\n\t\t\tstencil: stencilBuffer\n\t\t},\n\n\t\tenable: enable,\n\t\tdisable: disable,\n\n\t\tbindFramebuffer: bindFramebuffer,\n\t\tdrawBuffers: drawBuffers,\n\n\t\tuseProgram: useProgram,\n\n\t\tsetBlending: setBlending,\n\t\tsetMaterial: setMaterial,\n\n\t\tsetFlipSided: setFlipSided,\n\t\tsetCullFace: setCullFace,\n\n\t\tsetLineWidth: setLineWidth,\n\t\tsetPolygonOffset: setPolygonOffset,\n\n\t\tsetScissorTest: setScissorTest,\n\n\t\tactiveTexture: activeTexture,\n\t\tbindTexture: bindTexture,\n\t\tunbindTexture: unbindTexture,\n\t\tcompressedTexImage2D: compressedTexImage2D,\n\t\ttexImage2D: texImage2D,\n\t\ttexImage3D: texImage3D,\n\n\t\tupdateUBOMapping: updateUBOMapping,\n\t\tuniformBlockBinding: uniformBlockBinding,\n\n\t\ttexStorage2D: texStorage2D,\n\t\ttexStorage3D: texStorage3D,\n\t\ttexSubImage2D: texSubImage2D,\n\t\ttexSubImage3D: texSubImage3D,\n\t\tcompressedTexSubImage2D: compressedTexSubImage2D,\n\n\t\tscissor: scissor,\n\t\tviewport: viewport,\n\n\t\treset: reset\n\n\t};\n\n}\n\nfunction WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\tconst maxTextures = capabilities.maxTextures;\n\tconst maxCubemapSize = capabilities.maxCubemapSize;\n\tconst maxTextureSize = capabilities.maxTextureSize;\n\tconst maxSamples = capabilities.maxSamples;\n\tconst multisampledRTTExt = extensions.has( 'WEBGL_multisampled_render_to_texture' ) ? extensions.get( 'WEBGL_multisampled_render_to_texture' ) : null;\n\tconst supportsInvalidateFramebuffer = /OculusBrowser/g.test( navigator.userAgent );\n\n\tconst _videoTextures = new WeakMap();\n\tlet _canvas;\n\n\tconst _sources = new WeakMap(); // maps WebglTexture objects to instances of Source\n\n\t// cordova iOS (as of 5.0) still uses UIWebView, which provides OffscreenCanvas,\n\t// also OffscreenCanvas.getContext(\"webgl\"), but not OffscreenCanvas.getContext(\"2d\")!\n\t// Some implementations may only implement OffscreenCanvas partially (e.g. lacking 2d).\n\n\tlet useOffscreenCanvas = false;\n\n\ttry {\n\n\t\tuseOffscreenCanvas = typeof OffscreenCanvas !== 'undefined'\n\t\t\t// eslint-disable-next-line compat/compat\n\t\t\t&& ( new OffscreenCanvas( 1, 1 ).getContext( '2d' ) ) !== null;\n\n\t} catch ( err ) {\n\n\t\t// Ignore any errors\n\n\t}\n\n\tfunction createCanvas( width, height ) {\n\n\t\t// Use OffscreenCanvas when available. Specially needed in web workers\n\n\t\treturn useOffscreenCanvas ?\n\t\t\t// eslint-disable-next-line compat/compat\n\t\t\tnew OffscreenCanvas( width, height ) : createElementNS( 'canvas' );\n\n\t}\n\n\tfunction resizeImage( image, needsPowerOfTwo, needsNewCanvas, maxSize ) {\n\n\t\tlet scale = 1;\n\n\t\t// handle case if texture exceeds max size\n\n\t\tif ( image.width > maxSize || image.height > maxSize ) {\n\n\t\t\tscale = maxSize / Math.max( image.width, image.height );\n\n\t\t}\n\n\t\t// only perform resize if necessary\n\n\t\tif ( scale < 1 || needsPowerOfTwo === true ) {\n\n\t\t\t// only perform resize for certain image types\n\n\t\t\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\n\t\t\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\n\t\t\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\n\n\t\t\t\tconst floor = needsPowerOfTwo ? floorPowerOfTwo : Math.floor;\n\n\t\t\t\tconst width = floor( scale * image.width );\n\t\t\t\tconst height = floor( scale * image.height );\n\n\t\t\t\tif ( _canvas === undefined ) _canvas = createCanvas( width, height );\n\n\t\t\t\t// cube textures can't reuse the same canvas\n\n\t\t\t\tconst canvas = needsNewCanvas ? createCanvas( width, height ) : _canvas;\n\n\t\t\t\tcanvas.width = width;\n\t\t\t\tcanvas.height = height;\n\n\t\t\t\tconst context = canvas.getContext( '2d' );\n\t\t\t\tcontext.drawImage( image, 0, 0, width, height );\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture has been resized from (' + image.width + 'x' + image.height + ') to (' + width + 'x' + height + ').' );\n\n\t\t\t\treturn canvas;\n\n\t\t\t} else {\n\n\t\t\t\tif ( 'data' in image ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Image in DataTexture is too big (' + image.width + 'x' + image.height + ').' );\n\n\t\t\t\t}\n\n\t\t\t\treturn image;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn image;\n\n\t}\n\n\tfunction isPowerOfTwo$1( image ) {\n\n\t\treturn isPowerOfTwo( image.width ) && isPowerOfTwo( image.height );\n\n\t}\n\n\tfunction textureNeedsPowerOfTwo( texture ) {\n\n\t\tif ( isWebGL2 ) return false;\n\n\t\treturn ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) ||\n\t\t\t( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter );\n\n\t}\n\n\tfunction textureNeedsGenerateMipmaps( texture, supportsMips ) {\n\n\t\treturn texture.generateMipmaps && supportsMips &&\n\t\t\ttexture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter;\n\n\t}\n\n\tfunction generateMipmap( target ) {\n\n\t\t_gl.generateMipmap( target );\n\n\t}\n\n\tfunction getInternalFormat( internalFormatName, glFormat, glType, encoding, forceLinearEncoding = false ) {\n\n\t\tif ( isWebGL2 === false ) return glFormat;\n\n\t\tif ( internalFormatName !== null ) {\n\n\t\t\tif ( _gl[ internalFormatName ] !== undefined ) return _gl[ internalFormatName ];\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format \\'' + internalFormatName + '\\'' );\n\n\t\t}\n\n\t\tlet internalFormat = glFormat;\n\n\t\tif ( glFormat === 6403 ) {\n\n\t\t\tif ( glType === 5126 ) internalFormat = 33326;\n\t\t\tif ( glType === 5131 ) internalFormat = 33325;\n\t\t\tif ( glType === 5121 ) internalFormat = 33321;\n\n\t\t}\n\n\t\tif ( glFormat === 33319 ) {\n\n\t\t\tif ( glType === 5126 ) internalFormat = 33328;\n\t\t\tif ( glType === 5131 ) internalFormat = 33327;\n\t\t\tif ( glType === 5121 ) internalFormat = 33323;\n\n\t\t}\n\n\t\tif ( glFormat === 6408 ) {\n\n\t\t\tif ( glType === 5126 ) internalFormat = 34836;\n\t\t\tif ( glType === 5131 ) internalFormat = 34842;\n\t\t\tif ( glType === 5121 ) internalFormat = ( encoding === sRGBEncoding && forceLinearEncoding === false ) ? 35907 : 32856;\n\t\t\tif ( glType === 32819 ) internalFormat = 32854;\n\t\t\tif ( glType === 32820 ) internalFormat = 32855;\n\n\t\t}\n\n\t\tif ( internalFormat === 33325 || internalFormat === 33326 ||\n\t\t\tinternalFormat === 33327 || internalFormat === 33328 ||\n\t\t\tinternalFormat === 34842 || internalFormat === 34836 ) {\n\n\t\t\textensions.get( 'EXT_color_buffer_float' );\n\n\t\t}\n\n\t\treturn internalFormat;\n\n\t}\n\n\tfunction getMipLevels( texture, image, supportsMips ) {\n\n\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) === true || ( texture.isFramebufferTexture && texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter ) ) {\n\n\t\t\treturn Math.log2( Math.max( image.width, image.height ) ) + 1;\n\n\t\t} else if ( texture.mipmaps !== undefined && texture.mipmaps.length > 0 ) {\n\n\t\t\t// user-defined mipmaps\n\n\t\t\treturn texture.mipmaps.length;\n\n\t\t} else if ( texture.isCompressedTexture && Array.isArray( texture.image ) ) {\n\n\t\t\treturn image.mipmaps.length;\n\n\t\t} else {\n\n\t\t\t// texture without mipmaps (only base level)\n\n\t\t\treturn 1;\n\n\t\t}\n\n\t}\n\n\t// Fallback filters for non-power-of-2 textures\n\n\tfunction filterFallback( f ) {\n\n\t\tif ( f === NearestFilter || f === NearestMipmapNearestFilter || f === NearestMipmapLinearFilter ) {\n\n\t\t\treturn 9728;\n\n\t\t}\n\n\t\treturn 9729;\n\n\t}\n\n\t//\n\n\tfunction onTextureDispose( event ) {\n\n\t\tconst texture = event.target;\n\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\tdeallocateTexture( texture );\n\n\t\tif ( texture.isVideoTexture ) {\n\n\t\t\t_videoTextures.delete( texture );\n\n\t\t}\n\n\t}\n\n\tfunction onRenderTargetDispose( event ) {\n\n\t\tconst renderTarget = event.target;\n\n\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\n\n\t\tdeallocateRenderTarget( renderTarget );\n\n\t}\n\n\t//\n\n\tfunction deallocateTexture( texture ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( textureProperties.__webglInit === undefined ) return;\n\n\t\t// check if it's necessary to remove the WebGLTexture object\n\n\t\tconst source = texture.source;\n\t\tconst webglTextures = _sources.get( source );\n\n\t\tif ( webglTextures ) {\n\n\t\t\tconst webglTexture = webglTextures[ textureProperties.__cacheKey ];\n\t\t\twebglTexture.usedTimes --;\n\n\t\t\t// the WebGLTexture object is not used anymore, remove it\n\n\t\t\tif ( webglTexture.usedTimes === 0 ) {\n\n\t\t\t\tdeleteTexture( texture );\n\n\t\t\t}\n\n\t\t\t// remove the weak map entry if no WebGLTexture uses the source anymore\n\n\t\t\tif ( Object.keys( webglTextures ).length === 0 ) {\n\n\t\t\t\t_sources.delete( source );\n\n\t\t\t}\n\n\t\t}\n\n\t\tproperties.remove( texture );\n\n\t}\n\n\tfunction deleteTexture( texture ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\tconst source = texture.source;\n\t\tconst webglTextures = _sources.get( source );\n\t\tdelete webglTextures[ textureProperties.__cacheKey ];\n\n\t\tinfo.memory.textures --;\n\n\t}\n\n\tfunction deallocateRenderTarget( renderTarget ) {\n\n\t\tconst texture = renderTarget.texture;\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( textureProperties.__webglTexture !== undefined ) {\n\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\t\tinfo.memory.textures --;\n\n\t\t}\n\n\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\trenderTarget.depthTexture.dispose();\n\n\t\t}\n\n\t\tif ( renderTarget.isWebGLCubeRenderTarget ) {\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer[ i ] );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer );\n\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer );\n\t\t\tif ( renderTargetProperties.__webglMultisampledFramebuffer ) _gl.deleteFramebuffer( renderTargetProperties.__webglMultisampledFramebuffer );\n\n\t\t\tif ( renderTargetProperties.__webglColorRenderbuffer ) {\n\n\t\t\t\tfor ( let i = 0; i < renderTargetProperties.__webglColorRenderbuffer.length; i ++ ) {\n\n\t\t\t\t\tif ( renderTargetProperties.__webglColorRenderbuffer[ i ] ) _gl.deleteRenderbuffer( renderTargetProperties.__webglColorRenderbuffer[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( renderTargetProperties.__webglDepthRenderbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthRenderbuffer );\n\n\t\t}\n\n\t\tif ( renderTarget.isWebGLMultipleRenderTargets ) {\n\n\t\t\tfor ( let i = 0, il = texture.length; i < il; i ++ ) {\n\n\t\t\t\tconst attachmentProperties = properties.get( texture[ i ] );\n\n\t\t\t\tif ( attachmentProperties.__webglTexture ) {\n\n\t\t\t\t\t_gl.deleteTexture( attachmentProperties.__webglTexture );\n\n\t\t\t\t\tinfo.memory.textures --;\n\n\t\t\t\t}\n\n\t\t\t\tproperties.remove( texture[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tproperties.remove( texture );\n\t\tproperties.remove( renderTarget );\n\n\t}\n\n\t//\n\n\tlet textureUnits = 0;\n\n\tfunction resetTextureUnits() {\n\n\t\ttextureUnits = 0;\n\n\t}\n\n\tfunction allocateTextureUnit() {\n\n\t\tconst textureUnit = textureUnits;\n\n\t\tif ( textureUnit >= maxTextures ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLTextures: Trying to use ' + textureUnit + ' texture units while this GPU supports only ' + maxTextures );\n\n\t\t}\n\n\t\ttextureUnits += 1;\n\n\t\treturn textureUnit;\n\n\t}\n\n\tfunction getTextureCacheKey( texture ) {\n\n\t\tconst array = [];\n\n\t\tarray.push( texture.wrapS );\n\t\tarray.push( texture.wrapT );\n\t\tarray.push( texture.magFilter );\n\t\tarray.push( texture.minFilter );\n\t\tarray.push( texture.anisotropy );\n\t\tarray.push( texture.internalFormat );\n\t\tarray.push( texture.format );\n\t\tarray.push( texture.type );\n\t\tarray.push( texture.generateMipmaps );\n\t\tarray.push( texture.premultiplyAlpha );\n\t\tarray.push( texture.flipY );\n\t\tarray.push( texture.unpackAlignment );\n\t\tarray.push( texture.encoding );\n\n\t\treturn array.join();\n\n\t}\n\n\t//\n\n\tfunction setTexture2D( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.isVideoTexture ) updateVideoTexture( texture );\n\n\t\tif ( texture.isRenderTargetTexture === false && texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tconst image = texture.image;\n\n\t\t\tif ( image === null ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but no image data found.' );\n\n\t\t\t} else if ( image.complete === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is incomplete' );\n\n\t\t\t} else {\n\n\t\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.bindTexture( 3553, textureProperties.__webglTexture, 33984 + slot );\n\n\t}\n\n\tfunction setTexture2DArray( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.bindTexture( 35866, textureProperties.__webglTexture, 33984 + slot );\n\n\t}\n\n\tfunction setTexture3D( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.bindTexture( 32879, textureProperties.__webglTexture, 33984 + slot );\n\n\t}\n\n\tfunction setTextureCube( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadCubeTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.bindTexture( 34067, textureProperties.__webglTexture, 33984 + slot );\n\n\t}\n\n\tconst wrappingToGL = {\n\t\t[ RepeatWrapping ]: 10497,\n\t\t[ ClampToEdgeWrapping ]: 33071,\n\t\t[ MirroredRepeatWrapping ]: 33648\n\t};\n\n\tconst filterToGL = {\n\t\t[ NearestFilter ]: 9728,\n\t\t[ NearestMipmapNearestFilter ]: 9984,\n\t\t[ NearestMipmapLinearFilter ]: 9986,\n\n\t\t[ LinearFilter ]: 9729,\n\t\t[ LinearMipmapNearestFilter ]: 9985,\n\t\t[ LinearMipmapLinearFilter ]: 9987\n\t};\n\n\tfunction setTextureParameters( textureType, texture, supportsMips ) {\n\n\t\tif ( supportsMips ) {\n\n\t\t\t_gl.texParameteri( textureType, 10242, wrappingToGL[ texture.wrapS ] );\n\t\t\t_gl.texParameteri( textureType, 10243, wrappingToGL[ texture.wrapT ] );\n\n\t\t\tif ( textureType === 32879 || textureType === 35866 ) {\n\n\t\t\t\t_gl.texParameteri( textureType, 32882, wrappingToGL[ texture.wrapR ] );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, 10240, filterToGL[ texture.magFilter ] );\n\t\t\t_gl.texParameteri( textureType, 10241, filterToGL[ texture.minFilter ] );\n\n\t\t} else {\n\n\t\t\t_gl.texParameteri( textureType, 10242, 33071 );\n\t\t\t_gl.texParameteri( textureType, 10243, 33071 );\n\n\t\t\tif ( textureType === 32879 || textureType === 35866 ) {\n\n\t\t\t\t_gl.texParameteri( textureType, 32882, 33071 );\n\n\t\t\t}\n\n\t\t\tif ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.' );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, 10240, filterFallback( texture.magFilter ) );\n\t\t\t_gl.texParameteri( textureType, 10241, filterFallback( texture.minFilter ) );\n\n\t\t\tif ( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( extensions.has( 'EXT_texture_filter_anisotropic' ) === true ) {\n\n\t\t\tconst extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\t\tif ( texture.type === FloatType && extensions.has( 'OES_texture_float_linear' ) === false ) return; // verify extension for WebGL 1 and WebGL 2\n\t\t\tif ( isWebGL2 === false && ( texture.type === HalfFloatType && extensions.has( 'OES_texture_half_float_linear' ) === false ) ) return; // verify extension for WebGL 1 only\n\n\t\t\tif ( texture.anisotropy > 1 || properties.get( texture ).__currentAnisotropy ) {\n\n\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, capabilities.getMaxAnisotropy() ) );\n\t\t\t\tproperties.get( texture ).__currentAnisotropy = texture.anisotropy;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction initTexture( textureProperties, texture ) {\n\n\t\tlet forceUpload = false;\n\n\t\tif ( textureProperties.__webglInit === undefined ) {\n\n\t\t\ttextureProperties.__webglInit = true;\n\n\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t}\n\n\t\t// create Source <-> WebGLTextures mapping if necessary\n\n\t\tconst source = texture.source;\n\t\tlet webglTextures = _sources.get( source );\n\n\t\tif ( webglTextures === undefined ) {\n\n\t\t\twebglTextures = {};\n\t\t\t_sources.set( source, webglTextures );\n\n\t\t}\n\n\t\t// check if there is already a WebGLTexture object for the given texture parameters\n\n\t\tconst textureCacheKey = getTextureCacheKey( texture );\n\n\t\tif ( textureCacheKey !== textureProperties.__cacheKey ) {\n\n\t\t\t// if not, create a new instance of WebGLTexture\n\n\t\t\tif ( webglTextures[ textureCacheKey ] === undefined ) {\n\n\t\t\t\t// create new entry\n\n\t\t\t\twebglTextures[ textureCacheKey ] = {\n\t\t\t\t\ttexture: _gl.createTexture(),\n\t\t\t\t\tusedTimes: 0\n\t\t\t\t};\n\n\t\t\t\tinfo.memory.textures ++;\n\n\t\t\t\t// when a new instance of WebGLTexture was created, a texture upload is required\n\t\t\t\t// even if the image contents are identical\n\n\t\t\t\tforceUpload = true;\n\n\t\t\t}\n\n\t\t\twebglTextures[ textureCacheKey ].usedTimes ++;\n\n\t\t\t// every time the texture cache key changes, it's necessary to check if an instance of\n\t\t\t// WebGLTexture can be deleted in order to avoid a memory leak.\n\n\t\t\tconst webglTexture = webglTextures[ textureProperties.__cacheKey ];\n\n\t\t\tif ( webglTexture !== undefined ) {\n\n\t\t\t\twebglTextures[ textureProperties.__cacheKey ].usedTimes --;\n\n\t\t\t\tif ( webglTexture.usedTimes === 0 ) {\n\n\t\t\t\t\tdeleteTexture( texture );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// store references to cache key and WebGLTexture object\n\n\t\t\ttextureProperties.__cacheKey = textureCacheKey;\n\t\t\ttextureProperties.__webglTexture = webglTextures[ textureCacheKey ].texture;\n\n\t\t}\n\n\t\treturn forceUpload;\n\n\t}\n\n\tfunction uploadTexture( textureProperties, texture, slot ) {\n\n\t\tlet textureType = 3553;\n\n\t\tif ( texture.isDataArrayTexture ) textureType = 35866;\n\t\tif ( texture.isData3DTexture ) textureType = 32879;\n\n\t\tconst forceUpload = initTexture( textureProperties, texture );\n\t\tconst source = texture.source;\n\n\t\tstate.bindTexture( textureType, textureProperties.__webglTexture, 33984 + slot );\n\n\t\tconst sourceProperties = properties.get( source );\n\n\t\tif ( source.version !== sourceProperties.__version || forceUpload === true ) {\n\n\t\t\tstate.activeTexture( 33984 + slot );\n\n\t\t\t_gl.pixelStorei( 37440, texture.flipY );\n\t\t\t_gl.pixelStorei( 37441, texture.premultiplyAlpha );\n\t\t\t_gl.pixelStorei( 3317, texture.unpackAlignment );\n\t\t\t_gl.pixelStorei( 37443, 0 );\n\n\t\t\tconst needsPowerOfTwo = textureNeedsPowerOfTwo( texture ) && isPowerOfTwo$1( texture.image ) === false;\n\t\t\tlet image = resizeImage( texture.image, needsPowerOfTwo, false, maxTextureSize );\n\t\t\timage = verifyColorSpace( texture, image );\n\n\t\t\tconst supportsMips = isPowerOfTwo$1( image ) || isWebGL2,\n\t\t\t\tglFormat = utils.convert( texture.format, texture.encoding );\n\n\t\t\tlet glType = utils.convert( texture.type ),\n\t\t\t\tglInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType, texture.encoding, texture.isVideoTexture );\n\n\t\t\tsetTextureParameters( textureType, texture, supportsMips );\n\n\t\t\tlet mipmap;\n\t\t\tconst mipmaps = texture.mipmaps;\n\n\t\t\tconst useTexStorage = ( isWebGL2 && texture.isVideoTexture !== true );\n\t\t\tconst allocateMemory = ( sourceProperties.__version === undefined ) || ( forceUpload === true );\n\t\t\tconst levels = getMipLevels( texture, image, supportsMips );\n\n\t\t\tif ( texture.isDepthTexture ) {\n\n\t\t\t\t// populate depth texture with dummy data\n\n\t\t\t\tglInternalFormat = 6402;\n\n\t\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t\tif ( texture.type === FloatType ) {\n\n\t\t\t\t\t\tglInternalFormat = 36012;\n\n\t\t\t\t\t} else if ( texture.type === UnsignedIntType ) {\n\n\t\t\t\t\t\tglInternalFormat = 33190;\n\n\t\t\t\t\t} else if ( texture.type === UnsignedInt248Type ) {\n\n\t\t\t\t\t\tglInternalFormat = 35056;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tglInternalFormat = 33189; // WebGL2 requires sized internalformat for glTexImage2D\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( texture.type === FloatType ) {\n\n\t\t\t\t\t\tconsole.error( 'WebGLRenderer: Floating point depth texture requires WebGL2.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// validation checks for WebGL 1\n\n\t\t\t\tif ( texture.format === DepthFormat && glInternalFormat === 6402 ) {\n\n\t\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t\t// DEPTH_COMPONENT and type is not UNSIGNED_SHORT or UNSIGNED_INT\n\t\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\t\tif ( texture.type !== UnsignedShortType && texture.type !== UnsignedIntType ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.' );\n\n\t\t\t\t\t\ttexture.type = UnsignedIntType;\n\t\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( texture.format === DepthStencilFormat && glInternalFormat === 6402 ) {\n\n\t\t\t\t\t// Depth stencil textures need the DEPTH_STENCIL internal format\n\t\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\t\tglInternalFormat = 34041;\n\n\t\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t\t// DEPTH_STENCIL and type is not UNSIGNED_INT_24_8_WEBGL.\n\t\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\t\tif ( texture.type !== UnsignedInt248Type ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.' );\n\n\t\t\t\t\t\ttexture.type = UnsignedInt248Type;\n\t\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t//\n\n\t\t\t\tif ( allocateMemory ) {\n\n\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\tstate.texStorage2D( 3553, 1, glInternalFormat, image.width, image.height );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tstate.texImage2D( 3553, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( texture.isDataTexture ) {\n\n\t\t\t\t// use manually created mipmaps if available\n\t\t\t\t// if there are no manual mipmaps\n\t\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\t\tif ( mipmaps.length > 0 && supportsMips ) {\n\n\t\t\t\t\tif ( useTexStorage && allocateMemory ) {\n\n\t\t\t\t\t\tstate.texStorage2D( 3553, levels, glInternalFormat, mipmaps[ 0 ].width, mipmaps[ 0 ].height );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\tstate.texSubImage2D( 3553, i, 0, 0, mipmap.width, mipmap.height, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.texImage2D( 3553, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttexture.generateMipmaps = false;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\tif ( allocateMemory ) {\n\n\t\t\t\t\t\t\tstate.texStorage2D( 3553, levels, glInternalFormat, image.width, image.height );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstate.texSubImage2D( 3553, 0, 0, 0, image.width, image.height, glFormat, glType, image.data );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tstate.texImage2D( 3553, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, image.data );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( texture.isCompressedTexture ) {\n\n\t\t\t\tif ( useTexStorage && allocateMemory ) {\n\n\t\t\t\t\tstate.texStorage2D( 3553, levels, glInternalFormat, mipmaps[ 0 ].width, mipmaps[ 0 ].height );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\t\tif ( texture.format !== RGBAFormat ) {\n\n\t\t\t\t\t\tif ( glFormat !== null ) {\n\n\t\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\t\tstate.compressedTexSubImage2D( 3553, i, 0, 0, mipmap.width, mipmap.height, glFormat, mipmap.data );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tstate.compressedTexImage2D( 3553, i, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()' );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\tstate.texSubImage2D( 3553, i, 0, 0, mipmap.width, mipmap.height, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.texImage2D( 3553, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( texture.isDataArrayTexture ) {\n\n\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\tif ( allocateMemory ) {\n\n\t\t\t\t\t\tstate.texStorage3D( 35866, levels, glInternalFormat, image.width, image.height, image.depth );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tstate.texSubImage3D( 35866, 0, 0, 0, 0, image.width, image.height, image.depth, glFormat, glType, image.data );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstate.texImage3D( 35866, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data );\n\n\t\t\t\t}\n\n\t\t\t} else if ( texture.isData3DTexture ) {\n\n\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\tif ( allocateMemory ) {\n\n\t\t\t\t\t\tstate.texStorage3D( 32879, levels, glInternalFormat, image.width, image.height, image.depth );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tstate.texSubImage3D( 32879, 0, 0, 0, 0, image.width, image.height, image.depth, glFormat, glType, image.data );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstate.texImage3D( 32879, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data );\n\n\t\t\t\t}\n\n\t\t\t} else if ( texture.isFramebufferTexture ) {\n\n\t\t\t\tif ( allocateMemory ) {\n\n\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\tstate.texStorage2D( 3553, levels, glInternalFormat, image.width, image.height );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tlet width = image.width, height = image.height;\n\n\t\t\t\t\t\tfor ( let i = 0; i < levels; i ++ ) {\n\n\t\t\t\t\t\t\tstate.texImage2D( 3553, i, glInternalFormat, width, height, 0, glFormat, glType, null );\n\n\t\t\t\t\t\t\twidth >>= 1;\n\t\t\t\t\t\t\theight >>= 1;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// regular Texture (image, video, canvas)\n\n\t\t\t\t// use manually created mipmaps if available\n\t\t\t\t// if there are no manual mipmaps\n\t\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\t\tif ( mipmaps.length > 0 && supportsMips ) {\n\n\t\t\t\t\tif ( useTexStorage && allocateMemory ) {\n\n\t\t\t\t\t\tstate.texStorage2D( 3553, levels, glInternalFormat, mipmaps[ 0 ].width, mipmaps[ 0 ].height );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\tstate.texSubImage2D( 3553, i, 0, 0, glFormat, glType, mipmap );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.texImage2D( 3553, i, glInternalFormat, glFormat, glType, mipmap );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttexture.generateMipmaps = false;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\tif ( allocateMemory ) {\n\n\t\t\t\t\t\t\tstate.texStorage2D( 3553, levels, glInternalFormat, image.width, image.height );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstate.texSubImage2D( 3553, 0, 0, 0, glFormat, glType, image );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tstate.texImage2D( 3553, 0, glInternalFormat, glFormat, glType, image );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t\tgenerateMipmap( textureType );\n\n\t\t\t}\n\n\t\t\tsourceProperties.__version = source.version;\n\n\t\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t\t}\n\n\t\ttextureProperties.__version = texture.version;\n\n\t}\n\n\tfunction uploadCubeTexture( textureProperties, texture, slot ) {\n\n\t\tif ( texture.image.length !== 6 ) return;\n\n\t\tconst forceUpload = initTexture( textureProperties, texture );\n\t\tconst source = texture.source;\n\n\t\tstate.bindTexture( 34067, textureProperties.__webglTexture, 33984 + slot );\n\n\t\tconst sourceProperties = properties.get( source );\n\n\t\tif ( source.version !== sourceProperties.__version || forceUpload === true ) {\n\n\t\t\tstate.activeTexture( 33984 + slot );\n\n\t\t\t_gl.pixelStorei( 37440, texture.flipY );\n\t\t\t_gl.pixelStorei( 37441, texture.premultiplyAlpha );\n\t\t\t_gl.pixelStorei( 3317, texture.unpackAlignment );\n\t\t\t_gl.pixelStorei( 37443, 0 );\n\n\t\t\tconst isCompressed = ( texture.isCompressedTexture || texture.image[ 0 ].isCompressedTexture );\n\t\t\tconst isDataTexture = ( texture.image[ 0 ] && texture.image[ 0 ].isDataTexture );\n\n\t\t\tconst cubeImage = [];\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\tif ( ! isCompressed && ! isDataTexture ) {\n\n\t\t\t\t\tcubeImage[ i ] = resizeImage( texture.image[ i ], false, true, maxCubemapSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\n\n\t\t\t\t}\n\n\t\t\t\tcubeImage[ i ] = verifyColorSpace( texture, cubeImage[ i ] );\n\n\t\t\t}\n\n\t\t\tconst image = cubeImage[ 0 ],\n\t\t\t\tsupportsMips = isPowerOfTwo$1( image ) || isWebGL2,\n\t\t\t\tglFormat = utils.convert( texture.format, texture.encoding ),\n\t\t\t\tglType = utils.convert( texture.type ),\n\t\t\t\tglInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType, texture.encoding );\n\n\t\t\tconst useTexStorage = ( isWebGL2 && texture.isVideoTexture !== true );\n\t\t\tconst allocateMemory = ( sourceProperties.__version === undefined ) || ( forceUpload === true );\n\t\t\tlet levels = getMipLevels( texture, image, supportsMips );\n\n\t\t\tsetTextureParameters( 34067, texture, supportsMips );\n\n\t\t\tlet mipmaps;\n\n\t\t\tif ( isCompressed ) {\n\n\t\t\t\tif ( useTexStorage && allocateMemory ) {\n\n\t\t\t\t\tstate.texStorage2D( 34067, levels, glInternalFormat, image.width, image.height );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tmipmaps = cubeImage[ i ].mipmaps;\n\n\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\n\n\t\t\t\t\t\tif ( texture.format !== RGBAFormat ) {\n\n\t\t\t\t\t\t\tif ( glFormat !== null ) {\n\n\t\t\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\t\t\tstate.compressedTexSubImage2D( 34069 + i, j, 0, 0, mipmap.width, mipmap.height, glFormat, mipmap.data );\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\tstate.compressedTexImage2D( 34069 + i, j, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()' );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\t\tstate.texSubImage2D( 34069 + i, j, 0, 0, mipmap.width, mipmap.height, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tstate.texImage2D( 34069 + i, j, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tmipmaps = texture.mipmaps;\n\n\t\t\t\tif ( useTexStorage && allocateMemory ) {\n\n\t\t\t\t\t// TODO: Uniformly handle mipmap definitions\n\t\t\t\t\t// Normal textures and compressed cube textures define base level + mips with their mipmap array\n\t\t\t\t\t// Uncompressed cube textures use their mipmap array only for mips (no base level)\n\n\t\t\t\t\tif ( mipmaps.length > 0 ) levels ++;\n\n\t\t\t\t\tstate.texStorage2D( 34067, levels, glInternalFormat, cubeImage[ 0 ].width, cubeImage[ 0 ].height );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tif ( isDataTexture ) {\n\n\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\tstate.texSubImage2D( 34069 + i, 0, 0, 0, cubeImage[ i ].width, cubeImage[ i ].height, glFormat, glType, cubeImage[ i ].data );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.texImage2D( 34069 + i, 0, glInternalFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\n\t\t\t\t\t\t\tconst mipmapImage = mipmap.image[ i ].image;\n\n\t\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\t\tstate.texSubImage2D( 34069 + i, j + 1, 0, 0, mipmapImage.width, mipmapImage.height, glFormat, glType, mipmapImage.data );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tstate.texImage2D( 34069 + i, j + 1, glInternalFormat, mipmapImage.width, mipmapImage.height, 0, glFormat, glType, mipmapImage.data );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\tstate.texSubImage2D( 34069 + i, 0, 0, 0, glFormat, glType, cubeImage[ i ] );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.texImage2D( 34069 + i, 0, glInternalFormat, glFormat, glType, cubeImage[ i ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\n\n\t\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\t\tstate.texSubImage2D( 34069 + i, j + 1, 0, 0, glFormat, glType, mipmap.image[ i ] );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tstate.texImage2D( 34069 + i, j + 1, glInternalFormat, glFormat, glType, mipmap.image[ i ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t\t// We assume images for cube map have the same size.\n\t\t\t\tgenerateMipmap( 34067 );\n\n\t\t\t}\n\n\t\t\tsourceProperties.__version = source.version;\n\n\t\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t\t}\n\n\t\ttextureProperties.__version = texture.version;\n\n\t}\n\n\t// Render targets\n\n\t// Setup storage for target texture and bind it to correct framebuffer\n\tfunction setupFrameBufferTexture( framebuffer, renderTarget, texture, attachment, textureTarget ) {\n\n\t\tconst glFormat = utils.convert( texture.format, texture.encoding );\n\t\tconst glType = utils.convert( texture.type );\n\t\tconst glInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType, texture.encoding );\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\n\t\tif ( ! renderTargetProperties.__hasExternalTextures ) {\n\n\t\t\tif ( textureTarget === 32879 || textureTarget === 35866 ) {\n\n\t\t\t\tstate.texImage3D( textureTarget, 0, glInternalFormat, renderTarget.width, renderTarget.height, renderTarget.depth, 0, glFormat, glType, null );\n\n\t\t\t} else {\n\n\t\t\t\tstate.texImage2D( textureTarget, 0, glInternalFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.bindFramebuffer( 36160, framebuffer );\n\n\t\tif ( useMultisampledRTT( renderTarget ) ) {\n\n\t\t\tmultisampledRTTExt.framebufferTexture2DMultisampleEXT( 36160, attachment, textureTarget, properties.get( texture ).__webglTexture, 0, getRenderTargetSamples( renderTarget ) );\n\n\t\t} else {\n\n\t\t\t_gl.framebufferTexture2D( 36160, attachment, textureTarget, properties.get( texture ).__webglTexture, 0 );\n\n\t\t}\n\n\t\tstate.bindFramebuffer( 36160, null );\n\n\t}\n\n\n\t// Setup storage for internal depth/stencil buffers and bind to correct framebuffer\n\tfunction setupRenderBufferStorage( renderbuffer, renderTarget, isMultisample ) {\n\n\t\t_gl.bindRenderbuffer( 36161, renderbuffer );\n\n\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\n\n\t\t\tlet glInternalFormat = 33189;\n\n\t\t\tif ( isMultisample || useMultisampledRTT( renderTarget ) ) {\n\n\t\t\t\tconst depthTexture = renderTarget.depthTexture;\n\n\t\t\t\tif ( depthTexture && depthTexture.isDepthTexture ) {\n\n\t\t\t\t\tif ( depthTexture.type === FloatType ) {\n\n\t\t\t\t\t\tglInternalFormat = 36012;\n\n\t\t\t\t\t} else if ( depthTexture.type === UnsignedIntType ) {\n\n\t\t\t\t\t\tglInternalFormat = 33190;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\tif ( useMultisampledRTT( renderTarget ) ) {\n\n\t\t\t\t\tmultisampledRTTExt.renderbufferStorageMultisampleEXT( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( 36161, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\t_gl.framebufferRenderbuffer( 36160, 36096, 36161, renderbuffer );\n\n\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\n\n\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\t\tif ( isMultisample && useMultisampledRTT( renderTarget ) === false ) {\n\n\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, 35056, renderTarget.width, renderTarget.height );\n\n\t\t\t} else if ( useMultisampledRTT( renderTarget ) ) {\n\n\t\t\t\tmultisampledRTTExt.renderbufferStorageMultisampleEXT( 36161, samples, 35056, renderTarget.width, renderTarget.height );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( 36161, 34041, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\n\t\t\t_gl.framebufferRenderbuffer( 36160, 33306, 36161, renderbuffer );\n\n\t\t} else {\n\n\t\t\tconst textures = renderTarget.isWebGLMultipleRenderTargets === true ? renderTarget.texture : [ renderTarget.texture ];\n\n\t\t\tfor ( let i = 0; i < textures.length; i ++ ) {\n\n\t\t\t\tconst texture = textures[ i ];\n\n\t\t\t\tconst glFormat = utils.convert( texture.format, texture.encoding );\n\t\t\t\tconst glType = utils.convert( texture.type );\n\t\t\t\tconst glInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType, texture.encoding );\n\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\tif ( isMultisample && useMultisampledRTT( renderTarget ) === false ) {\n\n\t\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t} else if ( useMultisampledRTT( renderTarget ) ) {\n\n\t\t\t\t\tmultisampledRTTExt.renderbufferStorageMultisampleEXT( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_gl.renderbufferStorage( 36161, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t_gl.bindRenderbuffer( 36161, null );\n\n\t}\n\n\t// Setup resources for a Depth Texture for a FBO (needs an extension)\n\tfunction setupDepthTexture( framebuffer, renderTarget ) {\n\n\t\tconst isCube = ( renderTarget && renderTarget.isWebGLCubeRenderTarget );\n\t\tif ( isCube ) throw new Error( 'Depth Texture with cube render targets is not supported' );\n\n\t\tstate.bindFramebuffer( 36160, framebuffer );\n\n\t\tif ( ! ( renderTarget.depthTexture && renderTarget.depthTexture.isDepthTexture ) ) {\n\n\t\t\tthrow new Error( 'renderTarget.depthTexture must be an instance of THREE.DepthTexture' );\n\n\t\t}\n\n\t\t// upload an empty depth texture with framebuffer size\n\t\tif ( ! properties.get( renderTarget.depthTexture ).__webglTexture ||\n\t\t\t\trenderTarget.depthTexture.image.width !== renderTarget.width ||\n\t\t\t\trenderTarget.depthTexture.image.height !== renderTarget.height ) {\n\n\t\t\trenderTarget.depthTexture.image.width = renderTarget.width;\n\t\t\trenderTarget.depthTexture.image.height = renderTarget.height;\n\t\t\trenderTarget.depthTexture.needsUpdate = true;\n\n\t\t}\n\n\t\tsetTexture2D( renderTarget.depthTexture, 0 );\n\n\t\tconst webglDepthTexture = properties.get( renderTarget.depthTexture ).__webglTexture;\n\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\tif ( renderTarget.depthTexture.format === DepthFormat ) {\n\n\t\t\tif ( useMultisampledRTT( renderTarget ) ) {\n\n\t\t\t\tmultisampledRTTExt.framebufferTexture2DMultisampleEXT( 36160, 36096, 3553, webglDepthTexture, 0, samples );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.framebufferTexture2D( 36160, 36096, 3553, webglDepthTexture, 0 );\n\n\t\t\t}\n\n\t\t} else if ( renderTarget.depthTexture.format === DepthStencilFormat ) {\n\n\t\t\tif ( useMultisampledRTT( renderTarget ) ) {\n\n\t\t\t\tmultisampledRTTExt.framebufferTexture2DMultisampleEXT( 36160, 33306, 3553, webglDepthTexture, 0, samples );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.framebufferTexture2D( 36160, 33306, 3553, webglDepthTexture, 0 );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'Unknown depthTexture format' );\n\n\t\t}\n\n\t}\n\n\t// Setup GL resources for a non-texture depth buffer\n\tfunction setupDepthRenderbuffer( renderTarget ) {\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\tconst isCube = ( renderTarget.isWebGLCubeRenderTarget === true );\n\n\t\tif ( renderTarget.depthTexture && ! renderTargetProperties.__autoAllocateDepthBuffer ) {\n\n\t\t\tif ( isCube ) throw new Error( 'target.depthTexture not supported in Cube render targets' );\n\n\t\t\tsetupDepthTexture( renderTargetProperties.__webglFramebuffer, renderTarget );\n\n\t\t} else {\n\n\t\t\tif ( isCube ) {\n\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = [];\n\n\t\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tstate.bindFramebuffer( 36160, renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\t\trenderTargetProperties.__webglDepthbuffer[ i ] = _gl.createRenderbuffer();\n\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer[ i ], renderTarget, false );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tstate.bindFramebuffer( 36160, renderTargetProperties.__webglFramebuffer );\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = _gl.createRenderbuffer();\n\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer, renderTarget, false );\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.bindFramebuffer( 36160, null );\n\n\t}\n\n\t// rebind framebuffer with external textures\n\tfunction rebindTextures( renderTarget, colorTexture, depthTexture ) {\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\n\t\tif ( colorTexture !== undefined ) {\n\n\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, renderTarget.texture, 36064, 3553 );\n\n\t\t}\n\n\t\tif ( depthTexture !== undefined ) {\n\n\t\t\tsetupDepthRenderbuffer( renderTarget );\n\n\t\t}\n\n\t}\n\n\t// Set up GL resources for the render target\n\tfunction setupRenderTarget( renderTarget ) {\n\n\t\tconst texture = renderTarget.texture;\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\tconst textureProperties = properties.get( texture );\n\n\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\n\n\t\tif ( renderTarget.isWebGLMultipleRenderTargets !== true ) {\n\n\t\t\tif ( textureProperties.__webglTexture === undefined ) {\n\n\t\t\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\t\t}\n\n\t\t\ttextureProperties.__version = texture.version;\n\t\t\tinfo.memory.textures ++;\n\n\t\t}\n\n\t\tconst isCube = ( renderTarget.isWebGLCubeRenderTarget === true );\n\t\tconst isMultipleRenderTargets = ( renderTarget.isWebGLMultipleRenderTargets === true );\n\t\tconst supportsMips = isPowerOfTwo$1( renderTarget ) || isWebGL2;\n\n\t\t// Setup framebuffer\n\n\t\tif ( isCube ) {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = [];\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\trenderTargetProperties.__webglFramebuffer[ i ] = _gl.createFramebuffer();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = _gl.createFramebuffer();\n\n\t\t\tif ( isMultipleRenderTargets ) {\n\n\t\t\t\tif ( capabilities.drawBuffers ) {\n\n\t\t\t\t\tconst textures = renderTarget.texture;\n\n\t\t\t\t\tfor ( let i = 0, il = textures.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst attachmentProperties = properties.get( textures[ i ] );\n\n\t\t\t\t\t\tif ( attachmentProperties.__webglTexture === undefined ) {\n\n\t\t\t\t\t\t\tattachmentProperties.__webglTexture = _gl.createTexture();\n\n\t\t\t\t\t\t\tinfo.memory.textures ++;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( ( isWebGL2 && renderTarget.samples > 0 ) && useMultisampledRTT( renderTarget ) === false ) {\n\n\t\t\t\tconst textures = isMultipleRenderTargets ? texture : [ texture ];\n\n\t\t\t\trenderTargetProperties.__webglMultisampledFramebuffer = _gl.createFramebuffer();\n\t\t\t\trenderTargetProperties.__webglColorRenderbuffer = [];\n\n\t\t\t\tstate.bindFramebuffer( 36160, renderTargetProperties.__webglMultisampledFramebuffer );\n\n\t\t\t\tfor ( let i = 0; i < textures.length; i ++ ) {\n\n\t\t\t\t\tconst texture = textures[ i ];\n\t\t\t\t\trenderTargetProperties.__webglColorRenderbuffer[ i ] = _gl.createRenderbuffer();\n\n\t\t\t\t\t_gl.bindRenderbuffer( 36161, renderTargetProperties.__webglColorRenderbuffer[ i ] );\n\n\t\t\t\t\tconst glFormat = utils.convert( texture.format, texture.encoding );\n\t\t\t\t\tconst glType = utils.convert( texture.type );\n\t\t\t\t\tconst glInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType, texture.encoding, renderTarget.isXRRenderTarget === true );\n\t\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\t\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t\t_gl.framebufferRenderbuffer( 36160, 36064 + i, 36161, renderTargetProperties.__webglColorRenderbuffer[ i ] );\n\n\t\t\t\t}\n\n\t\t\t\t_gl.bindRenderbuffer( 36161, null );\n\n\t\t\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\t\t\trenderTargetProperties.__webglDepthRenderbuffer = _gl.createRenderbuffer();\n\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthRenderbuffer, renderTarget, true );\n\n\t\t\t\t}\n\n\t\t\t\tstate.bindFramebuffer( 36160, null );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Setup color buffer\n\n\t\tif ( isCube ) {\n\n\t\t\tstate.bindTexture( 34067, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( 34067, texture, supportsMips );\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer[ i ], renderTarget, texture, 36064, 34069 + i );\n\n\t\t\t}\n\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t\tgenerateMipmap( 34067 );\n\n\t\t\t}\n\n\t\t\tstate.unbindTexture();\n\n\t\t} else if ( isMultipleRenderTargets ) {\n\n\t\t\tconst textures = renderTarget.texture;\n\n\t\t\tfor ( let i = 0, il = textures.length; i < il; i ++ ) {\n\n\t\t\t\tconst attachment = textures[ i ];\n\t\t\t\tconst attachmentProperties = properties.get( attachment );\n\n\t\t\t\tstate.bindTexture( 3553, attachmentProperties.__webglTexture );\n\t\t\t\tsetTextureParameters( 3553, attachment, supportsMips );\n\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, attachment, 36064 + i, 3553 );\n\n\t\t\t\tif ( textureNeedsGenerateMipmaps( attachment, supportsMips ) ) {\n\n\t\t\t\t\tgenerateMipmap( 3553 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstate.unbindTexture();\n\n\t\t} else {\n\n\t\t\tlet glTextureType = 3553;\n\n\t\t\tif ( renderTarget.isWebGL3DRenderTarget || renderTarget.isWebGLArrayRenderTarget ) {\n\n\t\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t\tglTextureType = renderTarget.isWebGL3DRenderTarget ? 32879 : 35866;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstate.bindTexture( glTextureType, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( glTextureType, texture, supportsMips );\n\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, texture, 36064, glTextureType );\n\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t\tgenerateMipmap( glTextureType );\n\n\t\t\t}\n\n\t\t\tstate.unbindTexture();\n\n\t\t}\n\n\t\t// Setup depth and stencil buffers\n\n\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\tsetupDepthRenderbuffer( renderTarget );\n\n\t\t}\n\n\t}\n\n\tfunction updateRenderTargetMipmap( renderTarget ) {\n\n\t\tconst supportsMips = isPowerOfTwo$1( renderTarget ) || isWebGL2;\n\n\t\tconst textures = renderTarget.isWebGLMultipleRenderTargets === true ? renderTarget.texture : [ renderTarget.texture ];\n\n\t\tfor ( let i = 0, il = textures.length; i < il; i ++ ) {\n\n\t\t\tconst texture = textures[ i ];\n\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t\tconst target = renderTarget.isWebGLCubeRenderTarget ? 34067 : 3553;\n\t\t\t\tconst webglTexture = properties.get( texture ).__webglTexture;\n\n\t\t\t\tstate.bindTexture( target, webglTexture );\n\t\t\t\tgenerateMipmap( target );\n\t\t\t\tstate.unbindTexture();\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction updateMultisampleRenderTarget( renderTarget ) {\n\n\t\tif ( ( isWebGL2 && renderTarget.samples > 0 ) && useMultisampledRTT( renderTarget ) === false ) {\n\n\t\t\tconst textures = renderTarget.isWebGLMultipleRenderTargets ? renderTarget.texture : [ renderTarget.texture ];\n\t\t\tconst width = renderTarget.width;\n\t\t\tconst height = renderTarget.height;\n\t\t\tlet mask = 16384;\n\t\t\tconst invalidationArray = [];\n\t\t\tconst depthStyle = renderTarget.stencilBuffer ? 33306 : 36096;\n\t\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\t\tconst isMultipleRenderTargets = ( renderTarget.isWebGLMultipleRenderTargets === true );\n\n\t\t\t// If MRT we need to remove FBO attachments\n\t\t\tif ( isMultipleRenderTargets ) {\n\n\t\t\t\tfor ( let i = 0; i < textures.length; i ++ ) {\n\n\t\t\t\t\tstate.bindFramebuffer( 36160, renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\t\t\t_gl.framebufferRenderbuffer( 36160, 36064 + i, 36161, null );\n\n\t\t\t\t\tstate.bindFramebuffer( 36160, renderTargetProperties.__webglFramebuffer );\n\t\t\t\t\t_gl.framebufferTexture2D( 36009, 36064 + i, 3553, null, 0 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstate.bindFramebuffer( 36008, renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\tstate.bindFramebuffer( 36009, renderTargetProperties.__webglFramebuffer );\n\n\t\t\tfor ( let i = 0; i < textures.length; i ++ ) {\n\n\t\t\t\tinvalidationArray.push( 36064 + i );\n\n\t\t\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\t\t\tinvalidationArray.push( depthStyle );\n\n\t\t\t\t}\n\n\t\t\t\tconst ignoreDepthValues = ( renderTargetProperties.__ignoreDepthValues !== undefined ) ? renderTargetProperties.__ignoreDepthValues : false;\n\n\t\t\t\tif ( ignoreDepthValues === false ) {\n\n\t\t\t\t\tif ( renderTarget.depthBuffer ) mask |= 256;\n\t\t\t\t\tif ( renderTarget.stencilBuffer ) mask |= 1024;\n\n\t\t\t\t}\n\n\t\t\t\tif ( isMultipleRenderTargets ) {\n\n\t\t\t\t\t_gl.framebufferRenderbuffer( 36008, 36064, 36161, renderTargetProperties.__webglColorRenderbuffer[ i ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( ignoreDepthValues === true ) {\n\n\t\t\t\t\t_gl.invalidateFramebuffer( 36008, [ depthStyle ] );\n\t\t\t\t\t_gl.invalidateFramebuffer( 36009, [ depthStyle ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( isMultipleRenderTargets ) {\n\n\t\t\t\t\tconst webglTexture = properties.get( textures[ i ] ).__webglTexture;\n\t\t\t\t\t_gl.framebufferTexture2D( 36009, 36064, 3553, webglTexture, 0 );\n\n\t\t\t\t}\n\n\t\t\t\t_gl.blitFramebuffer( 0, 0, width, height, 0, 0, width, height, mask, 9728 );\n\n\t\t\t\tif ( supportsInvalidateFramebuffer ) {\n\n\t\t\t\t\t_gl.invalidateFramebuffer( 36008, invalidationArray );\n\n\t\t\t\t}\n\n\n\t\t\t}\n\n\t\t\tstate.bindFramebuffer( 36008, null );\n\t\t\tstate.bindFramebuffer( 36009, null );\n\n\t\t\t// If MRT since pre-blit we removed the FBO we need to reconstruct the attachments\n\t\t\tif ( isMultipleRenderTargets ) {\n\n\t\t\t\tfor ( let i = 0; i < textures.length; i ++ ) {\n\n\t\t\t\t\tstate.bindFramebuffer( 36160, renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\t\t\t_gl.framebufferRenderbuffer( 36160, 36064 + i, 36161, renderTargetProperties.__webglColorRenderbuffer[ i ] );\n\n\t\t\t\t\tconst webglTexture = properties.get( textures[ i ] ).__webglTexture;\n\n\t\t\t\t\tstate.bindFramebuffer( 36160, renderTargetProperties.__webglFramebuffer );\n\t\t\t\t\t_gl.framebufferTexture2D( 36009, 36064 + i, 3553, webglTexture, 0 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstate.bindFramebuffer( 36009, renderTargetProperties.__webglMultisampledFramebuffer );\n\n\t\t}\n\n\t}\n\n\tfunction getRenderTargetSamples( renderTarget ) {\n\n\t\treturn Math.min( maxSamples, renderTarget.samples );\n\n\t}\n\n\tfunction useMultisampledRTT( renderTarget ) {\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\n\t\treturn isWebGL2 && renderTarget.samples > 0 && extensions.has( 'WEBGL_multisampled_render_to_texture' ) === true && renderTargetProperties.__useRenderToTexture !== false;\n\n\t}\n\n\tfunction updateVideoTexture( texture ) {\n\n\t\tconst frame = info.render.frame;\n\n\t\t// Check the last frame we updated the VideoTexture\n\n\t\tif ( _videoTextures.get( texture ) !== frame ) {\n\n\t\t\t_videoTextures.set( texture, frame );\n\t\t\ttexture.update();\n\n\t\t}\n\n\t}\n\n\tfunction verifyColorSpace( texture, image ) {\n\n\t\tconst encoding = texture.encoding;\n\t\tconst format = texture.format;\n\t\tconst type = texture.type;\n\n\t\tif ( texture.isCompressedTexture === true || texture.isVideoTexture === true || texture.format === _SRGBAFormat ) return image;\n\n\t\tif ( encoding !== LinearEncoding ) {\n\n\t\t\t// sRGB\n\n\t\t\tif ( encoding === sRGBEncoding ) {\n\n\t\t\t\tif ( isWebGL2 === false ) {\n\n\t\t\t\t\t// in WebGL 1, try to use EXT_sRGB extension and unsized formats\n\n\t\t\t\t\tif ( extensions.has( 'EXT_sRGB' ) === true && format === RGBAFormat ) {\n\n\t\t\t\t\t\ttexture.format = _SRGBAFormat;\n\n\t\t\t\t\t\t// it's not possible to generate mips in WebGL 1 with this extension\n\n\t\t\t\t\t\ttexture.minFilter = LinearFilter;\n\t\t\t\t\t\ttexture.generateMipmaps = false;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// slow fallback (CPU decode)\n\n\t\t\t\t\t\timage = ImageUtils.sRGBToLinear( image );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// in WebGL 2 uncompressed textures can only be sRGB encoded if they have the RGBA8 format\n\n\t\t\t\t\tif ( format !== RGBAFormat || type !== UnsignedByteType ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'THREE.WebGLTextures: Unsupported texture encoding:', encoding );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn image;\n\n\t}\n\n\t//\n\n\tthis.allocateTextureUnit = allocateTextureUnit;\n\tthis.resetTextureUnits = resetTextureUnits;\n\n\tthis.setTexture2D = setTexture2D;\n\tthis.setTexture2DArray = setTexture2DArray;\n\tthis.setTexture3D = setTexture3D;\n\tthis.setTextureCube = setTextureCube;\n\tthis.rebindTextures = rebindTextures;\n\tthis.setupRenderTarget = setupRenderTarget;\n\tthis.updateRenderTargetMipmap = updateRenderTargetMipmap;\n\tthis.updateMultisampleRenderTarget = updateMultisampleRenderTarget;\n\tthis.setupDepthRenderbuffer = setupDepthRenderbuffer;\n\tthis.setupFrameBufferTexture = setupFrameBufferTexture;\n\tthis.useMultisampledRTT = useMultisampledRTT;\n\n}\n\nfunction WebGLUtils( gl, extensions, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tfunction convert( p, encoding = null ) {\n\n\t\tlet extension;\n\n\t\tif ( p === UnsignedByteType ) return 5121;\n\t\tif ( p === UnsignedShort4444Type ) return 32819;\n\t\tif ( p === UnsignedShort5551Type ) return 32820;\n\n\t\tif ( p === ByteType ) return 5120;\n\t\tif ( p === ShortType ) return 5122;\n\t\tif ( p === UnsignedShortType ) return 5123;\n\t\tif ( p === IntType ) return 5124;\n\t\tif ( p === UnsignedIntType ) return 5125;\n\t\tif ( p === FloatType ) return 5126;\n\n\t\tif ( p === HalfFloatType ) {\n\n\t\t\tif ( isWebGL2 ) return 5131;\n\n\t\t\textension = extensions.get( 'OES_texture_half_float' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.HALF_FLOAT_OES;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === AlphaFormat ) return 6406;\n\t\tif ( p === RGBAFormat ) return 6408;\n\t\tif ( p === LuminanceFormat ) return 6409;\n\t\tif ( p === LuminanceAlphaFormat ) return 6410;\n\t\tif ( p === DepthFormat ) return 6402;\n\t\tif ( p === DepthStencilFormat ) return 34041;\n\t\tif ( p === RedFormat ) return 6403;\n\n\t\t// @deprecated since r137\n\n\t\tif ( p === RGBFormat ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228' );\n\t\t\treturn 6408;\n\n\t\t}\n\n\t\t// WebGL 1 sRGB fallback\n\n\t\tif ( p === _SRGBAFormat ) {\n\n\t\t\textension = extensions.get( 'EXT_sRGB' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.SRGB_ALPHA_EXT;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// WebGL2 formats.\n\n\t\tif ( p === RedIntegerFormat ) return 36244;\n\t\tif ( p === RGFormat ) return 33319;\n\t\tif ( p === RGIntegerFormat ) return 33320;\n\t\tif ( p === RGBAIntegerFormat ) return 36249;\n\n\t\t// S3TC\n\n\t\tif ( p === RGB_S3TC_DXT1_Format || p === RGBA_S3TC_DXT1_Format || p === RGBA_S3TC_DXT3_Format || p === RGBA_S3TC_DXT5_Format ) {\n\n\t\t\tif ( encoding === sRGBEncoding ) {\n\n\t\t\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc_srgb' );\n\n\t\t\t\tif ( extension !== null ) {\n\n\t\t\t\t\tif ( p === RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_SRGB_S3TC_DXT1_EXT;\n\t\t\t\t\tif ( p === RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;\n\t\t\t\t\tif ( p === RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;\n\t\t\t\t\tif ( p === RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\n\n\t\t\t\tif ( extension !== null ) {\n\n\t\t\t\t\tif ( p === RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\n\t\t\t\t\tif ( p === RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\n\t\t\t\t\tif ( p === RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\n\t\t\t\t\tif ( p === RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// PVRTC\n\n\t\tif ( p === RGB_PVRTC_4BPPV1_Format || p === RGB_PVRTC_2BPPV1_Format || p === RGBA_PVRTC_4BPPV1_Format || p === RGBA_PVRTC_2BPPV1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// ETC1\n\n\t\tif ( p === RGB_ETC1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc1' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.COMPRESSED_RGB_ETC1_WEBGL;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// ETC2\n\n\t\tif ( p === RGB_ETC2_Format || p === RGBA_ETC2_EAC_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_ETC2_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ETC2 : extension.COMPRESSED_RGB8_ETC2;\n\t\t\t\tif ( p === RGBA_ETC2_EAC_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC : extension.COMPRESSED_RGBA8_ETC2_EAC;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// ASTC\n\n\t\tif ( p === RGBA_ASTC_4x4_Format || p === RGBA_ASTC_5x4_Format || p === RGBA_ASTC_5x5_Format ||\n\t\t\tp === RGBA_ASTC_6x5_Format || p === RGBA_ASTC_6x6_Format || p === RGBA_ASTC_8x5_Format ||\n\t\t\tp === RGBA_ASTC_8x6_Format || p === RGBA_ASTC_8x8_Format || p === RGBA_ASTC_10x5_Format ||\n\t\t\tp === RGBA_ASTC_10x6_Format || p === RGBA_ASTC_10x8_Format || p === RGBA_ASTC_10x10_Format ||\n\t\t\tp === RGBA_ASTC_12x10_Format || p === RGBA_ASTC_12x12_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_astc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGBA_ASTC_4x4_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR : extension.COMPRESSED_RGBA_ASTC_4x4_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_5x4_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR : extension.COMPRESSED_RGBA_ASTC_5x4_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_5x5_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR : extension.COMPRESSED_RGBA_ASTC_5x5_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_6x5_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR : extension.COMPRESSED_RGBA_ASTC_6x5_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_6x6_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR : extension.COMPRESSED_RGBA_ASTC_6x6_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_8x5_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR : extension.COMPRESSED_RGBA_ASTC_8x5_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_8x6_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR : extension.COMPRESSED_RGBA_ASTC_8x6_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_8x8_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR : extension.COMPRESSED_RGBA_ASTC_8x8_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_10x5_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR : extension.COMPRESSED_RGBA_ASTC_10x5_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_10x6_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR : extension.COMPRESSED_RGBA_ASTC_10x6_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_10x8_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR : extension.COMPRESSED_RGBA_ASTC_10x8_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_10x10_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR : extension.COMPRESSED_RGBA_ASTC_10x10_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_12x10_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR : extension.COMPRESSED_RGBA_ASTC_12x10_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_12x12_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR : extension.COMPRESSED_RGBA_ASTC_12x12_KHR;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// BPTC\n\n\t\tif ( p === RGBA_BPTC_Format ) {\n\n\t\t\textension = extensions.get( 'EXT_texture_compression_bptc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGBA_BPTC_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT : extension.COMPRESSED_RGBA_BPTC_UNORM_EXT;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tif ( p === UnsignedInt248Type ) {\n\n\t\t\tif ( isWebGL2 ) return 34042;\n\n\t\t\textension = extensions.get( 'WEBGL_depth_texture' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.UNSIGNED_INT_24_8_WEBGL;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// if \"p\" can't be resolved, assume the user defines a WebGL constant as a string (fallback/workaround for packed RGB formats)\n\n\t\treturn ( gl[ p ] !== undefined ) ? gl[ p ] : null;\n\n\t}\n\n\treturn { convert: convert };\n\n}\n\nclass ArrayCamera extends PerspectiveCamera {\n\n\tconstructor( array = [] ) {\n\n\t\tsuper();\n\n\t\tthis.isArrayCamera = true;\n\n\t\tthis.cameras = array;\n\n\t}\n\n}\n\nclass Group extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isGroup = true;\n\n\t\tthis.type = 'Group';\n\n\t}\n\n}\n\nconst _moveEvent = { type: 'move' };\n\nclass WebXRController {\n\n\tconstructor() {\n\n\t\tthis._targetRay = null;\n\t\tthis._grip = null;\n\t\tthis._hand = null;\n\n\t}\n\n\tgetHandSpace() {\n\n\t\tif ( this._hand === null ) {\n\n\t\t\tthis._hand = new Group();\n\t\t\tthis._hand.matrixAutoUpdate = false;\n\t\t\tthis._hand.visible = false;\n\n\t\t\tthis._hand.joints = {};\n\t\t\tthis._hand.inputState = { pinching: false };\n\n\t\t}\n\n\t\treturn this._hand;\n\n\t}\n\n\tgetTargetRaySpace() {\n\n\t\tif ( this._targetRay === null ) {\n\n\t\t\tthis._targetRay = new Group();\n\t\t\tthis._targetRay.matrixAutoUpdate = false;\n\t\t\tthis._targetRay.visible = false;\n\t\t\tthis._targetRay.hasLinearVelocity = false;\n\t\t\tthis._targetRay.linearVelocity = new Vector3();\n\t\t\tthis._targetRay.hasAngularVelocity = false;\n\t\t\tthis._targetRay.angularVelocity = new Vector3();\n\n\t\t}\n\n\t\treturn this._targetRay;\n\n\t}\n\n\tgetGripSpace() {\n\n\t\tif ( this._grip === null ) {\n\n\t\t\tthis._grip = new Group();\n\t\t\tthis._grip.matrixAutoUpdate = false;\n\t\t\tthis._grip.visible = false;\n\t\t\tthis._grip.hasLinearVelocity = false;\n\t\t\tthis._grip.linearVelocity = new Vector3();\n\t\t\tthis._grip.hasAngularVelocity = false;\n\t\t\tthis._grip.angularVelocity = new Vector3();\n\n\t\t}\n\n\t\treturn this._grip;\n\n\t}\n\n\tdispatchEvent( event ) {\n\n\t\tif ( this._targetRay !== null ) {\n\n\t\t\tthis._targetRay.dispatchEvent( event );\n\n\t\t}\n\n\t\tif ( this._grip !== null ) {\n\n\t\t\tthis._grip.dispatchEvent( event );\n\n\t\t}\n\n\t\tif ( this._hand !== null ) {\n\n\t\t\tthis._hand.dispatchEvent( event );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tdisconnect( inputSource ) {\n\n\t\tthis.dispatchEvent( { type: 'disconnected', data: inputSource } );\n\n\t\tif ( this._targetRay !== null ) {\n\n\t\t\tthis._targetRay.visible = false;\n\n\t\t}\n\n\t\tif ( this._grip !== null ) {\n\n\t\t\tthis._grip.visible = false;\n\n\t\t}\n\n\t\tif ( this._hand !== null ) {\n\n\t\t\tthis._hand.visible = false;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tupdate( inputSource, frame, referenceSpace ) {\n\n\t\tlet inputPose = null;\n\t\tlet gripPose = null;\n\t\tlet handPose = null;\n\n\t\tconst targetRay = this._targetRay;\n\t\tconst grip = this._grip;\n\t\tconst hand = this._hand;\n\n\t\tif ( inputSource && frame.session.visibilityState !== 'visible-blurred' ) {\n\n\t\t\tif ( hand && inputSource.hand ) {\n\n\t\t\t\thandPose = true;\n\n\t\t\t\tfor ( const inputjoint of inputSource.hand.values() ) {\n\n\t\t\t\t\t// Update the joints groups with the XRJoint poses\n\t\t\t\t\tconst jointPose = frame.getJointPose( inputjoint, referenceSpace );\n\n\t\t\t\t\tif ( hand.joints[ inputjoint.jointName ] === undefined ) {\n\n\t\t\t\t\t\t// The transform of this joint will be updated with the joint pose on each frame\n\t\t\t\t\t\tconst joint = new Group();\n\t\t\t\t\t\tjoint.matrixAutoUpdate = false;\n\t\t\t\t\t\tjoint.visible = false;\n\t\t\t\t\t\thand.joints[ inputjoint.jointName ] = joint;\n\t\t\t\t\t\t// ??\n\t\t\t\t\t\thand.add( joint );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst joint = hand.joints[ inputjoint.jointName ];\n\n\t\t\t\t\tif ( jointPose !== null ) {\n\n\t\t\t\t\t\tjoint.matrix.fromArray( jointPose.transform.matrix );\n\t\t\t\t\t\tjoint.matrix.decompose( joint.position, joint.rotation, joint.scale );\n\t\t\t\t\t\tjoint.jointRadius = jointPose.radius;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tjoint.visible = jointPose !== null;\n\n\t\t\t\t}\n\n\t\t\t\t// Custom events\n\n\t\t\t\t// Check pinchz\n\t\t\t\tconst indexTip = hand.joints[ 'index-finger-tip' ];\n\t\t\t\tconst thumbTip = hand.joints[ 'thumb-tip' ];\n\t\t\t\tconst distance = indexTip.position.distanceTo( thumbTip.position );\n\n\t\t\t\tconst distanceToPinch = 0.02;\n\t\t\t\tconst threshold = 0.005;\n\n\t\t\t\tif ( hand.inputState.pinching && distance > distanceToPinch + threshold ) {\n\n\t\t\t\t\thand.inputState.pinching = false;\n\t\t\t\t\tthis.dispatchEvent( {\n\t\t\t\t\t\ttype: 'pinchend',\n\t\t\t\t\t\thandedness: inputSource.handedness,\n\t\t\t\t\t\ttarget: this\n\t\t\t\t\t} );\n\n\t\t\t\t} else if ( ! hand.inputState.pinching && distance <= distanceToPinch - threshold ) {\n\n\t\t\t\t\thand.inputState.pinching = true;\n\t\t\t\t\tthis.dispatchEvent( {\n\t\t\t\t\t\ttype: 'pinchstart',\n\t\t\t\t\t\thandedness: inputSource.handedness,\n\t\t\t\t\t\ttarget: this\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( grip !== null && inputSource.gripSpace ) {\n\n\t\t\t\t\tgripPose = frame.getPose( inputSource.gripSpace, referenceSpace );\n\n\t\t\t\t\tif ( gripPose !== null ) {\n\n\t\t\t\t\t\tgrip.matrix.fromArray( gripPose.transform.matrix );\n\t\t\t\t\t\tgrip.matrix.decompose( grip.position, grip.rotation, grip.scale );\n\n\t\t\t\t\t\tif ( gripPose.linearVelocity ) {\n\n\t\t\t\t\t\t\tgrip.hasLinearVelocity = true;\n\t\t\t\t\t\t\tgrip.linearVelocity.copy( gripPose.linearVelocity );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tgrip.hasLinearVelocity = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( gripPose.angularVelocity ) {\n\n\t\t\t\t\t\t\tgrip.hasAngularVelocity = true;\n\t\t\t\t\t\t\tgrip.angularVelocity.copy( gripPose.angularVelocity );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tgrip.hasAngularVelocity = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( targetRay !== null ) {\n\n\t\t\t\tinputPose = frame.getPose( inputSource.targetRaySpace, referenceSpace );\n\n\t\t\t\t// Some runtimes (namely Vive Cosmos with Vive OpenXR Runtime) have only grip space and ray space is equal to it\n\t\t\t\tif ( inputPose === null && gripPose !== null ) {\n\n\t\t\t\t\tinputPose = gripPose;\n\n\t\t\t\t}\n\n\t\t\t\tif ( inputPose !== null ) {\n\n\t\t\t\t\ttargetRay.matrix.fromArray( inputPose.transform.matrix );\n\t\t\t\t\ttargetRay.matrix.decompose( targetRay.position, targetRay.rotation, targetRay.scale );\n\n\t\t\t\t\tif ( inputPose.linearVelocity ) {\n\n\t\t\t\t\t\ttargetRay.hasLinearVelocity = true;\n\t\t\t\t\t\ttargetRay.linearVelocity.copy( inputPose.linearVelocity );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ttargetRay.hasLinearVelocity = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( inputPose.angularVelocity ) {\n\n\t\t\t\t\t\ttargetRay.hasAngularVelocity = true;\n\t\t\t\t\t\ttargetRay.angularVelocity.copy( inputPose.angularVelocity );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ttargetRay.hasAngularVelocity = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.dispatchEvent( _moveEvent );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t}\n\n\t\tif ( targetRay !== null ) {\n\n\t\t\ttargetRay.visible = ( inputPose !== null );\n\n\t\t}\n\n\t\tif ( grip !== null ) {\n\n\t\t\tgrip.visible = ( gripPose !== null );\n\n\t\t}\n\n\t\tif ( hand !== null ) {\n\n\t\t\thand.visible = ( handPose !== null );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass DepthTexture extends Texture {\n\n\tconstructor( width, height, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, format ) {\n\n\t\tformat = format !== undefined ? format : DepthFormat;\n\n\t\tif ( format !== DepthFormat && format !== DepthStencilFormat ) {\n\n\t\t\tthrow new Error( 'DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat' );\n\n\t\t}\n\n\t\tif ( type === undefined && format === DepthFormat ) type = UnsignedIntType;\n\t\tif ( type === undefined && format === DepthStencilFormat ) type = UnsignedInt248Type;\n\n\t\tsuper( null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\t\tthis.isDepthTexture = true;\n\n\t\tthis.image = { width: width, height: height };\n\n\t\tthis.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\n\t\tthis.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\n\n\t\tthis.flipY = false;\n\t\tthis.generateMipmaps = false;\n\n\t}\n\n\n}\n\nclass WebXRManager extends EventDispatcher {\n\n\tconstructor( renderer, gl ) {\n\n\t\tsuper();\n\n\t\tconst scope = this;\n\n\t\tlet session = null;\n\t\tlet framebufferScaleFactor = 1.0;\n\n\t\tlet referenceSpace = null;\n\t\tlet referenceSpaceType = 'local-floor';\n\t\tlet customReferenceSpace = null;\n\n\t\tlet pose = null;\n\t\tlet glBinding = null;\n\t\tlet glProjLayer = null;\n\t\tlet glBaseLayer = null;\n\t\tlet xrFrame = null;\n\t\tconst attributes = gl.getContextAttributes();\n\t\tlet initialRenderTarget = null;\n\t\tlet newRenderTarget = null;\n\n\t\tconst controllers = [];\n\t\tconst controllerInputSources = [];\n\n\t\t//\n\n\t\tconst cameraL = new PerspectiveCamera();\n\t\tcameraL.layers.enable( 1 );\n\t\tcameraL.viewport = new Vector4();\n\n\t\tconst cameraR = new PerspectiveCamera();\n\t\tcameraR.layers.enable( 2 );\n\t\tcameraR.viewport = new Vector4();\n\n\t\tconst cameras = [ cameraL, cameraR ];\n\n\t\tconst cameraVR = new ArrayCamera();\n\t\tcameraVR.layers.enable( 1 );\n\t\tcameraVR.layers.enable( 2 );\n\n\t\tlet _currentDepthNear = null;\n\t\tlet _currentDepthFar = null;\n\n\t\t//\n\n\t\tthis.cameraAutoUpdate = true;\n\t\tthis.enabled = false;\n\n\t\tthis.isPresenting = false;\n\n\t\tthis.getController = function ( index ) {\n\n\t\t\tlet controller = controllers[ index ];\n\n\t\t\tif ( controller === undefined ) {\n\n\t\t\t\tcontroller = new WebXRController();\n\t\t\t\tcontrollers[ index ] = controller;\n\n\t\t\t}\n\n\t\t\treturn controller.getTargetRaySpace();\n\n\t\t};\n\n\t\tthis.getControllerGrip = function ( index ) {\n\n\t\t\tlet controller = controllers[ index ];\n\n\t\t\tif ( controller === undefined ) {\n\n\t\t\t\tcontroller = new WebXRController();\n\t\t\t\tcontrollers[ index ] = controller;\n\n\t\t\t}\n\n\t\t\treturn controller.getGripSpace();\n\n\t\t};\n\n\t\tthis.getHand = function ( index ) {\n\n\t\t\tlet controller = controllers[ index ];\n\n\t\t\tif ( controller === undefined ) {\n\n\t\t\t\tcontroller = new WebXRController();\n\t\t\t\tcontrollers[ index ] = controller;\n\n\t\t\t}\n\n\t\t\treturn controller.getHandSpace();\n\n\t\t};\n\n\t\t//\n\n\t\tfunction onSessionEvent( event ) {\n\n\t\t\tconst controllerIndex = controllerInputSources.indexOf( event.inputSource );\n\n\t\t\tif ( controllerIndex === - 1 ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tconst controller = controllers[ controllerIndex ];\n\n\t\t\tif ( controller !== undefined ) {\n\n\t\t\t\tcontroller.dispatchEvent( { type: event.type, data: event.inputSource } );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onSessionEnd() {\n\n\t\t\tsession.removeEventListener( 'select', onSessionEvent );\n\t\t\tsession.removeEventListener( 'selectstart', onSessionEvent );\n\t\t\tsession.removeEventListener( 'selectend', onSessionEvent );\n\t\t\tsession.removeEventListener( 'squeeze', onSessionEvent );\n\t\t\tsession.removeEventListener( 'squeezestart', onSessionEvent );\n\t\t\tsession.removeEventListener( 'squeezeend', onSessionEvent );\n\t\t\tsession.removeEventListener( 'end', onSessionEnd );\n\t\t\tsession.removeEventListener( 'inputsourceschange', onInputSourcesChange );\n\n\t\t\tfor ( let i = 0; i < controllers.length; i ++ ) {\n\n\t\t\t\tconst inputSource = controllerInputSources[ i ];\n\n\t\t\t\tif ( inputSource === null ) continue;\n\n\t\t\t\tcontrollerInputSources[ i ] = null;\n\n\t\t\t\tcontrollers[ i ].disconnect( inputSource );\n\n\t\t\t}\n\n\t\t\t_currentDepthNear = null;\n\t\t\t_currentDepthFar = null;\n\n\t\t\t// restore framebuffer/rendering state\n\n\t\t\trenderer.setRenderTarget( initialRenderTarget );\n\n\t\t\tglBaseLayer = null;\n\t\t\tglProjLayer = null;\n\t\t\tglBinding = null;\n\t\t\tsession = null;\n\t\t\tnewRenderTarget = null;\n\n\t\t\t//\n\n\t\t\tanimation.stop();\n\n\t\t\tscope.isPresenting = false;\n\n\t\t\tscope.dispatchEvent( { type: 'sessionend' } );\n\n\t\t}\n\n\t\tthis.setFramebufferScaleFactor = function ( value ) {\n\n\t\t\tframebufferScaleFactor = value;\n\n\t\t\tif ( scope.isPresenting === true ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebXRManager: Cannot change framebuffer scale while presenting.' );\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.setReferenceSpaceType = function ( value ) {\n\n\t\t\treferenceSpaceType = value;\n\n\t\t\tif ( scope.isPresenting === true ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebXRManager: Cannot change reference space type while presenting.' );\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.getReferenceSpace = function () {\n\n\t\t\treturn customReferenceSpace || referenceSpace;\n\n\t\t};\n\n\t\tthis.setReferenceSpace = function ( space ) {\n\n\t\t\tcustomReferenceSpace = space;\n\n\t\t};\n\n\t\tthis.getBaseLayer = function () {\n\n\t\t\treturn glProjLayer !== null ? glProjLayer : glBaseLayer;\n\n\t\t};\n\n\t\tthis.getBinding = function () {\n\n\t\t\treturn glBinding;\n\n\t\t};\n\n\t\tthis.getFrame = function () {\n\n\t\t\treturn xrFrame;\n\n\t\t};\n\n\t\tthis.getSession = function () {\n\n\t\t\treturn session;\n\n\t\t};\n\n\t\tthis.setSession = async function ( value ) {\n\n\t\t\tsession = value;\n\n\t\t\tif ( session !== null ) {\n\n\t\t\t\tinitialRenderTarget = renderer.getRenderTarget();\n\n\t\t\t\tsession.addEventListener( 'select', onSessionEvent );\n\t\t\t\tsession.addEventListener( 'selectstart', onSessionEvent );\n\t\t\t\tsession.addEventListener( 'selectend', onSessionEvent );\n\t\t\t\tsession.addEventListener( 'squeeze', onSessionEvent );\n\t\t\t\tsession.addEventListener( 'squeezestart', onSessionEvent );\n\t\t\t\tsession.addEventListener( 'squeezeend', onSessionEvent );\n\t\t\t\tsession.addEventListener( 'end', onSessionEnd );\n\t\t\t\tsession.addEventListener( 'inputsourceschange', onInputSourcesChange );\n\n\t\t\t\tif ( attributes.xrCompatible !== true ) {\n\n\t\t\t\t\tawait gl.makeXRCompatible();\n\n\t\t\t\t}\n\n\t\t\t\tif ( ( session.renderState.layers === undefined ) || ( renderer.capabilities.isWebGL2 === false ) ) {\n\n\t\t\t\t\tconst layerInit = {\n\t\t\t\t\t\tantialias: ( session.renderState.layers === undefined ) ? attributes.antialias : true,\n\t\t\t\t\t\talpha: attributes.alpha,\n\t\t\t\t\t\tdepth: attributes.depth,\n\t\t\t\t\t\tstencil: attributes.stencil,\n\t\t\t\t\t\tframebufferScaleFactor: framebufferScaleFactor\n\t\t\t\t\t};\n\n\t\t\t\t\tglBaseLayer = new XRWebGLLayer( session, gl, layerInit );\n\n\t\t\t\t\tsession.updateRenderState( { baseLayer: glBaseLayer } );\n\n\t\t\t\t\tnewRenderTarget = new WebGLRenderTarget(\n\t\t\t\t\t\tglBaseLayer.framebufferWidth,\n\t\t\t\t\t\tglBaseLayer.framebufferHeight,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tformat: RGBAFormat,\n\t\t\t\t\t\t\ttype: UnsignedByteType,\n\t\t\t\t\t\t\tencoding: renderer.outputEncoding,\n\t\t\t\t\t\t\tstencilBuffer: attributes.stencil\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tlet depthFormat = null;\n\t\t\t\t\tlet depthType = null;\n\t\t\t\t\tlet glDepthFormat = null;\n\n\t\t\t\t\tif ( attributes.depth ) {\n\n\t\t\t\t\t\tglDepthFormat = attributes.stencil ? 35056 : 33190;\n\t\t\t\t\t\tdepthFormat = attributes.stencil ? DepthStencilFormat : DepthFormat;\n\t\t\t\t\t\tdepthType = attributes.stencil ? UnsignedInt248Type : UnsignedIntType;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst projectionlayerInit = {\n\t\t\t\t\t\tcolorFormat: 32856,\n\t\t\t\t\t\tdepthFormat: glDepthFormat,\n\t\t\t\t\t\tscaleFactor: framebufferScaleFactor\n\t\t\t\t\t};\n\n\t\t\t\t\tglBinding = new XRWebGLBinding( session, gl );\n\n\t\t\t\t\tglProjLayer = glBinding.createProjectionLayer( projectionlayerInit );\n\n\t\t\t\t\tsession.updateRenderState( { layers: [ glProjLayer ] } );\n\n\t\t\t\t\tnewRenderTarget = new WebGLRenderTarget(\n\t\t\t\t\t\tglProjLayer.textureWidth,\n\t\t\t\t\t\tglProjLayer.textureHeight,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tformat: RGBAFormat,\n\t\t\t\t\t\t\ttype: UnsignedByteType,\n\t\t\t\t\t\t\tdepthTexture: new DepthTexture( glProjLayer.textureWidth, glProjLayer.textureHeight, depthType, undefined, undefined, undefined, undefined, undefined, undefined, depthFormat ),\n\t\t\t\t\t\t\tstencilBuffer: attributes.stencil,\n\t\t\t\t\t\t\tencoding: renderer.outputEncoding,\n\t\t\t\t\t\t\tsamples: attributes.antialias ? 4 : 0\n\t\t\t\t\t\t} );\n\n\t\t\t\t\tconst renderTargetProperties = renderer.properties.get( newRenderTarget );\n\t\t\t\t\trenderTargetProperties.__ignoreDepthValues = glProjLayer.ignoreDepthValues;\n\n\t\t\t\t}\n\n\t\t\t\tnewRenderTarget.isXRRenderTarget = true; // TODO Remove this when possible, see #23278\n\n\t\t\t\t// Set foveation to maximum.\n\t\t\t\tthis.setFoveation( 1.0 );\n\n\t\t\t\tcustomReferenceSpace = null;\n\t\t\t\treferenceSpace = await session.requestReferenceSpace( referenceSpaceType );\n\n\t\t\t\tanimation.setContext( session );\n\t\t\t\tanimation.start();\n\n\t\t\t\tscope.isPresenting = true;\n\n\t\t\t\tscope.dispatchEvent( { type: 'sessionstart' } );\n\n\t\t\t}\n\n\t\t};\n\n\t\tfunction onInputSourcesChange( event ) {\n\n\t\t\t// Notify disconnected\n\n\t\t\tfor ( let i = 0; i < event.removed.length; i ++ ) {\n\n\t\t\t\tconst inputSource = event.removed[ i ];\n\t\t\t\tconst index = controllerInputSources.indexOf( inputSource );\n\n\t\t\t\tif ( index >= 0 ) {\n\n\t\t\t\t\tcontrollerInputSources[ index ] = null;\n\t\t\t\t\tcontrollers[ index ].dispatchEvent( { type: 'disconnected', data: inputSource } );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Notify connected\n\n\t\t\tfor ( let i = 0; i < event.added.length; i ++ ) {\n\n\t\t\t\tconst inputSource = event.added[ i ];\n\n\t\t\t\tlet controllerIndex = controllerInputSources.indexOf( inputSource );\n\n\t\t\t\tif ( controllerIndex === - 1 ) {\n\n\t\t\t\t\t// Assign input source a controller that currently has no input source\n\n\t\t\t\t\tfor ( let i = 0; i < controllers.length; i ++ ) {\n\n\t\t\t\t\t\tif ( i >= controllerInputSources.length ) {\n\n\t\t\t\t\t\t\tcontrollerInputSources.push( inputSource );\n\t\t\t\t\t\t\tcontrollerIndex = i;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t} else if ( controllerInputSources[ i ] === null ) {\n\n\t\t\t\t\t\t\tcontrollerInputSources[ i ] = inputSource;\n\t\t\t\t\t\t\tcontrollerIndex = i;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// If all controllers do currently receive input we ignore new ones\n\n\t\t\t\t\tif ( controllerIndex === - 1 ) break;\n\n\t\t\t\t}\n\n\t\t\t\tconst controller = controllers[ controllerIndex ];\n\n\t\t\t\tif ( controller ) {\n\n\t\t\t\t\tcontroller.dispatchEvent( { type: 'connected', data: inputSource } );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tconst cameraLPos = new Vector3();\n\t\tconst cameraRPos = new Vector3();\n\n\t\t/**\n\t\t * Assumes 2 cameras that are parallel and share an X-axis, and that\n\t\t * the cameras' projection and world matrices have already been set.\n\t\t * And that near and far planes are identical for both cameras.\n\t\t * Visualization of this technique: https://computergraphics.stackexchange.com/a/4765\n\t\t */\n\t\tfunction setProjectionFromUnion( camera, cameraL, cameraR ) {\n\n\t\t\tcameraLPos.setFromMatrixPosition( cameraL.matrixWorld );\n\t\t\tcameraRPos.setFromMatrixPosition( cameraR.matrixWorld );\n\n\t\t\tconst ipd = cameraLPos.distanceTo( cameraRPos );\n\n\t\t\tconst projL = cameraL.projectionMatrix.elements;\n\t\t\tconst projR = cameraR.projectionMatrix.elements;\n\n\t\t\t// VR systems will have identical far and near planes, and\n\t\t\t// most likely identical top and bottom frustum extents.\n\t\t\t// Use the left camera for these values.\n\t\t\tconst near = projL[ 14 ] / ( projL[ 10 ] - 1 );\n\t\t\tconst far = projL[ 14 ] / ( projL[ 10 ] + 1 );\n\t\t\tconst topFov = ( projL[ 9 ] + 1 ) / projL[ 5 ];\n\t\t\tconst bottomFov = ( projL[ 9 ] - 1 ) / projL[ 5 ];\n\n\t\t\tconst leftFov = ( projL[ 8 ] - 1 ) / projL[ 0 ];\n\t\t\tconst rightFov = ( projR[ 8 ] + 1 ) / projR[ 0 ];\n\t\t\tconst left = near * leftFov;\n\t\t\tconst right = near * rightFov;\n\n\t\t\t// Calculate the new camera's position offset from the\n\t\t\t// left camera. xOffset should be roughly half `ipd`.\n\t\t\tconst zOffset = ipd / ( - leftFov + rightFov );\n\t\t\tconst xOffset = zOffset * - leftFov;\n\n\t\t\t// TODO: Better way to apply this offset?\n\t\t\tcameraL.matrixWorld.decompose( camera.position, camera.quaternion, camera.scale );\n\t\t\tcamera.translateX( xOffset );\n\t\t\tcamera.translateZ( zOffset );\n\t\t\tcamera.matrixWorld.compose( camera.position, camera.quaternion, camera.scale );\n\t\t\tcamera.matrixWorldInverse.copy( camera.matrixWorld ).invert();\n\n\t\t\t// Find the union of the frustum values of the cameras and scale\n\t\t\t// the values so that the near plane's position does not change in world space,\n\t\t\t// although must now be relative to the new union camera.\n\t\t\tconst near2 = near + zOffset;\n\t\t\tconst far2 = far + zOffset;\n\t\t\tconst left2 = left - xOffset;\n\t\t\tconst right2 = right + ( ipd - xOffset );\n\t\t\tconst top2 = topFov * far / far2 * near2;\n\t\t\tconst bottom2 = bottomFov * far / far2 * near2;\n\n\t\t\tcamera.projectionMatrix.makePerspective( left2, right2, top2, bottom2, near2, far2 );\n\n\t\t}\n\n\t\tfunction updateCamera( camera, parent ) {\n\n\t\t\tif ( parent === null ) {\n\n\t\t\t\tcamera.matrixWorld.copy( camera.matrix );\n\n\t\t\t} else {\n\n\t\t\t\tcamera.matrixWorld.multiplyMatrices( parent.matrixWorld, camera.matrix );\n\n\t\t\t}\n\n\t\t\tcamera.matrixWorldInverse.copy( camera.matrixWorld ).invert();\n\n\t\t}\n\n\t\tthis.updateCamera = function ( camera ) {\n\n\t\t\tif ( session === null ) return;\n\n\t\t\tcameraVR.near = cameraR.near = cameraL.near = camera.near;\n\t\t\tcameraVR.far = cameraR.far = cameraL.far = camera.far;\n\n\t\t\tif ( _currentDepthNear !== cameraVR.near || _currentDepthFar !== cameraVR.far ) {\n\n\t\t\t\t// Note that the new renderState won't apply until the next frame. See #18320\n\n\t\t\t\tsession.updateRenderState( {\n\t\t\t\t\tdepthNear: cameraVR.near,\n\t\t\t\t\tdepthFar: cameraVR.far\n\t\t\t\t} );\n\n\t\t\t\t_currentDepthNear = cameraVR.near;\n\t\t\t\t_currentDepthFar = cameraVR.far;\n\n\t\t\t}\n\n\t\t\tconst parent = camera.parent;\n\t\t\tconst cameras = cameraVR.cameras;\n\n\t\t\tupdateCamera( cameraVR, parent );\n\n\t\t\tfor ( let i = 0; i < cameras.length; i ++ ) {\n\n\t\t\t\tupdateCamera( cameras[ i ], parent );\n\n\t\t\t}\n\n\t\t\tcameraVR.matrixWorld.decompose( cameraVR.position, cameraVR.quaternion, cameraVR.scale );\n\n\t\t\t// update user camera and its children\n\n\t\t\tcamera.matrix.copy( cameraVR.matrix );\n\t\t\tcamera.matrix.decompose( camera.position, camera.quaternion, camera.scale );\n\n\t\t\tconst children = camera.children;\n\n\t\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\t\tchildren[ i ].updateMatrixWorld( true );\n\n\t\t\t}\n\n\t\t\t// update projection matrix for proper view frustum culling\n\n\t\t\tif ( cameras.length === 2 ) {\n\n\t\t\t\tsetProjectionFromUnion( cameraVR, cameraL, cameraR );\n\n\t\t\t} else {\n\n\t\t\t\t// assume single camera setup (AR)\n\n\t\t\t\tcameraVR.projectionMatrix.copy( cameraL.projectionMatrix );\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.getCamera = function () {\n\n\t\t\treturn cameraVR;\n\n\t\t};\n\n\t\tthis.getFoveation = function () {\n\n\t\t\tif ( glProjLayer !== null ) {\n\n\t\t\t\treturn glProjLayer.fixedFoveation;\n\n\t\t\t}\n\n\t\t\tif ( glBaseLayer !== null ) {\n\n\t\t\t\treturn glBaseLayer.fixedFoveation;\n\n\t\t\t}\n\n\t\t\treturn undefined;\n\n\t\t};\n\n\t\tthis.setFoveation = function ( foveation ) {\n\n\t\t\t// 0 = no foveation = full resolution\n\t\t\t// 1 = maximum foveation = the edges render at lower resolution\n\n\t\t\tif ( glProjLayer !== null ) {\n\n\t\t\t\tglProjLayer.fixedFoveation = foveation;\n\n\t\t\t}\n\n\t\t\tif ( glBaseLayer !== null && glBaseLayer.fixedFoveation !== undefined ) {\n\n\t\t\t\tglBaseLayer.fixedFoveation = foveation;\n\n\t\t\t}\n\n\t\t};\n\n\t\t// Animation Loop\n\n\t\tlet onAnimationFrameCallback = null;\n\n\t\tfunction onAnimationFrame( time, frame ) {\n\n\t\t\tpose = frame.getViewerPose( customReferenceSpace || referenceSpace );\n\t\t\txrFrame = frame;\n\n\t\t\tif ( pose !== null ) {\n\n\t\t\t\tconst views = pose.views;\n\n\t\t\t\tif ( glBaseLayer !== null ) {\n\n\t\t\t\t\trenderer.setRenderTargetFramebuffer( newRenderTarget, glBaseLayer.framebuffer );\n\t\t\t\t\trenderer.setRenderTarget( newRenderTarget );\n\n\t\t\t\t}\n\n\t\t\t\tlet cameraVRNeedsUpdate = false;\n\n\t\t\t\t// check if it's necessary to rebuild cameraVR's camera list\n\n\t\t\t\tif ( views.length !== cameraVR.cameras.length ) {\n\n\t\t\t\t\tcameraVR.cameras.length = 0;\n\t\t\t\t\tcameraVRNeedsUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0; i < views.length; i ++ ) {\n\n\t\t\t\t\tconst view = views[ i ];\n\n\t\t\t\t\tlet viewport = null;\n\n\t\t\t\t\tif ( glBaseLayer !== null ) {\n\n\t\t\t\t\t\tviewport = glBaseLayer.getViewport( view );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconst glSubImage = glBinding.getViewSubImage( glProjLayer, view );\n\t\t\t\t\t\tviewport = glSubImage.viewport;\n\n\t\t\t\t\t\t// For side-by-side projection, we only produce a single texture for both eyes.\n\t\t\t\t\t\tif ( i === 0 ) {\n\n\t\t\t\t\t\t\trenderer.setRenderTargetTextures(\n\t\t\t\t\t\t\t\tnewRenderTarget,\n\t\t\t\t\t\t\t\tglSubImage.colorTexture,\n\t\t\t\t\t\t\t\tglProjLayer.ignoreDepthValues ? undefined : glSubImage.depthStencilTexture );\n\n\t\t\t\t\t\t\trenderer.setRenderTarget( newRenderTarget );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tlet camera = cameras[ i ];\n\n\t\t\t\t\tif ( camera === undefined ) {\n\n\t\t\t\t\t\tcamera = new PerspectiveCamera();\n\t\t\t\t\t\tcamera.layers.enable( i );\n\t\t\t\t\t\tcamera.viewport = new Vector4();\n\t\t\t\t\t\tcameras[ i ] = camera;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcamera.matrix.fromArray( view.transform.matrix );\n\t\t\t\t\tcamera.projectionMatrix.fromArray( view.projectionMatrix );\n\t\t\t\t\tcamera.viewport.set( viewport.x, viewport.y, viewport.width, viewport.height );\n\n\t\t\t\t\tif ( i === 0 ) {\n\n\t\t\t\t\t\tcameraVR.matrix.copy( camera.matrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( cameraVRNeedsUpdate === true ) {\n\n\t\t\t\t\t\tcameraVR.cameras.push( camera );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tfor ( let i = 0; i < controllers.length; i ++ ) {\n\n\t\t\t\tconst inputSource = controllerInputSources[ i ];\n\t\t\t\tconst controller = controllers[ i ];\n\n\t\t\t\tif ( inputSource !== null && controller !== undefined ) {\n\n\t\t\t\t\tcontroller.update( inputSource, frame, customReferenceSpace || referenceSpace );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( onAnimationFrameCallback ) onAnimationFrameCallback( time, frame );\n\n\t\t\txrFrame = null;\n\n\t\t}\n\n\t\tconst animation = new WebGLAnimation();\n\n\t\tanimation.setAnimationLoop( onAnimationFrame );\n\n\t\tthis.setAnimationLoop = function ( callback ) {\n\n\t\t\tonAnimationFrameCallback = callback;\n\n\t\t};\n\n\t\tthis.dispose = function () {};\n\n\t}\n\n}\n\nfunction WebGLMaterials( renderer, properties ) {\n\n\tfunction refreshFogUniforms( uniforms, fog ) {\n\n\t\tuniforms.fogColor.value.copy( fog.color );\n\n\t\tif ( fog.isFog ) {\n\n\t\t\tuniforms.fogNear.value = fog.near;\n\t\t\tuniforms.fogFar.value = fog.far;\n\n\t\t} else if ( fog.isFogExp2 ) {\n\n\t\t\tuniforms.fogDensity.value = fog.density;\n\n\t\t}\n\n\t}\n\n\tfunction refreshMaterialUniforms( uniforms, material, pixelRatio, height, transmissionRenderTarget ) {\n\n\t\tif ( material.isMeshBasicMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\n\t\t} else if ( material.isMeshLambertMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\n\t\t} else if ( material.isMeshToonMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsToon( uniforms, material );\n\n\t\t} else if ( material.isMeshPhongMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsPhong( uniforms, material );\n\n\t\t} else if ( material.isMeshStandardMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsStandard( uniforms, material );\n\n\t\t\tif ( material.isMeshPhysicalMaterial ) {\n\n\t\t\t\trefreshUniformsPhysical( uniforms, material, transmissionRenderTarget );\n\n\t\t\t}\n\n\t\t} else if ( material.isMeshMatcapMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsMatcap( uniforms, material );\n\n\t\t} else if ( material.isMeshDepthMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\n\t\t} else if ( material.isMeshDistanceMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsDistance( uniforms, material );\n\n\t\t} else if ( material.isMeshNormalMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\n\t\t} else if ( material.isLineBasicMaterial ) {\n\n\t\t\trefreshUniformsLine( uniforms, material );\n\n\t\t\tif ( material.isLineDashedMaterial ) {\n\n\t\t\t\trefreshUniformsDash( uniforms, material );\n\n\t\t\t}\n\n\t\t} else if ( material.isPointsMaterial ) {\n\n\t\t\trefreshUniformsPoints( uniforms, material, pixelRatio, height );\n\n\t\t} else if ( material.isSpriteMaterial ) {\n\n\t\t\trefreshUniformsSprites( uniforms, material );\n\n\t\t} else if ( material.isShadowMaterial ) {\n\n\t\t\tuniforms.color.value.copy( material.color );\n\t\t\tuniforms.opacity.value = material.opacity;\n\n\t\t} else if ( material.isShaderMaterial ) {\n\n\t\t\tmaterial.uniformsNeedUpdate = false; // #15581\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsCommon( uniforms, material ) {\n\n\t\tuniforms.opacity.value = material.opacity;\n\n\t\tif ( material.color ) {\n\n\t\t\tuniforms.diffuse.value.copy( material.color );\n\n\t\t}\n\n\t\tif ( material.emissive ) {\n\n\t\t\tuniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );\n\n\t\t}\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.specularMap ) {\n\n\t\t\tuniforms.specularMap.value = material.specularMap;\n\n\t\t}\n\n\t\tif ( material.alphaTest > 0 ) {\n\n\t\t\tuniforms.alphaTest.value = material.alphaTest;\n\n\t\t}\n\n\t\tconst envMap = properties.get( material ).envMap;\n\n\t\tif ( envMap ) {\n\n\t\t\tuniforms.envMap.value = envMap;\n\n\t\t\tuniforms.flipEnvMap.value = ( envMap.isCubeTexture && envMap.isRenderTargetTexture === false ) ? - 1 : 1;\n\n\t\t\tuniforms.reflectivity.value = material.reflectivity;\n\t\t\tuniforms.ior.value = material.ior;\n\t\t\tuniforms.refractionRatio.value = material.refractionRatio;\n\n\t\t}\n\n\t\tif ( material.lightMap ) {\n\n\t\t\tuniforms.lightMap.value = material.lightMap;\n\n\t\t\t// artist-friendly light intensity scaling factor\n\t\t\tconst scaleFactor = ( renderer.physicallyCorrectLights !== true ) ? Math.PI : 1;\n\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity * scaleFactor;\n\n\t\t}\n\n\t\tif ( material.aoMap ) {\n\n\t\t\tuniforms.aoMap.value = material.aoMap;\n\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. specular map\n\t\t// 3. displacementMap map\n\t\t// 4. normal map\n\t\t// 5. bump map\n\t\t// 6. roughnessMap map\n\t\t// 7. metalnessMap map\n\t\t// 8. alphaMap map\n\t\t// 9. emissiveMap map\n\t\t// 10. clearcoat map\n\t\t// 11. clearcoat normal map\n\t\t// 12. clearcoat roughnessMap map\n\t\t// 13. iridescence map\n\t\t// 14. iridescence thickness map\n\t\t// 15. specular intensity map\n\t\t// 16. specular tint map\n\t\t// 17. transmission map\n\t\t// 18. thickness map\n\n\t\tlet uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.specularMap ) {\n\n\t\t\tuvScaleMap = material.specularMap;\n\n\t\t} else if ( material.displacementMap ) {\n\n\t\t\tuvScaleMap = material.displacementMap;\n\n\t\t} else if ( material.normalMap ) {\n\n\t\t\tuvScaleMap = material.normalMap;\n\n\t\t} else if ( material.bumpMap ) {\n\n\t\t\tuvScaleMap = material.bumpMap;\n\n\t\t} else if ( material.roughnessMap ) {\n\n\t\t\tuvScaleMap = material.roughnessMap;\n\n\t\t} else if ( material.metalnessMap ) {\n\n\t\t\tuvScaleMap = material.metalnessMap;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t} else if ( material.emissiveMap ) {\n\n\t\t\tuvScaleMap = material.emissiveMap;\n\n\t\t} else if ( material.clearcoatMap ) {\n\n\t\t\tuvScaleMap = material.clearcoatMap;\n\n\t\t} else if ( material.clearcoatNormalMap ) {\n\n\t\t\tuvScaleMap = material.clearcoatNormalMap;\n\n\t\t} else if ( material.clearcoatRoughnessMap ) {\n\n\t\t\tuvScaleMap = material.clearcoatRoughnessMap;\n\n\t\t} else if ( material.iridescenceMap ) {\n\n\t\t\tuvScaleMap = material.iridescenceMap;\n\n\t\t} else if ( material.iridescenceThicknessMap ) {\n\n\t\t\tuvScaleMap = material.iridescenceThicknessMap;\n\n\t\t} else if ( material.specularIntensityMap ) {\n\n\t\t\tuvScaleMap = material.specularIntensityMap;\n\n\t\t} else if ( material.specularColorMap ) {\n\n\t\t\tuvScaleMap = material.specularColorMap;\n\n\t\t} else if ( material.transmissionMap ) {\n\n\t\t\tuvScaleMap = material.transmissionMap;\n\n\t\t} else if ( material.thicknessMap ) {\n\n\t\t\tuvScaleMap = material.thicknessMap;\n\n\t\t} else if ( material.sheenColorMap ) {\n\n\t\t\tuvScaleMap = material.sheenColorMap;\n\n\t\t} else if ( material.sheenRoughnessMap ) {\n\n\t\t\tuvScaleMap = material.sheenRoughnessMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\t// backwards compatibility\n\t\t\tif ( uvScaleMap.isWebGLRenderTarget ) {\n\n\t\t\t\tuvScaleMap = uvScaleMap.texture;\n\n\t\t\t}\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities for uv2\n\t\t// 1. ao map\n\t\t// 2. light map\n\n\t\tlet uv2ScaleMap;\n\n\t\tif ( material.aoMap ) {\n\n\t\t\tuv2ScaleMap = material.aoMap;\n\n\t\t} else if ( material.lightMap ) {\n\n\t\t\tuv2ScaleMap = material.lightMap;\n\n\t\t}\n\n\t\tif ( uv2ScaleMap !== undefined ) {\n\n\t\t\t// backwards compatibility\n\t\t\tif ( uv2ScaleMap.isWebGLRenderTarget ) {\n\n\t\t\t\tuv2ScaleMap = uv2ScaleMap.texture;\n\n\t\t\t}\n\n\t\t\tif ( uv2ScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuv2ScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uv2Transform.value.copy( uv2ScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLine( uniforms, material ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\n\t}\n\n\tfunction refreshUniformsDash( uniforms, material ) {\n\n\t\tuniforms.dashSize.value = material.dashSize;\n\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\n\t\tuniforms.scale.value = material.scale;\n\n\t}\n\n\tfunction refreshUniformsPoints( uniforms, material, pixelRatio, height ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.size.value = material.size * pixelRatio;\n\t\tuniforms.scale.value = height * 0.5;\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\tif ( material.alphaTest > 0 ) {\n\n\t\t\tuniforms.alphaTest.value = material.alphaTest;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. alpha map\n\n\t\tlet uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsSprites( uniforms, material ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.rotation.value = material.rotation;\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\tif ( material.alphaTest > 0 ) {\n\n\t\t\tuniforms.alphaTest.value = material.alphaTest;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. alpha map\n\n\t\tlet uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhong( uniforms, material ) {\n\n\t\tuniforms.specular.value.copy( material.specular );\n\t\tuniforms.shininess.value = Math.max( material.shininess, 1e-4 ); // to prevent pow( 0.0, 0.0 )\n\n\t}\n\n\tfunction refreshUniformsToon( uniforms, material ) {\n\n\t\tif ( material.gradientMap ) {\n\n\t\t\tuniforms.gradientMap.value = material.gradientMap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsStandard( uniforms, material ) {\n\n\t\tuniforms.roughness.value = material.roughness;\n\t\tuniforms.metalness.value = material.metalness;\n\n\t\tif ( material.roughnessMap ) {\n\n\t\t\tuniforms.roughnessMap.value = material.roughnessMap;\n\n\t\t}\n\n\t\tif ( material.metalnessMap ) {\n\n\t\t\tuniforms.metalnessMap.value = material.metalnessMap;\n\n\t\t}\n\n\t\tconst envMap = properties.get( material ).envMap;\n\n\t\tif ( envMap ) {\n\n\t\t\t//uniforms.envMap.value = material.envMap; // part of uniforms common\n\t\t\tuniforms.envMapIntensity.value = material.envMapIntensity;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhysical( uniforms, material, transmissionRenderTarget ) {\n\n\t\tuniforms.ior.value = material.ior; // also part of uniforms common\n\n\t\tif ( material.sheen > 0 ) {\n\n\t\t\tuniforms.sheenColor.value.copy( material.sheenColor ).multiplyScalar( material.sheen );\n\n\t\t\tuniforms.sheenRoughness.value = material.sheenRoughness;\n\n\t\t\tif ( material.sheenColorMap ) {\n\n\t\t\t\tuniforms.sheenColorMap.value = material.sheenColorMap;\n\n\t\t\t}\n\n\t\t\tif ( material.sheenRoughnessMap ) {\n\n\t\t\t\tuniforms.sheenRoughnessMap.value = material.sheenRoughnessMap;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.clearcoat > 0 ) {\n\n\t\t\tuniforms.clearcoat.value = material.clearcoat;\n\t\t\tuniforms.clearcoatRoughness.value = material.clearcoatRoughness;\n\n\t\t\tif ( material.clearcoatMap ) {\n\n\t\t\t\tuniforms.clearcoatMap.value = material.clearcoatMap;\n\n\t\t\t}\n\n\t\t\tif ( material.clearcoatRoughnessMap ) {\n\n\t\t\t\tuniforms.clearcoatRoughnessMap.value = material.clearcoatRoughnessMap;\n\n\t\t\t}\n\n\t\t\tif ( material.clearcoatNormalMap ) {\n\n\t\t\t\tuniforms.clearcoatNormalScale.value.copy( material.clearcoatNormalScale );\n\t\t\t\tuniforms.clearcoatNormalMap.value = material.clearcoatNormalMap;\n\n\t\t\t\tif ( material.side === BackSide ) {\n\n\t\t\t\t\tuniforms.clearcoatNormalScale.value.negate();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.iridescence > 0 ) {\n\n\t\t\tuniforms.iridescence.value = material.iridescence;\n\t\t\tuniforms.iridescenceIOR.value = material.iridescenceIOR;\n\t\t\tuniforms.iridescenceThicknessMinimum.value = material.iridescenceThicknessRange[ 0 ];\n\t\t\tuniforms.iridescenceThicknessMaximum.value = material.iridescenceThicknessRange[ 1 ];\n\n\t\t\tif ( material.iridescenceMap ) {\n\n\t\t\t\tuniforms.iridescenceMap.value = material.iridescenceMap;\n\n\t\t\t}\n\n\t\t\tif ( material.iridescenceThicknessMap ) {\n\n\t\t\t\tuniforms.iridescenceThicknessMap.value = material.iridescenceThicknessMap;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.transmission > 0 ) {\n\n\t\t\tuniforms.transmission.value = material.transmission;\n\t\t\tuniforms.transmissionSamplerMap.value = transmissionRenderTarget.texture;\n\t\t\tuniforms.transmissionSamplerSize.value.set( transmissionRenderTarget.width, transmissionRenderTarget.height );\n\n\t\t\tif ( material.transmissionMap ) {\n\n\t\t\t\tuniforms.transmissionMap.value = material.transmissionMap;\n\n\t\t\t}\n\n\t\t\tuniforms.thickness.value = material.thickness;\n\n\t\t\tif ( material.thicknessMap ) {\n\n\t\t\t\tuniforms.thicknessMap.value = material.thicknessMap;\n\n\t\t\t}\n\n\t\t\tuniforms.attenuationDistance.value = material.attenuationDistance;\n\t\t\tuniforms.attenuationColor.value.copy( material.attenuationColor );\n\n\t\t}\n\n\t\tuniforms.specularIntensity.value = material.specularIntensity;\n\t\tuniforms.specularColor.value.copy( material.specularColor );\n\n\t\tif ( material.specularIntensityMap ) {\n\n\t\t\tuniforms.specularIntensityMap.value = material.specularIntensityMap;\n\n\t\t}\n\n\t\tif ( material.specularColorMap ) {\n\n\t\t\tuniforms.specularColorMap.value = material.specularColorMap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsMatcap( uniforms, material ) {\n\n\t\tif ( material.matcap ) {\n\n\t\t\tuniforms.matcap.value = material.matcap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsDistance( uniforms, material ) {\n\n\t\tuniforms.referencePosition.value.copy( material.referencePosition );\n\t\tuniforms.nearDistance.value = material.nearDistance;\n\t\tuniforms.farDistance.value = material.farDistance;\n\n\t}\n\n\treturn {\n\t\trefreshFogUniforms: refreshFogUniforms,\n\t\trefreshMaterialUniforms: refreshMaterialUniforms\n\t};\n\n}\n\nfunction WebGLUniformsGroups( gl, info, capabilities, state ) {\n\n\tlet buffers = {};\n\tlet updateList = {};\n\tlet allocatedBindingPoints = [];\n\n\tconst maxBindingPoints = ( capabilities.isWebGL2 ) ? gl.getParameter( 35375 ) : 0; // binding points are global whereas block indices are per shader program\n\n\tfunction bind( uniformsGroup, program ) {\n\n\t\tconst webglProgram = program.program;\n\t\tstate.uniformBlockBinding( uniformsGroup, webglProgram );\n\n\t}\n\n\tfunction update( uniformsGroup, program ) {\n\n\t\tlet buffer = buffers[ uniformsGroup.id ];\n\n\t\tif ( buffer === undefined ) {\n\n\t\t\tprepareUniformsGroup( uniformsGroup );\n\n\t\t\tbuffer = createBuffer( uniformsGroup );\n\t\t\tbuffers[ uniformsGroup.id ] = buffer;\n\n\t\t\tuniformsGroup.addEventListener( 'dispose', onUniformsGroupsDispose );\n\n\t\t}\n\n\t\t// ensure to update the binding points/block indices mapping for this program\n\n\t\tconst webglProgram = program.program;\n\t\tstate.updateUBOMapping( uniformsGroup, webglProgram );\n\n\t\t// update UBO once per frame\n\n\t\tconst frame = info.render.frame;\n\n\t\tif ( updateList[ uniformsGroup.id ] !== frame ) {\n\n\t\t\tupdateBufferData( uniformsGroup );\n\n\t\t\tupdateList[ uniformsGroup.id ] = frame;\n\n\t\t}\n\n\t}\n\n\tfunction createBuffer( uniformsGroup ) {\n\n\t\t// the setup of an UBO is independent of a particular shader program but global\n\n\t\tconst bindingPointIndex = allocateBindingPointIndex();\n\t\tuniformsGroup.__bindingPointIndex = bindingPointIndex;\n\n\t\tconst buffer = gl.createBuffer();\n\t\tconst size = uniformsGroup.__size;\n\t\tconst usage = uniformsGroup.usage;\n\n\t\tgl.bindBuffer( 35345, buffer );\n\t\tgl.bufferData( 35345, size, usage );\n\t\tgl.bindBuffer( 35345, null );\n\t\tgl.bindBufferBase( 35345, bindingPointIndex, buffer );\n\n\t\treturn buffer;\n\n\t}\n\n\tfunction allocateBindingPointIndex() {\n\n\t\tfor ( let i = 0; i < maxBindingPoints; i ++ ) {\n\n\t\t\tif ( allocatedBindingPoints.indexOf( i ) === - 1 ) {\n\n\t\t\t\tallocatedBindingPoints.push( i );\n\t\t\t\treturn i;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconsole.error( 'THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached.' );\n\n\t\treturn 0;\n\n\t}\n\n\tfunction updateBufferData( uniformsGroup ) {\n\n\t\tconst buffer = buffers[ uniformsGroup.id ];\n\t\tconst uniforms = uniformsGroup.uniforms;\n\t\tconst cache = uniformsGroup.__cache;\n\n\t\tgl.bindBuffer( 35345, buffer );\n\n\t\tfor ( let i = 0, il = uniforms.length; i < il; i ++ ) {\n\n\t\t\tconst uniform = uniforms[ i ];\n\n\t\t\t// partly update the buffer if necessary\n\n\t\t\tif ( hasUniformChanged( uniform, i, cache ) === true ) {\n\n\t\t\t\tconst value = uniform.value;\n\t\t\t\tconst offset = uniform.__offset;\n\n\t\t\t\tif ( typeof value === 'number' ) {\n\n\t\t\t\t\tuniform.__data[ 0 ] = value;\n\t\t\t\t\tgl.bufferSubData( 35345, offset, uniform.__data );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( uniform.value.isMatrix3 ) {\n\n\t\t\t\t\t\t// manually converting 3x3 to 3x4\n\n\t\t\t\t\t\tuniform.__data[ 0 ] = uniform.value.elements[ 0 ];\n\t\t\t\t\t\tuniform.__data[ 1 ] = uniform.value.elements[ 1 ];\n\t\t\t\t\t\tuniform.__data[ 2 ] = uniform.value.elements[ 2 ];\n\t\t\t\t\t\tuniform.__data[ 3 ] = uniform.value.elements[ 0 ];\n\t\t\t\t\t\tuniform.__data[ 4 ] = uniform.value.elements[ 3 ];\n\t\t\t\t\t\tuniform.__data[ 5 ] = uniform.value.elements[ 4 ];\n\t\t\t\t\t\tuniform.__data[ 6 ] = uniform.value.elements[ 5 ];\n\t\t\t\t\t\tuniform.__data[ 7 ] = uniform.value.elements[ 0 ];\n\t\t\t\t\t\tuniform.__data[ 8 ] = uniform.value.elements[ 6 ];\n\t\t\t\t\t\tuniform.__data[ 9 ] = uniform.value.elements[ 7 ];\n\t\t\t\t\t\tuniform.__data[ 10 ] = uniform.value.elements[ 8 ];\n\t\t\t\t\t\tuniform.__data[ 11 ] = uniform.value.elements[ 0 ];\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvalue.toArray( uniform.__data );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tgl.bufferSubData( 35345, offset, uniform.__data );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tgl.bindBuffer( 35345, null );\n\n\t}\n\n\tfunction hasUniformChanged( uniform, index, cache ) {\n\n\t\tconst value = uniform.value;\n\n\t\tif ( cache[ index ] === undefined ) {\n\n\t\t\t// cache entry does not exist so far\n\n\t\t\tif ( typeof value === 'number' ) {\n\n\t\t\t\tcache[ index ] = value;\n\n\t\t\t} else {\n\n\t\t\t\tcache[ index ] = value.clone();\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t} else {\n\n\t\t\t// compare current value with cached entry\n\n\t\t\tif ( typeof value === 'number' ) {\n\n\t\t\t\tif ( cache[ index ] !== value ) {\n\n\t\t\t\t\tcache[ index ] = value;\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconst cachedObject = cache[ index ];\n\n\t\t\t\tif ( cachedObject.equals( value ) === false ) {\n\n\t\t\t\t\tcachedObject.copy( value );\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tfunction prepareUniformsGroup( uniformsGroup ) {\n\n\t\t// determine total buffer size according to the STD140 layout\n\t\t// Hint: STD140 is the only supported layout in WebGL 2\n\n\t\tconst uniforms = uniformsGroup.uniforms;\n\n\t\tlet offset = 0; // global buffer offset in bytes\n\t\tconst chunkSize = 16; // size of a chunk in bytes\n\t\tlet chunkOffset = 0; // offset within a single chunk in bytes\n\n\t\tfor ( let i = 0, l = uniforms.length; i < l; i ++ ) {\n\n\t\t\tconst uniform = uniforms[ i ];\n\t\t\tconst info = getUniformSize( uniform );\n\n\t\t\t// the following two properties will be used for partial buffer updates\n\n\t\t\tuniform.__data = new Float32Array( info.storage / Float32Array.BYTES_PER_ELEMENT );\n\t\t\tuniform.__offset = offset;\n\n\t\t\t//\n\n\t\t\tif ( i > 0 ) {\n\n\t\t\t\tchunkOffset = offset % chunkSize;\n\n\t\t\t\tconst remainingSizeInChunk = chunkSize - chunkOffset;\n\n\t\t\t\t// check for chunk overflow\n\n\t\t\t\tif ( chunkOffset !== 0 && ( remainingSizeInChunk - info.boundary ) < 0 ) {\n\n\t\t\t\t\t// add padding and adjust offset\n\n\t\t\t\t\toffset += ( chunkSize - chunkOffset );\n\t\t\t\t\tuniform.__offset = offset;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\toffset += info.storage;\n\n\t\t}\n\n\t\t// ensure correct final padding\n\n\t\tchunkOffset = offset % chunkSize;\n\n\t\tif ( chunkOffset > 0 ) offset += ( chunkSize - chunkOffset );\n\n\t\t//\n\n\t\tuniformsGroup.__size = offset;\n\t\tuniformsGroup.__cache = {};\n\n\t\treturn this;\n\n\t}\n\n\tfunction getUniformSize( uniform ) {\n\n\t\tconst value = uniform.value;\n\n\t\tconst info = {\n\t\t\tboundary: 0, // bytes\n\t\t\tstorage: 0 // bytes\n\t\t};\n\n\t\t// determine sizes according to STD140\n\n\t\tif ( typeof value === 'number' ) {\n\n\t\t\t// float/int\n\n\t\t\tinfo.boundary = 4;\n\t\t\tinfo.storage = 4;\n\n\t\t} else if ( value.isVector2 ) {\n\n\t\t\t// vec2\n\n\t\t\tinfo.boundary = 8;\n\t\t\tinfo.storage = 8;\n\n\t\t} else if ( value.isVector3 || value.isColor ) {\n\n\t\t\t// vec3\n\n\t\t\tinfo.boundary = 16;\n\t\t\tinfo.storage = 12; // evil: vec3 must start on a 16-byte boundary but it only consumes 12 bytes\n\n\t\t} else if ( value.isVector4 ) {\n\n\t\t\t// vec4\n\n\t\t\tinfo.boundary = 16;\n\t\t\tinfo.storage = 16;\n\n\t\t} else if ( value.isMatrix3 ) {\n\n\t\t\t// mat3 (in STD140 a 3x3 matrix is represented as 3x4)\n\n\t\t\tinfo.boundary = 48;\n\t\t\tinfo.storage = 48;\n\n\t\t} else if ( value.isMatrix4 ) {\n\n\t\t\t// mat4\n\n\t\t\tinfo.boundary = 64;\n\t\t\tinfo.storage = 64;\n\n\t\t} else if ( value.isTexture ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group.' );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Unsupported uniform value type.', value );\n\n\t\t}\n\n\t\treturn info;\n\n\t}\n\n\tfunction onUniformsGroupsDispose( event ) {\n\n\t\tconst uniformsGroup = event.target;\n\n\t\tuniformsGroup.removeEventListener( 'dispose', onUniformsGroupsDispose );\n\n\t\tconst index = allocatedBindingPoints.indexOf( uniformsGroup.__bindingPointIndex );\n\t\tallocatedBindingPoints.splice( index, 1 );\n\n\t\tgl.deleteBuffer( buffers[ uniformsGroup.id ] );\n\n\t\tdelete buffers[ uniformsGroup.id ];\n\t\tdelete updateList[ uniformsGroup.id ];\n\n\t}\n\n\tfunction dispose() {\n\n\t\tfor ( const id in buffers ) {\n\n\t\t\tgl.deleteBuffer( buffers[ id ] );\n\n\t\t}\n\n\t\tallocatedBindingPoints = [];\n\t\tbuffers = {};\n\t\tupdateList = {};\n\n\t}\n\n\treturn {\n\n\t\tbind: bind,\n\t\tupdate: update,\n\n\t\tdispose: dispose\n\n\t};\n\n}\n\nfunction createCanvasElement() {\n\n\tconst canvas = createElementNS( 'canvas' );\n\tcanvas.style.display = 'block';\n\treturn canvas;\n\n}\n\nfunction WebGLRenderer( parameters = {} ) {\n\n\tthis.isWebGLRenderer = true;\n\n\tconst _canvas = parameters.canvas !== undefined ? parameters.canvas : createCanvasElement(),\n\t\t_context = parameters.context !== undefined ? parameters.context : null,\n\n\t\t_depth = parameters.depth !== undefined ? parameters.depth : true,\n\t\t_stencil = parameters.stencil !== undefined ? parameters.stencil : true,\n\t\t_antialias = parameters.antialias !== undefined ? parameters.antialias : false,\n\t\t_premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\n\t\t_preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false,\n\t\t_powerPreference = parameters.powerPreference !== undefined ? parameters.powerPreference : 'default',\n\t\t_failIfMajorPerformanceCaveat = parameters.failIfMajorPerformanceCaveat !== undefined ? parameters.failIfMajorPerformanceCaveat : false;\n\n\tlet _alpha;\n\n\tif ( _context !== null ) {\n\n\t\t_alpha = _context.getContextAttributes().alpha;\n\n\t} else {\n\n\t\t_alpha = parameters.alpha !== undefined ? parameters.alpha : false;\n\n\t}\n\n\tlet currentRenderList = null;\n\tlet currentRenderState = null;\n\n\t// render() can be called from within a callback triggered by another render.\n\t// We track this so that the nested render call gets its list and state isolated from the parent render call.\n\n\tconst renderListStack = [];\n\tconst renderStateStack = [];\n\n\t// public properties\n\n\tthis.domElement = _canvas;\n\n\t// Debug configuration container\n\tthis.debug = {\n\n\t\t/**\n\t\t * Enables error checking and reporting when shader programs are being compiled\n\t\t * @type {boolean}\n\t\t */\n\t\tcheckShaderErrors: true\n\t};\n\n\t// clearing\n\n\tthis.autoClear = true;\n\tthis.autoClearColor = true;\n\tthis.autoClearDepth = true;\n\tthis.autoClearStencil = true;\n\n\t// scene graph\n\n\tthis.sortObjects = true;\n\n\t// user-defined clipping\n\n\tthis.clippingPlanes = [];\n\tthis.localClippingEnabled = false;\n\n\t// physically based shading\n\n\tthis.outputEncoding = LinearEncoding;\n\n\t// physical lights\n\n\tthis.physicallyCorrectLights = false;\n\n\t// tone mapping\n\n\tthis.toneMapping = NoToneMapping;\n\tthis.toneMappingExposure = 1.0;\n\n\t//\n\n\tObject.defineProperties( this, {\n\n\t\t// @deprecated since r136, 0e21088102b4de7e0a0a33140620b7a3424b9e6d\n\n\t\tgammaFactor: {\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaFactor has been removed.' );\n\t\t\t\treturn 2;\n\n\t\t\t},\n\t\t\tset: function () {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaFactor has been removed.' );\n\n\t\t\t}\n\t\t}\n\n\t} );\n\n\t// internal properties\n\n\tconst _this = this;\n\n\tlet _isContextLost = false;\n\n\t// internal state cache\n\n\tlet _currentActiveCubeFace = 0;\n\tlet _currentActiveMipmapLevel = 0;\n\tlet _currentRenderTarget = null;\n\tlet _currentMaterialId = - 1;\n\n\tlet _currentCamera = null;\n\n\tconst _currentViewport = new Vector4();\n\tconst _currentScissor = new Vector4();\n\tlet _currentScissorTest = null;\n\n\t//\n\n\tlet _width = _canvas.width;\n\tlet _height = _canvas.height;\n\n\tlet _pixelRatio = 1;\n\tlet _opaqueSort = null;\n\tlet _transparentSort = null;\n\n\tconst _viewport = new Vector4( 0, 0, _width, _height );\n\tconst _scissor = new Vector4( 0, 0, _width, _height );\n\tlet _scissorTest = false;\n\n\t// frustum\n\n\tconst _frustum = new Frustum();\n\n\t// clipping\n\n\tlet _clippingEnabled = false;\n\tlet _localClippingEnabled = false;\n\n\t// transmission\n\n\tlet _transmissionRenderTarget = null;\n\n\t// camera matrices cache\n\n\tconst _projScreenMatrix = new Matrix4();\n\n\tconst _vector2 = new Vector2();\n\tconst _vector3 = new Vector3();\n\n\tconst _emptyScene = { background: null, fog: null, environment: null, overrideMaterial: null, isScene: true };\n\n\tfunction getTargetPixelRatio() {\n\n\t\treturn _currentRenderTarget === null ? _pixelRatio : 1;\n\n\t}\n\n\t// initialize\n\n\tlet _gl = _context;\n\n\tfunction getContext( contextNames, contextAttributes ) {\n\n\t\tfor ( let i = 0; i < contextNames.length; i ++ ) {\n\n\t\t\tconst contextName = contextNames[ i ];\n\t\t\tconst context = _canvas.getContext( contextName, contextAttributes );\n\t\t\tif ( context !== null ) return context;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\ttry {\n\n\t\tconst contextAttributes = {\n\t\t\talpha: true,\n\t\t\tdepth: _depth,\n\t\t\tstencil: _stencil,\n\t\t\tantialias: _antialias,\n\t\t\tpremultipliedAlpha: _premultipliedAlpha,\n\t\t\tpreserveDrawingBuffer: _preserveDrawingBuffer,\n\t\t\tpowerPreference: _powerPreference,\n\t\t\tfailIfMajorPerformanceCaveat: _failIfMajorPerformanceCaveat\n\t\t};\n\n\t\t// OffscreenCanvas does not have setAttribute, see #22811\n\t\tif ( 'setAttribute' in _canvas ) _canvas.setAttribute( 'data-engine', `three.js r${REVISION}` );\n\n\t\t// event listeners must be registered before WebGL context is created, see #12753\n\t\t_canvas.addEventListener( 'webglcontextlost', onContextLost, false );\n\t\t_canvas.addEventListener( 'webglcontextrestored', onContextRestore, false );\n\t\t_canvas.addEventListener( 'webglcontextcreationerror', onContextCreationError, false );\n\n\t\tif ( _gl === null ) {\n\n\t\t\tconst contextNames = [ 'webgl2', 'webgl', 'experimental-webgl' ];\n\n\t\t\tif ( _this.isWebGL1Renderer === true ) {\n\n\t\t\t\tcontextNames.shift();\n\n\t\t\t}\n\n\t\t\t_gl = getContext( contextNames, contextAttributes );\n\n\t\t\tif ( _gl === null ) {\n\n\t\t\t\tif ( getContext( contextNames ) ) {\n\n\t\t\t\t\tthrow new Error( 'Error creating WebGL context with your selected attributes.' );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'Error creating WebGL context.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Some experimental-webgl implementations do not have getShaderPrecisionFormat\n\n\t\tif ( _gl.getShaderPrecisionFormat === undefined ) {\n\n\t\t\t_gl.getShaderPrecisionFormat = function () {\n\n\t\t\t\treturn { 'rangeMin': 1, 'rangeMax': 1, 'precision': 1 };\n\n\t\t\t};\n\n\t\t}\n\n\t} catch ( error ) {\n\n\t\tconsole.error( 'THREE.WebGLRenderer: ' + error.message );\n\t\tthrow error;\n\n\t}\n\n\tlet extensions, capabilities, state, info;\n\tlet properties, textures, cubemaps, cubeuvmaps, attributes, geometries, objects;\n\tlet programCache, materials, renderLists, renderStates, clipping, shadowMap;\n\n\tlet background, morphtargets, bufferRenderer, indexedBufferRenderer;\n\n\tlet utils, bindingStates, uniformsGroups;\n\n\tfunction initGLContext() {\n\n\t\textensions = new WebGLExtensions( _gl );\n\n\t\tcapabilities = new WebGLCapabilities( _gl, extensions, parameters );\n\n\t\textensions.init( capabilities );\n\n\t\tutils = new WebGLUtils( _gl, extensions, capabilities );\n\n\t\tstate = new WebGLState( _gl, extensions, capabilities );\n\n\t\tinfo = new WebGLInfo();\n\t\tproperties = new WebGLProperties();\n\t\ttextures = new WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info );\n\t\tcubemaps = new WebGLCubeMaps( _this );\n\t\tcubeuvmaps = new WebGLCubeUVMaps( _this );\n\t\tattributes = new WebGLAttributes( _gl, capabilities );\n\t\tbindingStates = new WebGLBindingStates( _gl, extensions, attributes, capabilities );\n\t\tgeometries = new WebGLGeometries( _gl, attributes, info, bindingStates );\n\t\tobjects = new WebGLObjects( _gl, geometries, attributes, info );\n\t\tmorphtargets = new WebGLMorphtargets( _gl, capabilities, textures );\n\t\tclipping = new WebGLClipping( properties );\n\t\tprogramCache = new WebGLPrograms( _this, cubemaps, cubeuvmaps, extensions, capabilities, bindingStates, clipping );\n\t\tmaterials = new WebGLMaterials( _this, properties );\n\t\trenderLists = new WebGLRenderLists();\n\t\trenderStates = new WebGLRenderStates( extensions, capabilities );\n\t\tbackground = new WebGLBackground( _this, cubemaps, state, objects, _alpha, _premultipliedAlpha );\n\t\tshadowMap = new WebGLShadowMap( _this, objects, capabilities );\n\t\tuniformsGroups = new WebGLUniformsGroups( _gl, info, capabilities, state );\n\n\t\tbufferRenderer = new WebGLBufferRenderer( _gl, extensions, info, capabilities );\n\t\tindexedBufferRenderer = new WebGLIndexedBufferRenderer( _gl, extensions, info, capabilities );\n\n\t\tinfo.programs = programCache.programs;\n\n\t\t_this.capabilities = capabilities;\n\t\t_this.extensions = extensions;\n\t\t_this.properties = properties;\n\t\t_this.renderLists = renderLists;\n\t\t_this.shadowMap = shadowMap;\n\t\t_this.state = state;\n\t\t_this.info = info;\n\n\t}\n\n\tinitGLContext();\n\n\t// xr\n\n\tconst xr = new WebXRManager( _this, _gl );\n\n\tthis.xr = xr;\n\n\t// API\n\n\tthis.getContext = function () {\n\n\t\treturn _gl;\n\n\t};\n\n\tthis.getContextAttributes = function () {\n\n\t\treturn _gl.getContextAttributes();\n\n\t};\n\n\tthis.forceContextLoss = function () {\n\n\t\tconst extension = extensions.get( 'WEBGL_lose_context' );\n\t\tif ( extension ) extension.loseContext();\n\n\t};\n\n\tthis.forceContextRestore = function () {\n\n\t\tconst extension = extensions.get( 'WEBGL_lose_context' );\n\t\tif ( extension ) extension.restoreContext();\n\n\t};\n\n\tthis.getPixelRatio = function () {\n\n\t\treturn _pixelRatio;\n\n\t};\n\n\tthis.setPixelRatio = function ( value ) {\n\n\t\tif ( value === undefined ) return;\n\n\t\t_pixelRatio = value;\n\n\t\tthis.setSize( _width, _height, false );\n\n\t};\n\n\tthis.getSize = function ( target ) {\n\n\t\treturn target.set( _width, _height );\n\n\t};\n\n\tthis.setSize = function ( width, height, updateStyle ) {\n\n\t\tif ( xr.isPresenting ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Can\\'t change size while VR device is presenting.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_canvas.width = Math.floor( width * _pixelRatio );\n\t\t_canvas.height = Math.floor( height * _pixelRatio );\n\n\t\tif ( updateStyle !== false ) {\n\n\t\t\t_canvas.style.width = width + 'px';\n\t\t\t_canvas.style.height = height + 'px';\n\n\t\t}\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.getDrawingBufferSize = function ( target ) {\n\n\t\treturn target.set( _width * _pixelRatio, _height * _pixelRatio ).floor();\n\n\t};\n\n\tthis.setDrawingBufferSize = function ( width, height, pixelRatio ) {\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_pixelRatio = pixelRatio;\n\n\t\t_canvas.width = Math.floor( width * pixelRatio );\n\t\t_canvas.height = Math.floor( height * pixelRatio );\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.getCurrentViewport = function ( target ) {\n\n\t\treturn target.copy( _currentViewport );\n\n\t};\n\n\tthis.getViewport = function ( target ) {\n\n\t\treturn target.copy( _viewport );\n\n\t};\n\n\tthis.setViewport = function ( x, y, width, height ) {\n\n\t\tif ( x.isVector4 ) {\n\n\t\t\t_viewport.set( x.x, x.y, x.z, x.w );\n\n\t\t} else {\n\n\t\t\t_viewport.set( x, y, width, height );\n\n\t\t}\n\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor() );\n\n\t};\n\n\tthis.getScissor = function ( target ) {\n\n\t\treturn target.copy( _scissor );\n\n\t};\n\n\tthis.setScissor = function ( x, y, width, height ) {\n\n\t\tif ( x.isVector4 ) {\n\n\t\t\t_scissor.set( x.x, x.y, x.z, x.w );\n\n\t\t} else {\n\n\t\t\t_scissor.set( x, y, width, height );\n\n\t\t}\n\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor() );\n\n\t};\n\n\tthis.getScissorTest = function () {\n\n\t\treturn _scissorTest;\n\n\t};\n\n\tthis.setScissorTest = function ( boolean ) {\n\n\t\tstate.setScissorTest( _scissorTest = boolean );\n\n\t};\n\n\tthis.setOpaqueSort = function ( method ) {\n\n\t\t_opaqueSort = method;\n\n\t};\n\n\tthis.setTransparentSort = function ( method ) {\n\n\t\t_transparentSort = method;\n\n\t};\n\n\t// Clearing\n\n\tthis.getClearColor = function ( target ) {\n\n\t\treturn target.copy( background.getClearColor() );\n\n\t};\n\n\tthis.setClearColor = function () {\n\n\t\tbackground.setClearColor.apply( background, arguments );\n\n\t};\n\n\tthis.getClearAlpha = function () {\n\n\t\treturn background.getClearAlpha();\n\n\t};\n\n\tthis.setClearAlpha = function () {\n\n\t\tbackground.setClearAlpha.apply( background, arguments );\n\n\t};\n\n\tthis.clear = function ( color = true, depth = true, stencil = true ) {\n\n\t\tlet bits = 0;\n\n\t\tif ( color ) bits |= 16384;\n\t\tif ( depth ) bits |= 256;\n\t\tif ( stencil ) bits |= 1024;\n\n\t\t_gl.clear( bits );\n\n\t};\n\n\tthis.clearColor = function () {\n\n\t\tthis.clear( true, false, false );\n\n\t};\n\n\tthis.clearDepth = function () {\n\n\t\tthis.clear( false, true, false );\n\n\t};\n\n\tthis.clearStencil = function () {\n\n\t\tthis.clear( false, false, true );\n\n\t};\n\n\t//\n\n\tthis.dispose = function () {\n\n\t\t_canvas.removeEventListener( 'webglcontextlost', onContextLost, false );\n\t\t_canvas.removeEventListener( 'webglcontextrestored', onContextRestore, false );\n\t\t_canvas.removeEventListener( 'webglcontextcreationerror', onContextCreationError, false );\n\n\t\trenderLists.dispose();\n\t\trenderStates.dispose();\n\t\tproperties.dispose();\n\t\tcubemaps.dispose();\n\t\tcubeuvmaps.dispose();\n\t\tobjects.dispose();\n\t\tbindingStates.dispose();\n\t\tuniformsGroups.dispose();\n\t\tprogramCache.dispose();\n\n\t\txr.dispose();\n\n\t\txr.removeEventListener( 'sessionstart', onXRSessionStart );\n\t\txr.removeEventListener( 'sessionend', onXRSessionEnd );\n\n\t\tif ( _transmissionRenderTarget ) {\n\n\t\t\t_transmissionRenderTarget.dispose();\n\t\t\t_transmissionRenderTarget = null;\n\n\t\t}\n\n\t\tanimation.stop();\n\n\t};\n\n\t// Events\n\n\tfunction onContextLost( event ) {\n\n\t\tevent.preventDefault();\n\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Lost.' );\n\n\t\t_isContextLost = true;\n\n\t}\n\n\tfunction onContextRestore( /* event */ ) {\n\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Restored.' );\n\n\t\t_isContextLost = false;\n\n\t\tconst infoAutoReset = info.autoReset;\n\t\tconst shadowMapEnabled = shadowMap.enabled;\n\t\tconst shadowMapAutoUpdate = shadowMap.autoUpdate;\n\t\tconst shadowMapNeedsUpdate = shadowMap.needsUpdate;\n\t\tconst shadowMapType = shadowMap.type;\n\n\t\tinitGLContext();\n\n\t\tinfo.autoReset = infoAutoReset;\n\t\tshadowMap.enabled = shadowMapEnabled;\n\t\tshadowMap.autoUpdate = shadowMapAutoUpdate;\n\t\tshadowMap.needsUpdate = shadowMapNeedsUpdate;\n\t\tshadowMap.type = shadowMapType;\n\n\t}\n\n\tfunction onContextCreationError( event ) {\n\n\t\tconsole.error( 'THREE.WebGLRenderer: A WebGL context could not be created. Reason: ', event.statusMessage );\n\n\t}\n\n\tfunction onMaterialDispose( event ) {\n\n\t\tconst material = event.target;\n\n\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\n\n\t\tdeallocateMaterial( material );\n\n\t}\n\n\t// Buffer deallocation\n\n\tfunction deallocateMaterial( material ) {\n\n\t\treleaseMaterialProgramReferences( material );\n\n\t\tproperties.remove( material );\n\n\t}\n\n\n\tfunction releaseMaterialProgramReferences( material ) {\n\n\t\tconst programs = properties.get( material ).programs;\n\n\t\tif ( programs !== undefined ) {\n\n\t\t\tprograms.forEach( function ( program ) {\n\n\t\t\t\tprogramCache.releaseProgram( program );\n\n\t\t\t} );\n\n\t\t\tif ( material.isShaderMaterial ) {\n\n\t\t\t\tprogramCache.releaseShaderCache( material );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// Buffer rendering\n\n\tthis.renderBufferDirect = function ( camera, scene, geometry, material, object, group ) {\n\n\t\tif ( scene === null ) scene = _emptyScene; // renderBufferDirect second parameter used to be fog (could be null)\n\n\t\tconst frontFaceCW = ( object.isMesh && object.matrixWorld.determinant() < 0 );\n\n\t\tconst program = setProgram( camera, scene, geometry, material, object );\n\n\t\tstate.setMaterial( material, frontFaceCW );\n\n\t\t//\n\n\t\tlet index = geometry.index;\n\t\tconst position = geometry.attributes.position;\n\n\t\t//\n\n\t\tif ( index === null ) {\n\n\t\t\tif ( position === undefined || position.count === 0 ) return;\n\n\t\t} else if ( index.count === 0 ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t//\n\n\t\tlet rangeFactor = 1;\n\n\t\tif ( material.wireframe === true ) {\n\n\t\t\tindex = geometries.getWireframeAttribute( geometry );\n\t\t\trangeFactor = 2;\n\n\t\t}\n\n\t\tbindingStates.setup( object, material, program, geometry, index );\n\n\t\tlet attribute;\n\t\tlet renderer = bufferRenderer;\n\n\t\tif ( index !== null ) {\n\n\t\t\tattribute = attributes.get( index );\n\n\t\t\trenderer = indexedBufferRenderer;\n\t\t\trenderer.setIndex( attribute );\n\n\t\t}\n\n\t\t//\n\n\t\tconst dataCount = ( index !== null ) ? index.count : position.count;\n\n\t\tconst rangeStart = geometry.drawRange.start * rangeFactor;\n\t\tconst rangeCount = geometry.drawRange.count * rangeFactor;\n\n\t\tconst groupStart = group !== null ? group.start * rangeFactor : 0;\n\t\tconst groupCount = group !== null ? group.count * rangeFactor : Infinity;\n\n\t\tconst drawStart = Math.max( rangeStart, groupStart );\n\t\tconst drawEnd = Math.min( dataCount, rangeStart + rangeCount, groupStart + groupCount ) - 1;\n\n\t\tconst drawCount = Math.max( 0, drawEnd - drawStart + 1 );\n\n\t\tif ( drawCount === 0 ) return;\n\n\t\t//\n\n\t\tif ( object.isMesh ) {\n\n\t\t\tif ( material.wireframe === true ) {\n\n\t\t\t\tstate.setLineWidth( material.wireframeLinewidth * getTargetPixelRatio() );\n\t\t\t\trenderer.setMode( 1 );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setMode( 4 );\n\n\t\t\t}\n\n\t\t} else if ( object.isLine ) {\n\n\t\t\tlet lineWidth = material.linewidth;\n\n\t\t\tif ( lineWidth === undefined ) lineWidth = 1; // Not using Line*Material\n\n\t\t\tstate.setLineWidth( lineWidth * getTargetPixelRatio() );\n\n\t\t\tif ( object.isLineSegments ) {\n\n\t\t\t\trenderer.setMode( 1 );\n\n\t\t\t} else if ( object.isLineLoop ) {\n\n\t\t\t\trenderer.setMode( 2 );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setMode( 3 );\n\n\t\t\t}\n\n\t\t} else if ( object.isPoints ) {\n\n\t\t\trenderer.setMode( 0 );\n\n\t\t} else if ( object.isSprite ) {\n\n\t\t\trenderer.setMode( 4 );\n\n\t\t}\n\n\t\tif ( object.isInstancedMesh ) {\n\n\t\t\trenderer.renderInstances( drawStart, drawCount, object.count );\n\n\t\t} else if ( geometry.isInstancedBufferGeometry ) {\n\n\t\t\tconst instanceCount = Math.min( geometry.instanceCount, geometry._maxInstanceCount );\n\n\t\t\trenderer.renderInstances( drawStart, drawCount, instanceCount );\n\n\t\t} else {\n\n\t\t\trenderer.render( drawStart, drawCount );\n\n\t\t}\n\n\t};\n\n\t// Compile\n\n\tthis.compile = function ( scene, camera ) {\n\n\t\tfunction prepare( material, scene, object ) {\n\n\t\t\tif ( material.transparent === true && material.side === DoubleSide ) {\n\n\t\t\t\tmaterial.side = BackSide;\n\t\t\t\tmaterial.needsUpdate = true;\n\t\t\t\tgetProgram( material, scene, object );\n\n\t\t\t\tmaterial.side = FrontSide;\n\t\t\t\tmaterial.needsUpdate = true;\n\t\t\t\tgetProgram( material, scene, object );\n\n\t\t\t\tmaterial.side = DoubleSide;\n\n\t\t\t} else {\n\n\t\t\t\tgetProgram( material, scene, object );\n\n\t\t\t}\n\n\t\t}\n\n\t\tcurrentRenderState = renderStates.get( scene );\n\t\tcurrentRenderState.init();\n\n\t\trenderStateStack.push( currentRenderState );\n\n\t\tscene.traverseVisible( function ( object ) {\n\n\t\t\tif ( object.isLight && object.layers.test( camera.layers ) ) {\n\n\t\t\t\tcurrentRenderState.pushLight( object );\n\n\t\t\t\tif ( object.castShadow ) {\n\n\t\t\t\t\tcurrentRenderState.pushShadow( object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t\tcurrentRenderState.setupLights( _this.physicallyCorrectLights );\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tconst material = object.material;\n\n\t\t\tif ( material ) {\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tfor ( let i = 0; i < material.length; i ++ ) {\n\n\t\t\t\t\t\tconst material2 = material[ i ];\n\n\t\t\t\t\t\tprepare( material2, scene, object );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tprepare( material, scene, object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t\trenderStateStack.pop();\n\t\tcurrentRenderState = null;\n\n\t};\n\n\t// Animation Loop\n\n\tlet onAnimationFrameCallback = null;\n\n\tfunction onAnimationFrame( time ) {\n\n\t\tif ( onAnimationFrameCallback ) onAnimationFrameCallback( time );\n\n\t}\n\n\tfunction onXRSessionStart() {\n\n\t\tanimation.stop();\n\n\t}\n\n\tfunction onXRSessionEnd() {\n\n\t\tanimation.start();\n\n\t}\n\n\tconst animation = new WebGLAnimation();\n\tanimation.setAnimationLoop( onAnimationFrame );\n\n\tif ( typeof self !== 'undefined' ) animation.setContext( self );\n\n\tthis.setAnimationLoop = function ( callback ) {\n\n\t\tonAnimationFrameCallback = callback;\n\t\txr.setAnimationLoop( callback );\n\n\t\t( callback === null ) ? animation.stop() : animation.start();\n\n\t};\n\n\txr.addEventListener( 'sessionstart', onXRSessionStart );\n\txr.addEventListener( 'sessionend', onXRSessionEnd );\n\n\t// Rendering\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tif ( camera !== undefined && camera.isCamera !== true ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( _isContextLost === true ) return;\n\n\t\t// update scene graph\n\n\t\tif ( scene.matrixWorldAutoUpdate === true ) scene.updateMatrixWorld();\n\n\t\t// update camera matrices and frustum\n\n\t\tif ( camera.parent === null && camera.matrixWorldAutoUpdate === true ) camera.updateMatrixWorld();\n\n\t\tif ( xr.enabled === true && xr.isPresenting === true ) {\n\n\t\t\tif ( xr.cameraAutoUpdate === true ) xr.updateCamera( camera );\n\n\t\t\tcamera = xr.getCamera(); // use XR camera for rendering\n\n\t\t}\n\n\t\t//\n\t\tif ( scene.isScene === true ) scene.onBeforeRender( _this, scene, camera, _currentRenderTarget );\n\n\t\tcurrentRenderState = renderStates.get( scene, renderStateStack.length );\n\t\tcurrentRenderState.init();\n\n\t\trenderStateStack.push( currentRenderState );\n\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\t_frustum.setFromProjectionMatrix( _projScreenMatrix );\n\n\t\t_localClippingEnabled = this.localClippingEnabled;\n\t\t_clippingEnabled = clipping.init( this.clippingPlanes, _localClippingEnabled, camera );\n\n\t\tcurrentRenderList = renderLists.get( scene, renderListStack.length );\n\t\tcurrentRenderList.init();\n\n\t\trenderListStack.push( currentRenderList );\n\n\t\tprojectObject( scene, camera, 0, _this.sortObjects );\n\n\t\tcurrentRenderList.finish();\n\n\t\tif ( _this.sortObjects === true ) {\n\n\t\t\tcurrentRenderList.sort( _opaqueSort, _transparentSort );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( _clippingEnabled === true ) clipping.beginShadows();\n\n\t\tconst shadowsArray = currentRenderState.state.shadowsArray;\n\n\t\tshadowMap.render( shadowsArray, scene, camera );\n\n\t\tif ( _clippingEnabled === true ) clipping.endShadows();\n\n\t\t//\n\n\t\tif ( this.info.autoReset === true ) this.info.reset();\n\n\t\t//\n\n\t\tbackground.render( currentRenderList, scene );\n\n\t\t// render scene\n\n\t\tcurrentRenderState.setupLights( _this.physicallyCorrectLights );\n\n\t\tif ( camera.isArrayCamera ) {\n\n\t\t\tconst cameras = camera.cameras;\n\n\t\t\tfor ( let i = 0, l = cameras.length; i < l; i ++ ) {\n\n\t\t\t\tconst camera2 = cameras[ i ];\n\n\t\t\t\trenderScene( currentRenderList, scene, camera2, camera2.viewport );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\trenderScene( currentRenderList, scene, camera );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( _currentRenderTarget !== null ) {\n\n\t\t\t// resolve multisample renderbuffers to a single-sample texture if necessary\n\n\t\t\ttextures.updateMultisampleRenderTarget( _currentRenderTarget );\n\n\t\t\t// Generate mipmap if we're using any kind of mipmap filtering\n\n\t\t\ttextures.updateRenderTargetMipmap( _currentRenderTarget );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( scene.isScene === true ) scene.onAfterRender( _this, scene, camera );\n\n\t\t// _gl.finish();\n\n\t\tbindingStates.resetDefaultState();\n\t\t_currentMaterialId = - 1;\n\t\t_currentCamera = null;\n\n\t\trenderStateStack.pop();\n\n\t\tif ( renderStateStack.length > 0 ) {\n\n\t\t\tcurrentRenderState = renderStateStack[ renderStateStack.length - 1 ];\n\n\t\t} else {\n\n\t\t\tcurrentRenderState = null;\n\n\t\t}\n\n\t\trenderListStack.pop();\n\n\t\tif ( renderListStack.length > 0 ) {\n\n\t\t\tcurrentRenderList = renderListStack[ renderListStack.length - 1 ];\n\n\t\t} else {\n\n\t\t\tcurrentRenderList = null;\n\n\t\t}\n\n\t};\n\n\tfunction projectObject( object, camera, groupOrder, sortObjects ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tconst visible = object.layers.test( camera.layers );\n\n\t\tif ( visible ) {\n\n\t\t\tif ( object.isGroup ) {\n\n\t\t\t\tgroupOrder = object.renderOrder;\n\n\t\t\t} else if ( object.isLOD ) {\n\n\t\t\t\tif ( object.autoUpdate === true ) object.update( camera );\n\n\t\t\t} else if ( object.isLight ) {\n\n\t\t\t\tcurrentRenderState.pushLight( object );\n\n\t\t\t\tif ( object.castShadow ) {\n\n\t\t\t\t\tcurrentRenderState.pushShadow( object );\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isSprite ) {\n\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsSprite( object ) ) {\n\n\t\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst geometry = objects.update( object );\n\t\t\t\t\tconst material = object.material;\n\n\t\t\t\t\tif ( material.visible ) {\n\n\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, groupOrder, _vector3.z, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isMesh || object.isLine || object.isPoints ) {\n\n\t\t\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\t\t\t// update skeleton only once in a frame\n\n\t\t\t\t\tif ( object.skeleton.frame !== info.render.frame ) {\n\n\t\t\t\t\t\tobject.skeleton.update();\n\t\t\t\t\t\tobject.skeleton.frame = info.render.frame;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) {\n\n\t\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst geometry = objects.update( object );\n\t\t\t\t\tconst material = object.material;\n\n\t\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\t\tconst groups = geometry.groups;\n\n\t\t\t\t\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t\tconst group = groups[ i ];\n\t\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\t\tcurrentRenderList.push( object, geometry, groupMaterial, groupOrder, _vector3.z, group );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, groupOrder, _vector3.z, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tprojectObject( children[ i ], camera, groupOrder, sortObjects );\n\n\t\t}\n\n\t}\n\n\tfunction renderScene( currentRenderList, scene, camera, viewport ) {\n\n\t\tconst opaqueObjects = currentRenderList.opaque;\n\t\tconst transmissiveObjects = currentRenderList.transmissive;\n\t\tconst transparentObjects = currentRenderList.transparent;\n\n\t\tcurrentRenderState.setupLightsView( camera );\n\n\t\tif ( transmissiveObjects.length > 0 ) renderTransmissionPass( opaqueObjects, scene, camera );\n\n\t\tif ( viewport ) state.viewport( _currentViewport.copy( viewport ) );\n\n\t\tif ( opaqueObjects.length > 0 ) renderObjects( opaqueObjects, scene, camera );\n\t\tif ( transmissiveObjects.length > 0 ) renderObjects( transmissiveObjects, scene, camera );\n\t\tif ( transparentObjects.length > 0 ) renderObjects( transparentObjects, scene, camera );\n\n\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\n\n\t\tstate.buffers.depth.setTest( true );\n\t\tstate.buffers.depth.setMask( true );\n\t\tstate.buffers.color.setMask( true );\n\n\t\tstate.setPolygonOffset( false );\n\n\t}\n\n\tfunction renderTransmissionPass( opaqueObjects, scene, camera ) {\n\n\t\tconst isWebGL2 = capabilities.isWebGL2;\n\n\t\tif ( _transmissionRenderTarget === null ) {\n\n\t\t\t_transmissionRenderTarget = new WebGLRenderTarget( 1, 1, {\n\t\t\t\tgenerateMipmaps: true,\n\t\t\t\ttype: extensions.has( 'EXT_color_buffer_half_float' ) ? HalfFloatType : UnsignedByteType,\n\t\t\t\tminFilter: LinearMipmapLinearFilter,\n\t\t\t\tsamples: ( isWebGL2 && _antialias === true ) ? 4 : 0\n\t\t\t} );\n\n\t\t}\n\n\t\t_this.getDrawingBufferSize( _vector2 );\n\n\t\tif ( isWebGL2 ) {\n\n\t\t\t_transmissionRenderTarget.setSize( _vector2.x, _vector2.y );\n\n\t\t} else {\n\n\t\t\t_transmissionRenderTarget.setSize( floorPowerOfTwo( _vector2.x ), floorPowerOfTwo( _vector2.y ) );\n\n\t\t}\n\n\t\t//\n\n\t\tconst currentRenderTarget = _this.getRenderTarget();\n\t\t_this.setRenderTarget( _transmissionRenderTarget );\n\t\t_this.clear();\n\n\t\t// Turn off the features which can affect the frag color for opaque objects pass.\n\t\t// Otherwise they are applied twice in opaque objects pass and transmission objects pass.\n\t\tconst currentToneMapping = _this.toneMapping;\n\t\t_this.toneMapping = NoToneMapping;\n\n\t\trenderObjects( opaqueObjects, scene, camera );\n\n\t\t_this.toneMapping = currentToneMapping;\n\n\t\ttextures.updateMultisampleRenderTarget( _transmissionRenderTarget );\n\t\ttextures.updateRenderTargetMipmap( _transmissionRenderTarget );\n\n\t\t_this.setRenderTarget( currentRenderTarget );\n\n\t}\n\n\tfunction renderObjects( renderList, scene, camera ) {\n\n\t\tconst overrideMaterial = scene.isScene === true ? scene.overrideMaterial : null;\n\n\t\tfor ( let i = 0, l = renderList.length; i < l; i ++ ) {\n\n\t\t\tconst renderItem = renderList[ i ];\n\n\t\t\tconst object = renderItem.object;\n\t\t\tconst geometry = renderItem.geometry;\n\t\t\tconst material = overrideMaterial === null ? renderItem.material : overrideMaterial;\n\t\t\tconst group = renderItem.group;\n\n\t\t\tif ( object.layers.test( camera.layers ) ) {\n\n\t\t\t\trenderObject( object, scene, camera, geometry, material, group );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction renderObject( object, scene, camera, geometry, material, group ) {\n\n\t\tobject.onBeforeRender( _this, scene, camera, geometry, material, group );\n\n\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\n\t\tobject.normalMatrix.getNormalMatrix( object.modelViewMatrix );\n\n\t\tmaterial.onBeforeRender( _this, scene, camera, geometry, object, group );\n\n\t\tif ( material.transparent === true && material.side === DoubleSide ) {\n\n\t\t\tmaterial.side = BackSide;\n\t\t\tmaterial.needsUpdate = true;\n\t\t\t_this.renderBufferDirect( camera, scene, geometry, material, object, group );\n\n\t\t\tmaterial.side = FrontSide;\n\t\t\tmaterial.needsUpdate = true;\n\t\t\t_this.renderBufferDirect( camera, scene, geometry, material, object, group );\n\n\t\t\tmaterial.side = DoubleSide;\n\n\t\t} else {\n\n\t\t\t_this.renderBufferDirect( camera, scene, geometry, material, object, group );\n\n\t\t}\n\n\t\tobject.onAfterRender( _this, scene, camera, geometry, material, group );\n\n\t}\n\n\tfunction getProgram( material, scene, object ) {\n\n\t\tif ( scene.isScene !== true ) scene = _emptyScene; // scene could be a Mesh, Line, Points, ...\n\n\t\tconst materialProperties = properties.get( material );\n\n\t\tconst lights = currentRenderState.state.lights;\n\t\tconst shadowsArray = currentRenderState.state.shadowsArray;\n\n\t\tconst lightsStateVersion = lights.state.version;\n\n\t\tconst parameters = programCache.getParameters( material, lights.state, shadowsArray, scene, object );\n\t\tconst programCacheKey = programCache.getProgramCacheKey( parameters );\n\n\t\tlet programs = materialProperties.programs;\n\n\t\t// always update environment and fog - changing these trigger an getProgram call, but it's possible that the program doesn't change\n\n\t\tmaterialProperties.environment = material.isMeshStandardMaterial ? scene.environment : null;\n\t\tmaterialProperties.fog = scene.fog;\n\t\tmaterialProperties.envMap = ( material.isMeshStandardMaterial ? cubeuvmaps : cubemaps ).get( material.envMap || materialProperties.environment );\n\n\t\tif ( programs === undefined ) {\n\n\t\t\t// new material\n\n\t\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\n\n\t\t\tprograms = new Map();\n\t\t\tmaterialProperties.programs = programs;\n\n\t\t}\n\n\t\tlet program = programs.get( programCacheKey );\n\n\t\tif ( program !== undefined ) {\n\n\t\t\t// early out if program and light state is identical\n\n\t\t\tif ( materialProperties.currentProgram === program && materialProperties.lightsStateVersion === lightsStateVersion ) {\n\n\t\t\t\tupdateCommonMaterialProperties( material, parameters );\n\n\t\t\t\treturn program;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tparameters.uniforms = programCache.getUniforms( material );\n\n\t\t\tmaterial.onBuild( object, parameters, _this );\n\n\t\t\tmaterial.onBeforeCompile( parameters, _this );\n\n\t\t\tprogram = programCache.acquireProgram( parameters, programCacheKey );\n\t\t\tprograms.set( programCacheKey, program );\n\n\t\t\tmaterialProperties.uniforms = parameters.uniforms;\n\n\t\t}\n\n\t\tconst uniforms = materialProperties.uniforms;\n\n\t\tif ( ( ! material.isShaderMaterial && ! material.isRawShaderMaterial ) || material.clipping === true ) {\n\n\t\t\tuniforms.clippingPlanes = clipping.uniform;\n\n\t\t}\n\n\t\tupdateCommonMaterialProperties( material, parameters );\n\n\t\t// store the light setup it was created for\n\n\t\tmaterialProperties.needsLights = materialNeedsLights( material );\n\t\tmaterialProperties.lightsStateVersion = lightsStateVersion;\n\n\t\tif ( materialProperties.needsLights ) {\n\n\t\t\t// wire up the material to this renderer's lighting state\n\n\t\t\tuniforms.ambientLightColor.value = lights.state.ambient;\n\t\t\tuniforms.lightProbe.value = lights.state.probe;\n\t\t\tuniforms.directionalLights.value = lights.state.directional;\n\t\t\tuniforms.directionalLightShadows.value = lights.state.directionalShadow;\n\t\t\tuniforms.spotLights.value = lights.state.spot;\n\t\t\tuniforms.spotLightShadows.value = lights.state.spotShadow;\n\t\t\tuniforms.rectAreaLights.value = lights.state.rectArea;\n\t\t\tuniforms.ltc_1.value = lights.state.rectAreaLTC1;\n\t\t\tuniforms.ltc_2.value = lights.state.rectAreaLTC2;\n\t\t\tuniforms.pointLights.value = lights.state.point;\n\t\t\tuniforms.pointLightShadows.value = lights.state.pointShadow;\n\t\t\tuniforms.hemisphereLights.value = lights.state.hemi;\n\n\t\t\tuniforms.directionalShadowMap.value = lights.state.directionalShadowMap;\n\t\t\tuniforms.directionalShadowMatrix.value = lights.state.directionalShadowMatrix;\n\t\t\tuniforms.spotShadowMap.value = lights.state.spotShadowMap;\n\t\t\tuniforms.spotLightMatrix.value = lights.state.spotLightMatrix;\n\t\t\tuniforms.spotLightMap.value = lights.state.spotLightMap;\n\t\t\tuniforms.pointShadowMap.value = lights.state.pointShadowMap;\n\t\t\tuniforms.pointShadowMatrix.value = lights.state.pointShadowMatrix;\n\t\t\t// TODO (abelnation): add area lights shadow info to uniforms\n\n\t\t}\n\n\t\tconst progUniforms = program.getUniforms();\n\t\tconst uniformsList = WebGLUniforms.seqWithValue( progUniforms.seq, uniforms );\n\n\t\tmaterialProperties.currentProgram = program;\n\t\tmaterialProperties.uniformsList = uniformsList;\n\n\t\treturn program;\n\n\t}\n\n\tfunction updateCommonMaterialProperties( material, parameters ) {\n\n\t\tconst materialProperties = properties.get( material );\n\n\t\tmaterialProperties.outputEncoding = parameters.outputEncoding;\n\t\tmaterialProperties.instancing = parameters.instancing;\n\t\tmaterialProperties.skinning = parameters.skinning;\n\t\tmaterialProperties.morphTargets = parameters.morphTargets;\n\t\tmaterialProperties.morphNormals = parameters.morphNormals;\n\t\tmaterialProperties.morphColors = parameters.morphColors;\n\t\tmaterialProperties.morphTargetsCount = parameters.morphTargetsCount;\n\t\tmaterialProperties.numClippingPlanes = parameters.numClippingPlanes;\n\t\tmaterialProperties.numIntersection = parameters.numClipIntersection;\n\t\tmaterialProperties.vertexAlphas = parameters.vertexAlphas;\n\t\tmaterialProperties.vertexTangents = parameters.vertexTangents;\n\t\tmaterialProperties.toneMapping = parameters.toneMapping;\n\n\t}\n\n\tfunction setProgram( camera, scene, geometry, material, object ) {\n\n\t\tif ( scene.isScene !== true ) scene = _emptyScene; // scene could be a Mesh, Line, Points, ...\n\n\t\ttextures.resetTextureUnits();\n\n\t\tconst fog = scene.fog;\n\t\tconst environment = material.isMeshStandardMaterial ? scene.environment : null;\n\t\tconst encoding = ( _currentRenderTarget === null ) ? _this.outputEncoding : ( _currentRenderTarget.isXRRenderTarget === true ? _currentRenderTarget.texture.encoding : LinearEncoding );\n\t\tconst envMap = ( material.isMeshStandardMaterial ? cubeuvmaps : cubemaps ).get( material.envMap || environment );\n\t\tconst vertexAlphas = material.vertexColors === true && !! geometry.attributes.color && geometry.attributes.color.itemSize === 4;\n\t\tconst vertexTangents = !! material.normalMap && !! geometry.attributes.tangent;\n\t\tconst morphTargets = !! geometry.morphAttributes.position;\n\t\tconst morphNormals = !! geometry.morphAttributes.normal;\n\t\tconst morphColors = !! geometry.morphAttributes.color;\n\t\tconst toneMapping = material.toneMapped ? _this.toneMapping : NoToneMapping;\n\n\t\tconst morphAttribute = geometry.morphAttributes.position || geometry.morphAttributes.normal || geometry.morphAttributes.color;\n\t\tconst morphTargetsCount = ( morphAttribute !== undefined ) ? morphAttribute.length : 0;\n\n\t\tconst materialProperties = properties.get( material );\n\t\tconst lights = currentRenderState.state.lights;\n\n\t\tif ( _clippingEnabled === true ) {\n\n\t\t\tif ( _localClippingEnabled === true || camera !== _currentCamera ) {\n\n\t\t\t\tconst useCache =\n\t\t\t\t\tcamera === _currentCamera &&\n\t\t\t\t\tmaterial.id === _currentMaterialId;\n\n\t\t\t\t// we might want to call this function with some ClippingGroup\n\t\t\t\t// object instead of the material, once it becomes feasible\n\t\t\t\t// (#8465, #8379)\n\t\t\t\tclipping.setState( material, camera, useCache );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tlet needsProgramChange = false;\n\n\t\tif ( material.version === materialProperties.__version ) {\n\n\t\t\tif ( materialProperties.needsLights && ( materialProperties.lightsStateVersion !== lights.state.version ) ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( materialProperties.outputEncoding !== encoding ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( object.isInstancedMesh && materialProperties.instancing === false ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( ! object.isInstancedMesh && materialProperties.instancing === true ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( object.isSkinnedMesh && materialProperties.skinning === false ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( ! object.isSkinnedMesh && materialProperties.skinning === true ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( materialProperties.envMap !== envMap ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( material.fog === true && materialProperties.fog !== fog ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( materialProperties.numClippingPlanes !== undefined &&\n\t\t\t\t( materialProperties.numClippingPlanes !== clipping.numPlanes ||\n\t\t\t\tmaterialProperties.numIntersection !== clipping.numIntersection ) ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( materialProperties.vertexAlphas !== vertexAlphas ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( materialProperties.vertexTangents !== vertexTangents ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( materialProperties.morphTargets !== morphTargets ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( materialProperties.morphNormals !== morphNormals ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( materialProperties.morphColors !== morphColors ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( materialProperties.toneMapping !== toneMapping ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( capabilities.isWebGL2 === true && materialProperties.morphTargetsCount !== morphTargetsCount ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tneedsProgramChange = true;\n\t\t\tmaterialProperties.__version = material.version;\n\n\t\t}\n\n\t\t//\n\n\t\tlet program = materialProperties.currentProgram;\n\n\t\tif ( needsProgramChange === true ) {\n\n\t\t\tprogram = getProgram( material, scene, object );\n\n\t\t}\n\n\t\tlet refreshProgram = false;\n\t\tlet refreshMaterial = false;\n\t\tlet refreshLights = false;\n\n\t\tconst p_uniforms = program.getUniforms(),\n\t\t\tm_uniforms = materialProperties.uniforms;\n\n\t\tif ( state.useProgram( program.program ) ) {\n\n\t\t\trefreshProgram = true;\n\t\t\trefreshMaterial = true;\n\t\t\trefreshLights = true;\n\n\t\t}\n\n\t\tif ( material.id !== _currentMaterialId ) {\n\n\t\t\t_currentMaterialId = material.id;\n\n\t\t\trefreshMaterial = true;\n\n\t\t}\n\n\t\tif ( refreshProgram || _currentCamera !== camera ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'projectionMatrix', camera.projectionMatrix );\n\n\t\t\tif ( capabilities.logarithmicDepthBuffer ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'logDepthBufFC',\n\t\t\t\t\t2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\n\n\t\t\t}\n\n\t\t\tif ( _currentCamera !== camera ) {\n\n\t\t\t\t_currentCamera = camera;\n\n\t\t\t\t// lighting uniforms depend on the camera so enforce an update\n\t\t\t\t// now, in case this material supports lights - or later, when\n\t\t\t\t// the next material that does gets activated:\n\n\t\t\t\trefreshMaterial = true;\t\t// set to true on material change\n\t\t\t\trefreshLights = true;\t\t// remains set until update done\n\n\t\t\t}\n\n\t\t\t// load material specific uniforms\n\t\t\t// (shader material also gets them for the sake of genericity)\n\n\t\t\tif ( material.isShaderMaterial ||\n\t\t\t\tmaterial.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshToonMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.envMap ) {\n\n\t\t\t\tconst uCamPos = p_uniforms.map.cameraPosition;\n\n\t\t\t\tif ( uCamPos !== undefined ) {\n\n\t\t\t\t\tuCamPos.setValue( _gl,\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( camera.matrixWorld ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshToonMaterial ||\n\t\t\t\tmaterial.isMeshLambertMaterial ||\n\t\t\t\tmaterial.isMeshBasicMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.isShaderMaterial ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'isOrthographic', camera.isOrthographicCamera === true );\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshToonMaterial ||\n\t\t\t\tmaterial.isMeshLambertMaterial ||\n\t\t\t\tmaterial.isMeshBasicMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.isShaderMaterial ||\n\t\t\t\tmaterial.isShadowMaterial ||\n\t\t\t\tobject.isSkinnedMesh ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'viewMatrix', camera.matrixWorldInverse );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// skinning and morph target uniforms must be set even if material didn't change\n\t\t// auto-setting of texture unit for bone and morph texture must go before other textures\n\t\t// otherwise textures used for skinning and morphing can take over texture units reserved for other material textures\n\n\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrix' );\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrixInverse' );\n\n\t\t\tconst skeleton = object.skeleton;\n\n\t\t\tif ( skeleton ) {\n\n\t\t\t\tif ( capabilities.floatVertexTextures ) {\n\n\t\t\t\t\tif ( skeleton.boneTexture === null ) skeleton.computeBoneTexture();\n\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTexture', skeleton.boneTexture, textures );\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTextureSize', skeleton.boneTextureSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst morphAttributes = geometry.morphAttributes;\n\n\t\tif ( morphAttributes.position !== undefined || morphAttributes.normal !== undefined || ( morphAttributes.color !== undefined && capabilities.isWebGL2 === true ) ) {\n\n\t\t\tmorphtargets.update( object, geometry, material, program );\n\n\t\t}\n\n\t\tif ( refreshMaterial || materialProperties.receiveShadow !== object.receiveShadow ) {\n\n\t\t\tmaterialProperties.receiveShadow = object.receiveShadow;\n\t\t\tp_uniforms.setValue( _gl, 'receiveShadow', object.receiveShadow );\n\n\t\t}\n\n\t\t// https://github.com/mrdoob/three.js/pull/24467#issuecomment-1209031512\n\n\t\tif ( material.isMeshGouraudMaterial && material.envMap !== null ) {\n\n\t\t\tm_uniforms.envMap.value = envMap;\n\n\t\t\tm_uniforms.flipEnvMap.value = ( envMap.isCubeTexture && envMap.isRenderTargetTexture === false ) ? - 1 : 1;\n\n\t\t}\n\n\t\tif ( refreshMaterial ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'toneMappingExposure', _this.toneMappingExposure );\n\n\t\t\tif ( materialProperties.needsLights ) {\n\n\t\t\t\t// the current material requires lighting info\n\n\t\t\t\t// note: all lighting uniforms are always set correctly\n\t\t\t\t// they simply reference the renderer's state for their\n\t\t\t\t// values\n\t\t\t\t//\n\t\t\t\t// use the current material's .needsUpdate flags to set\n\t\t\t\t// the GL state when required\n\n\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, refreshLights );\n\n\t\t\t}\n\n\t\t\t// refresh uniforms common to several materials\n\n\t\t\tif ( fog && material.fog === true ) {\n\n\t\t\t\tmaterials.refreshFogUniforms( m_uniforms, fog );\n\n\t\t\t}\n\n\t\t\tmaterials.refreshMaterialUniforms( m_uniforms, material, _pixelRatio, _height, _transmissionRenderTarget );\n\n\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, textures );\n\n\t\t}\n\n\t\tif ( material.isShaderMaterial && material.uniformsNeedUpdate === true ) {\n\n\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, textures );\n\t\t\tmaterial.uniformsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( material.isSpriteMaterial ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'center', object.center );\n\n\t\t}\n\n\t\t// common matrices\n\n\t\tp_uniforms.setValue( _gl, 'modelViewMatrix', object.modelViewMatrix );\n\t\tp_uniforms.setValue( _gl, 'normalMatrix', object.normalMatrix );\n\t\tp_uniforms.setValue( _gl, 'modelMatrix', object.matrixWorld );\n\n\t\t// UBOs\n\n\t\tif ( material.isShaderMaterial || material.isRawShaderMaterial ) {\n\n\t\t\tconst groups = material.uniformsGroups;\n\n\t\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\t\tif ( capabilities.isWebGL2 ) {\n\n\t\t\t\t\tconst group = groups[ i ];\n\n\t\t\t\t\tuniformsGroups.update( group, program );\n\t\t\t\t\tuniformsGroups.bind( group, program );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn program;\n\n\t}\n\n\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\n\n\tfunction markUniformsLightsNeedsUpdate( uniforms, value ) {\n\n\t\tuniforms.ambientLightColor.needsUpdate = value;\n\t\tuniforms.lightProbe.needsUpdate = value;\n\n\t\tuniforms.directionalLights.needsUpdate = value;\n\t\tuniforms.directionalLightShadows.needsUpdate = value;\n\t\tuniforms.pointLights.needsUpdate = value;\n\t\tuniforms.pointLightShadows.needsUpdate = value;\n\t\tuniforms.spotLights.needsUpdate = value;\n\t\tuniforms.spotLightShadows.needsUpdate = value;\n\t\tuniforms.rectAreaLights.needsUpdate = value;\n\t\tuniforms.hemisphereLights.needsUpdate = value;\n\n\t}\n\n\tfunction materialNeedsLights( material ) {\n\n\t\treturn material.isMeshLambertMaterial || material.isMeshToonMaterial || material.isMeshPhongMaterial ||\n\t\t\tmaterial.isMeshStandardMaterial || material.isShadowMaterial ||\n\t\t\t( material.isShaderMaterial && material.lights === true );\n\n\t}\n\n\tthis.getActiveCubeFace = function () {\n\n\t\treturn _currentActiveCubeFace;\n\n\t};\n\n\tthis.getActiveMipmapLevel = function () {\n\n\t\treturn _currentActiveMipmapLevel;\n\n\t};\n\n\tthis.getRenderTarget = function () {\n\n\t\treturn _currentRenderTarget;\n\n\t};\n\n\tthis.setRenderTargetTextures = function ( renderTarget, colorTexture, depthTexture ) {\n\n\t\tproperties.get( renderTarget.texture ).__webglTexture = colorTexture;\n\t\tproperties.get( renderTarget.depthTexture ).__webglTexture = depthTexture;\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\trenderTargetProperties.__hasExternalTextures = true;\n\n\t\tif ( renderTargetProperties.__hasExternalTextures ) {\n\n\t\t\trenderTargetProperties.__autoAllocateDepthBuffer = depthTexture === undefined;\n\n\t\t\tif ( ! renderTargetProperties.__autoAllocateDepthBuffer ) {\n\n\t\t\t\t// The multisample_render_to_texture extension doesn't work properly if there\n\t\t\t\t// are midframe flushes and an external depth buffer. Disable use of the extension.\n\t\t\t\tif ( extensions.has( 'WEBGL_multisampled_render_to_texture' ) === true ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided' );\n\t\t\t\t\trenderTargetProperties.__useRenderToTexture = false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.setRenderTargetFramebuffer = function ( renderTarget, defaultFramebuffer ) {\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\trenderTargetProperties.__webglFramebuffer = defaultFramebuffer;\n\t\trenderTargetProperties.__useDefaultFramebuffer = defaultFramebuffer === undefined;\n\n\t};\n\n\tthis.setRenderTarget = function ( renderTarget, activeCubeFace = 0, activeMipmapLevel = 0 ) {\n\n\t\t_currentRenderTarget = renderTarget;\n\t\t_currentActiveCubeFace = activeCubeFace;\n\t\t_currentActiveMipmapLevel = activeMipmapLevel;\n\n\t\tlet useDefaultFramebuffer = true;\n\n\t\tif ( renderTarget ) {\n\n\t\t\tconst renderTargetProperties = properties.get( renderTarget );\n\n\t\t\tif ( renderTargetProperties.__useDefaultFramebuffer !== undefined ) {\n\n\t\t\t\t// We need to make sure to rebind the framebuffer.\n\t\t\t\tstate.bindFramebuffer( 36160, null );\n\t\t\t\tuseDefaultFramebuffer = false;\n\n\t\t\t} else if ( renderTargetProperties.__webglFramebuffer === undefined ) {\n\n\t\t\t\ttextures.setupRenderTarget( renderTarget );\n\n\t\t\t} else if ( renderTargetProperties.__hasExternalTextures ) {\n\n\t\t\t\t// Color and depth texture must be rebound in order for the swapchain to update.\n\t\t\t\ttextures.rebindTextures( renderTarget, properties.get( renderTarget.texture ).__webglTexture, properties.get( renderTarget.depthTexture ).__webglTexture );\n\n\t\t\t}\n\n\t\t}\n\n\t\tlet framebuffer = null;\n\t\tlet isCube = false;\n\t\tlet isRenderTarget3D = false;\n\n\t\tif ( renderTarget ) {\n\n\t\t\tconst texture = renderTarget.texture;\n\n\t\t\tif ( texture.isData3DTexture || texture.isDataArrayTexture ) {\n\n\t\t\t\tisRenderTarget3D = true;\n\n\t\t\t}\n\n\t\t\tconst __webglFramebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\t\tif ( renderTarget.isWebGLCubeRenderTarget ) {\n\n\t\t\t\tframebuffer = __webglFramebuffer[ activeCubeFace ];\n\t\t\t\tisCube = true;\n\n\t\t\t} else if ( ( capabilities.isWebGL2 && renderTarget.samples > 0 ) && textures.useMultisampledRTT( renderTarget ) === false ) {\n\n\t\t\t\tframebuffer = properties.get( renderTarget ).__webglMultisampledFramebuffer;\n\n\t\t\t} else {\n\n\t\t\t\tframebuffer = __webglFramebuffer;\n\n\t\t\t}\n\n\t\t\t_currentViewport.copy( renderTarget.viewport );\n\t\t\t_currentScissor.copy( renderTarget.scissor );\n\t\t\t_currentScissorTest = renderTarget.scissorTest;\n\n\t\t} else {\n\n\t\t\t_currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor();\n\t\t\t_currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor();\n\t\t\t_currentScissorTest = _scissorTest;\n\n\t\t}\n\n\t\tconst framebufferBound = state.bindFramebuffer( 36160, framebuffer );\n\n\t\tif ( framebufferBound && capabilities.drawBuffers && useDefaultFramebuffer ) {\n\n\t\t\tstate.drawBuffers( renderTarget, framebuffer );\n\n\t\t}\n\n\t\tstate.viewport( _currentViewport );\n\t\tstate.scissor( _currentScissor );\n\t\tstate.setScissorTest( _currentScissorTest );\n\n\t\tif ( isCube ) {\n\n\t\t\tconst textureProperties = properties.get( renderTarget.texture );\n\t\t\t_gl.framebufferTexture2D( 36160, 36064, 34069 + activeCubeFace, textureProperties.__webglTexture, activeMipmapLevel );\n\n\t\t} else if ( isRenderTarget3D ) {\n\n\t\t\tconst textureProperties = properties.get( renderTarget.texture );\n\t\t\tconst layer = activeCubeFace || 0;\n\t\t\t_gl.framebufferTextureLayer( 36160, 36064, textureProperties.__webglTexture, activeMipmapLevel || 0, layer );\n\n\t\t}\n\n\t\t_currentMaterialId = - 1; // reset current material to ensure correct uniform bindings\n\n\t};\n\n\tthis.readRenderTargetPixels = function ( renderTarget, x, y, width, height, buffer, activeCubeFaceIndex ) {\n\n\t\tif ( ! ( renderTarget && renderTarget.isWebGLRenderTarget ) ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tlet framebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\tif ( renderTarget.isWebGLCubeRenderTarget && activeCubeFaceIndex !== undefined ) {\n\n\t\t\tframebuffer = framebuffer[ activeCubeFaceIndex ];\n\n\t\t}\n\n\t\tif ( framebuffer ) {\n\n\t\t\tstate.bindFramebuffer( 36160, framebuffer );\n\n\t\t\ttry {\n\n\t\t\t\tconst texture = renderTarget.texture;\n\t\t\t\tconst textureFormat = texture.format;\n\t\t\t\tconst textureType = texture.type;\n\n\t\t\t\tif ( textureFormat !== RGBAFormat && utils.convert( textureFormat ) !== _gl.getParameter( 35739 ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tconst halfFloatSupportedByExt = ( textureType === HalfFloatType ) && ( extensions.has( 'EXT_color_buffer_half_float' ) || ( capabilities.isWebGL2 && extensions.has( 'EXT_color_buffer_float' ) ) );\n\n\t\t\t\tif ( textureType !== UnsignedByteType && utils.convert( textureType ) !== _gl.getParameter( 35738 ) && // Edge and Chrome Mac < 52 (#9513)\n\t\t\t\t\t! ( textureType === FloatType && ( capabilities.isWebGL2 || extensions.has( 'OES_texture_float' ) || extensions.has( 'WEBGL_color_buffer_float' ) ) ) && // Chrome Mac >= 52 and Firefox\n\t\t\t\t\t! halfFloatSupportedByExt ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\t// the following if statement ensures valid read requests (no out-of-bounds pixels, see #8604)\n\n\t\t\t\tif ( ( x >= 0 && x <= ( renderTarget.width - width ) ) && ( y >= 0 && y <= ( renderTarget.height - height ) ) ) {\n\n\t\t\t\t\t_gl.readPixels( x, y, width, height, utils.convert( textureFormat ), utils.convert( textureType ), buffer );\n\n\t\t\t\t}\n\n\t\t\t} finally {\n\n\t\t\t\t// restore framebuffer of current render target if necessary\n\n\t\t\t\tconst framebuffer = ( _currentRenderTarget !== null ) ? properties.get( _currentRenderTarget ).__webglFramebuffer : null;\n\t\t\t\tstate.bindFramebuffer( 36160, framebuffer );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.copyFramebufferToTexture = function ( position, texture, level = 0 ) {\n\n\t\tconst levelScale = Math.pow( 2, - level );\n\t\tconst width = Math.floor( texture.image.width * levelScale );\n\t\tconst height = Math.floor( texture.image.height * levelScale );\n\n\t\ttextures.setTexture2D( texture, 0 );\n\n\t\t_gl.copyTexSubImage2D( 3553, level, 0, 0, position.x, position.y, width, height );\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tthis.copyTextureToTexture = function ( position, srcTexture, dstTexture, level = 0 ) {\n\n\t\tconst width = srcTexture.image.width;\n\t\tconst height = srcTexture.image.height;\n\t\tconst glFormat = utils.convert( dstTexture.format );\n\t\tconst glType = utils.convert( dstTexture.type );\n\n\t\ttextures.setTexture2D( dstTexture, 0 );\n\n\t\t// As another texture upload may have changed pixelStorei\n\t\t// parameters, make sure they are correct for the dstTexture\n\t\t_gl.pixelStorei( 37440, dstTexture.flipY );\n\t\t_gl.pixelStorei( 37441, dstTexture.premultiplyAlpha );\n\t\t_gl.pixelStorei( 3317, dstTexture.unpackAlignment );\n\n\t\tif ( srcTexture.isDataTexture ) {\n\n\t\t\t_gl.texSubImage2D( 3553, level, position.x, position.y, width, height, glFormat, glType, srcTexture.image.data );\n\n\t\t} else {\n\n\t\t\tif ( srcTexture.isCompressedTexture ) {\n\n\t\t\t\t_gl.compressedTexSubImage2D( 3553, level, position.x, position.y, srcTexture.mipmaps[ 0 ].width, srcTexture.mipmaps[ 0 ].height, glFormat, srcTexture.mipmaps[ 0 ].data );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.texSubImage2D( 3553, level, position.x, position.y, glFormat, glType, srcTexture.image );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Generate mipmaps only when copying level 0\n\t\tif ( level === 0 && dstTexture.generateMipmaps ) _gl.generateMipmap( 3553 );\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tthis.copyTextureToTexture3D = function ( sourceBox, position, srcTexture, dstTexture, level = 0 ) {\n\n\t\tif ( _this.isWebGL1Renderer ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst width = sourceBox.max.x - sourceBox.min.x + 1;\n\t\tconst height = sourceBox.max.y - sourceBox.min.y + 1;\n\t\tconst depth = sourceBox.max.z - sourceBox.min.z + 1;\n\t\tconst glFormat = utils.convert( dstTexture.format );\n\t\tconst glType = utils.convert( dstTexture.type );\n\t\tlet glTarget;\n\n\t\tif ( dstTexture.isData3DTexture ) {\n\n\t\t\ttextures.setTexture3D( dstTexture, 0 );\n\t\t\tglTarget = 32879;\n\n\t\t} else if ( dstTexture.isDataArrayTexture ) {\n\n\t\t\ttextures.setTexture2DArray( dstTexture, 0 );\n\t\t\tglTarget = 35866;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\t_gl.pixelStorei( 37440, dstTexture.flipY );\n\t\t_gl.pixelStorei( 37441, dstTexture.premultiplyAlpha );\n\t\t_gl.pixelStorei( 3317, dstTexture.unpackAlignment );\n\n\t\tconst unpackRowLen = _gl.getParameter( 3314 );\n\t\tconst unpackImageHeight = _gl.getParameter( 32878 );\n\t\tconst unpackSkipPixels = _gl.getParameter( 3316 );\n\t\tconst unpackSkipRows = _gl.getParameter( 3315 );\n\t\tconst unpackSkipImages = _gl.getParameter( 32877 );\n\n\t\tconst image = srcTexture.isCompressedTexture ? srcTexture.mipmaps[ 0 ] : srcTexture.image;\n\n\t\t_gl.pixelStorei( 3314, image.width );\n\t\t_gl.pixelStorei( 32878, image.height );\n\t\t_gl.pixelStorei( 3316, sourceBox.min.x );\n\t\t_gl.pixelStorei( 3315, sourceBox.min.y );\n\t\t_gl.pixelStorei( 32877, sourceBox.min.z );\n\n\t\tif ( srcTexture.isDataTexture || srcTexture.isData3DTexture ) {\n\n\t\t\t_gl.texSubImage3D( glTarget, level, position.x, position.y, position.z, width, height, depth, glFormat, glType, image.data );\n\n\t\t} else {\n\n\t\t\tif ( srcTexture.isCompressedTexture ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture.' );\n\t\t\t\t_gl.compressedTexSubImage3D( glTarget, level, position.x, position.y, position.z, width, height, depth, glFormat, image.data );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.texSubImage3D( glTarget, level, position.x, position.y, position.z, width, height, depth, glFormat, glType, image );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_gl.pixelStorei( 3314, unpackRowLen );\n\t\t_gl.pixelStorei( 32878, unpackImageHeight );\n\t\t_gl.pixelStorei( 3316, unpackSkipPixels );\n\t\t_gl.pixelStorei( 3315, unpackSkipRows );\n\t\t_gl.pixelStorei( 32877, unpackSkipImages );\n\n\t\t// Generate mipmaps only when copying level 0\n\t\tif ( level === 0 && dstTexture.generateMipmaps ) _gl.generateMipmap( glTarget );\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tthis.initTexture = function ( texture ) {\n\n\t\tif ( texture.isCubeTexture ) {\n\n\t\t\ttextures.setTextureCube( texture, 0 );\n\n\t\t} else if ( texture.isData3DTexture ) {\n\n\t\t\ttextures.setTexture3D( texture, 0 );\n\n\t\t} else if ( texture.isDataArrayTexture ) {\n\n\t\t\ttextures.setTexture2DArray( texture, 0 );\n\n\t\t} else {\n\n\t\t\ttextures.setTexture2D( texture, 0 );\n\n\t\t}\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tthis.resetState = function () {\n\n\t\t_currentActiveCubeFace = 0;\n\t\t_currentActiveMipmapLevel = 0;\n\t\t_currentRenderTarget = null;\n\n\t\tstate.reset();\n\t\tbindingStates.reset();\n\n\t};\n\n\tif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'observe', { detail: this } ) );\n\n\t}\n\n}\n\nclass WebGL1Renderer extends WebGLRenderer {}\n\nWebGL1Renderer.prototype.isWebGL1Renderer = true;\n\nclass FogExp2 {\n\n\tconstructor( color, density = 0.00025 ) {\n\n\t\tthis.isFogExp2 = true;\n\n\t\tthis.name = '';\n\n\t\tthis.color = new Color( color );\n\t\tthis.density = density;\n\n\t}\n\n\tclone() {\n\n\t\treturn new FogExp2( this.color, this.density );\n\n\t}\n\n\ttoJSON( /* meta */ ) {\n\n\t\treturn {\n\t\t\ttype: 'FogExp2',\n\t\t\tcolor: this.color.getHex(),\n\t\t\tdensity: this.density\n\t\t};\n\n\t}\n\n}\n\nclass Fog {\n\n\tconstructor( color, near = 1, far = 1000 ) {\n\n\t\tthis.isFog = true;\n\n\t\tthis.name = '';\n\n\t\tthis.color = new Color( color );\n\n\t\tthis.near = near;\n\t\tthis.far = far;\n\n\t}\n\n\tclone() {\n\n\t\treturn new Fog( this.color, this.near, this.far );\n\n\t}\n\n\ttoJSON( /* meta */ ) {\n\n\t\treturn {\n\t\t\ttype: 'Fog',\n\t\t\tcolor: this.color.getHex(),\n\t\t\tnear: this.near,\n\t\t\tfar: this.far\n\t\t};\n\n\t}\n\n}\n\nclass Scene extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isScene = true;\n\n\t\tthis.type = 'Scene';\n\n\t\tthis.background = null;\n\t\tthis.environment = null;\n\t\tthis.fog = null;\n\n\t\tthis.overrideMaterial = null;\n\n\t\tif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t\t\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'observe', { detail: this } ) );\n\n\t\t}\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tif ( source.background !== null ) this.background = source.background.clone();\n\t\tif ( source.environment !== null ) this.environment = source.environment.clone();\n\t\tif ( source.fog !== null ) this.fog = source.fog.clone();\n\n\t\tif ( source.overrideMaterial !== null ) this.overrideMaterial = source.overrideMaterial.clone();\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tif ( this.fog !== null ) data.object.fog = this.fog.toJSON();\n\n\t\treturn data;\n\n\t}\n\n\t// @deprecated\n\n\tget autoUpdate() {\n\n\t\tconsole.warn( 'THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144.' );\n\t\treturn this.matrixWorldAutoUpdate;\n\n\t}\n\n\tset autoUpdate( value ) {\n\n\t\tconsole.warn( 'THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144.' );\n\t\tthis.matrixWorldAutoUpdate = value;\n\n\t}\n\n}\n\nclass InterleavedBuffer {\n\n\tconstructor( array, stride ) {\n\n\t\tthis.isInterleavedBuffer = true;\n\n\t\tthis.array = array;\n\t\tthis.stride = stride;\n\t\tthis.count = array !== undefined ? array.length / stride : 0;\n\n\t\tthis.usage = StaticDrawUsage;\n\t\tthis.updateRange = { offset: 0, count: - 1 };\n\n\t\tthis.version = 0;\n\n\t\tthis.uuid = generateUUID();\n\n\t}\n\n\tonUploadCallback() {}\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n\tsetUsage( value ) {\n\n\t\tthis.usage = value;\n\n\t\treturn this;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.count = source.count;\n\t\tthis.stride = source.stride;\n\t\tthis.usage = source.usage;\n\n\t\treturn this;\n\n\t}\n\n\tcopyAt( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.stride;\n\t\tindex2 *= attribute.stride;\n\n\t\tfor ( let i = 0, l = this.stride; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tset( value, offset = 0 ) {\n\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t}\n\n\tclone( data ) {\n\n\t\tif ( data.arrayBuffers === undefined ) {\n\n\t\t\tdata.arrayBuffers = {};\n\n\t\t}\n\n\t\tif ( this.array.buffer._uuid === undefined ) {\n\n\t\t\tthis.array.buffer._uuid = generateUUID();\n\n\t\t}\n\n\t\tif ( data.arrayBuffers[ this.array.buffer._uuid ] === undefined ) {\n\n\t\t\tdata.arrayBuffers[ this.array.buffer._uuid ] = this.array.slice( 0 ).buffer;\n\n\t\t}\n\n\t\tconst array = new this.array.constructor( data.arrayBuffers[ this.array.buffer._uuid ] );\n\n\t\tconst ib = new this.constructor( array, this.stride );\n\t\tib.setUsage( this.usage );\n\n\t\treturn ib;\n\n\t}\n\n\tonUpload( callback ) {\n\n\t\tthis.onUploadCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( data ) {\n\n\t\tif ( data.arrayBuffers === undefined ) {\n\n\t\t\tdata.arrayBuffers = {};\n\n\t\t}\n\n\t\t// generate UUID for array buffer if necessary\n\n\t\tif ( this.array.buffer._uuid === undefined ) {\n\n\t\t\tthis.array.buffer._uuid = generateUUID();\n\n\t\t}\n\n\t\tif ( data.arrayBuffers[ this.array.buffer._uuid ] === undefined ) {\n\n\t\t\tdata.arrayBuffers[ this.array.buffer._uuid ] = Array.from( new Uint32Array( this.array.buffer ) );\n\n\t\t}\n\n\t\t//\n\n\t\treturn {\n\t\t\tuuid: this.uuid,\n\t\t\tbuffer: this.array.buffer._uuid,\n\t\t\ttype: this.array.constructor.name,\n\t\t\tstride: this.stride\n\t\t};\n\n\t}\n\n}\n\nconst _vector$6 = /*@__PURE__*/ new Vector3();\n\nclass InterleavedBufferAttribute {\n\n\tconstructor( interleavedBuffer, itemSize, offset, normalized = false ) {\n\n\t\tthis.isInterleavedBufferAttribute = true;\n\n\t\tthis.name = '';\n\n\t\tthis.data = interleavedBuffer;\n\t\tthis.itemSize = itemSize;\n\t\tthis.offset = offset;\n\n\t\tthis.normalized = normalized === true;\n\n\t}\n\n\tget count() {\n\n\t\treturn this.data.count;\n\n\t}\n\n\tget array() {\n\n\t\treturn this.data.array;\n\n\t}\n\n\tset needsUpdate( value ) {\n\n\t\tthis.data.needsUpdate = value;\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tfor ( let i = 0, l = this.data.count; i < l; i ++ ) {\n\n\t\t\t_vector$6.fromBufferAttribute( this, i );\n\n\t\t\t_vector$6.applyMatrix4( m );\n\n\t\t\tthis.setXYZ( i, _vector$6.x, _vector$6.y, _vector$6.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tapplyNormalMatrix( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$6.fromBufferAttribute( this, i );\n\n\t\t\t_vector$6.applyNormalMatrix( m );\n\n\t\t\tthis.setXYZ( i, _vector$6.x, _vector$6.y, _vector$6.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttransformDirection( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$6.fromBufferAttribute( this, i );\n\n\t\t\t_vector$6.transformDirection( m );\n\n\t\t\tthis.setXYZ( i, _vector$6.x, _vector$6.y, _vector$6.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetX( index, x ) {\n\n\t\tif ( this.normalized ) x = normalize( x, this.array );\n\n\t\tthis.data.array[ index * this.data.stride + this.offset ] = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( index, y ) {\n\n\t\tif ( this.normalized ) y = normalize( y, this.array );\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 1 ] = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetZ( index, z ) {\n\n\t\tif ( this.normalized ) z = normalize( z, this.array );\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 2 ] = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetW( index, w ) {\n\n\t\tif ( this.normalized ) w = normalize( w, this.array );\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 3 ] = w;\n\n\t\treturn this;\n\n\t}\n\n\tgetX( index ) {\n\n\t\tlet x = this.data.array[ index * this.data.stride + this.offset ];\n\n\t\tif ( this.normalized ) x = denormalize( x, this.array );\n\n\t\treturn x;\n\n\t}\n\n\tgetY( index ) {\n\n\t\tlet y = this.data.array[ index * this.data.stride + this.offset + 1 ];\n\n\t\tif ( this.normalized ) y = denormalize( y, this.array );\n\n\t\treturn y;\n\n\t}\n\n\tgetZ( index ) {\n\n\t\tlet z = this.data.array[ index * this.data.stride + this.offset + 2 ];\n\n\t\tif ( this.normalized ) z = denormalize( z, this.array );\n\n\t\treturn z;\n\n\t}\n\n\tgetW( index ) {\n\n\t\tlet w = this.data.array[ index * this.data.stride + this.offset + 3 ];\n\n\t\tif ( this.normalized ) w = denormalize( w, this.array );\n\n\t\treturn w;\n\n\t}\n\n\tsetXY( index, x, y ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tif ( this.normalized ) {\n\n\t\t\tx = normalize( x, this.array );\n\t\t\ty = normalize( y, this.array );\n\n\t\t}\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetXYZ( index, x, y, z ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tif ( this.normalized ) {\n\n\t\t\tx = normalize( x, this.array );\n\t\t\ty = normalize( y, this.array );\n\t\t\tz = normalize( z, this.array );\n\n\t\t}\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\t\tthis.data.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetXYZW( index, x, y, z, w ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tif ( this.normalized ) {\n\n\t\t\tx = normalize( x, this.array );\n\t\t\ty = normalize( y, this.array );\n\t\t\tz = normalize( z, this.array );\n\t\t\tw = normalize( w, this.array );\n\n\t\t}\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\t\tthis.data.array[ index + 2 ] = z;\n\t\tthis.data.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t}\n\n\tclone( data ) {\n\n\t\tif ( data === undefined ) {\n\n\t\t\tconsole.log( 'THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.' );\n\n\t\t\tconst array = [];\n\n\t\t\tfor ( let i = 0; i < this.count; i ++ ) {\n\n\t\t\t\tconst index = i * this.data.stride + this.offset;\n\n\t\t\t\tfor ( let j = 0; j < this.itemSize; j ++ ) {\n\n\t\t\t\t\tarray.push( this.data.array[ index + j ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new BufferAttribute( new this.array.constructor( array ), this.itemSize, this.normalized );\n\n\t\t} else {\n\n\t\t\tif ( data.interleavedBuffers === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers = {};\n\n\t\t\t}\n\n\t\t\tif ( data.interleavedBuffers[ this.data.uuid ] === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers[ this.data.uuid ] = this.data.clone( data );\n\n\t\t\t}\n\n\t\t\treturn new InterleavedBufferAttribute( data.interleavedBuffers[ this.data.uuid ], this.itemSize, this.offset, this.normalized );\n\n\t\t}\n\n\t}\n\n\ttoJSON( data ) {\n\n\t\tif ( data === undefined ) {\n\n\t\t\tconsole.log( 'THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.' );\n\n\t\t\tconst array = [];\n\n\t\t\tfor ( let i = 0; i < this.count; i ++ ) {\n\n\t\t\t\tconst index = i * this.data.stride + this.offset;\n\n\t\t\t\tfor ( let j = 0; j < this.itemSize; j ++ ) {\n\n\t\t\t\t\tarray.push( this.data.array[ index + j ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// deinterleave data and save it as an ordinary buffer attribute for now\n\n\t\t\treturn {\n\t\t\t\titemSize: this.itemSize,\n\t\t\t\ttype: this.array.constructor.name,\n\t\t\t\tarray: array,\n\t\t\t\tnormalized: this.normalized\n\t\t\t};\n\n\t\t} else {\n\n\t\t\t// save as true interleaved attribtue\n\n\t\t\tif ( data.interleavedBuffers === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers = {};\n\n\t\t\t}\n\n\t\t\tif ( data.interleavedBuffers[ this.data.uuid ] === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers[ this.data.uuid ] = this.data.toJSON( data );\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tisInterleavedBufferAttribute: true,\n\t\t\t\titemSize: this.itemSize,\n\t\t\t\tdata: this.data.uuid,\n\t\t\t\toffset: this.offset,\n\t\t\t\tnormalized: this.normalized\n\t\t\t};\n\n\t\t}\n\n\t}\n\n}\n\nclass SpriteMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isSpriteMaterial = true;\n\n\t\tthis.type = 'SpriteMaterial';\n\n\t\tthis.color = new Color( 0xffffff );\n\n\t\tthis.map = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.rotation = 0;\n\n\t\tthis.sizeAttenuation = true;\n\n\t\tthis.transparent = true;\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.map = source.map;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.rotation = source.rotation;\n\n\t\tthis.sizeAttenuation = source.sizeAttenuation;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nlet _geometry;\n\nconst _intersectPoint = /*@__PURE__*/ new Vector3();\nconst _worldScale = /*@__PURE__*/ new Vector3();\nconst _mvPosition = /*@__PURE__*/ new Vector3();\n\nconst _alignedPosition = /*@__PURE__*/ new Vector2();\nconst _rotatedPosition = /*@__PURE__*/ new Vector2();\nconst _viewWorldMatrix = /*@__PURE__*/ new Matrix4();\n\nconst _vA = /*@__PURE__*/ new Vector3();\nconst _vB = /*@__PURE__*/ new Vector3();\nconst _vC = /*@__PURE__*/ new Vector3();\n\nconst _uvA = /*@__PURE__*/ new Vector2();\nconst _uvB = /*@__PURE__*/ new Vector2();\nconst _uvC = /*@__PURE__*/ new Vector2();\n\nclass Sprite extends Object3D {\n\n\tconstructor( material ) {\n\n\t\tsuper();\n\n\t\tthis.isSprite = true;\n\n\t\tthis.type = 'Sprite';\n\n\t\tif ( _geometry === undefined ) {\n\n\t\t\t_geometry = new BufferGeometry();\n\n\t\t\tconst float32Array = new Float32Array( [\n\t\t\t\t- 0.5, - 0.5, 0, 0, 0,\n\t\t\t\t0.5, - 0.5, 0, 1, 0,\n\t\t\t\t0.5, 0.5, 0, 1, 1,\n\t\t\t\t- 0.5, 0.5, 0, 0, 1\n\t\t\t] );\n\n\t\t\tconst interleavedBuffer = new InterleavedBuffer( float32Array, 5 );\n\n\t\t\t_geometry.setIndex( [ 0, 1, 2,\t0, 2, 3 ] );\n\t\t\t_geometry.setAttribute( 'position', new InterleavedBufferAttribute( interleavedBuffer, 3, 0, false ) );\n\t\t\t_geometry.setAttribute( 'uv', new InterleavedBufferAttribute( interleavedBuffer, 2, 3, false ) );\n\n\t\t}\n\n\t\tthis.geometry = _geometry;\n\t\tthis.material = ( material !== undefined ) ? material : new SpriteMaterial();\n\n\t\tthis.center = new Vector2( 0.5, 0.5 );\n\n\t}\n\n\traycast( raycaster, intersects ) {\n\n\t\tif ( raycaster.camera === null ) {\n\n\t\t\tconsole.error( 'THREE.Sprite: \"Raycaster.camera\" needs to be set in order to raycast against sprites.' );\n\n\t\t}\n\n\t\t_worldScale.setFromMatrixScale( this.matrixWorld );\n\n\t\t_viewWorldMatrix.copy( raycaster.camera.matrixWorld );\n\t\tthis.modelViewMatrix.multiplyMatrices( raycaster.camera.matrixWorldInverse, this.matrixWorld );\n\n\t\t_mvPosition.setFromMatrixPosition( this.modelViewMatrix );\n\n\t\tif ( raycaster.camera.isPerspectiveCamera && this.material.sizeAttenuation === false ) {\n\n\t\t\t_worldScale.multiplyScalar( - _mvPosition.z );\n\n\t\t}\n\n\t\tconst rotation = this.material.rotation;\n\t\tlet sin, cos;\n\n\t\tif ( rotation !== 0 ) {\n\n\t\t\tcos = Math.cos( rotation );\n\t\t\tsin = Math.sin( rotation );\n\n\t\t}\n\n\t\tconst center = this.center;\n\n\t\ttransformVertex( _vA.set( - 0.5, - 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\t\ttransformVertex( _vB.set( 0.5, - 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\t\ttransformVertex( _vC.set( 0.5, 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\n\t\t_uvA.set( 0, 0 );\n\t\t_uvB.set( 1, 0 );\n\t\t_uvC.set( 1, 1 );\n\n\t\t// check first triangle\n\t\tlet intersect = raycaster.ray.intersectTriangle( _vA, _vB, _vC, false, _intersectPoint );\n\n\t\tif ( intersect === null ) {\n\n\t\t\t// check second triangle\n\t\t\ttransformVertex( _vB.set( - 0.5, 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\t\t\t_uvB.set( 0, 1 );\n\n\t\t\tintersect = raycaster.ray.intersectTriangle( _vA, _vC, _vB, false, _intersectPoint );\n\t\t\tif ( intersect === null ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst distance = raycaster.ray.origin.distanceTo( _intersectPoint );\n\n\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\n\n\t\tintersects.push( {\n\n\t\t\tdistance: distance,\n\t\t\tpoint: _intersectPoint.clone(),\n\t\t\tuv: Triangle.getUV( _intersectPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2() ),\n\t\t\tface: null,\n\t\t\tobject: this\n\n\t\t} );\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tif ( source.center !== undefined ) this.center.copy( source.center );\n\n\t\tthis.material = source.material;\n\n\t\treturn this;\n\n\t}\n\n}\n\nfunction transformVertex( vertexPosition, mvPosition, center, scale, sin, cos ) {\n\n\t// compute position in camera space\n\t_alignedPosition.subVectors( vertexPosition, center ).addScalar( 0.5 ).multiply( scale );\n\n\t// to check if rotation is not zero\n\tif ( sin !== undefined ) {\n\n\t\t_rotatedPosition.x = ( cos * _alignedPosition.x ) - ( sin * _alignedPosition.y );\n\t\t_rotatedPosition.y = ( sin * _alignedPosition.x ) + ( cos * _alignedPosition.y );\n\n\t} else {\n\n\t\t_rotatedPosition.copy( _alignedPosition );\n\n\t}\n\n\n\tvertexPosition.copy( mvPosition );\n\tvertexPosition.x += _rotatedPosition.x;\n\tvertexPosition.y += _rotatedPosition.y;\n\n\t// transform to world space\n\tvertexPosition.applyMatrix4( _viewWorldMatrix );\n\n}\n\nconst _v1$2 = /*@__PURE__*/ new Vector3();\nconst _v2$1 = /*@__PURE__*/ new Vector3();\n\nclass LOD extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis._currentLevel = 0;\n\n\t\tthis.type = 'LOD';\n\n\t\tObject.defineProperties( this, {\n\t\t\tlevels: {\n\t\t\t\tenumerable: true,\n\t\t\t\tvalue: []\n\t\t\t},\n\t\t\tisLOD: {\n\t\t\t\tvalue: true,\n\t\t\t}\n\t\t} );\n\n\t\tthis.autoUpdate = true;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source, false );\n\n\t\tconst levels = source.levels;\n\n\t\tfor ( let i = 0, l = levels.length; i < l; i ++ ) {\n\n\t\t\tconst level = levels[ i ];\n\n\t\t\tthis.addLevel( level.object.clone(), level.distance );\n\n\t\t}\n\n\t\tthis.autoUpdate = source.autoUpdate;\n\n\t\treturn this;\n\n\t}\n\n\taddLevel( object, distance = 0 ) {\n\n\t\tdistance = Math.abs( distance );\n\n\t\tconst levels = this.levels;\n\n\t\tlet l;\n\n\t\tfor ( l = 0; l < levels.length; l ++ ) {\n\n\t\t\tif ( distance < levels[ l ].distance ) {\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tlevels.splice( l, 0, { distance: distance, object: object } );\n\n\t\tthis.add( object );\n\n\t\treturn this;\n\n\t}\n\n\tgetCurrentLevel() {\n\n\t\treturn this._currentLevel;\n\n\t}\n\n\tgetObjectForDistance( distance ) {\n\n\t\tconst levels = this.levels;\n\n\t\tif ( levels.length > 0 ) {\n\n\t\t\tlet i, l;\n\n\t\t\tfor ( i = 1, l = levels.length; i < l; i ++ ) {\n\n\t\t\t\tif ( distance < levels[ i ].distance ) {\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn levels[ i - 1 ].object;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\traycast( raycaster, intersects ) {\n\n\t\tconst levels = this.levels;\n\n\t\tif ( levels.length > 0 ) {\n\n\t\t\t_v1$2.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\tconst distance = raycaster.ray.origin.distanceTo( _v1$2 );\n\n\t\t\tthis.getObjectForDistance( distance ).raycast( raycaster, intersects );\n\n\t\t}\n\n\t}\n\n\tupdate( camera ) {\n\n\t\tconst levels = this.levels;\n\n\t\tif ( levels.length > 1 ) {\n\n\t\t\t_v1$2.setFromMatrixPosition( camera.matrixWorld );\n\t\t\t_v2$1.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\tconst distance = _v1$2.distanceTo( _v2$1 ) / camera.zoom;\n\n\t\t\tlevels[ 0 ].object.visible = true;\n\n\t\t\tlet i, l;\n\n\t\t\tfor ( i = 1, l = levels.length; i < l; i ++ ) {\n\n\t\t\t\tif ( distance >= levels[ i ].distance ) {\n\n\t\t\t\t\tlevels[ i - 1 ].object.visible = false;\n\t\t\t\t\tlevels[ i ].object.visible = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._currentLevel = i - 1;\n\n\t\t\tfor ( ; i < l; i ++ ) {\n\n\t\t\t\tlevels[ i ].object.visible = false;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tif ( this.autoUpdate === false ) data.object.autoUpdate = false;\n\n\t\tdata.object.levels = [];\n\n\t\tconst levels = this.levels;\n\n\t\tfor ( let i = 0, l = levels.length; i < l; i ++ ) {\n\n\t\t\tconst level = levels[ i ];\n\n\t\t\tdata.object.levels.push( {\n\t\t\t\tobject: level.object.uuid,\n\t\t\t\tdistance: level.distance\n\t\t\t} );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n}\n\nconst _basePosition = /*@__PURE__*/ new Vector3();\n\nconst _skinIndex = /*@__PURE__*/ new Vector4();\nconst _skinWeight = /*@__PURE__*/ new Vector4();\n\nconst _vector$5 = /*@__PURE__*/ new Vector3();\nconst _matrix = /*@__PURE__*/ new Matrix4();\n\nclass SkinnedMesh extends Mesh {\n\n\tconstructor( geometry, material ) {\n\n\t\tsuper( geometry, material );\n\n\t\tthis.isSkinnedMesh = true;\n\n\t\tthis.type = 'SkinnedMesh';\n\n\t\tthis.bindMode = 'attached';\n\t\tthis.bindMatrix = new Matrix4();\n\t\tthis.bindMatrixInverse = new Matrix4();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.bindMode = source.bindMode;\n\t\tthis.bindMatrix.copy( source.bindMatrix );\n\t\tthis.bindMatrixInverse.copy( source.bindMatrixInverse );\n\n\t\tthis.skeleton = source.skeleton;\n\n\t\treturn this;\n\n\t}\n\n\tbind( skeleton, bindMatrix ) {\n\n\t\tthis.skeleton = skeleton;\n\n\t\tif ( bindMatrix === undefined ) {\n\n\t\t\tthis.updateMatrixWorld( true );\n\n\t\t\tthis.skeleton.calculateInverses();\n\n\t\t\tbindMatrix = this.matrixWorld;\n\n\t\t}\n\n\t\tthis.bindMatrix.copy( bindMatrix );\n\t\tthis.bindMatrixInverse.copy( bindMatrix ).invert();\n\n\t}\n\n\tpose() {\n\n\t\tthis.skeleton.pose();\n\n\t}\n\n\tnormalizeSkinWeights() {\n\n\t\tconst vector = new Vector4();\n\n\t\tconst skinWeight = this.geometry.attributes.skinWeight;\n\n\t\tfor ( let i = 0, l = skinWeight.count; i < l; i ++ ) {\n\n\t\t\tvector.fromBufferAttribute( skinWeight, i );\n\n\t\t\tconst scale = 1.0 / vector.manhattanLength();\n\n\t\t\tif ( scale !== Infinity ) {\n\n\t\t\t\tvector.multiplyScalar( scale );\n\n\t\t\t} else {\n\n\t\t\t\tvector.set( 1, 0, 0, 0 ); // do something reasonable\n\n\t\t\t}\n\n\t\t\tskinWeight.setXYZW( i, vector.x, vector.y, vector.z, vector.w );\n\n\t\t}\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t\tif ( this.bindMode === 'attached' ) {\n\n\t\t\tthis.bindMatrixInverse.copy( this.matrixWorld ).invert();\n\n\t\t} else if ( this.bindMode === 'detached' ) {\n\n\t\t\tthis.bindMatrixInverse.copy( this.bindMatrix ).invert();\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.SkinnedMesh: Unrecognized bindMode: ' + this.bindMode );\n\n\t\t}\n\n\t}\n\n\tboneTransform( index, target ) {\n\n\t\tconst skeleton = this.skeleton;\n\t\tconst geometry = this.geometry;\n\n\t\t_skinIndex.fromBufferAttribute( geometry.attributes.skinIndex, index );\n\t\t_skinWeight.fromBufferAttribute( geometry.attributes.skinWeight, index );\n\n\t\t_basePosition.copy( target ).applyMatrix4( this.bindMatrix );\n\n\t\ttarget.set( 0, 0, 0 );\n\n\t\tfor ( let i = 0; i < 4; i ++ ) {\n\n\t\t\tconst weight = _skinWeight.getComponent( i );\n\n\t\t\tif ( weight !== 0 ) {\n\n\t\t\t\tconst boneIndex = _skinIndex.getComponent( i );\n\n\t\t\t\t_matrix.multiplyMatrices( skeleton.bones[ boneIndex ].matrixWorld, skeleton.boneInverses[ boneIndex ] );\n\n\t\t\t\ttarget.addScaledVector( _vector$5.copy( _basePosition ).applyMatrix4( _matrix ), weight );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn target.applyMatrix4( this.bindMatrixInverse );\n\n\t}\n\n}\n\nclass Bone extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isBone = true;\n\n\t\tthis.type = 'Bone';\n\n\t}\n\n}\n\nclass DataTexture extends Texture {\n\n\tconstructor( data = null, width = 1, height = 1, format, type, mapping, wrapS, wrapT, magFilter = NearestFilter, minFilter = NearestFilter, anisotropy, encoding ) {\n\n\t\tsuper( null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\t\tthis.isDataTexture = true;\n\n\t\tthis.image = { data: data, width: width, height: height };\n\n\t\tthis.generateMipmaps = false;\n\t\tthis.flipY = false;\n\t\tthis.unpackAlignment = 1;\n\n\t}\n\n}\n\nconst _offsetMatrix = /*@__PURE__*/ new Matrix4();\nconst _identityMatrix = /*@__PURE__*/ new Matrix4();\n\nclass Skeleton {\n\n\tconstructor( bones = [], boneInverses = [] ) {\n\n\t\tthis.uuid = generateUUID();\n\n\t\tthis.bones = bones.slice( 0 );\n\t\tthis.boneInverses = boneInverses;\n\t\tthis.boneMatrices = null;\n\n\t\tthis.boneTexture = null;\n\t\tthis.boneTextureSize = 0;\n\n\t\tthis.frame = - 1;\n\n\t\tthis.init();\n\n\t}\n\n\tinit() {\n\n\t\tconst bones = this.bones;\n\t\tconst boneInverses = this.boneInverses;\n\n\t\tthis.boneMatrices = new Float32Array( bones.length * 16 );\n\n\t\t// calculate inverse bone matrices if necessary\n\n\t\tif ( boneInverses.length === 0 ) {\n\n\t\t\tthis.calculateInverses();\n\n\t\t} else {\n\n\t\t\t// handle special case\n\n\t\t\tif ( bones.length !== boneInverses.length ) {\n\n\t\t\t\tconsole.warn( 'THREE.Skeleton: Number of inverse bone matrices does not match amount of bones.' );\n\n\t\t\t\tthis.boneInverses = [];\n\n\t\t\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\t\t\tthis.boneInverses.push( new Matrix4() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tcalculateInverses() {\n\n\t\tthis.boneInverses.length = 0;\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst inverse = new Matrix4();\n\n\t\t\tif ( this.bones[ i ] ) {\n\n\t\t\t\tinverse.copy( this.bones[ i ].matrixWorld ).invert();\n\n\t\t\t}\n\n\t\t\tthis.boneInverses.push( inverse );\n\n\t\t}\n\n\t}\n\n\tpose() {\n\n\t\t// recover the bind-time world matrices\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst bone = this.bones[ i ];\n\n\t\t\tif ( bone ) {\n\n\t\t\t\tbone.matrixWorld.copy( this.boneInverses[ i ] ).invert();\n\n\t\t\t}\n\n\t\t}\n\n\t\t// compute the local matrices, positions, rotations and scales\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst bone = this.bones[ i ];\n\n\t\t\tif ( bone ) {\n\n\t\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\t\tbone.matrix.copy( bone.parent.matrixWorld ).invert();\n\t\t\t\t\tbone.matrix.multiply( bone.matrixWorld );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbone.matrix.copy( bone.matrixWorld );\n\n\t\t\t\t}\n\n\t\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tupdate() {\n\n\t\tconst bones = this.bones;\n\t\tconst boneInverses = this.boneInverses;\n\t\tconst boneMatrices = this.boneMatrices;\n\t\tconst boneTexture = this.boneTexture;\n\n\t\t// flatten bone matrices to array\n\n\t\tfor ( let i = 0, il = bones.length; i < il; i ++ ) {\n\n\t\t\t// compute the offset between the current and the original transform\n\n\t\t\tconst matrix = bones[ i ] ? bones[ i ].matrixWorld : _identityMatrix;\n\n\t\t\t_offsetMatrix.multiplyMatrices( matrix, boneInverses[ i ] );\n\t\t\t_offsetMatrix.toArray( boneMatrices, i * 16 );\n\n\t\t}\n\n\t\tif ( boneTexture !== null ) {\n\n\t\t\tboneTexture.needsUpdate = true;\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new Skeleton( this.bones, this.boneInverses );\n\n\t}\n\n\tcomputeBoneTexture() {\n\n\t\t// layout (1 matrix = 4 pixels)\n\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\n\t\t//  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\n\t\t//       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\n\t\t//       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\n\t\t//       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\n\n\t\tlet size = Math.sqrt( this.bones.length * 4 ); // 4 pixels needed for 1 matrix\n\t\tsize = ceilPowerOfTwo( size );\n\t\tsize = Math.max( size, 4 );\n\n\t\tconst boneMatrices = new Float32Array( size * size * 4 ); // 4 floats per RGBA pixel\n\t\tboneMatrices.set( this.boneMatrices ); // copy current values\n\n\t\tconst boneTexture = new DataTexture( boneMatrices, size, size, RGBAFormat, FloatType );\n\t\tboneTexture.needsUpdate = true;\n\n\t\tthis.boneMatrices = boneMatrices;\n\t\tthis.boneTexture = boneTexture;\n\t\tthis.boneTextureSize = size;\n\n\t\treturn this;\n\n\t}\n\n\tgetBoneByName( name ) {\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst bone = this.bones[ i ];\n\n\t\t\tif ( bone.name === name ) {\n\n\t\t\t\treturn bone;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t}\n\n\tdispose( ) {\n\n\t\tif ( this.boneTexture !== null ) {\n\n\t\t\tthis.boneTexture.dispose();\n\n\t\t\tthis.boneTexture = null;\n\n\t\t}\n\n\t}\n\n\tfromJSON( json, bones ) {\n\n\t\tthis.uuid = json.uuid;\n\n\t\tfor ( let i = 0, l = json.bones.length; i < l; i ++ ) {\n\n\t\t\tconst uuid = json.bones[ i ];\n\t\t\tlet bone = bones[ uuid ];\n\n\t\t\tif ( bone === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Skeleton: No bone found with UUID:', uuid );\n\t\t\t\tbone = new Bone();\n\n\t\t\t}\n\n\t\t\tthis.bones.push( bone );\n\t\t\tthis.boneInverses.push( new Matrix4().fromArray( json.boneInverses[ i ] ) );\n\n\t\t}\n\n\t\tthis.init();\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Skeleton',\n\t\t\t\tgenerator: 'Skeleton.toJSON'\n\t\t\t},\n\t\t\tbones: [],\n\t\t\tboneInverses: []\n\t\t};\n\n\t\tdata.uuid = this.uuid;\n\n\t\tconst bones = this.bones;\n\t\tconst boneInverses = this.boneInverses;\n\n\t\tfor ( let i = 0, l = bones.length; i < l; i ++ ) {\n\n\t\t\tconst bone = bones[ i ];\n\t\t\tdata.bones.push( bone.uuid );\n\n\t\t\tconst boneInverse = boneInverses[ i ];\n\t\t\tdata.boneInverses.push( boneInverse.toArray() );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n}\n\nclass InstancedBufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized, meshPerAttribute = 1 ) {\n\n\t\tsuper( array, itemSize, normalized );\n\n\t\tthis.isInstancedBufferAttribute = true;\n\n\t\tthis.meshPerAttribute = meshPerAttribute;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.meshPerAttribute = source.meshPerAttribute;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.meshPerAttribute = this.meshPerAttribute;\n\n\t\tdata.isInstancedBufferAttribute = true;\n\n\t\treturn data;\n\n\t}\n\n}\n\nconst _instanceLocalMatrix = /*@__PURE__*/ new Matrix4();\nconst _instanceWorldMatrix = /*@__PURE__*/ new Matrix4();\n\nconst _instanceIntersects = [];\n\nconst _mesh = /*@__PURE__*/ new Mesh();\n\nclass InstancedMesh extends Mesh {\n\n\tconstructor( geometry, material, count ) {\n\n\t\tsuper( geometry, material );\n\n\t\tthis.isInstancedMesh = true;\n\n\t\tthis.instanceMatrix = new InstancedBufferAttribute( new Float32Array( count * 16 ), 16 );\n\t\tthis.instanceColor = null;\n\n\t\tthis.count = count;\n\n\t\tthis.frustumCulled = false;\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.instanceMatrix.copy( source.instanceMatrix );\n\n\t\tif ( source.instanceColor !== null ) this.instanceColor = source.instanceColor.clone();\n\n\t\tthis.count = source.count;\n\n\t\treturn this;\n\n\t}\n\n\tgetColorAt( index, color ) {\n\n\t\tcolor.fromArray( this.instanceColor.array, index * 3 );\n\n\t}\n\n\tgetMatrixAt( index, matrix ) {\n\n\t\tmatrix.fromArray( this.instanceMatrix.array, index * 16 );\n\n\t}\n\n\traycast( raycaster, intersects ) {\n\n\t\tconst matrixWorld = this.matrixWorld;\n\t\tconst raycastTimes = this.count;\n\n\t\t_mesh.geometry = this.geometry;\n\t\t_mesh.material = this.material;\n\n\t\tif ( _mesh.material === undefined ) return;\n\n\t\tfor ( let instanceId = 0; instanceId < raycastTimes; instanceId ++ ) {\n\n\t\t\t// calculate the world matrix for each instance\n\n\t\t\tthis.getMatrixAt( instanceId, _instanceLocalMatrix );\n\n\t\t\t_instanceWorldMatrix.multiplyMatrices( matrixWorld, _instanceLocalMatrix );\n\n\t\t\t// the mesh represents this single instance\n\n\t\t\t_mesh.matrixWorld = _instanceWorldMatrix;\n\n\t\t\t_mesh.raycast( raycaster, _instanceIntersects );\n\n\t\t\t// process the result of raycast\n\n\t\t\tfor ( let i = 0, l = _instanceIntersects.length; i < l; i ++ ) {\n\n\t\t\t\tconst intersect = _instanceIntersects[ i ];\n\t\t\t\tintersect.instanceId = instanceId;\n\t\t\t\tintersect.object = this;\n\t\t\t\tintersects.push( intersect );\n\n\t\t\t}\n\n\t\t\t_instanceIntersects.length = 0;\n\n\t\t}\n\n\t}\n\n\tsetColorAt( index, color ) {\n\n\t\tif ( this.instanceColor === null ) {\n\n\t\t\tthis.instanceColor = new InstancedBufferAttribute( new Float32Array( this.instanceMatrix.count * 3 ), 3 );\n\n\t\t}\n\n\t\tcolor.toArray( this.instanceColor.array, index * 3 );\n\n\t}\n\n\tsetMatrixAt( index, matrix ) {\n\n\t\tmatrix.toArray( this.instanceMatrix.array, index * 16 );\n\n\t}\n\n\tupdateMorphTargets() {\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n}\n\nclass LineBasicMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isLineBasicMaterial = true;\n\n\t\tthis.type = 'LineBasicMaterial';\n\n\t\tthis.color = new Color( 0xffffff );\n\n\t\tthis.linewidth = 1;\n\t\tthis.linecap = 'round';\n\t\tthis.linejoin = 'round';\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.linewidth = source.linewidth;\n\t\tthis.linecap = source.linecap;\n\t\tthis.linejoin = source.linejoin;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _start$1 = /*@__PURE__*/ new Vector3();\nconst _end$1 = /*@__PURE__*/ new Vector3();\nconst _inverseMatrix$1 = /*@__PURE__*/ new Matrix4();\nconst _ray$1 = /*@__PURE__*/ new Ray();\nconst _sphere$1 = /*@__PURE__*/ new Sphere();\n\nclass Line extends Object3D {\n\n\tconstructor( geometry = new BufferGeometry(), material = new LineBasicMaterial() ) {\n\n\t\tsuper();\n\n\t\tthis.isLine = true;\n\n\t\tthis.type = 'Line';\n\n\t\tthis.geometry = geometry;\n\t\tthis.material = material;\n\n\t\tthis.updateMorphTargets();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.material = source.material;\n\t\tthis.geometry = source.geometry;\n\n\t\treturn this;\n\n\t}\n\n\tcomputeLineDistances() {\n\n\t\tconst geometry = this.geometry;\n\n\t\t// we assume non-indexed geometry\n\n\t\tif ( geometry.index === null ) {\n\n\t\t\tconst positionAttribute = geometry.attributes.position;\n\t\t\tconst lineDistances = [ 0 ];\n\n\t\t\tfor ( let i = 1, l = positionAttribute.count; i < l; i ++ ) {\n\n\t\t\t\t_start$1.fromBufferAttribute( positionAttribute, i - 1 );\n\t\t\t\t_end$1.fromBufferAttribute( positionAttribute, i );\n\n\t\t\t\tlineDistances[ i ] = lineDistances[ i - 1 ];\n\t\t\t\tlineDistances[ i ] += _start$1.distanceTo( _end$1 );\n\n\t\t\t}\n\n\t\t\tgeometry.setAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\traycast( raycaster, intersects ) {\n\n\t\tconst geometry = this.geometry;\n\t\tconst matrixWorld = this.matrixWorld;\n\t\tconst threshold = raycaster.params.Line.threshold;\n\t\tconst drawRange = geometry.drawRange;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere$1.copy( geometry.boundingSphere );\n\t\t_sphere$1.applyMatrix4( matrixWorld );\n\t\t_sphere$1.radius += threshold;\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere$1 ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix$1.copy( matrixWorld ).invert();\n\t\t_ray$1.copy( raycaster.ray ).applyMatrix4( _inverseMatrix$1 );\n\n\t\tconst localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\n\t\tconst localThresholdSq = localThreshold * localThreshold;\n\n\t\tconst vStart = new Vector3();\n\t\tconst vEnd = new Vector3();\n\t\tconst interSegment = new Vector3();\n\t\tconst interRay = new Vector3();\n\t\tconst step = this.isLineSegments ? 2 : 1;\n\n\t\tconst index = geometry.index;\n\t\tconst attributes = geometry.attributes;\n\t\tconst positionAttribute = attributes.position;\n\n\t\tif ( index !== null ) {\n\n\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\tconst end = Math.min( index.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\tfor ( let i = start, l = end - 1; i < l; i += step ) {\n\n\t\t\t\tconst a = index.getX( i );\n\t\t\t\tconst b = index.getX( i + 1 );\n\n\t\t\t\tvStart.fromBufferAttribute( positionAttribute, a );\n\t\t\t\tvEnd.fromBufferAttribute( positionAttribute, b );\n\n\t\t\t\tconst distSq = _ray$1.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\tif ( distSq > localThresholdSq ) continue;\n\n\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\tconst distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\tintersects.push( {\n\n\t\t\t\t\tdistance: distance,\n\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\tindex: i,\n\t\t\t\t\tface: null,\n\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\tobject: this\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\tconst end = Math.min( positionAttribute.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\tfor ( let i = start, l = end - 1; i < l; i += step ) {\n\n\t\t\t\tvStart.fromBufferAttribute( positionAttribute, i );\n\t\t\t\tvEnd.fromBufferAttribute( positionAttribute, i + 1 );\n\n\t\t\t\tconst distSq = _ray$1.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\tif ( distSq > localThresholdSq ) continue;\n\n\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\tconst distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\tintersects.push( {\n\n\t\t\t\t\tdistance: distance,\n\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\tindex: i,\n\t\t\t\t\tface: null,\n\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\tobject: this\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tupdateMorphTargets() {\n\n\t\tconst geometry = this.geometry;\n\n\t\tconst morphAttributes = geometry.morphAttributes;\n\t\tconst keys = Object.keys( morphAttributes );\n\n\t\tif ( keys.length > 0 ) {\n\n\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nconst _start = /*@__PURE__*/ new Vector3();\nconst _end = /*@__PURE__*/ new Vector3();\n\nclass LineSegments extends Line {\n\n\tconstructor( geometry, material ) {\n\n\t\tsuper( geometry, material );\n\n\t\tthis.isLineSegments = true;\n\n\t\tthis.type = 'LineSegments';\n\n\t}\n\n\tcomputeLineDistances() {\n\n\t\tconst geometry = this.geometry;\n\n\t\t// we assume non-indexed geometry\n\n\t\tif ( geometry.index === null ) {\n\n\t\t\tconst positionAttribute = geometry.attributes.position;\n\t\t\tconst lineDistances = [];\n\n\t\t\tfor ( let i = 0, l = positionAttribute.count; i < l; i += 2 ) {\n\n\t\t\t\t_start.fromBufferAttribute( positionAttribute, i );\n\t\t\t\t_end.fromBufferAttribute( positionAttribute, i + 1 );\n\n\t\t\t\tlineDistances[ i ] = ( i === 0 ) ? 0 : lineDistances[ i - 1 ];\n\t\t\t\tlineDistances[ i + 1 ] = lineDistances[ i ] + _start.distanceTo( _end );\n\n\t\t\t}\n\n\t\t\tgeometry.setAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass LineLoop extends Line {\n\n\tconstructor( geometry, material ) {\n\n\t\tsuper( geometry, material );\n\n\t\tthis.isLineLoop = true;\n\n\t\tthis.type = 'LineLoop';\n\n\t}\n\n}\n\nclass PointsMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isPointsMaterial = true;\n\n\t\tthis.type = 'PointsMaterial';\n\n\t\tthis.color = new Color( 0xffffff );\n\n\t\tthis.map = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.size = 1;\n\t\tthis.sizeAttenuation = true;\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.map = source.map;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.size = source.size;\n\t\tthis.sizeAttenuation = source.sizeAttenuation;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _inverseMatrix = /*@__PURE__*/ new Matrix4();\nconst _ray = /*@__PURE__*/ new Ray();\nconst _sphere = /*@__PURE__*/ new Sphere();\nconst _position$2 = /*@__PURE__*/ new Vector3();\n\nclass Points extends Object3D {\n\n\tconstructor( geometry = new BufferGeometry(), material = new PointsMaterial() ) {\n\n\t\tsuper();\n\n\t\tthis.isPoints = true;\n\n\t\tthis.type = 'Points';\n\n\t\tthis.geometry = geometry;\n\t\tthis.material = material;\n\n\t\tthis.updateMorphTargets();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.material = source.material;\n\t\tthis.geometry = source.geometry;\n\n\t\treturn this;\n\n\t}\n\n\traycast( raycaster, intersects ) {\n\n\t\tconst geometry = this.geometry;\n\t\tconst matrixWorld = this.matrixWorld;\n\t\tconst threshold = raycaster.params.Points.threshold;\n\t\tconst drawRange = geometry.drawRange;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere.copy( geometry.boundingSphere );\n\t\t_sphere.applyMatrix4( matrixWorld );\n\t\t_sphere.radius += threshold;\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix.copy( matrixWorld ).invert();\n\t\t_ray.copy( raycaster.ray ).applyMatrix4( _inverseMatrix );\n\n\t\tconst localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\n\t\tconst localThresholdSq = localThreshold * localThreshold;\n\n\t\tconst index = geometry.index;\n\t\tconst attributes = geometry.attributes;\n\t\tconst positionAttribute = attributes.position;\n\n\t\tif ( index !== null ) {\n\n\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\tconst end = Math.min( index.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\tfor ( let i = start, il = end; i < il; i ++ ) {\n\n\t\t\t\tconst a = index.getX( i );\n\n\t\t\t\t_position$2.fromBufferAttribute( positionAttribute, a );\n\n\t\t\t\ttestPoint( _position$2, a, localThresholdSq, matrixWorld, raycaster, intersects, this );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\tconst end = Math.min( positionAttribute.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\tfor ( let i = start, l = end; i < l; i ++ ) {\n\n\t\t\t\t_position$2.fromBufferAttribute( positionAttribute, i );\n\n\t\t\t\ttestPoint( _position$2, i, localThresholdSq, matrixWorld, raycaster, intersects, this );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tupdateMorphTargets() {\n\n\t\tconst geometry = this.geometry;\n\n\t\tconst morphAttributes = geometry.morphAttributes;\n\t\tconst keys = Object.keys( morphAttributes );\n\n\t\tif ( keys.length > 0 ) {\n\n\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nfunction testPoint( point, index, localThresholdSq, matrixWorld, raycaster, intersects, object ) {\n\n\tconst rayPointDistanceSq = _ray.distanceSqToPoint( point );\n\n\tif ( rayPointDistanceSq < localThresholdSq ) {\n\n\t\tconst intersectPoint = new Vector3();\n\n\t\t_ray.closestPointToPoint( point, intersectPoint );\n\t\tintersectPoint.applyMatrix4( matrixWorld );\n\n\t\tconst distance = raycaster.ray.origin.distanceTo( intersectPoint );\n\n\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\n\n\t\tintersects.push( {\n\n\t\t\tdistance: distance,\n\t\t\tdistanceToRay: Math.sqrt( rayPointDistanceSq ),\n\t\t\tpoint: intersectPoint,\n\t\t\tindex: index,\n\t\t\tface: null,\n\t\t\tobject: object\n\n\t\t} );\n\n\t}\n\n}\n\nclass VideoTexture extends Texture {\n\n\tconstructor( video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\n\n\t\tsuper( video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\t\tthis.isVideoTexture = true;\n\n\t\tthis.minFilter = minFilter !== undefined ? minFilter : LinearFilter;\n\t\tthis.magFilter = magFilter !== undefined ? magFilter : LinearFilter;\n\n\t\tthis.generateMipmaps = false;\n\n\t\tconst scope = this;\n\n\t\tfunction updateVideo() {\n\n\t\t\tscope.needsUpdate = true;\n\t\t\tvideo.requestVideoFrameCallback( updateVideo );\n\n\t\t}\n\n\t\tif ( 'requestVideoFrameCallback' in video ) {\n\n\t\t\tvideo.requestVideoFrameCallback( updateVideo );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.image ).copy( this );\n\n\t}\n\n\tupdate() {\n\n\t\tconst video = this.image;\n\t\tconst hasVideoFrameCallback = 'requestVideoFrameCallback' in video;\n\n\t\tif ( hasVideoFrameCallback === false && video.readyState >= video.HAVE_CURRENT_DATA ) {\n\n\t\t\tthis.needsUpdate = true;\n\n\t\t}\n\n\t}\n\n}\n\nclass FramebufferTexture extends Texture {\n\n\tconstructor( width, height, format ) {\n\n\t\tsuper( { width, height } );\n\n\t\tthis.isFramebufferTexture = true;\n\n\t\tthis.format = format;\n\n\t\tthis.magFilter = NearestFilter;\n\t\tthis.minFilter = NearestFilter;\n\n\t\tthis.generateMipmaps = false;\n\n\t\tthis.needsUpdate = true;\n\n\t}\n\n}\n\nclass CompressedTexture extends Texture {\n\n\tconstructor( mipmaps, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\n\n\t\tsuper( null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\t\tthis.isCompressedTexture = true;\n\n\t\tthis.image = { width: width, height: height };\n\t\tthis.mipmaps = mipmaps;\n\n\t\t// no flipping for cube textures\n\t\t// (also flipping doesn't work for compressed textures )\n\n\t\tthis.flipY = false;\n\n\t\t// can't generate mipmaps for compressed textures\n\t\t// mips must be embedded in DDS files\n\n\t\tthis.generateMipmaps = false;\n\n\t}\n\n}\n\nclass CanvasTexture extends Texture {\n\n\tconstructor( canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\n\n\t\tsuper( canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\t\tthis.isCanvasTexture = true;\n\n\t\tthis.needsUpdate = true;\n\n\t}\n\n}\n\n/**\n * Extensible curve object.\n *\n * Some common of curve methods:\n * .getPoint( t, optionalTarget ), .getTangent( t, optionalTarget )\n * .getPointAt( u, optionalTarget ), .getTangentAt( u, optionalTarget )\n * .getPoints(), .getSpacedPoints()\n * .getLength()\n * .updateArcLengths()\n *\n * This following curves inherit from THREE.Curve:\n *\n * -- 2D curves --\n * THREE.ArcCurve\n * THREE.CubicBezierCurve\n * THREE.EllipseCurve\n * THREE.LineCurve\n * THREE.QuadraticBezierCurve\n * THREE.SplineCurve\n *\n * -- 3D curves --\n * THREE.CatmullRomCurve3\n * THREE.CubicBezierCurve3\n * THREE.LineCurve3\n * THREE.QuadraticBezierCurve3\n *\n * A series of curves can be represented as a THREE.CurvePath.\n *\n **/\n\nclass Curve {\n\n\tconstructor() {\n\n\t\tthis.type = 'Curve';\n\n\t\tthis.arcLengthDivisions = 200;\n\n\t}\n\n\t// Virtual base class method to overwrite and implement in subclasses\n\t//\t- t [0 .. 1]\n\n\tgetPoint( /* t, optionalTarget */ ) {\n\n\t\tconsole.warn( 'THREE.Curve: .getPoint() not implemented.' );\n\t\treturn null;\n\n\t}\n\n\t// Get point at relative position in curve according to arc length\n\t// - u [0 .. 1]\n\n\tgetPointAt( u, optionalTarget ) {\n\n\t\tconst t = this.getUtoTmapping( u );\n\t\treturn this.getPoint( t, optionalTarget );\n\n\t}\n\n\t// Get sequence of points using getPoint( t )\n\n\tgetPoints( divisions = 5 ) {\n\n\t\tconst points = [];\n\n\t\tfor ( let d = 0; d <= divisions; d ++ ) {\n\n\t\t\tpoints.push( this.getPoint( d / divisions ) );\n\n\t\t}\n\n\t\treturn points;\n\n\t}\n\n\t// Get sequence of points using getPointAt( u )\n\n\tgetSpacedPoints( divisions = 5 ) {\n\n\t\tconst points = [];\n\n\t\tfor ( let d = 0; d <= divisions; d ++ ) {\n\n\t\t\tpoints.push( this.getPointAt( d / divisions ) );\n\n\t\t}\n\n\t\treturn points;\n\n\t}\n\n\t// Get total curve arc length\n\n\tgetLength() {\n\n\t\tconst lengths = this.getLengths();\n\t\treturn lengths[ lengths.length - 1 ];\n\n\t}\n\n\t// Get list of cumulative segment lengths\n\n\tgetLengths( divisions = this.arcLengthDivisions ) {\n\n\t\tif ( this.cacheArcLengths &&\n\t\t\t( this.cacheArcLengths.length === divisions + 1 ) &&\n\t\t\t! this.needsUpdate ) {\n\n\t\t\treturn this.cacheArcLengths;\n\n\t\t}\n\n\t\tthis.needsUpdate = false;\n\n\t\tconst cache = [];\n\t\tlet current, last = this.getPoint( 0 );\n\t\tlet sum = 0;\n\n\t\tcache.push( 0 );\n\n\t\tfor ( let p = 1; p <= divisions; p ++ ) {\n\n\t\t\tcurrent = this.getPoint( p / divisions );\n\t\t\tsum += current.distanceTo( last );\n\t\t\tcache.push( sum );\n\t\t\tlast = current;\n\n\t\t}\n\n\t\tthis.cacheArcLengths = cache;\n\n\t\treturn cache; // { sums: cache, sum: sum }; Sum is in the last element.\n\n\t}\n\n\tupdateArcLengths() {\n\n\t\tthis.needsUpdate = true;\n\t\tthis.getLengths();\n\n\t}\n\n\t// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant\n\n\tgetUtoTmapping( u, distance ) {\n\n\t\tconst arcLengths = this.getLengths();\n\n\t\tlet i = 0;\n\t\tconst il = arcLengths.length;\n\n\t\tlet targetArcLength; // The targeted u distance value to get\n\n\t\tif ( distance ) {\n\n\t\t\ttargetArcLength = distance;\n\n\t\t} else {\n\n\t\t\ttargetArcLength = u * arcLengths[ il - 1 ];\n\n\t\t}\n\n\t\t// binary search for the index with largest value smaller than target u distance\n\n\t\tlet low = 0, high = il - 1, comparison;\n\n\t\twhile ( low <= high ) {\n\n\t\t\ti = Math.floor( low + ( high - low ) / 2 ); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\n\n\t\t\tcomparison = arcLengths[ i ] - targetArcLength;\n\n\t\t\tif ( comparison < 0 ) {\n\n\t\t\t\tlow = i + 1;\n\n\t\t\t} else if ( comparison > 0 ) {\n\n\t\t\t\thigh = i - 1;\n\n\t\t\t} else {\n\n\t\t\t\thigh = i;\n\t\t\t\tbreak;\n\n\t\t\t\t// DONE\n\n\t\t\t}\n\n\t\t}\n\n\t\ti = high;\n\n\t\tif ( arcLengths[ i ] === targetArcLength ) {\n\n\t\t\treturn i / ( il - 1 );\n\n\t\t}\n\n\t\t// we could get finer grain at lengths, or use simple interpolation between two points\n\n\t\tconst lengthBefore = arcLengths[ i ];\n\t\tconst lengthAfter = arcLengths[ i + 1 ];\n\n\t\tconst segmentLength = lengthAfter - lengthBefore;\n\n\t\t// determine where we are between the 'before' and 'after' points\n\n\t\tconst segmentFraction = ( targetArcLength - lengthBefore ) / segmentLength;\n\n\t\t// add that fractional amount to t\n\n\t\tconst t = ( i + segmentFraction ) / ( il - 1 );\n\n\t\treturn t;\n\n\t}\n\n\t// Returns a unit vector tangent at t\n\t// In case any sub curve does not implement its tangent derivation,\n\t// 2 points a small delta apart will be used to find its gradient\n\t// which seems to give a reasonable approximation\n\n\tgetTangent( t, optionalTarget ) {\n\n\t\tconst delta = 0.0001;\n\t\tlet t1 = t - delta;\n\t\tlet t2 = t + delta;\n\n\t\t// Capping in case of danger\n\n\t\tif ( t1 < 0 ) t1 = 0;\n\t\tif ( t2 > 1 ) t2 = 1;\n\n\t\tconst pt1 = this.getPoint( t1 );\n\t\tconst pt2 = this.getPoint( t2 );\n\n\t\tconst tangent = optionalTarget || ( ( pt1.isVector2 ) ? new Vector2() : new Vector3() );\n\n\t\ttangent.copy( pt2 ).sub( pt1 ).normalize();\n\n\t\treturn tangent;\n\n\t}\n\n\tgetTangentAt( u, optionalTarget ) {\n\n\t\tconst t = this.getUtoTmapping( u );\n\t\treturn this.getTangent( t, optionalTarget );\n\n\t}\n\n\tcomputeFrenetFrames( segments, closed ) {\n\n\t\t// see http://www.cs.indiana.edu/pub/techreports/TR425.pdf\n\n\t\tconst normal = new Vector3();\n\n\t\tconst tangents = [];\n\t\tconst normals = [];\n\t\tconst binormals = [];\n\n\t\tconst vec = new Vector3();\n\t\tconst mat = new Matrix4();\n\n\t\t// compute the tangent vectors for each segment on the curve\n\n\t\tfor ( let i = 0; i <= segments; i ++ ) {\n\n\t\t\tconst u = i / segments;\n\n\t\t\ttangents[ i ] = this.getTangentAt( u, new Vector3() );\n\n\t\t}\n\n\t\t// select an initial normal vector perpendicular to the first tangent vector,\n\t\t// and in the direction of the minimum tangent xyz component\n\n\t\tnormals[ 0 ] = new Vector3();\n\t\tbinormals[ 0 ] = new Vector3();\n\t\tlet min = Number.MAX_VALUE;\n\t\tconst tx = Math.abs( tangents[ 0 ].x );\n\t\tconst ty = Math.abs( tangents[ 0 ].y );\n\t\tconst tz = Math.abs( tangents[ 0 ].z );\n\n\t\tif ( tx <= min ) {\n\n\t\t\tmin = tx;\n\t\t\tnormal.set( 1, 0, 0 );\n\n\t\t}\n\n\t\tif ( ty <= min ) {\n\n\t\t\tmin = ty;\n\t\t\tnormal.set( 0, 1, 0 );\n\n\t\t}\n\n\t\tif ( tz <= min ) {\n\n\t\t\tnormal.set( 0, 0, 1 );\n\n\t\t}\n\n\t\tvec.crossVectors( tangents[ 0 ], normal ).normalize();\n\n\t\tnormals[ 0 ].crossVectors( tangents[ 0 ], vec );\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] );\n\n\n\t\t// compute the slowly-varying normal and binormal vectors for each segment on the curve\n\n\t\tfor ( let i = 1; i <= segments; i ++ ) {\n\n\t\t\tnormals[ i ] = normals[ i - 1 ].clone();\n\n\t\t\tbinormals[ i ] = binormals[ i - 1 ].clone();\n\n\t\t\tvec.crossVectors( tangents[ i - 1 ], tangents[ i ] );\n\n\t\t\tif ( vec.length() > Number.EPSILON ) {\n\n\t\t\t\tvec.normalize();\n\n\t\t\t\tconst theta = Math.acos( clamp( tangents[ i - 1 ].dot( tangents[ i ] ), - 1, 1 ) ); // clamp for floating pt errors\n\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( vec, theta ) );\n\n\t\t\t}\n\n\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t}\n\n\t\t// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\n\n\t\tif ( closed === true ) {\n\n\t\t\tlet theta = Math.acos( clamp( normals[ 0 ].dot( normals[ segments ] ), - 1, 1 ) );\n\t\t\ttheta /= segments;\n\n\t\t\tif ( tangents[ 0 ].dot( vec.crossVectors( normals[ 0 ], normals[ segments ] ) ) > 0 ) {\n\n\t\t\t\ttheta = - theta;\n\n\t\t\t}\n\n\t\t\tfor ( let i = 1; i <= segments; i ++ ) {\n\n\t\t\t\t// twist a little...\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( tangents[ i ], theta * i ) );\n\t\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\t\t\ttangents: tangents,\n\t\t\tnormals: normals,\n\t\t\tbinormals: binormals\n\t\t};\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.arcLengthDivisions = source.arcLengthDivisions;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Curve',\n\t\t\t\tgenerator: 'Curve.toJSON'\n\t\t\t}\n\t\t};\n\n\t\tdata.arcLengthDivisions = this.arcLengthDivisions;\n\t\tdata.type = this.type;\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tthis.arcLengthDivisions = json.arcLengthDivisions;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass EllipseCurve extends Curve {\n\n\tconstructor( aX = 0, aY = 0, xRadius = 1, yRadius = 1, aStartAngle = 0, aEndAngle = Math.PI * 2, aClockwise = false, aRotation = 0 ) {\n\n\t\tsuper();\n\n\t\tthis.isEllipseCurve = true;\n\n\t\tthis.type = 'EllipseCurve';\n\n\t\tthis.aX = aX;\n\t\tthis.aY = aY;\n\n\t\tthis.xRadius = xRadius;\n\t\tthis.yRadius = yRadius;\n\n\t\tthis.aStartAngle = aStartAngle;\n\t\tthis.aEndAngle = aEndAngle;\n\n\t\tthis.aClockwise = aClockwise;\n\n\t\tthis.aRotation = aRotation;\n\n\t}\n\n\tgetPoint( t, optionalTarget ) {\n\n\t\tconst point = optionalTarget || new Vector2();\n\n\t\tconst twoPi = Math.PI * 2;\n\t\tlet deltaAngle = this.aEndAngle - this.aStartAngle;\n\t\tconst samePoints = Math.abs( deltaAngle ) < Number.EPSILON;\n\n\t\t// ensures that deltaAngle is 0 .. 2 PI\n\t\twhile ( deltaAngle < 0 ) deltaAngle += twoPi;\n\t\twhile ( deltaAngle > twoPi ) deltaAngle -= twoPi;\n\n\t\tif ( deltaAngle < Number.EPSILON ) {\n\n\t\t\tif ( samePoints ) {\n\n\t\t\t\tdeltaAngle = 0;\n\n\t\t\t} else {\n\n\t\t\t\tdeltaAngle = twoPi;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.aClockwise === true && ! samePoints ) {\n\n\t\t\tif ( deltaAngle === twoPi ) {\n\n\t\t\t\tdeltaAngle = - twoPi;\n\n\t\t\t} else {\n\n\t\t\t\tdeltaAngle = deltaAngle - twoPi;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst angle = this.aStartAngle + t * deltaAngle;\n\t\tlet x = this.aX + this.xRadius * Math.cos( angle );\n\t\tlet y = this.aY + this.yRadius * Math.sin( angle );\n\n\t\tif ( this.aRotation !== 0 ) {\n\n\t\t\tconst cos = Math.cos( this.aRotation );\n\t\t\tconst sin = Math.sin( this.aRotation );\n\n\t\t\tconst tx = x - this.aX;\n\t\t\tconst ty = y - this.aY;\n\n\t\t\t// Rotate the point about the center of the ellipse.\n\t\t\tx = tx * cos - ty * sin + this.aX;\n\t\t\ty = tx * sin + ty * cos + this.aY;\n\n\t\t}\n\n\t\treturn point.set( x, y );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.aX = source.aX;\n\t\tthis.aY = source.aY;\n\n\t\tthis.xRadius = source.xRadius;\n\t\tthis.yRadius = source.yRadius;\n\n\t\tthis.aStartAngle = source.aStartAngle;\n\t\tthis.aEndAngle = source.aEndAngle;\n\n\t\tthis.aClockwise = source.aClockwise;\n\n\t\tthis.aRotation = source.aRotation;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.aX = this.aX;\n\t\tdata.aY = this.aY;\n\n\t\tdata.xRadius = this.xRadius;\n\t\tdata.yRadius = this.yRadius;\n\n\t\tdata.aStartAngle = this.aStartAngle;\n\t\tdata.aEndAngle = this.aEndAngle;\n\n\t\tdata.aClockwise = this.aClockwise;\n\n\t\tdata.aRotation = this.aRotation;\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.aX = json.aX;\n\t\tthis.aY = json.aY;\n\n\t\tthis.xRadius = json.xRadius;\n\t\tthis.yRadius = json.yRadius;\n\n\t\tthis.aStartAngle = json.aStartAngle;\n\t\tthis.aEndAngle = json.aEndAngle;\n\n\t\tthis.aClockwise = json.aClockwise;\n\n\t\tthis.aRotation = json.aRotation;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass ArcCurve extends EllipseCurve {\n\n\tconstructor( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tsuper( aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\n\n\t\tthis.isArcCurve = true;\n\n\t\tthis.type = 'ArcCurve';\n\n\t}\n\n}\n\n/**\n * Centripetal CatmullRom Curve - which is useful for avoiding\n * cusps and self-intersections in non-uniform catmull rom curves.\n * http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf\n *\n * curve.type accepts centripetal(default), chordal and catmullrom\n * curve.tension is used for catmullrom which defaults to 0.5\n */\n\n\n/*\nBased on an optimized c++ solution in\n - http://stackoverflow.com/questions/9489736/catmull-rom-curve-with-no-cusps-and-no-self-intersections/\n - http://ideone.com/NoEbVM\n\nThis CubicPoly class could be used for reusing some variables and calculations,\nbut for three.js curve use, it could be possible inlined and flatten into a single function call\nwhich can be placed in CurveUtils.\n*/\n\nfunction CubicPoly() {\n\n\tlet c0 = 0, c1 = 0, c2 = 0, c3 = 0;\n\n\t/*\n\t * Compute coefficients for a cubic polynomial\n\t *   p(s) = c0 + c1*s + c2*s^2 + c3*s^3\n\t * such that\n\t *   p(0) = x0, p(1) = x1\n\t *  and\n\t *   p'(0) = t0, p'(1) = t1.\n\t */\n\tfunction init( x0, x1, t0, t1 ) {\n\n\t\tc0 = x0;\n\t\tc1 = t0;\n\t\tc2 = - 3 * x0 + 3 * x1 - 2 * t0 - t1;\n\t\tc3 = 2 * x0 - 2 * x1 + t0 + t1;\n\n\t}\n\n\treturn {\n\n\t\tinitCatmullRom: function ( x0, x1, x2, x3, tension ) {\n\n\t\t\tinit( x1, x2, tension * ( x2 - x0 ), tension * ( x3 - x1 ) );\n\n\t\t},\n\n\t\tinitNonuniformCatmullRom: function ( x0, x1, x2, x3, dt0, dt1, dt2 ) {\n\n\t\t\t// compute tangents when parameterized in [t1,t2]\n\t\t\tlet t1 = ( x1 - x0 ) / dt0 - ( x2 - x0 ) / ( dt0 + dt1 ) + ( x2 - x1 ) / dt1;\n\t\t\tlet t2 = ( x2 - x1 ) / dt1 - ( x3 - x1 ) / ( dt1 + dt2 ) + ( x3 - x2 ) / dt2;\n\n\t\t\t// rescale tangents for parametrization in [0,1]\n\t\t\tt1 *= dt1;\n\t\t\tt2 *= dt1;\n\n\t\t\tinit( x1, x2, t1, t2 );\n\n\t\t},\n\n\t\tcalc: function ( t ) {\n\n\t\t\tconst t2 = t * t;\n\t\t\tconst t3 = t2 * t;\n\t\t\treturn c0 + c1 * t + c2 * t2 + c3 * t3;\n\n\t\t}\n\n\t};\n\n}\n\n//\n\nconst tmp = /*@__PURE__*/ new Vector3();\nconst px = /*@__PURE__*/ new CubicPoly();\nconst py = /*@__PURE__*/ new CubicPoly();\nconst pz = /*@__PURE__*/ new CubicPoly();\n\nclass CatmullRomCurve3 extends Curve {\n\n\tconstructor( points = [], closed = false, curveType = 'centripetal', tension = 0.5 ) {\n\n\t\tsuper();\n\n\t\tthis.isCatmullRomCurve3 = true;\n\n\t\tthis.type = 'CatmullRomCurve3';\n\n\t\tthis.points = points;\n\t\tthis.closed = closed;\n\t\tthis.curveType = curveType;\n\t\tthis.tension = tension;\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector3() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tconst points = this.points;\n\t\tconst l = points.length;\n\n\t\tconst p = ( l - ( this.closed ? 0 : 1 ) ) * t;\n\t\tlet intPoint = Math.floor( p );\n\t\tlet weight = p - intPoint;\n\n\t\tif ( this.closed ) {\n\n\t\t\tintPoint += intPoint > 0 ? 0 : ( Math.floor( Math.abs( intPoint ) / l ) + 1 ) * l;\n\n\t\t} else if ( weight === 0 && intPoint === l - 1 ) {\n\n\t\t\tintPoint = l - 2;\n\t\t\tweight = 1;\n\n\t\t}\n\n\t\tlet p0, p3; // 4 points (p1 & p2 defined below)\n\n\t\tif ( this.closed || intPoint > 0 ) {\n\n\t\t\tp0 = points[ ( intPoint - 1 ) % l ];\n\n\t\t} else {\n\n\t\t\t// extrapolate first point\n\t\t\ttmp.subVectors( points[ 0 ], points[ 1 ] ).add( points[ 0 ] );\n\t\t\tp0 = tmp;\n\n\t\t}\n\n\t\tconst p1 = points[ intPoint % l ];\n\t\tconst p2 = points[ ( intPoint + 1 ) % l ];\n\n\t\tif ( this.closed || intPoint + 2 < l ) {\n\n\t\t\tp3 = points[ ( intPoint + 2 ) % l ];\n\n\t\t} else {\n\n\t\t\t// extrapolate last point\n\t\t\ttmp.subVectors( points[ l - 1 ], points[ l - 2 ] ).add( points[ l - 1 ] );\n\t\t\tp3 = tmp;\n\n\t\t}\n\n\t\tif ( this.curveType === 'centripetal' || this.curveType === 'chordal' ) {\n\n\t\t\t// init Centripetal / Chordal Catmull-Rom\n\t\t\tconst pow = this.curveType === 'chordal' ? 0.5 : 0.25;\n\t\t\tlet dt0 = Math.pow( p0.distanceToSquared( p1 ), pow );\n\t\t\tlet dt1 = Math.pow( p1.distanceToSquared( p2 ), pow );\n\t\t\tlet dt2 = Math.pow( p2.distanceToSquared( p3 ), pow );\n\n\t\t\t// safety check for repeated points\n\t\t\tif ( dt1 < 1e-4 ) dt1 = 1.0;\n\t\t\tif ( dt0 < 1e-4 ) dt0 = dt1;\n\t\t\tif ( dt2 < 1e-4 ) dt2 = dt1;\n\n\t\t\tpx.initNonuniformCatmullRom( p0.x, p1.x, p2.x, p3.x, dt0, dt1, dt2 );\n\t\t\tpy.initNonuniformCatmullRom( p0.y, p1.y, p2.y, p3.y, dt0, dt1, dt2 );\n\t\t\tpz.initNonuniformCatmullRom( p0.z, p1.z, p2.z, p3.z, dt0, dt1, dt2 );\n\n\t\t} else if ( this.curveType === 'catmullrom' ) {\n\n\t\t\tpx.initCatmullRom( p0.x, p1.x, p2.x, p3.x, this.tension );\n\t\t\tpy.initCatmullRom( p0.y, p1.y, p2.y, p3.y, this.tension );\n\t\t\tpz.initCatmullRom( p0.z, p1.z, p2.z, p3.z, this.tension );\n\n\t\t}\n\n\t\tpoint.set(\n\t\t\tpx.calc( weight ),\n\t\t\tpy.calc( weight ),\n\t\t\tpz.calc( weight )\n\t\t);\n\n\t\treturn point;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.points = [];\n\n\t\tfor ( let i = 0, l = source.points.length; i < l; i ++ ) {\n\n\t\t\tconst point = source.points[ i ];\n\n\t\t\tthis.points.push( point.clone() );\n\n\t\t}\n\n\t\tthis.closed = source.closed;\n\t\tthis.curveType = source.curveType;\n\t\tthis.tension = source.tension;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.points = [];\n\n\t\tfor ( let i = 0, l = this.points.length; i < l; i ++ ) {\n\n\t\t\tconst point = this.points[ i ];\n\t\t\tdata.points.push( point.toArray() );\n\n\t\t}\n\n\t\tdata.closed = this.closed;\n\t\tdata.curveType = this.curveType;\n\t\tdata.tension = this.tension;\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.points = [];\n\n\t\tfor ( let i = 0, l = json.points.length; i < l; i ++ ) {\n\n\t\t\tconst point = json.points[ i ];\n\t\t\tthis.points.push( new Vector3().fromArray( point ) );\n\n\t\t}\n\n\t\tthis.closed = json.closed;\n\t\tthis.curveType = json.curveType;\n\t\tthis.tension = json.tension;\n\n\t\treturn this;\n\n\t}\n\n}\n\n/**\n * Bezier Curves formulas obtained from\n * https://en.wikipedia.org/wiki/B%C3%A9zier_curve\n */\n\nfunction CatmullRom( t, p0, p1, p2, p3 ) {\n\n\tconst v0 = ( p2 - p0 ) * 0.5;\n\tconst v1 = ( p3 - p1 ) * 0.5;\n\tconst t2 = t * t;\n\tconst t3 = t * t2;\n\treturn ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\n\n}\n\n//\n\nfunction QuadraticBezierP0( t, p ) {\n\n\tconst k = 1 - t;\n\treturn k * k * p;\n\n}\n\nfunction QuadraticBezierP1( t, p ) {\n\n\treturn 2 * ( 1 - t ) * t * p;\n\n}\n\nfunction QuadraticBezierP2( t, p ) {\n\n\treturn t * t * p;\n\n}\n\nfunction QuadraticBezier( t, p0, p1, p2 ) {\n\n\treturn QuadraticBezierP0( t, p0 ) + QuadraticBezierP1( t, p1 ) +\n\t\tQuadraticBezierP2( t, p2 );\n\n}\n\n//\n\nfunction CubicBezierP0( t, p ) {\n\n\tconst k = 1 - t;\n\treturn k * k * k * p;\n\n}\n\nfunction CubicBezierP1( t, p ) {\n\n\tconst k = 1 - t;\n\treturn 3 * k * k * t * p;\n\n}\n\nfunction CubicBezierP2( t, p ) {\n\n\treturn 3 * ( 1 - t ) * t * t * p;\n\n}\n\nfunction CubicBezierP3( t, p ) {\n\n\treturn t * t * t * p;\n\n}\n\nfunction CubicBezier( t, p0, p1, p2, p3 ) {\n\n\treturn CubicBezierP0( t, p0 ) + CubicBezierP1( t, p1 ) + CubicBezierP2( t, p2 ) +\n\t\tCubicBezierP3( t, p3 );\n\n}\n\nclass CubicBezierCurve extends Curve {\n\n\tconstructor( v0 = new Vector2(), v1 = new Vector2(), v2 = new Vector2(), v3 = new Vector2() ) {\n\n\t\tsuper();\n\n\t\tthis.isCubicBezierCurve = true;\n\n\t\tthis.type = 'CubicBezierCurve';\n\n\t\tthis.v0 = v0;\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\t\tthis.v3 = v3;\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector2() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\n\n\t\tpoint.set(\n\t\t\tCubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\n\t\t\tCubicBezier( t, v0.y, v1.y, v2.y, v3.y )\n\t\t);\n\n\t\treturn point;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.v0.copy( source.v0 );\n\t\tthis.v1.copy( source.v1 );\n\t\tthis.v2.copy( source.v2 );\n\t\tthis.v3.copy( source.v3 );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.v0 = this.v0.toArray();\n\t\tdata.v1 = this.v1.toArray();\n\t\tdata.v2 = this.v2.toArray();\n\t\tdata.v3 = this.v3.toArray();\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.v0.fromArray( json.v0 );\n\t\tthis.v1.fromArray( json.v1 );\n\t\tthis.v2.fromArray( json.v2 );\n\t\tthis.v3.fromArray( json.v3 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass CubicBezierCurve3 extends Curve {\n\n\tconstructor( v0 = new Vector3(), v1 = new Vector3(), v2 = new Vector3(), v3 = new Vector3() ) {\n\n\t\tsuper();\n\n\t\tthis.isCubicBezierCurve3 = true;\n\n\t\tthis.type = 'CubicBezierCurve3';\n\n\t\tthis.v0 = v0;\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\t\tthis.v3 = v3;\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector3() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\n\n\t\tpoint.set(\n\t\t\tCubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\n\t\t\tCubicBezier( t, v0.y, v1.y, v2.y, v3.y ),\n\t\t\tCubicBezier( t, v0.z, v1.z, v2.z, v3.z )\n\t\t);\n\n\t\treturn point;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.v0.copy( source.v0 );\n\t\tthis.v1.copy( source.v1 );\n\t\tthis.v2.copy( source.v2 );\n\t\tthis.v3.copy( source.v3 );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.v0 = this.v0.toArray();\n\t\tdata.v1 = this.v1.toArray();\n\t\tdata.v2 = this.v2.toArray();\n\t\tdata.v3 = this.v3.toArray();\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.v0.fromArray( json.v0 );\n\t\tthis.v1.fromArray( json.v1 );\n\t\tthis.v2.fromArray( json.v2 );\n\t\tthis.v3.fromArray( json.v3 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass LineCurve extends Curve {\n\n\tconstructor( v1 = new Vector2(), v2 = new Vector2() ) {\n\n\t\tsuper();\n\n\t\tthis.isLineCurve = true;\n\n\t\tthis.type = 'LineCurve';\n\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector2() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tif ( t === 1 ) {\n\n\t\t\tpoint.copy( this.v2 );\n\n\t\t} else {\n\n\t\t\tpoint.copy( this.v2 ).sub( this.v1 );\n\t\t\tpoint.multiplyScalar( t ).add( this.v1 );\n\n\t\t}\n\n\t\treturn point;\n\n\t}\n\n\t// Line curve is linear, so we can overwrite default getPointAt\n\tgetPointAt( u, optionalTarget ) {\n\n\t\treturn this.getPoint( u, optionalTarget );\n\n\t}\n\n\tgetTangent( t, optionalTarget ) {\n\n\t\tconst tangent = optionalTarget || new Vector2();\n\n\t\ttangent.copy( this.v2 ).sub( this.v1 ).normalize();\n\n\t\treturn tangent;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.v1.copy( source.v1 );\n\t\tthis.v2.copy( source.v2 );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.v1 = this.v1.toArray();\n\t\tdata.v2 = this.v2.toArray();\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.v1.fromArray( json.v1 );\n\t\tthis.v2.fromArray( json.v2 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass LineCurve3 extends Curve {\n\n\tconstructor( v1 = new Vector3(), v2 = new Vector3() ) {\n\n\t\tsuper();\n\n\t\tthis.isLineCurve3 = true;\n\n\t\tthis.type = 'LineCurve3';\n\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\n\t}\n\tgetPoint( t, optionalTarget = new Vector3() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tif ( t === 1 ) {\n\n\t\t\tpoint.copy( this.v2 );\n\n\t\t} else {\n\n\t\t\tpoint.copy( this.v2 ).sub( this.v1 );\n\t\t\tpoint.multiplyScalar( t ).add( this.v1 );\n\n\t\t}\n\n\t\treturn point;\n\n\t}\n\t// Line curve is linear, so we can overwrite default getPointAt\n\tgetPointAt( u, optionalTarget ) {\n\n\t\treturn this.getPoint( u, optionalTarget );\n\n\t}\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.v1.copy( source.v1 );\n\t\tthis.v2.copy( source.v2 );\n\n\t\treturn this;\n\n\t}\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.v1 = this.v1.toArray();\n\t\tdata.v2 = this.v2.toArray();\n\n\t\treturn data;\n\n\t}\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.v1.fromArray( json.v1 );\n\t\tthis.v2.fromArray( json.v2 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass QuadraticBezierCurve extends Curve {\n\n\tconstructor( v0 = new Vector2(), v1 = new Vector2(), v2 = new Vector2() ) {\n\n\t\tsuper();\n\n\t\tthis.isQuadraticBezierCurve = true;\n\n\t\tthis.type = 'QuadraticBezierCurve';\n\n\t\tthis.v0 = v0;\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector2() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2;\n\n\t\tpoint.set(\n\t\t\tQuadraticBezier( t, v0.x, v1.x, v2.x ),\n\t\t\tQuadraticBezier( t, v0.y, v1.y, v2.y )\n\t\t);\n\n\t\treturn point;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.v0.copy( source.v0 );\n\t\tthis.v1.copy( source.v1 );\n\t\tthis.v2.copy( source.v2 );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.v0 = this.v0.toArray();\n\t\tdata.v1 = this.v1.toArray();\n\t\tdata.v2 = this.v2.toArray();\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.v0.fromArray( json.v0 );\n\t\tthis.v1.fromArray( json.v1 );\n\t\tthis.v2.fromArray( json.v2 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass QuadraticBezierCurve3 extends Curve {\n\n\tconstructor( v0 = new Vector3(), v1 = new Vector3(), v2 = new Vector3() ) {\n\n\t\tsuper();\n\n\t\tthis.isQuadraticBezierCurve3 = true;\n\n\t\tthis.type = 'QuadraticBezierCurve3';\n\n\t\tthis.v0 = v0;\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector3() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2;\n\n\t\tpoint.set(\n\t\t\tQuadraticBezier( t, v0.x, v1.x, v2.x ),\n\t\t\tQuadraticBezier( t, v0.y, v1.y, v2.y ),\n\t\t\tQuadraticBezier( t, v0.z, v1.z, v2.z )\n\t\t);\n\n\t\treturn point;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.v0.copy( source.v0 );\n\t\tthis.v1.copy( source.v1 );\n\t\tthis.v2.copy( source.v2 );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.v0 = this.v0.toArray();\n\t\tdata.v1 = this.v1.toArray();\n\t\tdata.v2 = this.v2.toArray();\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.v0.fromArray( json.v0 );\n\t\tthis.v1.fromArray( json.v1 );\n\t\tthis.v2.fromArray( json.v2 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass SplineCurve extends Curve {\n\n\tconstructor( points = [] ) {\n\n\t\tsuper();\n\n\t\tthis.isSplineCurve = true;\n\n\t\tthis.type = 'SplineCurve';\n\n\t\tthis.points = points;\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector2() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tconst points = this.points;\n\t\tconst p = ( points.length - 1 ) * t;\n\n\t\tconst intPoint = Math.floor( p );\n\t\tconst weight = p - intPoint;\n\n\t\tconst p0 = points[ intPoint === 0 ? intPoint : intPoint - 1 ];\n\t\tconst p1 = points[ intPoint ];\n\t\tconst p2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\n\t\tconst p3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\n\n\t\tpoint.set(\n\t\t\tCatmullRom( weight, p0.x, p1.x, p2.x, p3.x ),\n\t\t\tCatmullRom( weight, p0.y, p1.y, p2.y, p3.y )\n\t\t);\n\n\t\treturn point;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.points = [];\n\n\t\tfor ( let i = 0, l = source.points.length; i < l; i ++ ) {\n\n\t\t\tconst point = source.points[ i ];\n\n\t\t\tthis.points.push( point.clone() );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.points = [];\n\n\t\tfor ( let i = 0, l = this.points.length; i < l; i ++ ) {\n\n\t\t\tconst point = this.points[ i ];\n\t\t\tdata.points.push( point.toArray() );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.points = [];\n\n\t\tfor ( let i = 0, l = json.points.length; i < l; i ++ ) {\n\n\t\t\tconst point = json.points[ i ];\n\t\t\tthis.points.push( new Vector2().fromArray( point ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\nvar Curves = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tArcCurve: ArcCurve,\n\tCatmullRomCurve3: CatmullRomCurve3,\n\tCubicBezierCurve: CubicBezierCurve,\n\tCubicBezierCurve3: CubicBezierCurve3,\n\tEllipseCurve: EllipseCurve,\n\tLineCurve: LineCurve,\n\tLineCurve3: LineCurve3,\n\tQuadraticBezierCurve: QuadraticBezierCurve,\n\tQuadraticBezierCurve3: QuadraticBezierCurve3,\n\tSplineCurve: SplineCurve\n});\n\n/**************************************************************\n *\tCurved Path - a curve path is simply a array of connected\n *  curves, but retains the api of a curve\n **************************************************************/\n\nclass CurvePath extends Curve {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.type = 'CurvePath';\n\n\t\tthis.curves = [];\n\t\tthis.autoClose = false; // Automatically closes the path\n\n\t}\n\n\tadd( curve ) {\n\n\t\tthis.curves.push( curve );\n\n\t}\n\n\tclosePath() {\n\n\t\t// Add a line curve if start and end of lines are not connected\n\t\tconst startPoint = this.curves[ 0 ].getPoint( 0 );\n\t\tconst endPoint = this.curves[ this.curves.length - 1 ].getPoint( 1 );\n\n\t\tif ( ! startPoint.equals( endPoint ) ) {\n\n\t\t\tthis.curves.push( new LineCurve( endPoint, startPoint ) );\n\n\t\t}\n\n\t}\n\n\t// To get accurate point with reference to\n\t// entire path distance at time t,\n\t// following has to be done:\n\n\t// 1. Length of each sub path have to be known\n\t// 2. Locate and identify type of curve\n\t// 3. Get t for the curve\n\t// 4. Return curve.getPointAt(t')\n\n\tgetPoint( t, optionalTarget ) {\n\n\t\tconst d = t * this.getLength();\n\t\tconst curveLengths = this.getCurveLengths();\n\t\tlet i = 0;\n\n\t\t// To think about boundaries points.\n\n\t\twhile ( i < curveLengths.length ) {\n\n\t\t\tif ( curveLengths[ i ] >= d ) {\n\n\t\t\t\tconst diff = curveLengths[ i ] - d;\n\t\t\t\tconst curve = this.curves[ i ];\n\n\t\t\t\tconst segmentLength = curve.getLength();\n\t\t\t\tconst u = segmentLength === 0 ? 0 : 1 - diff / segmentLength;\n\n\t\t\t\treturn curve.getPointAt( u, optionalTarget );\n\n\t\t\t}\n\n\t\t\ti ++;\n\n\t\t}\n\n\t\treturn null;\n\n\t\t// loop where sum != 0, sum > d , sum+1 <d\n\n\t}\n\n\t// We cannot use the default THREE.Curve getPoint() with getLength() because in\n\t// THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\n\t// getPoint() depends on getLength\n\n\tgetLength() {\n\n\t\tconst lens = this.getCurveLengths();\n\t\treturn lens[ lens.length - 1 ];\n\n\t}\n\n\t// cacheLengths must be recalculated.\n\tupdateArcLengths() {\n\n\t\tthis.needsUpdate = true;\n\t\tthis.cacheLengths = null;\n\t\tthis.getCurveLengths();\n\n\t}\n\n\t// Compute lengths and cache them\n\t// We cannot overwrite getLengths() because UtoT mapping uses it.\n\n\tgetCurveLengths() {\n\n\t\t// We use cache values if curves and cache array are same length\n\n\t\tif ( this.cacheLengths && this.cacheLengths.length === this.curves.length ) {\n\n\t\t\treturn this.cacheLengths;\n\n\t\t}\n\n\t\t// Get length of sub-curve\n\t\t// Push sums into cached array\n\n\t\tconst lengths = [];\n\t\tlet sums = 0;\n\n\t\tfor ( let i = 0, l = this.curves.length; i < l; i ++ ) {\n\n\t\t\tsums += this.curves[ i ].getLength();\n\t\t\tlengths.push( sums );\n\n\t\t}\n\n\t\tthis.cacheLengths = lengths;\n\n\t\treturn lengths;\n\n\t}\n\n\tgetSpacedPoints( divisions = 40 ) {\n\n\t\tconst points = [];\n\n\t\tfor ( let i = 0; i <= divisions; i ++ ) {\n\n\t\t\tpoints.push( this.getPoint( i / divisions ) );\n\n\t\t}\n\n\t\tif ( this.autoClose ) {\n\n\t\t\tpoints.push( points[ 0 ] );\n\n\t\t}\n\n\t\treturn points;\n\n\t}\n\n\tgetPoints( divisions = 12 ) {\n\n\t\tconst points = [];\n\t\tlet last;\n\n\t\tfor ( let i = 0, curves = this.curves; i < curves.length; i ++ ) {\n\n\t\t\tconst curve = curves[ i ];\n\t\t\tconst resolution = curve.isEllipseCurve ? divisions * 2\n\t\t\t\t: ( curve.isLineCurve || curve.isLineCurve3 ) ? 1\n\t\t\t\t\t: curve.isSplineCurve ? divisions * curve.points.length\n\t\t\t\t\t\t: divisions;\n\n\t\t\tconst pts = curve.getPoints( resolution );\n\n\t\t\tfor ( let j = 0; j < pts.length; j ++ ) {\n\n\t\t\t\tconst point = pts[ j ];\n\n\t\t\t\tif ( last && last.equals( point ) ) continue; // ensures no consecutive points are duplicates\n\n\t\t\t\tpoints.push( point );\n\t\t\t\tlast = point;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.autoClose && points.length > 1 && ! points[ points.length - 1 ].equals( points[ 0 ] ) ) {\n\n\t\t\tpoints.push( points[ 0 ] );\n\n\t\t}\n\n\t\treturn points;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.curves = [];\n\n\t\tfor ( let i = 0, l = source.curves.length; i < l; i ++ ) {\n\n\t\t\tconst curve = source.curves[ i ];\n\n\t\t\tthis.curves.push( curve.clone() );\n\n\t\t}\n\n\t\tthis.autoClose = source.autoClose;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.autoClose = this.autoClose;\n\t\tdata.curves = [];\n\n\t\tfor ( let i = 0, l = this.curves.length; i < l; i ++ ) {\n\n\t\t\tconst curve = this.curves[ i ];\n\t\t\tdata.curves.push( curve.toJSON() );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.autoClose = json.autoClose;\n\t\tthis.curves = [];\n\n\t\tfor ( let i = 0, l = json.curves.length; i < l; i ++ ) {\n\n\t\t\tconst curve = json.curves[ i ];\n\t\t\tthis.curves.push( new Curves[ curve.type ]().fromJSON( curve ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass Path extends CurvePath {\n\n\tconstructor( points ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'Path';\n\n\t\tthis.currentPoint = new Vector2();\n\n\t\tif ( points ) {\n\n\t\t\tthis.setFromPoints( points );\n\n\t\t}\n\n\t}\n\n\tsetFromPoints( points ) {\n\n\t\tthis.moveTo( points[ 0 ].x, points[ 0 ].y );\n\n\t\tfor ( let i = 1, l = points.length; i < l; i ++ ) {\n\n\t\t\tthis.lineTo( points[ i ].x, points[ i ].y );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tmoveTo( x, y ) {\n\n\t\tthis.currentPoint.set( x, y ); // TODO consider referencing vectors instead of copying?\n\n\t\treturn this;\n\n\t}\n\n\tlineTo( x, y ) {\n\n\t\tconst curve = new LineCurve( this.currentPoint.clone(), new Vector2( x, y ) );\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( x, y );\n\n\t\treturn this;\n\n\t}\n\n\tquadraticCurveTo( aCPx, aCPy, aX, aY ) {\n\n\t\tconst curve = new QuadraticBezierCurve(\n\t\t\tthis.currentPoint.clone(),\n\t\t\tnew Vector2( aCPx, aCPy ),\n\t\t\tnew Vector2( aX, aY )\n\t\t);\n\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( aX, aY );\n\n\t\treturn this;\n\n\t}\n\n\tbezierCurveTo( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\n\n\t\tconst curve = new CubicBezierCurve(\n\t\t\tthis.currentPoint.clone(),\n\t\t\tnew Vector2( aCP1x, aCP1y ),\n\t\t\tnew Vector2( aCP2x, aCP2y ),\n\t\t\tnew Vector2( aX, aY )\n\t\t);\n\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( aX, aY );\n\n\t\treturn this;\n\n\t}\n\n\tsplineThru( pts /*Array of Vector*/ ) {\n\n\t\tconst npts = [ this.currentPoint.clone() ].concat( pts );\n\n\t\tconst curve = new SplineCurve( npts );\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.copy( pts[ pts.length - 1 ] );\n\n\t\treturn this;\n\n\t}\n\n\tarc( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tconst x0 = this.currentPoint.x;\n\t\tconst y0 = this.currentPoint.y;\n\n\t\tthis.absarc( aX + x0, aY + y0, aRadius,\n\t\t\taStartAngle, aEndAngle, aClockwise );\n\n\t\treturn this;\n\n\t}\n\n\tabsarc( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tthis.absellipse( aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\n\n\t\treturn this;\n\n\t}\n\n\tellipse( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\t\tconst x0 = this.currentPoint.x;\n\t\tconst y0 = this.currentPoint.y;\n\n\t\tthis.absellipse( aX + x0, aY + y0, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\n\n\t\treturn this;\n\n\t}\n\n\tabsellipse( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\t\tconst curve = new EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\n\n\t\tif ( this.curves.length > 0 ) {\n\n\t\t\t// if a previous curve is present, attempt to join\n\t\t\tconst firstPoint = curve.getPoint( 0 );\n\n\t\t\tif ( ! firstPoint.equals( this.currentPoint ) ) {\n\n\t\t\t\tthis.lineTo( firstPoint.x, firstPoint.y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.curves.push( curve );\n\n\t\tconst lastPoint = curve.getPoint( 1 );\n\t\tthis.currentPoint.copy( lastPoint );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.currentPoint.copy( source.currentPoint );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.currentPoint = this.currentPoint.toArray();\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.currentPoint.fromArray( json.currentPoint );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass LatheGeometry extends BufferGeometry {\n\n\tconstructor( points = [ new Vector2( 0, - 0.5 ), new Vector2( 0.5, 0 ), new Vector2( 0, 0.5 ) ], segments = 12, phiStart = 0, phiLength = Math.PI * 2 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'LatheGeometry';\n\n\t\tthis.parameters = {\n\t\t\tpoints: points,\n\t\t\tsegments: segments,\n\t\t\tphiStart: phiStart,\n\t\t\tphiLength: phiLength\n\t\t};\n\n\t\tsegments = Math.floor( segments );\n\n\t\t// clamp phiLength so it's in range of [ 0, 2PI ]\n\n\t\tphiLength = clamp( phiLength, 0, Math.PI * 2 );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst uvs = [];\n\t\tconst initNormals = [];\n\t\tconst normals = [];\n\n\t\t// helper variables\n\n\t\tconst inverseSegments = 1.0 / segments;\n\t\tconst vertex = new Vector3();\n\t\tconst uv = new Vector2();\n\t\tconst normal = new Vector3();\n\t\tconst curNormal = new Vector3();\n\t\tconst prevNormal = new Vector3();\n\t\tlet dx = 0;\n\t\tlet dy = 0;\n\n\t\t// pre-compute normals for initial \"meridian\"\n\n\t\tfor ( let j = 0; j <= ( points.length - 1 ); j ++ ) {\n\n\t\t\tswitch ( j ) {\n\n\t\t\t\tcase 0:\t\t\t\t// special handling for 1st vertex on path\n\n\t\t\t\t\tdx = points[ j + 1 ].x - points[ j ].x;\n\t\t\t\t\tdy = points[ j + 1 ].y - points[ j ].y;\n\n\t\t\t\t\tnormal.x = dy * 1.0;\n\t\t\t\t\tnormal.y = - dx;\n\t\t\t\t\tnormal.z = dy * 0.0;\n\n\t\t\t\t\tprevNormal.copy( normal );\n\n\t\t\t\t\tnormal.normalize();\n\n\t\t\t\t\tinitNormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ( points.length - 1 ):\t// special handling for last Vertex on path\n\n\t\t\t\t\tinitNormals.push( prevNormal.x, prevNormal.y, prevNormal.z );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\t\t\t// default handling for all vertices in between\n\n\t\t\t\t\tdx = points[ j + 1 ].x - points[ j ].x;\n\t\t\t\t\tdy = points[ j + 1 ].y - points[ j ].y;\n\n\t\t\t\t\tnormal.x = dy * 1.0;\n\t\t\t\t\tnormal.y = - dx;\n\t\t\t\t\tnormal.z = dy * 0.0;\n\n\t\t\t\t\tcurNormal.copy( normal );\n\n\t\t\t\t\tnormal.x += prevNormal.x;\n\t\t\t\t\tnormal.y += prevNormal.y;\n\t\t\t\t\tnormal.z += prevNormal.z;\n\n\t\t\t\t\tnormal.normalize();\n\n\t\t\t\t\tinitNormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t\tprevNormal.copy( curNormal );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// generate vertices, uvs and normals\n\n\t\tfor ( let i = 0; i <= segments; i ++ ) {\n\n\t\t\tconst phi = phiStart + i * inverseSegments * phiLength;\n\n\t\t\tconst sin = Math.sin( phi );\n\t\t\tconst cos = Math.cos( phi );\n\n\t\t\tfor ( let j = 0; j <= ( points.length - 1 ); j ++ ) {\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = points[ j ].x * sin;\n\t\t\t\tvertex.y = points[ j ].y;\n\t\t\t\tvertex.z = points[ j ].x * cos;\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// uv\n\n\t\t\t\tuv.x = i / segments;\n\t\t\t\tuv.y = j / ( points.length - 1 );\n\n\t\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\t\t// normal\n\n\t\t\t\tconst x = initNormals[ 3 * j + 0 ] * sin;\n\t\t\t\tconst y = initNormals[ 3 * j + 1 ];\n\t\t\t\tconst z = initNormals[ 3 * j + 0 ] * cos;\n\n\t\t\t\tnormals.push( x, y, z );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// indices\n\n\t\tfor ( let i = 0; i < segments; i ++ ) {\n\n\t\t\tfor ( let j = 0; j < ( points.length - 1 ); j ++ ) {\n\n\t\t\t\tconst base = j + i * points.length;\n\n\t\t\t\tconst a = base;\n\t\t\t\tconst b = base + points.length;\n\t\t\t\tconst c = base + points.length + 1;\n\t\t\t\tconst d = base + 1;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( c, d, b );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new LatheGeometry( data.points, data.segments, data.phiStart, data.phiLength );\n\n\t}\n\n}\n\nclass CapsuleGeometry extends LatheGeometry {\n\n\tconstructor( radius = 1, length = 1, capSegments = 4, radialSegments = 8 ) {\n\n\t\tconst path = new Path();\n\t\tpath.absarc( 0, - length / 2, radius, Math.PI * 1.5, 0 );\n\t\tpath.absarc( 0, length / 2, radius, 0, Math.PI * 0.5 );\n\n\t\tsuper( path.getPoints( capSegments ), radialSegments );\n\n\t\tthis.type = 'CapsuleGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\theight: length,\n\t\t\tcapSegments: capSegments,\n\t\t\tradialSegments: radialSegments,\n\t\t};\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new CapsuleGeometry( data.radius, data.length, data.capSegments, data.radialSegments );\n\n\t}\n\n}\n\nclass CircleGeometry extends BufferGeometry {\n\n\tconstructor( radius = 1, segments = 8, thetaStart = 0, thetaLength = Math.PI * 2 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'CircleGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tsegments: segments,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t\tsegments = Math.max( 3, segments );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tconst vertex = new Vector3();\n\t\tconst uv = new Vector2();\n\n\t\t// center point\n\n\t\tvertices.push( 0, 0, 0 );\n\t\tnormals.push( 0, 0, 1 );\n\t\tuvs.push( 0.5, 0.5 );\n\n\t\tfor ( let s = 0, i = 3; s <= segments; s ++, i += 3 ) {\n\n\t\t\tconst segment = thetaStart + s / segments * thetaLength;\n\n\t\t\t// vertex\n\n\t\t\tvertex.x = radius * Math.cos( segment );\n\t\t\tvertex.y = radius * Math.sin( segment );\n\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t// normal\n\n\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\t// uvs\n\n\t\t\tuv.x = ( vertices[ i ] / radius + 1 ) / 2;\n\t\t\tuv.y = ( vertices[ i + 1 ] / radius + 1 ) / 2;\n\n\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t}\n\n\t\t// indices\n\n\t\tfor ( let i = 1; i <= segments; i ++ ) {\n\n\t\t\tindices.push( i, i + 1, 0 );\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new CircleGeometry( data.radius, data.segments, data.thetaStart, data.thetaLength );\n\n\t}\n\n}\n\nclass CylinderGeometry extends BufferGeometry {\n\n\tconstructor( radiusTop = 1, radiusBottom = 1, height = 1, radialSegments = 8, heightSegments = 1, openEnded = false, thetaStart = 0, thetaLength = Math.PI * 2 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'CylinderGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradiusTop: radiusTop,\n\t\t\tradiusBottom: radiusBottom,\n\t\t\theight: height,\n\t\t\tradialSegments: radialSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\topenEnded: openEnded,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t\tconst scope = this;\n\n\t\tradialSegments = Math.floor( radialSegments );\n\t\theightSegments = Math.floor( heightSegments );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tlet index = 0;\n\t\tconst indexArray = [];\n\t\tconst halfHeight = height / 2;\n\t\tlet groupStart = 0;\n\n\t\t// generate geometry\n\n\t\tgenerateTorso();\n\n\t\tif ( openEnded === false ) {\n\n\t\t\tif ( radiusTop > 0 ) generateCap( true );\n\t\t\tif ( radiusBottom > 0 ) generateCap( false );\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\tfunction generateTorso() {\n\n\t\t\tconst normal = new Vector3();\n\t\t\tconst vertex = new Vector3();\n\n\t\t\tlet groupCount = 0;\n\n\t\t\t// this will be used to calculate the normal\n\t\t\tconst slope = ( radiusBottom - radiusTop ) / height;\n\n\t\t\t// generate vertices, normals and uvs\n\n\t\t\tfor ( let y = 0; y <= heightSegments; y ++ ) {\n\n\t\t\t\tconst indexRow = [];\n\n\t\t\t\tconst v = y / heightSegments;\n\n\t\t\t\t// calculate the radius of the current row\n\n\t\t\t\tconst radius = v * ( radiusBottom - radiusTop ) + radiusTop;\n\n\t\t\t\tfor ( let x = 0; x <= radialSegments; x ++ ) {\n\n\t\t\t\t\tconst u = x / radialSegments;\n\n\t\t\t\t\tconst theta = u * thetaLength + thetaStart;\n\n\t\t\t\t\tconst sinTheta = Math.sin( theta );\n\t\t\t\t\tconst cosTheta = Math.cos( theta );\n\n\t\t\t\t\t// vertex\n\n\t\t\t\t\tvertex.x = radius * sinTheta;\n\t\t\t\t\tvertex.y = - v * height + halfHeight;\n\t\t\t\t\tvertex.z = radius * cosTheta;\n\t\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t\t// normal\n\n\t\t\t\t\tnormal.set( sinTheta, slope, cosTheta ).normalize();\n\t\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t\t// uv\n\n\t\t\t\t\tuvs.push( u, 1 - v );\n\n\t\t\t\t\t// save index of vertex in respective row\n\n\t\t\t\t\tindexRow.push( index ++ );\n\n\t\t\t\t}\n\n\t\t\t\t// now save vertices of the row in our index array\n\n\t\t\t\tindexArray.push( indexRow );\n\n\t\t\t}\n\n\t\t\t// generate indices\n\n\t\t\tfor ( let x = 0; x < radialSegments; x ++ ) {\n\n\t\t\t\tfor ( let y = 0; y < heightSegments; y ++ ) {\n\n\t\t\t\t\t// we use the index array to access the correct indices\n\n\t\t\t\t\tconst a = indexArray[ y ][ x ];\n\t\t\t\t\tconst b = indexArray[ y + 1 ][ x ];\n\t\t\t\t\tconst c = indexArray[ y + 1 ][ x + 1 ];\n\t\t\t\t\tconst d = indexArray[ y ][ x + 1 ];\n\n\t\t\t\t\t// faces\n\n\t\t\t\t\tindices.push( a, b, d );\n\t\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t\t// update group counter\n\n\t\t\t\t\tgroupCount += 6;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\t\tscope.addGroup( groupStart, groupCount, 0 );\n\n\t\t\t// calculate new start value for groups\n\n\t\t\tgroupStart += groupCount;\n\n\t\t}\n\n\t\tfunction generateCap( top ) {\n\n\t\t\t// save the index of the first center vertex\n\t\t\tconst centerIndexStart = index;\n\n\t\t\tconst uv = new Vector2();\n\t\t\tconst vertex = new Vector3();\n\n\t\t\tlet groupCount = 0;\n\n\t\t\tconst radius = ( top === true ) ? radiusTop : radiusBottom;\n\t\t\tconst sign = ( top === true ) ? 1 : - 1;\n\n\t\t\t// first we generate the center vertex data of the cap.\n\t\t\t// because the geometry needs one set of uvs per face,\n\t\t\t// we must generate a center vertex per face/segment\n\n\t\t\tfor ( let x = 1; x <= radialSegments; x ++ ) {\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertices.push( 0, halfHeight * sign, 0 );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormals.push( 0, sign, 0 );\n\n\t\t\t\t// uv\n\n\t\t\t\tuvs.push( 0.5, 0.5 );\n\n\t\t\t\t// increase index\n\n\t\t\t\tindex ++;\n\n\t\t\t}\n\n\t\t\t// save the index of the last center vertex\n\t\t\tconst centerIndexEnd = index;\n\n\t\t\t// now we generate the surrounding vertices, normals and uvs\n\n\t\t\tfor ( let x = 0; x <= radialSegments; x ++ ) {\n\n\t\t\t\tconst u = x / radialSegments;\n\t\t\t\tconst theta = u * thetaLength + thetaStart;\n\n\t\t\t\tconst cosTheta = Math.cos( theta );\n\t\t\t\tconst sinTheta = Math.sin( theta );\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = radius * sinTheta;\n\t\t\t\tvertex.y = halfHeight * sign;\n\t\t\t\tvertex.z = radius * cosTheta;\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormals.push( 0, sign, 0 );\n\n\t\t\t\t// uv\n\n\t\t\t\tuv.x = ( cosTheta * 0.5 ) + 0.5;\n\t\t\t\tuv.y = ( sinTheta * 0.5 * sign ) + 0.5;\n\t\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\t\t// increase index\n\n\t\t\t\tindex ++;\n\n\t\t\t}\n\n\t\t\t// generate indices\n\n\t\t\tfor ( let x = 0; x < radialSegments; x ++ ) {\n\n\t\t\t\tconst c = centerIndexStart + x;\n\t\t\t\tconst i = centerIndexEnd + x;\n\n\t\t\t\tif ( top === true ) {\n\n\t\t\t\t\t// face top\n\n\t\t\t\t\tindices.push( i, i + 1, c );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// face bottom\n\n\t\t\t\t\tindices.push( i + 1, i, c );\n\n\t\t\t\t}\n\n\t\t\t\tgroupCount += 3;\n\n\t\t\t}\n\n\t\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\t\tscope.addGroup( groupStart, groupCount, top === true ? 1 : 2 );\n\n\t\t\t// calculate new start value for groups\n\n\t\t\tgroupStart += groupCount;\n\n\t\t}\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new CylinderGeometry( data.radiusTop, data.radiusBottom, data.height, data.radialSegments, data.heightSegments, data.openEnded, data.thetaStart, data.thetaLength );\n\n\t}\n\n}\n\nclass ConeGeometry extends CylinderGeometry {\n\n\tconstructor( radius = 1, height = 1, radialSegments = 8, heightSegments = 1, openEnded = false, thetaStart = 0, thetaLength = Math.PI * 2 ) {\n\n\t\tsuper( 0, radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength );\n\n\t\tthis.type = 'ConeGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\theight: height,\n\t\t\tradialSegments: radialSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\topenEnded: openEnded,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new ConeGeometry( data.radius, data.height, data.radialSegments, data.heightSegments, data.openEnded, data.thetaStart, data.thetaLength );\n\n\t}\n\n}\n\nclass PolyhedronGeometry extends BufferGeometry {\n\n\tconstructor( vertices = [], indices = [], radius = 1, detail = 0 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'PolyhedronGeometry';\n\n\t\tthis.parameters = {\n\t\t\tvertices: vertices,\n\t\t\tindices: indices,\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t\t// default buffer data\n\n\t\tconst vertexBuffer = [];\n\t\tconst uvBuffer = [];\n\n\t\t// the subdivision creates the vertex buffer data\n\n\t\tsubdivide( detail );\n\n\t\t// all vertices should lie on a conceptual sphere with a given radius\n\n\t\tapplyRadius( radius );\n\n\t\t// finally, create the uv data\n\n\t\tgenerateUVs();\n\n\t\t// build non-indexed geometry\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertexBuffer, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( vertexBuffer.slice(), 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvBuffer, 2 ) );\n\n\t\tif ( detail === 0 ) {\n\n\t\t\tthis.computeVertexNormals(); // flat normals\n\n\t\t} else {\n\n\t\t\tthis.normalizeNormals(); // smooth normals\n\n\t\t}\n\n\t\t// helper functions\n\n\t\tfunction subdivide( detail ) {\n\n\t\t\tconst a = new Vector3();\n\t\t\tconst b = new Vector3();\n\t\t\tconst c = new Vector3();\n\n\t\t\t// iterate over all faces and apply a subdivison with the given detail value\n\n\t\t\tfor ( let i = 0; i < indices.length; i += 3 ) {\n\n\t\t\t\t// get the vertices of the face\n\n\t\t\t\tgetVertexByIndex( indices[ i + 0 ], a );\n\t\t\t\tgetVertexByIndex( indices[ i + 1 ], b );\n\t\t\t\tgetVertexByIndex( indices[ i + 2 ], c );\n\n\t\t\t\t// perform subdivision\n\n\t\t\t\tsubdivideFace( a, b, c, detail );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction subdivideFace( a, b, c, detail ) {\n\n\t\t\tconst cols = detail + 1;\n\n\t\t\t// we use this multidimensional array as a data structure for creating the subdivision\n\n\t\t\tconst v = [];\n\n\t\t\t// construct all of the vertices for this subdivision\n\n\t\t\tfor ( let i = 0; i <= cols; i ++ ) {\n\n\t\t\t\tv[ i ] = [];\n\n\t\t\t\tconst aj = a.clone().lerp( c, i / cols );\n\t\t\t\tconst bj = b.clone().lerp( c, i / cols );\n\n\t\t\t\tconst rows = cols - i;\n\n\t\t\t\tfor ( let j = 0; j <= rows; j ++ ) {\n\n\t\t\t\t\tif ( j === 0 && i === cols ) {\n\n\t\t\t\t\t\tv[ i ][ j ] = aj;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tv[ i ][ j ] = aj.clone().lerp( bj, j / rows );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// construct all of the faces\n\n\t\t\tfor ( let i = 0; i < cols; i ++ ) {\n\n\t\t\t\tfor ( let j = 0; j < 2 * ( cols - i ) - 1; j ++ ) {\n\n\t\t\t\t\tconst k = Math.floor( j / 2 );\n\n\t\t\t\t\tif ( j % 2 === 0 ) {\n\n\t\t\t\t\t\tpushVertex( v[ i ][ k + 1 ] );\n\t\t\t\t\t\tpushVertex( v[ i + 1 ][ k ] );\n\t\t\t\t\t\tpushVertex( v[ i ][ k ] );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tpushVertex( v[ i ][ k + 1 ] );\n\t\t\t\t\t\tpushVertex( v[ i + 1 ][ k + 1 ] );\n\t\t\t\t\t\tpushVertex( v[ i + 1 ][ k ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction applyRadius( radius ) {\n\n\t\t\tconst vertex = new Vector3();\n\n\t\t\t// iterate over the entire buffer and apply the radius to each vertex\n\n\t\t\tfor ( let i = 0; i < vertexBuffer.length; i += 3 ) {\n\n\t\t\t\tvertex.x = vertexBuffer[ i + 0 ];\n\t\t\t\tvertex.y = vertexBuffer[ i + 1 ];\n\t\t\t\tvertex.z = vertexBuffer[ i + 2 ];\n\n\t\t\t\tvertex.normalize().multiplyScalar( radius );\n\n\t\t\t\tvertexBuffer[ i + 0 ] = vertex.x;\n\t\t\t\tvertexBuffer[ i + 1 ] = vertex.y;\n\t\t\t\tvertexBuffer[ i + 2 ] = vertex.z;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction generateUVs() {\n\n\t\t\tconst vertex = new Vector3();\n\n\t\t\tfor ( let i = 0; i < vertexBuffer.length; i += 3 ) {\n\n\t\t\t\tvertex.x = vertexBuffer[ i + 0 ];\n\t\t\t\tvertex.y = vertexBuffer[ i + 1 ];\n\t\t\t\tvertex.z = vertexBuffer[ i + 2 ];\n\n\t\t\t\tconst u = azimuth( vertex ) / 2 / Math.PI + 0.5;\n\t\t\t\tconst v = inclination( vertex ) / Math.PI + 0.5;\n\t\t\t\tuvBuffer.push( u, 1 - v );\n\n\t\t\t}\n\n\t\t\tcorrectUVs();\n\n\t\t\tcorrectSeam();\n\n\t\t}\n\n\t\tfunction correctSeam() {\n\n\t\t\t// handle case when face straddles the seam, see #3269\n\n\t\t\tfor ( let i = 0; i < uvBuffer.length; i += 6 ) {\n\n\t\t\t\t// uv data of a single face\n\n\t\t\t\tconst x0 = uvBuffer[ i + 0 ];\n\t\t\t\tconst x1 = uvBuffer[ i + 2 ];\n\t\t\t\tconst x2 = uvBuffer[ i + 4 ];\n\n\t\t\t\tconst max = Math.max( x0, x1, x2 );\n\t\t\t\tconst min = Math.min( x0, x1, x2 );\n\n\t\t\t\t// 0.9 is somewhat arbitrary\n\n\t\t\t\tif ( max > 0.9 && min < 0.1 ) {\n\n\t\t\t\t\tif ( x0 < 0.2 ) uvBuffer[ i + 0 ] += 1;\n\t\t\t\t\tif ( x1 < 0.2 ) uvBuffer[ i + 2 ] += 1;\n\t\t\t\t\tif ( x2 < 0.2 ) uvBuffer[ i + 4 ] += 1;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction pushVertex( vertex ) {\n\n\t\t\tvertexBuffer.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t\tfunction getVertexByIndex( index, vertex ) {\n\n\t\t\tconst stride = index * 3;\n\n\t\t\tvertex.x = vertices[ stride + 0 ];\n\t\t\tvertex.y = vertices[ stride + 1 ];\n\t\t\tvertex.z = vertices[ stride + 2 ];\n\n\t\t}\n\n\t\tfunction correctUVs() {\n\n\t\t\tconst a = new Vector3();\n\t\t\tconst b = new Vector3();\n\t\t\tconst c = new Vector3();\n\n\t\t\tconst centroid = new Vector3();\n\n\t\t\tconst uvA = new Vector2();\n\t\t\tconst uvB = new Vector2();\n\t\t\tconst uvC = new Vector2();\n\n\t\t\tfor ( let i = 0, j = 0; i < vertexBuffer.length; i += 9, j += 6 ) {\n\n\t\t\t\ta.set( vertexBuffer[ i + 0 ], vertexBuffer[ i + 1 ], vertexBuffer[ i + 2 ] );\n\t\t\t\tb.set( vertexBuffer[ i + 3 ], vertexBuffer[ i + 4 ], vertexBuffer[ i + 5 ] );\n\t\t\t\tc.set( vertexBuffer[ i + 6 ], vertexBuffer[ i + 7 ], vertexBuffer[ i + 8 ] );\n\n\t\t\t\tuvA.set( uvBuffer[ j + 0 ], uvBuffer[ j + 1 ] );\n\t\t\t\tuvB.set( uvBuffer[ j + 2 ], uvBuffer[ j + 3 ] );\n\t\t\t\tuvC.set( uvBuffer[ j + 4 ], uvBuffer[ j + 5 ] );\n\n\t\t\t\tcentroid.copy( a ).add( b ).add( c ).divideScalar( 3 );\n\n\t\t\t\tconst azi = azimuth( centroid );\n\n\t\t\t\tcorrectUV( uvA, j + 0, a, azi );\n\t\t\t\tcorrectUV( uvB, j + 2, b, azi );\n\t\t\t\tcorrectUV( uvC, j + 4, c, azi );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction correctUV( uv, stride, vector, azimuth ) {\n\n\t\t\tif ( ( azimuth < 0 ) && ( uv.x === 1 ) ) {\n\n\t\t\t\tuvBuffer[ stride ] = uv.x - 1;\n\n\t\t\t}\n\n\t\t\tif ( ( vector.x === 0 ) && ( vector.z === 0 ) ) {\n\n\t\t\t\tuvBuffer[ stride ] = azimuth / 2 / Math.PI + 0.5;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Angle around the Y axis, counter-clockwise when looking from above.\n\n\t\tfunction azimuth( vector ) {\n\n\t\t\treturn Math.atan2( vector.z, - vector.x );\n\n\t\t}\n\n\n\t\t// Angle above the XZ plane.\n\n\t\tfunction inclination( vector ) {\n\n\t\t\treturn Math.atan2( - vector.y, Math.sqrt( ( vector.x * vector.x ) + ( vector.z * vector.z ) ) );\n\n\t\t}\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new PolyhedronGeometry( data.vertices, data.indices, data.radius, data.details );\n\n\t}\n\n}\n\nclass DodecahedronGeometry extends PolyhedronGeometry {\n\n\tconstructor( radius = 1, detail = 0 ) {\n\n\t\tconst t = ( 1 + Math.sqrt( 5 ) ) / 2;\n\t\tconst r = 1 / t;\n\n\t\tconst vertices = [\n\n\t\t\t// (±1, ±1, ±1)\n\t\t\t- 1, - 1, - 1,\t- 1, - 1, 1,\n\t\t\t- 1, 1, - 1, - 1, 1, 1,\n\t\t\t1, - 1, - 1, 1, - 1, 1,\n\t\t\t1, 1, - 1, 1, 1, 1,\n\n\t\t\t// (0, ±1/φ, ±φ)\n\t\t\t0, - r, - t, 0, - r, t,\n\t\t\t0, r, - t, 0, r, t,\n\n\t\t\t// (±1/φ, ±φ, 0)\n\t\t\t- r, - t, 0, - r, t, 0,\n\t\t\tr, - t, 0, r, t, 0,\n\n\t\t\t// (±φ, 0, ±1/φ)\n\t\t\t- t, 0, - r, t, 0, - r,\n\t\t\t- t, 0, r, t, 0, r\n\t\t];\n\n\t\tconst indices = [\n\t\t\t3, 11, 7, \t3, 7, 15, \t3, 15, 13,\n\t\t\t7, 19, 17, \t7, 17, 6, \t7, 6, 15,\n\t\t\t17, 4, 8, \t17, 8, 10, \t17, 10, 6,\n\t\t\t8, 0, 16, \t8, 16, 2, \t8, 2, 10,\n\t\t\t0, 12, 1, \t0, 1, 18, \t0, 18, 16,\n\t\t\t6, 10, 2, \t6, 2, 13, \t6, 13, 15,\n\t\t\t2, 16, 18, \t2, 18, 3, \t2, 3, 13,\n\t\t\t18, 1, 9, \t18, 9, 11, \t18, 11, 3,\n\t\t\t4, 14, 12, \t4, 12, 0, \t4, 0, 8,\n\t\t\t11, 9, 5, \t11, 5, 19, \t11, 19, 7,\n\t\t\t19, 5, 14, \t19, 14, 4, \t19, 4, 17,\n\t\t\t1, 12, 14, \t1, 14, 5, \t1, 5, 9\n\t\t];\n\n\t\tsuper( vertices, indices, radius, detail );\n\n\t\tthis.type = 'DodecahedronGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new DodecahedronGeometry( data.radius, data.detail );\n\n\t}\n\n}\n\nconst _v0 = /*@__PURE__*/ new Vector3();\nconst _v1$1 = /*@__PURE__*/ new Vector3();\nconst _normal = /*@__PURE__*/ new Vector3();\nconst _triangle = /*@__PURE__*/ new Triangle();\n\nclass EdgesGeometry extends BufferGeometry {\n\n\tconstructor( geometry = null, thresholdAngle = 1 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'EdgesGeometry';\n\n\t\tthis.parameters = {\n\t\t\tgeometry: geometry,\n\t\t\tthresholdAngle: thresholdAngle\n\t\t};\n\n\t\tif ( geometry !== null ) {\n\n\t\t\tconst precisionPoints = 4;\n\t\t\tconst precision = Math.pow( 10, precisionPoints );\n\t\t\tconst thresholdDot = Math.cos( DEG2RAD * thresholdAngle );\n\n\t\t\tconst indexAttr = geometry.getIndex();\n\t\t\tconst positionAttr = geometry.getAttribute( 'position' );\n\t\t\tconst indexCount = indexAttr ? indexAttr.count : positionAttr.count;\n\n\t\t\tconst indexArr = [ 0, 0, 0 ];\n\t\t\tconst vertKeys = [ 'a', 'b', 'c' ];\n\t\t\tconst hashes = new Array( 3 );\n\n\t\t\tconst edgeData = {};\n\t\t\tconst vertices = [];\n\t\t\tfor ( let i = 0; i < indexCount; i += 3 ) {\n\n\t\t\t\tif ( indexAttr ) {\n\n\t\t\t\t\tindexArr[ 0 ] = indexAttr.getX( i );\n\t\t\t\t\tindexArr[ 1 ] = indexAttr.getX( i + 1 );\n\t\t\t\t\tindexArr[ 2 ] = indexAttr.getX( i + 2 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tindexArr[ 0 ] = i;\n\t\t\t\t\tindexArr[ 1 ] = i + 1;\n\t\t\t\t\tindexArr[ 2 ] = i + 2;\n\n\t\t\t\t}\n\n\t\t\t\tconst { a, b, c } = _triangle;\n\t\t\t\ta.fromBufferAttribute( positionAttr, indexArr[ 0 ] );\n\t\t\t\tb.fromBufferAttribute( positionAttr, indexArr[ 1 ] );\n\t\t\t\tc.fromBufferAttribute( positionAttr, indexArr[ 2 ] );\n\t\t\t\t_triangle.getNormal( _normal );\n\n\t\t\t\t// create hashes for the edge from the vertices\n\t\t\t\thashes[ 0 ] = `${ Math.round( a.x * precision ) },${ Math.round( a.y * precision ) },${ Math.round( a.z * precision ) }`;\n\t\t\t\thashes[ 1 ] = `${ Math.round( b.x * precision ) },${ Math.round( b.y * precision ) },${ Math.round( b.z * precision ) }`;\n\t\t\t\thashes[ 2 ] = `${ Math.round( c.x * precision ) },${ Math.round( c.y * precision ) },${ Math.round( c.z * precision ) }`;\n\n\t\t\t\t// skip degenerate triangles\n\t\t\t\tif ( hashes[ 0 ] === hashes[ 1 ] || hashes[ 1 ] === hashes[ 2 ] || hashes[ 2 ] === hashes[ 0 ] ) {\n\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\t// iterate over every edge\n\t\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t// get the first and next vertex making up the edge\n\t\t\t\t\tconst jNext = ( j + 1 ) % 3;\n\t\t\t\t\tconst vecHash0 = hashes[ j ];\n\t\t\t\t\tconst vecHash1 = hashes[ jNext ];\n\t\t\t\t\tconst v0 = _triangle[ vertKeys[ j ] ];\n\t\t\t\t\tconst v1 = _triangle[ vertKeys[ jNext ] ];\n\n\t\t\t\t\tconst hash = `${ vecHash0 }_${ vecHash1 }`;\n\t\t\t\t\tconst reverseHash = `${ vecHash1 }_${ vecHash0 }`;\n\n\t\t\t\t\tif ( reverseHash in edgeData && edgeData[ reverseHash ] ) {\n\n\t\t\t\t\t\t// if we found a sibling edge add it into the vertex array if\n\t\t\t\t\t\t// it meets the angle threshold and delete the edge from the map.\n\t\t\t\t\t\tif ( _normal.dot( edgeData[ reverseHash ].normal ) <= thresholdDot ) {\n\n\t\t\t\t\t\t\tvertices.push( v0.x, v0.y, v0.z );\n\t\t\t\t\t\t\tvertices.push( v1.x, v1.y, v1.z );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tedgeData[ reverseHash ] = null;\n\n\t\t\t\t\t} else if ( ! ( hash in edgeData ) ) {\n\n\t\t\t\t\t\t// if we've already got an edge here then skip adding a new one\n\t\t\t\t\t\tedgeData[ hash ] = {\n\n\t\t\t\t\t\t\tindex0: indexArr[ j ],\n\t\t\t\t\t\t\tindex1: indexArr[ jNext ],\n\t\t\t\t\t\t\tnormal: _normal.clone(),\n\n\t\t\t\t\t\t};\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// iterate over all remaining, unmatched edges and add them to the vertex array\n\t\t\tfor ( const key in edgeData ) {\n\n\t\t\t\tif ( edgeData[ key ] ) {\n\n\t\t\t\t\tconst { index0, index1 } = edgeData[ key ];\n\t\t\t\t\t_v0.fromBufferAttribute( positionAttr, index0 );\n\t\t\t\t\t_v1$1.fromBufferAttribute( positionAttr, index1 );\n\n\t\t\t\t\tvertices.push( _v0.x, _v0.y, _v0.z );\n\t\t\t\t\tvertices.push( _v1$1.x, _v1$1.y, _v1$1.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\n\t\t}\n\n\t}\n\n}\n\nclass Shape extends Path {\n\n\tconstructor( points ) {\n\n\t\tsuper( points );\n\n\t\tthis.uuid = generateUUID();\n\n\t\tthis.type = 'Shape';\n\n\t\tthis.holes = [];\n\n\t}\n\n\tgetPointsHoles( divisions ) {\n\n\t\tconst holesPts = [];\n\n\t\tfor ( let i = 0, l = this.holes.length; i < l; i ++ ) {\n\n\t\t\tholesPts[ i ] = this.holes[ i ].getPoints( divisions );\n\n\t\t}\n\n\t\treturn holesPts;\n\n\t}\n\n\t// get points of shape and holes (keypoints based on segments parameter)\n\n\textractPoints( divisions ) {\n\n\t\treturn {\n\n\t\t\tshape: this.getPoints( divisions ),\n\t\t\tholes: this.getPointsHoles( divisions )\n\n\t\t};\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.holes = [];\n\n\t\tfor ( let i = 0, l = source.holes.length; i < l; i ++ ) {\n\n\t\t\tconst hole = source.holes[ i ];\n\n\t\t\tthis.holes.push( hole.clone() );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.holes = [];\n\n\t\tfor ( let i = 0, l = this.holes.length; i < l; i ++ ) {\n\n\t\t\tconst hole = this.holes[ i ];\n\t\t\tdata.holes.push( hole.toJSON() );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.uuid = json.uuid;\n\t\tthis.holes = [];\n\n\t\tfor ( let i = 0, l = json.holes.length; i < l; i ++ ) {\n\n\t\t\tconst hole = json.holes[ i ];\n\t\t\tthis.holes.push( new Path().fromJSON( hole ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\n/**\n * Port from https://github.com/mapbox/earcut (v2.2.2)\n */\n\nconst Earcut = {\n\n\ttriangulate: function ( data, holeIndices, dim = 2 ) {\n\n\t\tconst hasHoles = holeIndices && holeIndices.length;\n\t\tconst outerLen = hasHoles ? holeIndices[ 0 ] * dim : data.length;\n\t\tlet outerNode = linkedList( data, 0, outerLen, dim, true );\n\t\tconst triangles = [];\n\n\t\tif ( ! outerNode || outerNode.next === outerNode.prev ) return triangles;\n\n\t\tlet minX, minY, maxX, maxY, x, y, invSize;\n\n\t\tif ( hasHoles ) outerNode = eliminateHoles( data, holeIndices, outerNode, dim );\n\n\t\t// if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n\t\tif ( data.length > 80 * dim ) {\n\n\t\t\tminX = maxX = data[ 0 ];\n\t\t\tminY = maxY = data[ 1 ];\n\n\t\t\tfor ( let i = dim; i < outerLen; i += dim ) {\n\n\t\t\t\tx = data[ i ];\n\t\t\t\ty = data[ i + 1 ];\n\t\t\t\tif ( x < minX ) minX = x;\n\t\t\t\tif ( y < minY ) minY = y;\n\t\t\t\tif ( x > maxX ) maxX = x;\n\t\t\t\tif ( y > maxY ) maxY = y;\n\n\t\t\t}\n\n\t\t\t// minX, minY and invSize are later used to transform coords into integers for z-order calculation\n\t\t\tinvSize = Math.max( maxX - minX, maxY - minY );\n\t\t\tinvSize = invSize !== 0 ? 1 / invSize : 0;\n\n\t\t}\n\n\t\tearcutLinked( outerNode, triangles, dim, minX, minY, invSize );\n\n\t\treturn triangles;\n\n\t}\n\n};\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList( data, start, end, dim, clockwise ) {\n\n\tlet i, last;\n\n\tif ( clockwise === ( signedArea( data, start, end, dim ) > 0 ) ) {\n\n\t\tfor ( i = start; i < end; i += dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\n\n\t} else {\n\n\t\tfor ( i = end - dim; i >= start; i -= dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\n\n\t}\n\n\tif ( last && equals( last, last.next ) ) {\n\n\t\tremoveNode( last );\n\t\tlast = last.next;\n\n\t}\n\n\treturn last;\n\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints( start, end ) {\n\n\tif ( ! start ) return start;\n\tif ( ! end ) end = start;\n\n\tlet p = start,\n\t\tagain;\n\tdo {\n\n\t\tagain = false;\n\n\t\tif ( ! p.steiner && ( equals( p, p.next ) || area( p.prev, p, p.next ) === 0 ) ) {\n\n\t\t\tremoveNode( p );\n\t\t\tp = end = p.prev;\n\t\t\tif ( p === p.next ) break;\n\t\t\tagain = true;\n\n\t\t} else {\n\n\t\t\tp = p.next;\n\n\t\t}\n\n\t} while ( again || p !== end );\n\n\treturn end;\n\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked( ear, triangles, dim, minX, minY, invSize, pass ) {\n\n\tif ( ! ear ) return;\n\n\t// interlink polygon nodes in z-order\n\tif ( ! pass && invSize ) indexCurve( ear, minX, minY, invSize );\n\n\tlet stop = ear,\n\t\tprev, next;\n\n\t// iterate through ears, slicing them one by one\n\twhile ( ear.prev !== ear.next ) {\n\n\t\tprev = ear.prev;\n\t\tnext = ear.next;\n\n\t\tif ( invSize ? isEarHashed( ear, minX, minY, invSize ) : isEar( ear ) ) {\n\n\t\t\t// cut off the triangle\n\t\t\ttriangles.push( prev.i / dim );\n\t\t\ttriangles.push( ear.i / dim );\n\t\t\ttriangles.push( next.i / dim );\n\n\t\t\tremoveNode( ear );\n\n\t\t\t// skipping the next vertex leads to less sliver triangles\n\t\t\tear = next.next;\n\t\t\tstop = next.next;\n\n\t\t\tcontinue;\n\n\t\t}\n\n\t\tear = next;\n\n\t\t// if we looped through the whole remaining polygon and can't find any more ears\n\t\tif ( ear === stop ) {\n\n\t\t\t// try filtering points and slicing again\n\t\t\tif ( ! pass ) {\n\n\t\t\t\tearcutLinked( filterPoints( ear ), triangles, dim, minX, minY, invSize, 1 );\n\n\t\t\t\t// if this didn't work, try curing all small self-intersections locally\n\n\t\t\t} else if ( pass === 1 ) {\n\n\t\t\t\tear = cureLocalIntersections( filterPoints( ear ), triangles, dim );\n\t\t\t\tearcutLinked( ear, triangles, dim, minX, minY, invSize, 2 );\n\n\t\t\t\t// as a last resort, try splitting the remaining polygon into two\n\n\t\t\t} else if ( pass === 2 ) {\n\n\t\t\t\tsplitEarcut( ear, triangles, dim, minX, minY, invSize );\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar( ear ) {\n\n\tconst a = ear.prev,\n\t\tb = ear,\n\t\tc = ear.next;\n\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\n\n\t// now make sure we don't have other points inside the potential ear\n\tlet p = ear.next.next;\n\n\twhile ( p !== ear.prev ) {\n\n\t\tif ( pointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.next;\n\n\t}\n\n\treturn true;\n\n}\n\nfunction isEarHashed( ear, minX, minY, invSize ) {\n\n\tconst a = ear.prev,\n\t\tb = ear,\n\t\tc = ear.next;\n\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\n\n\t// triangle bbox; min & max are calculated like this for speed\n\tconst minTX = a.x < b.x ? ( a.x < c.x ? a.x : c.x ) : ( b.x < c.x ? b.x : c.x ),\n\t\tminTY = a.y < b.y ? ( a.y < c.y ? a.y : c.y ) : ( b.y < c.y ? b.y : c.y ),\n\t\tmaxTX = a.x > b.x ? ( a.x > c.x ? a.x : c.x ) : ( b.x > c.x ? b.x : c.x ),\n\t\tmaxTY = a.y > b.y ? ( a.y > c.y ? a.y : c.y ) : ( b.y > c.y ? b.y : c.y );\n\n\t// z-order range for the current triangle bbox;\n\tconst minZ = zOrder( minTX, minTY, minX, minY, invSize ),\n\t\tmaxZ = zOrder( maxTX, maxTY, minX, minY, invSize );\n\n\tlet p = ear.prevZ,\n\t\tn = ear.nextZ;\n\n\t// look for points inside the triangle in both directions\n\twhile ( p && p.z >= minZ && n && n.z <= maxZ ) {\n\n\t\tif ( p !== ear.prev && p !== ear.next &&\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.prevZ;\n\n\t\tif ( n !== ear.prev && n !== ear.next &&\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y ) &&\n\t\t\tarea( n.prev, n, n.next ) >= 0 ) return false;\n\t\tn = n.nextZ;\n\n\t}\n\n\t// look for remaining points in decreasing z-order\n\twhile ( p && p.z >= minZ ) {\n\n\t\tif ( p !== ear.prev && p !== ear.next &&\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.prevZ;\n\n\t}\n\n\t// look for remaining points in increasing z-order\n\twhile ( n && n.z <= maxZ ) {\n\n\t\tif ( n !== ear.prev && n !== ear.next &&\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y ) &&\n\t\t\tarea( n.prev, n, n.next ) >= 0 ) return false;\n\t\tn = n.nextZ;\n\n\t}\n\n\treturn true;\n\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections( start, triangles, dim ) {\n\n\tlet p = start;\n\tdo {\n\n\t\tconst a = p.prev,\n\t\t\tb = p.next.next;\n\n\t\tif ( ! equals( a, b ) && intersects( a, p, p.next, b ) && locallyInside( a, b ) && locallyInside( b, a ) ) {\n\n\t\t\ttriangles.push( a.i / dim );\n\t\t\ttriangles.push( p.i / dim );\n\t\t\ttriangles.push( b.i / dim );\n\n\t\t\t// remove two nodes involved\n\t\t\tremoveNode( p );\n\t\t\tremoveNode( p.next );\n\n\t\t\tp = start = b;\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\treturn filterPoints( p );\n\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut( start, triangles, dim, minX, minY, invSize ) {\n\n\t// look for a valid diagonal that divides the polygon into two\n\tlet a = start;\n\tdo {\n\n\t\tlet b = a.next.next;\n\t\twhile ( b !== a.prev ) {\n\n\t\t\tif ( a.i !== b.i && isValidDiagonal( a, b ) ) {\n\n\t\t\t\t// split the polygon in two by the diagonal\n\t\t\t\tlet c = splitPolygon( a, b );\n\n\t\t\t\t// filter colinear points around the cuts\n\t\t\t\ta = filterPoints( a, a.next );\n\t\t\t\tc = filterPoints( c, c.next );\n\n\t\t\t\t// run earcut on each half\n\t\t\t\tearcutLinked( a, triangles, dim, minX, minY, invSize );\n\t\t\t\tearcutLinked( c, triangles, dim, minX, minY, invSize );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tb = b.next;\n\n\t\t}\n\n\t\ta = a.next;\n\n\t} while ( a !== start );\n\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles( data, holeIndices, outerNode, dim ) {\n\n\tconst queue = [];\n\tlet i, len, start, end, list;\n\n\tfor ( i = 0, len = holeIndices.length; i < len; i ++ ) {\n\n\t\tstart = holeIndices[ i ] * dim;\n\t\tend = i < len - 1 ? holeIndices[ i + 1 ] * dim : data.length;\n\t\tlist = linkedList( data, start, end, dim, false );\n\t\tif ( list === list.next ) list.steiner = true;\n\t\tqueue.push( getLeftmost( list ) );\n\n\t}\n\n\tqueue.sort( compareX );\n\n\t// process holes from left to right\n\tfor ( i = 0; i < queue.length; i ++ ) {\n\n\t\teliminateHole( queue[ i ], outerNode );\n\t\touterNode = filterPoints( outerNode, outerNode.next );\n\n\t}\n\n\treturn outerNode;\n\n}\n\nfunction compareX( a, b ) {\n\n\treturn a.x - b.x;\n\n}\n\n// find a bridge between vertices that connects hole with an outer ring and link it\nfunction eliminateHole( hole, outerNode ) {\n\n\touterNode = findHoleBridge( hole, outerNode );\n\tif ( outerNode ) {\n\n\t\tconst b = splitPolygon( outerNode, hole );\n\n\t\t// filter collinear points around the cuts\n\t\tfilterPoints( outerNode, outerNode.next );\n\t\tfilterPoints( b, b.next );\n\n\t}\n\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge( hole, outerNode ) {\n\n\tlet p = outerNode;\n\tconst hx = hole.x;\n\tconst hy = hole.y;\n\tlet qx = - Infinity, m;\n\n\t// find a segment intersected by a ray from the hole's leftmost point to the left;\n\t// segment's endpoint with lesser x will be potential connection point\n\tdo {\n\n\t\tif ( hy <= p.y && hy >= p.next.y && p.next.y !== p.y ) {\n\n\t\t\tconst x = p.x + ( hy - p.y ) * ( p.next.x - p.x ) / ( p.next.y - p.y );\n\t\t\tif ( x <= hx && x > qx ) {\n\n\t\t\t\tqx = x;\n\t\t\t\tif ( x === hx ) {\n\n\t\t\t\t\tif ( hy === p.y ) return p;\n\t\t\t\t\tif ( hy === p.next.y ) return p.next;\n\n\t\t\t\t}\n\n\t\t\t\tm = p.x < p.next.x ? p : p.next;\n\n\t\t\t}\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== outerNode );\n\n\tif ( ! m ) return null;\n\n\tif ( hx === qx ) return m; // hole touches outer segment; pick leftmost endpoint\n\n\t// look for points inside the triangle of hole point, segment intersection and endpoint;\n\t// if there are no points found, we have a valid connection;\n\t// otherwise choose the point of the minimum angle with the ray as connection point\n\n\tconst stop = m,\n\t\tmx = m.x,\n\t\tmy = m.y;\n\tlet tanMin = Infinity, tan;\n\n\tp = m;\n\n\tdo {\n\n\t\tif ( hx >= p.x && p.x >= mx && hx !== p.x &&\n\t\t\t\tpointInTriangle( hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y ) ) {\n\n\t\t\ttan = Math.abs( hy - p.y ) / ( hx - p.x ); // tangential\n\n\t\t\tif ( locallyInside( p, hole ) && ( tan < tanMin || ( tan === tanMin && ( p.x > m.x || ( p.x === m.x && sectorContainsSector( m, p ) ) ) ) ) ) {\n\n\t\t\t\tm = p;\n\t\t\t\ttanMin = tan;\n\n\t\t\t}\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== stop );\n\n\treturn m;\n\n}\n\n// whether sector in vertex m contains sector in vertex p in the same coordinates\nfunction sectorContainsSector( m, p ) {\n\n\treturn area( m.prev, m, p.prev ) < 0 && area( p.next, m, m.next ) < 0;\n\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve( start, minX, minY, invSize ) {\n\n\tlet p = start;\n\tdo {\n\n\t\tif ( p.z === null ) p.z = zOrder( p.x, p.y, minX, minY, invSize );\n\t\tp.prevZ = p.prev;\n\t\tp.nextZ = p.next;\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\tp.prevZ.nextZ = null;\n\tp.prevZ = null;\n\n\tsortLinked( p );\n\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked( list ) {\n\n\tlet i, p, q, e, tail, numMerges, pSize, qSize,\n\t\tinSize = 1;\n\n\tdo {\n\n\t\tp = list;\n\t\tlist = null;\n\t\ttail = null;\n\t\tnumMerges = 0;\n\n\t\twhile ( p ) {\n\n\t\t\tnumMerges ++;\n\t\t\tq = p;\n\t\t\tpSize = 0;\n\t\t\tfor ( i = 0; i < inSize; i ++ ) {\n\n\t\t\t\tpSize ++;\n\t\t\t\tq = q.nextZ;\n\t\t\t\tif ( ! q ) break;\n\n\t\t\t}\n\n\t\t\tqSize = inSize;\n\n\t\t\twhile ( pSize > 0 || ( qSize > 0 && q ) ) {\n\n\t\t\t\tif ( pSize !== 0 && ( qSize === 0 || ! q || p.z <= q.z ) ) {\n\n\t\t\t\t\te = p;\n\t\t\t\t\tp = p.nextZ;\n\t\t\t\t\tpSize --;\n\n\t\t\t\t} else {\n\n\t\t\t\t\te = q;\n\t\t\t\t\tq = q.nextZ;\n\t\t\t\t\tqSize --;\n\n\t\t\t\t}\n\n\t\t\t\tif ( tail ) tail.nextZ = e;\n\t\t\t\telse list = e;\n\n\t\t\t\te.prevZ = tail;\n\t\t\t\ttail = e;\n\n\t\t\t}\n\n\t\t\tp = q;\n\n\t\t}\n\n\t\ttail.nextZ = null;\n\t\tinSize *= 2;\n\n\t} while ( numMerges > 1 );\n\n\treturn list;\n\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder( x, y, minX, minY, invSize ) {\n\n\t// coords are transformed into non-negative 15-bit integer range\n\tx = 32767 * ( x - minX ) * invSize;\n\ty = 32767 * ( y - minY ) * invSize;\n\n\tx = ( x | ( x << 8 ) ) & 0x00FF00FF;\n\tx = ( x | ( x << 4 ) ) & 0x0F0F0F0F;\n\tx = ( x | ( x << 2 ) ) & 0x33333333;\n\tx = ( x | ( x << 1 ) ) & 0x55555555;\n\n\ty = ( y | ( y << 8 ) ) & 0x00FF00FF;\n\ty = ( y | ( y << 4 ) ) & 0x0F0F0F0F;\n\ty = ( y | ( y << 2 ) ) & 0x33333333;\n\ty = ( y | ( y << 1 ) ) & 0x55555555;\n\n\treturn x | ( y << 1 );\n\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost( start ) {\n\n\tlet p = start,\n\t\tleftmost = start;\n\tdo {\n\n\t\tif ( p.x < leftmost.x || ( p.x === leftmost.x && p.y < leftmost.y ) ) leftmost = p;\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\treturn leftmost;\n\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle( ax, ay, bx, by, cx, cy, px, py ) {\n\n\treturn ( cx - px ) * ( ay - py ) - ( ax - px ) * ( cy - py ) >= 0 &&\n\t\t\t( ax - px ) * ( by - py ) - ( bx - px ) * ( ay - py ) >= 0 &&\n\t\t\t( bx - px ) * ( cy - py ) - ( cx - px ) * ( by - py ) >= 0;\n\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal( a, b ) {\n\n\treturn a.next.i !== b.i && a.prev.i !== b.i && ! intersectsPolygon( a, b ) && // doesn't intersect other edges\n\t\t( locallyInside( a, b ) && locallyInside( b, a ) && middleInside( a, b ) && // locally visible\n\t\t( area( a.prev, a, b.prev ) || area( a, b.prev, b ) ) || // does not create opposite-facing sectors\n\t\tequals( a, b ) && area( a.prev, a, a.next ) > 0 && area( b.prev, b, b.next ) > 0 ); // special zero-length case\n\n}\n\n// signed area of a triangle\nfunction area( p, q, r ) {\n\n\treturn ( q.y - p.y ) * ( r.x - q.x ) - ( q.x - p.x ) * ( r.y - q.y );\n\n}\n\n// check if two points are equal\nfunction equals( p1, p2 ) {\n\n\treturn p1.x === p2.x && p1.y === p2.y;\n\n}\n\n// check if two segments intersect\nfunction intersects( p1, q1, p2, q2 ) {\n\n\tconst o1 = sign( area( p1, q1, p2 ) );\n\tconst o2 = sign( area( p1, q1, q2 ) );\n\tconst o3 = sign( area( p2, q2, p1 ) );\n\tconst o4 = sign( area( p2, q2, q1 ) );\n\n\tif ( o1 !== o2 && o3 !== o4 ) return true; // general case\n\n\tif ( o1 === 0 && onSegment( p1, p2, q1 ) ) return true; // p1, q1 and p2 are collinear and p2 lies on p1q1\n\tif ( o2 === 0 && onSegment( p1, q2, q1 ) ) return true; // p1, q1 and q2 are collinear and q2 lies on p1q1\n\tif ( o3 === 0 && onSegment( p2, p1, q2 ) ) return true; // p2, q2 and p1 are collinear and p1 lies on p2q2\n\tif ( o4 === 0 && onSegment( p2, q1, q2 ) ) return true; // p2, q2 and q1 are collinear and q1 lies on p2q2\n\n\treturn false;\n\n}\n\n// for collinear points p, q, r, check if point q lies on segment pr\nfunction onSegment( p, q, r ) {\n\n\treturn q.x <= Math.max( p.x, r.x ) && q.x >= Math.min( p.x, r.x ) && q.y <= Math.max( p.y, r.y ) && q.y >= Math.min( p.y, r.y );\n\n}\n\nfunction sign( num ) {\n\n\treturn num > 0 ? 1 : num < 0 ? - 1 : 0;\n\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon( a, b ) {\n\n\tlet p = a;\n\tdo {\n\n\t\tif ( p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n\t\t\t\tintersects( p, p.next, a, b ) ) return true;\n\t\tp = p.next;\n\n\t} while ( p !== a );\n\n\treturn false;\n\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside( a, b ) {\n\n\treturn area( a.prev, a, a.next ) < 0 ?\n\t\tarea( a, b, a.next ) >= 0 && area( a, a.prev, b ) >= 0 :\n\t\tarea( a, b, a.prev ) < 0 || area( a, a.next, b ) < 0;\n\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside( a, b ) {\n\n\tlet p = a,\n\t\tinside = false;\n\tconst px = ( a.x + b.x ) / 2,\n\t\tpy = ( a.y + b.y ) / 2;\n\tdo {\n\n\t\tif ( ( ( p.y > py ) !== ( p.next.y > py ) ) && p.next.y !== p.y &&\n\t\t\t\t( px < ( p.next.x - p.x ) * ( py - p.y ) / ( p.next.y - p.y ) + p.x ) )\n\t\t\tinside = ! inside;\n\t\tp = p.next;\n\n\t} while ( p !== a );\n\n\treturn inside;\n\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon( a, b ) {\n\n\tconst a2 = new Node( a.i, a.x, a.y ),\n\t\tb2 = new Node( b.i, b.x, b.y ),\n\t\tan = a.next,\n\t\tbp = b.prev;\n\n\ta.next = b;\n\tb.prev = a;\n\n\ta2.next = an;\n\tan.prev = a2;\n\n\tb2.next = a2;\n\ta2.prev = b2;\n\n\tbp.next = b2;\n\tb2.prev = bp;\n\n\treturn b2;\n\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode( i, x, y, last ) {\n\n\tconst p = new Node( i, x, y );\n\n\tif ( ! last ) {\n\n\t\tp.prev = p;\n\t\tp.next = p;\n\n\t} else {\n\n\t\tp.next = last.next;\n\t\tp.prev = last;\n\t\tlast.next.prev = p;\n\t\tlast.next = p;\n\n\t}\n\n\treturn p;\n\n}\n\nfunction removeNode( p ) {\n\n\tp.next.prev = p.prev;\n\tp.prev.next = p.next;\n\n\tif ( p.prevZ ) p.prevZ.nextZ = p.nextZ;\n\tif ( p.nextZ ) p.nextZ.prevZ = p.prevZ;\n\n}\n\nfunction Node( i, x, y ) {\n\n\t// vertex index in coordinates array\n\tthis.i = i;\n\n\t// vertex coordinates\n\tthis.x = x;\n\tthis.y = y;\n\n\t// previous and next vertex nodes in a polygon ring\n\tthis.prev = null;\n\tthis.next = null;\n\n\t// z-order curve value\n\tthis.z = null;\n\n\t// previous and next nodes in z-order\n\tthis.prevZ = null;\n\tthis.nextZ = null;\n\n\t// indicates whether this is a steiner point\n\tthis.steiner = false;\n\n}\n\nfunction signedArea( data, start, end, dim ) {\n\n\tlet sum = 0;\n\tfor ( let i = start, j = end - dim; i < end; i += dim ) {\n\n\t\tsum += ( data[ j ] - data[ i ] ) * ( data[ i + 1 ] + data[ j + 1 ] );\n\t\tj = i;\n\n\t}\n\n\treturn sum;\n\n}\n\nclass ShapeUtils {\n\n\t// calculate area of the contour polygon\n\n\tstatic area( contour ) {\n\n\t\tconst n = contour.length;\n\t\tlet a = 0.0;\n\n\t\tfor ( let p = n - 1, q = 0; q < n; p = q ++ ) {\n\n\t\t\ta += contour[ p ].x * contour[ q ].y - contour[ q ].x * contour[ p ].y;\n\n\t\t}\n\n\t\treturn a * 0.5;\n\n\t}\n\n\tstatic isClockWise( pts ) {\n\n\t\treturn ShapeUtils.area( pts ) < 0;\n\n\t}\n\n\tstatic triangulateShape( contour, holes ) {\n\n\t\tconst vertices = []; // flat array of vertices like [ x0,y0, x1,y1, x2,y2, ... ]\n\t\tconst holeIndices = []; // array of hole indices\n\t\tconst faces = []; // final array of vertex indices like [ [ a,b,d ], [ b,c,d ] ]\n\n\t\tremoveDupEndPts( contour );\n\t\taddContour( vertices, contour );\n\n\t\t//\n\n\t\tlet holeIndex = contour.length;\n\n\t\tholes.forEach( removeDupEndPts );\n\n\t\tfor ( let i = 0; i < holes.length; i ++ ) {\n\n\t\t\tholeIndices.push( holeIndex );\n\t\t\tholeIndex += holes[ i ].length;\n\t\t\taddContour( vertices, holes[ i ] );\n\n\t\t}\n\n\t\t//\n\n\t\tconst triangles = Earcut.triangulate( vertices, holeIndices );\n\n\t\t//\n\n\t\tfor ( let i = 0; i < triangles.length; i += 3 ) {\n\n\t\t\tfaces.push( triangles.slice( i, i + 3 ) );\n\n\t\t}\n\n\t\treturn faces;\n\n\t}\n\n}\n\nfunction removeDupEndPts( points ) {\n\n\tconst l = points.length;\n\n\tif ( l > 2 && points[ l - 1 ].equals( points[ 0 ] ) ) {\n\n\t\tpoints.pop();\n\n\t}\n\n}\n\nfunction addContour( vertices, contour ) {\n\n\tfor ( let i = 0; i < contour.length; i ++ ) {\n\n\t\tvertices.push( contour[ i ].x );\n\t\tvertices.push( contour[ i ].y );\n\n\t}\n\n}\n\n/**\n * Creates extruded geometry from a path shape.\n *\n * parameters = {\n *\n *  curveSegments: <int>, // number of points on the curves\n *  steps: <int>, // number of points for z-side extrusions / used for subdividing segments of extrude spline too\n *  depth: <float>, // Depth to extrude the shape\n *\n *  bevelEnabled: <bool>, // turn on bevel\n *  bevelThickness: <float>, // how deep into the original shape bevel goes\n *  bevelSize: <float>, // how far from shape outline (including bevelOffset) is bevel\n *  bevelOffset: <float>, // how far from shape outline does bevel start\n *  bevelSegments: <int>, // number of bevel layers\n *\n *  extrudePath: <THREE.Curve> // curve to extrude shape along\n *\n *  UVGenerator: <Object> // object that provides UV generator functions\n *\n * }\n */\n\nclass ExtrudeGeometry extends BufferGeometry {\n\n\tconstructor( shapes = new Shape( [ new Vector2( 0.5, 0.5 ), new Vector2( - 0.5, 0.5 ), new Vector2( - 0.5, - 0.5 ), new Vector2( 0.5, - 0.5 ) ] ), options = {} ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'ExtrudeGeometry';\n\n\t\tthis.parameters = {\n\t\t\tshapes: shapes,\n\t\t\toptions: options\n\t\t};\n\n\t\tshapes = Array.isArray( shapes ) ? shapes : [ shapes ];\n\n\t\tconst scope = this;\n\n\t\tconst verticesArray = [];\n\t\tconst uvArray = [];\n\n\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\tconst shape = shapes[ i ];\n\t\t\taddShape( shape );\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( verticesArray, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvArray, 2 ) );\n\n\t\tthis.computeVertexNormals();\n\n\t\t// functions\n\n\t\tfunction addShape( shape ) {\n\n\t\t\tconst placeholder = [];\n\n\t\t\t// options\n\n\t\t\tconst curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\n\t\t\tconst steps = options.steps !== undefined ? options.steps : 1;\n\t\t\tconst depth = options.depth !== undefined ? options.depth : 1;\n\n\t\t\tlet bevelEnabled = options.bevelEnabled !== undefined ? options.bevelEnabled : true;\n\t\t\tlet bevelThickness = options.bevelThickness !== undefined ? options.bevelThickness : 0.2;\n\t\t\tlet bevelSize = options.bevelSize !== undefined ? options.bevelSize : bevelThickness - 0.1;\n\t\t\tlet bevelOffset = options.bevelOffset !== undefined ? options.bevelOffset : 0;\n\t\t\tlet bevelSegments = options.bevelSegments !== undefined ? options.bevelSegments : 3;\n\n\t\t\tconst extrudePath = options.extrudePath;\n\n\t\t\tconst uvgen = options.UVGenerator !== undefined ? options.UVGenerator : WorldUVGenerator;\n\n\t\t\t//\n\n\t\t\tlet extrudePts, extrudeByPath = false;\n\t\t\tlet splineTube, binormal, normal, position2;\n\n\t\t\tif ( extrudePath ) {\n\n\t\t\t\textrudePts = extrudePath.getSpacedPoints( steps );\n\n\t\t\t\textrudeByPath = true;\n\t\t\t\tbevelEnabled = false; // bevels not supported for path extrusion\n\n\t\t\t\t// SETUP TNB variables\n\n\t\t\t\t// TODO1 - have a .isClosed in spline?\n\n\t\t\t\tsplineTube = extrudePath.computeFrenetFrames( steps, false );\n\n\t\t\t\t// console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);\n\n\t\t\t\tbinormal = new Vector3();\n\t\t\t\tnormal = new Vector3();\n\t\t\t\tposition2 = new Vector3();\n\n\t\t\t}\n\n\t\t\t// Safeguards if bevels are not enabled\n\n\t\t\tif ( ! bevelEnabled ) {\n\n\t\t\t\tbevelSegments = 0;\n\t\t\t\tbevelThickness = 0;\n\t\t\t\tbevelSize = 0;\n\t\t\t\tbevelOffset = 0;\n\n\t\t\t}\n\n\t\t\t// Variables initialization\n\n\t\t\tconst shapePoints = shape.extractPoints( curveSegments );\n\n\t\t\tlet vertices = shapePoints.shape;\n\t\t\tconst holes = shapePoints.holes;\n\n\t\t\tconst reverse = ! ShapeUtils.isClockWise( vertices );\n\n\t\t\tif ( reverse ) {\n\n\t\t\t\tvertices = vertices.reverse();\n\n\t\t\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe ...\n\n\t\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\t\tconst ahole = holes[ h ];\n\n\t\t\t\t\tif ( ShapeUtils.isClockWise( ahole ) ) {\n\n\t\t\t\t\t\tholes[ h ] = ahole.reverse();\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tconst faces = ShapeUtils.triangulateShape( vertices, holes );\n\n\t\t\t/* Vertices */\n\n\t\t\tconst contour = vertices; // vertices has all points but contour has only points of circumference\n\n\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tconst ahole = holes[ h ];\n\n\t\t\t\tvertices = vertices.concat( ahole );\n\n\t\t\t}\n\n\n\t\t\tfunction scalePt2( pt, vec, size ) {\n\n\t\t\t\tif ( ! vec ) console.error( 'THREE.ExtrudeGeometry: vec does not exist' );\n\n\t\t\t\treturn vec.clone().multiplyScalar( size ).add( pt );\n\n\t\t\t}\n\n\t\t\tconst vlen = vertices.length, flen = faces.length;\n\n\n\t\t\t// Find directions for point movement\n\n\n\t\t\tfunction getBevelVec( inPt, inPrev, inNext ) {\n\n\t\t\t\t// computes for inPt the corresponding point inPt' on a new contour\n\t\t\t\t//   shifted by 1 unit (length of normalized vector) to the left\n\t\t\t\t// if we walk along contour clockwise, this new contour is outside the old one\n\t\t\t\t//\n\t\t\t\t// inPt' is the intersection of the two lines parallel to the two\n\t\t\t\t//  adjacent edges of inPt at a distance of 1 unit on the left side.\n\n\t\t\t\tlet v_trans_x, v_trans_y, shrink_by; // resulting translation vector for inPt\n\n\t\t\t\t// good reading for geometry algorithms (here: line-line intersection)\n\t\t\t\t// http://geomalgorithms.com/a05-_intersect-1.html\n\n\t\t\t\tconst v_prev_x = inPt.x - inPrev.x,\n\t\t\t\t\tv_prev_y = inPt.y - inPrev.y;\n\t\t\t\tconst v_next_x = inNext.x - inPt.x,\n\t\t\t\t\tv_next_y = inNext.y - inPt.y;\n\n\t\t\t\tconst v_prev_lensq = ( v_prev_x * v_prev_x + v_prev_y * v_prev_y );\n\n\t\t\t\t// check for collinear edges\n\t\t\t\tconst collinear0 = ( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\n\t\t\t\tif ( Math.abs( collinear0 ) > Number.EPSILON ) {\n\n\t\t\t\t\t// not collinear\n\n\t\t\t\t\t// length of vectors for normalizing\n\n\t\t\t\t\tconst v_prev_len = Math.sqrt( v_prev_lensq );\n\t\t\t\t\tconst v_next_len = Math.sqrt( v_next_x * v_next_x + v_next_y * v_next_y );\n\n\t\t\t\t\t// shift adjacent points by unit vectors to the left\n\n\t\t\t\t\tconst ptPrevShift_x = ( inPrev.x - v_prev_y / v_prev_len );\n\t\t\t\t\tconst ptPrevShift_y = ( inPrev.y + v_prev_x / v_prev_len );\n\n\t\t\t\t\tconst ptNextShift_x = ( inNext.x - v_next_y / v_next_len );\n\t\t\t\t\tconst ptNextShift_y = ( inNext.y + v_next_x / v_next_len );\n\n\t\t\t\t\t// scaling factor for v_prev to intersection point\n\n\t\t\t\t\tconst sf = ( ( ptNextShift_x - ptPrevShift_x ) * v_next_y -\n\t\t\t\t\t\t\t( ptNextShift_y - ptPrevShift_y ) * v_next_x ) /\n\t\t\t\t\t\t( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\n\t\t\t\t\t// vector from inPt to intersection point\n\n\t\t\t\t\tv_trans_x = ( ptPrevShift_x + v_prev_x * sf - inPt.x );\n\t\t\t\t\tv_trans_y = ( ptPrevShift_y + v_prev_y * sf - inPt.y );\n\n\t\t\t\t\t// Don't normalize!, otherwise sharp corners become ugly\n\t\t\t\t\t//  but prevent crazy spikes\n\t\t\t\t\tconst v_trans_lensq = ( v_trans_x * v_trans_x + v_trans_y * v_trans_y );\n\t\t\t\t\tif ( v_trans_lensq <= 2 ) {\n\n\t\t\t\t\t\treturn new Vector2( v_trans_x, v_trans_y );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tshrink_by = Math.sqrt( v_trans_lensq / 2 );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// handle special case of collinear edges\n\n\t\t\t\t\tlet direction_eq = false; // assumes: opposite\n\n\t\t\t\t\tif ( v_prev_x > Number.EPSILON ) {\n\n\t\t\t\t\t\tif ( v_next_x > Number.EPSILON ) {\n\n\t\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( v_prev_x < - Number.EPSILON ) {\n\n\t\t\t\t\t\t\tif ( v_next_x < - Number.EPSILON ) {\n\n\t\t\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tif ( Math.sign( v_prev_y ) === Math.sign( v_next_y ) ) {\n\n\t\t\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( direction_eq ) {\n\n\t\t\t\t\t\t// console.log(\"Warning: lines are a straight sequence\");\n\t\t\t\t\t\tv_trans_x = - v_prev_y;\n\t\t\t\t\t\tv_trans_y = v_prev_x;\n\t\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// console.log(\"Warning: lines are a straight spike\");\n\t\t\t\t\t\tv_trans_x = v_prev_x;\n\t\t\t\t\t\tv_trans_y = v_prev_y;\n\t\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq / 2 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn new Vector2( v_trans_x / shrink_by, v_trans_y / shrink_by );\n\n\t\t\t}\n\n\n\t\t\tconst contourMovements = [];\n\n\t\t\tfor ( let i = 0, il = contour.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\t\t\tif ( j === il ) j = 0;\n\t\t\t\tif ( k === il ) k = 0;\n\n\t\t\t\t//  (j)---(i)---(k)\n\t\t\t\t// console.log('i,j,k', i, j , k)\n\n\t\t\t\tcontourMovements[ i ] = getBevelVec( contour[ i ], contour[ j ], contour[ k ] );\n\n\t\t\t}\n\n\t\t\tconst holesMovements = [];\n\t\t\tlet oneHoleMovements, verticesMovements = contourMovements.concat();\n\n\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tconst ahole = holes[ h ];\n\n\t\t\t\toneHoleMovements = [];\n\n\t\t\t\tfor ( let i = 0, il = ahole.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\t\t\t\tif ( j === il ) j = 0;\n\t\t\t\t\tif ( k === il ) k = 0;\n\n\t\t\t\t\t//  (j)---(i)---(k)\n\t\t\t\t\toneHoleMovements[ i ] = getBevelVec( ahole[ i ], ahole[ j ], ahole[ k ] );\n\n\t\t\t\t}\n\n\t\t\t\tholesMovements.push( oneHoleMovements );\n\t\t\t\tverticesMovements = verticesMovements.concat( oneHoleMovements );\n\n\t\t\t}\n\n\n\t\t\t// Loop bevelSegments, 1 for the front, 1 for the back\n\n\t\t\tfor ( let b = 0; b < bevelSegments; b ++ ) {\n\n\t\t\t\t//for ( b = bevelSegments; b > 0; b -- ) {\n\n\t\t\t\tconst t = b / bevelSegments;\n\t\t\t\tconst z = bevelThickness * Math.cos( t * Math.PI / 2 );\n\t\t\t\tconst bs = bevelSize * Math.sin( t * Math.PI / 2 ) + bevelOffset;\n\n\t\t\t\t// contract shape\n\n\t\t\t\tfor ( let i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst vert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\n\t\t\t\t\tv( vert.x, vert.y, - z );\n\n\t\t\t\t}\n\n\t\t\t\t// expand holes\n\n\t\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\t\tconst ahole = holes[ h ];\n\t\t\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\t\t\tfor ( let i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst vert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\t\t\tv( vert.x, vert.y, - z );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst bs = bevelSize + bevelOffset;\n\n\t\t\t// Back facing vertices\n\n\t\t\tfor ( let i = 0; i < vlen; i ++ ) {\n\n\t\t\t\tconst vert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\tv( vert.x, vert.y, 0 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );\n\n\t\t\t\t\tnormal.copy( splineTube.normals[ 0 ] ).multiplyScalar( vert.x );\n\t\t\t\t\tbinormal.copy( splineTube.binormals[ 0 ] ).multiplyScalar( vert.y );\n\n\t\t\t\t\tposition2.copy( extrudePts[ 0 ] ).add( normal ).add( binormal );\n\n\t\t\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Add stepped vertices...\n\t\t\t// Including front facing vertices\n\n\t\t\tfor ( let s = 1; s <= steps; s ++ ) {\n\n\t\t\t\tfor ( let i = 0; i < vlen; i ++ ) {\n\n\t\t\t\t\tconst vert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\t\tv( vert.x, vert.y, depth / steps * s );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );\n\n\t\t\t\t\t\tnormal.copy( splineTube.normals[ s ] ).multiplyScalar( vert.x );\n\t\t\t\t\t\tbinormal.copy( splineTube.binormals[ s ] ).multiplyScalar( vert.y );\n\n\t\t\t\t\t\tposition2.copy( extrudePts[ s ] ).add( normal ).add( binormal );\n\n\t\t\t\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\t// Add bevel segments planes\n\n\t\t\t//for ( b = 1; b <= bevelSegments; b ++ ) {\n\t\t\tfor ( let b = bevelSegments - 1; b >= 0; b -- ) {\n\n\t\t\t\tconst t = b / bevelSegments;\n\t\t\t\tconst z = bevelThickness * Math.cos( t * Math.PI / 2 );\n\t\t\t\tconst bs = bevelSize * Math.sin( t * Math.PI / 2 ) + bevelOffset;\n\n\t\t\t\t// contract shape\n\n\t\t\t\tfor ( let i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst vert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\t\t\t\t\tv( vert.x, vert.y, depth + z );\n\n\t\t\t\t}\n\n\t\t\t\t// expand holes\n\n\t\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\t\tconst ahole = holes[ h ];\n\t\t\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\t\t\tfor ( let i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst vert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\t\t\tv( vert.x, vert.y, depth + z );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tv( vert.x, vert.y + extrudePts[ steps - 1 ].y, extrudePts[ steps - 1 ].x + z );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t/* Faces */\n\n\t\t\t// Top and bottom faces\n\n\t\t\tbuildLidFaces();\n\n\t\t\t// Sides faces\n\n\t\t\tbuildSideFaces();\n\n\n\t\t\t/////  Internal functions\n\n\t\t\tfunction buildLidFaces() {\n\n\t\t\t\tconst start = verticesArray.length / 3;\n\n\t\t\t\tif ( bevelEnabled ) {\n\n\t\t\t\t\tlet layer = 0; // steps + 1\n\t\t\t\t\tlet offset = vlen * layer;\n\n\t\t\t\t\t// Bottom faces\n\n\t\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\t\tconst face = faces[ i ];\n\t\t\t\t\t\tf3( face[ 2 ] + offset, face[ 1 ] + offset, face[ 0 ] + offset );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tlayer = steps + bevelSegments * 2;\n\t\t\t\t\toffset = vlen * layer;\n\n\t\t\t\t\t// Top faces\n\n\t\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\t\tconst face = faces[ i ];\n\t\t\t\t\t\tf3( face[ 0 ] + offset, face[ 1 ] + offset, face[ 2 ] + offset );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Bottom faces\n\n\t\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\t\tconst face = faces[ i ];\n\t\t\t\t\t\tf3( face[ 2 ], face[ 1 ], face[ 0 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Top faces\n\n\t\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\t\tconst face = faces[ i ];\n\t\t\t\t\t\tf3( face[ 0 ] + vlen * steps, face[ 1 ] + vlen * steps, face[ 2 ] + vlen * steps );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tscope.addGroup( start, verticesArray.length / 3 - start, 0 );\n\n\t\t\t}\n\n\t\t\t// Create faces for the z-sides of the shape\n\n\t\t\tfunction buildSideFaces() {\n\n\t\t\t\tconst start = verticesArray.length / 3;\n\t\t\t\tlet layeroffset = 0;\n\t\t\t\tsidewalls( contour, layeroffset );\n\t\t\t\tlayeroffset += contour.length;\n\n\t\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\t\tconst ahole = holes[ h ];\n\t\t\t\t\tsidewalls( ahole, layeroffset );\n\n\t\t\t\t\t//, true\n\t\t\t\t\tlayeroffset += ahole.length;\n\n\t\t\t\t}\n\n\n\t\t\t\tscope.addGroup( start, verticesArray.length / 3 - start, 1 );\n\n\n\t\t\t}\n\n\t\t\tfunction sidewalls( contour, layeroffset ) {\n\n\t\t\t\tlet i = contour.length;\n\n\t\t\t\twhile ( -- i >= 0 ) {\n\n\t\t\t\t\tconst j = i;\n\t\t\t\t\tlet k = i - 1;\n\t\t\t\t\tif ( k < 0 ) k = contour.length - 1;\n\n\t\t\t\t\t//console.log('b', i,j, i-1, k,vertices.length);\n\n\t\t\t\t\tfor ( let s = 0, sl = ( steps + bevelSegments * 2 ); s < sl; s ++ ) {\n\n\t\t\t\t\t\tconst slen1 = vlen * s;\n\t\t\t\t\t\tconst slen2 = vlen * ( s + 1 );\n\n\t\t\t\t\t\tconst a = layeroffset + j + slen1,\n\t\t\t\t\t\t\tb = layeroffset + k + slen1,\n\t\t\t\t\t\t\tc = layeroffset + k + slen2,\n\t\t\t\t\t\t\td = layeroffset + j + slen2;\n\n\t\t\t\t\t\tf4( a, b, c, d );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction v( x, y, z ) {\n\n\t\t\t\tplaceholder.push( x );\n\t\t\t\tplaceholder.push( y );\n\t\t\t\tplaceholder.push( z );\n\n\t\t\t}\n\n\n\t\t\tfunction f3( a, b, c ) {\n\n\t\t\t\taddVertex( a );\n\t\t\t\taddVertex( b );\n\t\t\t\taddVertex( c );\n\n\t\t\t\tconst nextIndex = verticesArray.length / 3;\n\t\t\t\tconst uvs = uvgen.generateTopUV( scope, verticesArray, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\n\n\t\t\t\taddUV( uvs[ 0 ] );\n\t\t\t\taddUV( uvs[ 1 ] );\n\t\t\t\taddUV( uvs[ 2 ] );\n\n\t\t\t}\n\n\t\t\tfunction f4( a, b, c, d ) {\n\n\t\t\t\taddVertex( a );\n\t\t\t\taddVertex( b );\n\t\t\t\taddVertex( d );\n\n\t\t\t\taddVertex( b );\n\t\t\t\taddVertex( c );\n\t\t\t\taddVertex( d );\n\n\n\t\t\t\tconst nextIndex = verticesArray.length / 3;\n\t\t\t\tconst uvs = uvgen.generateSideWallUV( scope, verticesArray, nextIndex - 6, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\n\n\t\t\t\taddUV( uvs[ 0 ] );\n\t\t\t\taddUV( uvs[ 1 ] );\n\t\t\t\taddUV( uvs[ 3 ] );\n\n\t\t\t\taddUV( uvs[ 1 ] );\n\t\t\t\taddUV( uvs[ 2 ] );\n\t\t\t\taddUV( uvs[ 3 ] );\n\n\t\t\t}\n\n\t\t\tfunction addVertex( index ) {\n\n\t\t\t\tverticesArray.push( placeholder[ index * 3 + 0 ] );\n\t\t\t\tverticesArray.push( placeholder[ index * 3 + 1 ] );\n\t\t\t\tverticesArray.push( placeholder[ index * 3 + 2 ] );\n\n\t\t\t}\n\n\n\t\t\tfunction addUV( vector2 ) {\n\n\t\t\t\tuvArray.push( vector2.x );\n\t\t\t\tuvArray.push( vector2.y );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tconst shapes = this.parameters.shapes;\n\t\tconst options = this.parameters.options;\n\n\t\treturn toJSON$1( shapes, options, data );\n\n\t}\n\n\tstatic fromJSON( data, shapes ) {\n\n\t\tconst geometryShapes = [];\n\n\t\tfor ( let j = 0, jl = data.shapes.length; j < jl; j ++ ) {\n\n\t\t\tconst shape = shapes[ data.shapes[ j ] ];\n\n\t\t\tgeometryShapes.push( shape );\n\n\t\t}\n\n\t\tconst extrudePath = data.options.extrudePath;\n\n\t\tif ( extrudePath !== undefined ) {\n\n\t\t\tdata.options.extrudePath = new Curves[ extrudePath.type ]().fromJSON( extrudePath );\n\n\t\t}\n\n\t\treturn new ExtrudeGeometry( geometryShapes, data.options );\n\n\t}\n\n}\n\nconst WorldUVGenerator = {\n\n\tgenerateTopUV: function ( geometry, vertices, indexA, indexB, indexC ) {\n\n\t\tconst a_x = vertices[ indexA * 3 ];\n\t\tconst a_y = vertices[ indexA * 3 + 1 ];\n\t\tconst b_x = vertices[ indexB * 3 ];\n\t\tconst b_y = vertices[ indexB * 3 + 1 ];\n\t\tconst c_x = vertices[ indexC * 3 ];\n\t\tconst c_y = vertices[ indexC * 3 + 1 ];\n\n\t\treturn [\n\t\t\tnew Vector2( a_x, a_y ),\n\t\t\tnew Vector2( b_x, b_y ),\n\t\t\tnew Vector2( c_x, c_y )\n\t\t];\n\n\t},\n\n\tgenerateSideWallUV: function ( geometry, vertices, indexA, indexB, indexC, indexD ) {\n\n\t\tconst a_x = vertices[ indexA * 3 ];\n\t\tconst a_y = vertices[ indexA * 3 + 1 ];\n\t\tconst a_z = vertices[ indexA * 3 + 2 ];\n\t\tconst b_x = vertices[ indexB * 3 ];\n\t\tconst b_y = vertices[ indexB * 3 + 1 ];\n\t\tconst b_z = vertices[ indexB * 3 + 2 ];\n\t\tconst c_x = vertices[ indexC * 3 ];\n\t\tconst c_y = vertices[ indexC * 3 + 1 ];\n\t\tconst c_z = vertices[ indexC * 3 + 2 ];\n\t\tconst d_x = vertices[ indexD * 3 ];\n\t\tconst d_y = vertices[ indexD * 3 + 1 ];\n\t\tconst d_z = vertices[ indexD * 3 + 2 ];\n\n\t\tif ( Math.abs( a_y - b_y ) < Math.abs( a_x - b_x ) ) {\n\n\t\t\treturn [\n\t\t\t\tnew Vector2( a_x, 1 - a_z ),\n\t\t\t\tnew Vector2( b_x, 1 - b_z ),\n\t\t\t\tnew Vector2( c_x, 1 - c_z ),\n\t\t\t\tnew Vector2( d_x, 1 - d_z )\n\t\t\t];\n\n\t\t} else {\n\n\t\t\treturn [\n\t\t\t\tnew Vector2( a_y, 1 - a_z ),\n\t\t\t\tnew Vector2( b_y, 1 - b_z ),\n\t\t\t\tnew Vector2( c_y, 1 - c_z ),\n\t\t\t\tnew Vector2( d_y, 1 - d_z )\n\t\t\t];\n\n\t\t}\n\n\t}\n\n};\n\nfunction toJSON$1( shapes, options, data ) {\n\n\tdata.shapes = [];\n\n\tif ( Array.isArray( shapes ) ) {\n\n\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\tconst shape = shapes[ i ];\n\n\t\t\tdata.shapes.push( shape.uuid );\n\n\t\t}\n\n\t} else {\n\n\t\tdata.shapes.push( shapes.uuid );\n\n\t}\n\n\tdata.options = Object.assign( {}, options );\n\n\tif ( options.extrudePath !== undefined ) data.options.extrudePath = options.extrudePath.toJSON();\n\n\treturn data;\n\n}\n\nclass IcosahedronGeometry extends PolyhedronGeometry {\n\n\tconstructor( radius = 1, detail = 0 ) {\n\n\t\tconst t = ( 1 + Math.sqrt( 5 ) ) / 2;\n\n\t\tconst vertices = [\n\t\t\t- 1, t, 0, \t1, t, 0, \t- 1, - t, 0, \t1, - t, 0,\n\t\t\t0, - 1, t, \t0, 1, t,\t0, - 1, - t, \t0, 1, - t,\n\t\t\tt, 0, - 1, \tt, 0, 1, \t- t, 0, - 1, \t- t, 0, 1\n\t\t];\n\n\t\tconst indices = [\n\t\t\t0, 11, 5, \t0, 5, 1, \t0, 1, 7, \t0, 7, 10, \t0, 10, 11,\n\t\t\t1, 5, 9, \t5, 11, 4,\t11, 10, 2,\t10, 7, 6,\t7, 1, 8,\n\t\t\t3, 9, 4, \t3, 4, 2,\t3, 2, 6,\t3, 6, 8,\t3, 8, 9,\n\t\t\t4, 9, 5, \t2, 4, 11,\t6, 2, 10,\t8, 6, 7,\t9, 8, 1\n\t\t];\n\n\t\tsuper( vertices, indices, radius, detail );\n\n\t\tthis.type = 'IcosahedronGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new IcosahedronGeometry( data.radius, data.detail );\n\n\t}\n\n}\n\nclass OctahedronGeometry extends PolyhedronGeometry {\n\n\tconstructor( radius = 1, detail = 0 ) {\n\n\t\tconst vertices = [\n\t\t\t1, 0, 0, \t- 1, 0, 0,\t0, 1, 0,\n\t\t\t0, - 1, 0, \t0, 0, 1,\t0, 0, - 1\n\t\t];\n\n\t\tconst indices = [\n\t\t\t0, 2, 4,\t0, 4, 3,\t0, 3, 5,\n\t\t\t0, 5, 2,\t1, 2, 5,\t1, 5, 3,\n\t\t\t1, 3, 4,\t1, 4, 2\n\t\t];\n\n\t\tsuper( vertices, indices, radius, detail );\n\n\t\tthis.type = 'OctahedronGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new OctahedronGeometry( data.radius, data.detail );\n\n\t}\n\n}\n\nclass RingGeometry extends BufferGeometry {\n\n\tconstructor( innerRadius = 0.5, outerRadius = 1, thetaSegments = 8, phiSegments = 1, thetaStart = 0, thetaLength = Math.PI * 2 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'RingGeometry';\n\n\t\tthis.parameters = {\n\t\t\tinnerRadius: innerRadius,\n\t\t\touterRadius: outerRadius,\n\t\t\tthetaSegments: thetaSegments,\n\t\t\tphiSegments: phiSegments,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t\tthetaSegments = Math.max( 3, thetaSegments );\n\t\tphiSegments = Math.max( 1, phiSegments );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// some helper variables\n\n\t\tlet radius = innerRadius;\n\t\tconst radiusStep = ( ( outerRadius - innerRadius ) / phiSegments );\n\t\tconst vertex = new Vector3();\n\t\tconst uv = new Vector2();\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( let j = 0; j <= phiSegments; j ++ ) {\n\n\t\t\tfor ( let i = 0; i <= thetaSegments; i ++ ) {\n\n\t\t\t\t// values are generate from the inside of the ring to the outside\n\n\t\t\t\tconst segment = thetaStart + i / thetaSegments * thetaLength;\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = radius * Math.cos( segment );\n\t\t\t\tvertex.y = radius * Math.sin( segment );\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\t\t// uv\n\n\t\t\t\tuv.x = ( vertex.x / outerRadius + 1 ) / 2;\n\t\t\t\tuv.y = ( vertex.y / outerRadius + 1 ) / 2;\n\n\t\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\t}\n\n\t\t\t// increase the radius for next row of vertices\n\n\t\t\tradius += radiusStep;\n\n\t\t}\n\n\t\t// indices\n\n\t\tfor ( let j = 0; j < phiSegments; j ++ ) {\n\n\t\t\tconst thetaSegmentLevel = j * ( thetaSegments + 1 );\n\n\t\t\tfor ( let i = 0; i < thetaSegments; i ++ ) {\n\n\t\t\t\tconst segment = i + thetaSegmentLevel;\n\n\t\t\t\tconst a = segment;\n\t\t\t\tconst b = segment + thetaSegments + 1;\n\t\t\t\tconst c = segment + thetaSegments + 2;\n\t\t\t\tconst d = segment + 1;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new RingGeometry( data.innerRadius, data.outerRadius, data.thetaSegments, data.phiSegments, data.thetaStart, data.thetaLength );\n\n\t}\n\n}\n\nclass ShapeGeometry extends BufferGeometry {\n\n\tconstructor( shapes = new Shape( [ new Vector2( 0, 0.5 ), new Vector2( - 0.5, - 0.5 ), new Vector2( 0.5, - 0.5 ) ] ), curveSegments = 12 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'ShapeGeometry';\n\n\t\tthis.parameters = {\n\t\t\tshapes: shapes,\n\t\t\tcurveSegments: curveSegments\n\t\t};\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tlet groupStart = 0;\n\t\tlet groupCount = 0;\n\n\t\t// allow single and array values for \"shapes\" parameter\n\n\t\tif ( Array.isArray( shapes ) === false ) {\n\n\t\t\taddShape( shapes );\n\n\t\t} else {\n\n\t\t\tfor ( let i = 0; i < shapes.length; i ++ ) {\n\n\t\t\t\taddShape( shapes[ i ] );\n\n\t\t\t\tthis.addGroup( groupStart, groupCount, i ); // enables MultiMaterial support\n\n\t\t\t\tgroupStart += groupCount;\n\t\t\t\tgroupCount = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\n\t\t// helper functions\n\n\t\tfunction addShape( shape ) {\n\n\t\t\tconst indexOffset = vertices.length / 3;\n\t\t\tconst points = shape.extractPoints( curveSegments );\n\n\t\t\tlet shapeVertices = points.shape;\n\t\t\tconst shapeHoles = points.holes;\n\n\t\t\t// check direction of vertices\n\n\t\t\tif ( ShapeUtils.isClockWise( shapeVertices ) === false ) {\n\n\t\t\t\tshapeVertices = shapeVertices.reverse();\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0, l = shapeHoles.length; i < l; i ++ ) {\n\n\t\t\t\tconst shapeHole = shapeHoles[ i ];\n\n\t\t\t\tif ( ShapeUtils.isClockWise( shapeHole ) === true ) {\n\n\t\t\t\t\tshapeHoles[ i ] = shapeHole.reverse();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst faces = ShapeUtils.triangulateShape( shapeVertices, shapeHoles );\n\n\t\t\t// join vertices of inner and outer paths to a single array\n\n\t\t\tfor ( let i = 0, l = shapeHoles.length; i < l; i ++ ) {\n\n\t\t\t\tconst shapeHole = shapeHoles[ i ];\n\t\t\t\tshapeVertices = shapeVertices.concat( shapeHole );\n\n\t\t\t}\n\n\t\t\t// vertices, normals, uvs\n\n\t\t\tfor ( let i = 0, l = shapeVertices.length; i < l; i ++ ) {\n\n\t\t\t\tconst vertex = shapeVertices[ i ];\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, 0 );\n\t\t\t\tnormals.push( 0, 0, 1 );\n\t\t\t\tuvs.push( vertex.x, vertex.y ); // world uvs\n\n\t\t\t}\n\n\t\t\t// incides\n\n\t\t\tfor ( let i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\t\tconst face = faces[ i ];\n\n\t\t\t\tconst a = face[ 0 ] + indexOffset;\n\t\t\t\tconst b = face[ 1 ] + indexOffset;\n\t\t\t\tconst c = face[ 2 ] + indexOffset;\n\n\t\t\t\tindices.push( a, b, c );\n\t\t\t\tgroupCount += 3;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tconst shapes = this.parameters.shapes;\n\n\t\treturn toJSON( shapes, data );\n\n\t}\n\n\tstatic fromJSON( data, shapes ) {\n\n\t\tconst geometryShapes = [];\n\n\t\tfor ( let j = 0, jl = data.shapes.length; j < jl; j ++ ) {\n\n\t\t\tconst shape = shapes[ data.shapes[ j ] ];\n\n\t\t\tgeometryShapes.push( shape );\n\n\t\t}\n\n\t\treturn new ShapeGeometry( geometryShapes, data.curveSegments );\n\n\t}\n\n}\n\nfunction toJSON( shapes, data ) {\n\n\tdata.shapes = [];\n\n\tif ( Array.isArray( shapes ) ) {\n\n\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\tconst shape = shapes[ i ];\n\n\t\t\tdata.shapes.push( shape.uuid );\n\n\t\t}\n\n\t} else {\n\n\t\tdata.shapes.push( shapes.uuid );\n\n\t}\n\n\treturn data;\n\n}\n\nclass SphereGeometry extends BufferGeometry {\n\n\tconstructor( radius = 1, widthSegments = 32, heightSegments = 16, phiStart = 0, phiLength = Math.PI * 2, thetaStart = 0, thetaLength = Math.PI ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'SphereGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\tphiStart: phiStart,\n\t\t\tphiLength: phiLength,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t\twidthSegments = Math.max( 3, Math.floor( widthSegments ) );\n\t\theightSegments = Math.max( 2, Math.floor( heightSegments ) );\n\n\t\tconst thetaEnd = Math.min( thetaStart + thetaLength, Math.PI );\n\n\t\tlet index = 0;\n\t\tconst grid = [];\n\n\t\tconst vertex = new Vector3();\n\t\tconst normal = new Vector3();\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( let iy = 0; iy <= heightSegments; iy ++ ) {\n\n\t\t\tconst verticesRow = [];\n\n\t\t\tconst v = iy / heightSegments;\n\n\t\t\t// special case for the poles\n\n\t\t\tlet uOffset = 0;\n\n\t\t\tif ( iy == 0 && thetaStart == 0 ) {\n\n\t\t\t\tuOffset = 0.5 / widthSegments;\n\n\t\t\t} else if ( iy == heightSegments && thetaEnd == Math.PI ) {\n\n\t\t\t\tuOffset = - 0.5 / widthSegments;\n\n\t\t\t}\n\n\t\t\tfor ( let ix = 0; ix <= widthSegments; ix ++ ) {\n\n\t\t\t\tconst u = ix / widthSegments;\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = - radius * Math.cos( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n\t\t\t\tvertex.y = radius * Math.cos( thetaStart + v * thetaLength );\n\t\t\t\tvertex.z = radius * Math.sin( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormal.copy( vertex ).normalize();\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t// uv\n\n\t\t\t\tuvs.push( u + uOffset, 1 - v );\n\n\t\t\t\tverticesRow.push( index ++ );\n\n\t\t\t}\n\n\t\t\tgrid.push( verticesRow );\n\n\t\t}\n\n\t\t// indices\n\n\t\tfor ( let iy = 0; iy < heightSegments; iy ++ ) {\n\n\t\t\tfor ( let ix = 0; ix < widthSegments; ix ++ ) {\n\n\t\t\t\tconst a = grid[ iy ][ ix + 1 ];\n\t\t\t\tconst b = grid[ iy ][ ix ];\n\t\t\t\tconst c = grid[ iy + 1 ][ ix ];\n\t\t\t\tconst d = grid[ iy + 1 ][ ix + 1 ];\n\n\t\t\t\tif ( iy !== 0 || thetaStart > 0 ) indices.push( a, b, d );\n\t\t\t\tif ( iy !== heightSegments - 1 || thetaEnd < Math.PI ) indices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new SphereGeometry( data.radius, data.widthSegments, data.heightSegments, data.phiStart, data.phiLength, data.thetaStart, data.thetaLength );\n\n\t}\n\n}\n\nclass TetrahedronGeometry extends PolyhedronGeometry {\n\n\tconstructor( radius = 1, detail = 0 ) {\n\n\t\tconst vertices = [\n\t\t\t1, 1, 1, \t- 1, - 1, 1, \t- 1, 1, - 1, \t1, - 1, - 1\n\t\t];\n\n\t\tconst indices = [\n\t\t\t2, 1, 0, \t0, 3, 2,\t1, 3, 0,\t2, 3, 1\n\t\t];\n\n\t\tsuper( vertices, indices, radius, detail );\n\n\t\tthis.type = 'TetrahedronGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new TetrahedronGeometry( data.radius, data.detail );\n\n\t}\n\n}\n\nclass TorusGeometry extends BufferGeometry {\n\n\tconstructor( radius = 1, tube = 0.4, radialSegments = 8, tubularSegments = 6, arc = Math.PI * 2 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'TorusGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\ttube: tube,\n\t\t\tradialSegments: radialSegments,\n\t\t\ttubularSegments: tubularSegments,\n\t\t\tarc: arc\n\t\t};\n\n\t\tradialSegments = Math.floor( radialSegments );\n\t\ttubularSegments = Math.floor( tubularSegments );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tconst center = new Vector3();\n\t\tconst vertex = new Vector3();\n\t\tconst normal = new Vector3();\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( let j = 0; j <= radialSegments; j ++ ) {\n\n\t\t\tfor ( let i = 0; i <= tubularSegments; i ++ ) {\n\n\t\t\t\tconst u = i / tubularSegments * arc;\n\t\t\t\tconst v = j / radialSegments * Math.PI * 2;\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = ( radius + tube * Math.cos( v ) ) * Math.cos( u );\n\t\t\t\tvertex.y = ( radius + tube * Math.cos( v ) ) * Math.sin( u );\n\t\t\t\tvertex.z = tube * Math.sin( v );\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal\n\n\t\t\t\tcenter.x = radius * Math.cos( u );\n\t\t\t\tcenter.y = radius * Math.sin( u );\n\t\t\t\tnormal.subVectors( vertex, center ).normalize();\n\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t// uv\n\n\t\t\t\tuvs.push( i / tubularSegments );\n\t\t\t\tuvs.push( j / radialSegments );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// generate indices\n\n\t\tfor ( let j = 1; j <= radialSegments; j ++ ) {\n\n\t\t\tfor ( let i = 1; i <= tubularSegments; i ++ ) {\n\n\t\t\t\t// indices\n\n\t\t\t\tconst a = ( tubularSegments + 1 ) * j + i - 1;\n\t\t\t\tconst b = ( tubularSegments + 1 ) * ( j - 1 ) + i - 1;\n\t\t\t\tconst c = ( tubularSegments + 1 ) * ( j - 1 ) + i;\n\t\t\t\tconst d = ( tubularSegments + 1 ) * j + i;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new TorusGeometry( data.radius, data.tube, data.radialSegments, data.tubularSegments, data.arc );\n\n\t}\n\n}\n\nclass TorusKnotGeometry extends BufferGeometry {\n\n\tconstructor( radius = 1, tube = 0.4, tubularSegments = 64, radialSegments = 8, p = 2, q = 3 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'TorusKnotGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\ttube: tube,\n\t\t\ttubularSegments: tubularSegments,\n\t\t\tradialSegments: radialSegments,\n\t\t\tp: p,\n\t\t\tq: q\n\t\t};\n\n\t\ttubularSegments = Math.floor( tubularSegments );\n\t\tradialSegments = Math.floor( radialSegments );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tconst vertex = new Vector3();\n\t\tconst normal = new Vector3();\n\n\t\tconst P1 = new Vector3();\n\t\tconst P2 = new Vector3();\n\n\t\tconst B = new Vector3();\n\t\tconst T = new Vector3();\n\t\tconst N = new Vector3();\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( let i = 0; i <= tubularSegments; ++ i ) {\n\n\t\t\t// the radian \"u\" is used to calculate the position on the torus curve of the current tubular segment\n\n\t\t\tconst u = i / tubularSegments * p * Math.PI * 2;\n\n\t\t\t// now we calculate two points. P1 is our current position on the curve, P2 is a little farther ahead.\n\t\t\t// these points are used to create a special \"coordinate space\", which is necessary to calculate the correct vertex positions\n\n\t\t\tcalculatePositionOnCurve( u, p, q, radius, P1 );\n\t\t\tcalculatePositionOnCurve( u + 0.01, p, q, radius, P2 );\n\n\t\t\t// calculate orthonormal basis\n\n\t\t\tT.subVectors( P2, P1 );\n\t\t\tN.addVectors( P2, P1 );\n\t\t\tB.crossVectors( T, N );\n\t\t\tN.crossVectors( B, T );\n\n\t\t\t// normalize B, N. T can be ignored, we don't use it\n\n\t\t\tB.normalize();\n\t\t\tN.normalize();\n\n\t\t\tfor ( let j = 0; j <= radialSegments; ++ j ) {\n\n\t\t\t\t// now calculate the vertices. they are nothing more than an extrusion of the torus curve.\n\t\t\t\t// because we extrude a shape in the xy-plane, there is no need to calculate a z-value.\n\n\t\t\t\tconst v = j / radialSegments * Math.PI * 2;\n\t\t\t\tconst cx = - tube * Math.cos( v );\n\t\t\t\tconst cy = tube * Math.sin( v );\n\n\t\t\t\t// now calculate the final vertex position.\n\t\t\t\t// first we orient the extrusion with our basis vectors, then we add it to the current position on the curve\n\n\t\t\t\tvertex.x = P1.x + ( cx * N.x + cy * B.x );\n\t\t\t\tvertex.y = P1.y + ( cx * N.y + cy * B.y );\n\t\t\t\tvertex.z = P1.z + ( cx * N.z + cy * B.z );\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal (P1 is always the center/origin of the extrusion, thus we can use it to calculate the normal)\n\n\t\t\t\tnormal.subVectors( vertex, P1 ).normalize();\n\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t// uv\n\n\t\t\t\tuvs.push( i / tubularSegments );\n\t\t\t\tuvs.push( j / radialSegments );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// generate indices\n\n\t\tfor ( let j = 1; j <= tubularSegments; j ++ ) {\n\n\t\t\tfor ( let i = 1; i <= radialSegments; i ++ ) {\n\n\t\t\t\t// indices\n\n\t\t\t\tconst a = ( radialSegments + 1 ) * ( j - 1 ) + ( i - 1 );\n\t\t\t\tconst b = ( radialSegments + 1 ) * j + ( i - 1 );\n\t\t\t\tconst c = ( radialSegments + 1 ) * j + i;\n\t\t\t\tconst d = ( radialSegments + 1 ) * ( j - 1 ) + i;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\t// this function calculates the current position on the torus curve\n\n\t\tfunction calculatePositionOnCurve( u, p, q, radius, position ) {\n\n\t\t\tconst cu = Math.cos( u );\n\t\t\tconst su = Math.sin( u );\n\t\t\tconst quOverP = q / p * u;\n\t\t\tconst cs = Math.cos( quOverP );\n\n\t\t\tposition.x = radius * ( 2 + cs ) * 0.5 * cu;\n\t\t\tposition.y = radius * ( 2 + cs ) * su * 0.5;\n\t\t\tposition.z = radius * Math.sin( quOverP ) * 0.5;\n\n\t\t}\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new TorusKnotGeometry( data.radius, data.tube, data.tubularSegments, data.radialSegments, data.p, data.q );\n\n\t}\n\n}\n\nclass TubeGeometry extends BufferGeometry {\n\n\tconstructor( path = new QuadraticBezierCurve3( new Vector3( - 1, - 1, 0 ), new Vector3( - 1, 1, 0 ), new Vector3( 1, 1, 0 ) ), tubularSegments = 64, radius = 1, radialSegments = 8, closed = false ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'TubeGeometry';\n\n\t\tthis.parameters = {\n\t\t\tpath: path,\n\t\t\ttubularSegments: tubularSegments,\n\t\t\tradius: radius,\n\t\t\tradialSegments: radialSegments,\n\t\t\tclosed: closed\n\t\t};\n\n\t\tconst frames = path.computeFrenetFrames( tubularSegments, closed );\n\n\t\t// expose internals\n\n\t\tthis.tangents = frames.tangents;\n\t\tthis.normals = frames.normals;\n\t\tthis.binormals = frames.binormals;\n\n\t\t// helper variables\n\n\t\tconst vertex = new Vector3();\n\t\tconst normal = new Vector3();\n\t\tconst uv = new Vector2();\n\t\tlet P = new Vector3();\n\n\t\t// buffer\n\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\t\tconst indices = [];\n\n\t\t// create buffer data\n\n\t\tgenerateBufferData();\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\t// functions\n\n\t\tfunction generateBufferData() {\n\n\t\t\tfor ( let i = 0; i < tubularSegments; i ++ ) {\n\n\t\t\t\tgenerateSegment( i );\n\n\t\t\t}\n\n\t\t\t// if the geometry is not closed, generate the last row of vertices and normals\n\t\t\t// at the regular position on the given path\n\t\t\t//\n\t\t\t// if the geometry is closed, duplicate the first row of vertices and normals (uvs will differ)\n\n\t\t\tgenerateSegment( ( closed === false ) ? tubularSegments : 0 );\n\n\t\t\t// uvs are generated in a separate function.\n\t\t\t// this makes it easy compute correct values for closed geometries\n\n\t\t\tgenerateUVs();\n\n\t\t\t// finally create faces\n\n\t\t\tgenerateIndices();\n\n\t\t}\n\n\t\tfunction generateSegment( i ) {\n\n\t\t\t// we use getPointAt to sample evenly distributed points from the given path\n\n\t\t\tP = path.getPointAt( i / tubularSegments, P );\n\n\t\t\t// retrieve corresponding normal and binormal\n\n\t\t\tconst N = frames.normals[ i ];\n\t\t\tconst B = frames.binormals[ i ];\n\n\t\t\t// generate normals and vertices for the current segment\n\n\t\t\tfor ( let j = 0; j <= radialSegments; j ++ ) {\n\n\t\t\t\tconst v = j / radialSegments * Math.PI * 2;\n\n\t\t\t\tconst sin = Math.sin( v );\n\t\t\t\tconst cos = - Math.cos( v );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormal.x = ( cos * N.x + sin * B.x );\n\t\t\t\tnormal.y = ( cos * N.y + sin * B.y );\n\t\t\t\tnormal.z = ( cos * N.z + sin * B.z );\n\t\t\t\tnormal.normalize();\n\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = P.x + radius * normal.x;\n\t\t\t\tvertex.y = P.y + radius * normal.y;\n\t\t\t\tvertex.z = P.z + radius * normal.z;\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction generateIndices() {\n\n\t\t\tfor ( let j = 1; j <= tubularSegments; j ++ ) {\n\n\t\t\t\tfor ( let i = 1; i <= radialSegments; i ++ ) {\n\n\t\t\t\t\tconst a = ( radialSegments + 1 ) * ( j - 1 ) + ( i - 1 );\n\t\t\t\t\tconst b = ( radialSegments + 1 ) * j + ( i - 1 );\n\t\t\t\t\tconst c = ( radialSegments + 1 ) * j + i;\n\t\t\t\t\tconst d = ( radialSegments + 1 ) * ( j - 1 ) + i;\n\n\t\t\t\t\t// faces\n\n\t\t\t\t\tindices.push( a, b, d );\n\t\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction generateUVs() {\n\n\t\t\tfor ( let i = 0; i <= tubularSegments; i ++ ) {\n\n\t\t\t\tfor ( let j = 0; j <= radialSegments; j ++ ) {\n\n\t\t\t\t\tuv.x = i / tubularSegments;\n\t\t\t\t\tuv.y = j / radialSegments;\n\n\t\t\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.path = this.parameters.path.toJSON();\n\n\t\treturn data;\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\t// This only works for built-in curves (e.g. CatmullRomCurve3).\n\t\t// User defined curves or instances of CurvePath will not be deserialized.\n\t\treturn new TubeGeometry(\n\t\t\tnew Curves[ data.path.type ]().fromJSON( data.path ),\n\t\t\tdata.tubularSegments,\n\t\t\tdata.radius,\n\t\t\tdata.radialSegments,\n\t\t\tdata.closed\n\t\t);\n\n\t}\n\n}\n\nclass WireframeGeometry extends BufferGeometry {\n\n\tconstructor( geometry = null ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'WireframeGeometry';\n\n\t\tthis.parameters = {\n\t\t\tgeometry: geometry\n\t\t};\n\n\t\tif ( geometry !== null ) {\n\n\t\t\t// buffer\n\n\t\t\tconst vertices = [];\n\t\t\tconst edges = new Set();\n\n\t\t\t// helper variables\n\n\t\t\tconst start = new Vector3();\n\t\t\tconst end = new Vector3();\n\n\t\t\tif ( geometry.index !== null ) {\n\n\t\t\t\t// indexed BufferGeometry\n\n\t\t\t\tconst position = geometry.attributes.position;\n\t\t\t\tconst indices = geometry.index;\n\t\t\t\tlet groups = geometry.groups;\n\n\t\t\t\tif ( groups.length === 0 ) {\n\n\t\t\t\t\tgroups = [ { start: 0, count: indices.count, materialIndex: 0 } ];\n\n\t\t\t\t}\n\n\t\t\t\t// create a data structure that contains all edges without duplicates\n\n\t\t\t\tfor ( let o = 0, ol = groups.length; o < ol; ++ o ) {\n\n\t\t\t\t\tconst group = groups[ o ];\n\n\t\t\t\t\tconst groupStart = group.start;\n\t\t\t\t\tconst groupCount = group.count;\n\n\t\t\t\t\tfor ( let i = groupStart, l = ( groupStart + groupCount ); i < l; i += 3 ) {\n\n\t\t\t\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t\t\tconst index1 = indices.getX( i + j );\n\t\t\t\t\t\t\tconst index2 = indices.getX( i + ( j + 1 ) % 3 );\n\n\t\t\t\t\t\t\tstart.fromBufferAttribute( position, index1 );\n\t\t\t\t\t\t\tend.fromBufferAttribute( position, index2 );\n\n\t\t\t\t\t\t\tif ( isUniqueEdge( start, end, edges ) === true ) {\n\n\t\t\t\t\t\t\t\tvertices.push( start.x, start.y, start.z );\n\t\t\t\t\t\t\t\tvertices.push( end.x, end.y, end.z );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed BufferGeometry\n\n\t\t\t\tconst position = geometry.attributes.position;\n\n\t\t\t\tfor ( let i = 0, l = ( position.count / 3 ); i < l; i ++ ) {\n\n\t\t\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t\t// three edges per triangle, an edge is represented as (index1, index2)\n\t\t\t\t\t\t// e.g. the first triangle has the following edges: (0,1),(1,2),(2,0)\n\n\t\t\t\t\t\tconst index1 = 3 * i + j;\n\t\t\t\t\t\tconst index2 = 3 * i + ( ( j + 1 ) % 3 );\n\n\t\t\t\t\t\tstart.fromBufferAttribute( position, index1 );\n\t\t\t\t\t\tend.fromBufferAttribute( position, index2 );\n\n\t\t\t\t\t\tif ( isUniqueEdge( start, end, edges ) === true ) {\n\n\t\t\t\t\t\t\tvertices.push( start.x, start.y, start.z );\n\t\t\t\t\t\t\tvertices.push( end.x, end.y, end.z );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// build geometry\n\n\t\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\n\t\t}\n\n\t}\n\n}\n\nfunction isUniqueEdge( start, end, edges ) {\n\n\tconst hash1 = `${start.x},${start.y},${start.z}-${end.x},${end.y},${end.z}`;\n\tconst hash2 = `${end.x},${end.y},${end.z}-${start.x},${start.y},${start.z}`; // coincident edge\n\n\tif ( edges.has( hash1 ) === true || edges.has( hash2 ) === true ) {\n\n\t\treturn false;\n\n\t} else {\n\n\t\tedges.add( hash1 );\n\t\tedges.add( hash2 );\n\t\treturn true;\n\n\t}\n\n}\n\nvar Geometries = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tBoxGeometry: BoxGeometry,\n\tCapsuleGeometry: CapsuleGeometry,\n\tCircleGeometry: CircleGeometry,\n\tConeGeometry: ConeGeometry,\n\tCylinderGeometry: CylinderGeometry,\n\tDodecahedronGeometry: DodecahedronGeometry,\n\tEdgesGeometry: EdgesGeometry,\n\tExtrudeGeometry: ExtrudeGeometry,\n\tIcosahedronGeometry: IcosahedronGeometry,\n\tLatheGeometry: LatheGeometry,\n\tOctahedronGeometry: OctahedronGeometry,\n\tPlaneGeometry: PlaneGeometry,\n\tPolyhedronGeometry: PolyhedronGeometry,\n\tRingGeometry: RingGeometry,\n\tShapeGeometry: ShapeGeometry,\n\tSphereGeometry: SphereGeometry,\n\tTetrahedronGeometry: TetrahedronGeometry,\n\tTorusGeometry: TorusGeometry,\n\tTorusKnotGeometry: TorusKnotGeometry,\n\tTubeGeometry: TubeGeometry,\n\tWireframeGeometry: WireframeGeometry\n});\n\nclass ShadowMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isShadowMaterial = true;\n\n\t\tthis.type = 'ShadowMaterial';\n\n\t\tthis.color = new Color( 0x000000 );\n\t\tthis.transparent = true;\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass RawShaderMaterial extends ShaderMaterial {\n\n\tconstructor( parameters ) {\n\n\t\tsuper( parameters );\n\n\t\tthis.isRawShaderMaterial = true;\n\n\t\tthis.type = 'RawShaderMaterial';\n\n\t}\n\n}\n\nclass MeshStandardMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshStandardMaterial = true;\n\n\t\tthis.defines = { 'STANDARD': '' };\n\n\t\tthis.type = 'MeshStandardMaterial';\n\n\t\tthis.color = new Color( 0xffffff ); // diffuse\n\t\tthis.roughness = 1.0;\n\t\tthis.metalness = 0.0;\n\n\t\tthis.map = null;\n\n\t\tthis.lightMap = null;\n\t\tthis.lightMapIntensity = 1.0;\n\n\t\tthis.aoMap = null;\n\t\tthis.aoMapIntensity = 1.0;\n\n\t\tthis.emissive = new Color( 0x000000 );\n\t\tthis.emissiveIntensity = 1.0;\n\t\tthis.emissiveMap = null;\n\n\t\tthis.bumpMap = null;\n\t\tthis.bumpScale = 1;\n\n\t\tthis.normalMap = null;\n\t\tthis.normalMapType = TangentSpaceNormalMap;\n\t\tthis.normalScale = new Vector2( 1, 1 );\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.roughnessMap = null;\n\n\t\tthis.metalnessMap = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.envMap = null;\n\t\tthis.envMapIntensity = 1.0;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\t\tthis.wireframeLinecap = 'round';\n\t\tthis.wireframeLinejoin = 'round';\n\n\t\tthis.flatShading = false;\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.defines = { 'STANDARD': '' };\n\n\t\tthis.color.copy( source.color );\n\t\tthis.roughness = source.roughness;\n\t\tthis.metalness = source.metalness;\n\n\t\tthis.map = source.map;\n\n\t\tthis.lightMap = source.lightMap;\n\t\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\t\tthis.aoMap = source.aoMap;\n\t\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\t\tthis.emissive.copy( source.emissive );\n\t\tthis.emissiveMap = source.emissiveMap;\n\t\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\t\tthis.bumpMap = source.bumpMap;\n\t\tthis.bumpScale = source.bumpScale;\n\n\t\tthis.normalMap = source.normalMap;\n\t\tthis.normalMapType = source.normalMapType;\n\t\tthis.normalScale.copy( source.normalScale );\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.roughnessMap = source.roughnessMap;\n\n\t\tthis.metalnessMap = source.metalnessMap;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.envMap = source.envMap;\n\t\tthis.envMapIntensity = source.envMapIntensity;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\t\tthis.flatShading = source.flatShading;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass MeshPhysicalMaterial extends MeshStandardMaterial {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshPhysicalMaterial = true;\n\n\t\tthis.defines = {\n\n\t\t\t'STANDARD': '',\n\t\t\t'PHYSICAL': ''\n\n\t\t};\n\n\t\tthis.type = 'MeshPhysicalMaterial';\n\n\t\tthis.clearcoatMap = null;\n\t\tthis.clearcoatRoughness = 0.0;\n\t\tthis.clearcoatRoughnessMap = null;\n\t\tthis.clearcoatNormalScale = new Vector2( 1, 1 );\n\t\tthis.clearcoatNormalMap = null;\n\n\t\tthis.ior = 1.5;\n\n\t\tObject.defineProperty( this, 'reflectivity', {\n\t\t\tget: function () {\n\n\t\t\t\treturn ( clamp( 2.5 * ( this.ior - 1 ) / ( this.ior + 1 ), 0, 1 ) );\n\n\t\t\t},\n\t\t\tset: function ( reflectivity ) {\n\n\t\t\t\tthis.ior = ( 1 + 0.4 * reflectivity ) / ( 1 - 0.4 * reflectivity );\n\n\t\t\t}\n\t\t} );\n\n\t\tthis.iridescenceMap = null;\n\t\tthis.iridescenceIOR = 1.3;\n\t\tthis.iridescenceThicknessRange = [ 100, 400 ];\n\t\tthis.iridescenceThicknessMap = null;\n\n\t\tthis.sheenColor = new Color( 0x000000 );\n\t\tthis.sheenColorMap = null;\n\t\tthis.sheenRoughness = 1.0;\n\t\tthis.sheenRoughnessMap = null;\n\n\t\tthis.transmissionMap = null;\n\n\t\tthis.thickness = 0;\n\t\tthis.thicknessMap = null;\n\t\tthis.attenuationDistance = Infinity;\n\t\tthis.attenuationColor = new Color( 1, 1, 1 );\n\n\t\tthis.specularIntensity = 1.0;\n\t\tthis.specularIntensityMap = null;\n\t\tthis.specularColor = new Color( 1, 1, 1 );\n\t\tthis.specularColorMap = null;\n\n\t\tthis._sheen = 0.0;\n\t\tthis._clearcoat = 0;\n\t\tthis._iridescence = 0;\n\t\tthis._transmission = 0;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tget sheen() {\n\n\t\treturn this._sheen;\n\n\t}\n\n\tset sheen( value ) {\n\n\t\tif ( this._sheen > 0 !== value > 0 ) {\n\n\t\t\tthis.version ++;\n\n\t\t}\n\n\t\tthis._sheen = value;\n\n\t}\n\n\tget clearcoat() {\n\n\t\treturn this._clearcoat;\n\n\t}\n\n\tset clearcoat( value ) {\n\n\t\tif ( this._clearcoat > 0 !== value > 0 ) {\n\n\t\t\tthis.version ++;\n\n\t\t}\n\n\t\tthis._clearcoat = value;\n\n\t}\n\n\tget iridescence() {\n\n\t\treturn this._iridescence;\n\n\t}\n\n\tset iridescence( value ) {\n\n\t\tif ( this._iridescence > 0 !== value > 0 ) {\n\n\t\t\tthis.version ++;\n\n\t\t}\n\n\t\tthis._iridescence = value;\n\n\t}\n\n\tget transmission() {\n\n\t\treturn this._transmission;\n\n\t}\n\n\tset transmission( value ) {\n\n\t\tif ( this._transmission > 0 !== value > 0 ) {\n\n\t\t\tthis.version ++;\n\n\t\t}\n\n\t\tthis._transmission = value;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.defines = {\n\n\t\t\t'STANDARD': '',\n\t\t\t'PHYSICAL': ''\n\n\t\t};\n\n\t\tthis.clearcoat = source.clearcoat;\n\t\tthis.clearcoatMap = source.clearcoatMap;\n\t\tthis.clearcoatRoughness = source.clearcoatRoughness;\n\t\tthis.clearcoatRoughnessMap = source.clearcoatRoughnessMap;\n\t\tthis.clearcoatNormalMap = source.clearcoatNormalMap;\n\t\tthis.clearcoatNormalScale.copy( source.clearcoatNormalScale );\n\n\t\tthis.ior = source.ior;\n\n\t\tthis.iridescence = source.iridescence;\n\t\tthis.iridescenceMap = source.iridescenceMap;\n\t\tthis.iridescenceIOR = source.iridescenceIOR;\n\t\tthis.iridescenceThicknessRange = [ ...source.iridescenceThicknessRange ];\n\t\tthis.iridescenceThicknessMap = source.iridescenceThicknessMap;\n\n\t\tthis.sheen = source.sheen;\n\t\tthis.sheenColor.copy( source.sheenColor );\n\t\tthis.sheenColorMap = source.sheenColorMap;\n\t\tthis.sheenRoughness = source.sheenRoughness;\n\t\tthis.sheenRoughnessMap = source.sheenRoughnessMap;\n\n\t\tthis.transmission = source.transmission;\n\t\tthis.transmissionMap = source.transmissionMap;\n\n\t\tthis.thickness = source.thickness;\n\t\tthis.thicknessMap = source.thicknessMap;\n\t\tthis.attenuationDistance = source.attenuationDistance;\n\t\tthis.attenuationColor.copy( source.attenuationColor );\n\n\t\tthis.specularIntensity = source.specularIntensity;\n\t\tthis.specularIntensityMap = source.specularIntensityMap;\n\t\tthis.specularColor.copy( source.specularColor );\n\t\tthis.specularColorMap = source.specularColorMap;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass MeshPhongMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshPhongMaterial = true;\n\n\t\tthis.type = 'MeshPhongMaterial';\n\n\t\tthis.color = new Color( 0xffffff ); // diffuse\n\t\tthis.specular = new Color( 0x111111 );\n\t\tthis.shininess = 30;\n\n\t\tthis.map = null;\n\n\t\tthis.lightMap = null;\n\t\tthis.lightMapIntensity = 1.0;\n\n\t\tthis.aoMap = null;\n\t\tthis.aoMapIntensity = 1.0;\n\n\t\tthis.emissive = new Color( 0x000000 );\n\t\tthis.emissiveIntensity = 1.0;\n\t\tthis.emissiveMap = null;\n\n\t\tthis.bumpMap = null;\n\t\tthis.bumpScale = 1;\n\n\t\tthis.normalMap = null;\n\t\tthis.normalMapType = TangentSpaceNormalMap;\n\t\tthis.normalScale = new Vector2( 1, 1 );\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.specularMap = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.envMap = null;\n\t\tthis.combine = MultiplyOperation;\n\t\tthis.reflectivity = 1;\n\t\tthis.refractionRatio = 0.98;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\t\tthis.wireframeLinecap = 'round';\n\t\tthis.wireframeLinejoin = 'round';\n\n\t\tthis.flatShading = false;\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\t\tthis.specular.copy( source.specular );\n\t\tthis.shininess = source.shininess;\n\n\t\tthis.map = source.map;\n\n\t\tthis.lightMap = source.lightMap;\n\t\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\t\tthis.aoMap = source.aoMap;\n\t\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\t\tthis.emissive.copy( source.emissive );\n\t\tthis.emissiveMap = source.emissiveMap;\n\t\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\t\tthis.bumpMap = source.bumpMap;\n\t\tthis.bumpScale = source.bumpScale;\n\n\t\tthis.normalMap = source.normalMap;\n\t\tthis.normalMapType = source.normalMapType;\n\t\tthis.normalScale.copy( source.normalScale );\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.specularMap = source.specularMap;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.envMap = source.envMap;\n\t\tthis.combine = source.combine;\n\t\tthis.reflectivity = source.reflectivity;\n\t\tthis.refractionRatio = source.refractionRatio;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\t\tthis.flatShading = source.flatShading;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass MeshToonMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshToonMaterial = true;\n\n\t\tthis.defines = { 'TOON': '' };\n\n\t\tthis.type = 'MeshToonMaterial';\n\n\t\tthis.color = new Color( 0xffffff );\n\n\t\tthis.map = null;\n\t\tthis.gradientMap = null;\n\n\t\tthis.lightMap = null;\n\t\tthis.lightMapIntensity = 1.0;\n\n\t\tthis.aoMap = null;\n\t\tthis.aoMapIntensity = 1.0;\n\n\t\tthis.emissive = new Color( 0x000000 );\n\t\tthis.emissiveIntensity = 1.0;\n\t\tthis.emissiveMap = null;\n\n\t\tthis.bumpMap = null;\n\t\tthis.bumpScale = 1;\n\n\t\tthis.normalMap = null;\n\t\tthis.normalMapType = TangentSpaceNormalMap;\n\t\tthis.normalScale = new Vector2( 1, 1 );\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\t\tthis.wireframeLinecap = 'round';\n\t\tthis.wireframeLinejoin = 'round';\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.map = source.map;\n\t\tthis.gradientMap = source.gradientMap;\n\n\t\tthis.lightMap = source.lightMap;\n\t\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\t\tthis.aoMap = source.aoMap;\n\t\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\t\tthis.emissive.copy( source.emissive );\n\t\tthis.emissiveMap = source.emissiveMap;\n\t\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\t\tthis.bumpMap = source.bumpMap;\n\t\tthis.bumpScale = source.bumpScale;\n\n\t\tthis.normalMap = source.normalMap;\n\t\tthis.normalMapType = source.normalMapType;\n\t\tthis.normalScale.copy( source.normalScale );\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass MeshNormalMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshNormalMaterial = true;\n\n\t\tthis.type = 'MeshNormalMaterial';\n\n\t\tthis.bumpMap = null;\n\t\tthis.bumpScale = 1;\n\n\t\tthis.normalMap = null;\n\t\tthis.normalMapType = TangentSpaceNormalMap;\n\t\tthis.normalScale = new Vector2( 1, 1 );\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\n\t\tthis.flatShading = false;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.bumpMap = source.bumpMap;\n\t\tthis.bumpScale = source.bumpScale;\n\n\t\tthis.normalMap = source.normalMap;\n\t\tthis.normalMapType = source.normalMapType;\n\t\tthis.normalScale.copy( source.normalScale );\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\t\tthis.flatShading = source.flatShading;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass MeshLambertMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshLambertMaterial = true;\n\n\t\tthis.type = 'MeshLambertMaterial';\n\n\t\tthis.color = new Color( 0xffffff ); // diffuse\n\n\t\tthis.map = null;\n\n\t\tthis.lightMap = null;\n\t\tthis.lightMapIntensity = 1.0;\n\n\t\tthis.aoMap = null;\n\t\tthis.aoMapIntensity = 1.0;\n\n\t\tthis.emissive = new Color( 0x000000 );\n\t\tthis.emissiveIntensity = 1.0;\n\t\tthis.emissiveMap = null;\n\n\t\tthis.bumpMap = null;\n\t\tthis.bumpScale = 1;\n\n\t\tthis.normalMap = null;\n\t\tthis.normalMapType = TangentSpaceNormalMap;\n\t\tthis.normalScale = new Vector2( 1, 1 );\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.specularMap = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.envMap = null;\n\t\tthis.combine = MultiplyOperation;\n\t\tthis.reflectivity = 1;\n\t\tthis.refractionRatio = 0.98;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\t\tthis.wireframeLinecap = 'round';\n\t\tthis.wireframeLinejoin = 'round';\n\n\t\tthis.flatShading = false;\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.map = source.map;\n\n\t\tthis.lightMap = source.lightMap;\n\t\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\t\tthis.aoMap = source.aoMap;\n\t\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\t\tthis.emissive.copy( source.emissive );\n\t\tthis.emissiveMap = source.emissiveMap;\n\t\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\t\tthis.bumpMap = source.bumpMap;\n\t\tthis.bumpScale = source.bumpScale;\n\n\t\tthis.normalMap = source.normalMap;\n\t\tthis.normalMapType = source.normalMapType;\n\t\tthis.normalScale.copy( source.normalScale );\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.specularMap = source.specularMap;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.envMap = source.envMap;\n\t\tthis.combine = source.combine;\n\t\tthis.reflectivity = source.reflectivity;\n\t\tthis.refractionRatio = source.refractionRatio;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\t\tthis.flatShading = source.flatShading;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass MeshMatcapMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshMatcapMaterial = true;\n\n\t\tthis.defines = { 'MATCAP': '' };\n\n\t\tthis.type = 'MeshMatcapMaterial';\n\n\t\tthis.color = new Color( 0xffffff ); // diffuse\n\n\t\tthis.matcap = null;\n\n\t\tthis.map = null;\n\n\t\tthis.bumpMap = null;\n\t\tthis.bumpScale = 1;\n\n\t\tthis.normalMap = null;\n\t\tthis.normalMapType = TangentSpaceNormalMap;\n\t\tthis.normalScale = new Vector2( 1, 1 );\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.flatShading = false;\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.defines = { 'MATCAP': '' };\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.matcap = source.matcap;\n\n\t\tthis.map = source.map;\n\n\t\tthis.bumpMap = source.bumpMap;\n\t\tthis.bumpScale = source.bumpScale;\n\n\t\tthis.normalMap = source.normalMap;\n\t\tthis.normalMapType = source.normalMapType;\n\t\tthis.normalScale.copy( source.normalScale );\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.flatShading = source.flatShading;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass LineDashedMaterial extends LineBasicMaterial {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isLineDashedMaterial = true;\n\n\t\tthis.type = 'LineDashedMaterial';\n\n\t\tthis.scale = 1;\n\t\tthis.dashSize = 3;\n\t\tthis.gapSize = 1;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.scale = source.scale;\n\t\tthis.dashSize = source.dashSize;\n\t\tthis.gapSize = source.gapSize;\n\n\t\treturn this;\n\n\t}\n\n}\n\n// same as Array.prototype.slice, but also works on typed arrays\nfunction arraySlice( array, from, to ) {\n\n\tif ( isTypedArray( array ) ) {\n\n\t\t// in ios9 array.subarray(from, undefined) will return empty array\n\t\t// but array.subarray(from) or array.subarray(from, len) is correct\n\t\treturn new array.constructor( array.subarray( from, to !== undefined ? to : array.length ) );\n\n\t}\n\n\treturn array.slice( from, to );\n\n}\n\n// converts an array to a specific type\nfunction convertArray( array, type, forceClone ) {\n\n\tif ( ! array || // let 'undefined' and 'null' pass\n\t\t! forceClone && array.constructor === type ) return array;\n\n\tif ( typeof type.BYTES_PER_ELEMENT === 'number' ) {\n\n\t\treturn new type( array ); // create typed array\n\n\t}\n\n\treturn Array.prototype.slice.call( array ); // create Array\n\n}\n\nfunction isTypedArray( object ) {\n\n\treturn ArrayBuffer.isView( object ) &&\n\t\t! ( object instanceof DataView );\n\n}\n\n// returns an array by which times and values can be sorted\nfunction getKeyframeOrder( times ) {\n\n\tfunction compareTime( i, j ) {\n\n\t\treturn times[ i ] - times[ j ];\n\n\t}\n\n\tconst n = times.length;\n\tconst result = new Array( n );\n\tfor ( let i = 0; i !== n; ++ i ) result[ i ] = i;\n\n\tresult.sort( compareTime );\n\n\treturn result;\n\n}\n\n// uses the array previously returned by 'getKeyframeOrder' to sort data\nfunction sortedArray( values, stride, order ) {\n\n\tconst nValues = values.length;\n\tconst result = new values.constructor( nValues );\n\n\tfor ( let i = 0, dstOffset = 0; dstOffset !== nValues; ++ i ) {\n\n\t\tconst srcOffset = order[ i ] * stride;\n\n\t\tfor ( let j = 0; j !== stride; ++ j ) {\n\n\t\t\tresult[ dstOffset ++ ] = values[ srcOffset + j ];\n\n\t\t}\n\n\t}\n\n\treturn result;\n\n}\n\n// function for parsing AOS keyframe formats\nfunction flattenJSON( jsonKeys, times, values, valuePropertyName ) {\n\n\tlet i = 1, key = jsonKeys[ 0 ];\n\n\twhile ( key !== undefined && key[ valuePropertyName ] === undefined ) {\n\n\t\tkey = jsonKeys[ i ++ ];\n\n\t}\n\n\tif ( key === undefined ) return; // no data\n\n\tlet value = key[ valuePropertyName ];\n\tif ( value === undefined ) return; // no data\n\n\tif ( Array.isArray( value ) ) {\n\n\t\tdo {\n\n\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\tif ( value !== undefined ) {\n\n\t\t\t\ttimes.push( key.time );\n\t\t\t\tvalues.push.apply( values, value ); // push all elements\n\n\t\t\t}\n\n\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t} while ( key !== undefined );\n\n\t} else if ( value.toArray !== undefined ) {\n\n\t\t// ...assume THREE.Math-ish\n\n\t\tdo {\n\n\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\tif ( value !== undefined ) {\n\n\t\t\t\ttimes.push( key.time );\n\t\t\t\tvalue.toArray( values, values.length );\n\n\t\t\t}\n\n\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t} while ( key !== undefined );\n\n\t} else {\n\n\t\t// otherwise push as-is\n\n\t\tdo {\n\n\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\tif ( value !== undefined ) {\n\n\t\t\t\ttimes.push( key.time );\n\t\t\t\tvalues.push( value );\n\n\t\t\t}\n\n\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t} while ( key !== undefined );\n\n\t}\n\n}\n\nfunction subclip( sourceClip, name, startFrame, endFrame, fps = 30 ) {\n\n\tconst clip = sourceClip.clone();\n\n\tclip.name = name;\n\n\tconst tracks = [];\n\n\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\tconst track = clip.tracks[ i ];\n\t\tconst valueSize = track.getValueSize();\n\n\t\tconst times = [];\n\t\tconst values = [];\n\n\t\tfor ( let j = 0; j < track.times.length; ++ j ) {\n\n\t\t\tconst frame = track.times[ j ] * fps;\n\n\t\t\tif ( frame < startFrame || frame >= endFrame ) continue;\n\n\t\t\ttimes.push( track.times[ j ] );\n\n\t\t\tfor ( let k = 0; k < valueSize; ++ k ) {\n\n\t\t\t\tvalues.push( track.values[ j * valueSize + k ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( times.length === 0 ) continue;\n\n\t\ttrack.times = convertArray( times, track.times.constructor );\n\t\ttrack.values = convertArray( values, track.values.constructor );\n\n\t\ttracks.push( track );\n\n\t}\n\n\tclip.tracks = tracks;\n\n\t// find minimum .times value across all tracks in the trimmed clip\n\n\tlet minStartTime = Infinity;\n\n\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\tif ( minStartTime > clip.tracks[ i ].times[ 0 ] ) {\n\n\t\t\tminStartTime = clip.tracks[ i ].times[ 0 ];\n\n\t\t}\n\n\t}\n\n\t// shift all tracks such that clip begins at t=0\n\n\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\tclip.tracks[ i ].shift( - 1 * minStartTime );\n\n\t}\n\n\tclip.resetDuration();\n\n\treturn clip;\n\n}\n\nfunction makeClipAdditive( targetClip, referenceFrame = 0, referenceClip = targetClip, fps = 30 ) {\n\n\tif ( fps <= 0 ) fps = 30;\n\n\tconst numTracks = referenceClip.tracks.length;\n\tconst referenceTime = referenceFrame / fps;\n\n\t// Make each track's values relative to the values at the reference frame\n\tfor ( let i = 0; i < numTracks; ++ i ) {\n\n\t\tconst referenceTrack = referenceClip.tracks[ i ];\n\t\tconst referenceTrackType = referenceTrack.ValueTypeName;\n\n\t\t// Skip this track if it's non-numeric\n\t\tif ( referenceTrackType === 'bool' || referenceTrackType === 'string' ) continue;\n\n\t\t// Find the track in the target clip whose name and type matches the reference track\n\t\tconst targetTrack = targetClip.tracks.find( function ( track ) {\n\n\t\t\treturn track.name === referenceTrack.name\n\t\t\t\t&& track.ValueTypeName === referenceTrackType;\n\n\t\t} );\n\n\t\tif ( targetTrack === undefined ) continue;\n\n\t\tlet referenceOffset = 0;\n\t\tconst referenceValueSize = referenceTrack.getValueSize();\n\n\t\tif ( referenceTrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline ) {\n\n\t\t\treferenceOffset = referenceValueSize / 3;\n\n\t\t}\n\n\t\tlet targetOffset = 0;\n\t\tconst targetValueSize = targetTrack.getValueSize();\n\n\t\tif ( targetTrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline ) {\n\n\t\t\ttargetOffset = targetValueSize / 3;\n\n\t\t}\n\n\t\tconst lastIndex = referenceTrack.times.length - 1;\n\t\tlet referenceValue;\n\n\t\t// Find the value to subtract out of the track\n\t\tif ( referenceTime <= referenceTrack.times[ 0 ] ) {\n\n\t\t\t// Reference frame is earlier than the first keyframe, so just use the first keyframe\n\t\t\tconst startIndex = referenceOffset;\n\t\t\tconst endIndex = referenceValueSize - referenceOffset;\n\t\t\treferenceValue = arraySlice( referenceTrack.values, startIndex, endIndex );\n\n\t\t} else if ( referenceTime >= referenceTrack.times[ lastIndex ] ) {\n\n\t\t\t// Reference frame is after the last keyframe, so just use the last keyframe\n\t\t\tconst startIndex = lastIndex * referenceValueSize + referenceOffset;\n\t\t\tconst endIndex = startIndex + referenceValueSize - referenceOffset;\n\t\t\treferenceValue = arraySlice( referenceTrack.values, startIndex, endIndex );\n\n\t\t} else {\n\n\t\t\t// Interpolate to the reference value\n\t\t\tconst interpolant = referenceTrack.createInterpolant();\n\t\t\tconst startIndex = referenceOffset;\n\t\t\tconst endIndex = referenceValueSize - referenceOffset;\n\t\t\tinterpolant.evaluate( referenceTime );\n\t\t\treferenceValue = arraySlice( interpolant.resultBuffer, startIndex, endIndex );\n\n\t\t}\n\n\t\t// Conjugate the quaternion\n\t\tif ( referenceTrackType === 'quaternion' ) {\n\n\t\t\tconst referenceQuat = new Quaternion().fromArray( referenceValue ).normalize().conjugate();\n\t\t\treferenceQuat.toArray( referenceValue );\n\n\t\t}\n\n\t\t// Subtract the reference value from all of the track values\n\n\t\tconst numTimes = targetTrack.times.length;\n\t\tfor ( let j = 0; j < numTimes; ++ j ) {\n\n\t\t\tconst valueStart = j * targetValueSize + targetOffset;\n\n\t\t\tif ( referenceTrackType === 'quaternion' ) {\n\n\t\t\t\t// Multiply the conjugate for quaternion track types\n\t\t\t\tQuaternion.multiplyQuaternionsFlat(\n\t\t\t\t\ttargetTrack.values,\n\t\t\t\t\tvalueStart,\n\t\t\t\t\treferenceValue,\n\t\t\t\t\t0,\n\t\t\t\t\ttargetTrack.values,\n\t\t\t\t\tvalueStart\n\t\t\t\t);\n\n\t\t\t} else {\n\n\t\t\t\tconst valueEnd = targetValueSize - targetOffset * 2;\n\n\t\t\t\t// Subtract each value for all other numeric track types\n\t\t\t\tfor ( let k = 0; k < valueEnd; ++ k ) {\n\n\t\t\t\t\ttargetTrack.values[ valueStart + k ] -= referenceValue[ k ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttargetClip.blendMode = AdditiveAnimationBlendMode;\n\n\treturn targetClip;\n\n}\n\nvar AnimationUtils = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tarraySlice: arraySlice,\n\tconvertArray: convertArray,\n\tisTypedArray: isTypedArray,\n\tgetKeyframeOrder: getKeyframeOrder,\n\tsortedArray: sortedArray,\n\tflattenJSON: flattenJSON,\n\tsubclip: subclip,\n\tmakeClipAdditive: makeClipAdditive\n});\n\n/**\n * Abstract base class of interpolants over parametric samples.\n *\n * The parameter domain is one dimensional, typically the time or a path\n * along a curve defined by the data.\n *\n * The sample values can have any dimensionality and derived classes may\n * apply special interpretations to the data.\n *\n * This class provides the interval seek in a Template Method, deferring\n * the actual interpolation to derived classes.\n *\n * Time complexity is O(1) for linear access crossing at most two points\n * and O(log N) for random access, where N is the number of positions.\n *\n * References:\n *\n * \t\thttp://www.oodesign.com/template-method-pattern.html\n *\n */\n\nclass Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tthis.parameterPositions = parameterPositions;\n\t\tthis._cachedIndex = 0;\n\n\t\tthis.resultBuffer = resultBuffer !== undefined ?\n\t\t\tresultBuffer : new sampleValues.constructor( sampleSize );\n\t\tthis.sampleValues = sampleValues;\n\t\tthis.valueSize = sampleSize;\n\n\t\tthis.settings = null;\n\t\tthis.DefaultSettings_ = {};\n\n\t}\n\n\tevaluate( t ) {\n\n\t\tconst pp = this.parameterPositions;\n\t\tlet i1 = this._cachedIndex,\n\t\t\tt1 = pp[ i1 ],\n\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\tvalidate_interval: {\n\n\t\t\tseek: {\n\n\t\t\t\tlet right;\n\n\t\t\t\tlinear_scan: {\n\n\t\t\t\t\t//- See http://jsperf.com/comparison-to-undefined/3\n\t\t\t\t\t//- slower code:\n\t\t\t\t\t//-\n\t\t\t\t\t//- \t\t\t\tif ( t >= t1 || t1 === undefined ) {\n\t\t\t\t\tforward_scan: if ( ! ( t < t1 ) ) {\n\n\t\t\t\t\t\tfor ( let giveUpAt = i1 + 2; ; ) {\n\n\t\t\t\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\t\t\t\tif ( t < t0 ) break forward_scan;\n\n\t\t\t\t\t\t\t\t// after end\n\n\t\t\t\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\t\t\t\treturn this.copySampleValue_( i1 - 1 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\tt0 = t1;\n\t\t\t\t\t\t\tt1 = pp[ ++ i1 ];\n\n\t\t\t\t\t\t\tif ( t < t1 ) {\n\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// prepare binary search on the right side of the index\n\t\t\t\t\t\tright = pp.length;\n\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t//- slower code:\n\t\t\t\t\t//-\t\t\t\t\tif ( t < t0 || t0 === undefined ) {\n\t\t\t\t\tif ( ! ( t >= t0 ) ) {\n\n\t\t\t\t\t\t// looping?\n\n\t\t\t\t\t\tconst t1global = pp[ 1 ];\n\n\t\t\t\t\t\tif ( t < t1global ) {\n\n\t\t\t\t\t\t\ti1 = 2; // + 1, using the scan for the details\n\t\t\t\t\t\t\tt0 = t1global;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// linear reverse scan\n\n\t\t\t\t\t\tfor ( let giveUpAt = i1 - 2; ; ) {\n\n\t\t\t\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\t\t\t\t// before start\n\n\t\t\t\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\t\t\t\treturn this.copySampleValue_( 0 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\tt1 = t0;\n\t\t\t\t\t\t\tt0 = pp[ -- i1 - 1 ];\n\n\t\t\t\t\t\t\tif ( t >= t0 ) {\n\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// prepare binary search on the left side of the index\n\t\t\t\t\t\tright = i1;\n\t\t\t\t\t\ti1 = 0;\n\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// the interval is valid\n\n\t\t\t\t\tbreak validate_interval;\n\n\t\t\t\t} // linear scan\n\n\t\t\t\t// binary search\n\n\t\t\t\twhile ( i1 < right ) {\n\n\t\t\t\t\tconst mid = ( i1 + right ) >>> 1;\n\n\t\t\t\t\tif ( t < pp[ mid ] ) {\n\n\t\t\t\t\t\tright = mid;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ti1 = mid + 1;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tt1 = pp[ i1 ];\n\t\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\t\t\t// check boundary cases, again\n\n\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\treturn this.copySampleValue_( 0 );\n\n\t\t\t\t}\n\n\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\treturn this.copySampleValue_( i1 - 1 );\n\n\t\t\t\t}\n\n\t\t\t} // seek\n\n\t\t\tthis._cachedIndex = i1;\n\n\t\t\tthis.intervalChanged_( i1, t0, t1 );\n\n\t\t} // validate_interval\n\n\t\treturn this.interpolate_( i1, t0, t, t1 );\n\n\t}\n\n\tgetSettings_() {\n\n\t\treturn this.settings || this.DefaultSettings_;\n\n\t}\n\n\tcopySampleValue_( index ) {\n\n\t\t// copies a sample value to the result buffer\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = index * stride;\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\t// Template methods for derived classes:\n\n\tinterpolate_( /* i1, t0, t, t1 */ ) {\n\n\t\tthrow new Error( 'call to abstract method' );\n\t\t// implementations shall return this.resultBuffer\n\n\t}\n\n\tintervalChanged_( /* i1, t0, t1 */ ) {\n\n\t\t// empty\n\n\t}\n\n}\n\n/**\n * Fast and simple cubic spline interpolant.\n *\n * It was derived from a Hermitian construction setting the first derivative\n * at each sample position to the linear slope between neighboring positions\n * over their parameter interval.\n */\n\nclass CubicInterpolant extends Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tsuper( parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t\tthis._weightPrev = - 0;\n\t\tthis._offsetPrev = - 0;\n\t\tthis._weightNext = - 0;\n\t\tthis._offsetNext = - 0;\n\n\t\tthis.DefaultSettings_ = {\n\n\t\t\tendingStart: ZeroCurvatureEnding,\n\t\t\tendingEnd: ZeroCurvatureEnding\n\n\t\t};\n\n\t}\n\n\tintervalChanged_( i1, t0, t1 ) {\n\n\t\tconst pp = this.parameterPositions;\n\t\tlet iPrev = i1 - 2,\n\t\t\tiNext = i1 + 1,\n\n\t\t\ttPrev = pp[ iPrev ],\n\t\t\ttNext = pp[ iNext ];\n\n\t\tif ( tPrev === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingStart ) {\n\n\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(t0) = 0\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = 2 * t0 - t1;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiPrev = pp.length - 2;\n\t\t\t\t\ttPrev = t0 + pp[ iPrev ] - pp[ iPrev + 1 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(t0) = 0 a.k.a. Natural Spline\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = t1;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( tNext === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingEnd ) {\n\n\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(tN) = 0\n\t\t\t\t\tiNext = i1;\n\t\t\t\t\ttNext = 2 * t1 - t0;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiNext = 1;\n\t\t\t\t\ttNext = t1 + pp[ 1 ] - pp[ 0 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(tN) = 0, a.k.a. Natural Spline\n\t\t\t\t\tiNext = i1 - 1;\n\t\t\t\t\ttNext = t0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst halfDt = ( t1 - t0 ) * 0.5,\n\t\t\tstride = this.valueSize;\n\n\t\tthis._weightPrev = halfDt / ( t0 - tPrev );\n\t\tthis._weightNext = halfDt / ( tNext - t1 );\n\t\tthis._offsetPrev = iPrev * stride;\n\t\tthis._offsetNext = iNext * stride;\n\n\t}\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\to1 = i1 * stride,\t\to0 = o1 - stride,\n\t\t\toP = this._offsetPrev, \toN = this._offsetNext,\n\t\t\twP = this._weightPrev,\twN = this._weightNext,\n\n\t\t\tp = ( t - t0 ) / ( t1 - t0 ),\n\t\t\tpp = p * p,\n\t\t\tppp = pp * p;\n\n\t\t// evaluate polynomials\n\n\t\tconst sP = - wP * ppp + 2 * wP * pp - wP * p;\n\t\tconst s0 = ( 1 + wP ) * ppp + ( - 1.5 - 2 * wP ) * pp + ( - 0.5 + wP ) * p + 1;\n\t\tconst s1 = ( - 1 - wN ) * ppp + ( 1.5 + wN ) * pp + 0.5 * p;\n\t\tconst sN = wN * ppp - wN * pp;\n\n\t\t// combine data linearly\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] =\n\t\t\t\t\tsP * values[ oP + i ] +\n\t\t\t\t\ts0 * values[ o0 + i ] +\n\t\t\t\t\ts1 * values[ o1 + i ] +\n\t\t\t\t\tsN * values[ oN + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n}\n\nclass LinearInterpolant extends Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tsuper( parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\toffset1 = i1 * stride,\n\t\t\toffset0 = offset1 - stride,\n\n\t\t\tweight1 = ( t - t0 ) / ( t1 - t0 ),\n\t\t\tweight0 = 1 - weight1;\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] =\n\t\t\t\t\tvalues[ offset0 + i ] * weight0 +\n\t\t\t\t\tvalues[ offset1 + i ] * weight1;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n}\n\n/**\n *\n * Interpolant that evaluates to the sample value at the position preceding\n * the parameter.\n */\n\nclass DiscreteInterpolant extends Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tsuper( parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tinterpolate_( i1 /*, t0, t, t1 */ ) {\n\n\t\treturn this.copySampleValue_( i1 - 1 );\n\n\t}\n\n}\n\nclass KeyframeTrack {\n\n\tconstructor( name, times, values, interpolation ) {\n\n\t\tif ( name === undefined ) throw new Error( 'THREE.KeyframeTrack: track name is undefined' );\n\t\tif ( times === undefined || times.length === 0 ) throw new Error( 'THREE.KeyframeTrack: no keyframes in track named ' + name );\n\n\t\tthis.name = name;\n\n\t\tthis.times = convertArray( times, this.TimeBufferType );\n\t\tthis.values = convertArray( values, this.ValueBufferType );\n\n\t\tthis.setInterpolation( interpolation || this.DefaultInterpolation );\n\n\t}\n\n\t// Serialization (in static context, because of constructor invocation\n\t// and automatic invocation of .toJSON):\n\n\tstatic toJSON( track ) {\n\n\t\tconst trackType = track.constructor;\n\n\t\tlet json;\n\n\t\t// derived classes can define a static toJSON method\n\t\tif ( trackType.toJSON !== this.toJSON ) {\n\n\t\t\tjson = trackType.toJSON( track );\n\n\t\t} else {\n\n\t\t\t// by default, we assume the data can be serialized as-is\n\t\t\tjson = {\n\n\t\t\t\t'name': track.name,\n\t\t\t\t'times': convertArray( track.times, Array ),\n\t\t\t\t'values': convertArray( track.values, Array )\n\n\t\t\t};\n\n\t\t\tconst interpolation = track.getInterpolation();\n\n\t\t\tif ( interpolation !== track.DefaultInterpolation ) {\n\n\t\t\t\tjson.interpolation = interpolation;\n\n\t\t\t}\n\n\t\t}\n\n\t\tjson.type = track.ValueTypeName; // mandatory\n\n\t\treturn json;\n\n\t}\n\n\tInterpolantFactoryMethodDiscrete( result ) {\n\n\t\treturn new DiscreteInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t}\n\n\tInterpolantFactoryMethodLinear( result ) {\n\n\t\treturn new LinearInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t}\n\n\tInterpolantFactoryMethodSmooth( result ) {\n\n\t\treturn new CubicInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t}\n\n\tsetInterpolation( interpolation ) {\n\n\t\tlet factoryMethod;\n\n\t\tswitch ( interpolation ) {\n\n\t\t\tcase InterpolateDiscrete:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodDiscrete;\n\n\t\t\t\tbreak;\n\n\t\t\tcase InterpolateLinear:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodLinear;\n\n\t\t\t\tbreak;\n\n\t\t\tcase InterpolateSmooth:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodSmooth;\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( factoryMethod === undefined ) {\n\n\t\t\tconst message = 'unsupported interpolation for ' +\n\t\t\t\tthis.ValueTypeName + ' keyframe track named ' + this.name;\n\n\t\t\tif ( this.createInterpolant === undefined ) {\n\n\t\t\t\t// fall back to default, unless the default itself is messed up\n\t\t\t\tif ( interpolation !== this.DefaultInterpolation ) {\n\n\t\t\t\t\tthis.setInterpolation( this.DefaultInterpolation );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( message ); // fatal, in this case\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconsole.warn( 'THREE.KeyframeTrack:', message );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tthis.createInterpolant = factoryMethod;\n\n\t\treturn this;\n\n\t}\n\n\tgetInterpolation() {\n\n\t\tswitch ( this.createInterpolant ) {\n\n\t\t\tcase this.InterpolantFactoryMethodDiscrete:\n\n\t\t\t\treturn InterpolateDiscrete;\n\n\t\t\tcase this.InterpolantFactoryMethodLinear:\n\n\t\t\t\treturn InterpolateLinear;\n\n\t\t\tcase this.InterpolantFactoryMethodSmooth:\n\n\t\t\t\treturn InterpolateSmooth;\n\n\t\t}\n\n\t}\n\n\tgetValueSize() {\n\n\t\treturn this.values.length / this.times.length;\n\n\t}\n\n\t// move all keyframes either forwards or backwards in time\n\tshift( timeOffset ) {\n\n\t\tif ( timeOffset !== 0.0 ) {\n\n\t\t\tconst times = this.times;\n\n\t\t\tfor ( let i = 0, n = times.length; i !== n; ++ i ) {\n\n\t\t\t\ttimes[ i ] += timeOffset;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// scale all keyframe times by a factor (useful for frame <-> seconds conversions)\n\tscale( timeScale ) {\n\n\t\tif ( timeScale !== 1.0 ) {\n\n\t\t\tconst times = this.times;\n\n\t\t\tfor ( let i = 0, n = times.length; i !== n; ++ i ) {\n\n\t\t\t\ttimes[ i ] *= timeScale;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// removes keyframes before and after animation without changing any values within the range [startTime, endTime].\n\t// IMPORTANT: We do not shift around keys to the start of the track time, because for interpolated keys this will change their values\n\ttrim( startTime, endTime ) {\n\n\t\tconst times = this.times,\n\t\t\tnKeys = times.length;\n\n\t\tlet from = 0,\n\t\t\tto = nKeys - 1;\n\n\t\twhile ( from !== nKeys && times[ from ] < startTime ) {\n\n\t\t\t++ from;\n\n\t\t}\n\n\t\twhile ( to !== - 1 && times[ to ] > endTime ) {\n\n\t\t\t-- to;\n\n\t\t}\n\n\t\t++ to; // inclusive -> exclusive bound\n\n\t\tif ( from !== 0 || to !== nKeys ) {\n\n\t\t\t// empty tracks are forbidden, so keep at least one keyframe\n\t\t\tif ( from >= to ) {\n\n\t\t\t\tto = Math.max( to, 1 );\n\t\t\t\tfrom = to - 1;\n\n\t\t\t}\n\n\t\t\tconst stride = this.getValueSize();\n\t\t\tthis.times = arraySlice( times, from, to );\n\t\t\tthis.values = arraySlice( this.values, from * stride, to * stride );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// ensure we do not get a GarbageInGarbageOut situation, make sure tracks are at least minimally viable\n\tvalidate() {\n\n\t\tlet valid = true;\n\n\t\tconst valueSize = this.getValueSize();\n\t\tif ( valueSize - Math.floor( valueSize ) !== 0 ) {\n\n\t\t\tconsole.error( 'THREE.KeyframeTrack: Invalid value size in track.', this );\n\t\t\tvalid = false;\n\n\t\t}\n\n\t\tconst times = this.times,\n\t\t\tvalues = this.values,\n\n\t\t\tnKeys = times.length;\n\n\t\tif ( nKeys === 0 ) {\n\n\t\t\tconsole.error( 'THREE.KeyframeTrack: Track is empty.', this );\n\t\t\tvalid = false;\n\n\t\t}\n\n\t\tlet prevTime = null;\n\n\t\tfor ( let i = 0; i !== nKeys; i ++ ) {\n\n\t\t\tconst currTime = times[ i ];\n\n\t\t\tif ( typeof currTime === 'number' && isNaN( currTime ) ) {\n\n\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Time is not a valid number.', this, i, currTime );\n\t\t\t\tvalid = false;\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( prevTime !== null && prevTime > currTime ) {\n\n\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Out of order keys.', this, i, currTime, prevTime );\n\t\t\t\tvalid = false;\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tprevTime = currTime;\n\n\t\t}\n\n\t\tif ( values !== undefined ) {\n\n\t\t\tif ( isTypedArray( values ) ) {\n\n\t\t\t\tfor ( let i = 0, n = values.length; i !== n; ++ i ) {\n\n\t\t\t\t\tconst value = values[ i ];\n\n\t\t\t\t\tif ( isNaN( value ) ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Value is not a valid number.', this, i, value );\n\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn valid;\n\n\t}\n\n\t// removes equivalent sequential keys as common in morph target sequences\n\t// (0,0,0,0,1,1,1,0,0,0,0,0,0,0) --> (0,0,1,1,0,0)\n\toptimize() {\n\n\t\t// times or values may be shared with other tracks, so overwriting is unsafe\n\t\tconst times = arraySlice( this.times ),\n\t\t\tvalues = arraySlice( this.values ),\n\t\t\tstride = this.getValueSize(),\n\n\t\t\tsmoothInterpolation = this.getInterpolation() === InterpolateSmooth,\n\n\t\t\tlastIndex = times.length - 1;\n\n\t\tlet writeIndex = 1;\n\n\t\tfor ( let i = 1; i < lastIndex; ++ i ) {\n\n\t\t\tlet keep = false;\n\n\t\t\tconst time = times[ i ];\n\t\t\tconst timeNext = times[ i + 1 ];\n\n\t\t\t// remove adjacent keyframes scheduled at the same time\n\n\t\t\tif ( time !== timeNext && ( i !== 1 || time !== times[ 0 ] ) ) {\n\n\t\t\t\tif ( ! smoothInterpolation ) {\n\n\t\t\t\t\t// remove unnecessary keyframes same as their neighbors\n\n\t\t\t\t\tconst offset = i * stride,\n\t\t\t\t\t\toffsetP = offset - stride,\n\t\t\t\t\t\toffsetN = offset + stride;\n\n\t\t\t\t\tfor ( let j = 0; j !== stride; ++ j ) {\n\n\t\t\t\t\t\tconst value = values[ offset + j ];\n\n\t\t\t\t\t\tif ( value !== values[ offsetP + j ] ||\n\t\t\t\t\t\t\tvalue !== values[ offsetN + j ] ) {\n\n\t\t\t\t\t\t\tkeep = true;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tkeep = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// in-place compaction\n\n\t\t\tif ( keep ) {\n\n\t\t\t\tif ( i !== writeIndex ) {\n\n\t\t\t\t\ttimes[ writeIndex ] = times[ i ];\n\n\t\t\t\t\tconst readOffset = i * stride,\n\t\t\t\t\t\twriteOffset = writeIndex * stride;\n\n\t\t\t\t\tfor ( let j = 0; j !== stride; ++ j ) {\n\n\t\t\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t++ writeIndex;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// flush last keyframe (compaction looks ahead)\n\n\t\tif ( lastIndex > 0 ) {\n\n\t\t\ttimes[ writeIndex ] = times[ lastIndex ];\n\n\t\t\tfor ( let readOffset = lastIndex * stride, writeOffset = writeIndex * stride, j = 0; j !== stride; ++ j ) {\n\n\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\n\n\t\t\t}\n\n\t\t\t++ writeIndex;\n\n\t\t}\n\n\t\tif ( writeIndex !== times.length ) {\n\n\t\t\tthis.times = arraySlice( times, 0, writeIndex );\n\t\t\tthis.values = arraySlice( values, 0, writeIndex * stride );\n\n\t\t} else {\n\n\t\t\tthis.times = times;\n\t\t\tthis.values = values;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\tconst times = arraySlice( this.times, 0 );\n\t\tconst values = arraySlice( this.values, 0 );\n\n\t\tconst TypedKeyframeTrack = this.constructor;\n\t\tconst track = new TypedKeyframeTrack( this.name, times, values );\n\n\t\t// Interpolant argument to constructor is not saved, so copy the factory method directly.\n\t\ttrack.createInterpolant = this.createInterpolant;\n\n\t\treturn track;\n\n\t}\n\n}\n\nKeyframeTrack.prototype.TimeBufferType = Float32Array;\nKeyframeTrack.prototype.ValueBufferType = Float32Array;\nKeyframeTrack.prototype.DefaultInterpolation = InterpolateLinear;\n\n/**\n * A Track of Boolean keyframe values.\n */\nclass BooleanKeyframeTrack extends KeyframeTrack {}\n\nBooleanKeyframeTrack.prototype.ValueTypeName = 'bool';\nBooleanKeyframeTrack.prototype.ValueBufferType = Array;\nBooleanKeyframeTrack.prototype.DefaultInterpolation = InterpolateDiscrete;\nBooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear = undefined;\nBooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth = undefined;\n\n/**\n * A Track of keyframe values that represent color.\n */\nclass ColorKeyframeTrack extends KeyframeTrack {}\n\nColorKeyframeTrack.prototype.ValueTypeName = 'color';\n\n/**\n * A Track of numeric keyframe values.\n */\nclass NumberKeyframeTrack extends KeyframeTrack {}\n\nNumberKeyframeTrack.prototype.ValueTypeName = 'number';\n\n/**\n * Spherical linear unit quaternion interpolant.\n */\n\nclass QuaternionLinearInterpolant extends Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tsuper( parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\talpha = ( t - t0 ) / ( t1 - t0 );\n\n\t\tlet offset = i1 * stride;\n\n\t\tfor ( let end = offset + stride; offset !== end; offset += 4 ) {\n\n\t\t\tQuaternion.slerpFlat( result, 0, values, offset - stride, values, offset, alpha );\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n}\n\n/**\n * A Track of quaternion keyframe values.\n */\nclass QuaternionKeyframeTrack extends KeyframeTrack {\n\n\tInterpolantFactoryMethodLinear( result ) {\n\n\t\treturn new QuaternionLinearInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t}\n\n}\n\nQuaternionKeyframeTrack.prototype.ValueTypeName = 'quaternion';\n// ValueBufferType is inherited\nQuaternionKeyframeTrack.prototype.DefaultInterpolation = InterpolateLinear;\nQuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth = undefined;\n\n/**\n * A Track that interpolates Strings\n */\nclass StringKeyframeTrack extends KeyframeTrack {}\n\nStringKeyframeTrack.prototype.ValueTypeName = 'string';\nStringKeyframeTrack.prototype.ValueBufferType = Array;\nStringKeyframeTrack.prototype.DefaultInterpolation = InterpolateDiscrete;\nStringKeyframeTrack.prototype.InterpolantFactoryMethodLinear = undefined;\nStringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth = undefined;\n\n/**\n * A Track of vectored keyframe values.\n */\nclass VectorKeyframeTrack extends KeyframeTrack {}\n\nVectorKeyframeTrack.prototype.ValueTypeName = 'vector';\n\nclass AnimationClip {\n\n\tconstructor( name, duration = - 1, tracks, blendMode = NormalAnimationBlendMode ) {\n\n\t\tthis.name = name;\n\t\tthis.tracks = tracks;\n\t\tthis.duration = duration;\n\t\tthis.blendMode = blendMode;\n\n\t\tthis.uuid = generateUUID();\n\n\t\t// this means it should figure out its duration by scanning the tracks\n\t\tif ( this.duration < 0 ) {\n\n\t\t\tthis.resetDuration();\n\n\t\t}\n\n\t}\n\n\n\tstatic parse( json ) {\n\n\t\tconst tracks = [],\n\t\t\tjsonTracks = json.tracks,\n\t\t\tframeTime = 1.0 / ( json.fps || 1.0 );\n\n\t\tfor ( let i = 0, n = jsonTracks.length; i !== n; ++ i ) {\n\n\t\t\ttracks.push( parseKeyframeTrack( jsonTracks[ i ] ).scale( frameTime ) );\n\n\t\t}\n\n\t\tconst clip = new this( json.name, json.duration, tracks, json.blendMode );\n\t\tclip.uuid = json.uuid;\n\n\t\treturn clip;\n\n\t}\n\n\tstatic toJSON( clip ) {\n\n\t\tconst tracks = [],\n\t\t\tclipTracks = clip.tracks;\n\n\t\tconst json = {\n\n\t\t\t'name': clip.name,\n\t\t\t'duration': clip.duration,\n\t\t\t'tracks': tracks,\n\t\t\t'uuid': clip.uuid,\n\t\t\t'blendMode': clip.blendMode\n\n\t\t};\n\n\t\tfor ( let i = 0, n = clipTracks.length; i !== n; ++ i ) {\n\n\t\t\ttracks.push( KeyframeTrack.toJSON( clipTracks[ i ] ) );\n\n\t\t}\n\n\t\treturn json;\n\n\t}\n\n\tstatic CreateFromMorphTargetSequence( name, morphTargetSequence, fps, noLoop ) {\n\n\t\tconst numMorphTargets = morphTargetSequence.length;\n\t\tconst tracks = [];\n\n\t\tfor ( let i = 0; i < numMorphTargets; i ++ ) {\n\n\t\t\tlet times = [];\n\t\t\tlet values = [];\n\n\t\t\ttimes.push(\n\t\t\t\t( i + numMorphTargets - 1 ) % numMorphTargets,\n\t\t\t\ti,\n\t\t\t\t( i + 1 ) % numMorphTargets );\n\n\t\t\tvalues.push( 0, 1, 0 );\n\n\t\t\tconst order = getKeyframeOrder( times );\n\t\t\ttimes = sortedArray( times, 1, order );\n\t\t\tvalues = sortedArray( values, 1, order );\n\n\t\t\t// if there is a key at the first frame, duplicate it as the\n\t\t\t// last frame as well for perfect loop.\n\t\t\tif ( ! noLoop && times[ 0 ] === 0 ) {\n\n\t\t\t\ttimes.push( numMorphTargets );\n\t\t\t\tvalues.push( values[ 0 ] );\n\n\t\t\t}\n\n\t\t\ttracks.push(\n\t\t\t\tnew NumberKeyframeTrack(\n\t\t\t\t\t'.morphTargetInfluences[' + morphTargetSequence[ i ].name + ']',\n\t\t\t\t\ttimes, values\n\t\t\t\t).scale( 1.0 / fps ) );\n\n\t\t}\n\n\t\treturn new this( name, - 1, tracks );\n\n\t}\n\n\tstatic findByName( objectOrClipArray, name ) {\n\n\t\tlet clipArray = objectOrClipArray;\n\n\t\tif ( ! Array.isArray( objectOrClipArray ) ) {\n\n\t\t\tconst o = objectOrClipArray;\n\t\t\tclipArray = o.geometry && o.geometry.animations || o.animations;\n\n\t\t}\n\n\t\tfor ( let i = 0; i < clipArray.length; i ++ ) {\n\n\t\t\tif ( clipArray[ i ].name === name ) {\n\n\t\t\t\treturn clipArray[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\tstatic CreateClipsFromMorphTargetSequences( morphTargets, fps, noLoop ) {\n\n\t\tconst animationToMorphTargets = {};\n\n\t\t// tested with https://regex101.com/ on trick sequences\n\t\t// such flamingo_flyA_003, flamingo_run1_003, crdeath0059\n\t\tconst pattern = /^([\\w-]*?)([\\d]+)$/;\n\n\t\t// sort morph target names into animation groups based\n\t\t// patterns like Walk_001, Walk_002, Run_001, Run_002\n\t\tfor ( let i = 0, il = morphTargets.length; i < il; i ++ ) {\n\n\t\t\tconst morphTarget = morphTargets[ i ];\n\t\t\tconst parts = morphTarget.name.match( pattern );\n\n\t\t\tif ( parts && parts.length > 1 ) {\n\n\t\t\t\tconst name = parts[ 1 ];\n\n\t\t\t\tlet animationMorphTargets = animationToMorphTargets[ name ];\n\n\t\t\t\tif ( ! animationMorphTargets ) {\n\n\t\t\t\t\tanimationToMorphTargets[ name ] = animationMorphTargets = [];\n\n\t\t\t\t}\n\n\t\t\t\tanimationMorphTargets.push( morphTarget );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst clips = [];\n\n\t\tfor ( const name in animationToMorphTargets ) {\n\n\t\t\tclips.push( this.CreateFromMorphTargetSequence( name, animationToMorphTargets[ name ], fps, noLoop ) );\n\n\t\t}\n\n\t\treturn clips;\n\n\t}\n\n\t// parse the animation.hierarchy format\n\tstatic parseAnimation( animation, bones ) {\n\n\t\tif ( ! animation ) {\n\n\t\t\tconsole.error( 'THREE.AnimationClip: No animation in JSONLoader data.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst addNonemptyTrack = function ( trackType, trackName, animationKeys, propertyName, destTracks ) {\n\n\t\t\t// only return track if there are actually keys.\n\t\t\tif ( animationKeys.length !== 0 ) {\n\n\t\t\t\tconst times = [];\n\t\t\t\tconst values = [];\n\n\t\t\t\tflattenJSON( animationKeys, times, values, propertyName );\n\n\t\t\t\t// empty keys are filtered out, so check again\n\t\t\t\tif ( times.length !== 0 ) {\n\n\t\t\t\t\tdestTracks.push( new trackType( trackName, times, values ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tconst tracks = [];\n\n\t\tconst clipName = animation.name || 'default';\n\t\tconst fps = animation.fps || 30;\n\t\tconst blendMode = animation.blendMode;\n\n\t\t// automatic length determination in AnimationClip.\n\t\tlet duration = animation.length || - 1;\n\n\t\tconst hierarchyTracks = animation.hierarchy || [];\n\n\t\tfor ( let h = 0; h < hierarchyTracks.length; h ++ ) {\n\n\t\t\tconst animationKeys = hierarchyTracks[ h ].keys;\n\n\t\t\t// skip empty tracks\n\t\t\tif ( ! animationKeys || animationKeys.length === 0 ) continue;\n\n\t\t\t// process morph targets\n\t\t\tif ( animationKeys[ 0 ].morphTargets ) {\n\n\t\t\t\t// figure out all morph targets used in this track\n\t\t\t\tconst morphTargetNames = {};\n\n\t\t\t\tlet k;\n\n\t\t\t\tfor ( k = 0; k < animationKeys.length; k ++ ) {\n\n\t\t\t\t\tif ( animationKeys[ k ].morphTargets ) {\n\n\t\t\t\t\t\tfor ( let m = 0; m < animationKeys[ k ].morphTargets.length; m ++ ) {\n\n\t\t\t\t\t\t\tmorphTargetNames[ animationKeys[ k ].morphTargets[ m ] ] = - 1;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// create a track for each morph target with all zero\n\t\t\t\t// morphTargetInfluences except for the keys in which\n\t\t\t\t// the morphTarget is named.\n\t\t\t\tfor ( const morphTargetName in morphTargetNames ) {\n\n\t\t\t\t\tconst times = [];\n\t\t\t\t\tconst values = [];\n\n\t\t\t\t\tfor ( let m = 0; m !== animationKeys[ k ].morphTargets.length; ++ m ) {\n\n\t\t\t\t\t\tconst animationKey = animationKeys[ k ];\n\n\t\t\t\t\t\ttimes.push( animationKey.time );\n\t\t\t\t\t\tvalues.push( ( animationKey.morphTarget === morphTargetName ) ? 1 : 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttracks.push( new NumberKeyframeTrack( '.morphTargetInfluence[' + morphTargetName + ']', times, values ) );\n\n\t\t\t\t}\n\n\t\t\t\tduration = morphTargetNames.length * fps;\n\n\t\t\t} else {\n\n\t\t\t\t// ...assume skeletal animation\n\n\t\t\t\tconst boneName = '.bones[' + bones[ h ].name + ']';\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tVectorKeyframeTrack, boneName + '.position',\n\t\t\t\t\tanimationKeys, 'pos', tracks );\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tQuaternionKeyframeTrack, boneName + '.quaternion',\n\t\t\t\t\tanimationKeys, 'rot', tracks );\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tVectorKeyframeTrack, boneName + '.scale',\n\t\t\t\t\tanimationKeys, 'scl', tracks );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( tracks.length === 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst clip = new this( clipName, duration, tracks, blendMode );\n\n\t\treturn clip;\n\n\t}\n\n\tresetDuration() {\n\n\t\tconst tracks = this.tracks;\n\t\tlet duration = 0;\n\n\t\tfor ( let i = 0, n = tracks.length; i !== n; ++ i ) {\n\n\t\t\tconst track = this.tracks[ i ];\n\n\t\t\tduration = Math.max( duration, track.times[ track.times.length - 1 ] );\n\n\t\t}\n\n\t\tthis.duration = duration;\n\n\t\treturn this;\n\n\t}\n\n\ttrim() {\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tthis.tracks[ i ].trim( 0, this.duration );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tvalidate() {\n\n\t\tlet valid = true;\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tvalid = valid && this.tracks[ i ].validate();\n\n\t\t}\n\n\t\treturn valid;\n\n\t}\n\n\toptimize() {\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tthis.tracks[ i ].optimize();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\tconst tracks = [];\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\ttracks.push( this.tracks[ i ].clone() );\n\n\t\t}\n\n\t\treturn new this.constructor( this.name, this.duration, tracks, this.blendMode );\n\n\t}\n\n\ttoJSON() {\n\n\t\treturn this.constructor.toJSON( this );\n\n\t}\n\n}\n\nfunction getTrackTypeForValueTypeName( typeName ) {\n\n\tswitch ( typeName.toLowerCase() ) {\n\n\t\tcase 'scalar':\n\t\tcase 'double':\n\t\tcase 'float':\n\t\tcase 'number':\n\t\tcase 'integer':\n\n\t\t\treturn NumberKeyframeTrack;\n\n\t\tcase 'vector':\n\t\tcase 'vector2':\n\t\tcase 'vector3':\n\t\tcase 'vector4':\n\n\t\t\treturn VectorKeyframeTrack;\n\n\t\tcase 'color':\n\n\t\t\treturn ColorKeyframeTrack;\n\n\t\tcase 'quaternion':\n\n\t\t\treturn QuaternionKeyframeTrack;\n\n\t\tcase 'bool':\n\t\tcase 'boolean':\n\n\t\t\treturn BooleanKeyframeTrack;\n\n\t\tcase 'string':\n\n\t\t\treturn StringKeyframeTrack;\n\n\t}\n\n\tthrow new Error( 'THREE.KeyframeTrack: Unsupported typeName: ' + typeName );\n\n}\n\nfunction parseKeyframeTrack( json ) {\n\n\tif ( json.type === undefined ) {\n\n\t\tthrow new Error( 'THREE.KeyframeTrack: track type undefined, can not parse' );\n\n\t}\n\n\tconst trackType = getTrackTypeForValueTypeName( json.type );\n\n\tif ( json.times === undefined ) {\n\n\t\tconst times = [], values = [];\n\n\t\tflattenJSON( json.keys, times, values, 'value' );\n\n\t\tjson.times = times;\n\t\tjson.values = values;\n\n\t}\n\n\t// derived classes can define a static parse method\n\tif ( trackType.parse !== undefined ) {\n\n\t\treturn trackType.parse( json );\n\n\t} else {\n\n\t\t// by default, we assume a constructor compatible with the base\n\t\treturn new trackType( json.name, json.times, json.values, json.interpolation );\n\n\t}\n\n}\n\nconst Cache = {\n\n\tenabled: false,\n\n\tfiles: {},\n\n\tadd: function ( key, file ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Adding key:', key );\n\n\t\tthis.files[ key ] = file;\n\n\t},\n\n\tget: function ( key ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Checking key:', key );\n\n\t\treturn this.files[ key ];\n\n\t},\n\n\tremove: function ( key ) {\n\n\t\tdelete this.files[ key ];\n\n\t},\n\n\tclear: function () {\n\n\t\tthis.files = {};\n\n\t}\n\n};\n\nclass LoadingManager {\n\n\tconstructor( onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tlet isLoading = false;\n\t\tlet itemsLoaded = 0;\n\t\tlet itemsTotal = 0;\n\t\tlet urlModifier = undefined;\n\t\tconst handlers = [];\n\n\t\t// Refer to #5689 for the reason why we don't set .onStart\n\t\t// in the constructor\n\n\t\tthis.onStart = undefined;\n\t\tthis.onLoad = onLoad;\n\t\tthis.onProgress = onProgress;\n\t\tthis.onError = onError;\n\n\t\tthis.itemStart = function ( url ) {\n\n\t\t\titemsTotal ++;\n\n\t\t\tif ( isLoading === false ) {\n\n\t\t\t\tif ( scope.onStart !== undefined ) {\n\n\t\t\t\t\tscope.onStart( url, itemsLoaded, itemsTotal );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tisLoading = true;\n\n\t\t};\n\n\t\tthis.itemEnd = function ( url ) {\n\n\t\t\titemsLoaded ++;\n\n\t\t\tif ( scope.onProgress !== undefined ) {\n\n\t\t\t\tscope.onProgress( url, itemsLoaded, itemsTotal );\n\n\t\t\t}\n\n\t\t\tif ( itemsLoaded === itemsTotal ) {\n\n\t\t\t\tisLoading = false;\n\n\t\t\t\tif ( scope.onLoad !== undefined ) {\n\n\t\t\t\t\tscope.onLoad();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.itemError = function ( url ) {\n\n\t\t\tif ( scope.onError !== undefined ) {\n\n\t\t\t\tscope.onError( url );\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.resolveURL = function ( url ) {\n\n\t\t\tif ( urlModifier ) {\n\n\t\t\t\treturn urlModifier( url );\n\n\t\t\t}\n\n\t\t\treturn url;\n\n\t\t};\n\n\t\tthis.setURLModifier = function ( transform ) {\n\n\t\t\turlModifier = transform;\n\n\t\t\treturn this;\n\n\t\t};\n\n\t\tthis.addHandler = function ( regex, loader ) {\n\n\t\t\thandlers.push( regex, loader );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t\tthis.removeHandler = function ( regex ) {\n\n\t\t\tconst index = handlers.indexOf( regex );\n\n\t\t\tif ( index !== - 1 ) {\n\n\t\t\t\thandlers.splice( index, 2 );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t};\n\n\t\tthis.getHandler = function ( file ) {\n\n\t\t\tfor ( let i = 0, l = handlers.length; i < l; i += 2 ) {\n\n\t\t\t\tconst regex = handlers[ i ];\n\t\t\t\tconst loader = handlers[ i + 1 ];\n\n\t\t\t\tif ( regex.global ) regex.lastIndex = 0; // see #17920\n\n\t\t\t\tif ( regex.test( file ) ) {\n\n\t\t\t\t\treturn loader;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn null;\n\n\t\t};\n\n\t}\n\n}\n\nconst DefaultLoadingManager = /*@__PURE__*/ new LoadingManager();\n\nclass Loader {\n\n\tconstructor( manager ) {\n\n\t\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n\t\tthis.crossOrigin = 'anonymous';\n\t\tthis.withCredentials = false;\n\t\tthis.path = '';\n\t\tthis.resourcePath = '';\n\t\tthis.requestHeader = {};\n\n\t}\n\n\tload( /* url, onLoad, onProgress, onError */ ) {}\n\n\tloadAsync( url, onProgress ) {\n\n\t\tconst scope = this;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tscope.load( url, resolve, onProgress, reject );\n\n\t\t} );\n\n\t}\n\n\tparse( /* data */ ) {}\n\n\tsetCrossOrigin( crossOrigin ) {\n\n\t\tthis.crossOrigin = crossOrigin;\n\t\treturn this;\n\n\t}\n\n\tsetWithCredentials( value ) {\n\n\t\tthis.withCredentials = value;\n\t\treturn this;\n\n\t}\n\n\tsetPath( path ) {\n\n\t\tthis.path = path;\n\t\treturn this;\n\n\t}\n\n\tsetResourcePath( resourcePath ) {\n\n\t\tthis.resourcePath = resourcePath;\n\t\treturn this;\n\n\t}\n\n\tsetRequestHeader( requestHeader ) {\n\n\t\tthis.requestHeader = requestHeader;\n\t\treturn this;\n\n\t}\n\n}\n\nconst loading = {};\n\nclass HttpError extends Error {\n\n\tconstructor( message, response ) {\n\n\t\tsuper( message );\n\t\tthis.response = response;\n\n\t}\n\n}\n\nclass FileLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tif ( url === undefined ) url = '';\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tconst cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tthis.manager.itemStart( url );\n\n\t\t\tsetTimeout( () => {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tthis.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\t// Check if request is duplicate\n\n\t\tif ( loading[ url ] !== undefined ) {\n\n\t\t\tloading[ url ].push( {\n\n\t\t\t\tonLoad: onLoad,\n\t\t\t\tonProgress: onProgress,\n\t\t\t\tonError: onError\n\n\t\t\t} );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// Initialise array for duplicate requests\n\t\tloading[ url ] = [];\n\n\t\tloading[ url ].push( {\n\t\t\tonLoad: onLoad,\n\t\t\tonProgress: onProgress,\n\t\t\tonError: onError,\n\t\t} );\n\n\t\t// create request\n\t\tconst req = new Request( url, {\n\t\t\theaders: new Headers( this.requestHeader ),\n\t\t\tcredentials: this.withCredentials ? 'include' : 'same-origin',\n\t\t\t// An abort controller could be added within a future PR\n\t\t} );\n\n\t\t// record states ( avoid data race )\n\t\tconst mimeType = this.mimeType;\n\t\tconst responseType = this.responseType;\n\n\t\t// start the fetch\n\t\tfetch( req )\n\t\t\t.then( response => {\n\n\t\t\t\tif ( response.status === 200 || response.status === 0 ) {\n\n\t\t\t\t\t// Some browsers return HTTP Status 0 when using non-http protocol\n\t\t\t\t\t// e.g. 'file://' or 'data://'. Handle as success.\n\n\t\t\t\t\tif ( response.status === 0 ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.FileLoader: HTTP Status 0 received.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Workaround: Checking if response.body === undefined for Alipay browser #23548\n\n\t\t\t\t\tif ( typeof ReadableStream === 'undefined' || response.body === undefined || response.body.getReader === undefined ) {\n\n\t\t\t\t\t\treturn response;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst callbacks = loading[ url ];\n\t\t\t\t\tconst reader = response.body.getReader();\n\t\t\t\t\tconst contentLength = response.headers.get( 'Content-Length' );\n\t\t\t\t\tconst total = contentLength ? parseInt( contentLength ) : 0;\n\t\t\t\t\tconst lengthComputable = total !== 0;\n\t\t\t\t\tlet loaded = 0;\n\n\t\t\t\t\t// periodically read data into the new stream tracking while download progress\n\t\t\t\t\tconst stream = new ReadableStream( {\n\t\t\t\t\t\tstart( controller ) {\n\n\t\t\t\t\t\t\treadData();\n\n\t\t\t\t\t\t\tfunction readData() {\n\n\t\t\t\t\t\t\t\treader.read().then( ( { done, value } ) => {\n\n\t\t\t\t\t\t\t\t\tif ( done ) {\n\n\t\t\t\t\t\t\t\t\t\tcontroller.close();\n\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\tloaded += value.byteLength;\n\n\t\t\t\t\t\t\t\t\t\tconst event = new ProgressEvent( 'progress', { lengthComputable, loaded, total } );\n\t\t\t\t\t\t\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\t\t\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\t\t\t\t\t\t\tif ( callback.onProgress ) callback.onProgress( event );\n\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tcontroller.enqueue( value );\n\t\t\t\t\t\t\t\t\t\treadData();\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t\treturn new Response( stream );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new HttpError( `fetch for \"${response.url}\" responded with ${response.status}: ${response.statusText}`, response );\n\n\t\t\t\t}\n\n\t\t\t} )\n\t\t\t.then( response => {\n\n\t\t\t\tswitch ( responseType ) {\n\n\t\t\t\t\tcase 'arraybuffer':\n\n\t\t\t\t\t\treturn response.arrayBuffer();\n\n\t\t\t\t\tcase 'blob':\n\n\t\t\t\t\t\treturn response.blob();\n\n\t\t\t\t\tcase 'document':\n\n\t\t\t\t\t\treturn response.text()\n\t\t\t\t\t\t\t.then( text => {\n\n\t\t\t\t\t\t\t\tconst parser = new DOMParser();\n\t\t\t\t\t\t\t\treturn parser.parseFromString( text, mimeType );\n\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\tcase 'json':\n\n\t\t\t\t\t\treturn response.json();\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tif ( mimeType === undefined ) {\n\n\t\t\t\t\t\t\treturn response.text();\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// sniff encoding\n\t\t\t\t\t\t\tconst re = /charset=\"?([^;\"\\s]*)\"?/i;\n\t\t\t\t\t\t\tconst exec = re.exec( mimeType );\n\t\t\t\t\t\t\tconst label = exec && exec[ 1 ] ? exec[ 1 ].toLowerCase() : undefined;\n\t\t\t\t\t\t\tconst decoder = new TextDecoder( label );\n\t\t\t\t\t\t\treturn response.arrayBuffer().then( ab => decoder.decode( ab ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} )\n\t\t\t.then( data => {\n\n\t\t\t\t// Add to cache only on HTTP success, so that we do not cache\n\t\t\t\t// error response bodies as proper responses to requests.\n\t\t\t\tCache.add( url, data );\n\n\t\t\t\tconst callbacks = loading[ url ];\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onLoad ) callback.onLoad( data );\n\n\t\t\t\t}\n\n\t\t\t} )\n\t\t\t.catch( err => {\n\n\t\t\t\t// Abort errors and other errors are handled the same\n\n\t\t\t\tconst callbacks = loading[ url ];\n\n\t\t\t\tif ( callbacks === undefined ) {\n\n\t\t\t\t\t// When onLoad was called and url was deleted in `loading`\n\t\t\t\t\tthis.manager.itemError( url );\n\t\t\t\t\tthrow err;\n\n\t\t\t\t}\n\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onError ) callback.onError( err );\n\n\t\t\t\t}\n\n\t\t\t\tthis.manager.itemError( url );\n\n\t\t\t} )\n\t\t\t.finally( () => {\n\n\t\t\t\tthis.manager.itemEnd( url );\n\n\t\t\t} );\n\n\t\tthis.manager.itemStart( url );\n\n\t}\n\n\tsetResponseType( value ) {\n\n\t\tthis.responseType = value;\n\t\treturn this;\n\n\t}\n\n\tsetMimeType( value ) {\n\n\t\tthis.mimeType = value;\n\t\treturn this;\n\n\t}\n\n}\n\nclass AnimationLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tparse( json ) {\n\n\t\tconst animations = [];\n\n\t\tfor ( let i = 0; i < json.length; i ++ ) {\n\n\t\t\tconst clip = AnimationClip.parse( json[ i ] );\n\n\t\t\tanimations.push( clip );\n\n\t\t}\n\n\t\treturn animations;\n\n\t}\n\n}\n\n/**\n * Abstract Base class to block based textures loader (dds, pvr, ...)\n *\n * Sub classes have to implement the parse() method which will be used in load().\n */\n\nclass CompressedTextureLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst images = [];\n\n\t\tconst texture = new CompressedTexture();\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\n\t\tlet loaded = 0;\n\n\t\tfunction loadTexture( i ) {\n\n\t\t\tloader.load( url[ i ], function ( buffer ) {\n\n\t\t\t\tconst texDatas = scope.parse( buffer, true );\n\n\t\t\t\timages[ i ] = {\n\t\t\t\t\twidth: texDatas.width,\n\t\t\t\t\theight: texDatas.height,\n\t\t\t\t\tformat: texDatas.format,\n\t\t\t\t\tmipmaps: texDatas.mipmaps\n\t\t\t\t};\n\n\t\t\t\tloaded += 1;\n\n\t\t\t\tif ( loaded === 6 ) {\n\n\t\t\t\t\tif ( texDatas.mipmapCount === 1 ) texture.minFilter = LinearFilter;\n\n\t\t\t\t\ttexture.image = images;\n\t\t\t\t\ttexture.format = texDatas.format;\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t}\n\n\t\t\t}, onProgress, onError );\n\n\t\t}\n\n\t\tif ( Array.isArray( url ) ) {\n\n\t\t\tfor ( let i = 0, il = url.length; i < il; ++ i ) {\n\n\t\t\t\tloadTexture( i );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// compressed cubemap texture stored in a single DDS file\n\n\t\t\tloader.load( url, function ( buffer ) {\n\n\t\t\t\tconst texDatas = scope.parse( buffer, true );\n\n\t\t\t\tif ( texDatas.isCubemap ) {\n\n\t\t\t\t\tconst faces = texDatas.mipmaps.length / texDatas.mipmapCount;\n\n\t\t\t\t\tfor ( let f = 0; f < faces; f ++ ) {\n\n\t\t\t\t\t\timages[ f ] = { mipmaps: [] };\n\n\t\t\t\t\t\tfor ( let i = 0; i < texDatas.mipmapCount; i ++ ) {\n\n\t\t\t\t\t\t\timages[ f ].mipmaps.push( texDatas.mipmaps[ f * texDatas.mipmapCount + i ] );\n\t\t\t\t\t\t\timages[ f ].format = texDatas.format;\n\t\t\t\t\t\t\timages[ f ].width = texDatas.width;\n\t\t\t\t\t\t\timages[ f ].height = texDatas.height;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttexture.image = images;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttexture.image.width = texDatas.width;\n\t\t\t\t\ttexture.image.height = texDatas.height;\n\t\t\t\t\ttexture.mipmaps = texDatas.mipmaps;\n\n\t\t\t\t}\n\n\t\t\t\tif ( texDatas.mipmapCount === 1 ) {\n\n\t\t\t\t\ttexture.minFilter = LinearFilter;\n\n\t\t\t\t}\n\n\t\t\t\ttexture.format = texDatas.format;\n\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t}, onProgress, onError );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n}\n\nclass ImageLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tconst scope = this;\n\n\t\tconst cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\tconst image = createElementNS( 'img' );\n\n\t\tfunction onImageLoad() {\n\n\t\t\tremoveEventListeners();\n\n\t\t\tCache.add( url, this );\n\n\t\t\tif ( onLoad ) onLoad( this );\n\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}\n\n\t\tfunction onImageError( event ) {\n\n\t\t\tremoveEventListeners();\n\n\t\t\tif ( onError ) onError( event );\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}\n\n\t\tfunction removeEventListeners() {\n\n\t\t\timage.removeEventListener( 'load', onImageLoad, false );\n\t\t\timage.removeEventListener( 'error', onImageError, false );\n\n\t\t}\n\n\t\timage.addEventListener( 'load', onImageLoad, false );\n\t\timage.addEventListener( 'error', onImageError, false );\n\n\t\tif ( url.slice( 0, 5 ) !== 'data:' ) {\n\n\t\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\n\n\t\t}\n\n\t\tscope.manager.itemStart( url );\n\n\t\timage.src = url;\n\n\t\treturn image;\n\n\t}\n\n}\n\nclass CubeTextureLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( urls, onLoad, onProgress, onError ) {\n\n\t\tconst texture = new CubeTexture();\n\n\t\tconst loader = new ImageLoader( this.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.setPath( this.path );\n\n\t\tlet loaded = 0;\n\n\t\tfunction loadTexture( i ) {\n\n\t\t\tloader.load( urls[ i ], function ( image ) {\n\n\t\t\t\ttexture.images[ i ] = image;\n\n\t\t\t\tloaded ++;\n\n\t\t\t\tif ( loaded === 6 ) {\n\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t}\n\n\t\t\t}, undefined, onError );\n\n\t\t}\n\n\t\tfor ( let i = 0; i < urls.length; ++ i ) {\n\n\t\t\tloadTexture( i );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n}\n\n/**\n * Abstract Base class to load generic binary textures formats (rgbe, hdr, ...)\n *\n * Sub classes have to implement the parse() method which will be used in load().\n */\n\nclass DataTextureLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst texture = new DataTexture();\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setPath( this.path );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\t\tloader.load( url, function ( buffer ) {\n\n\t\t\tconst texData = scope.parse( buffer );\n\n\t\t\tif ( ! texData ) return;\n\n\t\t\tif ( texData.image !== undefined ) {\n\n\t\t\t\ttexture.image = texData.image;\n\n\t\t\t} else if ( texData.data !== undefined ) {\n\n\t\t\t\ttexture.image.width = texData.width;\n\t\t\t\ttexture.image.height = texData.height;\n\t\t\t\ttexture.image.data = texData.data;\n\n\t\t\t}\n\n\t\t\ttexture.wrapS = texData.wrapS !== undefined ? texData.wrapS : ClampToEdgeWrapping;\n\t\t\ttexture.wrapT = texData.wrapT !== undefined ? texData.wrapT : ClampToEdgeWrapping;\n\n\t\t\ttexture.magFilter = texData.magFilter !== undefined ? texData.magFilter : LinearFilter;\n\t\t\ttexture.minFilter = texData.minFilter !== undefined ? texData.minFilter : LinearFilter;\n\n\t\t\ttexture.anisotropy = texData.anisotropy !== undefined ? texData.anisotropy : 1;\n\n\t\t\tif ( texData.encoding !== undefined ) {\n\n\t\t\t\ttexture.encoding = texData.encoding;\n\n\t\t\t}\n\n\t\t\tif ( texData.flipY !== undefined ) {\n\n\t\t\t\ttexture.flipY = texData.flipY;\n\n\t\t\t}\n\n\t\t\tif ( texData.format !== undefined ) {\n\n\t\t\t\ttexture.format = texData.format;\n\n\t\t\t}\n\n\t\t\tif ( texData.type !== undefined ) {\n\n\t\t\t\ttexture.type = texData.type;\n\n\t\t\t}\n\n\t\t\tif ( texData.mipmaps !== undefined ) {\n\n\t\t\t\ttexture.mipmaps = texData.mipmaps;\n\t\t\t\ttexture.minFilter = LinearMipmapLinearFilter; // presumably...\n\n\t\t\t}\n\n\t\t\tif ( texData.mipmapCount === 1 ) {\n\n\t\t\t\ttexture.minFilter = LinearFilter;\n\n\t\t\t}\n\n\t\t\tif ( texData.generateMipmaps !== undefined ) {\n\n\t\t\t\ttexture.generateMipmaps = texData.generateMipmaps;\n\n\t\t\t}\n\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad ) onLoad( texture, texData );\n\n\t\t}, onProgress, onError );\n\n\n\t\treturn texture;\n\n\t}\n\n}\n\nclass TextureLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst texture = new Texture();\n\n\t\tconst loader = new ImageLoader( this.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.setPath( this.path );\n\n\t\tloader.load( url, function ( image ) {\n\n\t\t\ttexture.image = image;\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad !== undefined ) {\n\n\t\t\t\tonLoad( texture );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t\treturn texture;\n\n\t}\n\n}\n\nclass Light extends Object3D {\n\n\tconstructor( color, intensity = 1 ) {\n\n\t\tsuper();\n\n\t\tthis.isLight = true;\n\n\t\tthis.type = 'Light';\n\n\t\tthis.color = new Color( color );\n\t\tthis.intensity = intensity;\n\n\t}\n\n\tdispose() {\n\n\t\t// Empty here in base class; some subclasses override.\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.color.copy( source.color );\n\t\tthis.intensity = source.intensity;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tdata.object.color = this.color.getHex();\n\t\tdata.object.intensity = this.intensity;\n\n\t\tif ( this.groundColor !== undefined ) data.object.groundColor = this.groundColor.getHex();\n\n\t\tif ( this.distance !== undefined ) data.object.distance = this.distance;\n\t\tif ( this.angle !== undefined ) data.object.angle = this.angle;\n\t\tif ( this.decay !== undefined ) data.object.decay = this.decay;\n\t\tif ( this.penumbra !== undefined ) data.object.penumbra = this.penumbra;\n\n\t\tif ( this.shadow !== undefined ) data.object.shadow = this.shadow.toJSON();\n\n\t\treturn data;\n\n\t}\n\n}\n\nclass HemisphereLight extends Light {\n\n\tconstructor( skyColor, groundColor, intensity ) {\n\n\t\tsuper( skyColor, intensity );\n\n\t\tthis.isHemisphereLight = true;\n\n\t\tthis.type = 'HemisphereLight';\n\n\t\tthis.position.copy( Object3D.DefaultUp );\n\t\tthis.updateMatrix();\n\n\t\tthis.groundColor = new Color( groundColor );\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.groundColor.copy( source.groundColor );\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _projScreenMatrix$1 = /*@__PURE__*/ new Matrix4();\nconst _lightPositionWorld$1 = /*@__PURE__*/ new Vector3();\nconst _lookTarget$1 = /*@__PURE__*/ new Vector3();\n\nclass LightShadow {\n\n\tconstructor( camera ) {\n\n\t\tthis.camera = camera;\n\n\t\tthis.bias = 0;\n\t\tthis.normalBias = 0;\n\t\tthis.radius = 1;\n\t\tthis.blurSamples = 8;\n\n\t\tthis.mapSize = new Vector2( 512, 512 );\n\n\t\tthis.map = null;\n\t\tthis.mapPass = null;\n\t\tthis.matrix = new Matrix4();\n\n\t\tthis.autoUpdate = true;\n\t\tthis.needsUpdate = false;\n\n\t\tthis._frustum = new Frustum();\n\t\tthis._frameExtents = new Vector2( 1, 1 );\n\n\t\tthis._viewportCount = 1;\n\n\t\tthis._viewports = [\n\n\t\t\tnew Vector4( 0, 0, 1, 1 )\n\n\t\t];\n\n\t}\n\n\tgetViewportCount() {\n\n\t\treturn this._viewportCount;\n\n\t}\n\n\tgetFrustum() {\n\n\t\treturn this._frustum;\n\n\t}\n\n\tupdateMatrices( light ) {\n\n\t\tconst shadowCamera = this.camera;\n\t\tconst shadowMatrix = this.matrix;\n\n\t\t_lightPositionWorld$1.setFromMatrixPosition( light.matrixWorld );\n\t\tshadowCamera.position.copy( _lightPositionWorld$1 );\n\n\t\t_lookTarget$1.setFromMatrixPosition( light.target.matrixWorld );\n\t\tshadowCamera.lookAt( _lookTarget$1 );\n\t\tshadowCamera.updateMatrixWorld();\n\n\t\t_projScreenMatrix$1.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\n\t\tthis._frustum.setFromProjectionMatrix( _projScreenMatrix$1 );\n\n\t\tshadowMatrix.set(\n\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t);\n\n\t\tshadowMatrix.multiply( _projScreenMatrix$1 );\n\n\t}\n\n\tgetViewport( viewportIndex ) {\n\n\t\treturn this._viewports[ viewportIndex ];\n\n\t}\n\n\tgetFrameExtents() {\n\n\t\treturn this._frameExtents;\n\n\t}\n\n\tdispose() {\n\n\t\tif ( this.map ) {\n\n\t\t\tthis.map.dispose();\n\n\t\t}\n\n\t\tif ( this.mapPass ) {\n\n\t\t\tthis.mapPass.dispose();\n\n\t\t}\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.camera = source.camera.clone();\n\n\t\tthis.bias = source.bias;\n\t\tthis.radius = source.radius;\n\n\t\tthis.mapSize.copy( source.mapSize );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst object = {};\n\n\t\tif ( this.bias !== 0 ) object.bias = this.bias;\n\t\tif ( this.normalBias !== 0 ) object.normalBias = this.normalBias;\n\t\tif ( this.radius !== 1 ) object.radius = this.radius;\n\t\tif ( this.mapSize.x !== 512 || this.mapSize.y !== 512 ) object.mapSize = this.mapSize.toArray();\n\n\t\tobject.camera = this.camera.toJSON( false ).object;\n\t\tdelete object.camera.matrix;\n\n\t\treturn object;\n\n\t}\n\n}\n\nclass SpotLightShadow extends LightShadow {\n\n\tconstructor() {\n\n\t\tsuper( new PerspectiveCamera( 50, 1, 0.5, 500 ) );\n\n\t\tthis.isSpotLightShadow = true;\n\n\t\tthis.focus = 1;\n\n\t}\n\n\tupdateMatrices( light ) {\n\n\t\tconst camera = this.camera;\n\n\t\tconst fov = RAD2DEG * 2 * light.angle * this.focus;\n\t\tconst aspect = this.mapSize.width / this.mapSize.height;\n\t\tconst far = light.distance || camera.far;\n\n\t\tif ( fov !== camera.fov || aspect !== camera.aspect || far !== camera.far ) {\n\n\t\t\tcamera.fov = fov;\n\t\t\tcamera.aspect = aspect;\n\t\t\tcamera.far = far;\n\t\t\tcamera.updateProjectionMatrix();\n\n\t\t}\n\n\t\tsuper.updateMatrices( light );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.focus = source.focus;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass SpotLight extends Light {\n\n\tconstructor( color, intensity, distance = 0, angle = Math.PI / 3, penumbra = 0, decay = 1 ) {\n\n\t\tsuper( color, intensity );\n\n\t\tthis.isSpotLight = true;\n\n\t\tthis.type = 'SpotLight';\n\n\t\tthis.position.copy( Object3D.DefaultUp );\n\t\tthis.updateMatrix();\n\n\t\tthis.target = new Object3D();\n\n\t\tthis.distance = distance;\n\t\tthis.angle = angle;\n\t\tthis.penumbra = penumbra;\n\t\tthis.decay = decay; // for physically correct lights, should be 2.\n\n\t\tthis.map = null;\n\n\t\tthis.shadow = new SpotLightShadow();\n\n\t}\n\n\tget power() {\n\n\t\t// compute the light's luminous power (in lumens) from its intensity (in candela)\n\t\t// by convention for a spotlight, luminous power (lm) = π * luminous intensity (cd)\n\t\treturn this.intensity * Math.PI;\n\n\t}\n\n\tset power( power ) {\n\n\t\t// set the light's intensity (in candela) from the desired luminous power (in lumens)\n\t\tthis.intensity = power / Math.PI;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.shadow.dispose();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.distance = source.distance;\n\t\tthis.angle = source.angle;\n\t\tthis.penumbra = source.penumbra;\n\t\tthis.decay = source.decay;\n\n\t\tthis.target = source.target.clone();\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _projScreenMatrix = /*@__PURE__*/ new Matrix4();\nconst _lightPositionWorld = /*@__PURE__*/ new Vector3();\nconst _lookTarget = /*@__PURE__*/ new Vector3();\n\nclass PointLightShadow extends LightShadow {\n\n\tconstructor() {\n\n\t\tsuper( new PerspectiveCamera( 90, 1, 0.5, 500 ) );\n\n\t\tthis.isPointLightShadow = true;\n\n\t\tthis._frameExtents = new Vector2( 4, 2 );\n\n\t\tthis._viewportCount = 6;\n\n\t\tthis._viewports = [\n\t\t\t// These viewports map a cube-map onto a 2D texture with the\n\t\t\t// following orientation:\n\t\t\t//\n\t\t\t//  xzXZ\n\t\t\t//   y Y\n\t\t\t//\n\t\t\t// X - Positive x direction\n\t\t\t// x - Negative x direction\n\t\t\t// Y - Positive y direction\n\t\t\t// y - Negative y direction\n\t\t\t// Z - Positive z direction\n\t\t\t// z - Negative z direction\n\n\t\t\t// positive X\n\t\t\tnew Vector4( 2, 1, 1, 1 ),\n\t\t\t// negative X\n\t\t\tnew Vector4( 0, 1, 1, 1 ),\n\t\t\t// positive Z\n\t\t\tnew Vector4( 3, 1, 1, 1 ),\n\t\t\t// negative Z\n\t\t\tnew Vector4( 1, 1, 1, 1 ),\n\t\t\t// positive Y\n\t\t\tnew Vector4( 3, 0, 1, 1 ),\n\t\t\t// negative Y\n\t\t\tnew Vector4( 1, 0, 1, 1 )\n\t\t];\n\n\t\tthis._cubeDirections = [\n\t\t\tnew Vector3( 1, 0, 0 ), new Vector3( - 1, 0, 0 ), new Vector3( 0, 0, 1 ),\n\t\t\tnew Vector3( 0, 0, - 1 ), new Vector3( 0, 1, 0 ), new Vector3( 0, - 1, 0 )\n\t\t];\n\n\t\tthis._cubeUps = [\n\t\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ),\n\t\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 0, 1 ),\tnew Vector3( 0, 0, - 1 )\n\t\t];\n\n\t}\n\n\tupdateMatrices( light, viewportIndex = 0 ) {\n\n\t\tconst camera = this.camera;\n\t\tconst shadowMatrix = this.matrix;\n\n\t\tconst far = light.distance || camera.far;\n\n\t\tif ( far !== camera.far ) {\n\n\t\t\tcamera.far = far;\n\t\t\tcamera.updateProjectionMatrix();\n\n\t\t}\n\n\t\t_lightPositionWorld.setFromMatrixPosition( light.matrixWorld );\n\t\tcamera.position.copy( _lightPositionWorld );\n\n\t\t_lookTarget.copy( camera.position );\n\t\t_lookTarget.add( this._cubeDirections[ viewportIndex ] );\n\t\tcamera.up.copy( this._cubeUps[ viewportIndex ] );\n\t\tcamera.lookAt( _lookTarget );\n\t\tcamera.updateMatrixWorld();\n\n\t\tshadowMatrix.makeTranslation( - _lightPositionWorld.x, - _lightPositionWorld.y, - _lightPositionWorld.z );\n\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\tthis._frustum.setFromProjectionMatrix( _projScreenMatrix );\n\n\t}\n\n}\n\nclass PointLight extends Light {\n\n\tconstructor( color, intensity, distance = 0, decay = 1 ) {\n\n\t\tsuper( color, intensity );\n\n\t\tthis.isPointLight = true;\n\n\t\tthis.type = 'PointLight';\n\n\t\tthis.distance = distance;\n\t\tthis.decay = decay; // for physically correct lights, should be 2.\n\n\t\tthis.shadow = new PointLightShadow();\n\n\t}\n\n\tget power() {\n\n\t\t// compute the light's luminous power (in lumens) from its intensity (in candela)\n\t\t// for an isotropic light source, luminous power (lm) = 4 π luminous intensity (cd)\n\t\treturn this.intensity * 4 * Math.PI;\n\n\t}\n\n\tset power( power ) {\n\n\t\t// set the light's intensity (in candela) from the desired luminous power (in lumens)\n\t\tthis.intensity = power / ( 4 * Math.PI );\n\n\t}\n\n\tdispose() {\n\n\t\tthis.shadow.dispose();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.distance = source.distance;\n\t\tthis.decay = source.decay;\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass DirectionalLightShadow extends LightShadow {\n\n\tconstructor() {\n\n\t\tsuper( new OrthographicCamera( - 5, 5, 5, - 5, 0.5, 500 ) );\n\n\t\tthis.isDirectionalLightShadow = true;\n\n\t}\n\n}\n\nclass DirectionalLight extends Light {\n\n\tconstructor( color, intensity ) {\n\n\t\tsuper( color, intensity );\n\n\t\tthis.isDirectionalLight = true;\n\n\t\tthis.type = 'DirectionalLight';\n\n\t\tthis.position.copy( Object3D.DefaultUp );\n\t\tthis.updateMatrix();\n\n\t\tthis.target = new Object3D();\n\n\t\tthis.shadow = new DirectionalLightShadow();\n\n\t}\n\n\tdispose() {\n\n\t\tthis.shadow.dispose();\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.target = source.target.clone();\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass AmbientLight extends Light {\n\n\tconstructor( color, intensity ) {\n\n\t\tsuper( color, intensity );\n\n\t\tthis.isAmbientLight = true;\n\n\t\tthis.type = 'AmbientLight';\n\n\t}\n\n}\n\nclass RectAreaLight extends Light {\n\n\tconstructor( color, intensity, width = 10, height = 10 ) {\n\n\t\tsuper( color, intensity );\n\n\t\tthis.isRectAreaLight = true;\n\n\t\tthis.type = 'RectAreaLight';\n\n\t\tthis.width = width;\n\t\tthis.height = height;\n\n\t}\n\n\tget power() {\n\n\t\t// compute the light's luminous power (in lumens) from its intensity (in nits)\n\t\treturn this.intensity * this.width * this.height * Math.PI;\n\n\t}\n\n\tset power( power ) {\n\n\t\t// set the light's intensity (in nits) from the desired luminous power (in lumens)\n\t\tthis.intensity = power / ( this.width * this.height * Math.PI );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tdata.object.width = this.width;\n\t\tdata.object.height = this.height;\n\n\t\treturn data;\n\n\t}\n\n}\n\n/**\n * Primary reference:\n *   https://graphics.stanford.edu/papers/envmap/envmap.pdf\n *\n * Secondary reference:\n *   https://www.ppsloan.org/publications/StupidSH36.pdf\n */\n\n// 3-band SH defined by 9 coefficients\n\nclass SphericalHarmonics3 {\n\n\tconstructor() {\n\n\t\tthis.isSphericalHarmonics3 = true;\n\n\t\tthis.coefficients = [];\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients.push( new Vector3() );\n\n\t\t}\n\n\t}\n\n\tset( coefficients ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].copy( coefficients[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tzero() {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].set( 0, 0, 0 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// get the radiance in the direction of the normal\n\t// target is a Vector3\n\tgetAt( normal, target ) {\n\n\t\t// normal is assumed to be unit length\n\n\t\tconst x = normal.x, y = normal.y, z = normal.z;\n\n\t\tconst coeff = this.coefficients;\n\n\t\t// band 0\n\t\ttarget.copy( coeff[ 0 ] ).multiplyScalar( 0.282095 );\n\n\t\t// band 1\n\t\ttarget.addScaledVector( coeff[ 1 ], 0.488603 * y );\n\t\ttarget.addScaledVector( coeff[ 2 ], 0.488603 * z );\n\t\ttarget.addScaledVector( coeff[ 3 ], 0.488603 * x );\n\n\t\t// band 2\n\t\ttarget.addScaledVector( coeff[ 4 ], 1.092548 * ( x * y ) );\n\t\ttarget.addScaledVector( coeff[ 5 ], 1.092548 * ( y * z ) );\n\t\ttarget.addScaledVector( coeff[ 6 ], 0.315392 * ( 3.0 * z * z - 1.0 ) );\n\t\ttarget.addScaledVector( coeff[ 7 ], 1.092548 * ( x * z ) );\n\t\ttarget.addScaledVector( coeff[ 8 ], 0.546274 * ( x * x - y * y ) );\n\n\t\treturn target;\n\n\t}\n\n\t// get the irradiance (radiance convolved with cosine lobe) in the direction of the normal\n\t// target is a Vector3\n\t// https://graphics.stanford.edu/papers/envmap/envmap.pdf\n\tgetIrradianceAt( normal, target ) {\n\n\t\t// normal is assumed to be unit length\n\n\t\tconst x = normal.x, y = normal.y, z = normal.z;\n\n\t\tconst coeff = this.coefficients;\n\n\t\t// band 0\n\t\ttarget.copy( coeff[ 0 ] ).multiplyScalar( 0.886227 ); // π * 0.282095\n\n\t\t// band 1\n\t\ttarget.addScaledVector( coeff[ 1 ], 2.0 * 0.511664 * y ); // ( 2 * π / 3 ) * 0.488603\n\t\ttarget.addScaledVector( coeff[ 2 ], 2.0 * 0.511664 * z );\n\t\ttarget.addScaledVector( coeff[ 3 ], 2.0 * 0.511664 * x );\n\n\t\t// band 2\n\t\ttarget.addScaledVector( coeff[ 4 ], 2.0 * 0.429043 * x * y ); // ( π / 4 ) * 1.092548\n\t\ttarget.addScaledVector( coeff[ 5 ], 2.0 * 0.429043 * y * z );\n\t\ttarget.addScaledVector( coeff[ 6 ], 0.743125 * z * z - 0.247708 ); // ( π / 4 ) * 0.315392 * 3\n\t\ttarget.addScaledVector( coeff[ 7 ], 2.0 * 0.429043 * x * z );\n\t\ttarget.addScaledVector( coeff[ 8 ], 0.429043 * ( x * x - y * y ) ); // ( π / 4 ) * 0.546274\n\n\t\treturn target;\n\n\t}\n\n\tadd( sh ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].add( sh.coefficients[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\taddScaledSH( sh, s ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].addScaledVector( sh.coefficients[ i ], s );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tscale( s ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].multiplyScalar( s );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tlerp( sh, alpha ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].lerp( sh.coefficients[ i ], alpha );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tequals( sh ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tif ( ! this.coefficients[ i ].equals( sh.coefficients[ i ] ) ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tcopy( sh ) {\n\n\t\treturn this.set( sh.coefficients );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tconst coefficients = this.coefficients;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tcoefficients[ i ].fromArray( array, offset + ( i * 3 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tconst coefficients = this.coefficients;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tcoefficients[ i ].toArray( array, offset + ( i * 3 ) );\n\n\t\t}\n\n\t\treturn array;\n\n\t}\n\n\t// evaluate the basis functions\n\t// shBasis is an Array[ 9 ]\n\tstatic getBasisAt( normal, shBasis ) {\n\n\t\t// normal is assumed to be unit length\n\n\t\tconst x = normal.x, y = normal.y, z = normal.z;\n\n\t\t// band 0\n\t\tshBasis[ 0 ] = 0.282095;\n\n\t\t// band 1\n\t\tshBasis[ 1 ] = 0.488603 * y;\n\t\tshBasis[ 2 ] = 0.488603 * z;\n\t\tshBasis[ 3 ] = 0.488603 * x;\n\n\t\t// band 2\n\t\tshBasis[ 4 ] = 1.092548 * x * y;\n\t\tshBasis[ 5 ] = 1.092548 * y * z;\n\t\tshBasis[ 6 ] = 0.315392 * ( 3 * z * z - 1 );\n\t\tshBasis[ 7 ] = 1.092548 * x * z;\n\t\tshBasis[ 8 ] = 0.546274 * ( x * x - y * y );\n\n\t}\n\n}\n\nclass LightProbe extends Light {\n\n\tconstructor( sh = new SphericalHarmonics3(), intensity = 1 ) {\n\n\t\tsuper( undefined, intensity );\n\n\t\tthis.isLightProbe = true;\n\n\t\tthis.sh = sh;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.sh.copy( source.sh );\n\n\t\treturn this;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tthis.intensity = json.intensity; // TODO: Move this bit to Light.fromJSON();\n\t\tthis.sh.fromArray( json.sh );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tdata.object.sh = this.sh.toArray();\n\n\t\treturn data;\n\n\t}\n\n}\n\nclass MaterialLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\t\tthis.textures = {};\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( scope.manager );\n\t\tloader.setPath( scope.path );\n\t\tloader.setRequestHeader( scope.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tparse( json ) {\n\n\t\tconst textures = this.textures;\n\n\t\tfunction getTexture( name ) {\n\n\t\t\tif ( textures[ name ] === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.MaterialLoader: Undefined texture', name );\n\n\t\t\t}\n\n\t\t\treturn textures[ name ];\n\n\t\t}\n\n\t\tconst material = MaterialLoader.createMaterialFromType( json.type );\n\n\t\tif ( json.uuid !== undefined ) material.uuid = json.uuid;\n\t\tif ( json.name !== undefined ) material.name = json.name;\n\t\tif ( json.color !== undefined && material.color !== undefined ) material.color.setHex( json.color );\n\t\tif ( json.roughness !== undefined ) material.roughness = json.roughness;\n\t\tif ( json.metalness !== undefined ) material.metalness = json.metalness;\n\t\tif ( json.sheen !== undefined ) material.sheen = json.sheen;\n\t\tif ( json.sheenColor !== undefined ) material.sheenColor = new Color().setHex( json.sheenColor );\n\t\tif ( json.sheenRoughness !== undefined ) material.sheenRoughness = json.sheenRoughness;\n\t\tif ( json.emissive !== undefined && material.emissive !== undefined ) material.emissive.setHex( json.emissive );\n\t\tif ( json.specular !== undefined && material.specular !== undefined ) material.specular.setHex( json.specular );\n\t\tif ( json.specularIntensity !== undefined ) material.specularIntensity = json.specularIntensity;\n\t\tif ( json.specularColor !== undefined && material.specularColor !== undefined ) material.specularColor.setHex( json.specularColor );\n\t\tif ( json.shininess !== undefined ) material.shininess = json.shininess;\n\t\tif ( json.clearcoat !== undefined ) material.clearcoat = json.clearcoat;\n\t\tif ( json.clearcoatRoughness !== undefined ) material.clearcoatRoughness = json.clearcoatRoughness;\n\t\tif ( json.iridescence !== undefined ) material.iridescence = json.iridescence;\n\t\tif ( json.iridescenceIOR !== undefined ) material.iridescenceIOR = json.iridescenceIOR;\n\t\tif ( json.iridescenceThicknessRange !== undefined ) material.iridescenceThicknessRange = json.iridescenceThicknessRange;\n\t\tif ( json.transmission !== undefined ) material.transmission = json.transmission;\n\t\tif ( json.thickness !== undefined ) material.thickness = json.thickness;\n\t\tif ( json.attenuationDistance !== undefined ) material.attenuationDistance = json.attenuationDistance;\n\t\tif ( json.attenuationColor !== undefined && material.attenuationColor !== undefined ) material.attenuationColor.setHex( json.attenuationColor );\n\t\tif ( json.fog !== undefined ) material.fog = json.fog;\n\t\tif ( json.flatShading !== undefined ) material.flatShading = json.flatShading;\n\t\tif ( json.blending !== undefined ) material.blending = json.blending;\n\t\tif ( json.combine !== undefined ) material.combine = json.combine;\n\t\tif ( json.side !== undefined ) material.side = json.side;\n\t\tif ( json.shadowSide !== undefined ) material.shadowSide = json.shadowSide;\n\t\tif ( json.opacity !== undefined ) material.opacity = json.opacity;\n\t\tif ( json.transparent !== undefined ) material.transparent = json.transparent;\n\t\tif ( json.alphaTest !== undefined ) material.alphaTest = json.alphaTest;\n\t\tif ( json.depthTest !== undefined ) material.depthTest = json.depthTest;\n\t\tif ( json.depthWrite !== undefined ) material.depthWrite = json.depthWrite;\n\t\tif ( json.colorWrite !== undefined ) material.colorWrite = json.colorWrite;\n\n\t\tif ( json.stencilWrite !== undefined ) material.stencilWrite = json.stencilWrite;\n\t\tif ( json.stencilWriteMask !== undefined ) material.stencilWriteMask = json.stencilWriteMask;\n\t\tif ( json.stencilFunc !== undefined ) material.stencilFunc = json.stencilFunc;\n\t\tif ( json.stencilRef !== undefined ) material.stencilRef = json.stencilRef;\n\t\tif ( json.stencilFuncMask !== undefined ) material.stencilFuncMask = json.stencilFuncMask;\n\t\tif ( json.stencilFail !== undefined ) material.stencilFail = json.stencilFail;\n\t\tif ( json.stencilZFail !== undefined ) material.stencilZFail = json.stencilZFail;\n\t\tif ( json.stencilZPass !== undefined ) material.stencilZPass = json.stencilZPass;\n\n\t\tif ( json.wireframe !== undefined ) material.wireframe = json.wireframe;\n\t\tif ( json.wireframeLinewidth !== undefined ) material.wireframeLinewidth = json.wireframeLinewidth;\n\t\tif ( json.wireframeLinecap !== undefined ) material.wireframeLinecap = json.wireframeLinecap;\n\t\tif ( json.wireframeLinejoin !== undefined ) material.wireframeLinejoin = json.wireframeLinejoin;\n\n\t\tif ( json.rotation !== undefined ) material.rotation = json.rotation;\n\n\t\tif ( json.linewidth !== 1 ) material.linewidth = json.linewidth;\n\t\tif ( json.dashSize !== undefined ) material.dashSize = json.dashSize;\n\t\tif ( json.gapSize !== undefined ) material.gapSize = json.gapSize;\n\t\tif ( json.scale !== undefined ) material.scale = json.scale;\n\n\t\tif ( json.polygonOffset !== undefined ) material.polygonOffset = json.polygonOffset;\n\t\tif ( json.polygonOffsetFactor !== undefined ) material.polygonOffsetFactor = json.polygonOffsetFactor;\n\t\tif ( json.polygonOffsetUnits !== undefined ) material.polygonOffsetUnits = json.polygonOffsetUnits;\n\n\t\tif ( json.dithering !== undefined ) material.dithering = json.dithering;\n\n\t\tif ( json.alphaToCoverage !== undefined ) material.alphaToCoverage = json.alphaToCoverage;\n\t\tif ( json.premultipliedAlpha !== undefined ) material.premultipliedAlpha = json.premultipliedAlpha;\n\n\t\tif ( json.visible !== undefined ) material.visible = json.visible;\n\n\t\tif ( json.toneMapped !== undefined ) material.toneMapped = json.toneMapped;\n\n\t\tif ( json.userData !== undefined ) material.userData = json.userData;\n\n\t\tif ( json.vertexColors !== undefined ) {\n\n\t\t\tif ( typeof json.vertexColors === 'number' ) {\n\n\t\t\t\tmaterial.vertexColors = ( json.vertexColors > 0 ) ? true : false;\n\n\t\t\t} else {\n\n\t\t\t\tmaterial.vertexColors = json.vertexColors;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Shader Material\n\n\t\tif ( json.uniforms !== undefined ) {\n\n\t\t\tfor ( const name in json.uniforms ) {\n\n\t\t\t\tconst uniform = json.uniforms[ name ];\n\n\t\t\t\tmaterial.uniforms[ name ] = {};\n\n\t\t\t\tswitch ( uniform.type ) {\n\n\t\t\t\t\tcase 't':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = getTexture( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'c':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Color().setHex( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v2':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector2().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v3':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector3().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v4':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector4().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'm3':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Matrix3().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'm4':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Matrix4().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = uniform.value;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( json.defines !== undefined ) material.defines = json.defines;\n\t\tif ( json.vertexShader !== undefined ) material.vertexShader = json.vertexShader;\n\t\tif ( json.fragmentShader !== undefined ) material.fragmentShader = json.fragmentShader;\n\t\tif ( json.glslVersion !== undefined ) material.glslVersion = json.glslVersion;\n\n\t\tif ( json.extensions !== undefined ) {\n\n\t\t\tfor ( const key in json.extensions ) {\n\n\t\t\t\tmaterial.extensions[ key ] = json.extensions[ key ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// for PointsMaterial\n\n\t\tif ( json.size !== undefined ) material.size = json.size;\n\t\tif ( json.sizeAttenuation !== undefined ) material.sizeAttenuation = json.sizeAttenuation;\n\n\t\t// maps\n\n\t\tif ( json.map !== undefined ) material.map = getTexture( json.map );\n\t\tif ( json.matcap !== undefined ) material.matcap = getTexture( json.matcap );\n\n\t\tif ( json.alphaMap !== undefined ) material.alphaMap = getTexture( json.alphaMap );\n\n\t\tif ( json.bumpMap !== undefined ) material.bumpMap = getTexture( json.bumpMap );\n\t\tif ( json.bumpScale !== undefined ) material.bumpScale = json.bumpScale;\n\n\t\tif ( json.normalMap !== undefined ) material.normalMap = getTexture( json.normalMap );\n\t\tif ( json.normalMapType !== undefined ) material.normalMapType = json.normalMapType;\n\t\tif ( json.normalScale !== undefined ) {\n\n\t\t\tlet normalScale = json.normalScale;\n\n\t\t\tif ( Array.isArray( normalScale ) === false ) {\n\n\t\t\t\t// Blender exporter used to export a scalar. See #7459\n\n\t\t\t\tnormalScale = [ normalScale, normalScale ];\n\n\t\t\t}\n\n\t\t\tmaterial.normalScale = new Vector2().fromArray( normalScale );\n\n\t\t}\n\n\t\tif ( json.displacementMap !== undefined ) material.displacementMap = getTexture( json.displacementMap );\n\t\tif ( json.displacementScale !== undefined ) material.displacementScale = json.displacementScale;\n\t\tif ( json.displacementBias !== undefined ) material.displacementBias = json.displacementBias;\n\n\t\tif ( json.roughnessMap !== undefined ) material.roughnessMap = getTexture( json.roughnessMap );\n\t\tif ( json.metalnessMap !== undefined ) material.metalnessMap = getTexture( json.metalnessMap );\n\n\t\tif ( json.emissiveMap !== undefined ) material.emissiveMap = getTexture( json.emissiveMap );\n\t\tif ( json.emissiveIntensity !== undefined ) material.emissiveIntensity = json.emissiveIntensity;\n\n\t\tif ( json.specularMap !== undefined ) material.specularMap = getTexture( json.specularMap );\n\t\tif ( json.specularIntensityMap !== undefined ) material.specularIntensityMap = getTexture( json.specularIntensityMap );\n\t\tif ( json.specularColorMap !== undefined ) material.specularColorMap = getTexture( json.specularColorMap );\n\n\t\tif ( json.envMap !== undefined ) material.envMap = getTexture( json.envMap );\n\t\tif ( json.envMapIntensity !== undefined ) material.envMapIntensity = json.envMapIntensity;\n\n\t\tif ( json.reflectivity !== undefined ) material.reflectivity = json.reflectivity;\n\t\tif ( json.refractionRatio !== undefined ) material.refractionRatio = json.refractionRatio;\n\n\t\tif ( json.lightMap !== undefined ) material.lightMap = getTexture( json.lightMap );\n\t\tif ( json.lightMapIntensity !== undefined ) material.lightMapIntensity = json.lightMapIntensity;\n\n\t\tif ( json.aoMap !== undefined ) material.aoMap = getTexture( json.aoMap );\n\t\tif ( json.aoMapIntensity !== undefined ) material.aoMapIntensity = json.aoMapIntensity;\n\n\t\tif ( json.gradientMap !== undefined ) material.gradientMap = getTexture( json.gradientMap );\n\n\t\tif ( json.clearcoatMap !== undefined ) material.clearcoatMap = getTexture( json.clearcoatMap );\n\t\tif ( json.clearcoatRoughnessMap !== undefined ) material.clearcoatRoughnessMap = getTexture( json.clearcoatRoughnessMap );\n\t\tif ( json.clearcoatNormalMap !== undefined ) material.clearcoatNormalMap = getTexture( json.clearcoatNormalMap );\n\t\tif ( json.clearcoatNormalScale !== undefined ) material.clearcoatNormalScale = new Vector2().fromArray( json.clearcoatNormalScale );\n\n\t\tif ( json.iridescenceMap !== undefined ) material.iridescenceMap = getTexture( json.iridescenceMap );\n\t\tif ( json.iridescenceThicknessMap !== undefined ) material.iridescenceThicknessMap = getTexture( json.iridescenceThicknessMap );\n\n\t\tif ( json.transmissionMap !== undefined ) material.transmissionMap = getTexture( json.transmissionMap );\n\t\tif ( json.thicknessMap !== undefined ) material.thicknessMap = getTexture( json.thicknessMap );\n\n\t\tif ( json.sheenColorMap !== undefined ) material.sheenColorMap = getTexture( json.sheenColorMap );\n\t\tif ( json.sheenRoughnessMap !== undefined ) material.sheenRoughnessMap = getTexture( json.sheenRoughnessMap );\n\n\t\treturn material;\n\n\t}\n\n\tsetTextures( value ) {\n\n\t\tthis.textures = value;\n\t\treturn this;\n\n\t}\n\n\tstatic createMaterialFromType( type ) {\n\n\t\tconst materialLib = {\n\t\t\tShadowMaterial,\n\t\t\tSpriteMaterial,\n\t\t\tRawShaderMaterial,\n\t\t\tShaderMaterial,\n\t\t\tPointsMaterial,\n\t\t\tMeshPhysicalMaterial,\n\t\t\tMeshStandardMaterial,\n\t\t\tMeshPhongMaterial,\n\t\t\tMeshToonMaterial,\n\t\t\tMeshNormalMaterial,\n\t\t\tMeshLambertMaterial,\n\t\t\tMeshDepthMaterial,\n\t\t\tMeshDistanceMaterial,\n\t\t\tMeshBasicMaterial,\n\t\t\tMeshMatcapMaterial,\n\t\t\tLineDashedMaterial,\n\t\t\tLineBasicMaterial,\n\t\t\tMaterial\n\t\t};\n\n\t\treturn new materialLib[ type ]();\n\n\t}\n\n}\n\nclass LoaderUtils {\n\n\tstatic decodeText( array ) {\n\n\t\tif ( typeof TextDecoder !== 'undefined' ) {\n\n\t\t\treturn new TextDecoder().decode( array );\n\n\t\t}\n\n\t\t// Avoid the String.fromCharCode.apply(null, array) shortcut, which\n\t\t// throws a \"maximum call stack size exceeded\" error for large arrays.\n\n\t\tlet s = '';\n\n\t\tfor ( let i = 0, il = array.length; i < il; i ++ ) {\n\n\t\t\t// Implicitly assumes little-endian.\n\t\t\ts += String.fromCharCode( array[ i ] );\n\n\t\t}\n\n\t\ttry {\n\n\t\t\t// merges multi-byte utf-8 characters.\n\n\t\t\treturn decodeURIComponent( escape( s ) );\n\n\t\t} catch ( e ) { // see #16358\n\n\t\t\treturn s;\n\n\t\t}\n\n\t}\n\n\tstatic extractUrlBase( url ) {\n\n\t\tconst index = url.lastIndexOf( '/' );\n\n\t\tif ( index === - 1 ) return './';\n\n\t\treturn url.slice( 0, index + 1 );\n\n\t}\n\n\tstatic resolveURL( url, path ) {\n\n\t\t// Invalid URL\n\t\tif ( typeof url !== 'string' || url === '' ) return '';\n\n\t\t// Host Relative URL\n\t\tif ( /^https?:\\/\\//i.test( path ) && /^\\//.test( url ) ) {\n\n\t\t\tpath = path.replace( /(^https?:\\/\\/[^\\/]+).*/i, '$1' );\n\n\t\t}\n\n\t\t// Absolute URL http://,https://,//\n\t\tif ( /^(https?:)?\\/\\//i.test( url ) ) return url;\n\n\t\t// Data URI\n\t\tif ( /^data:.*,.*$/i.test( url ) ) return url;\n\n\t\t// Blob URL\n\t\tif ( /^blob:.*$/i.test( url ) ) return url;\n\n\t\t// Relative URL\n\t\treturn path + url;\n\n\t}\n\n}\n\nclass InstancedBufferGeometry extends BufferGeometry {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isInstancedBufferGeometry = true;\n\n\t\tthis.type = 'InstancedBufferGeometry';\n\t\tthis.instanceCount = Infinity;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.instanceCount = source.instanceCount;\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON( this );\n\n\t\tdata.instanceCount = this.instanceCount;\n\n\t\tdata.isInstancedBufferGeometry = true;\n\n\t\treturn data;\n\n\t}\n\n}\n\nclass BufferGeometryLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( scope.manager );\n\t\tloader.setPath( scope.path );\n\t\tloader.setRequestHeader( scope.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tparse( json ) {\n\n\t\tconst interleavedBufferMap = {};\n\t\tconst arrayBufferMap = {};\n\n\t\tfunction getInterleavedBuffer( json, uuid ) {\n\n\t\t\tif ( interleavedBufferMap[ uuid ] !== undefined ) return interleavedBufferMap[ uuid ];\n\n\t\t\tconst interleavedBuffers = json.interleavedBuffers;\n\t\t\tconst interleavedBuffer = interleavedBuffers[ uuid ];\n\n\t\t\tconst buffer = getArrayBuffer( json, interleavedBuffer.buffer );\n\n\t\t\tconst array = getTypedArray( interleavedBuffer.type, buffer );\n\t\t\tconst ib = new InterleavedBuffer( array, interleavedBuffer.stride );\n\t\t\tib.uuid = interleavedBuffer.uuid;\n\n\t\t\tinterleavedBufferMap[ uuid ] = ib;\n\n\t\t\treturn ib;\n\n\t\t}\n\n\t\tfunction getArrayBuffer( json, uuid ) {\n\n\t\t\tif ( arrayBufferMap[ uuid ] !== undefined ) return arrayBufferMap[ uuid ];\n\n\t\t\tconst arrayBuffers = json.arrayBuffers;\n\t\t\tconst arrayBuffer = arrayBuffers[ uuid ];\n\n\t\t\tconst ab = new Uint32Array( arrayBuffer ).buffer;\n\n\t\t\tarrayBufferMap[ uuid ] = ab;\n\n\t\t\treturn ab;\n\n\t\t}\n\n\t\tconst geometry = json.isInstancedBufferGeometry ? new InstancedBufferGeometry() : new BufferGeometry();\n\n\t\tconst index = json.data.index;\n\n\t\tif ( index !== undefined ) {\n\n\t\t\tconst typedArray = getTypedArray( index.type, index.array );\n\t\t\tgeometry.setIndex( new BufferAttribute( typedArray, 1 ) );\n\n\t\t}\n\n\t\tconst attributes = json.data.attributes;\n\n\t\tfor ( const key in attributes ) {\n\n\t\t\tconst attribute = attributes[ key ];\n\t\t\tlet bufferAttribute;\n\n\t\t\tif ( attribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\tconst interleavedBuffer = getInterleavedBuffer( json.data, attribute.data );\n\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( interleavedBuffer, attribute.itemSize, attribute.offset, attribute.normalized );\n\n\t\t\t} else {\n\n\t\t\t\tconst typedArray = getTypedArray( attribute.type, attribute.array );\n\t\t\t\tconst bufferAttributeConstr = attribute.isInstancedBufferAttribute ? InstancedBufferAttribute : BufferAttribute;\n\t\t\t\tbufferAttribute = new bufferAttributeConstr( typedArray, attribute.itemSize, attribute.normalized );\n\n\t\t\t}\n\n\t\t\tif ( attribute.name !== undefined ) bufferAttribute.name = attribute.name;\n\t\t\tif ( attribute.usage !== undefined ) bufferAttribute.setUsage( attribute.usage );\n\n\t\t\tif ( attribute.updateRange !== undefined ) {\n\n\t\t\t\tbufferAttribute.updateRange.offset = attribute.updateRange.offset;\n\t\t\t\tbufferAttribute.updateRange.count = attribute.updateRange.count;\n\n\t\t\t}\n\n\t\t\tgeometry.setAttribute( key, bufferAttribute );\n\n\t\t}\n\n\t\tconst morphAttributes = json.data.morphAttributes;\n\n\t\tif ( morphAttributes ) {\n\n\t\t\tfor ( const key in morphAttributes ) {\n\n\t\t\t\tconst attributeArray = morphAttributes[ key ];\n\n\t\t\t\tconst array = [];\n\n\t\t\t\tfor ( let i = 0, il = attributeArray.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst attribute = attributeArray[ i ];\n\t\t\t\t\tlet bufferAttribute;\n\n\t\t\t\t\tif ( attribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\t\t\tconst interleavedBuffer = getInterleavedBuffer( json.data, attribute.data );\n\t\t\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( interleavedBuffer, attribute.itemSize, attribute.offset, attribute.normalized );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconst typedArray = getTypedArray( attribute.type, attribute.array );\n\t\t\t\t\t\tbufferAttribute = new BufferAttribute( typedArray, attribute.itemSize, attribute.normalized );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attribute.name !== undefined ) bufferAttribute.name = attribute.name;\n\t\t\t\t\tarray.push( bufferAttribute );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.morphAttributes[ key ] = array;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst morphTargetsRelative = json.data.morphTargetsRelative;\n\n\t\tif ( morphTargetsRelative ) {\n\n\t\t\tgeometry.morphTargetsRelative = true;\n\n\t\t}\n\n\t\tconst groups = json.data.groups || json.data.drawcalls || json.data.offsets;\n\n\t\tif ( groups !== undefined ) {\n\n\t\t\tfor ( let i = 0, n = groups.length; i !== n; ++ i ) {\n\n\t\t\t\tconst group = groups[ i ];\n\n\t\t\t\tgeometry.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst boundingSphere = json.data.boundingSphere;\n\n\t\tif ( boundingSphere !== undefined ) {\n\n\t\t\tconst center = new Vector3();\n\n\t\t\tif ( boundingSphere.center !== undefined ) {\n\n\t\t\t\tcenter.fromArray( boundingSphere.center );\n\n\t\t\t}\n\n\t\t\tgeometry.boundingSphere = new Sphere( center, boundingSphere.radius );\n\n\t\t}\n\n\t\tif ( json.name ) geometry.name = json.name;\n\t\tif ( json.userData ) geometry.userData = json.userData;\n\n\t\treturn geometry;\n\n\t}\n\n}\n\nclass ObjectLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst path = ( this.path === '' ) ? LoaderUtils.extractUrlBase( url ) : this.path;\n\t\tthis.resourcePath = this.resourcePath || path;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tlet json = null;\n\n\t\t\ttry {\n\n\t\t\t\tjson = JSON.parse( text );\n\n\t\t\t} catch ( error ) {\n\n\t\t\t\tif ( onError !== undefined ) onError( error );\n\n\t\t\t\tconsole.error( 'THREE:ObjectLoader: Can\\'t parse ' + url + '.', error.message );\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tconst metadata = json.metadata;\n\n\t\t\tif ( metadata === undefined || metadata.type === undefined || metadata.type.toLowerCase() === 'geometry' ) {\n\n\t\t\t\tconsole.error( 'THREE.ObjectLoader: Can\\'t load ' + url );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tscope.parse( json, onLoad );\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tasync loadAsync( url, onProgress ) {\n\n\t\tconst scope = this;\n\n\t\tconst path = ( this.path === '' ) ? LoaderUtils.extractUrlBase( url ) : this.path;\n\t\tthis.resourcePath = this.resourcePath || path;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tconst text = await loader.loadAsync( url, onProgress );\n\n\t\tconst json = JSON.parse( text );\n\n\t\tconst metadata = json.metadata;\n\n\t\tif ( metadata === undefined || metadata.type === undefined || metadata.type.toLowerCase() === 'geometry' ) {\n\n\t\t\tthrow new Error( 'THREE.ObjectLoader: Can\\'t load ' + url );\n\n\t\t}\n\n\t\treturn await scope.parseAsync( json );\n\n\t}\n\n\tparse( json, onLoad ) {\n\n\t\tconst animations = this.parseAnimations( json.animations );\n\t\tconst shapes = this.parseShapes( json.shapes );\n\t\tconst geometries = this.parseGeometries( json.geometries, shapes );\n\n\t\tconst images = this.parseImages( json.images, function () {\n\n\t\t\tif ( onLoad !== undefined ) onLoad( object );\n\n\t\t} );\n\n\t\tconst textures = this.parseTextures( json.textures, images );\n\t\tconst materials = this.parseMaterials( json.materials, textures );\n\n\t\tconst object = this.parseObject( json.object, geometries, materials, textures, animations );\n\t\tconst skeletons = this.parseSkeletons( json.skeletons, object );\n\n\t\tthis.bindSkeletons( object, skeletons );\n\n\t\t//\n\n\t\tif ( onLoad !== undefined ) {\n\n\t\t\tlet hasImages = false;\n\n\t\t\tfor ( const uuid in images ) {\n\n\t\t\t\tif ( images[ uuid ].data instanceof HTMLImageElement ) {\n\n\t\t\t\t\thasImages = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( hasImages === false ) onLoad( object );\n\n\t\t}\n\n\t\treturn object;\n\n\t}\n\n\tasync parseAsync( json ) {\n\n\t\tconst animations = this.parseAnimations( json.animations );\n\t\tconst shapes = this.parseShapes( json.shapes );\n\t\tconst geometries = this.parseGeometries( json.geometries, shapes );\n\n\t\tconst images = await this.parseImagesAsync( json.images );\n\n\t\tconst textures = this.parseTextures( json.textures, images );\n\t\tconst materials = this.parseMaterials( json.materials, textures );\n\n\t\tconst object = this.parseObject( json.object, geometries, materials, textures, animations );\n\t\tconst skeletons = this.parseSkeletons( json.skeletons, object );\n\n\t\tthis.bindSkeletons( object, skeletons );\n\n\t\treturn object;\n\n\t}\n\n\tparseShapes( json ) {\n\n\t\tconst shapes = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tconst shape = new Shape().fromJSON( json[ i ] );\n\n\t\t\t\tshapes[ shape.uuid ] = shape;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn shapes;\n\n\t}\n\n\tparseSkeletons( json, object ) {\n\n\t\tconst skeletons = {};\n\t\tconst bones = {};\n\n\t\t// generate bone lookup table\n\n\t\tobject.traverse( function ( child ) {\n\n\t\t\tif ( child.isBone ) bones[ child.uuid ] = child;\n\n\t\t} );\n\n\t\t// create skeletons\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tconst skeleton = new Skeleton().fromJSON( json[ i ], bones );\n\n\t\t\t\tskeletons[ skeleton.uuid ] = skeleton;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn skeletons;\n\n\t}\n\n\tparseGeometries( json, shapes ) {\n\n\t\tconst geometries = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tconst bufferGeometryLoader = new BufferGeometryLoader();\n\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tlet geometry;\n\t\t\t\tconst data = json[ i ];\n\n\t\t\t\tswitch ( data.type ) {\n\n\t\t\t\t\tcase 'BufferGeometry':\n\t\t\t\t\tcase 'InstancedBufferGeometry':\n\n\t\t\t\t\t\tgeometry = bufferGeometryLoader.parse( data );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tif ( data.type in Geometries ) {\n\n\t\t\t\t\t\t\tgeometry = Geometries[ data.type ].fromJSON( data, shapes );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tconsole.warn( `THREE.ObjectLoader: Unsupported geometry type \"${ data.type }\"` );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.uuid = data.uuid;\n\n\t\t\t\tif ( data.name !== undefined ) geometry.name = data.name;\n\t\t\t\tif ( geometry.isBufferGeometry === true && data.userData !== undefined ) geometry.userData = data.userData;\n\n\t\t\t\tgeometries[ data.uuid ] = geometry;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn geometries;\n\n\t}\n\n\tparseMaterials( json, textures ) {\n\n\t\tconst cache = {}; // MultiMaterial\n\t\tconst materials = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tconst loader = new MaterialLoader();\n\t\t\tloader.setTextures( textures );\n\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tconst data = json[ i ];\n\n\t\t\t\tif ( cache[ data.uuid ] === undefined ) {\n\n\t\t\t\t\tcache[ data.uuid ] = loader.parse( data );\n\n\t\t\t\t}\n\n\t\t\t\tmaterials[ data.uuid ] = cache[ data.uuid ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn materials;\n\n\t}\n\n\tparseAnimations( json ) {\n\n\t\tconst animations = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tfor ( let i = 0; i < json.length; i ++ ) {\n\n\t\t\t\tconst data = json[ i ];\n\n\t\t\t\tconst clip = AnimationClip.parse( data );\n\n\t\t\t\tanimations[ clip.uuid ] = clip;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn animations;\n\n\t}\n\n\tparseImages( json, onLoad ) {\n\n\t\tconst scope = this;\n\t\tconst images = {};\n\n\t\tlet loader;\n\n\t\tfunction loadImage( url ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\treturn loader.load( url, function () {\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, undefined, function () {\n\n\t\t\t\tscope.manager.itemError( url );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t} );\n\n\t\t}\n\n\t\tfunction deserializeImage( image ) {\n\n\t\t\tif ( typeof image === 'string' ) {\n\n\t\t\t\tconst url = image;\n\n\t\t\t\tconst path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test( url ) ? url : scope.resourcePath + url;\n\n\t\t\t\treturn loadImage( path );\n\n\t\t\t} else {\n\n\t\t\t\tif ( image.data ) {\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tdata: getTypedArray( image.type, image.data ),\n\t\t\t\t\t\twidth: image.width,\n\t\t\t\t\t\theight: image.height\n\t\t\t\t\t};\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( json !== undefined && json.length > 0 ) {\n\n\t\t\tconst manager = new LoadingManager( onLoad );\n\n\t\t\tloader = new ImageLoader( manager );\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\n\n\t\t\tfor ( let i = 0, il = json.length; i < il; i ++ ) {\n\n\t\t\t\tconst image = json[ i ];\n\t\t\t\tconst url = image.url;\n\n\t\t\t\tif ( Array.isArray( url ) ) {\n\n\t\t\t\t\t// load array of images e.g CubeTexture\n\n\t\t\t\t\tconst imageArray = [];\n\n\t\t\t\t\tfor ( let j = 0, jl = url.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tconst currentUrl = url[ j ];\n\n\t\t\t\t\t\tconst deserializedImage = deserializeImage( currentUrl );\n\n\t\t\t\t\t\tif ( deserializedImage !== null ) {\n\n\t\t\t\t\t\t\tif ( deserializedImage instanceof HTMLImageElement ) {\n\n\t\t\t\t\t\t\t\timageArray.push( deserializedImage );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// special case: handle array of data textures for cube textures\n\n\t\t\t\t\t\t\t\timageArray.push( new DataTexture( deserializedImage.data, deserializedImage.width, deserializedImage.height ) );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\timages[ image.uuid ] = new Source( imageArray );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// load single image\n\n\t\t\t\t\tconst deserializedImage = deserializeImage( image.url );\n\t\t\t\t\timages[ image.uuid ] = new Source( deserializedImage );\n\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn images;\n\n\t}\n\n\tasync parseImagesAsync( json ) {\n\n\t\tconst scope = this;\n\t\tconst images = {};\n\n\t\tlet loader;\n\n\t\tasync function deserializeImage( image ) {\n\n\t\t\tif ( typeof image === 'string' ) {\n\n\t\t\t\tconst url = image;\n\n\t\t\t\tconst path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test( url ) ? url : scope.resourcePath + url;\n\n\t\t\t\treturn await loader.loadAsync( path );\n\n\t\t\t} else {\n\n\t\t\t\tif ( image.data ) {\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tdata: getTypedArray( image.type, image.data ),\n\t\t\t\t\t\twidth: image.width,\n\t\t\t\t\t\theight: image.height\n\t\t\t\t\t};\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( json !== undefined && json.length > 0 ) {\n\n\t\t\tloader = new ImageLoader( this.manager );\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\n\n\t\t\tfor ( let i = 0, il = json.length; i < il; i ++ ) {\n\n\t\t\t\tconst image = json[ i ];\n\t\t\t\tconst url = image.url;\n\n\t\t\t\tif ( Array.isArray( url ) ) {\n\n\t\t\t\t\t// load array of images e.g CubeTexture\n\n\t\t\t\t\tconst imageArray = [];\n\n\t\t\t\t\tfor ( let j = 0, jl = url.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tconst currentUrl = url[ j ];\n\n\t\t\t\t\t\tconst deserializedImage = await deserializeImage( currentUrl );\n\n\t\t\t\t\t\tif ( deserializedImage !== null ) {\n\n\t\t\t\t\t\t\tif ( deserializedImage instanceof HTMLImageElement ) {\n\n\t\t\t\t\t\t\t\timageArray.push( deserializedImage );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// special case: handle array of data textures for cube textures\n\n\t\t\t\t\t\t\t\timageArray.push( new DataTexture( deserializedImage.data, deserializedImage.width, deserializedImage.height ) );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\timages[ image.uuid ] = new Source( imageArray );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// load single image\n\n\t\t\t\t\tconst deserializedImage = await deserializeImage( image.url );\n\t\t\t\t\timages[ image.uuid ] = new Source( deserializedImage );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn images;\n\n\t}\n\n\tparseTextures( json, images ) {\n\n\t\tfunction parseConstant( value, type ) {\n\n\t\t\tif ( typeof value === 'number' ) return value;\n\n\t\t\tconsole.warn( 'THREE.ObjectLoader.parseTexture: Constant should be in numeric form.', value );\n\n\t\t\treturn type[ value ];\n\n\t\t}\n\n\t\tconst textures = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tconst data = json[ i ];\n\n\t\t\t\tif ( data.image === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: No \"image\" specified for', data.uuid );\n\n\t\t\t\t}\n\n\t\t\t\tif ( images[ data.image ] === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined image', data.image );\n\n\t\t\t\t}\n\n\t\t\t\tconst source = images[ data.image ];\n\t\t\t\tconst image = source.data;\n\n\t\t\t\tlet texture;\n\n\t\t\t\tif ( Array.isArray( image ) ) {\n\n\t\t\t\t\ttexture = new CubeTexture();\n\n\t\t\t\t\tif ( image.length === 6 ) texture.needsUpdate = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( image && image.data ) {\n\n\t\t\t\t\t\ttexture = new DataTexture();\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ttexture = new Texture();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( image ) texture.needsUpdate = true; // textures can have undefined image data\n\n\t\t\t\t}\n\n\t\t\t\ttexture.source = source;\n\n\t\t\t\ttexture.uuid = data.uuid;\n\n\t\t\t\tif ( data.name !== undefined ) texture.name = data.name;\n\n\t\t\t\tif ( data.mapping !== undefined ) texture.mapping = parseConstant( data.mapping, TEXTURE_MAPPING );\n\n\t\t\t\tif ( data.offset !== undefined ) texture.offset.fromArray( data.offset );\n\t\t\t\tif ( data.repeat !== undefined ) texture.repeat.fromArray( data.repeat );\n\t\t\t\tif ( data.center !== undefined ) texture.center.fromArray( data.center );\n\t\t\t\tif ( data.rotation !== undefined ) texture.rotation = data.rotation;\n\n\t\t\t\tif ( data.wrap !== undefined ) {\n\n\t\t\t\t\ttexture.wrapS = parseConstant( data.wrap[ 0 ], TEXTURE_WRAPPING );\n\t\t\t\t\ttexture.wrapT = parseConstant( data.wrap[ 1 ], TEXTURE_WRAPPING );\n\n\t\t\t\t}\n\n\t\t\t\tif ( data.format !== undefined ) texture.format = data.format;\n\t\t\t\tif ( data.type !== undefined ) texture.type = data.type;\n\t\t\t\tif ( data.encoding !== undefined ) texture.encoding = data.encoding;\n\n\t\t\t\tif ( data.minFilter !== undefined ) texture.minFilter = parseConstant( data.minFilter, TEXTURE_FILTER );\n\t\t\t\tif ( data.magFilter !== undefined ) texture.magFilter = parseConstant( data.magFilter, TEXTURE_FILTER );\n\t\t\t\tif ( data.anisotropy !== undefined ) texture.anisotropy = data.anisotropy;\n\n\t\t\t\tif ( data.flipY !== undefined ) texture.flipY = data.flipY;\n\n\t\t\t\tif ( data.premultiplyAlpha !== undefined ) texture.premultiplyAlpha = data.premultiplyAlpha;\n\t\t\t\tif ( data.unpackAlignment !== undefined ) texture.unpackAlignment = data.unpackAlignment;\n\n\t\t\t\tif ( data.userData !== undefined ) texture.userData = data.userData;\n\n\t\t\t\ttextures[ data.uuid ] = texture;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn textures;\n\n\t}\n\n\tparseObject( data, geometries, materials, textures, animations ) {\n\n\t\tlet object;\n\n\t\tfunction getGeometry( name ) {\n\n\t\t\tif ( geometries[ name ] === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined geometry', name );\n\n\t\t\t}\n\n\t\t\treturn geometries[ name ];\n\n\t\t}\n\n\t\tfunction getMaterial( name ) {\n\n\t\t\tif ( name === undefined ) return undefined;\n\n\t\t\tif ( Array.isArray( name ) ) {\n\n\t\t\t\tconst array = [];\n\n\t\t\t\tfor ( let i = 0, l = name.length; i < l; i ++ ) {\n\n\t\t\t\t\tconst uuid = name[ i ];\n\n\t\t\t\t\tif ( materials[ uuid ] === undefined ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', uuid );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tarray.push( materials[ uuid ] );\n\n\t\t\t\t}\n\n\t\t\t\treturn array;\n\n\t\t\t}\n\n\t\t\tif ( materials[ name ] === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', name );\n\n\t\t\t}\n\n\t\t\treturn materials[ name ];\n\n\t\t}\n\n\t\tfunction getTexture( uuid ) {\n\n\t\t\tif ( textures[ uuid ] === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined texture', uuid );\n\n\t\t\t}\n\n\t\t\treturn textures[ uuid ];\n\n\t\t}\n\n\t\tlet geometry, material;\n\n\t\tswitch ( data.type ) {\n\n\t\t\tcase 'Scene':\n\n\t\t\t\tobject = new Scene();\n\n\t\t\t\tif ( data.background !== undefined ) {\n\n\t\t\t\t\tif ( Number.isInteger( data.background ) ) {\n\n\t\t\t\t\t\tobject.background = new Color( data.background );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tobject.background = getTexture( data.background );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( data.environment !== undefined ) {\n\n\t\t\t\t\tobject.environment = getTexture( data.environment );\n\n\t\t\t\t}\n\n\t\t\t\tif ( data.fog !== undefined ) {\n\n\t\t\t\t\tif ( data.fog.type === 'Fog' ) {\n\n\t\t\t\t\t\tobject.fog = new Fog( data.fog.color, data.fog.near, data.fog.far );\n\n\t\t\t\t\t} else if ( data.fog.type === 'FogExp2' ) {\n\n\t\t\t\t\t\tobject.fog = new FogExp2( data.fog.color, data.fog.density );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'PerspectiveCamera':\n\n\t\t\t\tobject = new PerspectiveCamera( data.fov, data.aspect, data.near, data.far );\n\n\t\t\t\tif ( data.focus !== undefined ) object.focus = data.focus;\n\t\t\t\tif ( data.zoom !== undefined ) object.zoom = data.zoom;\n\t\t\t\tif ( data.filmGauge !== undefined ) object.filmGauge = data.filmGauge;\n\t\t\t\tif ( data.filmOffset !== undefined ) object.filmOffset = data.filmOffset;\n\t\t\t\tif ( data.view !== undefined ) object.view = Object.assign( {}, data.view );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'OrthographicCamera':\n\n\t\t\t\tobject = new OrthographicCamera( data.left, data.right, data.top, data.bottom, data.near, data.far );\n\n\t\t\t\tif ( data.zoom !== undefined ) object.zoom = data.zoom;\n\t\t\t\tif ( data.view !== undefined ) object.view = Object.assign( {}, data.view );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'AmbientLight':\n\n\t\t\t\tobject = new AmbientLight( data.color, data.intensity );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'DirectionalLight':\n\n\t\t\t\tobject = new DirectionalLight( data.color, data.intensity );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'PointLight':\n\n\t\t\t\tobject = new PointLight( data.color, data.intensity, data.distance, data.decay );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'RectAreaLight':\n\n\t\t\t\tobject = new RectAreaLight( data.color, data.intensity, data.width, data.height );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'SpotLight':\n\n\t\t\t\tobject = new SpotLight( data.color, data.intensity, data.distance, data.angle, data.penumbra, data.decay );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'HemisphereLight':\n\n\t\t\t\tobject = new HemisphereLight( data.color, data.groundColor, data.intensity );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'LightProbe':\n\n\t\t\t\tobject = new LightProbe().fromJSON( data );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'SkinnedMesh':\n\n\t\t\t\tgeometry = getGeometry( data.geometry );\n\t\t\t \tmaterial = getMaterial( data.material );\n\n\t\t\t\tobject = new SkinnedMesh( geometry, material );\n\n\t\t\t\tif ( data.bindMode !== undefined ) object.bindMode = data.bindMode;\n\t\t\t\tif ( data.bindMatrix !== undefined ) object.bindMatrix.fromArray( data.bindMatrix );\n\t\t\t\tif ( data.skeleton !== undefined ) object.skeleton = data.skeleton;\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Mesh':\n\n\t\t\t\tgeometry = getGeometry( data.geometry );\n\t\t\t\tmaterial = getMaterial( data.material );\n\n\t\t\t\tobject = new Mesh( geometry, material );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'InstancedMesh':\n\n\t\t\t\tgeometry = getGeometry( data.geometry );\n\t\t\t\tmaterial = getMaterial( data.material );\n\t\t\t\tconst count = data.count;\n\t\t\t\tconst instanceMatrix = data.instanceMatrix;\n\t\t\t\tconst instanceColor = data.instanceColor;\n\n\t\t\t\tobject = new InstancedMesh( geometry, material, count );\n\t\t\t\tobject.instanceMatrix = new InstancedBufferAttribute( new Float32Array( instanceMatrix.array ), 16 );\n\t\t\t\tif ( instanceColor !== undefined ) object.instanceColor = new InstancedBufferAttribute( new Float32Array( instanceColor.array ), instanceColor.itemSize );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'LOD':\n\n\t\t\t\tobject = new LOD();\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Line':\n\n\t\t\t\tobject = new Line( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'LineLoop':\n\n\t\t\t\tobject = new LineLoop( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'LineSegments':\n\n\t\t\t\tobject = new LineSegments( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'PointCloud':\n\t\t\tcase 'Points':\n\n\t\t\t\tobject = new Points( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Sprite':\n\n\t\t\t\tobject = new Sprite( getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Group':\n\n\t\t\t\tobject = new Group();\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Bone':\n\n\t\t\t\tobject = new Bone();\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tobject = new Object3D();\n\n\t\t}\n\n\t\tobject.uuid = data.uuid;\n\n\t\tif ( data.name !== undefined ) object.name = data.name;\n\n\t\tif ( data.matrix !== undefined ) {\n\n\t\t\tobject.matrix.fromArray( data.matrix );\n\n\t\t\tif ( data.matrixAutoUpdate !== undefined ) object.matrixAutoUpdate = data.matrixAutoUpdate;\n\t\t\tif ( object.matrixAutoUpdate ) object.matrix.decompose( object.position, object.quaternion, object.scale );\n\n\t\t} else {\n\n\t\t\tif ( data.position !== undefined ) object.position.fromArray( data.position );\n\t\t\tif ( data.rotation !== undefined ) object.rotation.fromArray( data.rotation );\n\t\t\tif ( data.quaternion !== undefined ) object.quaternion.fromArray( data.quaternion );\n\t\t\tif ( data.scale !== undefined ) object.scale.fromArray( data.scale );\n\n\t\t}\n\n\t\tif ( data.castShadow !== undefined ) object.castShadow = data.castShadow;\n\t\tif ( data.receiveShadow !== undefined ) object.receiveShadow = data.receiveShadow;\n\n\t\tif ( data.shadow ) {\n\n\t\t\tif ( data.shadow.bias !== undefined ) object.shadow.bias = data.shadow.bias;\n\t\t\tif ( data.shadow.normalBias !== undefined ) object.shadow.normalBias = data.shadow.normalBias;\n\t\t\tif ( data.shadow.radius !== undefined ) object.shadow.radius = data.shadow.radius;\n\t\t\tif ( data.shadow.mapSize !== undefined ) object.shadow.mapSize.fromArray( data.shadow.mapSize );\n\t\t\tif ( data.shadow.camera !== undefined ) object.shadow.camera = this.parseObject( data.shadow.camera );\n\n\t\t}\n\n\t\tif ( data.visible !== undefined ) object.visible = data.visible;\n\t\tif ( data.frustumCulled !== undefined ) object.frustumCulled = data.frustumCulled;\n\t\tif ( data.renderOrder !== undefined ) object.renderOrder = data.renderOrder;\n\t\tif ( data.userData !== undefined ) object.userData = data.userData;\n\t\tif ( data.layers !== undefined ) object.layers.mask = data.layers;\n\n\t\tif ( data.children !== undefined ) {\n\n\t\t\tconst children = data.children;\n\n\t\t\tfor ( let i = 0; i < children.length; i ++ ) {\n\n\t\t\t\tobject.add( this.parseObject( children[ i ], geometries, materials, textures, animations ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( data.animations !== undefined ) {\n\n\t\t\tconst objectAnimations = data.animations;\n\n\t\t\tfor ( let i = 0; i < objectAnimations.length; i ++ ) {\n\n\t\t\t\tconst uuid = objectAnimations[ i ];\n\n\t\t\t\tobject.animations.push( animations[ uuid ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( data.type === 'LOD' ) {\n\n\t\t\tif ( data.autoUpdate !== undefined ) object.autoUpdate = data.autoUpdate;\n\n\t\t\tconst levels = data.levels;\n\n\t\t\tfor ( let l = 0; l < levels.length; l ++ ) {\n\n\t\t\t\tconst level = levels[ l ];\n\t\t\t\tconst child = object.getObjectByProperty( 'uuid', level.object );\n\n\t\t\t\tif ( child !== undefined ) {\n\n\t\t\t\t\tobject.addLevel( child, level.distance );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn object;\n\n\t}\n\n\tbindSkeletons( object, skeletons ) {\n\n\t\tif ( Object.keys( skeletons ).length === 0 ) return;\n\n\t\tobject.traverse( function ( child ) {\n\n\t\t\tif ( child.isSkinnedMesh === true && child.skeleton !== undefined ) {\n\n\t\t\t\tconst skeleton = skeletons[ child.skeleton ];\n\n\t\t\t\tif ( skeleton === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: No skeleton found with UUID:', child.skeleton );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tchild.bind( skeleton, child.bindMatrix );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t}\n\n}\n\nconst TEXTURE_MAPPING = {\n\tUVMapping: UVMapping,\n\tCubeReflectionMapping: CubeReflectionMapping,\n\tCubeRefractionMapping: CubeRefractionMapping,\n\tEquirectangularReflectionMapping: EquirectangularReflectionMapping,\n\tEquirectangularRefractionMapping: EquirectangularRefractionMapping,\n\tCubeUVReflectionMapping: CubeUVReflectionMapping\n};\n\nconst TEXTURE_WRAPPING = {\n\tRepeatWrapping: RepeatWrapping,\n\tClampToEdgeWrapping: ClampToEdgeWrapping,\n\tMirroredRepeatWrapping: MirroredRepeatWrapping\n};\n\nconst TEXTURE_FILTER = {\n\tNearestFilter: NearestFilter,\n\tNearestMipmapNearestFilter: NearestMipmapNearestFilter,\n\tNearestMipmapLinearFilter: NearestMipmapLinearFilter,\n\tLinearFilter: LinearFilter,\n\tLinearMipmapNearestFilter: LinearMipmapNearestFilter,\n\tLinearMipmapLinearFilter: LinearMipmapLinearFilter\n};\n\nclass ImageBitmapLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.isImageBitmapLoader = true;\n\n\t\tif ( typeof createImageBitmap === 'undefined' ) {\n\n\t\t\tconsole.warn( 'THREE.ImageBitmapLoader: createImageBitmap() not supported.' );\n\n\t\t}\n\n\t\tif ( typeof fetch === 'undefined' ) {\n\n\t\t\tconsole.warn( 'THREE.ImageBitmapLoader: fetch() not supported.' );\n\n\t\t}\n\n\t\tthis.options = { premultiplyAlpha: 'none' };\n\n\t}\n\n\tsetOptions( options ) {\n\n\t\tthis.options = options;\n\n\t\treturn this;\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tif ( url === undefined ) url = '';\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tconst scope = this;\n\n\t\tconst cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\tconst fetchOptions = {};\n\t\tfetchOptions.credentials = ( this.crossOrigin === 'anonymous' ) ? 'same-origin' : 'include';\n\t\tfetchOptions.headers = this.requestHeader;\n\n\t\tfetch( url, fetchOptions ).then( function ( res ) {\n\n\t\t\treturn res.blob();\n\n\t\t} ).then( function ( blob ) {\n\n\t\t\treturn createImageBitmap( blob, Object.assign( scope.options, { colorSpaceConversion: 'none' } ) );\n\n\t\t} ).then( function ( imageBitmap ) {\n\n\t\t\tCache.add( url, imageBitmap );\n\n\t\t\tif ( onLoad ) onLoad( imageBitmap );\n\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t} ).catch( function ( e ) {\n\n\t\t\tif ( onError ) onError( e );\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t} );\n\n\t\tscope.manager.itemStart( url );\n\n\t}\n\n}\n\nlet _context;\n\nconst AudioContext = {\n\n\tgetContext: function () {\n\n\t\tif ( _context === undefined ) {\n\n\t\t\t_context = new ( window.AudioContext || window.webkitAudioContext )();\n\n\t\t}\n\n\t\treturn _context;\n\n\t},\n\n\tsetContext: function ( value ) {\n\n\t\t_context = value;\n\n\t}\n\n};\n\nclass AudioLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\t\tloader.load( url, function ( buffer ) {\n\n\t\t\ttry {\n\n\t\t\t\t// Create a copy of the buffer. The `decodeAudioData` method\n\t\t\t\t// detaches the buffer when complete, preventing reuse.\n\t\t\t\tconst bufferCopy = buffer.slice( 0 );\n\n\t\t\t\tconst context = AudioContext.getContext();\n\t\t\t\tcontext.decodeAudioData( bufferCopy, function ( audioBuffer ) {\n\n\t\t\t\t\tonLoad( audioBuffer );\n\n\t\t\t\t} );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n}\n\nclass HemisphereLightProbe extends LightProbe {\n\n\tconstructor( skyColor, groundColor, intensity = 1 ) {\n\n\t\tsuper( undefined, intensity );\n\n\t\tthis.isHemisphereLightProbe = true;\n\n\t\tconst color1 = new Color().set( skyColor );\n\t\tconst color2 = new Color().set( groundColor );\n\n\t\tconst sky = new Vector3( color1.r, color1.g, color1.b );\n\t\tconst ground = new Vector3( color2.r, color2.g, color2.b );\n\n\t\t// without extra factor of PI in the shader, should = 1 / Math.sqrt( Math.PI );\n\t\tconst c0 = Math.sqrt( Math.PI );\n\t\tconst c1 = c0 * Math.sqrt( 0.75 );\n\n\t\tthis.sh.coefficients[ 0 ].copy( sky ).add( ground ).multiplyScalar( c0 );\n\t\tthis.sh.coefficients[ 1 ].copy( sky ).sub( ground ).multiplyScalar( c1 );\n\n\t}\n\n}\n\nclass AmbientLightProbe extends LightProbe {\n\n\tconstructor( color, intensity = 1 ) {\n\n\t\tsuper( undefined, intensity );\n\n\t\tthis.isAmbientLightProbe = true;\n\n\t\tconst color1 = new Color().set( color );\n\n\t\t// without extra factor of PI in the shader, would be 2 / Math.sqrt( Math.PI );\n\t\tthis.sh.coefficients[ 0 ].set( color1.r, color1.g, color1.b ).multiplyScalar( 2 * Math.sqrt( Math.PI ) );\n\n\t}\n\n}\n\nconst _eyeRight = /*@__PURE__*/ new Matrix4();\nconst _eyeLeft = /*@__PURE__*/ new Matrix4();\nconst _projectionMatrix = /*@__PURE__*/ new Matrix4();\n\nclass StereoCamera {\n\n\tconstructor() {\n\n\t\tthis.type = 'StereoCamera';\n\n\t\tthis.aspect = 1;\n\n\t\tthis.eyeSep = 0.064;\n\n\t\tthis.cameraL = new PerspectiveCamera();\n\t\tthis.cameraL.layers.enable( 1 );\n\t\tthis.cameraL.matrixAutoUpdate = false;\n\n\t\tthis.cameraR = new PerspectiveCamera();\n\t\tthis.cameraR.layers.enable( 2 );\n\t\tthis.cameraR.matrixAutoUpdate = false;\n\n\t\tthis._cache = {\n\t\t\tfocus: null,\n\t\t\tfov: null,\n\t\t\taspect: null,\n\t\t\tnear: null,\n\t\t\tfar: null,\n\t\t\tzoom: null,\n\t\t\teyeSep: null\n\t\t};\n\n\t}\n\n\tupdate( camera ) {\n\n\t\tconst cache = this._cache;\n\n\t\tconst needsUpdate = cache.focus !== camera.focus || cache.fov !== camera.fov ||\n\t\t\tcache.aspect !== camera.aspect * this.aspect || cache.near !== camera.near ||\n\t\t\tcache.far !== camera.far || cache.zoom !== camera.zoom || cache.eyeSep !== this.eyeSep;\n\n\t\tif ( needsUpdate ) {\n\n\t\t\tcache.focus = camera.focus;\n\t\t\tcache.fov = camera.fov;\n\t\t\tcache.aspect = camera.aspect * this.aspect;\n\t\t\tcache.near = camera.near;\n\t\t\tcache.far = camera.far;\n\t\t\tcache.zoom = camera.zoom;\n\t\t\tcache.eyeSep = this.eyeSep;\n\n\t\t\t// Off-axis stereoscopic effect based on\n\t\t\t// http://paulbourke.net/stereographics/stereorender/\n\n\t\t\t_projectionMatrix.copy( camera.projectionMatrix );\n\t\t\tconst eyeSepHalf = cache.eyeSep / 2;\n\t\t\tconst eyeSepOnProjection = eyeSepHalf * cache.near / cache.focus;\n\t\t\tconst ymax = ( cache.near * Math.tan( DEG2RAD * cache.fov * 0.5 ) ) / cache.zoom;\n\t\t\tlet xmin, xmax;\n\n\t\t\t// translate xOffset\n\n\t\t\t_eyeLeft.elements[ 12 ] = - eyeSepHalf;\n\t\t\t_eyeRight.elements[ 12 ] = eyeSepHalf;\n\n\t\t\t// for left eye\n\n\t\t\txmin = - ymax * cache.aspect + eyeSepOnProjection;\n\t\t\txmax = ymax * cache.aspect + eyeSepOnProjection;\n\n\t\t\t_projectionMatrix.elements[ 0 ] = 2 * cache.near / ( xmax - xmin );\n\t\t\t_projectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\n\n\t\t\tthis.cameraL.projectionMatrix.copy( _projectionMatrix );\n\n\t\t\t// for right eye\n\n\t\t\txmin = - ymax * cache.aspect - eyeSepOnProjection;\n\t\t\txmax = ymax * cache.aspect - eyeSepOnProjection;\n\n\t\t\t_projectionMatrix.elements[ 0 ] = 2 * cache.near / ( xmax - xmin );\n\t\t\t_projectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\n\n\t\t\tthis.cameraR.projectionMatrix.copy( _projectionMatrix );\n\n\t\t}\n\n\t\tthis.cameraL.matrixWorld.copy( camera.matrixWorld ).multiply( _eyeLeft );\n\t\tthis.cameraR.matrixWorld.copy( camera.matrixWorld ).multiply( _eyeRight );\n\n\t}\n\n}\n\nclass Clock {\n\n\tconstructor( autoStart = true ) {\n\n\t\tthis.autoStart = autoStart;\n\n\t\tthis.startTime = 0;\n\t\tthis.oldTime = 0;\n\t\tthis.elapsedTime = 0;\n\n\t\tthis.running = false;\n\n\t}\n\n\tstart() {\n\n\t\tthis.startTime = now();\n\n\t\tthis.oldTime = this.startTime;\n\t\tthis.elapsedTime = 0;\n\t\tthis.running = true;\n\n\t}\n\n\tstop() {\n\n\t\tthis.getElapsedTime();\n\t\tthis.running = false;\n\t\tthis.autoStart = false;\n\n\t}\n\n\tgetElapsedTime() {\n\n\t\tthis.getDelta();\n\t\treturn this.elapsedTime;\n\n\t}\n\n\tgetDelta() {\n\n\t\tlet diff = 0;\n\n\t\tif ( this.autoStart && ! this.running ) {\n\n\t\t\tthis.start();\n\t\t\treturn 0;\n\n\t\t}\n\n\t\tif ( this.running ) {\n\n\t\t\tconst newTime = now();\n\n\t\t\tdiff = ( newTime - this.oldTime ) / 1000;\n\t\t\tthis.oldTime = newTime;\n\n\t\t\tthis.elapsedTime += diff;\n\n\t\t}\n\n\t\treturn diff;\n\n\t}\n\n}\n\nfunction now() {\n\n\treturn ( typeof performance === 'undefined' ? Date : performance ).now(); // see #10732\n\n}\n\nconst _position$1 = /*@__PURE__*/ new Vector3();\nconst _quaternion$1 = /*@__PURE__*/ new Quaternion();\nconst _scale$1 = /*@__PURE__*/ new Vector3();\nconst _orientation$1 = /*@__PURE__*/ new Vector3();\n\nclass AudioListener extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.type = 'AudioListener';\n\n\t\tthis.context = AudioContext.getContext();\n\n\t\tthis.gain = this.context.createGain();\n\t\tthis.gain.connect( this.context.destination );\n\n\t\tthis.filter = null;\n\n\t\tthis.timeDelta = 0;\n\n\t\t// private\n\n\t\tthis._clock = new Clock();\n\n\t}\n\n\tgetInput() {\n\n\t\treturn this.gain;\n\n\t}\n\n\tremoveFilter() {\n\n\t\tif ( this.filter !== null ) {\n\n\t\t\tthis.gain.disconnect( this.filter );\n\t\t\tthis.filter.disconnect( this.context.destination );\n\t\t\tthis.gain.connect( this.context.destination );\n\t\t\tthis.filter = null;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetFilter() {\n\n\t\treturn this.filter;\n\n\t}\n\n\tsetFilter( value ) {\n\n\t\tif ( this.filter !== null ) {\n\n\t\t\tthis.gain.disconnect( this.filter );\n\t\t\tthis.filter.disconnect( this.context.destination );\n\n\t\t} else {\n\n\t\t\tthis.gain.disconnect( this.context.destination );\n\n\t\t}\n\n\t\tthis.filter = value;\n\t\tthis.gain.connect( this.filter );\n\t\tthis.filter.connect( this.context.destination );\n\n\t\treturn this;\n\n\t}\n\n\tgetMasterVolume() {\n\n\t\treturn this.gain.gain.value;\n\n\t}\n\n\tsetMasterVolume( value ) {\n\n\t\tthis.gain.gain.setTargetAtTime( value, this.context.currentTime, 0.01 );\n\n\t\treturn this;\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t\tconst listener = this.context.listener;\n\t\tconst up = this.up;\n\n\t\tthis.timeDelta = this._clock.getDelta();\n\n\t\tthis.matrixWorld.decompose( _position$1, _quaternion$1, _scale$1 );\n\n\t\t_orientation$1.set( 0, 0, - 1 ).applyQuaternion( _quaternion$1 );\n\n\t\tif ( listener.positionX ) {\n\n\t\t\t// code path for Chrome (see #14393)\n\n\t\t\tconst endTime = this.context.currentTime + this.timeDelta;\n\n\t\t\tlistener.positionX.linearRampToValueAtTime( _position$1.x, endTime );\n\t\t\tlistener.positionY.linearRampToValueAtTime( _position$1.y, endTime );\n\t\t\tlistener.positionZ.linearRampToValueAtTime( _position$1.z, endTime );\n\t\t\tlistener.forwardX.linearRampToValueAtTime( _orientation$1.x, endTime );\n\t\t\tlistener.forwardY.linearRampToValueAtTime( _orientation$1.y, endTime );\n\t\t\tlistener.forwardZ.linearRampToValueAtTime( _orientation$1.z, endTime );\n\t\t\tlistener.upX.linearRampToValueAtTime( up.x, endTime );\n\t\t\tlistener.upY.linearRampToValueAtTime( up.y, endTime );\n\t\t\tlistener.upZ.linearRampToValueAtTime( up.z, endTime );\n\n\t\t} else {\n\n\t\t\tlistener.setPosition( _position$1.x, _position$1.y, _position$1.z );\n\t\t\tlistener.setOrientation( _orientation$1.x, _orientation$1.y, _orientation$1.z, up.x, up.y, up.z );\n\n\t\t}\n\n\t}\n\n}\n\nclass Audio extends Object3D {\n\n\tconstructor( listener ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'Audio';\n\n\t\tthis.listener = listener;\n\t\tthis.context = listener.context;\n\n\t\tthis.gain = this.context.createGain();\n\t\tthis.gain.connect( listener.getInput() );\n\n\t\tthis.autoplay = false;\n\n\t\tthis.buffer = null;\n\t\tthis.detune = 0;\n\t\tthis.loop = false;\n\t\tthis.loopStart = 0;\n\t\tthis.loopEnd = 0;\n\t\tthis.offset = 0;\n\t\tthis.duration = undefined;\n\t\tthis.playbackRate = 1;\n\t\tthis.isPlaying = false;\n\t\tthis.hasPlaybackControl = true;\n\t\tthis.source = null;\n\t\tthis.sourceType = 'empty';\n\n\t\tthis._startedAt = 0;\n\t\tthis._progress = 0;\n\t\tthis._connected = false;\n\n\t\tthis.filters = [];\n\n\t}\n\n\tgetOutput() {\n\n\t\treturn this.gain;\n\n\t}\n\n\tsetNodeSource( audioNode ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'audioNode';\n\t\tthis.source = audioNode;\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t}\n\n\tsetMediaElementSource( mediaElement ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'mediaNode';\n\t\tthis.source = this.context.createMediaElementSource( mediaElement );\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t}\n\n\tsetMediaStreamSource( mediaStream ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'mediaStreamNode';\n\t\tthis.source = this.context.createMediaStreamSource( mediaStream );\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t}\n\n\tsetBuffer( audioBuffer ) {\n\n\t\tthis.buffer = audioBuffer;\n\t\tthis.sourceType = 'buffer';\n\n\t\tif ( this.autoplay ) this.play();\n\n\t\treturn this;\n\n\t}\n\n\tplay( delay = 0 ) {\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: Audio is already playing.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis._startedAt = this.context.currentTime + delay;\n\n\t\tconst source = this.context.createBufferSource();\n\t\tsource.buffer = this.buffer;\n\t\tsource.loop = this.loop;\n\t\tsource.loopStart = this.loopStart;\n\t\tsource.loopEnd = this.loopEnd;\n\t\tsource.onended = this.onEnded.bind( this );\n\t\tsource.start( this._startedAt, this._progress + this.offset, this.duration );\n\n\t\tthis.isPlaying = true;\n\n\t\tthis.source = source;\n\n\t\tthis.setDetune( this.detune );\n\t\tthis.setPlaybackRate( this.playbackRate );\n\n\t\treturn this.connect();\n\n\t}\n\n\tpause() {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\t// update current progress\n\n\t\t\tthis._progress += Math.max( this.context.currentTime - this._startedAt, 0 ) * this.playbackRate;\n\n\t\t\tif ( this.loop === true ) {\n\n\t\t\t\t// ensure _progress does not exceed duration with looped audios\n\n\t\t\t\tthis._progress = this._progress % ( this.duration || this.buffer.duration );\n\n\t\t\t}\n\n\t\t\tthis.source.stop();\n\t\t\tthis.source.onended = null;\n\n\t\t\tthis.isPlaying = false;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tstop() {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis._progress = 0;\n\n\t\tthis.source.stop();\n\t\tthis.source.onended = null;\n\t\tthis.isPlaying = false;\n\n\t\treturn this;\n\n\t}\n\n\tconnect() {\n\n\t\tif ( this.filters.length > 0 ) {\n\n\t\t\tthis.source.connect( this.filters[ 0 ] );\n\n\t\t\tfor ( let i = 1, l = this.filters.length; i < l; i ++ ) {\n\n\t\t\t\tthis.filters[ i - 1 ].connect( this.filters[ i ] );\n\n\t\t\t}\n\n\t\t\tthis.filters[ this.filters.length - 1 ].connect( this.getOutput() );\n\n\t\t} else {\n\n\t\t\tthis.source.connect( this.getOutput() );\n\n\t\t}\n\n\t\tthis._connected = true;\n\n\t\treturn this;\n\n\t}\n\n\tdisconnect() {\n\n\t\tif ( this.filters.length > 0 ) {\n\n\t\t\tthis.source.disconnect( this.filters[ 0 ] );\n\n\t\t\tfor ( let i = 1, l = this.filters.length; i < l; i ++ ) {\n\n\t\t\t\tthis.filters[ i - 1 ].disconnect( this.filters[ i ] );\n\n\t\t\t}\n\n\t\t\tthis.filters[ this.filters.length - 1 ].disconnect( this.getOutput() );\n\n\t\t} else {\n\n\t\t\tthis.source.disconnect( this.getOutput() );\n\n\t\t}\n\n\t\tthis._connected = false;\n\n\t\treturn this;\n\n\t}\n\n\tgetFilters() {\n\n\t\treturn this.filters;\n\n\t}\n\n\tsetFilters( value ) {\n\n\t\tif ( ! value ) value = [];\n\n\t\tif ( this._connected === true ) {\n\n\t\t\tthis.disconnect();\n\t\t\tthis.filters = value.slice();\n\t\t\tthis.connect();\n\n\t\t} else {\n\n\t\t\tthis.filters = value.slice();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetDetune( value ) {\n\n\t\tthis.detune = value;\n\n\t\tif ( this.source.detune === undefined ) return; // only set detune when available\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.detune.setTargetAtTime( this.detune, this.context.currentTime, 0.01 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetDetune() {\n\n\t\treturn this.detune;\n\n\t}\n\n\tgetFilter() {\n\n\t\treturn this.getFilters()[ 0 ];\n\n\t}\n\n\tsetFilter( filter ) {\n\n\t\treturn this.setFilters( filter ? [ filter ] : [] );\n\n\t}\n\n\tsetPlaybackRate( value ) {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.playbackRate = value;\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.playbackRate.setTargetAtTime( this.playbackRate, this.context.currentTime, 0.01 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetPlaybackRate() {\n\n\t\treturn this.playbackRate;\n\n\t}\n\n\tonEnded() {\n\n\t\tthis.isPlaying = false;\n\n\t}\n\n\tgetLoop() {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn false;\n\n\t\t}\n\n\t\treturn this.loop;\n\n\t}\n\n\tsetLoop( value ) {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.loop = value;\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.loop = this.loop;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetLoopStart( value ) {\n\n\t\tthis.loopStart = value;\n\n\t\treturn this;\n\n\t}\n\n\tsetLoopEnd( value ) {\n\n\t\tthis.loopEnd = value;\n\n\t\treturn this;\n\n\t}\n\n\tgetVolume() {\n\n\t\treturn this.gain.gain.value;\n\n\t}\n\n\tsetVolume( value ) {\n\n\t\tthis.gain.gain.setTargetAtTime( value, this.context.currentTime, 0.01 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _position = /*@__PURE__*/ new Vector3();\nconst _quaternion = /*@__PURE__*/ new Quaternion();\nconst _scale = /*@__PURE__*/ new Vector3();\nconst _orientation = /*@__PURE__*/ new Vector3();\n\nclass PositionalAudio extends Audio {\n\n\tconstructor( listener ) {\n\n\t\tsuper( listener );\n\n\t\tthis.panner = this.context.createPanner();\n\t\tthis.panner.panningModel = 'HRTF';\n\t\tthis.panner.connect( this.gain );\n\n\t}\n\n\tdisconnect() {\n\n\t\tsuper.disconnect();\n\n\t\tthis.panner.disconnect( this.gain );\n\n\t}\n\n\tgetOutput() {\n\n\t\treturn this.panner;\n\n\t}\n\n\tgetRefDistance() {\n\n\t\treturn this.panner.refDistance;\n\n\t}\n\n\tsetRefDistance( value ) {\n\n\t\tthis.panner.refDistance = value;\n\n\t\treturn this;\n\n\t}\n\n\tgetRolloffFactor() {\n\n\t\treturn this.panner.rolloffFactor;\n\n\t}\n\n\tsetRolloffFactor( value ) {\n\n\t\tthis.panner.rolloffFactor = value;\n\n\t\treturn this;\n\n\t}\n\n\tgetDistanceModel() {\n\n\t\treturn this.panner.distanceModel;\n\n\t}\n\n\tsetDistanceModel( value ) {\n\n\t\tthis.panner.distanceModel = value;\n\n\t\treturn this;\n\n\t}\n\n\tgetMaxDistance() {\n\n\t\treturn this.panner.maxDistance;\n\n\t}\n\n\tsetMaxDistance( value ) {\n\n\t\tthis.panner.maxDistance = value;\n\n\t\treturn this;\n\n\t}\n\n\tsetDirectionalCone( coneInnerAngle, coneOuterAngle, coneOuterGain ) {\n\n\t\tthis.panner.coneInnerAngle = coneInnerAngle;\n\t\tthis.panner.coneOuterAngle = coneOuterAngle;\n\t\tthis.panner.coneOuterGain = coneOuterGain;\n\n\t\treturn this;\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t\tif ( this.hasPlaybackControl === true && this.isPlaying === false ) return;\n\n\t\tthis.matrixWorld.decompose( _position, _quaternion, _scale );\n\n\t\t_orientation.set( 0, 0, 1 ).applyQuaternion( _quaternion );\n\n\t\tconst panner = this.panner;\n\n\t\tif ( panner.positionX ) {\n\n\t\t\t// code path for Chrome and Firefox (see #14393)\n\n\t\t\tconst endTime = this.context.currentTime + this.listener.timeDelta;\n\n\t\t\tpanner.positionX.linearRampToValueAtTime( _position.x, endTime );\n\t\t\tpanner.positionY.linearRampToValueAtTime( _position.y, endTime );\n\t\t\tpanner.positionZ.linearRampToValueAtTime( _position.z, endTime );\n\t\t\tpanner.orientationX.linearRampToValueAtTime( _orientation.x, endTime );\n\t\t\tpanner.orientationY.linearRampToValueAtTime( _orientation.y, endTime );\n\t\t\tpanner.orientationZ.linearRampToValueAtTime( _orientation.z, endTime );\n\n\t\t} else {\n\n\t\t\tpanner.setPosition( _position.x, _position.y, _position.z );\n\t\t\tpanner.setOrientation( _orientation.x, _orientation.y, _orientation.z );\n\n\t\t}\n\n\t}\n\n}\n\nclass AudioAnalyser {\n\n\tconstructor( audio, fftSize = 2048 ) {\n\n\t\tthis.analyser = audio.context.createAnalyser();\n\t\tthis.analyser.fftSize = fftSize;\n\n\t\tthis.data = new Uint8Array( this.analyser.frequencyBinCount );\n\n\t\taudio.getOutput().connect( this.analyser );\n\n\t}\n\n\n\tgetFrequencyData() {\n\n\t\tthis.analyser.getByteFrequencyData( this.data );\n\n\t\treturn this.data;\n\n\t}\n\n\tgetAverageFrequency() {\n\n\t\tlet value = 0;\n\t\tconst data = this.getFrequencyData();\n\n\t\tfor ( let i = 0; i < data.length; i ++ ) {\n\n\t\t\tvalue += data[ i ];\n\n\t\t}\n\n\t\treturn value / data.length;\n\n\t}\n\n}\n\nclass PropertyMixer {\n\n\tconstructor( binding, typeName, valueSize ) {\n\n\t\tthis.binding = binding;\n\t\tthis.valueSize = valueSize;\n\n\t\tlet mixFunction,\n\t\t\tmixFunctionAdditive,\n\t\t\tsetIdentity;\n\n\t\t// buffer layout: [ incoming | accu0 | accu1 | orig | addAccu | (optional work) ]\n\t\t//\n\t\t// interpolators can use .buffer as their .result\n\t\t// the data then goes to 'incoming'\n\t\t//\n\t\t// 'accu0' and 'accu1' are used frame-interleaved for\n\t\t// the cumulative result and are compared to detect\n\t\t// changes\n\t\t//\n\t\t// 'orig' stores the original state of the property\n\t\t//\n\t\t// 'add' is used for additive cumulative results\n\t\t//\n\t\t// 'work' is optional and is only present for quaternion types. It is used\n\t\t// to store intermediate quaternion multiplication results\n\n\t\tswitch ( typeName ) {\n\n\t\t\tcase 'quaternion':\n\t\t\t\tmixFunction = this._slerp;\n\t\t\t\tmixFunctionAdditive = this._slerpAdditive;\n\t\t\t\tsetIdentity = this._setAdditiveIdentityQuaternion;\n\n\t\t\t\tthis.buffer = new Float64Array( valueSize * 6 );\n\t\t\t\tthis._workIndex = 5;\n\t\t\t\tbreak;\n\n\t\t\tcase 'string':\n\t\t\tcase 'bool':\n\t\t\t\tmixFunction = this._select;\n\n\t\t\t\t// Use the regular mix function and for additive on these types,\n\t\t\t\t// additive is not relevant for non-numeric types\n\t\t\t\tmixFunctionAdditive = this._select;\n\n\t\t\t\tsetIdentity = this._setAdditiveIdentityOther;\n\n\t\t\t\tthis.buffer = new Array( valueSize * 5 );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tmixFunction = this._lerp;\n\t\t\t\tmixFunctionAdditive = this._lerpAdditive;\n\t\t\t\tsetIdentity = this._setAdditiveIdentityNumeric;\n\n\t\t\t\tthis.buffer = new Float64Array( valueSize * 5 );\n\n\t\t}\n\n\t\tthis._mixBufferRegion = mixFunction;\n\t\tthis._mixBufferRegionAdditive = mixFunctionAdditive;\n\t\tthis._setIdentity = setIdentity;\n\t\tthis._origIndex = 3;\n\t\tthis._addIndex = 4;\n\n\t\tthis.cumulativeWeight = 0;\n\t\tthis.cumulativeWeightAdditive = 0;\n\n\t\tthis.useCount = 0;\n\t\tthis.referenceCount = 0;\n\n\t}\n\n\t// accumulate data in the 'incoming' region into 'accu<i>'\n\taccumulate( accuIndex, weight ) {\n\n\t\t// note: happily accumulating nothing when weight = 0, the caller knows\n\t\t// the weight and shouldn't have made the call in the first place\n\n\t\tconst buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = accuIndex * stride + stride;\n\n\t\tlet currentWeight = this.cumulativeWeight;\n\n\t\tif ( currentWeight === 0 ) {\n\n\t\t\t// accuN := incoming * weight\n\n\t\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\t\tbuffer[ offset + i ] = buffer[ i ];\n\n\t\t\t}\n\n\t\t\tcurrentWeight = weight;\n\n\t\t} else {\n\n\t\t\t// accuN := accuN + incoming * weight\n\n\t\t\tcurrentWeight += weight;\n\t\t\tconst mix = weight / currentWeight;\n\t\t\tthis._mixBufferRegion( buffer, offset, 0, mix, stride );\n\n\t\t}\n\n\t\tthis.cumulativeWeight = currentWeight;\n\n\t}\n\n\t// accumulate data in the 'incoming' region into 'add'\n\taccumulateAdditive( weight ) {\n\n\t\tconst buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = stride * this._addIndex;\n\n\t\tif ( this.cumulativeWeightAdditive === 0 ) {\n\n\t\t\t// add = identity\n\n\t\t\tthis._setIdentity();\n\n\t\t}\n\n\t\t// add := add + incoming * weight\n\n\t\tthis._mixBufferRegionAdditive( buffer, offset, 0, weight, stride );\n\t\tthis.cumulativeWeightAdditive += weight;\n\n\t}\n\n\t// apply the state of 'accu<i>' to the binding when accus differ\n\tapply( accuIndex ) {\n\n\t\tconst stride = this.valueSize,\n\t\t\tbuffer = this.buffer,\n\t\t\toffset = accuIndex * stride + stride,\n\n\t\t\tweight = this.cumulativeWeight,\n\t\t\tweightAdditive = this.cumulativeWeightAdditive,\n\n\t\t\tbinding = this.binding;\n\n\t\tthis.cumulativeWeight = 0;\n\t\tthis.cumulativeWeightAdditive = 0;\n\n\t\tif ( weight < 1 ) {\n\n\t\t\t// accuN := accuN + original * ( 1 - cumulativeWeight )\n\n\t\t\tconst originalValueOffset = stride * this._origIndex;\n\n\t\t\tthis._mixBufferRegion(\n\t\t\t\tbuffer, offset, originalValueOffset, 1 - weight, stride );\n\n\t\t}\n\n\t\tif ( weightAdditive > 0 ) {\n\n\t\t\t// accuN := accuN + additive accuN\n\n\t\t\tthis._mixBufferRegionAdditive( buffer, offset, this._addIndex * stride, 1, stride );\n\n\t\t}\n\n\t\tfor ( let i = stride, e = stride + stride; i !== e; ++ i ) {\n\n\t\t\tif ( buffer[ i ] !== buffer[ i + stride ] ) {\n\n\t\t\t\t// value has changed -> update scene graph\n\n\t\t\t\tbinding.setValue( buffer, offset );\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// remember the state of the bound property and copy it to both accus\n\tsaveOriginalState() {\n\n\t\tconst binding = this.binding;\n\n\t\tconst buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\n\t\t\toriginalValueOffset = stride * this._origIndex;\n\n\t\tbinding.getValue( buffer, originalValueOffset );\n\n\t\t// accu[0..1] := orig -- initially detect changes against the original\n\t\tfor ( let i = stride, e = originalValueOffset; i !== e; ++ i ) {\n\n\t\t\tbuffer[ i ] = buffer[ originalValueOffset + ( i % stride ) ];\n\n\t\t}\n\n\t\t// Add to identity for additive\n\t\tthis._setIdentity();\n\n\t\tthis.cumulativeWeight = 0;\n\t\tthis.cumulativeWeightAdditive = 0;\n\n\t}\n\n\t// apply the state previously taken via 'saveOriginalState' to the binding\n\trestoreOriginalState() {\n\n\t\tconst originalValueOffset = this.valueSize * 3;\n\t\tthis.binding.setValue( this.buffer, originalValueOffset );\n\n\t}\n\n\t_setAdditiveIdentityNumeric() {\n\n\t\tconst startIndex = this._addIndex * this.valueSize;\n\t\tconst endIndex = startIndex + this.valueSize;\n\n\t\tfor ( let i = startIndex; i < endIndex; i ++ ) {\n\n\t\t\tthis.buffer[ i ] = 0;\n\n\t\t}\n\n\t}\n\n\t_setAdditiveIdentityQuaternion() {\n\n\t\tthis._setAdditiveIdentityNumeric();\n\t\tthis.buffer[ this._addIndex * this.valueSize + 3 ] = 1;\n\n\t}\n\n\t_setAdditiveIdentityOther() {\n\n\t\tconst startIndex = this._origIndex * this.valueSize;\n\t\tconst targetIndex = this._addIndex * this.valueSize;\n\n\t\tfor ( let i = 0; i < this.valueSize; i ++ ) {\n\n\t\t\tthis.buffer[ targetIndex + i ] = this.buffer[ startIndex + i ];\n\n\t\t}\n\n\t}\n\n\n\t// mix functions\n\n\t_select( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tif ( t >= 0.5 ) {\n\n\t\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\t\tbuffer[ dstOffset + i ] = buffer[ srcOffset + i ];\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_slerp( buffer, dstOffset, srcOffset, t ) {\n\n\t\tQuaternion.slerpFlat( buffer, dstOffset, buffer, dstOffset, buffer, srcOffset, t );\n\n\t}\n\n\t_slerpAdditive( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tconst workOffset = this._workIndex * stride;\n\n\t\t// Store result in intermediate buffer offset\n\t\tQuaternion.multiplyQuaternionsFlat( buffer, workOffset, buffer, dstOffset, buffer, srcOffset );\n\n\t\t// Slerp to the intermediate result\n\t\tQuaternion.slerpFlat( buffer, dstOffset, buffer, dstOffset, buffer, workOffset, t );\n\n\t}\n\n\t_lerp( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tconst s = 1 - t;\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tconst j = dstOffset + i;\n\n\t\t\tbuffer[ j ] = buffer[ j ] * s + buffer[ srcOffset + i ] * t;\n\n\t\t}\n\n\t}\n\n\t_lerpAdditive( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tconst j = dstOffset + i;\n\n\t\t\tbuffer[ j ] = buffer[ j ] + buffer[ srcOffset + i ] * t;\n\n\t\t}\n\n\t}\n\n}\n\n// Characters [].:/ are reserved for track binding syntax.\nconst _RESERVED_CHARS_RE = '\\\\[\\\\]\\\\.:\\\\/';\nconst _reservedRe = new RegExp( '[' + _RESERVED_CHARS_RE + ']', 'g' );\n\n// Attempts to allow node names from any language. ES5's `\\w` regexp matches\n// only latin characters, and the unicode \\p{L} is not yet supported. So\n// instead, we exclude reserved characters and match everything else.\nconst _wordChar = '[^' + _RESERVED_CHARS_RE + ']';\nconst _wordCharOrDot = '[^' + _RESERVED_CHARS_RE.replace( '\\\\.', '' ) + ']';\n\n// Parent directories, delimited by '/' or ':'. Currently unused, but must\n// be matched to parse the rest of the track name.\nconst _directoryRe = /*@__PURE__*/ /((?:WC+[\\/:])*)/.source.replace( 'WC', _wordChar );\n\n// Target node. May contain word characters (a-zA-Z0-9_) and '.' or '-'.\nconst _nodeRe = /*@__PURE__*/ /(WCOD+)?/.source.replace( 'WCOD', _wordCharOrDot );\n\n// Object on target node, and accessor. May not contain reserved\n// characters. Accessor may contain any character except closing bracket.\nconst _objectRe = /*@__PURE__*/ /(?:\\.(WC+)(?:\\[(.+)\\])?)?/.source.replace( 'WC', _wordChar );\n\n// Property and accessor. May not contain reserved characters. Accessor may\n// contain any non-bracket characters.\nconst _propertyRe = /*@__PURE__*/ /\\.(WC+)(?:\\[(.+)\\])?/.source.replace( 'WC', _wordChar );\n\nconst _trackRe = new RegExp( ''\n\t+ '^'\n\t+ _directoryRe\n\t+ _nodeRe\n\t+ _objectRe\n\t+ _propertyRe\n\t+ '$'\n);\n\nconst _supportedObjectNames = [ 'material', 'materials', 'bones', 'map' ];\n\nclass Composite {\n\n\tconstructor( targetGroup, path, optionalParsedPath ) {\n\n\t\tconst parsedPath = optionalParsedPath || PropertyBinding.parseTrackName( path );\n\n\t\tthis._targetGroup = targetGroup;\n\t\tthis._bindings = targetGroup.subscribe_( path, parsedPath );\n\n\t}\n\n\tgetValue( array, offset ) {\n\n\t\tthis.bind(); // bind all binding\n\n\t\tconst firstValidIndex = this._targetGroup.nCachedObjects_,\n\t\t\tbinding = this._bindings[ firstValidIndex ];\n\n\t\t// and only call .getValue on the first\n\t\tif ( binding !== undefined ) binding.getValue( array, offset );\n\n\t}\n\n\tsetValue( array, offset ) {\n\n\t\tconst bindings = this._bindings;\n\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].setValue( array, offset );\n\n\t\t}\n\n\t}\n\n\tbind() {\n\n\t\tconst bindings = this._bindings;\n\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].bind();\n\n\t\t}\n\n\t}\n\n\tunbind() {\n\n\t\tconst bindings = this._bindings;\n\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].unbind();\n\n\t\t}\n\n\t}\n\n}\n\n// Note: This class uses a State pattern on a per-method basis:\n// 'bind' sets 'this.getValue' / 'setValue' and shadows the\n// prototype version of these methods with one that represents\n// the bound state. When the property is not found, the methods\n// become no-ops.\nclass PropertyBinding {\n\n\tconstructor( rootNode, path, parsedPath ) {\n\n\t\tthis.path = path;\n\t\tthis.parsedPath = parsedPath || PropertyBinding.parseTrackName( path );\n\n\t\tthis.node = PropertyBinding.findNode( rootNode, this.parsedPath.nodeName ) || rootNode;\n\n\t\tthis.rootNode = rootNode;\n\n\t\t// initial state of these methods that calls 'bind'\n\t\tthis.getValue = this._getValue_unbound;\n\t\tthis.setValue = this._setValue_unbound;\n\n\t}\n\n\n\tstatic create( root, path, parsedPath ) {\n\n\t\tif ( ! ( root && root.isAnimationObjectGroup ) ) {\n\n\t\t\treturn new PropertyBinding( root, path, parsedPath );\n\n\t\t} else {\n\n\t\t\treturn new PropertyBinding.Composite( root, path, parsedPath );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Replaces spaces with underscores and removes unsupported characters from\n\t * node names, to ensure compatibility with parseTrackName().\n\t *\n\t * @param {string} name Node name to be sanitized.\n\t * @return {string}\n\t */\n\tstatic sanitizeNodeName( name ) {\n\n\t\treturn name.replace( /\\s/g, '_' ).replace( _reservedRe, '' );\n\n\t}\n\n\tstatic parseTrackName( trackName ) {\n\n\t\tconst matches = _trackRe.exec( trackName );\n\n\t\tif ( matches === null ) {\n\n\t\t\tthrow new Error( 'PropertyBinding: Cannot parse trackName: ' + trackName );\n\n\t\t}\n\n\t\tconst results = {\n\t\t\t// directoryName: matches[ 1 ], // (tschw) currently unused\n\t\t\tnodeName: matches[ 2 ],\n\t\t\tobjectName: matches[ 3 ],\n\t\t\tobjectIndex: matches[ 4 ],\n\t\t\tpropertyName: matches[ 5 ], // required\n\t\t\tpropertyIndex: matches[ 6 ]\n\t\t};\n\n\t\tconst lastDot = results.nodeName && results.nodeName.lastIndexOf( '.' );\n\n\t\tif ( lastDot !== undefined && lastDot !== - 1 ) {\n\n\t\t\tconst objectName = results.nodeName.substring( lastDot + 1 );\n\n\t\t\t// Object names must be checked against an allowlist. Otherwise, there\n\t\t\t// is no way to parse 'foo.bar.baz': 'baz' must be a property, but\n\t\t\t// 'bar' could be the objectName, or part of a nodeName (which can\n\t\t\t// include '.' characters).\n\t\t\tif ( _supportedObjectNames.indexOf( objectName ) !== - 1 ) {\n\n\t\t\t\tresults.nodeName = results.nodeName.substring( 0, lastDot );\n\t\t\t\tresults.objectName = objectName;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( results.propertyName === null || results.propertyName.length === 0 ) {\n\n\t\t\tthrow new Error( 'PropertyBinding: can not parse propertyName from trackName: ' + trackName );\n\n\t\t}\n\n\t\treturn results;\n\n\t}\n\n\tstatic findNode( root, nodeName ) {\n\n\t\tif ( nodeName === undefined || nodeName === '' || nodeName === '.' || nodeName === - 1 || nodeName === root.name || nodeName === root.uuid ) {\n\n\t\t\treturn root;\n\n\t\t}\n\n\t\t// search into skeleton bones.\n\t\tif ( root.skeleton ) {\n\n\t\t\tconst bone = root.skeleton.getBoneByName( nodeName );\n\n\t\t\tif ( bone !== undefined ) {\n\n\t\t\t\treturn bone;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// search into node subtree.\n\t\tif ( root.children ) {\n\n\t\t\tconst searchNodeSubtree = function ( children ) {\n\n\t\t\t\tfor ( let i = 0; i < children.length; i ++ ) {\n\n\t\t\t\t\tconst childNode = children[ i ];\n\n\t\t\t\t\tif ( childNode.name === nodeName || childNode.uuid === nodeName ) {\n\n\t\t\t\t\t\treturn childNode;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst result = searchNodeSubtree( childNode.children );\n\n\t\t\t\t\tif ( result ) return result;\n\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\n\t\t\t};\n\n\t\t\tconst subTreeNode = searchNodeSubtree( root.children );\n\n\t\t\tif ( subTreeNode ) {\n\n\t\t\t\treturn subTreeNode;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t// these are used to \"bind\" a nonexistent property\n\t_getValue_unavailable() {}\n\t_setValue_unavailable() {}\n\n\t// Getters\n\n\t_getValue_direct( buffer, offset ) {\n\n\t\tbuffer[ offset ] = this.targetObject[ this.propertyName ];\n\n\t}\n\n\t_getValue_array( buffer, offset ) {\n\n\t\tconst source = this.resolvedProperty;\n\n\t\tfor ( let i = 0, n = source.length; i !== n; ++ i ) {\n\n\t\t\tbuffer[ offset ++ ] = source[ i ];\n\n\t\t}\n\n\t}\n\n\t_getValue_arrayElement( buffer, offset ) {\n\n\t\tbuffer[ offset ] = this.resolvedProperty[ this.propertyIndex ];\n\n\t}\n\n\t_getValue_toArray( buffer, offset ) {\n\n\t\tthis.resolvedProperty.toArray( buffer, offset );\n\n\t}\n\n\t// Direct\n\n\t_setValue_direct( buffer, offset ) {\n\n\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\n\t}\n\n\t_setValue_direct_setNeedsUpdate( buffer, offset ) {\n\n\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\t\tthis.targetObject.needsUpdate = true;\n\n\t}\n\n\t_setValue_direct_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t}\n\n\t// EntireArray\n\n\t_setValue_array( buffer, offset ) {\n\n\t\tconst dest = this.resolvedProperty;\n\n\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t}\n\n\t}\n\n\t_setValue_array_setNeedsUpdate( buffer, offset ) {\n\n\t\tconst dest = this.resolvedProperty;\n\n\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t}\n\n\t\tthis.targetObject.needsUpdate = true;\n\n\t}\n\n\t_setValue_array_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\tconst dest = this.resolvedProperty;\n\n\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t}\n\n\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t}\n\n\t// ArrayElement\n\n\t_setValue_arrayElement( buffer, offset ) {\n\n\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\n\t}\n\n\t_setValue_arrayElement_setNeedsUpdate( buffer, offset ) {\n\n\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\t\tthis.targetObject.needsUpdate = true;\n\n\t}\n\n\t_setValue_arrayElement_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t}\n\n\t// HasToFromArray\n\n\t_setValue_fromArray( buffer, offset ) {\n\n\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\n\t}\n\n\t_setValue_fromArray_setNeedsUpdate( buffer, offset ) {\n\n\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\t\tthis.targetObject.needsUpdate = true;\n\n\t}\n\n\t_setValue_fromArray_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t}\n\n\t_getValue_unbound( targetArray, offset ) {\n\n\t\tthis.bind();\n\t\tthis.getValue( targetArray, offset );\n\n\t}\n\n\t_setValue_unbound( sourceArray, offset ) {\n\n\t\tthis.bind();\n\t\tthis.setValue( sourceArray, offset );\n\n\t}\n\n\t// create getter / setter pair for a property in the scene graph\n\tbind() {\n\n\t\tlet targetObject = this.node;\n\t\tconst parsedPath = this.parsedPath;\n\n\t\tconst objectName = parsedPath.objectName;\n\t\tconst propertyName = parsedPath.propertyName;\n\t\tlet propertyIndex = parsedPath.propertyIndex;\n\n\t\tif ( ! targetObject ) {\n\n\t\t\ttargetObject = PropertyBinding.findNode( this.rootNode, parsedPath.nodeName ) || this.rootNode;\n\n\t\t\tthis.node = targetObject;\n\n\t\t}\n\n\t\t// set fail state so we can just 'return' on error\n\t\tthis.getValue = this._getValue_unavailable;\n\t\tthis.setValue = this._setValue_unavailable;\n\n\t\t// ensure there is a value node\n\t\tif ( ! targetObject ) {\n\n\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to update node for track: ' + this.path + ' but it wasn\\'t found.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( objectName ) {\n\n\t\t\tlet objectIndex = parsedPath.objectIndex;\n\n\t\t\t// special cases were we need to reach deeper into the hierarchy to get the face materials....\n\t\t\tswitch ( objectName ) {\n\n\t\t\t\tcase 'materials':\n\n\t\t\t\t\tif ( ! targetObject.material ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material as node does not have a material.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! targetObject.material.materials ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetObject = targetObject.material.materials;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bones':\n\n\t\t\t\t\tif ( ! targetObject.skeleton ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// potential future optimization: skip this if propertyIndex is already an integer\n\t\t\t\t\t// and convert the integer string to a true integer.\n\n\t\t\t\t\ttargetObject = targetObject.skeleton.bones;\n\n\t\t\t\t\t// support resolving morphTarget names into indices.\n\t\t\t\t\tfor ( let i = 0; i < targetObject.length; i ++ ) {\n\n\t\t\t\t\t\tif ( targetObject[ i ].name === objectIndex ) {\n\n\t\t\t\t\t\t\tobjectIndex = i;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map':\n\n\t\t\t\t\tif ( 'map' in targetObject ) {\n\n\t\t\t\t\t\ttargetObject = targetObject.map;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! targetObject.material ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material as node does not have a material.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! targetObject.material.map ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetObject = targetObject.material.map;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tif ( targetObject[ objectName ] === undefined ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to objectName of node undefined.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetObject = targetObject[ objectName ];\n\n\t\t\t}\n\n\n\t\t\tif ( objectIndex !== undefined ) {\n\n\t\t\t\tif ( targetObject[ objectIndex ] === undefined ) {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.', this, targetObject );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\ttargetObject = targetObject[ objectIndex ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// resolve property\n\t\tconst nodeProperty = targetObject[ propertyName ];\n\n\t\tif ( nodeProperty === undefined ) {\n\n\t\t\tconst nodeName = parsedPath.nodeName;\n\n\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to update property for track: ' + nodeName +\n\t\t\t\t'.' + propertyName + ' but it wasn\\'t found.', targetObject );\n\t\t\treturn;\n\n\t\t}\n\n\t\t// determine versioning scheme\n\t\tlet versioning = this.Versioning.None;\n\n\t\tthis.targetObject = targetObject;\n\n\t\tif ( targetObject.needsUpdate !== undefined ) { // material\n\n\t\t\tversioning = this.Versioning.NeedsUpdate;\n\n\t\t} else if ( targetObject.matrixWorldNeedsUpdate !== undefined ) { // node transform\n\n\t\t\tversioning = this.Versioning.MatrixWorldNeedsUpdate;\n\n\t\t}\n\n\t\t// determine how the property gets bound\n\t\tlet bindingType = this.BindingType.Direct;\n\n\t\tif ( propertyIndex !== undefined ) {\n\n\t\t\t// access a sub element of the property array (only primitives are supported right now)\n\n\t\t\tif ( propertyName === 'morphTargetInfluences' ) {\n\n\t\t\t\t// potential optimization, skip this if propertyIndex is already an integer, and convert the integer string to a true integer.\n\n\t\t\t\t// support resolving morphTarget names into indices.\n\t\t\t\tif ( ! targetObject.geometry ) {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.', this );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! targetObject.geometry.morphAttributes ) {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.', this );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( targetObject.morphTargetDictionary[ propertyIndex ] !== undefined ) {\n\n\t\t\t\t\tpropertyIndex = targetObject.morphTargetDictionary[ propertyIndex ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tbindingType = this.BindingType.ArrayElement;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\t\t\tthis.propertyIndex = propertyIndex;\n\n\t\t} else if ( nodeProperty.fromArray !== undefined && nodeProperty.toArray !== undefined ) {\n\n\t\t\t// must use copy for Object3D.Euler/Quaternion\n\n\t\t\tbindingType = this.BindingType.HasFromToArray;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\n\t\t} else if ( Array.isArray( nodeProperty ) ) {\n\n\t\t\tbindingType = this.BindingType.EntireArray;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\n\t\t} else {\n\n\t\t\tthis.propertyName = propertyName;\n\n\t\t}\n\n\t\t// select getter / setter\n\t\tthis.getValue = this.GetterByBindingType[ bindingType ];\n\t\tthis.setValue = this.SetterByBindingTypeAndVersioning[ bindingType ][ versioning ];\n\n\t}\n\n\tunbind() {\n\n\t\tthis.node = null;\n\n\t\t// back to the prototype version of getValue / setValue\n\t\t// note: avoiding to mutate the shape of 'this' via 'delete'\n\t\tthis.getValue = this._getValue_unbound;\n\t\tthis.setValue = this._setValue_unbound;\n\n\t}\n\n}\n\nPropertyBinding.Composite = Composite;\n\nPropertyBinding.prototype.BindingType = {\n\tDirect: 0,\n\tEntireArray: 1,\n\tArrayElement: 2,\n\tHasFromToArray: 3\n};\n\nPropertyBinding.prototype.Versioning = {\n\tNone: 0,\n\tNeedsUpdate: 1,\n\tMatrixWorldNeedsUpdate: 2\n};\n\nPropertyBinding.prototype.GetterByBindingType = [\n\n\tPropertyBinding.prototype._getValue_direct,\n\tPropertyBinding.prototype._getValue_array,\n\tPropertyBinding.prototype._getValue_arrayElement,\n\tPropertyBinding.prototype._getValue_toArray,\n\n];\n\nPropertyBinding.prototype.SetterByBindingTypeAndVersioning = [\n\n\t[\n\t\t// Direct\n\t\tPropertyBinding.prototype._setValue_direct,\n\t\tPropertyBinding.prototype._setValue_direct_setNeedsUpdate,\n\t\tPropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate,\n\n\t], [\n\n\t\t// EntireArray\n\n\t\tPropertyBinding.prototype._setValue_array,\n\t\tPropertyBinding.prototype._setValue_array_setNeedsUpdate,\n\t\tPropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate,\n\n\t], [\n\n\t\t// ArrayElement\n\t\tPropertyBinding.prototype._setValue_arrayElement,\n\t\tPropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,\n\t\tPropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate,\n\n\t], [\n\n\t\t// HasToFromArray\n\t\tPropertyBinding.prototype._setValue_fromArray,\n\t\tPropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,\n\t\tPropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate,\n\n\t]\n\n];\n\n/**\n *\n * A group of objects that receives a shared animation state.\n *\n * Usage:\n *\n *  - Add objects you would otherwise pass as 'root' to the\n *    constructor or the .clipAction method of AnimationMixer.\n *\n *  - Instead pass this object as 'root'.\n *\n *  - You can also add and remove objects later when the mixer\n *    is running.\n *\n * Note:\n *\n *    Objects of this class appear as one object to the mixer,\n *    so cache control of the individual objects must be done\n *    on the group.\n *\n * Limitation:\n *\n *  - The animated properties must be compatible among the\n *    all objects in the group.\n *\n *  - A single property can either be controlled through a\n *    target group or directly, but not both.\n */\n\nclass AnimationObjectGroup {\n\n\tconstructor() {\n\n\t\tthis.isAnimationObjectGroup = true;\n\n\t\tthis.uuid = generateUUID();\n\n\t\t// cached objects followed by the active ones\n\t\tthis._objects = Array.prototype.slice.call( arguments );\n\n\t\tthis.nCachedObjects_ = 0; // threshold\n\t\t// note: read by PropertyBinding.Composite\n\n\t\tconst indices = {};\n\t\tthis._indicesByUUID = indices; // for bookkeeping\n\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\tindices[ arguments[ i ].uuid ] = i;\n\n\t\t}\n\n\t\tthis._paths = []; // inside: string\n\t\tthis._parsedPaths = []; // inside: { we don't care, here }\n\t\tthis._bindings = []; // inside: Array< PropertyBinding >\n\t\tthis._bindingsIndicesByPath = {}; // inside: indices in these arrays\n\n\t\tconst scope = this;\n\n\t\tthis.stats = {\n\n\t\t\tobjects: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._objects.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn this.total - scope.nCachedObjects_;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tget bindingsPerObject() {\n\n\t\t\t\treturn scope._bindings.length;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tadd() {\n\n\t\tconst objects = this._objects,\n\t\t\tindicesByUUID = this._indicesByUUID,\n\t\t\tpaths = this._paths,\n\t\t\tparsedPaths = this._parsedPaths,\n\t\t\tbindings = this._bindings,\n\t\t\tnBindings = bindings.length;\n\n\t\tlet knownObject = undefined,\n\t\t\tnObjects = objects.length,\n\t\t\tnCachedObjects = this.nCachedObjects_;\n\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\tconst object = arguments[ i ],\n\t\t\t\tuuid = object.uuid;\n\t\t\tlet index = indicesByUUID[ uuid ];\n\n\t\t\tif ( index === undefined ) {\n\n\t\t\t\t// unknown object -> add it to the ACTIVE region\n\n\t\t\t\tindex = nObjects ++;\n\t\t\t\tindicesByUUID[ uuid ] = index;\n\t\t\t\tobjects.push( object );\n\n\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\tbindings[ j ].push( new PropertyBinding( object, paths[ j ], parsedPaths[ j ] ) );\n\n\t\t\t\t}\n\n\t\t\t} else if ( index < nCachedObjects ) {\n\n\t\t\t\tknownObject = objects[ index ];\n\n\t\t\t\t// move existing object to the ACTIVE region\n\n\t\t\t\tconst firstActiveIndex = -- nCachedObjects,\n\t\t\t\t\tlastCachedObject = objects[ firstActiveIndex ];\n\n\t\t\t\tindicesByUUID[ lastCachedObject.uuid ] = index;\n\t\t\t\tobjects[ index ] = lastCachedObject;\n\n\t\t\t\tindicesByUUID[ uuid ] = firstActiveIndex;\n\t\t\t\tobjects[ firstActiveIndex ] = object;\n\n\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\tconst bindingsForPath = bindings[ j ],\n\t\t\t\t\t\tlastCached = bindingsForPath[ firstActiveIndex ];\n\n\t\t\t\t\tlet binding = bindingsForPath[ index ];\n\n\t\t\t\t\tbindingsForPath[ index ] = lastCached;\n\n\t\t\t\t\tif ( binding === undefined ) {\n\n\t\t\t\t\t\t// since we do not bother to create new bindings\n\t\t\t\t\t\t// for objects that are cached, the binding may\n\t\t\t\t\t\t// or may not exist\n\n\t\t\t\t\t\tbinding = new PropertyBinding( object, paths[ j ], parsedPaths[ j ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbindingsForPath[ firstActiveIndex ] = binding;\n\n\t\t\t\t}\n\n\t\t\t} else if ( objects[ index ] !== knownObject ) {\n\n\t\t\t\tconsole.error( 'THREE.AnimationObjectGroup: Different objects with the same UUID ' +\n\t\t\t\t\t'detected. Clean the caches or recreate your infrastructure when reloading scenes.' );\n\n\t\t\t} // else the object is already where we want it to be\n\n\t\t} // for arguments\n\n\t\tthis.nCachedObjects_ = nCachedObjects;\n\n\t}\n\n\tremove() {\n\n\t\tconst objects = this._objects,\n\t\t\tindicesByUUID = this._indicesByUUID,\n\t\t\tbindings = this._bindings,\n\t\t\tnBindings = bindings.length;\n\n\t\tlet nCachedObjects = this.nCachedObjects_;\n\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\tconst object = arguments[ i ],\n\t\t\t\tuuid = object.uuid,\n\t\t\t\tindex = indicesByUUID[ uuid ];\n\n\t\t\tif ( index !== undefined && index >= nCachedObjects ) {\n\n\t\t\t\t// move existing object into the CACHED region\n\n\t\t\t\tconst lastCachedIndex = nCachedObjects ++,\n\t\t\t\t\tfirstActiveObject = objects[ lastCachedIndex ];\n\n\t\t\t\tindicesByUUID[ firstActiveObject.uuid ] = index;\n\t\t\t\tobjects[ index ] = firstActiveObject;\n\n\t\t\t\tindicesByUUID[ uuid ] = lastCachedIndex;\n\t\t\t\tobjects[ lastCachedIndex ] = object;\n\n\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\tconst bindingsForPath = bindings[ j ],\n\t\t\t\t\t\tfirstActive = bindingsForPath[ lastCachedIndex ],\n\t\t\t\t\t\tbinding = bindingsForPath[ index ];\n\n\t\t\t\t\tbindingsForPath[ index ] = firstActive;\n\t\t\t\t\tbindingsForPath[ lastCachedIndex ] = binding;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} // for arguments\n\n\t\tthis.nCachedObjects_ = nCachedObjects;\n\n\t}\n\n\t// remove & forget\n\tuncache() {\n\n\t\tconst objects = this._objects,\n\t\t\tindicesByUUID = this._indicesByUUID,\n\t\t\tbindings = this._bindings,\n\t\t\tnBindings = bindings.length;\n\n\t\tlet nCachedObjects = this.nCachedObjects_,\n\t\t\tnObjects = objects.length;\n\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\tconst object = arguments[ i ],\n\t\t\t\tuuid = object.uuid,\n\t\t\t\tindex = indicesByUUID[ uuid ];\n\n\t\t\tif ( index !== undefined ) {\n\n\t\t\t\tdelete indicesByUUID[ uuid ];\n\n\t\t\t\tif ( index < nCachedObjects ) {\n\n\t\t\t\t\t// object is cached, shrink the CACHED region\n\n\t\t\t\t\tconst firstActiveIndex = -- nCachedObjects,\n\t\t\t\t\t\tlastCachedObject = objects[ firstActiveIndex ],\n\t\t\t\t\t\tlastIndex = -- nObjects,\n\t\t\t\t\t\tlastObject = objects[ lastIndex ];\n\n\t\t\t\t\t// last cached object takes this object's place\n\t\t\t\t\tindicesByUUID[ lastCachedObject.uuid ] = index;\n\t\t\t\t\tobjects[ index ] = lastCachedObject;\n\n\t\t\t\t\t// last object goes to the activated slot and pop\n\t\t\t\t\tindicesByUUID[ lastObject.uuid ] = firstActiveIndex;\n\t\t\t\t\tobjects[ firstActiveIndex ] = lastObject;\n\t\t\t\t\tobjects.pop();\n\n\t\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\t\tconst bindingsForPath = bindings[ j ],\n\t\t\t\t\t\t\tlastCached = bindingsForPath[ firstActiveIndex ],\n\t\t\t\t\t\t\tlast = bindingsForPath[ lastIndex ];\n\n\t\t\t\t\t\tbindingsForPath[ index ] = lastCached;\n\t\t\t\t\t\tbindingsForPath[ firstActiveIndex ] = last;\n\t\t\t\t\t\tbindingsForPath.pop();\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// object is active, just swap with the last and pop\n\n\t\t\t\t\tconst lastIndex = -- nObjects,\n\t\t\t\t\t\tlastObject = objects[ lastIndex ];\n\n\t\t\t\t\tif ( lastIndex > 0 ) {\n\n\t\t\t\t\t\tindicesByUUID[ lastObject.uuid ] = index;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tobjects[ index ] = lastObject;\n\t\t\t\t\tobjects.pop();\n\n\t\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\t\tconst bindingsForPath = bindings[ j ];\n\n\t\t\t\t\t\tbindingsForPath[ index ] = bindingsForPath[ lastIndex ];\n\t\t\t\t\t\tbindingsForPath.pop();\n\n\t\t\t\t\t}\n\n\t\t\t\t} // cached or active\n\n\t\t\t} // if object is known\n\n\t\t} // for arguments\n\n\t\tthis.nCachedObjects_ = nCachedObjects;\n\n\t}\n\n\t// Internal interface used by befriended PropertyBinding.Composite:\n\n\tsubscribe_( path, parsedPath ) {\n\n\t\t// returns an array of bindings for the given path that is changed\n\t\t// according to the contained objects in the group\n\n\t\tconst indicesByPath = this._bindingsIndicesByPath;\n\t\tlet index = indicesByPath[ path ];\n\t\tconst bindings = this._bindings;\n\n\t\tif ( index !== undefined ) return bindings[ index ];\n\n\t\tconst paths = this._paths,\n\t\t\tparsedPaths = this._parsedPaths,\n\t\t\tobjects = this._objects,\n\t\t\tnObjects = objects.length,\n\t\t\tnCachedObjects = this.nCachedObjects_,\n\t\t\tbindingsForPath = new Array( nObjects );\n\n\t\tindex = bindings.length;\n\n\t\tindicesByPath[ path ] = index;\n\n\t\tpaths.push( path );\n\t\tparsedPaths.push( parsedPath );\n\t\tbindings.push( bindingsForPath );\n\n\t\tfor ( let i = nCachedObjects, n = objects.length; i !== n; ++ i ) {\n\n\t\t\tconst object = objects[ i ];\n\t\t\tbindingsForPath[ i ] = new PropertyBinding( object, path, parsedPath );\n\n\t\t}\n\n\t\treturn bindingsForPath;\n\n\t}\n\n\tunsubscribe_( path ) {\n\n\t\t// tells the group to forget about a property path and no longer\n\t\t// update the array previously obtained with 'subscribe_'\n\n\t\tconst indicesByPath = this._bindingsIndicesByPath,\n\t\t\tindex = indicesByPath[ path ];\n\n\t\tif ( index !== undefined ) {\n\n\t\t\tconst paths = this._paths,\n\t\t\t\tparsedPaths = this._parsedPaths,\n\t\t\t\tbindings = this._bindings,\n\t\t\t\tlastBindingsIndex = bindings.length - 1,\n\t\t\t\tlastBindings = bindings[ lastBindingsIndex ],\n\t\t\t\tlastBindingsPath = path[ lastBindingsIndex ];\n\n\t\t\tindicesByPath[ lastBindingsPath ] = index;\n\n\t\t\tbindings[ index ] = lastBindings;\n\t\t\tbindings.pop();\n\n\t\t\tparsedPaths[ index ] = parsedPaths[ lastBindingsIndex ];\n\t\t\tparsedPaths.pop();\n\n\t\t\tpaths[ index ] = paths[ lastBindingsIndex ];\n\t\t\tpaths.pop();\n\n\t\t}\n\n\t}\n\n}\n\nclass AnimationAction {\n\n\tconstructor( mixer, clip, localRoot = null, blendMode = clip.blendMode ) {\n\n\t\tthis._mixer = mixer;\n\t\tthis._clip = clip;\n\t\tthis._localRoot = localRoot;\n\t\tthis.blendMode = blendMode;\n\n\t\tconst tracks = clip.tracks,\n\t\t\tnTracks = tracks.length,\n\t\t\tinterpolants = new Array( nTracks );\n\n\t\tconst interpolantSettings = {\n\t\t\tendingStart: ZeroCurvatureEnding,\n\t\t\tendingEnd: ZeroCurvatureEnding\n\t\t};\n\n\t\tfor ( let i = 0; i !== nTracks; ++ i ) {\n\n\t\t\tconst interpolant = tracks[ i ].createInterpolant( null );\n\t\t\tinterpolants[ i ] = interpolant;\n\t\t\tinterpolant.settings = interpolantSettings;\n\n\t\t}\n\n\t\tthis._interpolantSettings = interpolantSettings;\n\n\t\tthis._interpolants = interpolants; // bound by the mixer\n\n\t\t// inside: PropertyMixer (managed by the mixer)\n\t\tthis._propertyBindings = new Array( nTracks );\n\n\t\tthis._cacheIndex = null; // for the memory manager\n\t\tthis._byClipCacheIndex = null; // for the memory manager\n\n\t\tthis._timeScaleInterpolant = null;\n\t\tthis._weightInterpolant = null;\n\n\t\tthis.loop = LoopRepeat;\n\t\tthis._loopCount = - 1;\n\n\t\t// global mixer time when the action is to be started\n\t\t// it's set back to 'null' upon start of the action\n\t\tthis._startTime = null;\n\n\t\t// scaled local time of the action\n\t\t// gets clamped or wrapped to 0..clip.duration according to loop\n\t\tthis.time = 0;\n\n\t\tthis.timeScale = 1;\n\t\tthis._effectiveTimeScale = 1;\n\n\t\tthis.weight = 1;\n\t\tthis._effectiveWeight = 1;\n\n\t\tthis.repetitions = Infinity; // no. of repetitions when looping\n\n\t\tthis.paused = false; // true -> zero effective time scale\n\t\tthis.enabled = true; // false -> zero effective weight\n\n\t\tthis.clampWhenFinished = false;// keep feeding the last frame?\n\n\t\tthis.zeroSlopeAtStart = true;// for smooth interpolation w/o separate\n\t\tthis.zeroSlopeAtEnd = true;// clips for start, loop and end\n\n\t}\n\n\t// State & Scheduling\n\n\tplay() {\n\n\t\tthis._mixer._activateAction( this );\n\n\t\treturn this;\n\n\t}\n\n\tstop() {\n\n\t\tthis._mixer._deactivateAction( this );\n\n\t\treturn this.reset();\n\n\t}\n\n\treset() {\n\n\t\tthis.paused = false;\n\t\tthis.enabled = true;\n\n\t\tthis.time = 0; // restart clip\n\t\tthis._loopCount = - 1;// forget previous loops\n\t\tthis._startTime = null;// forget scheduling\n\n\t\treturn this.stopFading().stopWarping();\n\n\t}\n\n\tisRunning() {\n\n\t\treturn this.enabled && ! this.paused && this.timeScale !== 0 &&\n\t\t\tthis._startTime === null && this._mixer._isActiveAction( this );\n\n\t}\n\n\t// return true when play has been called\n\tisScheduled() {\n\n\t\treturn this._mixer._isActiveAction( this );\n\n\t}\n\n\tstartAt( time ) {\n\n\t\tthis._startTime = time;\n\n\t\treturn this;\n\n\t}\n\n\tsetLoop( mode, repetitions ) {\n\n\t\tthis.loop = mode;\n\t\tthis.repetitions = repetitions;\n\n\t\treturn this;\n\n\t}\n\n\t// Weight\n\n\t// set the weight stopping any scheduled fading\n\t// although .enabled = false yields an effective weight of zero, this\n\t// method does *not* change .enabled, because it would be confusing\n\tsetEffectiveWeight( weight ) {\n\n\t\tthis.weight = weight;\n\n\t\t// note: same logic as when updated at runtime\n\t\tthis._effectiveWeight = this.enabled ? weight : 0;\n\n\t\treturn this.stopFading();\n\n\t}\n\n\t// return the weight considering fading and .enabled\n\tgetEffectiveWeight() {\n\n\t\treturn this._effectiveWeight;\n\n\t}\n\n\tfadeIn( duration ) {\n\n\t\treturn this._scheduleFading( duration, 0, 1 );\n\n\t}\n\n\tfadeOut( duration ) {\n\n\t\treturn this._scheduleFading( duration, 1, 0 );\n\n\t}\n\n\tcrossFadeFrom( fadeOutAction, duration, warp ) {\n\n\t\tfadeOutAction.fadeOut( duration );\n\t\tthis.fadeIn( duration );\n\n\t\tif ( warp ) {\n\n\t\t\tconst fadeInDuration = this._clip.duration,\n\t\t\t\tfadeOutDuration = fadeOutAction._clip.duration,\n\n\t\t\t\tstartEndRatio = fadeOutDuration / fadeInDuration,\n\t\t\t\tendStartRatio = fadeInDuration / fadeOutDuration;\n\n\t\t\tfadeOutAction.warp( 1.0, startEndRatio, duration );\n\t\t\tthis.warp( endStartRatio, 1.0, duration );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tcrossFadeTo( fadeInAction, duration, warp ) {\n\n\t\treturn fadeInAction.crossFadeFrom( this, duration, warp );\n\n\t}\n\n\tstopFading() {\n\n\t\tconst weightInterpolant = this._weightInterpolant;\n\n\t\tif ( weightInterpolant !== null ) {\n\n\t\t\tthis._weightInterpolant = null;\n\t\t\tthis._mixer._takeBackControlInterpolant( weightInterpolant );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// Time Scale Control\n\n\t// set the time scale stopping any scheduled warping\n\t// although .paused = true yields an effective time scale of zero, this\n\t// method does *not* change .paused, because it would be confusing\n\tsetEffectiveTimeScale( timeScale ) {\n\n\t\tthis.timeScale = timeScale;\n\t\tthis._effectiveTimeScale = this.paused ? 0 : timeScale;\n\n\t\treturn this.stopWarping();\n\n\t}\n\n\t// return the time scale considering warping and .paused\n\tgetEffectiveTimeScale() {\n\n\t\treturn this._effectiveTimeScale;\n\n\t}\n\n\tsetDuration( duration ) {\n\n\t\tthis.timeScale = this._clip.duration / duration;\n\n\t\treturn this.stopWarping();\n\n\t}\n\n\tsyncWith( action ) {\n\n\t\tthis.time = action.time;\n\t\tthis.timeScale = action.timeScale;\n\n\t\treturn this.stopWarping();\n\n\t}\n\n\thalt( duration ) {\n\n\t\treturn this.warp( this._effectiveTimeScale, 0, duration );\n\n\t}\n\n\twarp( startTimeScale, endTimeScale, duration ) {\n\n\t\tconst mixer = this._mixer,\n\t\t\tnow = mixer.time,\n\t\t\ttimeScale = this.timeScale;\n\n\t\tlet interpolant = this._timeScaleInterpolant;\n\n\t\tif ( interpolant === null ) {\n\n\t\t\tinterpolant = mixer._lendControlInterpolant();\n\t\t\tthis._timeScaleInterpolant = interpolant;\n\n\t\t}\n\n\t\tconst times = interpolant.parameterPositions,\n\t\t\tvalues = interpolant.sampleValues;\n\n\t\ttimes[ 0 ] = now;\n\t\ttimes[ 1 ] = now + duration;\n\n\t\tvalues[ 0 ] = startTimeScale / timeScale;\n\t\tvalues[ 1 ] = endTimeScale / timeScale;\n\n\t\treturn this;\n\n\t}\n\n\tstopWarping() {\n\n\t\tconst timeScaleInterpolant = this._timeScaleInterpolant;\n\n\t\tif ( timeScaleInterpolant !== null ) {\n\n\t\t\tthis._timeScaleInterpolant = null;\n\t\t\tthis._mixer._takeBackControlInterpolant( timeScaleInterpolant );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// Object Accessors\n\n\tgetMixer() {\n\n\t\treturn this._mixer;\n\n\t}\n\n\tgetClip() {\n\n\t\treturn this._clip;\n\n\t}\n\n\tgetRoot() {\n\n\t\treturn this._localRoot || this._mixer._root;\n\n\t}\n\n\t// Interna\n\n\t_update( time, deltaTime, timeDirection, accuIndex ) {\n\n\t\t// called by the mixer\n\n\t\tif ( ! this.enabled ) {\n\n\t\t\t// call ._updateWeight() to update ._effectiveWeight\n\n\t\t\tthis._updateWeight( time );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst startTime = this._startTime;\n\n\t\tif ( startTime !== null ) {\n\n\t\t\t// check for scheduled start of action\n\n\t\t\tconst timeRunning = ( time - startTime ) * timeDirection;\n\t\t\tif ( timeRunning < 0 || timeDirection === 0 ) {\n\n\t\t\t\tdeltaTime = 0;\n\n\t\t\t} else {\n\n\n\t\t\t\tthis._startTime = null; // unschedule\n\t\t\t\tdeltaTime = timeDirection * timeRunning;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// apply time scale and advance time\n\n\t\tdeltaTime *= this._updateTimeScale( time );\n\t\tconst clipTime = this._updateTime( deltaTime );\n\n\t\t// note: _updateTime may disable the action resulting in\n\t\t// an effective weight of 0\n\n\t\tconst weight = this._updateWeight( time );\n\n\t\tif ( weight > 0 ) {\n\n\t\t\tconst interpolants = this._interpolants;\n\t\t\tconst propertyMixers = this._propertyBindings;\n\n\t\t\tswitch ( this.blendMode ) {\n\n\t\t\t\tcase AdditiveAnimationBlendMode:\n\n\t\t\t\t\tfor ( let j = 0, m = interpolants.length; j !== m; ++ j ) {\n\n\t\t\t\t\t\tinterpolants[ j ].evaluate( clipTime );\n\t\t\t\t\t\tpropertyMixers[ j ].accumulateAdditive( weight );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase NormalAnimationBlendMode:\n\t\t\t\tdefault:\n\n\t\t\t\t\tfor ( let j = 0, m = interpolants.length; j !== m; ++ j ) {\n\n\t\t\t\t\t\tinterpolants[ j ].evaluate( clipTime );\n\t\t\t\t\t\tpropertyMixers[ j ].accumulate( accuIndex, weight );\n\n\t\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_updateWeight( time ) {\n\n\t\tlet weight = 0;\n\n\t\tif ( this.enabled ) {\n\n\t\t\tweight = this.weight;\n\t\t\tconst interpolant = this._weightInterpolant;\n\n\t\t\tif ( interpolant !== null ) {\n\n\t\t\t\tconst interpolantValue = interpolant.evaluate( time )[ 0 ];\n\n\t\t\t\tweight *= interpolantValue;\n\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\n\n\t\t\t\t\tthis.stopFading();\n\n\t\t\t\t\tif ( interpolantValue === 0 ) {\n\n\t\t\t\t\t\t// faded out, disable\n\t\t\t\t\t\tthis.enabled = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis._effectiveWeight = weight;\n\t\treturn weight;\n\n\t}\n\n\t_updateTimeScale( time ) {\n\n\t\tlet timeScale = 0;\n\n\t\tif ( ! this.paused ) {\n\n\t\t\ttimeScale = this.timeScale;\n\n\t\t\tconst interpolant = this._timeScaleInterpolant;\n\n\t\t\tif ( interpolant !== null ) {\n\n\t\t\t\tconst interpolantValue = interpolant.evaluate( time )[ 0 ];\n\n\t\t\t\ttimeScale *= interpolantValue;\n\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\n\n\t\t\t\t\tthis.stopWarping();\n\n\t\t\t\t\tif ( timeScale === 0 ) {\n\n\t\t\t\t\t\t// motion has halted, pause\n\t\t\t\t\t\tthis.paused = true;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// warp done - apply final time scale\n\t\t\t\t\t\tthis.timeScale = timeScale;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis._effectiveTimeScale = timeScale;\n\t\treturn timeScale;\n\n\t}\n\n\t_updateTime( deltaTime ) {\n\n\t\tconst duration = this._clip.duration;\n\t\tconst loop = this.loop;\n\n\t\tlet time = this.time + deltaTime;\n\t\tlet loopCount = this._loopCount;\n\n\t\tconst pingPong = ( loop === LoopPingPong );\n\n\t\tif ( deltaTime === 0 ) {\n\n\t\t\tif ( loopCount === - 1 ) return time;\n\n\t\t\treturn ( pingPong && ( loopCount & 1 ) === 1 ) ? duration - time : time;\n\n\t\t}\n\n\t\tif ( loop === LoopOnce ) {\n\n\t\t\tif ( loopCount === - 1 ) {\n\n\t\t\t\t// just started\n\n\t\t\t\tthis._loopCount = 0;\n\t\t\t\tthis._setEndings( true, true, false );\n\n\t\t\t}\n\n\t\t\thandle_stop: {\n\n\t\t\t\tif ( time >= duration ) {\n\n\t\t\t\t\ttime = duration;\n\n\t\t\t\t} else if ( time < 0 ) {\n\n\t\t\t\t\ttime = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis.time = time;\n\n\t\t\t\t\tbreak handle_stop;\n\n\t\t\t\t}\n\n\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\n\t\t\t\telse this.enabled = false;\n\n\t\t\t\tthis.time = time;\n\n\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\ttype: 'finished', action: this,\n\t\t\t\t\tdirection: deltaTime < 0 ? - 1 : 1\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t} else { // repetitive Repeat or PingPong\n\n\t\t\tif ( loopCount === - 1 ) {\n\n\t\t\t\t// just started\n\n\t\t\t\tif ( deltaTime >= 0 ) {\n\n\t\t\t\t\tloopCount = 0;\n\n\t\t\t\t\tthis._setEndings( true, this.repetitions === 0, pingPong );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// when looping in reverse direction, the initial\n\t\t\t\t\t// transition through zero counts as a repetition,\n\t\t\t\t\t// so leave loopCount at -1\n\n\t\t\t\t\tthis._setEndings( this.repetitions === 0, true, pingPong );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( time >= duration || time < 0 ) {\n\n\t\t\t\t// wrap around\n\n\t\t\t\tconst loopDelta = Math.floor( time / duration ); // signed\n\t\t\t\ttime -= duration * loopDelta;\n\n\t\t\t\tloopCount += Math.abs( loopDelta );\n\n\t\t\t\tconst pending = this.repetitions - loopCount;\n\n\t\t\t\tif ( pending <= 0 ) {\n\n\t\t\t\t\t// have to stop (switch state, clamp time, fire event)\n\n\t\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\n\t\t\t\t\telse this.enabled = false;\n\n\t\t\t\t\ttime = deltaTime > 0 ? duration : 0;\n\n\t\t\t\t\tthis.time = time;\n\n\t\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\t\ttype: 'finished', action: this,\n\t\t\t\t\t\tdirection: deltaTime > 0 ? 1 : - 1\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// keep running\n\n\t\t\t\t\tif ( pending === 1 ) {\n\n\t\t\t\t\t\t// entering the last round\n\n\t\t\t\t\t\tconst atStart = deltaTime < 0;\n\t\t\t\t\t\tthis._setEndings( atStart, ! atStart, pingPong );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis._setEndings( false, false, pingPong );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._loopCount = loopCount;\n\n\t\t\t\t\tthis.time = time;\n\n\t\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\t\ttype: 'loop', action: this, loopDelta: loopDelta\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tthis.time = time;\n\n\t\t\t}\n\n\t\t\tif ( pingPong && ( loopCount & 1 ) === 1 ) {\n\n\t\t\t\t// invert time for the \"pong round\"\n\n\t\t\t\treturn duration - time;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn time;\n\n\t}\n\n\t_setEndings( atStart, atEnd, pingPong ) {\n\n\t\tconst settings = this._interpolantSettings;\n\n\t\tif ( pingPong ) {\n\n\t\t\tsettings.endingStart = ZeroSlopeEnding;\n\t\t\tsettings.endingEnd = ZeroSlopeEnding;\n\n\t\t} else {\n\n\t\t\t// assuming for LoopOnce atStart == atEnd == true\n\n\t\t\tif ( atStart ) {\n\n\t\t\t\tsettings.endingStart = this.zeroSlopeAtStart ? ZeroSlopeEnding : ZeroCurvatureEnding;\n\n\t\t\t} else {\n\n\t\t\t\tsettings.endingStart = WrapAroundEnding;\n\n\t\t\t}\n\n\t\t\tif ( atEnd ) {\n\n\t\t\t\tsettings.endingEnd = this.zeroSlopeAtEnd ? ZeroSlopeEnding : ZeroCurvatureEnding;\n\n\t\t\t} else {\n\n\t\t\t\tsettings.endingEnd \t = WrapAroundEnding;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_scheduleFading( duration, weightNow, weightThen ) {\n\n\t\tconst mixer = this._mixer, now = mixer.time;\n\t\tlet interpolant = this._weightInterpolant;\n\n\t\tif ( interpolant === null ) {\n\n\t\t\tinterpolant = mixer._lendControlInterpolant();\n\t\t\tthis._weightInterpolant = interpolant;\n\n\t\t}\n\n\t\tconst times = interpolant.parameterPositions,\n\t\t\tvalues = interpolant.sampleValues;\n\n\t\ttimes[ 0 ] = now;\n\t\tvalues[ 0 ] = weightNow;\n\t\ttimes[ 1 ] = now + duration;\n\t\tvalues[ 1 ] = weightThen;\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _controlInterpolantsResultBuffer = new Float32Array( 1 );\n\n\nclass AnimationMixer extends EventDispatcher {\n\n\tconstructor( root ) {\n\n\t\tsuper();\n\n\t\tthis._root = root;\n\t\tthis._initMemoryManager();\n\t\tthis._accuIndex = 0;\n\t\tthis.time = 0;\n\t\tthis.timeScale = 1.0;\n\n\t}\n\n\t_bindAction( action, prototypeAction ) {\n\n\t\tconst root = action._localRoot || this._root,\n\t\t\ttracks = action._clip.tracks,\n\t\t\tnTracks = tracks.length,\n\t\t\tbindings = action._propertyBindings,\n\t\t\tinterpolants = action._interpolants,\n\t\t\trootUuid = root.uuid,\n\t\t\tbindingsByRoot = this._bindingsByRootAndName;\n\n\t\tlet bindingsByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingsByName === undefined ) {\n\n\t\t\tbindingsByName = {};\n\t\t\tbindingsByRoot[ rootUuid ] = bindingsByName;\n\n\t\t}\n\n\t\tfor ( let i = 0; i !== nTracks; ++ i ) {\n\n\t\t\tconst track = tracks[ i ],\n\t\t\t\ttrackName = track.name;\n\n\t\t\tlet binding = bindingsByName[ trackName ];\n\n\t\t\tif ( binding !== undefined ) {\n\n\t\t\t\t++ binding.referenceCount;\n\t\t\t\tbindings[ i ] = binding;\n\n\t\t\t} else {\n\n\t\t\t\tbinding = bindings[ i ];\n\n\t\t\t\tif ( binding !== undefined ) {\n\n\t\t\t\t\t// existing binding, make sure the cache knows\n\n\t\t\t\t\tif ( binding._cacheIndex === null ) {\n\n\t\t\t\t\t\t++ binding.referenceCount;\n\t\t\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\tconst path = prototypeAction && prototypeAction.\n\t\t\t\t\t_propertyBindings[ i ].binding.parsedPath;\n\n\t\t\t\tbinding = new PropertyMixer(\n\t\t\t\t\tPropertyBinding.create( root, trackName, path ),\n\t\t\t\t\ttrack.ValueTypeName, track.getValueSize() );\n\n\t\t\t\t++ binding.referenceCount;\n\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\n\n\t\t\t\tbindings[ i ] = binding;\n\n\t\t\t}\n\n\t\t\tinterpolants[ i ].resultBuffer = binding.buffer;\n\n\t\t}\n\n\t}\n\n\t_activateAction( action ) {\n\n\t\tif ( ! this._isActiveAction( action ) ) {\n\n\t\t\tif ( action._cacheIndex === null ) {\n\n\t\t\t\t// this action has been forgotten by the cache, but the user\n\t\t\t\t// appears to be still using it -> rebind\n\n\t\t\t\tconst rootUuid = ( action._localRoot || this._root ).uuid,\n\t\t\t\t\tclipUuid = action._clip.uuid,\n\t\t\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\n\n\t\t\t\tthis._bindAction( action,\n\t\t\t\t\tactionsForClip && actionsForClip.knownActions[ 0 ] );\n\n\t\t\t\tthis._addInactiveAction( action, clipUuid, rootUuid );\n\n\t\t\t}\n\n\t\t\tconst bindings = action._propertyBindings;\n\n\t\t\t// increment reference counts / sort out state\n\t\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\t\tconst binding = bindings[ i ];\n\n\t\t\t\tif ( binding.useCount ++ === 0 ) {\n\n\t\t\t\t\tthis._lendBinding( binding );\n\t\t\t\t\tbinding.saveOriginalState();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._lendAction( action );\n\n\t\t}\n\n\t}\n\n\t_deactivateAction( action ) {\n\n\t\tif ( this._isActiveAction( action ) ) {\n\n\t\t\tconst bindings = action._propertyBindings;\n\n\t\t\t// decrement reference counts / sort out state\n\t\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\t\tconst binding = bindings[ i ];\n\n\t\t\t\tif ( -- binding.useCount === 0 ) {\n\n\t\t\t\t\tbinding.restoreOriginalState();\n\t\t\t\t\tthis._takeBackBinding( binding );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._takeBackAction( action );\n\n\t\t}\n\n\t}\n\n\t// Memory manager\n\n\t_initMemoryManager() {\n\n\t\tthis._actions = []; // 'nActiveActions' followed by inactive ones\n\t\tthis._nActiveActions = 0;\n\n\t\tthis._actionsByClip = {};\n\t\t// inside:\n\t\t// {\n\t\t// \tknownActions: Array< AnimationAction > - used as prototypes\n\t\t// \tactionByRoot: AnimationAction - lookup\n\t\t// }\n\n\n\t\tthis._bindings = []; // 'nActiveBindings' followed by inactive ones\n\t\tthis._nActiveBindings = 0;\n\n\t\tthis._bindingsByRootAndName = {}; // inside: Map< name, PropertyMixer >\n\n\n\t\tthis._controlInterpolants = []; // same game as above\n\t\tthis._nActiveControlInterpolants = 0;\n\n\t\tconst scope = this;\n\n\t\tthis.stats = {\n\n\t\t\tactions: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._actions.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn scope._nActiveActions;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tbindings: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._bindings.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn scope._nActiveBindings;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tcontrolInterpolants: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._controlInterpolants.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn scope._nActiveControlInterpolants;\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t// Memory management for AnimationAction objects\n\n\t_isActiveAction( action ) {\n\n\t\tconst index = action._cacheIndex;\n\t\treturn index !== null && index < this._nActiveActions;\n\n\t}\n\n\t_addInactiveAction( action, clipUuid, rootUuid ) {\n\n\t\tconst actions = this._actions,\n\t\t\tactionsByClip = this._actionsByClip;\n\n\t\tlet actionsForClip = actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip === undefined ) {\n\n\t\t\tactionsForClip = {\n\n\t\t\t\tknownActions: [ action ],\n\t\t\t\tactionByRoot: {}\n\n\t\t\t};\n\n\t\t\taction._byClipCacheIndex = 0;\n\n\t\t\tactionsByClip[ clipUuid ] = actionsForClip;\n\n\t\t} else {\n\n\t\t\tconst knownActions = actionsForClip.knownActions;\n\n\t\t\taction._byClipCacheIndex = knownActions.length;\n\t\t\tknownActions.push( action );\n\n\t\t}\n\n\t\taction._cacheIndex = actions.length;\n\t\tactions.push( action );\n\n\t\tactionsForClip.actionByRoot[ rootUuid ] = action;\n\n\t}\n\n\t_removeInactiveAction( action ) {\n\n\t\tconst actions = this._actions,\n\t\t\tlastInactiveAction = actions[ actions.length - 1 ],\n\t\t\tcacheIndex = action._cacheIndex;\n\n\t\tlastInactiveAction._cacheIndex = cacheIndex;\n\t\tactions[ cacheIndex ] = lastInactiveAction;\n\t\tactions.pop();\n\n\t\taction._cacheIndex = null;\n\n\n\t\tconst clipUuid = action._clip.uuid,\n\t\t\tactionsByClip = this._actionsByClip,\n\t\t\tactionsForClip = actionsByClip[ clipUuid ],\n\t\t\tknownActionsForClip = actionsForClip.knownActions,\n\n\t\t\tlastKnownAction =\n\t\t\t\tknownActionsForClip[ knownActionsForClip.length - 1 ],\n\n\t\t\tbyClipCacheIndex = action._byClipCacheIndex;\n\n\t\tlastKnownAction._byClipCacheIndex = byClipCacheIndex;\n\t\tknownActionsForClip[ byClipCacheIndex ] = lastKnownAction;\n\t\tknownActionsForClip.pop();\n\n\t\taction._byClipCacheIndex = null;\n\n\n\t\tconst actionByRoot = actionsForClip.actionByRoot,\n\t\t\trootUuid = ( action._localRoot || this._root ).uuid;\n\n\t\tdelete actionByRoot[ rootUuid ];\n\n\t\tif ( knownActionsForClip.length === 0 ) {\n\n\t\t\tdelete actionsByClip[ clipUuid ];\n\n\t\t}\n\n\t\tthis._removeInactiveBindingsForAction( action );\n\n\t}\n\n\t_removeInactiveBindingsForAction( action ) {\n\n\t\tconst bindings = action._propertyBindings;\n\n\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tconst binding = bindings[ i ];\n\n\t\t\tif ( -- binding.referenceCount === 0 ) {\n\n\t\t\t\tthis._removeInactiveBinding( binding );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_lendAction( action ) {\n\n\t\t// [ active actions |  inactive actions  ]\n\t\t// [  active actions >| inactive actions ]\n\t\t//                 s        a\n\t\t//                  <-swap->\n\t\t//                 a        s\n\n\t\tconst actions = this._actions,\n\t\t\tprevIndex = action._cacheIndex,\n\n\t\t\tlastActiveIndex = this._nActiveActions ++,\n\n\t\t\tfirstInactiveAction = actions[ lastActiveIndex ];\n\n\t\taction._cacheIndex = lastActiveIndex;\n\t\tactions[ lastActiveIndex ] = action;\n\n\t\tfirstInactiveAction._cacheIndex = prevIndex;\n\t\tactions[ prevIndex ] = firstInactiveAction;\n\n\t}\n\n\t_takeBackAction( action ) {\n\n\t\t// [  active actions  | inactive actions ]\n\t\t// [ active actions |< inactive actions  ]\n\t\t//        a        s\n\t\t//         <-swap->\n\t\t//        s        a\n\n\t\tconst actions = this._actions,\n\t\t\tprevIndex = action._cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveActions,\n\n\t\t\tlastActiveAction = actions[ firstInactiveIndex ];\n\n\t\taction._cacheIndex = firstInactiveIndex;\n\t\tactions[ firstInactiveIndex ] = action;\n\n\t\tlastActiveAction._cacheIndex = prevIndex;\n\t\tactions[ prevIndex ] = lastActiveAction;\n\n\t}\n\n\t// Memory management for PropertyMixer objects\n\n\t_addInactiveBinding( binding, rootUuid, trackName ) {\n\n\t\tconst bindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindings = this._bindings;\n\n\t\tlet bindingByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingByName === undefined ) {\n\n\t\t\tbindingByName = {};\n\t\t\tbindingsByRoot[ rootUuid ] = bindingByName;\n\n\t\t}\n\n\t\tbindingByName[ trackName ] = binding;\n\n\t\tbinding._cacheIndex = bindings.length;\n\t\tbindings.push( binding );\n\n\t}\n\n\t_removeInactiveBinding( binding ) {\n\n\t\tconst bindings = this._bindings,\n\t\t\tpropBinding = binding.binding,\n\t\t\trootUuid = propBinding.rootNode.uuid,\n\t\t\ttrackName = propBinding.path,\n\t\t\tbindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ],\n\n\t\t\tlastInactiveBinding = bindings[ bindings.length - 1 ],\n\t\t\tcacheIndex = binding._cacheIndex;\n\n\t\tlastInactiveBinding._cacheIndex = cacheIndex;\n\t\tbindings[ cacheIndex ] = lastInactiveBinding;\n\t\tbindings.pop();\n\n\t\tdelete bindingByName[ trackName ];\n\n\t\tif ( Object.keys( bindingByName ).length === 0 ) {\n\n\t\t\tdelete bindingsByRoot[ rootUuid ];\n\n\t\t}\n\n\t}\n\n\t_lendBinding( binding ) {\n\n\t\tconst bindings = this._bindings,\n\t\t\tprevIndex = binding._cacheIndex,\n\n\t\t\tlastActiveIndex = this._nActiveBindings ++,\n\n\t\t\tfirstInactiveBinding = bindings[ lastActiveIndex ];\n\n\t\tbinding._cacheIndex = lastActiveIndex;\n\t\tbindings[ lastActiveIndex ] = binding;\n\n\t\tfirstInactiveBinding._cacheIndex = prevIndex;\n\t\tbindings[ prevIndex ] = firstInactiveBinding;\n\n\t}\n\n\t_takeBackBinding( binding ) {\n\n\t\tconst bindings = this._bindings,\n\t\t\tprevIndex = binding._cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveBindings,\n\n\t\t\tlastActiveBinding = bindings[ firstInactiveIndex ];\n\n\t\tbinding._cacheIndex = firstInactiveIndex;\n\t\tbindings[ firstInactiveIndex ] = binding;\n\n\t\tlastActiveBinding._cacheIndex = prevIndex;\n\t\tbindings[ prevIndex ] = lastActiveBinding;\n\n\t}\n\n\n\t// Memory management of Interpolants for weight and time scale\n\n\t_lendControlInterpolant() {\n\n\t\tconst interpolants = this._controlInterpolants,\n\t\t\tlastActiveIndex = this._nActiveControlInterpolants ++;\n\n\t\tlet interpolant = interpolants[ lastActiveIndex ];\n\n\t\tif ( interpolant === undefined ) {\n\n\t\t\tinterpolant = new LinearInterpolant(\n\t\t\t\tnew Float32Array( 2 ), new Float32Array( 2 ),\n\t\t\t\t1, _controlInterpolantsResultBuffer );\n\n\t\t\tinterpolant.__cacheIndex = lastActiveIndex;\n\t\t\tinterpolants[ lastActiveIndex ] = interpolant;\n\n\t\t}\n\n\t\treturn interpolant;\n\n\t}\n\n\t_takeBackControlInterpolant( interpolant ) {\n\n\t\tconst interpolants = this._controlInterpolants,\n\t\t\tprevIndex = interpolant.__cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveControlInterpolants,\n\n\t\t\tlastActiveInterpolant = interpolants[ firstInactiveIndex ];\n\n\t\tinterpolant.__cacheIndex = firstInactiveIndex;\n\t\tinterpolants[ firstInactiveIndex ] = interpolant;\n\n\t\tlastActiveInterpolant.__cacheIndex = prevIndex;\n\t\tinterpolants[ prevIndex ] = lastActiveInterpolant;\n\n\t}\n\n\t// return an action for a clip optionally using a custom root target\n\t// object (this method allocates a lot of dynamic memory in case a\n\t// previously unknown clip/root combination is specified)\n\tclipAction( clip, optionalRoot, blendMode ) {\n\n\t\tconst root = optionalRoot || this._root,\n\t\t\trootUuid = root.uuid;\n\n\t\tlet clipObject = typeof clip === 'string' ? AnimationClip.findByName( root, clip ) : clip;\n\n\t\tconst clipUuid = clipObject !== null ? clipObject.uuid : clip;\n\n\t\tconst actionsForClip = this._actionsByClip[ clipUuid ];\n\t\tlet prototypeAction = null;\n\n\t\tif ( blendMode === undefined ) {\n\n\t\t\tif ( clipObject !== null ) {\n\n\t\t\t\tblendMode = clipObject.blendMode;\n\n\t\t\t} else {\n\n\t\t\t\tblendMode = NormalAnimationBlendMode;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\tconst existingAction = actionsForClip.actionByRoot[ rootUuid ];\n\n\t\t\tif ( existingAction !== undefined && existingAction.blendMode === blendMode ) {\n\n\t\t\t\treturn existingAction;\n\n\t\t\t}\n\n\t\t\t// we know the clip, so we don't have to parse all\n\t\t\t// the bindings again but can just copy\n\t\t\tprototypeAction = actionsForClip.knownActions[ 0 ];\n\n\t\t\t// also, take the clip from the prototype action\n\t\t\tif ( clipObject === null )\n\t\t\t\tclipObject = prototypeAction._clip;\n\n\t\t}\n\n\t\t// clip must be known when specified via string\n\t\tif ( clipObject === null ) return null;\n\n\t\t// allocate all resources required to run it\n\t\tconst newAction = new AnimationAction( this, clipObject, optionalRoot, blendMode );\n\n\t\tthis._bindAction( newAction, prototypeAction );\n\n\t\t// and make the action known to the memory manager\n\t\tthis._addInactiveAction( newAction, clipUuid, rootUuid );\n\n\t\treturn newAction;\n\n\t}\n\n\t// get an existing action\n\texistingAction( clip, optionalRoot ) {\n\n\t\tconst root = optionalRoot || this._root,\n\t\t\trootUuid = root.uuid,\n\n\t\t\tclipObject = typeof clip === 'string' ?\n\t\t\t\tAnimationClip.findByName( root, clip ) : clip,\n\n\t\t\tclipUuid = clipObject ? clipObject.uuid : clip,\n\n\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\treturn actionsForClip.actionByRoot[ rootUuid ] || null;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t// deactivates all previously scheduled actions\n\tstopAllAction() {\n\n\t\tconst actions = this._actions,\n\t\t\tnActions = this._nActiveActions;\n\n\t\tfor ( let i = nActions - 1; i >= 0; -- i ) {\n\n\t\t\tactions[ i ].stop();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// advance the time and update apply the animation\n\tupdate( deltaTime ) {\n\n\t\tdeltaTime *= this.timeScale;\n\n\t\tconst actions = this._actions,\n\t\t\tnActions = this._nActiveActions,\n\n\t\t\ttime = this.time += deltaTime,\n\t\t\ttimeDirection = Math.sign( deltaTime ),\n\n\t\t\taccuIndex = this._accuIndex ^= 1;\n\n\t\t// run active actions\n\n\t\tfor ( let i = 0; i !== nActions; ++ i ) {\n\n\t\t\tconst action = actions[ i ];\n\n\t\t\taction._update( time, deltaTime, timeDirection, accuIndex );\n\n\t\t}\n\n\t\t// update scene graph\n\n\t\tconst bindings = this._bindings,\n\t\t\tnBindings = this._nActiveBindings;\n\n\t\tfor ( let i = 0; i !== nBindings; ++ i ) {\n\n\t\t\tbindings[ i ].apply( accuIndex );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// Allows you to seek to a specific time in an animation.\n\tsetTime( timeInSeconds ) {\n\n\t\tthis.time = 0; // Zero out time attribute for AnimationMixer object;\n\t\tfor ( let i = 0; i < this._actions.length; i ++ ) {\n\n\t\t\tthis._actions[ i ].time = 0; // Zero out time attribute for all associated AnimationAction objects.\n\n\t\t}\n\n\t\treturn this.update( timeInSeconds ); // Update used to set exact time. Returns \"this\" AnimationMixer object.\n\n\t}\n\n\t// return this mixer's root target object\n\tgetRoot() {\n\n\t\treturn this._root;\n\n\t}\n\n\t// free all resources specific to a particular clip\n\tuncacheClip( clip ) {\n\n\t\tconst actions = this._actions,\n\t\t\tclipUuid = clip.uuid,\n\t\t\tactionsByClip = this._actionsByClip,\n\t\t\tactionsForClip = actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\t// note: just calling _removeInactiveAction would mess up the\n\t\t\t// iteration state and also require updating the state we can\n\t\t\t// just throw away\n\n\t\t\tconst actionsToRemove = actionsForClip.knownActions;\n\n\t\t\tfor ( let i = 0, n = actionsToRemove.length; i !== n; ++ i ) {\n\n\t\t\t\tconst action = actionsToRemove[ i ];\n\n\t\t\t\tthis._deactivateAction( action );\n\n\t\t\t\tconst cacheIndex = action._cacheIndex,\n\t\t\t\t\tlastInactiveAction = actions[ actions.length - 1 ];\n\n\t\t\t\taction._cacheIndex = null;\n\t\t\t\taction._byClipCacheIndex = null;\n\n\t\t\t\tlastInactiveAction._cacheIndex = cacheIndex;\n\t\t\t\tactions[ cacheIndex ] = lastInactiveAction;\n\t\t\t\tactions.pop();\n\n\t\t\t\tthis._removeInactiveBindingsForAction( action );\n\n\t\t\t}\n\n\t\t\tdelete actionsByClip[ clipUuid ];\n\n\t\t}\n\n\t}\n\n\t// free all resources specific to a particular root target object\n\tuncacheRoot( root ) {\n\n\t\tconst rootUuid = root.uuid,\n\t\t\tactionsByClip = this._actionsByClip;\n\n\t\tfor ( const clipUuid in actionsByClip ) {\n\n\t\t\tconst actionByRoot = actionsByClip[ clipUuid ].actionByRoot,\n\t\t\t\taction = actionByRoot[ rootUuid ];\n\n\t\t\tif ( action !== undefined ) {\n\n\t\t\t\tthis._deactivateAction( action );\n\t\t\t\tthis._removeInactiveAction( action );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst bindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingByName !== undefined ) {\n\n\t\t\tfor ( const trackName in bindingByName ) {\n\n\t\t\t\tconst binding = bindingByName[ trackName ];\n\t\t\t\tbinding.restoreOriginalState();\n\t\t\t\tthis._removeInactiveBinding( binding );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// remove a targeted clip from the cache\n\tuncacheAction( clip, optionalRoot ) {\n\n\t\tconst action = this.existingAction( clip, optionalRoot );\n\n\t\tif ( action !== null ) {\n\n\t\t\tthis._deactivateAction( action );\n\t\t\tthis._removeInactiveAction( action );\n\n\t\t}\n\n\t}\n\n}\n\nclass Uniform {\n\n\tconstructor( value ) {\n\n\t\tthis.value = value;\n\n\t}\n\n\tclone() {\n\n\t\treturn new Uniform( this.value.clone === undefined ? this.value : this.value.clone() );\n\n\t}\n\n}\n\nlet id = 0;\n\nclass UniformsGroup extends EventDispatcher {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isUniformsGroup = true;\n\n\t\tObject.defineProperty( this, 'id', { value: id ++ } );\n\n\t\tthis.name = '';\n\n\t\tthis.usage = StaticDrawUsage;\n\t\tthis.uniforms = [];\n\n\t}\n\n\tadd( uniform ) {\n\n\t\tthis.uniforms.push( uniform );\n\n\t\treturn this;\n\n\t}\n\n\tremove( uniform ) {\n\n\t\tconst index = this.uniforms.indexOf( uniform );\n\n\t\tif ( index !== - 1 ) this.uniforms.splice( index, 1 );\n\n\t\treturn this;\n\n\t}\n\n\tsetName( name ) {\n\n\t\tthis.name = name;\n\n\t\treturn this;\n\n\t}\n\n\tsetUsage( value ) {\n\n\t\tthis.usage = value;\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.name = source.name;\n\t\tthis.usage = source.usage;\n\n\t\tconst uniformsSource = source.uniforms;\n\n\t\tthis.uniforms.length = 0;\n\n\t\tfor ( let i = 0, l = uniformsSource.length; i < l; i ++ ) {\n\n\t\t\tthis.uniforms.push( uniformsSource[ i ].clone() );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nclass InstancedInterleavedBuffer extends InterleavedBuffer {\n\n\tconstructor( array, stride, meshPerAttribute = 1 ) {\n\n\t\tsuper( array, stride );\n\n\t\tthis.isInstancedInterleavedBuffer = true;\n\n\t\tthis.meshPerAttribute = meshPerAttribute;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.meshPerAttribute = source.meshPerAttribute;\n\n\t\treturn this;\n\n\t}\n\n\tclone( data ) {\n\n\t\tconst ib = super.clone( data );\n\n\t\tib.meshPerAttribute = this.meshPerAttribute;\n\n\t\treturn ib;\n\n\t}\n\n\ttoJSON( data ) {\n\n\t\tconst json = super.toJSON( data );\n\n\t\tjson.isInstancedInterleavedBuffer = true;\n\t\tjson.meshPerAttribute = this.meshPerAttribute;\n\n\t\treturn json;\n\n\t}\n\n}\n\nclass GLBufferAttribute {\n\n\tconstructor( buffer, type, itemSize, elementSize, count ) {\n\n\t\tthis.isGLBufferAttribute = true;\n\n\t\tthis.buffer = buffer;\n\t\tthis.type = type;\n\t\tthis.itemSize = itemSize;\n\t\tthis.elementSize = elementSize;\n\t\tthis.count = count;\n\n\t\tthis.version = 0;\n\n\t}\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n\tsetBuffer( buffer ) {\n\n\t\tthis.buffer = buffer;\n\n\t\treturn this;\n\n\t}\n\n\tsetType( type, elementSize ) {\n\n\t\tthis.type = type;\n\t\tthis.elementSize = elementSize;\n\n\t\treturn this;\n\n\t}\n\n\tsetItemSize( itemSize ) {\n\n\t\tthis.itemSize = itemSize;\n\n\t\treturn this;\n\n\t}\n\n\tsetCount( count ) {\n\n\t\tthis.count = count;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass Raycaster {\n\n\tconstructor( origin, direction, near = 0, far = Infinity ) {\n\n\t\tthis.ray = new Ray( origin, direction );\n\t\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\t\tthis.near = near;\n\t\tthis.far = far;\n\t\tthis.camera = null;\n\t\tthis.layers = new Layers();\n\n\t\tthis.params = {\n\t\t\tMesh: {},\n\t\t\tLine: { threshold: 1 },\n\t\t\tLOD: {},\n\t\t\tPoints: { threshold: 1 },\n\t\t\tSprite: {}\n\t\t};\n\n\t}\n\n\tset( origin, direction ) {\n\n\t\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\t\tthis.ray.set( origin, direction );\n\n\t}\n\n\tsetFromCamera( coords, camera ) {\n\n\t\tif ( camera.isPerspectiveCamera ) {\n\n\t\t\tthis.ray.origin.setFromMatrixPosition( camera.matrixWorld );\n\t\t\tthis.ray.direction.set( coords.x, coords.y, 0.5 ).unproject( camera ).sub( this.ray.origin ).normalize();\n\t\t\tthis.camera = camera;\n\n\t\t} else if ( camera.isOrthographicCamera ) {\n\n\t\t\tthis.ray.origin.set( coords.x, coords.y, ( camera.near + camera.far ) / ( camera.near - camera.far ) ).unproject( camera ); // set origin in plane of camera\n\t\t\tthis.ray.direction.set( 0, 0, - 1 ).transformDirection( camera.matrixWorld );\n\t\t\tthis.camera = camera;\n\n\t\t} else {\n\n\t\t\tconsole.error( 'THREE.Raycaster: Unsupported camera type: ' + camera.type );\n\n\t\t}\n\n\t}\n\n\tintersectObject( object, recursive = true, intersects = [] ) {\n\n\t\tintersectObject( object, this, intersects, recursive );\n\n\t\tintersects.sort( ascSort );\n\n\t\treturn intersects;\n\n\t}\n\n\tintersectObjects( objects, recursive = true, intersects = [] ) {\n\n\t\tfor ( let i = 0, l = objects.length; i < l; i ++ ) {\n\n\t\t\tintersectObject( objects[ i ], this, intersects, recursive );\n\n\t\t}\n\n\t\tintersects.sort( ascSort );\n\n\t\treturn intersects;\n\n\t}\n\n}\n\nfunction ascSort( a, b ) {\n\n\treturn a.distance - b.distance;\n\n}\n\nfunction intersectObject( object, raycaster, intersects, recursive ) {\n\n\tif ( object.layers.test( raycaster.layers ) ) {\n\n\t\tobject.raycast( raycaster, intersects );\n\n\t}\n\n\tif ( recursive === true ) {\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tintersectObject( children[ i ], raycaster, intersects, true );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * Ref: https://en.wikipedia.org/wiki/Spherical_coordinate_system\n *\n * The polar angle (phi) is measured from the positive y-axis. The positive y-axis is up.\n * The azimuthal angle (theta) is measured from the positive z-axis.\n */\n\nclass Spherical {\n\n\tconstructor( radius = 1, phi = 0, theta = 0 ) {\n\n\t\tthis.radius = radius;\n\t\tthis.phi = phi; // polar angle\n\t\tthis.theta = theta; // azimuthal angle\n\n\t\treturn this;\n\n\t}\n\n\tset( radius, phi, theta ) {\n\n\t\tthis.radius = radius;\n\t\tthis.phi = phi;\n\t\tthis.theta = theta;\n\n\t\treturn this;\n\n\t}\n\n\tcopy( other ) {\n\n\t\tthis.radius = other.radius;\n\t\tthis.phi = other.phi;\n\t\tthis.theta = other.theta;\n\n\t\treturn this;\n\n\t}\n\n\t// restrict phi to be between EPS and PI-EPS\n\tmakeSafe() {\n\n\t\tconst EPS = 0.000001;\n\t\tthis.phi = Math.max( EPS, Math.min( Math.PI - EPS, this.phi ) );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromVector3( v ) {\n\n\t\treturn this.setFromCartesianCoords( v.x, v.y, v.z );\n\n\t}\n\n\tsetFromCartesianCoords( x, y, z ) {\n\n\t\tthis.radius = Math.sqrt( x * x + y * y + z * z );\n\n\t\tif ( this.radius === 0 ) {\n\n\t\t\tthis.theta = 0;\n\t\t\tthis.phi = 0;\n\n\t\t} else {\n\n\t\t\tthis.theta = Math.atan2( x, z );\n\t\t\tthis.phi = Math.acos( clamp( y / this.radius, - 1, 1 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\n/**\n * Ref: https://en.wikipedia.org/wiki/Cylindrical_coordinate_system\n */\n\nclass Cylindrical {\n\n\tconstructor( radius = 1, theta = 0, y = 0 ) {\n\n\t\tthis.radius = radius; // distance from the origin to a point in the x-z plane\n\t\tthis.theta = theta; // counterclockwise angle in the x-z plane measured in radians from the positive z-axis\n\t\tthis.y = y; // height above the x-z plane\n\n\t\treturn this;\n\n\t}\n\n\tset( radius, theta, y ) {\n\n\t\tthis.radius = radius;\n\t\tthis.theta = theta;\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tcopy( other ) {\n\n\t\tthis.radius = other.radius;\n\t\tthis.theta = other.theta;\n\t\tthis.y = other.y;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromVector3( v ) {\n\n\t\treturn this.setFromCartesianCoords( v.x, v.y, v.z );\n\n\t}\n\n\tsetFromCartesianCoords( x, y, z ) {\n\n\t\tthis.radius = Math.sqrt( x * x + z * z );\n\t\tthis.theta = Math.atan2( x, z );\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nconst _vector$4 = /*@__PURE__*/ new Vector2();\n\nclass Box2 {\n\n\tconstructor( min = new Vector2( + Infinity, + Infinity ), max = new Vector2( - Infinity, - Infinity ) ) {\n\n\t\tthis.isBox2 = true;\n\n\t\tthis.min = min;\n\t\tthis.max = max;\n\n\t}\n\n\tset( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPoints( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCenterAndSize( center, size ) {\n\n\t\tconst halfSize = _vector$4.copy( size ).multiplyScalar( 0.5 );\n\t\tthis.min.copy( center ).sub( halfSize );\n\t\tthis.max.copy( center ).add( halfSize );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t}\n\n\tmakeEmpty() {\n\n\t\tthis.min.x = this.min.y = + Infinity;\n\t\tthis.max.x = this.max.y = - Infinity;\n\n\t\treturn this;\n\n\t}\n\n\tisEmpty() {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y );\n\n\t}\n\n\tgetCenter( target ) {\n\n\t\treturn this.isEmpty() ? target.set( 0, 0 ) : target.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t}\n\n\tgetSize( target ) {\n\n\t\treturn this.isEmpty() ? target.set( 0, 0 ) : target.subVectors( this.max, this.min );\n\n\t}\n\n\texpandByPoint( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t}\n\n\texpandByVector( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t}\n\n\texpandByScalar( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ? false : true;\n\n\t}\n\n\tcontainsBox( box ) {\n\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y;\n\n\t}\n\n\tgetParameter( point, target ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\treturn target.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y )\n\t\t);\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\t// using 4 splitting planes to rule out intersections\n\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ? false : true;\n\n\t}\n\n\tclampPoint( point, target ) {\n\n\t\treturn target.copy( point ).clamp( this.min, this.max );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\tconst clampedPoint = _vector$4.copy( point ).clamp( this.min, this.max );\n\t\treturn clampedPoint.sub( point ).length();\n\n\t}\n\n\tintersect( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\treturn this;\n\n\t}\n\n\tunion( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t}\n\n\tequals( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t}\n\n}\n\nconst _startP = /*@__PURE__*/ new Vector3();\nconst _startEnd = /*@__PURE__*/ new Vector3();\n\nclass Line3 {\n\n\tconstructor( start = new Vector3(), end = new Vector3() ) {\n\n\t\tthis.start = start;\n\t\tthis.end = end;\n\n\t}\n\n\tset( start, end ) {\n\n\t\tthis.start.copy( start );\n\t\tthis.end.copy( end );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( line ) {\n\n\t\tthis.start.copy( line.start );\n\t\tthis.end.copy( line.end );\n\n\t\treturn this;\n\n\t}\n\n\tgetCenter( target ) {\n\n\t\treturn target.addVectors( this.start, this.end ).multiplyScalar( 0.5 );\n\n\t}\n\n\tdelta( target ) {\n\n\t\treturn target.subVectors( this.end, this.start );\n\n\t}\n\n\tdistanceSq() {\n\n\t\treturn this.start.distanceToSquared( this.end );\n\n\t}\n\n\tdistance() {\n\n\t\treturn this.start.distanceTo( this.end );\n\n\t}\n\n\tat( t, target ) {\n\n\t\treturn this.delta( target ).multiplyScalar( t ).add( this.start );\n\n\t}\n\n\tclosestPointToPointParameter( point, clampToLine ) {\n\n\t\t_startP.subVectors( point, this.start );\n\t\t_startEnd.subVectors( this.end, this.start );\n\n\t\tconst startEnd2 = _startEnd.dot( _startEnd );\n\t\tconst startEnd_startP = _startEnd.dot( _startP );\n\n\t\tlet t = startEnd_startP / startEnd2;\n\n\t\tif ( clampToLine ) {\n\n\t\t\tt = clamp( t, 0, 1 );\n\n\t\t}\n\n\t\treturn t;\n\n\t}\n\n\tclosestPointToPoint( point, clampToLine, target ) {\n\n\t\tconst t = this.closestPointToPointParameter( point, clampToLine );\n\n\t\treturn this.delta( target ).multiplyScalar( t ).add( this.start );\n\n\t}\n\n\tapplyMatrix4( matrix ) {\n\n\t\tthis.start.applyMatrix4( matrix );\n\t\tthis.end.applyMatrix4( matrix );\n\n\t\treturn this;\n\n\t}\n\n\tequals( line ) {\n\n\t\treturn line.start.equals( this.start ) && line.end.equals( this.end );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nconst _vector$3 = /*@__PURE__*/ new Vector3();\n\nclass SpotLightHelper extends Object3D {\n\n\tconstructor( light, color ) {\n\n\t\tsuper();\n\n\t\tthis.light = light;\n\t\tthis.light.updateMatrixWorld();\n\n\t\tthis.matrix = light.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.color = color;\n\n\t\tconst geometry = new BufferGeometry();\n\n\t\tconst positions = [\n\t\t\t0, 0, 0, \t0, 0, 1,\n\t\t\t0, 0, 0, \t1, 0, 1,\n\t\t\t0, 0, 0,\t- 1, 0, 1,\n\t\t\t0, 0, 0, \t0, 1, 1,\n\t\t\t0, 0, 0, \t0, - 1, 1\n\t\t];\n\n\t\tfor ( let i = 0, j = 1, l = 32; i < l; i ++, j ++ ) {\n\n\t\t\tconst p1 = ( i / l ) * Math.PI * 2;\n\t\t\tconst p2 = ( j / l ) * Math.PI * 2;\n\n\t\t\tpositions.push(\n\t\t\t\tMath.cos( p1 ), Math.sin( p1 ), 1,\n\t\t\t\tMath.cos( p2 ), Math.sin( p2 ), 1\n\t\t\t);\n\n\t\t}\n\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\n\n\t\tconst material = new LineBasicMaterial( { fog: false, toneMapped: false } );\n\n\t\tthis.cone = new LineSegments( geometry, material );\n\t\tthis.add( this.cone );\n\n\t\tthis.update();\n\n\t}\n\n\tdispose() {\n\n\t\tthis.cone.geometry.dispose();\n\t\tthis.cone.material.dispose();\n\n\t}\n\n\tupdate() {\n\n\t\tthis.light.updateMatrixWorld();\n\n\t\tconst coneLength = this.light.distance ? this.light.distance : 1000;\n\t\tconst coneWidth = coneLength * Math.tan( this.light.angle );\n\n\t\tthis.cone.scale.set( coneWidth, coneWidth, coneLength );\n\n\t\t_vector$3.setFromMatrixPosition( this.light.target.matrixWorld );\n\n\t\tthis.cone.lookAt( _vector$3 );\n\n\t\tif ( this.color !== undefined ) {\n\n\t\t\tthis.cone.material.color.set( this.color );\n\n\t\t} else {\n\n\t\t\tthis.cone.material.color.copy( this.light.color );\n\n\t\t}\n\n\t}\n\n}\n\nconst _vector$2 = /*@__PURE__*/ new Vector3();\nconst _boneMatrix = /*@__PURE__*/ new Matrix4();\nconst _matrixWorldInv = /*@__PURE__*/ new Matrix4();\n\n\nclass SkeletonHelper extends LineSegments {\n\n\tconstructor( object ) {\n\n\t\tconst bones = getBoneList( object );\n\n\t\tconst geometry = new BufferGeometry();\n\n\t\tconst vertices = [];\n\t\tconst colors = [];\n\n\t\tconst color1 = new Color( 0, 0, 1 );\n\t\tconst color2 = new Color( 0, 1, 0 );\n\n\t\tfor ( let i = 0; i < bones.length; i ++ ) {\n\n\t\t\tconst bone = bones[ i ];\n\n\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\tvertices.push( 0, 0, 0 );\n\t\t\t\tvertices.push( 0, 0, 0 );\n\t\t\t\tcolors.push( color1.r, color1.g, color1.b );\n\t\t\t\tcolors.push( color2.r, color2.g, color2.b );\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\t\tconst material = new LineBasicMaterial( { vertexColors: true, depthTest: false, depthWrite: false, toneMapped: false, transparent: true } );\n\n\t\tsuper( geometry, material );\n\n\t\tthis.isSkeletonHelper = true;\n\n\t\tthis.type = 'SkeletonHelper';\n\n\t\tthis.root = object;\n\t\tthis.bones = bones;\n\n\t\tthis.matrix = object.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tconst bones = this.bones;\n\n\t\tconst geometry = this.geometry;\n\t\tconst position = geometry.getAttribute( 'position' );\n\n\t\t_matrixWorldInv.copy( this.root.matrixWorld ).invert();\n\n\t\tfor ( let i = 0, j = 0; i < bones.length; i ++ ) {\n\n\t\t\tconst bone = bones[ i ];\n\n\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\t_boneMatrix.multiplyMatrices( _matrixWorldInv, bone.matrixWorld );\n\t\t\t\t_vector$2.setFromMatrixPosition( _boneMatrix );\n\t\t\t\tposition.setXYZ( j, _vector$2.x, _vector$2.y, _vector$2.z );\n\n\t\t\t\t_boneMatrix.multiplyMatrices( _matrixWorldInv, bone.parent.matrixWorld );\n\t\t\t\t_vector$2.setFromMatrixPosition( _boneMatrix );\n\t\t\t\tposition.setXYZ( j + 1, _vector$2.x, _vector$2.y, _vector$2.z );\n\n\t\t\t\tj += 2;\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometry.getAttribute( 'position' ).needsUpdate = true;\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n}\n\n\nfunction getBoneList( object ) {\n\n\tconst boneList = [];\n\n\tif ( object.isBone === true ) {\n\n\t\tboneList.push( object );\n\n\t}\n\n\tfor ( let i = 0; i < object.children.length; i ++ ) {\n\n\t\tboneList.push.apply( boneList, getBoneList( object.children[ i ] ) );\n\n\t}\n\n\treturn boneList;\n\n}\n\nclass PointLightHelper extends Mesh {\n\n\tconstructor( light, sphereSize, color ) {\n\n\t\tconst geometry = new SphereGeometry( sphereSize, 4, 2 );\n\t\tconst material = new MeshBasicMaterial( { wireframe: true, fog: false, toneMapped: false } );\n\n\t\tsuper( geometry, material );\n\n\t\tthis.light = light;\n\t\tthis.light.updateMatrixWorld();\n\n\t\tthis.color = color;\n\n\t\tthis.type = 'PointLightHelper';\n\n\t\tthis.matrix = this.light.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.update();\n\n\n\t\t/*\n\t// TODO: delete this comment?\n\tconst distanceGeometry = new THREE.IcosahedronGeometry( 1, 2 );\n\tconst distanceMaterial = new THREE.MeshBasicMaterial( { color: hexColor, fog: false, wireframe: true, opacity: 0.1, transparent: true } );\n\n\tthis.lightSphere = new THREE.Mesh( bulbGeometry, bulbMaterial );\n\tthis.lightDistance = new THREE.Mesh( distanceGeometry, distanceMaterial );\n\n\tconst d = light.distance;\n\n\tif ( d === 0.0 ) {\n\n\t\tthis.lightDistance.visible = false;\n\n\t} else {\n\n\t\tthis.lightDistance.scale.set( d, d, d );\n\n\t}\n\n\tthis.add( this.lightDistance );\n\t*/\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n\tupdate() {\n\n\t\tif ( this.color !== undefined ) {\n\n\t\t\tthis.material.color.set( this.color );\n\n\t\t} else {\n\n\t\t\tthis.material.color.copy( this.light.color );\n\n\t\t}\n\n\t\t/*\n\t\tconst d = this.light.distance;\n\n\t\tif ( d === 0.0 ) {\n\n\t\t\tthis.lightDistance.visible = false;\n\n\t\t} else {\n\n\t\t\tthis.lightDistance.visible = true;\n\t\t\tthis.lightDistance.scale.set( d, d, d );\n\n\t\t}\n\t\t*/\n\n\t}\n\n}\n\nconst _vector$1 = /*@__PURE__*/ new Vector3();\nconst _color1 = /*@__PURE__*/ new Color();\nconst _color2 = /*@__PURE__*/ new Color();\n\nclass HemisphereLightHelper extends Object3D {\n\n\tconstructor( light, size, color ) {\n\n\t\tsuper();\n\n\t\tthis.light = light;\n\t\tthis.light.updateMatrixWorld();\n\n\t\tthis.matrix = light.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.color = color;\n\n\t\tconst geometry = new OctahedronGeometry( size );\n\t\tgeometry.rotateY( Math.PI * 0.5 );\n\n\t\tthis.material = new MeshBasicMaterial( { wireframe: true, fog: false, toneMapped: false } );\n\t\tif ( this.color === undefined ) this.material.vertexColors = true;\n\n\t\tconst position = geometry.getAttribute( 'position' );\n\t\tconst colors = new Float32Array( position.count * 3 );\n\n\t\tgeometry.setAttribute( 'color', new BufferAttribute( colors, 3 ) );\n\n\t\tthis.add( new Mesh( geometry, this.material ) );\n\n\t\tthis.update();\n\n\t}\n\n\tdispose() {\n\n\t\tthis.children[ 0 ].geometry.dispose();\n\t\tthis.children[ 0 ].material.dispose();\n\n\t}\n\n\tupdate() {\n\n\t\tconst mesh = this.children[ 0 ];\n\n\t\tif ( this.color !== undefined ) {\n\n\t\t\tthis.material.color.set( this.color );\n\n\t\t} else {\n\n\t\t\tconst colors = mesh.geometry.getAttribute( 'color' );\n\n\t\t\t_color1.copy( this.light.color );\n\t\t\t_color2.copy( this.light.groundColor );\n\n\t\t\tfor ( let i = 0, l = colors.count; i < l; i ++ ) {\n\n\t\t\t\tconst color = ( i < ( l / 2 ) ) ? _color1 : _color2;\n\n\t\t\t\tcolors.setXYZ( i, color.r, color.g, color.b );\n\n\t\t\t}\n\n\t\t\tcolors.needsUpdate = true;\n\n\t\t}\n\n\t\tmesh.lookAt( _vector$1.setFromMatrixPosition( this.light.matrixWorld ).negate() );\n\n\t}\n\n}\n\nclass GridHelper extends LineSegments {\n\n\tconstructor( size = 10, divisions = 10, color1 = 0x444444, color2 = 0x888888 ) {\n\n\t\tcolor1 = new Color( color1 );\n\t\tcolor2 = new Color( color2 );\n\n\t\tconst center = divisions / 2;\n\t\tconst step = size / divisions;\n\t\tconst halfSize = size / 2;\n\n\t\tconst vertices = [], colors = [];\n\n\t\tfor ( let i = 0, j = 0, k = - halfSize; i <= divisions; i ++, k += step ) {\n\n\t\t\tvertices.push( - halfSize, 0, k, halfSize, 0, k );\n\t\t\tvertices.push( k, 0, - halfSize, k, 0, halfSize );\n\n\t\t\tconst color = i === center ? color1 : color2;\n\n\t\t\tcolor.toArray( colors, j ); j += 3;\n\t\t\tcolor.toArray( colors, j ); j += 3;\n\t\t\tcolor.toArray( colors, j ); j += 3;\n\t\t\tcolor.toArray( colors, j ); j += 3;\n\n\t\t}\n\n\t\tconst geometry = new BufferGeometry();\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\t\tconst material = new LineBasicMaterial( { vertexColors: true, toneMapped: false } );\n\n\t\tsuper( geometry, material );\n\n\t\tthis.type = 'GridHelper';\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n}\n\nclass PolarGridHelper extends LineSegments {\n\n\tconstructor( radius = 10, sectors = 16, rings = 8, divisions = 64, color1 = 0x444444, color2 = 0x888888 ) {\n\n\t\tcolor1 = new Color( color1 );\n\t\tcolor2 = new Color( color2 );\n\n\t\tconst vertices = [];\n\t\tconst colors = [];\n\n\t\t// create the sectors\n\n\t\tif ( sectors > 1 ) {\n\n\t\t\tfor ( let i = 0; i < sectors; i ++ ) {\n\n\t\t\t\tconst v = ( i / sectors ) * ( Math.PI * 2 );\n\n\t\t\t\tconst x = Math.sin( v ) * radius;\n\t\t\t\tconst z = Math.cos( v ) * radius;\n\n\t\t\t\tvertices.push( 0, 0, 0 );\n\t\t\t\tvertices.push( x, 0, z );\n\n\t\t\t\tconst color = ( i & 1 ) ? color1 : color2;\n\n\t\t\t\tcolors.push( color.r, color.g, color.b );\n\t\t\t\tcolors.push( color.r, color.g, color.b );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// create the rings\n\n\t\tfor ( let i = 0; i < rings; i ++ ) {\n\n\t\t\tconst color = ( i & 1 ) ? color1 : color2;\n\n\t\t\tconst r = radius - ( radius / rings * i );\n\n\t\t\tfor ( let j = 0; j < divisions; j ++ ) {\n\n\t\t\t\t// first vertex\n\n\t\t\t\tlet v = ( j / divisions ) * ( Math.PI * 2 );\n\n\t\t\t\tlet x = Math.sin( v ) * r;\n\t\t\t\tlet z = Math.cos( v ) * r;\n\n\t\t\t\tvertices.push( x, 0, z );\n\t\t\t\tcolors.push( color.r, color.g, color.b );\n\n\t\t\t\t// second vertex\n\n\t\t\t\tv = ( ( j + 1 ) / divisions ) * ( Math.PI * 2 );\n\n\t\t\t\tx = Math.sin( v ) * r;\n\t\t\t\tz = Math.cos( v ) * r;\n\n\t\t\t\tvertices.push( x, 0, z );\n\t\t\t\tcolors.push( color.r, color.g, color.b );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst geometry = new BufferGeometry();\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\t\tconst material = new LineBasicMaterial( { vertexColors: true, toneMapped: false } );\n\n\t\tsuper( geometry, material );\n\n\t\tthis.type = 'PolarGridHelper';\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n}\n\nconst _v1 = /*@__PURE__*/ new Vector3();\nconst _v2 = /*@__PURE__*/ new Vector3();\nconst _v3 = /*@__PURE__*/ new Vector3();\n\nclass DirectionalLightHelper extends Object3D {\n\n\tconstructor( light, size, color ) {\n\n\t\tsuper();\n\n\t\tthis.light = light;\n\t\tthis.light.updateMatrixWorld();\n\n\t\tthis.matrix = light.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.color = color;\n\n\t\tif ( size === undefined ) size = 1;\n\n\t\tlet geometry = new BufferGeometry();\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( [\n\t\t\t- size, size, 0,\n\t\t\tsize, size, 0,\n\t\t\tsize, - size, 0,\n\t\t\t- size, - size, 0,\n\t\t\t- size, size, 0\n\t\t], 3 ) );\n\n\t\tconst material = new LineBasicMaterial( { fog: false, toneMapped: false } );\n\n\t\tthis.lightPlane = new Line( geometry, material );\n\t\tthis.add( this.lightPlane );\n\n\t\tgeometry = new BufferGeometry();\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0, 0, 0, 1 ], 3 ) );\n\n\t\tthis.targetLine = new Line( geometry, material );\n\t\tthis.add( this.targetLine );\n\n\t\tthis.update();\n\n\t}\n\n\tdispose() {\n\n\t\tthis.lightPlane.geometry.dispose();\n\t\tthis.lightPlane.material.dispose();\n\t\tthis.targetLine.geometry.dispose();\n\t\tthis.targetLine.material.dispose();\n\n\t}\n\n\tupdate() {\n\n\t\t_v1.setFromMatrixPosition( this.light.matrixWorld );\n\t\t_v2.setFromMatrixPosition( this.light.target.matrixWorld );\n\t\t_v3.subVectors( _v2, _v1 );\n\n\t\tthis.lightPlane.lookAt( _v2 );\n\n\t\tif ( this.color !== undefined ) {\n\n\t\t\tthis.lightPlane.material.color.set( this.color );\n\t\t\tthis.targetLine.material.color.set( this.color );\n\n\t\t} else {\n\n\t\t\tthis.lightPlane.material.color.copy( this.light.color );\n\t\t\tthis.targetLine.material.color.copy( this.light.color );\n\n\t\t}\n\n\t\tthis.targetLine.lookAt( _v2 );\n\t\tthis.targetLine.scale.z = _v3.length();\n\n\t}\n\n}\n\nconst _vector = /*@__PURE__*/ new Vector3();\nconst _camera = /*@__PURE__*/ new Camera();\n\n/**\n *\t- shows frustum, line of sight and up of the camera\n *\t- suitable for fast updates\n * \t- based on frustum visualization in lightgl.js shadowmap example\n *\t\thttps://github.com/evanw/lightgl.js/blob/master/tests/shadowmap.html\n */\n\nclass CameraHelper extends LineSegments {\n\n\tconstructor( camera ) {\n\n\t\tconst geometry = new BufferGeometry();\n\t\tconst material = new LineBasicMaterial( { color: 0xffffff, vertexColors: true, toneMapped: false } );\n\n\t\tconst vertices = [];\n\t\tconst colors = [];\n\n\t\tconst pointMap = {};\n\n\t\t// near\n\n\t\taddLine( 'n1', 'n2' );\n\t\taddLine( 'n2', 'n4' );\n\t\taddLine( 'n4', 'n3' );\n\t\taddLine( 'n3', 'n1' );\n\n\t\t// far\n\n\t\taddLine( 'f1', 'f2' );\n\t\taddLine( 'f2', 'f4' );\n\t\taddLine( 'f4', 'f3' );\n\t\taddLine( 'f3', 'f1' );\n\n\t\t// sides\n\n\t\taddLine( 'n1', 'f1' );\n\t\taddLine( 'n2', 'f2' );\n\t\taddLine( 'n3', 'f3' );\n\t\taddLine( 'n4', 'f4' );\n\n\t\t// cone\n\n\t\taddLine( 'p', 'n1' );\n\t\taddLine( 'p', 'n2' );\n\t\taddLine( 'p', 'n3' );\n\t\taddLine( 'p', 'n4' );\n\n\t\t// up\n\n\t\taddLine( 'u1', 'u2' );\n\t\taddLine( 'u2', 'u3' );\n\t\taddLine( 'u3', 'u1' );\n\n\t\t// target\n\n\t\taddLine( 'c', 't' );\n\t\taddLine( 'p', 'c' );\n\n\t\t// cross\n\n\t\taddLine( 'cn1', 'cn2' );\n\t\taddLine( 'cn3', 'cn4' );\n\n\t\taddLine( 'cf1', 'cf2' );\n\t\taddLine( 'cf3', 'cf4' );\n\n\t\tfunction addLine( a, b ) {\n\n\t\t\taddPoint( a );\n\t\t\taddPoint( b );\n\n\t\t}\n\n\t\tfunction addPoint( id ) {\n\n\t\t\tvertices.push( 0, 0, 0 );\n\t\t\tcolors.push( 0, 0, 0 );\n\n\t\t\tif ( pointMap[ id ] === undefined ) {\n\n\t\t\t\tpointMap[ id ] = [];\n\n\t\t\t}\n\n\t\t\tpointMap[ id ].push( ( vertices.length / 3 ) - 1 );\n\n\t\t}\n\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\t\tsuper( geometry, material );\n\n\t\tthis.type = 'CameraHelper';\n\n\t\tthis.camera = camera;\n\t\tif ( this.camera.updateProjectionMatrix ) this.camera.updateProjectionMatrix();\n\n\t\tthis.matrix = camera.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.pointMap = pointMap;\n\n\t\tthis.update();\n\n\t\t// colors\n\n\t\tconst colorFrustum = new Color( 0xffaa00 );\n\t\tconst colorCone = new Color( 0xff0000 );\n\t\tconst colorUp = new Color( 0x00aaff );\n\t\tconst colorTarget = new Color( 0xffffff );\n\t\tconst colorCross = new Color( 0x333333 );\n\n\t\tthis.setColors( colorFrustum, colorCone, colorUp, colorTarget, colorCross );\n\n\t}\n\n\tsetColors( frustum, cone, up, target, cross ) {\n\n\t\tconst geometry = this.geometry;\n\n\t\tconst colorAttribute = geometry.getAttribute( 'color' );\n\n\t\t// near\n\n\t\tcolorAttribute.setXYZ( 0, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 1, frustum.r, frustum.g, frustum.b ); // n1, n2\n\t\tcolorAttribute.setXYZ( 2, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 3, frustum.r, frustum.g, frustum.b ); // n2, n4\n\t\tcolorAttribute.setXYZ( 4, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 5, frustum.r, frustum.g, frustum.b ); // n4, n3\n\t\tcolorAttribute.setXYZ( 6, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 7, frustum.r, frustum.g, frustum.b ); // n3, n1\n\n\t\t// far\n\n\t\tcolorAttribute.setXYZ( 8, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 9, frustum.r, frustum.g, frustum.b ); // f1, f2\n\t\tcolorAttribute.setXYZ( 10, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 11, frustum.r, frustum.g, frustum.b ); // f2, f4\n\t\tcolorAttribute.setXYZ( 12, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 13, frustum.r, frustum.g, frustum.b ); // f4, f3\n\t\tcolorAttribute.setXYZ( 14, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 15, frustum.r, frustum.g, frustum.b ); // f3, f1\n\n\t\t// sides\n\n\t\tcolorAttribute.setXYZ( 16, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 17, frustum.r, frustum.g, frustum.b ); // n1, f1\n\t\tcolorAttribute.setXYZ( 18, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 19, frustum.r, frustum.g, frustum.b ); // n2, f2\n\t\tcolorAttribute.setXYZ( 20, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 21, frustum.r, frustum.g, frustum.b ); // n3, f3\n\t\tcolorAttribute.setXYZ( 22, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 23, frustum.r, frustum.g, frustum.b ); // n4, f4\n\n\t\t// cone\n\n\t\tcolorAttribute.setXYZ( 24, cone.r, cone.g, cone.b ); colorAttribute.setXYZ( 25, cone.r, cone.g, cone.b ); // p, n1\n\t\tcolorAttribute.setXYZ( 26, cone.r, cone.g, cone.b ); colorAttribute.setXYZ( 27, cone.r, cone.g, cone.b ); // p, n2\n\t\tcolorAttribute.setXYZ( 28, cone.r, cone.g, cone.b ); colorAttribute.setXYZ( 29, cone.r, cone.g, cone.b ); // p, n3\n\t\tcolorAttribute.setXYZ( 30, cone.r, cone.g, cone.b ); colorAttribute.setXYZ( 31, cone.r, cone.g, cone.b ); // p, n4\n\n\t\t// up\n\n\t\tcolorAttribute.setXYZ( 32, up.r, up.g, up.b ); colorAttribute.setXYZ( 33, up.r, up.g, up.b ); // u1, u2\n\t\tcolorAttribute.setXYZ( 34, up.r, up.g, up.b ); colorAttribute.setXYZ( 35, up.r, up.g, up.b ); // u2, u3\n\t\tcolorAttribute.setXYZ( 36, up.r, up.g, up.b ); colorAttribute.setXYZ( 37, up.r, up.g, up.b ); // u3, u1\n\n\t\t// target\n\n\t\tcolorAttribute.setXYZ( 38, target.r, target.g, target.b ); colorAttribute.setXYZ( 39, target.r, target.g, target.b ); // c, t\n\t\tcolorAttribute.setXYZ( 40, cross.r, cross.g, cross.b ); colorAttribute.setXYZ( 41, cross.r, cross.g, cross.b ); // p, c\n\n\t\t// cross\n\n\t\tcolorAttribute.setXYZ( 42, cross.r, cross.g, cross.b ); colorAttribute.setXYZ( 43, cross.r, cross.g, cross.b ); // cn1, cn2\n\t\tcolorAttribute.setXYZ( 44, cross.r, cross.g, cross.b ); colorAttribute.setXYZ( 45, cross.r, cross.g, cross.b ); // cn3, cn4\n\n\t\tcolorAttribute.setXYZ( 46, cross.r, cross.g, cross.b ); colorAttribute.setXYZ( 47, cross.r, cross.g, cross.b ); // cf1, cf2\n\t\tcolorAttribute.setXYZ( 48, cross.r, cross.g, cross.b ); colorAttribute.setXYZ( 49, cross.r, cross.g, cross.b ); // cf3, cf4\n\n\t\tcolorAttribute.needsUpdate = true;\n\n\t}\n\n\tupdate() {\n\n\t\tconst geometry = this.geometry;\n\t\tconst pointMap = this.pointMap;\n\n\t\tconst w = 1, h = 1;\n\n\t\t// we need just camera projection matrix inverse\n\t\t// world matrix must be identity\n\n\t\t_camera.projectionMatrixInverse.copy( this.camera.projectionMatrixInverse );\n\n\t\t// center / target\n\n\t\tsetPoint( 'c', pointMap, geometry, _camera, 0, 0, - 1 );\n\t\tsetPoint( 't', pointMap, geometry, _camera, 0, 0, 1 );\n\n\t\t// near\n\n\t\tsetPoint( 'n1', pointMap, geometry, _camera, - w, - h, - 1 );\n\t\tsetPoint( 'n2', pointMap, geometry, _camera, w, - h, - 1 );\n\t\tsetPoint( 'n3', pointMap, geometry, _camera, - w, h, - 1 );\n\t\tsetPoint( 'n4', pointMap, geometry, _camera, w, h, - 1 );\n\n\t\t// far\n\n\t\tsetPoint( 'f1', pointMap, geometry, _camera, - w, - h, 1 );\n\t\tsetPoint( 'f2', pointMap, geometry, _camera, w, - h, 1 );\n\t\tsetPoint( 'f3', pointMap, geometry, _camera, - w, h, 1 );\n\t\tsetPoint( 'f4', pointMap, geometry, _camera, w, h, 1 );\n\n\t\t// up\n\n\t\tsetPoint( 'u1', pointMap, geometry, _camera, w * 0.7, h * 1.1, - 1 );\n\t\tsetPoint( 'u2', pointMap, geometry, _camera, - w * 0.7, h * 1.1, - 1 );\n\t\tsetPoint( 'u3', pointMap, geometry, _camera, 0, h * 2, - 1 );\n\n\t\t// cross\n\n\t\tsetPoint( 'cf1', pointMap, geometry, _camera, - w, 0, 1 );\n\t\tsetPoint( 'cf2', pointMap, geometry, _camera, w, 0, 1 );\n\t\tsetPoint( 'cf3', pointMap, geometry, _camera, 0, - h, 1 );\n\t\tsetPoint( 'cf4', pointMap, geometry, _camera, 0, h, 1 );\n\n\t\tsetPoint( 'cn1', pointMap, geometry, _camera, - w, 0, - 1 );\n\t\tsetPoint( 'cn2', pointMap, geometry, _camera, w, 0, - 1 );\n\t\tsetPoint( 'cn3', pointMap, geometry, _camera, 0, - h, - 1 );\n\t\tsetPoint( 'cn4', pointMap, geometry, _camera, 0, h, - 1 );\n\n\t\tgeometry.getAttribute( 'position' ).needsUpdate = true;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n}\n\n\nfunction setPoint( point, pointMap, geometry, camera, x, y, z ) {\n\n\t_vector.set( x, y, z ).unproject( camera );\n\n\tconst points = pointMap[ point ];\n\n\tif ( points !== undefined ) {\n\n\t\tconst position = geometry.getAttribute( 'position' );\n\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tposition.setXYZ( points[ i ], _vector.x, _vector.y, _vector.z );\n\n\t\t}\n\n\t}\n\n}\n\nconst _box = /*@__PURE__*/ new Box3();\n\nclass BoxHelper extends LineSegments {\n\n\tconstructor( object, color = 0xffff00 ) {\n\n\t\tconst indices = new Uint16Array( [ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ] );\n\t\tconst positions = new Float32Array( 8 * 3 );\n\n\t\tconst geometry = new BufferGeometry();\n\t\tgeometry.setIndex( new BufferAttribute( indices, 1 ) );\n\t\tgeometry.setAttribute( 'position', new BufferAttribute( positions, 3 ) );\n\n\t\tsuper( geometry, new LineBasicMaterial( { color: color, toneMapped: false } ) );\n\n\t\tthis.object = object;\n\t\tthis.type = 'BoxHelper';\n\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.update();\n\n\t}\n\n\tupdate( object ) {\n\n\t\tif ( object !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.BoxHelper: .update() has no longer arguments.' );\n\n\t\t}\n\n\t\tif ( this.object !== undefined ) {\n\n\t\t\t_box.setFromObject( this.object );\n\n\t\t}\n\n\t\tif ( _box.isEmpty() ) return;\n\n\t\tconst min = _box.min;\n\t\tconst max = _box.max;\n\n\t\t/*\n\t\t\t5____4\n\t\t1/___0/|\n\t\t| 6__|_7\n\t\t2/___3/\n\n\t\t0: max.x, max.y, max.z\n\t\t1: min.x, max.y, max.z\n\t\t2: min.x, min.y, max.z\n\t\t3: max.x, min.y, max.z\n\t\t4: max.x, max.y, min.z\n\t\t5: min.x, max.y, min.z\n\t\t6: min.x, min.y, min.z\n\t\t7: max.x, min.y, min.z\n\t\t*/\n\n\t\tconst position = this.geometry.attributes.position;\n\t\tconst array = position.array;\n\n\t\tarray[ 0 ] = max.x; array[ 1 ] = max.y; array[ 2 ] = max.z;\n\t\tarray[ 3 ] = min.x; array[ 4 ] = max.y; array[ 5 ] = max.z;\n\t\tarray[ 6 ] = min.x; array[ 7 ] = min.y; array[ 8 ] = max.z;\n\t\tarray[ 9 ] = max.x; array[ 10 ] = min.y; array[ 11 ] = max.z;\n\t\tarray[ 12 ] = max.x; array[ 13 ] = max.y; array[ 14 ] = min.z;\n\t\tarray[ 15 ] = min.x; array[ 16 ] = max.y; array[ 17 ] = min.z;\n\t\tarray[ 18 ] = min.x; array[ 19 ] = min.y; array[ 20 ] = min.z;\n\t\tarray[ 21 ] = max.x; array[ 22 ] = min.y; array[ 23 ] = min.z;\n\n\t\tposition.needsUpdate = true;\n\n\t\tthis.geometry.computeBoundingSphere();\n\n\t}\n\n\tsetFromObject( object ) {\n\n\t\tthis.object = object;\n\t\tthis.update();\n\n\t\treturn this;\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.object = source.object;\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n}\n\nclass Box3Helper extends LineSegments {\n\n\tconstructor( box, color = 0xffff00 ) {\n\n\t\tconst indices = new Uint16Array( [ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ] );\n\n\t\tconst positions = [ 1, 1, 1, - 1, 1, 1, - 1, - 1, 1, 1, - 1, 1, 1, 1, - 1, - 1, 1, - 1, - 1, - 1, - 1, 1, - 1, - 1 ];\n\n\t\tconst geometry = new BufferGeometry();\n\n\t\tgeometry.setIndex( new BufferAttribute( indices, 1 ) );\n\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\n\n\t\tsuper( geometry, new LineBasicMaterial( { color: color, toneMapped: false } ) );\n\n\t\tthis.box = box;\n\n\t\tthis.type = 'Box3Helper';\n\n\t\tthis.geometry.computeBoundingSphere();\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tconst box = this.box;\n\n\t\tif ( box.isEmpty() ) return;\n\n\t\tbox.getCenter( this.position );\n\n\t\tbox.getSize( this.scale );\n\n\t\tthis.scale.multiplyScalar( 0.5 );\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n}\n\nclass PlaneHelper extends Line {\n\n\tconstructor( plane, size = 1, hex = 0xffff00 ) {\n\n\t\tconst color = hex;\n\n\t\tconst positions = [ 1, - 1, 0, - 1, 1, 0, - 1, - 1, 0, 1, 1, 0, - 1, 1, 0, - 1, - 1, 0, 1, - 1, 0, 1, 1, 0 ];\n\n\t\tconst geometry = new BufferGeometry();\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\n\t\tgeometry.computeBoundingSphere();\n\n\t\tsuper( geometry, new LineBasicMaterial( { color: color, toneMapped: false } ) );\n\n\t\tthis.type = 'PlaneHelper';\n\n\t\tthis.plane = plane;\n\n\t\tthis.size = size;\n\n\t\tconst positions2 = [ 1, 1, 0, - 1, 1, 0, - 1, - 1, 0, 1, 1, 0, - 1, - 1, 0, 1, - 1, 0 ];\n\n\t\tconst geometry2 = new BufferGeometry();\n\t\tgeometry2.setAttribute( 'position', new Float32BufferAttribute( positions2, 3 ) );\n\t\tgeometry2.computeBoundingSphere();\n\n\t\tthis.add( new Mesh( geometry2, new MeshBasicMaterial( { color: color, opacity: 0.2, transparent: true, depthWrite: false, toneMapped: false } ) ) );\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tthis.position.set( 0, 0, 0 );\n\n\t\tthis.scale.set( 0.5 * this.size, 0.5 * this.size, 1 );\n\n\t\tthis.lookAt( this.plane.normal );\n\n\t\tthis.translateZ( - this.plane.constant );\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\t\tthis.children[ 0 ].geometry.dispose();\n\t\tthis.children[ 0 ].material.dispose();\n\n\t}\n\n}\n\nconst _axis = /*@__PURE__*/ new Vector3();\nlet _lineGeometry, _coneGeometry;\n\nclass ArrowHelper extends Object3D {\n\n\t// dir is assumed to be normalized\n\n\tconstructor( dir = new Vector3( 0, 0, 1 ), origin = new Vector3( 0, 0, 0 ), length = 1, color = 0xffff00, headLength = length * 0.2, headWidth = headLength * 0.2 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'ArrowHelper';\n\n\t\tif ( _lineGeometry === undefined ) {\n\n\t\t\t_lineGeometry = new BufferGeometry();\n\t\t\t_lineGeometry.setAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0, 0, 1, 0 ], 3 ) );\n\n\t\t\t_coneGeometry = new CylinderGeometry( 0, 0.5, 1, 5, 1 );\n\t\t\t_coneGeometry.translate( 0, - 0.5, 0 );\n\n\t\t}\n\n\t\tthis.position.copy( origin );\n\n\t\tthis.line = new Line( _lineGeometry, new LineBasicMaterial( { color: color, toneMapped: false } ) );\n\t\tthis.line.matrixAutoUpdate = false;\n\t\tthis.add( this.line );\n\n\t\tthis.cone = new Mesh( _coneGeometry, new MeshBasicMaterial( { color: color, toneMapped: false } ) );\n\t\tthis.cone.matrixAutoUpdate = false;\n\t\tthis.add( this.cone );\n\n\t\tthis.setDirection( dir );\n\t\tthis.setLength( length, headLength, headWidth );\n\n\t}\n\n\tsetDirection( dir ) {\n\n\t\t// dir is assumed to be normalized\n\n\t\tif ( dir.y > 0.99999 ) {\n\n\t\t\tthis.quaternion.set( 0, 0, 0, 1 );\n\n\t\t} else if ( dir.y < - 0.99999 ) {\n\n\t\t\tthis.quaternion.set( 1, 0, 0, 0 );\n\n\t\t} else {\n\n\t\t\t_axis.set( dir.z, 0, - dir.x ).normalize();\n\n\t\t\tconst radians = Math.acos( dir.y );\n\n\t\t\tthis.quaternion.setFromAxisAngle( _axis, radians );\n\n\t\t}\n\n\t}\n\n\tsetLength( length, headLength = length * 0.2, headWidth = headLength * 0.2 ) {\n\n\t\tthis.line.scale.set( 1, Math.max( 0.0001, length - headLength ), 1 ); // see #17458\n\t\tthis.line.updateMatrix();\n\n\t\tthis.cone.scale.set( headWidth, headLength, headWidth );\n\t\tthis.cone.position.y = length;\n\t\tthis.cone.updateMatrix();\n\n\t}\n\n\tsetColor( color ) {\n\n\t\tthis.line.material.color.set( color );\n\t\tthis.cone.material.color.set( color );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source, false );\n\n\t\tthis.line.copy( source.line );\n\t\tthis.cone.copy( source.cone );\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.line.geometry.dispose();\n\t\tthis.line.material.dispose();\n\t\tthis.cone.geometry.dispose();\n\t\tthis.cone.material.dispose();\n\n\t}\n\n}\n\nclass AxesHelper extends LineSegments {\n\n\tconstructor( size = 1 ) {\n\n\t\tconst vertices = [\n\t\t\t0, 0, 0,\tsize, 0, 0,\n\t\t\t0, 0, 0,\t0, size, 0,\n\t\t\t0, 0, 0,\t0, 0, size\n\t\t];\n\n\t\tconst colors = [\n\t\t\t1, 0, 0,\t1, 0.6, 0,\n\t\t\t0, 1, 0,\t0.6, 1, 0,\n\t\t\t0, 0, 1,\t0, 0.6, 1\n\t\t];\n\n\t\tconst geometry = new BufferGeometry();\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\t\tconst material = new LineBasicMaterial( { vertexColors: true, toneMapped: false } );\n\n\t\tsuper( geometry, material );\n\n\t\tthis.type = 'AxesHelper';\n\n\t}\n\n\tsetColors( xAxisColor, yAxisColor, zAxisColor ) {\n\n\t\tconst color = new Color();\n\t\tconst array = this.geometry.attributes.color.array;\n\n\t\tcolor.set( xAxisColor );\n\t\tcolor.toArray( array, 0 );\n\t\tcolor.toArray( array, 3 );\n\n\t\tcolor.set( yAxisColor );\n\t\tcolor.toArray( array, 6 );\n\t\tcolor.toArray( array, 9 );\n\n\t\tcolor.set( zAxisColor );\n\t\tcolor.toArray( array, 12 );\n\t\tcolor.toArray( array, 15 );\n\n\t\tthis.geometry.attributes.color.needsUpdate = true;\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n}\n\nclass ShapePath {\n\n\tconstructor() {\n\n\t\tthis.type = 'ShapePath';\n\n\t\tthis.color = new Color();\n\n\t\tthis.subPaths = [];\n\t\tthis.currentPath = null;\n\n\t}\n\n\tmoveTo( x, y ) {\n\n\t\tthis.currentPath = new Path();\n\t\tthis.subPaths.push( this.currentPath );\n\t\tthis.currentPath.moveTo( x, y );\n\n\t\treturn this;\n\n\t}\n\n\tlineTo( x, y ) {\n\n\t\tthis.currentPath.lineTo( x, y );\n\n\t\treturn this;\n\n\t}\n\n\tquadraticCurveTo( aCPx, aCPy, aX, aY ) {\n\n\t\tthis.currentPath.quadraticCurveTo( aCPx, aCPy, aX, aY );\n\n\t\treturn this;\n\n\t}\n\n\tbezierCurveTo( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\n\n\t\tthis.currentPath.bezierCurveTo( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY );\n\n\t\treturn this;\n\n\t}\n\n\tsplineThru( pts ) {\n\n\t\tthis.currentPath.splineThru( pts );\n\n\t\treturn this;\n\n\t}\n\n\ttoShapes( isCCW ) {\n\n\t\tfunction toShapesNoHoles( inSubpaths ) {\n\n\t\t\tconst shapes = [];\n\n\t\t\tfor ( let i = 0, l = inSubpaths.length; i < l; i ++ ) {\n\n\t\t\t\tconst tmpPath = inSubpaths[ i ];\n\n\t\t\t\tconst tmpShape = new Shape();\n\t\t\t\ttmpShape.curves = tmpPath.curves;\n\n\t\t\t\tshapes.push( tmpShape );\n\n\t\t\t}\n\n\t\t\treturn shapes;\n\n\t\t}\n\n\t\tfunction isPointInsidePolygon( inPt, inPolygon ) {\n\n\t\t\tconst polyLen = inPolygon.length;\n\n\t\t\t// inPt on polygon contour => immediate success    or\n\t\t\t// toggling of inside/outside at every single! intersection point of an edge\n\t\t\t//  with the horizontal line through inPt, left of inPt\n\t\t\t//  not counting lowerY endpoints of edges and whole edges on that line\n\t\t\tlet inside = false;\n\t\t\tfor ( let p = polyLen - 1, q = 0; q < polyLen; p = q ++ ) {\n\n\t\t\t\tlet edgeLowPt = inPolygon[ p ];\n\t\t\t\tlet edgeHighPt = inPolygon[ q ];\n\n\t\t\t\tlet edgeDx = edgeHighPt.x - edgeLowPt.x;\n\t\t\t\tlet edgeDy = edgeHighPt.y - edgeLowPt.y;\n\n\t\t\t\tif ( Math.abs( edgeDy ) > Number.EPSILON ) {\n\n\t\t\t\t\t// not parallel\n\t\t\t\t\tif ( edgeDy < 0 ) {\n\n\t\t\t\t\t\tedgeLowPt = inPolygon[ q ]; edgeDx = - edgeDx;\n\t\t\t\t\t\tedgeHighPt = inPolygon[ p ]; edgeDy = - edgeDy;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ( inPt.y < edgeLowPt.y ) || ( inPt.y > edgeHighPt.y ) ) \t\tcontinue;\n\n\t\t\t\t\tif ( inPt.y === edgeLowPt.y ) {\n\n\t\t\t\t\t\tif ( inPt.x === edgeLowPt.x )\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\t\t// continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconst perpEdge = edgeDy * ( inPt.x - edgeLowPt.x ) - edgeDx * ( inPt.y - edgeLowPt.y );\n\t\t\t\t\t\tif ( perpEdge === 0 )\t\t\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\t\tif ( perpEdge < 0 ) \t\t\t\tcontinue;\n\t\t\t\t\t\tinside = ! inside;\t\t// true intersection left of inPt\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// parallel or collinear\n\t\t\t\t\tif ( inPt.y !== edgeLowPt.y ) \t\tcontinue;\t\t\t// parallel\n\t\t\t\t\t// edge lies on the same horizontal line as inPt\n\t\t\t\t\tif ( ( ( edgeHighPt.x <= inPt.x ) && ( inPt.x <= edgeLowPt.x ) ) ||\n\t\t\t\t\t\t ( ( edgeLowPt.x <= inPt.x ) && ( inPt.x <= edgeHighPt.x ) ) )\t\treturn\ttrue;\t// inPt: Point on contour !\n\t\t\t\t\t// continue;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn\tinside;\n\n\t\t}\n\n\t\tconst isClockWise = ShapeUtils.isClockWise;\n\n\t\tconst subPaths = this.subPaths;\n\t\tif ( subPaths.length === 0 ) return [];\n\n\t\tlet solid, tmpPath, tmpShape;\n\t\tconst shapes = [];\n\n\t\tif ( subPaths.length === 1 ) {\n\n\t\t\ttmpPath = subPaths[ 0 ];\n\t\t\ttmpShape = new Shape();\n\t\t\ttmpShape.curves = tmpPath.curves;\n\t\t\tshapes.push( tmpShape );\n\t\t\treturn shapes;\n\n\t\t}\n\n\t\tlet holesFirst = ! isClockWise( subPaths[ 0 ].getPoints() );\n\t\tholesFirst = isCCW ? ! holesFirst : holesFirst;\n\n\t\t// console.log(\"Holes first\", holesFirst);\n\n\t\tconst betterShapeHoles = [];\n\t\tconst newShapes = [];\n\t\tlet newShapeHoles = [];\n\t\tlet mainIdx = 0;\n\t\tlet tmpPoints;\n\n\t\tnewShapes[ mainIdx ] = undefined;\n\t\tnewShapeHoles[ mainIdx ] = [];\n\n\t\tfor ( let i = 0, l = subPaths.length; i < l; i ++ ) {\n\n\t\t\ttmpPath = subPaths[ i ];\n\t\t\ttmpPoints = tmpPath.getPoints();\n\t\t\tsolid = isClockWise( tmpPoints );\n\t\t\tsolid = isCCW ? ! solid : solid;\n\n\t\t\tif ( solid ) {\n\n\t\t\t\tif ( ( ! holesFirst ) && ( newShapes[ mainIdx ] ) )\tmainIdx ++;\n\n\t\t\t\tnewShapes[ mainIdx ] = { s: new Shape(), p: tmpPoints };\n\t\t\t\tnewShapes[ mainIdx ].s.curves = tmpPath.curves;\n\n\t\t\t\tif ( holesFirst )\tmainIdx ++;\n\t\t\t\tnewShapeHoles[ mainIdx ] = [];\n\n\t\t\t\t//console.log('cw', i);\n\n\t\t\t} else {\n\n\t\t\t\tnewShapeHoles[ mainIdx ].push( { h: tmpPath, p: tmpPoints[ 0 ] } );\n\n\t\t\t\t//console.log('ccw', i);\n\n\t\t\t}\n\n\t\t}\n\n\t\t// only Holes? -> probably all Shapes with wrong orientation\n\t\tif ( ! newShapes[ 0 ] )\treturn\ttoShapesNoHoles( subPaths );\n\n\n\t\tif ( newShapes.length > 1 ) {\n\n\t\t\tlet ambiguous = false;\n\t\t\tlet toChange = 0;\n\n\t\t\tfor ( let sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\n\t\t\t\tbetterShapeHoles[ sIdx ] = [];\n\n\t\t\t}\n\n\t\t\tfor ( let sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\n\t\t\t\tconst sho = newShapeHoles[ sIdx ];\n\n\t\t\t\tfor ( let hIdx = 0; hIdx < sho.length; hIdx ++ ) {\n\n\t\t\t\t\tconst ho = sho[ hIdx ];\n\t\t\t\t\tlet hole_unassigned = true;\n\n\t\t\t\t\tfor ( let s2Idx = 0; s2Idx < newShapes.length; s2Idx ++ ) {\n\n\t\t\t\t\t\tif ( isPointInsidePolygon( ho.p, newShapes[ s2Idx ].p ) ) {\n\n\t\t\t\t\t\t\tif ( sIdx !== s2Idx )\ttoChange ++;\n\n\t\t\t\t\t\t\tif ( hole_unassigned ) {\n\n\t\t\t\t\t\t\t\thole_unassigned = false;\n\t\t\t\t\t\t\t\tbetterShapeHoles[ s2Idx ].push( ho );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tambiguous = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( hole_unassigned ) {\n\n\t\t\t\t\t\tbetterShapeHoles[ sIdx ].push( ho );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( toChange > 0 && ambiguous === false ) {\n\n\t\t\t\tnewShapeHoles = betterShapeHoles;\n\n\t\t\t}\n\n\t\t}\n\n\t\tlet tmpHoles;\n\n\t\tfor ( let i = 0, il = newShapes.length; i < il; i ++ ) {\n\n\t\t\ttmpShape = newShapes[ i ].s;\n\t\t\tshapes.push( tmpShape );\n\t\t\ttmpHoles = newShapeHoles[ i ];\n\n\t\t\tfor ( let j = 0, jl = tmpHoles.length; j < jl; j ++ ) {\n\n\t\t\t\ttmpShape.holes.push( tmpHoles[ j ].h );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//console.log(\"shape\", shapes);\n\n\t\treturn shapes;\n\n\t}\n\n}\n\n// Fast Half Float Conversions, http://www.fox-toolkit.org/ftp/fasthalffloatconversion.pdf\n\nconst _tables = /*@__PURE__*/ _generateTables();\n\nfunction _generateTables() {\n\n\t// float32 to float16 helpers\n\n\tconst buffer = new ArrayBuffer( 4 );\n\tconst floatView = new Float32Array( buffer );\n\tconst uint32View = new Uint32Array( buffer );\n\n\tconst baseTable = new Uint32Array( 512 );\n\tconst shiftTable = new Uint32Array( 512 );\n\n\tfor ( let i = 0; i < 256; ++ i ) {\n\n\t\tconst e = i - 127;\n\n\t\t// very small number (0, -0)\n\n\t\tif ( e < - 27 ) {\n\n\t\t\tbaseTable[ i ] = 0x0000;\n\t\t\tbaseTable[ i | 0x100 ] = 0x8000;\n\t\t\tshiftTable[ i ] = 24;\n\t\t\tshiftTable[ i | 0x100 ] = 24;\n\n\t\t\t// small number (denorm)\n\n\t\t} else if ( e < - 14 ) {\n\n\t\t\tbaseTable[ i ] = 0x0400 >> ( - e - 14 );\n\t\t\tbaseTable[ i | 0x100 ] = ( 0x0400 >> ( - e - 14 ) ) | 0x8000;\n\t\t\tshiftTable[ i ] = - e - 1;\n\t\t\tshiftTable[ i | 0x100 ] = - e - 1;\n\n\t\t\t// normal number\n\n\t\t} else if ( e <= 15 ) {\n\n\t\t\tbaseTable[ i ] = ( e + 15 ) << 10;\n\t\t\tbaseTable[ i | 0x100 ] = ( ( e + 15 ) << 10 ) | 0x8000;\n\t\t\tshiftTable[ i ] = 13;\n\t\t\tshiftTable[ i | 0x100 ] = 13;\n\n\t\t\t// large number (Infinity, -Infinity)\n\n\t\t} else if ( e < 128 ) {\n\n\t\t\tbaseTable[ i ] = 0x7c00;\n\t\t\tbaseTable[ i | 0x100 ] = 0xfc00;\n\t\t\tshiftTable[ i ] = 24;\n\t\t\tshiftTable[ i | 0x100 ] = 24;\n\n\t\t\t// stay (NaN, Infinity, -Infinity)\n\n\t\t} else {\n\n\t\t\tbaseTable[ i ] = 0x7c00;\n\t\t\tbaseTable[ i | 0x100 ] = 0xfc00;\n\t\t\tshiftTable[ i ] = 13;\n\t\t\tshiftTable[ i | 0x100 ] = 13;\n\n\t\t}\n\n\t}\n\n\t// float16 to float32 helpers\n\n\tconst mantissaTable = new Uint32Array( 2048 );\n\tconst exponentTable = new Uint32Array( 64 );\n\tconst offsetTable = new Uint32Array( 64 );\n\n\tfor ( let i = 1; i < 1024; ++ i ) {\n\n\t\tlet m = i << 13; // zero pad mantissa bits\n\t\tlet e = 0; // zero exponent\n\n\t\t// normalized\n\t\twhile ( ( m & 0x00800000 ) === 0 ) {\n\n\t\t\tm <<= 1;\n\t\t\te -= 0x00800000; // decrement exponent\n\n\t\t}\n\n\t\tm &= ~ 0x00800000; // clear leading 1 bit\n\t\te += 0x38800000; // adjust bias\n\n\t\tmantissaTable[ i ] = m | e;\n\n\t}\n\n\tfor ( let i = 1024; i < 2048; ++ i ) {\n\n\t\tmantissaTable[ i ] = 0x38000000 + ( ( i - 1024 ) << 13 );\n\n\t}\n\n\tfor ( let i = 1; i < 31; ++ i ) {\n\n\t\texponentTable[ i ] = i << 23;\n\n\t}\n\n\texponentTable[ 31 ] = 0x47800000;\n\texponentTable[ 32 ] = 0x80000000;\n\n\tfor ( let i = 33; i < 63; ++ i ) {\n\n\t\texponentTable[ i ] = 0x80000000 + ( ( i - 32 ) << 23 );\n\n\t}\n\n\texponentTable[ 63 ] = 0xc7800000;\n\n\tfor ( let i = 1; i < 64; ++ i ) {\n\n\t\tif ( i !== 32 ) {\n\n\t\t\toffsetTable[ i ] = 1024;\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\tfloatView: floatView,\n\t\tuint32View: uint32View,\n\t\tbaseTable: baseTable,\n\t\tshiftTable: shiftTable,\n\t\tmantissaTable: mantissaTable,\n\t\texponentTable: exponentTable,\n\t\toffsetTable: offsetTable\n\t};\n\n}\n\n// float32 to float16\n\nfunction toHalfFloat( val ) {\n\n\tif ( Math.abs( val ) > 65504 ) console.warn( 'THREE.DataUtils.toHalfFloat(): Value out of range.' );\n\n\tval = clamp( val, - 65504, 65504 );\n\n\t_tables.floatView[ 0 ] = val;\n\tconst f = _tables.uint32View[ 0 ];\n\tconst e = ( f >> 23 ) & 0x1ff;\n\treturn _tables.baseTable[ e ] + ( ( f & 0x007fffff ) >> _tables.shiftTable[ e ] );\n\n}\n\n// float16 to float32\n\nfunction fromHalfFloat( val ) {\n\n\tconst m = val >> 10;\n\t_tables.uint32View[ 0 ] = _tables.mantissaTable[ _tables.offsetTable[ m ] + ( val & 0x3ff ) ] + _tables.exponentTable[ m ];\n\treturn _tables.floatView[ 0 ];\n\n}\n\nvar DataUtils = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\ttoHalfFloat: toHalfFloat,\n\tfromHalfFloat: fromHalfFloat\n});\n\n// r134, d65e0af06644fe5a84a6fc0e372f4318f95a04c0\n\nfunction ImmediateRenderObject() {\n\n\tconsole.error( 'THREE.ImmediateRenderObject has been removed.' );\n\n}\n\n// r138, 48b05d3500acc084df50be9b4c90781ad9b8cb17\n\nclass WebGLMultisampleRenderTarget extends WebGLRenderTarget {\n\n\tconstructor( width, height, options ) {\n\n\t\tconsole.error( 'THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the \"samples\" property to greater 0 to enable multisampling.' );\n\t\tsuper( width, height, options );\n\t\tthis.samples = 4;\n\n\t}\n\n}\n\n// r138, f9cd9cab03b7b64244e304900a3a2eeaa3a588ce\n\nclass DataTexture2DArray extends DataArrayTexture {\n\n\tconstructor( data, width, height, depth ) {\n\n\t\tconsole.warn( 'THREE.DataTexture2DArray has been renamed to DataArrayTexture.' );\n\t\tsuper( data, width, height, depth );\n\n\t}\n\n}\n\n// r138, f9cd9cab03b7b64244e304900a3a2eeaa3a588ce\n\nclass DataTexture3D extends Data3DTexture {\n\n\tconstructor( data, width, height, depth ) {\n\n\t\tconsole.warn( 'THREE.DataTexture3D has been renamed to Data3DTexture.' );\n\t\tsuper( data, width, height, depth );\n\n\t}\n\n}\n\n// r144\n\nclass BoxBufferGeometry extends BoxGeometry {\n\n\tconstructor( width, height, depth, widthSegments, heightSegments, depthSegments ) {\n\n\t\tconsole.warn( 'THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry.' );\n\t\tsuper( width, height, depth, widthSegments, heightSegments, depthSegments );\n\n\n\t}\n\n}\n\n// r144\n\nclass CapsuleBufferGeometry extends CapsuleGeometry {\n\n\tconstructor( radius, length, capSegments, radialSegments ) {\n\n\t\tconsole.warn( 'THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry.' );\n\t\tsuper( radius, length, capSegments, radialSegments );\n\n\t}\n\n}\n\n// r144\n\nclass CircleBufferGeometry extends CircleGeometry {\n\n\tconstructor( radius, segments, thetaStart, thetaLength ) {\n\n\t\tconsole.warn( 'THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry.' );\n\t\tsuper( radius, segments, thetaStart, thetaLength );\n\n\t}\n\n}\n\n// r144\n\nclass ConeBufferGeometry extends ConeGeometry {\n\n\tconstructor( radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\n\n\t\tconsole.warn( 'THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry.' );\n\t\tsuper( radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength );\n\n\t}\n\n}\n\n// r144\n\nclass CylinderBufferGeometry extends CylinderGeometry {\n\n\tconstructor( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\n\n\t\tconsole.warn( 'THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry.' );\n\t\tsuper( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength );\n\n\t}\n\n}\n\n// r144\n\nclass DodecahedronBufferGeometry extends DodecahedronGeometry {\n\n\tconstructor( radius, detail ) {\n\n\t\tconsole.warn( 'THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry.' );\n\t\tsuper( radius, detail );\n\n\t}\n\n}\n\n// r144\n\nclass ExtrudeBufferGeometry extends ExtrudeGeometry {\n\n\tconstructor( shapes, options ) {\n\n\t\tconsole.warn( 'THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry.' );\n\t\tsuper( shapes, options );\n\n\t}\n\n}\n\n// r144\n\nclass IcosahedronBufferGeometry extends IcosahedronGeometry {\n\n\tconstructor( radius, detail ) {\n\n\t\tconsole.warn( 'THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry.' );\n\t\tsuper( radius, detail );\n\n\t}\n\n}\n\n// r144\n\nclass LatheBufferGeometry extends LatheGeometry {\n\n\tconstructor( points, segments, phiStart, phiLength ) {\n\n\t\tconsole.warn( 'THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry.' );\n\t\tsuper( points, segments, phiStart, phiLength );\n\n\t}\n\n}\n\n// r144\n\nclass OctahedronBufferGeometry extends OctahedronGeometry {\n\n\tconstructor( radius, detail ) {\n\n\t\tconsole.warn( 'THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry.' );\n\t\tsuper( radius, detail );\n\n\t}\n\n}\n\n// r144\n\nclass PlaneBufferGeometry extends PlaneGeometry {\n\n\tconstructor( width, height, widthSegments, heightSegments ) {\n\n\t\tconsole.warn( 'THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry.' );\n\t\tsuper( width, height, widthSegments, heightSegments );\n\n\t}\n\n}\n\n// r144\n\nclass PolyhedronBufferGeometry extends PolyhedronGeometry {\n\n\tconstructor( vertices, indices, radius, detail ) {\n\n\t\tconsole.warn( 'THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry.' );\n\t\tsuper( vertices, indices, radius, detail );\n\n\t}\n\n}\n\n// r144\n\nclass RingBufferGeometry extends RingGeometry {\n\n\tconstructor( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\n\n\t\tconsole.warn( 'THREE.RingBufferGeometry has been renamed to THREE.RingGeometry.' );\n\t\tsuper( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength );\n\n\t}\n\n}\n\n// r144\n\nclass ShapeBufferGeometry extends ShapeGeometry {\n\n\tconstructor( shapes, curveSegments ) {\n\n\t\tconsole.warn( 'THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry.' );\n\t\tsuper( shapes, curveSegments );\n\n\t}\n\n}\n\n// r144\n\nclass SphereBufferGeometry extends SphereGeometry {\n\n\tconstructor( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\n\n\t\tconsole.warn( 'THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry.' );\n\t\tsuper( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength );\n\n\t}\n\n}\n\n// r144\n\nclass TetrahedronBufferGeometry extends TetrahedronGeometry {\n\n\tconstructor( radius, detail ) {\n\n\t\tconsole.warn( 'THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry.' );\n\t\tsuper( radius, detail );\n\n\t}\n\n}\n\n// r144\n\nclass TorusBufferGeometry extends TorusGeometry {\n\n\tconstructor( radius, tube, radialSegments, tubularSegments, arc ) {\n\n\t\tconsole.warn( 'THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry.' );\n\t\tsuper( radius, tube, radialSegments, tubularSegments, arc );\n\n\t}\n\n}\n\n// r144\n\nclass TorusKnotBufferGeometry extends TorusKnotGeometry {\n\n\tconstructor( radius, tube, tubularSegments, radialSegments, p, q ) {\n\n\t\tconsole.warn( 'THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry.' );\n\t\tsuper( radius, tube, tubularSegments, radialSegments, p, q );\n\n\t}\n\n}\n\n// r144\n\nclass TubeBufferGeometry extends TubeGeometry {\n\n\tconstructor( path, tubularSegments, radius, radialSegments, closed ) {\n\n\t\tconsole.warn( 'THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry.' );\n\t\tsuper( path, tubularSegments, radius, radialSegments, closed );\n\n\t}\n\n}\n\nif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'register', { detail: {\n\t\trevision: REVISION,\n\t} } ) );\n\n}\n\nif ( typeof window !== 'undefined' ) {\n\n\tif ( window.__THREE__ ) {\n\n\t\tconsole.warn( 'WARNING: Multiple instances of Three.js being imported.' );\n\n\t} else {\n\n\t\twindow.__THREE__ = REVISION;\n\n\t}\n\n}\n\nexport { ACESFilmicToneMapping, AddEquation, AddOperation, AdditiveAnimationBlendMode, AdditiveBlending, AlphaFormat, AlwaysDepth, AlwaysStencilFunc, AmbientLight, AmbientLightProbe, AnimationClip, AnimationLoader, AnimationMixer, AnimationObjectGroup, AnimationUtils, ArcCurve, ArrayCamera, ArrowHelper, Audio, AudioAnalyser, AudioContext, AudioListener, AudioLoader, AxesHelper, BackSide, BasicDepthPacking, BasicShadowMap, Bone, BooleanKeyframeTrack, Box2, Box3, Box3Helper, BoxBufferGeometry, BoxGeometry, BoxHelper, BufferAttribute, BufferGeometry, BufferGeometryLoader, ByteType, Cache, Camera, CameraHelper, CanvasTexture, CapsuleBufferGeometry, CapsuleGeometry, CatmullRomCurve3, CineonToneMapping, CircleBufferGeometry, CircleGeometry, ClampToEdgeWrapping, Clock, Color, ColorKeyframeTrack, ColorManagement, CompressedTexture, CompressedTextureLoader, ConeBufferGeometry, ConeGeometry, CubeCamera, CubeReflectionMapping, CubeRefractionMapping, CubeTexture, CubeTextureLoader, CubeUVReflectionMapping, CubicBezierCurve, CubicBezierCurve3, CubicInterpolant, CullFaceBack, CullFaceFront, CullFaceFrontBack, CullFaceNone, Curve, CurvePath, CustomBlending, CustomToneMapping, CylinderBufferGeometry, CylinderGeometry, Cylindrical, Data3DTexture, DataArrayTexture, DataTexture, DataTexture2DArray, DataTexture3D, DataTextureLoader, DataUtils, DecrementStencilOp, DecrementWrapStencilOp, DefaultLoadingManager, DepthFormat, DepthStencilFormat, DepthTexture, DirectionalLight, DirectionalLightHelper, DiscreteInterpolant, DodecahedronBufferGeometry, DodecahedronGeometry, DoubleSide, DstAlphaFactor, DstColorFactor, DynamicCopyUsage, DynamicDrawUsage, DynamicReadUsage, EdgesGeometry, EllipseCurve, EqualDepth, EqualStencilFunc, EquirectangularReflectionMapping, EquirectangularRefractionMapping, Euler, EventDispatcher, ExtrudeBufferGeometry, ExtrudeGeometry, FileLoader, Float16BufferAttribute, Float32BufferAttribute, Float64BufferAttribute, FloatType, Fog, FogExp2, FramebufferTexture, FrontSide, Frustum, GLBufferAttribute, GLSL1, GLSL3, GreaterDepth, GreaterEqualDepth, GreaterEqualStencilFunc, GreaterStencilFunc, GridHelper, Group, HalfFloatType, HemisphereLight, HemisphereLightHelper, HemisphereLightProbe, IcosahedronBufferGeometry, IcosahedronGeometry, ImageBitmapLoader, ImageLoader, ImageUtils, ImmediateRenderObject, IncrementStencilOp, IncrementWrapStencilOp, InstancedBufferAttribute, InstancedBufferGeometry, InstancedInterleavedBuffer, InstancedMesh, Int16BufferAttribute, Int32BufferAttribute, Int8BufferAttribute, IntType, InterleavedBuffer, InterleavedBufferAttribute, Interpolant, InterpolateDiscrete, InterpolateLinear, InterpolateSmooth, InvertStencilOp, KeepStencilOp, KeyframeTrack, LOD, LatheBufferGeometry, LatheGeometry, Layers, LessDepth, LessEqualDepth, LessEqualStencilFunc, LessStencilFunc, Light, LightProbe, Line, Line3, LineBasicMaterial, LineCurve, LineCurve3, LineDashedMaterial, LineLoop, LineSegments, LinearEncoding, LinearFilter, LinearInterpolant, LinearMipMapLinearFilter, LinearMipMapNearestFilter, LinearMipmapLinearFilter, LinearMipmapNearestFilter, LinearSRGBColorSpace, LinearToneMapping, Loader, LoaderUtils, LoadingManager, LoopOnce, LoopPingPong, LoopRepeat, LuminanceAlphaFormat, LuminanceFormat, MOUSE, Material, MaterialLoader, MathUtils, Matrix3, Matrix4, MaxEquation, Mesh, MeshBasicMaterial, MeshDepthMaterial, MeshDistanceMaterial, MeshLambertMaterial, MeshMatcapMaterial, MeshNormalMaterial, MeshPhongMaterial, MeshPhysicalMaterial, MeshStandardMaterial, MeshToonMaterial, MinEquation, MirroredRepeatWrapping, MixOperation, MultiplyBlending, MultiplyOperation, NearestFilter, NearestMipMapLinearFilter, NearestMipMapNearestFilter, NearestMipmapLinearFilter, NearestMipmapNearestFilter, NeverDepth, NeverStencilFunc, NoBlending, NoColorSpace, NoToneMapping, NormalAnimationBlendMode, NormalBlending, NotEqualDepth, NotEqualStencilFunc, NumberKeyframeTrack, Object3D, ObjectLoader, ObjectSpaceNormalMap, OctahedronBufferGeometry, OctahedronGeometry, OneFactor, OneMinusDstAlphaFactor, OneMinusDstColorFactor, OneMinusSrcAlphaFactor, OneMinusSrcColorFactor, OrthographicCamera, PCFShadowMap, PCFSoftShadowMap, PMREMGenerator, Path, PerspectiveCamera, Plane, PlaneBufferGeometry, PlaneGeometry, PlaneHelper, PointLight, PointLightHelper, Points, PointsMaterial, PolarGridHelper, PolyhedronBufferGeometry, PolyhedronGeometry, PositionalAudio, PropertyBinding, PropertyMixer, QuadraticBezierCurve, QuadraticBezierCurve3, Quaternion, QuaternionKeyframeTrack, QuaternionLinearInterpolant, REVISION, RGBADepthPacking, RGBAFormat, RGBAIntegerFormat, RGBA_ASTC_10x10_Format, RGBA_ASTC_10x5_Format, RGBA_ASTC_10x6_Format, RGBA_ASTC_10x8_Format, RGBA_ASTC_12x10_Format, RGBA_ASTC_12x12_Format, RGBA_ASTC_4x4_Format, RGBA_ASTC_5x4_Format, RGBA_ASTC_5x5_Format, RGBA_ASTC_6x5_Format, RGBA_ASTC_6x6_Format, RGBA_ASTC_8x5_Format, RGBA_ASTC_8x6_Format, RGBA_ASTC_8x8_Format, RGBA_BPTC_Format, RGBA_ETC2_EAC_Format, RGBA_PVRTC_2BPPV1_Format, RGBA_PVRTC_4BPPV1_Format, RGBA_S3TC_DXT1_Format, RGBA_S3TC_DXT3_Format, RGBA_S3TC_DXT5_Format, RGBFormat, RGB_ETC1_Format, RGB_ETC2_Format, RGB_PVRTC_2BPPV1_Format, RGB_PVRTC_4BPPV1_Format, RGB_S3TC_DXT1_Format, RGFormat, RGIntegerFormat, RawShaderMaterial, Ray, Raycaster, RectAreaLight, RedFormat, RedIntegerFormat, ReinhardToneMapping, RepeatWrapping, ReplaceStencilOp, ReverseSubtractEquation, RingBufferGeometry, RingGeometry, SRGBColorSpace, Scene, ShaderChunk, ShaderLib, ShaderMaterial, ShadowMaterial, Shape, ShapeBufferGeometry, ShapeGeometry, ShapePath, ShapeUtils, ShortType, Skeleton, SkeletonHelper, SkinnedMesh, Source, Sphere, SphereBufferGeometry, SphereGeometry, Spherical, SphericalHarmonics3, SplineCurve, SpotLight, SpotLightHelper, Sprite, SpriteMaterial, SrcAlphaFactor, SrcAlphaSaturateFactor, SrcColorFactor, StaticCopyUsage, StaticDrawUsage, StaticReadUsage, StereoCamera, StreamCopyUsage, StreamDrawUsage, StreamReadUsage, StringKeyframeTrack, SubtractEquation, SubtractiveBlending, TOUCH, TangentSpaceNormalMap, TetrahedronBufferGeometry, TetrahedronGeometry, Texture, TextureLoader, TorusBufferGeometry, TorusGeometry, TorusKnotBufferGeometry, TorusKnotGeometry, Triangle, TriangleFanDrawMode, TriangleStripDrawMode, TrianglesDrawMode, TubeBufferGeometry, TubeGeometry, UVMapping, Uint16BufferAttribute, Uint32BufferAttribute, Uint8BufferAttribute, Uint8ClampedBufferAttribute, Uniform, UniformsGroup, UniformsLib, UniformsUtils, UnsignedByteType, UnsignedInt248Type, UnsignedIntType, UnsignedShort4444Type, UnsignedShort5551Type, UnsignedShortType, VSMShadowMap, Vector2, Vector3, Vector4, VectorKeyframeTrack, VideoTexture, WebGL1Renderer, WebGL3DRenderTarget, WebGLArrayRenderTarget, WebGLCubeRenderTarget, WebGLMultipleRenderTargets, WebGLMultisampleRenderTarget, WebGLRenderTarget, WebGLRenderer, WebGLUtils, WireframeGeometry, WrapAroundEnding, ZeroCurvatureEnding, ZeroFactor, ZeroSlopeEnding, ZeroStencilOp, _SRGBAFormat, sRGBEncoding };\n"],"names":["ReflectOwnKeys","events","exports","R","Reflect","ReflectApply","apply","target","receiver","args","Function","prototype","call","ownKeys","Object","getOwnPropertySymbols","getOwnPropertyNames","concat","NumberIsNaN","Number","isNaN","value","EventEmitter","init","this","once","emitter","name","Promise","resolve","reject","errorListener","err","removeListener","resolver","slice","arguments","eventTargetAgnosticAddListener","handler","flags","on","addErrorHandlerIfEventEmitter","_events","undefined","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","TypeError","_getMaxListeners","that","_addListener","type","prepend","m","existing","warning","create","newListener","emit","unshift","push","length","warned","w","Error","String","count","console","warn","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","bind","_listeners","unwrap","evlistener","arr","ret","Array","i","unwrapListeners","arrayClone","listenerCount","n","copy","addEventListener","wrapListener","arg","removeEventListener","defineProperty","enumerable","get","set","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","error","er","message","context","len","listeners","addListener","prependListener","prependOnceListener","list","position","originalListener","shift","index","pop","spliceOne","off","removeAllListeners","key","keys","rawListeners","eventNames","EventEmitter$1","createURL","base64","sourcemapArg","enableUnicodeArg","sourcemap","source","enableUnicode","binaryString","atob","binaryView","Uint8Array","charCodeAt","fromCharCode","Uint16Array","buffer","decodeBase64","start","indexOf","body","substring","blob","Blob","URL","createObjectURL","WorkerFactory","url","options","Worker","createBase64WorkerFactory","CannonWorkerAPI","_EventEmitter$","_inherits","_super","_createSuper","_ref","_this","_classCallCheck","_ref$allowSleep","allowSleep","_ref$axisIndex","axisIndex","_ref$broadphase","broadphase","_ref$defaultContactMa","defaultContactMaterial","contactEquationStiffness","_ref$frictionGravity","frictionGravity","_ref$gravity","gravity","_ref$iterations","iterations","_ref$quatNormalizeFas","quatNormalizeFast","_ref$quatNormalizeSki","quatNormalizeSkip","_ref$size","size","_ref$solver","solver","_ref$tolerance","tolerance","messageQueue","worker","config","buffers","positions","Float32Array","quaternions","_createClass","postMessage","op","props","_ref2","uuid","_ref3","_ref3$props","_slicedToArray","refA","refB","optns","_ref4","_ref5","_ref6","_ref6$props","chassisBodyUUID","wheelUUIDs","wheelInfos","indexForwardAxis","indexRightAxis","indexUpAxis","_ref7","_ref7$props","_ref8","_ref9","_ref10","_ref11","_ref12","_ref13","_this2","onmessage","data","_step","_iterator","_createForOfIteratorHelper","s","done","e","f","_ref14","_ref15","_ref16","_ref17","_this$config","_ref18","_ref19","_ref20","_ref21","_ref22","_ref23","_ref24","_ref25","_ref26","_ref27","_ref28","_ref29","_ref30","_ref31","_ref32","_ref33","_ref34","_ref35","_ref36","_ref37","_ref38","_ref39","_ref40","_ref40$props","x","y","z","_ref41","_ref42","_ref43","_ref44","_ref45","_ref46","_ref47","_ref48","_ref49","_ref50","_ref51","_this$worker","_this$buffers","byteLength","_ref52","_ref52$props","id","_this$worker2","terminate","_ref53","_ref54","Mat3$1","elements","vector","Vec3$1","v","matrix","A","B","T","a11","a12","a13","a21","a22","a23","a31","a32","a33","b11","b12","b13","b21","b22","b23","b31","b32","b33","t","b","j","eqns","nr","np","p","k","multiplier","Infinity","toString","row","column","r","reverse_eqns$1","q","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","tmp","M","vx","vy","vz","Math","sqrt","invN","ninv","dot","px","py","pz","scalar","t1","t2","norm","Vec3_tangents_n$1","inorm","randVec","Vec3_tangents_randVec$1","abs","cross","precision","negate","antip_neg$1","almostEquals","ZERO","UNIT_X","UNIT_Y","UNIT_Z","AABB$1","lowerBound","upperBound","points","quaternion","skinSize","l","u","vmult","tmp$1$1","vadd","aabb","min","max","l1","u1","l2","u2","overlapsX","overlapsY","overlapsZ","a","c","d","g","h","frame","corners","transformIntoFrame_corners$1","getCorners","corner","pointToLocal","setFromPoints","pointToWorld","ray","direction","from","dirFracX","dirFracY","dirFracZ","t3","t4","t5","t6","tmin","tmax","EventTarget","includes","splice","event","listenerArray","Quaternion$1","angle","sin","cos","targetAxis","normalize","acos","isAntiparallelTo","sfv_t1$1","sfv_t2$1","tangents","setFromAxisAngle","PI","pow","quat","ax","ay","az","aw","bx","by","bz","bw","conjugate","inorm2","qx","qy","qz","qw","ix","iy","iz","iw","order","heading","attitude","bank","test","atan2","sqx","sqy","sqz","asin","c1","c2","c3","s1","s2","s3","toQuat","omega","cosom","sinom","scale0","scale1","angularVelocity","dt","angularFactor","half_dt","Shape$1","idCounter","boundingSphereRadius","collisionResponse","collisionFilterGroup","collisionFilterMask","material","mass","pos","types","SPHERE","PLANE","BOX","COMPOUND","CONVEXPOLYHEDRON","HEIGHTFIELD","PARTICLE","CYLINDER","TRIMESH","Transform$1","worldPoint","result","pointToLocalFrame","localPoint","pointToWorldFrame","localVector","vsub","tmpQuat$1$1","worldVector","ConvexPolyhedron","_Shape$","_super2","_this3","_props","_props$vertices","vertices","_props$faces","faces","_props$normals","normals","axes","faceNormals","computeNormals","updateBoundingSphereRadius","worldVertices","worldVerticesNeedsUpdate","worldFaceNormals","worldFaceNormalsNeedsUpdate","uniqueAxes","uniqueEdges","computeEdges","edges","edge","face","numVertices","found","clone","getFaceNormal","vertex","va","vb","vc","computeNormal","posA","quatA","hullB","posB","quatB","separatingNormal","minDist","maxDist","WorldNormal","closestFaceB","dmax","MAX_VALUE","worldVertsB1","worldb","clipFaceAgainstHull","faceListA","faceListB","faceANormalWS3","Worldnormal1","deltaC","worldEdge0","worldEdge1","Cross","dmin","hullA","testSepAxis","numFacesA","fi","numFacesB","e0","e1","almostZero","dist","axis","project","maxminA","maxminB","maxA","minA","maxB","minB","d0","d1","aabbmax","aabbmin","computeLocalAABB","face_i","faceANormalWS","edge0","WorldEdge0","worldPlaneAnormal1","planeNormalWS1","worldA1","localPlaneNormal","planeNormalWS","pVtxIn","pVtxOut","closestFaceA","polyA","connectedFaces","numVerticesA","otherFace","localPlaneEq","getPlaneConstantOfFace","planeEqWS","clipFaceAgainstPlane","depth","log","point","normal","inVertices","outVertices","planeNormal","planeConstant","n_dot_first","n_dot_last","numVerts","firstVertex","lastVertex","vi","newv","lerp","verts","worldVerts","N","worldNormals","max2","norm2","lengthSquared","minx","miny","minz","maxx","maxy","maxz","tempWorldVertex","scale","offset","pointInside","getAveragePointLocal","vToP","r1","vToPointInside","r2","cb","ab","isZero","shape","localAxis","project_localAxis","localOrigin","project_localOrigin","vs","setZero","vectorToLocalFrame","add","val","temp","Box","_Shape$2","_super3","halfExtents","_this4","convexPolyhedronRepresentation","updateConvexPolyhedronRepresentation","sx","sy","sz","V","calculateInertia","sixTargetVectors","sides","ex","callback","worldCornerTempPos","worldCornersTemp","wc","BODY_TYPES","BODY_SLEEP_STATES","Body","_EventTarget","_super4","_this5","world","vlambda","previousPosition","interpolatedPosition","initPosition","velocity","initVelocity","force","invMass","linearDamping","STATIC","DYNAMIC","sleepState","AWAKE","sleepSpeedLimit","sleepTimeLimit","timeLastSleepy","wakeUpAfterNarrowphase","torque","initQuaternion","previousQuaternion","interpolatedQuaternion","initAngularVelocity","shapes","shapeOffsets","shapeOrientations","inertia","invInertia","invInertiaWorld","invMassSolve","invInertiaSolve","invInertiaWorldSolve","fixedRotation","angularDamping","linearFactor","aabbNeedsUpdate","boundingRadius","wlambda","isTrigger","Boolean","addShape","updateMassProperties","prevState","SLEEPING","dispatchEvent","wakeupEvent","time","speedSquared","speedLimitSquared","SLEEPY","sleepyEvent","wakeUp","sleep","sleepEvent","KINEMATIC","_offset","_orientation","orientation","updateBoundingRadius","radius","tmpVec","tmpQuat","bodyQuat","shapeAABB","updateAABB_shapeAABB","mult","calculateWorldAABB","extend","I","m1","uiw_m1","m2","uiw_m2","setRotationFromQuaternion","transpose","mmult","relativePoint","rotForce","Body_applyForce_rotForce","localForce","worldForce","Body_applyLocalForce_worldForce","relativePointWorld","Body_applyLocalForce_relativePointWorld","vectorToWorldFrame","applyForce","impulse","velo","Body_applyImpulse_velo","rotVelo","Body_applyImpulse_rotVelo","localImpulse","worldImpulse","Body_applyLocalImpulse_worldImpulse","Body_applyLocalImpulse_relativePoint","applyImpulse","Body_updateMassProperties_halfExtents","fixed","updateAABB","updateInertiaWorld","quatNormalize","angularVelo","iMdt","tx","ty","tz","integrate","normalizeFast","COLLIDE_EVENT_NAME","RaycastResult$1","rayFromWorld","rayToWorld","hitNormalWorld","hitPointWorld","hasHit","hitFaceIndex","distance","shouldStop","RAY_MODES$1","Ray$1","_Shape$types$SPHERE$","_Shape$types$PLANE$","_Shape$types$BOX$","_Shape$types$CYLINDER2","_Shape$types$CONVEXPO2","_Shape$types$HEIGHTFI2","_Shape$types$TRIMESH$","to","checkCollisionResponse","skipBackfaces","mode","ANY","_intersectSphere","_intersectPlane","_intersectBox","_intersectConvex","_intersectHeightfield","_intersectTrimesh","reset","updateDirection","getAABB","tmpAABB$1$1","tmpArray$1","aabbQuery","intersectBodies","xi","intersectBody_xi$1","qi","intersectBody_qi$1","intersectShape","bodies","intersectBody","v0$1","intersect$1","distanceTo","distanceFromIntersection$1","intersectMethod","box","reportedShape","worldNormal","planeToFrom","n_dot_dir","planePointToFrom","dir_scaled_with_t","reportIntersection","elementSize","localRay","intersectHeightfield_localRay$1","iMinX","iMinY","iMaxX","iMaxY","intersectHeightfield_index$1","getIndexOfPosition","getAabbAtIndex","overlapsRay","getConvexTrianglePillar","pillarOffset","worldPillarOffset$1","pillarConvex","intersectConvexOptions$1","sphere","delta","intersectionPoint","Ray_intersectSphere_intersectionPoint$1","Ray_intersectSphere_normal$1","d2","intersectConvex_normal$1","intersectConvex_vector$1","faceList","fromToDistance","Nfaces","faceNormal","intersectPoint$1","a$1","b$1","c$1","pointInTriangle","mesh","intersectTrimesh_normal$1","triangles","intersectTrimesh_triangles$1","treeTransform","intersectTrimesh_treeTransform$1","localDirection","intersectTrimesh_localDirection$1","localFrom","intersectTrimesh_localFrom$1","localTo","intersectTrimesh_localTo$1","worldIntersectPoint","intersectTrimesh_worldIntersectPoint$1","intersectTrimesh_worldNormal$1","indices","fromToDistanceSquared","distanceSquared","tree","rayQuery","trianglesIndex","getNormal","getVertex","squaredDistance","ALL","CLOSEST","v1$1","v2$1","dot00","dot01","dot02","dot11","dot12","Material","friction","restitution","performance$1","globalThis","performance","now","nowOffset","Date","timing","navigationStart","Mat3","Vec3","reverse_eqns","Vec3_tangents_n","Vec3_tangents_randVec","antip_neg","AABB","tmp$1","transformIntoFrame_corners","Quaternion","sfv_t1","sfv_t2","Shape","Transform","tmpQuat$1","RaycastResult","RAY_MODES","Ray","_Shape$types$SPHERE2","_Shape$types$PLANE2","_Shape$types$BOX2","_Shape$types$CYLINDER3","_Shape$types$CONVEXPO3","_Shape$types$HEIGHTFI3","_Shape$types$TRIMESH2","tmpAABB$1","tmpArray","intersectBody_xi","intersectBody_qi","v0","intersect","distanceFromIntersection","intersectHeightfield_localRay","intersectHeightfield_index","worldPillarOffset","intersectConvexOptions","Ray_intersectSphere_intersectionPoint","Ray_intersectSphere_normal","intersectConvex_normal","intersectConvex_vector","intersectPoint","intersectTrimesh_normal","intersectTrimesh_triangles","intersectTrimesh_treeTransform","intersectTrimesh_localDirection","intersectTrimesh_localFrom","intersectTrimesh_localTo","intersectTrimesh_worldIntersectPoint","intersectTrimesh_worldNormal","v1","v2","debugContext","createContext","useDebugContext","useContext","physicsContext","usePhysicsContext","Quaternion$2","Vector3","Matrix4","Object3D","useForwardedRef","ref","nullRef","useRef","capitalize","str","charAt","toUpperCase","getUUID","suffix","current","Euler","q$1","quaternionToRotation","setFromQuaternion","fromArray","toArray","incrementingId","subscribe","subscriptions","_defineProperty","unsubscribe","prepare","object","_object$position","_object$rotation","_ref$position","_ref$rotation","rotation","_ref$userData","userData","_toConsumableArray","updateMatrix","setupCollision","onCollide","onCollideBegin","onCollideEnd","collide","collideBegin","collideEnd","useBody","fn","argsFn","fwdRef","deps","_usePhysicsContext2","refs","scaleOverrides","debugApi","useLayoutEffect","currentWorker","objectCount","InstancedMesh","instanceMatrix","setUsage","DynamicDrawUsage","fill","map","_","setMatrixAt","needsUpdate","_objectSpread","addBodies","serializableProps","_objectWithoutProperties","_excluded3","forEach","remove","removeBodies","api","useMemo","makeAtomic","makeQuaternion","setQuaternion","makeRotation","setRotation","makeVec","makeApi","applyLocalForce","applyLocalImpulse","applyTorque","scaleOverride","_construct","cache","at","usePlane","useBox","defaultBoxArgs","useTrimesh","useCompoundBody","isString","useRaycastVehicle","_usePhysicsContext6","_fn","chassisBody","_fn$indexForwardAxis","_fn$indexRightAxis","_fn$indexUpAxis","wheels","every","addRaycastVehicle","removeRaycastVehicle","applyEngineForce","wheelIndex","applyRaycastVehicleEngineForce","setBrake","brake","setRaycastVehicleBrake","setSteeringValue","setRaycastVehicleSteeringValue","sliding","compose","matrixAutoUpdate","identity","PhysicsProvider","_ref$allowSleep2","_ref$axisIndex2","_ref$broadphase2","children","_ref$defaultContactMa2","_ref$frictionGravity2","_ref$gravity2","_ref$isPaused","isPaused","_ref$iterations2","_ref$maxSubSteps","maxSubSteps","_ref$quatNormalizeFas2","_ref$quatNormalizeSki2","_ref$shouldInvalidate","shouldInvalidate","_ref$size2","_ref$solver2","_ref$stepSize","stepSize","_ref$tolerance2","invalidate","useThree","_useState11","useState","_useState12$","timeSinceLastCalled","loop","useCallback","step","collideHandler","_events$target","_ref2$contact","contact","bi","bj","contactRest","_excluded4","rest","_excluded5","collideBeginHandler","_events$bodyA","_events$bodyB","bodyA","bodyB","cbA","cbB","collideEndHandler","_events$bodyA2","_events$bodyB2","frameHandler","active","_ref5$bodies","uuids","observations","_ref60","_i14","_Object$values","values","rayhitHandler","_events$uuid","_ref7$ray","rayRest","_excluded6","_excluded7","rayhit","useFrame","useEffect","connect","jsx","Provider","RGBELoader","_DataTextureLoader","manager","HalfFloatType","rgbe_error","rgbe_error_code","msg","fgets","buffer2","lineLimit","consume","chunk","subarray","RGBEByteToRGBFloat","sourceArray","sourceOffset","destArray","destOffset","RGBEByteToRGBHalf","DataUtils","toHalfFloat","byteArray","rgbe_header_info","line","match","gamma_re","exposure_re","format_re","dimensions_re","header","valid","string","comments","programtype","format","gamma","exposure","width","height","parseFloat","parseInt","RGBE_ReadHeader","image_rgba_data","scanline_width","data_rgba","ptr_end","rgbeStart","scanline_buffer","num_scanlines","ptr","isEncodedRun","byteValue","RGBE_ReadPixels_RLE","numElements","FloatType","floatArray","halfArray","onLoad","onProgress","onError","_get","_getPrototypeOf","texture","texData","colorSpace","encoding","minFilter","LinearFilter","magFilter","generateMipmaps","flipY","DataTextureLoader","GroundProjectedEnv","_Mesh","_a","_b","def","isCubeMap","isCubeTexture","cubeSize","image","_lodMax","floor","log2","_cubeSize","fragmentShader","join","REVISION","replace","uniforms","geometry","IcosahedronGeometry","ShaderMaterial","vertexShader","side","DoubleSide","Mesh","presetsObj","sunset","dawn","night","warehouse","forest","apartment","studio","city","park","lobby","CUBEMAP_ROOT","resolveScene","scene","obj","isScene","EnvironmentMap","_ref$background","background","defaultScene","React","oldbg","oldenv","environment","useEnvironment","_ref2$files","files","_ref2$path","path","_ref2$preset","preset","_ref2$encoding","extensions","isArray","loader","CubeTextureLoader","loaderResult","useLoader","setPath","mapping","CubeReflectionMapping","EquirectangularReflectionMapping","sRGBEncoding","LinearEncoding","EnvironmentCube","_ref3$background","_excluded","EnvironmentPortal","_ref4$near","near","_ref4$far","far","_ref4$resolution","resolution","_ref4$frames","frames","_ref4$background","_ref4$preset","gl","camera","_React$useState","Scene","virtualScene","fbo","WebGLCubeRenderTarget","update","createPortal","EnvironmentGround","_props$ground","_props$ground2","_scale","_props$ground3","textureDefault","GroundProjectedEnvImpl","ground","_extends","Environment","ConvolutionMaterial","_ShaderMaterial","texelSize","Vector2","inputBuffer","Uniform","depthBuffer","halfTexelSize","kernel","cameraNear","cameraFar","minDepthThreshold","maxDepthThreshold","depthScale","depthToBlurRatioBias","blending","NoBlending","depthWrite","depthTest","toneMapped","setTexelSize","multiplyScalar","BlurPass","_ref$width","_ref$height","_ref$minDepthThreshol","_ref$maxDepthThreshol","_ref$depthScale","_ref$depthToBlurRatio","renderToScreen","renderTargetA","WebGLRenderTarget","stencilBuffer","outputEncoding","renderTargetB","convolutionMaterial","setResolution","Camera","defines","USE_DEPTH","uvs","BufferGeometry","setAttribute","BufferAttribute","screen","frustumCulled","renderer","outputBuffer","depthTexture","destRT","lastRT","setRenderTarget","render","MeshReflectorMaterial","_MeshStandardMaterial","parameters","_tDepth","_distortionMap","_tDiffuse","_tDiffuseBlur","_textureMatrix","_hasBlur","_mirror","_mixBlur","_blurStrength","_minDepthThreshold","_maxDepthThreshold","_depthScale","_depthToBlurRatioBias","_distortion","_mixContrast","setValues","shader","_shader$defines","USE_UV","hasBlur","tDiffuse","tDepth","distortionMap","tDiffuseBlur","textureMatrix","mirror","mixBlur","mixStrength","distortion","mixContrast","MeshStandardMaterial","MeshReflectorMaterialImpl","MeshReflectorMaterial$1","_ref$mixBlur","_ref$mixStrength","_ref$resolution","_ref$blur","blur","_ref$mirror","_ref$distortion","_ref$mixContrast","_ref$reflectorOffset","reflectorOffset","materialRef","Plane","reflectorPlane","_React$useState3","_React$useState5","reflectorWorldPosition","_React$useState7","cameraWorldPosition","_React$useState9","rotationMatrix","_React$useState11","lookAtPosition","_React$useState13","Vector4","clipPlane","_React$useState15","view","_React$useState17","_React$useState19","_React$useState21","_React$useState23","PerspectiveCamera","virtualCamera","beforeRender","_materialRef$current","parent","__r3f","setFromMatrixPosition","matrixWorld","extractRotation","applyMatrix4","addScaledVector","subVectors","reflect","up","lookAt","updateMatrixWorld","projectionMatrix","multiply","matrixWorldInverse","setFromNormalAndCoplanarPoint","constant","sign","_React$useMemo","fbo1","DepthTexture","DepthFormat","UnsignedShortType","fbo2","_React$useMemo2","blurpass","reflectorProps","_materialRef$current2","visible","currentXrEnabled","xr","enabled","currentShadowAutoUpdate","shadowMap","autoUpdate","setMask","autoClear","clear","attach","mergeRefs","__defProp","__publicField","configurable","writable","__defNormalProp","moduloWrapAround","capacity","OrbitControls","_EventDispatcher","domElement","_assertThisInitialized","LEFT","UP","RIGHT","BOTTOM","MOUSE","ROTATE","MIDDLE","DOLLY","PAN","ONE","TOUCH","TWO","DOLLY_PAN","target0","position0","zoom0","zoom","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","setPolarAngle","currentPhi","phiDist","sphericalDelta","scope","setAzimuthalAngle","currentTheta","thetaDist","getDistance","listenToKeyEvents","domElement2","onKeyDown","_domElementKeyEvents","stopListenToKeyEvents","saveState","updateProjectionMatrix","changeEvent","STATE","NONE","setFromUnitVectors","quatInverse","invert","lastPosition","lastQuaternion","twoPI","sub","applyQuaternion","setFromVector3","autoRotate","rotateLeft","autoRotateSpeed","enableDamping","dampingFactor","minAzimuthAngle","maxAzimuthAngle","isFinite","minPolarAngle","maxPolarAngle","makeSafe","minDistance","maxDistance","panOffset","setFromSpherical","zoomChanged","distanceToSquared","EPS","document","style","touchAction","onContextMenu","onPointerDown","onPointerCancel","onMouseWheel","dispose","_c","_d","_e","_f","ownerDocument","onPointerMove","onPointerUp","startEvent","endEvent","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","Spherical","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","pointers","pointerPositions","getZoomScale","zoomSpeed","reverseOrbit","reverseHorizontalOrbit","rotateUp","reverseVerticalOrbit","panLeft","objectMatrix","setFromMatrixColumn","panUp","screenSpacePanning","crossVectors","pan","deltaX","deltaY","element","isPerspectiveCamera","targetDistance","tan","fov","clientHeight","OrthographicCamera","isOrthographicCamera","right","left","clientWidth","top","bottom","enablePan","dollyOut","dollyScale","minZoom","maxZoom","enableZoom","dollyIn","handleMouseDownRotate","clientX","clientY","handleMouseDownPan","handleTouchStartRotate","pageX","pageY","handleTouchStartPan","handleTouchStartDolly","dx","dy","handleTouchMoveRotate","getSecondPointerPosition","rotateSpeed","handleTouchMovePan","panSpeed","handleTouchMoveDolly","addPointer","pointerType","trackPointer","touches","enableRotate","DOLLY_ROTATE","onTouchStart","mouseAction","button","mouseButtons","handleMouseDownDolly","ctrlKey","metaKey","shiftKey","onMouseDown","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","onTouchMove","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","onMouseMove","removePointer","releasePointerCapture","pointerId","preventDefault","handleMouseWheel","code","keyPanSpeed","handleKeyDown","pointer","EventDispatcher","makeDefault","regress","_ref$enableDamping","onChange","onStart","onEnd","restProps","defaultCamera","explCamera","explDomElement","connected","controls","OrbitControls$1","old","cameraRef","manual","aspect","oldCam","createStore","createState","Set","setState","partial","nextState","previousState","assign","getState","selector","equalityFn","is","currentSlice","listenerToAdd","nextSlice","previousSlice","delete","subscribeWithSelector","destroy","useIsomorphicLayoutEffect","window","navigator","userAgent","useStore","newStateSlice","_useReducer","useReducer","forceUpdate","stateRef","selectorRef","equalityFnRef","erroredRef","currentSliceRef","hasNewStateSlice","stateBeforeSubscriptionRef","nextStateSlice","sliceToReturn","useDebugValue","Symbol","iterator","items","next","shallowEqualArrays","arrA","arrB","equal","globalCache","query","preload","_i","_globalCache","entry","hasOwnProperty","response","promise","then","lifespan","setTimeout","catch","_window$document","_window$navigator","suspend","isRef","createElement","product","useMutableCallback","Block","ErrorBoundary","_React$Component","_len","_key","getDerivedStateFromError","DEFAULT","isDiffSet","memoized","changes","calculateDpr","dpr","devicePixelRatio","getRootState","_r3f","root","fun","num","boo","und","equ","_ref2$arrays","arrays","_ref2$objects","objects","_ref2$strict","strict","isObj","isArr","buildGraph","nodes","materials","traverse","instance","primitive","previousAttach","memoizedProps","eventCount","handlers","entries","split","last","reduce","acc","INDEX_REGEX","child","_resolve","_resolve2","detach","_child$__r3f","_child$__r3f2","_resolve3","previous","diffProps","_instance$__r3f","_excluded2","localState","previousKeys","_instance$__r3f2","prop","startsWith","applyProps$1","_instance$__r3f3","_root$getState","_instance$__r3f4","rootState","prevHandlers","_memoized$args","_changes$_i","isEvent","currentInstance","targetProp","_keys$reverse","reverse","_keys$reverse2","arrayWithHoles","iterableToArray","unsupportedIterableToArray","nonIterableRest","constructor","_currentInstance$__r","defaultClassCall","THREE","_targetProp","isColor","setScalar","mask","linear","invalidateInstance","internal","raycast","interaction","updateInstance","_instance$__r3f5","_instance$__r3f5$root","onUpdate","updateCamera","makeId","eventObject","instanceId","releaseInternalPointerCapture","capturedMap","captures","captureData","createEvents","store","filterPointerEvents","filter","some","cancelPointer","intersections","_step4","_iterator4","hovered","_loop2","hoveredObj","find","hit","onPointerOut","onPointerLeave","pointerMissed","onPointerMissed","handlePointer","has","_store$getState5","lastEvent","isPointerMove","isClickEvent","hits","duplicates","eventsObjects","raycaster","previousRoot","compute","flatMap","_state$previousRoot","intersectObject","sort","aState","bState","priority","item","_r3f2","_step2","_iterator2","intersection","offsetX","initialClick","offsetY","round","calculateDistance","initialHits","_step3","stopped","_iterator3","_loop","unprojectedPoint","unproject","hasPointerCapture","_internal$capturedMap","_internal$capturedMap2","setPointerCapture","Map","extractEventProps","property","raycastEvent","stopPropagation","capturesForPointer","higher","currentTarget","nativeEvent","handleIntersects","onPointerOver","onPointerEnter","hoveredItem","catalogue","privateKeys","isRenderer","advance","defaultTarget","tempTarget","getCurrentViewport","getWorldPosition","factor","performanceTimeout","setPerformanceCurrent","timestamp","runGlobalEffects","legacy","flat","clock","mouse","frameloop","debounce","clearTimeout","updateStyle","viewport","initialDpr","setEvents","setSize","setDpr","resolved","setFrameloop","stop","elapsedTime","subscribers","oldSize","oldDpr","oldCamera","_rootState$getState","setPixelRatio","subscription","globalEffects","globalAfterEffects","globalTailEffects","run","effects","_step6","_iterator6","flushGlobalEffects","render$1","getDelta","oldTime","renderPriority","loadingFn","Proto","_len2","input","_key3","all","res","load","results","roots","_createLoop","repeat","running","requestAnimationFrame","_step7","_iterator7","_state$gl$xr","isPresenting","cancelAnimationFrame","_state$gl$xr2","_step8","_iterator8","createLoop","_createRenderer","_roots","_getEventPriority","createInstance","_ref8$args","appendChild","parentInstance","_parentInstance$__r3f","added","isObject3D","insertBefore","beforeChild","_parentInstance$__r3f2","restSiblings","sibling","removeRecursive","array","removeChild","_parentInstance$__r3f3","_child$__r3f3","_child$__r3f5","_child$__r3f4","o","removeInteractivity","_child$__r3f6","isPrimitive","shouldDispose","unstable_scheduleCallback","unstable_IdlePriority","handleTextInstance","reconciler","Reconciler","appendInitialChild","supportsMutation","isPrimaryRenderer","supportsPersistence","supportsHydration","noTimeout","appendChildToContainer","container","removeChildFromContainer","insertInContainerBefore","getRootHostContext","getChildHostContext","parentHostContext","finalizeInitialChildren","prepareUpdate","_type","oldProps","newProps","_newProps$args","argsNew","restNew","_oldProps$args","argsOld","restOld","diff","commitUpdate","_oldProps","fiber","reconstruct","newInstance","_step5","_iterator5","alternate","stateNode","switchInstance","commitMount","_int","getPublicInstance","prepareForCommit","preparePortalMount","resetAfterCommit","shouldSetTextContent","clearContainer","hideInstance","unhideInstance","createTextInstance","hideTextInstance","unhideTextInstance","getCurrentEventPriority","DefaultEventPriority","beforeActiveInstanceBlur","afterActiveInstanceBlur","detachDeletedInstance","scheduleTimeout","cancelTimeout","applyProps","createRenderer","_globalScope$event","globalScope","self","DiscreteEventPriority","ContinuousEventPriority","shallowLoose","createRendererInstance","canvas","customRenderer","powerPreference","antialias","alpha","computeInitialSize","defaultSize","HTMLCanvasElement","parentElement","_canvas$parentElement","getBoundingClientRect","createRoot","prevRoot","prevFiber","prevStore","onCreated","logRecoverableError","reportError","createContainer","ConcurrentRoot","configured","configure","glConfig","propsSize","onCreatedCallback","_props$shadows","shadows","_props$linear","_props$flat","_props$legacy","_props$orthographic","orthographic","_props$frameloop","_props$dpr","raycastOptions","cameraOptions","params","isCamera","handleXRFrame","handleSessionChange","setAnimationLoop","disconnect","isBoolean","setDeep","toneMapping","updateContainer","rootElement","unmount","unmountComponentAtNode","_state$gl","_state$gl$renderLists","_state$gl2","_state$gl3","renderLists","forceContextLoss","Portal","_ref15$state","inject","injectState","usePortalStore","unsub","prev","injectIntoDevTools","bundleType","rendererPackageName","version","useMeasure","_temp","scroll","offsetSize","polyfill","ResizeObserver","_useState","_useState2","bounds","scrollContainers","resizeObserver","lastBounds","scrollDebounce","resizeDebounce","resize","mounted","_useMemo","_state$current$elemen","HTMLElement","offsetHeight","offsetWidth","freeze","areBoundsEqual","createDebounce","_useMemo2","forceRefresh","resizeChange","scrollChange","removeListeners","addListeners","observe","scrollContainer","capture","passive","onScroll","onWindowResize","node","findScrollContainers","_window$getComputedSt","getComputedStyle","overflow","overflowX","overflowY","traverseFiber","ascending","return","wrapContext","defineProperties","_currentRenderer","_currentRenderer2","FiberContext","FiberProvider","_reactInternals","_React$__SECRET_INTER","ReactCurrentOwner","ReactCurrentDispatcher","useFiber","_arr","maybeFiber","fiber2","memoizedState","useContextBridge","contextMap","_context","readContext","useContextMap","Prev","__spreadValues","DOM_EVENTS","onClick","onDoubleClick","onWheel","onLostPointerCapture","createPointerEvents","setFromCamera","_events$handlers","_store$getState","_DOM_EVENTS$name","eventName","_events$handlers2","_store$getState2","CanvasImpl","forwardedRef","fallback","_ref5$events","eventSource","eventPrefix","Bridge","_useMeasure","_useMeasure2","containerRef","containerRect","canvasRef","divRef","_React$useState2","setCanvas","handlePointerMissed","_React$useState4","block","setBlock","_React$useState6","setError","pointerEvents","display","Canvas","func","wait","immediate","timeout","later","debounced","callNow","flush","module","$$$hostConfig","aa","require","ba","ca","encodeURIComponent","ea","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","fa","for","ha","ia","ja","ka","la","ma","na","oa","pa","qa","ra","sa","ta","ua","displayName","$$typeof","_payload","_init","xa","tag","ya","za","Aa","Ba","Ca","Da","$b","Ea","Fa","Ga","Ha","Ia","Ja","Ka","La","Ma","Na","Oa","Pa","Qa","Ra","Sa","Ta","Ua","Va","Wa","getInstanceFromNode","Xa","Ya","Za","$a","supportsMicrotasks","scheduleMicrotask","bb","supportsTestSelectors","findFiberRoot","db","getBoundingRect","eb","getTextContent","fb","isHiddenSubtree","gb","matchAccessibilityRole","hb","setFocusIfFocusable","ib","setupIntersectionObserver","jb","kb","lb","commitTextUpdate","mb","nb","ob","pb","qb","rb","sb","resetTextContent","tb","ub","wb","xb","yb","cloneInstance","zb","createContainerChildSet","Ab","appendChildToContainerChildSet","Bb","finalizeContainerChildren","Cb","replaceContainerChildren","Db","cloneHiddenInstance","Eb","cloneHiddenTextInstance","Fb","canHydrateInstance","Gb","canHydrateTextInstance","Hb","canHydrateSuspenseInstance","Ib","isSuspenseInstancePending","Jb","isSuspenseInstanceFallback","Kb","registerSuspenseInstanceRetry","Lb","getNextHydratableSibling","Mb","getFirstHydratableChild","Nb","getFirstHydratableChildWithinContainer","Ob","getFirstHydratableChildWithinSuspenseInstance","Pb","hydrateInstance","Qb","hydrateTextInstance","Rb","hydrateSuspenseInstance","Sb","getNextHydratableInstanceAfterSuspenseInstance","Tb","commitHydratedContainer","Ub","commitHydratedSuspenseInstance","Vb","clearSuspenseBoundary","Wb","clearSuspenseBoundaryFromContainer","Xb","shouldDeleteUnhydratedTailInstances","Yb","didNotMatchHydratedContainerTextInstance","Zb","didNotMatchHydratedTextInstance","ac","stack","trim","bc","cc","prepareStackTrace","construct","dc","ec","fc","gc","hc","ic","jc","contextTypes","__reactInternalMemoizedUnmaskedChildContext","__reactInternalMemoizedMaskedChildContext","C","childContextTypes","kc","lc","mc","getChildContext","nc","__reactInternalMemoizedMergedChildContext","oc","qc","clz32","rc","sc","LN2","tc","uc","pendingLanes","suspendedLanes","pingedLanes","entangledLanes","entanglements","xc","zc","Ac","Bc","eventTimes","Dc","D","Ec","Fc","Gc","unstable_cancelCallback","Hc","unstable_shouldYield","Ic","unstable_requestPaint","E","unstable_now","Jc","unstable_ImmediatePriority","Kc","unstable_UserBlockingPriority","Lc","unstable_NormalPriority","Mc","Nc","Oc","Rc","Sc","Tc","Uc","Vc","Xc","Yc","ReactCurrentBatchConfig","Zc","$c","ad","defaultProps","bd","cd","dd","ed","fd","gd","_currentValue","_currentValue2","hd","childLanes","jd","dependencies","firstContext","lanes","kd","ld","memoizedValue","md","nd","od","updateQueue","baseState","firstBaseUpdate","lastBaseUpdate","shared","pending","interleaved","pd","qd","eventTime","lane","payload","rd","F","G","sd","td","ud","vd","wd","xd","Component","yd","Bd","isMounted","enqueueSetState","H","zd","Ad","enqueueReplaceState","enqueueForceUpdate","Cd","shouldComponentUpdate","isPureReactComponent","Dd","contextType","updater","Ed","componentWillReceiveProps","UNSAFE_componentWillReceiveProps","Fd","getDerivedStateFromProps","getSnapshotBeforeUpdate","UNSAFE_componentWillMount","componentWillMount","componentDidMount","Gd","Hd","Id","Jd","Kd","Ld","Md","Nd","Od","Pd","Qd","Rd","Sd","Td","Ud","Vd","Wd","Xd","Yd","elementType","deletions","Zd","pendingProps","dehydrated","treeContext","retryLane","$d","ae","be","ce","de","ee","fe","_owner","_stringRef","ge","he","ie","je","ke","le","containerInfo","implementation","me","ne","da","oe","pe","qe","re","se","te","ue","ve","we","xe","ye","J","ze","revealOrder","Ae","Be","_workInProgressVersionPrimary","_workInProgressVersionSecondary","Ce","De","Ee","K","L","Fe","Ge","He","Ie","O","Je","Ke","Le","Me","Ne","Oe","Pe","Qe","baseQueue","queue","Re","Se","Te","lastRenderedReducer","action","hasEagerState","eagerState","lastRenderedState","dispatch","Ue","Ve","We","Xe","Ye","getSnapshot","Ze","$e","af","lastEffect","stores","bf","cf","df","ef","ff","gf","hf","jf","kf","lf","mf","nf","of","pf","qf","transition","rf","sf","tf","uf","vf","wf","useImperativeHandle","useInsertionEffect","useDeferredValue","useTransition","useMutableSource","useSyncExternalStore","useId","unstable_isNewReconciler","identifierPrefix","xf","yf","Lf","Mf","Nf","Of","zf","WeakMap","Af","Bf","Cf","Df","componentDidCatch","Ef","componentStack","Ff","pingCache","Gf","Hf","If","Jf","Kf","subtreeFlags","Pf","pendingChildren","Qf","tailMode","tail","P","Rf","pendingContext","isDehydrated","Sf","Q","Tf","rendering","Uf","renderingStartTime","isBackwards","Vf","Wf","Xf","Yf","Zf","$f","ag","compare","bg","cg","dg","baseLanes","cachePool","eg","fg","gg","UNSAFE_componentWillUpdate","componentWillUpdate","componentDidUpdate","hg","ig","jg","kg","lg","mg","ng","og","pg","qg","rg","sg","tg","ug","vg","xg","yg","zg","Ag","WeakSet","S","Bg","Cg","Dg","Fg","Gg","Hg","Ig","onCommitFiberUnmount","componentWillUnmount","Jg","Kg","Lg","Mg","Ng","Og","Pg","Qg","Rg","Sg","Tg","Xg","Yg","Zg","$g","__reactInternalSnapshotBeforeUpdate","Wg","ah","bh","ch","dh","eh","fh","gh","hh","toLowerCase","ih","jh","kh","lh","ceil","mh","nh","U","W","X","oh","ph","qh","rh","Y","Vg","sh","Sh","th","uh","vh","wh","xh","yh","zh","Ah","Bh","Z","callbackNode","expirationTimes","expiredLanes","yc","callbackPriority","Wc","Ch","Dh","Eh","Fh","Gh","Hh","Ih","Jh","Kh","Lh","Mh","finishedWork","finishedLanes","Nh","timeoutHandle","Oh","Ph","wa","Qh","Rh","mutableReadLanes","Cc","Eg","Ug","onCommitFiberRoot","Pc","onRecoverableError","Th","onPostCommitFiberRoot","Uh","Vh","Xh","isReactComponent","Yh","mutableSourceEagerHydrationData","Zh","transitions","$h","ai","ci","di","ei","wg","Wh","attemptContinuousHydration","attemptHydrationAtCurrentPriority","attemptSynchronousHydration","batchedUpdates","createComponentSelector","createHasPseudoClassSelector","createHydrationContainer","createRoleSelector","createTestNameSelector","createTextSelector","deferredUpdates","discreteUpdates","findAllNodes","findBoundingRects","findHostInstance","findHostInstanceWithNoPortals","findHostInstanceWithWarning","flushControlled","flushPassiveEffects","flushSync","focusWithin","getCurrentUpdatePriority","getFindAllNodesFailureDescription","getPublicRootInstance","rendererConfig","overrideHookState","overrideHookStateDeletePath","overrideHookStateRenamePath","overrideProps","overridePropsDeletePath","overridePropsRenamePath","setErrorHandler","setSuspenseHandler","scheduleUpdate","currentDispatcherRef","findHostInstanceByFiber","findFiberByHostInstance","findHostInstancesForRefresh","scheduleRefresh","scheduleRoot","setRefreshHandler","getCurrentFiber","reconcilerVersion","__REACT_DEVTOOLS_GLOBAL_HOOK__","isDisabled","supportsFiber","checkDCE","isAlreadyRendering","observeVisibleRects","registerMutableSourceForHydration","_getVersion","_source","runWithPriority","shouldError","shouldSuspend","sortIndex","setImmediate","startTime","expirationTime","priorityLevel","scheduling","isInputPending","MessageChannel","port2","port1","unstable_LowPriority","unstable_Profiling","unstable_continueExecution","unstable_forceFrameRate","unstable_getCurrentPriorityLevel","unstable_getFirstCallbackNode","unstable_next","unstable_pauseExecution","unstable_runWithPriority","delay","unstable_wrapCallback","toTrianglesDrawMode","drawMode","TrianglesDrawMode","TriangleFanDrawMode","TriangleStripDrawMode","getIndex","getAttribute","setIndex","numberOfTriangles","newIndices","getX","newGeometry","clearGroups","GLTFLoader","_Loader","dracoLoader","ktx2Loader","meshoptDecoder","pluginCallbacks","register","parser","GLTFMaterialsClearcoatExtension","GLTFTextureBasisUExtension","GLTFTextureWebPExtension","GLTFTextureAVIFExtension","GLTFMaterialsSheenExtension","GLTFMaterialsTransmissionExtension","GLTFMaterialsVolumeExtension","GLTFMaterialsIorExtension","GLTFMaterialsEmissiveStrengthExtension","GLTFMaterialsSpecularExtension","GLTFMaterialsIridescenceExtension","GLTFMaterialsAnisotropyExtension","GLTFLightsExtension","GLTFMeshoptCompression","GLTFMeshGpuInstancing","resourcePath","LoaderUtils","extractUrlBase","itemStart","_onError","itemError","itemEnd","FileLoader","setResponseType","setRequestHeader","requestHeader","setWithCredentials","withCredentials","parse","gltf","json","plugins","JSON","ArrayBuffer","decodeText","BINARY_EXTENSION_HEADER_MAGIC","EXTENSIONS","KHR_BINARY_GLTF","GLTFBinaryExtension","content","asset","GLTFParser","crossOrigin","fileLoader","plugin","extensionsUsed","extensionName","extensionsRequired","KHR_MATERIALS_UNLIT","GLTFMaterialsUnlitExtension","KHR_DRACO_MESH_COMPRESSION","GLTFDracoMeshCompressionExtension","KHR_TEXTURE_TRANSFORM","GLTFTextureTransformExtension","KHR_MESH_QUANTIZATION","GLTFMeshQuantizationExtension","setExtensions","setPlugins","Loader","GLTFRegistry","removeAll","KHR_LIGHTS_PUNCTUAL","KHR_MATERIALS_CLEARCOAT","KHR_MATERIALS_IOR","KHR_MATERIALS_SHEEN","KHR_MATERIALS_SPECULAR","KHR_MATERIALS_TRANSMISSION","KHR_MATERIALS_IRIDESCENCE","KHR_MATERIALS_ANISOTROPY","KHR_MATERIALS_VOLUME","KHR_TEXTURE_BASISU","KHR_MATERIALS_EMISSIVE_STRENGTH","EXT_TEXTURE_WEBP","EXT_TEXTURE_AVIF","EXT_MESHOPT_COMPRESSION","EXT_MESH_GPU_INSTANCING","uses","nodeDefs","nodeIndex","nodeLength","nodeDef","light","_addNodeRef","lightIndex","cacheKey","dependency","lightNode","lightDef","lights","color","Color","range","DirectionalLight","PointLight","SpotLight","spot","innerConeAngle","outerConeAngle","penumbra","decay","assignExtrasToUserData","intensity","createUniqueName","_loadLight","self2","_getNodeRef","MeshBasicMaterial","materialParams","materialDef","opacity","metallicRoughness","pbrMetallicRoughness","baseColorFactor","baseColorTexture","assignTexture","materialIndex","emissiveStrength","emissiveIntensity","MeshPhysicalMaterial","extension","clearcoatFactor","clearcoat","clearcoatTexture","clearcoatRoughnessFactor","clearcoatRoughness","clearcoatRoughnessTexture","clearcoatNormalTexture","clearcoatNormalScale","iridescenceFactor","iridescence","iridescenceTexture","iridescenceIor","iridescenceIOR","iridescenceThicknessRange","iridescenceThicknessMinimum","iridescenceThicknessMaximum","iridescenceThicknessTexture","sheenColor","sheenRoughness","sheen","sheenColorFactor","sheenRoughnessFactor","sheenColorTexture","sheenRoughnessTexture","transmissionFactor","transmission","transmissionTexture","thickness","thicknessFactor","thicknessTexture","attenuationDistance","colorArray","attenuationColor","ior","specularIntensity","specularFactor","specularTexture","specularColorFactor","specularColor","specularColorTexture","anisotropyStrength","anisotropy","anisotropyRotation","anisotropyTexture","textureIndex","textureDef","textures","loadTextureImage","isSupported","images","textureLoader","uri","getHandler","detectSupport","loadTexture","Image","src","onload","onerror","bufferView","bufferViews","extensionDef","getDependency","decoder","supported","byteOffset","stride","byteStride","decodeGltfBufferAsync","res2","ready","decodeGltfBuffer","meshDef","meshes","primitives","WEBGL_CONSTANTS","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","attributesDef","attributes","accessor","createNodeMesh","nodeObject","isGroup","instancedMeshes","instancedMesh","TRANSLATION","fromBufferAttribute","ROTATION","SCALE","attributeName","assignFinalMaterial","BINARY_EXTENSION_CHUNK_TYPES","headerView","DataView","magic","getUint32","chunkContentsLength","chunkView","chunkIndex","chunkLength","chunkType","contentArray","bufferViewIndex","gltfAttributeMap","threeAttributeMap","attributeNormalizedMap","attributeTypeMap","threeAttributeName","ATTRIBUTES","accessorDef","accessors","componentType","WEBGL_COMPONENT_TYPES","normalized","decodeDracoFile","attribute","transform","texCoord","channel","GLTFCubicSplineInterpolant","_Interpolant","parameterPositions","sampleValues","sampleSize","resultBuffer","valueSize","i1","t0","stride2","stride3","pp","ppp","offset1","offset0","s0","p0","m0","p1","Interpolant","_q","GLTFCubicSplineQuaternionInterpolant","_GLTFCubicSplineInter","FLOAT","FLOAT_MAT3","FLOAT_MAT4","FLOAT_VEC2","FLOAT_VEC3","FLOAT_VEC4","LINEAR","REPEAT","SAMPLER_2D","POINTS","LINES","LINE_LOOP","LINE_STRIP","UNSIGNED_BYTE","UNSIGNED_SHORT","Int8Array","Int16Array","Uint32Array","WEBGL_FILTERS","NearestFilter","NearestMipmapNearestFilter","LinearMipmapNearestFilter","NearestMipmapLinearFilter","LinearMipmapLinearFilter","WEBGL_WRAPPINGS","ClampToEdgeWrapping","MirroredRepeatWrapping","RepeatWrapping","WEBGL_TYPE_SIZES","SCALAR","VEC2","VEC3","VEC4","MAT2","MAT3","MAT4","POSITION","NORMAL","TANGENT","TEXCOORD_0","TEXCOORD_1","TEXCOORD_2","TEXCOORD_3","COLOR_0","WEIGHTS_0","JOINTS_0","PATH_PROPERTIES","translation","weights","INTERPOLATION","CUBICSPLINE","InterpolateLinear","STEP","InterpolateDiscrete","ALPHA_MODES","addUnknownExtensionsToUserData","knownExtensions","objectDef","gltfExtensions","gltfDef","extras","updateMorphTargets","il","morphTargetInfluences","targetNames","morphTargetDictionary","createPrimitiveKey","primitiveDef","geometryKey","dracoExtension","createAttributesKey","targets","attributesKey","getNormalizedComponentScale","_identityMatrix","associations","primitiveCache","nodeCache","meshCache","cameraCache","lightCache","sourceCache","textureCache","nodeNamesUsed","isSafari","isFirefox","firefoxVersion","createImageBitmap","TextureLoader","ImageBitmapLoader","setCrossOrigin","_invokeAll","ext","_markDefs","beforeRoot","getDependencies","scenes","animations","cameras","afterRoot","skinDefs","skins","meshDefs","skinIndex","skinLength","joints","isBone","skin","isSkinnedMesh","updateMappings","original","mappings","_step3$value","loadScene","_invokeOne","loadNode","loadMesh","loadAccessor","loadBufferView","loadBuffer","loadMaterial","loadSkin","loadAnimation","loadCamera","defs","bufferIndex","bufferDef","resolveURL","bufferViewDef","accessorIndex","sparse","itemSize","TypedArray","pendingBufferViews","bufferAttribute","elementBytes","BYTES_PER_ELEMENT","itemBytes","ibSlice","ibCacheKey","InterleavedBuffer","InterleavedBufferAttribute","itemSizeIndices","TypedArrayIndices","byteOffsetIndices","byteOffsetValues","sparseIndices","sparseValues","setX","setY","setZ","setW","sourceIndex","sourceDef","sampler","loadImageSource","samplers","wrapS","wrapT","webkitURL","sourceURI","isObjectURL","mimeType","sourceURI2","isImageBitmapLoader","imageBitmap","Texture","revokeObjectURL","search","mapName","mapDef","gltfReference","extendTexture","useDerivativeTangents","tangent","useVertexColors","useFlatShading","isPoints","pointsMaterial","PointsMaterial","sizeAttenuation","isLine","lineMaterial","LineBasicMaterial","cachedMaterial","vertexColors","flatShading","normalScale","materialType","kmuExtension","getMaterialType","extendParams","metalness","metallicFactor","roughness","roughnessFactor","metallicRoughnessTexture","extendMaterialParams","doubleSided","alphaMode","transparent","alphaTest","alphaCutoff","normalTexture","occlusionTexture","strength","aoMapIntensity","emissiveFactor","emissive","emissiveTexture","originalName","sanitizedName","PropertyBinding","sanitizeNodeName","createDracoPrimitive","decodePrimitive","addPrimitiveAttributes","cached","geometryPromise","meshIndex","FrontSide","loadGeometries","geometries","SkinnedMesh","normalizeSkinWeights","LineSegments","Line","LineLoop","Points","morphAttributes","group","Group","cameraIndex","cameraDef","MathUtils","radToDeg","yfov","aspectRatio","znear","zfar","xmag","ymag","skinDef","_loadNodeShallow","inverseBindMatrices","jointNodes","bones","boneInverses","jointNode","mat","Skeleton","animationIndex","animationDef","animationName","pendingNodes","pendingInputAccessors","pendingOutputAccessors","pendingSamplers","pendingTargets","channels","output","inputAccessors","outputAccessors","tracks","TypedKeyframeTrack","inputAccessor","outputAccessor","NumberKeyframeTrack","QuaternionKeyframeTrack","VectorKeyframeTrack","targetName","interpolation","outputArray","scaled","jl","track","createInterpolant","times","getValueSize","isInterpolantFactoryMethodGLTFCubicSpline","AnimationClip","isMesh","nodePending","childPending","childrenDef","skeletonPending","skeleton","nodeName","meshPromise","createNodeAttachment","Bone","sceneIndex","sceneDef","nodeIds","reducedAssociations","_step4$value","node2","reduceAssociations","assignAttributeAccessor","gltfAttributeName","accessor2","Box3","boxScale","maxDisplacement","expandByVector","boundingBox","Sphere","getCenter","center","boundingSphere","computeBounds","hasMorphPosition","hasMorphNormal","hasMorphColor","pendingPositionAccessors","pendingNormalAccessors","pendingColorAccessors","pendingAccessor","morphPositions","morphNormals","morphColors","morphTargetsRelative","addMorphTargets","_arrayLikeToArray","arr2","_arrayWithHoles","ReferenceError","Constructor","Parent","Class","_defineProperties","descriptor","protoProps","staticProps","allowArrayLike","it","normalCompletion","didErr","_e2","Derived","hasNativeReflectConstruct","isNativeReflectConstruct","Super","NewTarget","assertThisInitialized","base","desc","getOwnPropertyDescriptor","setPrototypeOf","__proto__","subClass","superClass","_isNativeReflectConstruct","sham","Proxy","valueOf","_iterableToArray","iter","_nonIterableRest","_objectSpread2","getOwnPropertyDescriptors","excluded","sourceKeys","sourceSymbolKeys","propertyIsEnumerable","_setPrototypeOf","arrayLikeToArray","_toPropertyKey","hint","prim","toPrimitive","_unsupportedIterableToArray","minLen","_wrapNativeSuper","_cache","Wrapper","CullFaceNone","CullFaceBack","CullFaceFront","CullFaceFrontBack","BasicShadowMap","PCFShadowMap","PCFSoftShadowMap","VSMShadowMap","BackSide","NormalBlending","AdditiveBlending","SubtractiveBlending","MultiplyBlending","CustomBlending","AddEquation","SubtractEquation","ReverseSubtractEquation","MinEquation","MaxEquation","ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","SrcAlphaFactor","OneMinusSrcAlphaFactor","DstAlphaFactor","OneMinusDstAlphaFactor","DstColorFactor","OneMinusDstColorFactor","SrcAlphaSaturateFactor","NeverDepth","AlwaysDepth","LessDepth","LessEqualDepth","EqualDepth","GreaterEqualDepth","GreaterDepth","NotEqualDepth","MultiplyOperation","MixOperation","AddOperation","NoToneMapping","LinearToneMapping","ReinhardToneMapping","CineonToneMapping","ACESFilmicToneMapping","CustomToneMapping","UVMapping","CubeRefractionMapping","EquirectangularRefractionMapping","CubeUVReflectionMapping","NearestMipMapNearestFilter","NearestMipMapLinearFilter","LinearMipMapNearestFilter","LinearMipMapLinearFilter","UnsignedByteType","ByteType","ShortType","IntType","UnsignedIntType","UnsignedShort4444Type","UnsignedShort5551Type","UnsignedInt248Type","AlphaFormat","RGBFormat","RGBAFormat","LuminanceFormat","LuminanceAlphaFormat","DepthStencilFormat","RedFormat","RedIntegerFormat","RGFormat","RGIntegerFormat","RGBAIntegerFormat","RGB_S3TC_DXT1_Format","RGBA_S3TC_DXT1_Format","RGBA_S3TC_DXT3_Format","RGBA_S3TC_DXT5_Format","RGB_PVRTC_4BPPV1_Format","RGB_PVRTC_2BPPV1_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_PVRTC_2BPPV1_Format","RGB_ETC1_Format","RGB_ETC2_Format","RGBA_ETC2_EAC_Format","RGBA_ASTC_4x4_Format","RGBA_ASTC_5x4_Format","RGBA_ASTC_5x5_Format","RGBA_ASTC_6x5_Format","RGBA_ASTC_6x6_Format","RGBA_ASTC_8x5_Format","RGBA_ASTC_8x6_Format","RGBA_ASTC_8x8_Format","RGBA_ASTC_10x5_Format","RGBA_ASTC_10x6_Format","RGBA_ASTC_10x8_Format","RGBA_ASTC_10x10_Format","RGBA_ASTC_12x10_Format","RGBA_ASTC_12x12_Format","RGBA_BPTC_Format","LoopOnce","LoopRepeat","LoopPingPong","InterpolateSmooth","ZeroCurvatureEnding","ZeroSlopeEnding","WrapAroundEnding","NormalAnimationBlendMode","AdditiveAnimationBlendMode","BasicDepthPacking","RGBADepthPacking","TangentSpaceNormalMap","ObjectSpaceNormalMap","NoColorSpace","SRGBColorSpace","LinearSRGBColorSpace","ZeroStencilOp","KeepStencilOp","ReplaceStencilOp","IncrementStencilOp","DecrementStencilOp","IncrementWrapStencilOp","DecrementWrapStencilOp","InvertStencilOp","NeverStencilFunc","LessStencilFunc","EqualStencilFunc","LessEqualStencilFunc","GreaterStencilFunc","NotEqualStencilFunc","GreaterEqualStencilFunc","AlwaysStencilFunc","StaticDrawUsage","StreamDrawUsage","StaticReadUsage","DynamicReadUsage","StreamReadUsage","StaticCopyUsage","DynamicCopyUsage","StreamCopyUsage","GLSL1","GLSL3","_SRGBAFormat","_lut","_seed","DEG2RAD","RAD2DEG","generateUUID","random","d3","clamp","euclideanModulo","isPowerOfTwo","ceilPowerOfTwo","floorPowerOfTwo","denormalize","mapLinear","a1","a2","b1","b2","inverseLerp","damp","lambda","exp","pingpong","smoothstep","smootherstep","randInt","low","high","randFloat","randFloatSpread","seededRandom","imul","degToRad","degrees","radians","setQuaternionFromProperEuler","c13","s13","c1_3","s1_3","c3_1","s3_1","_Symbol$iterator","isVector2","minVal","maxVal","divideScalar","getY","_regeneratorRuntime","mark","wrap","_context2","Matrix3","isMatrix3","n11","n12","n13","n21","n22","n23","n31","n32","n33","xAxis","yAxis","zAxis","setFromMatrix3Column","multiplyMatrices","t11","t12","t13","det","detInv","matrix4","setFromMatrix4","cx","cy","arrayNeedsUint32","TYPED_ARRAYS","Uint8ClampedArray","Int32Array","Float64Array","getTypedArray","createElementNS","SRGBToLinear","LinearToSRGB","FN","_FN","ColorManagement","legacyMode","workingColorSpace","convert","sourceColorSpace","targetColorSpace","fromWorkingColorSpace","toWorkingColorSpace","_colorKeywords","_rgb","_hslA","_hslB","hue2rgb","toComponents","_canvas","_Symbol$iterator2","setRGB","setHex","setStyle","hex","handleAlpha","exec","components","setHSL","setColorName","copySRGBToLinear","copyLinearToSRGB","getHex","hue","saturation","lightness","getHSL","color1","color2","getZ","_context3","NAMES","ImageUtils","getContext","ImageData","putImageData","drawImage","toDataURL","HTMLImageElement","ImageBitmap","imageData","getImageData","Source","isSource","meta","isRootObject","isDataTexture","serializeImage","getDataURL","textureId","DEFAULT_IMAGE","DEFAULT_MAPPING","isTexture","mipmaps","internalFormat","premultiplyAlpha","unpackAlignment","isRenderTargetTexture","needsPMREMUpdate","setUvTransform","stringify","metadata","generator","toJSON","uv","applyMatrix3","_Symbol$iterator3","isVector4","epsilon","epsilon2","m11","m12","m13","m21","m22","m23","m31","m32","m33","getW","_context4","_EventDispatcher2","isWebGLRenderTarget","scissor","scissorTest","samples","DataArrayTexture","_Texture","isDataArrayTexture","wrapR","WebGLArrayRenderTarget","_WebGLRenderTarget","isWebGLArrayRenderTarget","Data3DTexture","_Texture2","_super5","_this6","isData3DTexture","WebGL3DRenderTarget","_WebGLRenderTarget2","_super6","_this7","isWebGL3DRenderTarget","WebGLMultipleRenderTargets","_WebGLRenderTarget3","_super7","_this8","isWebGLMultipleRenderTargets","_Symbol$iterator4","isQuaternion","_x","_y","_z","_w","_onChangeCallback","euler","_order","halfAngle","trace","vFrom","vTo","EPSILON","angleTo","slerp","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","cosHalfTheta","sqrSinHalfTheta","sinHalfTheta","halfTheta","ratioA","ratioB","sqrt1u1","sqrtu1","u3","_context5","dst","dstOffset","src0","srcOffset0","src1","srcOffset1","x0","y0","z0","w0","x1","y1","z1","w1","dir","sqrSin","tDir","_Symbol$iterator5","isVector3","_quaternion$4","setFromEuler","projectionMatrixInverse","denominator","lengthSq","_vector$c","projectOnVector","dz","setFromSphericalCoords","sinPhiRadius","setFromCylindricalCoords","_context6","isBox3","minX","minY","minZ","maxX","maxY","maxZ","makeEmpty","expandByPoint","halfSize","_vector$b","precise","expandByObject","isEmpty","addVectors","addScalar","updateWorldMatrix","computeBoundingBox","_box$3","union","clampPoint","plane","triangle","_center","_extents","_v0$2","_v1$7","_v2$3","_f0","_f1","_f2","satForAxes","_triangleNormal","getSize","_points","equals","_testAxis","extents","p2","_box$2","_v1$6","_toFarthestPoint","_toPoint","optionalCenter","maxRadiusSq","radiusSum","intersectsSphere","distanceToPoint","deltaLengthSq","expandByScalar","getMaxScaleOnAxis","missingRadiusHalf","_vector$a","_segCenter","_segDir","_diff","_edge1","_edge2","_normal$1","origin","directionDistance","distanceSqToPoint","optionalPointOnRay","optionalPointOnSegment","sqrDist","extDet","segExtent","a01","b0","invDet","tca","radius2","thc","distanceToPlane","distToPoint","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","intersectBox","backfaceCulling","DdN","DdQxE2","DdE1xQ","QdN","transformDirection","isMatrix4","n14","n24","n34","n41","n42","n43","n44","scaleX","_v1$5","scaleY","scaleZ","_zero","_one","eye","a14","a24","a34","a41","a42","a43","a44","b14","b24","b34","b41","b42","b43","b44","t14","scaleXSq","scaleYSq","scaleZSq","yx","zx","zy","determinant","_m1$2","invSX","invSY","invSZ","setFromRotationMatrix","_matrix$1","_quaternion$3","_Symbol$iterator6","DefaultOrder","isEuler","makeRotationFromQuaternion","newOrder","_context7","RotationOrders","Layers","layers","_object3DId","_v1$4","_q1","_m1$1","_target","_position$3","_scale$2","_quaternion$2","_xAxis","_yAxis","_zAxis","_addedEvent","_removedEvent","_EventDispatcher3","_super8","_this9","DefaultUp","_onChange","modelViewMatrix","normalMatrix","DefaultMatrixAutoUpdate","matrixWorldNeedsUpdate","matrixWorldAutoUpdate","DefaultMatrixWorldAutoUpdate","castShadow","receiveShadow","renderOrder","premultiply","decompose","rotateOnAxis","translateOnAxis","isLight","getObjectByProperty","traverseVisible","traverseAncestors","updateParents","updateChildren","skeletons","serialize","library","isInstancedMesh","instanceColor","bindMode","bindMatrix","animation","extractFromCache","recursive","_v0$1","_v1$3","_v2$2","_v3$1","_vab","_vac","_vbc","_vap","_vbp","_vcp","Triangle","i0","i2","setFromCoplanarPoints","getBarycoord","uv1","uv2","uv3","getUV","containsPoint","isFrontFacing","intersectsTriangle","d4","d5","d6","denom","targetLengthSq","invDenom","p3","materialId","_EventDispatcher4","_super9","_this10","isMaterial","blendSrc","blendDst","blendEquation","blendSrcAlpha","blendDstAlpha","blendEquationAlpha","depthFunc","stencilWriteMask","stencilFunc","stencilRef","stencilFuncMask","stencilFail","stencilZFail","stencilZPass","stencilWrite","clippingPlanes","clipIntersection","clipShadows","shadowSide","colorWrite","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","dithering","alphaToCoverage","premultipliedAlpha","_alphaTest","onBeforeCompile","newValue","currentValue","specular","shininess","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","iridescenceMap","iridescenceThicknessMap","matcap","alphaMap","lightMap","lightMapIntensity","aoMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","roughnessMap","metalnessMap","emissiveMap","specularMap","specularIntensityMap","specularColorMap","envMap","combine","envMapIntensity","reflectivity","refractionRatio","gradientMap","transmissionMap","thicknessMap","linewidth","dashSize","gapSize","wireframe","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","fog","srcPlanes","dstPlanes","_Material","_super10","_this11","isMeshBasicMaterial","_vector$9","_vector2$1","isBufferAttribute","usage","updateRange","index1","index2","setXY","setXYZ","applyNormalMatrix","onUploadCallback","Int8BufferAttribute","_BufferAttribute","_super11","Uint8BufferAttribute","_BufferAttribute2","_super12","Uint8ClampedBufferAttribute","_BufferAttribute3","_super13","Int16BufferAttribute","_BufferAttribute4","_super14","Uint16BufferAttribute","_BufferAttribute5","_super15","Int32BufferAttribute","_BufferAttribute6","_super16","Uint32BufferAttribute","_BufferAttribute7","_super17","Float16BufferAttribute","_BufferAttribute8","_super18","_this12","isFloat16BufferAttribute","Float32BufferAttribute","_BufferAttribute9","_super19","Float64BufferAttribute","_BufferAttribute10","_super20","_id$1","_m1","_obj","_box$1","_boxMorphTargets","_vector$8","_EventDispatcher5","_super21","_this13","isBufferGeometry","groups","drawRange","getNormalMatrix","computeBoundingSphere","makeRotationX","makeRotationY","makeRotationZ","makeTranslation","makeScale","translate","morphAttributesPosition","isGLBufferAttribute","setFromBufferAttribute","morphAttribute","nVertices","hasAttribute","tan1","tan2","vA","vB","vC","uvA","uvB","uvC","sdir","tdir","handleTriangle","tmp2","n2","handleVertex","positionAttribute","normalAttribute","pA","pB","pC","nA","nB","nC","normalizeNormals","convertBufferAttribute","array2","isInterleavedBufferAttribute","geometry2","newAttribute","morphArray","addGroup","hasMorphAttributes","attributeArray","_inverseMatrix$2","_ray$2","_sphere$3","_vA$1","_vB$1","_vC$1","_tempA","_tempB","_tempC","_morphA","_morphB","_morphC","_uvA$1","_uvB$1","_uvC$1","_intersectionPoint","_intersectionPointWorld","_Object3D","_super22","_this14","ml","intersects","intersectsBox","morphPosition","groupMaterial","checkBufferGeometryIntersection","faceIndex","morphInfluences","influence","boneTransform","intersectTriangle","checkIntersection","BoxGeometry","_BufferGeometry","_super23","_this15","widthSegments","heightSegments","depthSegments","numberOfVertices","groupStart","buildPlane","udir","vdir","gridX","gridY","segmentWidth","segmentHeight","widthHalf","heightHalf","depthHalf","gridX1","gridY1","vertexCounter","groupCount","cloneUniforms","mergeUniforms","merged","UniformsUtils","merge","_Material2","_super24","_this16","isShaderMaterial","uniformsGroups","clipping","derivatives","fragDepth","drawBuffers","shaderTextureLOD","defaultAttributeValues","index0AttributeName","uniformsNeedUpdate","glslVersion","cloneUniformsGroups","_Object3D2","_super25","_this17","_Camera","_super26","_this18","focus","filmGauge","filmOffset","focalLength","vExtentSlope","getFilmHeight","atan","fullWidth","fullHeight","skew","getFilmWidth","makePerspective","CubeCamera","_Object3D3","_super27","renderTarget","_this19","cameraPX","cameraNX","cameraPY","cameraNY","cameraPZ","cameraNZ","_this$children","currentRenderTarget","getRenderTarget","currentToneMapping","CubeTexture","_Texture3","_super28","_this20","_WebGLRenderTarget4","_super29","_this21","isWebGLCubeRenderTarget","tEquirect","currentMinFilter","stencil","_vector1","_vector2","_normalMatrix","isPlane","inverseNormalLength","startSign","endSign","end","intersectsPlane","optionalNormalMatrix","referencePoint","coplanarPoint","_sphere$2","_vector$7","Frustum","p4","p5","planes","frustum","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","setComponents","sprite","negRadius","WebGLAnimation","isAnimating","animationLoop","requestId","onAnimationFrame","setContext","WebGLAttributes","capabilities","isWebGL2","deleteBuffer","bufferType","bytesPerElement","createBuffer","bindBuffer","bufferData","bufferSubData","updateBuffer","PlaneGeometry","_BufferGeometry2","_super30","_this22","width_half","height_half","segment_width","segment_height","ShaderChunk","alphamap_fragment","alphamap_pars_fragment","alphatest_fragment","alphatest_pars_fragment","aomap_fragment","aomap_pars_fragment","begin_vertex","beginnormal_vertex","bsdfs","iridescence_fragment","bumpmap_pars_fragment","clipping_planes_fragment","clipping_planes_pars_fragment","clipping_planes_pars_vertex","clipping_planes_vertex","color_fragment","color_pars_fragment","color_pars_vertex","color_vertex","common","cube_uv_reflection_fragment","defaultnormal_vertex","displacementmap_pars_vertex","displacementmap_vertex","emissivemap_fragment","emissivemap_pars_fragment","encodings_fragment","encodings_pars_fragment","envmap_fragment","envmap_common_pars_fragment","envmap_pars_fragment","envmap_pars_vertex","envmap_physical_pars_fragment","envmap_vertex","fog_vertex","fog_pars_vertex","fog_fragment","fog_pars_fragment","gradientmap_pars_fragment","lightmap_fragment","lightmap_pars_fragment","lights_lambert_fragment","lights_lambert_pars_fragment","lights_pars_begin","lights_toon_fragment","lights_toon_pars_fragment","lights_phong_fragment","lights_phong_pars_fragment","lights_physical_fragment","lights_physical_pars_fragment","lights_fragment_begin","lights_fragment_maps","lights_fragment_end","logdepthbuf_fragment","logdepthbuf_pars_fragment","logdepthbuf_pars_vertex","logdepthbuf_vertex","map_fragment","map_pars_fragment","map_particle_fragment","map_particle_pars_fragment","metalnessmap_fragment","metalnessmap_pars_fragment","morphcolor_vertex","morphnormal_vertex","morphtarget_pars_vertex","morphtarget_vertex","normal_fragment_begin","normal_fragment_maps","normal_pars_fragment","normal_pars_vertex","normal_vertex","normalmap_pars_fragment","clearcoat_normal_fragment_begin","clearcoat_normal_fragment_maps","clearcoat_pars_fragment","iridescence_pars_fragment","output_fragment","packing","premultiplied_alpha_fragment","project_vertex","dithering_fragment","dithering_pars_fragment","roughnessmap_fragment","roughnessmap_pars_fragment","shadowmap_pars_fragment","shadowmap_pars_vertex","shadowmap_vertex","shadowmask_pars_fragment","skinbase_vertex","skinning_pars_vertex","skinning_vertex","skinnormal_vertex","specularmap_fragment","specularmap_pars_fragment","tonemapping_fragment","tonemapping_pars_fragment","transmission_fragment","transmission_pars_fragment","uv_pars_fragment","uv_pars_vertex","uv_vertex","uv2_pars_fragment","uv2_pars_vertex","uv2_vertex","worldpos_vertex","background_vert","background_frag","cube_vert","cube_frag","depth_vert","depth_frag","distanceRGBA_vert","distanceRGBA_frag","equirect_vert","equirect_frag","linedashed_vert","linedashed_frag","meshbasic_vert","meshbasic_frag","meshlambert_vert","meshlambert_frag","meshmatcap_vert","meshmatcap_frag","meshnormal_vert","meshnormal_frag","meshphong_vert","meshphong_frag","meshphysical_vert","meshphysical_frag","meshtoon_vert","meshtoon_frag","points_vert","points_frag","shadow_vert","shadow_frag","sprite_vert","sprite_frag","UniformsLib","diffuse","uvTransform","uv2Transform","specularmap","envmap","flipEnvMap","aomap","lightmap","emissivemap","bumpmap","normalmap","displacementmap","roughnessmap","metalnessmap","gradientmap","fogDensity","fogNear","fogFar","fogColor","ambientLightColor","lightProbe","directionalLights","properties","directionalLightShadows","shadowBias","shadowNormalBias","shadowRadius","shadowMapSize","directionalShadowMap","directionalShadowMatrix","spotLights","coneCos","penumbraCos","spotLightShadows","spotLightMap","spotShadowMap","spotLightMatrix","pointLights","pointLightShadows","shadowCameraNear","shadowCameraFar","pointShadowMap","pointShadowMatrix","hemisphereLights","skyColor","groundColor","rectAreaLights","ltc_1","ltc_2","ShaderLib","basic","lambert","phong","standard","toon","dashed","totalSize","t2D","cube","equirect","distanceRGBA","referencePosition","nearDistance","farDistance","shadow","WebGLBackground","cubemaps","planeMesh","boxMesh","clearColor","clearAlpha","currentBackground","currentBackgroundVersion","currentTonemapping","setClear","getClearColor","setClearColor","getClearAlpha","setClearAlpha","renderList","forceClear","session","getSession","environmentBlendMode","autoClearColor","autoClearDepth","autoClearStencil","deleteAttribute","onBeforeRender","copyPosition","enableAll","WebGLBindingStates","maxVertexAttributes","getParameter","vaoAvailable","bindingStates","defaultState","createBindingState","currentState","bindVertexArrayObject","vao","bindVertexArray","bindVertexArrayOES","deleteVertexArrayObject","deleteVertexArray","deleteVertexArrayOES","newAttributes","enabledAttributes","attributeDivisors","program","initAttributes","enableAttribute","enableAttributeAndDivisor","meshPerAttribute","enableVertexAttribArray","disableUnusedAttributes","disableVertexAttribArray","vertexAttribPointer","vertexAttribIPointer","resetDefaultState","setup","updateBuffers","programMap","stateMap","createVertexArray","createVertexArrayOES","getBindingState","cachedAttributes","geometryAttributes","attributesNum","programAttributes","getAttributes","location","cachedAttribute","geometryAttribute","saveCache","isInstancedBufferGeometry","materialDefaultAttributeValues","programAttribute","isInstancedInterleavedBuffer","locationSize","_maxInstanceCount","isInstancedBufferAttribute","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttrib1fv","setupVertexAttributes","geometryId","programId","releaseStatesOfGeometry","releaseStatesOfProgram","WebGLBufferRenderer","info","setMode","drawArrays","renderInstances","primcount","methodName","WebGLCapabilities","maxAnisotropy","getMaxPrecision","getShaderPrecisionFormat","WebGL2RenderingContext","WebGL2ComputeRenderingContext","maxPrecision","logarithmicDepthBuffer","maxTextures","maxVertexTextures","maxTextureSize","maxCubemapSize","maxAttributes","maxVertexUniforms","maxVaryings","maxFragmentUniforms","vertexTextures","floatFragmentTextures","getMaxAnisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT","floatVertexTextures","maxSamples","WebGLClipping","globalState","numGlobalPlanes","localClippingEnabled","renderingShadows","viewNormalMatrix","uniform","resetGlobalState","numPlanes","numIntersection","projectPlanes","skipTransform","nPlanes","dstArray","flatSize","viewMatrix","i4","enableLocalClipping","beginShadows","endShadows","useCache","materialProperties","nGlobal","lGlobal","clippingState","WebGLCubeMaps","mapTextureMapping","onTextureDispose","cubemap","fromEquirectangularTexture","physical","sheenColorMap","sheenRoughnessMap","transmissionSamplerSize","transmissionSamplerMap","_Camera2","_super31","_this23","scaleW","scaleH","makeOrthographic","EXTRA_LOD_SIGMA","MAX_SAMPLES","_flatCamera","_clearColor","_oldTarget","PHI","INV_PHI","_axisDirections","PMREMGenerator","_renderer","_pingPongRenderTarget","_lodPlanes","_sizeLods","_sigmas","_blurMaterial","_cubemapMaterial","_equirectMaterial","_compileMaterial","sigma","_setSize","cubeUVRenderTarget","_allocateTargets","_sceneToCubeUV","_blur","_applyPMREM","_cleanup","equirectangular","_fromTexture","_getCubemapMaterial","_getEquirectMaterial","_dispose","outputTarget","_setViewport","_textureToCubeUV","_createRenderTarget","_createPlanes2","lodMax","lodPlanes","sizeLods","sigmas","lod","totalLods","sizeLod","cubeFaces","positionSize","uvSize","faceIndexSize","coordinates","_createPlanes","poleAxis","shaderMaterial","_getBlurShader","tmpMesh","compile","cubeCamera","upSign","forwardSign","originalAutoClear","backgroundMaterial","backgroundBox","useSolidColor","col","lodIn","lodOut","pingPongRenderTarget","_halfBlur","targetIn","targetOut","sigmaRadians","blurMaterial","blurMesh","blurUniforms","pixels","radiansPerPixel","sigmaPixels","sum","weight","outputSize","WebGLCubeUVMaps","cubeUVmaps","pmremGenerator","cubemapUV","isEquirectMap","fromEquirectangular","fromCubemap","isCubeTextureComplete","WebGLExtensions","getExtension","WebGLGeometries","wireframeAttributes","onGeometryDispose","memory","updateWireframeAttribute","geometryIndex","geometryPosition","previousAttribute","getWireframeAttribute","currentAttribute","WebGLIndexedBufferRenderer","drawElements","WebGLInfo","calls","lines","programs","autoReset","instanceCount","numericalSort","absNumericalSort","WebGLMorphtargets","influencesList","morphTextures","morph","workInfluences","objectInfluences","morphTargetsCount","hasMorphNormals","hasMorphColors","morphTargets","vertexDataCount","vertexDataStride","morphTarget","morphNormal","morphColor","disposeTexture","morphInfluencesSum","morphBaseInfluence","getUniforms","setValue","influences","MAX_SAFE_INTEGER","WebGLObjects","updateMap","onInstancedMeshDispose","buffergeometry","hasEventListener","emptyTexture","emptyArrayTexture","empty3dTexture","emptyCubeTexture","arrayCacheF32","arrayCacheI32","mat4array","mat3array","mat2array","flatten","nBlocks","blockSize","firstElem","arraysEqual","copyArray","allocTexUnits","allocateTextureUnit","setValueV1f","uniform1f","addr","setValueV2f","uniform2f","uniform2fv","setValueV3f","uniform3f","uniform3fv","setValueV4f","uniform4f","uniform4fv","setValueM2","uniformMatrix2fv","setValueM3","uniformMatrix3fv","setValueM4","uniformMatrix4fv","setValueV1i","uniform1i","setValueV2i","uniform2iv","setValueV3i","uniform3iv","setValueV4i","uniform4iv","setValueV1ui","uniform1ui","setValueV2ui","uniform2uiv","setValueV3ui","uniform3uiv","setValueV4ui","uniform4uiv","setValueT1","unit","setTexture2D","setValueT3D1","setTexture3D","setValueT6","setTextureCube","setValueT2DArray1","setTexture2DArray","setValueV1fArray","uniform1fv","setValueV2fArray","setValueV3fArray","setValueV4fArray","setValueM2Array","setValueM3Array","setValueM4Array","setValueV1iArray","uniform1iv","setValueV2iArray","setValueV3iArray","setValueV4iArray","setValueV1uiArray","uniform1uiv","setValueV2uiArray","setValueV3uiArray","setValueV4uiArray","setValueT1Array","units","setValueT3DArray","setValueT6Array","setValueT2DArrayArray","SingleUniform","activeInfo","getSingularSetter","PureArrayUniform","getPureArraySetter","StructuredUniform","seq","RePathPart","addUniform","uniformObject","parseUniform","pathLength","lastIndex","matchEnd","idIsIndex","subscript","WebGLUniforms","getProgramParameter","getActiveUniform","getUniformLocation","WebGLShader","createShader","shaderSource","compileShader","programIdCount","getShaderErrors","status","getShaderParameter","errors","getShaderInfoLog","errorMatches","errorLine","lines2","handleSource","getShaderSource","getTexelEncodingFunction","functionName","getEncodingComponents","getToneMappingFunction","toneMappingName","filterEmptyLine","replaceLightNums","numSpotLightCoords","numSpotLightShadows","numSpotLightMaps","numSpotLightShadowsWithMaps","numDirLights","numSpotLights","numRectAreaLights","numPointLights","numHemiLights","numDirLightShadows","numPointLightShadows","replaceClippingPlaneNums","numClippingPlanes","numClipIntersection","includePattern","resolveIncludes","includeReplacer","include","unrollLoopPattern","unrollLoops","loopReplacer","snippet","generatePrecision","precisionstring","WebGLProgram","prefixVertex","prefixFragment","shadowMapTypeDefine","shadowMapType","generateShadowMapTypeDefine","envMapTypeDefine","envMapMode","generateEnvMapTypeDefine","envMapModeDefine","generateEnvMapModeDefine","envMapBlendingDefine","generateEnvMapBlendingDefine","envMapCubeUVSize","imageHeight","envMapCubeUVHeight","maxMip","texelHeight","texelWidth","generateCubeUVSize","customExtensions","extensionDerivatives","tangentSpaceNormalMap","shaderID","extensionFragDepth","rendererExtensionFragDepth","extensionDrawBuffers","rendererExtensionDrawBuffers","extensionShaderTextureLOD","rendererExtensionShaderTextureLod","generateExtensions","customDefines","chunks","generateDefines","createProgram","versionString","isRawShaderMaterial","shaderName","instancing","instancingColor","supportsVertexTextures","useFog","fogExp2","objectSpaceNormalMap","vertexTangents","vertexAlphas","vertexUvs","uvsVertexOnly","skinning","morphTextureStride","flipSided","shadowMapEnabled","decodeVideoTexture","physicallyCorrectLights","opaque","useDepthPacking","depthPacking","cachedUniforms","fragmentGlsl","glVertexShader","glFragmentShader","attachShader","bindAttribLocation","linkProgram","debug","checkShaderErrors","programLog","getProgramInfoLog","vertexLog","fragmentLog","runnable","haveDiagnostics","vertexErrors","fragmentErrors","getError","diagnostics","prefix","deleteShader","getActiveAttrib","getAttribLocation","fetchAttributeLocations","deleteProgram","usedTimes","_id","WebGLShaderCache","shaderCache","materialCache","vertexShaderStage","_getShaderStage","fragmentShaderStage","materialShaders","_getShaderCacheForMaterial","shaderStage","stage","WebGLShaderStage","WebGLPrograms","cubeuvmaps","_programLayers","_customShaders","shaderIDs","MeshDepthMaterial","MeshDistanceMaterial","MeshNormalMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial","MeshMatcapMaterial","LineDashedMaterial","ShadowMaterial","SpriteMaterial","getParameters","isMeshStandardMaterial","customVertexShaderID","customFragmentShaderID","getVertexShaderID","getFragmentShaderID","useAlphaTest","useClearcoat","useIridescence","isXRRenderTarget","isVideoTexture","isFogExp2","directional","rectArea","hemi","customProgramCacheKey","getProgramCacheKey","morphAttributeCount","getProgramCacheKeyParameters","disableAll","enable","getProgramCacheKeyBooleans","acquireProgram","pl","preexistingProgram","releaseProgram","releaseShaderCache","WebGLProperties","painterSortStable","groupOrder","reversePainterSortStable","WebGLRenderList","renderItems","renderItemsIndex","transmissive","getNextRenderItem","renderItem","finish","customOpaqueSort","customTransparentSort","WebGLRenderLists","lists","renderCallDepth","listArray","UniformsCache","halfWidth","halfHeight","nextVersion","shadowCastingAndTexturingLightsFirst","lightA","lightB","WebGLLights","shadowCache","ShadowUniformsCache","hash","directionalLength","pointLength","spotLength","rectAreaLength","hemiLength","numDirectionalShadows","numPointShadows","numSpotShadows","numSpotMaps","ambient","probe","directionalShadow","spotShadow","rectAreaLTC1","rectAreaLTC2","pointShadow","vector3","matrix42","numSpotShadowsWithMaps","scaleFactor","isAmbientLight","isLightProbe","coefficients","isDirectionalLight","shadowUniforms","bias","normalBias","mapSize","isSpotLight","updateMatrices","isRectAreaLight","isPointLight","isHemisphereLight","LTC_FLOAT_1","LTC_FLOAT_2","LTC_HALF_1","LTC_HALF_2","setupView","WebGLRenderState","lightsArray","shadowsArray","setupLights","setupLightsView","pushLight","pushShadow","shadowLight","WebGLRenderStates","renderStates","renderState","renderStateArray","_Material3","_super32","_this24","isMeshDepthMaterial","_Material4","_super33","_this25","isMeshDistanceMaterial","fragment","WebGLShadowMap","_objects","_capabilities","_frustum","_shadowMapSize","_viewportSize","_viewport","_depthMaterial","_distanceMaterial","_materialCache","_maxTextureSize","shadowMaterialVertical","VSM_SAMPLES","shadow_pass","shadowMaterialHorizontal","HORIZONTAL_PASS","fullScreenTri","fullScreenMesh","VSMPass","blurSamples","mapPass","renderBufferDirect","getDepthMaterial","customMaterial","customDistanceMaterial","customDepthMaterial","keyA","keyB","materialsForVariant","renderObject","shadowCamera","intersectsObject","kl","depthMaterial","activeCubeFace","getActiveCubeFace","activeMipmapLevel","getActiveMipmapLevel","_state","setBlending","setTest","setScissorTest","shadowFrameExtents","getFrameExtents","pars","viewportCount","getViewportCount","vp","getViewport","getFrustum","isPointLightShadow","WebGLState","_equationToGL","_factorToGL","colorBuffer","locked","currentColorMask","currentColorClear","colorMask","setLocked","lock","currentDepthMask","currentDepthFunc","currentDepthClear","disable","depthMask","setFunc","clearDepth","currentStencilMask","currentStencilFunc","currentStencilRef","currentStencilFuncMask","currentStencilFail","currentStencilZFail","currentStencilZPass","currentStencilClear","stencilTest","stencilMask","setOp","stencilOp","clearStencil","uboBindings","uboProgamMap","enabledCapabilities","currentBoundFramebuffers","currentDrawbuffers","defaultDrawbuffers","currentProgram","currentBlendingEnabled","currentBlending","currentBlendEquation","currentBlendSrc","currentBlendDst","currentBlendEquationAlpha","currentBlendSrcAlpha","currentBlendDstAlpha","currentPremultipledAlpha","currentFlipSided","currentCullFace","currentLineWidth","currentPolygonOffsetFactor","currentPolygonOffsetUnits","lineWidthAvailable","glVersion","currentTextureSlot","currentBoundTextures","scissorParam","viewportParam","currentScissor","currentViewport","createTexture","bindTexture","texParameteri","texImage2D","emptyTextures","setFlipSided","setCullFace","equationToGL","MIN_EXT","MAX_EXT","factorToGL","blendEquationSeparate","blendFuncSeparate","blendFunc","frontFace","cullFace","setPolygonOffset","bindFramebuffer","framebuffer","drawBuffersWEBGL","useProgram","setMaterial","frontFaceCW","setLineWidth","lineWidth","activeTexture","webglSlot","webglType","webglTexture","boundTexture","unbindTexture","compressedTexImage2D","texImage3D","updateUBOMapping","uniformsGroup","blockIndex","getUniformBlockIndex","uniformBlockBinding","__bindingPointIndex","texStorage2D","texStorage3D","texSubImage2D","texSubImage3D","compressedTexSubImage2D","WebGLTextures","_gl","utils","_wrappingToGL","_filterToGL","multisampledRTTExt","supportsInvalidateFramebuffer","_videoTextures","_sources","useOffscreenCanvas","OffscreenCanvas","createCanvas","resizeImage","needsPowerOfTwo","needsNewCanvas","maxSize","isPowerOfTwo$1","textureNeedsGenerateMipmaps","supportsMips","generateMipmap","getInternalFormat","internalFormatName","glFormat","glType","forceLinearEncoding","getMipLevels","isFramebufferTexture","isCompressedTexture","filterFallback","textureProperties","__webglInit","webglTextures","__cacheKey","deleteTexture","deallocateTexture","onRenderTargetDispose","renderTargetProperties","__webglTexture","deleteFramebuffer","__webglFramebuffer","__webglDepthbuffer","deleteRenderbuffer","__webglMultisampledFramebuffer","__webglColorRenderbuffer","__webglDepthRenderbuffer","attachmentProperties","deallocateRenderTarget","textureUnits","slot","updateVideoTexture","__version","complete","uploadTexture","wrappingToGL","filterToGL","setTextureParameters","textureType","__currentAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","initTexture","forceUpload","textureCacheKey","getTextureCacheKey","sourceProperties","pixelStorei","mipmap","textureNeedsPowerOfTwo","verifyColorSpace","glInternalFormat","useTexStorage","allocateMemory","levels","isDepthTexture","setupFrameBufferTexture","attachment","textureTarget","__hasExternalTextures","useMultisampledRTT","framebufferTexture2DMultisampleEXT","getRenderTargetSamples","framebufferTexture2D","setupRenderBufferStorage","renderbuffer","isMultisample","bindRenderbuffer","renderbufferStorageMultisampleEXT","renderbufferStorageMultisample","renderbufferStorage","framebufferRenderbuffer","setupDepthRenderbuffer","isCube","__autoAllocateDepthBuffer","webglDepthTexture","setupDepthTexture","createRenderbuffer","__useRenderToTexture","sRGBToLinear","textureUnit","resetTextureUnits","isCompressed","cubeImage","mipmapImage","uploadCubeTexture","rebindTextures","colorTexture","setupRenderTarget","isMultipleRenderTargets","createFramebuffer","glTextureType","updateRenderTargetMipmap","updateMultisampleRenderTarget","invalidationArray","depthStyle","ignoreDepthValues","__ignoreDepthValues","invalidateFramebuffer","blitFramebuffer","WebGLUtils","HALF_FLOAT_OES","SRGB_ALPHA_EXT","COMPRESSED_SRGB_S3TC_DXT1_EXT","COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT","COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT","COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","COMPRESSED_RGB_ETC1_WEBGL","COMPRESSED_SRGB8_ETC2","COMPRESSED_RGB8_ETC2","COMPRESSED_SRGB8_ALPHA8_ETC2_EAC","COMPRESSED_RGBA8_ETC2_EAC","COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR","COMPRESSED_RGBA_ASTC_4x4_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR","COMPRESSED_RGBA_ASTC_5x4_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR","COMPRESSED_RGBA_ASTC_5x5_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR","COMPRESSED_RGBA_ASTC_6x5_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR","COMPRESSED_RGBA_ASTC_6x6_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR","COMPRESSED_RGBA_ASTC_8x5_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR","COMPRESSED_RGBA_ASTC_8x6_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR","COMPRESSED_RGBA_ASTC_8x8_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR","COMPRESSED_RGBA_ASTC_10x5_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR","COMPRESSED_RGBA_ASTC_10x6_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR","COMPRESSED_RGBA_ASTC_10x8_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR","COMPRESSED_RGBA_ASTC_10x10_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR","COMPRESSED_RGBA_ASTC_12x10_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR","COMPRESSED_RGBA_ASTC_12x12_KHR","COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT","COMPRESSED_RGBA_BPTC_UNORM_EXT","UNSIGNED_INT_24_8_WEBGL","ArrayCamera","_PerspectiveCamera","_super34","_this26","isArrayCamera","_Object3D4","_super35","_this27","_moveEvent","WebXRController","_targetRay","_grip","_hand","inputState","pinching","hasLinearVelocity","linearVelocity","hasAngularVelocity","inputSource","referenceSpace","inputPose","gripPose","handPose","targetRay","grip","hand","visibilityState","inputjoint","jointPose","getJointPose","jointName","joint","jointRadius","indexTip","thumbTip","distanceToPinch","handedness","gripSpace","getPose","targetRaySpace","_Texture4","_super36","_this28","WebXRManager","_EventDispatcher6","_super37","_this29","framebufferScaleFactor","referenceSpaceType","customReferenceSpace","pose","glBinding","glProjLayer","glBaseLayer","xrFrame","getContextAttributes","initialRenderTarget","newRenderTarget","controllers","controllerInputSources","cameraL","cameraR","cameraVR","_currentDepthNear","_currentDepthFar","onSessionEvent","controllerIndex","controller","onSessionEnd","onInputSourcesChange","removed","cameraAutoUpdate","getController","getTargetRaySpace","getControllerGrip","getGripSpace","getHand","getHandSpace","setFramebufferScaleFactor","setReferenceSpaceType","getReferenceSpace","setReferenceSpace","space","getBaseLayer","getBinding","getFrame","setSession","_asyncToGenerator","_callee","layerInit","depthFormat","depthType","glDepthFormat","projectionlayerInit","_context8","xrCompatible","makeXRCompatible","XRWebGLLayer","updateRenderState","baseLayer","framebufferWidth","framebufferHeight","colorFormat","XRWebGLBinding","createProjectionLayer","textureWidth","textureHeight","setFoveation","requestReferenceSpace","sent","_x3","cameraLPos","cameraRPos","depthNear","depthFar","ipd","projL","projR","topFov","bottomFov","leftFov","rightFov","zOffset","xOffset","translateX","translateZ","near2","far2","left2","right2","top2","bottom2","setProjectionFromUnion","getCamera","getFoveation","fixedFoveation","foveation","onAnimationFrameCallback","getViewerPose","views","setRenderTargetFramebuffer","cameraVRNeedsUpdate","glSubImage","getViewSubImage","setRenderTargetTextures","depthStencilTexture","WebGLMaterials","refreshUniformsCommon","uvScaleMap","uv2ScaleMap","refreshFogUniforms","isFog","density","refreshMaterialUniforms","pixelRatio","transmissionRenderTarget","isMeshLambertMaterial","isMeshToonMaterial","refreshUniformsToon","isMeshPhongMaterial","refreshUniformsPhong","refreshUniformsStandard","isMeshPhysicalMaterial","refreshUniformsPhysical","isMeshMatcapMaterial","refreshUniformsMatcap","refreshUniformsDistance","isMeshNormalMaterial","isLineBasicMaterial","refreshUniformsLine","isLineDashedMaterial","refreshUniformsDash","isPointsMaterial","refreshUniformsPoints","isSpriteMaterial","refreshUniformsSprites","isShadowMaterial","WebGLUniformsGroups","updateList","allocatedBindingPoints","maxBindingPoints","hasUniformChanged","cachedObject","getUniformSize","boundary","storage","onUniformsGroupsDispose","webglProgram","chunkSize","chunkOffset","__data","__offset","__size","__cache","prepareUniformsGroup","bindingPointIndex","allocateBindingPointIndex","bindBufferBase","updateBufferData","WebGLRenderer","isWebGLRenderer","_alpha","createCanvasElement","_depth","_stencil","_antialias","_premultipliedAlpha","_preserveDrawingBuffer","preserveDrawingBuffer","_powerPreference","_failIfMajorPerformanceCaveat","failIfMajorPerformanceCaveat","currentRenderList","currentRenderState","renderListStack","renderStateStack","sortObjects","toneMappingExposure","gammaFactor","_isContextLost","_currentActiveCubeFace","_currentActiveMipmapLevel","_currentRenderTarget","_currentMaterialId","_currentCamera","_currentViewport","_currentScissor","_currentScissorTest","_width","_height","_pixelRatio","_opaqueSort","_transparentSort","_scissor","_scissorTest","_clippingEnabled","_localClippingEnabled","_transmissionRenderTarget","_projScreenMatrix","_vector3","_emptyScene","overrideMaterial","getTargetPixelRatio","programCache","morphtargets","bufferRenderer","indexedBufferRenderer","contextNames","contextAttributes","contextName","onContextLost","onContextRestore","onContextCreationError","isWebGL1Renderer","initGLContext","infoAutoReset","shadowMapAutoUpdate","shadowMapNeedsUpdate","statusMessage","onMaterialDispose","releaseMaterialProgramReferences","deallocateMaterial","loseContext","forceContextRestore","restoreContext","getPixelRatio","setViewport","getDrawingBufferSize","setDrawingBufferSize","getScissor","setScissor","getScissorTest","boolean","setOpaqueSort","method","setTransparentSort","bits","onXRSessionStart","onXRSessionEnd","needsProgramChange","needsLights","lightsStateVersion","getProgram","refreshProgram","refreshMaterial","refreshLights","p_uniforms","m_uniforms","uCamPos","cameraPosition","setOptional","boneTexture","computeBoneTexture","boneTextureSize","isMeshGouraudMaterial","upload","uniformsList","setProgram","rangeFactor","dataCount","rangeStart","rangeCount","drawStart","drawEnd","drawCount","isLineSegments","isLineLoop","isSprite","projectObject","isLOD","intersectsSprite","renderScene","opaqueObjects","transmissiveObjects","transparentObjects","renderObjects","renderTransmissionPass","onAfterRender","programCacheKey","updateCommonMaterialProperties","onBuild","materialNeedsLights","progUniforms","seqWithValue","setFromProjectionMatrix","camera2","defaultFramebuffer","__useDefaultFramebuffer","useDefaultFramebuffer","isRenderTarget3D","layer","framebufferTextureLayer","readRenderTargetPixels","activeCubeFaceIndex","textureFormat","halfFloatSupportedByExt","readPixels","copyFramebufferToTexture","level","levelScale","copyTexSubImage2D","copyTextureToTexture","srcTexture","dstTexture","copyTextureToTexture3D","sourceBox","glTarget","unpackRowLen","unpackImageHeight","unpackSkipPixels","unpackSkipRows","unpackSkipImages","compressedTexSubImage3D","resetState","__THREE_DEVTOOLS__","CustomEvent","detail","WebGL1Renderer","_WebGLRenderer","_super38","_geometry","FogExp2","Fog","_Object3D5","_super39","_this30","isInterleavedBuffer","arrayBuffers","_uuid","_vector$6","interleavedBuffer","interleavedBuffers","_Material5","_super40","_this31","_intersectPoint","_worldScale","_mvPosition","_alignedPosition","_rotatedPosition","_viewWorldMatrix","_vA","_vB","_vC","_uvA","_uvB","_uvC","Sprite","_Object3D6","_super41","_this32","float32Array","setFromMatrixScale","transformVertex","vertexPosition","mvPosition","_v1$2","_v2$1","LOD","_Object3D7","_super42","_this33","_currentLevel","addLevel","getObjectForDistance","_basePosition","_skinIndex","_skinWeight","_vector$5","_matrix","_super43","_this34","bindMatrixInverse","calculateInverses","skinWeight","manhattanLength","setXYZW","getComponent","boneIndex","_Object3D8","_super44","_this35","DataTexture","_Texture5","_super45","_this36","_offsetMatrix","boneMatrices","inverse","bone","boneInverse","InstancedBufferAttribute","_BufferAttribute11","_super46","_this37","_instanceLocalMatrix","_instanceWorldMatrix","_instanceIntersects","_mesh","_Mesh2","_super47","_this38","raycastTimes","getMatrixAt","_Material6","_super48","_this39","linecap","linejoin","_start$1","_end$1","_inverseMatrix$1","_ray$1","_sphere$1","_Object3D9","_super49","_this40","lineDistances","threshold","localThreshold","localThresholdSq","vStart","vEnd","interSegment","interRay","distanceSqToSegment","_start","_end","_Line","_super50","_this41","_Line2","_super51","_this42","_Material7","_super52","_this43","_inverseMatrix","_ray","_sphere","_position$2","_Object3D10","_super53","_this44","testPoint","rayPointDistanceSq","closestPointToPoint","distanceToRay","VideoTexture","_Texture6","_super54","video","_this45","requestVideoFrameCallback","updateVideo","readyState","HAVE_CURRENT_DATA","FramebufferTexture","_Texture7","_super55","_this46","CompressedTexture","_Texture8","_super56","_this47","CanvasTexture","_Texture9","_super57","_this48","isCanvasTexture","Curve","arcLengthDivisions","optionalTarget","getUtoTmapping","getPoint","divisions","getPointAt","lengths","getLengths","cacheArcLengths","targetArcLength","arcLengths","comparison","lengthBefore","pt1","pt2","getTangent","segments","closed","binormals","vec","getTangentAt","makeRotationAxis","EllipseCurve","_Curve","_super58","_this49","aX","aY","xRadius","yRadius","aStartAngle","aEndAngle","aClockwise","aRotation","isEllipseCurve","twoPi","deltaAngle","samePoints","ArcCurve","_EllipseCurve","_super59","aRadius","_this50","isArcCurve","CubicPoly","c0","initCatmullRom","x3","tension","initNonuniformCatmullRom","dt0","dt1","dt2","calc","CatmullRomCurve3","_Curve2","_super60","_this51","curveType","isCatmullRomCurve3","intPoint","CatmullRom","QuadraticBezier","QuadraticBezierP0","QuadraticBezierP1","QuadraticBezierP2","CubicBezier","CubicBezierP0","CubicBezierP1","CubicBezierP2","CubicBezierP3","CubicBezierCurve","_Curve3","_super61","_this52","v3","isCubicBezierCurve","CubicBezierCurve3","_Curve4","_super62","_this53","isCubicBezierCurve3","LineCurve","_Curve5","_super63","_this54","isLineCurve","LineCurve3","_Curve6","_super64","_this55","isLineCurve3","QuadraticBezierCurve","_Curve7","_super65","_this56","isQuadraticBezierCurve","QuadraticBezierCurve3","_Curve8","_super66","_this57","isQuadraticBezierCurve3","SplineCurve","_Curve9","_super67","_this58","isSplineCurve","Curves","CurvePath","_Curve10","_super68","_this59","curves","autoClose","curve","startPoint","endPoint","getLength","curveLengths","getCurveLengths","segmentLength","lens","cacheLengths","sums","pts","getPoints","fromJSON","Path","_CurvePath","_super69","_this60","currentPoint","moveTo","lineTo","aCPx","aCPy","aCP1x","aCP1y","aCP2x","aCP2y","npts","absarc","absellipse","firstPoint","lastPoint","LatheGeometry","_BufferGeometry3","_super70","_this61","phiStart","phiLength","initNormals","inverseSegments","curNormal","prevNormal","CapsuleGeometry","_LatheGeometry","_super71","_this62","capSegments","radialSegments","CircleGeometry","_BufferGeometry4","_super72","_this63","thetaStart","thetaLength","segment","CylinderGeometry","_BufferGeometry5","_super73","_this64","radiusTop","radiusBottom","openEnded","indexArray","generateCap","centerIndexStart","centerIndexEnd","cosTheta","sinTheta","slope","indexRow","generateTorso","ConeGeometry","_CylinderGeometry","_super74","_this65","PolyhedronGeometry","_BufferGeometry6","_super75","_this66","vertexBuffer","uvBuffer","subdivideFace","cols","aj","rows","pushVertex","getVertexByIndex","correctUV","azimuth","subdivide","applyRadius","centroid","azi","correctUVs","correctSeam","generateUVs","computeVertexNormals","details","DodecahedronGeometry","_PolyhedronGeometry","_super76","_this67","_v0","_v1$1","_normal","_triangle","EdgesGeometry","_BufferGeometry7","_super77","_this68","thresholdAngle","thresholdDot","indexAttr","positionAttr","indexCount","indexArr","vertKeys","hashes","edgeData","jNext","vecHash0","vecHash1","reverseHash","index0","_edgeData$key","_Path","_super78","_this69","holes","holesPts","getPointsHoles","hole","Earcut","holeIndices","invSize","dim","hasHoles","outerLen","outerNode","linkedList","steiner","getLeftmost","compareX","eliminateHole","filterPoints","eliminateHoles","earcutLinked","clockwise","signedArea","insertNode","removeNode","again","area","ear","pass","zOrder","prevZ","nextZ","numMerges","pSize","qSize","inSize","sortLinked","indexCurve","isEarHashed","isEar","cureLocalIntersections","splitEarcut","minTX","minTY","maxTX","maxTY","locallyInside","isValidDiagonal","splitPolygon","hx","hy","mx","my","tanMin","sectorContainsSector","findHoleBridge","leftmost","intersectsPolygon","inside","middleInside","q1","q2","o1","o2","o3","o4","onSegment","Node","an","bp","ShapeUtils","contour","removeDupEndPts","addContour","holeIndex","ExtrudeGeometry","_BufferGeometry8","_super79","_this70","verticesArray","uvArray","extrudePts","splineTube","binormal","position2","placeholder","curveSegments","steps","bevelEnabled","bevelThickness","bevelSize","bevelOffset","bevelSegments","extrudePath","uvgen","UVGenerator","WorldUVGenerator","extrudeByPath","getSpacedPoints","computeFrenetFrames","shapePoints","extractPoints","isClockWise","hl","ahole","triangulateShape","scalePt2","pt","vlen","flen","getBevelVec","inPt","inPrev","inNext","v_trans_x","v_trans_y","shrink_by","v_prev_x","v_prev_y","v_next_x","v_next_y","v_prev_lensq","collinear0","v_prev_len","v_next_len","ptPrevShift_x","ptPrevShift_y","v_trans_lensq","direction_eq","contourMovements","oneHoleMovements","holesMovements","verticesMovements","bs","vert","sidewalls","layeroffset","sl","slen1","slen2","f4","f3","addVertex","nextIndex","generateTopUV","addUV","generateSideWallUV","vector2","buildLidFaces","buildSideFaces","toJSON$1","geometryShapes","indexA","indexB","indexC","a_x","a_y","b_x","b_y","c_x","c_y","indexD","a_z","b_z","c_z","d_x","d_y","d_z","_PolyhedronGeometry2","_super80","_this71","OctahedronGeometry","_PolyhedronGeometry3","_super81","_this72","RingGeometry","_BufferGeometry9","_super82","_this73","innerRadius","outerRadius","thetaSegments","phiSegments","radiusStep","thetaSegmentLevel","ShapeGeometry","_BufferGeometry10","_super83","_this74","indexOffset","shapeVertices","shapeHoles","shapeHole","SphereGeometry","_BufferGeometry11","_super84","_this75","thetaEnd","grid","verticesRow","uOffset","TetrahedronGeometry","_PolyhedronGeometry4","_super85","_this76","TorusGeometry","_BufferGeometry12","_super86","_this77","tube","tubularSegments","arc","TorusKnotGeometry","_BufferGeometry13","_super87","_this78","P1","P2","calculatePositionOnCurve","cu","su","quOverP","cs","TubeGeometry","_BufferGeometry14","_super88","_this79","generateSegment","generateIndices","generateBufferData","WireframeGeometry","_BufferGeometry15","_super89","_this80","ol","isUniqueEdge","hash1","hash2","Geometries","_Material8","_super90","_this81","RawShaderMaterial","_super91","_this82","_Material9","_super92","_this83","_super93","_this84","_sheen","_clearcoat","_iridescence","_transmission","_Material10","_super94","_this85","_Material11","_super95","_this86","_Material12","_super96","_this87","_Material13","_super97","_this88","_Material14","_super98","_this89","_LineBasicMaterial","_super99","_this90","arraySlice","isTypedArray","convertArray","forceClone","isView","getKeyframeOrder","sortedArray","nValues","srcOffset","flattenJSON","jsonKeys","valuePropertyName","AnimationUtils","subclip","sourceClip","startFrame","endFrame","fps","clip","minStartTime","resetDuration","makeClipAdditive","targetClip","referenceFrame","referenceClip","numTracks","referenceTime","referenceTrack","referenceTrackType","ValueTypeName","targetTrack","referenceOffset","referenceValueSize","targetOffset","targetValueSize","referenceValue","startIndex","endIndex","interpolant","evaluate","numTimes","valueStart","multiplyQuaternionsFlat","valueEnd","blendMode","_cachedIndex","settings","DefaultSettings_","validate_interval","seek","linear_scan","forward_scan","giveUpAt","copySampleValue_","t1global","mid","intervalChanged_","interpolate_","CubicInterpolant","_super100","_this91","_weightPrev","_offsetPrev","_weightNext","_offsetNext","endingStart","endingEnd","iPrev","iNext","tPrev","tNext","getSettings_","halfDt","o0","oP","oN","wP","wN","sP","sN","LinearInterpolant","_Interpolant2","_super101","weight1","weight0","DiscreteInterpolant","_Interpolant3","_super102","KeyframeTrack","TimeBufferType","ValueBufferType","setInterpolation","DefaultInterpolation","factoryMethod","InterpolantFactoryMethodDiscrete","InterpolantFactoryMethodLinear","InterpolantFactoryMethodSmooth","timeOffset","timeScale","endTime","nKeys","prevTime","currTime","smoothInterpolation","getInterpolation","writeIndex","keep","offsetP","offsetN","readOffset","writeOffset","trackType","BooleanKeyframeTrack","_KeyframeTrack","_super103","ColorKeyframeTrack","_KeyframeTrack2","_super104","_KeyframeTrack3","_super105","QuaternionLinearInterpolant","_Interpolant4","_super106","slerpFlat","_KeyframeTrack4","_super107","StringKeyframeTrack","_KeyframeTrack5","_super108","_KeyframeTrack6","_super109","duration","validate","optimize","jsonTracks","frameTime","parseKeyframeTrack","clipTracks","morphTargetSequence","noLoop","numMorphTargets","objectOrClipArray","clipArray","animationToMorphTargets","pattern","parts","animationMorphTargets","clips","CreateFromMorphTargetSequence","addNonemptyTrack","trackName","animationKeys","propertyName","destTracks","clipName","hierarchyTracks","hierarchy","morphTargetNames","morphTargetName","animationKey","boneName","typeName","getTrackTypeForValueTypeName","Cache","file","LoadingManager","isLoading","itemsLoaded","itemsTotal","urlModifier","setURLModifier","addHandler","regex","removeHandler","global","DefaultLoadingManager","loading","HttpError","_Error","_super110","_this92","_super111","_this93","req","Request","headers","Headers","credentials","responseType","fetch","ReadableStream","getReader","callbacks","reader","contentLength","total","lengthComputable","loaded","stream","readData","read","close","ProgressEvent","enqueue","Response","statusText","arrayBuffer","text","DOMParser","parseFromString","label","TextDecoder","decode","finally","AnimationLoader","_Loader2","_super112","CompressedTextureLoader","_Loader3","_super113","texDatas","mipmapCount","isCubemap","ImageLoader","_Loader4","_super114","onImageLoad","removeEventListeners","onImageError","_Loader5","_super115","urls","_Loader6","_super116","_Loader7","_super117","Light","_Object3D11","_super118","_this94","HemisphereLight","_Light","_super119","_this95","_projScreenMatrix$1","_lightPositionWorld$1","_lookTarget$1","LightShadow","_frameExtents","_viewportCount","_viewports","shadowMatrix","viewportIndex","SpotLightShadow","_LightShadow","_super120","_this96","isSpotLightShadow","_Light2","_super121","_this97","power","_lightPositionWorld","_lookTarget","PointLightShadow","_LightShadow2","_super122","_this98","_cubeDirections","_cubeUps","_Light3","_super123","_this99","DirectionalLightShadow","_LightShadow3","_super124","_this100","isDirectionalLightShadow","_Light4","_super125","_this101","AmbientLight","_Light5","_super126","_this102","RectAreaLight","_Light6","_super127","_this103","SphericalHarmonics3","isSphericalHarmonics3","coeff","shBasis","LightProbe","_Light7","_super128","_this104","MaterialLoader","_Loader8","_super129","_this105","getTexture","createMaterialFromType","decodeURIComponent","escape","lastIndexOf","InstancedBufferGeometry","_BufferGeometry16","_super130","_this106","BufferGeometryLoader","_Loader9","_super131","interleavedBufferMap","arrayBufferMap","getInterleavedBuffer","getArrayBuffer","typedArray","drawcalls","offsets","ObjectLoader","_Loader10","_super132","_loadAsync","_callee2","_context9","loadAsync","parseAsync","abrupt","_x7","_x8","parseAnimations","parseShapes","parseGeometries","parseImages","parseTextures","parseMaterials","parseObject","parseSkeletons","bindSkeletons","hasImages","_parseAsync","_callee3","_context10","parseImagesAsync","_x9","bufferGeometryLoader","setTextures","deserializeImage","loadImage","imageArray","deserializedImage","_parseImagesAsync","_callee5","_deserializeImage","currentUrl","_deserializedImage2","_context12","_callee4","_url","_context11","_x11","_x10","parseConstant","TEXTURE_MAPPING","TEXTURE_WRAPPING","TEXTURE_FILTER","getGeometry","getMaterial","isInteger","objectAnimations","_Loader11","_super133","_this107","fetchOptions","colorSpaceConversion","AudioContext","webkitAudioContext","AudioLoader","_Loader12","_super134","bufferCopy","decodeAudioData","audioBuffer","HemisphereLightProbe","_LightProbe","_super135","_this108","isHemisphereLightProbe","sky","AmbientLightProbe","_LightProbe2","_super136","_this109","isAmbientLightProbe","_eyeRight","_eyeLeft","_projectionMatrix","StereoCamera","eyeSep","xmin","xmax","eyeSepHalf","eyeSepOnProjection","ymax","Clock","autoStart","getElapsedTime","newTime","_position$1","_quaternion$1","_scale$1","_orientation$1","AudioListener","_Object3D12","_super137","_this110","gain","createGain","destination","timeDelta","_clock","setTargetAtTime","currentTime","positionX","linearRampToValueAtTime","positionY","positionZ","forwardX","forwardY","forwardZ","upX","upY","upZ","setPosition","setOrientation","Audio","_Object3D13","_super138","_this111","getInput","autoplay","detune","loopStart","loopEnd","playbackRate","isPlaying","hasPlaybackControl","sourceType","_startedAt","_progress","_connected","filters","audioNode","mediaElement","createMediaElementSource","mediaStream","createMediaStreamSource","play","createBufferSource","onended","onEnded","setDetune","setPlaybackRate","getOutput","getFilters","setFilters","_position","_quaternion","PositionalAudio","_Audio","_super139","_this112","panner","createPanner","panningModel","refDistance","rolloffFactor","distanceModel","coneInnerAngle","coneOuterAngle","coneOuterGain","orientationX","orientationY","orientationZ","AudioAnalyser","audio","fftSize","analyser","createAnalyser","frequencyBinCount","getByteFrequencyData","getFrequencyData","PropertyMixer","binding","mixFunction","mixFunctionAdditive","setIdentity","_slerp","_slerpAdditive","_setAdditiveIdentityQuaternion","_workIndex","_select","_setAdditiveIdentityOther","_lerp","_lerpAdditive","_setAdditiveIdentityNumeric","_mixBufferRegion","_mixBufferRegionAdditive","_setIdentity","_origIndex","_addIndex","cumulativeWeight","cumulativeWeightAdditive","useCount","referenceCount","accuIndex","currentWeight","mix","weightAdditive","originalValueOffset","getValue","targetIndex","workOffset","_RESERVED_CHARS_RE","_reservedRe","RegExp","_wordChar","_wordCharOrDot","_trackRe","_supportedObjectNames","Composite","targetGroup","optionalParsedPath","parsedPath","parseTrackName","_targetGroup","_bindings","subscribe_","firstValidIndex","nCachedObjects_","bindings","unbind","rootNode","findNode","_getValue_unbound","_setValue_unbound","targetObject","resolvedProperty","propertyIndex","dest","targetArray","objectName","_getValue_unavailable","_setValue_unavailable","objectIndex","nodeProperty","versioning","Versioning","None","NeedsUpdate","MatrixWorldNeedsUpdate","bindingType","BindingType","Direct","ArrayElement","HasFromToArray","EntireArray","GetterByBindingType","SetterByBindingTypeAndVersioning","isAnimationObjectGroup","matches","lastDot","getBoneByName","subTreeNode","searchNodeSubtree","childNode","_getValue_direct","_getValue_array","_getValue_arrayElement","_getValue_toArray","_setValue_direct","_setValue_direct_setNeedsUpdate","_setValue_direct_setMatrixWorldNeedsUpdate","_setValue_array","_setValue_array_setNeedsUpdate","_setValue_array_setMatrixWorldNeedsUpdate","_setValue_arrayElement","_setValue_arrayElement_setNeedsUpdate","_setValue_arrayElement_setMatrixWorldNeedsUpdate","_setValue_fromArray","_setValue_fromArray_setNeedsUpdate","_setValue_fromArray_setMatrixWorldNeedsUpdate","AnimationObjectGroup","_indicesByUUID","_paths","_parsedPaths","_bindingsIndicesByPath","stats","inUse","bindingsPerObject","indicesByUUID","paths","parsedPaths","nBindings","knownObject","nObjects","nCachedObjects","firstActiveIndex","lastCachedObject","bindingsForPath","lastCached","lastCachedIndex","firstActiveObject","firstActive","lastObject","indicesByPath","lastBindingsIndex","lastBindings","AnimationAction","mixer","localRoot","_mixer","_clip","_localRoot","nTracks","interpolants","interpolantSettings","_interpolantSettings","_interpolants","_propertyBindings","_cacheIndex","_byClipCacheIndex","_timeScaleInterpolant","_weightInterpolant","_loopCount","_startTime","_effectiveTimeScale","_effectiveWeight","repetitions","paused","clampWhenFinished","zeroSlopeAtStart","zeroSlopeAtEnd","_activateAction","_deactivateAction","stopFading","stopWarping","_isActiveAction","_scheduleFading","fadeOutAction","warp","fadeOut","fadeIn","fadeInDuration","fadeOutDuration","startEndRatio","endStartRatio","fadeInAction","crossFadeFrom","weightInterpolant","_takeBackControlInterpolant","startTimeScale","endTimeScale","_lendControlInterpolant","timeScaleInterpolant","_root","deltaTime","timeDirection","timeRunning","_updateTimeScale","clipTime","_updateTime","_updateWeight","propertyMixers","accumulateAdditive","accumulate","interpolantValue","loopCount","pingPong","_setEndings","handle_stop","loopDelta","atStart","atEnd","weightNow","weightThen","_controlInterpolantsResultBuffer","AnimationMixer","_EventDispatcher7","_super140","_this113","_initMemoryManager","_accuIndex","prototypeAction","rootUuid","bindingsByRoot","_bindingsByRootAndName","bindingsByName","_addInactiveBinding","clipUuid","actionsForClip","_actionsByClip","_bindAction","knownActions","_addInactiveAction","_lendBinding","saveOriginalState","_lendAction","restoreOriginalState","_takeBackBinding","_takeBackAction","_actions","_nActiveActions","_nActiveBindings","_controlInterpolants","_nActiveControlInterpolants","actions","controlInterpolants","actionsByClip","actionByRoot","lastInactiveAction","cacheIndex","knownActionsForClip","lastKnownAction","byClipCacheIndex","_removeInactiveBindingsForAction","_removeInactiveBinding","prevIndex","lastActiveIndex","firstInactiveAction","firstInactiveIndex","lastActiveAction","bindingByName","propBinding","lastInactiveBinding","firstInactiveBinding","lastActiveBinding","__cacheIndex","lastActiveInterpolant","optionalRoot","clipObject","findByName","existingAction","newAction","nActions","_update","timeInSeconds","actionsToRemove","_removeInactiveAction","UniformsGroup","_EventDispatcher8","_super141","_this114","isUniformsGroup","uniformsSource","InstancedInterleavedBuffer","_InterleavedBuffer","_super142","_this115","GLBufferAttribute","Raycaster","coords","ascSort","other","setFromCartesianCoords","Cylindrical","_vector$4","Box2","isBox2","_startP","_startEnd","Line3","clampToLine","startEnd2","closestPointToPointParameter","_vector$3","SpotLightHelper","_Object3D14","_super143","_this116","cone","coneLength","coneWidth","_vector$2","_boneMatrix","_matrixWorldInv","SkeletonHelper","_LineSegments","_super144","_this117","getBoneList","colors","isSkeletonHelper","boneList","PointLightHelper","_Mesh3","_super145","sphereSize","_this118","_vector$1","_color1","_color2","HemisphereLightHelper","_Object3D15","_super146","_this119","rotateY","GridHelper","_LineSegments2","_super147","_this120","PolarGridHelper","_LineSegments3","_super148","_this121","sectors","rings","_v1","_v2","_v3","DirectionalLightHelper","_Object3D16","_super149","_this122","lightPlane","targetLine","_vector","_camera","CameraHelper","_LineSegments4","_super150","_this123","pointMap","addLine","addPoint","colorFrustum","colorCone","colorUp","colorTarget","colorCross","setColors","colorAttribute","setPoint","_lineGeometry","_coneGeometry","_box","BoxHelper","_LineSegments5","_super151","_this124","setFromObject","Box3Helper","_LineSegments6","_super152","_this125","PlaneHelper","_Line3","_super153","_this126","_axis","ArrowHelper","_Object3D17","_super154","_this127","headLength","headWidth","setDirection","setLength","AxesHelper","_LineSegments7","_super155","_this128","xAxisColor","yAxisColor","zAxisColor","ShapePath","subPaths","currentPath","quadraticCurveTo","bezierCurveTo","splineThru","isCCW","isPointInsidePolygon","inPolygon","polyLen","edgeLowPt","edgeHighPt","edgeDx","edgeDy","perpEdge","solid","tmpPath","tmpShape","holesFirst","tmpPoints","tmpHoles","betterShapeHoles","newShapes","newShapeHoles","mainIdx","inSubpaths","toShapesNoHoles","ambiguous","toChange","sIdx","sLen","sho","hIdx","ho","hole_unassigned","s2Idx","_tables","_generateTables","floatView","uint32View","baseTable","shiftTable","mantissaTable","exponentTable","offsetTable","fromHalfFloat","ImmediateRenderObject","WebGLMultisampleRenderTarget","_WebGLRenderTarget5","_super156","_this129","DataTexture2DArray","_DataArrayTexture","_super157","DataTexture3D","_Data3DTexture","_super158","BoxBufferGeometry","_BoxGeometry","_super159","CapsuleBufferGeometry","_CapsuleGeometry","_super160","CircleBufferGeometry","_CircleGeometry","_super161","ConeBufferGeometry","_ConeGeometry","_super162","CylinderBufferGeometry","_CylinderGeometry2","_super163","DodecahedronBufferGeometry","_DodecahedronGeometry","_super164","ExtrudeBufferGeometry","_ExtrudeGeometry","_super165","IcosahedronBufferGeometry","_IcosahedronGeometry","_super166","LatheBufferGeometry","_LatheGeometry2","_super167","OctahedronBufferGeometry","_OctahedronGeometry","_super168","PlaneBufferGeometry","_PlaneGeometry","_super169","PolyhedronBufferGeometry","_PolyhedronGeometry5","_super170","RingBufferGeometry","_RingGeometry","_super171","ShapeBufferGeometry","_ShapeGeometry","_super172","SphereBufferGeometry","_SphereGeometry","_super173","TetrahedronBufferGeometry","_TetrahedronGeometry","_super174","TorusBufferGeometry","_TorusGeometry","_super175","TorusKnotBufferGeometry","_TorusKnotGeometry","_super176","TubeBufferGeometry","_TubeGeometry","_super177","revision","__THREE__"],"sourceRoot":""}